var $jscomp = {};
var shadow$provide = {};
if(typeof Math.imul == "undefined" || (Math.imul(0xffffffff,5) == 0)) {
    Math.imul = function (a, b) {
        var ah  = (a >>> 16) & 0xffff;
        var al = a & 0xffff;
        var bh  = (b >>> 16) & 0xffff;
        var bl = b & 0xffff;
        // the shift by 0 fixes the sign on the high part
        // the final |0 converts the unsigned value into a signed value
        return ((al * bl) + (((ah * bl + al * bh) << 16) >>> 0)|0);
    }
}
(function(){
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(pa){var va=0;return function(){return va<pa.length?{done:!1,value:pa[va++]}:{done:!0}}};$jscomp.arrayIterator=function(pa){return{next:$jscomp.arrayIteratorImpl(pa)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(pa,va,Fa){pa!=Array.prototype&&pa!=Object.prototype&&(pa[va]=Fa.value)};$jscomp.getGlobal=function(pa){return"undefined"!=typeof window&&window===pa?pa:"undefined"!=typeof global&&null!=global?global:pa};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(pa,va){this.$jscomp$symbol$id_=pa;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:va})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function pa(Fa){if(this instanceof pa)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(Fa||"")+"_"+va++,Fa)}var va=0;return pa}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var pa=$jscomp.global.Symbol.iterator;pa||(pa=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[pa]&&$jscomp.defineProperty(Array.prototype,pa,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var pa=$jscomp.global.Symbol.asyncIterator;pa||(pa=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(pa){$jscomp.initSymbolIterator();pa={next:pa};pa[$jscomp.global.Symbol.iterator]=function(){return this};return pa};
shadow$provide[0]=function(pa,va,Fa,qa){var a=Object.getOwnPropertySymbols,q=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;Fa.exports=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var k={};for(a=0;10>a;a++)k["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(k).map(function(a){return k[a]}).join(""))return!1;var m={};"abcdefghijklmnopqrst".split("").forEach(function(a){m[a]=
a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},m)).join("")?!1:!0}catch(h){return!1}}()?Object.assign:function(n,k){if(null===n||void 0===n)throw new TypeError("Object.assign cannot be called with null or undefined");var m=Object(n);for(var h,b=1;b<arguments.length;b++){var g=Object(arguments[b]);for(var e in g)q.call(g,e)&&(m[e]=g[e]);if(a){h=a(g);for(var t=0;t<h.length;t++)p.call(g,h[t])&&(m[h[t]]=g[h[t]])}}return m}};
shadow$provide[1]=function(pa,va,Fa,qa){function a(b){for(var a=b.message,c="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+a,d=1;d<arguments.length;d++)c+="\x26args[]\x3d"+encodeURIComponent(arguments[d]);b.message="Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ";return b}function q(b,a,c){this.props=b;this.context=a;this.refs=J;this.updater=c||L}function p(){}function n(b,a,c){this.props=
b;this.context=a;this.refs=J;this.updater=c||L}function k(b,a,c){var d=void 0,e={},f=null,g=null;if(null!=a)for(d in void 0!==a.ref&&(g=a.ref),void 0!==a.key&&(f=""+a.key),a)I.call(a,d)&&!N.hasOwnProperty(d)&&(e[d]=a[d]);var r=arguments.length-2;if(1===r)e.children=c;else if(1<r){for(var h=Array(r),l=0;l<r;l++)h[l]=arguments[l+2];e.children=h}if(b&&b.defaultProps)for(d in r=b.defaultProps,r)void 0===e[d]&&(e[d]=r[d]);return{$$typeof:y,type:b,key:f,ref:g,props:e,_owner:M.current}}function m(b,a){return{$$typeof:y,
type:b.type,key:a,ref:b.ref,props:b.props,_owner:b._owner}}function h(b){return"object"===typeof b&&null!==b&&b.$$typeof===y}function b(b){var a={"\x3d":"\x3d0",":":"\x3d2"};return"$"+(""+b).replace(/[=:]/g,function(b){return a[b]})}function g(b,a,c,d){if(P.length){var e=P.pop();e.result=b;e.keyPrefix=a;e.func=c;e.context=d;e.count=0;return e}return{result:b,keyPrefix:a,func:c,context:d,count:0}}function e(b){b.result=null;b.keyPrefix=null;b.func=null;b.context=null;b.count=0;10>P.length&&P.push(b)}
function t(b,c,d,e){var g=typeof b;if("undefined"===g||"boolean"===g)b=null;var r=!1;if(null===b)r=!0;else switch(g){case "string":case "number":r=!0;break;case "object":switch(b.$$typeof){case y:case A:r=!0}}if(r)return d(e,b,""===c?"."+f(b,0):c),1;r=0;c=""===c?".":c+":";if(Array.isArray(b))for(var h=0;h<b.length;h++){g=b[h];var l=c+f(g,h);r+=t(g,l,d,e)}else if(null===b||"object"!==typeof b?l=null:(l=F&&b[F]||b["@@iterator"],l="function"===typeof l?l:null),"function"===typeof l)for(b=l.call(b),h=
0;!(g=b.next()).done;)g=g.value,l=c+f(g,h++),r+=t(g,l,d,e);else if("object"===g)throw d=""+b,a(Error(31),"[object Object]"===d?"object with keys {"+Object.keys(b).join(", ")+"}":d,"");return r}function l(b,a,c){return null==b?0:t(b,"",a,c)}function f(a,c){return"object"===typeof a&&null!==a&&null!=a.key?b(a.key):c.toString(36)}function d(b,a){b.func.call(b.context,a,b.count++)}function c(b,a,c){var d=b.result,e=b.keyPrefix;b=b.func.call(b.context,a,b.count++);Array.isArray(b)?r(b,d,c,function(b){return b}):
null!=b&&(h(b)&&(b=m(b,e+(!b.key||a&&a.key===b.key?"":(""+b.key).replace(O,"$\x26/")+"/")+c)),d.push(b))}function r(b,a,d,f,r){var h="";null!=d&&(h=(""+d).replace(O,"$\x26/")+"/");a=g(a,h,f,r);l(b,c,a);e(a)}function u(){var b=H.current;if(null===b)throw a(Error(321));return b}var v=va(0),w="function"===typeof Symbol&&Symbol.for,y=w?Symbol.for("react.element"):60103,A=w?Symbol.for("react.portal"):60106;pa=w?Symbol.for("react.fragment"):60107;va=w?Symbol.for("react.strict_mode"):60108;qa=w?Symbol.for("react.profiler"):
60114;var z=w?Symbol.for("react.provider"):60109,x=w?Symbol.for("react.context"):60110,C=w?Symbol.for("react.forward_ref"):60112,B=w?Symbol.for("react.suspense"):60113,D=w?Symbol.for("react.suspense_list"):60120,G=w?Symbol.for("react.memo"):60115,E=w?Symbol.for("react.lazy"):60116;w&&Symbol.for("react.fundamental");w&&Symbol.for("react.responder");var F="function"===typeof Symbol&&Symbol.iterator,L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},
J={};q.prototype.isReactComponent={};q.prototype.setState=function(b,c){if("object"!==typeof b&&"function"!==typeof b&&null!=b)throw a(Error(85));this.updater.enqueueSetState(this,b,c,"setState")};q.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};p.prototype=q.prototype;w=n.prototype=new p;w.constructor=n;v(w,q.prototype);w.isPureReactComponent=!0;var H={current:null},K={suspense:null},M={current:null},I=Object.prototype.hasOwnProperty,N={key:!0,ref:!0,__self:!0,
__source:!0},O=/\/+/g,P=[];pa={Children:{map:function(b,a,c){if(null==b)return b;var d=[];r(b,d,null,a,c);return d},forEach:function(b,a,c){if(null==b)return b;a=g(null,null,a,c);l(b,d,a);e(a)},count:function(b){return l(b,function(){return null},null)},toArray:function(b){var a=[];r(b,a,null,function(b){return b});return a},only:function(b){if(!h(b))throw a(Error(143));return b}},createRef:function(){return{current:null}},Component:q,PureComponent:n,createContext:function(b,a){void 0===a&&(a=null);
b={$$typeof:x,_calculateChangedBits:a,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null};b.Provider={$$typeof:z,_context:b};return b.Consumer=b},forwardRef:function(b){return{$$typeof:C,render:b}},lazy:function(b){return{$$typeof:E,_ctor:b,_status:-1,_result:null}},memo:function(b,a){return{$$typeof:G,type:b,compare:void 0===a?null:a}},useCallback:function(b,a){return u().useCallback(b,a)},useContext:function(b,a){return u().useContext(b,a)},useEffect:function(b,a){return u().useEffect(b,
a)},useImperativeHandle:function(b,a,c){return u().useImperativeHandle(b,a,c)},useDebugValue:function(){},useLayoutEffect:function(b,a){return u().useLayoutEffect(b,a)},useMemo:function(b,a){return u().useMemo(b,a)},useReducer:function(b,a,c){return u().useReducer(b,a,c)},useRef:function(b){return u().useRef(b)},useState:function(b){return u().useState(b)},Fragment:pa,Profiler:qa,StrictMode:va,Suspense:B,unstable_SuspenseList:D,createElement:k,cloneElement:function(b,c,d){if(null===b||void 0===b)throw a(Error(267),
b);var e=void 0,f=v({},b.props),g=b.key,r=b.ref,h=b._owner;if(null!=c){void 0!==c.ref&&(r=c.ref,h=M.current);void 0!==c.key&&(g=""+c.key);var l=void 0;b.type&&b.type.defaultProps&&(l=b.type.defaultProps);for(e in c)I.call(c,e)&&!N.hasOwnProperty(e)&&(f[e]=void 0===c[e]&&void 0!==l?l[e]:c[e])}e=arguments.length-2;if(1===e)f.children=d;else if(1<e){l=Array(e);for(var u=0;u<e;u++)l[u]=arguments[u+2];f.children=l}return{$$typeof:y,type:b.type,key:g,ref:r,props:f,_owner:h}},createFactory:function(b){var a=
k.bind(null,b);a.type=b;return a},isValidElement:h,version:"16.9.0",unstable_withSuspenseConfig:function(b,a){var c=K.suspense;K.suspense=void 0===a?null:a;try{b()}finally{K.suspense=c}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:H,ReactCurrentBatchConfig:K,ReactCurrentOwner:M,IsSomeRendererActing:{current:!1},assign:v}};pa=(va={default:pa},pa)||va;Fa.exports=pa.default||pa};
shadow$provide[2]=function(pa,va,Fa,qa){Fa.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"};
shadow$provide[5]=function(pa,va,Fa,qa){Fa.exports=va(1)};
shadow$provide[6]=function(pa,va,Fa,qa){function a(b,a){var c=b.next;if(c===b)J=null;else{b===J&&(J=c);var d=b.previous;d.next=c;c.previous=d}b.next=b.previous=null;c=b.callback;d=M;var e=K;M=b.priorityLevel;K=b;try{var f=b.expirationTime<=a;switch(M){case 1:var g=c(f);break;case 2:g=c(f);break;case 3:g=c(f);break;case 4:g=c(f);break;case 5:g=c(f)}}catch(R){throw R;}finally{M=d,K=e}if("function"===typeof g)if(a=b.expirationTime,b.callback=g,null===J)J=b.next=b.previous=b;else{g=null;f=J;do{if(a<=
f.expirationTime){g=f;break}f=f.next}while(f!==J);null===g?g=J:g===J&&(J=b);a=g.previous;a.next=g.previous=b;b.next=g;b.previous=a}}function q(b){if(null!==H&&H.startTime<=b){do{var a=H,c=a.next;if(a===c)H=null;else{H=c;var d=a.previous;d.next=c;c.previous=d}a.next=a.previous=null;m(a,a.expirationTime)}while(null!==H&&H.startTime<=b)}}function p(a){O=!1;q(a);N||(null!==J?(N=!0,h(n)):null!==H&&b(p,H.startTime-a))}function n(c,d){N=!1;O&&(O=!1,g());q(d);I=!0;try{if(!c)for(;null!==J&&J.expirationTime<=
d;)a(J,d),d=qa.unstable_now(),q(d);else if(null!==J){do a(J,d),d=qa.unstable_now(),q(d);while(null!==J&&!e())}if(null!==J)return!0;null!==H&&b(p,H.startTime-d);return!1}finally{I=!1}}function k(b){switch(b){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1E4;default:return 5E3}}function m(b,a){if(null===J)J=b.next=b.previous=b;else{var c=null,d=J;do{if(a<d.expirationTime){c=d;break}d=d.next}while(d!==J);null===c?c=J:c===J&&(J=b);a=c.previous;a.next=c.previous=b;b.next=c;b.previous=
a}}Object.defineProperty(qa,"__esModule",{value:!0});var h=void 0,b=void 0,g=void 0,e=void 0;pa=void 0;qa.unstable_now=void 0;qa.unstable_forceFrameRate=void 0;if("undefined"===typeof window||"function"!==typeof MessageChannel){var t=null,l=null,f=function(){if(null!==t)try{var b=qa.unstable_now();t(!0,b);t=null}catch(Q){throw setTimeout(f,0),Q;}};qa.unstable_now=function(){return Date.now()};h=function(b){null!==t?setTimeout(h,0,b):(t=b,setTimeout(f,0))};b=function(b,a){l=setTimeout(b,a)};g=function(){clearTimeout(l)};
e=function(){return!1};pa=qa.unstable_forceFrameRate=function(){}}else{var d=window.performance,c=window.Date,r=window.setTimeout,u=window.clearTimeout,v=window.requestAnimationFrame;pa=window.cancelAnimationFrame;"undefined"!==typeof console&&("function"!==typeof v&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof pa&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));
qa.unstable_now="object"===typeof d&&"function"===typeof d.now?function(){return d.now()}:function(){return c.now()};var w=!1,y=null,A=-1,z=-1,x=33.33,C=-1,B=-1,D=0,G=!1;e=function(){return qa.unstable_now()>=D};pa=function(){};qa.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):0<b?(x=Math.floor(1E3/b),G=!0):(x=33.33,G=!1)};var E=function(){if(null!==y){var b=qa.unstable_now(),
a=0<D-b;try{y(a,b)||(y=null)}catch(T){throw F.postMessage(null),T;}}};va=new MessageChannel;var F=va.port2;va.port1.onmessage=E;var L=function(b){if(null===y)B=C=-1,w=!1;else{w=!0;v(function(b){u(A);L(b)});var a=function(){D=qa.unstable_now()+x/2;E();A=r(a,3*x)};A=r(a,3*x);if(-1!==C&&.1<b-C){var c=b-C;!G&&-1!==B&&c<x&&B<x&&(x=c<B?B:c,8.33>x&&(x=8.33));B=c}C=b;D=b+x;F.postMessage(null)}};h=function(b){y=b;w||(w=!0,v(function(b){L(b)}))};b=function(b,a){z=r(function(){b(qa.unstable_now())},a)};g=function(){u(z);
z=-1}}var J=null,H=null,K=null,M=3,I=!1,N=!1,O=!1;qa.unstable_ImmediatePriority=1;qa.unstable_UserBlockingPriority=2;qa.unstable_NormalPriority=3;qa.unstable_IdlePriority=5;qa.unstable_LowPriority=4;qa.unstable_runWithPriority=function(b,a){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var c=M;M=b;try{return a()}finally{M=c}};qa.unstable_next=function(b){switch(M){case 1:case 2:case 3:var a=3;break;default:a=M}var c=M;M=a;try{return b()}finally{M=c}};qa.unstable_scheduleCallback=
function(a,c,d){var e=qa.unstable_now();if("object"===typeof d&&null!==d){var f=d.delay;f="number"===typeof f&&0<f?e+f:e;d="number"===typeof d.timeout?d.timeout:k(a)}else d=k(a),f=e;d=f+d;a={callback:c,priorityLevel:a,startTime:f,expirationTime:d,next:null,previous:null};if(f>e){d=f;if(null===H)H=a.next=a.previous=a;else{c=null;var r=H;do{if(d<r.startTime){c=r;break}r=r.next}while(r!==H);null===c?c=H:c===H&&(H=a);d=c.previous;d.next=c.previous=a;a.next=c;a.previous=d}null===J&&H===a&&(O?g():O=!0,
b(p,f-e))}else m(a,d),N||I||(N=!0,h(n));return a};qa.unstable_cancelCallback=function(b){var a=b.next;if(null!==a){if(b===a)b===J?J=null:b===H&&(H=null);else{b===J?J=a:b===H&&(H=a);var c=b.previous;c.next=a;a.previous=c}b.next=b.previous=null}};qa.unstable_wrapCallback=function(b){var a=M;return function(){var c=M;M=a;try{return b.apply(this,arguments)}finally{M=c}}};qa.unstable_getCurrentPriorityLevel=function(){return M};qa.unstable_shouldYield=function(){var b=qa.unstable_now();q(b);return null!==
K&&null!==J&&J.startTime<=b&&J.expirationTime<K.expirationTime||e()};qa.unstable_requestPaint=pa;qa.unstable_continueExecution=function(){N||I||(N=!0,h(n))};qa.unstable_pauseExecution=function(){};qa.unstable_getFirstCallbackNode=function(){return J}};
shadow$provide[8]=function(pa,va,Fa,qa){Fa.exports=va(6)};
shadow$provide[9]=function(pa,va,Fa,qa){function a(b){for(var a=b.message,c="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+a,d=1;d<arguments.length;d++)c+="\x26args[]\x3d"+encodeURIComponent(arguments[d]);b.message="Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ";return b}function q(){if(Rg)for(var b in vf){var c=vf[b],d=Rg.indexOf(b);if(!(-1<d))throw a(Error(96),b);if(!vh[d]){if(!c.extractEvents)throw a(Error(97),
b);vh[d]=c;d=c.eventTypes;for(var e in d){var f=void 0,g=d[e],r=c,h=e;if(og.hasOwnProperty(h))throw a(Error(99),h);og[h]=g;var l=g.phasedRegistrationNames;if(l){for(f in l)l.hasOwnProperty(f)&&p(l[f],r,h);f=!0}else g.registrationName?(p(g.registrationName,r,h),f=!0):f=!1;if(!f)throw a(Error(98),e,b);}}}}function p(b,c,d){if(wf[b])throw a(Error(100),b);wf[b]=c;ke[b]=c.eventTypes[d].dependencies}function n(b,a,c,d,e,f,g,r,h){var l=Array.prototype.slice.call(arguments,3);try{a.apply(c,l)}catch(hj){this.onError(hj)}}
function k(b,a,c,d,e,f,g,r,h){ta=!1;La=null;n.apply(oi,arguments)}function m(b,c,d,e,f,g,r,h,l){k.apply(this,arguments);if(ta){if(ta){var u=La;ta=!1;La=null}else throw a(Error(198));Vd||(Vd=!0,Rf=u)}}function h(b,a,c){var d=b.type||"unknown-event";b.currentTarget=lb(c);m(d,a,void 0,b);b.currentTarget=null}function b(b,c){if(null==c)throw a(Error(30));if(null==b)return c;if(Array.isArray(b)){if(Array.isArray(c))return b.push.apply(b,c),b;b.push(c);return b}return Array.isArray(c)?[b].concat(c):[b,
c]}function g(b,a,c){Array.isArray(b)?b.forEach(a,c):b&&a.call(c,b)}function e(b){if(b){var a=b._dispatchListeners,c=b._dispatchInstances;if(Array.isArray(a))for(var d=0;d<a.length&&!b.isPropagationStopped();d++)h(b,a[d],c[d]);else a&&h(b,a,c);b._dispatchListeners=null;b._dispatchInstances=null;b.isPersistent()||b.constructor.release(b)}}function t(c){null!==c&&(hd=b(hd,c));c=hd;hd=null;if(c){g(c,e);if(hd)throw a(Error(95));if(Vd)throw c=Rf,Vd=!1,Rf=null,c;}}function l(b,c){var d=b.stateNode;if(!d)return null;
var e=Ha(d);if(!e)return null;d=e[c];a:switch(c){case "onClick":case "onClickCapture":case "onDoubleClick":case "onDoubleClickCapture":case "onMouseDown":case "onMouseDownCapture":case "onMouseMove":case "onMouseMoveCapture":case "onMouseUp":case "onMouseUpCapture":(e=!e.disabled)||(b=b.type,e=!("button"===b||"input"===b||"select"===b||"textarea"===b));b=!e;break a;default:b=!1}if(b)return null;if(d&&"function"!==typeof d)throw a(Error(231),c,typeof d);return d}function f(b){if(b[le])return b[le];
for(;!b[le];)if(b.parentNode)b=b.parentNode;else return null;b=b[le];return 5===b.tag||6===b.tag?b:null}function d(b){b=b[le];return!b||5!==b.tag&&6!==b.tag?null:b}function c(b){if(5===b.tag||6===b.tag)return b.stateNode;throw a(Error(33));}function r(b){return b[xf]||null}function u(b){do b=b.return;while(b&&5!==b.tag);return b?b:null}function v(a,c,d){if(c=l(a,d.dispatchConfig.phasedRegistrationNames[c]))d._dispatchListeners=b(d._dispatchListeners,c),d._dispatchInstances=b(d._dispatchInstances,
a)}function w(b){if(b&&b.dispatchConfig.phasedRegistrationNames){for(var a=b._targetInst,c=[];a;)c.push(a),a=u(a);for(a=c.length;0<a--;)v(c[a],"captured",b);for(a=0;a<c.length;a++)v(c[a],"bubbled",b)}}function y(a,c,d){a&&d&&d.dispatchConfig.registrationName&&(c=l(a,d.dispatchConfig.registrationName))&&(d._dispatchListeners=b(d._dispatchListeners,c),d._dispatchInstances=b(d._dispatchInstances,a))}function A(b){b&&b.dispatchConfig.registrationName&&y(b._targetInst,null,b)}function z(b){g(b,w)}function x(b,
a){var c={};c[b.toLowerCase()]=a.toLowerCase();c["Webkit"+b]="webkit"+a;c["Moz"+b]="moz"+a;return c}function C(b){if(sb[b])return sb[b];if(!Wd[b])return b;var a=Wd[b],c;for(c in a)if(a.hasOwnProperty(c)&&c in Sf)return sb[b]=a[c];return b}function B(){if(Yh)return Yh;var b,a=Je,c=a.length,d,e="value"in tc?tc.value:tc.textContent,f=e.length;for(b=0;b<c&&a[b]===e[b];b++);var g=c-b;for(d=1;d<=g&&a[c-d]===e[f-d];d++);return Yh=e.slice(b,1<d?1-d:void 0)}function D(){return!0}function G(){return!1}function E(b,
a,c,d){this.dispatchConfig=b;this._targetInst=a;this.nativeEvent=c;b=this.constructor.Interface;for(var e in b)b.hasOwnProperty(e)&&((a=b[e])?this[e]=a(c):"target"===e?this.target=d:this[e]=c[e]);this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?D:G;this.isPropagationStopped=G;return this}function F(b,a,c,d){if(this.eventPool.length){var e=this.eventPool.pop();this.call(e,b,a,c,d);return e}return new this(b,a,c,d)}function L(b){if(!(b instanceof this))throw a(Error(279));
b.destructor();10>this.eventPool.length&&this.eventPool.push(b)}function J(b){b.eventPool=[];b.getPooled=F;b.release=L}function H(b,a){switch(b){case "keyup":return-1!==wh.indexOf(a.keyCode);case "keydown":return 229!==a.keyCode;case "keypress":case "mousedown":case "blur":return!0;default:return!1}}function K(b){b=b.detail;return"object"===typeof b&&"data"in b?b.data:null}function M(b,a){switch(b){case "compositionend":return K(a);case "keypress":if(32!==a.which)return null;pi=!0;return Ke;case "textInput":return b=
a.data,b===Ke&&pi?null:b;default:return null}}function I(b,a){if(Ec)return"compositionend"===b||!Vc&&H(b,a)?(b=B(),Yh=Je=tc=null,Ec=!1,b):null;switch(b){case "paste":return null;case "keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case "compositionend":return Tf&&"ko"!==a.locale?null:a.data;default:return null}}function N(b){if(b=mb(b)){if("function"!==typeof Zh)throw a(Error(280));
var c=Ha(b.stateNode);Zh(b.stateNode,b.type,c)}}function O(b){pg?Uf?Uf.push(b):Uf=[b]:pg=b}function P(){if(pg){var b=pg,a=Uf;Uf=pg=null;N(b);if(a)for(b=0;b<a.length;b++)N(a[b])}}function Q(b,a){return b(a)}function T(b,a,c,d){return b(a,c,d)}function V(){}function Y(){if(null!==pg||null!==Uf)V(),P()}function ca(b){var a=b&&b.nodeName&&b.nodeName.toLowerCase();return"input"===a?!!me[b.type]:"textarea"===a?!0:!1}function Z(b){b=b.target||b.srcElement||window;b.correspondingUseElement&&(b=b.correspondingUseElement);
return 3===b.nodeType?b.parentNode:b}function R(b){if(!Vf)return!1;b="on"+b;var a=b in document;a||(a=document.createElement("div"),a.setAttribute(b,"return;"),a="function"===typeof a[b]);return a}function U(b){var a=b.type;return(b=b.nodeName)&&"input"===b.toLowerCase()&&("checkbox"===a||"radio"===a)}function X(b){var a=U(b)?"checked":"value",c=Object.getOwnPropertyDescriptor(b.constructor.prototype,a),d=""+b[a];if(!b.hasOwnProperty(a)&&"undefined"!==typeof c&&"function"===typeof c.get&&"function"===
typeof c.set){var e=c.get,f=c.set;Object.defineProperty(b,a,{configurable:!0,get:function(){return e.call(this)},set:function(b){d=""+b;f.call(this,b)}});Object.defineProperty(b,a,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(b){d=""+b},stopTracking:function(){b._valueTracker=null;delete b[a]}}}}function ea(b){b._valueTracker||(b._valueTracker=X(b))}function fa(b){if(!b)return!1;var a=b._valueTracker;if(!a)return!0;var c=a.getValue(),d="";b&&(d=U(b)?b.checked?"true":
"false":b.value);b=d;return b!==c?(a.setValue(b),!0):!1}function la(b){if(null===b||"object"!==typeof b)return null;b=xh&&b[xh]||b["@@iterator"];return"function"===typeof b?b:null}function da(b){if(null==b)return null;if("function"===typeof b)return b.displayName||b.name||null;if("string"===typeof b)return b;switch(b){case Jd:return"Fragment";case Le:return"Portal";case qi:return"Profiler";case Ti:return"StrictMode";case Me:return"Suspense";case Wf:return"SuspenseList"}if("object"===typeof b)switch(b.$$typeof){case Gi:return"Context.Consumer";
case Ui:return"Context.Provider";case Tg:var a=b.render;a=a.displayName||a.name||"";return b.displayName||(""!==a?"ForwardRef("+a+")":"ForwardRef");case yf:return da(b.type);case Xf:if(b=1===b._status?b._result:null)return da(b)}return null}function ma(b){var a="";do{a:switch(b.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c="";break a;default:var d=b._debugOwner,e=b._debugSource,f=da(b.type);c=null;d&&(c=da(d.type));d=f;f="";e?f=" (at "+e.fileName.replace(zf,"")+":"+e.lineNumber+")":c&&(f=
" (created by "+c+")");c="\n    in "+(d||"Unknown")+f}a+=c;b=b.return}while(b);return a}function aa(b){if(qg.call(Yf,b))return!0;if(qg.call(ri,b))return!1;if(yh.test(b))return Yf[b]=!0;ri[b]=!0;return!1}function na(b,a,c,d){if(null!==c&&0===c.type)return!1;switch(typeof a){case "function":case "symbol":return!0;case "boolean":if(d)return!1;if(null!==c)return!c.acceptsBooleans;b=b.toLowerCase().slice(0,5);return"data-"!==b&&"aria-"!==b;default:return!1}}function ha(b,a,c,d){if(null===a||"undefined"===
typeof a||na(b,a,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!a;case 4:return!1===a;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function ja(b,a,c,d,e,f){this.acceptsBooleans=2===a||3===a||4===a;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=b;this.type=a;this.sanitizeURL=f}function oa(b){return b[1].toUpperCase()}function ka(b,a,c,d){var e=id.hasOwnProperty(a)?id[a]:null;(null!==e?0===e.type:d?0:2<a.length&&("o"===a[0]||
"O"===a[0])&&("n"===a[1]||"N"===a[1]))||(ha(a,c,e,d)&&(c=null),d||null===e?aa(a)&&(null===c?b.removeAttribute(a):b.setAttribute(a,""+c)):e.mustUseProperty?b[e.propertyName]=null===c?3===e.type?!1:"":c:(a=e.attributeName,d=e.attributeNamespace,null===c?b.removeAttribute(a):(e=e.type,c=3===e||4===e&&!0===c?"":""+c,d?b.setAttributeNS(d,a,c):b.setAttribute(a,c))))}function ia(b){switch(typeof b){case "boolean":case "number":case "object":case "string":case "undefined":return b;default:return""}}function xa(b,
a){var c=a.checked;return sd({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:b._wrapperState.initialChecked})}function ya(b,a){var c=null==a.defaultValue?"":a.defaultValue,d=null!=a.checked?a.checked:a.defaultChecked;c=ia(null!=a.value?a.value:c);b._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===a.type||"radio"===a.type?null!=a.checked:null!=a.value}}function sa(b,a){a=a.checked;null!=a&&ka(b,"checked",a,!1)}function W(b,a){sa(b,a);var c=ia(a.value),
d=a.type;if(null!=c)if("number"===d){if(0===c&&""===b.value||b.value!=c)b.value=""+c}else b.value!==""+c&&(b.value=""+c);else if("submit"===d||"reset"===d){b.removeAttribute("value");return}a.hasOwnProperty("value")?Da(b,a.type,c):a.hasOwnProperty("defaultValue")&&Da(b,a.type,ia(a.defaultValue));null==a.checked&&null!=a.defaultChecked&&(b.defaultChecked=!!a.defaultChecked)}function za(b,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var d=a.type;if(!("submit"!==d&&"reset"!==
d||void 0!==a.value&&null!==a.value))return;a=""+b._wrapperState.initialValue;c||a===b.value||(b.value=a);b.defaultValue=a}c=b.name;""!==c&&(b.name="");b.defaultChecked=!b.defaultChecked;b.defaultChecked=!!b._wrapperState.initialChecked;""!==c&&(b.name=c)}function Da(b,a,c){if("number"!==a||b.ownerDocument.activeElement!==b)null==c?b.defaultValue=""+b._wrapperState.initialValue:b.defaultValue!==""+c&&(b.defaultValue=""+c)}function ra(b,a,c){b=E.getPooled(S.change,b,a,c);b.type="change";O(c);z(b);
return b}function ua(b){t(b)}function Aa(b){var a=c(b);if(fa(a))return b}function wa(b,a){if("change"===b)return a}function Ma(){ne&&(ne.detachEvent("onpropertychange",ba),Kd=ne=null)}function ba(b){if("value"===b.propertyName&&Aa(Kd))if(b=ra(Kd,b,Z(b)),Ld)t(b);else{Ld=!0;try{Q(ua,b)}finally{Ld=!1,Y()}}}function Ea(b,a,c){"focus"===b?(Ma(),ne=a,Kd=c,ne.attachEvent("onpropertychange",ba)):"blur"===b&&Ma()}function Ba(b){if("selectionchange"===b||"keyup"===b||"keydown"===b)return Aa(Kd)}function Na(b,
a){if("click"===b)return Aa(a)}function Ja(b,a){if("input"===b||"change"===b)return Aa(a)}function Lb(b){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(b):(b=Ia[b])?!!a[b]:!1}function Mb(){return Lb}function Pa(b,a){return b===a&&(0!==b||1/b===1/a)||b!==b&&a!==a}function zb(b,a){if(Pa(b,a))return!0;if("object"!==typeof b||null===b||"object"!==typeof a||null===a)return!1;var c=Object.keys(b),d=Object.keys(a);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!Ug.call(a,
c[d])||!Pa(b[c[d]],a[c[d]]))return!1;return!0}function cb(b,a){return{responder:b,props:a}}function ub(b){var a=b;if(b.alternate)for(;a.return;)a=a.return;else{if(0!==(a.effectTag&2))return 1;for(;a.return;)if(a=a.return,0!==(a.effectTag&2))return 1}return 3===a.tag?2:3}function db(b){if(2!==ub(b))throw a(Error(188));}function ab(b){var c=b.alternate;if(!c){c=ub(b);if(3===c)throw a(Error(188));return 1===c?null:b}for(var d=b,e=c;;){var f=d.return;if(null===f)break;var g=f.alternate;if(null===g){e=
f.return;if(null!==e){d=e;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===d)return db(f),b;if(g===e)return db(f),c;g=g.sibling}throw a(Error(188));}if(d.return!==e.return)d=f,e=g;else{for(var r=!1,h=f.child;h;){if(h===d){r=!0;d=f;e=g;break}if(h===e){r=!0;e=f;d=g;break}h=h.sibling}if(!r){for(h=g.child;h;){if(h===d){r=!0;d=g;e=f;break}if(h===e){r=!0;e=g;d=f;break}h=h.sibling}if(!r)throw a(Error(189));}}if(d.alternate!==e)throw a(Error(190));}if(3!==d.tag)throw a(Error(188));return d.stateNode.current===
d?b:c}function eb(b){b=ab(b);if(!b)return null;for(var a=b;;){if(5===a.tag||6===a.tag)return a;if(a.child)a.child.return=a,a=a.child;else{if(a===b)break;for(;!a.sibling;){if(!a.return||a.return===b)return null;a=a.return}a.sibling.return=a.return;a=a.sibling}}return null}function gb(b){var a=b.keyCode;"charCode"in b?(b=b.charCode,0===b&&13===a&&(b=13)):b=a;10===b&&(b=13);return 32<=b||13===b?b:0}function jb(a){var c=a.targetInst,d=c;do{if(!d){a.ancestors.push(d);break}var e;for(e=d;e.return;)e=e.return;
e=3!==e.tag?null:e.stateNode.containerInfo;if(!e)break;a.ancestors.push(d);d=f(e)}while(d);for(d=0;d<a.ancestors.length;d++){c=a.ancestors[d];var g=Z(a.nativeEvent);e=a.topLevelType;for(var r=a.nativeEvent,h=null,l=0;l<vh.length;l++){var u=vh[l];u&&(u=u.extractEvents(e,c,r,g))&&(h=b(h,u))}t(h)}}function Oa(b,a){Za(a,b,!1)}function Za(b,a,c){switch(si(a)){case 0:var d=Wc.bind(null,a,1);break;case 1:d=vb.bind(null,a,1);break;default:d=Nb.bind(null,a,1)}c?b.addEventListener(a,d,!0):b.addEventListener(a,
d,!1)}function Wc(b,a,c){Ld||V();var d=Nb,e=Ld;Ld=!0;try{T(d,b,a,c)}finally{(Ld=e)||Y()}}function vb(b,a,c){Nb(b,a,c)}function Nb(b,a,c){if(Vg){a=Z(c);a=f(a);null===a||"number"!==typeof a.tag||2===ub(a)||(a=null);if(Wg.length){var d=Wg.pop();d.topLevelType=b;d.nativeEvent=c;d.targetInst=a;b=d}else b={topLevelType:b,nativeEvent:c,targetInst:a,ancestors:[]};try{if(c=b,Ld)jb(c,void 0);else{Ld=!0;try{rg(jb,c,void 0)}finally{Ld=!1,Y()}}}finally{b.topLevelType=null,b.nativeEvent=null,b.targetInst=null,
b.ancestors.length=0,10>Wg.length&&Wg.push(b)}}}function Ya(b){var a=zh.get(b);void 0===a&&(a=new Set,zh.set(b,a));return a}function td(b){b=b||("undefined"!==typeof document?document:void 0);if("undefined"===typeof b)return null;try{return b.activeElement||b.body}catch(oj){return b.body}}function mc(b){for(;b&&b.firstChild;)b=b.firstChild;return b}function ud(b,a){var c=mc(b);b=0;for(var d;c;){if(3===c.nodeType){d=b+c.textContent.length;if(b<=a&&d>=a)return{node:c,offset:a-b};b=d}a:{for(;c;){if(c.nextSibling){c=
c.nextSibling;break a}c=c.parentNode}c=void 0}c=mc(c)}}function Nc(b,a){return b&&a?b===a?!0:b&&3===b.nodeType?!1:a&&3===a.nodeType?Nc(b,a.parentNode):"contains"in b?b.contains(a):b.compareDocumentPosition?!!(b.compareDocumentPosition(a)&16):!1:!1}function Hb(){for(var b=window,a=td();a instanceof b.HTMLIFrameElement;){try{var c="string"===typeof a.contentWindow.location.href}catch($i){c=!1}if(c)b=a.contentWindow;else break;a=td(b.document)}return a}function Yb(b){var a=b&&b.nodeName&&b.nodeName.toLowerCase();
return a&&("input"===a&&("text"===b.type||"search"===b.type||"tel"===b.type||"url"===b.type||"password"===b.type)||"textarea"===a||"true"===b.contentEditable)}function uc(b,a){var c=a.window===a?a.document:9===a.nodeType?a:a.ownerDocument;if(sg||null==ef||ef!==td(c))return null;c=ef;"selectionStart"in c&&Yb(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,
focusOffset:c.focusOffset});return ff&&zb(ff,c)?null:(ff=c,b=E.getPooled(Xg.select,tg,b,a),b.type="select",b.target=ef,z(b),b)}function $a(b){var a="";ug.Children.forEach(b,function(b){null!=b&&(a+=b)});return a}function Xd(b,a){b=sd({children:void 0},a);if(a=$a(a.children))b.children=a;return b}function Fc(b,a,c,d){b=b.options;if(a){a={};for(var e=0;e<c.length;e++)a["$"+c[e]]=!0;for(c=0;c<b.length;c++)e=a.hasOwnProperty("$"+b[c].value),b[c].selected!==e&&(b[c].selected=e),e&&d&&(b[c].defaultSelected=
!0)}else{c=""+ia(c);a=null;for(e=0;e<b.length;e++){if(b[e].value===c){b[e].selected=!0;d&&(b[e].defaultSelected=!0);return}null!==a||b[e].disabled||(a=b[e])}null!==a&&(a.selected=!0)}}function Md(b,c){if(null!=c.dangerouslySetInnerHTML)throw a(Error(91));return sd({},c,{value:void 0,defaultValue:void 0,children:""+b._wrapperState.initialValue})}function nc(b,c){var d=c.value;if(null==d){d=c.defaultValue;c=c.children;if(null!=c){if(null!=d)throw a(Error(92));if(Array.isArray(c)){if(!(1>=c.length))throw a(Error(93));
c=c[0]}d=c}null==d&&(d="")}b._wrapperState={initialValue:ia(d)}}function Yd(b,a){var c=ia(a.value),d=ia(a.defaultValue);null!=c&&(c=""+c,c!==b.value&&(b.value=c),null==a.defaultValue&&b.defaultValue!==c&&(b.defaultValue=c));null!=d&&(b.defaultValue=""+d)}function Ub(b){var a=b.textContent;a===b._wrapperState.initialValue&&(b.value=a)}function Oc(b){switch(b){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}
function pb(b,a){return null==b||"http://www.w3.org/1999/xhtml"===b?Oc(a):"http://www.w3.org/2000/svg"===b&&"foreignObject"===a?"http://www.w3.org/1999/xhtml":b}function Nd(b,a){if(a){var c=b.firstChild;if(c&&c===b.lastChild&&3===c.nodeType){c.nodeValue=a;return}}b.textContent=a}function Xc(b,a,c){return null==a||"boolean"===typeof a||""===a?"":c||"number"!==typeof a||0===a||Ga.hasOwnProperty(b)&&Ga[b]?(""+a).trim():a+"px"}function Yg(b,a){b=b.style;for(var c in a)if(a.hasOwnProperty(c)){var d=0===
c.indexOf("--"),e=Xc(c,a[c],d);"float"===c&&(c="cssFloat");d?b.setProperty(c,e):b[c]=e}}function vc(b,c){if(c){if(Af[b]&&(null!=c.children||null!=c.dangerouslySetInnerHTML))throw a(Error(137),b,"");if(null!=c.dangerouslySetInnerHTML){if(null!=c.children)throw a(Error(60));if(!("object"===typeof c.dangerouslySetInnerHTML&&"__html"in c.dangerouslySetInnerHTML))throw a(Error(61));}if(null!=c.style&&"object"!==typeof c.style)throw a(Error(62),"");}}function Ka(b,a){if(-1===b.indexOf("-"))return"string"===
typeof a.is;switch(b){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return!1;default:return!0}}function Pc(b,a){b=9===b.nodeType||11===b.nodeType?b:b.ownerDocument;var c=Ya(b);a=ke[a];for(var d=0;d<a.length;d++){var e=a[d];if(!c.has(e)){switch(e){case "scroll":Za(b,"scroll",!0);break;case "focus":case "blur":Za(b,"focus",!0);Za(b,"blur",!0);c.add("blur");c.add("focus");break;
case "cancel":case "close":R(e)&&Za(b,e,!0);break;case "invalid":case "submit":case "reset":break;default:-1===vg.indexOf(e)&&Oa(e,b)}c.add(e)}}}function Qc(){}function Zg(b,a){switch(b){case "button":case "input":case "select":case "textarea":return!!a.autoFocus}return!1}function gf(b,a){return"textarea"===b||"option"===b||"noscript"===b||"string"===typeof a.children||"number"===typeof a.children||"object"===typeof a.dangerouslySetInnerHTML&&null!==a.dangerouslySetInnerHTML&&null!=a.dangerouslySetInnerHTML.__html}
function Vb(b){for(;null!=b;b=b.nextSibling){var a=b.nodeType;if(1===a||3===a)break}return b}function fb(b){0>wg||(b.current=$g[wg],$g[wg]=null,wg--)}function Ib(b,a){wg++;$g[wg]=b.current;b.current=a}function vd(b,a){var c=b.type.contextTypes;if(!c)return Bf;var d=b.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===a)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=a[f];d&&(b=b.stateNode,b.__reactInternalMemoizedUnmaskedChildContext=a,b.__reactInternalMemoizedMaskedChildContext=
e);return e}function Qb(b){b=b.childContextTypes;return null!==b&&void 0!==b}function oe(b){fb(Yc,b);fb(ad,b)}function fc(b){fb(Yc,b);fb(ad,b)}function pe(b,c,d){if(ad.current!==Bf)throw a(Error(168));Ib(ad,c,b);Ib(Yc,d,b)}function ij(b,c,d){var e=b.stateNode;b=c.childContextTypes;if("function"!==typeof e.getChildContext)return d;e=e.getChildContext();for(var f in e)if(!(f in b))throw a(Error(108),da(c)||"Unknown",f);return sd({},d,e)}function qe(b){var a=b.stateNode;a=a&&a.__reactInternalMemoizedMergedChildContext||
Bf;Rc=ad.current;Ib(ad,a,b);Ib(Yc,Yc.current,b);return!0}function Ta(b,c,d){var e=b.stateNode;if(!e)throw a(Error(169));d?(c=ij(b,c,Rc),e.__reactInternalMemoizedMergedChildContext=c,fb(Yc,b),fb(ad,b),Ib(ad,c,b)):fb(Yc,b);Ib(Yc,d,b)}function xg(){switch(Ne()){case re:return 99;case ah:return 98;case yg:return 97;case Cf:return 96;case Oe:return 95;default:throw a(Error(332));}}function oc(b){switch(b){case 99:return re;case 98:return ah;case 97:return yg;case 96:return Cf;case 95:return Oe;default:throw a(Error(332));
}}function kb(b,a){b=oc(b);return Ah(b,a)}function ic(b,a,c){b=oc(b);return bh(b,a,c)}function jd(b){null===Gc?(Gc=[b],Hc=bh(re,wd)):Gc.push(b);return Hi}function Zb(){null!==Hc&&Wb(Hc);wd()}function wd(){if(!bd&&null!==Gc){bd=!0;var b=0;try{var a=Gc;kb(99,function(){for(;b<a.length;b++){var c=a[b];do c=c(!0);while(null!==c)}});Gc=null}catch(df){throw null!==Gc&&(Gc=Gc.slice(b+1)),bh(re,Zb),df;}finally{bd=!1}}}function hb(b,a){if(1073741823===a)return 99;if(1===a)return 95;b=10*(1073741821-a)-10*
(1073741821-b);return 0>=b?99:250>=b?98:5250>=b?97:95}function nb(b,a){if(b&&b.defaultProps){a=sd({},a);b=b.defaultProps;for(var c in b)void 0===a[c]&&(a[c]=b[c])}return a}function se(b){var a=b._result;switch(b._status){case 1:return a;case 2:throw a;case 0:throw a;default:b._status=0;a=b._ctor;a=a();a.then(function(a){0===b._status&&(a=a.default,b._status=1,b._result=a)},function(a){0===b._status&&(b._status=2,b._result=a)});switch(b._status){case 1:return b._result;case 2:throw b._result;}b._result=
a;throw a;}}function Ic(b,a){var c=b.type._context;Ib(kd,c._currentValue,b);c._currentValue=a}function Od(b){var a=kd.current;fb(kd,b);b.type._context._currentValue=a}function wc(b,a){for(;null!==b;){var c=b.alternate;if(b.childExpirationTime<a)b.childExpirationTime=a,null!==c&&c.childExpirationTime<a&&(c.childExpirationTime=a);else if(null!==c&&c.childExpirationTime<a)c.childExpirationTime=a;else break;b=b.return}}function Jc(b,a){te=b;zg=$b=null;b=b.dependencies;null!==b&&null!==b.firstContext&&
(b.expirationTime>=a&&(Rb=!0),b.firstContext=null)}function pc(b,c){if(zg!==b&&!1!==c&&0!==c){if("number"!==typeof c||1073741823===c)zg=b,c=1073741823;c={context:b,observedBits:c,next:null};if(null===$b){if(null===te)throw a(Error(308));$b=c;te.dependencies={expirationTime:0,firstContext:c,responders:null}}else $b=$b.next=c}return b._currentValue}function Db(b){return{baseState:b,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,
lastCapturedEffect:null}}function wb(b){return{baseState:b.baseState,firstUpdate:b.firstUpdate,lastUpdate:b.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function ac(b,a){return{expirationTime:b,suspenseConfig:a,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Zc(b,a){null===b.lastUpdate?b.firstUpdate=b.lastUpdate=a:(b.lastUpdate.next=a,b.lastUpdate=a)}function Pe(b,a){var c=b.alternate;
if(null===c){var d=b.updateQueue,e=null;null===d&&(d=b.updateQueue=Db(b.memoizedState))}else d=b.updateQueue,e=c.updateQueue,null===d?null===e?(d=b.updateQueue=Db(b.memoizedState),e=c.updateQueue=Db(c.memoizedState)):d=b.updateQueue=wb(e):null===e&&(e=c.updateQueue=wb(d));null===e||d===e?Zc(d,a):null===d.lastUpdate||null===e.lastUpdate?(Zc(d,a),Zc(e,a)):(Zc(d,a),e.lastUpdate=a)}function Bh(b,a){var c=b.updateQueue;c=null===c?b.updateQueue=Db(b.memoizedState):Df(b,c);null===c.lastCapturedUpdate?c.firstCapturedUpdate=
c.lastCapturedUpdate=a:(c.lastCapturedUpdate.next=a,c.lastCapturedUpdate=a)}function Df(b,a){var c=b.alternate;null!==c&&a===c.updateQueue&&(a=b.updateQueue=wb(a));return a}function qc(b,a,c,d,e,f){switch(c.tag){case 1:return b=c.payload,"function"===typeof b?b.call(f,d,e):b;case 3:b.effectTag=b.effectTag&-2049|64;case 0:b=c.payload;e="function"===typeof b?b.call(f,d,e):b;if(null===e||void 0===e)break;return sd({},d,e);case 2:ue=!0}return d}function xd(b,a,c,d,e){ue=!1;a=Df(b,a);for(var f=a.baseState,
g=null,r=0,h=a.firstUpdate,l=f;null!==h;){var u=h.expirationTime;u<e?(null===g&&(g=h,f=l),r<u&&(r=u)):(ch(u,h.suspenseConfig),l=qc(b,a,h,l,c,d),null!==h.callback&&(b.effectTag|=32,h.nextEffect=null,null===a.lastEffect?a.firstEffect=a.lastEffect=h:(a.lastEffect.nextEffect=h,a.lastEffect=h)));h=h.next}u=null;for(h=a.firstCapturedUpdate;null!==h;){var t=h.expirationTime;t<e?(null===u&&(u=h,null===g&&(f=l)),r<t&&(r=t)):(l=qc(b,a,h,l,c,d),null!==h.callback&&(b.effectTag|=32,h.nextEffect=null,null===a.lastCapturedEffect?
a.firstCapturedEffect=a.lastCapturedEffect=h:(a.lastCapturedEffect.nextEffect=h,a.lastCapturedEffect=h)));h=h.next}null===g&&(a.lastUpdate=null);null===u?a.lastCapturedUpdate=null:b.effectTag|=32;null===g&&null===u&&(f=l);a.baseState=f;a.firstUpdate=g;a.firstCapturedUpdate=u;b.expirationTime=r;b.memoizedState=l}function Zf(b,a,c){null!==a.firstCapturedUpdate&&(null!==a.lastUpdate&&(a.lastUpdate.next=a.firstCapturedUpdate,a.lastUpdate=a.lastCapturedUpdate),a.firstCapturedUpdate=a.lastCapturedUpdate=
null);ob(a.firstEffect,c);a.firstEffect=a.lastEffect=null;ob(a.firstCapturedEffect,c);a.firstCapturedEffect=a.lastCapturedEffect=null}function ob(b,c){for(;null!==b;){var d=b.callback;if(null!==d){b.callback=null;var e=c;if("function"!==typeof d)throw a(Error(191),d);d.call(e)}b=b.nextEffect}}function ve(b,a,c,d){a=b.memoizedState;c=c(d,a);c=null===c||void 0===c?a:sd({},a,c);b.memoizedState=c;d=b.updateQueue;null!==d&&0===b.expirationTime&&(d.baseState=c)}function hf(b,a,c,d,e,f,g){b=b.stateNode;
return"function"===typeof b.shouldComponentUpdate?b.shouldComponentUpdate(d,f,g):a.prototype&&a.prototype.isPureReactComponent?!zb(c,d)||!zb(e,f):!0}function Gb(b,a,c){var d=!1,e=Bf,f=a.contextType;"object"===typeof f&&null!==f?f=pc(f):(e=Qb(a)?Rc:ad.current,d=a.contextTypes,f=(d=null!==d&&void 0!==d)?vd(b,e):Bf);a=new a(c,f);b.memoizedState=null!==a.state&&void 0!==a.state?a.state:null;a.updater=$h;b.stateNode=a;a._reactInternalFiber=b;d&&(b=b.stateNode,b.__reactInternalMemoizedUnmaskedChildContext=
e,b.__reactInternalMemoizedMaskedChildContext=f);return a}function cd(b,a,c,d){b=a.state;"function"===typeof a.componentWillReceiveProps&&a.componentWillReceiveProps(c,d);"function"===typeof a.UNSAFE_componentWillReceiveProps&&a.UNSAFE_componentWillReceiveProps(c,d);a.state!==b&&$h.enqueueReplaceState(a,a.state,null)}function Sc(b,a,c,d){var e=b.stateNode;e.props=c;e.state=b.memoizedState;e.refs=ai;var f=a.contextType;"object"===typeof f&&null!==f?e.context=pc(f):(f=Qb(a)?Rc:ad.current,e.context=
vd(b,f));f=b.updateQueue;null!==f&&(xd(b,f,c,e,d),e.state=b.memoizedState);f=a.getDerivedStateFromProps;"function"===typeof f&&(ve(b,a,f,c),e.state=b.memoizedState);"function"===typeof a.getDerivedStateFromProps||"function"===typeof e.getSnapshotBeforeUpdate||"function"!==typeof e.UNSAFE_componentWillMount&&"function"!==typeof e.componentWillMount||(a=e.state,"function"===typeof e.componentWillMount&&e.componentWillMount(),"function"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),
a!==e.state&&$h.enqueueReplaceState(e,e.state,null),f=b.updateQueue,null!==f&&(xd(b,f,c,e,d),e.state=b.memoizedState));"function"===typeof e.componentDidMount&&(b.effectTag|=4)}function Zd(b,c,d){b=d.ref;if(null!==b&&"function"!==typeof b&&"object"!==typeof b){if(d._owner){d=d._owner;var e=void 0;if(d){if(1!==d.tag)throw a(Error(309));e=d.stateNode}if(!e)throw a(Error(147),b);var f=""+b;if(null!==c&&null!==c.ref&&"function"===typeof c.ref&&c.ref._stringRef===f)return c.ref;c=function(b){var a=e.refs;
a===ai&&(a=e.refs={});null===b?delete a[f]:a[f]=b};c._stringRef=f;return c}if("string"!==typeof b)throw a(Error(284));if(!d._owner)throw a(Error(290),b);}return b}function Ef(b,c){if("textarea"!==b.type)throw a(Error(31),"[object Object]"===Object.prototype.toString.call(c)?"object with keys {"+Object.keys(c).join(", ")+"}":c,"");}function jf(b){function c(a,c){if(b){var d=a.lastEffect;null!==d?(d.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c;c.nextEffect=null;c.effectTag=8}}function d(a,
d){if(!b)return null;for(;null!==d;)c(a,d),d=d.sibling;return null}function e(b,a){for(b=new Map;null!==a;)null!==a.key?b.set(a.key,a):b.set(a.index,a),a=a.sibling;return b}function f(b,a,c){b=Qe(b,a,c);b.index=0;b.sibling=null;return b}function g(a,c,d){a.index=d;if(!b)return c;d=a.alternate;if(null!==d)return d=d.index,d<c?(a.effectTag=2,c):d;a.effectTag=2;return c}function r(a){b&&null===a.alternate&&(a.effectTag=2);return a}function h(b,a,c,d){if(null===a||6!==a.tag)return a=xb(c,b.mode,d),a.return=
b,a;a=f(a,c,d);a.return=b;return a}function l(b,a,c,d){if(null!==a&&a.elementType===c.type)return d=f(a,c.props,d),d.ref=Zd(b,a,c),d.return=b,d;d=dh(c.type,c.key,c.props,null,b.mode,d);d.ref=Zd(b,a,c);d.return=b;return d}function u(b,a,c,d){if(null===a||4!==a.tag||a.stateNode.containerInfo!==c.containerInfo||a.stateNode.implementation!==c.implementation)return a=$d(c,b.mode,d),a.return=b,a;a=f(a,c.children||[],d);a.return=b;return a}function t(b,a,c,d,e){if(null===a||7!==a.tag)return a=Eb(c,b.mode,
d,e),a.return=b,a;a=f(a,c,d);a.return=b;return a}function k(b,a,c){if("string"===typeof a||"number"===typeof a)return a=xb(""+a,b.mode,c),a.return=b,a;if("object"===typeof a&&null!==a){switch(a.$$typeof){case kf:return c=dh(a.type,a.key,a.props,null,b.mode,c),c.ref=Zd(b,null,a),c.return=b,c;case Le:return a=$d(a,b.mode,c),a.return=b,a}if(Ch(a)||la(a))return a=Eb(a,b.mode,c,null),a.return=b,a;Ef(b,a)}return null}function m(b,a,c,d){var e=null!==a?a.key:null;if("string"===typeof c||"number"===typeof c)return null!==
e?null:h(b,a,""+c,d);if("object"===typeof c&&null!==c){switch(c.$$typeof){case kf:return c.key===e?c.type===Jd?t(b,a,c.props.children,d,e):l(b,a,c,d):null;case Le:return c.key===e?u(b,a,c,d):null}if(Ch(c)||la(c))return null!==e?null:t(b,a,c,d,null);Ef(b,c)}return null}function v(b,a,c,d,e){if("string"===typeof d||"number"===typeof d)return b=b.get(c)||null,h(a,b,""+d,e);if("object"===typeof d&&null!==d){switch(d.$$typeof){case kf:return b=b.get(null===d.key?c:d.key)||null,d.type===Jd?t(a,b,d.props.children,
e,d.key):l(a,b,d,e);case Le:return b=b.get(null===d.key?c:d.key)||null,u(a,b,d,e)}if(Ch(d)||la(d))return b=b.get(c)||null,t(a,b,d,e,null);Ef(a,d)}return null}function n(a,f,r,h){for(var l=null,u=null,t=f,n=f=0,w=null;null!==t&&n<r.length;n++){t.index>n?(w=t,t=null):w=t.sibling;var D=m(a,t,r[n],h);if(null===D){null===t&&(t=w);break}b&&t&&null===D.alternate&&c(a,t);f=g(D,f,n);null===u?l=D:u.sibling=D;u=D;t=w}if(n===r.length)return d(a,t),l;if(null===t){for(;n<r.length;n++)t=k(a,r[n],h),null!==t&&(f=
g(t,f,n),null===u?l=t:u.sibling=t,u=t);return l}for(t=e(a,t);n<r.length;n++)w=v(t,a,n,r[n],h),null!==w&&(b&&null!==w.alternate&&t.delete(null===w.key?n:w.key),f=g(w,f,n),null===u?l=w:u.sibling=w,u=w);b&&t.forEach(function(b){return c(a,b)});return l}function w(f,r,h,l){var u=la(h);if("function"!==typeof u)throw a(Error(150));h=u.call(h);if(null==h)throw a(Error(151));for(var t=u=null,n=r,w=r=0,D=null,y=h.next();null!==n&&!y.done;w++,y=h.next()){n.index>w?(D=n,n=null):D=n.sibling;var Cb=m(f,n,y.value,
l);if(null===Cb){null===n&&(n=D);break}b&&n&&null===Cb.alternate&&c(f,n);r=g(Cb,r,w);null===t?u=Cb:t.sibling=Cb;t=Cb;n=D}if(y.done)return d(f,n),u;if(null===n){for(;!y.done;w++,y=h.next())y=k(f,y.value,l),null!==y&&(r=g(y,r,w),null===t?u=y:t.sibling=y,t=y);return u}for(n=e(f,n);!y.done;w++,y=h.next())y=v(n,f,w,y.value,l),null!==y&&(b&&null!==y.alternate&&n.delete(null===y.key?w:y.key),r=g(y,r,w),null===t?u=y:t.sibling=y,t=y);b&&n.forEach(function(b){return c(f,b)});return u}return function(b,e,g,
h){var l="object"===typeof g&&null!==g&&g.type===Jd&&null===g.key;l&&(g=g.props.children);var u="object"===typeof g&&null!==g;if(u)switch(g.$$typeof){case kf:a:{u=g.key;for(l=e;null!==l;){if(l.key===u){if(7===l.tag?g.type===Jd:l.elementType===g.type){d(b,l.sibling);e=f(l,g.type===Jd?g.props.children:g.props,h);e.ref=Zd(b,l,g);e.return=b;b=e;break a}d(b,l);break}else c(b,l);l=l.sibling}g.type===Jd?(e=Eb(g.props.children,b.mode,h,g.key),e.return=b,b=e):(h=dh(g.type,g.key,g.props,null,b.mode,h),h.ref=
Zd(b,e,g),h.return=b,b=h)}return r(b);case Le:a:{for(l=g.key;null!==e;){if(e.key===l){if(4===e.tag&&e.stateNode.containerInfo===g.containerInfo&&e.stateNode.implementation===g.implementation){d(b,e.sibling);e=f(e,g.children||[],h);e.return=b;b=e;break a}d(b,e);break}else c(b,e);e=e.sibling}e=$d(g,b.mode,h);e.return=b;b=e}return r(b)}if("string"===typeof g||"number"===typeof g)return g=""+g,null!==e&&6===e.tag?(d(b,e.sibling),e=f(e,g,h),e.return=b,b=e):(d(b,e),e=xb(g,b.mode,h),e.return=b,b=e),r(b);
if(Ch(g))return n(b,e,g,h);if(la(g))return w(b,e,g,h);u&&Ef(b,g);if("undefined"===typeof g&&!l)switch(b.tag){case 1:case 0:throw b=b.type,a(Error(152),b.displayName||b.name||"Component");}return d(b,e)}}function zc(b){if(b===Ff)throw a(Error(174));return b}function Pd(b,a){Ib(Dh,a,b);Ib(Gf,b,b);Ib(yd,Ff,b);var c=a.nodeType;switch(c){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:pb(null,"");break;default:c=8===c?a.parentNode:a,a=c.namespaceURI||null,c=c.tagName,a=pb(a,c)}fb(yd,b);Ib(yd,a,b)}
function we(b){fb(yd,b);fb(Gf,b);fb(Dh,b)}function lf(b){zc(Dh.current);var a=zc(yd.current),c=pb(a,b.type);a!==c&&(Ib(Gf,b,b),Ib(yd,c,b))}function $f(b){Gf.current===b&&(fb(yd,b),fb(Gf,b))}function Re(b){for(var a=b;null!==a;){if(13===a.tag){if(null!==a.memoizedState)return a}else if(19===a.tag&&void 0!==a.memoizedProps.revealOrder){if(0!==(a.effectTag&64))return a}else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break;for(;null===a.sibling;){if(null===a.return||a.return===b)return null;
a=a.return}a.sibling.return=a.return;a=a.sibling}return null}function Qd(){throw a(Error(321));}function ld(b,a){if(null===a)return!1;for(var c=0;c<a.length&&c<b.length;c++)if(!Pa(b[c],a[c]))return!1;return!0}function Hf(b,c,d,e,f,g){eh=g;Ag=c;mf=null!==b?b.memoizedState:null;ti.current=null===mf?Eh:Kc;c=d(e,f);if(bi){do bi=!1,fh+=1,mf=null!==b?b.memoizedState:null,gh=Tc,If=Rd=zd=null,ti.current=Kc,c=d(e,f);while(bi);Se=null;fh=0}ti.current=ci;b=Ag;b.memoizedState=Tc;b.expirationTime=Fh;b.updateQueue=
If;b.effectTag|=hh;b=null!==zd&&null!==zd.next;eh=0;gh=Rd=Tc=mf=zd=Ag=null;Fh=0;If=null;hh=0;if(b)throw a(Error(300));return c}function xe(){ti.current=ci;eh=0;gh=Rd=Tc=mf=zd=Ag=null;Fh=0;If=null;hh=0;bi=!1;Se=null;fh=0}function ye(){var b={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};null===Rd?Tc=Rd=b:Rd=Rd.next=b;return Rd}function nf(){if(null!==gh)Rd=gh,gh=Rd.next,zd=mf,mf=null!==zd?zd.next:null;else{if(null===mf)throw a(Error(310));zd=mf;var b={memoizedState:zd.memoizedState,
baseState:zd.baseState,queue:zd.queue,baseUpdate:zd.baseUpdate,next:null};Rd=null===Rd?Tc=b:Rd.next=b;mf=zd.next}return Rd}function Bg(b,a){return"function"===typeof a?a(b):a}function Te(b){var c=nf(),d=c.queue;if(null===d)throw a(Error(311));d.lastRenderedReducer=b;if(0<fh){var e=d.dispatch;if(null!==Se){var f=Se.get(d);if(void 0!==f){Se.delete(d);var g=c.memoizedState;do g=b(g,f.action),f=f.next;while(null!==f);Pa(g,c.memoizedState)||(Rb=!0);c.memoizedState=g;c.baseUpdate===d.last&&(c.baseState=
g);d.lastRenderedState=g;return[g,e]}}return[c.memoizedState,e]}e=d.last;var r=c.baseUpdate;g=c.baseState;null!==r?(null!==e&&(e.next=null),e=r.next):e=null!==e?e.next:null;if(null!==e){var h=f=null,l=e,u=!1;do{var t=l.expirationTime;t<eh?(u||(u=!0,h=r,f=g),t>Fh&&(Fh=t)):(ch(t,l.suspenseConfig),g=l.eagerReducer===b?l.eagerState:b(g,l.action));r=l;l=l.next}while(null!==l&&l!==e);u||(h=r,f=g);Pa(g,c.memoizedState)||(Rb=!0);c.memoizedState=g;c.baseUpdate=h;c.baseState=f;d.lastRenderedState=g}return[c.memoizedState,
d.dispatch]}function Ad(b,a,c,d){b={tag:b,create:a,destroy:c,deps:d,next:null};null===If?(If={lastEffect:null},If.lastEffect=b.next=b):(a=If.lastEffect,null===a?If.lastEffect=b.next=b:(c=a.next,a.next=b,b.next=c,If.lastEffect=b));return b}function ag(b,a,c,d){var e=ye();hh|=b;e.memoizedState=Ad(a,c,void 0,void 0===d?null:d)}function of(b,a,c,d){var e=nf();d=void 0===d?null:d;var f=void 0;if(null!==zd){var g=zd.memoizedState;f=g.destroy;if(null!==d&&ld(d,g.deps)){Ad(Cg,c,f,d);return}}hh|=b;e.memoizedState=
Ad(a,c,f,d)}function bg(b,a){if("function"===typeof a)return b=b(),a(b),function(){a(null)};if(null!==a&&void 0!==a)return b=b(),a.current=b,function(){a.current=null}}function Bd(){}function ih(b,c,d){if(!(25>fh))throw a(Error(301));var e=b.alternate;if(b===Ag||null!==e&&e===Ag)if(bi=!0,b={expirationTime:eh,suspenseConfig:null,action:d,eagerReducer:null,eagerState:null,next:null},null===Se&&(Se=new Map),d=Se.get(c),void 0===d)Se.set(c,b);else{for(c=d;null!==c.next;)c=c.next;c.next=b}else{var f=jc(),
g=Cd.suspense;f=Jf(f,b,g);g={expirationTime:f,suspenseConfig:g,action:d,eagerReducer:null,eagerState:null,next:null};var r=c.last;if(null===r)g.next=g;else{var h=r.next;null!==h&&(g.next=h);r.next=g}c.last=g;if(0===b.expirationTime&&(null===e||0===e.expirationTime)&&(e=c.lastRenderedReducer,null!==e))try{var l=c.lastRenderedState,u=e(l,d);g.eagerReducer=e;g.eagerState=u;if(Pa(u,l))return}catch(hj){}finally{}Ac(b,f)}}function Ca(b,a){var c=rc(5,null,null,0);c.elementType="DELETED";c.type="DELETED";
c.stateNode=a;c.return=b;c.effectTag=8;null!==b.lastEffect?(b.lastEffect.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c}function Fb(b,a){switch(b.tag){case 5:var c=b.type;a=1!==a.nodeType||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a;return null!==a?(b.stateNode=a,!0):!1;case 6:return a=""===b.pendingProps||3!==a.nodeType?null:a,null!==a?(b.stateNode=a,!0):!1;case 13:return!1;default:return!1}}function Dd(b){if(Kf){var a=ae;if(a){var c=a;if(!Fb(b,a)){a=Vb(c.nextSibling);if(!a||!Fb(b,
a)){b.effectTag|=2;Kf=!1;gc=b;return}Ca(gc,c)}gc=b;ae=Vb(a.firstChild)}else b.effectTag|=2,Kf=!1,gc=b}}function Dg(b){for(b=b.return;null!==b&&5!==b.tag&&3!==b.tag&&18!==b.tag;)b=b.return;gc=b}function pf(b){if(b!==gc)return!1;if(!Kf)return Dg(b),Kf=!0,!1;var a=b.type;if(5!==b.tag||"head"!==a&&"body"!==a&&!gf(a,b.memoizedProps))for(a=ae;a;)Ca(b,a),a=Vb(a.nextSibling);Dg(b);ae=gc?Vb(b.stateNode.nextSibling):null;return!0}function Uc(b,a,c,d){a.child=null===b?Lc(a,null,c,d):ze(a,b.child,c,d)}function Eg(b,
a,c,d,e){c=c.render;var f=a.ref;Jc(a,e);d=Hf(b,a,c,d,f,e);if(null!==b&&!Rb)return a.updateQueue=b.updateQueue,a.effectTag&=-517,b.expirationTime<=e&&(b.expirationTime=0),md(b,a,e);a.effectTag|=1;Uc(b,a,d,e);return a.child}function Ue(b,a,c,d,e,f){if(null===b){var g=c.type;if("function"===typeof g&&!be(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return a.tag=15,a.type=g,Sd(b,a,g,d,e,f);b=dh(c.type,null,d,null,a.mode,f);b.ref=a.ref;b.return=a;return a.child=b}g=b.child;if(e<
f&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:zb,c(e,d)&&b.ref===a.ref))return md(b,a,f);a.effectTag|=1;b=Qe(g,d,f);b.ref=a.ref;b.return=a;return a.child=b}function Sd(b,a,c,d,e,f){return null!==b&&zb(b.memoizedProps,d)&&b.ref===a.ref&&(Rb=!1,e<f)?md(b,a,f):qf(b,a,c,d,f)}function Lf(b,a){var c=a.ref;if(null===b&&null!==c||null!==b&&b.ref!==c)a.effectTag|=128}function qf(b,a,c,d,e){var f=Qb(c)?Rc:ad.current;f=vd(a,f);Jc(a,e);c=Hf(b,a,c,d,f,e);if(null!==b&&!Rb)return a.updateQueue=b.updateQueue,a.effectTag&=
-517,b.expirationTime<=e&&(b.expirationTime=0),md(b,a,e);a.effectTag|=1;Uc(b,a,c,e);return a.child}function rf(b,a,c,d,e){if(Qb(c)){var f=!0;qe(a)}else f=!1;Jc(a,e);if(null===a.stateNode)null!==b&&(b.alternate=null,a.alternate=null,a.effectTag|=2),Gb(a,c,d,e),Sc(a,c,d,e),d=!0;else if(null===b){var g=a.stateNode,r=a.memoizedProps;g.props=r;var h=g.context,l=c.contextType;"object"===typeof l&&null!==l?l=pc(l):(l=Qb(c)?Rc:ad.current,l=vd(a,l));var u=c.getDerivedStateFromProps,t="function"===typeof u||
"function"===typeof g.getSnapshotBeforeUpdate;t||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(r!==d||h!==l)&&cd(a,g,d,l);ue=!1;var k=a.memoizedState;h=g.state=k;var m=a.updateQueue;null!==m&&(xd(a,m,d,g,e),h=a.memoizedState);r!==d||k!==h||Yc.current||ue?("function"===typeof u&&(ve(a,c,u,d),h=a.memoizedState),(r=ue||hf(a,c,r,d,k,h,l))?(t||"function"!==typeof g.UNSAFE_componentWillMount&&"function"!==typeof g.componentWillMount||("function"===
typeof g.componentWillMount&&g.componentWillMount(),"function"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"===typeof g.componentDidMount&&(a.effectTag|=4)):("function"===typeof g.componentDidMount&&(a.effectTag|=4),a.memoizedProps=d,a.memoizedState=h),g.props=d,g.state=h,g.context=l,d=r):("function"===typeof g.componentDidMount&&(a.effectTag|=4),d=!1)}else g=a.stateNode,r=a.memoizedProps,g.props=a.type===a.elementType?r:nb(a.type,r),h=g.context,l=c.contextType,"object"===
typeof l&&null!==l?l=pc(l):(l=Qb(c)?Rc:ad.current,l=vd(a,l)),u=c.getDerivedStateFromProps,(t="function"===typeof u||"function"===typeof g.getSnapshotBeforeUpdate)||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(r!==d||h!==l)&&cd(a,g,d,l),ue=!1,h=a.memoizedState,k=g.state=h,m=a.updateQueue,null!==m&&(xd(a,m,d,g,e),k=a.memoizedState),r!==d||h!==k||Yc.current||ue?("function"===typeof u&&(ve(a,c,u,d),k=a.memoizedState),(u=ue||hf(a,c,r,d,h,k,l))?
(t||"function"!==typeof g.UNSAFE_componentWillUpdate&&"function"!==typeof g.componentWillUpdate||("function"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,k,l),"function"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,k,l)),"function"===typeof g.componentDidUpdate&&(a.effectTag|=4),"function"===typeof g.getSnapshotBeforeUpdate&&(a.effectTag|=256)):("function"!==typeof g.componentDidUpdate||r===b.memoizedProps&&h===b.memoizedState||(a.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||
r===b.memoizedProps&&h===b.memoizedState||(a.effectTag|=256),a.memoizedProps=d,a.memoizedState=k),g.props=d,g.state=k,g.context=l,d=u):("function"!==typeof g.componentDidUpdate||r===b.memoizedProps&&h===b.memoizedState||(a.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||r===b.memoizedProps&&h===b.memoizedState||(a.effectTag|=256),d=!1);return ib(b,a,c,d,f,e)}function ib(b,a,c,d,e,f){Lf(b,a);var g=0!==(a.effectTag&64);if(!d&&!g)return e&&Ta(a,c,!1),md(b,a,f);d=a.stateNode;cg.current=a;
var r=g&&"function"!==typeof c.getDerivedStateFromError?null:d.render();a.effectTag|=1;null!==b&&g?(a.child=ze(a,b.child,null,f),a.child=ze(a,null,r,f)):Uc(b,a,r,f);a.memoizedState=d.state;e&&Ta(a,c,!0);return a.child}function nd(b){var a=b.stateNode;a.pendingContext?pe(b,a.pendingContext,a.pendingContext!==a.context):a.context&&pe(b,a.context,!1);Pd(b,a.containerInfo)}function Ve(b,a,c){var d=a.mode,e=a.pendingProps,f=kc.current,g=null,r=!1,h;(h=0!==(a.effectTag&64))||(h=0!==(f&Gh)&&(null===b||null!==
b.memoizedState));h?(g=Vi,r=!0,a.effectTag&=-65):null!==b&&null===b.memoizedState||void 0===e.fallback||!0===e.unstable_avoidThisFallback||(f|=od);f&=sf;Ib(kc,f,a);if(null===b)if(r){e=e.fallback;b=Eb(null,d,0,null);b.return=a;if(0===(a.mode&2))for(r=null!==a.memoizedState?a.child.child:a.child,b.child=r;null!==r;)r.return=b,r=r.sibling;c=Eb(e,d,c,null);c.return=a;b.sibling=c;d=b}else d=c=Lc(a,null,e.children,c);else{if(null!==b.memoizedState)if(f=b.child,d=f.sibling,r){e=e.fallback;c=Qe(f,f.pendingProps,
0);c.return=a;if(0===(a.mode&2)&&(r=null!==a.memoizedState?a.child.child:a.child,r!==f.child))for(c.child=r;null!==r;)r.return=c,r=r.sibling;e=Qe(d,e,d.expirationTime);e.return=a;c.sibling=e;d=c;c.childExpirationTime=0;c=e}else d=c=ze(a,f.child,e.children,c);else if(f=b.child,r){r=e.fallback;e=Eb(null,d,0,null);e.return=a;e.child=f;null!==f&&(f.return=e);if(0===(a.mode&2))for(f=null!==a.memoizedState?a.child.child:a.child,e.child=f;null!==f;)f.return=e,f=f.sibling;c=Eb(r,d,c,null);c.return=a;e.sibling=
c;c.effectTag|=2;d=e;e.childExpirationTime=0}else c=d=ze(a,f,e.children,c);a.stateNode=b.stateNode}a.memoizedState=g;a.child=d;return c}function dg(b,a,c,d,e){var f=b.memoizedState;null===f?b.memoizedState={isBackwards:a,rendering:null,last:d,tail:c,tailExpiration:0,tailMode:e}:(f.isBackwards=a,f.rendering=null,f.last=d,f.tail=c,f.tailExpiration=0,f.tailMode=e)}function eg(b,a,c){var d=a.pendingProps,e=d.revealOrder,f=d.tail;Uc(b,a,d.children,c);d=kc.current;if(0!==(d&Gh))d=d&sf|Gh,a.effectTag|=64;
else{if(null!==b&&0!==(b.effectTag&64))a:for(b=a.child;null!==b;){if(13===b.tag){if(null!==b.memoizedState){b.expirationTime<c&&(b.expirationTime=c);var g=b.alternate;null!==g&&g.expirationTime<c&&(g.expirationTime=c);wc(b.return,c)}}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break a;for(;null===b.sibling;){if(null===b.return||b.return===a)break a;b=b.return}b.sibling.return=b.return;b=b.sibling}d&=sf}Ib(kc,d,a);if(0===(a.mode&2))a.memoizedState=null;else switch(e){case "forwards":c=
a.child;for(e=null;null!==c;)d=c.alternate,null!==d&&null===Re(d)&&(e=c),c=c.sibling;c=e;null===c?(e=a.child,a.child=null):(e=c.sibling,c.sibling=null);dg(a,!1,e,c,f);break;case "backwards":c=null;e=a.child;for(a.child=null;null!==e;){d=e.alternate;if(null!==d&&null===Re(d)){a.child=e;break}d=e.sibling;e.sibling=c;c=e;e=d}dg(a,!0,c,null,f);break;case "together":dg(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function md(b,c,d){null!==b&&(c.dependencies=b.dependencies);
if(c.childExpirationTime<d)return null;if(null!==b&&c.child!==b.child)throw a(Error(153));if(null!==c.child){b=c.child;d=Qe(b,b.pendingProps,b.expirationTime);c.child=d;for(d.return=c;null!==b.sibling;)b=b.sibling,d=d.sibling=Qe(b,b.pendingProps,b.expirationTime),d.return=c;d.sibling=null}return c.child}function ce(b,a){switch(b.tailMode){case "hidden":a=b.tail;for(var c=null;null!==a;)null!==a.alternate&&(c=a),a=a.sibling;null===c?b.tail=null:c.sibling=null;break;case "collapsed":c=b.tail;for(var d=
null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?a||null===b.tail?b.tail=null:b.tail.sibling=null:d.sibling=null}}function de(b){switch(b.tag){case 1:Qb(b.type)&&oe(b);var c=b.effectTag;return c&2048?(b.effectTag=c&-2049|64,b):null;case 3:we(b);fc(b);c=b.effectTag;if(0!==(c&64))throw a(Error(285));b.effectTag=c&-2049|64;return b;case 5:return $f(b),null;case 13:return fb(kc,b),c=b.effectTag,c&2048?(b.effectTag=c&-2049|64,b):null;case 18:return null;case 19:return fb(kc,b),null;case 4:return we(b),
null;case 10:return Od(b),null;default:return null}}function dd(b,a){return{value:b,source:a,stack:ma(a)}}function fg(b,a){var c=a.source,d=a.stack;null===d&&null!==c&&(d=ma(c));null!==c&&da(c.type);a=a.value;null!==b&&1===b.tag&&da(b.type);try{console.error(a)}catch(Sg){setTimeout(function(){throw Sg;})}}function qb(b,a){try{a.props=b.memoizedProps,a.state=b.memoizedState,a.componentWillUnmount()}catch(df){We(b,df)}}function Hh(b){var a=b.ref;if(null!==a)if("function"===typeof a)try{a(null)}catch(df){We(b,
df)}else a.current=null}function tf(b,a,c){c=c.updateQueue;c=null!==c?c.lastEffect:null;if(null!==c){var d=c=c.next;do{if((d.tag&b)!==Cg){var e=d.destroy;d.destroy=void 0;void 0!==e&&e()}(d.tag&a)!==Cg&&(e=d.create,d.destroy=e());d=d.next}while(d!==c)}}function ee(b,a){"function"===typeof bj&&bj(b);switch(b.tag){case 0:case 11:case 14:case 15:var c=b.updateQueue;if(null!==c&&(c=c.lastEffect,null!==c)){var d=c.next;kb(97<a?97:a,function(){var a=d;do{var c=a.destroy;if(void 0!==c){var e=b;try{c()}catch(kj){We(e,
kj)}}a=a.next}while(a!==d)})}break;case 1:Hh(b);a=b.stateNode;"function"===typeof a.componentWillUnmount&&qb(b,a);break;case 5:Hh(b);break;case 4:pd(b,a)}}function lc(b,a){for(var c=b;;)if(ee(c,a),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}}function Ab(b){return 5===b.tag||3===b.tag||4===b.tag}function hc(b){a:{for(var c=b.return;null!==c;){if(Ab(c)){var d=
c;break a}c=c.return}throw a(Error(160));}c=d.stateNode;switch(d.tag){case 5:var e=!1;break;case 3:c=c.containerInfo;e=!0;break;case 4:c=c.containerInfo;e=!0;break;default:throw a(Error(161));}d.effectTag&16&&(Nd(c,""),d.effectTag&=-17);d=b;a:b:for(;;){for(;null===d.sibling;){if(null===d.return||Ab(d.return)){d=null;break a}d=d.return}d.sibling.return=d.return;for(d=d.sibling;5!==d.tag&&6!==d.tag&&18!==d.tag;){if(d.effectTag&2)continue b;if(null===d.child||4===d.tag)continue b;else d.child.return=
d,d=d.child}if(!(d.effectTag&2)){d=d.stateNode;break a}}for(var f=b;;){var g=5===f.tag||6===f.tag;if(g||20===f.tag){var r=g?f.stateNode:f.stateNode.instance;if(d)if(e){g=c;var h=r;r=d;8===g.nodeType?g.parentNode.insertBefore(h,r):g.insertBefore(h,r)}else c.insertBefore(r,d);else e?(h=c,8===h.nodeType?(g=h.parentNode,g.insertBefore(r,h)):(g=h,g.appendChild(r)),h=h._reactRootContainer,null!==h&&void 0!==h||null!==g.onclick||(g.onclick=Qc)):c.appendChild(r)}else if(4!==f.tag&&null!==f.child){f.child.return=
f;f=f.child;continue}if(f===b)break;for(;null===f.sibling;){if(null===f.return||f.return===b)return;f=f.return}f.sibling.return=f.return;f=f.sibling}}function pd(b,c){for(var d=b,e=!1,f=void 0,g=void 0;;){if(!e){e=d.return;a:for(;;){if(null===e)throw a(Error(160));f=e.stateNode;switch(e.tag){case 5:g=!1;break a;case 3:f=f.containerInfo;g=!0;break a;case 4:f=f.containerInfo;g=!0;break a}e=e.return}e=!0}if(5===d.tag||6===d.tag)if(lc(d,c),g){var r=f,h=d.stateNode;8===r.nodeType?r.parentNode.removeChild(h):
r.removeChild(h)}else f.removeChild(d.stateNode);else if(20===d.tag)h=d.stateNode.instance,lc(d,c),g?(r=f,8===r.nodeType?r.parentNode.removeChild(h):r.removeChild(h)):f.removeChild(h);else if(4===d.tag){if(null!==d.child){f=d.stateNode.containerInfo;g=!0;d.child.return=d;d=d.child;continue}}else if(ee(d,c),null!==d.child){d.child.return=d;d=d.child;continue}if(d===b)break;for(;null===d.sibling;){if(null===d.return||d.return===b)return;d=d.return;4===d.tag&&(e=!1)}d.sibling.return=d.return;d=d.sibling}}
function qd(b,c){switch(c.tag){case 0:case 11:case 14:case 15:tf(jh,Ih,c);break;case 1:break;case 5:var d=c.stateNode;if(null!=d){var e=c.memoizedProps,f=null!==b?b.memoizedProps:e;b=c.type;var g=c.updateQueue;c.updateQueue=null;if(null!==g){d[xf]=e;"input"===b&&"radio"===e.type&&null!=e.name&&sa(d,e);Ka(b,f);c=Ka(b,e);for(f=0;f<g.length;f+=2){var r=g[f],h=g[f+1];"style"===r?Yg(d,h):"dangerouslySetInnerHTML"===r?ui(d,h):"children"===r?Nd(d,h):ka(d,r,h,c)}switch(b){case "input":W(d,e);break;case "textarea":Yd(d,
e);break;case "select":c=d._wrapperState.wasMultiple,d._wrapperState.wasMultiple=!!e.multiple,b=e.value,null!=b?Fc(d,!!e.multiple,b,!1):c!==!!e.multiple&&(null!=e.defaultValue?Fc(d,!!e.multiple,e.defaultValue,!0):Fc(d,!!e.multiple,e.multiple?[]:"",!1))}}}break;case 6:if(null===c.stateNode)throw a(Error(162));c.stateNode.nodeValue=c.memoizedProps;break;case 3:break;case 12:break;case 13:d=c;null===c.memoizedState?e=!1:(e=!0,d=c.child,bc=Xb());if(null!==d)a:for(b=d;;){if(5===b.tag)g=b.stateNode,e?(g=
g.style,"function"===typeof g.setProperty?g.setProperty("display","none","important"):g.display="none"):(g=b.stateNode,f=b.memoizedProps.style,f=void 0!==f&&null!==f&&f.hasOwnProperty("display")?f.display:null,g.style.display=Xc("display",f));else if(6===b.tag)b.stateNode.nodeValue=e?"":b.memoizedProps;else if(13===b.tag&&null!==b.memoizedState){g=b.child.sibling;g.return=b;b=g;continue}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===d)break a;for(;null===b.sibling;){if(null===
b.return||b.return===d)break a;b=b.return}b.sibling.return=b.return;b=b.sibling}fe(c);break;case 19:fe(c);break;case 17:break;case 20:break;default:throw a(Error(163));}}function fe(b){var a=b.updateQueue;if(null!==a){b.updateQueue=null;var c=b.stateNode;null===c&&(c=b.stateNode=new cj);a.forEach(function(a){var d=kh.bind(null,b,a);c.has(a)||(c.add(a),a.then(d,d))})}}function Fg(b,a,c){c=ac(c,null);c.tag=3;c.payload={element:null};var d=a.value;c.callback=function(){Xe||(Xe=!0,Wi=d);fg(b,a)};return c}
function ed(b,a,c){c=ac(c,null);c.tag=3;var d=b.type.getDerivedStateFromError;if("function"===typeof d){var e=a.value;c.payload=function(){fg(b,a);return d(e)}}var f=b.stateNode;null!==f&&"function"===typeof f.componentDidCatch&&(c.callback=function(){"function"!==typeof d&&(null===cc?cc=new Set([this]):cc.add(this),fg(b,a));var c=a.stack;this.componentDidCatch(a.value,{componentStack:null!==c?c:""})});return c}function jc(){return(bb&(Mf|Nf))!==Bc?1073741821-(Xb()/10|0):0!==xc?xc:xc=1073741821-(Xb()/
10|0)}function Jf(b,c,d){c=c.mode;if(0===(c&2))return 1073741823;var e=xg();if(0===(c&4))return 99===e?1073741823:1073741822;if((bb&Mf)!==Bc)return Ed;if(null!==d)b=1073741821-25*(((1073741821-b+(d.timeoutMs|0||5E3)/10)/25|0)+1);else switch(e){case 99:b=1073741823;break;case 98:b=1073741821-10*(((1073741821-b+15)/10|0)+1);break;case 97:case 96:b=1073741821-25*(((1073741821-b+500)/25|0)+1);break;case 95:b=1;break;default:throw a(Error(326));}null!==Jh&&b===Ed&&--b;return b}function Ac(b,c){if(50<Gg)throw Gg=
0,Hg=null,a(Error(185));b=lh(b,c);if(null!==b){b.pingTime=0;var d=xg();if(1073741823===c)if((bb&di)!==Bc&&(bb&(Mf|Nf))===Bc)for(var e=Mc(b,1073741823,!0);null!==e;)e=e(!0);else dc(b,99,1073741823),bb===Bc&&Zb();else dc(b,d,c);(bb&4)===Bc||98!==d&&99!==d||(null===mh?mh=new Map([[b,c]]):(d=mh.get(b),(void 0===d||d>c)&&mh.set(b,c)))}}function lh(b,a){b.expirationTime<a&&(b.expirationTime=a);var c=b.alternate;null!==c&&c.expirationTime<a&&(c.expirationTime=a);var d=b.return,e=null;if(null===d&&3===b.tag)e=
b.stateNode;else for(;null!==d;){c=d.alternate;d.childExpirationTime<a&&(d.childExpirationTime=a);null!==c&&c.childExpirationTime<a&&(c.childExpirationTime=a);if(null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}null!==e&&(a>e.firstPendingTime&&(e.firstPendingTime=a),b=e.lastPendingTime,0===b||a<b)&&(e.lastPendingTime=a);return e}function dc(b,a,c){if(b.callbackExpirationTime<c){var d=b.callbackNode;null!==d&&d!==Hi&&Wb(d);b.callbackExpirationTime=c;1073741823===c?b.callbackNode=jd(gg.bind(null,
b,Mc.bind(null,b,c))):(d=null,1!==c&&(d={timeout:10*(1073741821-c)-Xb()}),b.callbackNode=ic(a,gg.bind(null,b,Mc.bind(null,b,c)),d))}}function gg(b,a,c){var d=b.callbackNode,e=null;try{return e=a(c),null!==e?gg.bind(null,b,e):null}finally{null===e&&d===b.callbackNode&&(b.callbackNode=null,b.callbackExpirationTime=0)}}function ge(){(bb&(1|Mf|Nf))===Bc&&(he(),Ae())}function Ii(b,a){var c=b.firstBatch;return null!==c&&c._defer&&c._expirationTime>=a?(ic(97,function(){c._onComplete();return null}),!0):
!1}function he(){if(null!==mh){var b=mh;mh=null;b.forEach(function(b,a){jd(Mc.bind(null,a,b))});Zb()}}function Kh(b,a){var c=bb;bb|=1;try{return b(a)}finally{bb=c,bb===Bc&&Zb()}}function uf(b,a,c,d){var e=bb;bb|=4;try{return kb(98,b.bind(null,a,c,d))}finally{bb=e,bb===Bc&&Zb()}}function ie(b,a){var c=bb;bb&=-2;bb|=di;try{return b(a)}finally{bb=c,bb===Bc&&Zb()}}function Cc(b,a){b.finishedWork=null;b.finishedExpirationTime=0;var c=b.timeoutHandle;-1!==c&&(b.timeoutHandle=-1,Ji(c));if(null!==Jb)for(c=
Jb.return;null!==c;){var d=c;switch(d.tag){case 1:var e=d.type.childContextTypes;null!==e&&void 0!==e&&oe(d);break;case 3:we(d);fc(d);break;case 5:$f(d);break;case 4:we(d);break;case 13:fb(kc,d);break;case 19:fb(kc,d);break;case 10:Od(d)}c=c.return}Jh=b;Jb=Qe(b.current,null,a);Ed=a;je=Ig;vi=Jg=1073741823;Lh=null;sc=!1}function Mc(b,c,d){if((bb&(Mf|Nf))!==Bc)throw a(Error(327));if(b.firstPendingTime<c)return null;if(d&&b.finishedExpirationTime===c)return Sa.bind(null,b);Ae();if(b!==Jh||c!==Ed)Cc(b,
c);else if(je===Mh)if(sc)Cc(b,c);else{var e=b.lastPendingTime;if(e<c)return Mc.bind(null,b,e)}if(null!==Jb){e=bb;bb|=Mf;var f=Nh.current;null===f&&(f=ci);Nh.current=ci;if(d){if(1073741823!==c){var g=jc();if(g<c)return bb=e,zg=$b=te=null,Nh.current=f,Mc.bind(null,b,g)}}else xc=0;do try{if(d)for(;null!==Jb;)Jb=wi(Jb);else for(;null!==Jb&&!Be();)Jb=wi(Jb);break}catch(jj){zg=$b=te=null;xe();g=Jb;if(null===g||null===g.return)throw Cc(b,c),bb=e,jj;a:{var r=b,h=g.return,l=g,u=jj,t=Ed;l.effectTag|=1024;l.firstEffect=
l.lastEffect=null;if(null!==u&&"object"===typeof u&&"function"===typeof u.then){var k=u,m=0!==(kc.current&od);u=h;do{var v;if(v=13===u.tag)null!==u.memoizedState?v=!1:(v=u.memoizedProps,v=void 0===v.fallback?!1:!0!==v.unstable_avoidThisFallback?!0:m?!1:!0);if(v){h=u.updateQueue;null===h?(h=new Set,h.add(k),u.updateQueue=h):h.add(k);if(0===(u.mode&2)){u.effectTag|=64;l.effectTag&=-1957;1===l.tag&&(null===l.alternate?l.tag=17:(t=ac(1073741823,null),t.tag=2,Pe(l,t)));l.expirationTime=1073741823;break a}l=
r;r=t;m=l.pingCache;null===m?(m=l.pingCache=new Oh,h=new Set,m.set(k,h)):(h=m.get(k),void 0===h&&(h=new Set,m.set(k,h)));h.has(r)||(h.add(r),l=nh.bind(null,l,k,r),k.then(l,l));u.effectTag|=2048;u.expirationTime=t;break a}u=u.return}while(null!==u);u=Error((da(l.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a \x3cSuspense fallback\x3d...\x3e component higher in the tree to provide a loading indicator or placeholder to display."+ma(l))}je!==Xi&&(je=
ei);u=dd(u,l);l=h;do{switch(l.tag){case 3:l.effectTag|=2048;l.expirationTime=t;t=Fg(l,u,t);Bh(l,t);break a;case 1:if(k=u,r=l.type,h=l.stateNode,0===(l.effectTag&64)&&("function"===typeof r.getDerivedStateFromError||null!==h&&"function"===typeof h.componentDidCatch&&(null===cc||!cc.has(h)))){l.effectTag|=2048;l.expirationTime=t;t=ed(l,k,t);Bh(l,t);break a}}l=l.return}while(null!==l)}Jb=fi(g)}while(1);bb=e;zg=$b=te=null;Nh.current=f;if(null!==Jb)return Mc.bind(null,b,c)}b.finishedWork=b.current.alternate;
b.finishedExpirationTime=c;if(Ii(b,c))return null;Jh=null;switch(je){case Ig:throw a(Error(328));case ei:return e=b.lastPendingTime,e<c?Mc.bind(null,b,e):d?Sa.bind(null,b):(Cc(b,c),jd(Mc.bind(null,b,c)),null);case Ye:if(1073741823===Jg&&!d&&(d=bc+gi-Xb(),10<d)){if(sc)return Cc(b,c),Mc.bind(null,b,c);e=b.lastPendingTime;if(e<c)return Mc.bind(null,b,e);b.timeoutHandle=hi(Sa.bind(null,b),d);return null}return Sa.bind(null,b);case Mh:if(!d){if(sc)return Cc(b,c),Mc.bind(null,b,c);d=b.lastPendingTime;if(d<
c)return Mc.bind(null,b,d);1073741823!==vi?d=10*(1073741821-vi)-Xb():1073741823===Jg?d=0:(d=10*(1073741821-Jg)-5E3,e=Xb(),c=10*(1073741821-c)-e,d=e-d,0>d&&(d=0),d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*Kg(d/1960))-d,c<d&&(d=c));if(10<d)return b.timeoutHandle=hi(Sa.bind(null,b),d),null}return Sa.bind(null,b);case Xi:return!d&&1073741823!==Jg&&null!==Lh&&(e=Jg,f=Lh,c=f.busyMinDurationMs|0,0>=c?c=0:(d=f.busyDelayMs|0,e=Xb()-(10*(1073741821-e)-(f.timeoutMs|0||5E3)),c=
e<=d?0:d+c-e),10<c)?(b.timeoutHandle=hi(Sa.bind(null,b),c),null):Sa.bind(null,b);default:throw a(Error(329));}}function ch(b,a){b<Jg&&1<b&&(Jg=b);null!==a&&b<vi&&1<b&&(vi=b,Lh=a)}function wi(b){var a=ii(b.alternate,b,Ed);b.memoizedProps=b.pendingProps;null===a&&(a=fi(b));Ki.current=null;return a}function fi(b){Jb=b;do{var c=Jb.alternate;b=Jb.return;if(0===(Jb.effectTag&1024)){a:{var d=c;c=Jb;var e=Ed,f=c.pendingProps;switch(c.tag){case 2:break;case 16:break;case 15:case 0:break;case 1:Qb(c.type)&&
oe(c);break;case 3:we(c);fc(c);e=c.stateNode;e.pendingContext&&(e.context=e.pendingContext,e.pendingContext=null);if(null===d||null===d.child)pf(c),c.effectTag&=-3;Of(c);break;case 5:$f(c);e=zc(Dh.current);var g=c.type;if(null!==d&&null!=c.stateNode)oh(d,c,g,f,e),d.ref!==c.ref&&(c.effectTag|=128);else if(f){var r=zc(yd.current);if(pf(c)){d=c;f=void 0;g=d.stateNode;var h=d.type,l=d.memoizedProps;g[le]=d;g[xf]=l;switch(h){case "iframe":case "object":case "embed":Oa("load",g);break;case "video":case "audio":for(var u=
0;u<vg.length;u++)Oa(vg[u],g);break;case "source":Oa("error",g);break;case "img":case "image":case "link":Oa("error",g);Oa("load",g);break;case "form":Oa("reset",g);Oa("submit",g);break;case "details":Oa("toggle",g);break;case "input":ya(g,l);Oa("invalid",g);Pc(e,"onChange");break;case "select":g._wrapperState={wasMultiple:!!l.multiple};Oa("invalid",g);Pc(e,"onChange");break;case "textarea":nc(g,l),Oa("invalid",g),Pc(e,"onChange")}vc(h,l);u=null;for(f in l)l.hasOwnProperty(f)&&(r=l[f],"children"===
f?"string"===typeof r?g.textContent!==r&&(u=["children",r]):"number"===typeof r&&g.textContent!==""+r&&(u=["children",""+r]):wf.hasOwnProperty(f)&&null!=r&&Pc(e,f));switch(h){case "input":ea(g);za(g,l,!0);break;case "textarea":ea(g);Ub(g,l);break;case "select":case "option":break;default:"function"===typeof l.onClick&&(g.onclick=Qc)}e=u;d.updateQueue=e;null!==e&&(c.effectTag|=4)}else{l=g;d=f;h=c;u=9===e.nodeType?e:e.ownerDocument;r===Ze.html&&(r=Oc(l));r===Ze.html?"script"===l?(l=u.createElement("div"),
l.innerHTML="\x3cscript\x3e\x3c/script\x3e",u=l.removeChild(l.firstChild)):"string"===typeof d.is?u=u.createElement(l,{is:d.is}):(u=u.createElement(l),"select"===l&&(l=u,d.multiple?l.multiple=!0:d.size&&(l.size=d.size))):u=u.createElementNS(r,l);l=u;l[le]=h;l[xf]=d;d=l;Lg(d,c,!1,!1);h=d;var t=e,k=Ka(g,f);switch(g){case "iframe":case "object":case "embed":Oa("load",h);e=f;break;case "video":case "audio":for(e=0;e<vg.length;e++)Oa(vg[e],h);e=f;break;case "source":Oa("error",h);e=f;break;case "img":case "image":case "link":Oa("error",
h);Oa("load",h);e=f;break;case "form":Oa("reset",h);Oa("submit",h);e=f;break;case "details":Oa("toggle",h);e=f;break;case "input":ya(h,f);e=xa(h,f);Oa("invalid",h);Pc(t,"onChange");break;case "option":e=Xd(h,f);break;case "select":h._wrapperState={wasMultiple:!!f.multiple};e=sd({},f,{value:void 0});Oa("invalid",h);Pc(t,"onChange");break;case "textarea":nc(h,f);e=Md(h,f);Oa("invalid",h);Pc(t,"onChange");break;default:e=f}vc(g,e);l=void 0;u=g;r=h;var m=e;for(l in m)if(m.hasOwnProperty(l)){var v=m[l];
"style"===l?Yg(r,v):"dangerouslySetInnerHTML"===l?(v=v?v.__html:void 0,null!=v&&ui(r,v)):"children"===l?"string"===typeof v?("textarea"!==u||""!==v)&&Nd(r,v):"number"===typeof v&&Nd(r,""+v):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(wf.hasOwnProperty(l)?null!=v&&Pc(t,l):null!=v&&ka(r,l,v,k))}switch(g){case "input":ea(h);za(h,f,!1);break;case "textarea":ea(h);Ub(h,f);break;case "option":null!=f.value&&h.setAttribute("value",""+ia(f.value));break;case "select":e=
h;h=f;e.multiple=!!h.multiple;l=h.value;null!=l?Fc(e,!!h.multiple,l,!1):null!=h.defaultValue&&Fc(e,!!h.multiple,h.defaultValue,!0);break;default:"function"===typeof e.onClick&&(h.onclick=Qc)}Zg(g,f)&&(c.effectTag|=4);c.stateNode=d}null!==c.ref&&(c.effectTag|=128)}else if(null===c.stateNode)throw a(Error(166));break;case 6:if(d&&null!=c.stateNode)Kb(d,c,d.memoizedProps,f);else{if("string"!==typeof f&&null===c.stateNode)throw a(Error(166));d=zc(Dh.current);zc(yd.current);pf(c)?(e=c.stateNode,d=c.memoizedProps,
e[le]=c,e.nodeValue!==d&&(c.effectTag|=4)):(e=c,d=(9===d.nodeType?d:d.ownerDocument).createTextNode(f),d[le]=c,e.stateNode=d)}break;case 11:break;case 13:fb(kc,c);f=c.memoizedState;if(0!==(c.effectTag&64)){c.expirationTime=e;break a}e=null!==f;f=!1;null===d?pf(c):(g=d.memoizedState,f=null!==g,e||null===g||(g=d.child.sibling,null!==g&&(h=c.firstEffect,null!==h?(c.firstEffect=g,g.nextEffect=h):(c.firstEffect=c.lastEffect=g,g.nextEffect=null),g.effectTag=8)));if(e&&!f&&0!==(c.mode&2))if(null===d&&!0!==
c.memoizedProps.unstable_avoidThisFallback||0!==(kc.current&od))je===Ig&&(je=Ye);else if(je===Ig||je===Ye)je=Mh;if(e||f)c.effectTag|=4;break;case 7:break;case 8:break;case 12:break;case 4:we(c);Of(c);break;case 10:Od(c);break;case 9:break;case 14:break;case 17:Qb(c.type)&&oe(c);break;case 18:break;case 19:fb(kc,c);f=c.memoizedState;if(null===f)break;g=0!==(c.effectTag&64);h=f.rendering;if(null===h)if(g)ce(f,!1);else{if(je!==Ig||null!==d&&0!==(d.effectTag&64))for(d=c.child;null!==d;){h=Re(d);if(null!==
h){c.effectTag|=64;ce(f,!1);d=h.updateQueue;null!==d&&(c.updateQueue=d,c.effectTag|=4);c.firstEffect=c.lastEffect=null;for(d=c.child;null!==d;)f=d,g=e,f.effectTag&=2,f.nextEffect=null,f.firstEffect=null,f.lastEffect=null,h=f.alternate,null===h?(f.childExpirationTime=0,f.expirationTime=g,f.child=null,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null):(f.childExpirationTime=h.childExpirationTime,f.expirationTime=h.expirationTime,f.child=h.child,f.memoizedProps=h.memoizedProps,
f.memoizedState=h.memoizedState,f.updateQueue=h.updateQueue,g=h.dependencies,f.dependencies=null===g?null:{expirationTime:g.expirationTime,firstContext:g.firstContext,responders:g.responders}),d=d.sibling;Ib(kc,kc.current&sf|Gh,c);c=c.child;break a}d=d.sibling}}else{if(!g)if(d=Re(h),null!==d){if(c.effectTag|=64,g=!0,ce(f,!0),null===f.tail&&"hidden"===f.tailMode){e=d.updateQueue;null!==e&&(c.updateQueue=e,c.effectTag|=4);c=c.lastEffect=f.lastEffect;null!==c&&(c.nextEffect=null);break}}else Xb()>f.tailExpiration&&
1<e&&(c.effectTag|=64,g=!0,ce(f,!1),c.expirationTime=c.childExpirationTime=e-1);f.isBackwards?(h.sibling=c.child,c.child=h):(e=f.last,null!==e?e.sibling=h:c.child=h,f.last=h)}if(null!==f.tail){0===f.tailExpiration&&(f.tailExpiration=Xb()+500);e=f.tail;f.rendering=e;f.tail=e.sibling;f.lastEffect=c.lastEffect;e.sibling=null;d=kc.current;d=g?d&sf|Gh:d&sf;Ib(kc,d,c);c=e;break a}break;case 20:break;default:throw a(Error(156));}c=null}e=Jb;if(1===Ed||1!==e.childExpirationTime){d=0;for(f=e.child;null!==
f;)g=f.expirationTime,h=f.childExpirationTime,g>d&&(d=g),h>d&&(d=h),f=f.sibling;e.childExpirationTime=d}if(null!==c)return c;null!==b&&0===(b.effectTag&1024)&&(null===b.firstEffect&&(b.firstEffect=Jb.firstEffect),null!==Jb.lastEffect&&(null!==b.lastEffect&&(b.lastEffect.nextEffect=Jb.firstEffect),b.lastEffect=Jb.lastEffect),1<Jb.effectTag&&(null!==b.lastEffect?b.lastEffect.nextEffect=Jb:b.firstEffect=Jb,b.lastEffect=Jb))}else{c=de(Jb,Ed);if(null!==c)return c.effectTag&=1023,c;null!==b&&(b.firstEffect=
b.lastEffect=null,b.effectTag|=1024)}c=Jb.sibling;if(null!==c)return c;Jb=b}while(null!==Jb);je===Ig&&(je=Xi);return null}function Sa(b){var a=xg();kb(99,Li.bind(null,b,a));null!==xi&&ic(97,function(){Ae();return null});return null}function Li(b,c){Ae();if((bb&(Mf|Nf))!==Bc)throw a(Error(327));var d=b.finishedWork,e=b.finishedExpirationTime;if(null===d)return null;b.finishedWork=null;b.finishedExpirationTime=0;if(d===b.current)throw a(Error(177));b.callbackNode=null;b.callbackExpirationTime=0;var f=
d.expirationTime,g=d.childExpirationTime;f=g>f?g:f;b.firstPendingTime=f;f<b.lastPendingTime&&(b.lastPendingTime=f);b===Jh&&(Jb=Jh=null,Ed=0);1<d.effectTag?null!==d.lastEffect?(d.lastEffect.nextEffect=d,f=d.firstEffect):f=d:f=d.firstEffect;if(null!==f){g=bb;bb|=Nf;Ki.current=null;Ph=Vg;var h=Hb();if(Yb(h)){if("selectionStart"in h)var r={start:h.selectionStart,end:h.selectionEnd};else a:{r=(r=h.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&0!==l.rangeCount){r=l.anchorNode;
var u=l.anchorOffset,t=l.focusNode;l=l.focusOffset;try{r.nodeType,t.nodeType}catch(Yi){r=null;break a}var k=0,m=-1,v=-1,n=0,w=0,D=h,y=null;b:for(;;){for(var Cb;;){D!==r||0!==u&&3!==D.nodeType||(m=k+u);D!==t||0!==l&&3!==D.nodeType||(v=k+l);3===D.nodeType&&(k+=D.nodeValue.length);if(null===(Cb=D.firstChild))break;y=D;D=Cb}for(;;){if(D===h)break b;y===r&&++n===u&&(m=k);y===t&&++w===l&&(v=k);if(null!==(Cb=D.nextSibling))break;D=y;y=D.parentNode}D=Cb}r=-1===m||-1===v?null:{start:m,end:v}}else r=null}r=
r||{start:0,end:0}}else r=null;ec={focusedElem:h,selectionRange:r};Vg=!1;Ua=f;do try{for(;null!==Ua;){if(0!==(Ua.effectTag&256)){var A=Ua.alternate;h=Ua;switch(h.tag){case 0:case 11:case 15:tf(yi,Cg,h);break;case 1:if(h.effectTag&256&&null!==A){var x=A.memoizedProps,z=A.memoizedState,B=h.stateNode,G=B.getSnapshotBeforeUpdate(h.elementType===h.type?x:nb(h.type,x),z);B.__reactInternalSnapshotBeforeUpdate=G}break;case 3:case 5:case 6:case 4:case 17:break;default:throw a(Error(163));}}Ua=Ua.nextEffect}}catch(Yi){if(null===
Ua)throw a(Error(330));We(Ua,Yi);Ua=Ua.nextEffect}while(null!==Ua);Ua=f;do try{for(A=c;null!==Ua;){var C=Ua.effectTag;C&16&&Nd(Ua.stateNode,"");if(C&128){var K=Ua.alternate;if(null!==K){var I=K.ref;null!==I&&("function"===typeof I?I(null):I.current=null)}}switch(C&14){case 2:hc(Ua);Ua.effectTag&=-3;break;case 6:hc(Ua);Ua.effectTag&=-3;qd(Ua.alternate,Ua);break;case 4:qd(Ua.alternate,Ua);break;case 8:x=Ua;pd(x,A);x.return=null;x.child=null;x.memoizedState=null;x.updateQueue=null;x.dependencies=null;
var E=x.alternate;null!==E&&(E.return=null,E.child=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null)}Ua=Ua.nextEffect}}catch(Yi){if(null===Ua)throw a(Error(330));We(Ua,Yi);Ua=Ua.nextEffect}while(null!==Ua);I=ec;K=Hb();C=I.focusedElem;A=I.selectionRange;if(K!==C&&C&&C.ownerDocument&&Nc(C.ownerDocument.documentElement,C)){null!==A&&Yb(C)&&(K=A.start,I=A.end,void 0===I&&(I=K),"selectionStart"in C?(C.selectionStart=K,C.selectionEnd=Math.min(I,C.value.length)):(I=(K=C.ownerDocument||document)&&
K.defaultView||window,I.getSelection&&(I=I.getSelection(),x=C.textContent.length,E=Math.min(A.start,x),A=void 0===A.end?E:Math.min(A.end,x),!I.extend&&E>A&&(x=A,A=E,E=x),x=ud(C,E),z=ud(C,A),x&&z&&(1!==I.rangeCount||I.anchorNode!==x.node||I.anchorOffset!==x.offset||I.focusNode!==z.node||I.focusOffset!==z.offset)&&(K=K.createRange(),K.setStart(x.node,x.offset),I.removeAllRanges(),E>A?(I.addRange(K),I.extend(z.node,z.offset)):(K.setEnd(z.node,z.offset),I.addRange(K))))));K=[];for(I=C;I=I.parentNode;)1===
I.nodeType&&K.push({element:I,left:I.scrollLeft,top:I.scrollTop});"function"===typeof C.focus&&C.focus();for(C=0;C<K.length;C++)I=K[C],I.element.scrollLeft=I.left,I.element.scrollTop=I.top}ec=null;Vg=!!Ph;Ph=null;b.current=d;Ua=f;do try{for(C=e;null!==Ua;){var gd=Ua.effectTag;if(gd&36){var M=Ua.alternate;K=Ua;I=C;switch(K.tag){case 0:case 11:case 15:tf(dj,ph,K);break;case 1:var H=K.stateNode;if(K.effectTag&4)if(null===M)H.componentDidMount();else{var N=K.elementType===K.type?M.memoizedProps:nb(K.type,
M.memoizedProps);H.componentDidUpdate(N,M.memoizedState,H.__reactInternalSnapshotBeforeUpdate)}var F=K.updateQueue;null!==F&&Zf(K,F,H,I);break;case 3:var p=K.updateQueue;if(null!==p){E=null;if(null!==K.child)switch(K.child.tag){case 5:E=K.child.stateNode;break;case 1:E=K.child.stateNode}Zf(K,p,E,I)}break;case 5:var J=K.stateNode;null===M&&K.effectTag&4&&(I=J,Zg(K.type,K.memoizedProps)&&I.focus());break;case 6:break;case 4:break;case 12:break;case 13:case 19:case 17:case 20:break;default:throw a(Error(163));
}}if(gd&128){var q=Ua.ref;if(null!==q){var L=Ua.stateNode;switch(Ua.tag){case 5:var Ye=L;break;default:Ye=L}"function"===typeof q?q(Ye):q.current=Ye}}gd&512&&(hg=!0);Ua=Ua.nextEffect}}catch(Yi){if(null===Ua)throw a(Error(330));We(Ua,Yi);Ua=Ua.nextEffect}while(null!==Ua);Ua=null;Fd();bb=g}else b.current=d;if(hg)hg=!1,xi=b,zi=e,Ai=c;else for(Ua=f;null!==Ua;)c=Ua.nextEffect,Ua.nextEffect=null,Ua=c;c=b.firstPendingTime;0!==c?(gd=jc(),gd=hb(gd,c),dc(b,gd,c)):cc=null;"function"===typeof ji&&ji(d.stateNode,
e);1073741823===c?b===Hg?Gg++:(Gg=0,Hg=b):Gg=0;if(Xe)throw Xe=!1,b=Wi,Wi=null,b;if((bb&di)!==Bc)return null;Zb();return null}function Ae(){if(null===xi)return!1;var b=xi,a=zi,c=Ai;xi=null;zi=0;Ai=90;return kb(97<c?97:c,Qh.bind(null,b,a))}function Qh(b){if((bb&(Mf|Nf))!==Bc)throw a(Error(331));var c=bb;bb|=Nf;for(b=b.current.firstEffect;null!==b;){try{var d=b;if(0!==(d.effectTag&512))switch(d.tag){case 0:case 11:case 15:tf(Mi,Cg,d),tf(Cg,Ce,d)}}catch($i){if(null===b)throw a(Error(330));We(b,$i)}d=
b.nextEffect;b.nextEffect=null;b=d}bb=c;Zb();return!0}function De(b,a,c){a=dd(c,a);a=Fg(b,a,1073741823);Pe(b,a);b=lh(b,1073741823);null!==b&&dc(b,99,1073741823)}function We(b,a){if(3===b.tag)De(b,b,a);else for(var c=b.return;null!==c;){if(3===c.tag){De(c,b,a);break}else if(1===c.tag){var d=c.stateNode;if("function"===typeof c.type.getDerivedStateFromError||"function"===typeof d.componentDidCatch&&(null===cc||!cc.has(d))){b=dd(a,b);b=ed(c,b,1073741823);Pe(c,b);c=lh(c,1073741823);null!==c&&dc(c,99,
1073741823);break}}c=c.return}}function nh(b,a,c){var d=b.pingCache;null!==d&&d.delete(a);Jh===b&&Ed===c?je===Mh||je===Ye&&1073741823===Jg&&Xb()-bc<gi?Cc(b,Ed):sc=!0:b.lastPendingTime<c||(a=b.pingTime,0!==a&&a<c||(b.pingTime=c,b.finishedExpirationTime===c&&(b.finishedExpirationTime=0,b.finishedWork=null),a=jc(),a=hb(a,c),dc(b,a,c)))}function kh(b,a){var c=b.stateNode;null!==c&&c.delete(a);c=jc();a=Jf(c,b,null);c=hb(c,a);b=lh(b,a);null!==b&&dc(b,c,a)}function Ni(b){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;
var a=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(a.isDisabled||!a.supportsFiber)return!0;try{var c=a.inject(b);ji=function(b){try{a.onCommitFiberRoot(c,b,void 0,64===(b.current.effectTag&64))}catch(Sg){}};bj=function(b){try{a.onCommitFiberUnmount(c,b)}catch(Sg){}}}catch($i){}return!0}function ig(b,a,c,d){this.tag=b;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=a;this.dependencies=this.memoizedState=this.updateQueue=
this.memoizedProps=null;this.mode=d;this.effectTag=0;this.lastEffect=this.firstEffect=this.nextEffect=null;this.childExpirationTime=this.expirationTime=0;this.alternate=null}function rc(b,a,c,d){return new ig(b,a,c,d)}function be(b){b=b.prototype;return!(!b||!b.isReactComponent)}function Ob(b){if("function"===typeof b)return be(b)?1:0;if(void 0!==b&&null!==b){b=b.$$typeof;if(b===Tg)return 11;if(b===yf)return 14}return 2}function Qe(b,a){var c=b.alternate;null===c?(c=rc(b.tag,a,b.key,b.mode),c.elementType=
b.elementType,c.type=b.type,c.stateNode=b.stateNode,c.alternate=b,b.alternate=c):(c.pendingProps=a,c.effectTag=0,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null);c.childExpirationTime=b.childExpirationTime;c.expirationTime=b.expirationTime;c.child=b.child;c.memoizedProps=b.memoizedProps;c.memoizedState=b.memoizedState;c.updateQueue=b.updateQueue;a=b.dependencies;c.dependencies=null===a?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders};c.sibling=b.sibling;
c.index=b.index;c.ref=b.ref;return c}function dh(b,c,d,e,f,g){var h=2;e=b;if("function"===typeof b)be(b)&&(h=1);else if("string"===typeof b)h=5;else a:switch(b){case Jd:return Eb(d.children,f,g,c);case Zi:h=8;f|=7;break;case Ti:h=8;f|=1;break;case qi:return b=rc(12,d,c,f|8),b.elementType=qi,b.type=qi,b.expirationTime=g,b;case Me:return b=rc(13,d,c,f),b.type=Me,b.elementType=Me,b.expirationTime=g,b;case Wf:return b=rc(19,d,c,f),b.elementType=Wf,b.expirationTime=g,b;default:if("object"===typeof b&&
null!==b)switch(b.$$typeof){case Ui:h=10;break a;case Gi:h=9;break a;case Tg:h=11;break a;case yf:h=14;break a;case Xf:h=16;e=null;break a}throw a(Error(130),null==b?b:typeof b,"");}c=rc(h,d,c,f);c.elementType=b;c.type=e;c.expirationTime=g;return c}function Eb(b,a,c,d){b=rc(7,b,d,a);b.expirationTime=c;return b}function xb(b,a,c){b=rc(6,b,null,a);b.expirationTime=c;return b}function $d(b,a,c){a=rc(4,null!==b.children?b.children:[],b.key,a);a.expirationTime=c;a.stateNode={containerInfo:b.containerInfo,
pendingChildren:null,implementation:b.implementation};return a}function Bi(b,a,c){this.tag=a;this.current=null;this.containerInfo=b;this.pingCache=this.pendingChildren=null;this.finishedExpirationTime=0;this.finishedWork=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=this.firstBatch=null;this.pingTime=this.lastPendingTime=this.firstPendingTime=this.callbackExpirationTime=0}function jg(b,a,c){b=new Bi(b,a,c);a=rc(3,null,null,2===a?7:1===a?3:0);b.current=
a;return a.stateNode=b}function Ee(b,c,d,e,f,g){var h=c.current;a:if(d){d=d._reactInternalFiber;b:{if(2!==ub(d)||1!==d.tag)throw a(Error(170));var r=d;do{switch(r.tag){case 3:r=r.stateNode.context;break b;case 1:if(Qb(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break b}}r=r.return}while(null!==r);throw a(Error(171));}if(1===d.tag){var l=d.type;if(Qb(l)){d=ij(d,l,r);break a}}d=r}else d=Bf;null===c.context?c.context=d:c.pendingContext=d;c=g;f=ac(e,f);f.payload={element:b};c=void 0===
c?null:c;null!==c&&(f.callback=c);Pe(h,f);Ac(h,e);return e}function qh(b,a,c,d){var e=a.current,f=jc(),g=Cd.suspense;e=Jf(f,e,g);return Ee(b,a,c,e,g,d)}function Ci(b){b=b.current;if(!b.child)return null;switch(b.child.tag){case 5:return b.child.stateNode;default:return b.child.stateNode}}function ej(b,a,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Le,key:null==d?null:""+d,children:b,containerInfo:a,implementation:c}}function Mg(b){var a=1073741821-25*(((1073741821-
jc()+500)/25|0)+1);a<=Oi&&--a;this._expirationTime=Oi=a;this._root=b;this._callbacks=this._next=null;this._hasChildren=this._didComplete=!1;this._children=null;this._defer=!0}function ki(){this._callbacks=null;this._didCommit=!1;this._onCommit=this._onCommit.bind(this)}function Rh(b,a,c){this._internalRoot=jg(b,a,c)}function li(b,a){this._internalRoot=jg(b,2,a)}function Ng(b){return!(!b||1!==b.nodeType&&9!==b.nodeType&&11!==b.nodeType&&(8!==b.nodeType||" react-mount-point-unstable "!==b.nodeValue))}
function Di(b,a){a||(a=b?9===b.nodeType?b.documentElement:b.firstChild:null,a=!(!a||1!==a.nodeType||!a.hasAttribute("data-reactroot")));if(!a)for(var c;c=b.lastChild;)b.removeChild(c);return new Rh(b,0,a)}function Sh(b,a,c,d,e){var f=c._reactRootContainer,g=void 0;if(f){g=f._internalRoot;if("function"===typeof e){var h=e;e=function(){var b=Ci(g);h.call(b)}}qh(a,g,b,e)}else{f=c._reactRootContainer=Di(c,d);g=f._internalRoot;if("function"===typeof e){var r=e;e=function(){var b=Ci(g);r.call(b)}}ie(function(){qh(a,
g,b,e)})}return Ci(g)}function mi(b,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ng(c))throw a(Error(200));return ej(b,c,null,d)}var ug=va(5),sd=va(0),$e=va(8);if(!ug)throw a(Error(227));var Rg=null,vf={},vh=[],og={},wf={},ke={},ta=!1,La=null,Vd=!1,Rf=null,oi={onError:function(b){ta=!0;La=b}},Ha=null,mb=null,lb=null,hd=null,kg={injectEventPluginOrder:function(b){if(Rg)throw a(Error(101));Rg=Array.prototype.slice.call(b);q()},injectEventPluginsByName:function(b){var c=!1,
d;for(d in b)if(b.hasOwnProperty(d)){var e=b[d];if(!vf.hasOwnProperty(d)||vf[d]!==e){if(vf[d])throw a(Error(102),d);vf[d]=e;c=!0}}c&&q()}},Bb=Math.random().toString(36).slice(2),le="__reactInternalInstance$"+Bb,xf="__reactEventHandlers$"+Bb,Vf=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Wd={animationend:x("Animation","AnimationEnd"),animationiteration:x("Animation","AnimationIteration"),animationstart:x("Animation","AnimationStart"),
transitionend:x("Transition","TransitionEnd")},sb={},Sf={};Vf&&(Sf=document.createElement("div").style,"AnimationEvent"in window||(delete Wd.animationend.animation,delete Wd.animationiteration.animation,delete Wd.animationstart.animation),"TransitionEvent"in window||delete Wd.transitionend.transition);var Pi=C("animationend"),Gd=C("animationiteration"),Fe=C("animationstart"),rd=C("transitionend"),vg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),
tc=null,Je=null,Yh=null;sd(E.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():"unknown"!==typeof b.returnValue&&(b.returnValue=!1),this.isDefaultPrevented=D)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():"unknown"!==typeof b.cancelBubble&&(b.cancelBubble=!0),this.isPropagationStopped=D)},persist:function(){this.isPersistent=D},isPersistent:G,destructor:function(){var b=this.constructor.Interface,
a;for(a in b)this[a]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null;this.isPropagationStopped=this.isDefaultPrevented=G;this._dispatchInstances=this._dispatchListeners=null}});E.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(b){return b.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};E.extend=function(b){function a(){}function c(){return d.apply(this,arguments)}var d=this;a.prototype=
d.prototype;var e=new a;sd(e,c.prototype);c.prototype=e;c.prototype.constructor=c;c.Interface=sd({},d.Interface,b);c.extend=d.extend;J(c);return c};J(E);var Ge=E.extend({data:null}),fj=E.extend({data:null}),wh=[9,13,27,32],Vc=Vf&&"CompositionEvent"in window,He=null;Vf&&"documentMode"in document&&(He=document.documentMode);var lg=Vf&&"TextEvent"in window&&!He,Tf=Vf&&(!Vc||He&&8<He&&11>=He),Ke=String.fromCharCode(32),Td={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},
dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",
captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},pi=!1,Ec=!1,Qi={eventTypes:Td,extractEvents:function(b,a,c,d){var e=void 0,f=void 0;if(Vc)a:{switch(b){case "compositionstart":e=Td.compositionStart;break a;case "compositionend":e=Td.compositionEnd;break a;case "compositionupdate":e=Td.compositionUpdate;break a}e=void 0}else Ec?H(b,c)&&(e=Td.compositionEnd):"keydown"===b&&229===c.keyCode&&(e=Td.compositionStart);e?(Tf&&"ko"!==
c.locale&&(Ec||e!==Td.compositionStart?e===Td.compositionEnd&&Ec&&(f=B()):(tc=d,Je="value"in tc?tc.value:tc.textContent,Ec=!0)),e=Ge.getPooled(e,a,c,d),f?e.data=f:(f=K(c),null!==f&&(e.data=f)),z(e),f=e):f=null;(b=lg?M(b,c):I(b,c))?(a=fj.getPooled(Td.beforeInput,a,c,d),a.data=b,z(a)):a=null;return null===f?a:null===a?f:[f,a]}},Zh=null,pg=null,Uf=null,rg=Q,Ld=!1,me={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,
week:!0},Sb=ug.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Sb.hasOwnProperty("ReactCurrentDispatcher")||(Sb.ReactCurrentDispatcher={current:null});Sb.hasOwnProperty("ReactCurrentBatchConfig")||(Sb.ReactCurrentBatchConfig={suspense:null});var zf=/^(.*)[\\\/]/,yc="function"===typeof Symbol&&Symbol.for,kf=yc?Symbol.for("react.element"):60103,Le=yc?Symbol.for("react.portal"):60106,Jd=yc?Symbol.for("react.fragment"):60107,Ti=yc?Symbol.for("react.strict_mode"):60108,qi=yc?Symbol.for("react.profiler"):
60114,Ui=yc?Symbol.for("react.provider"):60109,Gi=yc?Symbol.for("react.context"):60110,Zi=yc?Symbol.for("react.concurrent_mode"):60111,Tg=yc?Symbol.for("react.forward_ref"):60112,Me=yc?Symbol.for("react.suspense"):60113,Wf=yc?Symbol.for("react.suspense_list"):60120,yf=yc?Symbol.for("react.memo"):60115,Xf=yc?Symbol.for("react.lazy"):60116;yc&&Symbol.for("react.fundamental");yc&&Symbol.for("react.responder");var xh="function"===typeof Symbol&&Symbol.iterator,yh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
qg=Object.prototype.hasOwnProperty,ri={},Yf={},id={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(b){id[b]=new ja(b,0,!1,b,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(b){var a=b[0];id[a]=new ja(a,1,!1,b[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(b){id[b]=
new ja(b,2,!1,b.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(b){id[b]=new ja(b,2,!1,b,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(b){id[b]=new ja(b,3,!1,b.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(b){id[b]=
new ja(b,3,!0,b,null,!1)});["capture","download"].forEach(function(b){id[b]=new ja(b,4,!1,b,null,!1)});["cols","rows","size","span"].forEach(function(b){id[b]=new ja(b,6,!1,b,null,!1)});["rowSpan","start"].forEach(function(b){id[b]=new ja(b,5,!1,b.toLowerCase(),null,!1)});var Ri=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(b){var a=
b.replace(Ri,oa);id[a]=new ja(a,1,!1,b,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(b){var a=b.replace(Ri,oa);id[a]=new ja(a,1,!1,b,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(b){var a=b.replace(Ri,oa);id[a]=new ja(a,1,!1,b,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(b){id[b]=new ja(b,1,!1,b.toLowerCase(),null,!1)});id.xlinkHref=new ja("xlinkHref",
1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(b){id[b]=new ja(b,1,!1,b.toLowerCase(),null,!0)});var S={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},ne=null,Kd=null,Dc=!1;Vf&&(Dc=R("input")&&(!document.documentMode||9<document.documentMode));var rh={eventTypes:S,_isInputEventSupported:Dc,extractEvents:function(b,a,d,
e){var f=a?c(a):window,g=void 0,h=void 0,r=f.nodeName&&f.nodeName.toLowerCase();"select"===r||"input"===r&&"file"===f.type?g=wa:ca(f)?Dc?g=Ja:(g=Ba,h=Ea):(r=f.nodeName)&&"input"===r.toLowerCase()&&("checkbox"===f.type||"radio"===f.type)&&(g=Na);if(g&&(g=g(b,a)))return ra(g,d,e);h&&h(b,f,a);"blur"===b&&(b=f._wrapperState)&&b.controlled&&"number"===f.type&&Da(f,"number",f.value)}},sh=E.extend({view:null,detail:null}),Ia={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},ni=0,Ei=0,th=!1,
Xa=!1,Og=sh.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Mb,button:null,buttons:null,relatedTarget:function(b){return b.relatedTarget||(b.fromElement===b.srcElement?b.toElement:b.fromElement)},movementX:function(b){if("movementX"in b)return b.movementX;var a=ni;ni=b.screenX;return th?"mousemove"===b.type?b.screenX-a:0:(th=!0,0)},movementY:function(b){if("movementY"in b)return b.movementY;var a=
Ei;Ei=b.screenY;return Xa?"mousemove"===b.type?b.screenY-a:0:(Xa=!0,0)}}),Pg=Og.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),yb={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",
dependencies:["pointerout","pointerover"]}},Qg={eventTypes:yb,extractEvents:function(b,a,d,e){var g="mouseover"===b||"pointerover"===b,h="mouseout"===b||"pointerout"===b;if(g&&(d.relatedTarget||d.fromElement)||!h&&!g)return null;g=e.window===e?e:(g=e.ownerDocument)?g.defaultView||g.parentWindow:window;h?(h=a,a=(a=d.relatedTarget||d.toElement)?f(a):null):h=null;if(h===a)return null;var r=void 0,l=void 0,t=void 0,k=void 0;if("mouseout"===b||"mouseover"===b)r=Og,l=yb.mouseLeave,t=yb.mouseEnter,k="mouse";
else if("pointerout"===b||"pointerover"===b)r=Pg,l=yb.pointerLeave,t=yb.pointerEnter,k="pointer";var m=null==h?g:c(h);g=null==a?g:c(a);b=r.getPooled(l,h,d,e);b.type=k+"leave";b.target=m;b.relatedTarget=g;d=r.getPooled(t,a,d,e);d.type=k+"enter";d.target=g;d.relatedTarget=m;e=a;if(h&&e)a:{a=h;g=e;k=0;for(r=a;r;r=u(r))k++;r=0;for(t=g;t;t=u(t))r++;for(;0<k-r;)a=u(a),k--;for(;0<r-k;)g=u(g),r--;for(;k--;){if(a===g||a===g.alternate)break a;a=u(a);g=u(g)}a=null}else a=null;g=a;for(a=[];h&&h!==g;){k=h.alternate;
if(null!==k&&k===g)break;a.push(h);h=u(h)}for(h=[];e&&e!==g;){k=e.alternate;if(null!==k&&k===g)break;h.push(e);e=u(e)}for(e=0;e<a.length;e++)y(a[e],"bubbled",b);for(e=h.length;0<e--;)y(h[e],"captured",d);return[b,d]}},Ug=Object.prototype.hasOwnProperty;new Map;new Map;new Set;new Map;var af=E.extend({animationName:null,elapsedTime:null,pseudoElement:null}),tb=E.extend({clipboardData:function(b){return"clipboardData"in b?b.clipboardData:window.clipboardData}}),Th=sh.extend({relatedTarget:null}),Ie=
{Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",
117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mg=sh.extend({key:function(b){if(b.key){var a=Ie[b.key]||b.key;if("Unidentified"!==a)return a}return"keypress"===b.type?(b=gb(b),13===b?"Enter":String.fromCharCode(b)):"keydown"===b.type||"keyup"===b.type?Hd[b.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Mb,charCode:function(b){return"keypress"===b.type?
gb(b):0},keyCode:function(b){return"keydown"===b.type||"keyup"===b.type?b.keyCode:0},which:function(b){return"keypress"===b.type?gb(b):"keydown"===b.type||"keyup"===b.type?b.keyCode:0}}),Qa=Og.extend({dataTransfer:null}),Va=sh.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Mb}),Wa=E.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),fd=Og.extend({deltaX:function(b){return"deltaX"in b?b.deltaX:"wheelDeltaX"in
b?-b.wheelDeltaX:0},deltaY:function(b){return"deltaY"in b?b.deltaY:"wheelDeltaY"in b?-b.wheelDeltaY:"wheelDelta"in b?-b.wheelDelta:0},deltaZ:null,deltaMode:null}),Uh=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],
["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",
1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[Pi,"animationEnd",2],[Gd,"animationIteration",2],[Fe,"animationStart",2],["canplay","canPlay",2],["canplaythrough",
"canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",
2],[rd,"transitionEnd",2],["waiting","waiting",2]],rb={},Ra={},Tb=0;for(;Tb<Uh.length;Tb++){var bf=Uh[Tb],Pb=bf[0],Pf=bf[1],Vh=bf[2],Wh="on"+(Pf[0].toUpperCase()+Pf.slice(1)),Xh={phasedRegistrationNames:{bubbled:Wh,captured:Wh+"Capture"},dependencies:[Pb],eventPriority:Vh};rb[Pf]=Xh;Ra[Pb]=Xh}var cf={eventTypes:rb,getEventPriority:function(b){b=Ra[b];return void 0!==b?b.eventPriority:2},extractEvents:function(b,a,c,d){var e=Ra[b];if(!e)return null;switch(b){case "keypress":if(0===gb(c))return null;
case "keydown":case "keyup":b=mg;break;case "blur":case "focus":b=Th;break;case "click":if(2===c.button)return null;case "auxclick":case "dblclick":case "mousedown":case "mousemove":case "mouseup":case "mouseout":case "mouseover":case "contextmenu":b=Og;break;case "drag":case "dragend":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "dragstart":case "drop":b=Qa;break;case "touchcancel":case "touchend":case "touchmove":case "touchstart":b=Va;break;case Pi:case Gd:case Fe:b=af;
break;case rd:b=Wa;break;case "scroll":b=sh;break;case "wheel":b=fd;break;case "copy":case "cut":case "paste":b=tb;break;case "gotpointercapture":case "lostpointercapture":case "pointercancel":case "pointerdown":case "pointermove":case "pointerout":case "pointerover":case "pointerup":b=Pg;break;default:b=E}a=b.getPooled(e,a,c,d);z(a);return a}},si=cf.getEventPriority,Wg=[],Vg=!0,zh=new ("function"===typeof WeakMap?WeakMap:Map),uh=Vf&&"documentMode"in document&&11>=document.documentMode,Xg={select:{phasedRegistrationNames:{bubbled:"onSelect",
captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},ef=null,tg=null,ff=null,sg=!1,Fi={eventTypes:Xg,extractEvents:function(b,a,d,e){var f=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument,g;if(!(g=!f)){a:{f=Ya(f);g=ke.onSelect;for(var h=0;h<g.length;h++)if(!f.has(g[h])){f=!1;break a}f=!0}g=!f}if(g)return null;f=a?c(a):window;switch(b){case "focus":if(ca(f)||"true"===f.contentEditable)ef=f,tg=a,ff=null;break;
case "blur":ff=tg=ef=null;break;case "mousedown":sg=!0;break;case "contextmenu":case "mouseup":case "dragend":return sg=!1,uc(d,e);case "selectionchange":if(uh)break;case "keydown":case "keyup":return uc(d,e)}return null}};kg.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));Ha=r;mb=d;lb=c;kg.injectEventPluginsByName({SimpleEventPlugin:cf,EnterLeaveEventPlugin:Qg,ChangeEventPlugin:rh,SelectEventPlugin:Fi,
BeforeInputEventPlugin:Qi});var Ze={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},ng=void 0,ui=function(b){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(a,c,d,e){MSApp.execUnsafeLocalFunction(function(){return b(a,c,d,e)})}:b}(function(b,a){if(b.namespaceURI!==Ze.svg||"innerHTML"in b)b.innerHTML=a;else{ng=ng||document.createElement("div");ng.innerHTML="\x3csvg\x3e"+a+"\x3c/svg\x3e";for(a=ng.firstChild;b.firstChild;)b.removeChild(b.firstChild);
for(;a.firstChild;)b.appendChild(a.firstChild)}}),Ga={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,
tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$c=["Webkit","ms","Moz","O"];Object.keys(Ga).forEach(function(b){$c.forEach(function(a){a=a+b.charAt(0).toUpperCase()+b.substring(1);Ga[a]=Ga[b]})});var Af=sd({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Ph=null,ec=null,hi="function"===
typeof setTimeout?setTimeout:void 0,Ji="function"===typeof clearTimeout?clearTimeout:void 0;new Set;var $g=[],wg=-1,Bf={},ad={current:Bf},Yc={current:!1},Rc=Bf,Ah=$e.unstable_runWithPriority,bh=$e.unstable_scheduleCallback,Wb=$e.unstable_cancelCallback,Be=$e.unstable_shouldYield,Id=$e.unstable_requestPaint,Qf=$e.unstable_now,Ne=$e.unstable_getCurrentPriorityLevel,re=$e.unstable_ImmediatePriority,ah=$e.unstable_UserBlockingPriority,yg=$e.unstable_NormalPriority,Cf=$e.unstable_LowPriority,Oe=$e.unstable_IdlePriority,
Hi={},Fd=void 0!==Id?Id:function(){},Gc=null,Hc=null,bd=!1,Ud=Qf(),Xb=1E4>Ud?Qf:function(){return Qf()-Ud},kd={current:null},te=null,$b=null,zg=null,ue=!1,Cd=Sb.ReactCurrentBatchConfig,ai=(new ug.Component).refs,$h={isMounted:function(b){return(b=b._reactInternalFiber)?2===ub(b):!1},enqueueSetState:function(b,a,c){b=b._reactInternalFiber;var d=jc(),e=Cd.suspense;d=Jf(d,b,e);e=ac(d,e);e.payload=a;void 0!==c&&null!==c&&(e.callback=c);Pe(b,e);Ac(b,d)},enqueueReplaceState:function(b,a,c){b=b._reactInternalFiber;
var d=jc(),e=Cd.suspense;d=Jf(d,b,e);e=ac(d,e);e.tag=1;e.payload=a;void 0!==c&&null!==c&&(e.callback=c);Pe(b,e);Ac(b,d)},enqueueForceUpdate:function(b,a){b=b._reactInternalFiber;var c=jc(),d=Cd.suspense;c=Jf(c,b,d);d=ac(c,d);d.tag=2;void 0!==a&&null!==a&&(d.callback=a);Pe(b,d);Ac(b,c)}},Ch=Array.isArray,ze=jf(!0),Lc=jf(!1),Ff={},yd={current:Ff},Gf={current:Ff},Dh={current:Ff},sf=1,od=1,Gh=2,kc={current:0},Cg=0,yi=2,jh=4,Ih=8,dj=16,ph=32,Ce=64,Mi=128,ti=Sb.ReactCurrentDispatcher,eh=0,Ag=null,zd=null,
mf=null,Tc=null,Rd=null,gh=null,Fh=0,If=null,hh=0,bi=!1,Se=null,fh=0,ci={readContext:pc,useCallback:Qd,useContext:Qd,useEffect:Qd,useImperativeHandle:Qd,useLayoutEffect:Qd,useMemo:Qd,useReducer:Qd,useRef:Qd,useState:Qd,useDebugValue:Qd,useResponder:Qd},Eh={readContext:pc,useCallback:function(b,a){ye().memoizedState=[b,void 0===a?null:a];return b},useContext:pc,useEffect:function(b,a){return ag(516,Mi|Ce,b,a)},useImperativeHandle:function(b,a,c){c=null!==c&&void 0!==c?c.concat([b]):null;return ag(4,
jh|ph,bg.bind(null,a,b),c)},useLayoutEffect:function(b,a){return ag(4,jh|ph,b,a)},useMemo:function(b,a){var c=ye();a=void 0===a?null:a;b=b();c.memoizedState=[b,a];return b},useReducer:function(b,a,c){var d=ye();a=void 0!==c?c(a):a;d.memoizedState=d.baseState=a;b=d.queue={last:null,dispatch:null,lastRenderedReducer:b,lastRenderedState:a};b=b.dispatch=ih.bind(null,Ag,b);return[d.memoizedState,b]},useRef:function(b){var a=ye();b={current:b};return a.memoizedState=b},useState:function(b){var a=ye();"function"===
typeof b&&(b=b());a.memoizedState=a.baseState=b;b=a.queue={last:null,dispatch:null,lastRenderedReducer:Bg,lastRenderedState:b};b=b.dispatch=ih.bind(null,Ag,b);return[a.memoizedState,b]},useDebugValue:Bd,useResponder:cb},Kc={readContext:pc,useCallback:function(b,a){var c=nf();a=void 0===a?null:a;var d=c.memoizedState;if(null!==d&&null!==a&&ld(a,d[1]))return d[0];c.memoizedState=[b,a];return b},useContext:pc,useEffect:function(b,a){return of(516,Mi|Ce,b,a)},useImperativeHandle:function(b,a,c){c=null!==
c&&void 0!==c?c.concat([b]):null;return of(4,jh|ph,bg.bind(null,a,b),c)},useLayoutEffect:function(b,a){return of(4,jh|ph,b,a)},useMemo:function(b,a){var c=nf();a=void 0===a?null:a;var d=c.memoizedState;if(null!==d&&null!==a&&ld(a,d[1]))return d[0];b=b();c.memoizedState=[b,a];return b},useReducer:Te,useRef:function(){return nf().memoizedState},useState:function(b){return Te(Bg,b)},useDebugValue:Bd,useResponder:cb},gc=null,ae=null,Kf=!1,cg=Sb.ReactCurrentOwner,Rb=!1,Vi={},Lg=void 0,Of=void 0,oh=void 0,
Kb=void 0;Lg=function(b,a){for(var c=a.child;null!==c;){if(5===c.tag||6===c.tag)b.appendChild(c.stateNode);else if(20===c.tag)b.appendChild(c.stateNode.instance);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===a)break;for(;null===c.sibling;){if(null===c.return||c.return===a)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};Of=function(){};oh=function(b,a,c,d,e){var f=b.memoizedProps;if(f!==d){var g=a.stateNode;zc(yd.current);b=null;switch(c){case "input":f=xa(g,
f);d=xa(g,d);b=[];break;case "option":f=Xd(g,f);d=Xd(g,d);b=[];break;case "select":f=sd({},f,{value:void 0});d=sd({},d,{value:void 0});b=[];break;case "textarea":f=Md(g,f);d=Md(g,d);b=[];break;default:"function"!==typeof f.onClick&&"function"===typeof d.onClick&&(g.onclick=Qc)}vc(c,d);g=c=void 0;var h=null;for(c in f)if(!d.hasOwnProperty(c)&&f.hasOwnProperty(c)&&null!=f[c])if("style"===c){var r=f[c];for(g in r)r.hasOwnProperty(g)&&(h||(h={}),h[g]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==
c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(wf.hasOwnProperty(c)?b||(b=[]):(b=b||[]).push(c,null));for(c in d){var l=d[c];r=null!=f?f[c]:void 0;if(d.hasOwnProperty(c)&&l!==r&&(null!=l||null!=r))if("style"===c)if(r){for(g in r)!r.hasOwnProperty(g)||l&&l.hasOwnProperty(g)||(h||(h={}),h[g]="");for(g in l)l.hasOwnProperty(g)&&r[g]!==l[g]&&(h||(h={}),h[g]=l[g])}else h||(b||(b=[]),b.push(c,h)),h=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,r=r?
r.__html:void 0,null!=l&&r!==l&&(b=b||[]).push(c,""+l)):"children"===c?r===l||"string"!==typeof l&&"number"!==typeof l||(b=b||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(wf.hasOwnProperty(c)?(null!=l&&Pc(e,c),b||r===l||(b=[])):(b=b||[]).push(c,l))}h&&(b=b||[]).push("style",h);if(a.updateQueue=b)a.effectTag|=4}};Kb=function(b,a,c,d){c!==d&&(a.effectTag|=4)};var cj="function"===typeof WeakSet?WeakSet:Set,Oh="function"===typeof WeakMap?WeakMap:Map,Kg=Math.ceil,
Nh=Sb.ReactCurrentDispatcher,Ki=Sb.ReactCurrentOwner,Bc=0,di=8,Mf=16,Nf=32,Ig=0,ei=1,Ye=2,Mh=3,Xi=4,bb=Bc,Jh=null,Jb=null,Ed=0,je=Ig,Jg=1073741823,vi=1073741823,Lh=null,sc=!1,bc=0,gi=500,Ua=null,Xe=!1,Wi=null,cc=null,hg=!1,xi=null,Ai=90,zi=0,mh=null,Gg=0,Hg=null,xc=0,Oi=0,ii=void 0;ii=function(b,c,d){var e=c.expirationTime;if(null!==b){var f=c.pendingProps;if(b.memoizedProps!==f||Yc.current)Rb=!0;else if(e<d){Rb=!1;switch(c.tag){case 3:nd(c);ae=gc=null;Kf=!1;break;case 5:lf(c);if(c.mode&4&&1!==d&&
f.hidden)return c.expirationTime=c.childExpirationTime=1,null;break;case 1:Qb(c.type)&&qe(c);break;case 4:Pd(c,c.stateNode.containerInfo);break;case 10:Ic(c,c.memoizedProps.value);break;case 13:if(null!==c.memoizedState){e=c.child.childExpirationTime;if(0!==e&&e>=d)return Ve(b,c,d);Ib(kc,kc.current&sf,c);c=md(b,c,d);return null!==c?c.sibling:null}Ib(kc,kc.current&sf,c);break;case 19:e=c.childExpirationTime>=d;if(0!==(b.effectTag&64)){if(e)return eg(b,c,d);c.effectTag|=64}f=c.memoizedState;null!==
f&&(f.rendering=null,f.tail=null);Ib(kc,kc.current,c);if(!e)return null}return md(b,c,d)}}else Rb=!1;c.expirationTime=0;switch(c.tag){case 2:e=c.type;null!==b&&(b.alternate=null,c.alternate=null,c.effectTag|=2);b=c.pendingProps;f=vd(c,ad.current);Jc(c,d);f=Hf(null,c,e,b,f,d);c.effectTag|=1;if("object"===typeof f&&null!==f&&"function"===typeof f.render&&void 0===f.$$typeof){c.tag=1;xe();if(Qb(e)){var g=!0;qe(c)}else g=!1;c.memoizedState=null!==f.state&&void 0!==f.state?f.state:null;var h=e.getDerivedStateFromProps;
"function"===typeof h&&ve(c,e,h,b);f.updater=$h;c.stateNode=f;f._reactInternalFiber=c;Sc(c,e,b,d);c=ib(null,c,e,!0,g,d)}else c.tag=0,Uc(null,c,f,d),c=c.child;return c;case 16:f=c.elementType;null!==b&&(b.alternate=null,c.alternate=null,c.effectTag|=2);b=c.pendingProps;f=se(f);c.type=f;g=c.tag=Ob(f);b=nb(f,b);switch(g){case 0:c=qf(null,c,f,b,d);break;case 1:c=rf(null,c,f,b,d);break;case 11:c=Eg(null,c,f,b,d);break;case 14:c=Ue(null,c,f,nb(f.type,b),e,d);break;default:throw a(Error(306),f,"");}return c;
case 0:return e=c.type,f=c.pendingProps,f=c.elementType===e?f:nb(e,f),qf(b,c,e,f,d);case 1:return e=c.type,f=c.pendingProps,f=c.elementType===e?f:nb(e,f),rf(b,c,e,f,d);case 3:nd(c);e=c.updateQueue;if(null===e)throw a(Error(282));f=c.memoizedState;f=null!==f?f.element:null;xd(c,e,c.pendingProps,null,d);e=c.memoizedState.element;if(e===f)ae=gc=null,Kf=!1,c=md(b,c,d);else{f=c.stateNode;if(f=(null===b||null===b.child)&&f.hydrate)ae=Vb(c.stateNode.containerInfo.firstChild),gc=c,f=Kf=!0;f?(c.effectTag|=
2,c.child=Lc(c,null,e,d)):(Uc(b,c,e,d),ae=gc=null,Kf=!1);c=c.child}return c;case 5:return lf(c),null===b&&Dd(c),e=c.type,f=c.pendingProps,g=null!==b?b.memoizedProps:null,h=f.children,gf(e,f)?h=null:null!==g&&gf(e,g)&&(c.effectTag|=16),Lf(b,c),c.mode&4&&1!==d&&f.hidden?(c.expirationTime=c.childExpirationTime=1,c=null):(Uc(b,c,h,d),c=c.child),c;case 6:return null===b&&Dd(c),null;case 13:return Ve(b,c,d);case 4:return Pd(c,c.stateNode.containerInfo),e=c.pendingProps,null===b?c.child=ze(c,null,e,d):Uc(b,
c,e,d),c.child;case 11:return e=c.type,f=c.pendingProps,f=c.elementType===e?f:nb(e,f),Eg(b,c,e,f,d);case 7:return Uc(b,c,c.pendingProps,d),c.child;case 8:return Uc(b,c,c.pendingProps.children,d),c.child;case 12:return Uc(b,c,c.pendingProps.children,d),c.child;case 10:a:{e=c.type._context;f=c.pendingProps;h=c.memoizedProps;g=f.value;Ic(c,g);if(null!==h){var r=h.value;g=Pa(r,g)?0:("function"===typeof e._calculateChangedBits?e._calculateChangedBits(r,g):1073741823)|0;if(0===g){if(h.children===f.children&&
!Yc.current){c=md(b,c,d);break a}}else for(r=c.child,null!==r&&(r.return=c);null!==r;){var l=r.dependencies;if(null!==l){h=r.child;for(var u=l.firstContext;null!==u;){if(u.context===e&&0!==(u.observedBits&g)){1===r.tag&&(u=ac(d,null),u.tag=2,Pe(r,u));r.expirationTime<d&&(r.expirationTime=d);u=r.alternate;null!==u&&u.expirationTime<d&&(u.expirationTime=d);wc(r.return,d);l.expirationTime<d&&(l.expirationTime=d);break}u=u.next}}else h=10===r.tag?r.type===c.type?null:r.child:r.child;if(null!==h)h.return=
r;else for(h=r;null!==h;){if(h===c){h=null;break}r=h.sibling;if(null!==r){r.return=h.return;h=r;break}h=h.return}r=h}}Uc(b,c,f.children,d);c=c.child}return c;case 9:return f=c.type,g=c.pendingProps,e=g.children,Jc(c,d),f=pc(f,g.unstable_observedBits),e=e(f),c.effectTag|=1,Uc(b,c,e,d),c.child;case 14:return f=c.type,g=nb(f,c.pendingProps),g=nb(f.type,g),Ue(b,c,f,g,e,d);case 15:return Sd(b,c,c.type,c.pendingProps,e,d);case 17:return e=c.type,f=c.pendingProps,f=c.elementType===e?f:nb(e,f),null!==b&&
(b.alternate=null,c.alternate=null,c.effectTag|=2),c.tag=1,Qb(e)?(b=!0,qe(c)):b=!1,Jc(c,d),Gb(c,e,f,d),Sc(c,e,f,d),ib(null,c,e,!0,b,d);case 19:return eg(b,c,d)}throw a(Error(156));};var ji=null,bj=null;Zh=function(b,c,d){switch(c){case "input":W(b,d);c=d.name;if("radio"===d.type&&null!=c){for(d=b;d.parentNode;)d=d.parentNode;d=d.querySelectorAll("input[name\x3d"+JSON.stringify(""+c)+'][type\x3d"radio"]');for(c=0;c<d.length;c++){var e=d[c];if(e!==b&&e.form===b.form){var f=r(e);if(!f)throw a(Error(90));
fa(e);W(e,f)}}}break;case "textarea":Yd(b,d);break;case "select":c=d.value,null!=c&&Fc(b,!!d.multiple,c,!1)}};Mg.prototype.render=function(b){if(!this._defer)throw a(Error(250));this._hasChildren=!0;this._children=b;var c=this._root._internalRoot,d=this._expirationTime,e=new ki;Ee(b,c,null,d,null,e._onCommit);return e};Mg.prototype.then=function(b){if(this._didComplete)b();else{var a=this._callbacks;null===a&&(a=this._callbacks=[]);a.push(b)}};Mg.prototype.commit=function(){var b=this._root._internalRoot,
c=b.firstBatch;if(!this._defer||null===c)throw a(Error(251));if(this._hasChildren){var d=this._expirationTime;if(c!==this){this._hasChildren&&(d=this._expirationTime=c._expirationTime,this.render(this._children));for(var e=null,f=c;f!==this;)e=f,f=f._next;if(null===e)throw a(Error(251));e._next=f._next;this._next=c;b.firstBatch=this}this._defer=!1;c=d;if((bb&(Mf|Nf))!==Bc)throw a(Error(253));jd(Mc.bind(null,b,c));Zb();c=this._next;this._next=null;c=b.firstBatch=c;null!==c&&c._hasChildren&&c.render(c._children)}else this._next=
null,this._defer=!1};Mg.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var b=this._callbacks;if(null!==b)for(var a=0;a<b.length;a++)(0,b[a])()}};ki.prototype.then=function(b){if(this._didCommit)b();else{var a=this._callbacks;null===a&&(a=this._callbacks=[]);a.push(b)}};ki.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var b=this._callbacks;if(null!==b)for(var c=0;c<b.length;c++){var d=b[c];if("function"!==typeof d)throw a(Error(191),d);d()}}};
li.prototype.render=Rh.prototype.render=function(b,a){var c=this._internalRoot,d=new ki;a=void 0===a?null:a;null!==a&&d.then(a);qh(b,c,null,d._onCommit);return d};li.prototype.unmount=Rh.prototype.unmount=function(b){var a=this._internalRoot,c=new ki;b=void 0===b?null:b;null!==b&&c.then(b);qh(null,a,null,c._onCommit);return c};li.prototype.createBatch=function(){var b=new Mg(this),a=b._expirationTime,c=this._internalRoot,d=c.firstBatch;if(null===d)c.firstBatch=b,b._next=null;else{for(c=null;null!==
d&&d._expirationTime>=a;)c=d,d=d._next;b._next=d;null!==c&&(c._next=b)}return b};Q=Kh;T=uf;V=ge;rg=function(b,a){var c=bb;bb|=2;try{return b(a)}finally{bb=c,bb===Bc&&Zb()}};var Cb={createPortal:mi,findDOMNode:function(b){if(null==b)b=null;else if(1!==b.nodeType){var c=b._reactInternalFiber;if(void 0===c){if("function"===typeof b.render)throw a(Error(188));throw a(Error(268),Object.keys(b));}b=eb(c);b=null===b?null:b.stateNode}return b},hydrate:function(b,c,d){if(!Ng(c))throw a(Error(200));return Sh(null,
b,c,!0,d)},render:function(b,c,d){if(!Ng(c))throw a(Error(200));return Sh(null,b,c,!1,d)},unstable_renderSubtreeIntoContainer:function(b,c,d,e){if(!Ng(d))throw a(Error(200));if(null==b||void 0===b._reactInternalFiber)throw a(Error(38));return Sh(b,c,d,!1,e)},unmountComponentAtNode:function(b){if(!Ng(b))throw a(Error(40));return b._reactRootContainer?(ie(function(){Sh(null,null,b,!1,function(){b._reactRootContainer=null})}),!0):!1},unstable_createPortal:function(){return mi.apply(void 0,arguments)},
unstable_batchedUpdates:Kh,unstable_interactiveUpdates:function(b,a,c,d){ge();return uf(b,a,c,d)},unstable_discreteUpdates:uf,unstable_flushDiscreteUpdates:ge,flushSync:function(b,c){if((bb&(Mf|Nf))!==Bc)throw a(Error(187));var d=bb;bb|=1;try{return kb(99,b.bind(null,c))}finally{bb=d,Zb()}},unstable_createRoot:function(b,c){if(!Ng(b))throw a(Error(299),"unstable_createRoot");return new li(b,null!=c&&!0===c.hydrate)},unstable_createSyncRoot:function(b,c){if(!Ng(b))throw a(Error(299),"unstable_createRoot");
return new Rh(b,1,null!=c&&!0===c.hydrate)},unstable_flushControlled:function(b){var a=bb;bb|=1;try{kb(99,b)}finally{bb=a,bb===Bc&&Zb()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[d,c,r,kg.injectEventPluginsByName,og,z,function(b){g(b,A)},O,P,Nb,t,Ae,{current:!1}]}};(function(b){var a=b.findFiberByHostInstance;return Ni(sd({},b,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sb.ReactCurrentDispatcher,findHostInstanceByFiber:function(b){b=
eb(b);return null===b?null:b.stateNode},findFiberByHostInstance:function(b){return a?a(b):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:f,bundleType:0,version:"16.9.0",rendererPackageName:"react-dom"});var gd={default:Cb},Si=gd&&Cb||gd;Fa.exports=Si.default||Si};
shadow$provide[14]=function(pa,va,Fa,qa){function a(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(q){console.error(q)}}a();Fa.exports=va(9)};
shadow$provide[15]=function(pa,va,Fa,qa){(function(a,q){"object"===typeof qa&&"undefined"!==typeof Fa?Fa.exports=q():"function"===typeof define&&define.amd?define(q):a.moment=q()})(this,function(){function a(){return Hh.apply(null,arguments)}function q(b){return b instanceof Array||"[object Array]"===Object.prototype.toString.call(b)}function p(b){return null!=b&&"[object Object]"===Object.prototype.toString.call(b)}function n(b){return void 0===b}function k(b){return"number"===typeof b||"[object Number]"===
Object.prototype.toString.call(b)}function m(b){return b instanceof Date||"[object Date]"===Object.prototype.toString.call(b)}function h(b,a){var c=[],d;for(d=0;d<b.length;++d)c.push(a(b[d],d));return c}function b(b,a){return Object.prototype.hasOwnProperty.call(b,a)}function g(a,c){for(var d in c)b(c,d)&&(a[d]=c[d]);b(c,"toString")&&(a.toString=c.toString);b(c,"valueOf")&&(a.valueOf=c.valueOf);return a}function e(b,a,c,d){return Mb(b,a,c,d,!0).utc()}function t(b){null==b._pf&&(b._pf={empty:!1,unusedTokens:[],
unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1});return b._pf}function l(b){if(null==b._isValid){var a=t(b),c=vc.call(a.parsedDateParts,function(b){return null!=b});c=!isNaN(b._d.getTime())&&0>a.overflow&&!a.empty&&!a.invalidMonth&&!a.invalidWeekday&&!a.weekdayMismatch&&!a.nullInput&&!a.invalidFormat&&!a.userInvalidated&&(!a.meridiem||a.meridiem&&c);b._strict&&(c=c&&
0===a.charsLeftOver&&0===a.unusedTokens.length&&void 0===a.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(b))return c;b._isValid=c}return b._isValid}function f(b){var a=e(NaN);null!=b?g(t(a),b):t(a).userInvalidated=!0;return a}function d(b,a){var c;n(a._isAMomentObject)||(b._isAMomentObject=a._isAMomentObject);n(a._i)||(b._i=a._i);n(a._f)||(b._f=a._f);n(a._l)||(b._l=a._l);n(a._strict)||(b._strict=a._strict);n(a._tzm)||(b._tzm=a._tzm);n(a._isUTC)||(b._isUTC=a._isUTC);n(a._offset)||(b._offset=a._offset);
n(a._pf)||(b._pf=t(a));n(a._locale)||(b._locale=a._locale);if(0<Ka.length)for(c=0;c<Ka.length;c++){var d=Ka[c];var e=a[d];n(e)||(b[d]=e)}return b}function c(b){d(this,b);this._d=new Date(null!=b._d?b._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===Pc&&(Pc=!0,a.updateOffset(this),Pc=!1)}function r(b){return b instanceof c||null!=b&&null!=b._isAMomentObject}function u(b){return 0>b?Math.ceil(b)||0:Math.floor(b)}function v(b){b=+b;var a=0;0!==b&&isFinite(b)&&(a=u(b));return a}function w(b,
a,c){var d=Math.min(b.length,a.length),e=Math.abs(b.length-a.length),f=0,g;for(g=0;g<d;g++)(c&&b[g]!==a[g]||!c&&v(b[g])!==v(a[g]))&&f++;return f+e}function y(b){!1===a.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function A(b,c){var d=!0;return g(function(){null!=a.deprecationHandler&&a.deprecationHandler(null,b);if(d){for(var e=[],f,g=0;g<arguments.length;g++){f="";if("object"===typeof arguments[g]){f+="\n["+g+"] ";for(var h in arguments[0])f+=
h+": "+arguments[0][h]+", ";f=f.slice(0,-2)}else f=arguments[g];e.push(f)}y(b+"\nArguments: "+Array.prototype.slice.call(e).join("")+"\n"+Error().stack);d=!1}return c.apply(this,arguments)},c)}function z(b,c){null!=a.deprecationHandler&&a.deprecationHandler(b,c);Qc[b]||(y(c),Qc[b]=!0)}function x(b){return b instanceof Function||"[object Function]"===Object.prototype.toString.call(b)}function C(a,c){var d=g({},a),e;for(e in c)b(c,e)&&(p(a[e])&&p(c[e])?(d[e]={},g(d[e],a[e]),g(d[e],c[e])):null!=c[e]?
d[e]=c[e]:delete d[e]);for(e in a)b(a,e)&&!b(c,e)&&p(a[e])&&(d[e]=g({},d[e]));return d}function B(b){null!=b&&this.set(b)}function D(b,a){var c=b.toLowerCase();gf[c]=gf[c+"s"]=gf[a]=b}function G(b){return"string"===typeof b?gf[b]||gf[b.toLowerCase()]:void 0}function E(a){var c={},d,e;for(e in a)b(a,e)&&(d=G(e))&&(c[d]=a[e]);return c}function F(b){var a=[],c;for(c in b)a.push({unit:c,priority:Vb[c]});a.sort(function(b,a){return b.priority-a.priority});return a}function L(b,a,c){var d=""+Math.abs(b);
return(0<=b?c?"+":"":"-")+Math.pow(10,Math.max(0,a-d.length)).toString().substr(1)+d}function J(b,a,c,d){var e=d;"string"===typeof d&&(e=function(){return this[d]()});b&&(Qb[b]=e);a&&(Qb[a[0]]=function(){return L(e.apply(this,arguments),a[1],a[2])});c&&(Qb[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),b)})}function H(b){return b.match(/\[[\s\S]/)?b.replace(/^\[|\]$/g,""):b.replace(/\\/g,"")}function K(b){var a=b.match(fb),c;var d=0;for(c=a.length;d<c;d++)a[d]=Qb[a[d]]?Qb[a[d]]:
H(a[d]);return function(d){var e="",f;for(f=0;f<c;f++)e+=x(a[f])?a[f].call(d,b):a[f];return e}}function M(b,a){if(!b.isValid())return b.localeData().invalidDate();a=I(a,b.localeData());vd[a]=vd[a]||K(a);return vd[a](b)}function I(b,a){function c(b){return a.longDateFormat(b)||b}var d=5;for(Ib.lastIndex=0;0<=d&&Ib.test(b);)b=b.replace(Ib,c),Ib.lastIndex=0,--d;return b}function N(b,a,c){Ic[b]=x(a)?a:function(b,d){return b&&c?c:a}}function O(a,c){return b(Ic,a)?Ic[a](c._strict,c._locale):new RegExp(P(a))}
function P(b){return Q(b.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(b,a,c,d,e){return a||c||d||e}))}function Q(b){return b.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function T(b,a){var c,d=a;"string"===typeof b&&(b=[b]);k(a)&&(d=function(b,c){c[a]=v(b)});for(c=0;c<b.length;c++)Od[b[c]]=d}function V(b,a){T(b,function(b,c,d,e){d._w=d._w||{};a(b,d._w,d,e)})}function Y(b){return 0===b%4&&0!==b%100||0===b%400}function ca(b,c){return function(d){return null!=d?(R(this,b,d),
a.updateOffset(this,c),this):Z(this,b)}}function Z(b,a){return b.isValid()?b._d["get"+(b._isUTC?"UTC":"")+a]():NaN}function R(b,a,c){if(b.isValid()&&!isNaN(c))if("FullYear"===a&&Y(b.year())&&1===b.month()&&29===b.date())b._d["set"+(b._isUTC?"UTC":"")+a](c,b.month(),U(c,b.month()));else b._d["set"+(b._isUTC?"UTC":"")+a](c)}function U(b,a){if(isNaN(b)||isNaN(a))return NaN;var c=(a%12+12)%12;return 1===c?Y(b+(a-c)/12)?29:28:31-c%7%2}function X(b,a){if(!b.isValid())return b;if("string"===typeof a)if(/^\d+$/.test(a))a=
v(a);else if(a=b.localeData().monthsParse(a),!k(a))return b;var c=Math.min(b.date(),U(b.year(),a));b._d["set"+(b._isUTC?"UTC":"")+"Month"](a,c);return b}function ea(b){return null!=b?(X(this,b),a.updateOffset(this,!0),this):Z(this,"Month")}function fa(){function b(b,a){return a.length-b.length}var a=[],c=[],d=[],f;for(f=0;12>f;f++){var g=e([2E3,f]);a.push(this.monthsShort(g,""));c.push(this.months(g,""));d.push(this.months(g,""));d.push(this.monthsShort(g,""))}a.sort(b);c.sort(b);d.sort(b);for(f=
0;12>f;f++)a[f]=Q(a[f]),c[f]=Q(c[f]);for(f=0;24>f;f++)d[f]=Q(d[f]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+d.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+c.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+a.join("|")+")","i")}function la(b,a,c,d,e,f,g){100>b&&0<=b?(a=new Date(b+400,a,c,d,e,f,g),isFinite(a.getFullYear())&&a.setFullYear(b)):a=new Date(b,a,c,d,e,f,g);return a}function da(b){if(100>b&&0<=b){var a=Array.prototype.slice.call(arguments);a[0]=
b+400;a=new Date(Date.UTC.apply(null,a));isFinite(a.getUTCFullYear())&&a.setUTCFullYear(b)}else a=new Date(Date.UTC.apply(null,arguments));return a}function ma(b,a,c){c=7+a-c;return-((7+da(b,0,c).getUTCDay()-a)%7)+c-1}function aa(b,a,c,d,e){c=(7+c-d)%7;d=ma(b,d,e);d=1+7*(a-1)+c+d;0>=d?(a=b-1,b=(Y(a)?366:365)+d):d>(Y(b)?366:365)?(a=b+1,b=d-(Y(b)?366:365)):(a=b,b=d);return{year:a,dayOfYear:b}}function na(b,a,c){var d=ma(b.year(),a,c);d=Math.floor((b.dayOfYear()-d-1)/7)+1;1>d?(b=b.year()-1,a=d+ha(b,
a,c)):d>ha(b.year(),a,c)?(a=d-ha(b.year(),a,c),b=b.year()+1):(b=b.year(),a=d);return{week:a,year:b}}function ha(b,a,c){var d=ma(b,a,c);a=ma(b+1,a,c);return((Y(b)?366:365)-d+a)/7}function ja(b,a){return b.slice(a,7).concat(b.slice(0,a))}function oa(b,a,c){var d;b=b.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;7>d;++d){var f=e([2E3,1]).day(d);this._minWeekdaysParse[d]=this.weekdaysMin(f,"").toLocaleLowerCase();this._shortWeekdaysParse[d]=
this.weekdaysShort(f,"").toLocaleLowerCase();this._weekdaysParse[d]=this.weekdays(f,"").toLocaleLowerCase()}if(c)a="dddd"===a?qc.call(this._weekdaysParse,b):"ddd"===a?qc.call(this._shortWeekdaysParse,b):qc.call(this._minWeekdaysParse,b);else if("dddd"===a){a=qc.call(this._weekdaysParse,b);if(-1!==a)return a;a=qc.call(this._shortWeekdaysParse,b);if(-1!==a)return a;a=qc.call(this._minWeekdaysParse,b)}else if("ddd"===a){a=qc.call(this._shortWeekdaysParse,b);if(-1!==a)return a;a=qc.call(this._weekdaysParse,
b);if(-1!==a)return a;a=qc.call(this._minWeekdaysParse,b)}else{a=qc.call(this._minWeekdaysParse,b);if(-1!==a)return a;a=qc.call(this._weekdaysParse,b);if(-1!==a)return a;a=qc.call(this._shortWeekdaysParse,b)}return-1!==a?a:null}function ka(){function b(b,a){return a.length-b.length}var a=[],c=[],d=[],f=[],g;for(g=0;7>g;g++){var h=e([2E3,1]).day(g);var r=this.weekdaysMin(h,"");var l=this.weekdaysShort(h,"");h=this.weekdays(h,"");a.push(r);c.push(l);d.push(h);f.push(r);f.push(l);f.push(h)}a.sort(b);
c.sort(b);d.sort(b);f.sort(b);for(g=0;7>g;g++)c[g]=Q(c[g]),d[g]=Q(d[g]),f[g]=Q(f[g]);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+f.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+d.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+c.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function ia(){return this.hours()%12||12}function xa(b,a){J(b,0,0,function(){return this.localeData().meridiem(this.hours(),
this.minutes(),a)})}function ya(b,a){return a._meridiemParse}function sa(b){return b?b.toLowerCase().replace("_","-"):b}function W(b){var a=null;if(!Gb[b]&&"undefined"!==typeof Fa&&Fa&&Fa.exports)try{a=Sc._abbr,va("./locale/"+b),za(a)}catch(lc){}return Gb[b]}function za(b,a){b&&((a=n(a)?ra(b):Da(b,a))?Sc=a:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+b+" not found. Did you forget to load it?"));return Sc._abbr}function Da(b,a){if(null!==a){var c=hf;a.abbr=b;if(null!=Gb[b])z("defineLocaleOverride",
"use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),c=Gb[b]._config;else if(null!=a.parentLocale)if(null!=Gb[a.parentLocale])c=Gb[a.parentLocale]._config;else if(c=W(a.parentLocale),null!=c)c=c._config;else return cd[a.parentLocale]||(cd[a.parentLocale]=[]),cd[a.parentLocale].push({name:b,config:a}),null;Gb[b]=new B(C(c,
a));cd[b]&&cd[b].forEach(function(b){Da(b.name,b.config)});za(b);return Gb[b]}delete Gb[b];return null}function ra(b){var a;b&&b._locale&&b._locale._abbr&&(b=b._locale._abbr);if(!b)return Sc;if(!q(b)){if(a=W(b))return a;b=[b]}a:{a=0;for(var c,d,e,f;a<b.length;){f=sa(b[a]).split("-");c=f.length;for(d=(d=sa(b[a+1]))?d.split("-"):null;0<c;){if(e=W(f.slice(0,c).join("-"))){b=e;break a}if(d&&d.length>=c&&w(f,d,!0)>=c-1)break;c--}a++}b=Sc}return b}function ua(b){var a;(a=b._a)&&-2===t(b).overflow&&(a=0>
a[Jc]||11<a[Jc]?Jc:1>a[pc]||a[pc]>U(a[wc],a[Jc])?pc:0>a[Db]||24<a[Db]||24===a[Db]&&(0!==a[wb]||0!==a[ac]||0!==a[Zc])?Db:0>a[wb]||59<a[wb]?wb:0>a[ac]||59<a[ac]?ac:0>a[Zc]||999<a[Zc]?Zc:-1,t(b)._overflowDayOfYear&&(a<wc||a>pc)&&(a=pc),t(b)._overflowWeeks&&-1===a&&(a=Pe),t(b)._overflowWeekday&&-1===a&&(a=Bh),t(b).overflow=a);return b}function Aa(b,a,c){return null!=b?b:null!=a?a:c}function wa(b){var c=[];if(!b._d){var d=new Date(a.now());d=b._useUTC?[d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()]:
[d.getFullYear(),d.getMonth(),d.getDate()];if(b._w&&null==b._a[pc]&&null==b._a[Jc]){var e=b._w;if(null!=e.GG||null!=e.W||null!=e.E){var f=1;var g=4;var h=Aa(e.GG,b._a[wc],na(Pa(),1,4).year);var r=Aa(e.W,1);var l=Aa(e.E,1);if(1>l||7<l)var u=!0}else if(f=b._locale._week.dow,g=b._locale._week.doy,r=na(Pa(),f,g),h=Aa(e.gg,b._a[wc],r.year),r=Aa(e.w,r.week),null!=e.d){if(l=e.d,0>l||6<l)u=!0}else if(null!=e.e){if(l=e.e+f,0>e.e||6<e.e)u=!0}else l=f;1>r||r>ha(h,f,g)?t(b)._overflowWeeks=!0:null!=u?t(b)._overflowWeekday=
!0:(u=aa(h,r,l,f,g),b._a[wc]=u.year,b._dayOfYear=u.dayOfYear)}if(null!=b._dayOfYear){u=Aa(b._a[wc],d[wc]);if(b._dayOfYear>(Y(u)?366:365)||0===b._dayOfYear)t(b)._overflowDayOfYear=!0;u=da(u,0,b._dayOfYear);b._a[Jc]=u.getUTCMonth();b._a[pc]=u.getUTCDate()}for(u=0;3>u&&null==b._a[u];++u)b._a[u]=c[u]=d[u];for(;7>u;u++)b._a[u]=c[u]=null==b._a[u]?2===u?1:0:b._a[u];24===b._a[Db]&&0===b._a[wb]&&0===b._a[ac]&&0===b._a[Zc]&&(b._nextDay=!0,b._a[Db]=0);b._d=(b._useUTC?da:la).apply(null,c);c=b._useUTC?b._d.getUTCDay():
b._d.getDay();null!=b._tzm&&b._d.setUTCMinutes(b._d.getUTCMinutes()-b._tzm);b._nextDay&&(b._a[Db]=24);b._w&&"undefined"!==typeof b._w.d&&b._w.d!==c&&(t(b).weekdayMismatch=!0)}}function Ma(b){var a;var c=b._i;var d=Zd.exec(c)||Ef.exec(c);if(d){t(b).iso=!0;c=0;for(a=zc.length;c<a;c++)if(zc[c][1].exec(d[1])){var e=zc[c][0];var f=!1!==zc[c][2];break}if(null==e)b._isValid=!1;else{if(d[3]){c=0;for(a=Pd.length;c<a;c++)if(Pd[c][1].exec(d[3])){var g=(d[2]||" ")+Pd[c][0];break}if(null==g){b._isValid=!1;return}}if(f||
null==g){if(d[4])if(jf.exec(d[4]))var h="Z";else{b._isValid=!1;return}b._f=e+(g||"")+(h||"");Ba(b)}else b._isValid=!1}}else b._isValid=!1}function ba(b){var a=lf.exec(b._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(a){var c=a[3],d=a[2],e=a[5],f=a[6],g=a[7],h=parseInt(a[4],10);c=[49>=h?2E3+h:999>=h?1900+h:h,Zf.indexOf(c),parseInt(d,10),parseInt(e,10),parseInt(f,10)];g&&c.push(parseInt(g,10));a:{if(g=a[1])if(g=ob.indexOf(g),d=(new Date(c[0],
c[1],c[2])).getDay(),g!==d){t(b).weekdayMismatch=!0;g=b._isValid=!1;break a}g=!0}g&&(b._a=c,(g=a[8])?a=$f[g]:a[9]?a=0:(a=parseInt(a[10],10),g=a%100,a=(a-g)/100*60+g),b._tzm=a,b._d=da.apply(null,b._a),b._d.setUTCMinutes(b._d.getUTCMinutes()-b._tzm),t(b).rfc2822=!0)}else b._isValid=!1}function Ea(b){var c=we.exec(b._i);null!==c?b._d=new Date(+c[1]):(Ma(b),!1===b._isValid&&(delete b._isValid,ba(b),!1===b._isValid&&(delete b._isValid,a.createFromInputFallback(b))))}function Ba(c){if(c._f===a.ISO_8601)Ma(c);
else if(c._f===a.RFC_2822)ba(c);else{c._a=[];t(c).empty=!0;var d=""+c._i,e,f,g=d.length,h=0;var r=I(c._f,c._locale).match(fb)||[];for(e=0;e<r.length;e++){var l=r[e];if(f=(d.match(O(l,c))||[])[0]){var u=d.substr(0,d.indexOf(f));0<u.length&&t(c).unusedInput.push(u);d=d.slice(d.indexOf(f)+f.length);h+=f.length}if(Qb[l]){if(f?t(c).empty=!1:t(c).unusedTokens.push(l),u=c,null!=f&&b(Od,l))Od[l](f,u._a,u,l)}else c._strict&&!f&&t(c).unusedTokens.push(l)}t(c).charsLeftOver=g-h;0<d.length&&t(c).unusedInput.push(d);
12>=c._a[Db]&&!0===t(c).bigHour&&0<c._a[Db]&&(t(c).bigHour=void 0);t(c).parsedDateParts=c._a.slice(0);t(c).meridiem=c._meridiem;d=c._a;e=Db;g=c._locale;r=c._a[Db];h=c._meridiem;null!=h&&(null!=g.meridiemHour?r=g.meridiemHour(r,h):null!=g.isPM&&((g=g.isPM(h))&&12>r&&(r+=12),g||12!==r||(r=0)));d[e]=r;wa(c);ua(c)}}function Na(b){if(!b._d){var a=E(b._i);b._a=h([a.year,a.month,a.day||a.date,a.hour,a.minute,a.second,a.millisecond],function(b){return b&&parseInt(b,10)});wa(b)}}function Ja(b){var a=b._i,
e=b._f;b._locale=b._locale||ra(b._l);if(null===a||void 0===e&&""===a)return f({nullInput:!0});"string"===typeof a&&(b._i=a=b._locale.preparse(a));if(r(a))return new c(ua(a));if(m(a))b._d=a;else if(q(e))if(0===b._f.length)t(b).invalidFormat=!0,b._d=new Date(NaN);else{for(a=0;a<b._f.length;a++){e=0;var h=d({},b);null!=b._useUTC&&(h._useUTC=b._useUTC);h._f=b._f[a];Ba(h);if(l(h)&&(e+=t(h).charsLeftOver,e+=10*t(h).unusedTokens.length,t(h).score=e,null==u||e<u)){var u=e;var k=h}}g(b,k||h)}else e?Ba(b):
Lb(b);l(b)||(b._d=null);return b}function Lb(b){var c=b._i;n(c)?b._d=new Date(a.now()):m(c)?b._d=new Date(c.valueOf()):"string"===typeof c?Ea(b):q(c)?(b._a=h(c.slice(0),function(b){return parseInt(b,10)}),wa(b)):p(c)?Na(b):k(c)?b._d=new Date(c):a.createFromInputFallback(b)}function Mb(b,a,d,e,f){var g={};if(!0===d||!1===d)e=d,d=void 0;var h;if(h=p(b))a:if(h=b,Object.getOwnPropertyNames)h=0===Object.getOwnPropertyNames(h).length;else{for(var r in h)if(h.hasOwnProperty(r)){h=!1;break a}h=!0}if(h||q(b)&&
0===b.length)b=void 0;g._isAMomentObject=!0;g._useUTC=g._isUTC=f;g._l=d;g._i=b;g._f=a;g._strict=e;b=new c(ua(Ja(g)));b._nextDay&&(b.add(1,"d"),b._nextDay=void 0);return b}function Pa(b,a,c,d){return Mb(b,a,c,d,!1)}function zb(b,a){var c;1===a.length&&q(a[0])&&(a=a[0]);if(!a.length)return Pa();var d=a[0];for(c=1;c<a.length;++c)if(!a[c].isValid()||a[c][b](d))d=a[c];return d}function cb(b){var a=E(b);b=a.year||0;var c=a.quarter||0,d=a.month||0,e=a.week||a.isoWeek||0,f=a.day||0,g=a.hour||0,h=a.minute||
0,r=a.second||0,l=a.millisecond||0;a:{for(var u in a)if(-1===qc.call(ld,u)||null!=a[u]&&isNaN(a[u])){a=!1;break a}u=!1;for(var t=0;t<ld.length;++t)if(a[ld[t]]){if(u){a=!1;break a}parseFloat(a[ld[t]])!==v(a[ld[t]])&&(u=!0)}a=!0}this._isValid=a;this._milliseconds=+l+1E3*r+6E4*h+36E5*g;this._days=+f+7*e;this._months=+d+3*c+12*b;this._data={};this._locale=ra();this._bubble()}function ub(b){return b instanceof cb}function db(b){return 0>b?-1*Math.round(-1*b):Math.round(b)}function ab(b,a){J(b,0,0,function(){var b=
this.utcOffset(),c="+";0>b&&(b=-b,c="-");return c+L(~~(b/60),2)+a+L(~~b%60,2)})}function eb(b,a){b=(a||"").match(b);if(null===b)return null;b=((b[b.length-1]||[])+"").match(Hf)||["-",0,0];a=+(60*b[1])+v(b[2]);return 0===a?0:"+"===b[0]?a:-a}function gb(b,c){return c._isUTC?(c=c.clone(),b=(r(b)||m(b)?b.valueOf():Pa(b).valueOf())-c.valueOf(),c._d.setTime(c._d.valueOf()+b),a.updateOffset(c,!1),c):Pa(b).local()}function jb(){return this.isValid()?this._isUTC&&0===this._offset:!1}function Oa(a,c){var d=
a;ub(a)?d={ms:a._milliseconds,d:a._days,M:a._months}:k(a)?(d={},c?d[c]=a:d.milliseconds=a):(c=xe.exec(a))?(d="-"===c[1]?-1:1,d={y:0,d:v(c[pc])*d,h:v(c[Db])*d,m:v(c[wb])*d,s:v(c[ac])*d,ms:v(db(1E3*c[Zc]))*d}):(c=ye.exec(a))?(d="-"===c[1]?-1:1,d={y:Za(c[2],d),M:Za(c[3],d),w:Za(c[4],d),d:Za(c[5],d),h:Za(c[6],d),m:Za(c[7],d),s:Za(c[8],d)}):null==d?d={}:"object"===typeof d&&("from"in d||"to"in d)&&(c=Pa(d.from),d=Pa(d.to),c.isValid()&&d.isValid()?(d=gb(d,c),c.isBefore(d)?d=Wc(c,d):(d=Wc(d,c),d.milliseconds=
-d.milliseconds,d.months=-d.months),c=d):c={milliseconds:0,months:0},d={},d.ms=c.milliseconds,d.M=c.months);d=new cb(d);ub(a)&&b(a,"_locale")&&(d._locale=a._locale);return d}function Za(b,a){b=b&&parseFloat(b.replace(",","."));return(isNaN(b)?0:b)*a}function Wc(b,a){var c={};c.months=a.month()-b.month()+12*(a.year()-b.year());b.clone().add(c.months,"M").isAfter(a)&&--c.months;c.milliseconds=+a-+b.clone().add(c.months,"M");return c}function vb(b,a){return function(c,d){if(null!==d&&!isNaN(+d)){z(a,
"moment()."+a+"(period, number) is deprecated. Please use moment()."+a+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");var e=c;c=d;d=e}c=Oa("string"===typeof c?+c:c,d);Nb(this,c,b);return this}}function Nb(b,c,d,e){var f=c._milliseconds,g=db(c._days);c=db(c._months);b.isValid()&&(e=null==e?!0:e,c&&X(b,Z(b,"Month")+c*d),g&&R(b,"Date",Z(b,"Date")+g*d),f&&b._d.setTime(b._d.valueOf()+f*d),e&&a.updateOffset(b,g||c))}function Ya(b,a){var c=12*(a.year()-
b.year())+(a.month()-b.month()),d=b.clone().add(c,"months");0>a-d?(b=b.clone().add(c-1,"months"),a=(a-d)/(d-b)):(b=b.clone().add(c+1,"months"),a=(a-d)/(b-d));return-(c+a)||0}function td(b){if(void 0===b)return this._locale._abbr;b=ra(b);null!=b&&(this._locale=b);return this}function mc(){return this._locale}function ud(b,a){return(b%a+a)%a}function Nc(b,a,c){return 100>b&&0<=b?new Date(b+400,a,c)-Ad:(new Date(b,a,c)).valueOf()}function Hb(b,a,c){return 100>b&&0<=b?Date.UTC(b+400,a,c)-Ad:Date.UTC(b,
a,c)}function Yb(b,a){J(0,[b,b.length],0,a)}function uc(b,a,c,d,e){if(null==b)return na(this,d,e).year;var f=ha(b,d,e);a>f&&(a=f);b=aa(b,a,c,d,e);b=da(b.year,0,b.dayOfYear);this.year(b.getUTCFullYear());this.month(b.getUTCMonth());this.date(b.getUTCDate());return this}function $a(b,a){a[Zc]=v(1E3*("0."+b))}function Xd(b){return b}function Fc(b,a,c,d){var f=ra();a=e().set(d,a);return f[c](a,b)}function Md(b,a,c){k(b)&&(a=b,b=void 0);b=b||"";if(null!=a)return Fc(b,a,c,"month");var d=[];for(a=0;12>a;a++)d[a]=
Fc(b,a,c,"month");return d}function nc(b,a,c,d){"boolean"!==typeof b&&(c=a=b,b=!1);k(a)&&(c=a,a=void 0);a=a||"";var e=ra();b=b?e._week.dow:0;if(null!=c)return Fc(a,(c+b)%7,d,"day");e=[];for(c=0;7>c;c++)e[c]=Fc(a,(c+b)%7,d,"day");return e}function Yd(b,a,c,d){a=Oa(a,c);b._milliseconds+=d*a._milliseconds;b._days+=d*a._days;b._months+=d*a._months;return b._bubble()}function Ub(b){return 0>b?Math.floor(b):Math.ceil(b)}function Oc(b){return function(){return this.as(b)}}function pb(b){return function(){return this.isValid()?
this._data[b]:NaN}}function Nd(b,a,c,d,e){return e.relativeTime(a||1,!!c,b,d)}function Xc(b){return(0<b)-(0>b)||+b}function Yg(){if(!this.isValid())return this.localeData().invalidDate();var b=fg(this._milliseconds)/1E3,a=fg(this._days),c=fg(this._months);var d=u(b/60);var e=u(d/60);b%=60;d%=60;var f=u(c/12);c%=12;b=b?b.toFixed(3).replace(/\.?0+$/,""):"";var g=this.asSeconds();if(!g)return"P0D";var h=0>g?"-":"",r=Xc(this._months)!==Xc(g)?"-":"",l=Xc(this._days)!==Xc(g)?"-":"";g=Xc(this._milliseconds)!==
Xc(g)?"-":"";return h+"P"+(f?r+f+"Y":"")+(c?r+c+"M":"")+(a?l+a+"D":"")+(e||d||b?"T":"")+(e?g+e+"H":"")+(d?g+d+"M":"")+(b?g+b+"S":"")}var vc=Array.prototype.some?Array.prototype.some:function(b){for(var a=Object(this),c=a.length>>>0,d=0;d<c;d++)if(d in a&&b.call(this,a[d],d,a))return!0;return!1};var Ka=a.momentProperties=[],Pc=!1,Qc={};a.suppressDeprecationWarnings=!1;a.deprecationHandler=null;var Zg=Object.keys?Object.keys:function(a){var c,d=[];for(c in a)b(a,c)&&d.push(c);return d};var gf={},Vb=
{},fb=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ib=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,vd={},Qb={},pa=/\d/,fc=/\d\d/,pe=/\d{3}/,qa=/\d{4}/,qe=/[+-]?\d{6}/,Ta=/\d\d?/,xg=/\d\d\d\d?/,oc=/\d\d\d\d\d\d?/,kb=/\d{1,3}/,ic=/\d{1,4}/,jd=/[+-]?\d{1,6}/,Zb=/\d+/,wd=/[+-]?\d+/,hb=/Z|[+-]\d\d:?\d\d/gi,nb=/Z|[+-]\d\d(?::?\d\d)?/gi,se=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,
Ic={},Od={},wc=0,Jc=1,pc=2,Db=3,wb=4,ac=5,Zc=6,Pe=7,Bh=8;J("Y",0,0,function(){var b=this.year();return 9999>=b?""+b:"+"+b});J(0,["YY",2],0,function(){return this.year()%100});J(0,["YYYY",4],0,"year");J(0,["YYYYY",5],0,"year");J(0,["YYYYYY",6,!0],0,"year");D("year","y");Vb.year=1;N("Y",wd);N("YY",Ta,fc);N("YYYY",ic,qa);N("YYYYY",jd,qe);N("YYYYYY",jd,qe);T(["YYYYY","YYYYYY"],wc);T("YYYY",function(b,c){c[wc]=2===b.length?a.parseTwoDigitYear(b):v(b)});T("YY",function(b,c){c[wc]=a.parseTwoDigitYear(b)});
T("Y",function(b,a){a[wc]=parseInt(b,10)});a.parseTwoDigitYear=function(b){return v(b)+(68<v(b)?1900:2E3)};var Df=ca("FullYear",!0);var qc=Array.prototype.indexOf?Array.prototype.indexOf:function(b){var a;for(a=0;a<this.length;++a)if(this[a]===b)return a;return-1};J("M",["MM",2],"Mo",function(){return this.month()+1});J("MMM",0,0,function(b){return this.localeData().monthsShort(this,b)});J("MMMM",0,0,function(b){return this.localeData().months(this,b)});D("month","M");Vb.month=8;N("M",Ta);N("MM",
Ta,fc);N("MMM",function(b,a){return a.monthsShortRegex(b)});N("MMMM",function(b,a){return a.monthsRegex(b)});T(["M","MM"],function(b,a){a[Jc]=v(b)-1});T(["MMM","MMMM"],function(b,a,c,d){d=c._locale.monthsParse(b,d,c._strict);null!=d?a[Jc]=d:t(c).invalidMonth=b});var xd=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Zf="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");J("w",["ww",2],"wo","week");J("W",["WW",2],"Wo","isoWeek");D("week","w");D("isoWeek","W");Vb.week=5;Vb.isoWeek=5;N("w",Ta);N("ww",Ta,fc);
N("W",Ta);N("WW",Ta,fc);V(["w","ww","W","WW"],function(b,a,c,d){a[d.substr(0,1)]=v(b)});J("d",0,"do","day");J("dd",0,0,function(b){return this.localeData().weekdaysMin(this,b)});J("ddd",0,0,function(b){return this.localeData().weekdaysShort(this,b)});J("dddd",0,0,function(b){return this.localeData().weekdays(this,b)});J("e",0,0,"weekday");J("E",0,0,"isoWeekday");D("day","d");D("weekday","e");D("isoWeekday","E");Vb.day=11;Vb.weekday=11;Vb.isoWeekday=11;N("d",Ta);N("e",Ta);N("E",Ta);N("dd",function(b,
a){return a.weekdaysMinRegex(b)});N("ddd",function(b,a){return a.weekdaysShortRegex(b)});N("dddd",function(b,a){return a.weekdaysRegex(b)});V(["dd","ddd","dddd"],function(b,a,c,d){d=c._locale.weekdaysParse(b,d,c._strict);null!=d?a.d=d:t(c).invalidWeekday=b});V(["d","e","E"],function(b,a,c,d){a[d]=v(b)});var ob="Sun Mon Tue Wed Thu Fri Sat".split(" ");J("H",["HH",2],0,"hour");J("h",["hh",2],0,ia);J("k",["kk",2],0,function(){return this.hours()||24});J("hmm",0,0,function(){return""+ia.apply(this)+L(this.minutes(),
2)});J("hmmss",0,0,function(){return""+ia.apply(this)+L(this.minutes(),2)+L(this.seconds(),2)});J("Hmm",0,0,function(){return""+this.hours()+L(this.minutes(),2)});J("Hmmss",0,0,function(){return""+this.hours()+L(this.minutes(),2)+L(this.seconds(),2)});xa("a",!0);xa("A",!1);D("hour","h");Vb.hour=13;N("a",ya);N("A",ya);N("H",Ta);N("h",Ta);N("k",Ta);N("HH",Ta,fc);N("hh",Ta,fc);N("kk",Ta,fc);N("hmm",xg);N("hmmss",oc);N("Hmm",xg);N("Hmmss",oc);T(["H","HH"],Db);T(["k","kk"],function(b,a,c){b=v(b);a[Db]=
24===b?0:b});T(["a","A"],function(b,a,c){c._isPm=c._locale.isPM(b);c._meridiem=b});T(["h","hh"],function(b,a,c){a[Db]=v(b);t(c).bigHour=!0});T("hmm",function(b,a,c){var d=b.length-2;a[Db]=v(b.substr(0,d));a[wb]=v(b.substr(d));t(c).bigHour=!0});T("hmmss",function(b,a,c){var d=b.length-4,e=b.length-2;a[Db]=v(b.substr(0,d));a[wb]=v(b.substr(d,2));a[ac]=v(b.substr(e));t(c).bigHour=!0});T("Hmm",function(b,a,c){c=b.length-2;a[Db]=v(b.substr(0,c));a[wb]=v(b.substr(c))});T("Hmmss",function(b,a,c){c=b.length-
4;var d=b.length-2;a[Db]=v(b.substr(0,c));a[wb]=v(b.substr(c,2));a[ac]=v(b.substr(d))});var ve=ca("Hours",!0),hf={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",
past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:Zf,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:ob,meridiemParse:/[ap]\.?m?\.?/i},Gb={},cd=
{},Sc,Zd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ef=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,jf=/Z|[+-]\d\d(?::?\d\d)?/,zc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",
/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Pd=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],we=/^\/?Date\((\-?\d+)/i,lf=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,
$f={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};a.createFromInputFallback=A("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(b){b._d=new Date(b._i+(b._useUTC?" UTC":
""))});a.ISO_8601=function(){};a.RFC_2822=function(){};var Re=A("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var b=Pa.apply(null,arguments);return this.isValid()&&b.isValid()?b<this?this:b:f()}),Qd=A("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var b=Pa.apply(null,arguments);return this.isValid()&&b.isValid()?b>this?this:b:f()}),ld="year quarter month week day hour minute second millisecond".split(" ");
ab("Z",":");ab("ZZ","");N("Z",nb);N("ZZ",nb);T(["Z","ZZ"],function(b,a,c){c._useUTC=!0;c._tzm=eb(nb,b)});var Hf=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var xe=/^(\-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,ye=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Oa.fn=cb.prototype;Oa.invalid=function(){return Oa(NaN)};var nf=vb(1,"add"),Bg=vb(-1,"subtract");a.defaultFormat=
"YYYY-MM-DDTHH:mm:ssZ";a.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Te=A("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(b){return void 0===b?this.localeData():this.locale(b)}),Ad=126227808E5;J(0,["gg",2],0,function(){return this.weekYear()%100});J(0,["GG",2],0,function(){return this.isoWeekYear()%100});Yb("gggg","weekYear");Yb("ggggg","weekYear");Yb("GGGG","isoWeekYear");Yb("GGGGG","isoWeekYear");
D("weekYear","gg");D("isoWeekYear","GG");Vb.weekYear=1;Vb.isoWeekYear=1;N("G",wd);N("g",wd);N("GG",Ta,fc);N("gg",Ta,fc);N("GGGG",ic,qa);N("gggg",ic,qa);N("GGGGG",jd,qe);N("ggggg",jd,qe);V(["gggg","ggggg","GGGG","GGGGG"],function(b,a,c,d){a[d.substr(0,2)]=v(b)});V(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)});J("Q",0,"Qo","quarter");D("quarter","Q");Vb.quarter=7;N("Q",pa);T("Q",function(b,a){a[Jc]=3*(v(b)-1)});J("D",["DD",2],"Do","date");D("date","D");Vb.date=9;N("D",Ta);N("DD",Ta,fc);
N("Do",function(b,a){return b?a._dayOfMonthOrdinalParse||a._ordinalParse:a._dayOfMonthOrdinalParseLenient});T(["D","DD"],pc);T("Do",function(b,a){a[pc]=v(b.match(Ta)[0])});var ag=ca("Date",!0);J("DDD",["DDDD",3],"DDDo","dayOfYear");D("dayOfYear","DDD");Vb.dayOfYear=4;N("DDD",kb);N("DDDD",pe);T(["DDD","DDDD"],function(b,a,c){c._dayOfYear=v(b)});J("m",["mm",2],0,"minute");D("minute","m");Vb.minute=14;N("m",Ta);N("mm",Ta,fc);T(["m","mm"],wb);var of=ca("Minutes",!1);J("s",["ss",2],0,"second");D("second",
"s");Vb.second=15;N("s",Ta);N("ss",Ta,fc);T(["s","ss"],ac);var bg=ca("Seconds",!1);J("S",0,0,function(){return~~(this.millisecond()/100)});J(0,["SS",2],0,function(){return~~(this.millisecond()/10)});J(0,["SSS",3],0,"millisecond");J(0,["SSSS",4],0,function(){return 10*this.millisecond()});J(0,["SSSSS",5],0,function(){return 100*this.millisecond()});J(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});J(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});J(0,["SSSSSSSS",8],0,function(){return 1E5*
this.millisecond()});J(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});D("millisecond","ms");Vb.millisecond=16;N("S",kb,pa);N("SS",kb,fc);N("SSS",kb,pe);var Bd;for(Bd="SSSS";9>=Bd.length;Bd+="S")N(Bd,Zb);for(Bd="S";9>=Bd.length;Bd+="S")T(Bd,$a);var ih=ca("Milliseconds",!1);J("z",0,0,"zoneAbbr");J("zz",0,0,"zoneName");var Ca=c.prototype;Ca.add=nf;Ca.calendar=function(b,c){b=b||Pa();var d=gb(b,this).startOf("day");d=a.calendarFormat(this,d)||"sameElse";c=c&&(x(c[d])?c[d].call(this,b):
c[d]);return this.format(c||this.localeData().calendar(d,this,Pa(b)))};Ca.clone=function(){return new c(this)};Ca.diff=function(b,a,c){if(!this.isValid())return NaN;b=gb(b,this);if(!b.isValid())return NaN;var d=6E4*(b.utcOffset()-this.utcOffset());a=G(a);switch(a){case "year":a=Ya(this,b)/12;break;case "month":a=Ya(this,b);break;case "quarter":a=Ya(this,b)/3;break;case "second":a=(this-b)/1E3;break;case "minute":a=(this-b)/6E4;break;case "hour":a=(this-b)/36E5;break;case "day":a=(this-b-d)/864E5;
break;case "week":a=(this-b-d)/6048E5;break;default:a=this-b}return c?a:u(a)};Ca.endOf=function(b){b=G(b);if(void 0===b||"millisecond"===b||!this.isValid())return this;var c=this._isUTC?Hb:Nc;switch(b){case "year":var d=c(this.year()+1,0,1)-1;break;case "quarter":d=c(this.year(),this.month()-this.month()%3+3,1)-1;break;case "month":d=c(this.year(),this.month()+1,1)-1;break;case "week":d=c(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case "isoWeek":d=c(this.year(),this.month(),this.date()-
(this.isoWeekday()-1)+7)-1;break;case "day":case "date":d=c(this.year(),this.month(),this.date()+1)-1;break;case "hour":d=this._d.valueOf();d+=36E5-ud(d+(this._isUTC?0:6E4*this.utcOffset()),36E5)-1;break;case "minute":d=this._d.valueOf();d+=6E4-ud(d,6E4)-1;break;case "second":d=this._d.valueOf(),d+=1E3-ud(d,1E3)-1}this._d.setTime(d);a.updateOffset(this,!0);return this};Ca.format=function(b){b||(b=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);b=M(this,b);return this.localeData().postformat(b)};
Ca.from=function(b,a){return this.isValid()&&(r(b)&&b.isValid()||Pa(b).isValid())?Oa({to:this,from:b}).locale(this.locale()).humanize(!a):this.localeData().invalidDate()};Ca.fromNow=function(b){return this.from(Pa(),b)};Ca.to=function(b,a){return this.isValid()&&(r(b)&&b.isValid()||Pa(b).isValid())?Oa({from:this,to:b}).locale(this.locale()).humanize(!a):this.localeData().invalidDate()};Ca.toNow=function(b){return this.to(Pa(),b)};Ca.get=function(b){b=G(b);return x(this[b])?this[b]():this};Ca.invalidAt=
function(){return t(this).overflow};Ca.isAfter=function(b,a){b=r(b)?b:Pa(b);if(!this.isValid()||!b.isValid())return!1;a=G(a)||"millisecond";return"millisecond"===a?this.valueOf()>b.valueOf():b.valueOf()<this.clone().startOf(a).valueOf()};Ca.isBefore=function(b,a){b=r(b)?b:Pa(b);if(!this.isValid()||!b.isValid())return!1;a=G(a)||"millisecond";return"millisecond"===a?this.valueOf()<b.valueOf():this.clone().endOf(a).valueOf()<b.valueOf()};Ca.isBetween=function(b,a,c,d){b=r(b)?b:Pa(b);a=r(a)?a:Pa(a);if(!(this.isValid()&&
b.isValid()&&a.isValid()))return!1;d=d||"()";return("("===d[0]?this.isAfter(b,c):!this.isBefore(b,c))&&(")"===d[1]?this.isBefore(a,c):!this.isAfter(a,c))};Ca.isSame=function(b,a){b=r(b)?b:Pa(b);if(!this.isValid()||!b.isValid())return!1;a=G(a)||"millisecond";if("millisecond"===a)return this.valueOf()===b.valueOf();b=b.valueOf();return this.clone().startOf(a).valueOf()<=b&&b<=this.clone().endOf(a).valueOf()};Ca.isSameOrAfter=function(b,a){return this.isSame(b,a)||this.isAfter(b,a)};Ca.isSameOrBefore=
function(b,a){return this.isSame(b,a)||this.isBefore(b,a)};Ca.isValid=function(){return l(this)};Ca.lang=Te;Ca.locale=td;Ca.localeData=mc;Ca.max=Qd;Ca.min=Re;Ca.parsingFlags=function(){return g({},t(this))};Ca.set=function(b,a){if("object"===typeof b){b=E(b);a=F(b);for(var c=0;c<a.length;c++)this[a[c].unit](b[a[c].unit])}else if(b=G(b),x(this[b]))return this[b](a);return this};Ca.startOf=function(b){b=G(b);if(void 0===b||"millisecond"===b||!this.isValid())return this;var c=this._isUTC?Hb:Nc;switch(b){case "year":var d=
c(this.year(),0,1);break;case "quarter":d=c(this.year(),this.month()-this.month()%3,1);break;case "month":d=c(this.year(),this.month(),1);break;case "week":d=c(this.year(),this.month(),this.date()-this.weekday());break;case "isoWeek":d=c(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case "day":case "date":d=c(this.year(),this.month(),this.date());break;case "hour":d=this._d.valueOf();d-=ud(d+(this._isUTC?0:6E4*this.utcOffset()),36E5);break;case "minute":d=this._d.valueOf();d-=
ud(d,6E4);break;case "second":d=this._d.valueOf(),d-=ud(d,1E3)}this._d.setTime(d);a.updateOffset(this,!0);return this};Ca.subtract=Bg;Ca.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};Ca.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};Ca.toDate=function(){return new Date(this.valueOf())};Ca.toISOString=
function(b){if(!this.isValid())return null;var a=(b=!0!==b)?this.clone().utc():this;return 0>a.year()||9999<a.year()?M(a,b?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):x(Date.prototype.toISOString)?b?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",M(a,"Z")):M(a,b?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};Ca.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var b="moment",a="";
this.isLocal()||(b=0===this.utcOffset()?"moment.utc":"moment.parseZone",a="Z");b="["+b+'("]';var c=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY";return this.format(b+c+"-MM-DD[T]HH:mm:ss.SSS"+(a+'[")]'))};Ca.toJSON=function(){return this.isValid()?this.toISOString():null};Ca.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};Ca.unix=function(){return Math.floor(this.valueOf()/1E3)};Ca.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||
0)};Ca.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};Ca.year=Df;Ca.isLeapYear=function(){return Y(this.year())};Ca.weekYear=function(b){return uc.call(this,b,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};Ca.isoWeekYear=function(b){return uc.call(this,b,this.isoWeek(),this.isoWeekday(),1,4)};Ca.quarter=Ca.quarters=function(b){return null==b?Math.ceil((this.month()+1)/3):this.month(3*(b-
1)+this.month()%3)};Ca.month=ea;Ca.daysInMonth=function(){return U(this.year(),this.month())};Ca.week=Ca.weeks=function(b){var a=this.localeData().week(this);return null==b?a:this.add(7*(b-a),"d")};Ca.isoWeek=Ca.isoWeeks=function(b){var a=na(this,1,4).week;return null==b?a:this.add(7*(b-a),"d")};Ca.weeksInYear=function(){var b=this.localeData()._week;return ha(this.year(),b.dow,b.doy)};Ca.isoWeeksInYear=function(){return ha(this.year(),1,4)};Ca.date=ag;Ca.day=Ca.days=function(b){if(!this.isValid())return null!=
b?this:NaN;var a=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=b){var c=this.localeData();"string"===typeof b&&(isNaN(b)?(b=c.weekdaysParse(b),b="number"===typeof b?b:null):b=parseInt(b,10));return this.add(b-a,"d")}return a};Ca.weekday=function(b){if(!this.isValid())return null!=b?this:NaN;var a=(this.day()+7-this.localeData()._week.dow)%7;return null==b?a:this.add(b-a,"d")};Ca.isoWeekday=function(b){if(!this.isValid())return null!=b?this:NaN;if(null!=b){var a=this.localeData();b="string"===
typeof b?a.weekdaysParse(b)%7||7:isNaN(b)?null:b;return this.day(this.day()%7?b:b-7)}return this.day()||7};Ca.dayOfYear=function(b){var a=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==b?a:this.add(b-a,"d")};Ca.hour=Ca.hours=ve;Ca.minute=Ca.minutes=of;Ca.second=Ca.seconds=bg;Ca.millisecond=Ca.milliseconds=ih;Ca.utcOffset=function(b,c,d){var e=this._offset||0,f;if(!this.isValid())return null!=b?this:NaN;if(null!=b){if("string"===typeof b){if(b=eb(nb,b),
null===b)return this}else 16>Math.abs(b)&&!d&&(b*=60);!this._isUTC&&c&&(f=15*-Math.round(this._d.getTimezoneOffset()/15));this._offset=b;this._isUTC=!0;null!=f&&this.add(f,"m");e!==b&&(!c||this._changeInProgress?Nb(this,Oa(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?e:15*-Math.round(this._d.getTimezoneOffset()/15)};Ca.utc=function(b){return this.utcOffset(0,b)};Ca.local=function(b){this._isUTC&&
(this.utcOffset(0,b),this._isUTC=!1,b&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};Ca.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var b=eb(hb,this._i);null!=b?this.utcOffset(b):this.utcOffset(0,!0)}return this};Ca.hasAlignedHourOffset=function(b){if(!this.isValid())return!1;b=b?Pa(b).utcOffset():0;return 0===(this.utcOffset()-b)%60};Ca.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||
this.utcOffset()>this.clone().month(5).utcOffset()};Ca.isLocal=function(){return this.isValid()?!this._isUTC:!1};Ca.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};Ca.isUtc=jb;Ca.isUTC=jb;Ca.zoneAbbr=function(){return this._isUTC?"UTC":""};Ca.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};Ca.dates=A("dates accessor is deprecated. Use date instead.",ag);Ca.months=A("months accessor is deprecated. Use month instead",ea);Ca.years=A("years accessor is deprecated. Use year instead",
Df);Ca.zone=A("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(b,a){return null!=b?("string"!==typeof b&&(b=-b),this.utcOffset(b,a),this):-this.utcOffset()});Ca.isDSTShifted=A("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!n(this._isDSTShifted))return this._isDSTShifted;var b={};d(b,this);b=Ja(b);if(b._a){var a=b._isUTC?e(b._a):Pa(b._a);this._isDSTShifted=this.isValid()&&
0<w(b._a,a.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var Fb=B.prototype;Fb.calendar=function(b,a,c){b=this._calendar[b]||this._calendar.sameElse;return x(b)?b.call(a,c):b};Fb.longDateFormat=function(b){var a=this._longDateFormat[b],c=this._longDateFormat[b.toUpperCase()];if(a||!c)return a;this._longDateFormat[b]=c.replace(/MMMM|MM|DD|dddd/g,function(b){return b.slice(1)});return this._longDateFormat[b]};Fb.invalidDate=function(){return this._invalidDate};Fb.ordinal=function(b){return this._ordinal.replace("%d",
b)};Fb.preparse=Xd;Fb.postformat=Xd;Fb.relativeTime=function(b,a,c,d){var e=this._relativeTime[c];return x(e)?e(b,a,c,d):e.replace(/%d/i,b)};Fb.pastFuture=function(b,a){b=this._relativeTime[0<b?"future":"past"];return x(b)?b(a):b.replace(/%s/i,a)};Fb.set=function(b){var a;for(a in b){var c=b[a];x(c)?this[a]=c:this["_"+a]=c}this._config=b;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};Fb.months=function(b,a){return b?
q(this._months)?this._months[b.month()]:this._months[(this._months.isFormat||xd).test(a)?"format":"standalone"][b.month()]:q(this._months)?this._months:this._months.standalone};Fb.monthsShort=function(b,a){return b?q(this._monthsShort)?this._monthsShort[b.month()]:this._monthsShort[xd.test(a)?"format":"standalone"][b.month()]:q(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};Fb.monthsParse=function(b,a,c){var d;if(this._monthsParseExact){a:{b=b.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=
[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;12>d;++d){var f=e([2E3,d]);this._shortMonthsParse[d]=this.monthsShort(f,"").toLocaleLowerCase();this._longMonthsParse[d]=this.months(f,"").toLocaleLowerCase()}if(c)a="MMM"===a?qc.call(this._shortMonthsParse,b):qc.call(this._longMonthsParse,b);else if("MMM"===a){a=qc.call(this._shortMonthsParse,b);if(-1!==a)break a;a=qc.call(this._longMonthsParse,b)}else{a=qc.call(this._longMonthsParse,b);if(-1!==a)break a;a=qc.call(this._shortMonthsParse,b)}a=
-1!==a?a:null}return a}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(d=0;12>d;d++)if(f=e([2E3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(f,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(f,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(f,"")+"|^"+this.monthsShort(f,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===a&&
this._longMonthsParse[d].test(b)||c&&"MMM"===a&&this._shortMonthsParse[d].test(b)||!c&&this._monthsParse[d].test(b))return d};Fb.monthsRegex=function(a){if(this._monthsParseExact)return b(this,"_monthsRegex")||fa.call(this),a?this._monthsStrictRegex:this._monthsRegex;b(this,"_monthsRegex")||(this._monthsRegex=se);return this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex};Fb.monthsShortRegex=function(a){if(this._monthsParseExact)return b(this,"_monthsRegex")||fa.call(this),a?this._monthsShortStrictRegex:
this._monthsShortRegex;b(this,"_monthsShortRegex")||(this._monthsShortRegex=se);return this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex};Fb.week=function(b){return na(b,this._week.dow,this._week.doy).week};Fb.firstDayOfYear=function(){return this._week.doy};Fb.firstDayOfWeek=function(){return this._week.dow};Fb.weekdays=function(b,a){a=q(this._weekdays)?this._weekdays:this._weekdays[b&&!0!==b&&this._weekdays.isFormat.test(a)?"format":"standalone"];return!0===b?ja(a,
this._week.dow):b?a[b.day()]:a};Fb.weekdaysMin=function(b){return!0===b?ja(this._weekdaysMin,this._week.dow):b?this._weekdaysMin[b.day()]:this._weekdaysMin};Fb.weekdaysShort=function(b){return!0===b?ja(this._weekdaysShort,this._week.dow):b?this._weekdaysShort[b.day()]:this._weekdaysShort};Fb.weekdaysParse=function(b,a,c){var d;if(this._weekdaysParseExact)return oa.call(this,b,a,c);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=
[]);for(d=0;7>d;d++){var f=e([2E3,1]).day(d);c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(f,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(f,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(f,"").replace(".","\\.?")+"$","i"));this._weekdaysParse[d]||(f="^"+this.weekdays(f,"")+"|^"+this.weekdaysShort(f,"")+"|^"+this.weekdaysMin(f,""),this._weekdaysParse[d]=new RegExp(f.replace(".",
""),"i"));if(c&&"dddd"===a&&this._fullWeekdaysParse[d].test(b)||c&&"ddd"===a&&this._shortWeekdaysParse[d].test(b)||c&&"dd"===a&&this._minWeekdaysParse[d].test(b)||!c&&this._weekdaysParse[d].test(b))return d}};Fb.weekdaysRegex=function(a){if(this._weekdaysParseExact)return b(this,"_weekdaysRegex")||ka.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex;b(this,"_weekdaysRegex")||(this._weekdaysRegex=se);return this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex};Fb.weekdaysShortRegex=
function(a){if(this._weekdaysParseExact)return b(this,"_weekdaysRegex")||ka.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;b(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=se);return this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};Fb.weekdaysMinRegex=function(a){if(this._weekdaysParseExact)return b(this,"_weekdaysRegex")||ka.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;b(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=
se);return this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};Fb.isPM=function(b){return"p"===(b+"").toLowerCase().charAt(0)};Fb.meridiem=function(b,a,c){return 11<b?c?"pm":"PM":c?"am":"AM"};za("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(b){var a=b%10;a=1===v(b%100/10)?"th":1===a?"st":2===a?"nd":3===a?"rd":"th";return b+a}});a.lang=A("moment.lang is deprecated. Use moment.locale instead.",za);a.langData=A("moment.langData is deprecated. Use moment.localeData instead.",
ra);var Dd=Math.abs,Dg=Oc("ms"),pf=Oc("s"),Uc=Oc("m"),Eg=Oc("h"),Ue=Oc("d"),Sd=Oc("w"),Lf=Oc("M"),qf=Oc("Q"),rf=Oc("y"),ib=pb("milliseconds"),nd=pb("seconds"),Ve=pb("minutes"),dg=pb("hours"),eg=pb("days"),md=pb("months"),ce=pb("years"),de=Math.round,dd={ss:44,s:45,m:45,h:22,d:26,M:11},fg=Math.abs,qb=cb.prototype;qb.isValid=function(){return this._isValid};qb.abs=function(){var b=this._data;this._milliseconds=Dd(this._milliseconds);this._days=Dd(this._days);this._months=Dd(this._months);b.milliseconds=
Dd(b.milliseconds);b.seconds=Dd(b.seconds);b.minutes=Dd(b.minutes);b.hours=Dd(b.hours);b.months=Dd(b.months);b.years=Dd(b.years);return this};qb.add=function(b,a){return Yd(this,b,a,1)};qb.subtract=function(b,a){return Yd(this,b,a,-1)};qb.as=function(b){if(!this.isValid())return NaN;var a=this._milliseconds;b=G(b);if("month"===b||"quarter"===b||"year"===b){var c=this._days+a/864E5;c=this._months+4800*c/146097;switch(b){case "month":return c;case "quarter":return c/3;case "year":return c/12}}else switch(c=
this._days+Math.round(146097*this._months/4800),b){case "week":return c/7+a/6048E5;case "day":return c+a/864E5;case "hour":return 24*c+a/36E5;case "minute":return 1440*c+a/6E4;case "second":return 86400*c+a/1E3;case "millisecond":return Math.floor(864E5*c)+a;default:throw Error("Unknown unit "+b);}};qb.asMilliseconds=Dg;qb.asSeconds=pf;qb.asMinutes=Uc;qb.asHours=Eg;qb.asDays=Ue;qb.asWeeks=Sd;qb.asMonths=Lf;qb.asQuarters=qf;qb.asYears=rf;qb.valueOf=function(){return this.isValid()?this._milliseconds+
864E5*this._days+this._months%12*2592E6+31536E6*v(this._months/12):NaN};qb._bubble=function(){var b=this._milliseconds,a=this._days,c=this._months,d=this._data;0<=b&&0<=a&&0<=c||0>=b&&0>=a&&0>=c||(b+=864E5*Ub(146097*c/4800+a),c=a=0);d.milliseconds=b%1E3;b=u(b/1E3);d.seconds=b%60;b=u(b/60);d.minutes=b%60;b=u(b/60);d.hours=b%24;a+=u(b/24);b=u(4800*a/146097);c+=b;a-=Ub(146097*b/4800);b=u(c/12);d.days=a;d.months=c%12;d.years=b;return this};qb.clone=function(){return Oa(this)};qb.get=function(b){b=G(b);
return this.isValid()?this[b+"s"]():NaN};qb.milliseconds=ib;qb.seconds=nd;qb.minutes=Ve;qb.hours=dg;qb.days=eg;qb.weeks=function(){return u(this.days()/7)};qb.months=md;qb.years=ce;qb.humanize=function(b){if(!this.isValid())return this.localeData().invalidDate();var a=this.localeData();var c=!b;var d=Oa(this).abs(),e=de(d.as("s")),f=de(d.as("m")),g=de(d.as("h")),h=de(d.as("d")),r=de(d.as("M"));d=de(d.as("y"));e=e<=dd.ss&&["s",e]||e<dd.s&&["ss",e]||1>=f&&["m"]||f<dd.m&&["mm",f]||1>=g&&["h"]||g<dd.h&&
["hh",g]||1>=h&&["d"]||h<dd.d&&["dd",h]||1>=r&&["M"]||r<dd.M&&["MM",r]||1>=d&&["y"]||["yy",d];e[2]=c;e[3]=0<+this;e[4]=a;c=Nd.apply(null,e);b&&(c=a.pastFuture(+this,c));return a.postformat(c)};qb.toISOString=Yg;qb.toString=Yg;qb.toJSON=Yg;qb.locale=td;qb.localeData=mc;qb.toIsoString=A("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Yg);qb.lang=Te;J("X",0,0,"unix");J("x",0,0,"valueOf");N("x",wd);N("X",/[+-]?\d+(\.\d{1,3})?/);T("X",function(b,a,c){c._d=new Date(1E3*
parseFloat(b,10))});T("x",function(b,a,c){c._d=new Date(v(b))});a.version="2.24.0";var Hh=Pa;a.fn=Ca;a.min=function(){var b=[].slice.call(arguments,0);return zb("isBefore",b)};a.max=function(){var b=[].slice.call(arguments,0);return zb("isAfter",b)};a.now=function(){return Date.now?Date.now():+new Date};a.utc=e;a.unix=function(b){return Pa(1E3*b)};a.months=function(b,a){return Md(b,a,"months")};a.isDate=m;a.locale=za;a.invalid=f;a.duration=Oa;a.isMoment=r;a.weekdays=function(b,a,c){return nc(b,a,
c,"weekdays")};a.parseZone=function(){return Pa.apply(null,arguments).parseZone()};a.localeData=ra;a.isDuration=ub;a.monthsShort=function(b,a){return Md(b,a,"monthsShort")};a.weekdaysMin=function(b,a,c){return nc(b,a,c,"weekdaysMin")};a.defineLocale=Da;a.updateLocale=function(b,a){if(null!=a){var c=hf;var d=W(b);null!=d&&(c=d._config);a=C(c,a);a=new B(a);a.parentLocale=Gb[b];Gb[b]=a;za(b)}else null!=Gb[b]&&(null!=Gb[b].parentLocale?Gb[b]=Gb[b].parentLocale:null!=Gb[b]&&delete Gb[b]);return Gb[b]};
a.locales=function(){return Zg(Gb)};a.weekdaysShort=function(b,a,c){return nc(b,a,c,"weekdaysShort")};a.normalizeUnits=G;a.relativeTimeRounding=function(b){return void 0===b?de:"function"===typeof b?(de=b,!0):!1};a.relativeTimeThreshold=function(b,a){if(void 0===dd[b])return!1;if(void 0===a)return dd[b];dd[b]=a;"s"===b&&(dd.ss=a-1);return!0};a.calendarFormat=function(b,a){b=b.diff(a,"days",!0);return-6>b?"sameElse":-1>b?"lastWeek":0>b?"lastDay":1>b?"sameDay":2>b?"nextDay":7>b?"nextWeek":"sameElse"};
a.prototype=Ca;a.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};return a})};
shadow$provide[20]=function(pa,va,Fa,qa){function a(){}function q(){}var p=va(2);q.resetWarningCache=a;Fa.exports=function(){function n(a,b,g,e,t,l){if(l!==p)throw a=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types"),a.name="Invariant Violation",a;}function k(){return n}n.isRequired=n;var m={array:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:k,
element:n,elementType:n,instanceOf:k,node:n,objectOf:k,oneOf:k,oneOfType:k,shape:k,exact:k,checkPropTypes:q,resetWarningCache:a};return m.PropTypes=m}};
shadow$provide[21]=function(pa,va,Fa,qa){Fa.exports=va(20)()};
shadow$provide[22]=function(pa,va,Fa,qa){function a(){if("function"!==typeof WeakMap)return null;var b=new WeakMap;a=function(){return b};return b}function q(b){q="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};return q(b)}function p(b,a){for(var c=0;c<a.length;c++){var d=a[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=
!0);Object.defineProperty(b,d.key,d)}}function n(b,a,e){a&&p(b.prototype,a);e&&p(b,e);return b}function k(b){k=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return k(b)}function m(b){if(void 0===b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function h(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(c&&
c.prototype,{constructor:{value:a,writable:!0,configurable:!0}});c&&b(a,c)}function b(a,c){b=Object.setPrototypeOf||function(b,a){b.__proto__=a;return b};return b(a,c)}Object.defineProperty(qa,"__esModule",{value:!0});qa["default"]=function(b){var a=function(a){function c(b){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");b=k(c).call(this,b);b=!b||"object"!==q(b)&&"function"!==typeof b?m(this):b;b.p=Promise.resolve();b.resizeHandler=null;b.handlers={};b.syncWindowResize=
b.syncWindowResize.bind(m(b));b.syncEventHandlers=b.syncEventHandlers.bind(m(b));b.attachUpdateEvents=b.attachUpdateEvents.bind(m(b));b.getRef=b.getRef.bind(m(b));b.handleUpdate=b.handleUpdate.bind(m(b));b.figureCallback=b.figureCallback.bind(m(b));b.updatePlotly=b.updatePlotly.bind(m(b));return b}h(c,a);n(c,[{key:"updatePlotly",value:function(a,c,d){var e=this;this.p=this.p.then(function(){if(!e.el){if(e.unmounting){var a=Error("Component is unmounting");a.reason="unmounting"}else a=Error("Missing element reference");
throw a;}return b.react(e.el,{data:e.props.data,layout:e.props.layout,config:e.props.config,frames:e.props.frames})}).then(function(){return e.syncWindowResize(a)}).then(this.syncEventHandlers).then(function(){return e.figureCallback(c)}).then(d?this.attachUpdateEvents:function(){})["catch"](function(b){if("unmounting"!==b.reason&&(console.error("Error while plotting:",b),e.props.onError))e.props.onError(b)})}},{key:"componentDidMount",value:function(){this.unmounting=!1;this.updatePlotly(!0,this.props.onInitialized,
!0)}},{key:"componentDidUpdate",value:function(b){this.unmounting=!1;var a=b.frames&&b.frames.length?b.frames.length:0,c=this.props.frames&&this.props.frames.length?this.props.frames.length:0,d=void 0!==b.revision,e=b.revision!==this.props.revision;(b.layout!==this.props.layout||b.data!==this.props.data||b.config!==this.props.config||c!==a||d&&(!d||e))&&this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0;this.figureCallback(this.props.onPurge);
this.resizeHandler&&f&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null);this.removeUpdateEvents();b.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var b=this;this.el&&this.el.removeListener&&l.forEach(function(a){b.el.on(a,b.handleUpdate)})}},{key:"removeUpdateEvents",value:function(){var b=this;this.el&&this.el.removeListener&&l.forEach(function(a){b.el.removeListener(a,b.handleUpdate)})}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},
{key:"figureCallback",value:function(b){if("function"===typeof b){var a=this.el;b({data:a.data,layout:a.layout,frames:this.el._transitionData?this.el._transitionData._frames:null},this.el)}}},{key:"syncWindowResize",value:function(a){var c=this;f&&(this.props.useResizeHandler&&!this.resizeHandler?(this.resizeHandler=function(){return b.Plots.resize(c.el)},window.addEventListener("resize",this.resizeHandler),a&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",
this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(b){this.el=b;this.props.debug&&f&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var b=this;t.forEach(function(a){var c=b.props["on"+a],d=b.handlers[a],e=!!d;c&&!e?b.addEventHandler(a,c):!c&&e?b.removeEventHandler(a):c&&e&&c!==d&&(b.removeEventHandler(a),b.addEventHandler(a,c))})}},{key:"addEventHandler",value:function(b,a){this.handlers[b]=a;this.el.on(this.getPlotlyEventName(b),this.handlers[b])}},{key:"removeEventHandler",
value:function(b){this.el.removeListener(this.getPlotlyEventName(b),this.handlers[b]);delete this.handlers[b]}},{key:"getPlotlyEventName",value:function(b){return"plotly_"+b.toLowerCase()}},{key:"render",value:function(){return g["default"].createElement("div",{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]);return c}(g.Component);a.propTypes={data:e["default"].arrayOf(e["default"].object),config:e["default"].object,layout:e["default"].object,frames:e["default"].arrayOf(e["default"].object),
revision:e["default"].number,onInitialized:e["default"].func,onPurge:e["default"].func,onError:e["default"].func,onUpdate:e["default"].func,debug:e["default"].bool,style:e["default"].object,className:e["default"].string,useResizeHandler:e["default"].bool,divId:e["default"].string};t.forEach(function(b){a.propTypes["on"+b]=e["default"].func});a.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}};return a};var g=function(b){if(b&&b.__esModule)return b;
var c=a();if(c&&c.has(b))return c.get(b);var d={};if(null!=b){var e=Object.defineProperty&&Object.getOwnPropertyDescriptor,f;for(f in b)if(Object.prototype.hasOwnProperty.call(b,f)){var g=e?Object.getOwnPropertyDescriptor(b,f):null;g&&(g.get||g.set)?Object.defineProperty(d,f,g):d[f]=b[f]}}d["default"]=b;c&&c.set(b,d);return d}(va(5)),e=function(b){return b&&b.__esModule?b:{"default":b}}(va(21)),t="AfterExport AfterPlot Animated AnimatingFrame AnimationInterrupted AutoSize BeforeExport ButtonClicked Click ClickAnnotation Deselect DoubleClick Framework Hover LegendClick LegendDoubleClick Relayout Restyle Redraw Selected Selecting SliderChange SliderEnd SliderStart Transitioning TransitionInterrupted Unhover".split(" "),
l=["plotly_restyle","plotly_redraw","plotly_relayout","plotly_doubleclick","plotly_animated"],f="undefined"!==typeof window};
shadow$provide[23]=function(pa,va,Fa,qa){(function(a){"object"===typeof qa&&"undefined"!==typeof Fa?Fa.exports=a():"function"===typeof define&&define.amd?define([],a):("undefined"!==typeof window?window:"undefined"!==typeof pa?pa:"undefined"!==typeof self?self:this).Plotly=a()})(function(){return function(){function a(q,p,n){function k(b,g){if(!p[b]){if(!q[b]){var e="function"==typeof va&&va;if(!g&&e)return e(b,!0);if(m)return m(b,!0);g=Error("Cannot find module '"+b+"'");throw g.code="MODULE_NOT_FOUND",
g;}g=p[b]={exports:{}};q[b][0].call(g.exports,function(a){return k(q[b][1][a]||a)},g,g.exports,a,q,p,n)}return p[b].exports}for(var m="function"==typeof va&&va,h=0;h<n.length;h++)k(n[h]);return k}return a}()({1:[function(a,q,p){a=a("../src/lib");q={"X,X div":"direction:ltr;font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;",
"X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;",
"X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;",
"X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color 0.3s ease 0s;-moz-transition:background-color 0.3s ease 0s;-ms-transition:background-color 0.3s ease 0s;-o-transition:background-color 0.3s ease 0s;transition:background-color 0.3s ease 0s;","X .modebar--hover\x3e:not(.watermark)":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;",
"X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;",
"X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;",
"X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;",
"X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;",
"Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var n in q)p=n.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),a.addStyleRule(p,q[n])},{"../src/lib":716}],2:[function(a,q,p){q.exports=a("../src/transforms/aggregate")},{"../src/transforms/aggregate":1296}],3:[function(a,q,p){q.exports=
a("../src/traces/bar")},{"../src/traces/bar":863}],4:[function(a,q,p){q.exports=a("../src/traces/barpolar")},{"../src/traces/barpolar":876}],5:[function(a,q,p){q.exports=a("../src/traces/box")},{"../src/traces/box":886}],6:[function(a,q,p){q.exports=a("../src/components/calendars")},{"../src/components/calendars":589}],7:[function(a,q,p){q.exports=a("../src/traces/candlestick")},{"../src/traces/candlestick":895}],8:[function(a,q,p){q.exports=a("../src/traces/carpet")},{"../src/traces/carpet":914}],
9:[function(a,q,p){q.exports=a("../src/traces/choropleth")},{"../src/traces/choropleth":928}],10:[function(a,q,p){q.exports=a("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":935}],11:[function(a,q,p){q.exports=a("../src/traces/cone")},{"../src/traces/cone":941}],12:[function(a,q,p){q.exports=a("../src/traces/contour")},{"../src/traces/contour":956}],13:[function(a,q,p){q.exports=a("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":967}],14:[function(a,q,p){q.exports=
a("../src/core")},{"../src/core":694}],15:[function(a,q,p){q.exports=a("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":975}],16:[function(a,q,p){q.exports=a("../src/transforms/filter")},{"../src/transforms/filter":1297}],17:[function(a,q,p){q.exports=a("../src/traces/funnel")},{"../src/traces/funnel":985}],18:[function(a,q,p){q.exports=a("../src/traces/funnelarea")},{"../src/traces/funnelarea":994}],19:[function(a,q,p){q.exports=a("../src/transforms/groupby")},{"../src/transforms/groupby":1298}],
20:[function(a,q,p){q.exports=a("../src/traces/heatmap")},{"../src/traces/heatmap":1007}],21:[function(a,q,p){q.exports=a("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":1016}],22:[function(a,q,p){q.exports=a("../src/traces/histogram")},{"../src/traces/histogram":1028}],23:[function(a,q,p){q.exports=a("../src/traces/histogram2d")},{"../src/traces/histogram2d":1034}],24:[function(a,q,p){q.exports=a("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":1038}],25:[function(a,
q,p){q.exports=a("../src/traces/image")},{"../src/traces/image":1045}],26:[function(a,q,p){p=a("./core");p.register([a("./bar"),a("./box"),a("./heatmap"),a("./histogram"),a("./histogram2d"),a("./histogram2dcontour"),a("./contour"),a("./scatterternary"),a("./violin"),a("./funnel"),a("./waterfall"),a("./image"),a("./pie"),a("./sunburst"),a("./treemap"),a("./funnelarea"),a("./scatter3d"),a("./surface"),a("./isosurface"),a("./volume"),a("./mesh3d"),a("./cone"),a("./streamtube"),a("./scattergeo"),a("./choropleth"),
a("./scattergl"),a("./splom"),a("./pointcloud"),a("./heatmapgl"),a("./parcoords"),a("./parcats"),a("./scattermapbox"),a("./choroplethmapbox"),a("./densitymapbox"),a("./sankey"),a("./indicator"),a("./table"),a("./carpet"),a("./scattercarpet"),a("./contourcarpet"),a("./ohlc"),a("./candlestick"),a("./scatterpolar"),a("./scatterpolargl"),a("./barpolar")]);p.register([a("./aggregate"),a("./filter"),a("./groupby"),a("./sort")]);p.register([a("./calendars")]);q.exports=p},{"./aggregate":2,"./bar":3,"./barpolar":4,
"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./image":25,"./indicator":27,"./isosurface":28,"./mesh3d":29,"./ohlc":30,"./parcats":31,"./parcoords":32,"./pie":33,"./pointcloud":34,"./sankey":35,"./scatter3d":36,"./scattercarpet":37,
"./scattergeo":38,"./scattergl":39,"./scattermapbox":40,"./scatterpolar":41,"./scatterpolargl":42,"./scatterternary":43,"./sort":44,"./splom":45,"./streamtube":46,"./sunburst":47,"./surface":48,"./table":49,"./treemap":50,"./violin":51,"./volume":52,"./waterfall":53}],27:[function(a,q,p){q.exports=a("../src/traces/indicator")},{"../src/traces/indicator":1053}],28:[function(a,q,p){q.exports=a("../src/traces/isosurface")},{"../src/traces/isosurface":1059}],29:[function(a,q,p){q.exports=a("../src/traces/mesh3d")},
{"../src/traces/mesh3d":1064}],30:[function(a,q,p){q.exports=a("../src/traces/ohlc")},{"../src/traces/ohlc":1069}],31:[function(a,q,p){q.exports=a("../src/traces/parcats")},{"../src/traces/parcats":1078}],32:[function(a,q,p){q.exports=a("../src/traces/parcoords")},{"../src/traces/parcoords":1088}],33:[function(a,q,p){q.exports=a("../src/traces/pie")},{"../src/traces/pie":1099}],34:[function(a,q,p){q.exports=a("../src/traces/pointcloud")},{"../src/traces/pointcloud":1108}],35:[function(a,q,p){q.exports=
a("../src/traces/sankey")},{"../src/traces/sankey":1114}],36:[function(a,q,p){q.exports=a("../src/traces/scatter3d")},{"../src/traces/scatter3d":1151}],37:[function(a,q,p){q.exports=a("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":1158}],38:[function(a,q,p){q.exports=a("../src/traces/scattergeo")},{"../src/traces/scattergeo":1166}],39:[function(a,q,p){q.exports=a("../src/traces/scattergl")},{"../src/traces/scattergl":1179}],40:[function(a,q,p){q.exports=a("../src/traces/scattermapbox")},
{"../src/traces/scattermapbox":1189}],41:[function(a,q,p){q.exports=a("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1197}],42:[function(a,q,p){q.exports=a("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1204}],43:[function(a,q,p){q.exports=a("../src/traces/scatterternary")},{"../src/traces/scatterternary":1212}],44:[function(a,q,p){q.exports=a("../src/transforms/sort")},{"../src/transforms/sort":1300}],45:[function(a,q,p){q.exports=a("../src/traces/splom")},{"../src/traces/splom":1221}],
46:[function(a,q,p){q.exports=a("../src/traces/streamtube")},{"../src/traces/streamtube":1229}],47:[function(a,q,p){q.exports=a("../src/traces/sunburst")},{"../src/traces/sunburst":1237}],48:[function(a,q,p){q.exports=a("../src/traces/surface")},{"../src/traces/surface":1246}],49:[function(a,q,p){q.exports=a("../src/traces/table")},{"../src/traces/table":1254}],50:[function(a,q,p){q.exports=a("../src/traces/treemap")},{"../src/traces/treemap":1263}],51:[function(a,q,p){q.exports=a("../src/traces/violin")},
{"../src/traces/violin":1275}],52:[function(a,q,p){q.exports=a("../src/traces/volume")},{"../src/traces/volume":1283}],53:[function(a,q,p){q.exports=a("../src/traces/waterfall")},{"../src/traces/waterfall":1291}],54:[function(a,q,p){function n(b,a){this._controllerNames=Object.keys(b);this._controllerList=this._controllerNames.map(function(a){return b[a]});this._mode=a;this._active=b[a];this._active||(this._mode="turntable",this._active=b.turntable);this.modes=this._controllerNames;this.computedMatrix=
this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}q.exports=function(b){b=b||{};var a=b.eye||[0,0,1],g=b.center||[0,0,0],l=b.up||[0,1,0],f=b.distanceLimits||[0,Infinity];b=b.mode||"turntable";var d=k(),c=m(),r=h();d.setDistanceLimits(f[0],f[1]);d.lookAt(0,a,g,l);c.setDistanceLimits(f[0],f[1]);c.lookAt(0,a,g,l);r.setDistanceLimits(f[0],f[1]);r.lookAt(0,
a,g,l);return new n({turntable:d,orbit:c,matrix:r},b)};var k=a("turntable-camera-controller"),m=a("orbit-camera-controller"),h=a("matrix-camera-controller"),b=n.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach(function(a){for(var e=a[0],g=[],h=0;h<a[1];++h)g.push("a"+h);a="var cc\x3dthis._controllerList;for(var i\x3d0;i\x3ccc.length;++i){cc[i]."+a[0]+"("+g.join()+")}";b[e]=Function.apply(null,g.concat(a))});
b.recalcMatrix=function(b){this._active.recalcMatrix(b)};b.getDistance=function(b){return this._active.getDistance(b)};b.getDistanceLimits=function(b){return this._active.getDistanceLimits(b)};b.lastT=function(){return this._active.lastT()};b.setMode=function(b){if(b!==this._mode){var a=this._controllerNames.indexOf(b);if(!(0>a)){var g=this._active;a=this._controllerList[a];var h=Math.max(g.lastT(),a.lastT());g.recalcMatrix(h);a.setMatrix(h,g.computedMatrix);this._active=a;this._mode=b;this.computedMatrix=
this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}}};b.getMode=function(){return this._mode}},{"matrix-camera-controller":434,"orbit-camera-controller":457,"turntable-camera-controller":540}],55:[function(a,q,p){(function(n,k){"object"===typeof p&&"undefined"!==typeof q?k(p,a("d3-array"),a("d3-collection"),a("d3-shape"),a("elementary-circuits-directed-graph")):
k(n.d3=n.d3||{},n.d3,n.d3,n.d3,null)})(this,function(a,k,m,h,b){function g(b){return b.target.depth}function e(b,a){return b.sourceLinks.length?b.depth:a-1}function t(b){return function(){return b}}function l(b,a){return d(b.source,a.source)||b.index-a.index}function f(b,a){return d(b.target,a.target)||b.index-a.index}function d(b,a){return b.partOfCycle===a.partOfCycle?b.y0-a.y0:"top"===b.circularLinkType||"bottom"===a.circularLinkType?-1:1}function c(b){return b.value}function r(b){return(b.y0+
b.y1)/2}function u(b){return r(b.source)}function v(b){return r(b.target)}function n(b){return b.index}function y(b){return b.nodes}function A(b){return b.links}function z(b,a){b=b.get(a);if(!b)throw Error("missing: "+a);return b}function x(a,c,d){var e=0;if(null===d){var f=[];for(c=0;c<a.links.length;c++){var g=a.links[c],h=g.source.index;g=g.target.index;f[h]||(f[h]=[]);f[g]||(f[g]=[]);-1===f[h].indexOf(g)&&f[h].push(g)}f=b(f);f.sort(function(b,a){return b.length-a.length});var r={};for(c=0;c<f.length;c++)h=
f[c].slice(-2),r[h[0]]||(r[h[0]]={}),r[h[0]][h[1]]=!0;a.links.forEach(function(b){var a=b.target.index,c=b.source.index;a===c||r[c]&&r[c][a]?(b.circular=!0,b.circularLinkID=e,e+=1):b.circular=!1})}else a.links.forEach(function(b){b.source[d]<b.target[d]?b.circular=!1:(b.circular=!0,b.circularLinkID=e,e+=1)})}function C(b,a){var c=0,d=0;b.links.forEach(function(e){e.circular&&(e.circularLinkType=e.source.circularLinkType||e.target.circularLinkType?e.source.circularLinkType?e.source.circularLinkType:
e.target.circularLinkType:c<d?"top":"bottom","top"==e.circularLinkType?c+=1:d+=1,b.nodes.forEach(function(b){if(a(b)==a(e.source)||a(b)==a(e.target))b.circularLinkType=e.circularLinkType}))});b.links.forEach(function(b){b.circular&&(b.source.circularLinkType==b.target.circularLinkType&&(b.circularLinkType=b.source.circularLinkType),ca(b,a)&&(b.circularLinkType=b.source.circularLinkType))})}function B(b){return Math.atan(Math.abs(b.target.x0-b.source.x1)/Math.abs(b.y1-b.y0))}function D(b,a){var c=
0;b.sourceLinks.forEach(function(b){c=b.circular&&!ca(b,a)?c+1:c});var d=0;b.targetLinks.forEach(function(b){d=b.circular&&!ca(b,a)?d+1:d});return c+d}function G(b){var a=0;b.source.sourceLinks.forEach(function(b){a=b.circular?a+1:a});var c=0;b.target.targetLinks.forEach(function(b){c=b.circular?c+1:c});return 1<a||1<c?!1:!0}function E(b,a,c){b.sort(p);b.forEach(function(d,e){var f=0;if(!ca(d,c)||!G(d)){var g=0;for(g;g<e;g++){var h=b[e];var r=b[g];h=h.source.column<r.target.column?!1:h.target.column>
r.source.column?!1:!0;h&&(h=b[g].circularPathData.verticalBuffer+b[g].width/2+a,f=h>f?h:f)}}d.circularPathData.verticalBuffer=f+d.width/2});return b}function F(b,a,c,d){var e=k.min(b.links,function(b){return b.source.y0});b.links.forEach(function(b){b.circular&&(b.circularPathData={})});var f=b.links.filter(function(b){return"top"==b.circularLinkType});E(f,a,d);f=b.links.filter(function(b){return"bottom"==b.circularLinkType});E(f,a,d);b.links.forEach(function(f){if(f.circular){f.circularPathData.arcRadius=
f.width+10;f.circularPathData.leftNodeBuffer=5;f.circularPathData.rightNodeBuffer=5;f.circularPathData.sourceWidth=f.source.x1-f.source.x0;f.circularPathData.sourceX=f.source.x0+f.circularPathData.sourceWidth;f.circularPathData.targetX=f.target.x0;f.circularPathData.sourceY=f.y0;f.circularPathData.targetY=f.y1;if(ca(f,d)&&G(f))f.circularPathData.leftSmallArcRadius=10+f.width/2,f.circularPathData.leftLargeArcRadius=10+f.width/2,f.circularPathData.rightSmallArcRadius=10+f.width/2,f.circularPathData.rightLargeArcRadius=
10+f.width/2,"bottom"==f.circularLinkType?(f.circularPathData.verticalFullExtent=f.source.y1+25+f.circularPathData.verticalBuffer,f.circularPathData.verticalLeftInnerExtent=f.circularPathData.verticalFullExtent-f.circularPathData.leftLargeArcRadius,f.circularPathData.verticalRightInnerExtent=f.circularPathData.verticalFullExtent-f.circularPathData.rightLargeArcRadius):(f.circularPathData.verticalFullExtent=f.source.y0-25-f.circularPathData.verticalBuffer,f.circularPathData.verticalLeftInnerExtent=
f.circularPathData.verticalFullExtent+f.circularPathData.leftLargeArcRadius,f.circularPathData.verticalRightInnerExtent=f.circularPathData.verticalFullExtent+f.circularPathData.rightLargeArcRadius);else{var g=f.source.column,r=f.circularLinkType,l=b.links.filter(function(b){return b.source.column==g&&b.circularLinkType==r});"bottom"==f.circularLinkType?l.sort(H):l.sort(J);var u=0;l.forEach(function(b,c){b.circularLinkID==f.circularLinkID&&(f.circularPathData.leftSmallArcRadius=10+f.width/2+u,f.circularPathData.leftLargeArcRadius=
10+f.width/2+c*a+u);u+=b.width});g=f.target.column;l=b.links.filter(function(b){return b.target.column==g&&b.circularLinkType==r});"bottom"==f.circularLinkType?l.sort(M):l.sort(K);u=0;l.forEach(function(b,c){b.circularLinkID==f.circularLinkID&&(f.circularPathData.rightSmallArcRadius=10+f.width/2+u,f.circularPathData.rightLargeArcRadius=10+f.width/2+c*a+u);u+=b.width});"bottom"==f.circularLinkType?(f.circularPathData.verticalFullExtent=Math.max(c,f.source.y1,f.target.y1)+25+f.circularPathData.verticalBuffer,
f.circularPathData.verticalLeftInnerExtent=f.circularPathData.verticalFullExtent-f.circularPathData.leftLargeArcRadius,f.circularPathData.verticalRightInnerExtent=f.circularPathData.verticalFullExtent-f.circularPathData.rightLargeArcRadius):(f.circularPathData.verticalFullExtent=e-25-f.circularPathData.verticalBuffer,f.circularPathData.verticalLeftInnerExtent=f.circularPathData.verticalFullExtent+f.circularPathData.leftLargeArcRadius,f.circularPathData.verticalRightInnerExtent=f.circularPathData.verticalFullExtent+
f.circularPathData.rightLargeArcRadius)}f.circularPathData.leftInnerExtent=f.circularPathData.sourceX+f.circularPathData.leftNodeBuffer;f.circularPathData.rightInnerExtent=f.circularPathData.targetX-f.circularPathData.rightNodeBuffer;f.circularPathData.leftFullExtent=f.circularPathData.sourceX+f.circularPathData.leftLargeArcRadius+f.circularPathData.leftNodeBuffer;f.circularPathData.rightFullExtent=f.circularPathData.targetX-f.circularPathData.rightLargeArcRadius-f.circularPathData.rightNodeBuffer}f.circular?
f.path="top"==f.circularLinkType?"M"+f.circularPathData.sourceX+" "+f.circularPathData.sourceY+" L"+f.circularPathData.leftInnerExtent+" "+f.circularPathData.sourceY+" A"+f.circularPathData.leftLargeArcRadius+" "+f.circularPathData.leftSmallArcRadius+" 0 0 0 "+f.circularPathData.leftFullExtent+" "+(f.circularPathData.sourceY-f.circularPathData.leftSmallArcRadius)+" L"+f.circularPathData.leftFullExtent+" "+f.circularPathData.verticalLeftInnerExtent+" A"+f.circularPathData.leftLargeArcRadius+" "+f.circularPathData.leftLargeArcRadius+
" 0 0 0 "+f.circularPathData.leftInnerExtent+" "+f.circularPathData.verticalFullExtent+" L"+f.circularPathData.rightInnerExtent+" "+f.circularPathData.verticalFullExtent+" A"+f.circularPathData.rightLargeArcRadius+" "+f.circularPathData.rightLargeArcRadius+" 0 0 0 "+f.circularPathData.rightFullExtent+" "+f.circularPathData.verticalRightInnerExtent+" L"+f.circularPathData.rightFullExtent+" "+(f.circularPathData.targetY-f.circularPathData.rightSmallArcRadius)+" A"+f.circularPathData.rightLargeArcRadius+
" "+f.circularPathData.rightSmallArcRadius+" 0 0 0 "+f.circularPathData.rightInnerExtent+" "+f.circularPathData.targetY+" L"+f.circularPathData.targetX+" "+f.circularPathData.targetY:"M"+f.circularPathData.sourceX+" "+f.circularPathData.sourceY+" L"+f.circularPathData.leftInnerExtent+" "+f.circularPathData.sourceY+" A"+f.circularPathData.leftLargeArcRadius+" "+f.circularPathData.leftSmallArcRadius+" 0 0 1 "+f.circularPathData.leftFullExtent+" "+(f.circularPathData.sourceY+f.circularPathData.leftSmallArcRadius)+
" L"+f.circularPathData.leftFullExtent+" "+f.circularPathData.verticalLeftInnerExtent+" A"+f.circularPathData.leftLargeArcRadius+" "+f.circularPathData.leftLargeArcRadius+" 0 0 1 "+f.circularPathData.leftInnerExtent+" "+f.circularPathData.verticalFullExtent+" L"+f.circularPathData.rightInnerExtent+" "+f.circularPathData.verticalFullExtent+" A"+f.circularPathData.rightLargeArcRadius+" "+f.circularPathData.rightLargeArcRadius+" 0 0 1 "+f.circularPathData.rightFullExtent+" "+f.circularPathData.verticalRightInnerExtent+
" L"+f.circularPathData.rightFullExtent+" "+(f.circularPathData.targetY+f.circularPathData.rightSmallArcRadius)+" A"+f.circularPathData.rightLargeArcRadius+" "+f.circularPathData.rightSmallArcRadius+" 0 0 1 "+f.circularPathData.rightInnerExtent+" "+f.circularPathData.targetY+" L"+f.circularPathData.targetX+" "+f.circularPathData.targetY:(l=h.linkHorizontal().source(function(b){return[b.source.x0+(b.source.x1-b.source.x0),b.y0]}).target(function(b){return[b.target.x0,b.y1]}),f.path=l(f))})}function p(b,
a){return I(b)==I(a)?"bottom"==b.circularLinkType?H(b,a):J(b,a):I(a)-I(b)}function J(b,a){return b.y0-a.y0}function H(b,a){return a.y0-b.y0}function K(b,a){return b.y1-a.y1}function M(b,a){return a.y1-b.y1}function I(b){return b.target.column-b.source.column}function N(b,a){var c=B(b);a=(a.target.x0-a.source.x1)/Math.tan(c);return"up"==Y(b)?b.y1+a:b.y1-a}function q(b,a){var c=B(b);a=(a.target.x0-a.source.x1)/Math.tan(c);return"up"==Y(b)?b.y1-a:b.y1+a}function P(b,a,c,d){b.links.forEach(function(e){if(!e.circular&&
1<e.target.column-e.source.column){var f=e.source.column+1,g=e.target.column-1,h=1,r=g-f+1;for(h=1;f<=g;f++,h++)b.nodes.forEach(function(g){if(g.column==f){var l=h/(r+1),u=Math.pow(1-l,3)*e.y0+3*l*Math.pow(1-l,2)*e.y0+3*Math.pow(l,2)*(1-l)*e.y1+Math.pow(l,3)*e.y1;l=u-e.width/2;u+=e.width/2;if(l>g.y0&&l<g.y1){var t=g.y1-l+10;t="bottom"==g.circularLinkType?t:-t;g=Q(g,t,a,c);b.nodes.forEach(function(b){d(b)!=d(g)&&b.column==g.column&&(g.y0>b.y0&&g.y0<b.y1||g.y1>b.y0&&g.y1<b.y1||g.y0<b.y0&&g.y1>b.y1)&&
Q(b,t,a,c)})}else u>g.y0&&u<g.y1?(t=u-g.y0+10,g=Q(g,t,a,c),b.nodes.forEach(function(b){d(b)!=d(g)&&b.column==g.column&&b.y0<g.y1&&b.y1>g.y1&&Q(b,t,a,c)})):l<g.y0&&u>g.y1&&(t=u-g.y0+10,g=Q(g,t,a,c),b.nodes.forEach(function(b){d(b)!=d(g)&&b.column==g.column&&b.y0<g.y1&&b.y1>g.y1&&Q(b,t,a,c)}))}})}})}function Q(b,a,c,d){b.y0+a>=c&&b.y1+a<=d&&(b.y0+=a,b.y1+=a,b.targetLinks.forEach(function(b){b.y1+=a}),b.sourceLinks.forEach(function(b){b.y0+=a}));return b}function T(b,a,c,d){b.nodes.forEach(function(e){d&&
e.y+(e.y1-e.y0)>a&&(e.y-=e.y+(e.y1-e.y0)-a);var f=b.links.filter(function(b){return c(b.source)==c(e)}),g=f.length;1<g&&f.sort(function(b,a){if(!b.circular&&!a.circular)if(b.target.column!=a.target.column&&Y(b)==Y(a)){if(b.target.column>a.target.column)return a=q(a,b),b.y1-a;if(a.target.column>b.target.column)return q(b,a)-a.y1}else return b.y1-a.y1;if(b.circular&&!a.circular)return"top"==b.circularLinkType?-1:1;if(a.circular&&!b.circular)return"top"==a.circularLinkType?1:-1;if(b.circular&&a.circular)return b.circularLinkType===
a.circularLinkType&&"top"==b.circularLinkType?b.target.column===a.target.column?b.target.y1-a.target.y1:a.target.column-b.target.column:b.circularLinkType===a.circularLinkType&&"bottom"==b.circularLinkType?b.target.column===a.target.column?a.target.y1-b.target.y1:b.target.column-a.target.column:"top"==b.circularLinkType?-1:1});var h=e.y0;f.forEach(function(b){b.y0=h+b.width/2;h+=b.width});f.forEach(function(b,a){if("bottom"==b.circularLinkType){a+=1;var c=0;for(a;a<g;a++)c+=f[a].width;b.y0=e.y1-c-
b.width/2}})})}function V(b,a,c){b.nodes.forEach(function(a){var d=b.links.filter(function(b){return c(b.target)==c(a)}),e=d.length;1<e&&d.sort(function(b,a){if(!b.circular&&!a.circular)if(b.source.column!=a.source.column&&Y(b)==Y(a)){if(a.source.column<b.source.column)return a=N(a,b),b.y0-a;if(b.source.column<a.source.column)return N(b,a)-a.y0}else return b.y0-a.y0;if(b.circular&&!a.circular)return"top"==b.circularLinkType?-1:1;if(a.circular&&!b.circular)return"top"==a.circularLinkType?1:-1;if(b.circular&&
a.circular)return b.circularLinkType===a.circularLinkType&&"top"==b.circularLinkType?b.source.column===a.source.column?b.source.y1-a.source.y1:b.source.column-a.source.column:b.circularLinkType===a.circularLinkType&&"bottom"==b.circularLinkType?b.source.column===a.source.column?b.source.y1-a.source.y1:a.source.column-b.source.column:"top"==b.circularLinkType?-1:1});var f=a.y0;d.forEach(function(b){b.y1=f+b.width/2;f+=b.width});d.forEach(function(b,c){if("bottom"==b.circularLinkType){c+=1;var f=0;
for(c;c<e;c++)f+=d[c].width;b.y1=a.y1-f-b.width/2}})})}function Y(b){return 0<b.y0-b.y1?"up":"down"}function ca(b,a){return a(b.source)==a(b.target)}function Z(b,a,c){var d=b.nodes;b=b.links;var e=!1,f=!1;b.forEach(function(b){"top"==b.circularLinkType?e=!0:"bottom"==b.circularLinkType&&(f=!0)});if(0==e||0==f){var g=k.min(d,function(b){return b.y0}),h=k.max(d,function(b){return b.y1}),r=(c-a)/(h-g);d.forEach(function(b){var a=(b.y1-b.y0)*r;b.y0=(b.y0-g)*r;b.y1=b.y0+a});b.forEach(function(b){b.y0=
(b.y0-g)*r;b.y1=(b.y1-g)*r;b.width*=r})}}b=b&&b.hasOwnProperty("default")?b["default"]:b;$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var R="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};a.sankeyCircular=function(){function b(){var b={nodes:L.apply(null,
arguments),links:O.apply(null,arguments)};a(b);x(b,J,ua);g(b);B(b);C(b,J);G(b,Q,J);K(b);for(var c=0;4>c;c++)T(b,H,J),V(b,H,J),P(b,E,H,J),T(b,H,J),V(b,H,J);Z(b,E,H);F(b,Y,H,J);return b}function a(b){b.nodes.forEach(function(b,a){b.index=a;b.sourceLinks=[];b.targetLinks=[]});var a=m.map(b.nodes,J);b.links.forEach(function(b,c){b.index=c;c=b.source;var d=b.target;"object"!==("undefined"===typeof c?"undefined":R(c))&&(c=b.source=z(a,c));"object"!==("undefined"===typeof d?"undefined":R(d))&&(d=b.target=
z(a,d));c.sourceLinks.push(b);d.targetLinks.push(b)});return b}function g(b){b.nodes.forEach(function(b){b.partOfCycle=!1;b.value=Math.max(k.sum(b.sourceLinks,c),k.sum(b.targetLinks,c));b.sourceLinks.forEach(function(a){a.circular&&(b.partOfCycle=!0,b.circularLinkType=a.circularLinkType)});b.targetLinks.forEach(function(a){a.circular&&(b.partOfCycle=!0,b.circularLinkType=a.circularLinkType)})})}function h(b){var a=0,c=0,d=0,e=0,f=k.max(b.nodes,function(b){return b.column});b.links.forEach(function(b){b.circular&&
("top"==b.circularLinkType?a+=b.width:c+=b.width,0==b.target.column&&(e+=b.width),b.source.column==f&&(d+=b.width))});a=0<a?a+25+10:a;c=0<c?c+25+10:c;d=0<d?d+25+10:d;e=0<e?e+25+10:e;return{top:a,bottom:c,left:e,right:d}}function w(b,a){var c=k.max(b.nodes,function(b){return b.column}),d=M-I,e=H-E;d/=d+a.right+a.left;e/=e+a.top+a.bottom;I=I*d+a.left;M=0==a.right?M:M*d;E=E*e+a.top;H*=e;b.nodes.forEach(function(b){b.x0=I+(M-I-N)/c*b.column;b.x1=b.x0+N});return e}function B(b){var a;var c=b.nodes;var d=
[];for(a=0;c.length;++a,c=d,d=[])c.forEach(function(b){b.depth=a;b.sourceLinks.forEach(function(b){0>d.indexOf(b.target)&&!b.circular&&d.push(b.target)})});c=b.nodes;d=[];for(a=0;c.length;++a,c=d,d=[])c.forEach(function(b){b.height=a;b.targetLinks.forEach(function(b){0>d.indexOf(b.source)&&!b.circular&&d.push(b.source)})});b.nodes.forEach(function(b){b.column=Math.floor(q.call(null,b,a))})}function G(b,a,e){function f(b,a){var c=l.length;l.forEach(function(d){var e=d.length,f=d[0].depth;d.forEach(function(d){if((d.sourceLinks.length||
d.targetLinks.length)&&!(d.partOfCycle&&0<D(d,a)))if(0==f&&1==e){var g=d.y1-d.y0;d.y0=H/2-g/2;d.y1=H/2+g/2}else if(f==c-1&&1==e)g=d.y1-d.y0,d.y0=H/2-g/2,d.y1=H/2+g/2;else{g=k.mean(d.sourceLinks,v);var h=k.mean(d.targetLinks,u);g=((g&&h?(g+h)/2:g||h)-r(d))*b;d.y0+=g;d.y1+=g}})})}function g(){l.forEach(function(b){var a=E,c=b.length,e;b.sort(d);for(e=0;e<c;++e){var f=b[e];var g=a-f.y0;0<g&&(f.y0+=g,f.y1+=g);a=f.y1+p}g=a-p-H;if(0<g)for(a=f.y0-=g,f.y1-=g,e=c-2;0<=e;--e)f=b[e],g=f.y1+p-a,0<g&&(f.y0-=g,
f.y1-=g),a=f.y0})}var l=m.nest().key(function(b){return b.column}).sortKeys(k.ascending).entries(b.nodes).map(function(b){return b.values});(function(a){if(ca){var d=Infinity;l.forEach(function(b){b=H*ca/(b.length+1);d=b<d?b:d});p=d}var e=k.min(l,function(b){return(H-E-(b.length-1)*p)/k.sum(b,c)});e*=.3;b.links.forEach(function(b){b.width=b.value*e});var f=h(b),g=w(b,f);e*=g;b.links.forEach(function(b){b.width=b.value*e});l.forEach(function(b){var c=b.length;b.forEach(function(b,d){b.depth==l.length-
1&&1==c?b.y0=H/2-b.value*e:0==b.depth&&1==c?b.y0=H/2-b.value*e:b.partOfCycle?0==D(b,a)?b.y0=H/2+d:b.y0="top"==b.circularLinkType?E+d:H-b.value*e-d:b.y0=0==f.top||0==f.bottom?(H-E)/c*d:(H-E)/2-c/2+d;b.y1=b.y0+b.value*e})})})(e);g();for(var t=1;0<a;--a)f(t*=.99,e),g()}function K(b){b.nodes.forEach(function(b){b.sourceLinks.sort(f);b.targetLinks.sort(l)});b.nodes.forEach(function(b){var a=b.y0,c=a,d=b.y1,e=d;b.sourceLinks.forEach(function(b){b.circular?(b.y0=d-b.width/2,d-=b.width):(b.y0=a+b.width/2,
a+=b.width)});b.targetLinks.forEach(function(b){b.circular?(b.y1=e-b.width/2,e-=b.width):(b.y1=c+b.width/2,c+=b.width)})})}var I=0,E=0,M=1,H=1,N=24,p,J=n,q=e,L=y,O=A,Q=32,Y=2,ca,ua=null;b.nodeId=function(a){return arguments.length?(J="function"===typeof a?a:t(a),b):J};b.nodeAlign=function(a){return arguments.length?(q="function"===typeof a?a:t(a),b):q};b.nodeWidth=function(a){return arguments.length?(N=+a,b):N};b.nodePadding=function(a){return arguments.length?(p=+a,b):p};b.nodes=function(a){return arguments.length?
(L="function"===typeof a?a:t(a),b):L};b.links=function(a){return arguments.length?(O="function"===typeof a?a:t(a),b):O};b.size=function(a){return arguments.length?(I=E=0,M=+a[0],H=+a[1],b):[M-I,H-E]};b.extent=function(a){return arguments.length?(I=+a[0][0],M=+a[1][0],E=+a[0][1],H=+a[1][1],b):[[I,E],[M,H]]};b.iterations=function(a){return arguments.length?(Q=+a,b):Q};b.circularLinkGap=function(a){return arguments.length?(Y=+a,b):Y};b.nodePaddingRatio=function(a){return arguments.length?(ca=+a,b):ca};
b.sortNodes=function(a){return arguments.length?(ua=a,b):ua};b.update=function(b){C(b,J);K(b);b.links.forEach(function(b){b.circular&&(b.circularLinkType=b.y0+b.y1<H?"top":"bottom",b.source.circularLinkType=b.circularLinkType,b.target.circularLinkType=b.circularLinkType)});T(b,H,J,!1);V(b,H,J);F(b,Y,H,J);return b};return b};a.sankeyCenter=function(b){return b.targetLinks.length?b.depth:b.sourceLinks.length?k.min(b.sourceLinks,g)-1:0};a.sankeyLeft=function(b){return b.depth};a.sankeyRight=function(b,
a){return a-1-b.height};a.sankeyJustify=e;Object.defineProperty(a,"__esModule",{value:!0})})},{"d3-array":154,"d3-collection":155,"d3-shape":163,"elementary-circuits-directed-graph":175}],56:[function(a,q,p){(function(n,k){"object"===typeof p&&"undefined"!==typeof q?k(p,a("d3-array"),a("d3-collection"),a("d3-shape")):k(n.d3=n.d3||{},n.d3,n.d3,n.d3)})(this,function(a,k,m,h){function b(b){return b.target.depth}function g(b,a){return b.sourceLinks.length?b.depth:a-1}function e(b){return function(){return b}}
function t(b,a){return f(b.source,a.source)||b.index-a.index}function l(b,a){return f(b.target,a.target)||b.index-a.index}function f(b,a){return b.y0-a.y0}function d(b){return b.value}function c(b){return(b.y0+b.y1)/2}function r(b){return c(b.source)*b.value}function u(b){return c(b.target)*b.value}function v(b){return b.index}function n(b){return b.nodes}function y(b){return b.links}function A(b,a){b=b.get(a);if(!b)throw Error("missing: "+a);return b}function z(b){return[b.source.x1,b.y0]}function x(b){return[b.target.x0,
b.y1]}a.sankey=function(){function b(){var b={nodes:P.apply(null,arguments),links:Q.apply(null,arguments)};a(b);h(b);w(b);x(b,T);z(b);return b}function a(b){b.nodes.forEach(function(b,a){b.index=a;b.sourceLinks=[];b.targetLinks=[]});var a=m.map(b.nodes,N);b.links.forEach(function(b,c){b.index=c;c=b.source;var d=b.target;"object"!==typeof c&&(c=b.source=A(a,c));"object"!==typeof d&&(d=b.target=A(a,d));c.sourceLinks.push(b);d.targetLinks.push(b)})}function h(b){b.nodes.forEach(function(b){b.value=Math.max(k.sum(b.sourceLinks,
d),k.sum(b.targetLinks,d))})}function w(b){var a;var c=b.nodes;var d=[];for(a=0;c.length;++a,c=d,d=[])c.forEach(function(b){b.depth=a;b.sourceLinks.forEach(function(b){0>d.indexOf(b.target)&&d.push(b.target)})});c=b.nodes;d=[];for(a=0;c.length;++a,c=d,d=[])c.forEach(function(b){b.height=a;b.targetLinks.forEach(function(b){0>d.indexOf(b.source)&&d.push(b.source)})});var e=(H-p-M)/(a-1);b.nodes.forEach(function(b){b.x1=(b.x0=p+Math.max(0,Math.min(a-1,Math.floor(q.call(null,b,a))))*e)+M})}function x(b){function a(b){h.forEach(function(a){a.forEach(function(a){if(a.targetLinks.length){var e=
(k.sum(a.targetLinks,r)/k.sum(a.targetLinks,d)-c(a))*b;a.y0+=e;a.y1+=e}})})}function e(b){h.slice().reverse().forEach(function(a){a.forEach(function(a){if(a.sourceLinks.length){var e=(k.sum(a.sourceLinks,u)/k.sum(a.sourceLinks,d)-c(a))*b;a.y0+=e;a.y1+=e}})})}function g(){h.forEach(function(b){var a=J,c=b.length,d;b.sort(f);for(d=0;d<c;++d){var e=b[d];var g=a-e.y0;0<g&&(e.y0+=g,e.y1+=g);a=e.y1+I}g=a-I-K;if(0<g)for(a=e.y0-=g,e.y1-=g,d=c-2;0<=d;--d)e=b[d],g=e.y1+I-a,0<g&&(e.y0-=g,e.y1-=g),a=e.y0})}var h=
m.nest().key(function(b){return b.x0}).sortKeys(k.ascending).entries(b.nodes).map(function(b){return b.values});(function(){var a=k.max(h,function(b){return b.length});a=V*(K-J)/(a-1);I>a&&(I=a);var c=k.min(h,function(b){return(K-J-(b.length-1)*I)/k.sum(b,d)});h.forEach(function(b){b.forEach(function(b,a){b.y1=(b.y0=a)+b.value*c})});b.links.forEach(function(b){b.width=b.value*c})})();g();for(var l=1,t=T;0<t;--t)e(l*=.99),g(),a(l),g()}function z(b){b.nodes.forEach(function(b){b.sourceLinks.sort(l);
b.targetLinks.sort(t)});b.nodes.forEach(function(b){var a=b.y0,c=a;b.sourceLinks.forEach(function(b){b.y0=a+b.width/2;a+=b.width});b.targetLinks.forEach(function(b){b.y1=c+b.width/2;c+=b.width})})}var p=0,J=0,H=1,K=1,M=24,I=8,N=v,q=g,P=n,Q=y,T=32,V=2/3;b.update=function(b){z(b);return b};b.nodeId=function(a){return arguments.length?(N="function"===typeof a?a:e(a),b):N};b.nodeAlign=function(a){return arguments.length?(q="function"===typeof a?a:e(a),b):q};b.nodeWidth=function(a){return arguments.length?
(M=+a,b):M};b.nodePadding=function(a){return arguments.length?(I=+a,b):I};b.nodes=function(a){return arguments.length?(P="function"===typeof a?a:e(a),b):P};b.links=function(a){return arguments.length?(Q="function"===typeof a?a:e(a),b):Q};b.size=function(a){return arguments.length?(p=J=0,H=+a[0],K=+a[1],b):[H-p,K-J]};b.extent=function(a){return arguments.length?(p=+a[0][0],H=+a[1][0],J=+a[0][1],K=+a[1][1],b):[[p,J],[H,K]]};b.iterations=function(a){return arguments.length?(T=+a,b):T};return b};a.sankeyCenter=
function(a){return a.targetLinks.length?a.depth:a.sourceLinks.length?k.min(a.sourceLinks,b)-1:0};a.sankeyLeft=function(b){return b.depth};a.sankeyRight=function(b,a){return a-1-b.height};a.sankeyJustify=g;a.sankeyLinkHorizontal=function(){return h.linkHorizontal().source(z).target(x)};Object.defineProperty(a,"__esModule",{value:!0})})},{"d3-array":154,"d3-collection":155,"d3-shape":163}],57:[function(a,q,p){function n(a){var b=0;if(a&&0<a.length){b+=Math.abs(k(a[0]));for(var g=1;g<a.length;g++)b-=
Math.abs(k(a[g]))}return b}function k(a){var b,g=0,e=a.length;if(2<e){for(b=0;b<e;b++){if(b===e-2){var h=e-2;var l=e-1;var f=0}else b===e-1?(h=e-1,l=0,f=1):(h=b,l=b+1,f=b+2);h=a[h];l=a[l];f=a[f];g+=(f[0]*Math.PI/180-h[0]*Math.PI/180)*Math.sin(l[1]*Math.PI/180)}g=40680631590769*g/2}return g}Object.defineProperty(p,"__esModule",{value:!0});var m=a("@turf/meta");p.default=function(a){return m.geomReduce(a,function(b,a){a:{var e=0,g;switch(a.type){case "Polygon":a=n(a.coordinates);break a;case "MultiPolygon":for(g=
0;g<a.coordinates.length;g++)e+=n(a.coordinates[g]);a=e;break a}a=0}return b+a},0)}},{"@turf/meta":61}],58:[function(a,q,p){Object.defineProperty(p,"__esModule",{value:!0});var n=a("@turf/meta");p.default=function(a){var k=[Infinity,Infinity,-Infinity,-Infinity];n.coordEach(a,function(a){k[0]>a[0]&&(k[0]=a[0]);k[1]>a[1]&&(k[1]=a[1]);k[2]<a[0]&&(k[2]=a[0]);k[3]<a[1]&&(k[3]=a[1])});return k}},{"@turf/meta":61}],59:[function(a,q,p){Object.defineProperty(p,"__esModule",{value:!0});var n=a("@turf/meta"),
k=a("@turf/helpers");p.default=function(a,h){void 0===h&&(h={});var b=0,g=0,e=0;n.coordEach(a,function(a){b+=a[0];g+=a[1];e++});return k.point([b/e,g/e],h.properties)}},{"@turf/helpers":60,"@turf/meta":61}],60:[function(a,q,p){function n(b,a,c){void 0===c&&(c={});var d={type:"Feature"};if(0===c.id||c.id)d.id=c.id;c.bbox&&(d.bbox=c.bbox);d.properties=a||{};d.geometry=b;return d}function k(b,a,c){void 0===c&&(c={});return n({type:"Point",coordinates:b},a,c)}function m(b,a,c){void 0===c&&(c={});for(var d=
0;d<b.length;d++){var e=b[d];if(4>e.length)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var f=0;f<e[e.length-1].length;f++)if(e[e.length-1][f]!==e[0][f])throw Error("First and last Position are not equivalent.");}return n({type:"Polygon",coordinates:b},a,c)}function h(b,a,c){void 0===c&&(c={});if(2>b.length)throw Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:b},a,c)}function b(b,a){void 0===a&&(a={});var c=
{type:"FeatureCollection"};a.id&&(c.id=a.id);a.bbox&&(c.bbox=a.bbox);c.features=b;return c}function g(b,a,c){void 0===c&&(c={});return n({type:"MultiLineString",coordinates:b},a,c)}function e(b,a,c){void 0===c&&(c={});return n({type:"MultiPoint",coordinates:b},a,c)}function t(b,a,c){void 0===c&&(c={});return n({type:"MultiPolygon",coordinates:b},a,c)}function l(b,a){void 0===a&&(a="kilometers");var c=p.factors[a];if(!c)throw Error(a+" units is invalid");return b*c}function f(b,a){void 0===a&&(a="kilometers");
var c=p.factors[a];if(!c)throw Error(a+" units is invalid");return b/c}function d(b){return b%(2*Math.PI)*180/Math.PI}function c(b){return!isNaN(b)&&null!==b&&!Array.isArray(b)&&!/^\s*$/.test(b)}Object.defineProperty(p,"__esModule",{value:!0});p.earthRadius=6371008.8;p.factors={centimeters:100*p.earthRadius,centimetres:100*p.earthRadius,degrees:p.earthRadius/111325,feet:3.28084*p.earthRadius,inches:39.37*p.earthRadius,kilometers:p.earthRadius/1E3,kilometres:p.earthRadius/1E3,meters:p.earthRadius,
metres:p.earthRadius,miles:p.earthRadius/1609.344,millimeters:1E3*p.earthRadius,millimetres:1E3*p.earthRadius,nauticalmiles:p.earthRadius/1852,radians:1,yards:p.earthRadius/1.0936};p.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1E3,millimetres:1E3,nauticalmiles:1/1852,radians:1/p.earthRadius,yards:1/1.0936};p.areaFactors={acres:2.47105E-4,centimeters:1E4,centimetres:1E4,feet:10.763910417,
inches:1550.003100006,kilometers:1E-6,kilometres:1E-6,meters:1,metres:1,miles:3.86E-7,millimeters:1E6,millimetres:1E6,yards:1.195990046};p.feature=n;p.geometry=function(b,a,c){switch(b){case "Point":return k(a).geometry;case "LineString":return h(a).geometry;case "Polygon":return m(a).geometry;case "MultiPoint":return e(a).geometry;case "MultiLineString":return g(a).geometry;case "MultiPolygon":return t(a).geometry;default:throw Error(b+" is invalid");}};p.point=k;p.points=function(a,c,d){void 0===
d&&(d={});return b(a.map(function(b){return k(b,c)}),d)};p.polygon=m;p.polygons=function(a,c,d){void 0===d&&(d={});return b(a.map(function(b){return m(b,c)}),d)};p.lineString=h;p.lineStrings=function(a,c,d){void 0===d&&(d={});return b(a.map(function(b){return h(b,c)}),d)};p.featureCollection=b;p.multiLineString=g;p.multiPoint=e;p.multiPolygon=t;p.geometryCollection=function(b,a,c){void 0===c&&(c={});return n({type:"GeometryCollection",geometries:b},a,c)};p.round=function(b,a){void 0===a&&(a=0);if(a&&
!(0<=a))throw Error("precision must be a positive number");a=Math.pow(10,a||0);return Math.round(b*a)/a};p.radiansToLength=l;p.lengthToRadians=f;p.lengthToDegrees=function(b,a){return d(f(b,a))};p.bearingToAzimuth=function(b){b%=360;0>b&&(b+=360);return b};p.radiansToDegrees=d;p.degreesToRadians=function(b){return b%360*Math.PI/180};p.convertLength=function(b,a,c){void 0===a&&(a="kilometers");void 0===c&&(c="kilometers");if(!(0<=b))throw Error("length must be a positive number");return l(f(b,a),c)};
p.convertArea=function(b,a,c){void 0===a&&(a="meters");void 0===c&&(c="kilometers");if(!(0<=b))throw Error("area must be a positive number");a=p.areaFactors[a];if(!a)throw Error("invalid original units");c=p.areaFactors[c];if(!c)throw Error("invalid final units");return b/a*c};p.isNumber=c;p.isObject=function(b){return!!b&&b.constructor===Object};p.validateBBox=function(b){if(!b)throw Error("bbox is required");if(!Array.isArray(b))throw Error("bbox must be an Array");if(4!==b.length&&6!==b.length)throw Error("bbox must be an Array of 4 or 6 numbers");
b.forEach(function(b){if(!c(b))throw Error("bbox must only contain numbers");})};p.validateId=function(b){if(!b)throw Error("id is required");if(-1===["string","number"].indexOf(typeof b))throw Error("id must be a number or a string");};p.radians2degrees=function(){throw Error("method has been renamed to `radiansToDegrees`");};p.degrees2radians=function(){throw Error("method has been renamed to `degreesToRadians`");};p.distanceToDegrees=function(){throw Error("method has been renamed to `lengthToDegrees`");
};p.distanceToRadians=function(){throw Error("method has been renamed to `lengthToRadians`");};p.radiansToDistance=function(){throw Error("method has been renamed to `radiansToLength`");};p.bearingToAngle=function(){throw Error("method has been renamed to `bearingToAzimuth`");};p.convertDistance=function(){throw Error("method has been renamed to `convertLength`");}},{}],61:[function(a,q,p){function n(b,a,d){if(null!==b){var c,e=0,f;var g=b.type;for(var h="FeatureCollection"===g,l="Feature"===g,t=
h?b.features.length:1,k=0;k<t;k++){var m=(f=(c=h?b.features[k].geometry:l?b.geometry:b)?"GeometryCollection"===c.type:!1)?c.geometries.length:1;for(var C=0;C<m;C++){var B=0,D=0;var G=f?c.geometries[C]:c;if(null!==G){var E=G.coordinates;var F=G.type;var p=!d||"Polygon"!==F&&"MultiPolygon"!==F?0:1;switch(F){case null:break;case "Point":if(!1===a(E,e,k,B,D))return!1;e++;break;case "LineString":case "MultiPoint":for(g=0;g<E.length;g++){if(!1===a(E[g],e,k,B,D))return!1;e++;"MultiPoint"===F&&B++}break;
case "Polygon":case "MultiLineString":for(g=0;g<E.length;g++){for(G=0;G<E[g].length-p;G++){if(!1===a(E[g][G],e,k,B,D))return!1;e++}"MultiLineString"===F&&B++;"Polygon"===F&&D++}break;case "MultiPolygon":for(g=0;g<E.length;g++){for(G=D=0;G<E[g].length;G++){for(F=0;F<E[g][G].length-p;F++){if(!1===a(E[g][G][F],e,k,B,D))return!1;e++}D++}B++}break;case "GeometryCollection":for(g=0;g<G.geometries.length;g++)if(!1===n(G.geometries[g],a,d))return!1;break;default:throw Error("Unknown Geometry Type");}}}}}}
function k(b,a){var d;switch(b.type){case "FeatureCollection":for(d=0;d<b.features.length&&!1!==a(b.features[d].properties,d);d++);break;case "Feature":a(b.properties,0)}}function m(b,a){if("Feature"===b.type)a(b,0);else if("FeatureCollection"===b.type)for(var d=0;d<b.features.length&&!1!==a(b.features[d],d);d++);}function h(b,a){var d,c,e,f,g=0,h="FeatureCollection"===b.type,l="Feature"===b.type,t=h?b.features.length:1;for(d=0;d<t;d++){var k=h?b.features[d].geometry:l?b.geometry:b;var m=h?b.features[d].properties:
l?b.properties:{};var n=h?b.features[d].bbox:l?b.bbox:void 0;var B=h?b.features[d].id:l?b.id:void 0;var D=(f=k?"GeometryCollection"===k.type:!1)?k.geometries.length:1;for(e=0;e<D;e++){var G=f?k.geometries[e]:k;if(null===G){if(!1===a(null,g,m,n,B))return!1}else switch(G.type){case "Point":case "LineString":case "MultiPoint":case "Polygon":case "MultiLineString":case "MultiPolygon":if(!1===a(G,g,m,n,B))return!1;break;case "GeometryCollection":for(c=0;c<G.geometries.length;c++)if(!1===a(G.geometries[c],
g,m,n,B))return!1;break;default:throw Error("Unknown Geometry Type");}}g++}}function b(b,a){h(b,function(b,c,e,f,g){var d=null===b?null:b.type;switch(d){case null:case "Point":case "LineString":case "Polygon":if(!1===a(t.feature(b,e,{bbox:f,id:g}),c,0))return!1;return}switch(d){case "MultiPoint":var h="Point";break;case "MultiLineString":h="LineString";break;case "MultiPolygon":h="Polygon"}for(f=0;f<b.coordinates.length;f++)if(!1===a(t.feature({type:h,coordinates:b.coordinates[f]},e),c,f))return!1})}
function g(a,e){b(a,function(b,a,f){var c=0;if(b.geometry){var d=b.geometry.type;if("Point"!==d&&"MultiPoint"!==d){var g,h=0,r=0,l=0;if(!1===n(b,function(d,u,k,m,n){if(void 0===g||a>h||m>r||n>l)g=d,h=a,r=m,l=n,c=0;else{u=t.lineString([g,d],b.properties);if(!1===e(u,a,f,n,c))return!1;c++;g=d}}))return!1}}})}function e(a,e){if(!a)throw Error("geojson is required");b(a,function(b,a,f){if(null!==b.geometry){var c=b.geometry.coordinates;switch(b.geometry.type){case "LineString":if(!1===e(b,a,f,0,0))return!1;
break;case "Polygon":for(var d=0;d<c.length;d++)if(!1===e(t.lineString(c[d],b.properties),a,f,d))return!1}}})}Object.defineProperty(p,"__esModule",{value:!0});var t=a("@turf/helpers");p.coordEach=n;p.coordReduce=function(b,a,d,c){var e=d;n(b,function(b,c,f,g,h){e=0===c&&void 0===d?b:a(e,b,c,f,g,h)},c);return e};p.propEach=k;p.propReduce=function(b,a,d){var c=d;k(b,function(b,e){c=0===e&&void 0===d?b:a(c,b,e)});return c};p.featureEach=m;p.featureReduce=function(b,a,d){var c=d;m(b,function(b,e){c=0===
e&&void 0===d?b:a(c,b,e)});return c};p.coordAll=function(b){var a=[];n(b,function(b){a.push(b)});return a};p.geomEach=h;p.geomReduce=function(b,a,d){var c=d;h(b,function(b,e,f,g,h){c=0===e&&void 0===d?b:a(c,b,e,f,g,h)});return c};p.flattenEach=b;p.flattenReduce=function(a,e,d){var c=d;b(a,function(b,a,f){c=0===a&&0===f&&void 0===d?b:e(c,b,a,f)});return c};p.segmentEach=g;p.segmentReduce=function(b,a,d){var c=d,e=!1;g(b,function(b,f,g,h,r){c=!1===e&&void 0===d?b:a(c,b,f,g,h,r);e=!0});return c};p.lineEach=
e;p.lineReduce=function(b,a,d){var c=d;e(b,function(b,e,f,g){c=0===e&&void 0===d?b:a(c,b,e,f,g)});return c};p.findSegment=function(b,a){a=a||{};if(!t.isObject(a))throw Error("options is invalid");var d=a.featureIndex||0,c=a.multiFeatureIndex||0,e=a.geometryIndex||0,f=a.segmentIndex||0,g=a.properties;switch(b.type){case "FeatureCollection":0>d&&(d=b.features.length+d);g=g||b.features[d].properties;b=b.features[d].geometry;break;case "Feature":g=g||b.properties;b=b.geometry;break;case "Point":case "MultiPoint":return null;
case "LineString":case "Polygon":case "MultiLineString":case "MultiPolygon":break;default:throw Error("geojson is invalid");}if(null===b)return null;d=b.coordinates;switch(b.type){case "Point":case "MultiPoint":return null;case "LineString":return 0>f&&(f=d.length+f-1),t.lineString([d[f],d[f+1]],g,a);case "Polygon":return 0>e&&(e=d.length+e),0>f&&(f=d[e].length+f-1),t.lineString([d[e][f],d[e][f+1]],g,a);case "MultiLineString":return 0>c&&(c=d.length+c),0>f&&(f=d[c].length+f-1),t.lineString([d[c][f],
d[c][f+1]],g,a);case "MultiPolygon":return 0>c&&(c=d.length+c),0>e&&(e=d[c].length+e),0>f&&(f=d[c][e].length-f-1),t.lineString([d[c][e][f],d[c][e][f+1]],g,a)}throw Error("geojson is invalid");};p.findPoint=function(b,a){a=a||{};if(!t.isObject(a))throw Error("options is invalid");var d=a.featureIndex||0,c=a.multiFeatureIndex||0,e=a.geometryIndex||0,f=a.coordIndex||0,g=a.properties;switch(b.type){case "FeatureCollection":0>d&&(d=b.features.length+d);g=g||b.features[d].properties;b=b.features[d].geometry;
break;case "Feature":g=g||b.properties;b=b.geometry;break;case "Point":case "MultiPoint":return null;case "LineString":case "Polygon":case "MultiLineString":case "MultiPolygon":break;default:throw Error("geojson is invalid");}if(null===b)return null;d=b.coordinates;switch(b.type){case "Point":return t.point(d,g,a);case "MultiPoint":return 0>c&&(c=d.length+c),t.point(d[c],g,a);case "LineString":return 0>f&&(f=d.length+f),t.point(d[f],g,a);case "Polygon":return 0>e&&(e=d.length+e),0>f&&(f=d[e].length+
f),t.point(d[e][f],g,a);case "MultiLineString":return 0>c&&(c=d.length+c),0>f&&(f=d[c].length+f),t.point(d[c][f],g,a);case "MultiPolygon":return 0>c&&(c=d.length+c),0>e&&(e=d[c].length+e),0>f&&(f=d[c][e].length-f),t.point(d[c][e][f],g,a)}throw Error("geojson is invalid");}},{"@turf/helpers":60}],62:[function(a,q,p){p="undefined"===typeof WeakMap?a("weak-map"):WeakMap;var n=a("gl-buffer"),k=a("gl-vao"),m=new p;q.exports=function(a){var b=m.get(a),g=b&&(b._triangleBuffer.handle||b._triangleBuffer.buffer);
g&&a.isBuffer(g)||(g=n(a,new Float32Array([-1,-1,-1,4,4,-1])),b=k(a,[{buffer:g,type:a.FLOAT,size:2}]),b._triangleBuffer=g,m.set(a,b));b.bind();a.drawArrays(a.TRIANGLES,0,3);b.unbind()}},{"gl-buffer":244,"gl-vao":329,"weak-map":550}],63:[function(a,q,p){q.exports=function(a){var k=0,m=0,h=0,b=0;return a.map(function(a){a=a.slice();var e=a[0],g=e.toUpperCase();if(e!=g)switch(a[0]=g,e){case "a":a[6]+=h;a[7]+=b;break;case "v":a[1]+=b;break;case "h":a[1]+=h;break;default:for(e=1;e<a.length;)a[e++]+=h,
a[e++]+=b}switch(g){case "Z":h=k;b=m;break;case "H":h=a[1];break;case "V":b=a[1];break;case "M":h=k=a[1];b=m=a[2];break;default:h=a[a.length-2],b=a[a.length-1]}return a})}},{}],64:[function(a,q,p){var n=a("pad-left");q.exports=function(a,m,h){m="number"===typeof m?m:1;h=h||": ";a=a.split(/\r?\n/);var b=String(a.length+m-1).length;return a.map(function(a,e){e+=m;return n(e,b-String(e).length)+h+a}).join("\n")}},{"pad-left":458}],65:[function(a,q,p){q.exports=function(a){var k=a.length;if(0===k)return[];
if(1===k)return[0];for(var h=a[0].length,b=[a[0]],g=[0],e=1;e<k;++e){b.push(a[e]);a:{var t=b;for(var l=h,f=Array(l+1),d=0;d<t.length;++d)f[d]=t[d];for(d=0;d<=t.length;++d){for(var c=t.length;c<=l;++c){for(var r=Array(l),u=0;u<l;++u)r[u]=Math.pow(c+1-d,u);f[c]=r}if(n.apply(void 0,f)){t=!0;break a}}t=!1}if(t){if(g.push(e),g.length===h+1)break}else b.pop()}return g};var n=a("robust-orientation")},{"robust-orientation":508}],66:[function(a,q,p){q.exports=function(a,h){return n(h).filter(function(b){for(var g=
Array(b.length),e=0;e<b.length;++e)g[e]=h[b[e]];return 1>k(g)*a})};var n=a("delaunay-triangulate"),k=a("circumradius")},{circumradius:116,"delaunay-triangulate":167}],67:[function(a,q,p){q.exports=function(a,h){return k(n(a,h))};var n=a("alpha-complex"),k=a("simplicial-complex-boundary")},{"alpha-complex":66,"simplicial-complex-boundary":515}],68:[function(a,q,p){q.exports=function(a,k){if(!a||null==a.length)throw Error("Argument should be an array");k=null==k?1:Math.floor(k);for(var m=Array(2*k),
h=0;h<k;h++){for(var b=-Infinity,g=Infinity,e=h,t=a.length;e<t;e+=k)a[e]>b&&(b=a[e]),a[e]<g&&(g=a[e]);m[h]=g;m[k+h]=b}return m}},{}],69:[function(a,q,p){q.exports=function(a,k){var m="number"===typeof a,h="number"===typeof k;m&&!h?(k=a,a=0):m||h||(k=a=0);a|=0;k=(k|0)-a;if(0>k)throw Error("array length must be positive");m=Array(k);for(h=0;h<k;h++,a++)m[h]=a;return m}},{}],70:[function(a,q,p){(function(n){function k(b,a){if(b===a)return 0;for(var c=b.length,d=a.length,e=0,f=Math.min(c,d);e<f;++e)if(b[e]!==
a[e]){c=b[e];d=a[e];break}return c<d?-1:d<c?1:0}function m(b){return n.Buffer&&"function"===typeof n.Buffer.isBuffer?n.Buffer.isBuffer(b):!(null==b||!b._isBuffer)}function h(b){return m(b)||"function"!==typeof n.ArrayBuffer?!1:"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(b):b?b instanceof DataView||b.buffer&&b.buffer instanceof ArrayBuffer?!0:!1:!1}function b(b){if(A.isFunction(b))return C?b.name:(b=b.toString().match(D))&&b[1]}function g(b,a){return"string"===typeof b?b.length<a?b:b.slice(0,
a):b}function e(a){if(C||!A.isFunction(a))return A.inspect(a);a=b(a);return"[Function"+(a?": "+a:"")+"]"}function t(b,a,c,d,e){throw new B.AssertionError({message:c,actual:b,expected:a,operator:d,stackStartFunction:e});}function l(b,a){b||t(b,!0,a,"\x3d\x3d",B.ok)}function f(b,a,d,e){if(b===a)return!0;if(m(b)&&m(a))return 0===k(b,a);if(A.isDate(b)&&A.isDate(a))return b.getTime()===a.getTime();if(A.isRegExp(b)&&A.isRegExp(a))return b.source===a.source&&b.global===a.global&&b.multiline===a.multiline&&
b.lastIndex===a.lastIndex&&b.ignoreCase===a.ignoreCase;if(null!==b&&"object"===typeof b||null!==a&&"object"===typeof a){if(!h(b)||!h(a)||Object.prototype.toString.call(b)!==Object.prototype.toString.call(a)||b instanceof Float32Array||b instanceof Float64Array){if(m(b)!==m(a))return!1;e=e||{actual:[],expected:[]};var f=e.actual.indexOf(b);if(-1!==f&&f===e.expected.indexOf(a))return!0;e.actual.push(b);e.expected.push(a);return c(b,a,d,e)}return 0===k(new Uint8Array(b.buffer),new Uint8Array(a.buffer))}return d?
b===a:b==a}function d(b){return"[object Arguments]"==Object.prototype.toString.call(b)}function c(b,a,c,e){if(null===b||void 0===b||null===a||void 0===a)return!1;if(A.isPrimitive(b)||A.isPrimitive(a))return b===a;if(c&&Object.getPrototypeOf(b)!==Object.getPrototypeOf(a))return!1;var g=d(b),h=d(a);if(g&&!h||!g&&h)return!1;if(g)return b=x.call(b),a=x.call(a),f(b,a,c);g=G(b);var r=G(a);if(g.length!==r.length)return!1;g.sort();r.sort();for(h=g.length-1;0<=h;h--)if(g[h]!==r[h])return!1;for(h=g.length-
1;0<=h;h--)if(r=g[h],!f(b[r],a[r],c,e))return!1;return!0}function r(b,a,c){f(b,a,!0)&&t(b,a,c,"notDeepStrictEqual",r)}function u(b,a){if(!b||!a)return!1;if("[object RegExp]"==Object.prototype.toString.call(a))return a.test(b);try{if(b instanceof a)return!0}catch(L){}return Error.isPrototypeOf(a)?!1:!0===a.call({},b)}function v(b,a,c,d){if("function"!==typeof a)throw new TypeError('"block" argument must be a function');"string"===typeof c&&(d=c,c=null);try{a()}catch(I){var e=I}a=e;d=(c&&c.name?" ("+
c.name+").":".")+(d?" "+d:".");b&&!a&&t(a,c,"Missing expected exception"+d);e="string"===typeof d;var f=!b&&A.isError(a),g=!b&&a&&!c;(f&&e&&u(a,c)||g)&&t(a,c,"Got unwanted exception"+d);if(b&&a&&c&&!u(a,c)||!b&&a)throw a;}function w(b,a){b||t(b,!0,a,"\x3d\x3d",w)}var y=a("object-assign"),A=a("util/"),z=Object.prototype.hasOwnProperty,x=Array.prototype.slice,C=function(){return"foo"===function(){}.name}(),B=q.exports=l,D=/\s*function\s+([^\(\s]*)\s*/;B.AssertionError=function(a){this.name="AssertionError";
this.actual=a.actual;this.expected=a.expected;this.operator=a.operator;a.message?(this.message=a.message,this.generatedMessage=!1):(this.message=g(e(this.actual),128)+" "+this.operator+" "+g(e(this.expected),128),this.generatedMessage=!0);var c=a.stackStartFunction||t;Error.captureStackTrace?Error.captureStackTrace(this,c):(a=Error(),a.stack&&(a=a.stack,c=b(c),c=a.indexOf("\n"+c),0<=c&&(c=a.indexOf("\n",c+1),a=a.substring(c+1)),this.stack=a))};A.inherits(B.AssertionError,Error);B.fail=t;B.ok=l;B.equal=
function(b,a,c){b!=a&&t(b,a,c,"\x3d\x3d",B.equal)};B.notEqual=function(b,a,c){b==a&&t(b,a,c,"!\x3d",B.notEqual)};B.deepEqual=function(b,a,c){f(b,a,!1)||t(b,a,c,"deepEqual",B.deepEqual)};B.deepStrictEqual=function(b,a,c){f(b,a,!0)||t(b,a,c,"deepStrictEqual",B.deepStrictEqual)};B.notDeepEqual=function(b,a,c){f(b,a,!1)&&t(b,a,c,"notDeepEqual",B.notDeepEqual)};B.notDeepStrictEqual=r;B.strictEqual=function(b,a,c){b!==a&&t(b,a,c,"\x3d\x3d\x3d",B.strictEqual)};B.notStrictEqual=function(b,a,c){b===a&&t(b,
a,c,"!\x3d\x3d",B.notStrictEqual)};B.throws=function(b,a,c){v(!0,b,a,c)};B.doesNotThrow=function(b,a,c){v(!1,b,a,c)};B.ifError=function(b){if(b)throw b;};B.strict=y(w,B,{equal:B.strictEqual,deepEqual:B.deepStrictEqual,notEqual:B.notStrictEqual,notDeepEqual:B.notDeepStrictEqual});B.strict.strict=B.strict;var G=Object.keys||function(b){var a=[],c;for(c in b)z.call(b,c)&&a.push(c);return a}}).call(this,"undefined"!==typeof pa?pa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},
{"object-assign":455,"util/":73}],71:[function(a,q,p){q.exports="function"===typeof Object.create?function(a,k){a.super_=k;a.prototype=Object.create(k.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,k){a.super_=k;var m=function(){};m.prototype=k.prototype;a.prototype=new m;a.prototype.constructor=a}},{}],72:[function(a,q,p){q.exports=function(a){return a&&"object"===typeof a&&"function"===typeof a.copy&&"function"===typeof a.fill&&"function"===typeof a.readUInt8}},
{}],73:[function(a,q,p){(function(n,k){function m(a,c){var d={seen:[],stylize:b};3<=arguments.length&&(d.depth=arguments[2]);4<=arguments.length&&(d.colors=arguments[3]);u(c)?d.showHidden=c:c&&p._extend(d,c);y(d.showHidden)&&(d.showHidden=!1);y(d.depth)&&(d.depth=2);y(d.colors)&&(d.colors=!1);y(d.customInspect)&&(d.customInspect=!0);d.colors&&(d.stylize=h);return e(d,a,d.depth)}function h(b,a){return(a=m.styles[a])?"["+m.colors[a][0]+"m"+b+"["+m.colors[a][1]+"m":b}function b(b,a){return b}function g(b){var a=
{};b.forEach(function(b,c){a[b]=!0});return a}function e(b,a,h){if(b.customInspect&&a&&B(a.inspect)&&a.inspect!==p.inspect&&(!a.constructor||a.constructor.prototype!==a)){var u=a.inspect(h,b);w(u)||(u=e(b,u,h));return u}if(u=t(b,a))return u;var k=Object.keys(a),m=g(k);b.showHidden&&(k=Object.getOwnPropertyNames(a));if(C(a)&&(0<=k.indexOf("message")||0<=k.indexOf("description")))return l(a);if(0===k.length){if(B(a))return b.stylize("[Function"+(a.name?": "+a.name:"")+"]","special");if(A(a))return b.stylize(RegExp.prototype.toString.call(a),
"regexp");if(x(a))return b.stylize(Date.prototype.toString.call(a),"date");if(C(a))return l(a)}u="";var n=!1,v=["{","}"];r(a)&&(n=!0,v=["[","]"]);B(a)&&(u=" [Function"+(a.name?": "+a.name:"")+"]");A(a)&&(u=" "+RegExp.prototype.toString.call(a));x(a)&&(u=" "+Date.prototype.toUTCString.call(a));C(a)&&(u=" "+l(a));if(0===k.length&&(!n||0==a.length))return v[0]+u+v[1];if(0>h)return A(a)?b.stylize(RegExp.prototype.toString.call(a),"regexp"):b.stylize("[Object]","special");b.seen.push(a);k=n?f(b,a,h,m,
k):k.map(function(c){return d(b,a,h,m,c,n)});b.seen.pop();return c(k,u,v)}function t(b,a){if(y(a))return b.stylize("undefined","undefined");if(w(a))return a="'"+JSON.stringify(a).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",b.stylize(a,"string");if(v(a))return b.stylize(""+a,"number");if(u(a))return b.stylize(""+a,"boolean");if(null===a)return b.stylize("null","null")}function l(b){return"["+Error.prototype.toString.call(b)+"]"}function f(b,a,c,e,f){for(var g=[],h=0,r=a.length;h<
r;++h)Object.prototype.hasOwnProperty.call(a,String(h))?g.push(d(b,a,c,e,String(h),!0)):g.push("");f.forEach(function(f){f.match(/^\d+$/)||g.push(d(b,a,c,e,f,!0))});return g}function d(b,a,c,d,f,g){var h,r;a=Object.getOwnPropertyDescriptor(a,f)||{value:a[f]};a.get?r=a.set?b.stylize("[Getter/Setter]","special"):b.stylize("[Getter]","special"):a.set&&(r=b.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(d,f)||(h="["+f+"]");r||(0>b.seen.indexOf(a.value)?(r=null===c?e(b,a.value,null):
e(b,a.value,c-1),-1<r.indexOf("\n")&&(r=g?r.split("\n").map(function(b){return"  "+b}).join("\n").substr(2):"\n"+r.split("\n").map(function(b){return"   "+b}).join("\n"))):r=b.stylize("[Circular]","special"));if(y(h)){if(g&&f.match(/^\d+$/))return r;h=JSON.stringify(""+f);h.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(h=h.substr(1,h.length-2),h=b.stylize(h,"name")):(h=h.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),h=b.stylize(h,"string"))}return h+": "+r}function c(b,a,c){var d=0;return 60<
b.reduce(function(b,a){d++;0<=a.indexOf("\n")&&d++;return b+a.replace(/\u001b\[\d\d?m/g,"").length+1},0)?c[0]+(""===a?"":a+"\n ")+" "+b.join(",\n  ")+" "+c[1]:c[0]+a+" "+b.join(", ")+" "+c[1]}function r(b){return Array.isArray(b)}function u(b){return"boolean"===typeof b}function v(b){return"number"===typeof b}function w(b){return"string"===typeof b}function y(b){return void 0===b}function A(b){return z(b)&&"[object RegExp]"===Object.prototype.toString.call(b)}function z(b){return"object"===typeof b&&
null!==b}function x(b){return z(b)&&"[object Date]"===Object.prototype.toString.call(b)}function C(b){return z(b)&&("[object Error]"===Object.prototype.toString.call(b)||b instanceof Error)}function B(b){return"function"===typeof b}function D(b){return 10>b?"0"+b.toString(10):b.toString(10)}function G(){var b=new Date,a=[D(b.getHours()),D(b.getMinutes()),D(b.getSeconds())].join(":");return[b.getDate(),J[b.getMonth()],a].join(" ")}var E=/%[sdj%]/g;p.format=function(b){if(!w(b)){for(var a=[],c=0;c<
arguments.length;c++)a.push(m(arguments[c]));return a.join(" ")}c=1;var d=arguments,e=d.length;a=String(b).replace(E,function(b){if("%%"===b)return"%";if(c>=e)return b;switch(b){case "%s":return String(d[c++]);case "%d":return Number(d[c++]);case "%j":try{return JSON.stringify(d[c++])}catch(Q){return"[Circular]"}default:return b}});for(var f=d[c];c<e;f=d[++c])a=null!==f&&z(f)?a+(" "+m(f)):a+(" "+f);return a};p.deprecate=function(b,a){if(y(k.process))return function(){return p.deprecate(b,a).apply(this,
arguments)};if(!0===n.noDeprecation)return b;var c=!1;return function(){if(!c){if(n.throwDeprecation)throw Error(a);n.traceDeprecation?console.trace(a):console.error(a);c=!0}return b.apply(this,arguments)}};var q={},L;p.debuglog=function(b){y(L)&&(L=n.env.NODE_DEBUG||"");b=b.toUpperCase();if(!q[b])if((new RegExp("\\b"+b+"\\b","i")).test(L)){var a=n.pid;q[b]=function(){var c=p.format.apply(p,arguments);console.error("%s %d: %s",b,a,c)}}else q[b]=function(){};return q[b]};p.inspect=m;m.colors={bold:[1,
22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};m.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};p.isArray=r;p.isBoolean=u;p.isNull=function(b){return null===b};p.isNullOrUndefined=function(b){return null==b};p.isNumber=v;p.isString=w;p.isSymbol=function(b){return"symbol"===typeof b};p.isUndefined=
y;p.isRegExp=A;p.isObject=z;p.isDate=x;p.isError=C;p.isFunction=B;p.isPrimitive=function(b){return null===b||"boolean"===typeof b||"number"===typeof b||"string"===typeof b||"symbol"===typeof b||"undefined"===typeof b};p.isBuffer=a("./support/isBuffer");var J="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");p.log=function(){console.log("%s - %s",G(),p.format.apply(p,arguments))};p.inherits=a("inherits");p._extend=function(b,a){if(!a||!z(a))return b;for(var c=Object.keys(a),d=c.length;d--;)b[c[d]]=
a[c[d]];return b}}).call(this,a("_process"),"undefined"!==typeof pa?pa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./support/isBuffer":72,_process:483,inherits:71}],74:[function(a,q,p){q.exports=function(a){return atob(a)}},{}],75:[function(a,q,p){function n(a){for(var h=0,b=0;b<a.length;++b)h+=a[b];return h}q.exports=function(a,h){for(var b=h.length,g=Array(b+1),e=0;e<b;++e){for(var t=Array(b+1),l=0;l<=b;++l)t[l]=a[l][e];g[e]=t}g[b]=Array(b+1);for(e=0;e<=b;++e)g[b][e]=
1;a=Array(b+1);for(e=0;e<b;++e)a[e]=h[e];a[b]=1;h=k(g,a);g=n(h[b+1]);0===g&&(g=1);a=Array(b+1);for(e=0;e<=b;++e)a[e]=n(h[e])/g;return a};var k=a("robust-linear-solve")},{"robust-linear-solve":507}],76:[function(a,q,p){function n(b){var a=b.length;if(0<a%4)throw Error("Invalid string. Length must be a multiple of 4");b=b.indexOf("\x3d");-1===b&&(b=a);return[b,b===a?0:4-b%4]}function k(b,a,h){for(var e=[],f=a;f<h;f+=3)a=(b[f]<<16&16711680)+(b[f+1]<<8&65280)+(b[f+2]&255),e.push(m[a>>18&63]+m[a>>12&63]+
m[a>>6&63]+m[a&63]);return e.join("")}p.byteLength=function(b){b=n(b);var a=b[1];return 3*(b[0]+a)/4-a};p.toByteArray=function(a){var e=n(a);var g=e[0];e=e[1];var l=new b(3*(g+e)/4-e),f=0,d=0<e?g-4:g,c;for(c=0;c<d;c+=4)g=h[a.charCodeAt(c)]<<18|h[a.charCodeAt(c+1)]<<12|h[a.charCodeAt(c+2)]<<6|h[a.charCodeAt(c+3)],l[f++]=g>>16&255,l[f++]=g>>8&255,l[f++]=g&255;2===e&&(g=h[a.charCodeAt(c)]<<2|h[a.charCodeAt(c+1)]>>4,l[f++]=g&255);1===e&&(g=h[a.charCodeAt(c)]<<10|h[a.charCodeAt(c+1)]<<4|h[a.charCodeAt(c+
2)]>>2,l[f++]=g>>8&255,l[f++]=g&255);return l};p.fromByteArray=function(b){for(var a=b.length,g=a%3,h=[],f=0,d=a-g;f<d;f+=16383)h.push(k(b,f,f+16383>d?d:f+16383));1===g?(b=b[a-1],h.push(m[b>>2]+m[b<<4&63]+"\x3d\x3d")):2===g&&(b=(b[a-2]<<8)+b[a-1],h.push(m[b>>10]+m[b>>4&63]+m[b<<2&63]+"\x3d"));return h.join("")};var m=[],h=[],b="undefined"!==typeof Uint8Array?Uint8Array:Array;for(a=0;64>a;++a)m[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a],h["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(a)]=
a;h[45]=62;h[95]=63},{}],77:[function(a,q,p){var n=a("./lib/rationalize");q.exports=function(a,m){return n(a[0].mul(m[1]).add(m[0].mul(a[1])),a[1].mul(m[1]))}},{"./lib/rationalize":87}],78:[function(a,q,p){q.exports=function(a,k){return a[0].mul(k[1]).cmp(k[0].mul(a[1]))}},{}],79:[function(a,q,p){var n=a("./lib/rationalize");q.exports=function(a,m){return n(a[0].mul(m[1]),a[1].mul(m[0]))}},{"./lib/rationalize":87}],80:[function(a,q,p){function n(a,l){if(k(a))return l?e(a,n(l)):[a[0].clone(),a[1].clone()];
var f=0;if(m(a))a=a.clone();else if("string"===typeof a)a=b(a);else{if(0===a)return[h(0),h(1)];if(a!==Math.floor(a))for(;a!==Math.floor(a);)a*=Math.pow(2,256),f-=256;a=h(a)}if(k(l))a.mul(l[1]),l=l[0].clone();else if(m(l))l=l.clone();else if("string"===typeof l)l=b(l);else if(l){if(l!==Math.floor(l))for(;l!==Math.floor(l);)l*=Math.pow(2,256),f+=256;l=h(l)}else l=h(1);0<f?a=a.ushln(f):0>f&&(l=l.ushln(-f));return g(a,l)}var k=a("./is-rat"),m=a("./lib/is-bn"),h=a("./lib/num-to-bn"),b=a("./lib/str-to-bn"),
g=a("./lib/rationalize"),e=a("./div");q.exports=n},{"./div":79,"./is-rat":81,"./lib/is-bn":85,"./lib/num-to-bn":86,"./lib/rationalize":87,"./lib/str-to-bn":88}],81:[function(a,q,p){var n=a("./lib/is-bn");q.exports=function(a){return Array.isArray(a)&&2===a.length&&n(a[0])&&n(a[1])}},{"./lib/is-bn":85}],82:[function(a,q,p){var n=a("bn.js");q.exports=function(a){return a.cmp(new n(0))}},{"bn.js":96}],83:[function(a,q,p){var n=a("./bn-sign");q.exports=function(a){var k=a.length,h=a.words,b=0;if(1===
k)b=h[0];else if(2===k)b=h[0]+67108864*h[1];else for(var g=0;g<k;g++)b+=h[g]*Math.pow(67108864,g);return n(a)*b}},{"./bn-sign":82}],84:[function(a,q,p){var n=a("double-bits"),k=a("bit-twiddle").countTrailingZeros;q.exports=function(a){var h=k(n.lo(a));if(32>h)return h;a=k(n.hi(a));return 20<a?52:a+32}},{"bit-twiddle":94,"double-bits":169}],85:[function(a,q,p){a("bn.js");q.exports=function(a){return a&&"object"===typeof a&&!!a.words}},{"bn.js":96}],86:[function(a,q,p){var n=a("bn.js"),k=a("double-bits");
q.exports=function(a){var h=k.exponent(a);return 52>h?new n(a):(new n(a*Math.pow(2,52-h))).ushln(h-52)}},{"bn.js":96,"double-bits":169}],87:[function(a,q,p){var n=a("./num-to-bn"),k=a("./bn-sign");q.exports=function(a,h){var b=k(a),g=k(h);if(0===b)return[n(0),n(1)];if(0===g)return[n(0),n(0)];0>g&&(a=a.neg(),h=h.neg());b=a.gcd(h);return b.cmpn(1)?[a.div(b),h.div(b)]:[a,h]}},{"./bn-sign":82,"./num-to-bn":86}],88:[function(a,q,p){var n=a("bn.js");q.exports=function(a){return new n(a)}},{"bn.js":96}],
89:[function(a,q,p){var n=a("./lib/rationalize");q.exports=function(a,m){return n(a[0].mul(m[0]),a[1].mul(m[1]))}},{"./lib/rationalize":87}],90:[function(a,q,p){var n=a("./lib/bn-sign");q.exports=function(a){return n(a[0])*n(a[1])}},{"./lib/bn-sign":82}],91:[function(a,q,p){var n=a("./lib/rationalize");q.exports=function(a,m){return n(a[0].mul(m[1]).sub(a[1].mul(m[0])),a[1].mul(m[1]))}},{"./lib/rationalize":87}],92:[function(a,q,p){var n=a("./lib/bn-to-num"),k=a("./lib/ctz");q.exports=function(a){var h=
a[0];a=a[1];if(0===h.cmpn(0))return 0;var b=h.abs().divmod(a.abs()),g=n(b.div);b=b.mod;h=h.negative!==a.negative?-1:1;if(0===b.cmpn(0))return h*g;if(g){var e=k(g)+4;a=n(b.ushln(e).divRound(a));return h*(g+a*Math.pow(2,-e))}g=a.bitLength()-b.bitLength()+53;a=n(b.ushln(g).divRound(a));if(1023>g)return h*a*Math.pow(2,-g);a*=Math.pow(2,-1023);return h*a*Math.pow(2,1023-g)}},{"./lib/bn-to-num":83,"./lib/ctz":84}],93:[function(a,q,p){function n(a,h,b,g,e,k){a=["function ",a,"(a,l,h,",g.join(","),"){",k?
"":"var i\x3d",b?"l-1":"h+1",";while(l\x3c\x3dh){var m\x3d(l+h)\x3e\x3e\x3e1,x\x3da",e?".get(m)":"[m]"];k?0>h.indexOf("c")?a.push(";if(x\x3d\x3d\x3dy){return m}else if(x\x3c\x3dy){"):a.push(";var p\x3dc(x,y);if(p\x3d\x3d\x3d0){return m}else if(p\x3c\x3d0){"):a.push(";if(",h,"){i\x3dm;");b?a.push("l\x3dm+1}else{h\x3dm-1}"):a.push("h\x3dm-1}else{l\x3dm+1}");a.push("}");k?a.push("return -1};"):a.push("return i};");return a.join("")}function k(a,h,b,g){return(new Function([n("A","x"+a+"y",h,["y"],!1,
g),n("B","x"+a+"y",h,["y"],!0,g),n("P","c(x,y)"+a+"0",h,["y","c"],!1,g),n("Q","c(x,y)"+a+"0",h,["y","c"],!0,g),"function dispatchBsearch",b,"(a,y,c,l,h){if(a.shape){if(typeof(c)\x3d\x3d\x3d'function'){return Q(a,(l\x3d\x3d\x3dundefined)?0:l|0,(h\x3d\x3d\x3dundefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c\x3d\x3d\x3dundefined)?0:c|0,(l\x3d\x3d\x3dundefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)\x3d\x3d\x3d'function'){return P(a,(l\x3d\x3d\x3dundefined)?0:l|0,(h\x3d\x3d\x3dundefined)?a.length-1:h|0,y,c)}else{return A(a,(c\x3d\x3d\x3dundefined)?0:c|0,(l\x3d\x3d\x3dundefined)?a.length-1:l|0,y)}}}return dispatchBsearch",
b].join("")))()}q.exports={ge:k("\x3e\x3d",!1,"GE"),gt:k("\x3e",!1,"GT"),lt:k("\x3c",!0,"LT"),le:k("\x3c\x3d",!0,"LE"),eq:k("-",!0,"EQ",!0)}},{}],94:[function(a,q,p){function n(a){var h=32;(a&=-a)&&h--;a&65535&&(h-=16);a&16711935&&(h-=8);a&252645135&&(h-=4);a&858993459&&(h-=2);a&1431655765&&--h;return h}"use restrict";p.INT_BITS=32;p.INT_MAX=2147483647;p.INT_MIN=-2147483648;p.sign=function(a){return(0<a)-(0>a)};p.abs=function(a){var h=a>>31;return(a^h)-h};p.min=function(a,h){return h^(a^h)&-(a<h)};
p.max=function(a,h){return a^(a^h)&-(a<h)};p.isPow2=function(a){return!(a&a-1)&&!!a};p.log2=function(a){var h=(65535<a)<<4;a>>>=h;var b=(255<a)<<3;a>>>=b;h|=b;b=(15<a)<<2;a>>>=b;h|=b;b=(3<a)<<1;return h|b|a>>>b>>1};p.log10=function(a){return 1E9<=a?9:1E8<=a?8:1E7<=a?7:1E6<=a?6:1E5<=a?5:1E4<=a?4:1E3<=a?3:100<=a?2:10<=a?1:0};p.popCount=function(a){a-=a>>>1&1431655765;a=(a&858993459)+(a>>>2&858993459);return 16843009*(a+(a>>>4)&252645135)>>>24};p.countTrailingZeros=n;p.nextPow2=function(a){a+=0===a;
--a;a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;return(a|a>>>16)+1};p.prevPow2=function(a){a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;a|=a>>>16;return a-(a>>>1)};p.parity=function(a){a^=a>>>16;a^=a>>>8;return 27030>>>((a^a>>>4)&15)&1};var k=Array(256);(function(a){for(var h=0;256>h;++h){var b=h,g=h,e=7;for(b>>>=1;b;b>>>=1)g<<=1,g|=b&1,--e;a[h]=g<<e&255}})(k);p.reverse=function(a){return k[a&255]<<24|k[a>>>8&255]<<16|k[a>>>16&255]<<8|k[a>>>24&255]};p.interleave2=function(a,h){a&=65535;a=(a|a<<8)&16711935;a=(a|a<<
4)&252645135;a=(a|a<<2)&858993459;h&=65535;h=(h|h<<8)&16711935;h=(h|h<<4)&252645135;h=(h|h<<2)&858993459;return(a|a<<1)&1431655765|((h|h<<1)&1431655765)<<1};p.deinterleave2=function(a,h){a=a>>>h&1431655765;a=(a|a>>>1)&858993459;a=(a|a>>>2)&252645135;a=(a|a>>>4)&16711935;return((a|a>>>16)&65535)<<16>>16};p.interleave3=function(a,h,b){a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;h&=1023;h=(h|h<<16)&4278190335;h=(h|h<<8)&251719695;h=(h|h<<4)&3272356035;b&=1023;b=(b|b<<16)&
4278190335;b=(b|b<<8)&251719695;b=(b|b<<4)&3272356035;return(a|a<<2)&1227133513|((h|h<<2)&1227133513)<<1|((b|b<<2)&1227133513)<<2};p.deinterleave3=function(a,h){a=a>>>h&1227133513;a=(a|a>>>2)&3272356035;a=(a|a>>>4)&251719695;a=(a|a>>>8)&4278190335;return((a|a>>>16)&1023)<<22>>22};p.nextCombination=function(a){var h=a|a-1;return h+1|(~h&-~h)-1>>>n(a)+1}},{}],95:[function(a,q,p){function n(b,a,e,h,l,f,d){for(var c=0;c<a;c++){for(var g=0;g<e;g++)h[g]=b[g*a+c];k(h,l,f,d,e);for(g=0;g<e;g++)b[g*a+c]=l[g]}for(g=
0;g<e;g++){for(c=0;c<a;c++)h[c]=b[g*a+c];k(h,l,f,d,a);for(c=0;c<a;c++)b[g*a+c]=Math.sqrt(l[c])}}function k(b,a,e,k,l){e[0]=0;k[0]=-h;k[1]=+h;for(var f=1,d=0;f<l;f++){for(var c=(b[f]+f*f-(b[e[d]]+e[d]*e[d]))/(2*f-2*e[d]);c<=k[d];)d--,c=(b[f]+f*f-(b[e[d]]+e[d]*e[d]))/(2*f-2*e[d]);d++;e[d]=f;k[d]=c;k[d+1]=+h}for(d=f=0;f<l;f++){for(;k[d+1]<f;)d++;a[f]=(f-e[d])*(f-e[d])+b[e[d]]}}var m=a("clamp");q.exports=function(b,a){a||(a={});var e=null==a.cutoff?.25:a.cutoff,g=null==a.radius?8:a.radius,l=a.channel||
0;if(ArrayBuffer.isView(b)||Array.isArray(b)){if(!a.width||!a.height)throw Error("For raw data width and height should be provided by options");var f=a.width;var d=a.height;var c=b;var r=a.stride?a.stride:Math.floor(b.length/f/d)}else window.HTMLCanvasElement&&b instanceof window.HTMLCanvasElement?(d=b,c=d.getContext("2d"),f=d.width,d=d.height,c=c.getImageData(0,0,f,d),c=c.data,r=4):window.CanvasRenderingContext2D&&b instanceof window.CanvasRenderingContext2D?(d=b.canvas,f=d.width,d=d.height,c=b.getImageData(0,
0,f,d),c=c.data,r=4):window.ImageData&&b instanceof window.ImageData&&(f=b.width,d=b.height,c=b.data,r=4);var u=Math.max(f,d);if(window.Uint8ClampedArray&&c instanceof window.Uint8ClampedArray||window.Uint8Array&&c instanceof window.Uint8Array){var k=c;c=Array(f*d);b=0;for(a=k.length;b<a;b++)c[b]=k[b*r+l]/255}else if(1!==r)throw Error("Raw data can have only 1 value per pixel");l=Array(f*d);r=Array(f*d);k=Array(u);var w=Array(u),y=Array(u+1);u=Array(u);b=0;for(a=f*d;b<a;b++){var A=c[b];l[b]=1===A?
0:0===A?h:Math.pow(Math.max(0,.5-A),2);r[b]=1===A?h:0===A?0:Math.pow(Math.max(0,A-.5),2)}n(l,f,d,k,w,u,y);n(r,f,d,k,w,u,y);c=window.Float32Array?new Float32Array(f*d):Array(f*d);b=0;for(a=f*d;b<a;b++)c[b]=m(1-((l[b]-r[b])/g+e),0,1);return c};var h=1E20},{clamp:117}],96:[function(a,q,p){(function(n,k){function m(b,a){if(!b)throw Error(a||"Assertion failed");}function h(b,a){b.super_=a;var c=function(){};c.prototype=a.prototype;b.prototype=new c;b.prototype.constructor=b}function b(a,c,d){if(b.isBN(a))return a;
this.negative=0;this.words=null;this.length=0;this.red=null;if(null!==a){if("le"===c||"be"===c)d=c,c=10;this._init(a||0,c||10,d||"be")}}function g(b,a,c){var d=0;for(c=Math.min(b.length,c);a<c;a++){var e=b.charCodeAt(a)-48;d<<=4;d=49<=e&&54>=e?d|e-49+10:17<=e&&22>=e?d|e-17+10:d|e&15}return d}function e(b,a,c,d){var e=0;for(c=Math.min(b.length,c);a<c;a++){var f=b.charCodeAt(a)-48;e*=d;e=49<=f?e+(f-49+10):17<=f?e+(f-17+10):e+f}return e}function t(b,a,c){c.negative=a.negative^b.negative;var d=b.length+
a.length|0;c.length=d;d=d-1|0;var e=b.words[0]|0,f=a.words[0]|0;e*=f;var g=e/67108864|0;c.words[0]=e&67108863;for(var h=1;h<d;h++){var r=g>>>26,l=g&67108863;g=Math.min(h,a.length-1);for(var u=Math.max(0,h-b.length+1);u<=g;u++)e=b.words[h-u|0]|0,f=a.words[u]|0,e=e*f+l,r+=e/67108864|0,l=e&67108863;c.words[h]=l|0;g=r|0}0!==g?c.words[h]=g|0:c.length--;return c.strip()}function l(b,a){this.x=b;this.y=a}function f(a,c){this.name=a;this.p=new b(c,16);this.n=this.p.bitLength();this.k=(new b(1)).iushln(this.n).isub(this.p);
this.tmp=this._tmp()}function d(){f.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function c(){f.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function r(){f.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function u(){f.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function v(a){"string"===typeof a?(a=b._prime(a),this.m=a.p,this.prime=a):(m(a.gtn(1),
"modulus must be greater than 1"),this.m=a,this.prime=null)}function w(a){v.call(this,a);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new b(1)).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}"object"===typeof n?n.exports=b:k.BN=b;b.BN=b;b.wordSize=26;try{var y=a("buffer").Buffer}catch(D){}b.isBN=function(a){return a instanceof
b?!0:null!==a&&"object"===typeof a&&a.constructor.wordSize===b.wordSize&&Array.isArray(a.words)};b.max=function(b,a){return 0<b.cmp(a)?b:a};b.min=function(b,a){return 0>b.cmp(a)?b:a};b.prototype._init=function(b,a,c){if("number"===typeof b)return this._initNumber(b,a,c);if("object"===typeof b)return this._initArray(b,a,c);"hex"===a&&(a=16);m(a===(a|0)&&2<=a&&36>=a);b=b.toString().replace(/\s+/g,"");var d=0;"-"===b[0]&&d++;16===a?this._parseHex(b,d):this._parseBase(b,a,d);"-"===b[0]&&(this.negative=
1);this.strip();"le"===c&&this._initArray(this.toArray(),a,c)};b.prototype._initNumber=function(b,a,c){0>b&&(this.negative=1,b=-b);67108864>b?(this.words=[b&67108863],this.length=1):4503599627370496>b?(this.words=[b&67108863,b/67108864&67108863],this.length=2):(m(9007199254740992>b),this.words=[b&67108863,b/67108864&67108863,1],this.length=3);"le"===c&&this._initArray(this.toArray(),a,c)};b.prototype._initArray=function(b,a,c){m("number"===typeof b.length);if(0>=b.length)return this.words=[0],this.length=
1,this;this.length=Math.ceil(b.length/3);this.words=Array(this.length);for(a=0;a<this.length;a++)this.words[a]=0;var d=0;if("be"===c)for(a=b.length-1,c=0;0<=a;a-=3){var e=b[a]|b[a-1]<<8|b[a-2]<<16;this.words[c]|=e<<d&67108863;this.words[c+1]=e>>>26-d&67108863;d+=24;26<=d&&(d-=26,c++)}else if("le"===c)for(c=a=0;a<b.length;a+=3)e=b[a]|b[a+1]<<8|b[a+2]<<16,this.words[c]|=e<<d&67108863,this.words[c+1]=e>>>26-d&67108863,d+=24,26<=d&&(d-=26,c++);return this.strip()};b.prototype._parseHex=function(b,a){this.length=
Math.ceil((b.length-a)/6);this.words=Array(this.length);for(var c=0;c<this.length;c++)this.words[c]=0;var d,e=0;c=b.length-6;for(d=0;c>=a;c-=6){var f=g(b,c,c+6);this.words[d]|=f<<e&67108863;this.words[d+1]|=f>>>26-e&4194303;e+=24;26<=e&&(e-=26,d++)}c+6!==a&&(f=g(b,a,c+6),this.words[d]|=f<<e&67108863,this.words[d+1]|=f>>>26-e&4194303);this.strip()};b.prototype._parseBase=function(b,a,c){this.words=[0];this.length=1;for(var d=0,f=1;67108863>=f;f*=a)d++;d--;f=f/a|0;var g=b.length-c,h=g%d;g=Math.min(g,
g-h)+c;for(var r=c;r<g;r+=d)c=e(b,r,r+d,a),this.imuln(f),67108864>this.words[0]+c?this.words[0]+=c:this._iaddn(c);if(0!==h){d=1;c=e(b,r,b.length,a);for(r=0;r<h;r++)d*=a;this.imuln(d);67108864>this.words[0]+c?this.words[0]+=c:this._iaddn(c)}};b.prototype.copy=function(b){b.words=Array(this.length);for(var a=0;a<this.length;a++)b.words[a]=this.words[a];b.length=this.length;b.negative=this.negative;b.red=this.red};b.prototype.clone=function(){var a=new b(null);this.copy(a);return a};b.prototype._expand=
function(b){for(;this.length<b;)this.words[this.length++]=0;return this};b.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};b.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.negative=0);return this};b.prototype.inspect=function(){return(this.red?"\x3cBN-R: ":"\x3cBN: ")+this.toString(16)+"\x3e"};var A=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
z=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],x=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];b.prototype.toString=function(b,a){b=b||10;a=a|0||1;if(16===b||"hex"===b){var c="";for(var d=b=0,e=0;e<this.length;e++){var f=
this.words[e],g=((f<<b|d)&16777215).toString(16);d=f>>>24-b&16777215;c=0!==d||e!==this.length-1?A[6-g.length]+g+c:g+c;b+=2;26<=b&&(b-=26,e--)}for(0!==d&&(c=d.toString(16)+c);0!==c.length%a;)c="0"+c;0!==this.negative&&(c="-"+c);return c}if(b===(b|0)&&2<=b&&36>=b){d=z[b];e=x[b];c="";f=this.clone();for(f.negative=0;!f.isZero();)g=f.modn(e).toString(b),f=f.idivn(e),c=f.isZero()?g+c:A[d-g.length]+g+c;for(this.isZero()&&(c="0"+c);0!==c.length%a;)c="0"+c;0!==this.negative&&(c="-"+c);return c}m(!1,"Base should be between 2 and 36")};
b.prototype.toNumber=function(){var b=this.words[0];2===this.length?b+=67108864*this.words[1]:3===this.length&&1===this.words[2]?b+=4503599627370496+67108864*this.words[1]:2<this.length&&m(!1,"Number can only safely store up to 53 bits");return 0!==this.negative?-b:b};b.prototype.toJSON=function(){return this.toString(16)};b.prototype.toBuffer=function(b,a){m("undefined"!==typeof y);return this.toArrayLike(y,b,a)};b.prototype.toArray=function(b,a){return this.toArrayLike(Array,b,a)};b.prototype.toArrayLike=
function(b,a,c){var d=this.byteLength();c=c||Math.max(1,d);m(d<=c,"byte array longer than desired length");m(0<c,"Requested array length \x3c\x3d 0");this.strip();var e="le"===a;b=new b(c);a=this.clone();if(e){for(e=0;!a.isZero();e++)d=a.andln(255),a.iushrn(8),b[e]=d;for(;e<c;e++)b[e]=0}else{for(e=0;e<c-d;e++)b[e]=0;for(e=0;!a.isZero();e++)d=a.andln(255),a.iushrn(8),b[c-e-1]=d}return b};b.prototype._countBits=Math.clz32?function(b){return 32-Math.clz32(b)}:function(b){var a=0;4096<=b&&(a+=13,b>>>=
13);64<=b&&(a+=7,b>>>=7);8<=b&&(a+=4,b>>>=4);2<=b&&(a+=2,b>>>=2);return a+b};b.prototype._zeroBits=function(b){if(0===b)return 26;var a=0;0===(b&8191)&&(a+=13,b>>>=13);0===(b&127)&&(a+=7,b>>>=7);0===(b&15)&&(a+=4,b>>>=4);0===(b&3)&&(a+=2,b>>>=2);0===(b&1)&&a++;return a};b.prototype.bitLength=function(){var b=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+b};b.prototype.zeroBits=function(){if(this.isZero())return 0;for(var b=0,a=0;a<this.length;a++){var c=this._zeroBits(this.words[a]);
b+=c;if(26!==c)break}return b};b.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};b.prototype.toTwos=function(b){return 0!==this.negative?this.abs().inotn(b).iaddn(1):this.clone()};b.prototype.fromTwos=function(b){return this.testn(b-1)?this.notn(b).iaddn(1).ineg():this.clone()};b.prototype.isNeg=function(){return 0!==this.negative};b.prototype.neg=function(){return this.clone().ineg()};b.prototype.ineg=function(){this.isZero()||(this.negative^=1);return this};b.prototype.iuor=
function(b){for(;this.length<b.length;)this.words[this.length++]=0;for(var a=0;a<b.length;a++)this.words[a]|=b.words[a];return this.strip()};b.prototype.ior=function(b){m(0===(this.negative|b.negative));return this.iuor(b)};b.prototype.or=function(b){return this.length>b.length?this.clone().ior(b):b.clone().ior(this)};b.prototype.uor=function(b){return this.length>b.length?this.clone().iuor(b):b.clone().iuor(this)};b.prototype.iuand=function(b){var a=this.length>b.length?b:this;for(var c=0;c<a.length;c++)this.words[c]&=
b.words[c];this.length=a.length;return this.strip()};b.prototype.iand=function(b){m(0===(this.negative|b.negative));return this.iuand(b)};b.prototype.and=function(b){return this.length>b.length?this.clone().iand(b):b.clone().iand(this)};b.prototype.uand=function(b){return this.length>b.length?this.clone().iuand(b):b.clone().iuand(this)};b.prototype.iuxor=function(b){if(this.length>b.length)var a=this;else a=b,b=this;for(var c=0;c<b.length;c++)this.words[c]=a.words[c]^b.words[c];if(this!==a)for(;c<
a.length;c++)this.words[c]=a.words[c];this.length=a.length;return this.strip()};b.prototype.ixor=function(b){m(0===(this.negative|b.negative));return this.iuxor(b)};b.prototype.xor=function(b){return this.length>b.length?this.clone().ixor(b):b.clone().ixor(this)};b.prototype.uxor=function(b){return this.length>b.length?this.clone().iuxor(b):b.clone().iuxor(this)};b.prototype.inotn=function(b){m("number"===typeof b&&0<=b);var a=Math.ceil(b/26)|0;b%=26;this._expand(a);0<b&&a--;for(var c=0;c<a;c++)this.words[c]=
~this.words[c]&67108863;0<b&&(this.words[c]=~this.words[c]&67108863>>26-b);return this.strip()};b.prototype.notn=function(b){return this.clone().inotn(b)};b.prototype.setn=function(b,a){m("number"===typeof b&&0<=b);var c=b/26|0;b%=26;this._expand(c+1);this.words[c]=a?this.words[c]|1<<b:this.words[c]&~(1<<b);return this.strip()};b.prototype.iadd=function(b){if(0!==this.negative&&0===b.negative)return this.negative=0,this.isub(b),this.negative^=1,this._normSign();if(0===this.negative&&0!==b.negative){b.negative=
0;var a=this.isub(b);b.negative=1;return a._normSign()}if(this.length>b.length)var c=this;else c=b,b=this;for(var d=a=0;d<b.length;d++)a=(c.words[d]|0)+(b.words[d]|0)+a,this.words[d]=a&67108863,a>>>=26;for(;0!==a&&d<c.length;d++)a=(c.words[d]|0)+a,this.words[d]=a&67108863,a>>>=26;this.length=c.length;if(0!==a)this.words[this.length]=a,this.length++;else if(c!==this)for(;d<c.length;d++)this.words[d]=c.words[d];return this};b.prototype.add=function(b){if(0!==b.negative&&0===this.negative){b.negative=
0;var a=this.sub(b);b.negative^=1;return a}return 0===b.negative&&0!==this.negative?(this.negative=0,a=b.sub(this),this.negative=1,a):this.length>b.length?this.clone().iadd(b):b.clone().iadd(this)};b.prototype.isub=function(b){if(0!==b.negative){b.negative=0;var a=this.iadd(b);b.negative=1;return a._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(b),this.negative=1,this._normSign();a=this.cmp(b);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;if(0<a)var c=this;
else c=b,b=this;for(var d=0,e=0;e<b.length;e++)a=(c.words[e]|0)-(b.words[e]|0)+d,d=a>>26,this.words[e]=a&67108863;for(;0!==d&&e<c.length;e++)a=(c.words[e]|0)+d,d=a>>26,this.words[e]=a&67108863;if(0===d&&e<c.length&&c!==this)for(;e<c.length;e++)this.words[e]=c.words[e];this.length=Math.max(this.length,e);c!==this&&(this.negative=1);return this.strip()};b.prototype.sub=function(b){return this.clone().isub(b)};var C=function(b,a,c){var d=b.words,e=a.words,f=c.words,g=0,h=d[0]|0,r=h&8191,l=h>>>13,u=d[1]|
0;h=u&8191;var k=u>>>13,t=d[2]|0;u=t&8191;var n=t>>>13,m=d[3]|0;t=m&8191;var v=m>>>13,w=d[4]|0;m=w&8191;var y=w>>>13,x=d[5]|0;w=x&8191;var A=x>>>13,z=d[6]|0;x=z&8191;var D=z>>>13,B=d[7]|0;z=B&8191;var C=B>>>13,G=d[8]|0;B=G&8191;G>>>=13;var E=d[9]|0;d=E&8191;E>>>=13;var p=e[0]|0,q=p&8191,na=p>>>13,ha=e[1]|0;p=ha&8191;var ja=ha>>>13,oa=e[2]|0;ha=oa&8191;var ka=oa>>>13,ia=e[3]|0;oa=ia&8191;var xa=ia>>>13,ya=e[4]|0;ia=ya&8191;var sa=ya>>>13,W=e[5]|0;ya=W&8191;var za=W>>>13,Da=e[6]|0;W=Da&8191;var ra=
Da>>>13,ua=e[7]|0;Da=ua&8191;var Aa=ua>>>13,wa=e[8]|0;ua=wa&8191;wa>>>=13;var Ma=e[9]|0;e=Ma&8191;Ma>>>=13;c.negative=b.negative^a.negative;c.length=19;var ba=Math.imul(r,q);b=Math.imul(r,na);b=b+Math.imul(l,q)|0;a=Math.imul(l,na);var Ea=(g+ba|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(Ea>>>26)|0;Ea&=67108863;ba=Math.imul(h,q);b=Math.imul(h,na);b=b+Math.imul(k,q)|0;a=Math.imul(k,na);ba=ba+Math.imul(r,p)|0;b=b+Math.imul(r,ja)|0;b=b+Math.imul(l,p)|0;a=a+Math.imul(l,ja)|0;var Ba=(g+ba|0)+((b&8191)<<13)|0;
g=(a+(b>>>13)|0)+(Ba>>>26)|0;Ba&=67108863;ba=Math.imul(u,q);b=Math.imul(u,na);b=b+Math.imul(n,q)|0;a=Math.imul(n,na);ba=ba+Math.imul(h,p)|0;b=b+Math.imul(h,ja)|0;b=b+Math.imul(k,p)|0;a=a+Math.imul(k,ja)|0;ba=ba+Math.imul(r,ha)|0;b=b+Math.imul(r,ka)|0;b=b+Math.imul(l,ha)|0;a=a+Math.imul(l,ka)|0;var Na=(g+ba|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(Na>>>26)|0;Na&=67108863;ba=Math.imul(t,q);b=Math.imul(t,na);b=b+Math.imul(v,q)|0;a=Math.imul(v,na);ba=ba+Math.imul(u,p)|0;b=b+Math.imul(u,ja)|0;b=b+Math.imul(n,
p)|0;a=a+Math.imul(n,ja)|0;ba=ba+Math.imul(h,ha)|0;b=b+Math.imul(h,ka)|0;b=b+Math.imul(k,ha)|0;a=a+Math.imul(k,ka)|0;ba=ba+Math.imul(r,oa)|0;b=b+Math.imul(r,xa)|0;b=b+Math.imul(l,oa)|0;a=a+Math.imul(l,xa)|0;var Ja=(g+ba|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(Ja>>>26)|0;Ja&=67108863;ba=Math.imul(m,q);b=Math.imul(m,na);b=b+Math.imul(y,q)|0;a=Math.imul(y,na);ba=ba+Math.imul(t,p)|0;b=b+Math.imul(t,ja)|0;b=b+Math.imul(v,p)|0;a=a+Math.imul(v,ja)|0;ba=ba+Math.imul(u,ha)|0;b=b+Math.imul(u,ka)|0;b=b+Math.imul(n,
ha)|0;a=a+Math.imul(n,ka)|0;ba=ba+Math.imul(h,oa)|0;b=b+Math.imul(h,xa)|0;b=b+Math.imul(k,oa)|0;a=a+Math.imul(k,xa)|0;ba=ba+Math.imul(r,ia)|0;b=b+Math.imul(r,sa)|0;b=b+Math.imul(l,ia)|0;a=a+Math.imul(l,sa)|0;var Lb=(g+ba|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(Lb>>>26)|0;Lb&=67108863;ba=Math.imul(w,q);b=Math.imul(w,na);b=b+Math.imul(A,q)|0;a=Math.imul(A,na);ba=ba+Math.imul(m,p)|0;b=b+Math.imul(m,ja)|0;b=b+Math.imul(y,p)|0;a=a+Math.imul(y,ja)|0;ba=ba+Math.imul(t,ha)|0;b=b+Math.imul(t,ka)|0;b=b+Math.imul(v,
ha)|0;a=a+Math.imul(v,ka)|0;ba=ba+Math.imul(u,oa)|0;b=b+Math.imul(u,xa)|0;b=b+Math.imul(n,oa)|0;a=a+Math.imul(n,xa)|0;ba=ba+Math.imul(h,ia)|0;b=b+Math.imul(h,sa)|0;b=b+Math.imul(k,ia)|0;a=a+Math.imul(k,sa)|0;ba=ba+Math.imul(r,ya)|0;b=b+Math.imul(r,za)|0;b=b+Math.imul(l,ya)|0;a=a+Math.imul(l,za)|0;var Mb=(g+ba|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(Mb>>>26)|0;Mb&=67108863;ba=Math.imul(x,q);b=Math.imul(x,na);b=b+Math.imul(D,q)|0;a=Math.imul(D,na);ba=ba+Math.imul(w,p)|0;b=b+Math.imul(w,ja)|0;b=b+Math.imul(A,
p)|0;a=a+Math.imul(A,ja)|0;ba=ba+Math.imul(m,ha)|0;b=b+Math.imul(m,ka)|0;b=b+Math.imul(y,ha)|0;a=a+Math.imul(y,ka)|0;ba=ba+Math.imul(t,oa)|0;b=b+Math.imul(t,xa)|0;b=b+Math.imul(v,oa)|0;a=a+Math.imul(v,xa)|0;ba=ba+Math.imul(u,ia)|0;b=b+Math.imul(u,sa)|0;b=b+Math.imul(n,ia)|0;a=a+Math.imul(n,sa)|0;ba=ba+Math.imul(h,ya)|0;b=b+Math.imul(h,za)|0;b=b+Math.imul(k,ya)|0;a=a+Math.imul(k,za)|0;ba=ba+Math.imul(r,W)|0;b=b+Math.imul(r,ra)|0;b=b+Math.imul(l,W)|0;a=a+Math.imul(l,ra)|0;var Pa=(g+ba|0)+((b&8191)<<
13)|0;g=(a+(b>>>13)|0)+(Pa>>>26)|0;Pa&=67108863;ba=Math.imul(z,q);b=Math.imul(z,na);b=b+Math.imul(C,q)|0;a=Math.imul(C,na);ba=ba+Math.imul(x,p)|0;b=b+Math.imul(x,ja)|0;b=b+Math.imul(D,p)|0;a=a+Math.imul(D,ja)|0;ba=ba+Math.imul(w,ha)|0;b=b+Math.imul(w,ka)|0;b=b+Math.imul(A,ha)|0;a=a+Math.imul(A,ka)|0;ba=ba+Math.imul(m,oa)|0;b=b+Math.imul(m,xa)|0;b=b+Math.imul(y,oa)|0;a=a+Math.imul(y,xa)|0;ba=ba+Math.imul(t,ia)|0;b=b+Math.imul(t,sa)|0;b=b+Math.imul(v,ia)|0;a=a+Math.imul(v,sa)|0;ba=ba+Math.imul(u,ya)|
0;b=b+Math.imul(u,za)|0;b=b+Math.imul(n,ya)|0;a=a+Math.imul(n,za)|0;ba=ba+Math.imul(h,W)|0;b=b+Math.imul(h,ra)|0;b=b+Math.imul(k,W)|0;a=a+Math.imul(k,ra)|0;ba=ba+Math.imul(r,Da)|0;b=b+Math.imul(r,Aa)|0;b=b+Math.imul(l,Da)|0;a=a+Math.imul(l,Aa)|0;var zb=(g+ba|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(zb>>>26)|0;zb&=67108863;ba=Math.imul(B,q);b=Math.imul(B,na);b=b+Math.imul(G,q)|0;a=Math.imul(G,na);ba=ba+Math.imul(z,p)|0;b=b+Math.imul(z,ja)|0;b=b+Math.imul(C,p)|0;a=a+Math.imul(C,ja)|0;ba=ba+Math.imul(x,
ha)|0;b=b+Math.imul(x,ka)|0;b=b+Math.imul(D,ha)|0;a=a+Math.imul(D,ka)|0;ba=ba+Math.imul(w,oa)|0;b=b+Math.imul(w,xa)|0;b=b+Math.imul(A,oa)|0;a=a+Math.imul(A,xa)|0;ba=ba+Math.imul(m,ia)|0;b=b+Math.imul(m,sa)|0;b=b+Math.imul(y,ia)|0;a=a+Math.imul(y,sa)|0;ba=ba+Math.imul(t,ya)|0;b=b+Math.imul(t,za)|0;b=b+Math.imul(v,ya)|0;a=a+Math.imul(v,za)|0;ba=ba+Math.imul(u,W)|0;b=b+Math.imul(u,ra)|0;b=b+Math.imul(n,W)|0;a=a+Math.imul(n,ra)|0;ba=ba+Math.imul(h,Da)|0;b=b+Math.imul(h,Aa)|0;b=b+Math.imul(k,Da)|0;a=a+
Math.imul(k,Aa)|0;ba=ba+Math.imul(r,ua)|0;b=b+Math.imul(r,wa)|0;b=b+Math.imul(l,ua)|0;a=a+Math.imul(l,wa)|0;var cb=(g+ba|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(cb>>>26)|0;cb&=67108863;ba=Math.imul(d,q);b=Math.imul(d,na);b=b+Math.imul(E,q)|0;a=Math.imul(E,na);ba=ba+Math.imul(B,p)|0;b=b+Math.imul(B,ja)|0;b=b+Math.imul(G,p)|0;a=a+Math.imul(G,ja)|0;ba=ba+Math.imul(z,ha)|0;b=b+Math.imul(z,ka)|0;b=b+Math.imul(C,ha)|0;a=a+Math.imul(C,ka)|0;ba=ba+Math.imul(x,oa)|0;b=b+Math.imul(x,xa)|0;b=b+Math.imul(D,oa)|
0;a=a+Math.imul(D,xa)|0;ba=ba+Math.imul(w,ia)|0;b=b+Math.imul(w,sa)|0;b=b+Math.imul(A,ia)|0;a=a+Math.imul(A,sa)|0;ba=ba+Math.imul(m,ya)|0;b=b+Math.imul(m,za)|0;b=b+Math.imul(y,ya)|0;a=a+Math.imul(y,za)|0;ba=ba+Math.imul(t,W)|0;b=b+Math.imul(t,ra)|0;b=b+Math.imul(v,W)|0;a=a+Math.imul(v,ra)|0;ba=ba+Math.imul(u,Da)|0;b=b+Math.imul(u,Aa)|0;b=b+Math.imul(n,Da)|0;a=a+Math.imul(n,Aa)|0;ba=ba+Math.imul(h,ua)|0;b=b+Math.imul(h,wa)|0;b=b+Math.imul(k,ua)|0;a=a+Math.imul(k,wa)|0;ba=ba+Math.imul(r,e)|0;b=b+Math.imul(r,
Ma)|0;b=b+Math.imul(l,e)|0;a=a+Math.imul(l,Ma)|0;r=(g+ba|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(r>>>26)|0;r&=67108863;ba=Math.imul(d,p);b=Math.imul(d,ja);b=b+Math.imul(E,p)|0;a=Math.imul(E,ja);ba=ba+Math.imul(B,ha)|0;b=b+Math.imul(B,ka)|0;b=b+Math.imul(G,ha)|0;a=a+Math.imul(G,ka)|0;ba=ba+Math.imul(z,oa)|0;b=b+Math.imul(z,xa)|0;b=b+Math.imul(C,oa)|0;a=a+Math.imul(C,xa)|0;ba=ba+Math.imul(x,ia)|0;b=b+Math.imul(x,sa)|0;b=b+Math.imul(D,ia)|0;a=a+Math.imul(D,sa)|0;ba=ba+Math.imul(w,ya)|0;b=b+Math.imul(w,
za)|0;b=b+Math.imul(A,ya)|0;a=a+Math.imul(A,za)|0;ba=ba+Math.imul(m,W)|0;b=b+Math.imul(m,ra)|0;b=b+Math.imul(y,W)|0;a=a+Math.imul(y,ra)|0;ba=ba+Math.imul(t,Da)|0;b=b+Math.imul(t,Aa)|0;b=b+Math.imul(v,Da)|0;a=a+Math.imul(v,Aa)|0;ba=ba+Math.imul(u,ua)|0;b=b+Math.imul(u,wa)|0;b=b+Math.imul(n,ua)|0;a=a+Math.imul(n,wa)|0;ba=ba+Math.imul(h,e)|0;b=b+Math.imul(h,Ma)|0;b=b+Math.imul(k,e)|0;a=a+Math.imul(k,Ma)|0;h=(g+ba|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(h>>>26)|0;h&=67108863;ba=Math.imul(d,ha);b=Math.imul(d,
ka);b=b+Math.imul(E,ha)|0;a=Math.imul(E,ka);ba=ba+Math.imul(B,oa)|0;b=b+Math.imul(B,xa)|0;b=b+Math.imul(G,oa)|0;a=a+Math.imul(G,xa)|0;ba=ba+Math.imul(z,ia)|0;b=b+Math.imul(z,sa)|0;b=b+Math.imul(C,ia)|0;a=a+Math.imul(C,sa)|0;ba=ba+Math.imul(x,ya)|0;b=b+Math.imul(x,za)|0;b=b+Math.imul(D,ya)|0;a=a+Math.imul(D,za)|0;ba=ba+Math.imul(w,W)|0;b=b+Math.imul(w,ra)|0;b=b+Math.imul(A,W)|0;a=a+Math.imul(A,ra)|0;ba=ba+Math.imul(m,Da)|0;b=b+Math.imul(m,Aa)|0;b=b+Math.imul(y,Da)|0;a=a+Math.imul(y,Aa)|0;ba=ba+Math.imul(t,
ua)|0;b=b+Math.imul(t,wa)|0;b=b+Math.imul(v,ua)|0;a=a+Math.imul(v,wa)|0;ba=ba+Math.imul(u,e)|0;b=b+Math.imul(u,Ma)|0;b=b+Math.imul(n,e)|0;a=a+Math.imul(n,Ma)|0;u=(g+ba|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(u>>>26)|0;u&=67108863;ba=Math.imul(d,oa);b=Math.imul(d,xa);b=b+Math.imul(E,oa)|0;a=Math.imul(E,xa);ba=ba+Math.imul(B,ia)|0;b=b+Math.imul(B,sa)|0;b=b+Math.imul(G,ia)|0;a=a+Math.imul(G,sa)|0;ba=ba+Math.imul(z,ya)|0;b=b+Math.imul(z,za)|0;b=b+Math.imul(C,ya)|0;a=a+Math.imul(C,za)|0;ba=ba+Math.imul(x,
W)|0;b=b+Math.imul(x,ra)|0;b=b+Math.imul(D,W)|0;a=a+Math.imul(D,ra)|0;ba=ba+Math.imul(w,Da)|0;b=b+Math.imul(w,Aa)|0;b=b+Math.imul(A,Da)|0;a=a+Math.imul(A,Aa)|0;ba=ba+Math.imul(m,ua)|0;b=b+Math.imul(m,wa)|0;b=b+Math.imul(y,ua)|0;a=a+Math.imul(y,wa)|0;ba=ba+Math.imul(t,e)|0;b=b+Math.imul(t,Ma)|0;b=b+Math.imul(v,e)|0;a=a+Math.imul(v,Ma)|0;t=(g+ba|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(t>>>26)|0;t&=67108863;ba=Math.imul(d,ia);b=Math.imul(d,sa);b=b+Math.imul(E,ia)|0;a=Math.imul(E,sa);ba=ba+Math.imul(B,
ya)|0;b=b+Math.imul(B,za)|0;b=b+Math.imul(G,ya)|0;a=a+Math.imul(G,za)|0;ba=ba+Math.imul(z,W)|0;b=b+Math.imul(z,ra)|0;b=b+Math.imul(C,W)|0;a=a+Math.imul(C,ra)|0;ba=ba+Math.imul(x,Da)|0;b=b+Math.imul(x,Aa)|0;b=b+Math.imul(D,Da)|0;a=a+Math.imul(D,Aa)|0;ba=ba+Math.imul(w,ua)|0;b=b+Math.imul(w,wa)|0;b=b+Math.imul(A,ua)|0;a=a+Math.imul(A,wa)|0;ba=ba+Math.imul(m,e)|0;b=b+Math.imul(m,Ma)|0;b=b+Math.imul(y,e)|0;a=a+Math.imul(y,Ma)|0;m=(g+ba|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(m>>>26)|0;m&=67108863;ba=Math.imul(d,
ya);b=Math.imul(d,za);b=b+Math.imul(E,ya)|0;a=Math.imul(E,za);ba=ba+Math.imul(B,W)|0;b=b+Math.imul(B,ra)|0;b=b+Math.imul(G,W)|0;a=a+Math.imul(G,ra)|0;ba=ba+Math.imul(z,Da)|0;b=b+Math.imul(z,Aa)|0;b=b+Math.imul(C,Da)|0;a=a+Math.imul(C,Aa)|0;ba=ba+Math.imul(x,ua)|0;b=b+Math.imul(x,wa)|0;b=b+Math.imul(D,ua)|0;a=a+Math.imul(D,wa)|0;ba=ba+Math.imul(w,e)|0;b=b+Math.imul(w,Ma)|0;b=b+Math.imul(A,e)|0;a=a+Math.imul(A,Ma)|0;w=(g+ba|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(w>>>26)|0;w&=67108863;ba=Math.imul(d,
W);b=Math.imul(d,ra);b=b+Math.imul(E,W)|0;a=Math.imul(E,ra);ba=ba+Math.imul(B,Da)|0;b=b+Math.imul(B,Aa)|0;b=b+Math.imul(G,Da)|0;a=a+Math.imul(G,Aa)|0;ba=ba+Math.imul(z,ua)|0;b=b+Math.imul(z,wa)|0;b=b+Math.imul(C,ua)|0;a=a+Math.imul(C,wa)|0;ba=ba+Math.imul(x,e)|0;b=b+Math.imul(x,Ma)|0;b=b+Math.imul(D,e)|0;a=a+Math.imul(D,Ma)|0;x=(g+ba|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(x>>>26)|0;x&=67108863;ba=Math.imul(d,Da);b=Math.imul(d,Aa);b=b+Math.imul(E,Da)|0;a=Math.imul(E,Aa);ba=ba+Math.imul(B,ua)|0;b=b+
Math.imul(B,wa)|0;b=b+Math.imul(G,ua)|0;a=a+Math.imul(G,wa)|0;ba=ba+Math.imul(z,e)|0;b=b+Math.imul(z,Ma)|0;b=b+Math.imul(C,e)|0;a=a+Math.imul(C,Ma)|0;z=(g+ba|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(z>>>26)|0;z&=67108863;ba=Math.imul(d,ua);b=Math.imul(d,wa);b=b+Math.imul(E,ua)|0;a=Math.imul(E,wa);ba=ba+Math.imul(B,e)|0;b=b+Math.imul(B,Ma)|0;b=b+Math.imul(G,e)|0;a=a+Math.imul(G,Ma)|0;B=(g+ba|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(B>>>26)|0;B&=67108863;ba=Math.imul(d,e);b=Math.imul(d,Ma);b=b+Math.imul(E,
e)|0;a=Math.imul(E,Ma);l=(g+ba|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(l>>>26)|0;f[0]=Ea;f[1]=Ba;f[2]=Na;f[3]=Ja;f[4]=Lb;f[5]=Mb;f[6]=Pa;f[7]=zb;f[8]=cb;f[9]=r;f[10]=h;f[11]=u;f[12]=t;f[13]=m;f[14]=w;f[15]=x;f[16]=z;f[17]=B;f[18]=l&67108863;0!==g&&(f[19]=g,c.length++);return c};Math.imul||(C=t);b.prototype.mulTo=function(b,a){var c=this.length+b.length;if(10===this.length&&10===b.length)b=C(this,b,a);else if(63>c)b=t(this,b,a);else if(1024>c){a.negative=b.negative^this.negative;a.length=this.length+
b.length;for(var d=0,e=c=0;e<a.length-1;e++){var f=c;c=0;d&=67108863;for(var g=Math.min(e,b.length-1),h=Math.max(0,e-this.length+1);h<=g;h++){var r=(this.words[e-h]|0)*(b.words[h]|0),u=r&67108863;f=f+(r/67108864|0)|0;u=u+d|0;d=u&67108863;f=f+(u>>>26)|0;c+=f>>>26;f&=67108863}a.words[e]=d;d=f}0!==d?a.words[e]=d:a.length--;b=a.strip()}else b=(new l).mulp(this,b,a);return b};l.prototype.makeRBT=function(a){for(var c=Array(a),d=b.prototype._countBits(a)-1,e=0;e<a;e++)c[e]=this.revBin(e,d,a);return c};
l.prototype.revBin=function(b,a,c){if(0===b||b===c-1)return b;for(var d=c=0;d<a;d++)c|=(b&1)<<a-d-1,b>>=1;return c};l.prototype.permute=function(b,a,c,d,e,f){for(var g=0;g<f;g++)d[g]=a[b[g]],e[g]=c[b[g]]};l.prototype.transform=function(b,a,c,d,e,f){this.permute(f,b,a,c,d,e);for(b=1;b<e;b<<=1){a=b<<1;f=Math.cos(2*Math.PI/a);for(var g=Math.sin(2*Math.PI/a),h=0;h<e;h+=a)for(var r=f,l=g,u=0;u<b;u++){var k=c[h+u],t=d[h+u],n=c[h+u+b],m=d[h+u+b],v=r*n-l*m;m=r*m+l*n;n=v;c[h+u]=k+n;d[h+u]=t+m;c[h+u+b]=k-n;
d[h+u+b]=t-m;u!==a&&(v=f*r-g*l,l=f*l+g*r,r=v)}}};l.prototype.guessLen13b=function(b,a){b=Math.max(a,b)|1;a=b&1;var c=0;for(b=b/2|0;b;b>>>=1)c++;return 1<<c+1+a};l.prototype.conjugate=function(b,a,c){if(!(1>=c))for(var d=0;d<c/2;d++){var e=b[d];b[d]=b[c-d-1];b[c-d-1]=e;e=a[d];a[d]=-a[c-d-1];a[c-d-1]=-e}};l.prototype.normalize13b=function(b,a){for(var c=0,d=0;d<a/2;d++)c=8192*Math.round(b[2*d+1]/a)+Math.round(b[2*d]/a)+c,b[d]=c&67108863,c=67108864>c?0:c/67108864|0;return b};l.prototype.convert13b=function(b,
a,c,d){for(var e=0,f=0;f<a;f++)e+=b[f]|0,c[2*f]=e&8191,e>>>=13,c[2*f+1]=e&8191,e>>>=13;for(f=2*a;f<d;++f)c[f]=0;m(0===e);m(0===(e&-8192))};l.prototype.stub=function(b){for(var a=Array(b),c=0;c<b;c++)a[c]=0;return a};l.prototype.mulp=function(b,a,c){var d=2*this.guessLen13b(b.length,a.length),e=this.makeRBT(d),f=this.stub(d),g=Array(d),h=Array(d),r=Array(d),l=Array(d),u=Array(d),k=Array(d),t=c.words;t.length=d;this.convert13b(b.words,b.length,g,d);this.convert13b(a.words,a.length,l,d);this.transform(g,
f,h,r,d,e);this.transform(l,f,u,k,d,e);for(g=0;g<d;g++)l=h[g]*u[g]-r[g]*k[g],r[g]=h[g]*k[g]+r[g]*u[g],h[g]=l;this.conjugate(h,r,d);this.transform(h,r,t,f,d,e);this.conjugate(t,f,d);this.normalize13b(t,d);c.negative=b.negative^a.negative;c.length=b.length+a.length;return c.strip()};b.prototype.mul=function(a){var c=new b(null);c.words=Array(this.length+a.length);return this.mulTo(a,c)};b.prototype.mulf=function(a){var c=new b(null);c.words=Array(this.length+a.length);return(new l).mulp(this,a,c)};
b.prototype.imul=function(b){return this.clone().mulTo(b,this)};b.prototype.imuln=function(b){m("number"===typeof b);m(67108864>b);for(var a=0,c=0;c<this.length;c++){var d=(this.words[c]|0)*b,e=(d&67108863)+(a&67108863);a>>=26;a+=d/67108864|0;a+=e>>>26;this.words[c]=e&67108863}0!==a&&(this.words[c]=a,this.length++);return this};b.prototype.muln=function(b){return this.clone().imuln(b)};b.prototype.sqr=function(){return this.mul(this)};b.prototype.isqr=function(){return this.imul(this.clone())};b.prototype.pow=
function(a){for(var c=Array(a.bitLength()),d=0;d<c.length;d++){var e=d%26;c[d]=(a.words[d/26|0]&1<<e)>>>e}if(0===c.length)return new b(1);a=this;for(d=0;d<c.length&&0===c[d];d++,a=a.sqr());if(++d<c.length)for(e=a.sqr();d<c.length;d++,e=e.sqr())0!==c[d]&&(a=a.mul(e));return a};b.prototype.iushln=function(b){m("number"===typeof b&&0<=b);var a=b%26;b=(b-a)/26;var c=67108863>>>26-a<<26-a,d;if(0!==a){var e=0;for(d=0;d<this.length;d++){var f=this.words[d]&c;this.words[d]=(this.words[d]|0)-f<<a|e;e=f>>>
26-a}e&&(this.words[d]=e,this.length++)}if(0!==b){for(d=this.length-1;0<=d;d--)this.words[d+b]=this.words[d];for(d=0;d<b;d++)this.words[d]=0;this.length+=b}return this.strip()};b.prototype.ishln=function(b){m(0===this.negative);return this.iushln(b)};b.prototype.iushrn=function(b,a,c){m("number"===typeof b&&0<=b);var d=b%26,e=Math.min((b-d)/26,this.length);b=67108863^67108863>>>d<<d;a=Math.max(0,(a?(a-a%26)/26:0)-e);if(c){for(var f=0;f<e;f++)c.words[f]=this.words[f];c.length=e}if(0!==e)if(this.length>
e)for(this.length-=e,f=0;f<this.length;f++)this.words[f]=this.words[f+e];else this.words[0]=0,this.length=1;e=0;for(f=this.length-1;0<=f&&(0!==e||f>=a);f--){var g=this.words[f]|0;this.words[f]=e<<26-d|g>>>d;e=g&b}c&&0!==e&&(c.words[c.length++]=e);0===this.length&&(this.words[0]=0,this.length=1);return this.strip()};b.prototype.ishrn=function(b,a,c){m(0===this.negative);return this.iushrn(b,a,c)};b.prototype.shln=function(b){return this.clone().ishln(b)};b.prototype.ushln=function(b){return this.clone().iushln(b)};
b.prototype.shrn=function(b){return this.clone().ishrn(b)};b.prototype.ushrn=function(b){return this.clone().iushrn(b)};b.prototype.testn=function(b){m("number"===typeof b&&0<=b);var a=b%26;b=(b-a)/26;return this.length<=b?!1:!!(this.words[b]&1<<a)};b.prototype.imaskn=function(b){m("number"===typeof b&&0<=b);var a=b%26;b=(b-a)/26;m(0===this.negative,"imaskn works only with positive numbers");if(this.length<=b)return this;0!==a&&b++;this.length=Math.min(b,this.length);0!==a&&(this.words[this.length-
1]&=67108863^67108863>>>a<<a);return this.strip()};b.prototype.maskn=function(b){return this.clone().imaskn(b)};b.prototype.iaddn=function(b){m("number"===typeof b);m(67108864>b);if(0>b)return this.isubn(-b);if(0!==this.negative){if(1===this.length&&(this.words[0]|0)<b)return this.words[0]=b-(this.words[0]|0),this.negative=0,this;this.negative=0;this.isubn(b);this.negative=1;return this}return this._iaddn(b)};b.prototype._iaddn=function(b){this.words[0]+=b;for(b=0;b<this.length&&67108864<=this.words[b];b++)this.words[b]-=
67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;this.length=Math.max(this.length,b+1);return this};b.prototype.isubn=function(b){m("number"===typeof b);m(67108864>b);if(0>b)return this.iaddn(-b);if(0!==this.negative)return this.negative=0,this.iaddn(b),this.negative=1,this;this.words[0]-=b;if(1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(b=0;b<this.length&&0>this.words[b];b++)this.words[b]+=67108864,--this.words[b+1];return this.strip()};b.prototype.addn=
function(b){return this.clone().iaddn(b)};b.prototype.subn=function(b){return this.clone().isubn(b)};b.prototype.iabs=function(){this.negative=0;return this};b.prototype.abs=function(){return this.clone().iabs()};b.prototype._ishlnsubmul=function(b,a,c){var d;this._expand(b.length+c);var e=0;for(d=0;d<b.length;d++){var f=(this.words[d+c]|0)+e;e=(b.words[d]|0)*a;f-=e&67108863;e=(f>>26)-(e/67108864|0);this.words[d+c]=f&67108863}for(;d<this.length-c;d++)f=(this.words[d+c]|0)+e,e=f>>26,this.words[d+c]=
f&67108863;if(0===e)return this.strip();m(-1===e);for(d=e=0;d<this.length;d++)f=-(this.words[d]|0)+e,e=f>>26,this.words[d]=f&67108863;this.negative=1;return this.strip()};b.prototype._wordDiv=function(a,c){var d=this.clone(),e=a,f=e.words[e.length-1]|0;a=26-this._countBits(f);0!==a&&(e=e.ushln(a),d.iushln(a),f=e.words[e.length-1]|0);var g=d.length-e.length;if("mod"!==c){var h=new b(null);h.length=g+1;h.words=Array(h.length);for(var r=0;r<h.length;r++)h.words[r]=0}r=d.clone()._ishlnsubmul(e,1,g);0===
r.negative&&(d=r,h&&(h.words[g]=1));for(--g;0<=g;g--){r=67108864*(d.words[e.length+g]|0)+(d.words[e.length+g-1]|0);r=Math.min(r/f|0,67108863);for(d._ishlnsubmul(e,r,g);0!==d.negative;)r--,d.negative=0,d._ishlnsubmul(e,1,g),d.isZero()||(d.negative^=1);h&&(h.words[g]=r)}h&&h.strip();d.strip();"div"!==c&&0!==a&&d.iushrn(a);return{div:h||null,mod:d}};b.prototype.divmod=function(a,c,d){m(!a.isZero());if(this.isZero())return{div:new b(0),mod:new b(0)};var e;if(0!==this.negative&&0===a.negative){var f=this.neg().divmod(a,
c);"mod"!==c&&(e=f.div.neg());if("div"!==c){var g=f.mod.neg();d&&0!==g.negative&&g.iadd(a)}return{div:e,mod:g}}return 0===this.negative&&0!==a.negative?(f=this.divmod(a.neg(),c),"mod"!==c&&(e=f.div.neg()),{div:e,mod:f.mod}):0!==(this.negative&a.negative)?(f=this.neg().divmod(a.neg(),c),"div"!==c&&(g=f.mod.neg(),d&&0!==g.negative&&g.isub(a)),{div:f.div,mod:g}):a.length>this.length||0>this.cmp(a)?{div:new b(0),mod:this}:1===a.length?"div"===c?{div:this.divn(a.words[0]),mod:null}:"mod"===c?{div:null,
mod:new b(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new b(this.modn(a.words[0]))}:this._wordDiv(a,c)};b.prototype.div=function(b){return this.divmod(b,"div",!1).div};b.prototype.mod=function(b){return this.divmod(b,"mod",!1).mod};b.prototype.umod=function(b){return this.divmod(b,"mod",!0).mod};b.prototype.divRound=function(b){var a=this.divmod(b);if(a.mod.isZero())return a.div;var c=0!==a.div.negative?a.mod.isub(b):a.mod,d=b.ushrn(1);b=b.andln(1);c=c.cmp(d);return 0>c||1===b&&0===c?a.div:
0!==a.div.negative?a.div.isubn(1):a.div.iaddn(1)};b.prototype.modn=function(b){m(67108863>=b);for(var a=67108864%b,c=0,d=this.length-1;0<=d;d--)c=(a*c+(this.words[d]|0))%b;return c};b.prototype.idivn=function(b){m(67108863>=b);for(var a=0,c=this.length-1;0<=c;c--)a=(this.words[c]|0)+67108864*a,this.words[c]=a/b|0,a%=b;return this.strip()};b.prototype.divn=function(b){return this.clone().idivn(b)};b.prototype.egcd=function(a){m(0===a.negative);m(!a.isZero());var c=this,d=a.clone();c=0!==c.negative?
c.umod(a):c.clone();a=new b(1);for(var e=new b(0),f=new b(0),g=new b(1),h=0;c.isEven()&&d.isEven();)c.iushrn(1),d.iushrn(1),++h;for(var r=d.clone(),l=c.clone();!c.isZero();){for(var u=0,k=1;0===(c.words[0]&k)&&26>u;++u,k<<=1);if(0<u)for(c.iushrn(u);0<u--;){if(a.isOdd()||e.isOdd())a.iadd(r),e.isub(l);a.iushrn(1);e.iushrn(1)}u=0;for(k=1;0===(d.words[0]&k)&&26>u;++u,k<<=1);if(0<u)for(d.iushrn(u);0<u--;){if(f.isOdd()||g.isOdd())f.iadd(r),g.isub(l);f.iushrn(1);g.iushrn(1)}0<=c.cmp(d)?(c.isub(d),a.isub(f),
e.isub(g)):(d.isub(c),f.isub(a),g.isub(e))}return{a:f,b:g,gcd:d.iushln(h)}};b.prototype._invmp=function(a){m(0===a.negative);m(!a.isZero());var c=this,d=a.clone();c=0!==c.negative?c.umod(a):c.clone();for(var e=new b(1),f=new b(0),g=d.clone();0<c.cmpn(1)&&0<d.cmpn(1);){for(var h=0,r=1;0===(c.words[0]&r)&&26>h;++h,r<<=1);if(0<h)for(c.iushrn(h);0<h--;)e.isOdd()&&e.iadd(g),e.iushrn(1);h=0;for(r=1;0===(d.words[0]&r)&&26>h;++h,r<<=1);if(0<h)for(d.iushrn(h);0<h--;)f.isOdd()&&f.iadd(g),f.iushrn(1);0<=c.cmp(d)?
(c.isub(d),e.isub(f)):(d.isub(c),f.isub(e))}c=0===c.cmpn(1)?e:f;0>c.cmpn(0)&&c.iadd(a);return c};b.prototype.gcd=function(b){if(this.isZero())return b.abs();if(b.isZero())return this.abs();var a=this.clone();b=b.clone();a.negative=0;for(var c=b.negative=0;a.isEven()&&b.isEven();c++)a.iushrn(1),b.iushrn(1);do{for(;a.isEven();)a.iushrn(1);for(;b.isEven();)b.iushrn(1);var d=a.cmp(b);if(0>d)d=a,a=b,b=d;else if(0===d||0===b.cmpn(1))break;a.isub(b)}while(1);return b.iushln(c)};b.prototype.invm=function(b){return this.egcd(b).a.umod(b)};
b.prototype.isEven=function(){return 0===(this.words[0]&1)};b.prototype.isOdd=function(){return 1===(this.words[0]&1)};b.prototype.andln=function(b){return this.words[0]&b};b.prototype.bincn=function(b){m("number"===typeof b);var a=b%26;b=(b-a)/26;a=1<<a;if(this.length<=b)return this._expand(b+1),this.words[b]|=a,this;for(;0!==a&&b<this.length;b++){var c=this.words[b]|0;c+=a;a=c>>>26;c&=67108863;this.words[b]=c}0!==a&&(this.words[b]=a,this.length++);return this};b.prototype.isZero=function(){return 1===
this.length&&0===this.words[0]};b.prototype.cmpn=function(b){var a=0>b;if(0!==this.negative&&!a)return-1;if(0===this.negative&&a)return 1;this.strip();1<this.length?b=1:(a&&(b=-b),m(67108863>=b,"Number is too big"),a=this.words[0]|0,b=a===b?0:a<b?-1:1);return 0!==this.negative?-b|0:b};b.prototype.cmp=function(b){if(0!==this.negative&&0===b.negative)return-1;if(0===this.negative&&0!==b.negative)return 1;b=this.ucmp(b);return 0!==this.negative?-b|0:b};b.prototype.ucmp=function(b){if(this.length>b.length)return 1;
if(this.length<b.length)return-1;for(var a=0,c=this.length-1;0<=c;c--){var d=this.words[c]|0,e=b.words[c]|0;if(d!==e){d<e?a=-1:d>e&&(a=1);break}}return a};b.prototype.gtn=function(b){return 1===this.cmpn(b)};b.prototype.gt=function(b){return 1===this.cmp(b)};b.prototype.gten=function(b){return 0<=this.cmpn(b)};b.prototype.gte=function(b){return 0<=this.cmp(b)};b.prototype.ltn=function(b){return-1===this.cmpn(b)};b.prototype.lt=function(b){return-1===this.cmp(b)};b.prototype.lten=function(b){return 0>=
this.cmpn(b)};b.prototype.lte=function(b){return 0>=this.cmp(b)};b.prototype.eqn=function(b){return 0===this.cmpn(b)};b.prototype.eq=function(b){return 0===this.cmp(b)};b.red=function(b){return new v(b)};b.prototype.toRed=function(b){m(!this.red,"Already a number in reduction context");m(0===this.negative,"red works only with positives");return b.convertTo(this)._forceRed(b)};b.prototype.fromRed=function(){m(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};
b.prototype._forceRed=function(b){this.red=b;return this};b.prototype.forceRed=function(b){m(!this.red,"Already a number in reduction context");return this._forceRed(b)};b.prototype.redAdd=function(b){m(this.red,"redAdd works only with red numbers");return this.red.add(this,b)};b.prototype.redIAdd=function(b){m(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,b)};b.prototype.redSub=function(b){m(this.red,"redSub works only with red numbers");return this.red.sub(this,b)};b.prototype.redISub=
function(b){m(this.red,"redISub works only with red numbers");return this.red.isub(this,b)};b.prototype.redShl=function(b){m(this.red,"redShl works only with red numbers");return this.red.shl(this,b)};b.prototype.redMul=function(b){m(this.red,"redMul works only with red numbers");this.red._verify2(this,b);return this.red.mul(this,b)};b.prototype.redIMul=function(b){m(this.red,"redMul works only with red numbers");this.red._verify2(this,b);return this.red.imul(this,b)};b.prototype.redSqr=function(){m(this.red,
"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};b.prototype.redISqr=function(){m(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};b.prototype.redSqrt=function(){m(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};b.prototype.redInvm=function(){m(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};b.prototype.redNeg=
function(){m(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};b.prototype.redPow=function(b){m(this.red&&!b.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,b)};var B={k256:null,p224:null,p192:null,p25519:null};f.prototype._tmp=function(){var a=new b(null);a.words=Array(Math.ceil(this.n/13));return a};f.prototype.ireduce=function(b){do{this.split(b,this.tmp);b=this.imulK(b);b=b.iadd(this.tmp);var a=b.bitLength()}while(a>this.n);
a=a<this.n?-1:b.ucmp(this.p);0===a?(b.words[0]=0,b.length=1):0<a?b.isub(this.p):b.strip();return b};f.prototype.split=function(b,a){b.iushrn(this.n,0,a)};f.prototype.imulK=function(b){return b.imul(this.k)};h(d,f);d.prototype.split=function(b,a){for(var c=Math.min(b.length,9),d=0;d<c;d++)a.words[d]=b.words[d];a.length=c;if(9>=b.length)b.words[0]=0,b.length=1;else{c=b.words[9];a.words[a.length++]=c&4194303;for(d=10;d<b.length;d++)a=b.words[d]|0,b.words[d-10]=(a&4194303)<<4|c>>>22,c=a;c>>>=22;b.words[d-
10]=c;b.length=0===c&&10<b.length?b.length-10:b.length-9}};d.prototype.imulK=function(b){b.words[b.length]=0;b.words[b.length+1]=0;b.length+=2;for(var a=0,c=0;c<b.length;c++){var d=b.words[c]|0;a+=977*d;b.words[c]=a&67108863;a=64*d+(a/67108864|0)}0===b.words[b.length-1]&&(b.length--,0===b.words[b.length-1]&&b.length--);return b};h(c,f);h(r,f);h(u,f);u.prototype.imulK=function(b){for(var a=0,c=0;c<b.length;c++){a=19*(b.words[c]|0)+a;var d=a&67108863;a>>>=26;b.words[c]=d}0!==a&&(b.words[b.length++]=
a);return b};b._prime=function(b){if(B[b])return B[b];if("k256"===b)var a=new d;else if("p224"===b)a=new c;else if("p192"===b)a=new r;else if("p25519"===b)a=new u;else throw Error("Unknown prime "+b);return B[b]=a};v.prototype._verify1=function(b){m(0===b.negative,"red works only with positives");m(b.red,"red works only with red numbers")};v.prototype._verify2=function(b,a){m(0===(b.negative|a.negative),"red works only with positives");m(b.red&&b.red===a.red,"red works only with red numbers")};v.prototype.imod=
function(b){return this.prime?this.prime.ireduce(b)._forceRed(this):b.umod(this.m)._forceRed(this)};v.prototype.neg=function(b){return b.isZero()?b.clone():this.m.sub(b)._forceRed(this)};v.prototype.add=function(b,a){this._verify2(b,a);b=b.add(a);0<=b.cmp(this.m)&&b.isub(this.m);return b._forceRed(this)};v.prototype.iadd=function(b,a){this._verify2(b,a);b=b.iadd(a);0<=b.cmp(this.m)&&b.isub(this.m);return b};v.prototype.sub=function(b,a){this._verify2(b,a);b=b.sub(a);0>b.cmpn(0)&&b.iadd(this.m);return b._forceRed(this)};
v.prototype.isub=function(b,a){this._verify2(b,a);b=b.isub(a);0>b.cmpn(0)&&b.iadd(this.m);return b};v.prototype.shl=function(b,a){this._verify1(b);return this.imod(b.ushln(a))};v.prototype.imul=function(b,a){this._verify2(b,a);return this.imod(b.imul(a))};v.prototype.mul=function(b,a){this._verify2(b,a);return this.imod(b.mul(a))};v.prototype.isqr=function(b){return this.imul(b,b.clone())};v.prototype.sqr=function(b){return this.mul(b,b)};v.prototype.sqrt=function(a){if(a.isZero())return a.clone();
var c=this.m.andln(3);m(1===c%2);if(3===c)return c=this.m.add(new b(1)).iushrn(2),this.pow(a,c);for(var d=this.m.subn(1),e=0;!d.isZero()&&0===d.andln(1);)e++,d.iushrn(1);m(!d.isZero());c=(new b(1)).toRed(this);var f=c.redNeg(),g=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=(new b(2*h*h)).toRed(this);0!==this.pow(h,g).cmp(f);)h.redIAdd(f);g=this.pow(h,d);f=this.pow(a,d.addn(1).iushrn(1));a=this.pow(a,d);for(d=e;0!==a.cmp(c);){h=a;for(e=0;0!==h.cmp(c);e++)h=h.redSqr();m(e<d);g=this.pow(g,(new b(1)).iushln(d-
e-1));f=f.redMul(g);g=g.redSqr();a=a.redMul(g);d=e}return f};v.prototype.invm=function(b){b=b._invmp(this.m);return 0!==b.negative?(b.negative=0,this.imod(b).redNeg()):this.imod(b)};v.prototype.pow=function(a,c){if(c.isZero())return(new b(1)).toRed(this);if(0===c.cmpn(1))return a.clone();var d=Array(16);d[0]=(new b(1)).toRed(this);d[1]=a;for(var e=2;e<d.length;e++)d[e]=this.mul(d[e-1],a);a=d[0];var f=0,g=0,h=c.bitLength()%26;0===h&&(h=26);for(e=c.length-1;0<=e;e--){var r=c.words[e];for(--h;0<=h;h--){var l=
r>>h&1;a!==d[0]&&(a=this.sqr(a));if(0===l&&0===f)g=0;else if(f<<=1,f|=l,g++,4===g||0===e&&0===h)a=this.mul(a,d[f]),f=g=0}h=26}return a};v.prototype.convertTo=function(b){var a=b.umod(this.m);return a===b?a.clone():a};v.prototype.convertFrom=function(b){b=b.clone();b.red=null;return b};b.mont=function(b){return new w(b)};h(w,v);w.prototype.convertTo=function(b){return this.imod(b.ushln(this.shift))};w.prototype.convertFrom=function(b){b=this.imod(b.mul(this.rinv));b.red=null;return b};w.prototype.imul=
function(b,a){if(b.isZero()||a.isZero())return b.words[0]=0,b.length=1,b;b=b.imul(a);a=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);a=b=b.isub(a).iushrn(this.shift);0<=b.cmp(this.m)?a=b.isub(this.m):0>b.cmpn(0)&&(a=b.iadd(this.m));return a._forceRed(this)};w.prototype.mul=function(a,c){if(a.isZero()||c.isZero())return(new b(0))._forceRed(this);a=a.mul(c);c=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);c=a=a.isub(c).iushrn(this.shift);0<=a.cmp(this.m)?c=a.isub(this.m):
0>a.cmpn(0)&&(c=a.iadd(this.m));return c._forceRed(this)};w.prototype.invm=function(b){return this.imod(b._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===typeof q||q,this)},{buffer:105}],97:[function(a,q,p){q.exports=function(a){var k,n,h,b=a.length;for(k=n=0;k<b;++k)n+=a[k].length;var g=Array(n),e=0;for(k=0;k<b;++k){var t=a[k],l=t.length;for(n=0;n<l;++n){var f=g[e++]=Array(l-1),d=0;for(h=0;h<l;++h)h!==n&&(f[d++]=t[h]);n&1&&(h=f[1],f[1]=f[0],f[0]=h)}}return g}},{}],98:[function(a,q,
p){function n(b,a,e,d){for(var c=0,f=0,g=0,h=b.length;g<h;++g){var l=b[g],k;a:{for(k=0;k<a;++k)if(!(l[k]<=l[k+a])){k=!0;break a}k=!1}if(!k){for(k=0;k<2*a;++k)e[c++]=l[k];d[f++]=g}}return f}function k(a,e,f,d){var c=a.length,r=e.length;if(!(0>=c||0>=r)){var l=a[0].length>>>1;if(!(0>=l)){var k=h.mallocDouble(2*l*c),t=h.mallocInt32(c);c=n(a,l,k,t);if(0<c){if(1===l&&d){b.init(c);var m=b.sweepComplete(l,f,0,c,k,t,0,c,k,t)}else{a=h.mallocDouble(2*l*r);var A=h.mallocInt32(r);r=n(e,l,a,A);0<r&&(b.init(c+
r),m=1===l?b.sweepBipartite(l,f,0,c,k,t,0,r,a,A):g(l,f,d,c,k,t,r,a,A),h.free(a),h.free(A))}h.free(k);h.free(t)}return m}}}function m(b,a){e.push([b,a])}q.exports=function(b,a,f){switch(arguments.length){case 1:return e=[],k(b,b,m,!0),e;case 2:if("function"===typeof a)return k(b,b,a,!0);e=[];k(b,a,m,!1);return e;case 3:return k(b,a,f,!1);default:throw Error("box-intersect: Invalid arguments");}};var h=a("typedarray-pool"),b=a("./lib/sweep"),g=a("./lib/intersect"),e},{"./lib/intersect":100,"./lib/sweep":104,
"typedarray-pool":543}],99:[function(a,q,p){function n(a){function h(b,e){var d="bruteForce"+(b?"Red":"Blue")+(e?"Flip":"")+(a?"Full":""),c=["function ",d,"(",k.join(),"){","var ","es","\x3d2*","d",";"],f="for(var j\x3dbs,bp\x3des*bs;j\x3cbe;++j,bp+\x3des){var y0\x3dbb[ax+bp],"+(a?"y1\x3dbb[ax+bp+d],":"")+"yi\x3dbi[j];";b?c.push("for(var i\x3drs,rp\x3des*rs;i\x3cre;++i,rp+\x3des){var x0\x3drb[ax+rp],x1\x3drb[ax+rp+d],xi\x3dri[i];","Q",":",f):c.push(f,"Q",":","for(var i\x3drs,rp\x3des*rs;i\x3cre;++i,rp+\x3des){var x0\x3drb[ax+rp],x1\x3drb[ax+rp+d],xi\x3dri[i];");
a?c.push("if(y1\x3cx0||x1\x3cy0)continue;"):e?c.push("if(y0\x3c\x3dx0||x1\x3cy0)continue;"):c.push("if(y0\x3cx0||x1\x3cy0)continue;");c.push("for(var k\x3dax+1;k\x3cd;++k){var r0\x3drb[k+rp],r1\x3drb[k+d+rp],b0\x3dbb[k+bp],b1\x3dbb[k+d+bp];if(r1\x3cb0||b1\x3cr0)continue Q;}var rv\x3dvv(");e?c.push("yi,xi"):c.push("xi,yi");c.push(");if(rv!\x3d\x3dvoid 0)return rv;}}}");b=c.join("");g.push(b);t.push("return "+d+"("+k.join()+");")}var b="bruteForce"+(a?"Full":"Partial"),g=[],e=k.slice();a||e.splice(3,
0,"fp");var t=["function "+b+"("+e.join()+"){"];t.push("if(re-rs\x3ebe-bs){");a?(h(!0,!1),t.push("}else{"),h(!1,!1)):(t.push("if(fp){"),h(!0,!0),t.push("}else{"),h(!0,!1),t.push("}}else{if(fp){"),h(!1,!0),t.push("}else{"),h(!1,!1),t.push("}"));t.push("}}return "+b);b=g.join("")+t.join("");return(new Function(b))()}var k="d ax vv rs re rb ri bs be bb bi".split(" ");p.partial=n(!1);p.full=n(!0)},{}],100:[function(a,q,p){function n(b,a,c,d,e,f,g,h,r){var l=y*b;z[l]=a;z[l+1]=c;z[l+2]=d;z[l+3]=e;z[l+4]=
f;z[l+5]=g;b*=A;x[b]=h;x[b+1]=r}q.exports=function(a,B,D,G,E,p,q,J,H){var C=8*m.log2(G+q+1)*(a+1)|0,M=m.nextPow2(y*C);z.length<M&&(k.free(z),z=k.mallocInt32(M));C=m.nextPow2(A*C);x<C&&(k.free(x),x=k.mallocDouble(C));C=0;M=2*a;n(C++,0,0,G,0,q,D?16:0,-Infinity,Infinity);for(D||n(C++,0,0,q,0,G,1,-Infinity,Infinity);0<C;){--C;D=C*y;var I=z[D];q=z[D+1];var N=z[D+2],F=z[D+3],L=z[D+4];D=z[D+5];G=C*A;var Q=x[G],T=x[G+1],V=D&1,Y=!!(D&16),ca=E,Z=p,R=J;G=H;V&&(ca=J,Z=H,R=E,G=p);if(D&2&&(N=r(a,I,q,N,ca,Z,T),
q>=N))continue;if(D&4&&(q=u(a,I,q,N,ca,Z,Q),q>=N))continue;D=N-q;var U=L-F;if(Y){if(a*D*(D+U)<f){var X=g.scanComplete(a,I,B,q,N,ca,Z,F,L,R,G);if(void 0!==X)return X;continue}}else if(a*Math.min(D,U)<t){X=h(a,I,B,V,q,N,ca,Z,F,L,R,G);if(void 0!==X)return X;continue}else if(a*D*U<l){X=g.scanBipartite(a,I,B,V,q,N,ca,Z,F,L,R,G);if(void 0!==X)return X;continue}D=d(a,I,q,N,ca,Z,Q,T);if(q<D)if(a*(D-q)<t){if(X=b(a,I+1,B,q,D,ca,Z,F,L,R,G),void 0!==X)return X}else if(I===a-2){if(X=V?g.sweepBipartite(a,B,F,L,
R,G,q,D,ca,Z):g.sweepBipartite(a,B,q,D,ca,Z,F,L,R,G),void 0!==X)return X}else n(C++,I+1,q,D,F,L,V,-Infinity,Infinity),n(C++,I+1,F,L,q,D,V^1,-Infinity,Infinity);if(D<N)if(q=e(a,I,F,L,R,G),X=R[M*q+I],U=c(a,I,q,L,R,G,X),U<L&&n(C++,I,D,N,U,L,(V|4)+(Y?16:0),X,T),F<q&&n(C++,I,D,N,F,q,(V|2)+(Y?16:0),Q,X),q+1===U){if(Y)a:{F=a;L=B;G=G[q];V=2*F;q*=V;Q=R[q+I];T=D;D*=V;b:for(;T<N;++T,D+=V)if(Y=Z[T],Y!==G&&(U=ca[D+I],X=ca[D+I+F],!(Q<U||X<Q))){for(var ea=I+1;ea<F;++ea){U=ca[D+ea];X=ca[D+ea+F];var fa=R[q+ea+F];
if(X<R[q+ea]||fa<U)continue b}Y=L(Y,G);if(void 0!==Y){X=Y;break a}}X=void 0}else a:{F=a;L=B;G=G[q];Q=2*F;q*=Q;T=R[q+I];Y=D;D*=Q;b:for(;Y<N;++Y,D+=Q)if(U=ca[D+I],X=ca[D+I+F],!(T<U||X<T||V&&T===U)){ea=Z[Y];for(fa=I+1;fa<F;++fa){U=ca[D+fa];X=ca[D+fa+F];var la=R[q+fa+F];if(X<R[q+fa]||la<U)continue b}U=V?L(G,ea):L(ea,G);if(void 0!==U){X=U;break a}}X=void 0}if(void 0!==X)return X}else if(q<U)if(Y){if(N=v(a,I,D,N,ca,Z,X),D<N)if(F=c(a,I,D,N,ca,Z,X),I===a-2){if(D<F&&(X=g.sweepComplete(a,B,D,F,ca,Z,q,U,R,G),
void 0!==X)||F<N&&(X=g.sweepBipartite(a,B,F,N,ca,Z,q,U,R,G),void 0!==X))return X}else D<F&&n(C++,I+1,D,F,q,U,16,-Infinity,Infinity),F<N&&(n(C++,I+1,F,N,q,U,0,-Infinity,Infinity),n(C++,I+1,q,U,F,N,1,-Infinity,Infinity))}else N=V?w(a,I,D,N,ca,Z,X):v(a,I,D,N,ca,Z,X),D<N&&(I===a-2?V?g.sweepBipartite(a,B,q,U,R,G,D,N,ca,Z):g.sweepBipartite(a,B,D,N,ca,Z,q,U,R,G):(n(C++,I+1,D,N,q,U,V,-Infinity,Infinity),n(C++,I+1,q,U,D,N,V^1,-Infinity,Infinity)))}};var k=a("typedarray-pool"),m=a("bit-twiddle");q=a("./brute");
var h=q.partial,b=q.full,g=a("./sweep"),e=a("./median");a=a("./partition");var t=128,l=4194304,f=4194304,d=a("!(lo\x3e\x3dp0)\x26\x26!(p1\x3e\x3dhi)",["p0","p1"]),c=a("lo\x3d\x3d\x3dp0",["p0"]),r=a("lo\x3cp0",["p0"]),u=a("hi\x3c\x3dp0",["p0"]),v=a("lo\x3c\x3dp0\x26\x26p0\x3c\x3dhi",["p0"]),w=a("lo\x3cp0\x26\x26p0\x3c\x3dhi",["p0"]),y=6,A=2,z=k.mallocInt32(1024),x=k.mallocDouble(1024)},{"./brute":99,"./median":101,"./partition":102,"./sweep":104,"bit-twiddle":94,"typedarray-pool":543}],101:[function(a,
q,p){q.exports=function(a,h,b,g,e,t){if(g<=b+1)return b;var l=b,f=g;g=g+b>>>1;for(var d=2*a,c,r;l<f;){if(f-l<k){c=h;r=e;for(var u=t,m=2*a,w=m*(l+1)+c,y=l+1;y<f;++y,w+=m)for(var A=r[w],z=y,x=m*(y-1);z>l&&r[x+c]>A;--z,x-=m){for(var C=x,B=x+m,D=0;D<m;++D,++C,++B){var G=r[C];r[C]=r[B];r[B]=G}C=u[z];u[z]=u[z-1];u[z-1]=C}break}w=f-l;c=Math.random()*w+l|0;r=e[d*c+h];m=Math.random()*w+l|0;u=e[d*m+h];y=Math.random()*w+l|0;w=e[d*y+h];r<=u?w>=u?(c=m,r=u):r>=w||(c=y,r=w):u>=w?(c=m,r=u):w>=r||(c=y,r=w);u=d*(f-
1);m=d*c;for(w=0;w<d;++w,++u,++m)y=e[u],e[u]=e[m],e[m]=y;u=t[f-1];t[f-1]=t[c];t[c]=u;c=n(a,h,l,f-1,e,t,r);u=d*(f-1);m=d*c;for(w=0;w<d;++w,++u,++m)y=e[u],e[u]=e[m],e[m]=y;u=t[f-1];t[f-1]=t[c];t[c]=u;if(g<c){for(f=c-1;l<f&&e[d*(f-1)+h]===r;)--f;f+=1}else if(c<g)for(l=c+1;l<f&&e[d*l+h]===r;)l+=1;else break}return n(a,h,b,g,e,t,e[d*g+h])};var n=a("./partition")("lo\x3cp0",["p0"]),k=8},{"./partition":102}],102:[function(a,q,p){q.exports=function(a,m){m="abcdef".split("").concat(m);var h=[];0<=a.indexOf("lo")&&
h.push("lo\x3de[k+n]");0<=a.indexOf("hi")&&h.push("hi\x3de[k+o]");m.push(n.replace("_",h.join()).replace("$",a));return Function.apply(void 0,m)};var n="for(var j\x3d2*a,k\x3dj*c,l\x3dk,m\x3dc,n\x3db,o\x3da+b,p\x3dc;d\x3ep;++p,k+\x3dj){var _;if($)if(m\x3d\x3d\x3dp)m+\x3d1,l+\x3dj;else{for(var s\x3d0;j\x3es;++s){var t\x3de[k+s];e[k+s]\x3de[l],e[l++]\x3dt}var u\x3df[p];f[p]\x3df[m],f[m++]\x3du}}return m"},{}],103:[function(a,q,p){function n(b,a,d){for(var c=2*(b+1),e=b+1;e<=a;++e){for(var f=d[c++],
g=d[c++],h=e,l=c-2;h-- >b;){var k=d[l-2],t=d[l-1];if(k<f)break;else if(k===f&&t<g)break;d[l]=k;d[l+1]=t;l-=2}d[l]=f;d[l+1]=g}}function k(b,a,d){b*=2;a*=2;var c=d[b],e=d[b+1];d[b]=d[a];d[b+1]=d[a+1];d[a]=c;d[a+1]=e}function m(b,a,d){b*=2;a*=2;d[b]=d[a];d[b+1]=d[a+1]}function h(b,a,d,c,e){b*=2;a*=2;e[b]=e[a];e[a]=d;e[b+1]=e[a+1];e[a+1]=c}function b(b,a,d){b*=2;a*=2;var c=d[b],e=d[a];return c<e?!1:c===e?d[b+1]>d[a+1]:!0}function g(b,a,d,c){b*=2;var e=c[b];return e<a?!0:e===a?c[b+1]<d:!1}function e(a,
f,d){var c=(f-a+1)/6|0,r=a+c,l=f-c,v=a+f>>1,w=v-c,y=v+c,A=r,z=w,x=v,C=y,B=l;c=a+1;var D=f-1;if(b(A,z,d)){var G=A;A=z;z=G}b(C,B,d)&&(G=C,C=B,B=G);b(A,x,d)&&(G=A,A=x,x=G);b(z,x,d)&&(G=z,z=x,x=G);b(A,C,d)&&(G=A,A=C,C=G);b(x,C,d)&&(G=x,x=C,C=G);b(z,B,d)&&(G=z,z=B,B=G);b(z,x,d)&&(G=z,z=x,x=G);b(C,B,d)&&(G=C,C=B,B=G);G=d[2*z];z=d[2*z+1];var p=d[2*C];C=d[2*C+1];A*=2;x*=2;B*=2;r*=2;v*=2;l*=2;for(var q=0;2>q;++q){var L=d[x+q],J=d[B+q];d[r+q]=d[A+q];d[v+q]=L;d[l+q]=J}m(w,a,d);m(y,f,d);for(w=c;w<=D;++w)if(g(w,
G,z,d))w!==c&&k(w,c,d),++c;else if(!g(w,p,C,d))for(;;)if(g(D,p,C,d)){g(D,G,z,d)?(y=w,l=c,v=D,A=d,y*=2,l*=2,v*=2,r=A[y],x=A[y+1],A[y]=A[l],A[y+1]=A[l+1],A[l]=A[v],A[l+1]=A[v+1],A[v]=r,A[v+1]=x,++c):k(w,D,d);--D;break}else if(--D<w)break;h(a,c-1,G,z,d);h(f,D+1,p,C,d);c-2-a<=t?n(a,c-2,d):e(a,c-2,d);f-(D+2)<=t?n(D+2,f,d):e(D+2,f,d);D-c<=t?n(c,D,d):e(c,D,d)}q.exports=function(b,a){a<=4*t?n(0,a-1,b):e(0,a-1,b)};var t=32},{}],104:[function(a,q,p){function n(b,a,c,d){d=a[d];c=b[c-1];b[d]=c;a[c]=d}q.exports=
{init:function(b){b=m.nextPow2(b);g.length<b&&(k.free(g),g=k.mallocInt32(b));e.length<b&&(k.free(e),e=k.mallocInt32(b));t.length<b&&(k.free(t),t=k.mallocInt32(b));l.length<b&&(k.free(l),l=k.mallocInt32(b));f.length<b&&(k.free(f),f=k.mallocInt32(b));d.length<b&&(k.free(d),d=k.mallocInt32(b));b*=8;c.length<b&&(k.free(c),c=k.mallocDouble(b))},sweepBipartite:function(a,d,f,k,m,A,z,x,C,B){var r=0,u=2*a;--a;for(var v=u-1;f<k;++f){var w=A[f],y=u*f;c[r++]=m[y+a];c[r++]=-(w+1);c[r++]=m[y+v];c[r++]=w}for(f=
z;f<x;++f)w=B[f]+b,k=u*f,c[r++]=C[k+a],c[r++]=-w,c[r++]=C[k+v],c[r++]=w;x=r>>>1;h(c,x);for(f=B=C=0;f<x;++f)if(r=c[2*f+1]|0,r>=b)r=r-b|0,n(t,l,B--,r);else if(0<=r)n(g,e,C--,r);else if(r<=-b){r=-r-b|0;for(u=0;u<C;++u)if(k=d(g[u],r),void 0!==k)return k;u=l;k=B++;t[k]=r;u[r]=k}else{r=-r-1|0;for(u=0;u<B;++u)if(k=d(r,t[u]),void 0!==k)return k;u=e;k=C++;g[k]=r;u[r]=k}},sweepComplete:function(b,a,k,m,y,A,z,x,C,B){var r=0,u=2*b;--b;for(var v=u-1;k<m;++k){var w=A[k]+1<<1,p=u*k;c[r++]=y[p+b];c[r++]=-w;c[r++]=
y[p+v];c[r++]=w}for(k=z;k<x;++k)w=B[k]+1<<1,m=u*k,c[r++]=C[m+b],c[r++]=-w|1,c[r++]=C[m+v],c[r++]=w|1;x=r>>>1;h(c,x);for(k=r=B=C=0;k<x;++k)if(u=c[2*k+1]|0,m=u&1,k<x-1&&u>>1===c[2*k+3]>>1&&(m=2,k+=1),0>u){u=-(u>>1)-1;for(y=0;y<r;++y)if(A=a(f[y],u),void 0!==A)return A;if(0!==m)for(y=0;y<C;++y)if(A=a(g[y],u),void 0!==A)return A;if(1!==m)for(y=0;y<B;++y)if(A=a(t[y],u),void 0!==A)return A;0===m?(m=e,y=C++,g[y]=u,m[u]=y):1===m?(m=l,y=B++,t[y]=u,m[u]=y):2===m&&(m=d,y=r++,f[y]=u,m[u]=y)}else u=(u>>1)-1,0===
m?n(g,e,C--,u):1===m?n(t,l,B--,u):2===m&&n(f,d,r--,u)},scanBipartite:function(a,d,f,l,k,t,m,x,C,B,D,p){var r=0,u=2*a,v=d+a,w=1,y=1;for(l?y=b:w=b;k<t;++k){var A=k+w,z=u*k;c[r++]=m[z+d];c[r++]=-A;c[r++]=m[z+v];c[r++]=A}for(k=C;k<B;++k)A=k+y,t=u*k,c[r++]=D[t+d],c[r++]=-A;B=r>>>1;h(c,B);for(k=r=0;k<B;++k)if(A=c[2*k+1]|0,0>A)if(A=-A,A>=b?(y=!l,A-=b):(y=!!l,--A),y)y=e,t=r++,g[t]=A,y[A]=t;else a:for(y=p[A],A*=u,t=D[A+d+1],C=D[A+d+1+a],v=0;v<r;++v){z=g[v];var I=u*z;if(!(C<m[I+d+1]||m[I+d+1+a]<t)){for(var q=
d+2;q<a;++q)if(D[A+q+a]<m[I+q]||m[I+q+a]<D[A+q])continue a;z=x[z];z=l?f(y,z):f(z,y);if(void 0!==z)return z}}else n(g,e,r--,A-w)},scanComplete:function(a,d,e,f,l,k,t,m,n,B,D){for(var r=0,u=2*a,v=d+a;f<l;++f){var w=f+b,y=u*f;c[r++]=k[y+d];c[r++]=-w;c[r++]=k[y+v];c[r++]=w}for(f=m;f<n;++f)w=f+1,l=u*f,c[r++]=B[l+d],c[r++]=-w;n=r>>>1;h(c,n);for(f=r=0;f<n;++f)if(l=c[2*f+1]|0,0>l)if(w=-l,w>=b)g[r++]=w-b;else a:for(--w,l=D[w],w*=u,v=B[w+d+1],y=B[w+d+1+a],m=0;m<r;++m){var x=g[m],A=t[x];if(A===l)break;x*=u;
if(!(y<k[x+d+1]||k[x+d+1+a]<v)){for(var z=d+2;z<a;++z)if(B[w+z+a]<k[x+z]||k[x+z+a]<B[w+z])continue a;A=e(A,l);if(void 0!==A)return A}}else{w=l-b;for(m=r-1;0<=m;--m)if(g[m]===w){for(z=m+1;z<r;++z)g[z-1]=g[z];break}--r}}};var k=a("typedarray-pool"),m=a("bit-twiddle"),h=a("./sort"),b=268435456,g=k.mallocInt32(1024),e=k.mallocInt32(1024),t=k.mallocInt32(1024),l=k.mallocInt32(1024),f=k.mallocInt32(1024),d=k.mallocInt32(1024),c=k.mallocDouble(8192)},{"./sort":103,"bit-twiddle":94,"typedarray-pool":543}],
105:[function(a,q,p){},{}],106:[function(a,q,p){function n(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=d(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0}function k(b,a,c,e){var f;if("function"!==typeof c)throw new TypeError('"listener" argument must be a function');if(f=b._events){f.newListener&&(b.emit("newListener",a,c.listener?c.listener:c),f=b._events);var g=f[a]}else f=b._events=d(null),b._eventsCount=0;g?("function"===typeof g?
g=f[a]=e?[c,g]:[g,c]:e?g.unshift(c):g.push(c),g.warned||(c=void 0===b._maxListeners?n.defaultMaxListeners:b._maxListeners)&&0<c&&g.length>c&&(g.warned=!0,c=Error("Possible EventEmitter memory leak detected. "+g.length+' "'+String(a)+'" listeners added. Use emitter.setMaxListeners() to increase limit.'),c.name="MaxListenersExceededWarning",c.emitter=b,c.type=a,c.count=g.length,"object"===typeof console&&console.warn&&console.warn("%s: %s",c.name,c.message))):(f[a]=c,++b._eventsCount);return b}function m(){if(!this.fired)switch(this.target.removeListener(this.type,
this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var b=Array(arguments.length),a=0;a<b.length;++a)b[a]=arguments[a];this.listener.apply(this.target,b)}}function h(b,a,c){b={fired:!1,wrapFn:void 0,target:b,type:a,listener:c};a=r.call(m,
b);a.listener=c;return b.wrapFn=a}function b(b,a,c){b=b._events;if(!b)return[];a=b[a];if(!a)return[];if("function"===typeof a)return c?[a.listener||a]:[a];if(c)for(c=Array(a.length),b=0;b<c.length;++b)c[b]=a[b].listener||a[b];else c=e(a,a.length);return c}function g(b){var a=this._events;if(a){b=a[b];if("function"===typeof b)return 1;if(b)return b.length}return 0}function e(b,a){for(var c=Array(a),d=0;d<a;++d)c[d]=b[d];return c}function t(b){var a=function(){};a.prototype=b;return new a}function l(b){var a=
[],c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&a.push(c);return c}function f(b){var a=this;return function(){return a.apply(b,arguments)}}var d=Object.create||t,c=Object.keys||l,r=Function.prototype.bind||f;q.exports=n;n.EventEmitter=n;n.prototype._events=void 0;n.prototype._maxListeners=void 0;var u=10;try{a={};Object.defineProperty&&Object.defineProperty(a,"x",{value:0});var v=0===a.x}catch(w){v=!1}v?Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return u},
set:function(b){if("number"!==typeof b||0>b||b!==b)throw new TypeError('"defaultMaxListeners" must be a positive number');u=b}}):n.defaultMaxListeners=u;n.prototype.setMaxListeners=function(b){if("number"!==typeof b||0>b||isNaN(b))throw new TypeError('"n" argument must be a positive number');this._maxListeners=b;return this};n.prototype.getMaxListeners=function(){return void 0===this._maxListeners?n.defaultMaxListeners:this._maxListeners};n.prototype.emit=function(b){var a,c,d;var f="error"===b;if(d=
this._events)f=f&&null==d.error;else if(!f)return!1;if(f){1<arguments.length&&(a=arguments[1]);if(a instanceof Error)throw a;d=Error('Unhandled "error" event. ('+a+")");d.context=a;throw d;}a=d[b];if(!a)return!1;d="function"===typeof a;var g=arguments.length;switch(g){case 1:if(d)a.call(this);else for(d=a.length,a=e(a,d),f=0;f<d;++f)a[f].call(this);break;case 2:f=arguments[1];if(d)a.call(this,f);else for(d=a.length,a=e(a,d),g=0;g<d;++g)a[g].call(this,f);break;case 3:f=arguments[1];g=arguments[2];
if(d)a.call(this,f,g);else for(d=a.length,a=e(a,d),c=0;c<d;++c)a[c].call(this,f,g);break;case 4:f=arguments[1];g=arguments[2];c=arguments[3];if(d)a.call(this,f,g,c);else{d=a.length;a=e(a,d);for(var h=0;h<d;++h)a[h].call(this,f,g,c)}break;default:f=Array(g-1);for(c=1;c<g;c++)f[c-1]=arguments[c];if(d)a.apply(this,f);else for(d=a.length,a=e(a,d),g=0;g<d;++g)a[g].apply(this,f)}return!0};n.prototype.addListener=function(b,a){return k(this,b,a,!1)};n.prototype.on=n.prototype.addListener;n.prototype.prependListener=
function(b,a){return k(this,b,a,!0)};n.prototype.once=function(b,a){if("function"!==typeof a)throw new TypeError('"listener" argument must be a function');this.on(b,h(this,b,a));return this};n.prototype.prependOnceListener=function(b,a){if("function"!==typeof a)throw new TypeError('"listener" argument must be a function');this.prependListener(b,h(this,b,a));return this};n.prototype.removeListener=function(b,a){var c;if("function"!==typeof a)throw new TypeError('"listener" argument must be a function');
var e=this._events;if(!e)return this;var f=e[b];if(!f)return this;if(f===a||f.listener===a)0===--this._eventsCount?this._events=d(null):(delete e[b],e.removeListener&&this.emit("removeListener",b,f.listener||a));else if("function"!==typeof f){var g=-1;for(c=f.length-1;0<=c;c--)if(f[c]===a||f[c].listener===a){var h=f[c].listener;g=c;break}if(0>g)return this;if(0===g)f.shift();else{c=g+1;for(var r=f.length;c<r;g+=1,c+=1)f[g]=f[c];f.pop()}1===f.length&&(e[b]=f[0]);e.removeListener&&this.emit("removeListener",
b,h||a)}return this};n.prototype.removeAllListeners=function(b){var a=this._events;if(!a)return this;if(!a.removeListener)return 0===arguments.length?(this._events=d(null),this._eventsCount=0):a[b]&&(0===--this._eventsCount?this._events=d(null):delete a[b]),this;if(0===arguments.length){var e=c(a);for(a=0;a<e.length;++a){var f=e[a];"removeListener"!==f&&this.removeAllListeners(f)}this.removeAllListeners("removeListener");this._events=d(null);this._eventsCount=0;return this}e=a[b];if("function"===
typeof e)this.removeListener(b,e);else if(e)for(a=e.length-1;0<=a;a--)this.removeListener(b,e[a]);return this};n.prototype.listeners=function(a){return b(this,a,!0)};n.prototype.rawListeners=function(a){return b(this,a,!1)};n.listenerCount=function(b,a){return"function"===typeof b.listenerCount?b.listenerCount(a):g.call(b,a)};n.prototype.listenerCount=g;n.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],107:[function(a,q,p){(function(n){function k(b){if(2147483647<
b)throw new RangeError('The value "'+b+'" is invalid for option "size"');b=new Uint8Array(b);Object.setPrototypeOf(b,n.prototype);return b}function n(a,c,d){if("number"===typeof a){if("string"===typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return b(a)}return m(a,c,d)}function m(b,a,c){if("string"===typeof b){var d=a;if("string"!==typeof d||""===d)d="utf8";if(!n.isEncoding(d))throw new TypeError("Unknown encoding: "+d);a=l(b,d)|0;c=k(a);b=c.write(b,
d);b!==a&&(c=c.slice(0,b));return c}if(ArrayBuffer.isView(b))return g(b);if(null==b)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof b);if(q(b,ArrayBuffer)||b&&q(b.buffer,ArrayBuffer)){if(0>a||b.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(b.byteLength<a+(c||0))throw new RangeError('"length" is outside of buffer bounds');b=void 0===a&&void 0===c?new Uint8Array(b):void 0===c?
new Uint8Array(b,a):new Uint8Array(b,a,c);Object.setPrototypeOf(b,n.prototype);return b}if("number"===typeof b)throw new TypeError('The "value" argument must not be of type number. Received type number');d=b.valueOf&&b.valueOf();if(null!=d&&d!==b)return n.from(d,a,c);if(d=e(b))return d;$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof b[Symbol.toPrimitive])return $jscomp.initSymbol(),n.from(b[Symbol.toPrimitive]("string"),
a,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof b);}function h(b){if("number"!==typeof b)throw new TypeError('"size" argument must be of type number');if(0>b)throw new RangeError('The value "'+b+'" is invalid for option "size"');}function b(b){h(b);return k(0>b?0:t(b)|0)}function g(b){for(var a=0>b.length?0:t(b.length)|0,c=k(a),d=0;d<a;d+=1)c[d]=b[d]&255;return c}function e(b){if(n.isBuffer(b)){var a=
t(b.length)|0,c=k(a);if(0===c.length)return c;b.copy(c,0,0,a);return c}if(void 0!==b.length)return(a="number"!==typeof b.length)||(a=b.length,a=a!==a),a?k(0):g(b);if("Buffer"===b.type&&Array.isArray(b.data))return g(b.data)}function t(b){if(2147483647<=b)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return b|0}function l(b,a){if(n.isBuffer(b))return b.length;if(ArrayBuffer.isView(b)||q(b,ArrayBuffer))return b.byteLength;if("string"!==
typeof b)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof b);var c=b.length,d=2<arguments.length&&!0===arguments[2];if(!d&&0===c)return 0;for(var e=!1;;)switch(a){case "ascii":case "latin1":case "binary":return c;case "utf8":case "utf-8":return C(b).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*c;case "hex":return c>>>1;case "base64":return E.toByteArray(x(b)).length;default:if(e)return d?-1:C(b).length;
a=(""+a).toLowerCase();e=!0}}function f(b,a,c){var d=!1;if(void 0===a||0>a)a=0;if(a>this.length)return"";if(void 0===c||c>this.length)c=this.length;if(0>=c)return"";c>>>=0;a>>>=0;if(c<=a)return"";for(b||(b="utf8");;)switch(b){case "hex":b=a;a=c;c=this.length;if(!b||0>b)b=0;if(!a||0>a||a>c)a=c;d="";for(c=b;c<a;++c)b=d,d=this[c],d=16>d?"0"+d.toString(16):d.toString(16),d=b+d;return d;case "utf8":case "utf-8":return u(this,a,c);case "ascii":b="";for(c=Math.min(this.length,c);a<c;++a)b+=String.fromCharCode(this[a]&
127);return b;case "latin1":case "binary":b="";for(c=Math.min(this.length,c);a<c;++a)b+=String.fromCharCode(this[a]);return b;case "base64":return a=0===a&&c===this.length?E.fromByteArray(this):E.fromByteArray(this.slice(a,c)),a;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=this.slice(a,c);c="";for(b=0;b<a.length;b+=2)c+=String.fromCharCode(a[b]+256*a[b+1]);return c;default:if(d)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase();d=!0}}function d(b,a,c){var d=b[a];b[a]=
b[c];b[c]=d}function c(b,a,c,d,e){if(0===b.length)return-1;"string"===typeof c?(d=c,c=0):2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648);c=+c;c!==c&&(c=e?0:b.length-1);0>c&&(c=b.length+c);if(c>=b.length){if(e)return-1;c=b.length-1}else if(0>c)if(e)c=0;else return-1;"string"===typeof a&&(a=n.from(a,d));if(n.isBuffer(a))return 0===a.length?-1:r(b,a,c,d,e);if("number"===typeof a)return a&=255,"function"===typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(b,a,c):Uint8Array.prototype.lastIndexOf.call(b,
a,c):r(b,[a],c,d,e);throw new TypeError("val must be string, number or Buffer");}function r(b,a,c,d,e){function f(b,a){return 1===g?b[a]:b.readUInt16BE(a*g)}var g=1,h=b.length,r=a.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>b.length||2>a.length)return-1;g=2;h/=2;r/=2;c/=2}if(e)for(d=-1;c<h;c++)if(f(b,c)===f(a,-1===d?0:c-d)){if(-1===d&&(d=c),c-d+1===r)return d*g}else-1!==d&&(c-=c-d),d=-1;else for(c+r>h&&(c=h-r);0<=c;c--){h=!0;for(d=
0;d<r;d++)if(f(b,c+d)!==f(a,d)){h=!1;break}if(h)return c}return-1}function u(b,a,c){c=Math.min(b.length,c);for(var d=[];a<c;){var e=b[a],f=null,g=239<e?4:223<e?3:191<e?2:1;if(a+g<=c)switch(g){case 1:128>e&&(f=e);break;case 2:var h=b[a+1];128===(h&192)&&(e=(e&31)<<6|h&63,127<e&&(f=e));break;case 3:h=b[a+1];var r=b[a+2];128===(h&192)&&128===(r&192)&&(e=(e&15)<<12|(h&63)<<6|r&63,2047<e&&(55296>e||57343<e)&&(f=e));break;case 4:h=b[a+1];r=b[a+2];var l=b[a+3];128===(h&192)&&128===(r&192)&&128===(l&192)&&
(e=(e&15)<<18|(h&63)<<12|(r&63)<<6|l&63,65535<e&&1114112>e&&(f=e))}null===f?(f=65533,g=1):65535<f&&(f-=65536,d.push(f>>>10&1023|55296),f=56320|f&1023);d.push(f);a+=g}b=d.length;if(b<=J)d=String.fromCharCode.apply(String,d);else{c="";for(a=0;a<b;)c+=String.fromCharCode.apply(String,d.slice(a,a+=J));d=c}return d}function v(b,a,c){if(0!==b%1||0>b)throw new RangeError("offset is not uint");if(b+a>c)throw new RangeError("Trying to access beyond buffer length");}function w(b,a,c,d,e,f){if(!n.isBuffer(b))throw new TypeError('"buffer" argument must be a Buffer instance');
if(a>e||a<f)throw new RangeError('"value" argument is out of bounds');if(c+d>b.length)throw new RangeError("Index out of range");}function y(b,a,c,d,e,f){if(c+d>b.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range");}function A(b,a,c,d,e){a=+a;c>>>=0;e||y(b,a,c,4,3.4028234663852886E38,-3.4028234663852886E38);F.write(b,a,c,d,23,4);return c+4}function z(b,a,c,d,e){a=+a;c>>>=0;e||y(b,a,c,8,1.7976931348623157E308,-1.7976931348623157E308);F.write(b,a,c,d,
52,8);return c+8}function x(b){b=b.split("\x3d")[0];b=b.trim().replace(H,"");if(2>b.length)return"";for(;0!==b.length%4;)b+="\x3d";return b}function C(b,a){a=a||Infinity;for(var c,d=b.length,e=null,f=[],g=0;g<d;++g){c=b.charCodeAt(g);if(55295<c&&57344>c){if(!e){if(56319<c){-1<(a-=3)&&f.push(239,191,189);continue}else if(g+1===d){-1<(a-=3)&&f.push(239,191,189);continue}e=c;continue}if(56320>c){-1<(a-=3)&&f.push(239,191,189);e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&-1<(a-=3)&&f.push(239,191,
189);e=null;if(128>c){if(0>--a)break;f.push(c)}else if(2048>c){if(0>(a-=2))break;f.push(c>>6|192,c&63|128)}else if(65536>c){if(0>(a-=3))break;f.push(c>>12|224,c>>6&63|128,c&63|128)}else if(1114112>c){if(0>(a-=4))break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw Error("Invalid code point");}return f}function B(b){for(var a=[],c=0;c<b.length;++c)a.push(b.charCodeAt(c)&255);return a}function D(b,a,c,d){for(var e=0;e<d&&!(e+c>=a.length||e>=b.length);++e)a[e+c]=b[e];return e}function q(b,
a){return b instanceof a||null!=b&&null!=b.constructor&&null!=b.constructor.name&&b.constructor.name===a.name}var E=a("base64-js"),F=a("ieee754");$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();var L="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;p.Buffer=n;p.SlowBuffer=function(b){+b!=b&&(b=0);return n.alloc(+b)};p.INSPECT_MAX_BYTES=50;p.kMaxLength=2147483647;n.TYPED_ARRAY_SUPPORT=function(){try{var b=new Uint8Array(1),a={foo:function(){return 42}};
Object.setPrototypeOf(a,Uint8Array.prototype);Object.setPrototypeOf(b,a);return 42===b.foo()}catch(I){return!1}}();n.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}});Object.defineProperty(n.prototype,
"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}});$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!==typeof Symbol&&null!=Symbol.species&&n[Symbol.species]===n&&($jscomp.initSymbol(),Object.defineProperty(n,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}));n.poolSize=8192;n.from=function(b,a,c){return m(b,a,c)};Object.setPrototypeOf(n.prototype,Uint8Array.prototype);Object.setPrototypeOf(n,Uint8Array);n.alloc=function(b,
a,c){h(b);b=0>=b?k(b):void 0!==a?"string"===typeof c?k(b).fill(a,c):k(b).fill(a):k(b);return b};n.allocUnsafe=function(a){return b(a)};n.allocUnsafeSlow=function(a){return b(a)};n.isBuffer=function(b){return null!=b&&!0===b._isBuffer&&b!==n.prototype};n.compare=function(b,a){q(b,Uint8Array)&&(b=n.from(b,b.offset,b.byteLength));q(a,Uint8Array)&&(a=n.from(a,a.offset,a.byteLength));if(!n.isBuffer(b)||!n.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
if(b===a)return 0;for(var c=b.length,d=a.length,e=0,f=Math.min(c,d);e<f;++e)if(b[e]!==a[e]){c=b[e];d=a[e];break}return c<d?-1:d<c?1:0};n.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};n.concat=function(b,a){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return n.alloc(0);
var c;if(void 0===a)for(c=a=0;c<b.length;++c)a+=b[c].length;a=n.allocUnsafe(a);var d=0;for(c=0;c<b.length;++c){var e=b[c];q(e,Uint8Array)&&(e=n.from(e));if(!n.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(a,d);d+=e.length}return a};n.byteLength=l;n.prototype._isBuffer=!0;n.prototype.swap16=function(){var b=this.length;if(0!==b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<b;a+=2)d(this,a,a+1);return this};n.prototype.swap32=
function(){var b=this.length;if(0!==b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<b;a+=4)d(this,a,a+3),d(this,a+1,a+2);return this};n.prototype.swap64=function(){var b=this.length;if(0!==b%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<b;a+=8)d(this,a,a+7),d(this,a+1,a+6),d(this,a+2,a+5),d(this,a+3,a+4);return this};n.prototype.toString=function(){var b=this.length;return 0===b?"":0===arguments.length?u(this,0,b):f.apply(this,
arguments)};n.prototype.toLocaleString=n.prototype.toString;n.prototype.equals=function(b){if(!n.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:0===n.compare(this,b)};n.prototype.inspect=function(){var b=p.INSPECT_MAX_BYTES;var a=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim();this.length>b&&(a+=" ... ");return"\x3cBuffer "+a+"\x3e"};L&&(n.prototype[L]=n.prototype.inspect);n.prototype.compare=function(b,a,c,d,e){q(b,Uint8Array)&&(b=n.from(b,b.offset,b.byteLength));
if(!n.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof b);void 0===a&&(a=0);void 0===c&&(c=b?b.length:0);void 0===d&&(d=0);void 0===e&&(e=this.length);if(0>a||c>b.length||0>d||e>this.length)throw new RangeError("out of range index");if(d>=e&&a>=c)return 0;if(d>=e)return-1;if(a>=c)return 1;a>>>=0;c>>>=0;d>>>=0;e>>>=0;if(this===b)return 0;var f=e-d,g=c-a,h=Math.min(f,g);d=this.slice(d,e);b=b.slice(a,c);for(a=0;a<h;++a)if(d[a]!==
b[a]){f=d[a];g=b[a];break}return f<g?-1:g<f?1:0};n.prototype.includes=function(b,a,c){return-1!==this.indexOf(b,a,c)};n.prototype.indexOf=function(b,a,d){return c(this,b,a,d,!0)};n.prototype.lastIndexOf=function(b,a,d){return c(this,b,a,d,!1)};n.prototype.write=function(b,a,c,d){if(void 0===a)d="utf8",c=this.length,a=0;else if(void 0===c&&"string"===typeof a)d=a,c=this.length,a=0;else if(isFinite(a))a>>>=0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
var e=this.length-a;if(void 0===c||c>e)c=e;if(0<b.length&&(0>c||0>a)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(e=!1;;)switch(d){case "hex":a:{a=Number(a)||0;d=this.length-a;c?(c=Number(c),c>d&&(c=d)):c=d;d=b.length;c>d/2&&(c=d/2);for(d=0;d<c;++d){e=parseInt(b.substr(2*d,2),16);if(e!==e){b=d;break a}this[a+d]=e}b=d}return b;case "utf8":case "utf-8":return D(C(b,this.length-a),this,a,c);case "ascii":return D(B(b),this,a,c);case "latin1":case "binary":return D(B(b),
this,a,c);case "base64":return D(E.toByteArray(x(b)),this,a,c);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=b;e=this.length-a;for(var f=[],g=0;g<d.length&&!(0>(e-=2));++g){var h=d.charCodeAt(g);b=h>>8;h%=256;f.push(h);f.push(b)}return D(f,this,a,c);default:if(e)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();e=!0}};n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;n.prototype.slice=function(b,a){var c=
this.length;b=~~b;a=void 0===a?c:~~a;0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c);0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c);a<b&&(a=b);b=this.subarray(b,a);Object.setPrototypeOf(b,n.prototype);return b};n.prototype.readUIntLE=function(b,a,c){b>>>=0;a>>>=0;c||v(b,a,this.length);c=this[b];for(var d=1,e=0;++e<a&&(d*=256);)c+=this[b+e]*d;return c};n.prototype.readUIntBE=function(b,a,c){b>>>=0;a>>>=0;c||v(b,a,this.length);c=this[b+--a];for(var d=1;0<a&&(d*=256);)c+=this[b+--a]*d;return c};n.prototype.readUInt8=function(b,
a){b>>>=0;a||v(b,1,this.length);return this[b]};n.prototype.readUInt16LE=function(b,a){b>>>=0;a||v(b,2,this.length);return this[b]|this[b+1]<<8};n.prototype.readUInt16BE=function(b,a){b>>>=0;a||v(b,2,this.length);return this[b]<<8|this[b+1]};n.prototype.readUInt32LE=function(b,a){b>>>=0;a||v(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};n.prototype.readUInt32BE=function(b,a){b>>>=0;a||v(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};
n.prototype.readIntLE=function(b,a,c){b>>>=0;a>>>=0;c||v(b,a,this.length);c=this[b];for(var d=1,e=0;++e<a&&(d*=256);)c+=this[b+e]*d;c>=128*d&&(c-=Math.pow(2,8*a));return c};n.prototype.readIntBE=function(b,a,c){b>>>=0;a>>>=0;c||v(b,a,this.length);c=a;for(var d=1,e=this[b+--c];0<c&&(d*=256);)e+=this[b+--c]*d;e>=128*d&&(e-=Math.pow(2,8*a));return e};n.prototype.readInt8=function(b,a){b>>>=0;a||v(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};n.prototype.readInt16LE=function(b,a){b>>>=
0;a||v(b,2,this.length);b=this[b]|this[b+1]<<8;return b&32768?b|4294901760:b};n.prototype.readInt16BE=function(b,a){b>>>=0;a||v(b,2,this.length);b=this[b+1]|this[b]<<8;return b&32768?b|4294901760:b};n.prototype.readInt32LE=function(b,a){b>>>=0;a||v(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};n.prototype.readInt32BE=function(b,a){b>>>=0;a||v(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};n.prototype.readFloatLE=function(b,a){b>>>=0;a||v(b,4,
this.length);return F.read(this,b,!0,23,4)};n.prototype.readFloatBE=function(b,a){b>>>=0;a||v(b,4,this.length);return F.read(this,b,!1,23,4)};n.prototype.readDoubleLE=function(b,a){b>>>=0;a||v(b,8,this.length);return F.read(this,b,!0,52,8)};n.prototype.readDoubleBE=function(b,a){b>>>=0;a||v(b,8,this.length);return F.read(this,b,!1,52,8)};n.prototype.writeUIntLE=function(b,a,c,d){b=+b;a>>>=0;c>>>=0;d||w(this,b,a,c,Math.pow(2,8*c)-1,0);d=1;var e=0;for(this[a]=b&255;++e<c&&(d*=256);)this[a+e]=b/d&255;
return a+c};n.prototype.writeUIntBE=function(b,a,c,d){b=+b;a>>>=0;c>>>=0;d||w(this,b,a,c,Math.pow(2,8*c)-1,0);d=c-1;var e=1;for(this[a+d]=b&255;0<=--d&&(e*=256);)this[a+d]=b/e&255;return a+c};n.prototype.writeUInt8=function(b,a,c){b=+b;a>>>=0;c||w(this,b,a,1,255,0);this[a]=b&255;return a+1};n.prototype.writeUInt16LE=function(b,a,c){b=+b;a>>>=0;c||w(this,b,a,2,65535,0);this[a]=b&255;this[a+1]=b>>>8;return a+2};n.prototype.writeUInt16BE=function(b,a,c){b=+b;a>>>=0;c||w(this,b,a,2,65535,0);this[a]=b>>>
8;this[a+1]=b&255;return a+2};n.prototype.writeUInt32LE=function(b,a,c){b=+b;a>>>=0;c||w(this,b,a,4,4294967295,0);this[a+3]=b>>>24;this[a+2]=b>>>16;this[a+1]=b>>>8;this[a]=b&255;return a+4};n.prototype.writeUInt32BE=function(b,a,c){b=+b;a>>>=0;c||w(this,b,a,4,4294967295,0);this[a]=b>>>24;this[a+1]=b>>>16;this[a+2]=b>>>8;this[a+3]=b&255;return a+4};n.prototype.writeIntLE=function(b,a,c,d){b=+b;a>>>=0;d||(d=Math.pow(2,8*c-1),w(this,b,a,c,d-1,-d));d=0;var e=1,f=0;for(this[a]=b&255;++d<c&&(e*=256);)0>
b&&0===f&&0!==this[a+d-1]&&(f=1),this[a+d]=(b/e>>0)-f&255;return a+c};n.prototype.writeIntBE=function(b,a,c,d){b=+b;a>>>=0;d||(d=Math.pow(2,8*c-1),w(this,b,a,c,d-1,-d));d=c-1;var e=1,f=0;for(this[a+d]=b&255;0<=--d&&(e*=256);)0>b&&0===f&&0!==this[a+d+1]&&(f=1),this[a+d]=(b/e>>0)-f&255;return a+c};n.prototype.writeInt8=function(b,a,c){b=+b;a>>>=0;c||w(this,b,a,1,127,-128);0>b&&(b=255+b+1);this[a]=b&255;return a+1};n.prototype.writeInt16LE=function(b,a,c){b=+b;a>>>=0;c||w(this,b,a,2,32767,-32768);this[a]=
b&255;this[a+1]=b>>>8;return a+2};n.prototype.writeInt16BE=function(b,a,c){b=+b;a>>>=0;c||w(this,b,a,2,32767,-32768);this[a]=b>>>8;this[a+1]=b&255;return a+2};n.prototype.writeInt32LE=function(b,a,c){b=+b;a>>>=0;c||w(this,b,a,4,2147483647,-2147483648);this[a]=b&255;this[a+1]=b>>>8;this[a+2]=b>>>16;this[a+3]=b>>>24;return a+4};n.prototype.writeInt32BE=function(b,a,c){b=+b;a>>>=0;c||w(this,b,a,4,2147483647,-2147483648);0>b&&(b=4294967295+b+1);this[a]=b>>>24;this[a+1]=b>>>16;this[a+2]=b>>>8;this[a+3]=
b&255;return a+4};n.prototype.writeFloatLE=function(b,a,c){return A(this,b,a,!0,c)};n.prototype.writeFloatBE=function(b,a,c){return A(this,b,a,!1,c)};n.prototype.writeDoubleLE=function(b,a,c){return z(this,b,a,!0,c)};n.prototype.writeDoubleBE=function(b,a,c){return z(this,b,a,!1,c)};n.prototype.copy=function(b,a,c,d){if(!n.isBuffer(b))throw new TypeError("argument should be a Buffer");c||(c=0);d||0===d||(d=this.length);a>=b.length&&(a=b.length);a||(a=0);0<d&&d<c&&(d=c);if(d===c||0===b.length||0===
this.length)return 0;if(0>a)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("Index out of range");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length);b.length-a<d-c&&(d=b.length-a+c);var e=d-c;if(this===b&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(a,c,d);else if(this===b&&c<a&&a<d)for(d=e-1;0<=d;--d)b[d+a]=this[d+c];else Uint8Array.prototype.set.call(b,this.subarray(c,d),a);return e};n.prototype.fill=
function(b,a,c,d){if("string"===typeof b){"string"===typeof a?(d=a,a=0,c=this.length):"string"===typeof c&&(d=c,c=this.length);if(void 0!==d&&"string"!==typeof d)throw new TypeError("encoding must be a string");if("string"===typeof d&&!n.isEncoding(d))throw new TypeError("Unknown encoding: "+d);if(1===b.length){var e=b.charCodeAt(0);if("utf8"===d&&128>e||"latin1"===d)b=e}}else"number"===typeof b?b&=255:"boolean"===typeof b&&(b=Number(b));if(0>a||this.length<a||this.length<c)throw new RangeError("Out of range index");
if(c<=a)return this;a>>>=0;c=void 0===c?this.length:c>>>0;b||(b=0);if("number"===typeof b)for(d=a;d<c;++d)this[d]=b;else{e=n.isBuffer(b)?b:n.from(b,d);var f=e.length;if(0===f)throw new TypeError('The value "'+b+'" is invalid for argument "value"');for(d=0;d<c-a;++d)this[d+a]=e[d%f]}return this};var H=/[^+/0-9A-Za-z-_]/g}).call(this,a("buffer").Buffer)},{"base64-js":76,buffer:107,ieee754:413}],108:[function(a,q,p){function n(b){return[Math.min(b[0],b[1]),Math.max(b[0],b[1])]}function k(b,a){return b[0]-
a[0]||b[1]-a[1]}function m(b,a,e){return a in b?b[a]:e}var h=a("./lib/monotone"),b=a("./lib/triangulation"),g=a("./lib/delaunay"),e=a("./lib/filter");q.exports=function(a,l,f){Array.isArray(l)?(f=f||{},l=l||[]):(f=l||{},l=[]);var d=!!m(f,"delaunay",!0),c=!!m(f,"interior",!0),r=!!m(f,"exterior",!0);f=!!m(f,"infinity",!1);if(!c&&!r||0===a.length)return[];var u=h(a,l);if(d||c!==r||f){l=b(a.length,l.map(n).sort(k));for(var t=0;t<u.length;++t){var w=u[t];l.addTriangle(w[0],w[1],w[2])}d&&g(a,l);return r?
c?f?e(l,0,f):l.cells():e(l,1,f):e(l,-1)}return u}},{"./lib/delaunay":109,"./lib/filter":110,"./lib/monotone":111,"./lib/triangulation":112}],109:[function(a,q,p){function n(a,h,b,g,e,t){var l=h.opposite(g,e);if(!(0>l)){if(e<g){var f=g;g=e;e=f;f=t;t=l;l=f}h.isConstraint(g,e)||0>k(a[g],a[e],a[t],a[l])&&b.push(g,e)}}var k=a("robust-in-sphere")[4];a("binary-search-bounds");q.exports=function(a,h){for(var b=[],g=a.length,e=h.stars,t=0;t<g;++t)for(var l=e[t],f=1;f<l.length;f+=2){var d=l[f];if(!(d<t||h.isConstraint(t,
d))){for(var c=l[f-1],r=-1,u=1;u<l.length;u+=2)if(l[u-1]===d){r=l[u];break}0>r||0>k(a[t],a[d],a[c],a[r])&&b.push(t,d)}}for(;0<b.length;){d=b.pop();t=b.pop();r=c=-1;l=e[t];for(g=1;g<l.length;g+=2)f=l[g-1],u=l[g],f===d?r=u:u===d&&(c=f);0>c||0>r||0<=k(a[t],a[d],a[c],a[r])||(h.flip(t,d),n(a,h,b,c,t,r),n(a,h,b,t,r,c),n(a,h,b,r,d,c),n(a,h,b,d,c,r))}}},{"binary-search-bounds":113,"robust-in-sphere":506}],110:[function(a,q,p){function n(a,b,g,e,k,l,f){this.cells=a;this.neighbor=b;this.flags=e;this.constraint=
g;this.active=k;this.next=l;this.boundary=f}function k(a,b){return a[0]-b[0]||a[1]-b[1]||a[2]-b[2]}var m=a("binary-search-bounds");q.exports=function(a,b,g){for(var e=a.cells(),h=e.length,l=0;l<h;++l){var f=e[l],d=f[0],c=f[1],r=f[2];c<r?c<d&&(f[0]=c,f[1]=r,f[2]=d):r<d&&(f[0]=r,f[1]=d,f[2]=c)}e.sort(k);var u=Array(h);for(l=0;l<u.length;++l)u[l]=0;var m=[],w=[],y=Array(3*h),A=Array(3*h),z=null;g&&(z=[]);r=new n(e,y,A,u,m,w,z);for(l=0;l<h;++l){f=e[l];for(var x=0;3>x;++x){d=f[x];c=f[(x+1)%3];var C=y[3*
l+x]=r.locate(c,d,a.opposite(c,d)),B=A[3*l+x]=a.isConstraint(d,c);0>C&&(B?w.push(l):(m.push(l),u[l]=1),g&&z.push([c,d,-1]))}}if(0===b)return g?r.cells.concat(r.boundary):r.cells;h=1;l=r.active;f=r.next;a=r.flags;e=r.cells;d=r.constraint;for(c=r.neighbor;0<l.length||0<f.length;){for(;0<l.length;)if(u=l.pop(),a[u]!==-h)for(a[u]=h,m=0;3>m;++m)w=c[3*u+m],0<=w&&0===a[w]&&(d[3*u+m]?f.push(w):(l.push(w),a[w]=h));u=f;f=l;l=u;f.length=0;h=-h}for(l=h=0;l<e.length;++l)a[l]===b&&(e[h++]=e[l]);e.length=h;return g?
e.concat(r.boundary):e};n.prototype.locate=function(){var a=[0,0,0];return function(b,g,e){var h=b,l=g,f=e;g<e?g<b&&(h=g,l=e,f=b):e<b&&(h=e,l=b,f=g);if(0>h)return-1;a[0]=h;a[1]=l;a[2]=f;return m.eq(this.cells,a,k)}}()},{"binary-search-bounds":113}],111:[function(a,q,p){function n(b,a,e,d,c){this.a=b;this.b=a;this.idx=e;this.lowerIds=d;this.upperIds=c}function k(b,a,e,d){this.a=b;this.b=a;this.type=e;this.idx=d}function m(b,a){var f=b.a[0]-a.a[0]||b.a[1]-a.a[1]||b.type-a.type;return f||0!==b.type&&
(f=e(b.a,b.b,a.b))?f:b.idx-a.idx}function h(b,a){return e(b.a,b.b,a)}function b(b,a){var f;return(f=b.a[0]<a.a[0]?e(b.a,b.b,a.a):e(a.b,a.a,b.a))?f:(f=a.b[0]<b.b[0]?e(b.a,b.b,a.b):e(a.b,a.a,b.b))||b.idx-a.idx}var g=a("binary-search-bounds"),e=a("robust-orientation")[3];q.exports=function(a,l){for(var f=a.length,d=l.length,c=[],r=0;r<f;++r)c.push(new k(a[r],null,0,r));for(r=0;r<d;++r){var u=l[r];f=a[u[0]];u=a[u[1]];f[0]<u[0]?c.push(new k(f,u,2,r),new k(u,f,1,r)):f[0]>u[0]&&c.push(new k(u,f,2,r),new k(f,
u,1,r))}c.sort(m);r=c[0].a[0]-(1+Math.abs(c[0].a[0]))*Math.pow(2,-52);l=[new n([r,1],[r,0],-1,[],[],[],[])];d=[];r=0;for(f=c.length;r<f;++r){var t=c[r];u=t.type;if(0===u){u=d;var w=l,y=a,A=t.a;t=t.idx;for(var z=g.lt(w,A,h),x=g.gt(w,A,h);z<x;++z){for(var C=w[z],B=C.lowerIds,D=B.length;1<D&&0<e(y[B[D-2]],y[B[D-1]],A);)u.push([B[D-1],B[D-2],t]),--D;B.length=D;B.push(t);C=C.upperIds;for(D=C.length;1<D&&0>e(y[C[D-2]],y[C[D-1]],A);)u.push([C[D-2],C[D-1],t]),--D;C.length=D;C.push(t)}}else 2===u?(u=l,w=t,
y=g.le(u,w,b),A=u[y],t=A.upperIds,x=t[t.length-1],A.upperIds=[x],u.splice(y+1,0,new n(w.a,w.b,w.idx,[x],t))):(u=l,w=t,y=w.a,w.a=w.b,w.b=y,w=g.eq(u,w,b),u[w-1].upperIds=u[w].upperIds,u.splice(w,1))}return d}},{"binary-search-bounds":113,"robust-orientation":508}],112:[function(a,q,p){function n(a,b){this.stars=a;this.edges=b}function k(a,b,g){for(var e=1,h=a.length;e<h;e+=2)if(a[e-1]===b&&a[e]===g){a[e-1]=a[h-2];a[e]=a[h-1];a.length=h-2;break}}var m=a("binary-search-bounds");q.exports=function(a,b){for(var g=
Array(a),e=0;e<a;++e)g[e]=[];return new n(g,b)};a=n.prototype;a.isConstraint=function(){function a(b,a){return b[0]-a[0]||b[1]-a[1]}var b=[0,0];return function(g,e){b[0]=Math.min(g,e);b[1]=Math.max(g,e);return 0<=m.eq(this.edges,b,a)}}();a.removeTriangle=function(a,b,g){var e=this.stars;k(e[a],b,g);k(e[b],g,a);k(e[g],a,b)};a.addTriangle=function(a,b,g){var e=this.stars;e[a].push(b,g);e[b].push(g,a);e[g].push(a,b)};a.opposite=function(a,b){b=this.stars[b];for(var g=1,e=b.length;g<e;g+=2)if(b[g]===
a)return b[g-1];return-1};a.flip=function(a,b){var g=this.opposite(a,b),e=this.opposite(b,a);this.removeTriangle(a,b,g);this.removeTriangle(b,a,e);this.addTriangle(a,e,g);this.addTriangle(b,g,e)};a.edges=function(){for(var a=this.stars,b=[],g=0,e=a.length;g<e;++g)for(var k=a[g],l=0,f=k.length;l<f;l+=2)b.push([k[l],k[l+1]]);return b};a.cells=function(){for(var a=this.stars,b=[],g=0,e=a.length;g<e;++g)for(var k=a[g],l=0,f=k.length;l<f;l+=2){var d=k[l],c=k[l+1];g<Math.min(d,c)&&b.push([g,d,c])}return b}},
{"binary-search-bounds":113}],113:[function(a,q,p){function n(a,h,b,g,e){a=["function ",a,"(a,l,h,",g.join(","),"){",e?"":"var i\x3d",b?"l-1":"h+1",";while(l\x3c\x3dh){var m\x3d(l+h)\x3e\x3e\x3e1,x\x3da[m]"];e?0>h.indexOf("c")?a.push(";if(x\x3d\x3d\x3dy){return m}else if(x\x3c\x3dy){"):a.push(";var p\x3dc(x,y);if(p\x3d\x3d\x3d0){return m}else if(p\x3c\x3d0){"):a.push(";if(",h,"){i\x3dm;");b?a.push("l\x3dm+1}else{h\x3dm-1}"):a.push("h\x3dm-1}else{l\x3dm+1}");a.push("}");e?a.push("return -1};"):a.push("return i};");
return a.join("")}function k(a,h,b,g){return(new Function([n("A","x"+a+"y",h,["y"],g),n("P","c(x,y)"+a+"0",h,["y","c"],g),"function dispatchBsearch",b,"(a,y,c,l,h){if(typeof(c)\x3d\x3d\x3d'function'){return P(a,(l\x3d\x3d\x3dvoid 0)?0:l|0,(h\x3d\x3d\x3dvoid 0)?a.length-1:h|0,y,c)}else{return A(a,(c\x3d\x3d\x3dvoid 0)?0:c|0,(l\x3d\x3d\x3dvoid 0)?a.length-1:l|0,y)}}return dispatchBsearch",b].join("")))()}q.exports={ge:k("\x3e\x3d",!1,"GE"),gt:k("\x3e",!1,"GT"),lt:k("\x3c",!0,"LT"),le:k("\x3c\x3d",!0,
"LE"),eq:k("-",!0,"EQ",!0)}},{}],114:[function(a,q,p){q.exports=function(a){for(var k=1,n=1;n<a.length;++n)for(var h=0;h<n;++h)if(a[n]<a[h])k=-k;else if(a[h]===a[n])return 0;return k}},{}],115:[function(a,q,p){function n(b,a){for(var e=0,g=b.length,f=0;f<g;++f)e+=b[f]*a[f];return e}function k(a){var e=a.length;if(0===e)return[];for(var g=h([a.length+1,a.length+1],1),l=h([a.length+1],1),f=g[e][e]=0;f<e;++f){for(var d=0;d<=f;++d)g[d][f]=g[f][d]=2*n(a[f],a[d]);l[f]=n(a[f],a[f])}a=b(g,l);g=0;l=a[e+1];
for(f=0;f<l.length;++f)g+=l[f];var c=Array(e);for(f=0;f<e;++f){l=a[f];var r=0;for(d=0;d<l.length;++d)r+=l[d];c[f]=r/g}return c}function m(b){if(0===b.length)return[];for(var a=b[0].length,g=h([a]),l=k(b),f=0;f<b.length;++f)for(var d=0;d<a;++d)g[d]+=b[f][d]*l[f];return g}var h=a("dup"),b=a("robust-linear-solve");m.barycenetric=k;q.exports=m},{dup:172,"robust-linear-solve":507}],116:[function(a,q,p){q.exports=function(a){for(var k=n(a),h=0,b=0;b<a.length;++b)for(var g=a[b],e=0;e<k.length;++e)h+=Math.pow(g[e]-
k[e],2);return Math.sqrt(h/a.length)};var n=a("circumcenter")},{circumcenter:115}],117:[function(a,q,p){q.exports=function(a,k,m){return k<m?a<k?k:a>m?m:a:a<m?m:a>k?k:a}},{}],118:[function(a,q,p){function n(b){b=w(b);return[A(b,-Infinity),A(b,Infinity)]}function k(b){for(var a=Array(b.length),c=0;c<b.length;++c){var d=b[c];a[c]=[A(d[0],-Infinity),A(d[1],-Infinity),A(d[0],Infinity),A(d[1],Infinity)]}return a}function m(b,a,d){var e=[];c(d,function(c,d){var f=a[c],g=a[d];f[0]!==g[0]&&f[0]!==g[1]&&f[1]!==
g[0]&&f[1]!==g[1]&&r(b[f[0]],b[f[1]],b[g[0]],b[g[1]])&&e.push([c,d])});return e}function h(b,a,d,e){var f=[];c(d,e,function(c,d){var e=a[c];if(e[0]!==d&&e[1]!==d){var g=b[d];r(b[e[0]],b[e[1]],g,g)&&f.push([c,d])}});return f}function b(b,a,c,d,e){var f,g=b.map(function(b){return[u(b[0]),u(b[1])]});for(f=0;f<c.length;++f){var h=c[f];var r=h[0];h=h[1];var l=a[r],k=a[h];if(l=z(y(b[l[0]]),y(b[l[1]]),y(b[k[0]]),y(b[k[1]])))k=b.length,b.push([w(l[0]),w(l[1])]),g.push(l),d.push([r,k],[h,k])}d.sort(function(b,
a){if(b[0]!==a[0])return b[0]-a[0];b=g[b[1]];a=g[a[1]];return v(b[0],a[0])||v(b[1],a[1])});for(f=d.length-1;0<=f;--f){h=d[f];r=h[0];l=a[r];k=l[0];c=l[1];var t=b[k],n=b[c];0>(t[0]-n[0]||t[1]-n[1])&&(t=k,k=c,c=t);l[0]=k;k=l[1]=h[1];var m;for(e&&(m=l[2]);0<f&&d[f-1][0]===r;)h=d[--f],h=h[1],e?a.push([k,h,m]):a.push([k,h]),k=h;e?a.push([k,c,m]):a.push([k,c])}return g}function g(b,a,e){e=a.length;for(var f=new d(e),g=[],h=0;h<a.length;++h){var r=a[h],l=n(r[0]);r=n(r[1]);g.push([A(l[0],-Infinity),A(r[0],
-Infinity),A(l[1],Infinity),A(r[1],Infinity)])}c(g,function(b,a){f.link(b,a)});l=!0;a=Array(e);for(h=0;h<e;++h)g=f.find(h),g!==h&&(l=!1,b[g]=[Math.min(b[h][0],b[g][0]),Math.min(b[h][1],b[g][1])]);if(l)return null;for(h=l=0;h<e;++h)g=f.find(h),g===h?(a[h]=l,b[l++]=b[h]):a[h]=-1;b.length=l;for(h=0;h<e;++h)0>a[h]&&(a[h]=a[f.find(h)]);return a}function e(b,a){return b[0]-a[0]||b[1]-a[1]}function t(b,a){var c=b[0]-a[0]||b[1]-a[1];return c?c:b[2]<a[2]?-1:b[2]>a[2]?1:0}function l(b,a,c){if(0!==b.length){if(a)for(var d=
0;d<b.length;++d){var f=b[d],g=a[f[0]],h=a[f[1]];f[0]=Math.min(g,h);f[1]=Math.max(g,h)}else for(d=0;d<b.length;++d)f=b[d],g=f[0],h=f[1],f[0]=Math.min(g,h),f[1]=Math.max(g,h);c?b.sort(t):b.sort(e);for(d=a=1;d<b.length;++d)if(f=b[d-1],g=b[d],g[0]!==f[0]||g[1]!==f[1]||c&&g[2]!==f[2])b[a++]=g;b.length=a}}function f(a,c,d){for(var e=Array(c.length),f=0;f<c.length;++f){var r=c[f],u=a[r[0]];r=a[r[1]];e[f]=[A(Math.min(u[0],r[0]),-Infinity),A(Math.min(u[1],r[1]),-Infinity),A(Math.max(u[0],r[0]),Infinity),
A(Math.max(u[1],r[1]),Infinity)]}f=m(a,c,e);u=k(a);e=h(a,c,e,u);r=b(a,c,f,e,d);a=g(a,r,u);l(c,a,d);return a?!0:0<f.length||0<e.length}q.exports=function(b,a,c){if(c){var d=a;for(var e=Array(a.length),h=0;h<a.length;++h){var r=a[h];e[h]=[r[0],r[1],c[h]]}a=e}h=a;r=!!c;e=g(b,[],k(b));l(h,e,r);for(e=!!e;f(b,a,!!c);)e=!0;if(c&&e)for(d.length=0,h=c.length=0;h<a.length;++h)r=a[h],d.push([r[0],r[1]]),c.push(r[2]);return e};var d=a("union-find"),c=a("box-intersect"),r=a("robust-segment-intersect"),u=a("big-rat"),
v=a("big-rat/cmp"),w=a("big-rat/to-float"),y=a("rat-vec"),A=a("nextafter"),z=a("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":119,"big-rat":80,"big-rat/cmp":78,"big-rat/to-float":92,"box-intersect":98,nextafter:452,"rat-vec":487,"robust-segment-intersect":511,"union-find":544}],119:[function(a,q,p){function n(b,a){return h(k(b[0],a[1]),k(b[1],a[0]))}q.exports=function(a,f,d,c){f=g(f,a);var h=g(c,d);c=n(f,h);if(0===b(c))return null;d=g(a,d);d=n(h,d);d=m(d,c);f=t(f,d);return e(a,f)};var k=a("big-rat/mul"),
m=a("big-rat/div"),h=a("big-rat/sub"),b=a("big-rat/sign"),g=a("rat-vec/sub"),e=a("rat-vec/add"),t=a("rat-vec/muls")},{"big-rat/div":79,"big-rat/mul":89,"big-rat/sign":90,"big-rat/sub":91,"rat-vec/add":486,"rat-vec/muls":488,"rat-vec/sub":489}],120:[function(a,q,p){function n(a,h){null==h&&(h=!0);var b=a[0],g=a[1],e=a[2];a=a[3];null==a&&(a=h?1:255);h&&(b*=255,g*=255,e*=255,a*=255);b=k(b,0,255)&255;g=k(g,0,255)&255;e=k(e,0,255)&255;a=k(a,0,255)&255;return 16777216*b+(g<<16)+(e<<8)+a}var k=a("clamp");
q.exports=n;q.exports.to=n;q.exports.from=function(a,h){a=+a;var b=a>>>24,g=(a&16711680)>>>16,e=(a&65280)>>>8;a&=255;return!1===h?[b,g,e,a]:[b/255,g/255,e/255,a/255]}},{clamp:117}],121:[function(a,q,p){q.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,
158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,
61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],
hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,
136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,
228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,
143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],
whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],122:[function(a,q,p){var n=a("color-rgba"),k=a("clamp"),m=a("dtype");q.exports=function(a,b){"float"!==b&&b||(b="array");"uint"===b&&(b="uint8");"uint_clamped"===b&&(b="uint8_clamped");var g=new (m(b))(4);b="uint8"!==b&&"uint8_clamped"!==b;a.length&&"string"!==typeof a||(a=n(a),a[0]/=255,a[1]/=255,a[2]/=255);var e=a;e=e instanceof Uint8Array||e instanceof Uint8ClampedArray?!0:Array.isArray(e)&&(1<e[0]||0===e[0])&&(1<e[1]||
0===e[1])&&(1<e[2]||0===e[2])&&(!e[3]||1<e[3])?!0:!1;if(e)return g[0]=a[0],g[1]=a[1],g[2]=a[2],g[3]=null!=a[3]?a[3]:255,b&&(g[0]/=255,g[1]/=255,g[2]/=255,g[3]/=255),g;b?(g[0]=a[0],g[1]=a[1],g[2]=a[2],g[3]=null!=a[3]?a[3]:1):(g[0]=k(Math.floor(255*a[0]),0,255),g[1]=k(Math.floor(255*a[1]),0,255),g[2]=k(Math.floor(255*a[2]),0,255),g[3]=null==a[3]?255:k(Math.floor(255*a[3]),0,255));return g}},{clamp:117,"color-rgba":124,dtype:171}],123:[function(a,q,p){(function(n){var k=a("color-name"),m=a("is-plain-obj"),
h=a("defined");q.exports=function(a){var e,g=[],l=1;if("string"===typeof a)if(k[a]){g=k[a].slice();var f="rgb"}else if("transparent"===a)l=0,f="rgb",g=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(a)){var d=a.slice(1),c=d.length;l=1;4>=c?(g=[parseInt(d[0]+d[0],16),parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16)],4===c&&(l=parseInt(d[3]+d[3],16)/255)):(g=[parseInt(d[0]+d[1],16),parseInt(d[2]+d[3],16),parseInt(d[4]+d[5],16)],8===c&&(l=parseInt(d[6]+d[7],16)/255));g[0]||(g[0]=0);g[1]||(g[1]=0);g[2]||(g[2]=0);
f="rgb"}else(e=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(a))?(a=e[1],l="rgb"===a,f=d=a.replace(/a$/,""),c="cmyk"===d?4:"gray"===d?1:3,g=e[2].trim().split(/\s*,\s*/).map(function(a,e){if(/%$/.test(a)){if(e===c)return parseFloat(a)/100;if("rgb"===d)return 255*parseFloat(a)/100}else if("h"===d[e]&&!/deg$/.test(a)&&void 0!==b[a])return b[a];return parseFloat(a)}),a===d&&g.push(1),l=l?1:void 0===g[c]?1:g[c],g=g.slice(0,c)):10<a.length&&/[0-9](?:\s|\/)/.test(a)&&
(g=a.match(/([0-9]+)/g).map(function(b){return parseFloat(b)}),f=a.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(a))f="rgb",g=[a>>>16,(a&65280)>>>8,a&255];else if(m(a))e=h(a.r,a.red,a.R,null),null!==e?(f="rgb",g=[e,h(a.g,a.green,a.G),h(a.b,a.blue,a.B)]):(f="hsl",g=[h(a.h,a.hue,a.H),h(a.s,a.saturation,a.S),h(a.l,a.lightness,a.L,a.b,a.brightness)]),l=h(a.a,a.alpha,a.opacity,1),null!=a.opacity&&(l/=100);else if(Array.isArray(a)||n.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(a))g=
[a[0],a[1],a[2]],f="rgb",l=4===a.length?a[3]:1;return{space:f,values:g,alpha:l}};var b={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this,"undefined"!==typeof pa?pa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"color-name":121,defined:166,"is-plain-obj":423}],124:[function(a,q,p){var n=a("color-parse"),k=a("color-space/hsl"),m=a("clamp");q.exports=function(a){var b=n(a);if(!b.space)return[];a=Array(3);a[0]=m(b.values[0],0,255);a[1]=m(b.values[1],0,255);
a[2]=m(b.values[2],0,255);"h"===b.space[0]&&(a=k.rgb(a));a.push(m(b.alpha,0,1));return a}},{clamp:117,"color-parse":123,"color-space/hsl":125}],125:[function(a,q,p){a=a("./rgb");q.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(a){var k=a[0]/360,n=a[1]/100;a=a[2]/100;if(0===n){var h=255*a;return[h,h,h]}n=.5>a?a*(1+n):a+n-a*n;a=2*a-n;var b=[0,0,0];for(var g=0;3>g;g++)h=k+1/3*-(g-1),0>h?h++:1<h&&h--,h=1>6*h?a+6*(n-a)*h:1>2*h?n:2>
3*h?a+(n-a)*(2/3-h)*6:a,b[g]=255*h;return b}};a.hsl=function(a){var k=a[0]/255,n=a[1]/255,h=a[2]/255;a=Math.min(k,n,h);var b=Math.max(k,n,h),g=b-a,e;b===a?e=0:k===b?e=(n-h)/g:n===b?e=2+(h-k)/g:h===b&&(e=4+(k-n)/g);e=Math.min(60*e,360);0>e&&(e+=360);k=(a+b)/2;return[e,100*(b===a?0:.5>=k?g/(b+a):g/(2-b-a)),100*k]}},{"./rgb":126}],126:[function(a,q,p){q.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],127:[function(a,q,p){q.exports={jet:[{index:0,rgb:[0,
0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,
0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,
0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,
93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,
10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},
{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,
200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},
{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,
18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},
{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,
0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,
254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},
{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,
181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,
136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,
rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,
rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,
rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,
rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],128:[function(a,q,p){function n(b){return[b[0]/255,b[1]/255,b[2]/255,b[3]]}function k(b){for(var a,g="#",h=0;3>
h;++h)a=b[h],a=a.toString(16),g+=("00"+a).substr(a.length);return g}function m(b){return"rgba("+b.join(",")+")"}var h=a("./colorScale"),b=a("lerp");q.exports=function(a){var e,g;a||(a={});var l=(a.nshades||72)-1;var f=a.format||"hex";(e=a.colormap)||(e="jet");if("string"===typeof e){e=e.toLowerCase();if(!h[e])throw Error(e+" not a supported colorscale");var d=h[e]}else if(Array.isArray(e))d=e.slice();else throw Error("unsupported colormap option",e);if(d.length>l+1)throw Error(e+" map requires nshades to be at least size "+
d.length);var c=Array.isArray(a.alpha)?2!==a.alpha.length?[1,1]:a.alpha.slice():"number"===typeof a.alpha?[a.alpha,a.alpha]:[1,1];a=d.map(function(b){return Math.round(b.index*l)});c[0]=Math.min(Math.max(c[0],0),1);c[1]=Math.min(Math.max(c[1],0),1);var r=d.map(function(b,a){b=d[a].index;a=d[a].rgb.slice();if(4===a.length&&0<=a[3]&&1>=a[3])return a;a[3]=c[0]+(c[1]-c[0])*b;return a});var u=[];for(g=0;g<a.length-1;++g){var v=a[g+1]-a[g];e=r[g];var w=r[g+1];for(var y=0;y<v;y++){var A=y/v;u.push([Math.round(b(e[0],
w[0],A)),Math.round(b(e[1],w[1],A)),Math.round(b(e[2],w[2],A)),b(e[3],w[3],A)])}}u.push(d[d.length-1].rgb.concat(c[1]));"hex"===f?u=u.map(k):"rgbaString"===f?u=u.map(m):"float"===f&&(u=u.map(n));return u}},{"./colorScale":127,lerp:426}],129:[function(a,q,p){function n(a,k,l){var e=h(a[0],-k[0]);a=h(a[1],-k[1]);var d=h(l[0],-k[0]);k=h(l[1],-k[1]);e=g(b(e,d),b(a,k));return 0<=e[e.length-1]}q.exports=function(b,a,g,f){var d=k(a,g,f);if(0===d){d=m(k(b,a,g));var c=m(k(b,a,f));return d===c?0===d&&(g=n(b,
a,g),b=n(b,a,f),g!==b)?g?1:-1:0:0===c?0<d?-1:n(b,a,f)?-1:1:0===d?0<c?1:n(b,a,g)?1:-1:m(c-d)}c=k(b,a,g);return 0<c?0<d&&0<k(b,a,f)?1:-1:0>c?0<d||0<k(b,a,f)?1:-1:0<k(b,a,f)?1:n(b,a,g)?1:-1};var k=a("robust-orientation"),m=a("signum"),h=a("two-sum"),b=a("robust-product"),g=a("robust-sum")},{"robust-orientation":508,"robust-product":509,"robust-sum":513,signum:514,"two-sum":542}],130:[function(a,q,p){function n(a,h){return a-h}q.exports=function(a,h){var b=a.length,g=a.length-h.length;if(g)return g;switch(b){case 0:return 0;
case 1:return a[0]-h[0];case 2:return a[0]+a[1]-h[0]-h[1]||k(a[0],a[1])-k(h[0],h[1]);case 3:b=a[0]+a[1];var e=h[0]+h[1];if(g=b+a[2]-(e+h[2]))return g;g=k(a[0],a[1]);var t=k(h[0],h[1]);return k(g,a[2])-k(t,h[2])||k(g+a[2],b)-k(t+h[2],e);case 4:g=a[0];b=a[1];e=a[2];a=a[3];t=h[0];var l=h[1],f=h[2];h=h[3];return g+b+e+a-(t+l+f+h)||k(g,b,e,a)-k(t,l,f,h,t)||k(g+b,g+e,g+a,b+e,b+a,e+a)-k(t+l,t+f,t+h,l+f,l+h,f+h)||k(g+b+e,g+b+a,g+e+a,b+e+a)-k(t+l+f,t+l+h,t+f+h,l+f+h);default:a=a.slice().sort(n);h=h.slice().sort(n);
for(e=0;e<b;++e)if(g=a[e]-h[e])return g;return 0}};var k=Math.min},{}],131:[function(a,q,p){var n=a("compare-cell"),k=a("cell-orientation");q.exports=function(a,h){return n(a,h)||k(a)-k(h)}},{"cell-orientation":114,"compare-cell":130}],132:[function(a,q,p){var n=a("./lib/ch1d"),k=a("./lib/ch2d"),m=a("./lib/chnd");q.exports=function(a){var b=a.length;if(0===b)return[];if(1===b)return[[0]];b=a[0].length;return 0===b?[]:1===b?n(a):2===b?k(a):m(a,b)}},{"./lib/ch1d":133,"./lib/ch2d":134,"./lib/chnd":135}],
133:[function(a,q,p){q.exports=function(a){for(var k=0,n=0,h=1;h<a.length;++h)a[h][0]<a[k][0]&&(k=h),a[h][0]>a[n][0]&&(n=h);return k<n?[[k],[n]]:k>n?[[n],[k]]:[[k]]}},{}],134:[function(a,q,p){q.exports=function(a){a=n(a);var k=a.length;if(2>=k)return[];for(var h=Array(k),b=a[k-1],g=0;g<k;++g){var e=a[g];h[g]=[b,e];b=e}return h};var n=a("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":435}],135:[function(a,q,p){q.exports=function(a,h){try{return n(a,!0)}catch(c){var b=k(a);if(b.length<=h)return[];
h=a.length;for(var g=Array(h),e=0;e<b.length;++e)g[e]=a[b[e]];var t=b.length;for(e=0;e<h;++e)0>b.indexOf(e)&&(g[t++]=a[e]);a=n(g,!0);h=a.length;g=b.length;for(e=0;e<h;++e){t=a[e];for(var l=0;l<t.length;++l){var f=t[l];if(f<g)t[l]=b[f];else{f-=g;for(var d=0;d<g;++d)f>=b[d]&&(f+=1);t[l]=f}}}return a}};var n=a("incremental-convex-hull"),k=a("affine-hull")},{"affine-hull":65,"incremental-convex-hull":414}],136:[function(a,q,p){q.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?\x3d.*americ).*samoa",
AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?\x3d.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?\x3d.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?\x3d.*bonaire).*eustatius|^(?\x3d.*carib).*netherlands|\\bbes.?islands",
BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?\x3d.*peo)(?\x3d.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",
COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?\x3d.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?\x3d.*span).*guinea",
ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?\x3d.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?\x3d.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",
GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?\x3d.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",
IMN:"^(?\x3d.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?\x3d.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",
MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?\x3d.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",
NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",
RWA:"rwanda",BLM:"barth(e|)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?\x3d.*collectivity).*martin|^(?\x3d.*france).*martin(?!ique)|^(?\x3d.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|)o.?tom(e|)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",
SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?\x3d.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?\x3d.*leste).*timor|^(?\x3d.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",
UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?\x3d.*socialist).*viet.?nam",VGB:"^(?\x3d.*\\bu\\.?\\s?k).*virgin|^(?\x3d.*brit).*virgin|^(?\x3d.*kingdom).*virgin",VIR:"^(?\x3d.*\\bu\\.?\\s?s).*virgin|^(?\x3d.*states).*virgin",
WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?\x3d.*peo).*yemen|^(?!.*rep)(?\x3d.*dem).*yemen|^(?\x3d.*south).*yemen|^(?\x3d.*aden).*yemen|^(?\x3d.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],137:[function(a,q,p){q.exports="xx-small x-small small medium large x-large xx-large larger smaller".split(" ")},
{}],138:[function(a,q,p){q.exports="normal condensed semi-condensed extra-condensed ultra-condensed expanded semi-expanded extra-expanded ultra-expanded".split(" ")},{}],139:[function(a,q,p){q.exports=["normal","italic","oblique"]},{}],140:[function(a,q,p){q.exports="normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ")},{}],141:[function(a,q,p){q.exports={parse:a("./parse"),stringify:a("./stringify")}},{"./parse":143,"./stringify":144}],142:[function(a,q,p){var n=a("css-font-size-keywords");
q.exports={isSize:function(a){return/^[\d\.]/.test(a)||-1!==a.indexOf("/")||-1!==n.indexOf(a)}}},{"css-font-size-keywords":137}],143:[function(a,q,p){function n(a){if("string"!==typeof a)throw Error("Font argument must be a string.");if(d[a])return d[a];if(""===a)throw Error("Cannot parse an empty string.");if(-1!==b.indexOf(a))return d[a]={system:a};for(var c={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},u=l(a,/\s+/),n;n=u.shift();){if(-1!==
h.indexOf(n))return["style","variant","weight","stretch"].forEach(function(b){c[b]=n}),d[a]=c;if(-1!==e.indexOf(n))c.style=n;else if("normal"===n||"small-caps"===n)c.variant=n;else if(-1!==t.indexOf(n))c.stretch=n;else if(-1!==g.indexOf(n))c.weight=n;else{if(f(n)){var w=l(n,"/");c.size=w[0];null!=w[1]?c.lineHeight=k(w[1]):"/"===u[0]&&(u.shift(),c.lineHeight=k(u.shift()));if(!u.length)throw Error("Missing required font-family.");c.family=l(u.join(" "),/\s*,\s*/).map(m);return d[a]=c}throw Error("Unknown or unsupported font token: "+
n);}}throw Error("Missing required font-size.");}function k(b){var a=parseFloat(b);return a.toString()===b?a:b}var m=a("unquote"),h=a("css-global-keywords"),b=a("css-system-font-keywords"),g=a("css-font-weight-keywords"),e=a("css-font-style-keywords"),t=a("css-font-stretch-keywords"),l=a("string-split-by"),f=a("./lib/util").isSize;q.exports=n;var d=n.cache={}},{"./lib/util":142,"css-font-stretch-keywords":138,"css-font-style-keywords":139,"css-font-weight-keywords":140,"css-global-keywords":145,"css-system-font-keywords":146,
"string-split-by":527,unquote:546}],144:[function(a,q,p){function n(a,d){if(a&&!d[a]&&!b[a])throw Error("Unknown keyword `"+a+"`");return a}function k(b){for(var a={},c=0;c<b.length;c++)a[b[c]]=1;return a}var m=a("pick-by-alias"),h=a("./lib/util").isSize,b=k(a("css-global-keywords")),g=k(a("css-system-font-keywords")),e=k(a("css-font-weight-keywords")),t=k(a("css-font-style-keywords")),l=k(a("css-font-stretch-keywords")),f={normal:1,"small-caps":1},d={serif:1,"sans-serif":1,monospace:1,cursive:1,
fantasy:1,"system-ui":1};q.exports=function(b){b=m(b,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"});
if(b.system)return b.system&&n(b.system,g),b.system;n(b.style,t);n(b.variant,f);n(b.weight,e);n(b.stretch,l);null==b.size&&(b.size="1rem");"number"===typeof b.size&&(b.size+="px");if(!h)throw Error("Bad size value `"+b.size+"`");b.family||(b.family="serif");Array.isArray(b.family)&&(b.family.length||(b.family=["serif"]),b.family=b.family.map(function(b){return d[b]?b:'"'+b+'"'}).join(", "));var a=[];a.push(b.style);b.variant!==b.style&&a.push(b.variant);b.weight!==b.variant&&b.weight!==b.style&&a.push(b.weight);
b.stretch!==b.weight&&b.stretch!==b.variant&&b.stretch!==b.style&&a.push(b.stretch);a.push(b.size+(null==b.lineHeight||"normal"===b.lineHeight||"1"===b.lineHeight+""?"":"/"+b.lineHeight));a.push(b.family);return a.filter(Boolean).join(" ")}},{"./lib/util":142,"css-font-stretch-keywords":138,"css-font-style-keywords":139,"css-font-weight-keywords":140,"css-global-keywords":145,"css-system-font-keywords":146,"pick-by-alias":466}],145:[function(a,q,p){q.exports=["inherit","initial","unset"]},{}],146:[function(a,
q,p){q.exports="caption icon menu message-box small-caption status-bar".split(" ")},{}],147:[function(a,q,p){q.exports=function(a,k,m,h,b,g){var e=b-1,t=b*b,l=e*e,f=(1+2*b)*l;l*=b;b=t*(3-2*b);e*=t;if(a.length){g||(g=Array(a.length));for(t=a.length-1;0<=t;--t)g[t]=f*a[t]+l*k[t]+b*m[t]+e*h[t];return g}return f*a+l*k+b*m+e*h};q.exports.derivative=function(a,k,m,h,b,g){var e=6*b*b-6*b,t=3*b*b-4*b+1,l=-6*b*b+6*b;b=3*b*b-2*b;if(a.length){g||(g=Array(a.length));for(var f=a.length-1;0<=f;--f)g[f]=e*a[f]+
t*k[f]+l*m[f]+b*h[f];return g}return e*a+t*k+l*m[f]+b*h}},{}],148:[function(a,q,p){function n(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var k=a("./lib/thunk.js");q.exports=function(a){var h=new n;h.pre=a.pre;h.body=a.body;h.post=a.post;var b=a.args.slice(0);h.argTypes=b;for(var g=0;g<b.length;++g){var e=
b[g];if("array"===e||"object"===typeof e&&e.blockIndices){h.argTypes[g]="array";h.arrayArgs.push(g);h.arrayBlockIndices.push(e.blockIndices?e.blockIndices:0);h.shimArgs.push("array"+g);if(g<h.pre.args.length&&0<h.pre.args[g].count)throw Error("cwise: pre() block may not reference array args");if(g<h.post.args.length&&0<h.post.args[g].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===e)h.scalarArgs.push(g),h.shimArgs.push("scalar"+g);else if("index"===e){h.indexArgs.push(g);
if(g<h.pre.args.length&&0<h.pre.args[g].count)throw Error("cwise: pre() block may not reference array index");if(g<h.body.args.length&&h.body.args[g].lvalue)throw Error("cwise: body() block may not write to array index");if(g<h.post.args.length&&0<h.post.args[g].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===e){h.shapeArgs.push(g);if(g<h.pre.args.length&&h.pre.args[g].lvalue)throw Error("cwise: pre() block may not write to array shape");if(g<h.body.args.length&&
h.body.args[g].lvalue)throw Error("cwise: body() block may not write to array shape");if(g<h.post.args.length&&h.post.args[g].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===typeof e&&e.offset)h.argTypes[g]="offset",h.offsetArgs.push({array:e.array,offset:e.offset}),h.offsetArgIndex.push(g);else throw Error("cwise: Unknown argument type "+b[g]);}if(0>=h.arrayArgs.length)throw Error("cwise: No array arguments specified");if(h.pre.args.length>b.length)throw Error("cwise: Too many arguments in pre() block");
if(h.body.args.length>b.length)throw Error("cwise: Too many arguments in body() block");if(h.post.args.length>b.length)throw Error("cwise: Too many arguments in post() block");h.debug=!!a.printCode||!!a.debug;h.funcName=a.funcName||"cwise";h.blockSize=a.blockSize||64;return k(h)}},{"./lib/thunk.js":150}],149:[function(a,q,p){function n(b,a,h){var e=b.length,f=a.arrayArgs.length;a=0<a.indexArgs.length;var d=[],c=[],g=0,k,t;for(k=0;k<e;++k)c.push(["i",k,"\x3d0"].join(""));for(t=0;t<f;++t)for(k=0;k<
e;++k){var n=g;g=b[k];0===k?c.push(["d",t,"s",k,"\x3dt",t,"p",g].join("")):c.push(["d",t,"s",k,"\x3d(t",t,"p",g,"-s",n,"*t",t,"p",n,")"].join(""))}0<c.length&&d.push("var "+c.join(","));for(k=e-1;0<=k;--k)g=b[k],d.push(["for(i",k,"\x3d0;i",k,"\x3cs",g,";++i",k,"){"].join(""));d.push(h);for(k=0;k<e;++k){n=g;g=b[k];for(t=0;t<f;++t)d.push(["p",t,"+\x3dd",t,"s",k].join(""));a&&(0<k&&d.push(["index[",n,"]-\x3ds",n].join("")),d.push(["++index[",g,"]"].join("")));d.push("}")}return d.join("\n")}function k(b,
a,h,l){for(var e=a.length,d=h.arrayArgs.length,c=h.blockSize,g=0<h.indexArgs.length,k=[],t=0;t<d;++t)k.push(["var offset",t,"\x3dp",t].join(""));for(t=b;t<e;++t)k.push(["for(var j"+t+"\x3dSS[",a[t],"]|0;j",t,"\x3e0;){"].join("")),k.push(["if(j",t,"\x3c",c,"){"].join("")),k.push(["s",a[t],"\x3dj",t].join("")),k.push(["j",t,"\x3d0"].join("")),k.push(["}else{s",a[t],"\x3d",c].join("")),k.push(["j",t,"-\x3d",c,"}"].join("")),g&&k.push(["index[",a[t],"]\x3dj",t].join(""));for(t=0;t<d;++t){c=["offset"+
t];for(g=b;g<e;++g)c.push(["j",g,"*t",t,"p",a[g]].join(""));k.push(["p",t,"\x3d(",c.join("+"),")"].join(""))}k.push(n(a,h,l));for(t=b;t<e;++t)k.push("}");return k.join("\n")}function m(b,a,h){for(var e=b.body,f=[],d=[],c=0;c<b.args.length;++c){var g=b.args[c];if(!(0>=g.count)){var k=new RegExp(g.name,"g"),t="",n=a.arrayArgs.indexOf(c);switch(a.argTypes[c]){case "offset":var m=a.offsetArgIndex.indexOf(c);n=a.offsetArgs[m].array;t="+q"+m;case "array":t="p"+n+t;var A="l"+c;m="a"+n;if(0===a.arrayBlockIndices[n])1===
g.count?"generic"===h[n]?g.lvalue?(f.push(["var ",A,"\x3d",m,".get(",t,")"].join("")),e=e.replace(k,A),d.push([m,".set(",t,",",A,")"].join(""))):e=e.replace(k,[m,".get(",t,")"].join("")):e=e.replace(k,[m,"[",t,"]"].join("")):"generic"===h[n]?(f.push(["var ",A,"\x3d",m,".get(",t,")"].join("")),e=e.replace(k,A),g.lvalue&&d.push([m,".set(",t,",",A,")"].join(""))):(f.push(["var ",A,"\x3d",m,"[",t,"]"].join("")),e=e.replace(k,A),g.lvalue&&d.push([m,"[",t,"]\x3d",A].join("")));else{k=[g.name];g=[t];for(t=
0;t<Math.abs(a.arrayBlockIndices[n]);t++)k.push("\\s*\\[([^\\]]+)\\]"),g.push("$"+(t+1)+"*t"+n+"b"+t);k=new RegExp(k.join(""),"g");t=g.join("+");if("generic"===h[n])throw Error("cwise: Generic arrays not supported in combination with blocks!");e=e.replace(k,[m,"[",t,"]"].join(""))}break;case "scalar":e=e.replace(k,"Y"+a.scalarArgs.indexOf(c));break;case "index":e=e.replace(k,"index");break;case "shape":e=e.replace(k,"shape")}}}return[f.join("\n"),e,d.join("\n")].join("\n").trim()}function h(b){for(var a=
Array(b.length),g=!0,h=0;h<b.length;++h){var f=b[h],d=f.match(/\d+/);d=d?d[0]:"";0===f.charAt(0)?a[h]="u"+f.charAt(1)+d:a[h]=f.charAt(0)+d;0<h&&(g=g&&a[h]===a[h-1])}return g?a[0]:a.join("")}var b=a("uniq");q.exports=function(a,e){for(var g=e[1].length-Math.abs(a.arrayBlockIndices[0])|0,l=Array(a.arrayArgs.length),f=Array(a.arrayArgs.length),d=0;d<a.arrayArgs.length;++d)f[d]=e[2*d],l[d]=e[2*d+1];var c=[],r=[],u=[],v=[],w=[];for(d=0;d<a.arrayArgs.length;++d){0>a.arrayBlockIndices[d]?(u.push(0),v.push(g),
c.push(g),r.push(g+a.arrayBlockIndices[d])):(u.push(a.arrayBlockIndices[d]),v.push(a.arrayBlockIndices[d]+g),c.push(0),r.push(a.arrayBlockIndices[d]));for(var y=[],A=0;A<l[d].length;A++)u[d]<=l[d][A]&&l[d][A]<v[d]&&y.push(l[d][A]-u[d]);w.push(y)}r=["SS"];v=["'use strict'"];y=[];for(A=0;A<g;++A)y.push(["s",A,"\x3dSS[",A,"]"].join(""));for(d=0;d<a.arrayArgs.length;++d){r.push("a"+d);r.push("t"+d);r.push("p"+d);for(A=0;A<g;++A)y.push(["t",d,"p",A,"\x3dt",d,"[",u[d]+A,"]"].join(""));for(A=0;A<Math.abs(a.arrayBlockIndices[d]);++A)y.push(["t",
d,"b",A,"\x3dt",d,"[",c[d]+A,"]"].join(""))}for(d=0;d<a.scalarArgs.length;++d)r.push("Y"+d);0<a.shapeArgs.length&&y.push("shape\x3dSS.slice(0)");if(0<a.indexArgs.length){A=Array(g);for(d=0;d<g;++d)A[d]="0";y.push(["index\x3d[",A.join(","),"]"].join(""))}for(d=0;d<a.offsetArgs.length;++d){c=a.offsetArgs[d];u=[];for(A=0;A<c.offset.length;++A)0!==c.offset[A]&&(1===c.offset[A]?u.push(["t",c.array,"p",A].join("")):u.push([c.offset[A],"*t",c.array,"p",A].join("")));0===u.length?y.push("q"+d+"\x3d0"):y.push(["q",
d,"\x3d",u.join("+")].join(""))}d=b([].concat(a.pre.thisVars).concat(a.body.thisVars).concat(a.post.thisVars));y=y.concat(d);0<y.length&&v.push("var "+y.join(","));for(d=0;d<a.arrayArgs.length;++d)v.push("p"+d+"|\x3d0");3<a.pre.body.length&&v.push(m(a.pre,a,f));d=m(a.body,a,f);a:for(A=0,y=w[0].length;A<y;){for(c=1;c<w.length;++c)if(w[c][A]!==w[0][A])break a;++A}A<g?v.push(k(A,w[0],a,d)):v.push(n(w[0],a,d));3<a.post.body.length&&v.push(m(a.post,a,f));a.debug&&console.log("-----Generated cwise routine for ",
e,":\n"+v.join("\n")+"\n----------");a=[a.funcName||"unnamed","_cwise_loop_",l[0].join("s"),"m",A,h(f)].join("");return(new Function(["function ",a,"(",r.join(","),"){",v.join("\n"),"} return ",a].join("")))()}},{uniq:545}],150:[function(a,q,p){var n=a("./compile.js");q.exports=function(a){var k=["'use strict'","var CACHED\x3d{}"],h=[];k.push(["return function ",a.funcName+"_cwise_thunk","(",a.shimArgs.join(","),"){"].join(""));for(var b=[],g=[],e=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,
a.arrayBlockIndices[0]),0>a.arrayBlockIndices[0]?","+a.arrayBlockIndices[0]+")":")"].join("")],t=[],l=[],f=0;f<a.arrayArgs.length;++f){var d=a.arrayArgs[f];h.push(["t",d,"\x3darray",d,".dtype,r",d,"\x3darray",d,".order"].join(""));b.push("t"+d);b.push("r"+d);g.push("t"+d);g.push("r"+d+".join()");e.push("array"+d+".data");e.push("array"+d+".stride");e.push("array"+d+".offset|0");0<f&&(t.push("array"+a.arrayArgs[0]+".shape.length\x3d\x3d\x3darray"+d+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-
Math.abs(a.arrayBlockIndices[f]))),l.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]\x3d\x3d\x3darray"+d+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[f])+"]"))}1<a.arrayArgs.length&&(k.push("if (!("+t.join(" \x26\x26 ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),k.push("for(var shapeIndex\x3darray"+a.arrayArgs[0]+".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),k.push("if (!("+l.join(" \x26\x26 ")+
")) throw new Error('cwise: Arrays do not all have the same shape!')"),k.push("}"));for(f=0;f<a.scalarArgs.length;++f)e.push("scalar"+a.scalarArgs[f]);h.push(["type\x3d[",g.join(","),"].join()"].join(""));h.push("proc\x3dCACHED[type]");k.push("var "+h.join(","));k.push(["if(!proc){CACHED[type]\x3dproc\x3dcompile([",b.join(","),"])}return proc(",e.join(","),")}"].join(""));a.debug&&console.log("-----Generated thunk:\n"+k.join("\n")+"\n----------");return(new Function("compile",k.join("\n")))(n.bind(void 0,
a))}},{"./compile.js":149}],151:[function(a,q,p){q.exports=a("cwise-compiler")},{"cwise-compiler":148}],152:[function(a,q,p){var n=a("es5-ext/object/copy"),k=a("es5-ext/object/normalize-options"),m=a("es5-ext/object/valid-callable"),h=a("es5-ext/object/map"),b=a("es5-ext/object/valid-callable"),g=a("es5-ext/object/valid-value"),e=Function.prototype.bind,t=Object.defineProperty,l=Object.prototype.hasOwnProperty;var f=function(a,c,f){var d=g(c)&&b(c.value);var h=n(c);delete h.writable;delete h.value;
h.get=function(){if(!f.overwriteDefinition&&l.call(this,a))return d;c.value=e.call(d,f.resolveContext?f.resolveContext(this):this);t(this,a,c);return this[a]};return h};q.exports=function(b,a){var c=k(a);null!=c.resolveContext&&m(c.resolveContext);return h(b,function(b,a){return f(a,b,c)})}},{"es5-ext/object/copy":192,"es5-ext/object/map":201,"es5-ext/object/normalize-options":202,"es5-ext/object/valid-callable":206,"es5-ext/object/valid-value":208}],153:[function(a,q,p){var n=a("es5-ext/object/assign"),
k=a("es5-ext/object/normalize-options"),m=a("es5-ext/object/is-callable"),h=a("es5-ext/string/#/contains");(q.exports=function(b,a){var e;if(2>arguments.length||"string"!==typeof b){var g=a;a=b;b=null}else g=arguments[2];if(null==b){var l=e=!0;var f=!1}else l=h.call(b,"c"),f=h.call(b,"e"),e=h.call(b,"w");l={value:a,configurable:l,enumerable:f,writable:e};return g?n(k(g),l):l}).gs=function(b,a,e,t){"string"!==typeof b&&(t=e,e=a,a=b,b=null);null==a?a=void 0:m(a)?null==e?e=void 0:m(e)||(t=e,e=void 0):
(t=a,a=e=void 0);if(null==b){var g=!0;b=!1}else g=h.call(b,"c"),b=h.call(b,"e");a={get:a,set:e,configurable:g,enumerable:b};return t?n(k(t),a):a}},{"es5-ext/object/assign":189,"es5-ext/object/is-callable":195,"es5-ext/object/normalize-options":202,"es5-ext/string/#/contains":209}],154:[function(a,q,p){(function(a,k){"object"===typeof p&&"undefined"!==typeof q?k(p):k(a.d3=a.d3||{})})(this,function(a){function k(b,a){return b<a?-1:b>a?1:b>=a?0:NaN}function n(b){1===b.length&&(b=h(b));return{left:function(a,
c,d,e){null==d&&(d=0);null==e&&(e=a.length);for(;d<e;){var f=d+e>>>1;0>b(a[f],c)?d=f+1:e=f}return d},right:function(a,c,d,e){null==d&&(d=0);null==e&&(e=a.length);for(;d<e;){var f=d+e>>>1;0<b(a[f],c)?e=f:d=f+1}return d}}}function h(b){return function(a,c){return k(b(a),c)}}function b(b,a){return[b,a]}function g(b){return null===b?NaN:+b}function e(b,a){var c=b.length,d=0,e=-1,f=0,h,r=0;if(null==a)for(;++e<c;){if(!isNaN(h=g(b[e]))){var l=h-f;f+=l/++d;r+=l*(h-f)}}else for(;++e<c;)isNaN(h=g(a(b[e],e,
b)))||(l=h-f,f+=l/++d,r+=l*(h-f));if(1<d)return r/(d-1)}function t(b,a){return(b=e(b,a))?Math.sqrt(b):b}function l(b,a){var c=b.length,d=-1,e,f,g;if(null==a)for(;++d<c;){if(null!=(e=b[d])&&e>=e)for(f=g=e;++d<c;)null!=(e=b[d])&&(f>e&&(f=e),g<e&&(g=e))}else for(;++d<c;)if(null!=(e=a(b[d],d,b))&&e>=e)for(f=g=e;++d<c;)null!=(e=a(b[d],d,b))&&(f>e&&(f=e),g<e&&(g=e));return[f,g]}function f(b){return function(){return b}}function d(b){return b}function c(b,a,c){b=+b;a=+a;c=2>(e=arguments.length)?(a=b,b=0,
1):3>e?1:+c;for(var d=-1,e=Math.max(0,Math.ceil((a-b)/c))|0,f=Array(e);++d<e;)f[d]=b+d*c;return f}function r(b,a,c){a=(a-b)/Math.max(0,c);b=Math.floor(Math.log(a)/Math.LN10);a/=Math.pow(10,b);return 0<=b?(a>=p?10:a>=F?5:a>=L?2:1)*Math.pow(10,b):-Math.pow(10,-b)/(a>=p?10:a>=F?5:a>=L?2:1)}function u(b,a,c){var d=Math.abs(a-b)/Math.max(0,c);c=Math.pow(10,Math.floor(Math.log(d)/Math.LN10));d/=c;d>=p?c*=10:d>=F?c*=5:d>=L&&(c*=2);return a<b?-c:c}function v(b){return Math.ceil(Math.log(b.length)/Math.LN2)+
1}function w(b,a,c){null==c&&(c=g);if(d=b.length){if(0>=(a=+a)||2>d)return+c(b[0],0,b);if(1<=a)return+c(b[d-1],d-1,b);var d;a*=d-1;d=Math.floor(a);var e=+c(b[d],d,b);b=+c(b[d+1],d+1,b);return e+(b-e)*(a-d)}}function y(b,a){var c=b.length,d=-1,e,f;if(null==a)for(;++d<c;){if(null!=(e=b[d])&&e>=e)for(f=e;++d<c;)null!=(e=b[d])&&f>e&&(f=e)}else for(;++d<c;)if(null!=(e=a(b[d],d,b))&&e>=e)for(f=e;++d<c;)null!=(e=a(b[d],d,b))&&f>e&&(f=e);return f}function A(b){if(!(f=b.length))return[];for(var a=-1,c=y(b,
z),d=Array(c);++a<c;)for(var e=-1,f,g=d[a]=Array(f);++e<f;)g[e]=b[e][a];return d}function z(b){return b.length}var x=n(k),C=x.right;x=x.left;var B=Array.prototype,D=B.slice,q=B.map,p=Math.sqrt(50),F=Math.sqrt(10),L=Math.sqrt(2);a.bisect=C;a.bisectRight=C;a.bisectLeft=x;a.ascending=k;a.bisector=n;a.cross=function(a,c,d){var e=a.length,f=c.length,g=Array(e*f),h,r,l;null==d&&(d=b);for(h=l=0;h<e;++h){var k=a[h];for(r=0;r<f;++r,++l)g[l]=d(k,c[r])}return g};a.descending=function(b,a){return a<b?-1:a>b?
1:a>=b?0:NaN};a.deviation=t;a.extent=l;a.histogram=function(){function b(b){var d,f=b.length,h=Array(f);for(d=0;d<f;++d)h[d]=a(b[d],d,b);d=e(h);var r=d[0],l=d[1],k=g(h,r,l);Array.isArray(k)||(k=u(r,l,k),k=c(Math.ceil(r/k)*k,l,k));for(var t=k.length;k[0]<=r;)k.shift(),--t;for(;k[t-1]>l;)k.pop(),--t;var n=Array(t+1);for(d=0;d<=t;++d){var m=n[d]=[];m.x0=0<d?k[d-1]:r;m.x1=d<t?k[d]:l}for(d=0;d<f;++d)m=h[d],r<=m&&m<=l&&n[C(k,m,0,t)].push(b[d]);return n}var a=d,e=l,g=v;b.value=function(c){return arguments.length?
(a="function"===typeof c?c:f(c),b):a};b.domain=function(a){return arguments.length?(e="function"===typeof a?a:f([a[0],a[1]]),b):e};b.thresholds=function(a){return arguments.length?(g="function"===typeof a?a:Array.isArray(a)?f(D.call(a)):f(a),b):g};return b};a.thresholdFreedmanDiaconis=function(b,a,c){b=q.call(b,g).sort(k);return Math.ceil((c-a)/(2*(w(b,.75)-w(b,.25))*Math.pow(b.length,-1/3)))};a.thresholdScott=function(b,a,c){return Math.ceil((c-a)/(3.5*t(b)*Math.pow(b.length,-1/3)))};a.thresholdSturges=
v;a.max=function(b,a){var c=b.length,d=-1,e,f;if(null==a)for(;++d<c;){if(null!=(e=b[d])&&e>=e)for(f=e;++d<c;)null!=(e=b[d])&&e>f&&(f=e)}else for(;++d<c;)if(null!=(e=a(b[d],d,b))&&e>=e)for(f=e;++d<c;)null!=(e=a(b[d],d,b))&&e>f&&(f=e);return f};a.mean=function(b,a){var c=b.length,d=c,e=-1,f,h=0;if(null==a)for(;++e<c;)isNaN(f=g(b[e]))?--d:h+=f;else for(;++e<c;)isNaN(f=g(a(b[e],e,b)))?--d:h+=f;if(d)return h/d};a.median=function(b,a){var c=b.length,d=-1,e,f=[];if(null==a)for(;++d<c;)isNaN(e=g(b[d]))||
f.push(e);else for(;++d<c;)isNaN(e=g(a(b[d],d,b)))||f.push(e);return w(f.sort(k),.5)};a.merge=function(b){var a=b.length;var c=-1;for(var d=0,e,f;++c<a;)d+=b[c].length;for(e=Array(d);0<=--a;)for(f=b[a],c=f.length;0<=--c;)e[--d]=f[c];return e};a.min=y;a.pairs=function(a,c){null==c&&(c=b);for(var d=0,e=a.length-1,f=a[0],g=Array(0>e?0:e);d<e;)g[d]=c(f,f=a[++d]);return g};a.permute=function(b,a){for(var c=a.length,d=Array(c);c--;)d[c]=b[a[c]];return d};a.quantile=w;a.range=c;a.scan=function(b,a){if(c=
b.length){var c,d=0,e=0,f,g=b[e];for(null==a&&(a=k);++d<c;)if(0>a(f=b[d],g)||0!==a(g,g))g=f,e=d;if(0===a(g,g))return e}};a.shuffle=function(b,a,c){c=(null==c?b.length:c)-(a=null==a?0:+a);for(var d,e;c;)e=Math.random()*c--|0,d=b[c+a],b[c+a]=b[e+a],b[e+a]=d;return b};a.sum=function(b,a){var c=b.length,d=-1,e,f=0;if(null==a)for(;++d<c;){if(e=+b[d])f+=e}else for(;++d<c;)if(e=+a(b[d],d,b))f+=e;return f};a.ticks=function(b,a,c){var d,e=-1,f;a=+a;b=+b;c=+c;if(b===a&&0<c)return[b];if(d=a<b){var g=b;b=a;a=
g}if(0===(f=r(b,a,c))||!isFinite(f))return[];if(0<f)for(b=Math.ceil(b/f),a=Math.floor(a/f),a=Array(g=Math.ceil(a-b+1));++e<g;)a[e]=(b+e)*f;else for(b=Math.floor(b*f),a=Math.ceil(a*f),a=Array(g=Math.ceil(b-a+1));++e<g;)a[e]=(b-e)/f;d&&a.reverse();return a};a.tickIncrement=r;a.tickStep=u;a.transpose=A;a.variance=e;a.zip=function(){return A(arguments)};Object.defineProperty(a,"__esModule",{value:!0})})},{}],155:[function(a,q,p){(function(a,k){"object"===typeof p&&"undefined"!==typeof q?k(p):k(a.d3=a.d3||
{})})(this,function(a){function k(){}function n(b,a){var c=new k;if(b instanceof k)b.each(function(b,a){c.set(a,b)});else if(Array.isArray(b)){var d=-1,e=b.length,f;if(null==a)for(;++d<e;)c.set(d,b[d]);else for(;++d<e;)c.set(a(f=b[d],d,b),f)}else if(b)for(d in b)c.set(d,b[d]);return c}function h(){return{}}function b(b,a,e){b[a]=e}function g(){return n()}function e(b,a,e){b.set(a,e)}function t(){}function l(b,a){var c=new t;if(b instanceof t)b.each(function(b){c.add(b)});else if(b){var d=-1,e=b.length;
if(null==a)for(;++d<e;)c.add(b[d]);else for(;++d<e;)c.add(a(b[d],d,b))}return c}k.prototype=n.prototype={constructor:k,has:function(b){return"$"+b in this},get:function(b){return this["$"+b]},set:function(b,a){this["$"+b]=a;return this},remove:function(b){b="$"+b;return b in this&&delete this[b]},clear:function(){for(var b in this)"$"===b[0]&&delete this[b]},keys:function(){var b=[],a;for(a in this)"$"===a[0]&&b.push(a.slice(1));return b},values:function(){var b=[],a;for(a in this)"$"===a[0]&&b.push(this[a]);
return b},entries:function(){var b=[],a;for(a in this)"$"===a[0]&&b.push({key:a.slice(1),value:this[a]});return b},size:function(){var b=0,a;for(a in this)"$"===a[0]&&++b;return b},empty:function(){for(var b in this)if("$"===b[0])return!1;return!0},each:function(b){for(var a in this)"$"===a[0]&&b(this[a],a.slice(1),this)}};var f=n.prototype;t.prototype=l.prototype={constructor:t,has:f.has,add:function(b){b+="";this["$"+b]=b;return this},remove:f.remove,clear:f.clear,values:f.keys,size:f.size,empty:f.empty,
each:f.each};a.nest=function(){function a(b,c,d,e){if(c>=f.length)return null!=k&&b.sort(k),null!=t?t(b):b;for(var g=-1,h=b.length,r=f[c++],l,u,m=n(),v,w=d();++g<h;)(v=m.get(l=r(u=b[g])+""))?v.push(u):m.set(l,[u]);m.each(function(b,f){e(w,f,a(b,c,d,e))});return w}function c(b,a){if(++a>f.length)return b;var d=l[a-1];if(null!=t&&a>=f.length)var e=b.entries();else e=[],b.each(function(b,d){e.push({key:d,values:c(b,a)})});return null!=d?e.sort(function(b,a){return d(b.key,a.key)}):e}var f=[],l=[],k,
t,m;return m={object:function(c){return a(c,0,h,b)},map:function(b){return a(b,0,g,e)},entries:function(b){return c(a(b,0,g,e),0)},key:function(b){f.push(b);return m},sortKeys:function(b){l[f.length-1]=b;return m},sortValues:function(b){k=b;return m},rollup:function(b){t=b;return m}}};a.set=l;a.map=n;a.keys=function(b){var a=[],d;for(d in b)a.push(d);return a};a.values=function(b){var a=[],d;for(d in b)a.push(b[d]);return a};a.entries=function(b){var a=[],d;for(d in b)a.push({key:d,value:b[d]});return a};
Object.defineProperty(a,"__esModule",{value:!0})})},{}],156:[function(a,q,p){(function(a,k){"object"===typeof p&&"undefined"!==typeof q?k(p):(a=a||self,k(a.d3=a.d3||{}))})(this,function(a){function k(b,a,c){b.prototype=a.prototype=c;c.constructor=b}function n(b,a){b=Object.create(b.prototype);for(var c in a)b[c]=a[c];return b}function h(){}function b(){return this.rgb().formatHex()}function g(){return this.rgb().formatRgb()}function e(b){var a,d;b=(b+"").trim().toLowerCase();return(a=P.exec(b))?(d=
a[1].length,a=parseInt(a[1],16),6===d?t(a):3===d?new c(a>>8&15|a>>4&240,a>>4&15|a&240,(a&15)<<4|a&15,1):8===d?new c(a>>24&255,a>>16&255,a>>8&255,(a&255)/255):4===d?new c(a>>12&15|a>>8&240,a>>8&15|a>>4&240,a>>4&15|a&240,((a&15)<<4|a&15)/255):null):(a=Q.exec(b))?new c(a[1],a[2],a[3],1):(a=T.exec(b))?new c(255*a[1]/100,255*a[2]/100,255*a[3]/100,1):(a=V.exec(b))?l(a[1],a[2],a[3],a[4]):(a=Y.exec(b))?l(255*a[1]/100,255*a[2]/100,255*a[3]/100,a[4]):(a=ca.exec(b))?w(a[1],a[2]/100,a[3]/100,1):(a=Z.exec(b))?
w(a[1],a[2]/100,a[3]/100,a[4]):R.hasOwnProperty(b)?t(R[b]):"transparent"===b?new c(NaN,NaN,NaN,0):null}function t(b){return new c(b>>16&255,b>>8&255,b&255,1)}function l(b,a,d,e){0>=e&&(b=a=d=NaN);return new c(b,a,d,e)}function f(b){b instanceof h||(b=e(b));if(!b)return new c;b=b.rgb();return new c(b.r,b.g,b.b,b.opacity)}function d(b,a,d,e){return 1===arguments.length?f(b):new c(b,a,d,null==e?1:e)}function c(b,a,c,d){this.r=+b;this.g=+a;this.b=+c;this.opacity=+d}function r(){return"#"+v(this.r)+v(this.g)+
v(this.b)}function u(){var b=this.opacity;b=isNaN(b)?1:Math.max(0,Math.min(1,b));return(1===b?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===b?")":", "+b+")")}function v(b){b=Math.max(0,Math.min(255,Math.round(b)||0));return(16>b?"0":"")+b.toString(16)}function w(b,a,c,d){0>=d?b=a=c=NaN:0>=c||1<=c?b=a=NaN:0>=a&&(b=NaN);return new z(b,a,c,d)}function y(b){if(b instanceof z)return new z(b.h,
b.s,b.l,b.opacity);b instanceof h||(b=e(b));if(!b)return new z;if(b instanceof z)return b;b=b.rgb();var a=b.r/255,c=b.g/255,d=b.b/255,f=Math.min(a,c,d),g=Math.max(a,c,d),r=NaN,l=g-f,k=(g+f)/2;l?(r=a===g?(c-d)/l+6*(c<d):c===g?(d-a)/l+2:(a-c)/l+4,l/=.5>k?g+f:2-g-f,r*=60):l=0<k&&1>k?0:r;return new z(r,l,k,b.opacity)}function A(b,a,c,d){return 1===arguments.length?y(b):new z(b,a,c,null==d?1:d)}function z(b,a,c,d){this.h=+b;this.s=+a;this.l=+c;this.opacity=+d}function x(b,a,c){return 255*(60>b?a+(c-a)*
b/60:180>b?c:240>b?a+(c-a)*(240-b)/60:a)}function C(b){if(b instanceof D)return new D(b.l,b.a,b.b,b.opacity);if(b instanceof K)return M(b);b instanceof c||(b=f(b));var a=L(b.r),d=L(b.g),e=L(b.b),g=q(.2225045*a+.7168786*d+.0606169*e);if(a===d&&d===e)var h=a=g;else h=q((.4360747*a+.3850649*d+.1430804*e)/.96422),a=q((.0139322*a+.0971045*d+.7141733*e)/.82521);return new D(116*g-16,500*(h-g),200*(g-a),b.opacity)}function B(b,a,c,d){return 1===arguments.length?C(b):new D(b,a,c,null==d?1:d)}function D(b,
a,c,d){this.l=+b;this.a=+a;this.b=+c;this.opacity=+d}function q(b){return b>da?Math.pow(b,1/3):b/la+ea}function p(b){return b>fa?b*b*b:la*(b-ea)}function F(b){return 255*(.0031308>=b?12.92*b:1.055*Math.pow(b,1/2.4)-.055)}function L(b){return.04045>=(b/=255)?b/12.92:Math.pow((b+.055)/1.055,2.4)}function J(b){if(b instanceof K)return new K(b.h,b.c,b.l,b.opacity);b instanceof D||(b=C(b));if(0===b.a&&0===b.b)return new K(NaN,0<b.l&&100>b.l?0:NaN,b.l,b.opacity);var a=Math.atan2(b.b,b.a)*X;return new K(0>
a?a+360:a,Math.sqrt(b.a*b.a+b.b*b.b),b.l,b.opacity)}function H(b,a,c,d){return 1===arguments.length?J(b):new K(b,a,c,null==d?1:d)}function K(b,a,c,d){this.h=+b;this.c=+a;this.l=+c;this.opacity=+d}function M(b){if(isNaN(b.h))return new D(b.l,0,0,b.opacity);var a=b.h*U;return new D(b.l,Math.cos(a)*b.c,Math.sin(a)*b.c,b.opacity)}function I(b,a,d,e){if(1===arguments.length){var g=b;if(g instanceof N)g=new N(g.h,g.s,g.l,g.opacity);else{g instanceof c||(g=f(g));var h=g.g/255,r=g.b/255,l=(ma*r+g.r/255*-1.7884503806-
3.5172982438*h)/(ma+-1.7884503806-3.5172982438);r-=l;var k=(1.97294*(h-l)- -.29227*r)/-.90649;r=(h=Math.sqrt(k*k+r*r)/(1.97294*l*(1-l)))?Math.atan2(k,r)*X-120:NaN;g=new N(0>r?r+360:r,h,l,g.opacity)}}else g=new N(b,a,d,null==e?1:e);return g}function N(b,a,c,d){this.h=+b;this.s=+a;this.l=+c;this.opacity=+d}var O=1/.7,P=/^#([0-9a-f]{3,8})$/,Q=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,T=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,
V=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,Y=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,ca=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,Z=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,
R={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,
darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,
hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,
linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,
palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,
turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};k(h,e,{copy:function(b){return Object.assign(new this.constructor,this,b)},displayable:function(){return this.rgb().displayable()},hex:b,formatHex:b,formatHsl:function(){return y(this).formatHsl()},formatRgb:g,toString:g});k(c,d,n(h,{brighter:function(b){b=null==b?O:Math.pow(O,b);return new c(this.r*b,this.g*b,this.b*b,this.opacity)},darker:function(b){b=null==b?.7:Math.pow(.7,
b);return new c(this.r*b,this.g*b,this.b*b,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&255.5>this.g&&-.5<=this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:r,formatHex:r,formatRgb:u,toString:u}));k(z,A,n(h,{brighter:function(b){b=null==b?O:Math.pow(O,b);return new z(this.h,this.s,this.l*b,this.opacity)},darker:function(b){b=null==b?.7:Math.pow(.7,b);return new z(this.h,this.s,this.l*b,this.opacity)},rgb:function(){var b=
this.h%360+360*(0>this.h),a=isNaN(b)||isNaN(this.s)?0:this.s,d=this.l;a=d+(.5>d?d:1-d)*a;d=2*d-a;return new c(x(240<=b?b-240:b+120,d,a),x(b,d,a),x(120>b?b+240:b-120,d,a),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity},formatHsl:function(){var b=this.opacity;b=isNaN(b)?1:Math.max(0,Math.min(1,b));return(1===b?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===b?")":", "+b+")")}}));
var U=Math.PI/180,X=180/Math.PI,ea=4/29,fa=6/29,la=3*fa*fa,da=fa*fa*fa;k(D,B,n(h,{brighter:function(b){return new D(this.l+18*(null==b?1:b),this.a,this.b,this.opacity)},darker:function(b){return new D(this.l-18*(null==b?1:b),this.a,this.b,this.opacity)},rgb:function(){var b=(this.l+16)/116,a=isNaN(this.a)?b:b+this.a/500,d=isNaN(this.b)?b:b-this.b/200;a=.96422*p(a);b=1*p(b);d=.82521*p(d);return new c(F(3.1338561*a-1.6168667*b-.4906146*d),F(-.9787684*a+1.9161415*b+.033454*d),F(.0719453*a-.2289914*b+
1.4052427*d),this.opacity)}}));k(K,H,n(h,{brighter:function(b){return new K(this.h,this.c,this.l+18*(null==b?1:b),this.opacity)},darker:function(b){return new K(this.h,this.c,this.l-18*(null==b?1:b),this.opacity)},rgb:function(){return M(this).rgb()}}));var ma=1.78277*-.29227-.1347134789;k(N,I,n(h,{brighter:function(b){b=null==b?O:Math.pow(O,b);return new N(this.h,this.s,this.l*b,this.opacity)},darker:function(b){b=null==b?.7:Math.pow(.7,b);return new N(this.h,this.s,this.l*b,this.opacity)},rgb:function(){var b=
isNaN(this.h)?0:(this.h+120)*U,a=+this.l,d=isNaN(this.s)?0:this.s*a*(1-a),e=Math.cos(b);b=Math.sin(b);return new c(255*(a+d*(-.14861*e+1.78277*b)),255*(a+d*(-.29227*e+-.90649*b)),255*(a+1.97294*d*e),this.opacity)}}));a.color=e;a.cubehelix=I;a.gray=function(b,a){return new D(b,0,0,null==a?1:a)};a.hcl=H;a.hsl=A;a.lab=B;a.lch=function(b,a,c,d){return 1===arguments.length?J(b):new K(c,a,b,null==d?1:d)};a.rgb=d;Object.defineProperty(a,"__esModule",{value:!0})})},{}],157:[function(a,q,p){(function(a,k){"object"===
typeof p&&"undefined"!==typeof q?k(p):k(a.d3=a.d3||{})})(this,function(a){function k(){for(var b=0,a=arguments.length,g={},f;b<a;++b){if(!(f=arguments[b]+"")||f in g)throw Error("illegal type: "+f);g[f]=[]}return new n(g)}function n(b){this._=b}function h(b,a){return b.trim().split(/^|\s+/).map(function(b){var e="",d=b.indexOf(".");0<=d&&(e=b.slice(d+1),b=b.slice(0,d));if(b&&!a.hasOwnProperty(b))throw Error("unknown type: "+b);return{type:b,name:e}})}function b(b,a,h){for(var e=0,d=b.length;e<d;++e)if(b[e].name===
a){b[e]=g;b=b.slice(0,e).concat(b.slice(e+1));break}null!=h&&b.push({name:a,value:h});return b}var g={value:function(){}};n.prototype=k.prototype={constructor:n,on:function(a,g){var e=this._,f=h(a+"",e),d,c=-1,r=f.length;if(2>arguments.length)for(;++c<r;){var k;if(k=d=(a=f[c]).type){a:{k=e[d];for(var t=0,n=k.length;t<n;++t)if((d=k[t]).name===a.name){d=d.value;break a}d=void 0}k=d}if(k)return d}else{if(null!=g&&"function"!==typeof g)throw Error("invalid callback: "+g);for(;++c<r;)if(d=(a=f[c]).type)e[d]=
b(e[d],a.name,g);else if(null==g)for(d in e)e[d]=b(e[d],a.name,null);return this}},copy:function(){var b={},a=this._,g;for(g in a)b[g]=a[g].slice();return new n(b)},call:function(b,a){if(0<(d=arguments.length-2))for(var e=Array(d),f=0,d,c;f<d;++f)e[f]=arguments[f+2];if(!this._.hasOwnProperty(b))throw Error("unknown type: "+b);c=this._[b];f=0;for(d=c.length;f<d;++f)c[f].value.apply(a,e)},apply:function(b,a,g){if(!this._.hasOwnProperty(b))throw Error("unknown type: "+b);b=this._[b];for(var e=0,d=b.length;e<
d;++e)b[e].value.apply(a,g)}};a.dispatch=k;Object.defineProperty(a,"__esModule",{value:!0})})},{}],158:[function(a,q,p){(function(n,k){"object"===typeof p&&"undefined"!==typeof q?k(p,a("d3-quadtree"),a("d3-collection"),a("d3-dispatch"),a("d3-timer")):k(n.d3=n.d3||{},n.d3,n.d3,n.d3,n.d3)})(this,function(a,k,m,h,b){function g(b){return b.x+b.vx}function e(b){return b.y+b.vy}function t(b){return b.index}function l(b,a){b=b.get(a);if(!b)throw Error("missing: "+a);return b}function f(b){return b.x}function d(b){return b.y}
var c=function(b){return function(){return b}},r=function(){return 1E-6*(Math.random()-.5)},u=Math.PI*(3-Math.sqrt(5));a.forceCenter=function(b,a){function c(){var c,e=d.length,f=0,g=0;for(c=0;c<e;++c){var h=d[c];f+=h.x;g+=h.y}f=f/e-b;g=g/e-a;for(c=0;c<e;++c)h=d[c],h.x-=f,h.y-=g}var d;null==b&&(b=0);null==a&&(a=0);c.initialize=function(b){d=b};c.x=function(a){return arguments.length?(b=+a,c):b};c.y=function(b){return arguments.length?(a=+b,c):a};return c};a.forceCollide=function(b){function a(){function b(b,
a,c,d,e){var f=b.data;b=b.r;var g=w+b;if(f)f.index>n.index&&(a=m-f.x-f.vx,c=v-f.y-f.vy,d=a*a+c*c,d<g*g&&(0===a&&(a=r(),d+=a*a),0===c&&(c=r(),d+=c*c),d=(g-(d=Math.sqrt(d)))/d*u,n.vx+=(a*=d)*(g=(b*=b)/(y+b)),n.vy+=(c*=d)*g,f.vx-=a*(g=1-g),f.vy-=c*g));else return a>m+g||d<m-g||c>v+g||e<v-g}for(var a,c=h.length,f,n,m,v,w,y,A=0;A<t;++A)for(f=k.quadtree(h,g,e).visitAfter(d),a=0;a<c;++a)n=h[a],w=l[n.index],y=w*w,m=n.x+n.vx,v=n.y+n.vy,f.visit(b)}function d(b){if(b.data)return b.r=l[b.data.index];for(var a=
b.r=0;4>a;++a)b[a]&&b[a].r>b.r&&(b.r=b[a].r)}function f(){if(h){var a,c=h.length;l=Array(c);for(a=0;a<c;++a){var d=h[a];l[d.index]=+b(d,a,h)}}}var h,l,u=1,t=1;"function"!==typeof b&&(b=c(null==b?1:+b));a.initialize=function(b){h=b;f()};a.iterations=function(b){return arguments.length?(t=+b,a):t};a.strength=function(b){return arguments.length?(u=+b,a):u};a.radius=function(d){return arguments.length?(b="function"===typeof d?d:c(+d),f(),a):b};return a};a.forceLink=function(b){function a(a){for(var c=
0,d=b.length;c<J;++c)for(var e=0,f,g,h,l,u;e<d;++e)f=b[e],g=f.source,f=f.target,h=f.x+f.vx-g.x-g.vx||r(),l=f.y+f.vy-g.y-g.vy||r(),u=Math.sqrt(h*h+l*l),u=(u-n[e])/u*a*k[e],h*=u,l*=u,f.vx-=h*(u=p[e]),f.vy-=l*u,g.vx+=h*(u=1-u),g.vy+=l*u}function d(){if(v){var a=v.length,c=b.length,d=m.map(v,g);var h=0;for(q=Array(a);h<c;++h)a=b[h],a.index=h,"object"!==typeof a.source&&(a.source=l(d,a.source)),"object"!==typeof a.target&&(a.target=l(d,a.target)),q[a.source.index]=(q[a.source.index]||0)+1,q[a.target.index]=
(q[a.target.index]||0)+1;h=0;for(p=Array(c);h<c;++h)a=b[h],p[h]=q[a.source.index]/(q[a.source.index]+q[a.target.index]);k=Array(c);e();n=Array(c);f()}}function e(){if(v)for(var a=0,c=b.length;a<c;++a)k[a]=+h(b[a],a,b)}function f(){if(v)for(var a=0,c=b.length;a<c;++a)n[a]=+u(b[a],a,b)}var g=t,h=function(b){return 1/Math.min(q[b.source.index],q[b.target.index])},k,u=c(30),n,v,q,p,J=1;null==b&&(b=[]);a.initialize=function(b){v=b;d()};a.links=function(c){return arguments.length?(b=c,d(),a):b};a.id=function(b){return arguments.length?
(g=b,a):g};a.iterations=function(b){return arguments.length?(J=+b,a):J};a.strength=function(b){return arguments.length?(h="function"===typeof b?b:c(+b),e(),a):h};a.distance=function(b){return arguments.length?(u="function"===typeof b?b:c(+b),f(),a):u};return a};a.forceManyBody=function(){function b(b){var a=h.length,c=k.quadtree(h,f,d).visitAfter(e);u=b;for(b=0;b<a;++b)l=h[b],c.visit(g)}function a(){if(h){var b,a=h.length;n=Array(a);for(b=0;b<a;++b){var c=h[b];n[c.index]=+t(c,b,h)}}}function e(b){var a=
0,c,d,e=0,f,g,h;if(b.length){for(f=g=h=0;4>h;++h)(c=b[h])&&(d=Math.abs(c.value))&&(a+=c.value,e+=d,f+=d*c.x,g+=d*c.y);b.x=f/e;b.y=g/e}else{c=b;c.x=c.data.x;c.y=c.data.y;do a+=n[c.data.index];while(c=c.next)}b.value=a}function g(b,a,c,d){if(!b.value)return!0;c=b.x-l.x;var e=b.y-l.y;a=d-a;d=c*c+e*e;if(a*a/p<d)return d<q&&(0===c&&(c=r(),d+=c*c),0===e&&(e=r(),d+=e*e),d<m&&(d=Math.sqrt(m*d)),l.vx+=c*b.value*u/d,l.vy+=e*b.value*u/d),!0;if(!(b.length||d>=q)){if(b.data!==l||b.next)0===c&&(c=r(),d+=c*c),0===
e&&(e=r(),d+=e*e),d<m&&(d=Math.sqrt(m*d));do b.data!==l&&(a=n[b.data.index]*u/d,l.vx+=c*a,l.vy+=e*a);while(b=b.next)}}var h,l,u,t=c(-30),n,m=1,q=Infinity,p=.81;b.initialize=function(b){h=b;a()};b.strength=function(d){return arguments.length?(t="function"===typeof d?d:c(+d),a(),b):t};b.distanceMin=function(a){return arguments.length?(m=a*a,b):Math.sqrt(m)};b.distanceMax=function(a){return arguments.length?(q=a*a,b):Math.sqrt(q)};b.theta=function(a){return arguments.length?(p=a*a,b):Math.sqrt(p)};return b};
a.forceRadial=function(b,a,d){function e(b){for(var c=0,e=g.length;c<e;++c){var f=g[c],h=f.x-a||1E-6,k=f.y-d||1E-6,u=Math.sqrt(h*h+k*k);u=(l[c]-u)*r[c]*b/u;f.vx+=h*u;f.vy+=k*u}}function f(){if(g){var a,c=g.length;r=Array(c);l=Array(c);for(a=0;a<c;++a)l[a]=+b(g[a],a,g),r[a]=isNaN(l[a])?0:+h(g[a],a,g)}}var g,h=c(.1),r,l;"function"!==typeof b&&(b=c(+b));null==a&&(a=0);null==d&&(d=0);e.initialize=function(b){g=b;f()};e.strength=function(b){return arguments.length?(h="function"===typeof b?b:c(+b),f(),
e):h};e.radius=function(a){return arguments.length?(b="function"===typeof a?a:c(+a),f(),e):b};e.x=function(b){return arguments.length?(a=+b,e):a};e.y=function(b){return arguments.length?(d=+b,e):d};return e};a.forceSimulation=function(a){function c(){d();p.call("tick",g);r<l&&(q.stop(),p.call("end",g))}function d(){var b,c=a.length;r+=(t-r)*k;v.each(function(b){b(r)});for(b=0;b<c;++b){var d=a[b];null==d.fx?d.x+=d.vx*=n:(d.x=d.fx,d.vx=0);null==d.fy?d.y+=d.vy*=n:(d.y=d.fy,d.vy=0)}}function e(){for(var b=
0,c=a.length,d;b<c;++b){d=a[b];d.index=b;if(isNaN(d.x)||isNaN(d.y)){var e=10*Math.sqrt(b),f=b*u;d.x=e*Math.cos(f);d.y=e*Math.sin(f)}if(isNaN(d.vx)||isNaN(d.vy))d.vx=d.vy=0}}function f(b){b.initialize&&b.initialize(a);return b}var g,r=1,l=.001,k=1-Math.pow(l,1/300),t=0,n=.6,v=m.map(),q=b.timer(c),p=h.dispatch("tick","end");null==a&&(a=[]);e();return g={tick:d,restart:function(){return q.restart(c),g},stop:function(){return q.stop(),g},nodes:function(b){return arguments.length?(a=b,e(),v.each(f),g):
a},alpha:function(b){return arguments.length?(r=+b,g):r},alphaMin:function(b){return arguments.length?(l=+b,g):l},alphaDecay:function(b){return arguments.length?(k=+b,g):+k},alphaTarget:function(b){return arguments.length?(t=+b,g):t},velocityDecay:function(b){return arguments.length?(n=1-b,g):1-n},force:function(b,a){return 1<arguments.length?(null==a?v.remove(b):v.set(b,f(a)),g):v.get(b)},find:function(b,c,d){var e,f=a.length;d=null==d?Infinity:d*d;for(e=0;e<f;++e){var g=a[e];var h=b-g.x;var r=c-
g.y;h=h*h+r*r;if(h<d){var l=g;d=h}}return l},on:function(b,a){return 1<arguments.length?(p.on(b,a),g):p.on(b)}}};a.forceX=function(b){function a(b){for(var a=0,c=f.length,d;a<c;++a)d=f[a],d.vx+=(h[a]-d.x)*g[a]*b}function d(){if(f){var a,c=f.length;g=Array(c);h=Array(c);for(a=0;a<c;++a)g[a]=isNaN(h[a]=+b(f[a],a,f))?0:+e(f[a],a,f)}}var e=c(.1),f,g,h;"function"!==typeof b&&(b=c(null==b?0:+b));a.initialize=function(b){f=b;d()};a.strength=function(b){return arguments.length?(e="function"===typeof b?b:
c(+b),d(),a):e};a.x=function(e){return arguments.length?(b="function"===typeof e?e:c(+e),d(),a):b};return a};a.forceY=function(b){function a(b){for(var a=0,c=f.length,d;a<c;++a)d=f[a],d.vy+=(h[a]-d.y)*g[a]*b}function d(){if(f){var a,c=f.length;g=Array(c);h=Array(c);for(a=0;a<c;++a)g[a]=isNaN(h[a]=+b(f[a],a,f))?0:+e(f[a],a,f)}}var e=c(.1),f,g,h;"function"!==typeof b&&(b=c(null==b?0:+b));a.initialize=function(b){f=b;d()};a.strength=function(b){return arguments.length?(e="function"===typeof b?b:c(+b),
d(),a):e};a.y=function(e){return arguments.length?(b="function"===typeof e?e:c(+e),d(),a):b};return a};Object.defineProperty(a,"__esModule",{value:!0})})},{"d3-collection":155,"d3-dispatch":157,"d3-quadtree":162,"d3-timer":164}],159:[function(a,q,p){(function(a,k){"object"===typeof p&&"undefined"!==typeof q?k(p):(a=a||self,k(a.d3=a.d3||{}))})(this,function(a){function k(b,a){return b.parent===a.parent?1:2}function n(b,a){return b+a.x}function h(b,a){return Math.max(b,a.y)}function b(b){for(var a;a=
b.children;)b=a[0];return b}function g(b){for(var a;a=b.children;)b=a[a.length-1];return b}function e(b){var a=0,c=b.children,d=c&&c.length;if(d)for(;0<=--d;)a+=c[d].value;else a=1;b.value=a}function t(b,a){var e=new c(b);b=+b.value&&(e.value=b.value);var f,g=[e],h,r,k,u;for(null==a&&(a=l);f=g.pop();)if(b&&(f.value=+f.data.value),(r=a(f.data))&&(u=r.length))for(f.children=Array(u),k=u-1;0<=k;--k)g.push(h=f.children[k]=new c(r[k])),h.parent=f,h.depth=f.depth+1;return e.eachBefore(d)}function l(b){return b.children}
function f(b){b.data=b.data.data}function d(b){var a=0;do b.height=a;while((b=b.parent)&&b.height<++a)}function c(b){this.data=b;this.depth=this.height=0;this.parent=null}function r(b){var a=0;b=R.call(b);for(var c=b.length,d,e;c;)e=Math.random()*c--|0,d=b[c],b[c]=b[e],b[e]=d;c=b.length;d=[];for(var f;a<c;)if(e=b[a],f&&v(f,e))++a;else{a:if(a=d,w(e,a))a=[e];else{for(d=0;d<a.length;++d)if(u(e,a[d])&&w(y(a[d],e),a)){a=[a[d],e];break a}for(d=0;d<a.length-1;++d)for(f=d+1;f<a.length;++f)if(u(y(a[d],a[f]),
e)&&u(y(a[d],e),a[f])&&u(y(a[f],e),a[d])&&w(A(a[d],a[f],e),a)){a=[a[d],a[f],e];break a}throw Error();}a:{a=d=a;switch(a.length){case 1:a=a[0];a={x:a.x,y:a.y,r:a.r};break a;case 2:a=y(a[0],a[1]);break a;case 3:a=A(a[0],a[1],a[2]);break a}a=void 0}f=a;a=0}return f}function u(b,a){var c=b.r-a.r,d=a.x-b.x;b=a.y-b.y;return 0>c||c*c<d*d+b*b}function v(b,a){var c=b.r-a.r+1E-6,d=a.x-b.x;b=a.y-b.y;return 0<c&&c*c>d*d+b*b}function w(b,a){for(var c=0;c<a.length;++c)if(!v(b,a[c]))return!1;return!0}function y(b,
a){var c=b.x,d=b.y;b=b.r;var e=a.x,f=a.y;a=a.r;var g=e-c,h=f-d,r=a-b,l=Math.sqrt(g*g+h*h);return{x:(c+e+g/l*r)/2,y:(d+f+h/l*r)/2,r:(l+b+a)/2}}function A(b,a,c){var d=b.x,e=b.y;b=b.r;var f=a.x,g=a.y,h=a.r,r=c.x,l=c.y,k=c.r;c=d-f;a=d-r;var u=e-g,t=e-l,n=h-b,m=k-b,v=d*d+e*e-b*b;g=v-f*f-g*g+h*h;l=v-r*r-l*l+k*k;r=a*u-c*t;f=(u*l-t*g)/(2*r)-d;u=(t*n-u*m)/r;t=(a*g-c*l)/(2*r)-e;c=(c*m-a*n)/r;a=u*u+c*c-1;n=2*(b+f*u+t*c);b=f*f+t*t-b*b;b=-(a?(n+Math.sqrt(n*n-4*a*b))/(2*a):b/n);return{x:d+f+u*b,y:e+t+c*b,r:b}}
function z(b,a,c){var d=b.x-a.x,e=b.y-a.y,f=d*d+e*e;if(f){var g=a.r+c.r;g*=g;var h=b.r+c.r;h*=h;if(g>h){var r=(f+h-g)/(2*f);g=Math.sqrt(Math.max(0,h/f-r*r));c.x=b.x-r*d-g*e;c.y=b.y-r*e+g*d}else r=(f+g-h)/(2*f),g=Math.sqrt(Math.max(0,g/f-r*r)),c.x=a.x+r*d-g*e,c.y=a.y+r*e+g*d}else c.x=a.x+c.r,c.y=a.y}function x(b,a){var c=b.r+a.r-1E-6,d=a.x-b.x;b=a.y-b.y;return 0<c&&c*c>d*d+b*b}function C(b){var a=b._,c=b.next._,d=a.r+c.r;b=(a.x*c.r+c.x*a.r)/d;a=(a.y*c.r+c.y*a.r)/d;return b*b+a*a}function B(b){this._=
b;this.previous=this.next=null}function D(b){if(!(c=b.length))return 0;var a,c;var d=b[0];d.x=0;d.y=0;if(!(1<c))return d.r;var e=b[1];d.x=-e.r;e.x=d.r;e.y=0;if(!(2<c))return d.r+e.r;z(e,d,a=b[2]);d=new B(d);e=new B(e);a=new B(a);d.next=a.previous=e;e.next=d.previous=a;a.next=e.previous=d;var f=3;a:for(;f<c;++f){z(d._,e._,a=b[f]);a=new B(a);var g=e.next;var h=d.previous;var l=e._.r;var k=d._.r;do if(l<=k){if(x(g._,a._)){e=g;d.next=e;e.previous=d;--f;continue a}l+=g._.r;g=g.next}else{if(x(h._,a._)){d=
h;d.next=e;e.previous=d;--f;continue a}k+=h._.r;h=h.previous}while(g!==h.next);a.previous=d;a.next=e;d.next=e.previous=e=a;for(g=C(d);(a=a.next)!==e;)(h=C(a))<g&&(d=a,g=h);e=d.next}d=[e._];for(a=e;(a=a.next)!==e;)d.push(a._);a=r(d);for(f=0;f<c;++f)d=b[f],d.x-=a.x,d.y-=a.y;return a.r}function q(b){if("function"!==typeof b)throw Error();return b}function p(){return 0}function F(b){return function(){return b}}function L(b){return Math.sqrt(b.value)}function J(b){return function(a){a.children||(a.r=Math.max(0,
+b(a)||0))}}function H(b,a){return function(c){if(d=c.children){var d,e,f=d.length,g=b(c)*a||0;if(g)for(e=0;e<f;++e)d[e].r+=g;var h=D(d);if(g)for(e=0;e<f;++e)d[e].r-=g;c.r=h+g}}}function K(b){return function(a){var c=a.parent;a.r*=b;c&&(a.x=c.x+b*a.x,a.y=c.y+b*a.y)}}function M(b){b.x0=Math.round(b.x0);b.y0=Math.round(b.y0);b.x1=Math.round(b.x1);b.y1=Math.round(b.y1)}function I(b,a,c,d,e){var f=b.children,g=-1,h=f.length;for(d=b.value&&(d-a)/b.value;++g<h;)b=f[g],b.y0=c,b.y1=e,b.x0=a,b.x1=a+=b.value*
d}function N(b){return b.id}function O(b){return b.parentId}function P(b,a){return b.parent===a.parent?1:2}function Q(b){var a=b.children;return a?a[0]:b.t}function T(b){var a=b.children;return a?a[a.length-1]:b.t}function V(b,a){this._=b;this.A=this.children=this.parent=null;this.a=this;this.s=this.c=this.m=this.z=0;this.t=null;this.i=a}function Y(b){b=new V(b,0);for(var a,c=[b],d,e,f;a=c.pop();)if(e=a._.children)for(a.children=Array(d=e.length),f=d-1;0<=f;--f)c.push(d=a.children[f]=new V(e[f],f)),
d.parent=a;(b.parent=new V(null,0)).children=[b];return b}function ca(b,a,c,d,e){var f=b.children,g=-1,h=f.length;for(e=b.value&&(e-c)/b.value;++g<h;)b=f[g],b.x0=a,b.x1=d,b.y0=c,b.y1=c+=b.value*e}function Z(b,a,c,d,e,f){for(var g=[],h=a.children,r,l,k=r=0,u=h.length,t,n=a.value,m,v,w,y,A,z;r<u;){a=e-c;t=f-d;do m=h[k++].value;while(!m&&k<u);v=w=m;z=Math.max(t/a,a/t)/(n*b);y=m*m*z;for(A=Math.max(w/y,y/v);k<u;++k){m+=l=h[k].value;l<v&&(v=l);l>w&&(w=l);y=m*m*z;y=Math.max(w/y,y/v);if(y>A){m-=l;break}A=
y}g.push(r={value:m,dice:a<t,children:h.slice(r,k)});r.dice?I(r,c,d,e,n?d+=t*m/n:f):ca(r,c,d,n?c+=a*m/n:e,f);n-=m;r=k}return g}c.prototype=t.prototype={constructor:c,count:function(){return this.eachAfter(e)},each:function(b){var a,c=[this],d;do{var e=c.reverse();for(c=[];a=e.pop();)if(b(a),a=a.children){var f=0;for(d=a.length;f<d;++f)c.push(a[f])}}while(c.length);return this},eachAfter:function(b){for(var a,c=[this],d=[],e,f;a=c.pop();)if(d.push(a),a=a.children)for(e=0,f=a.length;e<f;++e)c.push(a[e]);
for(;a=d.pop();)b(a);return this},eachBefore:function(b){for(var a,c=[this],d;a=c.pop();)if(b(a),a=a.children)for(d=a.length-1;0<=d;--d)c.push(a[d]);return this},sum:function(b){return this.eachAfter(function(a){for(var c=+b(a.data)||0,d=a.children,e=d&&d.length;0<=--e;)c+=d[e].value;a.value=c})},sort:function(b){return this.eachBefore(function(a){a.children&&a.children.sort(b)})},path:function(b){var a=this;var c=a;var d=b;if(c!==d){var e=c.ancestors(),f=d.ancestors(),g=null;c=e.pop();for(d=f.pop();c===
d;)g=c,c=e.pop(),d=f.pop();c=g}for(d=[a];a!==c;)a=a.parent,d.push(a);for(a=d.length;b!==c;)d.splice(a,0,b),b=b.parent;return d},ancestors:function(){for(var b=this,a=[b];b=b.parent;)a.push(b);return a},descendants:function(){var b=[];this.each(function(a){b.push(a)});return b},leaves:function(){var b=[];this.eachBefore(function(a){a.children||b.push(a)});return b},links:function(){var b=this,a=[];b.each(function(c){c!==b&&a.push({source:c.parent,target:c})});return a},copy:function(){return t(this).eachBefore(f)}};
var R=Array.prototype.slice,U={depth:-1},X={};V.prototype=Object.create(c.prototype);var ea=(1+Math.sqrt(5))/2,fa=function ma(b){function a(a,c,d,e,f){Z(b,a,c,d,e,f)}a.ratio=function(b){return ma(1<(b=+b)?b:1)};return a}(ea);ea=function aa(b){function a(a,c,d,e,f){if((g=a._squarify)&&g.ratio===b)for(var g,h,r,l=-1,k,u=g.length,t=a.value;++l<u;){a=g[l];h=a.children;r=a.value=0;for(k=h.length;r<k;++r)a.value+=h[r].value;a.dice?I(a,c,d,e,d+=(f-d)*a.value/t):ca(a,c,d,c+=(e-c)*a.value/t,f);t-=a.value}else a._squarify=
g=Z(b,a,c,d,e,f),g.ratio=b}a.ratio=function(b){return aa(1<(b=+b)?b:1)};return a}(ea);a.cluster=function(){function a(a){var r,l=0;a.eachAfter(function(b){var a=b.children;if(a){var d=a.reduce(n,0)/a.length;b.x=d;b.y=1+a.reduce(h,0)}else b.x=r?l+=c(b,r):0,b.y=0,r=b});var k=b(a),u=g(a),t=k.x-c(k,u)/2,m=u.x+c(u,k)/2;return a.eachAfter(f?function(b){b.x=(b.x-a.x)*d;b.y=(a.y-b.y)*e}:function(b){b.x=(b.x-t)/(m-t)*d;b.y=(1-(a.y?b.y/a.y:1))*e})}var c=k,d=1,e=1,f=!1;a.separation=function(b){return arguments.length?
(c=b,a):c};a.size=function(b){return arguments.length?(f=!1,d=+b[0],e=+b[1],a):f?null:[d,e]};a.nodeSize=function(b){return arguments.length?(f=!0,d=+b[0],e=+b[1],a):f?[d,e]:null};return a};a.hierarchy=t;a.pack=function(){function b(b){b.x=c/2;b.y=d/2;a?b.eachBefore(J(a)).eachAfter(H(e,.5)).eachBefore(K(1)):b.eachBefore(J(L)).eachAfter(H(p,1)).eachAfter(H(e,b.r/Math.min(c,d))).eachBefore(K(Math.min(c,d)/(2*b.r)));return b}var a=null,c=1,d=1,e=p;b.radius=function(c){return arguments.length?(a=null==
c?null:q(c),b):a};b.size=function(a){return arguments.length?(c=+a[0],d=+a[1],b):[c,d]};b.padding=function(a){return arguments.length?(e="function"===typeof a?a:F(+a),b):e};return b};a.packEnclose=r;a.packSiblings=function(b){D(b);return b};a.partition=function(){function b(b){var g=b.height+1;b.x0=b.y0=e;b.x1=c;b.y1=d/g;b.eachBefore(a(d,g));f&&b.eachBefore(M);return b}function a(b,a){return function(c){c.children&&I(c,c.x0,b*(c.depth+1)/a,c.x1,b*(c.depth+2)/a);var d=c.x0,f=c.y0,g=c.x1-e,h=c.y1-e;
g<d&&(d=g=(d+g)/2);h<f&&(f=h=(f+h)/2);c.x0=d;c.y0=f;c.x1=g;c.y1=h}}var c=1,d=1,e=0,f=!1;b.round=function(a){return arguments.length?(f=!!a,b):f};b.size=function(a){return arguments.length?(c=+a[0],d=+a[1],b):[c,d]};b.padding=function(a){return arguments.length?(e=+a,b):e};return b};a.stratify=function(){function b(b){var f,g=b.length,h=Array(g),r,l={};for(f=0;f<g;++f){var k=b[f];var u=h[f]=new c(k);null!=(r=a(k,f,b))&&(r+="")&&(k="$"+(u.id=r),l[k]=k in l?X:u)}for(f=0;f<g;++f)if(u=h[f],r=e(b[f],f,
b),null!=r&&(r+="")){k=l["$"+r];if(!k)throw Error("missing: "+r);if(k===X)throw Error("ambiguous: "+r);k.children?k.children.push(u):k.children=[u];u.parent=k}else{if(t)throw Error("multiple roots");var t=u}if(!t)throw Error("no root");t.parent=U;t.eachBefore(function(b){b.depth=b.parent.depth+1;--g}).eachBefore(d);t.parent=null;if(0<g)throw Error("cycle");return t}var a=N,e=O;b.id=function(c){return arguments.length?(a=q(c),b):a};b.parentId=function(a){return arguments.length?(e=q(a),b):e};return b};
a.tree=function(){function b(b){var r=Y(b);r.eachAfter(a);r.parent.m=-r.z;r.eachBefore(c);if(h)b.eachBefore(d);else{var l=b,k=b,u=b;b.eachBefore(function(b){b.x<l.x&&(l=b);b.x>k.x&&(k=b);b.depth>u.depth&&(u=b)});r=l===k?1:e(l,k)/2;var t=r-l.x,n=f/(k.x+r+t),m=g/(u.depth||1);b.eachBefore(function(b){b.x=(b.x+t)*n;b.y=b.depth*m})}return b}function a(b){var a=b.children,c=b.parent.children,d=b.i?c[b.i-1]:null;if(a){for(var f=0,g=0,h=b.children,r=h.length,l;0<=--r;)l=h[r],l.z+=f,l.m+=f,f+=l.s+(g+=l.c);
a=(a[0].z+a[a.length-1].z)/2;d?(b.z=d.z+e(b._,d._),b.m=b.z-a):b.z=a}else d&&(b.z=d.z+e(b._,d._));a=b.parent;c=b.parent.A||c[0];if(d){g=f=b;h=f.parent.children[0];r=f.m;l=g.m;for(var k=d.m,u=h.m,t;d=T(d),f=Q(f),d&&f;){h=Q(h);g=T(g);g.a=b;t=d.z+k-f.z-r+e(d._,f._);if(0<t){var n=d.a.parent===b.parent?d.a:c,m=b,v=t,w=v/(m.i-n.i);m.c-=w;m.s+=v;n.c+=w;m.z+=v;m.m+=v;r+=t;l+=t}k+=d.m;r+=f.m;u+=h.m;l+=g.m}d&&!T(g)&&(g.t=d,g.m+=k-l);f&&!Q(h)&&(h.t=f,h.m+=r-u,c=b)}a.A=c}function c(b){b._.x=b.z+b.parent.m;b.m+=
b.parent.m}function d(b){b.x*=f;b.y=b.depth*g}var e=P,f=1,g=1,h=null;b.separation=function(a){return arguments.length?(e=a,b):e};b.size=function(a){return arguments.length?(h=!1,f=+a[0],g=+a[1],b):h?null:[f,g]};b.nodeSize=function(a){return arguments.length?(h=!0,f=+a[0],g=+a[1],b):h?[f,g]:null};return b};a.treemap=function(){function b(b){b.x0=b.y0=0;b.x1=e;b.y1=f;b.eachBefore(a);g=[0];d&&b.eachBefore(M);return b}function a(b){var a=g[b.depth],d=b.x0+a,e=b.y0+a,f=b.x1-a,t=b.y1-a;f<d&&(d=f=(d+f)/
2);t<e&&(e=t=(e+t)/2);b.x0=d;b.y0=e;b.x1=f;b.y1=t;b.children&&(a=g[b.depth+1]=h(b)/2,d+=u(b)-a,e+=r(b)-a,f-=l(b)-a,t-=k(b)-a,f<d&&(d=f=(d+f)/2),t<e&&(e=t=(e+t)/2),c(b,d,e,f,t))}var c=fa,d=!1,e=1,f=1,g=[0],h=p,r=p,l=p,k=p,u=p;b.round=function(a){return arguments.length?(d=!!a,b):d};b.size=function(a){return arguments.length?(e=+a[0],f=+a[1],b):[e,f]};b.tile=function(a){return arguments.length?(c=q(a),b):c};b.padding=function(a){return arguments.length?b.paddingInner(a).paddingOuter(a):b.paddingInner()};
b.paddingInner=function(a){return arguments.length?(h="function"===typeof a?a:F(+a),b):h};b.paddingOuter=function(a){return arguments.length?b.paddingTop(a).paddingRight(a).paddingBottom(a).paddingLeft(a):b.paddingTop()};b.paddingTop=function(a){return arguments.length?(r="function"===typeof a?a:F(+a),b):r};b.paddingRight=function(a){return arguments.length?(l="function"===typeof a?a:F(+a),b):l};b.paddingBottom=function(a){return arguments.length?(k="function"===typeof a?a:F(+a),b):k};b.paddingLeft=
function(a){return arguments.length?(u="function"===typeof a?a:F(+a),b):u};return b};a.treemapBinary=function(b,a,c,d,e){function f(b,a,c,d,e,h,r){if(b>=a-1)b=g[b],b.x0=d,b.y0=e,b.x1=h,b.y1=r;else{for(var l=k[b],u=c/2+l,t=b+1,n=a-1;t<n;){var m=t+n>>>1;k[m]<u?t=m+1:n=m}u-k[t-1]<k[t]-u&&b+1<t&&--t;l=k[t]-l;u=c-l;h-d>r-e?(c=(d*u+h*l)/c,f(b,t,l,d,e,c,r),f(t,a,u,c,e,h,r)):(c=(e*u+r*l)/c,f(b,t,l,d,e,h,c),f(t,a,u,d,c,h,r))}}var g=b.children,h,r=g.length,l,k=Array(r+1);for(k[0]=l=h=0;h<r;++h)k[h+1]=l+=g[h].value;
f(0,r,b.value,a,c,d,e)};a.treemapDice=I;a.treemapResquarify=ea;a.treemapSlice=ca;a.treemapSliceDice=function(b,a,c,d,e){(b.depth&1?ca:I)(b,a,c,d,e)};a.treemapSquarify=fa;Object.defineProperty(a,"__esModule",{value:!0})})},{}],160:[function(a,q,p){(function(n,k){"object"===typeof p&&"undefined"!==typeof q?k(p,a("d3-color")):(n=n||self,k(n.d3=n.d3||{},n.d3))})(this,function(a,k){function n(b,a,c,d,e){var f=b*b,g=f*b;return((1-3*b+3*f-g)*a+(4-6*f+3*g)*c+(1+3*b+3*f-3*g)*d+g*e)/6}function h(b){var a=b.length-
1;return function(c){var d=0>=c?c=0:1<=c?(c=1,a-1):Math.floor(c*a),e=b[d],f=b[d+1];return n((c-d/a)*a,0<d?b[d-1]:2*e-f,e,f,d<a-1?b[d+2]:2*f-e)}}function b(b){var a=b.length;return function(c){var d=Math.floor((0>(c%=1)?++c:c)*a);return n((c-d/a)*a,b[(d+a-1)%a],b[d%a],b[(d+1)%a],b[(d+2)%a])}}function g(b){return function(){return b}}function e(b,a){return function(c){return b+c*a}}function t(b,a,c){return b=Math.pow(b,c),a=Math.pow(a,c)-b,c=1/c,function(d){return Math.pow(b+d*a,c)}}function l(b,a){var c=
a-b;return c?e(b,180<c||-180>c?c-360*Math.round(c/360):c):g(isNaN(b)?a:b)}function f(b){return 1===(b=+b)?d:function(a,c){return c-a?t(a,c,b):g(isNaN(a)?c:a)}}function d(b,a){var c=a-b;return c?e(b,c):g(isNaN(b)?a:b)}function c(b){return function(a){var c=a.length,d=Array(c),e=Array(c),f=Array(c),g;for(g=0;g<c;++g){var h=k.rgb(a[g]);d[g]=h.r||0;e[g]=h.g||0;f[g]=h.b||0}d=b(d);e=b(e);f=b(f);h.opacity=1;return function(b){h.r=d(b);h.g=e(b);h.b=f(b);return h+""}}}function r(b,a){a||(a=[]);var c=b?Math.min(a.length,
b.length):0,d=a.slice(),e;return function(f){for(e=0;e<c;++e)d[e]=b[e]*(1-f)+a[e]*f;return d}}function u(b){return ArrayBuffer.isView(b)&&!(b instanceof DataView)}function v(b,a){var c=a?a.length:0,d=b?Math.min(c,b.length):0,e=Array(d),f=Array(c),g;for(g=0;g<d;++g)e[g]=B(b[g],a[g]);for(;g<c;++g)f[g]=a[g];return function(b){for(g=0;g<d;++g)f[g]=e[g](b);return f}}function w(b,a){var c=new Date;return b=+b,a=+a,function(d){return c.setTime(b*(1-d)+a*d),c}}function y(b,a){return b=+b,a=+a,function(c){return b*
(1-c)+a*c}}function A(b,a){var c={},d={},e;if(null===b||"object"!==typeof b)b={};if(null===a||"object"!==typeof a)a={};for(e in a)e in b?c[e]=B(b[e],a[e]):d[e]=a[e];return function(b){for(e in c)d[e]=c[e](b);return d}}function z(b){return function(){return b}}function x(b){return function(a){return b(a)+""}}function C(b,a){var c=I.lastIndex=N.lastIndex=0,d,e,f,g=-1,h=[],r=[];b+="";for(a+="";(d=I.exec(b))&&(e=N.exec(a));)(f=e.index)>c&&(f=a.slice(c,f),h[g]?h[g]+=f:h[++g]=f),(d=d[0])===(e=e[0])?h[g]?
h[g]+=e:h[++g]=e:(h[++g]=null,r.push({i:g,x:y(d,e)})),c=N.lastIndex;c<a.length&&(f=a.slice(c),h[g]?h[g]+=f:h[++g]=f);return 2>h.length?r[0]?x(r[0].x):z(a):(a=r.length,function(b){for(var c=0,d;c<a;++c)h[(d=r[c]).i]=d.x(b);return h.join("")})}function B(b,a){var c=typeof a,d;return null==a||"boolean"===c?g(a):("number"===c?y:"string"===c?(d=k.color(a))?(a=d,H):C:a instanceof k.color?H:a instanceof Date?w:u(a)?r:Array.isArray(a)?v:"function"!==typeof a.valueOf&&"function"!==typeof a.toString||isNaN(a)?
A:y)(b,a)}function D(b,a,c,d,e,f){var g,h,r;if(g=Math.sqrt(b*b+a*a))b/=g,a/=g;if(r=b*c+a*d)c-=b*r,d-=a*r;if(h=Math.sqrt(c*c+d*d))c/=h,d/=h,r/=h;b*d<a*c&&(b=-b,a=-a,r=-r,g=-g);return{translateX:e,translateY:f,rotate:Math.atan2(a,b)*O,skewX:Math.atan(r)*O,scaleX:g,scaleY:h}}function q(b,a,c,d){function e(b){return b.length?b.pop()+" ":""}function f(b,d,e,f,g,h){b!==e||d!==f?(g=g.push("translate(",null,a,null,c),h.push({i:g-4,x:y(b,e)},{i:g-2,x:y(d,f)})):(e||f)&&g.push("translate("+e+a+f+c)}function g(b,
a,c,f){b!==a?(180<b-a?a+=360:180<a-b&&(b+=360),f.push({i:c.push(e(c)+"rotate(",null,d)-2,x:y(b,a)})):a&&c.push(e(c)+"rotate("+a+d)}function h(b,a,c,f){b!==a?f.push({i:c.push(e(c)+"skewX(",null,d)-2,x:y(b,a)}):a&&c.push(e(c)+"skewX("+a+d)}function r(b,a,c,d,f,g){b!==c||a!==d?(f=f.push(e(f)+"scale(",null,",",null,")"),g.push({i:f-4,x:y(b,c)},{i:f-2,x:y(a,d)})):1===c&&1===d||f.push(e(f)+"scale("+c+","+d+")")}return function(a,c){var d=[],e=[];a=b(a);c=b(c);f(a.translateX,a.translateY,c.translateX,c.translateY,
d,e);g(a.rotate,c.rotate,d,e);h(a.skewX,c.skewX,d,e);r(a.scaleX,a.scaleY,c.scaleX,c.scaleY,d,e);a=c=null;return function(b){for(var a=-1,c=e.length,f;++a<c;)d[(f=e[a]).i]=f.x(b);return d.join("")}}}function p(b){return((b=Math.exp(b))+1/b)/2}function F(b){return function(a,c){var e=b((a=k.hsl(a)).h,(c=k.hsl(c)).h),f=d(a.s,c.s),g=d(a.l,c.l),h=d(a.opacity,c.opacity);return function(b){a.h=e(b);a.s=f(b);a.l=g(b);a.opacity=h(b);return a+""}}}function L(b){return function(a,c){var e=b((a=k.hcl(a)).h,(c=
k.hcl(c)).h),f=d(a.c,c.c),g=d(a.l,c.l),h=d(a.opacity,c.opacity);return function(b){a.h=e(b);a.c=f(b);a.l=g(b);a.opacity=h(b);return a+""}}}function J(b){return function ha(a){function c(c,e){var f=b((c=k.cubehelix(c)).h,(e=k.cubehelix(e)).h),g=d(c.s,e.s),h=d(c.l,e.l),r=d(c.opacity,e.opacity);return function(b){c.h=f(b);c.s=g(b);c.l=h(Math.pow(b,a));c.opacity=r(b);return c+""}}a=+a;c.gamma=ha;return c}(1)}var H=function na(b){function a(b,a){var e=c((b=k.rgb(b)).r,(a=k.rgb(a)).r),f=c(b.g,a.g),g=c(b.b,
a.b),h=d(b.opacity,a.opacity);return function(a){b.r=e(a);b.g=f(a);b.b=g(a);b.opacity=h(a);return b+""}}var c=f(b);a.gamma=na;return a}(1),K=c(h),M=c(b),I=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,N=new RegExp(I.source,"g"),O=180/Math.PI,P={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Q,T,V,Y,ca=q(function(b){if("none"===b)return P;Q||(Q=document.createElement("DIV"),T=document.documentElement,V=document.defaultView);Q.style.transform=b;b=V.getComputedStyle(T.appendChild(Q),null).getPropertyValue("transform");
T.removeChild(Q);b=b.slice(7,-1).split(",");return D(+b[0],+b[1],+b[2],+b[3],+b[4],+b[5])},"px, ","px)","deg)"),Z=q(function(b){if(null==b)return P;Y||(Y=document.createElementNS("http://www.w3.org/2000/svg","g"));Y.setAttribute("transform",b);if(!(b=Y.transform.baseVal.consolidate()))return P;b=b.matrix;return D(b.a,b.b,b.c,b.d,b.e,b.f)},", ",")",")"),R=Math.SQRT2,U=F(l),X=F(d),ea=L(l),fa=L(d),la=J(l),da=J(d);a.interpolate=B;a.interpolateArray=function(b,a){return(u(a)?r:v)(b,a)};a.interpolateBasis=
h;a.interpolateBasisClosed=b;a.interpolateCubehelix=la;a.interpolateCubehelixLong=da;a.interpolateDate=w;a.interpolateDiscrete=function(b){var a=b.length;return function(c){return b[Math.max(0,Math.min(a-1,Math.floor(c*a)))]}};a.interpolateHcl=ea;a.interpolateHclLong=fa;a.interpolateHsl=U;a.interpolateHslLong=X;a.interpolateHue=function(b,a){var c=l(+b,+a);return function(b){b=c(b);return b-360*Math.floor(b/360)}};a.interpolateLab=function(b,a){var c=d((b=k.lab(b)).l,(a=k.lab(a)).l),e=d(b.a,a.a),
f=d(b.b,a.b),g=d(b.opacity,a.opacity);return function(a){b.l=c(a);b.a=e(a);b.b=f(a);b.opacity=g(a);return b+""}};a.interpolateNumber=y;a.interpolateNumberArray=r;a.interpolateObject=A;a.interpolateRgb=H;a.interpolateRgbBasis=K;a.interpolateRgbBasisClosed=M;a.interpolateRound=function(b,a){return b=+b,a=+a,function(c){return Math.round(b*(1-c)+a*c)}};a.interpolateString=C;a.interpolateTransformCss=ca;a.interpolateTransformSvg=Z;a.interpolateZoom=function(b,a){var c=b[0],d=b[1],e=b[2];b=a[2];var f=
a[0]-c,g=a[1]-d,h=f*f+g*g;if(1E-12>h){var r=Math.log(b/e)/R;b=function(b){return[c+b*f,d+b*g,e*Math.exp(R*b*r)]}}else{var l=Math.sqrt(h);a=(b*b-e*e+4*h)/(4*e*l);b=(b*b-e*e-4*h)/(4*b*l);var k=Math.log(Math.sqrt(a*a+1)-a);r=(Math.log(Math.sqrt(b*b+1)-b)-k)/R;b=function(b){b*=r;var a=p(k),h=R*b+k;var u=((h=Math.exp(2*h))-1)/(h+1);var t=k;h=((t=Math.exp(t))-1/t)/2;u=e/(2*l)*(a*u-h);return[c+u*f,d+u*g,e*a/p(R*b+k)]}}b.duration=1E3*r;return b};a.piecewise=function(b,a){for(var c=0,d=a.length-1,e=a[0],f=
Array(0>d?0:d);c<d;)f[c]=b(e,e=a[++c]);return function(b){var a=Math.max(0,Math.min(d-1,Math.floor(b*=d)));return f[a](b-a)}};a.quantize=function(b,a){for(var c=Array(a),d=0;d<a;++d)c[d]=b(d/(a-1));return c};Object.defineProperty(a,"__esModule",{value:!0})})},{"d3-color":156}],161:[function(a,q,p){(function(a,k){"object"===typeof p&&"undefined"!==typeof q?k(p):k(a.d3=a.d3||{})})(this,function(a){function k(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function n(){return new k}var h=Math.PI,
b=2*h,g=b-1E-6;k.prototype=n.prototype={constructor:k,moveTo:function(b,a){this._+="M"+(this._x0=this._x1=+b)+","+(this._y0=this._y1=+a)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(b,a){this._+="L"+(this._x1=+b)+","+(this._y1=+a)},quadraticCurveTo:function(b,a,g,f){this._+="Q"+ +b+","+ +a+","+(this._x1=+g)+","+(this._y1=+f)},bezierCurveTo:function(b,a,g,f,d,c){this._+="C"+ +b+","+ +a+","+ +g+","+ +f+","+(this._x1=+d)+","+(this._y1=+c)},
arcTo:function(b,a,g,f,d){b=+b;a=+a;g=+g;f=+f;d=+d;var c=this._x1,e=this._y1,l=g-b,k=f-a,t=c-b,n=e-a,m=t*t+n*n;if(0>d)throw Error("negative radius: "+d);if(null===this._x1)this._+="M"+(this._x1=b)+","+(this._y1=a);else if(1E-6<m)if(1E-6<Math.abs(n*l-k*t)&&d){g-=c;f-=e;var z=l*l+k*k;e=Math.sqrt(z);c=Math.sqrt(m);m=d*Math.tan((h-Math.acos((z+m-(g*g+f*f))/(2*e*c)))/2);c=m/c;m/=e;1E-6<Math.abs(c-1)&&(this._+="L"+(b+c*t)+","+(a+c*n));this._+="A"+d+","+d+",0,0,"+ +(n*g>t*f)+","+(this._x1=b+m*l)+","+(this._y1=
a+m*k)}else this._+="L"+(this._x1=b)+","+(this._y1=a)},arc:function(a,k,l,f,d,c){a=+a;k=+k;l=+l;var e=l*Math.cos(f),u=l*Math.sin(f),t=a+e,n=k+u,m=1^c;f=c?f-d:d-f;if(0>l)throw Error("negative radius: "+l);if(null===this._x1)this._+="M"+t+","+n;else if(1E-6<Math.abs(this._x1-t)||1E-6<Math.abs(this._y1-n))this._+="L"+t+","+n;l&&(0>f&&(f=f%b+b),f>g?this._+="A"+l+","+l+",0,1,"+m+","+(a-e)+","+(k-u)+"A"+l+","+l+",0,1,"+m+","+(this._x1=t)+","+(this._y1=n):1E-6<f&&(this._+="A"+l+","+l+",0,"+ +(f>=h)+","+
m+","+(this._x1=a+l*Math.cos(d))+","+(this._y1=k+l*Math.sin(d))))},rect:function(b,a,g,f){this._+="M"+(this._x0=this._x1=+b)+","+(this._y0=this._y1=+a)+"h"+ +g+"v"+ +f+"h"+-g+"Z"},toString:function(){return this._}};a.path=n;Object.defineProperty(a,"__esModule",{value:!0})})},{}],162:[function(a,q,p){(function(a,k){"object"===typeof p&&"undefined"!==typeof q?k(p):k(a.d3=a.d3||{})})(this,function(a){function k(b,a,c,e){if(isNaN(a)||isNaN(c))return b;var d,f=b._root;e={data:e};var g=b._x0,h=b._y0,r=
b._x1,l=b._y1,k,t,n,m;if(!f)return b._root=e,b;for(;f.length;)if((n=a>=(k=(g+r)/2))?g=k:r=k,(m=c>=(t=(h+l)/2))?h=t:l=t,d=f,!(f=f[n|=m<<1]))return d[n]=e,b;var q=+b._x.call(null,f.data);var p=+b._y.call(null,f.data);if(a===q&&c===p)return e.next=f,d?d[n]=e:b._root=e,b;do d=d?d[n]=Array(4):b._root=Array(4),(n=a>=(k=(g+r)/2))?g=k:r=k,(m=c>=(t=(h+l)/2))?h=t:l=t;while((n|=m<<1)===(m=(p>=t)<<1|q>=k));return d[m]=f,d[n]=e,b}function n(b){return b[0]}function h(b){return b[1]}function b(b,a,c){a=new g(null==
a?n:a,null==c?h:c,NaN,NaN,NaN,NaN);return null==b?a:a.addAll(b)}function g(b,a,c,e,g,h){this._x=b;this._y=a;this._x0=c;this._y0=e;this._x1=g;this._y1=h;this._root=void 0}function e(b){for(var a={data:b.data},c=a;b=b.next;)c=c.next={data:b.data};return a}var t=function(b,a,c,e,g){this.node=b;this.x0=a;this.y0=c;this.x1=e;this.y1=g},l=b.prototype=g.prototype;l.copy=function(){var b=new g(this._x,this._y,this._x0,this._y0,this._x1,this._y1),a=this._root,c,h;if(!a)return b;if(!a.length)return b._root=
e(a),b;for(c=[{source:a,target:b._root=Array(4)}];a=c.pop();)for(var l=0;4>l;++l)if(h=a.source[l])h.length?c.push({source:h,target:a.target[l]=Array(4)}):a.target[l]=e(h);return b};l.add=function(b){var a=+this._x.call(null,b),c=+this._y.call(null,b);return k(this.cover(a,c),a,c,b)};l.addAll=function(b){var a,c,e=b.length,f,g,h=Array(e),l=Array(e),t=Infinity,n=Infinity,m=-Infinity,C=-Infinity;for(c=0;c<e;++c)isNaN(f=+this._x.call(null,a=b[c]))||isNaN(g=+this._y.call(null,a))||(h[c]=f,l[c]=g,f<t&&
(t=f),f>m&&(m=f),g<n&&(n=g),g>C&&(C=g));m<t&&(t=this._x0,m=this._x1);C<n&&(n=this._y0,C=this._y1);this.cover(t,n).cover(m,C);for(c=0;c<e;++c)k(this,h[c],l[c],b[c]);return this};l.cover=function(b,a){if(isNaN(b=+b)||isNaN(a=+a))return this;var c=this._x0,d=this._y0,e=this._x1,f=this._y1;if(isNaN(c))e=(c=Math.floor(b))+1,f=(d=Math.floor(a))+1;else if(c>b||b>e||d>a||a>f){var g=e-c,h=this._root,l;switch(l=(a<(d+f)/2)<<1|b<(c+e)/2){case 0:do{var k=Array(4);k[l]=h;h=k}while(g*=2,e=c+g,f=d+g,b>e||a>f);break;
case 1:do k=Array(4),k[l]=h,h=k;while(g*=2,c=e-g,f=d+g,c>b||a>f);break;case 2:do k=Array(4),k[l]=h,h=k;while(g*=2,e=c+g,d=f-g,b>e||d>a);break;case 3:do k=Array(4),k[l]=h,h=k;while(g*=2,c=e-g,d=f-g,c>b||d>a)}this._root&&this._root.length&&(this._root=h)}else return this;this._x0=c;this._y0=d;this._x1=e;this._y1=f;return this};l.data=function(){var b=[];this.visit(function(a){if(!a.length){do b.push(a.data);while(a=a.next)}});return b};l.extent=function(b){return arguments.length?this.cover(+b[0][0],
+b[0][1]).cover(+b[1][0],+b[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]};l.find=function(b,a,c){var d=this._x0,e=this._y0,f,g,h,l,k=this._x1,n=this._y1,m=[],B=this._root,D;B&&m.push(new t(B,d,e,k,n));null==c?c=Infinity:(d=b-c,e=a-c,k=b+c,n=a+c,c*=c);for(;D=m.pop();)if(!(!(B=D.node)||(f=D.x0)>k||(g=D.y0)>n||(h=D.x1)<d||(l=D.y1)<e))if(B.length){D=(f+h)/2;var q=(g+l)/2;m.push(new t(B[3],D,q,h,l),new t(B[2],f,q,D,l),new t(B[1],D,g,h,q),new t(B[0],f,g,D,q));if(B=(a>=q)<<1|b>=
D)D=m[m.length-1],m[m.length-1]=m[m.length-1-B],m[m.length-1-B]=D}else if(D=b-+this._x.call(null,B.data),q=a-+this._y.call(null,B.data),D=D*D+q*q,D<c){var p=Math.sqrt(c=D);d=b-p;e=a-p;k=b+p;n=a+p;p=B.data}return p};l.remove=function(b){if(isNaN(k=+this._x.call(null,b))||isNaN(t=+this._y.call(null,b)))return this;var a,c=this._root,e,f=this._x0,g=this._y0,h=this._x1,l=this._y1,k,t,n,m,B,D;if(!c)return this;if(c.length)for(;;){(B=k>=(n=(f+h)/2))?f=n:h=n;(D=t>=(m=(g+l)/2))?g=m:l=m;if(!(a=c,c=c[B|=D<<
1]))return this;if(!c.length)break;if(a[B+1&3]||a[B+2&3]||a[B+3&3]){var q=a;var p=B}}for(;c.data!==b;)if(!(e=c,c=c.next))return this;(b=c.next)&&delete c.next;if(e)return b?e.next=b:delete e.next,this;if(!a)return this._root=b,this;b?a[B]=b:delete a[B];(c=a[0]||a[1]||a[2]||a[3])&&c===(a[3]||a[2]||a[1]||a[0])&&!c.length&&(q?q[p]=c:this._root=c);return this};l.removeAll=function(b){for(var a=0,c=b.length;a<c;++a)this.remove(b[a]);return this};l.root=function(){return this._root};l.size=function(){var b=
0;this.visit(function(a){if(!a.length){do++b;while(a=a.next)}});return b};l.visit=function(b){var a=[],c,e=this._root,f,g,h,l;for(e&&a.push(new t(e,this._x0,this._y0,this._x1,this._y1));c=a.pop();)if(!b(e=c.node,g=c.x0,h=c.y0,l=c.x1,c=c.y1)&&e.length){var k=(g+l)/2,n=(h+c)/2;(f=e[3])&&a.push(new t(f,k,n,l,c));(f=e[2])&&a.push(new t(f,g,n,k,c));(f=e[1])&&a.push(new t(f,k,h,l,n));(f=e[0])&&a.push(new t(f,g,h,k,n))}return this};l.visitAfter=function(b){var a=[],c=[],e;for(this._root&&a.push(new t(this._root,
this._x0,this._y0,this._x1,this._y1));e=a.pop();){var f=e.node;if(f.length){var g,h=e.x0,l=e.y0,k=e.x1,n=e.y1,m=(h+k)/2,C=(l+n)/2;(g=f[0])&&a.push(new t(g,h,l,m,C));(g=f[1])&&a.push(new t(g,m,l,k,C));(g=f[2])&&a.push(new t(g,h,C,m,n));(g=f[3])&&a.push(new t(g,m,C,k,n))}c.push(e)}for(;e=c.pop();)b(e.node,e.x0,e.y0,e.x1,e.y1);return this};l.x=function(b){return arguments.length?(this._x=b,this):this._x};l.y=function(b){return arguments.length?(this._y=b,this):this._y};a.quadtree=b;Object.defineProperty(a,
"__esModule",{value:!0})})},{}],163:[function(a,q,p){(function(n,k){"object"===typeof p&&"undefined"!==typeof q?k(p,a("d3-path")):k(n.d3=n.d3||{},n.d3)})(this,function(a,k){function m(b){return function(){return b}}function h(b){return 1<=b?Ba:-1>=b?-Ba:Math.asin(b)}function b(b){return b.innerRadius}function g(b){return b.outerRadius}function e(b){return b.startAngle}function t(b){return b.endAngle}function l(b){return b&&b.padAngle}function f(b,a,c,d,e,f,g){var h=b-c,r=a-d;g=(g?f:-f)/ba(h*h+r*r);
r*=g;h*=-g;var l=b+r,k=a+h,u=c+r,t=d+h;c=(l+u)/2;d=(k+t)/2;a=u-l;b=t-k;g=a*a+b*b;f=e-f;t=l*t-u*k;var m=(0>b?-1:1)*ba(Aa(0,f*f*g-t*t));l=(t*b-a*m)/g;k=(-t*a-b*m)/g;u=(t*b+a*m)/g;a=(-t*a+b*m)/g;b=l-c;g=k-d;c=u-c;d=a-d;b*b+g*g>c*c+d*d&&(l=u,k=a);return{cx:l,cy:k,x01:-r,y01:-h,x11:l*(e/f-1),y11:k*(e/f-1)}}function d(b){this._context=b}function c(b){return new d(b)}function r(b){return b[0]}function u(b){return b[1]}function n(){function b(b){var c,r=b.length,l,u=!1,t;null==f&&(h=g(t=k.path()));for(c=
0;c<=r;++c)!(c<r&&e(l=b[c],c,b))===u&&((u=!u)?h.lineStart():h.lineEnd()),u&&h.point(+a(l,c,b),+d(l,c,b));if(t)return h=null,t+""||null}var a=r,d=u,e=m(!0),f=null,g=c,h=null;b.x=function(c){return arguments.length?(a="function"===typeof c?c:m(+c),b):a};b.y=function(a){return arguments.length?(d="function"===typeof a?a:m(+a),b):d};b.defined=function(a){return arguments.length?(e="function"===typeof a?a:m(!!a),b):e};b.curve=function(a){return arguments.length?(g=a,null!=f&&(h=g(f)),b):g};b.context=function(a){return arguments.length?
(null==a?f=h=null:h=g(f=a),b):f};return b}function w(){function b(b){var a,c,r=b.length,u,m=!1,n,w=Array(r),y=Array(r);null==l&&(v=t(n=k.path()));for(a=0;a<=r;++a){if(!(a<r&&h(u=b[a],a,b))===m)if(m=!m){var A=a;v.areaStart();v.lineStart()}else{v.lineEnd();v.lineStart();for(c=a-1;c>=A;--c)v.point(w[c],y[c]);v.lineEnd();v.areaEnd()}m&&(w[a]=+d(u,a,b),y[a]=+f(u,a,b),v.point(e?+e(u,a,b):w[a],g?+g(u,a,b):y[a]))}if(n)return v=null,n+""||null}function a(){return n().defined(h).curve(t).context(l)}var d=r,
e=null,f=m(0),g=u,h=m(!0),l=null,t=c,v=null;b.x=function(a){return arguments.length?(d="function"===typeof a?a:m(+a),e=null,b):d};b.x0=function(a){return arguments.length?(d="function"===typeof a?a:m(+a),b):d};b.x1=function(a){return arguments.length?(e=null==a?null:"function"===typeof a?a:m(+a),b):e};b.y=function(a){return arguments.length?(f="function"===typeof a?a:m(+a),g=null,b):f};b.y0=function(a){return arguments.length?(f="function"===typeof a?a:m(+a),b):f};b.y1=function(a){return arguments.length?
(g=null==a?null:"function"===typeof a?a:m(+a),b):g};b.lineX0=b.lineY0=function(){return a().x(d).y(f)};b.lineY1=function(){return a().x(d).y(g)};b.lineX1=function(){return a().x(e).y(f)};b.defined=function(a){return arguments.length?(h="function"===typeof a?a:m(!!a),b):h};b.curve=function(a){return arguments.length?(t=a,null!=l&&(v=t(l)),b):t};b.context=function(a){return arguments.length?(null==a?l=v=null:v=t(l=a),b):l};return b}function y(b,a){return a<b?-1:a>b?1:a>=b?0:NaN}function A(b){return b}
function z(b){this._curve=b}function x(b){function a(a){return new z(b(a))}a._curve=b;return a}function C(b){var a=b.curve;b.angle=b.x;delete b.x;b.radius=b.y;delete b.y;b.curve=function(b){return arguments.length?a(x(b)):a()._curve};return b}function B(){return C(n().curve(Ja))}function D(){var b=w().curve(Ja),a=b.curve,c=b.lineX0,d=b.lineX1,e=b.lineY0,f=b.lineY1;b.angle=b.x;delete b.x;b.startAngle=b.x0;delete b.x0;b.endAngle=b.x1;delete b.x1;b.radius=b.y;delete b.y;b.innerRadius=b.y0;delete b.y0;
b.outerRadius=b.y1;delete b.y1;b.lineStartAngle=function(){return C(c())};delete b.lineX0;b.lineEndAngle=function(){return C(d())};delete b.lineX1;b.lineInnerRadius=function(){return C(e())};delete b.lineY0;b.lineOuterRadius=function(){return C(f())};delete b.lineY1;b.curve=function(b){return arguments.length?a(x(b)):a()._curve};return b}function q(b,a){return[(a=+a)*Math.cos(b-=Math.PI/2),a*Math.sin(b)]}function p(b){return b.source}function F(b){return b.target}function L(b){function a(){var a,
h=Lb.call(arguments),r=c.apply(this,h),l=d.apply(this,h);g||(g=a=k.path());b(g,+e.apply(this,(h[0]=r,h)),+f.apply(this,h),+e.apply(this,(h[0]=l,h)),+f.apply(this,h));if(a)return g=null,a+""||null}var c=p,d=F,e=r,f=u,g=null;a.source=function(b){return arguments.length?(c=b,a):c};a.target=function(b){return arguments.length?(d=b,a):d};a.x=function(b){return arguments.length?(e="function"===typeof b?b:m(+b),a):e};a.y=function(b){return arguments.length?(f="function"===typeof b?b:m(+b),a):f};a.context=
function(b){return arguments.length?(g=null==b?null:b,a):g};return a}function J(b,a,c,d,e){b.moveTo(a,c);b.bezierCurveTo(a=(a+d)/2,c,a,e,d,e)}function H(b,a,c,d,e){b.moveTo(a,c);b.bezierCurveTo(a,c=(c+e)/2,d,c,d,e)}function K(b,a,c,d,e){var f=q(a,c);a=q(a,c=(c+e)/2);c=q(d,c);d=q(d,e);b.moveTo(f[0],f[1]);b.bezierCurveTo(a[0],a[1],c[0],c[1],d[0],d[1])}function M(){}function I(b,a,c){b._context.bezierCurveTo((2*b._x0+b._x1)/3,(2*b._y0+b._y1)/3,(b._x0+2*b._x1)/3,(b._y0+2*b._y1)/3,(b._x0+4*b._x1+a)/6,
(b._y0+4*b._y1+c)/6)}function N(b){this._context=b}function O(b){this._context=b}function P(b){this._context=b}function Q(b,a){this._basis=new N(b);this._beta=a}function T(b,a,c){b._context.bezierCurveTo(b._x1+b._k*(b._x2-b._x0),b._y1+b._k*(b._y2-b._y0),b._x2+b._k*(b._x1-a),b._y2+b._k*(b._y1-c),b._x2,b._y2)}function V(b,a){this._context=b;this._k=(1-a)/6}function Y(b,a){this._context=b;this._k=(1-a)/6}function ca(b,a){this._context=b;this._k=(1-a)/6}function Z(b,a,c){var d=b._x1,e=b._y1,f=b._x2,g=
b._y2;if(1E-12<b._l01_a){var h=2*b._l01_2a+3*b._l01_a*b._l12_a+b._l12_2a,r=3*b._l01_a*(b._l01_a+b._l12_a);d=(d*h-b._x0*b._l12_2a+b._x2*b._l01_2a)/r;e=(e*h-b._y0*b._l12_2a+b._y2*b._l01_2a)/r}1E-12<b._l23_a&&(h=2*b._l23_2a+3*b._l23_a*b._l12_a+b._l12_2a,r=3*b._l23_a*(b._l23_a+b._l12_a),f=(f*h+b._x1*b._l23_2a-a*b._l12_2a)/r,g=(g*h+b._y1*b._l23_2a-c*b._l12_2a)/r);b._context.bezierCurveTo(d,e,f,g,b._x2,b._y2)}function R(b,a){this._context=b;this._alpha=a}function U(b,a){this._context=b;this._alpha=a}function X(b,
a){this._context=b;this._alpha=a}function ea(b){this._context=b}function fa(b,a,c){var d=b._x1-b._x0;a-=b._x1;var e=(b._y1-b._y0)/(d||0>a&&-0);b=(c-b._y1)/(a||0>d&&-0);return((0>e?-1:1)+(0>b?-1:1))*Math.min(Math.abs(e),Math.abs(b),.5*Math.abs((e*a+b*d)/(d+a)))||0}function la(b,a){var c=b._x1-b._x0;return c?(3*(b._y1-b._y0)/c-a)/2:a}function da(b,a,c){var d=b._x0,e=b._x1,f=b._y1,g=(e-d)/3;b._context.bezierCurveTo(d+g,b._y0+g*a,e-g,f-g*c,e,f)}function ma(b){this._context=b}function aa(b){this._context=
new na(b)}function na(b){this._context=b}function ha(b){this._context=b}function ja(b){var a,c=b.length-1,d=Array(c),e=Array(c),f=Array(c);d[0]=0;e[0]=2;f[0]=b[0]+2*b[1];for(a=1;a<c-1;++a)d[a]=1,e[a]=4,f[a]=4*b[a]+2*b[a+1];d[c-1]=2;e[c-1]=7;f[c-1]=8*b[c-1]+b[c];for(a=1;a<c;++a){var g=d[a]/e[a-1];e[a]-=g;f[a]-=g*f[a-1]}d[c-1]=f[c-1]/e[c-1];for(a=c-2;0<=a;--a)d[a]=(f[a]-d[a+1])/e[a];e[c-1]=(b[c]+d[c-1])/2;for(a=0;a<c-1;++a)e[a]=2*b[a+1]-d[a+1];return[d,e]}function oa(b,a){this._context=b;this._t=a}
function ka(b,a){if(1<(g=b.length))for(var c=1,d,e,f=b[a[0]],g,h=f.length;c<g;++c)for(e=f,f=b[a[c]],d=0;d<h;++d)f[d][1]+=f[d][0]=isNaN(e[d][1])?e[d][0]:e[d][1]}function ia(b){b=b.length;for(var a=Array(b);0<=--b;)a[b]=b;return a}function xa(b,a){return b[a]}function ya(b){var a=b.map(sa);return ia(b).sort(function(b,c){return a[b]-a[c]})}function sa(b){for(var a=-1,c=0,d=b.length,e,f=-Infinity;++a<d;)(e=+b[a][1])>f&&(f=e,c=a);return c}function W(b){var a=b.map(za);return ia(b).sort(function(b,c){return a[b]-
a[c]})}function za(b){for(var a=0,c=-1,d=b.length,e;++c<d;)if(e=+b[c][1])a+=e;return a}var Da=Math.abs,ra=Math.atan2,ua=Math.cos,Aa=Math.max,wa=Math.min,Ma=Math.sin,ba=Math.sqrt,Ea=Math.PI,Ba=Ea/2,Na=2*Ea;d.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(b,a){b=+b;a=+a;switch(this._point){case 0:this._point=
1;this._line?this._context.lineTo(b,a):this._context.moveTo(b,a);break;case 1:this._point=2;default:this._context.lineTo(b,a)}}};var Ja=x(c);z.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(b,a){this._curve.point(a*Math.sin(b),a*-Math.cos(b))}};var Lb=Array.prototype.slice,Mb={draw:function(b,a){a=Math.sqrt(a/Ea);b.moveTo(a,0);b.arc(0,0,a,0,Na)}},
Pa={draw:function(b,a){a=Math.sqrt(a/5)/2;b.moveTo(-3*a,-a);b.lineTo(-a,-a);b.lineTo(-a,-3*a);b.lineTo(a,-3*a);b.lineTo(a,-a);b.lineTo(3*a,-a);b.lineTo(3*a,a);b.lineTo(a,a);b.lineTo(a,3*a);b.lineTo(-a,3*a);b.lineTo(-a,a);b.lineTo(-3*a,a);b.closePath()}},zb=Math.sqrt(1/3),cb=2*zb,ub={draw:function(b,a){a=Math.sqrt(a/cb);var c=a*zb;b.moveTo(0,-a);b.lineTo(c,0);b.lineTo(0,a);b.lineTo(-c,0);b.closePath()}},db=Math.sin(Ea/10)/Math.sin(7*Ea/10),ab=Math.sin(Na/10)*db,eb=-Math.cos(Na/10)*db;db={draw:function(b,
a){a=Math.sqrt(.8908130915292852*a);var c=ab*a,d=eb*a;b.moveTo(0,-a);b.lineTo(c,d);for(var e=1;5>e;++e){var f=Na*e/5,g=Math.cos(f);f=Math.sin(f);b.lineTo(f*a,-g*a);b.lineTo(g*c-f*d,f*c+g*d)}b.closePath()}};var gb={draw:function(b,a){a=Math.sqrt(a);var c=-a/2;b.rect(c,c,a,a)}},jb=Math.sqrt(3),Oa={draw:function(b,a){a=-Math.sqrt(a/(3*jb));b.moveTo(0,2*a);b.lineTo(-jb*a,-a);b.lineTo(jb*a,-a);b.closePath()}},Za=Math.sqrt(3)/2,Wc=1/Math.sqrt(12),vb=3*(Wc/2+1),Nb={draw:function(b,a){var c=Math.sqrt(a/vb);
a=c/2;var d=c*Wc;c=c*Wc+c;var e=-a;b.moveTo(a,d);b.lineTo(a,c);b.lineTo(e,c);b.lineTo(-.5*a-Za*d,Za*a+-.5*d);b.lineTo(-.5*a-Za*c,Za*a+-.5*c);b.lineTo(-.5*e-Za*c,Za*e+-.5*c);b.lineTo(-.5*a+Za*d,-.5*d-Za*a);b.lineTo(-.5*a+Za*c,-.5*c-Za*a);b.lineTo(-.5*e+Za*c,-.5*c-Za*e);b.closePath()}},Ya=[Mb,Pa,ub,gb,db,Oa,Nb];N.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:I(this,
this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(b,a){b=+b;a=+a;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(b,a):this._context.moveTo(b,a);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:I(this,b,a)}this._x0=this._x1;this._x1=b;this._y0=this._y1;this._y1=a}};
O.prototype={areaStart:M,areaEnd:M,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2);this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,
this._y3),this.point(this._x4,this._y4)}},point:function(b,a){b=+b;a=+a;switch(this._point){case 0:this._point=1;this._x2=b;this._y2=a;break;case 1:this._point=2;this._x3=b;this._y3=a;break;case 2:this._point=3;this._x4=b;this._y4=a;this._context.moveTo((this._x0+4*this._x1+b)/6,(this._y0+4*this._y1+a)/6);break;default:I(this,b,a)}this._x0=this._x1;this._x1=b;this._y0=this._y1;this._y1=a}};P.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=
this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(b,a){b=+b;a=+a;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var c=(this._x0+4*this._x1+b)/6,d=(this._y0+4*this._y1+a)/6;this._line?this._context.lineTo(c,d):this._context.moveTo(c,d);break;case 3:this._point=4;default:I(this,b,a)}this._x0=this._x1;this._x1=b;this._y0=this._y1;
this._y1=a}};Q.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var b=this._x,a=this._y,c=b.length-1;if(0<c)for(var d=b[0],e=a[0],f=b[c]-d,g=a[c]-e,h=-1,r;++h<=c;)r=h/c,this._basis.point(this._beta*b[h]+(1-this._beta)*(d+r*f),this._beta*a[h]+(1-this._beta)*(e+r*g));this._x=this._y=null;this._basis.lineEnd()},point:function(b,a){this._x.push(+b);this._y.push(+a)}};var td=function Fc(b){function a(a){return 1===b?new N(a):new Q(a,b)}a.beta=function(b){return Fc(+b)};
return a}(.85);V.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:T(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(b,a){b=+b;a=+a;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(b,
a):this._context.moveTo(b,a);break;case 1:this._point=2;this._x1=b;this._y1=a;break;case 2:this._point=3;default:T(this,b,a)}this._x0=this._x1;this._x1=this._x2;this._x2=b;this._y0=this._y1;this._y1=this._y2;this._y2=a}};var mc=function Md(b){function a(a){return new V(a,b)}a.tension=function(b){return Md(+b)};return a}(0);Y.prototype={areaStart:M,areaEnd:M,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=
0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(b,a){b=+b;a=+a;switch(this._point){case 0:this._point=1;this._x3=b;this._y3=a;break;case 1:this._point=2;this._context.moveTo(this._x4=b,this._y4=a);break;case 2:this._point=3;this._x5=b;
this._y5=a;break;default:T(this,b,a)}this._x0=this._x1;this._x1=this._x2;this._x2=b;this._y0=this._y1;this._y1=this._y2;this._y2=a}};var ud=function nc(b){function a(a){return new Y(a,b)}a.tension=function(b){return nc(+b)};return a}(0);ca.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();
this._line=1-this._line},point:function(b,a){b=+b;a=+a;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:T(this,b,a)}this._x0=this._x1;this._x1=this._x2;this._x2=b;this._y0=this._y1;this._y1=this._y2;this._y2=a}};var Nc=function Yd(b){function a(a){return new ca(a,b)}a.tension=function(b){return Yd(+b)};return a}(0);R.prototype=
{areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(b,a){b=+b;a=+a;if(this._point){var c=
this._x2-b,d=this._y2-a;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(b,a):this._context.moveTo(b,a);break;case 1:this._point=2;break;case 2:this._point=3;default:Z(this,b,a)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=b;this._y0=this._y1;this._y1=this._y2;this._y2=a}};var Hb=function Ub(b){function a(a){return b?
new R(a,b):new V(a,0)}a.alpha=function(b){return Ub(+b)};return a}(.5);U.prototype={areaStart:M,areaEnd:M,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();
break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(b,a){b=+b;a=+a;if(this._point){var c=this._x2-b,d=this._y2-a;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=b;this._y3=a;break;case 1:this._point=2;this._context.moveTo(this._x4=b,this._y4=a);break;case 2:this._point=3;this._x5=b;this._y5=a;break;default:Z(this,b,a)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;
this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=b;this._y0=this._y1;this._y1=this._y2;this._y2=a}};var Yb=function Oc(b){function a(a){return b?new U(a,b):new Y(a,0)}a.alpha=function(b){return Oc(+b)};return a}(.5);X.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=
this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(b,a){b=+b;a=+a;if(this._point){var c=this._x2-b,d=this._y2-a;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Z(this,
b,a)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=b;this._y0=this._y1;this._y1=this._y2;this._y2=a}};var uc=function pb(b){function a(a){return b?new X(a,b):new ca(a,0)}a.alpha=function(b){return pb(+b)};return a}(.5);ea.prototype={areaStart:M,areaEnd:M,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(b,a){b=+b;a=+a;this._point?this._context.lineTo(b,
a):(this._point=1,this._context.moveTo(b,a))}};ma.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:da(this,this._t0,la(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(b,a){var c=NaN;b=+b;a=+a;if(b!==this._x1||
a!==this._y1){switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(b,a):this._context.moveTo(b,a);break;case 1:this._point=2;break;case 2:this._point=3;da(this,la(this,c=fa(this,b,a)),c);break;default:da(this,this._t0,c=fa(this,b,a))}this._x0=this._x1;this._x1=b;this._y0=this._y1;this._y1=a;this._t0=c}}};(aa.prototype=Object.create(ma.prototype)).point=function(b,a){ma.prototype.point.call(this,a,b)};na.prototype={moveTo:function(b,a){this._context.moveTo(a,b)},closePath:function(){this._context.closePath()},
lineTo:function(b,a){this._context.lineTo(a,b)},bezierCurveTo:function(b,a,c,d,e,f){this._context.bezierCurveTo(a,b,d,c,f,e)}};ha.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var b=this._x,a=this._y,c=b.length;if(c)if(this._line?this._context.lineTo(b[0],a[0]):this._context.moveTo(b[0],a[0]),2===c)this._context.lineTo(b[1],a[1]);else for(var d=ja(b),e=ja(a),f=0,g=1;g<c;++f,++g)this._context.bezierCurveTo(d[0][f],
e[0][f],d[1][f],e[1][f],b[g],a[g]);(this._line||0!==this._line&&1===c)&&this._context.closePath();this._line=1-this._line;this._x=this._y=null},point:function(b,a){this._x.push(+b);this._y.push(+a)}};oa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y);(this._line||0!==this._line&&1===this._point)&&this._context.closePath();
0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(b,a){b=+b;a=+a;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(b,a):this._context.moveTo(b,a);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,a),this._context.lineTo(b,a);else{var c=this._x*(1-this._t)+b*this._t;this._context.lineTo(c,this._y);this._context.lineTo(c,a)}}this._x=b;this._y=a}};a.arc=function(){function a(){var b,a=+c.apply(this,arguments),e=+d.apply(this,
arguments),g=n.apply(this,arguments)-Ba,l=v.apply(this,arguments)-Ba,t=Da(l-g),m=l>g;y||(y=b=k.path());if(e<a){var A=e;e=a;a=A}if(1E-12<e)if(t>Na-1E-12)y.moveTo(e*ua(g),e*Ma(g)),y.arc(0,0,e,g,l,!m),1E-12<a&&(y.moveTo(a*ua(l),a*Ma(l)),y.arc(0,0,a,l,g,m));else{var z=g,x=l;A=g;var B=l,D=t,C=t,q=w.apply(this,arguments)/2,p=1E-12<q&&(u?+u.apply(this,arguments):ba(a*a+e*e)),I=wa(Da(e-a)/2,+r.apply(this,arguments)),G=I,E=I;if(1E-12<p){var H=h(p/a*Ma(q));q=h(p/e*Ma(q));1E-12<(D-=2*H)?(H*=m?1:-1,A+=H,B-=H):
(D=0,A=B=(g+l)/2);1E-12<(C-=2*q)?(q*=m?1:-1,z+=q,x-=q):(C=0,z=x=(g+l)/2)}g=e*ua(z);l=e*Ma(z);H=a*ua(B);q=a*Ma(B);if(1E-12<I){var K=e*ua(x),M=e*Ma(x),N=a*ua(A),J=a*Ma(A);if(t=t<Ea){var F=N-g;t=J-l;p=H-K;var L=q-M,O=L*F-p*t;1E-12>O*O?F=void 0:(O=(p*(l-M)-L*(g-K))/O,F=[g+O*F,l+O*t]);t=F}t&&(G=g-F[0],E=l-F[1],t=K-F[0],p=M-F[1],G=(G*t+E*p)/(ba(G*G+E*E)*ba(t*t+p*p)),E=1/Ma((1<G?0:-1>G?Ea:Math.acos(G))/2),F=ba(F[0]*F[0]+F[1]*F[1]),G=wa(I,(a-F)/(E-1)),E=wa(I,(e-F)/(E+1)))}1E-12<C?1E-12<E?(z=f(N,J,g,l,e,E,
m),x=f(K,M,H,q,e,E,m),y.moveTo(z.cx+z.x01,z.cy+z.y01),E<I?y.arc(z.cx,z.cy,E,ra(z.y01,z.x01),ra(x.y01,x.x01),!m):(y.arc(z.cx,z.cy,E,ra(z.y01,z.x01),ra(z.y11,z.x11),!m),y.arc(0,0,e,ra(z.cy+z.y11,z.cx+z.x11),ra(x.cy+x.y11,x.cx+x.x11),!m),y.arc(x.cx,x.cy,E,ra(x.y11,x.x11),ra(x.y01,x.x01),!m))):(y.moveTo(g,l),y.arc(0,0,e,z,x,!m)):y.moveTo(g,l);1E-12<a&&1E-12<D?1E-12<G?(z=f(H,q,K,M,a,-G,m),x=f(g,l,N,J,a,-G,m),y.lineTo(z.cx+z.x01,z.cy+z.y01),G<I?y.arc(z.cx,z.cy,G,ra(z.y01,z.x01),ra(x.y01,x.x01),!m):(y.arc(z.cx,
z.cy,G,ra(z.y01,z.x01),ra(z.y11,z.x11),!m),y.arc(0,0,a,ra(z.cy+z.y11,z.cx+z.x11),ra(x.cy+x.y11,x.cx+x.x11),m),y.arc(x.cx,x.cy,G,ra(x.y11,x.x11),ra(x.y01,x.x01),!m))):y.arc(0,0,a,B,A,m):y.lineTo(H,q)}else y.moveTo(0,0);y.closePath();if(b)return y=null,b+""||null}var c=b,d=g,r=m(0),u=null,n=e,v=t,w=l,y=null;a.centroid=function(){var b=(+c.apply(this,arguments)+ +d.apply(this,arguments))/2,a=(+n.apply(this,arguments)+ +v.apply(this,arguments))/2-Ea/2;return[ua(a)*b,Ma(a)*b]};a.innerRadius=function(b){return arguments.length?
(c="function"===typeof b?b:m(+b),a):c};a.outerRadius=function(b){return arguments.length?(d="function"===typeof b?b:m(+b),a):d};a.cornerRadius=function(b){return arguments.length?(r="function"===typeof b?b:m(+b),a):r};a.padRadius=function(b){return arguments.length?(u=null==b?null:"function"===typeof b?b:m(+b),a):u};a.startAngle=function(b){return arguments.length?(n="function"===typeof b?b:m(+b),a):n};a.endAngle=function(b){return arguments.length?(v="function"===typeof b?b:m(+b),a):v};a.padAngle=
function(b){return arguments.length?(w="function"===typeof b?b:m(+b),a):w};a.context=function(b){return arguments.length?(y=null==b?null:b,a):y};return a};a.area=w;a.line=n;a.pie=function(){function b(b){var h,r=b.length;var l=0;var k=Array(r),u=Array(r),t=+e.apply(this,arguments);var m=Math.min(Na,Math.max(-Na,f.apply(this,arguments)-t));var n=Math.min(Math.abs(m)/r,g.apply(this,arguments)),v=n*(0>m?-1:1),w;for(h=0;h<r;++h)0<(w=u[k[h]=h]=+a(b[h],h,b))&&(l+=w);null!=c?k.sort(function(b,a){return c(u[b],
u[a])}):null!=d&&k.sort(function(a,c){return d(b[a],b[c])});h=0;for(m=l?(m-r*v)/l:0;h<r;++h,t=y){l=k[h];w=u[l];var y=t+(0<w?w*m:0)+v;u[l]={data:b[l],index:h,value:w,startAngle:t,endAngle:y,padAngle:n}}return u}var a=A,c=y,d=null,e=m(0),f=m(Na),g=m(0);b.value=function(c){return arguments.length?(a="function"===typeof c?c:m(+c),b):a};b.sortValues=function(a){return arguments.length?(c=a,d=null,b):c};b.sort=function(a){return arguments.length?(d=a,c=null,b):d};b.startAngle=function(a){return arguments.length?
(e="function"===typeof a?a:m(+a),b):e};b.endAngle=function(a){return arguments.length?(f="function"===typeof a?a:m(+a),b):f};b.padAngle=function(a){return arguments.length?(g="function"===typeof a?a:m(+a),b):g};return b};a.areaRadial=D;a.radialArea=D;a.lineRadial=B;a.radialLine=B;a.pointRadial=q;a.linkHorizontal=function(){return L(J)};a.linkVertical=function(){return L(H)};a.linkRadial=function(){var b=L(K);b.angle=b.x;delete b.x;b.radius=b.y;delete b.y;return b};a.symbol=function(){function b(){var b;
d||(d=b=k.path());a.apply(this,arguments).draw(d,+c.apply(this,arguments));if(b)return d=null,b+""||null}var a=m(Mb),c=m(64),d=null;b.type=function(c){return arguments.length?(a="function"===typeof c?c:m(c),b):a};b.size=function(a){return arguments.length?(c="function"===typeof a?a:m(+a),b):c};b.context=function(a){return arguments.length?(d=null==a?null:a,b):d};return b};a.symbols=Ya;a.symbolCircle=Mb;a.symbolCross=Pa;a.symbolDiamond=ub;a.symbolSquare=gb;a.symbolStar=db;a.symbolTriangle=Oa;a.symbolWye=
Nb;a.curveBasisClosed=function(b){return new O(b)};a.curveBasisOpen=function(b){return new P(b)};a.curveBasis=function(b){return new N(b)};a.curveBundle=td;a.curveCardinalClosed=ud;a.curveCardinalOpen=Nc;a.curveCardinal=mc;a.curveCatmullRomClosed=Yb;a.curveCatmullRomOpen=uc;a.curveCatmullRom=Hb;a.curveLinearClosed=function(b){return new ea(b)};a.curveLinear=c;a.curveMonotoneX=function(b){return new ma(b)};a.curveMonotoneY=function(b){return new aa(b)};a.curveNatural=function(b){return new ha(b)};
a.curveStep=function(b){return new oa(b,.5)};a.curveStepAfter=function(b){return new oa(b,1)};a.curveStepBefore=function(b){return new oa(b,0)};a.stack=function(){function b(b){var f=a.apply(this,arguments),g,h=b.length,r=f.length,l=Array(r);for(g=0;g<r;++g){for(var k=f[g],u=l[g]=Array(h),t=0,m;t<h;++t)u[t]=m=[0,+e(b[t],k,t,b)],m.data=b[t];u.key=k}g=0;for(f=c(l);g<r;++g)l[f[g]].index=g;d(l,f);return l}var a=m([]),c=ia,d=ka,e=xa;b.keys=function(c){return arguments.length?(a="function"===typeof c?c:
m(Lb.call(c)),b):a};b.value=function(a){return arguments.length?(e="function"===typeof a?a:m(+a),b):e};b.order=function(a){return arguments.length?(c=null==a?ia:"function"===typeof a?a:m(Lb.call(a)),b):c};b.offset=function(a){return arguments.length?(d=null==a?ka:a,b):d};return b};a.stackOffsetExpand=function(b,a){if(0<(d=b.length)){for(var c,d,e=0,f=b[0].length,g;e<f;++e){for(g=c=0;c<d;++c)g+=b[c][e][1]||0;if(g)for(c=0;c<d;++c)b[c][e][1]/=g}ka(b,a)}};a.stackOffsetDiverging=function(b,a){if(1<(r=
b.length))for(var c,d=0,e,f,g,h,r,l=b[a[0]].length;d<l;++d)for(c=g=h=0;c<r;++c)0<=(f=(e=b[a[c]][d])[1]-e[0])?(e[0]=g,e[1]=g+=f):0>f?(e[1]=h,e[0]=h+=f):e[0]=g};a.stackOffsetNone=ka;a.stackOffsetSilhouette=function(b,a){if(0<(e=b.length)){for(var c=0,d=b[a[0]],e,f=d.length;c<f;++c){for(var g=0,h=0;g<e;++g)h+=b[g][c][1]||0;d[c][1]+=d[c][0]=-h/2}ka(b,a)}};a.stackOffsetWiggle=function(b,a){if(0<(g=b.length)&&0<(f=(e=b[a[0]]).length)){for(var c=0,d=1,e,f,g;d<f;++d){for(var h=0,r=0,l=0;h<g;++h){var k=b[a[h]],
u=k[d][1]||0;k=(u-(k[d-1][1]||0))/2;for(var t=0;t<h;++t){var m=b[a[t]];k+=(m[d][1]||0)-(m[d-1][1]||0)}r+=u;l+=k*u}e[d-1][1]+=e[d-1][0]=c;r&&(c-=l/r)}e[d-1][1]+=e[d-1][0]=c;ka(b,a)}};a.stackOrderAppearance=ya;a.stackOrderAscending=W;a.stackOrderDescending=function(b){return W(b).reverse()};a.stackOrderInsideOut=function(b){var a=b.length,c=b.map(za),d=ya(b),e=0,f=0,g=[],h=[];for(b=0;b<a;++b){var r=d[b];e<f?(e+=c[r],g.push(r)):(f+=c[r],h.push(r))}return h.reverse().concat(g)};a.stackOrderNone=ia;a.stackOrderReverse=
function(b){return ia(b).reverse()};Object.defineProperty(a,"__esModule",{value:!0})})},{"d3-path":161}],164:[function(a,q,p){(function(a,k){"object"===typeof p&&"undefined"!==typeof q?k(p):k(a.d3=a.d3||{})})(this,function(a){function k(){return w||(z(m),w=A.now()+y)}function m(){w=0}function h(){this._call=this._time=this._next=null}function b(b,a,c){var d=new h;d.restart(b,a,c);return d}function g(){k();++f;for(var b=r,a;b;)0<=(a=w-b._time)&&b._call.call(null,a),b=b._next;--f}function e(){w=(n=
A.now())+y;f=d=0;try{g()}finally{f=0;for(var b,a=r,c,e=Infinity;a;)a._call?(e>a._time&&(e=a._time),b=a,a=a._next):(c=a._next,a._next=null,a=b?b._next=c:r=c);u=b;l(e);w=0}}function t(){var b=A.now(),a=b-n;1E3<a&&(y-=a,n=b)}function l(b){f||(d&&(d=clearTimeout(d)),24<b-w?(Infinity>b&&(d=setTimeout(e,b-A.now()-y)),c&&(c=clearInterval(c))):(c||(n=A.now(),c=setInterval(t,1E3)),f=1,z(e)))}var f=0,d=0,c=0,r,u,n=0,w=0,y=0,A="object"===typeof performance&&performance.now?performance:Date,z="object"===typeof window&&
window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(b){setTimeout(b,17)};h.prototype=b.prototype={constructor:h,restart:function(b,a,c){if("function"!==typeof b)throw new TypeError("callback is not a function");c=(null==c?k():+c)+(null==a?0:+a);this._next||u===this||(u?u._next=this:r=this,u=this);this._call=b;this._time=c;l()},stop:function(){this._call&&(this._call=null,this._time=Infinity,l())}};a.now=k;a.timer=b;a.timerFlush=g;a.timeout=function(b,a,c){var d=new h;a=
null==a?0:+a;d.restart(function(c){d.stop();b(c+a)},a,c);return d};a.interval=function(b,a,c){var d=new h,e=a;if(null==a)return d.restart(b,a,c),d;a=+a;c=null==c?k():+c;d.restart(function L(f){f+=e;d.restart(L,e+=a,c);b(f)},a,c);return d};Object.defineProperty(a,"__esModule",{value:!0})})},{}],165:[function(a,q,p){!function(){function a(b){return b&&(b.ownerDocument&&b.ownerDocument.defaultView||b.document&&b||b.defaultView)}function k(b,a){return b<a?-1:b>a?1:b>=a?0:NaN}function m(b){return null===
b?NaN:+b}function h(b){return!isNaN(b)}function b(b){return{left:function(a,c,d,e){3>arguments.length&&(d=0);4>arguments.length&&(e=a.length);for(;d<e;){var f=d+e>>>1;0>b(a[f],c)?d=f+1:e=f}return d},right:function(a,c,d,e){3>arguments.length&&(d=0);4>arguments.length&&(e=a.length);for(;d<e;){var f=d+e>>>1;0<b(a[f],c)?e=f:d=f+1}return d}}}function g(b){return b.length}function e(b,a){for(var c in a)Object.defineProperty(b.prototype,c,{value:a[c],enumerable:!1})}function t(){this._=Object.create(null)}
function l(b){return"__proto__"===(b+="")||"\x00"===b[0]?"\x00"+b:b}function f(b){return"\x00"===(b+="")[0]?b.slice(1):b}function d(b){return l(b)in this._}function c(b){return(b=l(b))in this._&&delete this._[b]}function r(){var b=[],a;for(a in this._)b.push(f(a));return b}function u(){var b=0,a;for(a in this._)++b;return b}function v(){for(var b in this._)return!1;return!0}function w(){this._=Object.create(null)}function y(b){return b}function A(b,a,c){return function(){var d=c.apply(a,arguments);
return d===a?b:d}}function z(b,a){if(a in b)return a;a=a.charAt(0).toUpperCase()+a.slice(1);for(var c=0,d=Og.length;c<d;++c){var e=Og[c]+a;if(e in b)return e}}function x(){}function C(){}function B(b){function a(){for(var a=c,d=-1,e=a.length,f;++d<e;)(f=a[d].on)&&f.apply(this,arguments);return b}var c=[],d=new t;a.on=function(a,e){var f=d.get(a),g;if(2>arguments.length)return f&&f.on;f&&(f.on=null,c=c.slice(0,g=c.indexOf(f)).concat(c.slice(g+1)),d.remove(a));e&&c.push(d.set(a,{on:e}));return b};return a}
function D(){S.event.preventDefault()}function p(){for(var b=S.event,a;a=b.sourceEvent;)b=a;return b}function E(b){for(var a=new C,c=0,d=arguments.length;++c<d;)a[arguments[c]]=B(a);a.of=function(c,d){return function(e){try{var f=e.sourceEvent=S.event;e.target=b;S.event=e;a[e.type].apply(c,d)}finally{S.event=f}}};return a}function F(b){yb(b,tb);return b}function L(b){return"function"===typeof b?b:function(){return Qg(b,this)}}function J(b){return"function"===typeof b?b:function(){return Ug(b,this)}}
function H(b,a){function c(){this.removeAttribute(b)}function d(){this.removeAttributeNS(b.space,b.local)}function e(){this.setAttribute(b,a)}function f(){this.setAttributeNS(b.space,b.local,a)}function g(){var c=a.apply(this,arguments);null==c?this.removeAttribute(b):this.setAttribute(b,c)}function h(){var c=a.apply(this,arguments);null==c?this.removeAttributeNS(b.space,b.local):this.setAttributeNS(b.space,b.local,c)}b=S.ns.qualify(b);return null==a?b.local?d:c:"function"===typeof a?b.local?h:g:
b.local?f:e}function K(b){return new RegExp("(?:^|\\s+)"+S.requote(b)+"(?:\\s+|$)","g")}function M(b,a){function c(){for(var c=-1;++c<e;)b[c](this,a)}function d(){for(var c=-1,d=a.apply(this,arguments);++c<e;)b[c](this,d)}b=(b+"").trim().split(/^|\s+/).map(I);var e=b.length;return"function"===typeof a?d:c}function I(b){var a=K(b);return function(c,d){if(e=c.classList)return d?e.add(b):e.remove(b);var e=c.getAttribute("class")||"";d?(a.lastIndex=0,a.test(e)||c.setAttribute("class",(e+" "+b).trim().replace(/\s+/g,
" "))):c.setAttribute("class",e.replace(a," ").trim().replace(/\s+/g," "))}}function N(b,a,c){function d(){this.style.removeProperty(b)}function e(){this.style.setProperty(b,a,c)}function f(){var d=a.apply(this,arguments);null==d?this.style.removeProperty(b):this.style.setProperty(b,d,c)}return null==a?d:"function"===typeof a?f:e}function O(b,a){function c(){delete this[b]}function d(){this[b]=a}function e(){var c=a.apply(this,arguments);null==c?delete this[b]:this[b]=c}return null==a?c:"function"===
typeof a?e:d}function P(b){function a(){var a=this.ownerDocument,c=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===c&&"http://www.w3.org/1999/xhtml"===a.documentElement.namespaceURI?a.createElement(b):a.createElementNS(c,b)}function c(){return this.ownerDocument.createElementNS(b.space,b.local)}return"function"===typeof b?b:(b=S.ns.qualify(b)).local?c:a}function Q(){var b=this.parentNode;b&&b.removeChild(this)}function T(b){return function(){return af(this,b)}}function V(b){arguments.length||
(b=k);return function(a,c){return a&&c?b(a.__data__,c.__data__):!a-!c}}function Y(b,a){for(var c=0,d=b.length;c<d;c++)for(var e=b[c],f=0,g=e.length,h;f<g;f++)(h=e[f])&&a(h,f,c);return b}function ca(b){yb(b,Ie);return b}function Z(b){var a,c;return function(d,e,f){d=b[f].update;var g=d.length;f!=c&&(c=f,a=0);for(e>=a&&(a=e+1);!(e=d[a])&&++a<g;);return e}}function R(b,a,c){function d(){var a=this[g];a&&(this.removeEventListener(b,a,a.$),delete this[g])}function e(){var e=r(a,Kd(arguments));d.call(this);
this.addEventListener(b,this[g]=e,e.$=c);e._=a}function f(){var a=new RegExp("^__on([^.]+)"+S.requote(b)+"$"),c,d;for(d in this)if(c=d.match(a)){var e=this[d];this.removeEventListener(c[1],e,e.$);delete this[d]}}var g="__on"+b,h=b.indexOf("."),r=U;0<h&&(b=b.slice(0,h));var l=Hd.get(b);l&&(b=l,r=X);return h?a?e:d:a?x:f}function U(b,a){return function(c){var d=S.event;S.event=c;a[0]=this.__data__;try{b.apply(this,a)}finally{S.event=d}}}function X(b,a){var c=U(b,a);return function(b){var a=b.relatedTarget;
a&&(a===this||a.compareDocumentPosition(this)&8)||c.call(this,b)}}function ea(b){var c=".dragsuppress-"+ ++Qa,d="click"+c,e=S.select(a(b)).on("touchmove"+c,D).on("dragstart"+c,D).on("selectstart"+c,D);null==mg&&(mg="onselectstart"in b?!1:z(b.style,"userSelect"));if(mg){var f=(b&&(b.ownerDocument||b.document||b).documentElement).style,g=f[mg];f[mg]="none"}return function(b){e.on(c,null);mg&&(f[mg]=g);if(b){var a=function(){e.on(d,null)};e.on(d,function(){D();a()},!0);setTimeout(a,0)}}}function fa(b,
c){c.changedTouches&&(c=c.changedTouches[0]);var d=b.ownerSVGElement||b;if(d.createSVGPoint){var e=d.createSVGPoint();if(0>Va&&(d=a(b),d.scrollX||d.scrollY)){d=S.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var f=d[0][0].getScreenCTM();Va=!(f.f||f.e);d.remove()}Va?(e.x=c.pageX,e.y=c.pageY):(e.x=c.clientX,e.y=c.clientY);e=e.matrixTransform(b.getScreenCTM().inverse());return[e.x,e.y]}e=b.getBoundingClientRect();return[c.clientX-
e.left-b.clientLeft,c.clientY-e.top-b.clientTop]}function la(){return S.event.changedTouches[0].identifier}function da(b,a,c){return(a[0]-b[0])*(c[1]-b[1])-(a[1]-b[1])*(c[0]-b[0])}function ma(b){return 1<b?0:-1>b?Wa:Math.acos(b)}function aa(b){return 1<b?rb:-1>b?-rb:Math.asin(b)}function na(b){return((b=Math.exp(b))+1/b)/2}function ha(b){return(b=Math.sin(b/2))*b}function ja(){}function oa(b,a,c){return this instanceof oa?void(this.h=+b,this.s=+a,this.l=+c):2>arguments.length?b instanceof oa?new oa(b.h,
b.s,b.l):Ma(""+b,ba,oa):new oa(b,a,c)}function ka(b,a,c){function d(b){360<b?b-=360:0>b&&(b+=360);return 60>b?f+(e-f)*b/60:180>b?e:240>b?f+(e-f)*(240-b)/60:f}b=isNaN(b)?0:0>(b%=360)?b+360:b;a=isNaN(a)?0:0>a?0:1<a?1:a;c=0>c?0:1<c?1:c;var e=.5>=c?c*(1+a):c+a-c*a;var f=2*c-e;return new ua(Math.round(255*d(b+120)),Math.round(255*d(b)),Math.round(255*d(b-120)))}function ia(b,a,c){return this instanceof ia?void(this.h=+b,this.c=+a,this.l=+c):2>arguments.length?b instanceof ia?new ia(b.h,b.c,b.l):b instanceof
ya?W(b.l,b.a,b.b):W((b=Ea((b=S.rgb(b)).r,b.g,b.b)).l,b.a,b.b):new ia(b,a,c)}function xa(b,a,c){isNaN(b)&&(b=0);isNaN(a)&&(a=0);return new ya(c,Math.cos(b*=Ra)*a,Math.sin(b)*a)}function ya(b,a,c){return this instanceof ya?void(this.l=+b,this.a=+a,this.b=+c):2>arguments.length?b instanceof ya?new ya(b.l,b.a,b.b):b instanceof ia?xa(b.h,b.c,b.l):Ea((b=ua(b)).r,b.g,b.b):new ya(b,a,c)}function sa(b,a,c){b=(b+16)/116;c=b-c/200;a=za(b+a/500)*si;b=za(b)*Wg;c=za(c)*Vg;return new ua(ra(3.2404542*a-1.5371385*
b-.4985314*c),ra(-.969266*a+1.8760108*b+.041556*c),ra(.0556434*a-.2040259*b+1.0572252*c))}function W(b,a,c){return 0<b?new ia(Math.atan2(c,a)*Tb,Math.sqrt(a*a+c*c),b):new ia(NaN,NaN,b)}function za(b){return.206893034<b?b*b*b:(b-4/29)/7.787037}function Da(b){return.008856<b?Math.pow(b,1/3):7.787037*b+4/29}function ra(b){return Math.round(255*(.00304>=b?12.92*b:1.055*Math.pow(b,1/2.4)-.055))}function ua(b,a,c){return this instanceof ua?void(this.r=~~b,this.g=~~a,this.b=~~c):2>arguments.length?b instanceof
ua?new ua(b.r,b.g,b.b):Ma(""+b,ua,ka):new ua(b,a,c)}function Aa(b){return new ua(b>>16,b>>8&255,b&255)+""}function wa(b){return 16>b?"0"+Math.max(0,b).toString(16):Math.min(255,b).toString(16)}function Ma(b,a,c){var d=0,e=0,f=0,g;if(g=/([a-z]+)\((.*)\)/.exec(b=b.toLowerCase())){var h=g[2].split(",");switch(g[1]){case "hsl":return c(parseFloat(h[0]),parseFloat(h[1])/100,parseFloat(h[2])/100);case "rgb":return a(Na(h[0]),Na(h[1]),Na(h[2]))}}if(c=Xg.get(b))return a(c.r,c.g,c.b);null==b||"#"!==b.charAt(0)||
isNaN(c=parseInt(b.slice(1),16))||(4===b.length?(d=(c&3840)>>4,d|=d>>4,e=c&240,e|=e>>4,f=c&15,f|=f<<4):7===b.length&&(d=(c&16711680)>>16,e=(c&65280)>>8,f=c&255));return a(d,e,f)}function ba(b,a,c){var d=Math.min(b/=255,a/=255,c/=255),e=Math.max(b,a,c),f=e-d,g=(e+d)/2;f?(d=.5>g?f/(e+d):f/(2-e-d),b=60*(b==e?(a-c)/f+(a<c?6:0):a==e?(c-b)/f+2:(b-a)/f+4)):(b=NaN,d=0<g&&1>g?0:b);return new oa(b,d,g)}function Ea(b,a,c){b=Ba(b);a=Ba(a);c=Ba(c);var d=Da((.4124564*b+.3575761*a+.1804375*c)/si),e=Da((.2126729*
b+.7151522*a+.072175*c)/Wg);b=Da((.0193339*b+.119192*a+.9503041*c)/Vg);return ya(116*e-16,500*(d-e),200*(e-b))}function Ba(b){return.04045>=(b/=255)?b/12.92:Math.pow((b+.055)/1.055,2.4)}function Na(b){var a=parseFloat(b);return"%"===b.charAt(b.length-1)?Math.round(2.55*a):a}function Ja(b){return"function"===typeof b?b:function(){return b}}function Lb(b){return function(a,c,d){2===arguments.length&&"function"===typeof c&&(d=c,c=null);return Mb(a,c,b,d)}}function Mb(b,a,c,d){function e(){var b=r.status,
a;if(a=!b)a=(a=r.responseType)&&"text"!==a?r.response:r.responseText;if(a||200<=b&&300>b||304===b){try{var d=c.call(f,r)}catch(gi){g.error.call(f,gi);return}g.load.call(f,d)}else g.error.call(f,r)}var f={},g=S.dispatch("beforesend","progress","load","error"),h={},r=new XMLHttpRequest,l=null;!this.XDomainRequest||"withCredentials"in r||!/^(http(s)?:)?\/\//.test(b)||(r=new XDomainRequest);"onload"in r?r.onload=r.onerror=e:r.onreadystatechange=function(){3<r.readyState&&e()};r.onprogress=function(b){var a=
S.event;S.event=b;try{g.progress.call(f,r)}finally{S.event=a}};f.header=function(b,a){b=(b+"").toLowerCase();if(2>arguments.length)return h[b];null==a?delete h[b]:h[b]=a+"";return f};f.mimeType=function(b){if(!arguments.length)return a;a=null==b?null:b+"";return f};f.responseType=function(b){if(!arguments.length)return l;l=b;return f};f.response=function(b){c=b;return f};["get","post"].forEach(function(b){f[b]=function(){return f.send.apply(f,[b].concat(Kd(arguments)))}});f.send=function(c,d,e){2===
arguments.length&&"function"===typeof d&&(e=d,d=null);r.open(c,b,!0);null==a||"accept"in h||(h.accept=a+",*/*");if(r.setRequestHeader)for(var k in h)r.setRequestHeader(k,h[k]);null!=a&&r.overrideMimeType&&r.overrideMimeType(a);null!=l&&(r.responseType=l);if(null!=e)f.on("error",e).on("load",function(b){e(null,b)});g.beforesend.call(f,r);r.send(null==d?null:d);return f};f.abort=function(){r.abort();return f};S.rebind(f,g,"on");return null==d?f:f.get(Pa(d))}function Pa(b){return 1===b.length?function(a,
c){b(null==a?c:null)}:b}function zb(b,a,c){var d=arguments.length;2>d&&(a=0);3>d&&(c=Date.now());d={c:b,t:c+a,n:null};tg?tg.n=d:ef=d;tg=d;ff||(sg=clearTimeout(sg),ff=1,Fi(cb));return d}function cb(){var b=ub();b=db()-b;24<b?(isFinite(b)&&(clearTimeout(sg),sg=setTimeout(cb,b)),ff=0):(ff=1,Fi(cb))}function ub(){for(var b=Date.now(),a=ef;a;)b>=a.t&&a.c(b-a.t)&&(a.c=null),a=a.n;return b}function db(){for(var b,a=ef,c=Infinity;a;)a.c?(a.t<c&&(c=a.t),a=(b=a).n):a=b?b.n=a.n:ef=a.n;tg=b;return c}function ab(b,
a){return a-(b?Math.ceil(Math.log(b)/Math.LN10):1)}function eb(b){var a=b.decimal,c=b.thousands,d=b.grouping,e=b.currency,f=d&&c?function(b,a){for(var e=b.length,f=[],g=0,h=d[0],r=0;0<e&&0<h;){r+h+1>a&&(h=Math.max(1,a-r));f.push(b.substring(e-=h,e+h));if((r+=h+1)>a)break;h=d[g=(g+1)%d.length]}return f.reverse().join(c)}:y;return function(b){b=ng.exec(b);var c=b[1]||" ",d=b[2]||"\x3e",g=b[3]||"-",h=b[4]||"",r=b[5],l=+b[6],k=b[7],u=b[8],t=b[9],m=1,n="",v="",w=!1,y=!0;u&&(u=+u.substring(1));if(r||"0"===
c&&"\x3d"===d)r=c="0",d="\x3d";switch(t){case "n":k=!0;t="g";break;case "%":m=100;v="%";t="f";break;case "p":m=100;v="%";t="r";break;case "b":case "o":case "x":case "X":"#"===h&&(n="0"+t.toLowerCase());case "c":y=!1;case "d":w=!0;u=0;break;case "s":m=-1,t="r"}"$"===h&&(n=e[0],v=e[1]);"r"!=t||u||(t="g");if(null!=u)if("g"==t)u=Math.max(1,Math.min(21,u));else if("e"==t||"f"==t)u=Math.max(0,Math.min(20,u));t=ui.get(t)||gb;var z=r&&k;return function(b){var e=v;if(w&&b%1)return"";var h=0>b||0===b&&0>1/
b?(b=-b,"-"):"-"===g?"":g;0>m?(e=S.formatPrefix(b,u),b=e.scale(b),e=e.symbol+v):b*=m;b=t(b,u);var A=b.lastIndexOf(".");if(0>A)if(A=y?b.lastIndexOf("e"):-1,0>A){var x=b;b=""}else x=b.substring(0,A),b=b.substring(A);else x=b.substring(0,A),b=a+b.substring(A+1);!r&&k&&(x=f(x,Infinity));A=n.length+x.length+b.length+(z?0:h.length);var B=A<l?Array(A=l-A+1).join(c):"";z&&(x=f(B+x,B.length?l-b.length:Infinity));h+=n;b=x+b;return("\x3c"===d?h+b+B:"\x3e"===d?B+h+b:"^"===d?B.substring(0,A>>=1)+h+b+B.substring(A):
h+(z?b:B+b))+e}}}function gb(b){return b+""}function jb(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Oa(b,a,c){function d(a){var c=b(a),d=f(c,1);return a-c<d-a?c:d}function e(c){a(c=b(new $c(c-1)),1);return c}function f(b,c){a(b=new $c(+b),c);return b}function g(b,d,f){b=e(b);var g=[];if(1<f)for(;b<d;)c(b)%f||g.push(new Date(+b)),a(b,1);else for(;b<d;)g.push(new Date(+b)),a(b,1);return g}b.floor=b;b.round=d;b.ceil=e;b.offset=f;b.range=g;var h=b.utc=Za(b);
h.floor=h;h.round=Za(d);h.ceil=Za(e);h.offset=Za(f);h.range=function(b,a,c){try{$c=jb;var d=new jb;d._=b;return g(d,a,c)}finally{$c=Date}};return b}function Za(b){return function(a,c){try{$c=jb;var d=new jb;d._=a;return b(d,c)._}finally{$c=Date}}}function Wc(b){function a(b){function a(a){for(var c=[],e=-1,f=0,g,h;++e<d;)if(37===b.charCodeAt(e)){c.push(b.slice(f,e));null!=(g=Ph[f=b.charAt(++e)])&&(f=b.charAt(++e));if(h=x[f])f=h(a,null==g?"e"===f?" ":"0":g);c.push(f);f=e+1}c.push(b.slice(f,e));return c.join("")}
var d=b.length;a.parse=function(a){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(c(d,b,a,0)!=a.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);a=null!=d.Z&&$c!==jb;var e=new (a?jb:$c);"j"in d?e.setFullYear(d.y,0,d.j):"W"in d||"U"in d?("w"in d||(d.w="W"in d?1:0),e.setFullYear(d.y,0,1),e.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(e.getDay()+5)%7:d.w+7*d.U-(e.getDay()+6)%7)):e.setFullYear(d.y,d.m,d.d);e.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L);return a?e._:e};a.toString=function(){return b};
return a}function c(b,a,c,d){for(var e,f=0,g=a.length,h=c.length;f<g;){if(d>=h)return-1;e=a.charCodeAt(f++);if(37===e){if(e=a.charAt(f++),e=B[e in Ph?a.charAt(f++):e],!e||0>(d=e(b,c,d)))return-1}else if(e!=c.charCodeAt(d++))return-1}return d}var d=b.dateTime,e=b.date,f=b.time,g=b.periods,h=b.days,r=b.shortDays,l=b.months,k=b.shortMonths;a.utc=function(b){function c(b){try{$c=jb;var a=new $c;a._=b;return d(a)}finally{$c=Date}}var d=a(b);c.parse=function(b){try{$c=jb;var a=d.parse(b);return a&&a._}finally{$c=
Date}};c.toString=d.toString;return c};a.multi=a.utc.multi=pb;var u=S.map(),t=Nb(h),m=Ya(h),n=Nb(r),v=Ya(r),w=Nb(l),y=Ya(l),z=Nb(k),A=Ya(k);g.forEach(function(b,a){u.set(b.toLowerCase(),a)});var x={a:function(b){return r[b.getDay()]},A:function(b){return h[b.getDay()]},b:function(b){return k[b.getMonth()]},B:function(b){return l[b.getMonth()]},c:a(d),d:function(b,a){return vb(b.getDate(),a,2)},e:function(b,a){return vb(b.getDate(),a,2)},H:function(b,a){return vb(b.getHours(),a,2)},I:function(b,a){return vb(b.getHours()%
12||12,a,2)},j:function(b,a){return vb(1+Ga.dayOfYear(b),a,3)},L:function(b,a){return vb(b.getMilliseconds(),a,3)},m:function(b,a){return vb(b.getMonth()+1,a,2)},M:function(b,a){return vb(b.getMinutes(),a,2)},p:function(b){return g[+(12<=b.getHours())]},S:function(b,a){return vb(b.getSeconds(),a,2)},U:function(b,a){return vb(Ga.sundayOfYear(b),a,2)},w:function(b){return b.getDay()},W:function(b,a){return vb(Ga.mondayOfYear(b),a,2)},x:a(e),X:a(f),y:function(b,a){return vb(b.getFullYear()%100,a,2)},
Y:function(b,a){return vb(b.getFullYear()%1E4,a,4)},Z:Ub,"%":function(){return"%"}},B={a:function(b,a,c){n.lastIndex=0;return(a=n.exec(a.slice(c)))?(b.w=v.get(a[0].toLowerCase()),c+a[0].length):-1},A:function(b,a,c){t.lastIndex=0;return(a=t.exec(a.slice(c)))?(b.w=m.get(a[0].toLowerCase()),c+a[0].length):-1},b:function(b,a,c){z.lastIndex=0;return(a=z.exec(a.slice(c)))?(b.m=A.get(a[0].toLowerCase()),c+a[0].length):-1},B:function(b,a,c){w.lastIndex=0;return(a=w.exec(a.slice(c)))?(b.m=y.get(a[0].toLowerCase()),
c+a[0].length):-1},c:function(b,a,d){return c(b,x.c.toString(),a,d)},d:$a,e:$a,H:Fc,I:Fc,j:Xd,L:Yd,m:uc,M:Md,p:function(b,a,c){a=u.get(a.slice(c,c+=2).toLowerCase());return null==a?-1:(b.p=a,c)},S:nc,U:mc,w:td,W:ud,x:function(b,a,d){return c(b,x.x.toString(),a,d)},X:function(b,a,d){return c(b,x.X.toString(),a,d)},y:Hb,Y:Nc,Z:Yb,"%":Oc};return a}function vb(b,a,c){var d=0>b?"-":"";b=(d?-b:b)+"";var e=b.length;return d+(e<c?Array(c-e+1).join(a)+b:b)}function Nb(b){return new RegExp("^(?:"+b.map(S.requote).join("|")+
")","i")}function Ya(b){for(var a=new t,c=-1,d=b.length;++c<d;)a.set(b[c].toLowerCase(),c);return a}function td(b,a,c){ec.lastIndex=0;return(a=ec.exec(a.slice(c,c+1)))?(b.w=+a[0],c+a[0].length):-1}function mc(b,a,c){ec.lastIndex=0;return(a=ec.exec(a.slice(c)))?(b.U=+a[0],c+a[0].length):-1}function ud(b,a,c){ec.lastIndex=0;return(a=ec.exec(a.slice(c)))?(b.W=+a[0],c+a[0].length):-1}function Nc(b,a,c){ec.lastIndex=0;return(a=ec.exec(a.slice(c,c+4)))?(b.y=+a[0],c+a[0].length):-1}function Hb(b,a,c){ec.lastIndex=
0;if(a=ec.exec(a.slice(c,c+2))){var d=+a[0];b=(b.y=d+(68<d?1900:2E3),c+a[0].length)}else b=-1;return b}function Yb(b,a,c){return/^[+-]\d{4}$/.test(a=a.slice(c,c+5))?(b.Z=-a,c+5):-1}function uc(b,a,c){ec.lastIndex=0;return(a=ec.exec(a.slice(c,c+2)))?(b.m=a[0]-1,c+a[0].length):-1}function $a(b,a,c){ec.lastIndex=0;return(a=ec.exec(a.slice(c,c+2)))?(b.d=+a[0],c+a[0].length):-1}function Xd(b,a,c){ec.lastIndex=0;return(a=ec.exec(a.slice(c,c+3)))?(b.j=+a[0],c+a[0].length):-1}function Fc(b,a,c){ec.lastIndex=
0;return(a=ec.exec(a.slice(c,c+2)))?(b.H=+a[0],c+a[0].length):-1}function Md(b,a,c){ec.lastIndex=0;return(a=ec.exec(a.slice(c,c+2)))?(b.M=+a[0],c+a[0].length):-1}function nc(b,a,c){ec.lastIndex=0;return(a=ec.exec(a.slice(c,c+2)))?(b.S=+a[0],c+a[0].length):-1}function Yd(b,a,c){ec.lastIndex=0;return(a=ec.exec(a.slice(c,c+3)))?(b.L=+a[0],c+a[0].length):-1}function Ub(b){var a=b.getTimezoneOffset();b=0<a?"-":"+";var c=Xa(a)/60|0;a=Xa(a)%60;return b+vb(c,"0",2)+vb(a,"0",2)}function Oc(b,a,c){hi.lastIndex=
0;return(b=hi.exec(a.slice(c,c+1)))?c+b[0].length:-1}function pb(b){for(var a=b.length,c=-1;++c<a;)b[c][0]=this(b[c][0]);return function(a){for(var c=0,d=b[c];!d[1](a);)d=b[++c];return d[0](a)}}function Nd(){}function Xc(b,a,c){var d=c.s=b+a,e=d-b;c.t=b-(d-e)+(a-e)}function pa(b,a){if(b&&Bf.hasOwnProperty(b.type))Bf[b.type](b,a)}function vc(b,a,c){var d=-1;c=b.length-c;for(a.lineStart();++d<c;){var e=b[d];a.point(e[0],e[1],e[2])}a.lineEnd()}function Ka(b,a){var c=-1,d=b.length;for(a.polygonStart();++c<
d;)vc(b[c],a,1);a.polygonEnd()}function Pc(){function b(b,a){b*=Ra;a=a*Ra/2+Wa/4;var c=b-d,g=0<=c?1:-1;c*=g;var h=Math.cos(a);a=Math.sin(a);var r=f*a;Yc.add(Math.atan2(r*g*Math.sin(c),e*h+r*Math.cos(c)));d=b;e=h;f=a}var a,c,d,e,f;Rc.point=function(g,h){Rc.point=b;d=(a=g)*Ra;e=Math.cos(h=(c=h)*Ra/2+Wa/4);f=Math.sin(h)};Rc.lineEnd=function(){b(a,c)}}function Qc(b){var a=b[0];b=b[1];var c=Math.cos(b);return[c*Math.cos(a),c*Math.sin(a),Math.sin(b)]}function Zg(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]}
function qa(b,a){return[b[1]*a[2]-b[2]*a[1],b[2]*a[0]-b[0]*a[2],b[0]*a[1]-b[1]*a[0]]}function Vb(b,a){b[0]+=a[0];b[1]+=a[1];b[2]+=a[2]}function fb(b,a){return[b[0]*a,b[1]*a,b[2]*a]}function Ib(b){var a=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);b[0]/=a;b[1]/=a;b[2]/=a}function vd(b){return[Math.atan2(b[1],b[0]),aa(b[2])]}function Qb(b,a){return 1E-6>Xa(b[0]-a[0])&&1E-6>Xa(b[1]-a[1])}function oe(b,a){b*=Ra;var c=Math.cos(a*=Ra);fc(c*Math.cos(b),c*Math.sin(b),Math.sin(a))}function fc(b,a,c){++Ah;Wb+=
(b-Wb)/Ah;Be+=(a-Be)/Ah;Id+=(c-Id)/Ah}function pe(){function b(b,e){b*=Ra;var f=Math.cos(e*=Ra),g=f*Math.cos(b);b=f*Math.sin(b);e=Math.sin(e);var h=Math.atan2(Math.sqrt((h=c*e-d*b)*h+(h=d*g-a*e)*h+(h=a*b-c*g)*h),a*g+c*b+d*e);bh+=h;Qf+=h*(a+(a=g));Ne+=h*(c+(c=b));re+=h*(d+(d=e));fc(a,c,d)}var a,c,d;Oe.point=function(e,f){e*=Ra;var g=Math.cos(f*=Ra);a=g*Math.cos(e);c=g*Math.sin(e);d=Math.sin(f);Oe.point=b;fc(a,c,d)}}function va(){Oe.point=oe}function qe(){function b(b,a){b*=Ra;var c=Math.cos(a*=Ra),
g=c*Math.cos(b);b=c*Math.sin(b);a=Math.sin(a);c=e*a-f*b;var h=f*g-d*a,r=d*b-e*g,l=Math.sqrt(c*c+h*h+r*r),k=d*g+e*b+f*a,u=l&&-ma(k)/l;l=Math.atan2(l,k);ah+=u*c;yg+=u*h;Cf+=u*r;bh+=l;Qf+=l*(d+(d=g));Ne+=l*(e+(e=b));re+=l*(f+(f=a));fc(d,e,f)}var a,c,d,e,f;Oe.point=function(g,h){a=g;c=h;Oe.point=b;g*=Ra;var r=Math.cos(h*=Ra);d=r*Math.cos(g);e=r*Math.sin(g);f=Math.sin(h);fc(d,e,f)};Oe.lineEnd=function(){b(a,c);Oe.lineEnd=va;Oe.point=oe}}function Ta(b,a){function c(c,d){return c=b(c,d),a(c[0],c[1])}b.invert&&
a.invert&&(c.invert=function(c,d){return c=a.invert(c,d),c&&b.invert(c[0],c[1])});return c}function xg(){return!0}function Fa(b,a,c,d,e){var f=[],g=[];b.forEach(function(b){if(!(0>=(a=b.length-1))){var a,c=b[0],d=b[a];if(Qb(c,d)){e.lineStart();for(d=0;d<a;++d)e.point((c=b[d])[0],c[1]);e.lineEnd()}else a=new ic(c,b,null,!0),c=new ic(c,null,a,!1),a.o=c,f.push(a),g.push(c),a=new ic(d,b,null,!1),c=new ic(d,null,a,!0),a.o=c,f.push(a),g.push(c)}});g.sort(a);kb(f);kb(g);if(f.length){b=0;a=c;for(c=g.length;b<
c;++b)g[b].e=a=!a;a=f[0];for(var h,r;;){for(var l=a,k=!0;l.v;)if((l=l.n)===a)return;h=l.z;e.lineStart();do{l.v=l.o.v=!0;if(l.e){if(k)for(b=0,c=h.length;b<c;++b)e.point((r=h[b])[0],r[1]);else d(l.x,l.n.x,1,e);l=l.n}else{if(k)for(h=l.p.z,b=h.length-1;0<=b;--b)e.point((r=h[b])[0],r[1]);else d(l.x,l.p.x,-1,e);l=l.p}l=l.o;h=l.z;k=!k}while(!l.v);e.lineEnd()}}}function kb(b){if(a=b.length){for(var a,c=0,d=b[0],e;++c<a;)d.n=e=b[c],e.p=d,d=e;d.n=e=b[0];e.p=d}}function ic(b,a,c,d){this.x=b;this.z=a;this.o=
c;this.e=d;this.v=!1;this.n=this.p=null}function jd(b,a,c,d){return function(e,f){function g(a,c){var d=e(a,c);b(a=d[0],c=d[1])&&f.point(a,c)}function h(b,a){b=e(b,a);m.point(b[0],b[1])}function r(){v.point=h;m.lineStart()}function l(){v.point=g;m.lineEnd()}function k(b,a){B.push([b,a]);b=e(b,a);z.point(b[0],b[1])}function u(){z.lineStart();B=[]}function t(){k(B[0][0],B[0][1]);z.lineEnd();var b=z.clean(),a=y.buffer(),c=a.length;B.pop();x.push(B);B=null;if(c)if(b&1){b=a[0];c=b.length-1;a=-1;var d;
if(0<c){A||(f.polygonStart(),A=!0);for(f.lineStart();++a<c;)f.point((d=b[a])[0],d[1]);f.lineEnd()}}else 1<c&&b&2&&a.push(a.pop().concat(a.shift())),w.push(a.filter(Zb))}var m=a(f),n=e.invert(d[0],d[1]),v={point:g,lineStart:r,lineEnd:l,polygonStart:function(){v.point=k;v.lineStart=u;v.lineEnd=t;w=[];x=[]},polygonEnd:function(){v.point=g;v.lineStart=r;v.lineEnd=l;w=S.merge(w);var b=n;var a=x;var d=b[0],e=b[1],h=[Math.sin(d),-Math.cos(d),0],k=0,u=0;Yc.reset();for(var t=0,m=a.length;t<m;++t){var y=a[t],
z=y.length;if(z){var B=y[0],D=B[0];b=B[1]/2+Wa/4;for(var C=Math.sin(b),q=Math.cos(b),p=1;;){p===z&&(p=0);b=y[p];var I=b[0],E=b[1]/2+Wa/4,G=Math.sin(E);E=Math.cos(E);var H=I-D,K=0<=H?1:-1,M=K*H,N=M>Wa;C*=G;Yc.add(Math.atan2(C*K*Math.sin(M),q*E+C*Math.cos(M)));k+=N?H+K*fd:H;N^D>=d^I>=d&&(B=qa(Qc(B),Qc(b)),Ib(B),D=qa(h,B),Ib(D),D=(N^0<=H?-1:1)*aa(D[2]),e>D||e===D&&(B[0]||B[1]))&&(u+=N^0<=H?1:-1);if(!p++)break;D=I;C=G;q=E;B=b}}}a=(-1E-6>k||1E-6>k&&-1E-6>Yc)^u&1;w.length?(A||(f.polygonStart(),A=!0),Fa(w,
hb,a,c,f)):a&&(A||(f.polygonStart(),A=!0),f.lineStart(),c(null,null,1,f),f.lineEnd());A&&(f.polygonEnd(),A=!1);w=x=null},sphere:function(){f.polygonStart();f.lineStart();c(null,null,1,f);f.lineEnd();f.polygonEnd()}},w,y=wd(),z=a(y),A=!1,x,B;return v}}function Zb(b){return 1<b.length}function wd(){var b=[],a;return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:x,buffer:function(){var c=b;b=[];a=null;return c},rejoin:function(){1<b.length&&b.push(b.pop().concat(b.shift()))}}}
function hb(b,a){return(0>(b=b.x)[0]?b[1]-rb-1E-6:rb-b[1])-(0>(a=a.x)[0]?a[1]-rb-1E-6:rb-a[1])}function nb(b){function a(b,a){return Math.cos(b)*Math.cos(a)>e}function c(b,a,c){var d=Qc(b),f=Qc(a),g=[1,0,0];f=qa(d,f);var h=Zg(f,f);d=f[0];var r=h-d*d;if(!r)return!c&&b;h=e*h/r;r=-e*d/r;d=qa(g,f);g=fb(g,h);f=fb(f,r);Vb(g,f);f=Zg(g,d);h=Zg(d,d);r=f*f-h*(Zg(g,g)-1);if(!(0>r)){var l=Math.sqrt(r);r=fb(d,(-f-l)/h);Vb(r,g);r=vd(r);if(!c)return r;c=b[0];var k=a[0];b=b[1];a=a[1];if(k<c){var u=c;c=k;k=u}var t=
k-c,m=1E-6>Xa(t-Wa);!m&&a<b&&(u=b,b=a,a=u);if(m||1E-6>t?m?0<b+a^r[1]<(1E-6>Xa(r[0]-c)?b:a):b<=r[1]&&r[1]<=a:t>Wa^(c<=r[0]&&r[0]<=k))return a=fb(d,(-f+l)/h),Vb(a,g),[r,vd(a)]}}function d(a,c){var d=f?b:Wa-b,e=0;a<-d?e|=1:a>d&&(e|=2);c<-d?e|=4:c>d&&(e|=8);return e}var e=Math.cos(b),f=0<e,g=1E-6<Xa(e),h=zc(b,6*Ra);return jd(a,function(b){var e,h,r,l,k;return{lineStart:function(){l=r=!1;k=1},point:function(u,t){var m=[u,t],n=a(u,t);t=f?n?0:d(u,t):n?d(u+(0>u?Wa:-Wa),t):0;!e&&(l=r=n)&&b.lineStart();n!==
r&&(u=c(e,m),Qb(e,u)||Qb(m,u))&&(m[0]+=1E-6,m[1]+=1E-6,n=a(m[0],m[1]));if(n!==r)k=0,n?(b.lineStart(),u=c(m,e),b.point(u[0],u[1])):(u=c(e,m),b.point(u[0],u[1]),b.lineEnd()),e=u;else if(g&&e&&f^n){var v;t&h||!(v=c(m,e,!0))||(k=0,f?(b.lineStart(),b.point(v[0][0],v[0][1]),b.point(v[1][0],v[1][1]),b.lineEnd()):(b.point(v[1][0],v[1][1]),b.lineEnd(),b.lineStart(),b.point(v[0][0],v[0][1])))}!n||e&&Qb(e,m)||b.point(m[0],m[1]);e=m;r=n;h=t},lineEnd:function(){r&&b.lineEnd();e=null},clean:function(){return k|
(l&&r)<<1}}},h,f?[0,-b]:[-Wa,b-Wa])}function se(b,a,c,d){return function(e){var f=e.a,g=e.b,h=f.x;f=f.y;var r=0,l=1,k=g.x-h;g=g.y-f;var u=b-h;if(k||!(0<u)){u/=k;if(0>k){if(u<r)return;u<l&&(l=u)}else if(0<k){if(u>l)return;u>r&&(r=u)}u=c-h;if(k||!(0>u)){u/=k;if(0>k){if(u>l)return;u>r&&(r=u)}else if(0<k){if(u<r)return;u<l&&(l=u)}u=a-f;if(g||!(0<u)){u/=g;if(0>g){if(u<r)return;u<l&&(l=u)}else if(0<g){if(u>l)return;u>r&&(r=u)}u=d-f;if(g||!(0>u)){u/=g;if(0>g){if(u>l)return;u>r&&(r=u)}else if(0<g){if(u<r)return;
u<l&&(l=u)}0<r&&(e.a={x:h+r*k,y:f+r*g});1>l&&(e.b={x:h+l*k,y:f+l*g});return e}}}}}}function Ic(b,a,c,d){function e(d,e){return 1E-6>Xa(d[0]-b)?0<e?0:3:1E-6>Xa(d[0]-c)?0<e?2:1:1E-6>Xa(d[1]-a)?0<e?1:0:0<e?3:2}function f(b,a){return g(b.x,a.x)}function g(b,a){var c=e(b,1),d=e(a,1);return c!==d?c-d:0===c?a[1]-b[1]:1===c?b[0]-a[0]:2===c?b[1]-a[1]:a[0]-b[0]}return function(h){function r(f,h,r,l){var k=0,u=0;if(null==f||(k=e(f,r))!==(u=e(h,r))||0>g(f,h)^0<r){do l.point(0===k||3===k?b:c,1<k?d:a);while((k=
(k+r+4)%4)!==u)}else l.point(h[0],h[1])}function l(e,f){b<=e&&e<=c&&a<=f&&f<=d&&h.point(e,f)}function k(e,f){e=Math.max(-1E9,Math.min(1E9,e));f=Math.max(-1E9,Math.min(1E9,f));var g=b<=e&&e<=c&&a<=f&&f<=d;v&&w.push([e,f]);if(q)z=e,A=f,x=g,q=!1,g&&(h.lineStart(),h.point(e,f));else if(g&&C)h.point(e,f);else{var r={a:{x:B,y:D},b:{x:e,y:f}};m(r)?(C||(h.lineStart(),h.point(r.a.x,r.a.y)),h.point(r.b.x,r.b.y),g||h.lineEnd(),p=!1):g&&(h.lineStart(),h.point(e,f),p=!1)}B=e;D=f;C=g}var u=h,t=wd(),m=se(b,a,c,
d),n,v,w,y={point:l,lineStart:function(){y.point=k;v&&v.push(w=[]);q=!0;C=!1;B=D=NaN},lineEnd:function(){n&&(k(z,A),x&&C&&t.rejoin(),n.push(t.buffer()));y.point=l;C&&h.lineEnd()},polygonStart:function(){h=t;n=[];v=[];p=!0},polygonEnd:function(){h=u;n=S.merge(n);var a=[b,d];for(var c=0,e=v.length,g=a[1],l=0;l<e;++l)for(var k=1,t=v[l],m=t.length,y=t[0],z;k<m;++k)z=t[k],y[1]<=g?z[1]>g&&0<da(y,z,a)&&++c:z[1]<=g&&0>da(y,z,a)&&--c,y=z;a=0!==c;c=p&&a;e=n.length;if(c||e)h.polygonStart(),c&&(h.lineStart(),
r(null,null,1,h),h.lineEnd()),e&&Fa(n,f,a,r,h),h.polygonEnd();n=v=w=null}},z,A,x,B,D,C,q,p;return y}}function Od(b){var a=0,c=Wa/3,d=ve(b);b=d(a,c);b.parallels=function(b){return arguments.length?d(a=b[0]*Wa/180,c=b[1]*Wa/180):[a/Wa*180,c/Wa*180]};return b}function wc(b,a){function c(b,a){a=Math.sqrt(e-2*d*Math.sin(a))/d;return[a*Math.sin(b*=d),f-a*Math.cos(b)]}b=Math.sin(b);var d=(b+Math.sin(a))/2,e=1+b*(2*d-b),f=Math.sqrt(e)/d;c.invert=function(b,a){a=f-a;return[Math.atan2(b,a)/d,aa((e-(b*b+a*a)*
d*d)/(2*d))]};return c}function Jc(){function b(b,a){Gc+=e*b-d*a;d=b;e=a}var a,c,d,e;Hc.point=function(f,g){Hc.point=b;a=d=f;c=e=g};Hc.lineEnd=function(){b(a,c)}}function pc(){function b(b,a){g.push("M",b,",",a,f)}function a(b,a){g.push("M",b,",",a);h.point=c}function c(b,a){g.push("L",b,",",a)}function d(){h.point=b}function e(){g.push("Z")}var f=Db(4.5),g=[],h={point:b,lineStart:function(){h.point=a},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d;h.point=b},pointRadius:function(b){f=
Db(b);return h},result:function(){if(g.length){var b=g.join("");g=[];return b}}};return h}function Db(b){return"m0,"+b+"a"+b+","+b+" 0 1,1 0,"+-2*b+"a"+b+","+b+" 0 1,1 0,"+2*b+"z"}function wb(b,a){Wb+=b;Be+=a;++Id}function ac(){function b(b,d){var e=b-a,f=d-c;e=Math.sqrt(e*e+f*f);Qf+=e*(a+b)/2;Ne+=e*(c+d)/2;re+=e;wb(a=b,c=d)}var a,c;$b.point=function(d,e){$b.point=b;wb(a=d,c=e)}}function Zc(){$b.point=wb}function Pe(){function b(b,a){var c=b-d,f=a-e;c=Math.sqrt(c*c+f*f);Qf+=c*(d+b)/2;Ne+=c*(e+a)/
2;re+=c;c=e*b-d*a;ah+=c*(d+b);yg+=c*(e+a);Cf+=3*c;wb(d=b,e=a)}var a,c,d,e;$b.point=function(f,g){$b.point=b;wb(a=d=f,c=e=g)};$b.lineEnd=function(){b(a,c)}}function Bh(b){function a(a,c){b.moveTo(a+g,c);b.arc(a,c,g,0,fd)}function c(a,c){b.moveTo(a,c);h.point=d}function d(a,c){b.lineTo(a,c)}function e(){h.point=a}function f(){b.closePath()}var g=4.5,h={point:a,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e;h.point=a},pointRadius:function(b){g=
b;return h},result:x};return h}function Df(b){function a(b){return(h?d:c)(b)}function c(a){return Zf(a,function(c,d){c=b(c,d);a.point(c[0],c[1])})}function d(a){function c(c,d){c=b(c,d);a.point(c[0],c[1])}function d(){z=NaN;C.point=f;a.lineStart()}function f(c,d){var f=Qc([c,d]);d=b(c,d);e(z,A,y,x,B,D,z=d[0],A=d[1],y=c,x=f[0],B=f[1],D=f[2],h,a);a.point(z,A)}function g(){C.point=c;a.lineEnd()}function r(){d();C.point=l;C.lineEnd=k}function l(b,a){f(u=b,a);t=z;m=A;n=x;v=B;w=D;C.point=f}function k(){e(z,
A,y,x,B,D,t,m,u,n,v,w,h,a);C.lineEnd=g;g()}var u,t,m,n,v,w,y,z,A,x,B,D,C={point:c,lineStart:d,lineEnd:g,polygonStart:function(){a.polygonStart();C.lineStart=r},polygonEnd:function(){a.polygonEnd();C.lineStart=d}};return C}function e(a,c,d,h,r,l,k,u,t,m,n,v,w,y){var z=k-a,A=u-c,x=z*z+A*A;if(x>4*f&&w--){var B=h+m,D=r+n,C=l+v,q=Math.sqrt(B*B+D*D+C*C),p=Math.asin(C/=q),Cb=1E-6>Xa(Xa(C)-1)||1E-6>Xa(d-t)?(d+t)/2:Math.atan2(D,B),gd=b(Cb,p);p=gd[0];gd=gd[1];var I=p-a,E=gd-c,G=A*I-z*E;if(G*G/x>f||.3<Xa((z*
I+A*E)/x-.5)||h*m+r*n+l*v<g)e(a,c,d,h,r,l,p,gd,Cb,B/=q,D/=q,C,w,y),y.point(p,gd),e(p,gd,Cb,B,D,C,k,u,t,m,n,v,w,y)}}var f=.5,g=Math.cos(30*Ra),h=16;a.precision=function(b){if(!arguments.length)return Math.sqrt(f);h=0<(f=b*b)&&16;return a};return a}function qc(b){var a=Df(function(a,c){return b([a*Tb,c*Tb])});return function(b){return hf(a(b))}}function xd(b){this.stream=b}function Zf(b,a){return{point:a,sphere:function(){b.sphere()},lineStart:function(){b.lineStart()},lineEnd:function(){b.lineEnd()},
polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function ob(b){return ve(function(){return b})()}function ve(b){function a(b){b=h(b[0]*Ra,b[1]*Ra);return[b[0]*l+z,A-b[1]*l]}function c(b){return(b=h.invert((b[0]-z)/l,(A-b[1])/l))&&[b[0]*Tb,b[1]*Tb]}function d(){h=Ta(g=Sc(n,v,w),f);var b=f(t,m);z=k-b[0]*l;A=u+b[1]*l;return e()}function e(){q&&(q.valid=!1,q=null);return a}var f,g,h,r=Df(function(b,a){b=f(b,a);return[b[0]*l+z,A-b[1]*l]}),l=150,k=480,u=250,t=0,m=0,n=0,
v=0,w=0,z,A,x=Hi,B=y,D=null,C=null,q;a.stream=function(b){q&&(q.valid=!1);q=hf(x(g,r(B(b))));q.valid=!0;return q};a.clipAngle=function(b){if(!arguments.length)return D;x=null==b?(D=b,Hi):nb((D=+b)*Ra);return e()};a.clipExtent=function(b){if(!arguments.length)return C;B=(C=b)?Ic(b[0][0],b[0][1],b[1][0],b[1][1]):y;return e()};a.scale=function(b){if(!arguments.length)return l;l=+b;return d()};a.translate=function(b){if(!arguments.length)return[k,u];k=+b[0];u=+b[1];return d()};a.center=function(b){if(!arguments.length)return[t*
Tb,m*Tb];t=b[0]%360*Ra;m=b[1]%360*Ra;return d()};a.rotate=function(b){if(!arguments.length)return[n*Tb,v*Tb,w*Tb];n=b[0]%360*Ra;v=b[1]%360*Ra;w=2<b.length?b[2]%360*Ra:0;return d()};S.rebind(a,r,"precision");return function(){f=b.apply(this,arguments);a.invert=f.invert&&c;return d()}}function hf(b){return Zf(b,function(a,c){b.point(a*Ra,c*Ra)})}function Gb(b,a){return[b,a]}function cd(b,a){return[b>Wa?b-fd:b<-Wa?b+fd:b,a]}function Sc(b,a,c){return b?a||c?Ta(Ef(b),jf(a,c)):Ef(b):a||c?jf(a,c):cd}function Zd(b){return function(a,
c){return a+=b,[a>Wa?a-fd:a<-Wa?a+fd:a,c]}}function Ef(b){var a=Zd(b);a.invert=Zd(-b);return a}function jf(b,a){function c(b,a){var c=Math.cos(a),h=Math.cos(b)*c;b=Math.sin(b)*c;a=Math.sin(a);c=a*d+h*e;return[Math.atan2(b*f-c*g,h*d-a*e),aa(c*f+b*g)]}var d=Math.cos(b),e=Math.sin(b),f=Math.cos(a),g=Math.sin(a);c.invert=function(b,a){var c=Math.cos(a),h=Math.cos(b)*c;b=Math.sin(b)*c;a=Math.sin(a);c=a*f-b*g;return[Math.atan2(b*f+a*g,h*d+c*e),aa(c*d-h*e)]};return c}function zc(b,a){var c=Math.cos(b),d=
Math.sin(b);return function(e,f,g,h){var r=g*a;if(null!=e){if(e=Pd(c,e),f=Pd(c,f),0<g?e<f:e>f)e+=g*fd}else e=b+g*fd,f=b-.5*r;for(var l;0<g?e>f:e<f;e-=r)h.point((l=vd([c,-d*Math.cos(e),-d*Math.sin(e)]))[0],l[1])}}function Pd(b,a){a=Qc(a);a[0]-=b;Ib(a);b=ma(-a[1]);return((0>-a[2]?-b:b)+2*Math.PI-1E-6)%(2*Math.PI)}function we(b,a,c){var d=S.range(b,a-1E-6,c).concat(a);return function(b){return d.map(function(a){return[b,a]})}}function lf(b,a,c){var d=S.range(b,a-1E-6,c).concat(a);return function(b){return d.map(function(a){return[a,
b]})}}function $f(b){return b.source}function Re(b){return b.target}function Qd(b,a,c,d){var e=Math.cos(a),f=Math.sin(a),g=Math.cos(d),h=Math.sin(d),r=e*Math.cos(b),l=e*Math.sin(b),k=g*Math.cos(c),u=g*Math.sin(c),t=2*Math.asin(Math.sqrt(ha(d-a)+e*g*ha(c-b))),m=1/Math.sin(t);c=t?function(b){var a=Math.sin(b*=t)*m;b=Math.sin(t-b)*m;var c=b*r+a*k,d=b*l+a*u;return[Math.atan2(d,c)*Tb,Math.atan2(b*f+a*h,Math.sqrt(c*c+d*d))*Tb]}:function(){return[b*Tb,a*Tb]};c.distance=t;return c}function ld(b,a){function c(a,
c){var d=Math.cos(c),e=b(Math.cos(a)*d);return[e*d*Math.sin(a),e*Math.sin(c)]}c.invert=function(b,c){var d=Math.sqrt(b*b+c*c),e=a(d),f=Math.sin(e);return[Math.atan2(b*f,d*Math.cos(e)),Math.asin(d&&c*f/d)]};return c}function Hf(b,a){function c(b,a){0<f?a<-rb+1E-6&&(a=-rb+1E-6):a>rb-1E-6&&(a=rb-1E-6);a=f/Math.pow(Math.tan(Wa/4+a/2),e);return[a*Math.sin(e*b),f-a*Math.cos(e*b)]}var d=Math.cos(b),e=b===a?Math.sin(b):Math.log(d/Math.cos(a))/Math.log(Math.tan(Wa/4+a/2)/Math.tan(Wa/4+b/2)),f=d*Math.pow(Math.tan(Wa/
4+b/2),e)/e;if(!e)return ye;c.invert=function(b,a){a=f-a;return[Math.atan2(b,a)/e,2*Math.atan(Math.pow(f/((0<e?1:0>e?-1:0)*Math.sqrt(b*b+a*a)),1/e))-rb]};return c}function xe(b,a){function c(b,a){a=f-a;return[a*Math.sin(e*b),f-a*Math.cos(e*b)]}var d=Math.cos(b),e=b===a?Math.sin(b):(d-Math.cos(a))/(a-b),f=d/e+b;if(1E-6>Xa(e))return Gb;c.invert=function(b,a){a=f-a;return[Math.atan2(b,a)/e,f-(0<e?1:0>e?-1:0)*Math.sqrt(b*b+a*a)]};return c}function ye(b,a){return[b,Math.log(Math.tan(Wa/4+a/2))]}function nf(b){var a=
ob(b),c=a.scale,d=a.translate,e=a.clipExtent,f;a.scale=function(){var b=c.apply(a,arguments);return b===a?f?a.clipExtent(null):a:b};a.translate=function(){var b=d.apply(a,arguments);return b===a?f?a.clipExtent(null):a:b};a.clipExtent=function(b){var g=e.apply(a,arguments);if(g===a){if(f=null==b){var h=Wa*c(),r=d();e([[r[0]-h,r[1]-h],[r[0]+h,r[1]+h]])}}else f&&(g=null);return g};return a.clipExtent(null)}function Bg(b,a){return[Math.log(Math.tan(Wa/4+a/2)),-b]}function Te(b){return b[0]}function Ad(b){return b[1]}
function ag(b){for(var a=b.length,c=[0,1],d=2,e=2;e<a;e++){for(;1<d&&0>=da(b[c[d-2]],b[c[d-1]],b[e]);)--d;c[d++]=e}return c.slice(0,d)}function of(b,a){return b[0]-a[0]||b[1]-a[1]}function bg(b,a,c){return(c[0]-a[0])*(b[1]-a[1])<(c[1]-a[1])*(b[0]-a[0])}function Bd(b,a,c,d){var e=b[0],f=c[0],g=a[0]-e,h=d[0]-f;b=b[1];c=c[1];a=a[1]-b;d=d[1]-c;f=(h*(b-c)-d*(e-f))/(d*g-h*a);return[e+f*g,b+f*a]}function ih(b){var a=b[0];b=b[b.length-1];return!(a[0]-b[0]||a[1]-b[1])}function Ca(){eg(this);this.edge=this.site=
this.circle=null}function Fb(b){var a=Dh.pop()||new Ca;a.site=b;return a}function Dd(b){Sd(b);Gf.remove(b);Dh.push(b);eg(b)}function Dg(b,a){var c=b.site,d=c.x,e=c.y,f=e-a;if(!f)return d;b=b.P;if(!b)return-Infinity;c=b.site;b=c.x;c=c.y;a=c-a;if(!a)return b;var g=b-d,h=1/f-1/a,r=g/a;return h?(-r+Math.sqrt(r*r-2*h*(g*g/(-2*a)-c+a/2+e-f/2)))/h+d:(d+b)/2}function pf(b){this.site=b;this.edges=[]}function Uc(b,a){return a.angle-b.angle}function Eg(){eg(this);this.x=this.y=this.arc=this.site=this.cy=null}
function Ue(b){var a=b.P,c=b.N;if(a&&c){var d=a.site;a=b.site;var e=c.site;if(d!==e){c=a.x;var f=a.y,g=d.x-c,h=d.y-f;d=e.x-c;e=e.y-f;var r=2*(g*e-h*d);if(!(-1E-12<=r)){var l=g*g+h*h,k=d*d+e*e;h=(e*l-h*k)/r;g=(g*k-d*l)/r;e=g+f;f=Gh.pop()||new Eg;f.arc=b;f.site=a;f.x=h+c;f.y=e+Math.sqrt(h*h+g*g);f.cy=e;b.circle=f;b=null;for(a=od._;a;)if(f.y<a.y||f.y===a.y&&f.x<=a.x)if(a.L)a=a.L;else{b=a.P;break}else if(a.R)a=a.R;else{b=a;break}od.insert(b,f);b||(sf=f)}}}}function Sd(b){var a=b.circle;a&&(a.P||(sf=a.N),
od.remove(a),Gh.push(a),eg(a),b.circle=null)}function Lf(b,a){var c=b.b;if(c)return!0;var d=b.a;c=a[0][0];var e=a[1][0],f=a[0][1];a=a[1][1];var g=b.l,h=b.r,r=g.x;g=g.y;var l=h.x;h=h.y;var k=(r+l)/2;if(h===g){if(k<c||k>=e)return;if(r>l){if(!d)d={x:k,y:f};else if(d.y>=a)return;c={x:k,y:a}}else{if(!d)d={x:k,y:a};else if(d.y<f)return;c={x:k,y:f}}}else{var u=(r-l)/(h-g);k=(g+h)/2-u*k;if(-1>u||1<u)if(r>l){if(!d)d={x:(f-k)/u,y:f};else if(d.y>=a)return;c={x:(a-k)/u,y:a}}else{if(!d)d={x:(a-k)/u,y:a};else if(d.y<
f)return;c={x:(f-k)/u,y:f}}else if(g<h){if(!d)d={x:c,y:u*c+k};else if(d.x>=e)return;c={x:e,y:u*e+k}}else{if(!d)d={x:e,y:u*e+k};else if(d.x<c)return;c={x:c,y:u*c+k}}}b.a=d;b.b=c;return!0}function qf(b,a){this.l=b;this.r=a;this.a=this.b=null}function rf(b,a,c,d){var e=new qf(b,a);Ff.push(e);c&&nd(e,b,a,c);d&&nd(e,a,b,d);yd[b.i].edges.push(new Ve(e,b,a));yd[a.i].edges.push(new Ve(e,a,b));return e}function ib(b,a,c){b=new qf(b,null);b.a=a;b.b=c;Ff.push(b);return b}function nd(b,a,c,d){b.a||b.b?b.l===
c?b.b=d:b.a=d:(b.a=d,b.l=a,b.r=c)}function Ve(b,a,c){var d=b.a,e=b.b;this.edge=b;this.site=a;this.angle=c?Math.atan2(c.y-a.y,c.x-a.x):b.l===a?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function dg(){this._=null}function eg(b){b.U=b.C=b.L=b.R=b.P=b.N=null}function md(b,a){var c=a.R,d=a.U;d?d.L===a?d.L=c:d.R=c:b._=c;c.U=d;a.U=c;a.R=c.L;a.R&&(a.R.U=a);c.L=a}function ce(b,a){var c=a.L,d=a.U;d?d.L===a?d.L=c:d.R=c:b._=c;c.U=d;a.U=c;a.L=c.R;a.L&&(a.L.U=a);c.R=a}function de(b){for(;b.L;)b=b.L;
return b}function dd(b,a){var c=b.sort(fg).pop(),d;Ff=[];yd=Array(b.length);Gf=new dg;for(od=new dg;;){var e=sf;if(c&&(!e||c.y<e.y||c.y===e.y&&c.x<e.x)){if(c.x!==d||c.y!==f){yd[c.i]=new pf(c);var f=d=void 0;e=c;for(var g=e.x,h=e.y,r=Gf._;r;){var l=Dg(r,h)-g;if(1E-6<l)r=r.L;else{var k=r;var u=h;var t=k.N;t?u=Dg(t,u):(k=k.site,u=k.y===u?k.x:Infinity);u=g-u;if(1E-6<u){if(!r.R){f=r;break}r=r.R}else{-1E-6<l?(f=r.P,d=r):-1E-6<u?(f=r,d=r.N):f=d=r;break}}}l=Fb(e);Gf.insert(f,l);if(f||d)if(f===d)Sd(f),d=Fb(f.site),
Gf.insert(l,d),l.edge=d.edge=rf(f.site,l.site),Ue(f),Ue(d);else if(d){Sd(f);Sd(d);g=f.site;r=g.x;u=g.y;k=e.x-r;t=e.y-u;h=d.site;var m=h.x-r,n=h.y-u,v=2*(k*n-t*m),w=k*k+t*t,y=m*m+n*n;r={x:(n*w-t*y)/v+r,y:(k*y-m*w)/v+u};nd(d.edge,g,h,r);l.edge=rf(g,e,null,r);d.edge=rf(e,h,null,r);Ue(f);Ue(d)}else l.edge=rf(f.site,l.site);d=c.x;f=c.y}c=b.pop()}else if(e){h=e.arc;e=h.circle;g=e.x;r=e.cy;e={x:g,y:r};k=h.P;u=h.N;l=[h];Dd(h);for(h=k;h.circle&&1E-6>Xa(g-h.circle.x)&&1E-6>Xa(r-h.circle.cy);)k=h.P,l.unshift(h),
Dd(h),h=k;l.unshift(h);Sd(h);for(k=u;k.circle&&1E-6>Xa(g-k.circle.x)&&1E-6>Xa(r-k.circle.cy);)u=k.N,l.push(k),Dd(k),k=u;l.push(k);Sd(k);r=l.length;for(g=1;g<r;++g)k=l[g],h=l[g-1],nd(k.edge,h.site,k.site,e);h=l[0];k=l[r-1];k.edge=rf(h.site,k.site,null,e);Ue(h);Ue(k)}else break}if(a){b=Ff;c=se(a[0][0],a[0][1],a[1][0],a[1][1]);for(d=b.length;d--;)if(f=b[d],!Lf(f,a)||!c(f)||1E-6>Xa(f.a.x-f.b.x)&&1E-6>Xa(f.a.y-f.b.y))f.a=f.b=null,b.splice(d,1);b=a[0][0];c=a[1][0];d=a[0][1];a=a[1][1];g=yd;for(h=g.length;h--;)if((r=
g[h])&&r.prepare())for(k=r.edges,t=k.length,u=0;u<t;)if(m=k[u].end(),e=m.x,l=m.y,n=k[++u%t].start(),f=n.x,n=n.y,1E-6<Xa(e-f)||1E-6<Xa(l-n))k.splice(u,0,new Ve(ib(r.site,m,1E-6>Xa(e-b)&&1E-6<a-l?{x:b,y:1E-6>Xa(f-b)?n:a}:1E-6>Xa(l-a)&&1E-6<c-e?{x:1E-6>Xa(n-a)?f:c,y:a}:1E-6>Xa(e-c)&&1E-6<l-d?{x:c,y:1E-6>Xa(f-c)?n:d}:1E-6>Xa(l-d)&&1E-6<e-b?{x:1E-6>Xa(n-d)?f:b,y:d}:null),r.site,null)),++t}a={cells:yd,edges:Ff};Gf=od=Ff=yd=null;return a}function fg(b,a){return a.y-b.y||a.x-b.x}function qb(b){return b.x}
function Hh(b){return b.y}function tf(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function ee(b,a,c,d,e,f){if(!b(a,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f);a=a.nodes;a[0]&&ee(b,a[0],c,d,g,h);a[1]&&ee(b,a[1],g,d,e,h);a[2]&&ee(b,a[2],c,h,g,f);a[3]&&ee(b,a[3],g,h,e,f)}}function lc(b,a,c,d,e,f,g){var h=Infinity,r;(function Xe(b,l,k,u,t){if(!(l>f||k>g||u<d||t<e)){if(m=b.point){var m,n=a-b.x,v=c-b.y;n=n*n+v*v;n<h&&(n=Math.sqrt(h=n),d=a-n,e=c-n,f=a+n,g=c+n,r=m)}m=b.nodes;n=.5*(l+u);v=.5*(k+t);for(var w=
(c>=v)<<1|a>=n,y=w+4;w<y;++w)if(b=m[w&3])switch(w&3){case 0:Xe(b,l,k,n,v);break;case 1:Xe(b,n,k,u,v);break;case 2:Xe(b,l,v,n,t);break;case 3:Xe(b,n,v,u,t)}}})(b,d,e,f,g);return r}function Ab(b,a){b=S.rgb(b);a=S.rgb(a);var c=b.r,d=b.g,e=b.b,f=a.r-c,g=a.g-d,h=a.b-e;return function(b){return"#"+wa(Math.round(c+f*b))+wa(Math.round(d+g*b))+wa(Math.round(e+h*b))}}function hc(b,a){var c={},d={},e;for(e in b)e in a?c[e]=fe(b[e],a[e]):d[e]=b[e];for(e in a)e in b||(d[e]=a[e]);return function(b){for(e in c)d[e]=
c[e](b);return d}}function pd(b,a){b=+b;a=+a;return function(c){return b*(1-c)+a*c}}function qd(b,a){var c=Cg.lastIndex=yi.lastIndex=0,d,e,f,g=-1,h=[],r=[];b+="";for(a+="";(d=Cg.exec(b))&&(e=yi.exec(a));)(f=e.index)>c&&(f=a.slice(c,f),h[g]?h[g]+=f:h[++g]=f),(d=d[0])===(e=e[0])?h[g]?h[g]+=e:h[++g]=e:(h[++g]=null,r.push({i:g,x:pd(d,e)})),c=yi.lastIndex;c<a.length&&(f=a.slice(c),h[g]?h[g]+=f:h[++g]=f);return 2>h.length?r[0]?(a=r[0].x,function(b){return a(b)+""}):function(){return a}:(a=r.length,function(b){for(var c=
0,d;c<a;++c)h[(d=r[c]).i]=d.x(b);return h.join("")})}function fe(b,a){for(var c=S.interpolators.length,d;0<=--c&&!(d=S.interpolators[c](b,a)););return d}function Fg(b,a){var c=[],d=[],e=b.length,f=a.length,g=Math.min(b.length,a.length),h;for(h=0;h<g;++h)c.push(fe(b[h],a[h]));for(;h<e;++h)d[h]=b[h];for(;h<f;++h)d[h]=a[h];return function(b){for(h=0;h<g;++h)d[h]=c[h](b);return d}}function ed(b){return function(a){return 0>=a?0:1<=a?1:b(a)}}function jc(b){return function(a){return 1-b(1-a)}}function Jf(b){return function(a){return.5*
(.5>a?b(2*a):2-b(2-2*a))}}function Ac(b){return b*b}function lh(b){return b*b*b}function dc(b){if(0>=b)return 0;if(1<=b)return 1;var a=b*b,c=a*b;return 4*(.5>b?c:3*(b-a)+c-.75)}function gg(b){return 1-Math.cos(b*rb)}function ge(b){return Math.pow(2,10*(b-1))}function Ii(b){return 1-Math.sqrt(1-b*b)}function he(b){return b<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+.9375:7.5625*(b-=2.625/2.75)*b+.984375}function Kh(b,a){a-=b;return function(c){return Math.round(b+
a*c)}}function uf(b){var a=[b.a,b.b],c=[b.c,b.d],d=ie(a),e=a[0]*c[0]+a[1]*c[1],f=-e;c[0]+=f*a[0];c[1]+=f*a[1];f=ie(c)||0;a[0]*c[1]<c[0]*a[1]&&(a[0]*=-1,a[1]*=-1,d*=-1,e*=-1);this.rotate=(d?Math.atan2(a[1],a[0]):Math.atan2(-c[0],c[1]))*Tb;this.translate=[b.e,b.f];this.scale=[d,f];this.skew=f?Math.atan2(e,f)*Tb:0}function ie(b){var a=Math.sqrt(b[0]*b[0]+b[1]*b[1]);a&&(b[0]/=a,b[1]/=a);return a}function Cc(b){return b.length?b.pop()+",":""}function Mc(b,a,c,d){b[0]!==a[0]||b[1]!==a[1]?(c=c.push("translate(",
null,",",null,")"),d.push({i:c-4,x:pd(b[0],a[0])},{i:c-2,x:pd(b[1],a[1])})):(a[0]||a[1])&&c.push("translate("+a+")")}function ch(b,a,c,d){b!==a?(180<b-a?a+=360:180<a-b&&(b+=360),d.push({i:c.push(Cc(c)+"rotate(",null,")")-2,x:pd(b,a)})):a&&c.push(Cc(c)+"rotate("+a+")")}function wi(b,a,c,d){b!==a?d.push({i:c.push(Cc(c)+"skewX(",null,")")-2,x:pd(b,a)}):a&&c.push(Cc(c)+"skewX("+a+")")}function fi(b,a,c,d){b[0]!==a[0]||b[1]!==a[1]?(c=c.push(Cc(c)+"scale(",null,",",null,")"),d.push({i:c-4,x:pd(b[0],a[0])},
{i:c-2,x:pd(b[1],a[1])})):1===a[0]&&1===a[1]||c.push(Cc(c)+"scale("+a+")")}function Sa(b,a){var c=[],d=[];b=S.transform(b);a=S.transform(a);Mc(b.translate,a.translate,c,d);ch(b.rotate,a.rotate,c,d);wi(b.skew,a.skew,c,d);fi(b.scale,a.scale,c,d);b=a=null;return function(b){for(var a=-1,e=d.length,f;++a<e;)c[(f=d[a]).i]=f.x(b);return c.join("")}}function Li(b,a){a=(a-=b=+b)||1/a;return function(c){return(c-b)/a}}function Ae(b,a){a=(a-=b=+b)||1/a;return function(c){return Math.max(0,Math.min(1,(c-b)/
a))}}function Qh(b){var a=b.source;b=b.target;var c=b;if(a===c)var d=a;else{d=De(a);c=De(c);for(var e=d.pop(),f=c.pop(),g=null;e===f;)g=e,e=d.pop(),f=c.pop();d=g}for(c=[a];a!==d;)a=a.parent,c.push(a);for(a=c.length;b!==d;)c.splice(a,0,b),b=b.parent;return c}function De(b){for(var a=[],c=b.parent;null!=c;)a.push(b),b=c,c=c.parent;a.push(b);return a}function We(b){b.fixed|=2}function nh(b){b.fixed&=-7}function kh(b){b.fixed|=4;b.px=b.x;b.py=b.y}function Ni(b){b.fixed&=-5}function ig(b,a,c){var d=0,
e=0;b.charge=0;if(!b.leaf)for(var f=b.nodes,g=f.length,h=-1,r;++h<g;)r=f[h],null!=r&&(ig(r,a,c),b.charge+=r.charge,d+=r.charge*r.cx,e+=r.charge*r.cy);b.point&&(b.leaf||(b.point.x+=Math.random()-.5,b.point.y+=Math.random()-.5),a*=c[b.point.index],b.charge+=b.pointCharge=a,d+=a*b.point.x,e+=a*b.point.y);b.cx=d/b.charge;b.cy=e/b.charge}function rc(b,a){S.rebind(b,a,"sort","children","value");b.nodes=b;b.links=xb;return b}function be(b,a){for(var c=[b];null!=(b=c.pop());)if(a(b),(e=b.children)&&(d=e.length))for(var d,
e;0<=--d;)c.push(e[d])}function Ob(b,a){for(var c=[b],d=[];null!=(b=c.pop());)if(d.push(b),(f=b.children)&&(e=f.length)){b=-1;for(var e,f;++b<e;)c.push(f[b])}for(;null!=(b=d.pop());)a(b)}function Qe(b){return b.children}function dh(b){return b.value}function Eb(b,a){return a.value-b.value}function xb(b){return S.merge(b.map(function(b){return(b.children||[]).map(function(a){return{source:b,target:a}})}))}function $d(b){return b.x}function Bi(b){return b.y}function jg(b,a,c){b.y0=a;b.y=c}function Ee(b){return S.range(b.length)}
function qh(b){var a=-1;b=b[0].length;for(var c=[];++a<b;)c[a]=0;return c}function Ci(b){for(var a=1,c=0,d=b[0][1],e,f=b.length;a<f;++a)(e=b[a][1])>d&&(c=a,d=e);return c}function ej(b){return b.reduce(Mg,0)}function Mg(b,a){return b+a[1]}function ki(b,a){return Rh(b,Math.ceil(Math.log(a.length)/Math.LN2+1))}function Rh(b,a){var c=-1,d=+b[0];b=(b[1]-d)/a;for(var e=[];++c<=a;)e[c]=b*c+d;return e}function li(b){return[S.min(b),S.max(b)]}function Ng(b,a){return b.value-a.value}function Di(b,a){var c=
b._pack_next;b._pack_next=a;a._pack_prev=b;a._pack_next=c;c._pack_prev=a}function Sh(b,a){b._pack_next=a;a._pack_prev=b}function mi(b,a){var c=a.x-b.x,d=a.y-b.y;b=b.r+a.r;return.999*b*b>c*c+d*d}function ug(b){function a(b){d=Math.min(b.x-b.r,d);e=Math.max(b.x+b.r,e);f=Math.min(b.y-b.r,f);g=Math.max(b.y+b.r,g)}if((c=b.children)&&(k=c.length)){var c,d=Infinity,e=-Infinity,f=Infinity,g=-Infinity,h,r,l,k;c.forEach(sd);var u=c[0];u.x=-u.r;u.y=0;a(u);if(1<k){var t=c[1];t.x=t.r;t.y=0;a(t);if(2<k){var m=
c[2];vf(u,t,m);a(m);Di(u,m);u._pack_prev=m;Di(m,t);t=u._pack_next;for(h=3;h<k;h++){vf(u,t,m=c[h]);var n=0,v=1,w=1;for(r=t._pack_next;r!==t;r=r._pack_next,v++)if(mi(r,m)){n=1;break}if(1==n)for(l=u._pack_prev;l!==r._pack_prev&&!mi(l,m);l=l._pack_prev,w++);n?(v<w||v==w&&t.r<u.r?Sh(u,t=r):Sh(u=l,t),h--):(Di(u,m),t=m,a(m))}}}u=(d+e)/2;t=(f+g)/2;for(h=r=0;h<k;h++)m=c[h],m.x-=u,m.y-=t,r=Math.max(r,m.r+Math.sqrt(m.x*m.x+m.y*m.y));b.r=r;c.forEach($e)}}function sd(b){b._pack_next=b._pack_prev=b}function $e(b){delete b._pack_next;
delete b._pack_prev}function Rg(b,a,c,d){var e=b.children;b.x=a+=d*b.x;b.y=c+=d*b.y;b.r*=d;if(e){b=-1;for(var f=e.length;++b<f;)Rg(e[b],a,c,d)}}function vf(b,a,c){var d=b.r+c.r,e=a.x-b.x,f=a.y-b.y;if(d&&(e||f)){var g=a.r+c.r,h=e*e+f*f;g*=g;d*=d;a=.5+(d-g)/(2*h);g=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=b.x+a*e+g*f;c.y=b.y+a*f-g*e}else c.x=b.x+d,c.y=b.y}function vh(b,a){return b.parent==a.parent?1:2}function og(b){var a=b.children;return a.length?a[0]:b.t}function wf(b){var a=b.children,
c;return(c=a.length)?a[c-1]:b.t}function ke(b){return 1+S.max(b,function(b){return b.y})}function ta(b){return b.reduce(function(b,a){return b+a.x},0)/b.length}function La(b){var a=b.children;return a&&a.length?La(a[0]):b}function Vd(b){var a=b.children,c;return a&&(c=a.length)?Vd(a[c-1]):b}function Rf(b){return{x:b.x,y:b.y,dx:b.dx,dy:b.dy}}function oi(b,a){var c=b.x+a[3],d=b.y+a[0],e=b.dx-a[1]-a[3];b=b.dy-a[0]-a[2];0>e&&(c+=e/2,e=0);0>b&&(d+=b/2,b=0);return{x:c,y:d,dx:e,dy:b}}function Ha(b){var a=
b[0];b=b[b.length-1];return a<b?[a,b]:[b,a]}function mb(b){return b.rangeExtent?b.rangeExtent():Ha(b.range())}function lb(b,a,c,d){var e=c(b[0],b[1]),f=d(a[0],a[1]);return function(b){return f(e(b))}}function hd(b,a){var c=0,d=b.length-1,e=b[c],f=b[d];if(f<e){var g=c;c=d;d=g;g=e;e=f;f=g}b[c]=a.floor(e);b[d]=a.ceil(f);return b}function kg(b){return b?{floor:function(a){return Math.floor(a/b)*b},ceil:function(a){return Math.ceil(a/b)*b}}:mf}function Bb(b,a,c,d){var e=[],f=[],g=0,h=Math.min(b.length,
a.length)-1;b[h]<b[0]&&(b=b.slice().reverse(),a=a.slice().reverse());for(;++g<=h;)e.push(c(b[g-1],b[g])),f.push(d(a[g-1],a[g]));return function(a){var c=S.bisect(b,a,1,h)-1;return f[c](e[c](a))}}function le(b,a,c,d){function e(){var e=2<Math.min(b.length,a.length)?Bb:lb,r=d?Ae:Li;g=e(b,a,r,c);h=e(a,b,r,fe);return f}function f(b){return g(b)}var g,h;f.invert=function(b){return h(b)};f.domain=function(a){if(!arguments.length)return b;b=a.map(Number);return e()};f.range=function(b){if(!arguments.length)return a;
a=b;return e()};f.rangeRound=function(b){return f.range(b).interpolate(Kh)};f.clamp=function(b){if(!arguments.length)return d;d=b;return e()};f.interpolate=function(b){if(!arguments.length)return c;c=b;return e()};f.ticks=function(a){return S.range.apply(S,Wd(b,a))};f.tickFormat=function(a,c){return sb(b,a,c)};f.nice=function(a){Vf(b,a);return e()};f.copy=function(){return le(b,a,c,d)};return e()}function xf(b,a){return S.rebind(b,a,"range","rangeRound","interpolate","clamp")}function Vf(b,a){hd(b,
kg(Wd(b,a)[2]));hd(b,kg(Wd(b,a)[2]));return b}function Wd(b,a){null==a&&(a=10);b=Ha(b);var c=b[1]-b[0],d=Math.pow(10,Math.floor(Math.log(c/a)/Math.LN10));a=a/c*d;.15>=a?d*=10:.35>=a?d*=5:.75>=a&&(d*=2);b[0]=Math.ceil(b[0]/d)*d;b[1]=Math.floor(b[1]/d)*d+.5*d;b[2]=d;return b}function sb(b,a,c){b=Wd(b,a);if(c){a=ng.exec(c);a.shift();if("s"===a[8]){var d=S.formatPrefix(Math.max(Xa(b[0]),Xa(b[1])));a[7]||(a[7]="."+Sf(d.scale(b[2])));a[8]="f";c=S.format(a.join(""));return function(b){return c(d.scale(b))+
d.symbol}}a[7]||(a[7]="."+Pi(a[8],b));c=a.join("")}else c=",."+Sf(b[2])+"f";return S.format(c)}function Sf(b){return-Math.floor(Math.log(b)/Math.LN10+.01)}function Pi(b,a){var c=Sf(a[2]);return b in Tc?Math.abs(c-Sf(Math.max(Xa(a[0]),Xa(a[1]))))+ +("e"!==b):c-2*("%"===b)}function Gd(b,a,c,d){function e(b){return(c?Math.log(0>b?0:b):-Math.log(0<b?0:-b))/Math.log(a)}function f(b){return c?Math.pow(a,b):-Math.pow(a,-b)}function g(a){return b(e(a))}g.invert=function(a){return f(b.invert(a))};g.domain=
function(a){if(!arguments.length)return d;c=0<=a[0];b.domain((d=a.map(Number)).map(e));return g};g.base=function(c){if(!arguments.length)return a;a=+c;b.domain(d.map(e));return g};g.nice=function(){var a=hd(d.map(e),c?Math:gh);b.domain(a);d=a.map(f);return g};g.ticks=function(){var b=Ha(d),g=[],h=b[0];b=b[1];var r=Math.floor(e(h)),l=Math.ceil(e(b)),k=a%1?2:a;if(isFinite(l-r)){if(c){for(;r<l;r++)for(var u=1;u<k;u++)g.push(f(r)*u);g.push(f(r))}else for(g.push(f(r));r++<l;)for(u=k-1;0<u;u--)g.push(f(r)*
u);for(r=0;g[r]<h;r++);for(l=g.length;g[l-1]>b;l--);g=g.slice(r,l)}return g};g.tickFormat=function(b,c){if(!arguments.length)return Rd;2>arguments.length?c=Rd:"function"!==typeof c&&(c=S.format(c));var d=Math.max(1,a*b/g.ticks().length);return function(b){var g=b/f(Math.round(e(b)));g*a<a-.5&&(g*=a);return g<=d?c(b):""}};g.copy=function(){return Gd(b.copy(),a,c,d)};return xf(g,b)}function Fe(b,a,c){function d(a){return b(e(a))}var e=rd(a),f=rd(1/a);d.invert=function(a){return f(b.invert(a))};d.domain=
function(a){if(!arguments.length)return c;b.domain((c=a.map(Number)).map(e));return d};d.ticks=function(b){return S.range.apply(S,Wd(c,b))};d.tickFormat=function(b,a){return sb(c,b,a)};d.nice=function(b){return d.domain(Vf(c,b))};d.exponent=function(g){if(!arguments.length)return a;e=rd(a=g);f=rd(1/a);b.domain(c.map(e));return d};d.copy=function(){return Fe(b.copy(),a,c)};return xf(d,b)}function rd(b){return function(a){return 0>a?-Math.pow(-a,b):Math.pow(a,b)}}function vg(b,a){function c(c){return f[((e.get(c)||
("range"===a.t?e.set(c,b.push(c)):NaN))-1)%f.length]}function d(a,c){return S.range(b.length).map(function(b){return a+c*b})}var e,f,g;c.domain=function(d){if(!arguments.length)return b;b=[];e=new t;for(var f=-1,g=d.length,h;++f<g;)e.has(h=d[f])||e.set(h,b.push(h));return c[a.t].apply(c,a.a)};c.range=function(b){if(!arguments.length)return f;f=b;g=0;a={t:"range",a:arguments};return c};c.rangePoints=function(e,h){2>arguments.length&&(h=0);var r=e[0],l=e[1];l=2>b.length?(r=(r+l)/2,0):(l-r)/(b.length-
1+h);f=d(r+l*h/2,l);g=0;a={t:"rangePoints",a:arguments};return c};c.rangeRoundPoints=function(e,h){2>arguments.length&&(h=0);var r=e[0],l=e[1],k=2>b.length?(r=l=Math.round((r+l)/2),0):(l-r)/(b.length-1+h)|0;f=d(r+Math.round(k*h/2+(l-r-(b.length-1+h)*k)/2),k);g=0;a={t:"rangeRoundPoints",a:arguments};return c};c.rangeBands=function(e,h,r){2>arguments.length&&(h=0);3>arguments.length&&(r=h);var l=e[1]<e[0],k=e[l-0],u=(e[1-l]-k)/(b.length-h+2*r);f=d(k+u*r,u);l&&f.reverse();g=u*(1-h);a={t:"rangeBands",
a:arguments};return c};c.rangeRoundBands=function(e,h,r){2>arguments.length&&(h=0);3>arguments.length&&(r=h);var l=e[1]<e[0],k=e[l-0],u=e[1-l],t=Math.floor((u-k)/(b.length-h+2*r));f=d(k+Math.round((u-k-(b.length-h)*t)/2),t);l&&f.reverse();g=Math.round(t*(1-h));a={t:"rangeRoundBands",a:arguments};return c};c.rangeBand=function(){return g};c.rangeExtent=function(){return Ha(a.a[0])};c.copy=function(){return vg(b,a)};return c.domain(b)}function tc(b,a){function c(){var c=0,f=a.length;for(e=[];++c<f;)e[c-
1]=S.quantile(b,c/f);return d}function d(b){if(!isNaN(b=+b))return a[S.bisect(e,b)]}var e;d.domain=function(a){if(!arguments.length)return b;b=a.map(m).filter(h).sort(k);return c()};d.range=function(b){if(!arguments.length)return a;a=b;return c()};d.quantiles=function(){return e};d.invertExtent=function(c){c=a.indexOf(c);return 0>c?[NaN,NaN]:[0<c?e[c-1]:b[0],c<e.length?e[c]:b[b.length-1]]};d.copy=function(){return tc(b,a)};return c()}function Je(b,a,c){function d(a){return c[Math.max(0,Math.min(g,
Math.floor(f*(a-b))))]}function e(){f=c.length/(a-b);g=c.length-1;return d}var f,g;d.domain=function(c){if(!arguments.length)return[b,a];b=+c[0];a=+c[c.length-1];return e()};d.range=function(b){if(!arguments.length)return c;c=b;return e()};d.invertExtent=function(a){a=c.indexOf(a);a=0>a?NaN:a/f+b;return[a,a+1/f]};d.copy=function(){return Je(b,a,c)};return e()}function Yh(b,a){function c(c){if(c<=c)return a[S.bisect(b,c)]}c.domain=function(a){if(!arguments.length)return b;b=a;return c};c.range=function(b){if(!arguments.length)return a;
a=b;return c};c.invertExtent=function(c){c=a.indexOf(c);return[b[c-1],b[c]]};c.copy=function(){return Yh(b,a)};return c}function Ge(b){function a(b){return+b}a.invert=a;a.domain=a.range=function(c){if(!arguments.length)return b;b=c.map(a);return a};a.ticks=function(a){return S.range.apply(S,Wd(b,a))};a.tickFormat=function(a,c){return sb(b,a,c)};a.copy=function(){return Ge(b)};return a}function fj(){return 0}function wh(b){return b.innerRadius}function Vc(b){return b.outerRadius}function He(b){return b.startAngle}
function lg(b){return b.endAngle}function Tf(b){return b&&b.padAngle}function Ke(b,a,c,d){return 0<(b-c)*a-(a-d)*b?0:1}function Td(b,a,c,d,e){var f=b[0]-a[0],g=b[1]-a[1];e=(e?d:-d)/Math.sqrt(f*f+g*g);g*=e;f*=-e;var h=b[0]+g,r=b[1]+f,l=a[0]+g,k=a[1]+f;b=(h+l)/2;a=(r+k)/2;e=l-h;var u=k-r,t=e*e+u*u;d=c-d;k=h*k-l*r;var m=(0>u?-1:1)*Math.sqrt(Math.max(0,d*d*t-k*k));h=(k*u-e*m)/t;r=(-k*e-u*m)/t;l=(k*u+e*m)/t;e=(-k*e+u*m)/t;u=h-b;t=r-a;b=l-b;a=e-a;u*u+t*t>b*b+a*a&&(h=l,r=e);return[[h-g,r-f],[h*c/d,r*c/d]]}
function pi(b){function a(a){function g(){r.push("M",f(b(l),h))}for(var r=[],l=[],k=-1,u=a.length,t,m=Ja(c),n=Ja(d);++k<u;)e.call(this,t=a[k],k)?l.push([+m.call(this,t,k),+n.call(this,t,k)]):l.length&&(g(),l=[]);l.length&&g();return r.length?r.join(""):null}var c=Te,d=Ad,e=xg,f=Ec,g=f.key,h=.7;a.x=function(b){if(!arguments.length)return c;c=b;return a};a.y=function(b){if(!arguments.length)return d;d=b;return a};a.defined=function(b){if(!arguments.length)return e;e=b;return a};a.interpolate=function(b){if(!arguments.length)return g;
g="function"===typeof b?f=b:(f=fh.get(b)||Ec).key;return a};a.tension=function(b){if(!arguments.length)return h;h=b;return a};return a}function Ec(b){return 1<b.length?b.join("L"):b+"Z"}function Qi(b){return b.join("L")+"Z"}function Zh(b){for(var a=0,c=b.length,d=b[0],e=[d[0],",",d[1]];++a<c;)e.push("V",(d=b[a])[1],"H",d[0]);return e.join("")}function pg(b){for(var a=0,c=b.length,d=b[0],e=[d[0],",",d[1]];++a<c;)e.push("H",(d=b[a])[0],"V",d[1]);return e.join("")}function Uf(b,a){if(1>a.length||b.length!=
a.length&&b.length!=a.length+2)return Ec(b);var c=b.length!=a.length,d="",e=b[0],f=b[1],g=a[0],h=g,r=1;c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=b[1],r=2);if(1<a.length)for(h=a[1],f=b[r],r++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1],e=2;e<a.length;e++,r++)f=b[r],h=a[e],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];c&&(b=b[r],d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+b[0]+","+b[1]);return d}function rg(b,a){var c=[];a=
(1-a)/2;for(var d,e=b[0],f=b[1],g=1,h=b.length;++g<h;)d=e,e=f,f=b[g],c.push([a*(f[0]-d[0]),a*(f[1]-d[1])]);return c}function Ld(b){if(3>b.length)return Ec(b);var a=1,c=b.length,d=b[0],e=d[0],f=d[1],g=[e,e,e,(d=b[1])[0]],h=[f,f,f,d[1]];e=[e,",",f,"L",me(Kc,g),",",me(Kc,h)];for(b.push(b[c-1]);++a<=c;)d=b[a],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),Sb(e,g,h);b.pop();e.push("L",d);return e.join("")}function me(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]+b[3]*a[3]}function Sb(b,a,c){b.push("C",me(ci,
a),",",me(ci,c),",",me(Eh,a),",",me(Eh,c),",",me(Kc,a),",",me(Kc,c))}function zf(b,a){return(a[1]-b[1])/(a[0]-b[0])}function yc(b){for(var a,c=-1,d=b.length,e,f;++c<d;)a=b[c],e=a[0],f=a[1]-rb,a[0]=e*Math.cos(f),a[1]=e*Math.sin(f);return b}function kf(b){function a(a){function r(){t.push("M",h(b(n),u),k,l(b(m.reverse()),u),"Z")}for(var t=[],m=[],n=[],v=-1,w=a.length,y,z=Ja(c),A=Ja(e),x=c===d?function(){return D}:Ja(d),B=e===f?function(){return C}:Ja(f),D,C;++v<w;)g.call(this,y=a[v],v)?(m.push([D=+z.call(this,
y,v),C=+A.call(this,y,v)]),n.push([+x.call(this,y,v),+B.call(this,y,v)])):m.length&&(r(),m=[],n=[]);m.length&&r();return t.length?t.join(""):null}var c=Te,d=Te,e=0,f=Ad,g=xg,h=Ec,r=h.key,l=h,k="L",u=.7;a.x=function(b){if(!arguments.length)return d;c=d=b;return a};a.x0=function(b){if(!arguments.length)return c;c=b;return a};a.x1=function(b){if(!arguments.length)return d;d=b;return a};a.y=function(b){if(!arguments.length)return f;e=f=b;return a};a.y0=function(b){if(!arguments.length)return e;e=b;return a};
a.y1=function(b){if(!arguments.length)return f;f=b;return a};a.defined=function(b){if(!arguments.length)return g;g=b;return a};a.interpolate=function(b){if(!arguments.length)return r;r="function"===typeof b?h=b:(h=fh.get(b)||Ec).key;l=h.reverse||h;k=h.closed?"M":"L";return a};a.tension=function(b){if(!arguments.length)return u;u=b;return a};return a}function Le(b){return b.radius}function Jd(b){return[b.x,b.y]}function Ti(b){return function(){var a=b.apply(this,arguments),c=a[0];a=a[1]-rb;return[c*
Math.cos(a),c*Math.sin(a)]}}function qi(){return 64}function Ui(){return"circle"}function Gi(b){b=Math.sqrt(b/Wa);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Zi(b){return function(){var a,c,d;(a=this[b])&&(d=a[c=a.active])&&(d.timer.c=null,d.timer.t=NaN,--a.count?delete a[c]:delete this[b],a.active+=.5,d.event&&d.event.interrupt.call(this,this.__data__,d.index))}}function Tg(b,a,c){yb(b,Rb);b.namespace=a;b.id=c;return b}function Me(b,a,c,d){var e=b.id,f=b.namespace;
return Y(b,"function"===typeof c?function(b,g,h){b[f][e].tween.set(a,d(c.call(b,b.__data__,g,h)))}:(c=d(c),function(b){b[f][e].tween.set(a,c)}))}function Wf(b){null==b&&(b="");return function(){this.textContent=b}}function yf(b){return null==b?"__transition__":"__transition_"+b+"__"}function Xf(b,a,c,d,e){function f(b){var a=l.delay;v.t=a+n;if(a<=b)return g(b-a);v.c=g}function g(c){var e=r.active,f=r[e];f&&(f.timer.c=null,f.timer.t=NaN,--r.count,delete r[e],f.event&&f.event.interrupt.call(b,b.__data__,
f.index));for(var g in r)+g<d&&(e=r[g],e.timer.c=null,e.timer.t=NaN,--r.count,delete r[g]);v.c=h;zb(function(){v.c&&h(c||1)&&(v.c=null,v.t=NaN);return 1},0,n);r.active=d;l.event&&l.event.start.call(b,b.__data__,a);m=[];l.tween.forEach(function(c,d){(d=d.call(b,b.__data__,a))&&m.push(d)});u=l.ease;k=l.duration}function h(e){e/=k;for(var f=u(e),g=m.length;0<g;)m[--g].call(b,f);if(1<=e)return l.event&&l.event.end.call(b,b.__data__,a),--r.count?delete r[d]:delete b[c],1}var r=b[c]||(b[c]={active:0,count:0}),
l=r[d],k,u,m;if(!l){var n=e.time;var v=zb(f,0,n);l=r[d]={tween:new t,time:n,timer:v,delay:e.delay,duration:e.duration,ease:e.ease,index:a};e=null;++r.count}}function xh(b,a,c){b.attr("transform",function(b){var d=a(b);return"translate("+(isFinite(d)?d:c(b))+",0)"})}function yh(b,a,c){b.attr("transform",function(b){var d=a(b);return"translate(0,"+(isFinite(d)?d:c(b))+")"})}function qg(b){return b.toISOString()}function ri(b,a,c){function d(a){return b(a)}function e(b,c){var d=(b[1]-b[0])/c,e=S.bisect(Bc,
d);return e==Bc.length?[a.year,Wd(b.map(function(b){return b/31536E6}),c)[2]]:e?a[d/Bc[e-1]<Bc[e]/d?e-1:e]:[Nf,Wd(b,c)[2]]}d.invert=function(a){return Yf(b.invert(a))};d.domain=function(a){if(!arguments.length)return b.domain().map(Yf);b.domain(a);return d};d.nice=function(b,a){function c(c){return!isNaN(c)&&!b.range(c,Yf(+c+1),a).length}var f=d.domain(),g=Ha(f);if(g=null==b?e(g,10):"number"===typeof b&&e(g,b))b=g[0],a=g[1];return d.domain(hd(f,1<a?{floor:function(a){for(;c(a=b.floor(a));)a=Yf(a-
1);return a},ceil:function(a){for(;c(a=b.ceil(a));)a=Yf(+a+1);return a}}:b))};d.ticks=function(b,a){var c=Ha(d.domain()),f=null==b?e(c,10):"number"===typeof b?e(c,b):!b.range&&[{range:b},a];f&&(b=f[0],a=f[1]);return b.range(c[0],Yf(+c[1]+1),1>a?1:a)};d.tickFormat=function(){return c};d.copy=function(){return ri(b.copy(),a,c)};return xf(d,b)}function Yf(b){return new Date(b)}function id(b){return JSON.parse(b.responseText)}function Ri(b){var a=Dc.createRange();a.selectNode(Dc.body);return a.createContextualFragment(b.responseText)}
var S={version:"3.5.17"},ne=[].slice,Kd=function(b){return ne.call(b)},Dc=this.document;if(Dc)try{Kd(Dc.documentElement.childNodes)[0].nodeType}catch(Ye){Kd=function(b){for(var a=b.length,c=Array(a);a--;)c[a]=b[a];return c}}Date.now||(Date.now=function(){return+new Date});if(Dc)try{Dc.createElement("DIV").style.setProperty("opacity",0,"")}catch(Ye){var rh=this.Element.prototype,sh=rh.setAttribute,Ia=rh.setAttributeNS,ni=this.CSSStyleDeclaration.prototype,Ei=ni.setProperty;rh.setAttribute=function(b,
a){sh.call(this,b,a+"")};rh.setAttributeNS=function(b,a,c){Ia.call(this,b,a,c+"")};ni.setProperty=function(b,a,c){Ei.call(this,b,a+"",c)}}S.ascending=k;S.descending=function(b,a){return a<b?-1:a>b?1:a>=b?0:NaN};S.min=function(b,a){var c=-1,d=b.length,e;if(1===arguments.length){for(;++c<d;)if(null!=(e=b[c])&&e>=e){var f=e;break}for(;++c<d;)null!=(e=b[c])&&f>e&&(f=e)}else{for(;++c<d;)if(null!=(e=a.call(b,b[c],c))&&e>=e){f=e;break}for(;++c<d;)null!=(e=a.call(b,b[c],c))&&f>e&&(f=e)}return f};S.max=function(b,
a){var c=-1,d=b.length,e;if(1===arguments.length){for(;++c<d;)if(null!=(e=b[c])&&e>=e){var f=e;break}for(;++c<d;)null!=(e=b[c])&&e>f&&(f=e)}else{for(;++c<d;)if(null!=(e=a.call(b,b[c],c))&&e>=e){f=e;break}for(;++c<d;)null!=(e=a.call(b,b[c],c))&&e>f&&(f=e)}return f};S.extent=function(b,a){var c=-1,d=b.length,e,f;if(1===arguments.length){for(;++c<d;)if(null!=(e=b[c])&&e>=e){var g=f=e;break}for(;++c<d;)null!=(e=b[c])&&(g>e&&(g=e),f<e&&(f=e))}else{for(;++c<d;)if(null!=(e=a.call(b,b[c],c))&&e>=e){g=f=e;
break}for(;++c<d;)null!=(e=a.call(b,b[c],c))&&(g>e&&(g=e),f<e&&(f=e))}return[g,f]};S.sum=function(b,a){var c=0,d=b.length,e,f=-1;if(1===arguments.length)for(;++f<d;)isNaN(e=+b[f])||(c+=e);else for(;++f<d;)isNaN(e=+a.call(b,b[f],f))||(c+=e);return c};S.mean=function(b,a){var c=0,d=b.length,e,f=-1,g=d;if(1===arguments.length)for(;++f<d;)isNaN(e=m(b[f]))?--g:c+=e;else for(;++f<d;)isNaN(e=m(a.call(b,b[f],f)))?--g:c+=e;if(g)return c/g};S.quantile=function(b,a){var c=(b.length-1)*a+1;a=Math.floor(c);var d=
+b[a-1];return(c-=a)?d+c*(b[a]-d):d};S.median=function(b,a){var c=[],d=b.length,e,f=-1;if(1===arguments.length)for(;++f<d;)isNaN(e=m(b[f]))||c.push(e);else for(;++f<d;)isNaN(e=m(a.call(b,b[f],f)))||c.push(e);if(c.length)return S.quantile(c.sort(k),.5)};S.variance=function(b,a){var c=b.length,d=0,e,f=0,g=-1,h=0;if(1===arguments.length)for(;++g<c;){if(!isNaN(e=m(b[g]))){var r=e-d;d+=r/++h;f+=r*(e-d)}}else for(;++g<c;)isNaN(e=m(a.call(b,b[g],g)))||(r=e-d,d+=r/++h,f+=r*(e-d));if(1<h)return f/(h-1)};S.deviation=
function(){var b=S.variance.apply(this,arguments);return b?Math.sqrt(b):b};var th=b(k);S.bisectLeft=th.left;S.bisect=S.bisectRight=th.right;S.bisector=function(a){return b(1===a.length?function(b,c){return k(a(b),c)}:a)};S.shuffle=function(b,a,c){3>(d=arguments.length)&&(c=b.length,2>d&&(a=0));for(var d=c-a,e,f;d;)f=Math.random()*d--|0,e=b[d+a],b[d+a]=b[f+a],b[f+a]=e;return b};S.permute=function(b,a){for(var c=a.length,d=Array(c);c--;)d[c]=b[a[c]];return d};S.pairs=function(b){for(var a=0,c=b.length-
1,d=b[0],e=Array(0>c?0:c);a<c;)e[a]=[d,d=b[++a]];return e};S.transpose=function(b){if(!(f=b.length))return[];for(var a=-1,c=S.min(b,g),d=Array(c);++a<c;)for(var e=-1,f,h=d[a]=Array(f);++e<f;)h[e]=b[e][a];return d};S.zip=function(){return S.transpose(arguments)};S.keys=function(b){var a=[],c;for(c in b)a.push(c);return a};S.values=function(b){var a=[],c;for(c in b)a.push(b[c]);return a};S.entries=function(b){var a=[],c;for(c in b)a.push({key:c,value:b[c]});return a};S.merge=function(b){var a=b.length;
var c=-1;for(var d=0,e,f;++c<a;)d+=b[c].length;for(e=Array(d);0<=--a;)for(f=b[a],c=f.length;0<=--c;)e[--d]=f[c];return e};var Xa=Math.abs;S.range=function(b,a,c){3>arguments.length&&(c=1,2>arguments.length&&(a=b,b=0));if(Infinity===(a-b)/c)throw Error("infinite range");var d=[];var e=Xa(c);for(var f=1;e*f%1;)f*=10;e=f;f=-1;var g;b*=e;a*=e;c*=e;if(0>c)for(;(g=b+c*++f)>a;)d.push(g/e);else for(;(g=b+c*++f)<a;)d.push(g/e);return d};S.map=function(b,a){var c=new t;if(b instanceof t)b.forEach(function(b,
a){c.set(b,a)});else if(Array.isArray(b)){var d=-1,e=b.length,f;if(1===arguments.length)for(;++d<e;)c.set(d,b[d]);else for(;++d<e;)c.set(a.call(b,f=b[d],d),f)}else for(d in b)c.set(d,b[d]);return c};e(t,{has:d,get:function(b){return this._[l(b)]},set:function(b,a){return this._[l(b)]=a},remove:c,keys:r,values:function(){var b=[],a;for(a in this._)b.push(this._[a]);return b},entries:function(){var b=[],a;for(a in this._)b.push({key:f(a),value:this._[a]});return b},size:u,empty:v,forEach:function(b){for(var a in this._)b.call(this,
f(a),this._[a])}});S.nest=function(){function b(a,e,h){if(h>=d.length)return g?g.call(c,e):f?e.sort(f):e;for(var r=-1,l=e.length,k=d[h++],u,m,n=new t,v;++r<l;)(v=n.get(u=k(m=e[r])))?v.push(m):n.set(u,[m]);a?(m=a(),e=function(c,d){m.set(c,b(a,d,h))}):(m={},e=function(c,d){m[c]=b(a,d,h)});n.forEach(e);return m}function a(b,c){if(c>=d.length)return b;var f=[],g=e[c++];b.forEach(function(b,d){f.push({key:b,values:a(d,c)})});return g?f.sort(function(b,a){return g(b.key,a.key)}):f}var c={},d=[],e=[],f,
g;c.map=function(a,c){return b(c,a,0)};c.entries=function(c){return a(b(S.map,c,0),0)};c.key=function(b){d.push(b);return c};c.sortKeys=function(b){e[d.length-1]=b;return c};c.sortValues=function(b){f=b;return c};c.rollup=function(b){g=b;return c};return c};S.set=function(b){var a=new w;if(b)for(var c=0,d=b.length;c<d;++c)a.add(b[c]);return a};e(w,{has:d,add:function(b){this._[l(b+="")]=!0;return b},remove:c,values:r,size:u,empty:v,forEach:function(b){for(var a in this._)b.call(this,f(a))}});S.behavior=
{};S.rebind=function(b,a){for(var c=1,d=arguments.length,e;++c<d;)b[e=arguments[c]]=A(b,a,a[e]);return b};var Og="webkit ms moz Moz o O".split(" ");S.dispatch=function(){for(var b=new C,a=-1,c=arguments.length;++a<c;)b[arguments[a]]=B(b);return b};C.prototype.on=function(b,a){var c=b.indexOf("."),d="";0<=c&&(d=b.slice(c+1),b=b.slice(0,c));if(b)return 2>arguments.length?this[b].on(d):this[b].on(d,a);if(2===arguments.length){if(null==a)for(b in this)if(this.hasOwnProperty(b))this[b].on(d,null);return this}};
S.event=null;S.requote=function(b){return b.replace(Pg,"\\$\x26")};var Pg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,yb={}.__proto__?function(b,a){b.__proto__=a}:function(b,a){for(var c in a)b[c]=a[c]},Qg=function(b,a){return a.querySelector(b)},Ug=function(b,a){return a.querySelectorAll(b)},af=function(b,a){var c=b.matches||b[z(b,"matchesSelector")];af=function(b,a){return c.call(b,a)};return af(b,a)};"function"===typeof Sizzle&&(Qg=function(b,a){return Sizzle(b,a)[0]||null},Ug=Sizzle,af=Sizzle.matchesSelector);
S.selection=function(){return S.select(Dc.documentElement)};var tb=S.selection.prototype=[];tb.select=function(b){var a=[],c,d,e,f;b=L(b);for(var g=-1,h=this.length;++g<h;){a.push(c=[]);c.parentNode=(e=this[g]).parentNode;for(var r=-1,l=e.length;++r<l;)(f=e[r])?(c.push(d=b.call(f,f.__data__,r,g)),d&&"__data__"in f&&(d.__data__=f.__data__)):c.push(null)}return F(a)};tb.selectAll=function(b){var a=[],c,d;b=J(b);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,r=g.length;++h<r;)if(d=g[h])a.push(c=
Kd(b.call(d,d.__data__,h,e))),c.parentNode=d;return F(a)};var Th={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};S.ns={prefix:Th,qualify:function(b){var a=b.indexOf(":"),c=b;0<=a&&"xmlns"!==(c=b.slice(0,a))&&(b=b.slice(a+1));return Th.hasOwnProperty(c)?{space:Th[c],local:b}:b}};tb.attr=function(b,a){if(2>arguments.length){if("string"===typeof b){var c=this.node();
b=S.ns.qualify(b);return b.local?c.getAttributeNS(b.space,b.local):c.getAttribute(b)}for(a in b)this.each(H(a,b[a]));return this}return this.each(H(b,a))};tb.classed=function(b,a){if(2>arguments.length){if("string"===typeof b){var c=this.node(),d=(b=(b+"").trim().split(/^|\s+/)).length,e=-1;if(a=c.classList)for(;++e<d;){if(!a.contains(b[e]))return!1}else for(a=c.getAttribute("class");++e<d;)if(!K(b[e]).test(a))return!1;return!0}for(a in b)this.each(M(a,b[a]));return this}return this.each(M(b,a))};
tb.style=function(b,c,d){var e=arguments.length;if(3>e){if("string"!==typeof b){2>e&&(c="");for(d in b)this.each(N(d,b[d],c));return this}if(2>e)return e=this.node(),a(e).getComputedStyle(e,null).getPropertyValue(b);d=""}return this.each(N(b,c,d))};tb.property=function(b,a){if(2>arguments.length){if("string"===typeof b)return this.node()[b];for(a in b)this.each(O(a,b[a]));return this}return this.each(O(b,a))};tb.text=function(b){return arguments.length?this.each("function"===typeof b?function(){var a=
b.apply(this,arguments);this.textContent=null==a?"":a}:null==b?function(){this.textContent=""}:function(){this.textContent=b}):this.node().textContent};tb.html=function(b){return arguments.length?this.each("function"===typeof b?function(){var a=b.apply(this,arguments);this.innerHTML=null==a?"":a}:null==b?function(){this.innerHTML=""}:function(){this.innerHTML=b}):this.node().innerHTML};tb.append=function(b){b=P(b);return this.select(function(){return this.appendChild(b.apply(this,arguments))})};tb.insert=
function(b,a){b=P(b);a=L(a);return this.select(function(){return this.insertBefore(b.apply(this,arguments),a.apply(this,arguments)||null)})};tb.remove=function(){return this.each(Q)};tb.data=function(b,a){function c(b,c){var d,e=b.length,f=c.length,g=Math.min(e,f),k=Array(f),u=Array(f),m=Array(e),n,v;if(a){g=new t;var w=Array(e),y;for(d=-1;++d<e;)if(n=b[d])g.has(y=a.call(n,n.__data__,d))?m[d]=n:g.set(y,n),w[d]=y;for(d=-1;++d<f;)(n=g.get(y=a.call(c,v=c[d],d)))?!0!==n&&(k[d]=n,n.__data__=v):u[d]={__data__:v},
g.set(y,!0);for(d=-1;++d<e;)d in w&&!0!==g.get(w[d])&&(m[d]=b[d])}else{for(d=-1;++d<g;)n=b[d],v=c[d],n?(n.__data__=v,k[d]=n):u[d]={__data__:v};for(;d<f;++d)u[d]={__data__:c[d]};for(;d<e;++d)m[d]=b[d]}u.update=k;u.parentNode=k.parentNode=m.parentNode=b.parentNode;h.push(u);r.push(k);l.push(m)}var d=-1,e=this.length,f,g;if(!arguments.length){for(b=Array(e=(f=this[0]).length);++d<e;)if(g=f[d])b[d]=g.__data__;return b}var h=ca([]),r=F([]),l=F([]);if("function"===typeof b)for(;++d<e;)c(f=this[d],b.call(f,
f.parentNode.__data__,d));else for(;++d<e;)c(f=this[d],b);r.enter=function(){return h};r.exit=function(){return l};return r};tb.datum=function(b){return arguments.length?this.property("__data__",b):this.property("__data__")};tb.filter=function(b){var a=[],c,d,e;"function"!==typeof b&&(b=T(b));for(var f=0,g=this.length;f<g;f++){a.push(c=[]);c.parentNode=(d=this[f]).parentNode;for(var h=0,r=d.length;h<r;h++)(e=d[h])&&b.call(e,e.__data__,h,f)&&c.push(e)}return F(a)};tb.order=function(){for(var b=-1,
a=this.length;++b<a;)for(var c=this[b],d=c.length-1,e=c[d],f;0<=--d;)if(f=c[d])e&&e!==f.nextSibling&&e.parentNode.insertBefore(f,e),e=f;return this};tb.sort=function(b){b=V.apply(this,arguments);for(var a=-1,c=this.length;++a<c;)this[a].sort(b);return this.order()};tb.each=function(b){return Y(this,function(a,c,d){b.call(a,a.__data__,c,d)})};tb.call=function(b){var a=Kd(arguments);b.apply(a[0]=this,a);return this};tb.empty=function(){return!this.node()};tb.node=function(){for(var b=0,a=this.length;b<
a;b++)for(var c=this[b],d=0,e=c.length;d<e;d++){var f=c[d];if(f)return f}return null};tb.size=function(){var b=0;Y(this,function(){++b});return b};var Ie=[];S.selection.enter=ca;S.selection.enter.prototype=Ie;Ie.append=tb.append;Ie.empty=tb.empty;Ie.node=tb.node;Ie.call=tb.call;Ie.size=tb.size;Ie.select=function(b){for(var a=[],c,d,e,f,g,h=-1,r=this.length;++h<r;){e=(f=this[h]).update;a.push(c=[]);c.parentNode=f.parentNode;for(var l=-1,k=f.length;++l<k;)(g=f[l])?(c.push(e[l]=d=b.call(f.parentNode,
g.__data__,l,h)),d.__data__=g.__data__):c.push(null)}return F(a)};Ie.insert=function(b,a){2>arguments.length&&(a=Z(this));return tb.insert.call(this,b,a)};S.select=function(b){if("string"===typeof b){var a=[Qg(b,Dc)];a.parentNode=Dc.documentElement}else a=[b],a.parentNode=b&&(b.ownerDocument||b.document||b).documentElement;return F([a])};S.selectAll=function(b){"string"===typeof b?(b=Kd(Ug(b,Dc)),b.parentNode=Dc.documentElement):(b=Kd(b),b.parentNode=null);return F([b])};tb.on=function(b,a,c){var d=
arguments.length;if(3>d){if("string"!==typeof b){2>d&&(a=!1);for(c in b)this.each(R(c,b[c],a));return this}if(2>d)return(d=this.node()["__on"+b])&&d._;c=!1}return this.each(R(b,a,c))};var Hd=S.map({mouseenter:"mouseover",mouseleave:"mouseout"});Dc&&Hd.forEach(function(b){"on"+b in Dc&&Hd.remove(b)});var mg,Qa=0;S.mouse=function(b){return fa(b,p())};var Va=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;S.touch=function(b,a,c){3>arguments.length&&(c=a,a=p().changedTouches);if(a)for(var d=
0,e=a.length,f;d<e;++d)if((f=a[d]).identifier===c)return fa(b,f)};S.behavior.drag=function(){function b(){this.on("mousedown.drag",f).on("touchstart.drag",g)}function c(b,a,c,f,g){return function(){var h=S.event.target.correspondingElement||S.event.target,r=this.parentNode,l=d.of(this,arguments),k=0,u=b(),t=".drag"+(null==u?"":"-"+u),m=S.select(c(h)).on(f+t,function(){var b=a(r,u);if(b){var c=b[0]-v[0];var d=b[1]-v[1];k|=c|d;v=b;l({type:"drag",x:b[0]+w[0],y:b[1]+w[1],dx:c,dy:d})}}).on(g+t,function(){a(r,
u)&&(m.on(f+t,null).on(g+t,null),n(k),l({type:"dragend"}))}),n=ea(h),v=a(r,u);if(e){var w=e.apply(this,arguments);w=[w.x-v[0],w.y-v[1]]}else w=[0,0];l({type:"dragstart"})}}var d=E(b,"drag","dragstart","dragend"),e=null,f=c(x,S.mouse,a,"mousemove","mouseup"),g=c(la,S.touch,y,"touchmove","touchend");b.origin=function(a){if(!arguments.length)return e;e=a;return b};return S.rebind(b,d,"on")};S.touches=function(b,a){2>arguments.length&&(a=p().touches);return a?Kd(a).map(function(a){var c=fa(b,a);c.identifier=
a.identifier;return c}):[]};var Wa=Math.PI,fd=2*Wa,Uh=fd-1E-6,rb=Wa/2,Ra=Wa/180,Tb=180/Wa,bf=Math.SQRT2;S.interpolateZoom=function(b,a){var c=b[0],d=b[1],e=b[2];b=a[2];var f=a[0]-c,g=a[1]-d,h=f*f+g*g;if(1E-12>h){var r=Math.log(b/e)/bf;b=function(b){return[c+b*f,d+b*g,e*Math.exp(bf*b*r)]}}else{var l=Math.sqrt(h);a=(b*b-e*e+4*h)/(4*e*l);b=(b*b-e*e-4*h)/(4*b*l);var k=Math.log(Math.sqrt(a*a+1)-a);r=(Math.log(Math.sqrt(b*b+1)-b)-k)/bf;b=function(b){b*=r;var a=na(k),h=bf*b+k;var u=((h=Math.exp(2*h))-1)/
(h+1);var t=k;h=((t=Math.exp(t))-1/t)/2;u=e/(2*l)*(a*u-h);return[c+u*f,d+u*g,e*a/na(bf*b+k)]}}b.duration=1E3*r;return b};S.behavior.zoom=function(){function b(b){b.on("mousedown.zoom",k).on(Vh+".zoom",t).on("dblclick.zoom",m).on("touchstart.zoom",u)}function c(b){return[(b[0]-n.x)/n.k,(b[1]-n.y)/n.k]}function d(b){n.k=Math.max(A[0],Math.min(A[1],b))}function e(b,a){a=[a[0]*n.k+n.x,a[1]*n.k+n.y];n.x+=b[0]-a[0];n.y+=b[1]-a[1]}function f(a,c,f,g){a.__chart__={x:n.x,y:n.y,k:n.k};d(Math.pow(2,g));e(w=
c,f);a=S.select(a);0<x&&(a=a.transition().duration(x));a.call(b.event)}function g(){G&&G.domain(I.range().map(function(b){return(b-n.x)/n.k}).map(I.invert));K&&K.domain(H.range().map(function(b){return(b-n.y)/n.k}).map(H.invert))}function h(b){B++||b({type:"zoomstart"})}function r(b){g();b({type:"zoom",scale:n.k,translate:[n.x,n.y]})}function l(b){--B||(b({type:"zoomend"}),w=null)}function k(){var b=this,d=p.of(b,arguments),f=0,g=S.select(a(b)).on("mousemove.zoom",function(){f=1;e(S.mouse(b),k);r(d)}).on("mouseup.zoom",
function(){g.on("mousemove.zoom",null).on("mouseup.zoom",null);u(f);l(d)}),k=c(S.mouse(b)),u=ea(b);cg.call(b);h(d)}function u(){function b(){var b=S.touches(m);z=n.k;b.forEach(function(b){b.identifier in w&&(w[b.identifier]=c(b))});return b}function a(){var a=S.event.target;S.select(a).on(x,g).on(B,t);C.push(a);a=S.event.changedTouches;for(var c=0,d=a.length;c<d;++c)w[a[c].identifier]=null;c=b();d=Date.now();1===c.length?(500>d-q&&(a=c[0],f(m,a,w[a.identifier],Math.floor(Math.log(n.k)/Math.LN2)+1),
D()),q=d):1<c.length&&(a=c[0],d=c[1],c=a[0]-d[0],a=a[1]-d[1],y=c*c+a*a)}function g(){var b=S.touches(m),a;cg.call(m);for(var c=0,f=b.length;c<f;++c,a=null){var g=b[c];if(a=w[g.identifier]){if(l)break;var h=g;var l=a}}if(a){var k=(k=g[0]-h[0])*k+(k=g[1]-h[1])*k;b=y&&Math.sqrt(k/y);h=[(h[0]+g[0])/2,(h[1]+g[1])/2];l=[(l[0]+a[0])/2,(l[1]+a[1])/2];d(b*z)}q=null;e(h,l);r(v)}function t(){if(S.event.touches.length){for(var a=S.event.changedTouches,c=0,d=a.length;c<d;++c)delete w[a[c].identifier];for(var e in w)return void b()}S.selectAll(C).on(A,
null);I.on("mousedown.zoom",k).on("touchstart.zoom",u);G();l(v)}var m=this,v=p.of(m,arguments),w={},y=0,z,A=".zoom-"+S.event.changedTouches[0].identifier,x="touchmove"+A,B="touchend"+A,C=[],I=S.select(m),G=ea(m);a();h(v);I.on("mousedown.zoom",null).on("touchstart.zoom",a)}function t(){var b=p.of(this,arguments);C?clearTimeout(C):(cg.call(this),v=c(w=y||S.mouse(this)),h(b));C=setTimeout(function(){C=null;l(b)},50);D();d(Math.pow(2,.002*Pf())*n.k);e(w,v);r(b)}function m(){var b=S.mouse(this),a=Math.log(n.k)/
Math.LN2;f(this,b,c(b),S.event.shiftKey?Math.ceil(a)-1:Math.floor(a)+1)}var n={x:0,y:0,k:1},v,w,y,z=[960,500],A=Pb,x=250,B=0,C,q,p=E(b,"zoomstart","zoom","zoomend"),I,G,H,K;Vh||(Vh="onwheel"in Dc?(Pf=function(){return-S.event.deltaY*(S.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Dc?(Pf=function(){return S.event.wheelDelta},"mousewheel"):(Pf=function(){return-S.event.detail},"MozMousePixelScroll"));b.event=function(b){b.each(function(){var b=p.of(this,arguments),a=n;Lg?S.select(this).transition().each("start.zoom",
function(){n=this.__chart__||{x:0,y:0,k:1};h(b)}).tween("zoom:zoom",function(){var c=z[0],d=z[1],e=w?w[0]:c/2,f=w?w[1]:d/2,g=S.interpolateZoom([(e-n.x)/n.k,(f-n.y)/n.k,c/n.k],[(e-a.x)/a.k,(f-a.y)/a.k,c/a.k]);return function(a){a=g(a);var d=c/a[2];this.__chart__=n={x:e-a[0]*d,y:f-a[1]*d,k:d};r(b)}}).each("interrupt.zoom",function(){l(b)}).each("end.zoom",function(){l(b)}):(this.__chart__=n,h(b),r(b),l(b))})};b.translate=function(a){if(!arguments.length)return[n.x,n.y];n={x:+a[0],y:+a[1],k:n.k};g();
return b};b.scale=function(a){if(!arguments.length)return n.k;n={x:n.x,y:n.y,k:null};d(+a);g();return b};b.scaleExtent=function(a){if(!arguments.length)return A;A=null==a?Pb:[+a[0],+a[1]];return b};b.center=function(a){if(!arguments.length)return y;y=a&&[+a[0],+a[1]];return b};b.size=function(a){if(!arguments.length)return z;z=a&&[+a[0],+a[1]];return b};b.duration=function(a){if(!arguments.length)return x;x=+a;return b};b.x=function(a){if(!arguments.length)return G;G=a;I=a.copy();n={x:0,y:0,k:1};
return b};b.y=function(a){if(!arguments.length)return K;K=a;H=a.copy();n={x:0,y:0,k:1};return b};return S.rebind(b,p,"on")};var Pb=[0,Infinity],Pf,Vh;S.color=ja;ja.prototype.toString=function(){return this.rgb()+""};S.hsl=oa;var Wh=oa.prototype=new ja;Wh.brighter=function(b){b=Math.pow(.7,arguments.length?b:1);return new oa(this.h,this.s,this.l/b)};Wh.darker=function(b){b=Math.pow(.7,arguments.length?b:1);return new oa(this.h,this.s,b*this.l)};Wh.rgb=function(){return ka(this.h,this.s,this.l)};S.hcl=
ia;var Xh=ia.prototype=new ja;Xh.brighter=function(b){return new ia(this.h,this.c,Math.min(100,this.l+cf*(arguments.length?b:1)))};Xh.darker=function(b){return new ia(this.h,this.c,Math.max(0,this.l-cf*(arguments.length?b:1)))};Xh.rgb=function(){return xa(this.h,this.c,this.l).rgb()};S.lab=ya;var cf=18,si=.95047,Wg=1,Vg=1.08883,zh=ya.prototype=new ja;zh.brighter=function(b){return new ya(Math.min(100,this.l+cf*(arguments.length?b:1)),this.a,this.b)};zh.darker=function(b){return new ya(Math.max(0,
this.l-cf*(arguments.length?b:1)),this.a,this.b)};zh.rgb=function(){return sa(this.l,this.a,this.b)};S.rgb=ua;var uh=ua.prototype=new ja;uh.brighter=function(b){b=Math.pow(.7,arguments.length?b:1);var a=this.r,c=this.g,d=this.b;if(!a&&!c&&!d)return new ua(30,30,30);a&&30>a&&(a=30);c&&30>c&&(c=30);d&&30>d&&(d=30);return new ua(Math.min(255,a/b),Math.min(255,c/b),Math.min(255,d/b))};uh.darker=function(b){b=Math.pow(.7,arguments.length?b:1);return new ua(b*this.r,b*this.g,b*this.b)};uh.hsl=function(){return ba(this.r,
this.g,this.b)};uh.toString=function(){return"#"+wa(this.r)+wa(this.g)+wa(this.b)};var Xg=S.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,
darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,
gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,
lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,
orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,
slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Xg.forEach(function(b,a){Xg.set(b,new ua(a>>16,a>>8&255,a&255))});S.functor=Ja;S.xhr=Lb(y);S.dsv=function(b,a){function c(b,c,f){3>arguments.length&&(f=c,c=null);var g=Mb(b,a,null==c?d:e(c),f);g.row=function(b){return arguments.length?g.response(null==(c=
b)?d:e(b)):c};return g}function d(b){return c.parse(b.responseText)}function e(b){return function(a){return c.parse(a.responseText,b)}}function f(a){return a.map(g).join(b)}function g(b){return h.test(b)?'"'+b.replace(/"/g,'""')+'"':b}var h=new RegExp('["'+b+"\n]"),r=b.charCodeAt(0);c.parse=function(b,a){var d;return c.parseRows(b,function(b,c){if(d)return d(b,c-1);var e=new Function("d","return {"+b.map(function(b,a){return JSON.stringify(b)+": d["+a+"]"}).join(",")+"}");d=a?function(b,c){return a(e(b),
c)}:e})};c.parseRows=function(b,a){function c(){if(h>=g)return e;if(u)return u=!1,d;var a=h;if(34===b.charCodeAt(a)){for(var c=a;c++<g;)if(34===b.charCodeAt(c)){if(34!==b.charCodeAt(c+1))break;++c}h=c+2;var f=b.charCodeAt(c+1);13===f?(u=!0,10===b.charCodeAt(c+2)&&++h):10===f&&(u=!0);return b.slice(a+1,c).replace(/""/g,'"')}for(;h<g;){f=b.charCodeAt(h++);c=1;if(10===f)u=!0;else if(13===f)u=!0,10===b.charCodeAt(h)&&(++h,++c);else if(f!==r)continue;return b.slice(a,h-c)}return b.slice(a)}for(var d={},
e={},f=[],g=b.length,h=0,l=0,k,u;(k=c())!==e;){for(var t=[];k!==d&&k!==e;)t.push(k),k=c();a&&null==(t=a(t,l++))||f.push(t)}return f};c.format=function(a){if(Array.isArray(a[0]))return c.formatRows(a);var d=new w,e=[];a.forEach(function(b){for(var a in b)d.has(a)||e.push(d.add(a))});return[e.map(g).join(b)].concat(a.map(function(a){return e.map(function(b){return g(a[b])}).join(b)})).join("\n")};c.formatRows=function(b){return b.map(f).join("\n")};return c};S.csv=S.dsv(",","text/csv");S.tsv=S.dsv("\t",
"text/tab-separated-values");var ef,tg,ff,sg,Fi=this[z(this,"requestAnimationFrame")]||function(b){setTimeout(b,17)};S.timer=function(){zb.apply(this,arguments)};S.timer.flush=function(){ub();db()};S.round=function(b,a){return a?Math.round(b*(a=Math.pow(10,a)))/a:Math.round(b)};var Ze="y z a f p n  m  k M G T P E Z Y".split(" ").map(function(b,a){var c=Math.pow(10,3*Xa(8-a));return{scale:8<a?function(b){return b/c}:function(b){return b*c},symbol:b}});S.formatPrefix=function(b,a){var c=0;if(b=+b)0>
b&&(b*=-1),a&&(b=S.round(b,ab(b,a))),c=1+Math.floor(1E-12+Math.log(b)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3)));return Ze[8+c/3]};var ng=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ui=S.map({b:function(b){return b.toString(2)},c:function(b){return String.fromCharCode(b)},o:function(b){return b.toString(8)},x:function(b){return b.toString(16)},X:function(b){return b.toString(16).toUpperCase()},g:function(b,a){return b.toPrecision(a)},e:function(b,a){return b.toExponential(a)},
f:function(b,a){return b.toFixed(a)},r:function(b,a){return(b=S.round(b,ab(b,a))).toFixed(Math.max(0,Math.min(20,ab(b*(1+1E-15),a))))}}),Ga=S.time={},$c=Date;jb.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},
getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Af.setUTCDate.apply(this._,arguments)},setDay:function(){Af.setUTCDay.apply(this._,arguments)},setFullYear:function(){Af.setUTCFullYear.apply(this._,arguments)},setHours:function(){Af.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Af.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Af.setUTCMinutes.apply(this._,
arguments)},setMonth:function(){Af.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Af.setUTCSeconds.apply(this._,arguments)},setTime:function(){Af.setTime.apply(this._,arguments)}};var Af=Date.prototype;Ga.year=Oa(function(b){b=Ga.day(b);b.setMonth(0,1);return b},function(b,a){b.setFullYear(b.getFullYear()+a)},function(b){return b.getFullYear()});Ga.years=Ga.year.range;Ga.years.utc=Ga.year.utc.range;Ga.day=Oa(function(b){var a=new $c(2E3,0);a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate());
return a},function(b,a){b.setDate(b.getDate()+a)},function(b){return b.getDate()-1});Ga.days=Ga.day.range;Ga.days.utc=Ga.day.utc.range;Ga.dayOfYear=function(b){var a=Ga.year(b);return Math.floor((b-a-6E4*(b.getTimezoneOffset()-a.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(b,a){a=7-a;var c=Ga[b]=Oa(function(b){(b=Ga.day(b)).setDate(b.getDate()-(b.getDay()+a)%7);return b},function(b,a){b.setDate(b.getDate()+7*Math.floor(a))},function(b){var c=
Ga.year(b).getDay();return Math.floor((Ga.dayOfYear(b)+(c+a)%7)/7)-(c!==a)});Ga[b+"s"]=c.range;Ga[b+"s"].utc=c.utc.range;Ga[b+"OfYear"]=function(b){var c=Ga.year(b).getDay();return Math.floor((Ga.dayOfYear(b)+(c+a)%7)/7)}});Ga.week=Ga.sunday;Ga.weeks=Ga.sunday.range;Ga.weeks.utc=Ga.sunday.utc.range;Ga.weekOfYear=Ga.sundayOfYear;var Ph={"-":"",_:" ",0:"0"},ec=/^\s*\d+/,hi=/^%/;S.locale=function(b){return{numberFormat:eb(b),timeFormat:Wc(b)}};var Ji=S.locale({decimal:".",thousands:",",grouping:[3],
currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});S.format=Ji.numberFormat;S.geo={};Nd.prototype={s:0,t:0,add:function(b){Xc(b,this.t,$g);Xc($g.s,this.s,
this);this.s?this.t+=$g.t:this.s=$g.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var $g=new Nd;S.geo.stream=function(b,a){if(b&&wg.hasOwnProperty(b.type))wg[b.type](b,a);else pa(b,a)};var wg={Feature:function(b,a){pa(b.geometry,a)},FeatureCollection:function(b,a){b=b.features;for(var c=-1,d=b.length;++c<d;)pa(b[c].geometry,a)}},Bf={Sphere:function(b,a){a.sphere()},Point:function(b,a){b=b.coordinates;a.point(b[0],b[1],b[2])},MultiPoint:function(b,a){for(var c=b.coordinates,
d=-1,e=c.length;++d<e;)b=c[d],a.point(b[0],b[1],b[2])},LineString:function(b,a){vc(b.coordinates,a,0)},MultiLineString:function(b,a){b=b.coordinates;for(var c=-1,d=b.length;++c<d;)vc(b[c],a,0)},Polygon:function(b,a){Ka(b.coordinates,a)},MultiPolygon:function(b,a){b=b.coordinates;for(var c=-1,d=b.length;++c<d;)Ka(b[c],a)},GeometryCollection:function(b,a){b=b.geometries;for(var c=-1,d=b.length;++c<d;)pa(b[c],a)}};S.geo.area=function(b){ad=0;S.geo.stream(b,Rc);return ad};var ad,Yc=new Nd,Rc={sphere:function(){ad+=
4*Wa},point:x,lineStart:x,lineEnd:x,polygonStart:function(){Yc.reset();Rc.lineStart=Pc},polygonEnd:function(){var b=2*Yc;ad+=0>b?4*Wa+b:b;Rc.lineStart=Rc.lineEnd=Rc.point=x}};S.geo.bounds=function(){function b(b,a){A.push(x=[k=b,t=b]);a<u&&(u=a);a>m&&(m=a)}function a(a,c){var d=Qc([a*Ra,c*Ra]);if(y){var e=qa(y,d);e=qa([e[1],-e[0],0],e);Ib(e);e=vd(e);var f=a-n,g=0<f?1:-1,r=e[0]*Tb*g;f=180<Xa(f);f^(g*n<r&&r<g*a)?(c=e[1]*Tb,c>m&&(m=c)):(r=(r+360)%360-180,f^(g*n<r&&r<g*a))?(c=-e[1]*Tb,c<u&&(u=c)):(c<
u&&(u=c),c>m&&(m=c));f?a<n?h(k,a)>h(k,t)&&(t=a):h(a,t)>h(k,t)&&(k=a):t>=k?(a<k&&(k=a),a>t&&(t=a)):a>n?h(k,a)>h(k,t)&&(t=a):h(a,t)>h(k,t)&&(k=a)}else b(a,c);y=d;n=a}function c(){B.point=a}function d(){x[0]=k;x[1]=t;B.point=b;y=null}function e(b,c){if(y){var d=b-n;z+=180<Xa(d)?d+(0<d?360:-360):d}else v=b,w=c;Rc.point(b,c);a(b,c)}function f(){Rc.lineStart()}function g(){e(v,w);Rc.lineEnd();1E-6<Xa(z)&&(k=-(t=180));x[0]=k;x[1]=t;y=null}function h(b,a){return 0>(a-=b)?a+360:a}function r(b,a){return b[0]-
a[0]}function l(b,a){return a[0]<=a[1]?a[0]<=b&&b<=a[1]:b<a[0]||a[1]<b}var k,u,t,m,n,v,w,y,z,A,x,B={point:b,lineStart:c,lineEnd:d,polygonStart:function(){B.point=e;B.lineStart=f;B.lineEnd=g;z=0;Rc.polygonStart()},polygonEnd:function(){Rc.polygonEnd();B.point=b;B.lineStart=c;B.lineEnd=d;0>Yc?(k=-(t=180),u=-(m=90)):1E-6<z?m=90:-1E-6>z&&(u=-90);x[0]=k;x[1]=t}};return function(b){m=t=-(k=u=Infinity);A=[];S.geo.stream(b,B);if(b=A.length){A.sort(r);for(var a=1,c=A[0],d,e=[c];a<b;++a)d=A[a],l(d[0],c)||l(d[1],
c)?(h(c[0],d[1])>h(c[0],c[1])&&(c[1]=d[1]),h(d[0],c[1])>h(c[0],c[1])&&(c[0]=d[0])):e.push(c=d);var f=-Infinity,g;b=e.length-1;a=0;for(c=e[b];a<=b;c=d,++a)d=e[a],(g=h(c[1],d[0]))>f&&(f=g,k=d[0],t=c[1])}A=x=null;return Infinity===k||Infinity===u?[[NaN,NaN],[NaN,NaN]]:[[k,u],[t,m]]}}();S.geo.centroid=function(b){Ah=bh=Wb=Be=Id=Qf=Ne=re=ah=yg=Cf=0;S.geo.stream(b,Oe);b=ah;var a=yg,c=Cf,d=b*b+a*a+c*c;return 1E-12>d&&(b=Qf,a=Ne,c=re,1E-6>bh&&(b=Wb,a=Be,c=Id),d=b*b+a*a+c*c,1E-12>d)?[NaN,NaN]:[Math.atan2(a,
b)*Tb,aa(c/Math.sqrt(d))*Tb]};var Ah,bh,Wb,Be,Id,Qf,Ne,re,ah,yg,Cf,Oe={sphere:x,point:oe,lineStart:pe,lineEnd:va,polygonStart:function(){Oe.lineStart=qe},polygonEnd:function(){Oe.lineStart=pe}},Hi=jd(xg,function(b){var a=NaN,c=NaN,d=NaN,e;return{lineStart:function(){b.lineStart();e=1},point:function(f,g){var h=0<f?Wa:-Wa,r=Xa(f-a);if(1E-6>Xa(r-Wa))b.point(a,c=0<(c+g)/2?rb:-rb),b.point(d,c),b.lineEnd(),b.lineStart(),b.point(h,c),b.point(f,c),e=0;else if(d!==h&&r>=Wa){1E-6>Xa(a-d)&&(a-=1E-6*d);1E-6>
Xa(f-h)&&(f-=1E-6*h);r=a;var l=c,k=f,u,t,m=Math.sin(r-k);c=1E-6<Xa(m)?Math.atan((Math.sin(l)*(t=Math.cos(g))*Math.sin(k)-Math.sin(g)*(u=Math.cos(l))*Math.sin(r))/(u*t*m)):(l+g)/2;b.point(d,c);b.lineEnd();b.lineStart();b.point(h,c);e=0}b.point(a=f,c=g);d=h},lineEnd:function(){b.lineEnd();a=c=NaN},clean:function(){return 2-e}}},function(b,a,c,d){null==b?(c*=rb,d.point(-Wa,c),d.point(0,c),d.point(Wa,c),d.point(Wa,0),d.point(Wa,-c),d.point(0,-c),d.point(-Wa,-c),d.point(-Wa,0),d.point(-Wa,c)):1E-6<Xa(b[0]-
a[0])?(b=b[0]<a[0]?Wa:-Wa,c=c*b/2,d.point(-b,c),d.point(0,c),d.point(b,c)):d.point(a[0],a[1])},[-Wa,-Wa/2]);S.geo.clipExtent=function(){var b,a,c,d,e,f,g={stream:function(b){e&&(e.valid=!1);e=f(b);e.valid=!0;return e},extent:function(h){if(!arguments.length)return[[b,a],[c,d]];f=Ic(b=+h[0][0],a=+h[0][1],c=+h[1][0],d=+h[1][1]);e&&(e.valid=!1,e=null);return g}};return g.extent([[0,0],[960,500]])};(S.geo.conicEqualArea=function(){return Od(wc)}).raw=wc;S.geo.albers=function(){return S.geo.conicEqualArea().rotate([96,
0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};S.geo.albersUsa=function(){function b(b){var a=b[0];b=b[1];e=null;(g(a,b),e)||(h(a,b),e)||r(a,b);return e}var a=S.geo.albers(),c=S.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d=S.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),e,f={point:function(b,a){e=[b,a]}},g,h,r;b.invert=function(b){var e=a.scale(),f=a.translate(),g=(b[0]-f[0])/e;e=(b[1]-f[1])/e;return(.12<=e&&.234>e&&-.425<=g&&-.214>
g?c:.166<=e&&.234>e&&-.214<=g&&-.115>g?d:a).invert(b)};b.stream=function(b){var e=a.stream(b),f=c.stream(b),g=d.stream(b);return{point:function(b,a){e.point(b,a);f.point(b,a);g.point(b,a)},sphere:function(){e.sphere();f.sphere();g.sphere()},lineStart:function(){e.lineStart();f.lineStart();g.lineStart()},lineEnd:function(){e.lineEnd();f.lineEnd();g.lineEnd()},polygonStart:function(){e.polygonStart();f.polygonStart();g.polygonStart()},polygonEnd:function(){e.polygonEnd();f.polygonEnd();g.polygonEnd()}}};
b.precision=function(e){if(!arguments.length)return a.precision();a.precision(e);c.precision(e);d.precision(e);return b};b.scale=function(e){if(!arguments.length)return a.scale();a.scale(e);c.scale(.35*e);d.scale(e);return b.translate(a.translate())};b.translate=function(e){if(!arguments.length)return a.translate();var l=a.scale(),k=+e[0],u=+e[1];g=a.translate(e).clipExtent([[k-.455*l,u-.238*l],[k+.455*l,u+.238*l]]).stream(f).point;h=c.translate([k-.307*l,u+.201*l]).clipExtent([[k-.425*l+1E-6,u+.12*
l+1E-6],[k-.214*l-1E-6,u+.234*l-1E-6]]).stream(f).point;r=d.translate([k-.205*l,u+.212*l]).clipExtent([[k-.214*l+1E-6,u+.166*l+1E-6],[k-.115*l-1E-6,u+.234*l-1E-6]]).stream(f).point;return b};return b.scale(1070)};var Fd,Gc,Hc={point:x,lineStart:x,lineEnd:x,polygonStart:function(){Gc=0;Hc.lineStart=Jc},polygonEnd:function(){Hc.lineStart=Hc.lineEnd=Hc.point=x;Fd+=Xa(Gc/2)}},bd,Ud,Xb,kd,te={point:function(b,a){b<bd&&(bd=b);b>Xb&&(Xb=b);a<Ud&&(Ud=a);a>kd&&(kd=a)},lineStart:x,lineEnd:x,polygonStart:x,
polygonEnd:x},$b={point:wb,lineStart:ac,lineEnd:Zc,polygonStart:function(){$b.lineStart=Pe},polygonEnd:function(){$b.point=wb;$b.lineStart=ac;$b.lineEnd=Zc}};S.geo.path=function(){function b(b){b&&("function"===typeof c&&g.pointRadius(+c.apply(this,arguments)),h&&h.valid||(h=f(g)),S.geo.stream(b,h));return g.result()}function a(){h=null;return b}var c=4.5,d,e,f,g,h;b.area=function(b){Fd=0;S.geo.stream(b,f(Hc));return Fd};b.centroid=function(b){Wb=Be=Id=Qf=Ne=re=ah=yg=Cf=0;S.geo.stream(b,f($b));return Cf?
[ah/Cf,yg/Cf]:re?[Qf/re,Ne/re]:Id?[Wb/Id,Be/Id]:[NaN,NaN]};b.bounds=function(b){Xb=kd=-(bd=Ud=Infinity);S.geo.stream(b,f(te));return[[bd,Ud],[Xb,kd]]};b.projection=function(b){if(!arguments.length)return d;f=(d=b)?b.stream||qc(b):y;return a()};b.context=function(b){if(!arguments.length)return e;g=null==(e=b)?new pc:new Bh(b);"function"!==typeof c&&g.pointRadius(c);return a()};b.pointRadius=function(a){if(!arguments.length)return c;c="function"===typeof a?a:(g.pointRadius(+a),+a);return b};return b.projection(S.geo.albersUsa()).context(null)};
S.geo.transform=function(b){return{stream:function(a){a=new xd(a);for(var c in b)a[c]=b[c];return a}}};xd.prototype={point:function(b,a){this.stream.point(b,a)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};S.geo.projection=ob;S.geo.projectionMutator=ve;(S.geo.equirectangular=function(){return ob(Gb)}).raw=Gb.invert=
Gb;S.geo.rotation=function(b){function a(a){a=b(a[0]*Ra,a[1]*Ra);return a[0]*=Tb,a[1]*=Tb,a}b=Sc(b[0]%360*Ra,b[1]*Ra,2<b.length?b[2]*Ra:0);a.invert=function(a){a=b.invert(a[0]*Ra,a[1]*Ra);return a[0]*=Tb,a[1]*=Tb,a};return a};cd.invert=Gb;S.geo.circle=function(){function b(){var b="function"===typeof a?a.apply(this,arguments):a,c=Sc(-b[0]*Ra,-b[1]*Ra,0).invert,d=[];e(null,null,1,{point:function(b,a){d.push(b=c(b,a));b[0]*=Tb;b[1]*=Tb}});return{type:"Polygon",coordinates:[d]}}var a=[0,0],c,d=6,e;b.origin=
function(c){if(!arguments.length)return a;a=c;return b};b.angle=function(a){if(!arguments.length)return c;e=zc((c=+a)*Ra,d*Ra);return b};b.precision=function(a){if(!arguments.length)return d;e=zc(c*Ra,(d=+a)*Ra);return b};return b.angle(90)};S.geo.distance=function(b,a){var c=(a[0]-b[0])*Ra,d=b[1]*Ra,e=a[1]*Ra;a=Math.cos(c);b=Math.sin(d);d=Math.cos(d);var f=Math.sin(e);e=Math.cos(e);var g;return Math.atan2(Math.sqrt((g=e*Math.sin(c))*g+(g=d*f-b*e*a)*g),b*f+d*e*a)};S.geo.graticule=function(){function b(){return{type:"MultiLineString",
coordinates:a()}}function a(){return S.range(Math.ceil(f/t)*t,e,t).map(w).concat(S.range(Math.ceil(l/m)*m,r,m).map(y)).concat(S.range(Math.ceil(d/k)*k,c,k).filter(function(b){return 1E-6<Xa(b%t)}).map(n)).concat(S.range(Math.ceil(h/u)*u,g,u).filter(function(b){return 1E-6<Xa(b%m)}).map(v))}var c,d,e,f,g,h,r,l,k=10,u=k,t=90,m=360,n,v,w,y,z=2.5;b.lines=function(){return a().map(function(b){return{type:"LineString",coordinates:b}})};b.outline=function(){return{type:"Polygon",coordinates:[w(f).concat(y(r).slice(1),
w(e).reverse().slice(1),y(l).reverse().slice(1))]}};b.extent=function(a){return arguments.length?b.majorExtent(a).minorExtent(a):b.minorExtent()};b.majorExtent=function(a){if(!arguments.length)return[[f,l],[e,r]];f=+a[0][0];e=+a[1][0];l=+a[0][1];r=+a[1][1];f>e&&(a=f,f=e,e=a);l>r&&(a=l,l=r,r=a);return b.precision(z)};b.minorExtent=function(a){if(!arguments.length)return[[d,h],[c,g]];d=+a[0][0];c=+a[1][0];h=+a[0][1];g=+a[1][1];d>c&&(a=d,d=c,c=a);h>g&&(a=h,h=g,g=a);return b.precision(z)};b.step=function(a){return arguments.length?
b.majorStep(a).minorStep(a):b.minorStep()};b.majorStep=function(a){if(!arguments.length)return[t,m];t=+a[0];m=+a[1];return b};b.minorStep=function(a){if(!arguments.length)return[k,u];k=+a[0];u=+a[1];return b};b.precision=function(a){if(!arguments.length)return z;z=+a;n=we(h,g,90);v=lf(d,c,z);w=we(l,r,90);y=lf(f,e,z);return b};return b.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,-80.000001],[180,80.000001]])};S.geo.greatArc=function(){function b(){return{type:"LineString",coordinates:[c||
a.apply(this,arguments),e||d.apply(this,arguments)]}}var a=$f,c,d=Re,e;b.distance=function(){return S.geo.distance(c||a.apply(this,arguments),e||d.apply(this,arguments))};b.source=function(d){if(!arguments.length)return a;a=d;c="function"===typeof d?null:d;return b};b.target=function(a){if(!arguments.length)return d;d=a;e="function"===typeof a?null:a;return b};b.precision=function(){return arguments.length?b:0};return b};S.geo.interpolate=function(b,a){return Qd(b[0]*Ra,b[1]*Ra,a[0]*Ra,a[1]*Ra)};
S.geo.length=function(b){zg=0;S.geo.stream(b,ue);return zg};var zg,ue={sphere:x,point:x,lineStart:function(){function b(b,e){var f=Math.sin(e*=Ra);e=Math.cos(e);var g=Xa((b*=Ra)-a),h=Math.cos(g);zg+=Math.atan2(Math.sqrt((g=e*Math.sin(g))*g+(g=d*f-c*e*h)*g),c*f+d*e*h);a=b;c=f;d=e}var a,c,d;ue.point=function(e,f){a=e*Ra;c=Math.sin(f*=Ra);d=Math.cos(f);ue.point=b};ue.lineEnd=function(){ue.point=ue.lineEnd=x}},lineEnd:x,polygonStart:x,polygonEnd:x},Cd=ld(function(b){return Math.sqrt(2/(1+b))},function(b){return 2*
Math.asin(b/2)});(S.geo.azimuthalEqualArea=function(){return ob(Cd)}).raw=Cd;var ai=ld(function(b){return(b=Math.acos(b))&&b/Math.sin(b)},y);(S.geo.azimuthalEquidistant=function(){return ob(ai)}).raw=ai;(S.geo.conicConformal=function(){return Od(Hf)}).raw=Hf;(S.geo.conicEquidistant=function(){return Od(xe)}).raw=xe;var $h=ld(function(b){return 1/b},Math.atan);(S.geo.gnomonic=function(){return ob($h)}).raw=$h;ye.invert=function(b,a){return[b,2*Math.atan(Math.exp(a))-rb]};(S.geo.mercator=function(){return nf(ye)}).raw=
ye;var Ch=ld(function(){return 1},Math.asin);(S.geo.orthographic=function(){return ob(Ch)}).raw=Ch;var ze=ld(function(b){return 1/(1+b)},function(b){return 2*Math.atan(b)});(S.geo.stereographic=function(){return ob(ze)}).raw=ze;Bg.invert=function(b,a){return[-a,2*Math.atan(Math.exp(b))-rb]};(S.geo.transverseMercator=function(){var b=nf(Bg),a=b.center,c=b.rotate;b.center=function(b){return b?a([-b[1],b[0]]):(b=a(),[b[1],-b[0]])};b.rotate=function(b){return b?c([b[0],b[1],2<b.length?b[2]+90:90]):(b=
c(),[b[0],b[1],b[2]-90])};return c([0,0,90])}).raw=Bg;S.geom={};S.geom.hull=function(b){function a(b){if(3>b.length)return[];var a=Ja(c),e=Ja(d),f,g=b.length,h=[],r=[];for(f=0;f<g;f++)h.push([+a.call(this,b[f],f),+e.call(this,b[f],f),f]);h.sort(of);for(f=0;f<g;f++)r.push([h[f][0],-h[f][1]]);a=ag(h);r=ag(r);e=r[0]===a[0];g=r[r.length-1]===a[a.length-1];var l=[];for(f=a.length-1;0<=f;--f)l.push(b[h[a[f]][2]]);for(f=+e;f<r.length-g;++f)l.push(b[h[r[f]][2]]);return l}var c=Te,d=Ad;if(arguments.length)return a(b);
a.x=function(b){return arguments.length?(c=b,a):c};a.y=function(b){return arguments.length?(d=b,a):d};return a};S.geom.polygon=function(b){yb(b,Lc);return b};var Lc=S.geom.polygon.prototype=[];Lc.area=function(){for(var b=-1,a=this.length,c,d=this[a-1],e=0;++b<a;)c=d,d=this[b],e+=c[1]*d[0]-c[0]*d[1];return.5*e};Lc.centroid=function(b){var a=-1,c=this.length,d=0,e=0,f=this[c-1];for(arguments.length||(b=-1/(6*this.area()));++a<c;){var g=f;f=this[a];var h=g[0]*f[1]-f[0]*g[1];d+=(g[0]+f[0])*h;e+=(g[1]+
f[1])*h}return[d*b,e*b]};Lc.clip=function(b){for(var a,c=ih(b),d=-1,e=this.length-ih(this),f,g,h=this[e-1],r,l,k;++d<e;){a=b.slice();b.length=0;r=this[d];l=a[(g=a.length-c)-1];for(f=-1;++f<g;)k=a[f],bg(k,h,r)?(bg(l,h,r)||b.push(Bd(l,k,h,r)),b.push(k)):bg(l,h,r)&&b.push(Bd(l,k,h,r)),l=k;c&&b.push(b[0]);h=r}return b};var Ff,yd,Gf,Dh=[],sf,od,Gh=[];pf.prototype.prepare=function(){for(var b=this.edges,a=b.length,c;a--;)c=b[a].edge,c.b&&c.a||b.splice(a,1);b.sort(Uc);return b.length};Ve.prototype={start:function(){return this.edge.l===
this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};dg.prototype={insert:function(b,a){var c;if(b){a.P=b;if(a.N=b.N)b.N.P=a;b.N=a;if(b.R){for(b=b.R;b.L;)b=b.L;b.L=a}else b.R=a;var d=b}else this._?(b=de(this._),a.P=null,a.N=b,b.P=b.L=a,d=b):(a.P=a.N=null,this._=a,d=null);a.L=a.R=null;a.U=d;a.C=!0;for(b=a;d&&d.C;)a=d.U,d===a.L?(c=a.R)&&c.C?(d.C=c.C=!1,a.C=!0,b=a):(b===d.R&&(md(this,d),b=d,d=b.U),d.C=!1,a.C=!0,ce(this,a)):(c=a.L)&&c.C?(d.C=c.C=!1,
a.C=!0,b=a):(b===d.L&&(ce(this,d),b=d,d=b.U),d.C=!1,a.C=!0,md(this,a)),d=b.U;this._.C=!1},remove:function(b){b.N&&(b.N.P=b.P);b.P&&(b.P.N=b.N);b.N=b.P=null;var a=b.U,c=b.L,d=b.R;var e=c?d?de(d):c:d;a?a.L===b?a.L=e:a.R=e:this._=e;if(c&&d){var f=e.C;e.C=b.C;e.L=c;c.U=e;e!==d?(a=e.U,e.U=b.U,b=e.R,a.L=b,e.R=d,d.U=e):(e.U=a,a=e,b=e.R)}else f=b.C,b=e;b&&(b.U=a);if(!f)if(b&&b.C)b.C=!1;else{do{if(b===this._)break;if(b===a.L){if(b=a.R,b.C&&(b.C=!1,a.C=!0,md(this,a),b=a.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||
(b.L.C=!1,b.C=!0,ce(this,b),b=a.R);b.C=a.C;a.C=b.R.C=!1;md(this,a);b=this._;break}}else if(b=a.L,b.C&&(b.C=!1,a.C=!0,ce(this,a),b=a.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,md(this,b),b=a.L);b.C=a.C;a.C=b.L.C=!1;ce(this,a);b=this._;break}b.C=!0;b=a;a=a.U}while(!b.C);b&&(b.C=!1)}}};S.geom.voronoi=function(b){function a(b){var a=Array(b.length),d=h[0][0],e=h[0][1],f=h[1][0],g=h[1][1];dd(c(b),h).cells.forEach(function(c,h){var r=c.edges;c=c.site;(a[h]=r.length?r.map(function(b){b=b.start();
return[b.x,b.y]}):c.x>=d&&c.x<=f&&c.y>=e&&c.y<=g?[[d,g],[f,g],[f,e],[d,e]]:[]).point=b[h]});return a}function c(b){return b.map(function(b,a){return{x:1E-6*Math.round(f(b,a)/1E-6),y:1E-6*Math.round(g(b,a)/1E-6),i:a}})}var d=Te,e=Ad,f=d,g=e,h=kc;if(b)return a(b);a.links=function(b){return dd(c(b)).edges.filter(function(b){return b.l&&b.r}).map(function(a){return{source:b[a.l.i],target:b[a.r.i]}})};a.triangles=function(b){var a=[];dd(c(b)).cells.forEach(function(c,d){var e=c.site;c=c.edges.sort(Uc);
var f=-1,g=c.length,h=c[g-1].edge;for(h=h.l===e?h.r:h.l;++f<g;){var r=h;h=c[f].edge;h=h.l===e?h.r:h.l;d<r.i&&d<h.i&&0>(e.x-h.x)*(r.y-e.y)-(e.x-r.x)*(h.y-e.y)&&a.push([b[d],b[r.i],b[h.i]])}});return a};a.x=function(b){return arguments.length?(f=Ja(d=b),a):d};a.y=function(b){return arguments.length?(g=Ja(e=b),a):e};a.clipExtent=function(b){if(!arguments.length)return h===kc?null:h;h=null==b?kc:b;return a};a.size=function(b){return arguments.length?a.clipExtent(b&&[[0,0],b]):h===kc?null:h&&h[1]};return a};
var kc=[[-1E6,-1E6],[1E6,1E6]];S.geom.delaunay=function(b){return S.geom.voronoi().triangles(b)};S.geom.quadtree=function(b,a,c,d,e){function f(b){function f(b,a,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(b.leaf){var r=b.x,k=b.y;if(null!=r){if(!(.01>Xa(r-c)+Xa(k-d))){var u=b.point;b.x=b.y=b.point=null;l(b,u,r,k,e,f,g,h)}l(b,a,c,d,e,f,g,h)}else b.x=c,b.y=d,b.point=a}else l(b,a,c,d,e,f,g,h)}function l(b,a,c,d,e,g,h,r){var l=.5*(e+h),k=.5*(g+r),u=c>=l,t=d>=k,m=t<<1|u;b.leaf=!1;b=b.nodes[m]||(b.nodes[m]=
tf());u?e=l:h=l;t?g=k:r=k;f(b,a,c,d,e,g,h,r)}var k=Ja(g),u=Ja(h),t;if(null!=a){var m=a;var n=c;var v=d;var w=e}else{v=w=-(m=n=Infinity);var y=[];var z=[];var A=b.length;if(r)for(t=0;t<A;++t){var x=b[t];x.x<m&&(m=x.x);x.y<n&&(n=x.y);x.x>v&&(v=x.x);x.y>w&&(w=x.y);y.push(x.x);z.push(x.y)}else for(t=0;t<A;++t){var B=+k(x=b[t],t);x=+u(x,t);B<m&&(m=B);x<n&&(n=x);B>v&&(v=B);x>w&&(w=x);y.push(B);z.push(x)}}B=v-m;x=w-n;B>x?w=n+B:v=m+x;var D=tf();D.add=function(b){f(D,b,+k(b,++t),+u(b,t),m,n,v,w)};D.visit=
function(b){ee(b,D,m,n,v,w)};D.find=function(b){return lc(D,b[0],b[1],m,n,v,w)};t=-1;if(null==a){for(;++t<A;)f(D,b[t],y[t],z[t],m,n,v,w);--t}else b.forEach(D.add);y=z=b=x=null;return D}var g=Te,h=Ad,r;if(r=arguments.length)return g=qb,h=Hh,3===r&&(e=c,d=a,c=a=0),f(b);f.x=function(b){return arguments.length?(g=b,f):g};f.y=function(b){return arguments.length?(h=b,f):h};f.extent=function(b){if(!arguments.length)return null==a?null:[[a,c],[d,e]];null==b?a=c=d=e=null:(a=+b[0][0],c=+b[0][1],d=+b[1][0],
e=+b[1][1]);return f};f.size=function(b){if(!arguments.length)return null==a?null:[d-a,e-c];null==b?a=c=d=e=null:(a=c=0,d=+b[0],e=+b[1]);return f};return f};S.interpolateRgb=Ab;S.interpolateObject=hc;S.interpolateNumber=pd;S.interpolateString=qd;var Cg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yi=new RegExp(Cg.source,"g");S.interpolate=fe;S.interpolators=[function(b,a){var c=typeof a;return("string"===c?Xg.has(a.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(a)?Ab:qd:a instanceof ja?Ab:Array.isArray(a)?
Fg:"object"===c&&isNaN(a)?hc:pd)(b,a)}];S.interpolateArray=Fg;var jh=function(){return y},Ih=S.map({linear:jh,poly:function(b){return function(a){return Math.pow(a,b)}},quad:function(){return Ac},cubic:function(){return lh},sin:function(){return gg},exp:function(){return ge},circle:function(){return Ii},elastic:function(b,a){2>arguments.length&&(a=.45);if(arguments.length)var c=a/fd*Math.asin(1/b);else b=1,c=a/4;return function(d){return 1+b*Math.pow(2,-10*d)*Math.sin((d-c)*fd/a)}},back:function(b){b||
(b=1.70158);return function(a){return a*a*((b+1)*a-b)}},bounce:function(){return he}}),dj=S.map({"in":y,out:jc,"in-out":Jf,"out-in":function(b){return Jf(jc(b))}});S.ease=function(b){var a=b.indexOf("-"),c=0<=a?b.slice(0,a):b;a=0<=a?b.slice(a+1):"in";c=Ih.get(c)||jh;a=dj.get(a)||y;return ed(a(c.apply(null,ne.call(arguments,1))))};S.interpolateHcl=function(b,a){b=S.hcl(b);a=S.hcl(a);var c=b.h,d=b.c,e=b.l,f=a.h-c,g=a.c-d,h=a.l-e;isNaN(g)&&(g=0,d=isNaN(d)?a.c:d);isNaN(f)?(f=0,c=isNaN(c)?a.h:c):180<f?
f-=360:-180>f&&(f+=360);return function(b){return xa(c+f*b,d+g*b,e+h*b)+""}};S.interpolateHsl=function(b,a){b=S.hsl(b);a=S.hsl(a);var c=b.h,d=b.s,e=b.l,f=a.h-c,g=a.s-d,h=a.l-e;isNaN(g)&&(g=0,d=isNaN(d)?a.s:d);isNaN(f)?(f=0,c=isNaN(c)?a.h:c):180<f?f-=360:-180>f&&(f+=360);return function(b){return ka(c+f*b,d+g*b,e+h*b)+""}};S.interpolateLab=function(b,a){b=S.lab(b);a=S.lab(a);var c=b.l,d=b.a,e=b.b,f=a.l-c,g=a.a-d,h=a.b-e;return function(b){return sa(c+f*b,d+g*b,e+h*b)+""}};S.interpolateRound=Kh;S.transform=
function(b){var a=Dc.createElementNS(S.ns.prefix.svg,"g");return(S.transform=function(b){if(null!=b){a.setAttribute("transform",b);var c=a.transform.baseVal.consolidate()}return new uf(c?c.matrix:ph)})(b)};uf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ph={a:1,b:0,c:0,d:1,e:0,f:0};S.interpolateTransform=Sa;S.layout={};S.layout.bundle=function(){return function(b){for(var a=[],c=-1,d=b.length;++c<d;)a.push(Qh(b[c]));
return a}};S.layout.chord=function(){function b(){var b={},c=[],u=S.range(g),t=[],m,n;d=[];e=[];var v=0;for(m=-1;++m<g;){var w=0;for(n=-1;++n<g;)w+=f[m][n];c.push(w);t.push(S.range(g));v+=w}r&&u.sort(function(b,a){return r(c[b],c[a])});l&&t.forEach(function(b,a){b.sort(function(b,c){return l(f[a][b],f[a][c])})});v=(fd-h*g)/v;w=0;for(m=-1;++m<g;){var y=w;for(n=-1;++n<g;){var z=u[m],A=t[z][n],x=f[z][A],B=w,D=w+=x*v;b[z+"-"+A]={index:z,subindex:A,startAngle:B,endAngle:D,value:x}}e[z]={index:z,startAngle:y,
endAngle:w,value:c[z]};w+=h}for(m=-1;++m<g;)for(n=m-1;++n<g;)u=b[m+"-"+n],t=b[n+"-"+m],(u.value||t.value)&&d.push(u.value<t.value?{source:t,target:u}:{source:u,target:t});k&&a()}function a(){d.sort(function(b,a){return k((b.source.value+b.target.value)/2,(a.source.value+a.target.value)/2)})}var c={},d,e,f,g,h=0,r,l,k;c.matrix=function(b){if(!arguments.length)return f;g=(f=b)&&f.length;d=e=null;return c};c.padding=function(b){if(!arguments.length)return h;h=b;d=e=null;return c};c.sortGroups=function(b){if(!arguments.length)return r;
r=b;d=e=null;return c};c.sortSubgroups=function(b){if(!arguments.length)return l;l=b;d=null;return c};c.sortChords=function(b){if(!arguments.length)return k;k=b;d&&a();return c};c.chords=function(){d||b();return d};c.groups=function(){e||b();return e};return c};S.layout.force=function(){function b(b){return function(a,c,d,e){if(a.point!==b){d=a.cx-b.x;var f=a.cy-b.y;c=e-c;e=d*d+f*f;if(c*c/n<e)return e<t&&(c=a.charge/e,b.px-=d*c,b.py-=f*c),!0;a.point&&e&&e<t&&(c=a.pointCharge/e,b.px-=d*c,b.py-=f*c)}return!a.charge}}
function a(b){b.px=S.event.x;b.py=S.event.y;c.resume()}var c={},d=S.dispatch("start","tick","end"),e,f=[1,1],g,h,r=.9,l=Ce,k=Mi,u=-30,t=ti,m=.1,n=.64,v=[],w=[],z,A,x;c.tick=function(){if(.005>(h*=.99))return e=null,d.end({type:"end",alpha:h=0}),!0;var a=v.length,c=w.length,g,l;for(g=0;g<c;++g){var k=w[g];var t=k.source;var n=k.target;var y=n.x-t.x;var B=n.y-t.y;if(l=y*y+B*B)l=h*A[g]*((l=Math.sqrt(l))-z[g])/l,y*=l,B*=l,n.x-=y*(l=t.weight+n.weight?t.weight/(t.weight+n.weight):.5),n.y-=B*l,t.x+=y*(l=
1-l),t.y+=B*l}if(l=h*m)if(y=f[0]/2,B=f[1]/2,g=-1,l)for(;++g<a;)k=v[g],k.x+=(y-k.x)*l,k.y+=(B-k.y)*l;if(u)for(ig(c=S.geom.quadtree(v),h,x),g=-1;++g<a;)(k=v[g]).fixed||c.visit(b(k));for(g=-1;++g<a;)k=v[g],k.fixed?(k.x=k.px,k.y=k.py):(k.x-=(k.px-(k.px=k.x))*r,k.y-=(k.py-(k.py=k.y))*r);d.tick({type:"tick",alpha:h})};c.nodes=function(b){if(!arguments.length)return v;v=b;return c};c.links=function(b){if(!arguments.length)return w;w=b;return c};c.size=function(b){if(!arguments.length)return f;f=b;return c};
c.linkDistance=function(b){if(!arguments.length)return l;l="function"===typeof b?b:+b;return c};c.distance=c.linkDistance;c.linkStrength=function(b){if(!arguments.length)return k;k="function"===typeof b?b:+b;return c};c.friction=function(b){if(!arguments.length)return r;r=+b;return c};c.charge=function(b){if(!arguments.length)return u;u="function"===typeof b?b:+b;return c};c.chargeDistance=function(b){if(!arguments.length)return Math.sqrt(t);t=b*b;return c};c.gravity=function(b){if(!arguments.length)return m;
m=+b;return c};c.theta=function(b){if(!arguments.length)return Math.sqrt(n);n=b*b;return c};c.alpha=function(b){if(!arguments.length)return h;b=+b;h?0<b?h=b:(e.c=null,e.t=NaN,e=null,d.end({type:"end",alpha:h=0})):0<b&&(d.start({type:"start",alpha:h=b}),e=zb(c.tick));return c};c.start=function(){function b(b,c){if(!r){r=Array(d);for(g=0;g<d;++g)r[g]=[];for(g=0;g<e;++g){var f=w[g];r[f.source.index].push(f.target);r[f.target.index].push(f.source)}}f=r[a];for(var g=-1,h=f.length,l;++g<h;)if(!isNaN(l=
f[g][b]))return l;return Math.random()*c}var a,d=v.length,e=w.length,g=f[0],h=f[1],r,t;for(a=0;a<d;++a)(t=v[a]).index=a,t.weight=0;for(a=0;a<e;++a)t=w[a],"number"==typeof t.source&&(t.source=v[t.source]),"number"==typeof t.target&&(t.target=v[t.target]),++t.source.weight,++t.target.weight;for(a=0;a<d;++a)t=v[a],isNaN(t.x)&&(t.x=b("x",g)),isNaN(t.y)&&(t.y=b("y",h)),isNaN(t.px)&&(t.px=t.x),isNaN(t.py)&&(t.py=t.y);z=[];if("function"===typeof l)for(a=0;a<e;++a)z[a]=+l.call(this,w[a],a);else for(a=0;a<
e;++a)z[a]=l;A=[];if("function"===typeof k)for(a=0;a<e;++a)A[a]=+k.call(this,w[a],a);else for(a=0;a<e;++a)A[a]=k;x=[];if("function"===typeof u)for(a=0;a<d;++a)x[a]=+u.call(this,v[a],a);else for(a=0;a<d;++a)x[a]=u;return c.resume()};c.resume=function(){return c.alpha(.1)};c.stop=function(){return c.alpha(0)};c.drag=function(){g||(g=S.behavior.drag().origin(y).on("dragstart.force",We).on("drag.force",a).on("dragend.force",nh));if(!arguments.length)return g;this.on("mouseover.force",kh).on("mouseout.force",
Ni).call(g)};return S.rebind(c,d,"on")};var Ce=20,Mi=1,ti=Infinity;S.layout.hierarchy=function(){function b(e){var f=[e],g=[],h;for(e.depth=0;null!=(h=f.pop());)if(g.push(h),(l=c.call(b,h,h.depth))&&(r=l.length)){for(var r,l,k;0<=--r;)f.push(k=l[r]),k.parent=h,k.depth=h.depth+1;d&&(h.value=0);h.children=l}else d&&(h.value=+d.call(b,h,h.depth)||0),delete h.children;Ob(e,function(b){var c,e;a&&(c=b.children)&&c.sort(a);d&&(e=b.parent)&&(e.value+=b.value)});return g}var a=Eb,c=Qe,d=dh;b.sort=function(c){if(!arguments.length)return a;
a=c;return b};b.children=function(a){if(!arguments.length)return c;c=a;return b};b.value=function(a){if(!arguments.length)return d;d=a;return b};b.revalue=function(a){d&&(be(a,function(b){b.children&&(b.value=0)}),Ob(a,function(a){var c;a.children||(a.value=+d.call(b,a,a.depth)||0);if(c=a.parent)c.value+=a.value}));return a};return b};S.layout.partition=function(){function b(a,c,d,e){var f=a.children;a.x=c;a.y=a.depth*e;a.dx=d;a.dy=e;if(f&&(h=f.length)){var g=-1,h,r;for(d=a.value?d/a.value:0;++g<
h;)b(r=f[g],c,a=r.value*d,e),c+=a}}function a(b){b=b.children;var c=0;if(b&&(e=b.length))for(var d=-1,e;++d<e;)c=Math.max(c,a(b[d]));return 1+c}function c(c,f){c=d.call(this,c,f);b(c[0],0,e[0],e[1]/a(c[0]));return c}var d=S.layout.hierarchy(),e=[1,1];c.size=function(b){if(!arguments.length)return e;e=b;return c};return rc(c,d)};S.layout.pie=function(){function b(g){var h=g.length,r=g.map(function(c,d){return+a.call(b,c,d)}),l=+("function"===typeof d?d.apply(this,arguments):d),k=("function"===typeof e?
e.apply(this,arguments):e)-l,u=Math.min(Math.abs(k)/h,+("function"===typeof f?f.apply(this,arguments):f)),t=u*(0>k?-1:1),m=S.sum(r),n=m?(k-h*t)/m:0;h=S.range(h);var v=[],w;null!=c&&h.sort(c===eh?function(b,a){return r[a]-r[b]}:function(b,a){return c(g[b],g[a])});h.forEach(function(b){v[b]={data:g[b],value:w=r[b],startAngle:l,endAngle:l+=w*n+t,padAngle:u}});return v}var a=Number,c=eh,d=0,e=fd,f=0;b.value=function(c){if(!arguments.length)return a;a=c;return b};b.sort=function(a){if(!arguments.length)return c;
c=a;return b};b.startAngle=function(a){if(!arguments.length)return d;d=a;return b};b.endAngle=function(a){if(!arguments.length)return e;e=a;return b};b.padAngle=function(a){if(!arguments.length)return f;f=a;return b};return b};var eh={};S.layout.stack=function(){function b(h,r){if(!(t=h.length))return h;var l=h.map(function(c,d){return a.call(b,c,d)}),k=l.map(function(a){return a.map(function(a,c){return[f.call(b,a,c),g.call(b,a,c)]})}),u=c.call(b,k,r);l=S.permute(l,u);k=S.permute(k,u);r=d.call(b,
k,r);u=l[0].length;var t,m,n,v;for(n=0;n<u;++n)for(e.call(b,l[0][n],v=r[n],k[0][n][1]),m=1;m<t;++m)e.call(b,l[m][n],v+=k[m-1][n][1],k[m][n][1]);return h}var a=y,c=Ee,d=qh,e=jg,f=$d,g=Bi;b.values=function(c){if(!arguments.length)return a;a=c;return b};b.order=function(a){if(!arguments.length)return c;c="function"===typeof a?a:Ag.get(a)||Ee;return b};b.offset=function(a){if(!arguments.length)return d;d="function"===typeof a?a:zd.get(a)||qh;return b};b.x=function(a){if(!arguments.length)return f;f=a;
return b};b.y=function(a){if(!arguments.length)return g;g=a;return b};b.out=function(a){if(!arguments.length)return e;e=a;return b};return b};var Ag=S.map({"inside-out":function(b){var a=b.length,c=b.map(Ci),d=b.map(ej),e=S.range(a).sort(function(b,a){return c[b]-c[a]}),f=0,g=0,h=[],r=[];for(b=0;b<a;++b){var l=e[b];f<g?(f+=d[l],h.push(l)):(g+=d[l],r.push(l))}return r.reverse().concat(h)},reverse:function(b){return S.range(b.length).reverse()},"default":Ee}),zd=S.map({silhouette:function(b){var a=
b.length,c=b[0].length,d=[],e=0,f,g,h,r=[];for(g=0;g<c;++g){for(h=f=0;f<a;f++)h+=b[f][g][1];h>e&&(e=h);d.push(h)}for(g=0;g<c;++g)r[g]=(e-d[g])/2;return r},wiggle:function(b){var a=b.length,c=b[0],d=c.length,e,f,g,h,r,l,k,u=[];u[0]=l=k=0;for(f=1;f<d;++f){for(g=e=0;e<a;++e)g+=b[e][f][1];var t=e=0;for(r=c[f][0]-c[f-1][0];e<a;++e){var m=0;for(h=(b[e][f][1]-b[e][f-1][1])/(2*r);m<e;++m)h+=(b[m][f][1]-b[m][f-1][1])/r;t+=h*b[e][f][1]}u[f]=l-=g?t/g*r:0;l<k&&(k=l)}for(f=0;f<d;++f)u[f]-=k;return u},expand:function(b){var a=
b.length,c=b[0].length,d=1/a,e,f,g,h=[];for(f=0;f<c;++f){for(g=e=0;e<a;e++)g+=b[e][f][1];if(g)for(e=0;e<a;e++)b[e][f][1]/=g;else for(e=0;e<a;e++)b[e][f][1]=d}for(f=0;f<c;++f)h[f]=0;return h},zero:qh});S.layout.histogram=function(){function b(b,f){var g=[],h=b.map(c,this),r=d.call(this,h,f),l=e.call(this,r,h,f);f=-1;for(var k=h.length,u=l.length-1,t=a?1:1/k;++f<u;){var m=g[f]=[];m.dx=l[f+1]-(m.x=l[f]);m.y=0}if(0<u)for(f=-1;++f<k;)m=h[f],m>=r[0]&&m<=r[1]&&(m=g[S.bisect(l,m,1,u)-1],m.y+=t,m.push(b[f]));
return g}var a=!0,c=Number,d=li,e=ki;b.value=function(a){if(!arguments.length)return c;c=a;return b};b.range=function(a){if(!arguments.length)return d;d=Ja(a);return b};b.bins=function(a){if(!arguments.length)return e;e="number"===typeof a?function(b){return Rh(b,a)}:Ja(a);return b};b.frequency=function(c){if(!arguments.length)return a;a=!!c;return b};return b};S.layout.pack=function(){function b(b,f){b=a.call(this,b,f);f=b[0];var g=d[0],h=d[1],r=null==e?Math.sqrt:"function"===typeof e?e:function(){return e};
f.x=f.y=0;Ob(f,function(b){b.r=+r(b.value)});Ob(f,ug);if(c){var l=c*(e?1:Math.max(2*f.r/g,2*f.r/h))/2;Ob(f,function(b){b.r+=l});Ob(f,ug);Ob(f,function(b){b.r-=l})}Rg(f,g/2,h/2,e?1:1/Math.max(2*f.r/g,2*f.r/h));return b}var a=S.layout.hierarchy().sort(Ng),c=0,d=[1,1],e;b.size=function(a){if(!arguments.length)return d;d=a;return b};b.radius=function(a){if(!arguments.length)return e;e=null==a||"function"===typeof a?a:+a;return b};b.padding=function(a){if(!arguments.length)return c;c=+a;return b};return rc(b,
a)};S.layout.tree=function(){function b(b,l){b=f.call(this,b,l);l=b[0];var k=a(l);Ob(k,c);k.parent.m=-k.z;be(k,d);if(r)be(l,e);else{var u=l,t=l,m=l;be(l,function(b){b.x<u.x&&(u=b);b.x>t.x&&(t=b);b.depth>m.depth&&(m=b)});var n=g(u,t)/2-u.x,v=h[0]/(t.x+g(t,u)/2+n),w=h[1]/(m.depth||1);be(l,function(b){b.x=(b.x+n)*v;b.y=b.depth*w})}return b}function a(b){b={A:null,children:[b]};for(var a=[b],c;null!=(c=a.pop());)for(var d=c.children,e,f=0,g=d.length;f<g;++f)a.push((d[f]=e={_:d[f],parent:c,children:(e=
d[f].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:f}).a=e);return b.children[0]}function c(b){var a=b.children,c=b.parent.children,d=b.i?c[b.i-1]:null;if(a.length){for(var e=0,f=0,h=b.children,r=h.length,l;0<=--r;)l=h[r],l.z+=e,l.m+=e,e+=l.s+(f+=l.c);a=(a[0].z+a[a.length-1].z)/2;d?(b.z=d.z+g(b._,d._),b.m=b.z-a):b.z=a}else d&&(b.z=d.z+g(b._,d._));a=b.parent;c=b.parent.A||c[0];if(d){f=e=b;h=e.parent.children[0];r=e.m;l=f.m;for(var k=d.m,u=h.m,t;d=wf(d),e=og(e),d&&e;){h=og(h);f=wf(f);
f.a=b;t=d.z+k-e.z-r+g(d._,e._);if(0<t){var m=d.a.parent===b.parent?d.a:c,n=b,v=t,w=v/(n.i-m.i);n.c-=w;n.s+=v;m.c+=w;n.z+=v;n.m+=v;r+=t;l+=t}k+=d.m;r+=e.m;u+=h.m;l+=f.m}d&&!wf(f)&&(f.t=d,f.m+=k-l);e&&!og(h)&&(h.t=e,h.m+=r-u,c=b)}a.A=c}function d(b){b._.x=b.z+b.parent.m;b.m+=b.parent.m}function e(b){b.x*=h[0];b.y=b.depth*h[1]}var f=S.layout.hierarchy().sort(null).value(null),g=vh,h=[1,1],r=null;b.separation=function(a){if(!arguments.length)return g;g=a;return b};b.size=function(a){if(!arguments.length)return r?
null:h;r=null==(h=a)?e:null;return b};b.nodeSize=function(a){if(!arguments.length)return r?h:null;r=null==(h=a)?null:e;return b};return rc(b,f)};S.layout.cluster=function(){function b(b,f){b=a.call(this,b,f);var g=b[0],h,r=0;Ob(g,function(b){var a=b.children;a&&a.length?(b.x=ta(a),b.y=ke(a)):(b.x=h?r+=c(b,h):0,b.y=0,h=b)});f=La(g);var l=Vd(g),k=f.x-c(f,l)/2,u=l.x+c(l,f)/2;Ob(g,e?function(b){b.x=(b.x-g.x)*d[0];b.y=(g.y-b.y)*d[1]}:function(b){b.x=(b.x-k)/(u-k)*d[0];b.y=(1-(g.y?b.y/g.y:1))*d[1]});return b}
var a=S.layout.hierarchy().sort(null).value(null),c=vh,d=[1,1],e=!1;b.separation=function(a){if(!arguments.length)return c;c=a;return b};b.size=function(a){if(!arguments.length)return e?null:d;e=null==(d=a);return b};b.nodeSize=function(a){if(!arguments.length)return e?d:null;e=null!=(d=a);return b};return rc(b,a)};S.layout.treemap=function(){function b(b,a){for(var c=-1,d=b.length,e,f;++c<d;)f=(e=b[c]).value*(0>a?0:a),e.area=isNaN(f)||0>=f?0:f}function a(c){var e=c.children;if(e&&e.length){var f=
l(c),g=[],h=e.slice(),r=Infinity,k,u="slice"===t?f.dx:"dice"===t?f.dy:"slice-dice"===t?c.depth&1?f.dy:f.dx:Math.min(f.dx,f.dy);b(h,f.dx*f.dy/c.value);for(g.area=0;0<(c=h.length);){g.push(c=h[c-1]);g.area+=c.area;if(!(c="squarify"!==t)){c=u;for(var n=g.area,v=0,w=Infinity,y=-1,z=g.length;++y<z;)if(k=g[y].area)k<w&&(w=k),k>v&&(v=k);n*=n;c*=c;c=(k=n?Math.max(c*v*m/n,n/(c*w*m)):Infinity)<=r}c?(h.pop(),r=k):(g.area-=g.pop().area,d(g,u,f,!1),u=Math.min(f.dx,f.dy),g.length=g.area=0,r=Infinity)}g.length&&
(d(g,u,f,!0),g.length=g.area=0);e.forEach(a)}}function c(a){var e=a.children;if(e&&e.length){var f=l(a),g=e.slice(),h=[];b(g,f.dx*f.dy/a.value);for(h.area=0;a=g.pop();)h.push(a),h.area+=a.area,null!=a.z&&(d(h,a.z?f.dx:f.dy,f,!g.length),h.length=h.area=0);e.forEach(c)}}function d(b,a,c,d){var e=-1,f=b.length,h=c.x,r=c.y,l=a?g(b.area/a):0;if(a==c.dx){if(d||l>c.dy)l=c.dy;for(;++e<f;){var k=b[e];k.x=h;k.y=r;k.dy=l;h+=k.dx=Math.min(c.x+c.dx-h,l?g(k.area/l):0)}k.z=!0;k.dx+=c.x+c.dx-h;c.y+=l;c.dy-=l}else{if(d||
l>c.dx)l=c.dx;for(;++e<f;)k=b[e],k.x=h,k.y=r,k.dx=l,r+=k.dy=Math.min(c.y+c.dy-r,l?g(k.area/l):0);k.z=!1;k.dy+=c.y+c.dy-r;c.x+=l;c.dx-=l}}function e(d){d=u||f(d);var e=d[0];e.x=e.y=0;e.value?(e.dx=h[0],e.dy=h[1]):e.dx=e.dy=0;u&&f.revalue(e);b([e],e.dx*e.dy/e.value);(u?c:a)(e);k&&(u=d);return d}var f=S.layout.hierarchy(),g=Math.round,h=[1,1],r=null,l=Rf,k=!1,u,t="squarify",m=.5*(1+Math.sqrt(5));e.size=function(b){if(!arguments.length)return h;h=b;return e};e.padding=function(b){function a(a){var c=
b.call(e,a,a.depth);return null==c?Rf(a):oi(a,"number"===typeof c?[c,c,c,c]:c)}function c(a){return oi(a,b)}if(!arguments.length)return r;var d;l=null==(r=b)?Rf:"function"===(d=typeof b)?a:"number"===d?(b=[b,b,b,b],c):c;return e};e.round=function(b){if(!arguments.length)return g!=Number;g=b?Math.round:Number;return e};e.sticky=function(b){if(!arguments.length)return k;k=b;u=null;return e};e.ratio=function(b){if(!arguments.length)return m;m=b;return e};e.mode=function(b){if(!arguments.length)return t;
t=b+"";return e};return rc(e,f)};S.random={normal:function(b,a){var c=arguments.length;2>c&&(a=1);1>c&&(b=0);return function(){do{var c=2*Math.random()-1;var d=2*Math.random()-1;d=c*c+d*d}while(!d||1<d);return b+a*c*Math.sqrt(-2*Math.log(d)/d)}},logNormal:function(){var b=S.random.normal.apply(S,arguments);return function(){return Math.exp(b())}},bates:function(b){var a=S.random.irwinHall(b);return function(){return a()/b}},irwinHall:function(b){return function(){for(var a=0,c=0;c<b;c++)a+=Math.random();
return a}}};S.scale={};var mf={floor:y,ceil:y};S.scale.linear=function(){return le([0,1],[0,1],fe,!1)};var Tc={s:1,g:1,p:1,r:1,e:1};S.scale.log=function(){return Gd(S.scale.linear().domain([0,1]),10,!0,[1,10])};var Rd=S.format(".0e"),gh={floor:function(b){return-Math.ceil(-b)},ceil:function(b){return-Math.floor(-b)}};S.scale.pow=function(){return Fe(S.scale.linear(),1,[0,1])};S.scale.sqrt=function(){return S.scale.pow().exponent(.5)};S.scale.ordinal=function(){return vg([],{t:"range",a:[[]]})};S.scale.category10=
function(){return S.scale.ordinal().range(Fh)};S.scale.category20=function(){return S.scale.ordinal().range(If)};S.scale.category20b=function(){return S.scale.ordinal().range(hh)};S.scale.category20c=function(){return S.scale.ordinal().range(bi)};var Fh=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Aa),If=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,
1556175,10410725].map(Aa),hh=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Aa),bi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Aa);S.scale.quantile=function(){return tc([],[])};S.scale.quantize=function(){return Je(0,1,[0,1])};S.scale.threshold=
function(){return Yh([.5],[0,1])};S.scale.identity=function(){return Ge([0,1])};S.svg={};S.svg.arc=function(){function b(){var b=Math.max(0,+c.apply(this,arguments)),l=Math.max(0,+d.apply(this,arguments)),k=g.apply(this,arguments)-rb,u=h.apply(this,arguments)-rb,t=Math.abs(u-k),m=k>u?0:1;if(l<b){var n=l;l=b;b=n}if(t>=Uh)return a(l,m)+(b?a(b,1-m):"")+"Z";var v,w=0,y=0,z=[];if(v=(+r.apply(this,arguments)||0)/2){var A=f===Se?Math.sqrt(b*b+l*l):+f.apply(this,arguments);m||(y*=-1);l&&(y=aa(A/l*Math.sin(v)));
b&&(w=aa(A/b*Math.sin(v)))}if(l){A=l*Math.cos(k+y);v=l*Math.sin(k+y);var x=l*Math.cos(u-y);var B=l*Math.sin(u-y);var D=Math.abs(u-k-2*y)<=Wa?0:1;y&&Ke(A,v,x,B)===m^D&&(x=(k+u)/2,A=l*Math.cos(x),v=l*Math.sin(x),x=B=null)}else A=v=0;if(b){y=b*Math.cos(u-w);var C=b*Math.sin(u-w);var q=b*Math.cos(k+w);var p=b*Math.sin(k+w);var I=Math.abs(k-u+2*w)<=Wa?0:1;w&&Ke(y,C,q,p)===1-m^I&&(q=(k+u)/2,y=b*Math.cos(q),C=b*Math.sin(q),q=p=null)}else y=C=0;1E-6<t&&.001<(n=Math.min(Math.abs(l-b)/2,+e.apply(this,arguments)))?
(D=b<l^m?0:1,I=k=n,t<Wa&&(t=null==q?[y,C]:null==x?[A,v]:Bd([A,v],[q,p],[x,B],[y,C]),I=A-t[0],k=v-t[1],u=x-t[0],w=B-t[1],k=1/Math.sin(Math.acos((I*u+k*w)/(Math.sqrt(I*I+k*k)*Math.sqrt(u*u+w*w)))/2),t=Math.sqrt(t[0]*t[0]+t[1]*t[1]),I=Math.min(n,(b-t)/(k-1)),k=Math.min(n,(l-t)/(k+1))),null!=x?(t=Td(null==q?[y,C]:[q,p],[A,v],l,k,m),u=Td([x,B],[y,C],l,k,m),n===k?z.push("M",t[0],"A",k,",",k," 0 0,",D," ",t[1],"A",l,",",l," 0 ",1-m^Ke(t[1][0],t[1][1],u[1][0],u[1][1]),",",m," ",u[1],"A",k,",",k," 0 0,",D,
" ",u[0]):z.push("M",t[0],"A",k,",",k," 0 1,",D," ",u[0])):z.push("M",A,",",v),null!=q?(l=Td([A,v],[q,p],b,-I,m),x=Td([y,C],null==x?[A,v]:[x,B],b,-I,m),n===I?z.push("L",x[0],"A",I,",",I," 0 0,",D," ",x[1],"A",b,",",b," 0 ",m^Ke(x[1][0],x[1][1],l[1][0],l[1][1]),",",1-m," ",l[1],"A",I,",",I," 0 0,",D," ",l[0]):z.push("L",x[0],"A",I,",",I," 0 0,",D," ",l[0])):z.push("L",y,",",C)):(z.push("M",A,",",v),null!=x&&z.push("A",l,",",l," 0 ",D,",",m," ",x,",",B),z.push("L",y,",",C),null!=q&&z.push("A",b,",",
b," 0 ",I,",",1-m," ",q,",",p));z.push("Z");return z.join("")}function a(b,a){return"M0,"+b+"A"+b+","+b+" 0 1,"+a+" 0,"+-b+"A"+b+","+b+" 0 1,"+a+" 0,"+b}var c=wh,d=Vc,e=fj,f=Se,g=He,h=lg,r=Tf;b.innerRadius=function(a){if(!arguments.length)return c;c=Ja(a);return b};b.outerRadius=function(a){if(!arguments.length)return d;d=Ja(a);return b};b.cornerRadius=function(a){if(!arguments.length)return e;e=Ja(a);return b};b.padRadius=function(a){if(!arguments.length)return f;f=a==Se?Se:Ja(a);return b};b.startAngle=
function(a){if(!arguments.length)return g;g=Ja(a);return b};b.endAngle=function(a){if(!arguments.length)return h;h=Ja(a);return b};b.padAngle=function(a){if(!arguments.length)return r;r=Ja(a);return b};b.centroid=function(){var b=(+c.apply(this,arguments)+ +d.apply(this,arguments))/2,a=(+g.apply(this,arguments)+ +h.apply(this,arguments))/2-rb;return[Math.cos(a)*b,Math.sin(a)*b]};return b};var Se="auto";S.svg.line=function(){return pi(y)};var fh=S.map({linear:Ec,"linear-closed":Qi,step:function(b){for(var a=
0,c=b.length,d=b[0],e=[d[0],",",d[1]];++a<c;)e.push("H",(d[0]+(d=b[a])[0])/2,"V",d[1]);1<c&&e.push("H",d[0]);return e.join("")},"step-before":Zh,"step-after":pg,basis:Ld,"basis-open":function(b){if(4>b.length)return Ec(b);for(var a=[],c=-1,d=b.length,e,f=[0],g=[0];3>++c;)e=b[c],f.push(e[0]),g.push(e[1]);a.push(me(Kc,f)+","+me(Kc,g));for(--c;++c<d;)e=b[c],f.shift(),f.push(e[0]),g.shift(),g.push(e[1]),Sb(a,f,g);return a.join("")},"basis-closed":function(b){for(var a,c=-1,d=b.length,e=d+4,f,g=[],h=[];4>
++c;)f=b[c%d],g.push(f[0]),h.push(f[1]);a=[me(Kc,g),",",me(Kc,h)];for(--c;++c<e;)f=b[c%d],g.shift(),g.push(f[0]),h.shift(),h.push(f[1]),Sb(a,g,h);return a.join("")},bundle:function(b,a){var c=b.length-1;if(c)for(var d=b[0][0],e=b[0][1],f=b[c][0]-d,g=b[c][1]-e,h=-1,r,l;++h<=c;)r=b[h],l=h/c,r[0]=a*r[0]+(1-a)*(d+l*f),r[1]=a*r[1]+(1-a)*(e+l*g);return Ld(b)},cardinal:function(b,a){return 3>b.length?Ec(b):b[0]+Uf(b,rg(b,a))},"cardinal-open":function(b,a){return 4>b.length?Ec(b):b[1]+Uf(b.slice(1,-1),rg(b,
a))},"cardinal-closed":function(b,a){return 3>b.length?Qi(b):b[0]+Uf((b.push(b[0]),b),rg([b[b.length-2]].concat(b,[b[1]]),a))},monotone:function(b){if(3>b.length)b=Ec(b);else{var a=b[0],c=[],d;var e=0;var f=b.length-1;var g=[];var h=b[1];for(d=g[0]=zf(b[0],h);++e<f;)g[e]=(d+(d=zf(h,h=b[e+1])))/2;g[e]=d;for(var r=-1,l=b.length-1;++r<l;)e=zf(b[r],b[r+1]),1E-6>Xa(e)?g[r]=g[r+1]=0:(f=g[r]/e,h=g[r+1]/e,d=f*f+h*h,9<d&&(d=3*e/Math.sqrt(d),g[r]=d*f,g[r+1]=d*h));for(r=-1;++r<=l;)d=(b[Math.min(l,r+1)][0]-b[Math.max(0,
r-1)][0])/(6*(1+g[r]*g[r])),c.push([d||0,g[r]*d||0]);b=a+Uf(b,c)}return b}});fh.forEach(function(b,a){a.key=b;a.closed=/-closed$/.test(b)});var ci=[0,2/3,1/3,0],Eh=[0,1/3,2/3,0],Kc=[0,1/6,2/3,1/6];S.svg.line.radial=function(){var b=pi(yc);b.radius=b.x;delete b.x;b.angle=b.y;delete b.y;return b};Zh.reverse=pg;pg.reverse=Zh;S.svg.area=function(){return kf(y)};S.svg.area.radial=function(){var b=kf(yc);b.radius=b.x;delete b.x;b.innerRadius=b.x0;delete b.x0;b.outerRadius=b.x1;delete b.x1;b.angle=b.y;delete b.y;
b.startAngle=b.y0;delete b.y0;b.endAngle=b.y1;delete b.y1;return b};S.svg.chord=function(){function b(b,f){var g=a(this,d,b,f);b=a(this,e,b,f);return"M"+g.p0+c(g.r,g.p1,g.a1-g.a0)+(g.a0==b.a0&&g.a1==b.a1?"Q 0,0 "+g.p0:"Q 0,0 "+b.p0+c(b.r,b.p1,b.a1-b.a0)+("Q 0,0 "+g.p0))+"Z"}function a(b,a,c,d){var e=a.call(b,c,d);a=f.call(b,e,d);c=g.call(b,e,d)-rb;b=h.call(b,e,d)-rb;return{r:a,a0:c,a1:b,p0:[a*Math.cos(c),a*Math.sin(c)],p1:[a*Math.cos(b),a*Math.sin(b)]}}function c(b,a,c){return"A"+b+","+b+" 0 "+ +(c>
Wa)+",1 "+a}var d=$f,e=Re,f=Le,g=He,h=lg;b.radius=function(a){if(!arguments.length)return f;f=Ja(a);return b};b.source=function(a){if(!arguments.length)return d;d=Ja(a);return b};b.target=function(a){if(!arguments.length)return e;e=Ja(a);return b};b.startAngle=function(a){if(!arguments.length)return g;g=Ja(a);return b};b.endAngle=function(a){if(!arguments.length)return h;h=Ja(a);return b};return b};S.svg.diagonal=function(){function b(b,e){var f=a.call(this,b,e);b=c.call(this,b,e);e=(f.y+b.y)/2;f=
[f,{x:f.x,y:e},{x:b.x,y:e},b];f=f.map(d);return"M"+f[0]+"C"+f[1]+" "+f[2]+" "+f[3]}var a=$f,c=Re,d=Jd;b.source=function(c){if(!arguments.length)return a;a=Ja(c);return b};b.target=function(a){if(!arguments.length)return c;c=Ja(a);return b};b.projection=function(a){if(!arguments.length)return d;d=a;return b};return b};S.svg.diagonal.radial=function(){var b=S.svg.diagonal(),a=Jd,c=b.projection;b.projection=function(b){return arguments.length?c(Ti(a=b)):a};return b};S.svg.symbol=function(){function b(b,
d){return(gc.get(a.call(this,b,d))||Gi)(c.call(this,b,d))}var a=Ui,c=qi;b.type=function(c){if(!arguments.length)return a;a=Ja(c);return b};b.size=function(a){if(!arguments.length)return c;c=Ja(a);return b};return b};var gc=S.map({circle:Gi,cross:function(b){b=Math.sqrt(b/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(b){b=Math.sqrt(b/(2*Kf));var a=b*Kf;return"M0,"+-b+"L"+a+",0 0,"+b+" "+-a+",0Z"},square:function(b){b=
Math.sqrt(b)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(b){b=Math.sqrt(b/ae);var a=b*ae/2;return"M0,"+a+"L"+b+","+-a+" "+-b+","+-a+"Z"},"triangle-up":function(b){b=Math.sqrt(b/ae);var a=b*ae/2;return"M0,"+-a+"L"+b+","+a+" "+-b+","+a+"Z"}});S.svg.symbolTypes=gc.keys();var ae=Math.sqrt(3),Kf=Math.tan(30*Ra);tb.transition=function(b){var a=Lg||++Vi;b=yf(b);for(var c=[],d,e,f=Of||{time:Date.now(),ease:dc,delay:0,duration:250},g=-1,h=this.length;++g<h;){c.push(d=
[]);for(var r=this[g],l=-1,k=r.length;++l<k;)(e=r[l])&&Xf(e,l,b,a,f),d.push(e)}return Tg(c,b,a)};tb.interrupt=function(b){return this.each(null==b?cg:Zi(yf(b)))};var cg=Zi(yf()),Rb=[],Vi=0,Lg,Of;Rb.call=tb.call;Rb.empty=tb.empty;Rb.node=tb.node;Rb.size=tb.size;S.transition=function(b,a){return b&&b.transition?Lg?b.transition(a):b:S.selection().transition(b)};S.transition.prototype=Rb;Rb.select=function(b){var a=this.id,c=this.namespace,d=[],e,f,g;b=L(b);for(var h=-1,r=this.length;++h<r;){d.push(e=
[]);for(var l=this[h],k=-1,u=l.length;++k<u;)(g=l[k])&&(f=b.call(g,g.__data__,k,h))?("__data__"in g&&(f.__data__=g.__data__),Xf(f,k,c,a,g[c][a]),e.push(f)):e.push(null)}return Tg(d,c,a)};Rb.selectAll=function(b){var a=this.id,c=this.namespace,d=[],e,f;b=J(b);for(var g=-1,h=this.length;++g<h;)for(var r=this[g],l=-1,k=r.length;++l<k;)if(e=r[l]){var u=e[c][a];var t=b.call(e,e.__data__,l,g);d.push(e=[]);for(var m=-1,n=t.length;++m<n;)(f=t[m])&&Xf(f,m,c,a,u),e.push(f)}return Tg(d,c,a)};Rb.filter=function(b){var a=
[],c,d;"function"!==typeof b&&(b=T(b));for(var e=0,f=this.length;e<f;e++){a.push(c=[]);var g=this[e];for(var h=0,r=g.length;h<r;h++)(d=g[h])&&b.call(d,d.__data__,h,e)&&c.push(d)}return Tg(a,this.namespace,this.id)};Rb.tween=function(b,a){var c=this.id,d=this.namespace;return 2>arguments.length?this.node()[d][c].tween.get(b):Y(this,null==a?function(a){a[d][c].tween.remove(b)}:function(e){e[d][c].tween.set(b,a)})};Rb.attr=function(b,a){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,
h.local)}function e(b){return null==b?c:(b+="",function(){var a=this.getAttribute(h),c;return a!==b&&(c=g(a,b),function(b){this.setAttribute(h,c(b))})})}function f(b){return null==b?d:(b+="",function(){var a=this.getAttributeNS(h.space,h.local),c;return a!==b&&(c=g(a,b),function(b){this.setAttributeNS(h.space,h.local,c(b))})})}if(2>arguments.length){for(a in b)this.attr(a,b[a]);return this}var g="transform"==b?Sa:fe,h=S.ns.qualify(b);return Me(this,"attr."+b,a,h.local?f:e)};Rb.attrTween=function(b,
a){function c(b,c){var d=a.call(this,b,c,this.getAttribute(e));return d&&function(b){this.setAttribute(e,d(b))}}function d(b,c){var d=a.call(this,b,c,this.getAttributeNS(e.space,e.local));return d&&function(b){this.setAttributeNS(e.space,e.local,d(b))}}var e=S.ns.qualify(b);return this.tween("attr."+b,e.local?d:c)};Rb.style=function(b,c,d){function e(){this.style.removeProperty(b)}var f=arguments.length;if(3>f){if("string"!==typeof b){2>f&&(c="");for(d in b)this.style(d,b[d],c);return this}d=""}return Me(this,
"style."+b,c,function(c){return null==c?e:(c+="",function(){var e=a(this).getComputedStyle(this,null).getPropertyValue(b),f;return e!==c&&(f=fe(e,c),function(a){this.style.setProperty(b,f(a),d)})})})};Rb.styleTween=function(b,c,d){3>arguments.length&&(d="");return this.tween("style."+b,function(e,f){var g=c.call(this,e,f,a(this).getComputedStyle(this,null).getPropertyValue(b));return g&&function(a){this.style.setProperty(b,g(a),d)}})};Rb.text=function(b){return Me(this,"text",b,Wf)};Rb.remove=function(){var b=
this.namespace;return this.each("end.transition",function(){var a;2>this[b].count&&(a=this.parentNode)&&a.removeChild(this)})};Rb.ease=function(b){var a=this.id,c=this.namespace;if(1>arguments.length)return this.node()[c][a].ease;"function"!==typeof b&&(b=S.ease.apply(S,arguments));return Y(this,function(d){d[c][a].ease=b})};Rb.delay=function(b){var a=this.id,c=this.namespace;return 1>arguments.length?this.node()[c][a].delay:Y(this,"function"===typeof b?function(d,e,f){d[c][a].delay=+b.call(d,d.__data__,
e,f)}:(b=+b,function(d){d[c][a].delay=b}))};Rb.duration=function(b){var a=this.id,c=this.namespace;return 1>arguments.length?this.node()[c][a].duration:Y(this,"function"===typeof b?function(d,e,f){d[c][a].duration=Math.max(1,b.call(d,d.__data__,e,f))}:(b=Math.max(1,b),function(d){d[c][a].duration=b}))};Rb.each=function(b,a){var c=this.id,d=this.namespace;if(2>arguments.length){var e=Of,f=Lg;try{Lg=c,Y(this,function(a,e,f){Of=a[d][c];b.call(a,a.__data__,e,f)})}finally{Of=e,Lg=f}}else Y(this,function(e){e=
e[d][c];(e.event||(e.event=S.dispatch("start","end","interrupt"))).on(b,a)});return this};Rb.transition=function(){for(var b=this.id,a=++Vi,c=this.namespace,d=[],e,f,g,h,r=0,l=this.length;r<l;r++){d.push(e=[]);f=this[r];for(var k=0,u=f.length;k<u;k++){if(g=f[k])h=g[c][b],Xf(g,k,c,a,{time:h.time,ease:h.ease,delay:h.delay+h.duration,duration:h.duration});e.push(g)}}return Tg(d,c,a)};S.svg.axis=function(){function b(b){b.each(function(){var b=S.select(this),l=this.__chart__||a,k=this.__chart__=a.copy(),
u=null==h?k.ticks?k.ticks.apply(k,g):k.domain():h,t=null==r?k.tickFormat?k.tickFormat.apply(k,g):y:r,m=b.selectAll(".tick").data(u,k);u=m.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6);var n=S.transition(m.exit()).style("opacity",1E-6).remove(),v=S.transition(m.order()).style("opacity",1),w=Math.max(d,0)+f,z=mb(k);b=b.selectAll(".domain").data([0]);b=(b.enter().append("path").attr("class","domain"),S.transition(b));u.append("line");u.append("text");var A=u.select("line"),
x=v.select("line");m=m.select("text").text(t);var B=u.select("text"),D=v.select("text"),C="top"===c||"left"===c?-1:1;if("bottom"===c||"top"===c){t=xh;var q="x";var p="y";var I="x2";var G="y2";m.attr("dy",0>C?"0em":".71em").style("text-anchor","middle");b.attr("d","M"+z[0]+","+C*e+"V0H"+z[1]+"V"+C*e)}else t=yh,q="y",p="x",I="y2",G="x2",m.attr("dy",".32em").style("text-anchor",0>C?"end":"start"),b.attr("d","M"+C*e+","+z[0]+"H0V"+z[1]+"H"+C*e);A.attr(G,C*d);B.attr(p,C*w);x.attr(I,0).attr(G,C*d);D.attr(q,
0).attr(p,C*w);if(k.rangeBand){var E=k,Cb=E.rangeBand()/2;l=k=function(b){return E(b)+Cb}}else l.rangeBand?l=k:n.call(t,k,l);u.call(t,l,k);v.call(t,k,k)})}var a=S.scale.linear(),c=oh,d=6,e=6,f=3,g=[10],h=null,r;b.scale=function(c){if(!arguments.length)return a;a=c;return b};b.orient=function(a){if(!arguments.length)return c;c=a in Kb?a+"":oh;return b};b.ticks=function(){if(!arguments.length)return g;g=Kd(arguments);return b};b.tickValues=function(a){if(!arguments.length)return h;h=a;return b};b.tickFormat=
function(a){if(!arguments.length)return r;r=a;return b};b.tickSize=function(a){var c=arguments.length;if(!c)return d;d=+a;e=+arguments[c-1];return b};b.innerTickSize=function(a){if(!arguments.length)return d;d=+a;return b};b.outerTickSize=function(a){if(!arguments.length)return e;e=+a;return b};b.tickPadding=function(a){if(!arguments.length)return f;f=+a;return b};b.tickSubdivide=function(){return arguments.length&&b};return b};var oh="bottom",Kb={top:1,right:1,bottom:1,left:1};S.svg.brush=function(){function b(a){a.each(function(){var a=
S.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",f).on("touchstart.brush",f),g=a.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");a.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var l=a.selectAll(".resize").data(v,y);l.exit().remove();l.enter().append("g").attr("class",function(b){return"resize "+
b}).style("cursor",function(b){return cj[b]}).append("rect").attr("x",function(b){return/[ew]$/.test(b)?-3:null}).attr("y",function(b){return/^[ns]/.test(b)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");l.style("display",b.empty()?"none":null);a=S.transition(a);g=S.transition(g);h&&(l=mb(h),g.attr("x",l[0]).attr("width",l[1]-l[0]),d(a));r&&(l=mb(r),g.attr("y",l[0]).attr("height",l[1]-l[0]),e(a));c(a)})}function c(b){b.selectAll(".resize").attr("transform",function(b){return"translate("+
l[+/e$/.test(b)]+","+k[+/^s/.test(b)]+")"})}function d(b){b.select(".extent").attr("x",l[0]);b.selectAll(".extent,.n\x3erect,.s\x3erect").attr("width",l[1]-l[0])}function e(b){b.select(".extent").attr("y",k[0]);b.selectAll(".extent,.e\x3erect,.w\x3erect").attr("height",k[1]-k[0])}function f(){function f(){var b=S.mouse(y),a=!1;gd&&(b[0]+=gd[0],b[1]+=gd[1]);p||(S.event.altKey?(G||(G=[(l[0]+l[1])/2,(k[0]+k[1])/2]),E[0]=l[+(b[0]<G[0])],E[1]=k[+(b[1]<G[1])]):G=null);C&&v(b,h,0)&&(d(x),a=!0);q&&v(b,r,
1)&&(e(x),a=!0);a&&(c(x),A({type:"brush",mode:p?"move":"resize"}))}function v(b,a,c){var d=mb(a);a=d[0];var e=d[1];d=E[c];var f=c?k:l,g=f[1]-f[0];p&&(a-=d,e-=g+d);b=(c?n:m)?Math.max(a,Math.min(e,b[c])):b[c];p?a=(b+=d)+g:(G&&(d=Math.max(a,Math.min(e,2*G[c]-b))),d<b?(a=b,b=d):a=d);if(f[0]!=b||f[1]!=a)return c?t=null:u=null,f[0]=b,f[1]=a,!0}function w(){f();x.style("pointer-events","all").selectAll(".resize").style("display",b.empty()?"none":null);S.select("body").style("cursor",null);H.on("mousemove.brush",
null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);I();A({type:"brushend"})}var y=this,z=S.select(S.event.target),A=g.of(y,arguments),x=S.select(y),B=z.datum(),C=!/^(n|s)$/.test(B)&&h,q=!/^(e|w)$/.test(B)&&r,p=z.classed("extent"),I=ea(y),G,E=S.mouse(y),H=S.select(a(y)).on("keydown.brush",function(){32==S.event.keyCode&&(p||(G=null,E[0]-=l[1],E[1]-=k[1],p=2),D())}).on("keyup.brush",function(){32==S.event.keyCode&&2==p&&
(E[0]+=l[1],E[1]+=k[1],p=0,D())});if(S.event.changedTouches)H.on("touchmove.brush",f).on("touchend.brush",w);else H.on("mousemove.brush",f).on("mouseup.brush",w);x.interrupt().selectAll("*").interrupt();if(p)E[0]=l[0]-E[0],E[1]=k[0]-E[1];else if(B){var Cb=+/w$/.test(B);B=+/^n/.test(B);var gd=[l[1-Cb]-E[0],k[1-B]-E[1]];E[0]=l[Cb];E[1]=k[B]}else S.event.altKey&&(G=E.slice());x.style("pointer-events","none").selectAll(".resize").style("display",null);S.select("body").style("cursor",z.style("cursor"));
A({type:"brushstart"});f()}var g=E(b,"brushstart","brush","brushend"),h=null,r=null,l=[0,0],k=[0,0],u,t,m=!0,n=!0,v=Oh[0];b.event=function(b){b.each(function(){var b=g.of(this,arguments),a={x:l,y:k,i:u,j:t},c=this.__chart__||a;this.__chart__=a;Lg?S.select(this).transition().each("start.brush",function(){u=c.i;t=c.j;l=c.x;k=c.y;b({type:"brushstart"})}).tween("brush:brush",function(){var c=Fg(l,a.x),d=Fg(k,a.y);u=t=null;return function(e){l=a.x=c(e);k=a.y=d(e);b({type:"brush",mode:"resize"})}}).each("end.brush",
function(){u=a.i;t=a.j;b({type:"brush",mode:"resize"});b({type:"brushend"})}):(b({type:"brushstart"}),b({type:"brush",mode:"resize"}),b({type:"brushend"}))})};b.x=function(a){if(!arguments.length)return h;h=a;v=Oh[!h<<1|!r];return b};b.y=function(a){if(!arguments.length)return r;r=a;v=Oh[!h<<1|!r];return b};b.clamp=function(a){if(!arguments.length)return h&&r?[m,n]:h?m:r?n:null;h&&r?(m=!!a[0],n=!!a[1]):h?m=!!a:r&&(n=!!a);return b};b.extent=function(a){if(!arguments.length){if(h)if(u){var c=u[0];var d=
u[1]}else if(c=l[0],d=l[1],h.invert&&(c=h.invert(c),d=h.invert(d)),d<c){var e=c;c=d;d=e}if(r)if(t){var f=t[0];var g=t[1]}else f=k[0],g=k[1],r.invert&&(f=r.invert(f),g=r.invert(g)),g<f&&(e=f,f=g,g=e);return h&&r?[[c,f],[d,g]]:h?[c,d]:r&&[f,g]}h&&(c=a[0],d=a[1],r&&(c=c[0],d=d[0]),u=[c,d],h.invert&&(c=h(c),d=h(d)),d<c&&(e=c,c=d,d=e),c!=l[0]||d!=l[1])&&(l=[c,d]);r&&(f=a[0],g=a[1],h&&(f=f[1],g=g[1]),t=[f,g],r.invert&&(f=r(f),g=r(g)),g<f&&(e=f,f=g,g=e),f!=k[0]||g!=k[1])&&(k=[f,g]);return b};b.clear=function(){b.empty()||
(l=[0,0],k=[0,0],u=t=null);return b};b.empty=function(){return!!h&&l[0]==l[1]||!!r&&k[0]==k[1]};return S.rebind(b,g,"on")};var cj={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Oh=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Kg=Ga.format=Ji.timeFormat,Nh=Kg.utc,Ki=Nh("%Y-%m-%dT%H:%M:%S.%LZ");Kg.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?qg:Ki;qg.parse=function(b){b=new Date(b);return isNaN(b)?
null:b};qg.toString=Ki.toString;Ga.second=Oa(function(b){return new $c(1E3*Math.floor(b/1E3))},function(b,a){b.setTime(b.getTime()+1E3*Math.floor(a))},function(b){return b.getSeconds()});Ga.seconds=Ga.second.range;Ga.seconds.utc=Ga.second.utc.range;Ga.minute=Oa(function(b){return new $c(6E4*Math.floor(b/6E4))},function(b,a){b.setTime(b.getTime()+6E4*Math.floor(a))},function(b){return b.getMinutes()});Ga.minutes=Ga.minute.range;Ga.minutes.utc=Ga.minute.utc.range;Ga.hour=Oa(function(b){var a=b.getTimezoneOffset()/
60;return new $c(36E5*(Math.floor(b/36E5-a)+a))},function(b,a){b.setTime(b.getTime()+36E5*Math.floor(a))},function(b){return b.getHours()});Ga.hours=Ga.hour.range;Ga.hours.utc=Ga.hour.utc.range;Ga.month=Oa(function(b){b=Ga.day(b);b.setDate(1);return b},function(b,a){b.setMonth(b.getMonth()+a)},function(b){return b.getMonth()});Ga.months=Ga.month.range;Ga.months.utc=Ga.month.utc.range;var Bc=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],di=[[Ga.second,
1],[Ga.second,5],[Ga.second,15],[Ga.second,30],[Ga.minute,1],[Ga.minute,5],[Ga.minute,15],[Ga.minute,30],[Ga.hour,1],[Ga.hour,3],[Ga.hour,6],[Ga.hour,12],[Ga.day,1],[Ga.day,2],[Ga.week,1],[Ga.month,1],[Ga.month,3],[Ga.year,1]],Mf=Kg.multi([[".%L",function(b){return b.getMilliseconds()}],[":%S",function(b){return b.getSeconds()}],["%I:%M",function(b){return b.getMinutes()}],["%I %p",function(b){return b.getHours()}],["%a %d",function(b){return b.getDay()&&1!=b.getDate()}],["%b %d",function(b){return 1!=
b.getDate()}],["%B",function(b){return b.getMonth()}],["%Y",xg]]),Nf={range:function(b,a,c){return S.range(Math.ceil(b/c)*c,+a,c).map(Yf)},floor:y,ceil:y};di.year=Ga.year;Ga.scale=function(){return ri(S.scale.linear(),di,Mf)};var Ig=di.map(function(b){return[b[0].utc,b[1]]}),ei=Nh.multi([[".%L",function(b){return b.getUTCMilliseconds()}],[":%S",function(b){return b.getUTCSeconds()}],["%I:%M",function(b){return b.getUTCMinutes()}],["%I %p",function(b){return b.getUTCHours()}],["%a %d",function(b){return b.getUTCDay()&&
1!=b.getUTCDate()}],["%b %d",function(b){return 1!=b.getUTCDate()}],["%B",function(b){return b.getUTCMonth()}],["%Y",xg]]);Ig.year=Ga.year.utc;Ga.scale.utc=function(){return ri(S.scale.linear(),Ig,ei)};S.text=Lb(function(b){return b.responseText});S.json=function(b,a){return Mb(b,"application/json",id,a)};S.html=function(b,a){return Mb(b,"text/html",Ri,a)};S.xml=Lb(function(b){return b.responseXML});"object"===typeof q&&q.exports?q.exports=S:this.d3=S}()},{}],166:[function(a,q,p){q.exports=function(){for(var a=
0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]}},{}],167:[function(a,q,p){function n(b,a){this.point=b;this.index=a}function k(b,a){b=b.point;a=a.point;for(var e=b.length,g=0;g<e;++g){var f=a[g]-b[g];if(f)return f}return 0}function m(b,a,h){if(1===b)return h?[[-1,0]]:[];a=a.map(function(b,a){return[b[0],a]});a.sort(function(b,a){return b[0]-a[0]});for(var e=Array(b-1),f=1;f<b;++f)e[f-1]=[a[f-1][1],a[f][1]];h&&e.push([-1,e[0][1]],[e[b-1][1],-1]);return e}var h=a("incremental-convex-hull"),
b=a("uniq");q.exports=function(a,e){var g=a.length;if(0===g)return[];var l=a[0].length;if(1>l)return[];if(1===l)return m(g,a,e);for(var f=Array(g),d=1,c=0;c<g;++c){for(var r=a[c],u=Array(l+1),v=0,w=0;w<l;++w){var y=r[w];u[w]=y;v+=y*y}u[l]=v;f[c]=new n(u,c);d=Math.max(v,d)}b(f,k);g=f.length;a=Array(g+l+1);var A=Array(g+l+1);r=Array(l+1);for(c=0;c<=l;++c)r[c]=0;r[l]=(l+1)*(l+1)*d;a[0]=r.slice();A[0]=-1;for(c=0;c<=l;++c)u=r.slice(),u[c]=1,a[c+1]=u,A[c+1]=-1;for(c=0;c<g;++c)d=f[c],a[c+l+1]=d.point,A[c+
l+1]=d.index;g=h(a,!1);g=e?g.filter(function(b){for(var a=0,c=0;c<=l;++c){var d=A[b[c]];if(0>d&&2<=++a)return!1;b[c]=d}return!0}):g.filter(function(b){for(var a=0;a<=l;++a){var c=A[b[a]];if(0>c)return!1;b[a]=c}return!0});if(l&1)for(c=0;c<g.length;++c)d=g[c],u=d[0],d[0]=d[1],d[1]=u;return g}},{"incremental-convex-hull":414,uniq:545}],168:[function(a,q,p){function n(b,a){Array.isArray(b)&&(b=b.join(", "));var e={},g=16,l=.05;if(a)if(2===a.length&&"number"===typeof a[0])var f=k(a);else Array.isArray(a)?
f=a:(a.o?f=k(a.o):a.pairs&&(f=a.pairs),a.fontSize&&(g=a.fontSize),null!=a.threshold&&(l=a.threshold));f||(f=h);m.font=g+"px "+b;for(b=0;b<f.length;b++){a=f[b];var d=m.measureText(a[0]).width+m.measureText(a[1]).width,c=m.measureText(a).width;Math.abs(d-c)>g*l&&(e[a]=(c-d)/g*1E3)}return e}function k(b){for(var a=[],e=b[0];e<=b[1];e++)for(var h=String.fromCharCode(e),l=b[0];l<b[1];l++){var f=String.fromCharCode(l);a.push(h+f)}return a}q.exports=n;var m=(n.canvas=document.createElement("canvas")).getContext("2d"),
h=k([32,126]);n.createPairs=k;n.ascii=h},{}],169:[function(a,q,p){(function(a){var k=!1;if("undefined"!==typeof Float64Array){var m=new Float64Array(1),h=new Uint32Array(m.buffer);m[0]=1;k=!0;1072693248===h[1]?(q.exports=function(b){m[0]=b;return[h[0],h[1]]},q.exports.pack=function(b,a){h[0]=b;h[1]=a;return m[0]},q.exports.lo=function(b){m[0]=b;return h[0]},q.exports.hi=function(b){m[0]=b;return h[1]}):1072693248===h[0]?(q.exports=function(b){m[0]=b;return[h[1],h[0]]},q.exports.pack=function(b,a){h[1]=
b;h[0]=a;return m[0]},q.exports.lo=function(b){m[0]=b;return h[1]},q.exports.hi=function(b){m[0]=b;return h[0]}):k=!1}if(!k){var b=new a(8);q.exports=function(a){b.writeDoubleLE(a,0,!0);return[b.readUInt32LE(0,!0),b.readUInt32LE(4,!0)]};q.exports.pack=function(a,e){b.writeUInt32LE(a,0,!0);b.writeUInt32LE(e,4,!0);return b.readDoubleLE(0,!0)};q.exports.lo=function(a){b.writeDoubleLE(a,0,!0);return b.readUInt32LE(0,!0)};q.exports.hi=function(a){b.writeDoubleLE(a,0,!0);return b.readUInt32LE(4,!0)}}q.exports.sign=
function(b){return q.exports.hi(b)>>>31};q.exports.exponent=function(b){return(q.exports.hi(b)<<1>>>21)-1023};q.exports.fraction=function(b){var a=q.exports.lo(b);b=q.exports.hi(b);var g=b&1048575;b&2146435072&&(g+=1048576);return[a,g]};q.exports.denormalized=function(b){return!(q.exports.hi(b)&2146435072)}}).call(this,a("buffer").Buffer)},{buffer:107}],170:[function(a,q,p){var n=a("abs-svg-path"),k=a("normalize-svg-path"),m={M:"moveTo",C:"bezierCurveTo"};q.exports=function(a,b){a.beginPath();k(n(b)).forEach(function(b){var e=
b[0];b=b.slice(1);a[m[e]].apply(a,b)});a.closePath()}},{"abs-svg-path":63,"normalize-svg-path":453}],171:[function(a,q,p){q.exports=function(a){switch(a){case "int8":return Int8Array;case "int16":return Int16Array;case "int32":return Int32Array;case "uint8":return Uint8Array;case "uint16":return Uint16Array;case "uint32":return Uint32Array;case "float32":return Float32Array;case "float64":return Float64Array;case "array":return Array;case "uint8_clamped":return Uint8ClampedArray}}},{}],172:[function(a,
q,p){function n(a,m,h){var b=a[h]|0;if(0>=b)return[];var g=Array(b),e;if(h===a.length-1)for(e=0;e<b;++e)g[e]=m;else for(e=0;e<b;++e)g[e]=n(a,m,h+1);return g}q.exports=function(a,m){"undefined"===typeof m&&(m=0);switch(typeof a){case "number":if(0<a){a|=0;var h;var b=Array(a);for(h=0;h<a;++h)b[h]=m;return b}break;case "object":if("number"===typeof a.length)return n(a,m,0)}return[]}},{}],173:[function(a,q,p){function n(b,a,c){c=c||2;var d=a&&a.length,f=d?a[0]*c:b.length,r=k(b,0,f,c,!0),u=[];if(!r||
r.next===r.prev)return u;var t;if(d){var n=c;d=[];var v;var w=0;for(v=a.length;w<v;w++){var z=a[w]*n;var A=w<v-1?a[w+1]*n:b.length;z=k(b,z,A,n,!1);z===z.next&&(z.steiner=!0);d.push(l(z))}d.sort(g);for(w=0;w<d.length;w++){a=d[w];n=r;if(n=e(a,n))a=y(n,a),m(a,a.next);r=m(r,r.next)}}if(b.length>80*c){var x=t=b[0];var B=d=b[1];for(n=c;n<f;n+=c)w=b[n],a=b[n+1],w<x&&(x=w),a<B&&(B=a),w>t&&(t=w),a>d&&(d=a);t=Math.max(t-x,d-B);t=0!==t?1/t:0}h(r,u,c,x,B,t);return u}function k(b,a,d,e,f){if(f===0<C(b,a,d,e))for(f=
a;f<d;f+=e)var g=A(f,b[f],b[f+1],g);else for(f=d-e;f>=a;f-=e)g=A(f,b[f],b[f+1],g);g&&c(g,g.next)&&(z(g),g=g.next);return g}function m(b,a){if(!b)return b;a||(a=b);do{var e=!1;if(b.steiner||!c(b,b.next)&&0!==d(b.prev,b,b.next))b=b.next;else{z(b);b=a=b.prev;if(b===b.next)break;e=!0}}while(e||b!==a);return a}function h(a,e,g,l,k,u,n){if(a){if(!n&&u){var v=a,A=v;do null===A.z&&(A.z=t(A.x,A.y,l,k,u)),A.prevZ=A.prev,A=A.nextZ=A.next;while(A!==v);A.prevZ.nextZ=null;A.prevZ=null;v=A;var x,B,D,C,q=1;do{A=
v;var p=v=null;for(B=0;A;){B++;var E=A;for(x=D=0;x<q&&(D++,E=E.nextZ,E);x++);for(C=q;0<D||0<C&&E;)0!==D&&(0===C||!E||A.z<=E.z)?(x=A,A=A.nextZ,D--):(x=E,E=E.nextZ,C--),p?p.nextZ=x:v=x,x.prevZ=p,p=x;A=E}p.nextZ=null;q*=2}while(1<B)}for(v=a;a.prev!==a.next;){A=a.prev;E=a.next;if(u)p=b(a,l,k,u);else a:if(p=a,B=p.prev,D=p,q=p.next,0<=d(B,D,q))p=!1;else{for(x=p.next.next;x!==p.prev;){if(f(B.x,B.y,D.x,D.y,q.x,q.y,x.x,x.y)&&0<=d(x.prev,x,x.next)){p=!1;break a}x=x.next}p=!0}if(p)e.push(A.i/g),e.push(a.i/g),
e.push(E.i/g),z(a),v=a=E.next;else if(a=E,a===v){if(!n)h(m(a),e,g,l,k,u,1);else if(1===n){a=m(a);n=e;v=g;A=a;do E=A.prev,p=A.next.next,!c(E,p)&&r(E,A,A.next,p)&&w(E,p)&&w(p,E)&&(n.push(E.i/v),n.push(A.i/v),n.push(p.i/v),z(A),z(A.next),A=a=p),A=A.next;while(A!==a);a=m(A);h(a,e,g,l,k,u,2)}else if(2===n)a:{n=a;do{for(v=n.next.next;v!==n.prev;){if(A=n.i!==v.i){A=n;E=v;if(p=A.next.i!==E.i&&A.prev.i!==E.i){b:{p=A;do{if(p.i!==A.i&&p.next.i!==A.i&&p.i!==E.i&&p.next.i!==E.i&&r(p,p.next,A,E)){p=!0;break b}p=
p.next}while(p!==A);p=!1}p=!p}if(p){if(p=w(A,E)&&w(E,A)){p=A;B=!1;D=(A.x+E.x)/2;q=(A.y+E.y)/2;do p.y>q!==p.next.y>q&&p.next.y!==p.y&&D<(p.next.x-p.x)*(q-p.y)/(p.next.y-p.y)+p.x&&(B=!B),p=p.next;while(p!==A);p=B}p=p&&(d(A.prev,A,E.prev)||d(A,E.prev,E))||c(A,E)&&0<d(A.prev,A,A.next)&&0<d(E.prev,E,E.next)}A=p}if(A){a=y(n,v);n=m(n,n.next);a=m(a,a.next);h(n,e,g,l,k,u);h(a,e,g,l,k,u);break a}v=v.next}n=n.next}while(n!==a)}break}}}}function b(b,a,c,e){var g=b.prev,h=b.next;if(0<=d(g,b,h))return!1;var r=
g.x>b.x?g.x>h.x?g.x:h.x:b.x>h.x?b.x:h.x,l=g.y>b.y?g.y>h.y?g.y:h.y:b.y>h.y?b.y:h.y,k=t(g.x<b.x?g.x<h.x?g.x:h.x:b.x<h.x?b.x:h.x,g.y<b.y?g.y<h.y?g.y:h.y:b.y<h.y?b.y:h.y,a,c,e);a=t(r,l,a,c,e);c=b.prevZ;for(e=b.nextZ;c&&c.z>=k&&e&&e.z<=a;){if(c!==b.prev&&c!==b.next&&f(g.x,g.y,b.x,b.y,h.x,h.y,c.x,c.y)&&0<=d(c.prev,c,c.next))return!1;c=c.prevZ;if(e!==b.prev&&e!==b.next&&f(g.x,g.y,b.x,b.y,h.x,h.y,e.x,e.y)&&0<=d(e.prev,e,e.next))return!1;e=e.nextZ}for(;c&&c.z>=k;){if(c!==b.prev&&c!==b.next&&f(g.x,g.y,b.x,
b.y,h.x,h.y,c.x,c.y)&&0<=d(c.prev,c,c.next))return!1;c=c.prevZ}for(;e&&e.z<=a;){if(e!==b.prev&&e!==b.next&&f(g.x,g.y,b.x,b.y,h.x,h.y,e.x,e.y)&&0<=d(e.prev,e,e.next))return!1;e=e.nextZ}return!0}function g(b,a){return b.x-a.x}function e(b,a){var c=a,e=b.x,g=b.y,h=-Infinity;do{if(g<=c.y&&g>=c.next.y&&c.next.y!==c.y){var r=c.x+(g-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(r<=e&&r>h){h=r;if(r===e){if(g===c.y)return c;if(g===c.next.y)return c.next}var l=c.x<c.next.x?c:c.next}}c=c.next}while(c!==a);if(!l)return null;
if(e===h)return l;a=l;r=l.x;var k=l.y,u=Infinity;c=l;do{if(e>=c.x&&c.x>=r&&e!==c.x&&f(g<k?e:h,g,r,k,g<k?h:e,g,c.x,c.y)){var t=Math.abs(g-c.y)/(e-c.x);var m;if((m=w(c,b))&&!(m=t<u)&&(m=t===u)&&!(m=c.x>l.x)&&(m=c.x===l.x)){m=l;var n=c;m=0>d(m.prev,m,n.prev)&&0>d(n.next,m,m.next)}m&&(l=c,u=t)}c=c.next}while(c!==a);return l}function t(b,a,c,d,e){b=32767*(b-c)*e;a=32767*(a-d)*e;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;return(b|
b<<1)&1431655765|((a|a<<1)&1431655765)<<1}function l(b){var a=b,c=b;do{if(a.x<c.x||a.x===c.x&&a.y<c.y)c=a;a=a.next}while(a!==b);return c}function f(b,a,c,d,e,f,g,h){return 0<=(e-g)*(a-h)-(b-g)*(f-h)&&0<=(b-g)*(d-h)-(c-g)*(a-h)&&0<=(c-g)*(f-h)-(e-g)*(d-h)}function d(b,a,c){return(a.y-b.y)*(c.x-a.x)-(a.x-b.x)*(c.y-a.y)}function c(b,a){return b.x===a.x&&b.y===a.y}function r(b,a,c,e){var f=v(d(b,a,c)),g=v(d(b,a,e)),h=v(d(c,e,b)),r=v(d(c,e,a));return f!==g&&h!==r||0===f&&u(b,c,a)||0===g&&u(b,e,a)||0===
h&&u(c,b,e)||0===r&&u(c,a,e)?!0:!1}function u(b,a,c){return a.x<=Math.max(b.x,c.x)&&a.x>=Math.min(b.x,c.x)&&a.y<=Math.max(b.y,c.y)&&a.y>=Math.min(b.y,c.y)}function v(b){return 0<b?1:0>b?-1:0}function w(b,a){return 0>d(b.prev,b,b.next)?0<=d(b,a,b.next)&&0<=d(b,b.prev,a):0>d(b,a,b.prev)||0>d(b,b.next,a)}function y(b,a){var c=new x(b.i,b.x,b.y),d=new x(a.i,a.x,a.y),e=b.next,f=a.prev;b.next=a;a.prev=b;c.next=e;e.prev=c;d.next=c;c.prev=d;f.next=d;d.prev=f;return d}function A(b,a,c,d){b=new x(b,a,c);d?
(b.next=d.next,b.prev=d,d.next.prev=b,d.next=b):(b.prev=b,b.next=b);return b}function z(b){b.next.prev=b.prev;b.prev.next=b.next;b.prevZ&&(b.prevZ.nextZ=b.nextZ);b.nextZ&&(b.nextZ.prevZ=b.prevZ)}function x(b,a,c){this.i=b;this.x=a;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function C(b,a,c,d){for(var e=0,f=c-d;a<c;a+=d)e+=(b[f]-b[a])*(b[a+1]+b[f+1]),f=a;return e}q.exports=n;q.exports.default=n;n.deviation=function(b,a,c,d){var e=a&&a.length,f=Math.abs(C(b,0,e?a[0]*
c:b.length,c));if(e){e=0;for(var g=a.length;e<g;e++)f-=Math.abs(C(b,a[e]*c,e<g-1?a[e+1]*c:b.length,c))}for(e=a=0;e<d.length;e+=3){g=d[e]*c;var h=d[e+1]*c,r=d[e+2]*c;a+=Math.abs((b[g]-b[r])*(b[h+1]-b[g+1])-(b[g]-b[h])*(b[r+1]-b[g+1]))}return 0===f&&0===a?0:Math.abs((a-f)/f)};n.flatten=function(b){for(var a=b[0][0].length,c={vertices:[],holes:[],dimensions:a},d=0,e=0;e<b.length;e++){for(var f=0;f<b[e].length;f++)for(var g=0;g<a;g++)c.vertices.push(b[e][f][g]);0<e&&(d+=b[e-1].length,c.holes.push(d))}return c}},
{}],174:[function(a,q,p){q.exports=function(a,m){var h=a.length;if("number"!==typeof m){for(var b=m=0;b<h;++b){var g=a[b];m=Math.max(m,g[0],g[1])}m=(m|0)+1}m|=0;var e=Array(m);for(b=0;b<m;++b)e[b]=[];for(b=0;b<h;++b)g=a[b],e[g[0]].push(g[1]),e[g[1]].push(g[0]);for(a=0;a<m;++a)n(e[a],function(b,a){return b-a});return e};var n=a("uniq")},{uniq:545}],175:[function(a,q,p){var n=a("strongly-connected-components");q.exports=function(a){function k(b){l[b]=!1;f.hasOwnProperty(b)&&Object.keys(f[b]).forEach(function(a){delete f[b][a];
l[a]&&k(a)})}function h(b){var a=!1;t.push(b);l[b]=!0;var g;for(g=0;g<d[b].length;g++){var r=d[b][g];r===c?(a=c,a=[].concat(t).concat(a),e.push(a),a=!0):l[r]||(a=h(r))}if(a)k(b);else for(g=0;g<d[b].length;g++){r=d[b][g];var u=f[r];u||(u={},f[r]=u);u[r]=!0}t.pop();return a}function b(b){for(var c=0;c<a.length;c++)c<b&&(a[c]=[]),a[c]=a[c].filter(function(a){return a>=b})}function g(c){b(c);var d=n(a).components.filter(function(b){return 1<b.length});c=Infinity;for(var e,f=0;f<d.length;f++)for(var g=
0;g<d[f].length;g++)d[f][g]<c&&(c=d[f][g],e=f);var h=d[e];if(!h)return!1;e=a.map(function(b,a){return-1===h.indexOf(a)?[]:b.filter(function(b){return-1!==h.indexOf(b)})});return{leastVertex:c,adjList:e}}var e=[],t=[],l=[],f={},d=[];var c=0;for(var r=a.length;c<r;){var u=g(c);c=u.leastVertex;if(d=u.adjList){for(u=0;u<d.length;u++)for(var v=0;v<d[u].length;v++){var w=d[u][v];l[+w]=!1;f[w]={}}h(c);c+=1}else c=r}return e}},{"strongly-connected-components":528}],176:[function(a,q,p){var n=a("../../object/valid-value");
q.exports=function(){n(this).length=0;return this}},{"../../object/valid-value":208}],177:[function(a,q,p){q.exports=a("./is-implemented")()?Array.from:a("./shim")},{"./is-implemented":178,"./shim":179}],178:[function(a,q,p){q.exports=function(){var a=Array.from;if("function"!==typeof a)return!1;var k=["raz","dwa"];a=a(k);return!(!a||a===k||"dwa"!==a[1])}},{}],179:[function(a,q,p){var n=a("es6-symbol").iterator,k=a("../../function/is-arguments"),m=a("../../function/is-function"),h=a("../../number/to-pos-integer"),
b=a("../../object/valid-callable"),g=a("../../object/valid-value"),e=a("../../object/is-value"),t=a("../../string/is-string"),l=Array.isArray,f=Function.prototype.call,d={configurable:!0,enumerable:!0,writable:!0,value:null},c=Object.defineProperty;q.exports=function(a,u,v){var r,y;a=Object(g(a));e(u)&&b(u);if(this&&this!==Array&&m(this))var A=this;else{if(!u){if(k(a)){var z=a.length;if(1!==z)return Array.apply(null,a);var x=Array(1);x[0]=a[0];return x}if(l(a)){x=Array(z=a.length);for(r=0;r<z;++r)x[r]=
a[r];return x}}x=[]}if(!l(a))if(void 0!==(r=a[n])){z=b(r).call(a);A&&(x=new A);var C=z.next();for(r=0;!C.done;)C=u?f.call(u,v,C.value,r):C.value,A?(d.value=C,c(x,r,d)):x[r]=C,C=z.next(),++r;z=r}else if(t(a)){z=a.length;A&&(x=new A);for(y=r=0;r<z;++r){C=a[r];if(r+1<z){var B=C.charCodeAt(0);55296<=B&&56319>=B&&(C+=a[++r])}C=u?f.call(u,v,C,y):C;A?(d.value=C,c(x,y,d)):x[y]=C;++y}z=y}if(void 0===z)for(z=h(a.length),A&&(x=new A(z)),r=0;r<z;++r)C=u?f.call(u,v,a[r],r):a[r],A?(d.value=C,c(x,r,d)):x[r]=C;A&&
(d.value=null,x.length=z);return x}},{"../../function/is-arguments":180,"../../function/is-function":181,"../../number/to-pos-integer":187,"../../object/is-value":197,"../../object/valid-callable":206,"../../object/valid-value":208,"../../string/is-string":212,"es6-symbol":222}],180:[function(a,q,p){var n=Object.prototype.toString,k=n.call(function(){return arguments}());q.exports=function(a){return n.call(a)===k}},{}],181:[function(a,q,p){var n=Object.prototype.toString,k=n.call(a("./noop"));q.exports=
function(a){return"function"===typeof a&&n.call(a)===k}},{"./noop":182}],182:[function(a,q,p){q.exports=function(){}},{}],183:[function(a,q,p){q.exports=a("./is-implemented")()?Math.sign:a("./shim")},{"./is-implemented":184,"./shim":185}],184:[function(a,q,p){q.exports=function(){var a=Math.sign;return"function"!==typeof a?!1:1===a(10)&&-1===a(-20)}},{}],185:[function(a,q,p){q.exports=function(a){a=Number(a);return isNaN(a)||0===a?a:0<a?1:-1}},{}],186:[function(a,q,p){var n=a("../math/sign"),k=Math.abs,
m=Math.floor;q.exports=function(a){if(isNaN(a))return 0;a=Number(a);return 0!==a&&isFinite(a)?n(a)*m(k(a)):a}},{"../math/sign":183}],187:[function(a,q,p){var n=a("./to-integer"),k=Math.max;q.exports=function(a){return k(0,n(a))}},{"./to-integer":186}],188:[function(a,q,p){var n=a("./valid-callable"),k=a("./valid-value"),m=Function.prototype.bind,h=Function.prototype.call,b=Object.keys,g=Object.prototype.propertyIsEnumerable;q.exports=function(a,t){return function(e,f,d,c){e=Object(k(e));n(f);var r=
b(e);c&&r.sort("function"===typeof c?m.call(c,e):void 0);"function"!==typeof a&&(a=r[a]);return h.call(a,r,function(b,a){return g.call(e,b)?h.call(f,d,e[b],b,e,a):t})}}},{"./valid-callable":206,"./valid-value":208}],189:[function(a,q,p){q.exports=a("./is-implemented")()?Object.assign:a("./shim")},{"./is-implemented":190,"./shim":191}],190:[function(a,q,p){q.exports=function(){var a=Object.assign;if("function"!==typeof a)return!1;var k={foo:"raz"};a(k,{bar:"dwa"},{trzy:"trzy"});return"razdwatrzy"===
k.foo+k.bar+k.trzy}},{}],191:[function(a,q,p){var n=a("../keys"),k=a("../valid-value"),m=Math.max;q.exports=function(a,b){var g,e,h=m(arguments.length,2);a=Object(k(a));var l=function(e){try{a[e]=b[e]}catch(d){g||(g=d)}};for(e=1;e<h;++e)b=arguments[e],n(b).forEach(l);if(void 0!==g)throw g;return a}},{"../keys":198,"../valid-value":208}],192:[function(a,q,p){var n=a("../array/from"),k=a("./assign"),m=a("./valid-value");q.exports=function(a,b,g){var e=Object(m(a)),h=Object(g);if(e!==a&&!b)return e;
var l={};b?n(b,function(b){if(h.ensure||b in a)l[b]=a[b]}):k(l,a);return l}},{"../array/from":177,"./assign":189,"./valid-value":208}],193:[function(a,q,p){var n=Object.create,k;a("./set-prototype-of/is-implemented")()||(k=a("./set-prototype-of/shim"));q.exports=function(){if(!k||1!==k.level)return n;var a={};var h={};var b={configurable:!1,enumerable:!1,writable:!0,value:void 0};Object.getOwnPropertyNames(Object.prototype).forEach(function(a){h[a]="__proto__"===a?{configurable:!0,enumerable:!1,writable:!0,
value:void 0}:b});Object.defineProperties(a,h);Object.defineProperty(k,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:a});return function(b,e){return n(null===b?a:b,e)}}()},{"./set-prototype-of/is-implemented":204,"./set-prototype-of/shim":205}],194:[function(a,q,p){q.exports=a("./_iterate")("forEach")},{"./_iterate":188}],195:[function(a,q,p){q.exports=function(a){return"function"===typeof a}},{}],196:[function(a,q,p){var n=a("./is-value"),k={function:!0,object:!0};q.exports=function(a){return n(a)&&
k[typeof a]||!1}},{"./is-value":197}],197:[function(a,q,p){var n=a("../function/noop")();q.exports=function(a){return a!==n&&null!==a}},{"../function/noop":182}],198:[function(a,q,p){q.exports=a("./is-implemented")()?Object.keys:a("./shim")},{"./is-implemented":199,"./shim":200}],199:[function(a,q,p){q.exports=function(){try{return Object.keys("primitive"),!0}catch(n){return!1}}},{}],200:[function(a,q,p){var n=a("../is-value"),k=Object.keys;q.exports=function(a){return k(n(a)?Object(a):a)}},{"../is-value":197}],
201:[function(a,q,p){var n=a("./valid-callable"),k=a("./for-each"),m=Function.prototype.call;q.exports=function(a,b,g){var e={};n(b);k(a,function(a,h,f,d){e[h]=m.call(b,g,a,h,f,d)});return e}},{"./for-each":194,"./valid-callable":206}],202:[function(a,q,p){var n=a("./is-value"),k=Array.prototype.forEach,m=Object.create;q.exports=function(a){var b=m(null);k.call(arguments,function(a){if(n(a)){a=Object(a);for(var e in a)b[e]=a[e]}});return b}},{"./is-value":197}],203:[function(a,q,p){q.exports=a("./is-implemented")()?
Object.setPrototypeOf:a("./shim")},{"./is-implemented":204,"./shim":205}],204:[function(a,q,p){var n=Object.create,k=Object.getPrototypeOf,m={};q.exports=function(a){var b=Object.setPrototypeOf;return"function"!==typeof b?!1:k(b((a||n)(null),m))===m}},{}],205:[function(a,q,p){var n=a("../is-object"),k=a("../valid-value"),m=Object.prototype.isPrototypeOf,h=Object.defineProperty,b={configurable:!0,enumerable:!1,writable:!0,value:void 0};var g=function(b,a){k(b);if(null===a||n(a))return b;throw new TypeError("Prototype must be null or an object");
};q.exports=function(a){if(!a)return null;if(2===a.level)if(a.set){var e=a.set;var l=function(b,a){e.call(g(b,a),a);return b}}else l=function(b,a){g(b,a).__proto__=a;return b};else l=function r(a,c){var d;g(a,c);(d=m.call(r.nullPolyfill,a))&&delete r.nullPolyfill.__proto__;null===c&&(c=r.nullPolyfill);a.__proto__=c;d&&h(r.nullPolyfill,"__proto__",b);return a};return Object.defineProperty(l,"level",{configurable:!1,enumerable:!1,writable:!1,value:a.level})}(function(){var b=Object.create(null),a={},
g=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(g){try{var f=g.set;f.call(b,a)}catch(d){}if(Object.getPrototypeOf(b)===a)return{set:f,level:2}}b.__proto__=a;if(Object.getPrototypeOf(b)===a)return{level:2};b={};b.__proto__=a;return Object.getPrototypeOf(b)===a?{level:1}:!1}());a("../create")},{"../create":193,"../is-object":196,"../valid-value":208}],206:[function(a,q,p){q.exports=function(a){if("function"!==typeof a)throw new TypeError(a+" is not a function");return a}},{}],207:[function(a,
q,p){var n=a("./is-object");q.exports=function(a){if(!n(a))throw new TypeError(a+" is not an Object");return a}},{"./is-object":196}],208:[function(a,q,p){var n=a("./is-value");q.exports=function(a){if(!n(a))throw new TypeError("Cannot use null or undefined");return a}},{"./is-value":197}],209:[function(a,q,p){q.exports=a("./is-implemented")()?String.prototype.contains:a("./shim")},{"./is-implemented":210,"./shim":211}],210:[function(a,q,p){q.exports=function(){return"function"!==typeof"razdwatrzy".contains?
!1:!0==="razdwatrzy".contains("dwa")&&!1==="razdwatrzy".contains("foo")}},{}],211:[function(a,q,p){var n=String.prototype.indexOf;q.exports=function(a,m){return-1<n.call(this,a,m)}},{}],212:[function(a,q,p){var n=Object.prototype.toString,k=n.call("");q.exports=function(a){return"string"===typeof a||a&&"object"===typeof a&&(a instanceof String||n.call(a)===k)||!1}},{}],213:[function(a,q,p){var n=Object.create(null),k=Math.random;q.exports=function(){do var a=k().toString(36).slice(2);while(n[a]);
return a}},{}],214:[function(a,q,p){p=a("es5-ext/object/set-prototype-of");var n=a("es5-ext/string/#/contains"),k=a("d"),m=a("es6-symbol"),h=a("./"),b=Object.defineProperty;var g=q.exports=function(a,t){if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");h.call(this,a);t=t?n.call(t,"key+value")?"key+value":n.call(t,"key")?"key":"value":"value";b(this,"__kind__",k("",t))};p&&p(g,h);delete g.prototype.constructor;g.prototype=Object.create(h.prototype,{_resolve:k(function(b){return"value"===
this.__kind__?this.__list__[b]:"key+value"===this.__kind__?[b,this.__list__[b]]:b})});b(g.prototype,m.toStringTag,k("c","Array Iterator"))},{"./":217,d:153,"es5-ext/object/set-prototype-of":203,"es5-ext/string/#/contains":209,"es6-symbol":222}],215:[function(a,q,p){var n=a("es5-ext/function/is-arguments"),k=a("es5-ext/object/valid-callable"),m=a("es5-ext/string/is-string"),h=a("./get"),b=Array.isArray,g=Function.prototype.call,e=Array.prototype.some;q.exports=function(a,l,f){var d,c;b(a)||n(a)?d=
"array":m(a)?d="string":a=h(a);k(l);var r=function(){c=!0};if("array"===d)e.call(a,function(b){g.call(l,f,b,r);return c});else if("string"===d){var u=a.length;for(d=0;d<u;++d){var t=a[d];if(d+1<u){var w=t.charCodeAt(0);55296<=w&&56319>=w&&(t+=a[++d])}g.call(l,f,t,r);if(c)break}}else for(d=a.next();!d.done;){g.call(l,f,d.value,r);if(c)break;d=a.next()}}},{"./get":216,"es5-ext/function/is-arguments":180,"es5-ext/object/valid-callable":206,"es5-ext/string/is-string":212}],216:[function(a,q,p){var n=
a("es5-ext/function/is-arguments"),k=a("es5-ext/string/is-string"),m=a("./array"),h=a("./string"),b=a("./valid-iterable"),g=a("es6-symbol").iterator;q.exports=function(a){return"function"===typeof b(a)[g]?a[g]():n(a)?new m(a):k(a)?new h(a):new m(a)}},{"./array":214,"./string":219,"./valid-iterable":220,"es5-ext/function/is-arguments":180,"es5-ext/string/is-string":212,"es6-symbol":222}],217:[function(a,q,p){var n=a("es5-ext/array/#/clear");p=a("es5-ext/object/assign");var k=a("es5-ext/object/valid-callable"),
m=a("es5-ext/object/valid-value"),h=a("d"),b=a("d/auto-bind"),g=a("es6-symbol"),e=Object.defineProperty,t=Object.defineProperties,l;q.exports=l=function(b,a){if(!(this instanceof l))throw new TypeError("Constructor requires 'new'");t(this,{__list__:h("w",m(b)),__context__:h("w",a),__nextIndex__:h("w",0)});a&&(k(a.on),a.on("_add",this._onAdd),a.on("_delete",this._onDelete),a.on("_clear",this._onClear))};delete l.prototype.constructor;t(l.prototype,p({_next:h(function(){if(this.__list__){if(this.__redo__){var b=
this.__redo__.shift();if(void 0!==b)return b}if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:h(function(){return this._createResult(this._next())}),_createResult:h(function(b){return void 0===b?{done:!0,value:void 0}:{done:!1,value:this._resolve(b)}}),_resolve:h(function(b){return this.__list__[b]}),_unBind:h(function(){this.__list__=null;delete this.__redo__;this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),
this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:h(function(){return"[object "+(this[g.toStringTag]||"Object")+"]"})},b({_onAdd:h(function(b){b>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(a,c){a>=b&&(this.__redo__[c]=++a)},this),this.__redo__.push(b)):e(this,"__redo__",h("c",[b])))}),_onDelete:h(function(b){if(!(b>=this.__nextIndex__)&&(--this.__nextIndex__,this.__redo__)){var a=this.__redo__.indexOf(b);-1!==a&&this.__redo__.splice(a,
1);this.__redo__.forEach(function(a,d){a>b&&(this.__redo__[d]=--a)},this)}}),_onClear:h(function(){this.__redo__&&n.call(this.__redo__);this.__nextIndex__=0})})));e(l.prototype,g.iterator,h(function(){return this}))},{d:153,"d/auto-bind":152,"es5-ext/array/#/clear":176,"es5-ext/object/assign":189,"es5-ext/object/valid-callable":206,"es5-ext/object/valid-value":208,"es6-symbol":222}],218:[function(a,q,p){var n=a("es5-ext/function/is-arguments"),k=a("es5-ext/object/is-value"),m=a("es5-ext/string/is-string"),
h=a("es6-symbol").iterator,b=Array.isArray;q.exports=function(a){return k(a)?b(a)||m(a)||n(a)?!0:"function"===typeof a[h]:!1}},{"es5-ext/function/is-arguments":180,"es5-ext/object/is-value":197,"es5-ext/string/is-string":212,"es6-symbol":222}],219:[function(a,q,p){p=a("es5-ext/object/set-prototype-of");var n=a("d"),k=a("es6-symbol"),m=a("./"),h=Object.defineProperty;var b=q.exports=function(a){if(!(this instanceof b))throw new TypeError("Constructor requires 'new'");a=String(a);m.call(this,a);h(this,
"__length__",n("",a.length))};p&&p(b,m);delete b.prototype.constructor;b.prototype=Object.create(m.prototype,{_next:n(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:n(function(b){b=this.__list__[b];if(this.__nextIndex__===this.__length__)return b;var a=b.charCodeAt(0);return 55296<=a&&56319>=a?b+this.__list__[this.__nextIndex__++]:b})});h(b.prototype,k.toStringTag,n("c","String Iterator"))},{"./":217,d:153,"es5-ext/object/set-prototype-of":203,
"es6-symbol":222}],220:[function(a,q,p){var n=a("./is-iterable");q.exports=function(a){if(!n(a))throw new TypeError(a+" is not iterable");return a}},{"./is-iterable":218}],221:[function(a,q,p){(function(n,k){(function(a,h){"object"===typeof p&&"undefined"!==typeof q?q.exports=h():a.ES6Promise=h()})(this,function(){function m(){return function(){return n.nextTick(t)}}function h(){return function(){O(t)}}function b(){var b=0,a=new V(t),c=document.createTextNode("");a.observe(c,{characterData:!0});return function(){c.data=
b=++b%2}}function g(){var b=new MessageChannel;b.port1.onmessage=t;return function(){return b.port2.postMessage(0)}}function e(){var b=setTimeout;return function(){return b(t,1)}}function t(){for(var b=0;b<N;b+=2)(0,ca[b])(ca[b+1]),ca[b]=void 0,ca[b+1]=void 0;N=0}function l(){try{var b=a("vertx");O=b.runOnLoop||b.runOnContext;return h()}catch(aa){return e()}}function f(b,a){var d=arguments,e=this,f=new this.constructor(c);void 0===f[R]&&L(f);var g=e._state;g?function(){var b=d[g-1];Q(function(){return q(g,
f,b,e._result)})}():B(e,f,b,a);return f}function d(b){if(b&&"object"===typeof b&&b.constructor===this)return b;var a=new this(c);A(a,b);return a}function c(){}function r(b){try{return b.then}catch(aa){return fa.error=aa,fa}}function u(b,a,c,d){try{b.call(a,c,d)}catch(ja){return ja}}function v(b,a,c){Q(function(b){var d=!1,e=u(c,a,function(c){d||(d=!0,a!==c?A(b,c):x(b,c))},function(a){d||(d=!0,C(b,a))},"Settle: "+(b._label||" unknown promise"));!d&&e&&(d=!0,C(b,e))},b)}function w(b,a){a._state===X?
x(b,a._result):a._state===ea?C(b,a._result):B(a,void 0,function(a){return A(b,a)},function(a){return C(b,a)})}function y(b,a,c){a.constructor===b.constructor&&c===f&&a.constructor.resolve===d?w(b,a):c===fa?C(b,fa.error):void 0===c?x(b,a):"function"===typeof c?v(b,a,c):x(b,a)}function A(b,a){b===a?C(b,new TypeError("You cannot resolve a promise with itself")):"function"===typeof a||"object"===typeof a&&null!==a?y(b,a,r(a)):x(b,a)}function z(b){b._onerror&&b._onerror(b._result);D(b)}function x(b,a){b._state===
U&&(b._result=a,b._state=X,0!==b._subscribers.length&&Q(D,b))}function C(b,a){b._state===U&&(b._state=ea,b._result=a,Q(z,b))}function B(b,a,c,d){var e=b._subscribers,f=e.length;b._onerror=null;e[f]=a;e[f+X]=c;e[f+ea]=d;0===f&&b._state&&Q(D,b)}function D(b){var a=b._subscribers,c=b._state;if(0!==a.length){for(var d,e,f=b._result,g=0;g<a.length;g+=3)d=a[g],e=a[g+c],d?q(c,d,e,f):e(f);b._subscribers.length=0}}function p(){this.error=null}function q(b,a,c,d){var e="function"===typeof c,f=void 0,g=void 0,
h=void 0,r=void 0;if(e){try{f=c(d)}catch(ya){la.error=ya,f=la}f===la?(r=!0,g=f.error,f=null):h=!0;if(a===f){C(a,new TypeError("A promises callback cannot return that same promise."));return}}else f=d,h=!0;a._state===U&&(e&&h?A(a,f):r?C(a,g):b===X?x(a,f):b===ea&&C(a,f))}function F(b,a){try{a(function(a){A(b,a)},function(a){C(b,a)})}catch(na){C(b,na)}}function L(b){b[R]=da++;b._state=void 0;b._result=void 0;b._subscribers=[]}function J(b,a){this._instanceConstructor=b;this.promise=new b(c);this.promise[R]||
L(this.promise);I(a)?(this._input=a,this._remaining=this.length=a.length,this._result=Array(this.length),0===this.length?x(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&x(this.promise,this._result))):C(this.promise,Error("Array Methods must be provided an Array"))}function H(b){this[R]=da++;this._result=this._state=void 0;this._subscribers=[];if(c!==b){if("function"!==typeof b)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");
if(this instanceof H)F(this,b);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}}function K(){var b=void 0;if("undefined"!==typeof k)b=k;else if("undefined"!==typeof self)b=self;else try{b=Function("return this")()}catch(ha){throw Error("polyfill failed because global object is unavailable in this environment");}var a=b.Promise;if(a){var c=null;try{c=Object.prototype.toString.call(a.resolve())}catch(ha){}if("[object Promise]"===
c&&!a.cast)return}b.Promise=H}var M=void 0,I=M=Array.isArray?Array.isArray:function(b){return"[object Array]"===Object.prototype.toString.call(b)},N=0,O=void 0,P=void 0,Q=function(b,a){ca[N]=b;ca[N+1]=a;N+=2;2===N&&(P?P(t):Z())},T=(M="undefined"!==typeof window?window:void 0)||{},V=T.MutationObserver||T.WebKitMutationObserver;T="undefined"===typeof self&&"undefined"!==typeof n&&"[object process]"==={}.toString.call(n);var Y="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&
"undefined"!==typeof MessageChannel,ca=Array(1E3),Z=void 0;Z=T?m():V?b():Y?g():void 0===M&&"function"===typeof a?l():e();var R=Math.random().toString(36).substring(16),U=void 0,X=1,ea=2,fa=new p,la=new p,da=0;J.prototype._enumerate=function(){for(var b=this.length,a=this._input,c=0;this._state===U&&c<b;c++)this._eachEntry(a[c],c)};J.prototype._eachEntry=function(b,a){var e=this._instanceConstructor,g=e.resolve;g===d?(g=r(b),g===f&&b._state!==U?this._settledAt(b._state,a,b._result):"function"!==typeof g?
(this._remaining--,this._result[a]=b):e===H?(e=new e(c),y(e,b,g),this._willSettleAt(e,a)):this._willSettleAt(new e(function(a){return a(b)}),a)):this._willSettleAt(g(b),a)};J.prototype._settledAt=function(b,a,c){var d=this.promise;d._state===U&&(this._remaining--,b===ea?C(d,c):this._result[a]=c);0===this._remaining&&x(d,this._result)};J.prototype._willSettleAt=function(b,a){var c=this;B(b,void 0,function(b){return c._settledAt(X,a,b)},function(b){return c._settledAt(ea,a,b)})};H.all=function(b){return(new J(this,
b)).promise};H.race=function(b){var a=this;return I(b)?new a(function(c,d){for(var e=b.length,f=0;f<e;f++)a.resolve(b[f]).then(c,d)}):new a(function(b,a){return a(new TypeError("You must pass an array to race."))})};H.resolve=d;H.reject=function(b){var a=new this(c);C(a,b);return a};H._setScheduler=function(b){P=b};H._setAsap=function(b){Q=b};H._asap=Q;H.prototype={constructor:H,then:f,"catch":function(b){return this.then(null,b)}};K();H.polyfill=K;return H.Promise=H})}).call(this,a("_process"),"undefined"!==
typeof pa?pa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{_process:483}],222:[function(a,q,p){$jscomp.initSymbol();q.exports=a("./is-implemented")()?Symbol:a("./polyfill")},{"./is-implemented":223,"./polyfill":225}],223:[function(a,q,p){var n={object:!0,symbol:!0};q.exports=function(){$jscomp.initSymbol();if("function"!==typeof Symbol)return!1;$jscomp.initSymbol();var a=Symbol("test symbol");try{String(a)}catch(m){return!1}$jscomp.initSymbol();$jscomp.initSymbolIterator();
if(!n[typeof Symbol.iterator])return!1;$jscomp.initSymbol();if(!n[typeof Symbol.toPrimitive])return!1;$jscomp.initSymbol();return n[typeof Symbol.toStringTag]?!0:!1}},{}],224:[function(a,q,p){q.exports=function(a){return a?"symbol"===typeof a?!0:a.constructor&&"Symbol"===a.constructor.name?"Symbol"===a[a.constructor.toStringTag]:!1:!1}},{}],225:[function(a,q,p){var n=a("d"),k=a("./validate-symbol"),m=Object.create,h=Object.defineProperties,b=Object.defineProperty,g=Object.prototype,e,t=m(null);$jscomp.initSymbol();
if("function"===typeof Symbol){$jscomp.initSymbol();var l=Symbol;try{String(l());var f=!0}catch(r){}}var d=function(){var a=m(null);return function(c){for(var d=0,e,f;a[c+(d||"")];)++d;c+=d||"";a[c]=!0;e="@@"+c;b(g,e,n.gs(null,function(a){f||(f=!0,b(this,e,n(a)),f=!1)}));return e}}();var c=function(b){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return e(b)};q.exports=e=function v(b){if(this instanceof v)throw new TypeError("Symbol is not a constructor");if(f)return l(b);
var a=m(c.prototype);b=void 0===b?"":String(b);return h(a,{__description__:n("",b),__name__:n("",d(b))})};h(e,{for:n(function(b){return t[b]?t[b]:t[b]=e(String(b))}),keyFor:n(function(b){var a;k(b);for(a in t)if(t[a]===b)return a}),hasInstance:n("",l&&l.hasInstance||e("hasInstance")),isConcatSpreadable:n("",l&&l.isConcatSpreadable||e("isConcatSpreadable")),iterator:n("",l&&l.iterator||e("iterator")),match:n("",l&&l.match||e("match")),replace:n("",l&&l.replace||e("replace")),search:n("",l&&l.search||
e("search")),species:n("",l&&l.species||e("species")),split:n("",l&&l.split||e("split")),toPrimitive:n("",l&&l.toPrimitive||e("toPrimitive")),toStringTag:n("",l&&l.toStringTag||e("toStringTag")),unscopables:n("",l&&l.unscopables||e("unscopables"))});h(c.prototype,{constructor:n(e),toString:n("",function(){return this.__name__})});h(e.prototype,{toString:n(function(){return"Symbol ("+k(this).__description__+")"}),valueOf:n(function(){return k(this)})});b(e.prototype,e.toPrimitive,n("",function(){var b=
k(this);return"symbol"===typeof b?b:b.toString()}));b(e.prototype,e.toStringTag,n("c","Symbol"));b(c.prototype,e.toStringTag,n("c",e.prototype[e.toStringTag]));b(c.prototype,e.toPrimitive,n("c",e.prototype[e.toPrimitive]))},{"./validate-symbol":226,d:153}],226:[function(a,q,p){var n=a("./is-symbol");q.exports=function(a){if(!n(a))throw new TypeError(a+" is not a symbol");return a}},{"./is-symbol":224}],227:[function(a,q,p){q.exports=function(a,k,m){k=k||0;m=m||1;return[[a[12]+a[0],a[13]+a[1],a[14]+
a[2],a[15]+a[3]],[a[12]-a[0],a[13]-a[1],a[14]-a[2],a[15]-a[3]],[a[12]+a[4],a[13]+a[5],a[14]+a[6],a[15]+a[7]],[a[12]-a[4],a[13]-a[5],a[14]-a[6],a[15]-a[7]],[k*a[12]+a[8],k*a[13]+a[9],k*a[14]+a[10],k*a[15]+a[11]],[m*a[12]-a[8],m*a[13]-a[9],m*a[14]-a[10],m*a[15]-a[11]]]}},{}],228:[function(a,q,p){var n=a("is-string-blank");q.exports=function(a){var k=typeof a;if("string"===k){if(k=a,a=+a,0===a&&n(k))return!1}else if("number"!==k)return!1;return 1>a-a}},{"is-string-blank":424}],229:[function(a,q,p){function n(b,
a,h){return Math.min(a,Math.max(b,h))}function k(b,a,h){this.dimension=b.length;this.bounds=[Array(this.dimension),Array(this.dimension)];for(var e=0;e<this.dimension;++e)this.bounds[0][e]=-Infinity,this.bounds[1][e]=Infinity;this._state=b.slice().reverse();this._velocity=a.slice().reverse();this._time=[h];this._scratch=[b.slice(),b.slice(),b.slice(),b.slice(),b.slice()]}function m(b){for(var a=Array(b),g=0;g<b;++g)a[g]=0;return a}q.exports=function(b,a,h){switch(arguments.length){case 0:return new k([0],
[0],0);case 1:if("number"===typeof b){var e=m(b);return new k(e,e,0)}return new k(b,m(b.length),0);case 2:if("number"===typeof a)return e=m(b.length),new k(b,e,+a);h=0;case 3:if(b.length!==a.length)throw Error("state and velocity lengths must match");return new k(b,a,h)}};var h=a("cubic-hermite"),b=a("binary-search-bounds");a=k.prototype;a.flush=function(a){a=b.gt(this._time,a)-1;0>=a||(this._time.splice(0,a),this._state.splice(0,a*this.dimension),this._velocity.splice(0,a*this.dimension))};a.curve=
function(a){var e=this._time,g=e.length,l=b.le(e,a),f=this._scratch[0],d=this._state,c=this._velocity,r=this.dimension,k=this.bounds;if(0>l){var m=r-1;for(e=0;e<r;++e,--m)f[e]=d[m]}else if(l>=g-1)for(m=d.length-1,a-=e[g-1],e=0;e<r;++e,--m)f[e]=d[m]+a*c[m];else{m=r*(l+1)-1;g=e[l];l=e[l+1]-g||1;var w=this._scratch[1],y=this._scratch[2],A=this._scratch[3],z=this._scratch[4],x=!0;for(e=0;e<r;++e,--m)w[e]=d[m],A[e]=c[m]*l,y[e]=d[m+r],z[e]=c[m+r]*l,x=x&&w[e]===y[e]&&A[e]===z[e]&&0===A[e];if(x)for(e=0;e<
r;++e)f[e]=w[e];else h(w,A,y,z,(a-g)/l,f)}d=k[0];k=k[1];for(e=0;e<r;++e)f[e]=n(d[e],k[e],f[e]);return f};a.dcurve=function(a){var e=this._time,g=e.length,l=b.le(e,a),f=this._scratch[0],d=this._state,c=this._velocity,r=this.dimension;if(l>=g-1)for(g=d.length-1,e=0;e<r;++e,--g)f[e]=c[g];else{g=r*(l+1)-1;var k=e[l];l=e[l+1]-k||1;var m=this._scratch[1],n=this._scratch[2],y=this._scratch[3],A=this._scratch[4],z=!0;for(e=0;e<r;++e,--g)m[e]=d[g],y[e]=c[g]*l,n[e]=d[g+r],A[e]=c[g+r]*l,z=z&&m[e]===n[e]&&y[e]===
A[e]&&0===y[e];if(z)for(e=0;e<r;++e)f[e]=0;else for(h.derivative(m,y,n,A,(a-k)/l,f),e=0;e<r;++e)f[e]/=l}return f};a.lastT=function(){var b=this._time;return b[b.length-1]};a.stable=function(){for(var b=this._velocity,a=b.length,h=this.dimension-1;0<=h;--h)if(b[--a])return!1;return!0};a.jump=function(b){var a=this.lastT(),g=this.dimension;if(!(b<a||arguments.length!==g+1)){var h=this._state,f=this._velocity,d=h.length-this.dimension,c=this.bounds,r=c[0];c=c[1];this._time.push(a,b);for(a=0;2>a;++a)for(var k=
0;k<g;++k)h.push(h[d++]),f.push(0);this._time.push(b);for(k=g;0<k;--k)h.push(n(r[k-1],c[k-1],arguments[k])),f.push(0)}};a.push=function(b){var a=this.lastT(),g=this.dimension;if(!(b<a||arguments.length!==g+1)){var h=this._state,f=this._velocity,d=h.length-this.dimension,c=b-a,r=this.bounds;a=r[0];r=r[1];c=1E-6<c?1/c:0;for(this._time.push(b);0<g;--g){var k=n(a[g-1],r[g-1],arguments[g]);h.push(k);f.push((k-h[d++])*c)}}};a.set=function(b){var a=this.dimension;if(!(b<this.lastT()||arguments.length!==
a+1)){var g=this._state,h=this._velocity,f=this.bounds,d=f[0];f=f[1];for(this._time.push(b);0<a;--a)g.push(n(d[a-1],f[a-1],arguments[a])),h.push(0)}};a.move=function(b){var a=this.lastT(),g=this.dimension;if(!(b<=a||arguments.length!==g+1)){var h=this._state,f=this._velocity,d=h.length-this.dimension,c=this.bounds,r=c[0];c=c[1];a=b-a;a=1E-6<a?1/a:0;for(this._time.push(b);0<g;--g){var k=arguments[g];h.push(n(r[g-1],c[g-1],h[d++]+k));f.push(k*a)}}};a.idle=function(b){var a=this.lastT();if(!(b<a)){var g=
this.dimension,h=this._state,f=this._velocity,d=h.length-g,c=this.bounds,r=c[0];c=c[1];a=b-a;this._time.push(b);for(b=g-1;0<=b;--b)h.push(n(r[b],c[b],h[d]+a*f[d])),f.push(0),d+=1}}},{"binary-search-bounds":93,"cubic-hermite":147}],230:[function(a,q,p){var n=a("dtype");q.exports=function(a,m,h){if(!a)throw new TypeError("must specify data as first parameter");h=+(h||0)|0;if(Array.isArray(a)&&a[0]&&"number"===typeof a[0][0]){var b=a[0].length,g=a.length*b;m&&"string"!==typeof m||(m=new (n(m||"float32"))(g+
h));var e=m.length-h;if(g!==e)throw Error("source length "+g+" ("+b+"x"+a.length+") does not match destination length "+e);for(g=0;g<a.length;g++)for(e=0;e<b;e++)m[h++]=null===a[g][e]?NaN:a[g][e]}else if(m&&"string"!==typeof m)m.set(a,h);else if(b=n(m||"float32"),Array.isArray(a)||"array"===m)for(m=new b(a.length+h),g=0,b=m.length;h<b;h++,g++)m[h]=null===a[g]?NaN:a[g];else 0===h?m=new b(a):(m=new b(a.length+h),m.set(a,h));return m}},{dtype:171}],231:[function(a,q,p){var n=a("css-font/stringify"),
k=[32,126];q.exports=function(a){a=a||{};var h=a.shape?a.shape:a.canvas?[a.canvas.width,a.canvas.height]:[512,512],b=a.canvas||document.createElement("canvas"),g=a.font,e="number"===typeof a.step?[a.step,a.step]:a.step||[32,32];a=a.chars||k;g&&"string"!==typeof g&&(g=n(g));if(!Array.isArray(a))a=String(a).split("");else if(2===a.length&&"number"===typeof a[0]&&"number"===typeof a[1]){for(var t=[],l=a[0],f=0;l<=a[1];l++)t[f++]=String.fromCharCode(l);a=t}h=h.slice();b.width=h[0];b.height=h[1];t=b.getContext("2d");
t.fillStyle="#000";t.fillRect(0,0,b.width,b.height);t.font=g;t.textAlign="center";t.textBaseline="middle";t.fillStyle="#fff";g=e[0]/2;f=e[1]/2;for(l=0;l<a.length;l++)t.fillText(a[l],g,f),(g+=e[0])>h[0]-e[0]/2&&(g=e[0]/2,f+=e[1]);return b}},{"css-font/stringify":144}],232:[function(a,q,p){function n(b,a){a||(a={});if("string"===typeof b||Array.isArray(b))a.family=b;var e=Array.isArray(a.family)?a.family.join(", "):a.family;if(!e)throw Error("`family` must be defined");var g=a.size||a.fontSize||a.em||
48;b=[a.style||a.fontStyle||"",a.weight||a.fontWeight||"",g].join(" ")+"px "+e;var l=a.origin||"top";if(n.cache[e]&&g<=n.cache[e].em)return k(n.cache[e],l);var f=a.canvas||n.canvas,d=f.getContext("2d"),c=void 0!==a.upper?a.upper:"H",r=void 0!==a.lower?a.lower:"x",u=void 0!==a.descent?a.descent:"p",v=void 0!==a.ascent?a.ascent:"h",w=void 0!==a.tittle?a.tittle:"i";a=void 0!==a.overshoot?a.overshoot:"O";var y=Math.ceil(1.5*g);f.height=y;f.width=.5*y;d.font=b;b={top:0};d.clearRect(0,0,y,y);d.textBaseline=
"top";d.fillStyle="black";d.fillText("H",0,0);f=m(d.getImageData(0,0,y,y));d.clearRect(0,0,y,y);d.textBaseline="bottom";d.fillText("H",0,y);var A=m(d.getImageData(0,0,y,y));b.lineHeight=b.bottom=y-A+f;d.clearRect(0,0,y,y);d.textBaseline="alphabetic";d.fillText("H",0,y);A=m(d.getImageData(0,0,y,y));A=y-A-1+f;b.baseline=b.alphabetic=A;d.clearRect(0,0,y,y);d.textBaseline="middle";d.fillText("H",0,.5*y);var z=m(d.getImageData(0,0,y,y));b.median=b.middle=y-z-1+f-.5*y;d.clearRect(0,0,y,y);d.textBaseline=
"hanging";d.fillText("H",0,.5*y);z=m(d.getImageData(0,0,y,y));b.hanging=y-z-1+f-.5*y;d.clearRect(0,0,y,y);d.textBaseline="ideographic";d.fillText("H",0,y);z=m(d.getImageData(0,0,y,y));b.ideographic=y-z-1+f;c&&(d.clearRect(0,0,y,y),d.textBaseline="top",d.fillText(c,0,0),b.upper=m(d.getImageData(0,0,y,y)),b.capHeight=b.baseline-b.upper);r&&(d.clearRect(0,0,y,y),d.textBaseline="top",d.fillText(r,0,0),b.lower=m(d.getImageData(0,0,y,y)),b.xHeight=b.baseline-b.lower);w&&(d.clearRect(0,0,y,y),d.textBaseline=
"top",d.fillText(w,0,0),b.tittle=m(d.getImageData(0,0,y,y)));v&&(d.clearRect(0,0,y,y),d.textBaseline="top",d.fillText(v,0,0),b.ascent=m(d.getImageData(0,0,y,y)));u&&(d.clearRect(0,0,y,y),d.textBaseline="top",d.fillText(u,0,0),b.descent=h(d.getImageData(0,0,y,y)));a&&(d.clearRect(0,0,y,y),d.textBaseline="top",d.fillText(a,0,0),d=h(d.getImageData(0,0,y,y)),b.overshoot=d-A);for(var x in b)b[x]/=g;b.em=g;n.cache[e]=b;return k(b,l)}function k(b,a){var e={};"string"===typeof a&&(a=b[a]);for(var g in b)"em"!==
g&&(e[g]=b[g]-a);return e}function m(b){var a=b.height;b=b.data;for(var e=3;e<b.length;e+=4)if(0!==b[e])return Math.floor(.25*(e-3)/a)}function h(b){var a=b.height;b=b.data;for(var e=b.length-1;0<e;e-=4)if(0!==b[e])return Math.floor(.25*(e-3)/a)}q.exports=n;n.canvas=document.createElement("canvas");n.cache={}},{}],233:[function(a,q,p){function n(b,a,d,e,f,g){this._color=b;this.key=a;this.value=d;this.left=e;this.right=f;this._count=g}function k(b){return new n(b._color,b.key,b.value,b.left,b.right,
b._count)}function m(b,a){return new n(b,a.key,a.value,a.left,a.right,a._count)}function h(b){b._count=1+(b.left?b.left._count:0)+(b.right?b.right._count:0)}function b(b,a){this._compare=b;this.root=a}function g(b,a){if(a.left){var c=g(b,a.left);if(c)return c}if(c=b(a.key,a.value))return c;if(a.right)return g(b,a.right)}function e(b,a,d,f){if(0>=a(b,f.key)){if(f.left){var c=e(b,a,d,f.left);if(c)return c}if(c=d(f.key,f.value))return c}if(f.right)return e(b,a,d,f.right)}function t(b,a,d,e,f){var c=
d(b,f.key),g=d(a,f.key);if(0>=c&&(f.left&&(c=t(b,a,d,e,f.left))||0<g&&(c=e(f.key,f.value))))return c;if(0<g&&f.right)return t(b,a,d,e,f.right)}function l(b,a){this.tree=b;this._stack=a}function f(b,a){b.key=a.key;b.value=a.value;b.left=a.left;b.right=a.right;b._color=a._color;b._count=a._count}function d(b,a){return b<a?-1:b>a?1:0}q.exports=function(a){return new b(a||d,null)};a=b.prototype;Object.defineProperty(a,"keys",{get:function(){var b=[];this.forEach(function(a,c){b.push(a)});return b}});
Object.defineProperty(a,"values",{get:function(){var b=[];this.forEach(function(a,c){b.push(c)});return b}});Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}});a.insert=function(a,d){for(var c=this._compare,e=this.root,f=[],g=[];e;){var r=c(a,e.key);f.push(e);g.push(r);e=0>=r?e.left:e.right}f.push(new n(0,a,d,null,null,1));for(a=f.length-2;0<=a;--a)e=f[a],f[a]=0>=g[a]?new n(e._color,e.key,e.value,f[a+1],e.right,e._count+1):new n(e._color,e.key,e.value,e.left,f[a+
1],e._count+1);for(a=f.length-1;1<a;--a){g=f[a-1];e=f[a];if(1===g._color||1===e._color)break;d=f[a-2];if(d.left===g)if(g.left===e)if((r=d.right)&&0===r._color)g._color=1,d.right=m(1,r),d._color=0,--a;else{d._color=0;d.left=g.right;g._color=1;g.right=d;f[a-2]=g;f[a-1]=e;h(d);h(g);3<=a&&(a=f[a-3],a.left===d?a.left=g:a.right=g);break}else if((r=d.right)&&0===r._color)g._color=1,d.right=m(1,r),d._color=0,--a;else{g.right=e.left;d._color=0;d.left=e.right;e._color=1;e.left=g;e.right=d;f[a-2]=e;f[a-1]=g;
h(d);h(g);h(e);3<=a&&(a=f[a-3],a.left===d?a.left=e:a.right=e);break}else if(g.right===e)if((r=d.left)&&0===r._color)g._color=1,d.left=m(1,r),d._color=0,--a;else{d._color=0;d.right=g.left;g._color=1;g.left=d;f[a-2]=g;f[a-1]=e;h(d);h(g);3<=a&&(a=f[a-3],a.right===d?a.right=g:a.left=g);break}else if((r=d.left)&&0===r._color)g._color=1,d.left=m(1,r),d._color=0,--a;else{g.left=e.right;d._color=0;d.right=e.left;e._color=1;e.right=g;e.left=d;f[a-2]=e;f[a-1]=g;h(d);h(g);h(e);3<=a&&(a=f[a-3],a.right===d?a.right=
e:a.left=e);break}}f[0]._color=1;return new b(c,f[0])};a.forEach=function(b,a,d){if(this.root)switch(arguments.length){case 1:return g(b,this.root);case 2:return e(a,this._compare,b,this.root);case 3:if(!(0<=this._compare(a,d)))return t(a,d,this._compare,b,this.root)}};Object.defineProperty(a,"begin",{get:function(){for(var b=[],a=this.root;a;)b.push(a),a=a.left;return new l(this,b)}});Object.defineProperty(a,"end",{get:function(){for(var b=[],a=this.root;a;)b.push(a),a=a.right;return new l(this,
b)}});a.at=function(b){if(0>b)return new l(this,[]);for(var a=this.root,c=[];;){c.push(a);if(a.left){if(b<a.left._count){a=a.left;continue}b-=a.left._count}if(!b)return new l(this,c);--b;if(a.right){if(b>=a.right._count)break;a=a.right}else break}return new l(this,[])};a.ge=function(b){for(var a=this._compare,c=this.root,d=[],e=0;c;){var f=a(b,c.key);d.push(c);0>=f&&(e=d.length);c=0>=f?c.left:c.right}d.length=e;return new l(this,d)};a.gt=function(b){for(var a=this._compare,c=this.root,d=[],e=0;c;){var f=
a(b,c.key);d.push(c);0>f&&(e=d.length);c=0>f?c.left:c.right}d.length=e;return new l(this,d)};a.lt=function(b){for(var a=this._compare,c=this.root,d=[],e=0;c;){var f=a(b,c.key);d.push(c);0<f&&(e=d.length);c=0>=f?c.left:c.right}d.length=e;return new l(this,d)};a.le=function(b){for(var a=this._compare,c=this.root,d=[],e=0;c;){var f=a(b,c.key);d.push(c);0<=f&&(e=d.length);c=0>f?c.left:c.right}d.length=e;return new l(this,d)};a.find=function(b){for(var a=this._compare,c=this.root,d=[];c;){var e=a(b,c.key);
d.push(c);if(0===e)return new l(this,d);c=0>=e?c.left:c.right}return new l(this,[])};a.remove=function(b){return(b=this.find(b))?b.remove():this};a.get=function(b){for(var a=this._compare,c=this.root;c;){var d=a(b,c.key);if(0===d)return c.value;c=0>=d?c.left:c.right}};a=l.prototype;Object.defineProperty(a,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(a,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});a.clone=
function(){return new l(this.tree,this._stack.slice())};a.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var d=Array(a.length),e=a[a.length-1];d[d.length-1]=new n(e._color,e.key,e.value,e.left,e.right,e._count);for(var g=a.length-2;0<=g;--g)e=a[g],d[g]=e.left===a[g+1]?new n(e._color,e.key,e.value,d[g+1],e.right,e._count):new n(e._color,e.key,e.value,e.left,d[g+1],e._count);e=d[d.length-1];if(e.left&&e.right){a=d.length;for(e=e.left;e.right;)d.push(e),e=e.right;g=d[a-1];d.push(new n(e._color,
g.key,g.value,e.left,e.right,e._count));d[a-1].key=e.key;d[a-1].value=e.value;for(g=d.length-2;g>=a;--g)e=d[g],d[g]=new n(e._color,e.key,e.value,e.left,d[g+1],e._count);d[a-1].left=d[a]}e=d[d.length-1];if(0===e._color)for(g=d[d.length-2],g.left===e?g.left=null:g.right===e&&(g.right=null),d.pop(),g=0;g<d.length;++g)d[g]._count--;else if(e.left||e.right)for(e.left?f(e,e.left):e.right&&f(e,e.right),e._color=1,g=0;g<d.length-1;++g)d[g]._count--;else{if(1===d.length)return new b(this.tree._compare,null);
for(g=0;g<d.length;++g)d[g]._count--;g=d[d.length-2];for(var l,t,A,z=d.length-1;0<=z;--z){a=d[z];if(0===z){a._color=1;break}l=d[z-1];if(l.left===a){t=l.right;if(t.right&&0===t.right._color){t=l.right=k(t);A=t.right=k(t.right);l.right=t.left;t.left=l;t.right=A;t._color=l._color;a._color=1;l._color=1;A._color=1;h(l);h(t);if(1<z){var x=d[z-2];x.left===l?x.left=t:x.right=t}d[z-1]=t;break}else if(t.left&&0===t.left._color){t=l.right=k(t);A=t.left=k(t.left);l.right=A.left;t.left=A.right;A.left=l;A.right=
t;A._color=l._color;l._color=1;t._color=1;a._color=1;h(l);h(t);h(A);1<z&&(x=d[z-2],x.left===l?x.left=A:x.right=A);d[z-1]=A;break}if(1===t._color)if(0===l._color){l._color=1;l.right=m(0,t);break}else l.right=m(0,t);else t=k(t),l.right=t.left,t.left=l,t._color=l._color,l._color=0,h(l),h(t),1<z&&(x=d[z-2],x.left===l?x.left=t:x.right=t),d[z-1]=t,d[z]=l,z+1<d.length?d[z+1]=a:d.push(a),z+=2}else{t=l.left;if(t.left&&0===t.left._color){t=l.left=k(t);A=t.left=k(t.left);l.left=t.right;t.right=l;t.left=A;t._color=
l._color;a._color=1;l._color=1;A._color=1;h(l);h(t);1<z&&(x=d[z-2],x.right===l?x.right=t:x.left=t);d[z-1]=t;break}else if(t.right&&0===t.right._color){t=l.left=k(t);A=t.right=k(t.right);l.left=A.right;t.right=A.left;A.right=l;A.left=t;A._color=l._color;l._color=1;t._color=1;a._color=1;h(l);h(t);h(A);1<z&&(x=d[z-2],x.right===l?x.right=A:x.left=A);d[z-1]=A;break}if(1===t._color)if(0===l._color){l._color=1;l.left=m(0,t);break}else l.left=m(0,t);else t=k(t),l.left=t.right,t.right=l,t._color=l._color,
l._color=0,h(l),h(t),1<z&&(x=d[z-2],x.right===l?x.right=t:x.left=t),d[z-1]=t,d[z]=l,z+1<d.length?d[z+1]=a:d.push(a),z+=2}}g.left===e?g.left=null:g.right=null}return new b(this.tree._compare,d[0])};Object.defineProperty(a,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(a,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(a,"index",{get:function(){var b=
0,a=this._stack;if(0===a.length)return(b=this.tree.root)?b._count:0;a[a.length-1].left&&(b=a[a.length-1].left._count);for(var d=a.length-2;0<=d;--d)a[d+1]===a[d].right&&(++b,a[d].left&&(b+=a[d].left._count));return b},enumerable:!0});a.next=function(){var b=this._stack;if(0!==b.length){var a=b[b.length-1];if(a.right)for(a=a.right;a;)b.push(a),a=a.left;else for(b.pop();0<b.length&&b[b.length-1].right===a;)a=b[b.length-1],b.pop()}};Object.defineProperty(a,"hasNext",{get:function(){var b=this._stack;
if(0===b.length)return!1;if(b[b.length-1].right)return!0;for(var a=b.length-1;0<a;--a)if(b[a-1].left===b[a])return!0;return!1}});a.update=function(a){var c=this._stack;if(0===c.length)throw Error("Can't update empty node!");var d=Array(c.length),e=c[c.length-1];d[d.length-1]=new n(e._color,e.key,a,e.left,e.right,e._count);for(a=c.length-2;0<=a;--a)e=c[a],d[a]=e.left===c[a+1]?new n(e._color,e.key,e.value,d[a+1],e.right,e._count):new n(e._color,e.key,e.value,e.left,d[a+1],e._count);return new b(this.tree._compare,
d[0])};a.prev=function(){var b=this._stack;if(0!==b.length){var a=b[b.length-1];if(a.left)for(a=a.left;a;)b.push(a),a=a.right;else for(b.pop();0<b.length&&b[b.length-1].left===a;)a=b[b.length-1],b.pop()}};Object.defineProperty(a,"hasPrev",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].left)return!0;for(var a=b.length-1;0<a;--a)if(b[a-1].right===b[a])return!0;return!1}})},{}],234:[function(a,q,p){function n(a){if(0>a)return Number("0/0");for(var b=m[0],g=m.length-1;0<g;--g)b+=
m[g]/(a+g);g=a+4.7421875+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(g)-g+Math.log(b)-Math.log(a)}var k=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],m=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,
-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];q.exports=function g(b){if(.5>b)return Math.PI/(Math.sin(Math.PI*b)*g(1-b));if(100<b)return Math.exp(n(b));--b;for(var a=k[0],t=1;9>t;t++)a+=k[t]/(b+t);t=b+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(t,b+.5)*Math.exp(-t)*a};q.exports.log=n},{}],235:[function(a,q,p){q.exports=function(a,k){if("string"!==typeof a)throw new TypeError("must specify type string");k=k||{};if("undefined"===typeof document&&!k.canvas)return null;
var m=k.canvas||document.createElement("canvas");"number"===typeof k.width&&(m.width=k.width);"number"===typeof k.height&&(m.height=k.height);var h;try{var b=[a];0===a.indexOf("webgl")&&b.push("experimental-"+a);for(a=0;a<b.length;a++)if(h=m.getContext(b[a],k))return h}catch(g){h=null}return h||null}},{}],236:[function(a,q,p){function n(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b}function k(b){this.gl=b;this.pixelRatio=1;this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.autoTicks=
!0;this.tickSpacing=[1,1,1];this.tickEnable=[!0,!0,!0];this.tickFont=["sans-serif","sans-serif","sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickAlign=["auto","auto","auto"];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[10,10,10];this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]};this.labels=["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont="sans-serif";this.labelSize=[20,20,20];this.labelAngle=[0,0,0];this.labelAlign=["auto","auto","auto"];this.labelColor=
[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[10,10,10];this.lineEnable=[!0,!0,!0];this.lineMirror=[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[0,0,0];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],
[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[!1,!1,!1];this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._firstInit=!0;this._lines=this._text=null;this._background=e(b)}function m(){this.primalOffset=[0,0,0];this.primalMinor=[0,0,0];this.mirrorOffset=[0,0,0];this.mirrorMinor=[0,0,0]}function h(b,a,c,d,e){var f=b.primalOffset,g=b.primalMinor,h=b.mirrorOffset;b=b.mirrorMinor;d=d[a];for(var r=0;3>r;++r)if(a!==r){var l=f,k=h,t=g,u=b;d&1<<r&&(l=h,k=f,t=b,u=
g);l[r]=c[0][r];k[r]=c[1][r];0<e[r]?(t[r]=-1,u[r]=0):(t[r]=0,u[r]=1)}}q.exports=function(b,a){b=new k(b);b.update(a);return b};var b=a("./lib/text.js"),g=a("./lib/lines.js"),e=a("./lib/background.js"),t=a("./lib/cube.js"),l=a("./lib/ticks.js"),f=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);a=k.prototype;a.update=function(a){function c(b,c,d){if(d in a){var e=a[d],f=this[d],g;(b?Array.isArray(e)&&Array.isArray(e[0]):Array.isArray(e))?this[d]=g=[c(e[0]),c(e[1]),c(e[2])]:this[d]=g=[c(e),c(e),
c(e)];for(b=0;3>b;++b)if(g[b]!==f[b])return!0}return!1}a=a||{};var d=c.bind(this,!1,Number),e=c.bind(this,!1,Boolean),f=c.bind(this,!1,String),h=c.bind(this,!0,function(b){if(Array.isArray(b)){if(3===b.length)return[+b[0],+b[1],+b[2],1];if(4===b.length)return[+b[0],+b[1],+b[2],+b[3]]}return[0,0,0,1]}),r=!1,k=!1;if("bounds"in a){var t=a.bounds,u=0;for(;2>u;++u)for(var m=0;3>m;++m)t[u][m]!==this.bounds[u][m]&&(k=!0),this.bounds[u][m]=t[u][m]}if("ticks"in a){var n=a.ticks;r=!0;this.autoTicks=!1;for(u=
0;3>u;++u)this.tickSpacing[u]=0}else d("tickSpacing")&&(k=this.autoTicks=!0);this._firstInit&&("ticks"in a||"tickSpacing"in a||(this.autoTicks=!0),r=k=!0,this._firstInit=!1);k&&this.autoTicks&&(n=l.create(this.bounds,this.tickSpacing),r=!0);if(r){for(u=0;3>u;++u)n[u].sort(function(b,a){return b.x-a.x});l.equal(n,this.ticks)?r=!1:this.ticks=n}e("tickEnable");f("tickFont")&&(r=!0);d("tickSize");d("tickAngle");d("tickPad");h("tickColor");n=f("labels");f("labelFont")&&(n=!0);e("labelEnable");d("labelSize");
d("labelPad");h("labelColor");e("lineEnable");e("lineMirror");d("lineWidth");h("lineColor");e("lineTickEnable");e("lineTickMirror");d("lineTickLength");d("lineTickWidth");h("lineTickColor");e("gridEnable");d("gridWidth");h("gridColor");e("zeroEnable");h("zeroLineColor");d("zeroLineWidth");e("backgroundEnable");h("backgroundColor");this._text?this._text&&(n||r)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=b(this.gl,this.bounds,this.labels,this.labelFont,
this.ticks,this.tickFont);this._lines&&r&&(this._lines.dispose(),this._lines=null);this._lines||(this._lines=g(this.gl,this.bounds,this.ticks))};var d=[new m,new m,new m],c=[0,0,0],r={model:f,view:f,projection:f,_ortho:!1};a.isOpaque=function(){return!0};a.isTransparent=function(){return!1};a.drawTransparent=function(b){};var u=[0,0,0],v=[0,0,0],w=[0,0,0];a.draw=function(b){function a(b){K=[0,0,0];K[b]=1}function e(b,c,d){var e=(b+1)%3;b=(b+2)%3;var f=c[e];c=c[b];var g=d[e];d=d[b];0<f&&0<d?a(e):0<
f&&0>d?a(e):0>f&&0<d?a(e):0>f&&0>d?a(e):0<c&&0<g?a(b):0<c&&0>g?a(b):0>c&&0<g?a(b):0>c&&0>g&&a(b)}b=b||r;var g=this.gl,l=b.model||f,k=b.view||f,m=b.projection||f,y=this.bounds;b=b._ortho||!1;var p=t(l,k,m,y,b),q=p.cubeEdges;p=p.axis;b=(b?2:1)*this.pixelRatio*(m[3]*k[12]+m[7]*k[13]+m[11]*k[14]+m[15]*k[15])/g.drawingBufferHeight;for(g=0;3>g;++g)this.lastCubeProps.cubeEdges[g]=q[g],this.lastCubeProps.axis[g]=p[g];for(g=0;3>g;++g)h(d[g],g,this.bounds,q,p);g=this.gl;for(g=0;3>g;++g)c[g]=this.backgroundEnable[g]?
p[g]:0;this._background.draw(l,k,m,y,c,this.backgroundColor);this._lines.bind(l,k,m,this);for(g=0;3>g;++g){var L=[0,0,0];L[g]=0<p[g]?y[1][g]:y[0][g];for(q=0;2>q;++q){var J=(g+1+q)%3,H=(g+1+(q^1))%3;this.gridEnable[J]&&this._lines.drawGrid(J,H,this.bounds,L,this.gridColor[J],this.gridWidth[J]*this.pixelRatio)}for(q=0;2>q;++q)J=(g+1+q)%3,H=(g+1+(q^1))%3,this.zeroEnable[H]&&0>=Math.min(y[0][H],y[1][H])&&0<=Math.max(y[0][H],y[1][H])&&this._lines.drawZero(J,H,this.bounds,L,this.zeroLineColor[H],this.zeroLineWidth[H]*
this.pixelRatio)}for(g=0;3>g;++g){this.lineEnable[g]&&this._lines.drawAxisLine(g,this.bounds,d[g].primalOffset,this.lineColor[g],this.lineWidth[g]*this.pixelRatio);this.lineMirror[g]&&this._lines.drawAxisLine(g,this.bounds,d[g].mirrorOffset,this.lineColor[g],this.lineWidth[g]*this.pixelRatio);p=n(u,d[g].primalMinor);L=n(v,d[g].mirrorMinor);J=this.lineTickLength;for(q=0;3>q;++q)H=b/l[5*q],p[q]=p[q]*J[q]*H,L[q]=L[q]*J[q]*H;this.lineTickEnable[g]&&this._lines.drawAxisTicks(g,d[g].primalOffset,p,this.lineTickColor[g],
this.lineTickWidth[g]*this.pixelRatio);this.lineTickMirror[g]&&this._lines.drawAxisTicks(g,d[g].mirrorOffset,L,this.lineTickColor[g],this.lineTickWidth[g]*this.pixelRatio)}this._lines.unbind();this._text.bind(l,k,m,this.pixelRatio);for(g=0;3>g;++g){k=d[g].primalMinor;m=d[g].mirrorMinor;p=n(w,d[g].primalOffset);for(q=0;3>q;++q)this.lineTickEnable[g]&&(p[q]+=b*k[q]*Math.max(this.lineTickLength[q],0)/l[5*q]);L=[0,0,0];L[g]=1;if(this.tickEnable[g]){-3600===this.tickAngle[g]?(this.tickAngle[g]=0,this.tickAlign[g]=
"auto"):this.tickAlign[g]=-1;q=1;J=[this.tickAlign[g],.5,q];J[0]="auto"===J[0]?0:parseInt(""+J[0]);var K=[0,0,0];e(g,k,m);for(q=0;3>q;++q)p[q]+=b*k[q]*this.tickPad[q]/l[5*q];this._text.drawTicks(g,this.tickSize[g],this.tickAngle[g],p,this.tickColor[g],L,K,J)}if(this.labelEnable[g]){q=0;K=[0,0,0];4<this.labels[g].length&&(a(g),q=1);J=[this.labelAlign[g],.5,q];J[0]="auto"===J[0]?0:parseInt(""+J[0]);for(q=0;3>q;++q)p[q]+=b*k[q]*this.labelPad[q]/l[5*q];p[g]+=.5*(y[0][g]+y[1][g]);this._text.drawLabel(g,
this.labelSize[g],this.labelAngle[g],p,this.labelColor[g],[0,0,0],K,J)}}this._text.unbind()};a.dispose=function(){this._text.dispose();this._lines.dispose();this._background.dispose();this.gl=this._background=this._text=this._lines=null}},{"./lib/background.js":237,"./lib/cube.js":238,"./lib/lines.js":239,"./lib/text.js":241,"./lib/ticks.js":242}],237:[function(a,q,p){function n(b,a,e,h){this.gl=b;this.buffer=a;this.vao=e;this.shader=h}q.exports=function(b){for(var a=[],e=[],t=0,l=0;3>l;++l)for(var f=
(l+1)%3,d=(l+2)%3,c=[0,0,0],r=[0,0,0],u=-1;1>=u;u+=2){e.push(t,t+2,t+1,t+1,t+2,t+3);c[l]=u;r[l]=u;for(var v=-1;1>=v;v+=2){c[f]=v;for(var w=-1;1>=w;w+=2)c[d]=w,a.push(c[0],c[1],c[2],r[0],r[1],r[2]),t+=1}v=f;f=d;d=v}a=k(b,new Float32Array(a));e=k(b,new Uint16Array(e),b.ELEMENT_ARRAY_BUFFER);e=m(b,[{buffer:a,type:b.FLOAT,size:3,offset:0,stride:24},{buffer:a,type:b.FLOAT,size:3,offset:12,stride:24}],e);t=h(b);t.attributes.position.location=0;t.attributes.normal.location=1;return new n(b,a,e,t)};var k=
a("gl-buffer"),m=a("gl-vao"),h=a("./shaders").bg;a=n.prototype;a.draw=function(b,a,e,h,l,f){for(var d=!1,c=0;3>c;++c)d=d||l[c];d&&(d=this.gl,d.enable(d.POLYGON_OFFSET_FILL),d.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:b,view:a,projection:e,bounds:h,enable:l,colors:f},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),d.disable(d.POLYGON_OFFSET_FILL))};a.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},{"./shaders":240,"gl-buffer":244,
"gl-vao":329}],238:[function(a,q,p){q.exports=function(a,v,w,y,A){k(b,v,a);k(b,w,b);for(a=v=0;2>a;++a)for(t[2]=y[a][2],w=0;2>w;++w){t[1]=y[w][1];for(var u=0;2>u;++u){t[0]=y[u][0];for(var x=g[v],C=t,B=b,D=0;4>D;++D){x[D]=B[12+D];for(var p=0;3>p;++p)x[D]+=C[p]*B[4*p+D]}v+=1}}y=-1;for(a=0;8>a;++a){v=g[a][3];for(w=0;3>w;++w)e[a][w]=g[a][w]/v;A&&(e[a][2]*=-1);0>v&&(0>y?y=a:e[a][2]<e[y][2]&&(y=a))}if(0>y)for(a=y=0;3>a;++a){v=(a+2)%3;A=(a+1)%3;u=w=-1;for(x=0;2>x;++x)C=x<<a,B=C+(x<<v)+(1-x<<A),D=C+(1-x<<
v)+(x<<A),0>h(e[C],e[B],e[D],l)||(x?w=1:u=1);if(!(0>w||0>u))for(x=0;2>x;++x){C=x<<a;B=C+(x<<v)+(1-x<<A);D=C+(1-x<<v)+(x<<A);a:{C=[g[C],g[B],g[D],g[C+(1<<v)+(1<<A)]];for(D=0;D<f.length;++D)if(C=m.positive(C,f[D]),3>C.length){C=0;break a}D=C[0];B=D[0]/D[3];p=D[1]/D[3];var q=0;for(D=1;D+1<C.length;++D){var F=C[D],L=C[D+1];q+=Math.abs((F[0]/F[3]-B)*(L[1]/L[3]-p)-(F[1]/F[3]-p)*(L[0]/L[3]-B))}C=q}x?w=C:u=C}u>w&&(y|=1<<a)}v=7^y;x=-1;for(a=0;8>a;++a)a!==y&&a!==v&&(0>x?x=a:e[x][1]>e[a][1]&&(x=a));w=-1;for(a=
0;3>a;++a)C=x^1<<a,C!==y&&C!==v&&(0>w&&(w=C),A=e[C],A[0]<e[w][0]&&(w=C));u=-1;for(a=0;3>a;++a)C=x^1<<a,C!==y&&C!==v&&C!==w&&(0>u&&(u=C),A=e[C],A[0]>e[u][0]&&(u=C));A=d;A[0]=A[1]=A[2]=0;A[n.log2(w^x)]=x&w;A[n.log2(x^u)]=x&u;a=u^7;a===y||a===v?(a=w^7,A[n.log2(u^a)]=a&u):A[n.log2(w^a)]=a&w;A=c;for(a=0;3>a;++a)A[a]=y&1<<a?-1:1;return r};var n=a("bit-twiddle"),k=a("gl-mat4/multiply"),m=a("split-polygon"),h=a("robust-orientation"),b=Array(16),g=Array(8),e=Array(8),t=Array(3),l=[0,0,0];(function(){for(var b=
0;8>b;++b)g[b]=[1,1,1,1],e[b]=[1,1,1]})();var f=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],d=[1,1,1],c=[0,0,0],r={cubeEdges:d,axis:c}},{"bit-twiddle":94,"gl-mat4/multiply":270,"robust-orientation":508,"split-polygon":525}],239:[function(a,q,p){function n(b){b[0]=b[1]=b[2]=0;return b}function k(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b}function m(b,a,d,e,f,g,h,l){this.gl=b;this.vertBuffer=a;this.vao=d;this.shader=e;this.tickCount=f;this.tickOffset=g;this.gridCount=
h;this.gridOffset=l}q.exports=function(a,d,e){var c=[];d=[0,0,0];var f=[0,0,0],r=[0,0,0],l=[0,0,0];c.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var k=0;3>k;++k){for(var t=c.length/3|0,u=0;u<e[k].length;++u){var n=+e[k][u].x;c.push(n,0,1,n,1,1,n,0,-1,n,0,-1,n,1,1,n,1,-1)}n=c.length/3|0;d[k]=t;f[k]=n-t;t=c.length/3|0;for(u=0;u<e[k].length;++u)n=+e[k][u].x,c.push(n,0,1,n,1,1,n,0,-1,n,0,-1,n,1,1,n,1,-1);n=c.length/3|0;r[k]=t;l[k]=n-t}e=h(a,new Float32Array(c));c=b(a,[{buffer:e,type:a.FLOAT,size:3,
stride:0,offset:0}]);k=g(a);k.attributes.position.location=0;return new m(a,e,c,k,f,d,l,r)};var h=a("gl-buffer"),b=a("gl-vao"),g=a("./shaders").line,e=[0,0,0],t=[0,0,0],l=[0,0,0],f=[0,0,0],d=[1,1];a=m.prototype;a.bind=function(b,a,e){this.shader.bind();this.shader.uniforms.model=b;this.shader.uniforms.view=a;this.shader.uniforms.projection=e;d[0]=this.gl.drawingBufferWidth;d[1]=this.gl.drawingBufferHeight;this.shader.uniforms.screenShape=d;this.vao.bind()};a.unbind=function(){this.vao.unbind()};a.drawAxisLine=
function(b,a,d,e,g){var c=n(t);this.shader.uniforms.majorAxis=t;c[b]=a[1][b]-a[0][b];this.shader.uniforms.minorAxis=c;d=k(f,d);d[b]+=a[0][b];this.shader.uniforms.offset=d;this.shader.uniforms.lineWidth=g;this.shader.uniforms.color=e;a=n(l);a[(b+2)%3]=1;this.shader.uniforms.screenAxis=a;this.vao.draw(this.gl.TRIANGLES,6);a=n(l);a[(b+1)%3]=1;this.shader.uniforms.screenAxis=a;this.vao.draw(this.gl.TRIANGLES,6)};a.drawAxisTicks=function(b,a,d,f,g){if(this.tickCount[b]){var c=n(e);c[b]=1;this.shader.uniforms.majorAxis=
c;this.shader.uniforms.offset=a;this.shader.uniforms.minorAxis=d;this.shader.uniforms.color=f;this.shader.uniforms.lineWidth=g;a=n(l);a[b]=1;this.shader.uniforms.screenAxis=a;this.vao.draw(this.gl.TRIANGLES,this.tickCount[b],this.tickOffset[b])}};a.drawGrid=function(b,a,d,g,h,m){if(this.gridCount[b]){var c=n(t);c[a]=d[1][a]-d[0][a];this.shader.uniforms.minorAxis=c;g=k(f,g);g[a]+=d[0][a];this.shader.uniforms.offset=g;a=n(e);a[b]=1;this.shader.uniforms.majorAxis=a;a=n(l);a[b]=1;this.shader.uniforms.screenAxis=
a;this.shader.uniforms.lineWidth=m;this.shader.uniforms.color=h;this.vao.draw(this.gl.TRIANGLES,this.gridCount[b],this.gridOffset[b])}};a.drawZero=function(b,a,d,e,g,h){var c=n(t);this.shader.uniforms.majorAxis=c;c[b]=d[1][b]-d[0][b];this.shader.uniforms.minorAxis=c;e=k(f,e);e[b]+=d[0][b];this.shader.uniforms.offset=e;b=n(l);b[a]=1;this.shader.uniforms.screenAxis=b;this.shader.uniforms.lineWidth=h;this.shader.uniforms.color=g;this.vao.draw(this.gl.TRIANGLES,6)};a.dispose=function(){this.vao.dispose();
this.vertBuffer.dispose();this.shader.dispose()}},{"./shaders":240,"gl-buffer":244,"gl-vao":329}],240:[function(a,q,p){q=a("glslify");var n=a("gl-shader"),k=q(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp \x3d projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major \x3d position.x * majorAxis;\n  vec3 minor \x3d position.y * minorAxis;\n\n  vec3 vPosition \x3d major + minor + offset;\n  vec3 pPosition \x3d project(vPosition);\n  vec3 offset \x3d project(vPosition + screenAxis * position.z);\n\n  vec2 screen \x3d normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position \x3d vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),
m=q(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}"]);p.line=function(b){return n(b,k,m,null,[{name:"position",type:"vec3"}])};var h=q(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp \x3d projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A \x3d project(a);\n  vec3 B \x3d project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI \x3d 3.141592;\nconst float TWO_PI \x3d 2.0 * PI;\nconst float HALF_PI \x3d 0.5 * PI;\nconst float ONE_AND_HALF_PI \x3d 1.5 * PI;\n\nint option \x3d int(floor(alignOpt.x + 0.001));\nfloat hv_ratio \x3d       alignOpt.y;\nbool enableAlign \x3d    (alignOpt.z !\x3d 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a \x3c 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b \x3d positive_angle(a);\n  return ((b \x3e HALF_PI) \x26\x26 (b \x3c\x3d ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b \x3d positive_angle(a);\n\n  return\n    (b \x3c (      ratio) * HALF_PI) ? 0.0 :\n    (b \x3c (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b \x3c (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b \x3c (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b \x3d positive_angle(a);\n  float div \x3d TWO_PI / float(n);\n  float c \x3d roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option \x3e  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option \x3d\x3d 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option \x3d\x3d 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option \x3d\x3d 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option \x3d\x3d-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle \x3d (axis.x \x3d\x3d 0.0) \x26\x26\n                   (axis.y \x3d\x3d 0.0) \x26\x26\n                   (axis.z \x3d\x3d 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance \x3d position.z;\n  vec3 dataPosition \x3d axisDistance * axis + offset;\n\n  float beta \x3d angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle \x3d (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle \x3d computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle +\x3d (sin(axisAngle) \x3c 0.0) ? PI : 0.0;\n    clipAngle +\x3d (sin(clipAngle) \x3c 0.0) ? PI : 0.0;\n\n    flip \x3d (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) \x3e 0.0) ? 1.0 : 0.0;\n\n    beta +\x3d applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord \x3d position.xy * pixelScale;\n\n  mat2 planeXform \x3d scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset \x3d 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition \x3d project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition +\x3d vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position \x3d vec4(clipPosition, 1.0);\n}"]),
b=q(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}"]);p.text=function(a){return n(a,h,b,null,[{name:"position",type:"vec3"}])};var g=q(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis \x3d sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal \x3d signAxis * normal;\n\n  if(dot(realNormal, enable) \x3e 0.0) {\n    vec3 minRange \x3d min(bounds[0], bounds[1]);\n    vec3 maxRange \x3d max(bounds[0], bounds[1]);\n    vec3 nPosition \x3d mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position \x3d projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position \x3d vec4(0,0,0,0);\n  }\n\n  colorChannel \x3d abs(realNormal);\n}"]),
e=q(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor \x3d colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);p.bg=function(b){return n(b,g,e,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":304,glslify:410}],241:[function(a,q,p){(function(n){function k(b,a,d,c){this.gl=b;this.shader=a;this.buffer=d;this.vao=
c;this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}q.exports=function(b,a,d,c,e,t){var f=m(b),r=h(b,[{buffer:f,size:3}]),l=g(b);l.attributes.position.location=0;b=new k(b,l,f,r);b.update(a,d,c,e,t);return b};var m=a("gl-buffer"),h=a("gl-vao"),b=a("vectorize-text"),g=a("./shaders").text;n=window||n.global||{};var e=n.__TEXT_CACHE||{};n.__TEXT_CACHE={};n=k.prototype;var t=[0,0];n.bind=function(b,a,d,c){this.vao.bind();this.shader.bind();var e=this.shader.uniforms;e.model=b;e.view=
a;e.projection=d;e.pixelScale=c;t[0]=this.gl.drawingBufferWidth;t[1]=this.gl.drawingBufferHeight;this.shader.uniforms.resolution=t};n.unbind=function(){this.vao.unbind()};n.update=function(a,f,d,c,g){function h(a,c,d,f,g,h){var l=e[d];l||(l=e[d]={});var k=l[c];if(!k){k=l;d={triangles:!0,font:d,textAlign:"center",textBaseline:"middle",lineSpacing:g,styletags:h};try{var t=b(c,d)}catch(I){console.warn('error vectorizing text:"'+c+'" error:',I),t={cells:[],positions:[]}}k=k[c]=t}c=(f||12)/12;f=k.positions;
k=k.cells;t=0;for(d=k.length;t<d;++t)for(g=k[t],h=2;0<=h;--h)l=f[g[h]],r.push(c*l[0],-c*l[1],a)}for(var r=[],l=[0,0,0],k=[0,0,0],t=[0,0,0],m=[0,0,0],n={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},C=0;3>C;++C){t[C]=r.length/3|0;h(.5*(a[0][C]+a[1][C]),f[C],d[C],12,1.25,n);m[C]=(r.length/3|0)-t[C];l[C]=r.length/3|0;for(var B=0;B<c[C].length;++B)c[C][B].text&&h(c[C][B].x,c[C][B].text,c[C][B].font||g,c[C][B].fontSize||12,1.25,n);k[C]=(r.length/3|0)-l[C]}this.buffer.update(r);this.tickOffset=
l;this.tickCount=k;this.labelOffset=t;this.labelCount=m};n.drawTicks=function(b,a,d,c,e,g,h,k){this.tickCount[b]&&(this.shader.uniforms.axis=g,this.shader.uniforms.color=e,this.shader.uniforms.angle=d,this.shader.uniforms.scale=a,this.shader.uniforms.offset=c,this.shader.uniforms.alignDir=h,this.shader.uniforms.alignOpt=k,this.vao.draw(this.gl.TRIANGLES,this.tickCount[b],this.tickOffset[b]))};n.drawLabel=function(b,a,d,c,e,g,h,k){this.labelCount[b]&&(this.shader.uniforms.axis=g,this.shader.uniforms.color=
e,this.shader.uniforms.angle=d,this.shader.uniforms.scale=a,this.shader.uniforms.offset=c,this.shader.uniforms.alignDir=h,this.shader.uniforms.alignOpt=k,this.vao.draw(this.gl.TRIANGLES,this.labelCount[b],this.labelOffset[b]))};n.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()}}).call(this,a("_process"))},{"./shaders":240,_process:483,"gl-buffer":244,"gl-vao":329,"vectorize-text":548}],242:[function(a,q,p){function n(a,m){var h=a+"",b=h.indexOf("."),g=0;0<=b&&(g=
h.length-b-1);h=Math.pow(10,g);a=Math.round(a*m*h);m=a+"";if(0<=m.indexOf("e"))return m;m=a/h;h=a%h;0>a?(m=-Math.ceil(m)|0,h=-h|0):(m=Math.floor(m)|0,h|=0);m=""+m;0>a&&(m="-"+m);if(g){for(h=""+h;h.length<g;)h="0"+h;return m+"."+h}return m}p.create=function(a,m){for(var h=[],b=0;3>b;++b){for(var g=[],e=0;e*m[b]<=a[1][b];++e)g.push({x:e*m[b],text:n(m[b],e)});for(e=-1;e*m[b]>=a[0][b];--e)g.push({x:e*m[b],text:n(m[b],e)});h.push(g)}return h};p.equal=function(a,m){for(var h=0;3>h;++h){if(a[h].length!==
m[h].length)return!1;for(var b=0;b<a[h].length;++b){var g=a[h][b],e=m[h][b];if(g.x!==e.x||g.text!==e.text||g.font!==e.font||g.fontColor!==e.fontColor||g.fontSize!==e.fontSize||g.dx!==e.dx||g.dy!==e.dy)return!1}}return!0}},{}],243:[function(a,q,p){function n(b,a,c){this.lo=b;this.hi=a;this.pixelsPerDataUnit=c}q.exports=function(a,n,w,y,A){var u=n.model||t,v=n.view||t,C=n.projection||t;n=n._ortho||!1;a=a.bounds;A=A||h(u,v,C,a,n);A=A.axis;b(l,v,u);b(l,C,l);u=c;for(v=0;3>v;++v)u[v].lo=Infinity,u[v].hi=
-Infinity,u[v].pixelsPerDataUnit=Infinity;C=k(g(l,l));g(l,l);for(var B=0;3>B;++B){var D=(B+1)%3,p=(B+2)%3,q=r;v=0;a:for(;2>v;++v){var F=[];if(0>A[B]!==!!v){q[B]=a[v][B];for(var L=0;2>L;++L){q[D]=a[L^v][D];for(var J=0;2>J;++J)q[p]=a[J^L^v][p],F.push(q.slice())}for(L=J=n?5:4;L===J;++L){if(0===F.length)continue a;F=m.positive(F,C[L])}for(L=0;L<F.length;++L){p=F[L];J=r;var H=l;for(var K=p,M=w,I=y,N=0;3>N;++N){for(var O=f,P=d,Q=0;3>Q;++Q)P[Q]=O[Q]=K[Q];P[3]=O[3]=1;P[N]+=1;e(P,P,H);0>P[3]&&(J[N]=Infinity);
--O[N];e(O,O,H);0>O[3]&&(J[N]=Infinity);Q=(O[0]/O[3]-P[0]/P[3])*M;O=(O[1]/O[3]-P[1]/P[3])*I;J[N]=.25*Math.sqrt(Q*Q+O*O)}H=J;for(J=0;3>J;++J)u[J].lo=Math.min(u[J].lo,p[J]),u[J].hi=Math.max(u[J].hi,p[J]),J!==B&&(u[J].pixelsPerDataUnit=Math.min(u[J].pixelsPerDataUnit,Math.abs(H[J])))}}}}return u};var k=a("extract-frustum-planes"),m=a("split-polygon"),h=a("./lib/cube.js"),b=a("gl-mat4/multiply"),g=a("gl-mat4/transpose"),e=a("gl-vec4/transformMat4"),t=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),
l=new Float32Array(16),f=[0,0,0,1],d=[0,0,0,1],c=[new n(Infinity,-Infinity,Infinity),new n(Infinity,-Infinity,Infinity),new n(Infinity,-Infinity,Infinity)],r=[0,0,0]},{"./lib/cube.js":238,"extract-frustum-planes":227,"gl-mat4/multiply":270,"gl-mat4/transpose":279,"gl-vec4/transformMat4":400,"split-polygon":525}],244:[function(a,q,p){function n(b,a,e,d,c){this.gl=b;this.type=a;this.handle=e;this.length=d;this.usage=c}function k(b,a,e,d,c,g){var f=c.length*c.BYTES_PER_ELEMENT;if(0>g)return b.bufferData(a,
c,d),f;if(f+g>e)throw Error("gl-buffer: If resizing buffer, must not specify offset");b.bufferSubData(a,g,c);return e}function m(b,a){a=h.malloc(b.length,a);for(var e=b.length,d=0;d<e;++d)a[d]=b[d];return a}var h=a("typedarray-pool"),b=a("ndarray-ops"),g=a("ndarray"),e="uint8 uint8_clamped uint16 uint32 int8 int16 int32 float32".split(" ");a=n.prototype;a.bind=function(){this.gl.bindBuffer(this.type,this.handle)};a.unbind=function(){this.gl.bindBuffer(this.type,null)};a.dispose=function(){this.gl.deleteBuffer(this.handle)};
a.update=function(a,l){"number"!==typeof l&&(l=-1);this.bind();if("object"===typeof a&&"undefined"!==typeof a.shape){var f=a.dtype;0>e.indexOf(f)&&(f="float32");this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(f=gl.getExtension("OES_element_index_uint")&&"uint16"!==f?"uint32":"uint16");var d;if(d=f===a.dtype)a:{d=a.stride;for(var c=1,r=d.length-1;0<=r;--r){if(d[r]!==c){d=!1;break a}c*=a.shape[r]}d=!0}d?this.length=0===a.offset&&a.data.length===a.shape[0]?k(this.gl,this.type,this.length,this.usage,a.data,
l):k(this.gl,this.type,this.length,this.usage,a.data.subarray(a.offset,a.shape[0]),l):(f=h.malloc(a.size,f),d=g(f,a.shape),b.assign(d,a),this.length=0>l?k(this.gl,this.type,this.length,this.usage,f,l):k(this.gl,this.type,this.length,this.usage,f.subarray(0,a.size),l),h.free(f))}else if(Array.isArray(a))f=this.type===this.gl.ELEMENT_ARRAY_BUFFER?m(a,"uint16"):m(a,"float32"),this.length=0>l?k(this.gl,this.type,this.length,this.usage,f,l):k(this.gl,this.type,this.length,this.usage,f.subarray(0,a.length),
l),h.free(f);else if("object"===typeof a&&"number"===typeof a.length)this.length=k(this.gl,this.type,this.length,this.usage,a,l);else if("number"===typeof a||void 0===a){if(0<=l)throw Error("gl-buffer: Cannot specify offset when resizing buffer");a|=0;0>=a&&(a=1);this.gl.bufferData(this.type,a|0,this.usage);this.length=a}else throw Error("gl-buffer: Invalid data type");};q.exports=function(b,a,e,d){e=e||b.ARRAY_BUFFER;d=d||b.DYNAMIC_DRAW;if(e!==b.ARRAY_BUFFER&&e!==b.ELEMENT_ARRAY_BUFFER)throw Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");
if(d!==b.DYNAMIC_DRAW&&d!==b.STATIC_DRAW&&d!==b.STREAM_DRAW)throw Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var c=b.createBuffer();b=new n(b,e,c,0,d);b.update(a);return b}},{ndarray:451,"ndarray-ops":445,"typedarray-pool":543}],245:[function(a,q,p){var n=a("gl-vec3");q.exports=function(a,h){var b=a.positions,g=a.vectors,e={positions:[],vertexIntensity:[],vertexIntensityBounds:a.vertexIntensityBounds,vectors:[],cells:[],coneOffset:a.coneOffset,
colormap:a.colormap};if(0===a.positions.length)return h&&(h[0]=[0,0,0],h[1]=[0,0,0]),e;for(var k=0,l=Infinity,f=-Infinity,d=Infinity,c=-Infinity,r=Infinity,u=-Infinity,m=null,w=null,y=[],A=Infinity,z=!1,x=0;x<b.length;x++){var C=b[x];l=Math.min(C[0],l);f=Math.max(C[0],f);d=Math.min(C[1],d);c=Math.max(C[1],c);r=Math.min(C[2],r);u=Math.max(C[2],u);var B=g[x];n.length(B)>k&&(k=n.length(B));x&&((z=2*n.distance(m,C)/(n.length(w)+n.length(B)))?(A=Math.min(A,z),z=!1):z=!0);z||(m=C,w=B);y.push(B)}x=[l,d,
r];C=[f,c,u];h&&(h[0]=x,h[1]=C);0===k&&(k=1);h=1/k;isFinite(A)||(A=1);e.vectorScale=A;x=a.coneSize||.5;a.absoluteConeSize&&(x=a.absoluteConeSize*h);e.coneScale=x;for(a=x=0;x<b.length;x++)for(C=b[x],A=C[0],k=C[1],C=C[2],f=y[x],c=n.length(f)*h,u=0;8>u;u++)e.positions.push([A,k,C,a++]),e.positions.push([A,k,C,a++]),e.positions.push([A,k,C,a++]),e.positions.push([A,k,C,a++]),e.positions.push([A,k,C,a++]),e.positions.push([A,k,C,a++]),e.vectors.push(f),e.vectors.push(f),e.vectors.push(f),e.vectors.push(f),
e.vectors.push(f),e.vectors.push(f),e.vertexIntensity.push(c,c,c),e.vertexIntensity.push(c,c,c),g=e.positions.length,e.cells.push([g-6,g-5,g-4],[g-3,g-2,g-1]);return e};var k=a("./lib/shaders");q.exports.createMesh=a("./create_mesh");q.exports.createConeMesh=function(a,h){return q.exports.createMesh(a,h,{shaders:k,traceType:"cone"})}},{"./create_mesh":246,"./lib/shaders":247,"gl-vec3":348}],246:[function(a,q,p){function n(b,a,e,f,g,h,l,k,t,m,n){this.gl=b;this.pixelRatio=1;this.cells=[];this.positions=
[];this.intensity=[];this.texture=a;this.dirty=!0;this.triShader=e;this.pickShader=f;this.trianglePositions=g;this.triangleVectors=h;this.triangleColors=k;this.triangleUVs=t;this.triangleIds=l;this.triangleVAO=m;this.triangleCount=0;this.pickId=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=
.5;this.fresnel=1.5;this.opacity=1;this.traceType=n;this.tubeScale=1;this.coneScale=2;this.vectorScale=1;this.coneOffset=.25;this._projection=this._view=this._model=d;this._resolution=[1,1]}function k(b){b=f({colormap:b,nshades:256,format:"rgba"});for(var a=new Uint8Array(1024),c=0;256>c;++c){for(var d=b[c],e=0;3>e;++e)a[4*c+e]=d[e];a[4*c+3]=255*d[3]}return l(a,[256,256,4],[4,0,1])}var m=a("gl-shader"),h=a("gl-buffer"),b=a("gl-vao"),g=a("gl-texture2d"),e=a("gl-mat4/multiply"),t=a("gl-mat4/invert"),
l=a("ndarray"),f=a("colormap"),d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a=n.prototype;a.isOpaque=function(){return 1<=this.opacity};a.isTransparent=function(){return 1>this.opacity};a.pickSlots=1;a.setPickBase=function(b){this.pickId=b};a.update=function(b){b=b||{};var a=this.gl;this.dirty=!0;"lightPosition"in b&&(this.lightPosition=b.lightPosition);"opacity"in b&&(this.opacity=b.opacity);"ambient"in b&&(this.ambientLight=b.ambient);"diffuse"in b&&(this.diffuseLight=b.diffuse);"specular"in b&&(this.specularLight=
b.specular);"roughness"in b&&(this.roughness=b.roughness);"fresnel"in b&&(this.fresnel=b.fresnel);void 0!==b.tubeScale&&(this.tubeScale=b.tubeScale);void 0!==b.vectorScale&&(this.vectorScale=b.vectorScale);void 0!==b.coneScale&&(this.coneScale=b.coneScale);void 0!==b.coneOffset&&(this.coneOffset=b.coneOffset);b.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=a.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=a.LINEAR,this.texture.setPixels(k(b.colormap)),this.texture.generateMipmap());a=
b.cells;var c=b.positions,d=b.vectors;if(c&&a&&d){var e=[],f=[],g=[],h=[],l=[];this.cells=a;this.positions=c;this.vectors=d;var t=b.meshColor||[1,1,1,1],m=b.vertexIntensity,n=Infinity,p=-Infinity;if(m)if(b.vertexIntensityBounds)n=+b.vertexIntensityBounds[0],p=+b.vertexIntensityBounds[1];else for(b=0;b<m.length;++b){var q=m[b];n=Math.min(n,q);p=Math.max(p,q)}else for(b=0;b<c.length;++b)q=c[b][2],n=Math.min(n,q),p=Math.max(p,q);if(m)this.intensity=m;else{b=c.length;q=Array(b);for(var F=0;F<b;++F)q[F]=
c[F][2];this.intensity=q}this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(b=0;b<c.length;++b){var L=c[b];for(q=0;3>q;++q)!isNaN(L[q])&&isFinite(L[q])&&(this.bounds[0][q]=Math.min(this.bounds[0][q],L[q]),this.bounds[1][q]=Math.max(this.bounds[1][q],L[q]))}b=F=0;a:for(;b<a.length;++b){var J=a[b];switch(J.length){case 3:for(q=0;3>q;++q){var H=J[q];L=c[H];for(H=0;3>H;++H)if(isNaN(L[H])||!isFinite(L[H]))continue a}for(q=0;3>q;++q){H=J[2-q];L=c[H];e.push(L[0],L[1],L[2],L[3]);
var K=d[H];f.push(K[0],K[1],K[2],K[3]||0);K=t;3===K.length?g.push(K[0],K[1],K[2],1):g.push(K[0],K[1],K[2],K[3]);L=m?[(m[H]-n)/(p-n),0]:[(L[2]-n)/(p-n),0];h.push(L[0],L[1]);l.push(b)}F+=1}}this.triangleCount=F;this.trianglePositions.update(e);this.triangleVectors.update(f);this.triangleColors.update(g);this.triangleUVs.update(h);this.triangleIds.update(new Uint32Array(l))}};a.drawTransparent=a.draw=function(b){b=b||{};var a=this.gl,c=b.model||d,f=b.view||d,g=b.projection||d,h=[[-1E6,-1E6,-1E6],[1E6,
1E6,1E6]];for(b=0;3>b;++b)h[0][b]=Math.max(h[0][b],this.clipBounds[0][b]),h[1][b]=Math.min(h[1][b],this.clipBounds[1][b]);c={model:c,view:f,projection:g,inverseModel:d.slice(),clipBounds:h,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};c.inverseModel=
t(c.inverseModel,c.model);a.disable(a.CULL_FACE);this.texture.bind(0);f=Array(16);e(f,c.view,c.model);e(f,c.projection,f);t(f,f);for(b=0;3>b;++b)c.eyePosition[b]=f[12+b]/f[15];g=f[15];for(b=0;3>b;++b)g+=this.lightPosition[b]*f[4*b+3];for(b=0;3>b;++b){h=f[12+b];for(var l=0;3>l;++l)h+=f[4*l+b]*this.lightPosition[l];c.lightPosition[b]=h/g}0<this.triangleCount&&(b=this.triShader,b.bind(),b.uniforms=c,this.triangleVAO.bind(),a.drawArrays(a.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())};
a.drawPick=function(b){b=b||{};var a=this.gl,c=b.model||d,e=b.view||d;b=b.projection||d;for(var f=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],g=0;3>g;++g)f[0][g]=Math.max(f[0][g],this.clipBounds[0][g]),f[1][g]=Math.min(f[1][g],this.clipBounds[1][g]);this._model=[].slice.call(c);this._view=[].slice.call(e);this._projection=[].slice.call(b);this._resolution=[a.drawingBufferWidth,a.drawingBufferHeight];c={model:c,view:e,projection:b,clipBounds:f,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,
coneOffset:this.coneOffset,pickId:this.pickId/255};e=this.pickShader;e.bind();e.uniforms=c;0<this.triangleCount&&(this.triangleVAO.bind(),a.drawArrays(a.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())};a.pick=function(b){if(!b||b.id!==this.pickId)return null;b=b.value[0]+256*b.value[1]+65536*b.value[2];var a=this.cells[b],c=this.positions[a[1]].slice(0,3);c={position:c,dataCoordinate:c,index:Math.floor(a[1]/48)};"cone"===this.traceType?c.index=Math.floor(a[1]/48):"streamtube"===this.traceType&&
(c.intensity=this.intensity[a[1]],c.velocity=this.vectors[a[1]].slice(0,3),c.divergence=this.vectors[a[1]][3],c.index=b);return c};a.dispose=function(){this.texture.dispose();this.triShader.dispose();this.pickShader.dispose();this.triangleVAO.dispose();this.trianglePositions.dispose();this.triangleVectors.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();this.triangleIds.dispose()};q.exports=function(a,d,e){var c=e.shaders;1===arguments.length&&(d=a,a=d.gl);var f=m(a,c.meshShader.vertex,
c.meshShader.fragment,null,c.meshShader.attributes);f.attributes.position.location=0;f.attributes.color.location=2;f.attributes.uv.location=3;f.attributes.vector.location=4;c=m(a,c.pickShader.vertex,c.pickShader.fragment,null,c.pickShader.attributes);c.attributes.position.location=0;c.attributes.id.location=1;c.attributes.vector.location=4;var r=g(a,l(new Uint8Array([255,255,255,255]),[1,1,4]));r.generateMipmap();r.minFilter=a.LINEAR_MIPMAP_LINEAR;r.magFilter=a.LINEAR;var k=h(a),t=h(a),u=h(a),C=h(a),
B=h(a),D=b(a,[{buffer:k,type:a.FLOAT,size:4},{buffer:B,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:u,type:a.FLOAT,size:4},{buffer:C,type:a.FLOAT,size:2},{buffer:t,type:a.FLOAT,size:4}]);f=new n(a,r,f,c,k,t,B,u,C,D,e.traceType||"cone");f.update(d);return f}},{colormap:128,"gl-buffer":244,"gl-mat4/invert":268,"gl-mat4/multiply":270,"gl-shader":304,"gl-texture2d":324,"gl-vao":329,ndarray:451}],247:[function(a,q,p){var n=a("glslify");a=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount \x3d 8.0;\n\n  float index \x3d rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment \x3d floor(0.001 + index/6.0);\n  float segmentIndex \x3d index - (segment*6.0);\n\n  normal \x3d -normalize(d);\n\n  if (segmentIndex \x3e 2.99 \x26\x26 segmentIndex \x3c 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle \x3d (\n    (segmentIndex \x3e 0.99 \x26\x26  segmentIndex \x3c 1.01) ||\n    (segmentIndex \x3e 4.99 \x26\x26  segmentIndex \x3c 5.01)\n  ) ? 1.0 : 0.0;\n  float angle \x3d 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 \x3d mix(d, vec3(0.0), coneOffset);\n  vec3 v2 \x3d v1 - d;\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d)*0.25;\n  vec3 y \x3d v * sin(angle) * length(d)*0.25;\n  vec3 v3 \x3d v2 + x + y;\n  if (segmentIndex \x3c 3.0) {\n    vec3 tx \x3d u * sin(angle);\n    vec3 ty \x3d v * -cos(angle);\n    vec3 tangent \x3d tx + ty;\n    normal \x3d normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex \x3d\x3d 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model \x26 view changes.\n  vec3 normal;\n  vec3 XYZ \x3d getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * conePosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  \x3d model * vec4(conePosition, 1.0);\n  vec4 t_position  \x3d view * conePosition;\n  gl_Position      \x3d projection * t_position;\n\n  f_color          \x3d color;\n  f_data           \x3d conePosition.xyz;\n  f_position       \x3d position.xyz;\n  f_uv             \x3d uv;\n}\n"]);
q=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d f_color * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * opacity;\n}\n"]);
var k=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount \x3d 8.0;\n\n  float index \x3d rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment \x3d floor(0.001 + index/6.0);\n  float segmentIndex \x3d index - (segment*6.0);\n\n  normal \x3d -normalize(d);\n\n  if (segmentIndex \x3e 2.99 \x26\x26 segmentIndex \x3c 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle \x3d (\n    (segmentIndex \x3e 0.99 \x26\x26  segmentIndex \x3c 1.01) ||\n    (segmentIndex \x3e 4.99 \x26\x26  segmentIndex \x3c 5.01)\n  ) ? 1.0 : 0.0;\n  float angle \x3d 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 \x3d mix(d, vec3(0.0), coneOffset);\n  vec3 v2 \x3d v1 - d;\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d)*0.25;\n  vec3 y \x3d v * sin(angle) * length(d)*0.25;\n  vec3 v3 \x3d v2 + x + y;\n  if (segmentIndex \x3c 3.0) {\n    vec3 tx \x3d u * sin(angle);\n    vec3 ty \x3d v * -cos(angle);\n    vec3 tangent \x3d tx + ty;\n    normal \x3d normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex \x3d\x3d 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ \x3d getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position \x3d projection * view * conePosition;\n  f_id        \x3d id;\n  f_position  \x3d position.xyz;\n}\n"]);
n=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]);
p.meshShader={vertex:a,fragment:q,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]};p.pickShader={vertex:k,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:410}],248:[function(a,q,p){q.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",
516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",
2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",
3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",
6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",
32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",
32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",
33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34E3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",
34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",
34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",
35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",
35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",
36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",
36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",
37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],249:[function(a,q,p){var n=a("./1.0/numbers");q.exports=function(a){return n[a]}},{"./1.0/numbers":248}],250:[function(a,q,p){function n(b,a,d,c){this.gl=b;this.shader=c;this.buffer=a;this.vao=d;this.pixelRatio=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lineWidth=[1,1,1];this.capSize=[10,10,10];this.lineCount=
[0,0,0];this.lineOffset=[0,0,0];this.opacity=1;this.hasAlpha=!1}function k(b,a){for(var d=0;3>d;++d)b[0][d]=Math.min(b[0][d],a[d]),b[1][d]=Math.max(b[1][d],a[d])}function m(b,a,d,c){c=t[c];for(var e=0;e<c.length;++e){var f=c[e];b.push(a[0],a[1],a[2],d[0],d[1],d[2],d[3],f[0],f[1],f[2])}return c.length}q.exports=function(a){var e=a.gl,d=h(e),c=b(e,[{buffer:d,type:e.FLOAT,size:3,offset:0,stride:40},{buffer:d,type:e.FLOAT,size:4,offset:12,stride:40},{buffer:d,type:e.FLOAT,size:3,offset:28,stride:40}]),
r=g(e);r.attributes.position.location=0;r.attributes.color.location=1;r.attributes.offset.location=2;e=new n(e,d,c,r);e.update(a);return e};var h=a("gl-buffer"),b=a("gl-vao"),g=a("./shaders/index"),e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a=n.prototype;a.isOpaque=function(){return!this.hasAlpha};a.isTransparent=function(){return this.hasAlpha};a.drawTransparent=a.draw=function(b){var a=this.gl,d=this.shader.uniforms;this.shader.bind();var c=d.view=b.view||e,g=d.projection=b.projection||e;d.model=b.model||
e;d.clipBounds=this.clipBounds;d.opacity=this.opacity;b=(b._ortho?2:1)*this.pixelRatio*(g[3]*c[12]+g[7]*c[13]+g[11]*c[14]+g[15]*c[15])/a.drawingBufferHeight;this.vao.bind();for(c=0;3>c;++c)a.lineWidth(this.lineWidth[c]*this.pixelRatio),d.capSize=this.capSize[c]*b,this.lineCount[c]&&a.drawArrays(a.LINES,this.lineOffset[c],this.lineCount[c]);this.vao.unbind()};var t=function(){for(var b=Array(3),a=0;3>a;++a){for(var d=[],c=1;2>=c;++c)for(var e=-1;1>=e;e+=2){var g=[0,0,0];g[(c+a)%3]=e;d.push(g)}b[a]=
d}return b}();a.update=function(b){b=b||{};"lineWidth"in b&&(this.lineWidth=b.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth]));"capSize"in b&&(this.capSize=b.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize]));this.hasAlpha=!1;"opacity"in b&&(this.opacity=+b.opacity,1>this.opacity&&(this.hasAlpha=!0));var a=b.color||[[0,0,0],[0,0,0],[0,0,0]],d=b.position;b=b.error;Array.isArray(a[0])||(a=[a,a,a]);if(d&&
b){var c=[],e=d.length,g=0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.lineCount=[0,0,0];for(var h=0;3>h;++h){this.lineOffset[h]=g;var l=0;a:for(;l<e;++l){for(var t=d[l],n=0;3>n;++n)if(isNaN(t[n])||!isFinite(t[n]))continue a;n=b[l];var z=a[h];Array.isArray(z[0])&&(z=a[l]);3===z.length?z=[z[0],z[1],z[2],1]:4===z.length&&(z=[z[0],z[1],z[2],z[3]],!this.hasAlpha&&1>z[3]&&(this.hasAlpha=!0));if(!isNaN(n[0][h])&&!isNaN(n[1][h])){if(0>n[0][h]){var x=t.slice();x[h]+=n[0][h];
c.push(t[0],t[1],t[2],z[0],z[1],z[2],z[3],0,0,0,x[0],x[1],x[2],z[0],z[1],z[2],z[3],0,0,0);k(this.bounds,x);g+=2+m(c,x,z,h)}0<n[1][h]&&(x=t.slice(),x[h]+=n[1][h],c.push(t[0],t[1],t[2],z[0],z[1],z[2],z[3],0,0,0,x[0],x[1],x[2],z[0],z[1],z[2],z[3],0,0,0),k(this.bounds,x),g+=2+m(c,x,z,h))}}this.lineCount[h]=g-this.lineOffset[h]}this.buffer.update(c)}};a.dispose=function(){this.shader.dispose();this.buffer.dispose();this.vao.dispose()}},{"./shaders/index":251,"gl-buffer":244,"gl-vao":329}],251:[function(a,
q,p){p=a("glslify");var n=a("gl-shader"),k=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  \x3d model * vec4(position, 1.0);\n  worldPosition       \x3d (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         \x3d projection * view * worldPosition;\n  fragColor           \x3d color;\n  fragPosition        \x3d position;\n}"]),
m=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity \x3d\x3d 0.\n  ) discard;\n\n  gl_FragColor \x3d opacity * fragColor;\n}"]);
q.exports=function(a){return n(a,k,m,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":304,glslify:410}],252:[function(a,q,p){function n(b){var a=b.getParameter(b.FRAMEBUFFER_BINDING),c=b.getParameter(b.RENDERBUFFER_BINDING);b=b.getParameter(b.TEXTURE_BINDING_2D);return[a,c,b]}function k(b,a){b.bindFramebuffer(b.FRAMEBUFFER,a[0]);b.bindRenderbuffer(b.RENDERBUFFER,a[1]);b.bindTexture(b.TEXTURE_2D,a[2])}function m(b){switch(b){case d:throw Error("gl-fbo: Framebuffer unsupported");
case c:throw Error("gl-fbo: Framebuffer incomplete attachment");case r:throw Error("gl-fbo: Framebuffer incomplete dimensions");case u:throw Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw Error("gl-fbo: Framebuffer failed for unspecified reason");}}function h(b,a,c,d,e,f){if(!d)return null;a=l(b,a,c,e,d);a.magFilter=b.NEAREST;a.minFilter=b.NEAREST;a.mipSamples=1;a.bind();b.framebufferTexture2D(b.FRAMEBUFFER,f,b.TEXTURE_2D,a.handle,0);return a}function b(b,a,c,d,e){var f=
b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,f);b.renderbufferStorage(b.RENDERBUFFER,d,a,c);b.framebufferRenderbuffer(b.FRAMEBUFFER,e,b.RENDERBUFFER,f);return f}function g(a){var c=n(a.gl),d=a.gl,e=a.handle=d.createFramebuffer(),g=a._shape[0],r=a._shape[1],l=a.color.length,t=a._ext,u=a._useStencil,v=a._useDepth,q=a._colorType;d.bindFramebuffer(d.FRAMEBUFFER,e);for(e=0;e<l;++e)a.color[e]=h(d,g,r,q,d.RGBA,d.COLOR_ATTACHMENT0+e);0===l?(a._color_rb=b(d,g,r,d.RGBA4,d.COLOR_ATTACHMENT0),t&&
t.drawBuffersWEBGL(f[0])):1<l&&t.drawBuffersWEBGL(f[l]);(l=d.getExtension("WEBGL_depth_texture"))?u?a.depth=h(d,g,r,l.UNSIGNED_INT_24_8_WEBGL,d.DEPTH_STENCIL,d.DEPTH_STENCIL_ATTACHMENT):v&&(a.depth=h(d,g,r,d.UNSIGNED_SHORT,d.DEPTH_COMPONENT,d.DEPTH_ATTACHMENT)):v&&u?a._depth_rb=b(d,g,r,d.DEPTH_STENCIL,d.DEPTH_STENCIL_ATTACHMENT):v?a._depth_rb=b(d,g,r,d.DEPTH_COMPONENT16,d.DEPTH_ATTACHMENT):u&&(a._depth_rb=b(d,g,r,d.STENCIL_INDEX,d.STENCIL_ATTACHMENT));g=d.checkFramebufferStatus(d.FRAMEBUFFER);if(g!==
d.FRAMEBUFFER_COMPLETE){a._destroyed=!0;d.bindFramebuffer(d.FRAMEBUFFER,null);d.deleteFramebuffer(a.handle);a.handle=null;a.depth&&(a.depth.dispose(),a.depth=null);a._depth_rb&&(d.deleteRenderbuffer(a._depth_rb),a._depth_rb=null);for(e=0;e<a.color.length;++e)a.color[e].dispose(),a.color[e]=null;a._color_rb&&(d.deleteRenderbuffer(a._color_rb),a._color_rb=null);k(d,c);m(g)}k(d,c)}function e(b,a,c,d,e,f,h,r){this.gl=b;this._shape=[a|0,c|0];this._destroyed=!1;this._ext=r;this.color=Array(e);for(b=0;b<
e;++b)this.color[b]=null;this._depth_rb=this.depth=this._color_rb=null;this._colorType=d;this._useDepth=f;this._useStencil=h;var l=this;a=[a|0,c|0];Object.defineProperties(a,{0:{get:function(){return l._shape[0]},set:function(b){return l.width=b}},1:{get:function(){return l._shape[1]},set:function(b){return l.height=b}}});this._shapeVector=a;g(this)}function t(b,a,c){if(b._destroyed)throw Error("gl-fbo: Can't resize destroyed FBO");if(b._shape[0]!==a||b._shape[1]!==c){var d=b.gl,e=d.getParameter(d.MAX_RENDERBUFFER_SIZE);
if(0>a||a>e||0>c||c>e)throw Error("gl-fbo: Can't resize FBO, invalid dimensions");b._shape[0]=a;b._shape[1]=c;a=n(d);for(c=0;c<b.color.length;++c)b.color[c].shape=b._shape;b._color_rb&&(d.bindRenderbuffer(d.RENDERBUFFER,b._color_rb),d.renderbufferStorage(d.RENDERBUFFER,d.RGBA4,b._shape[0],b._shape[1]));b.depth&&(b.depth.shape=b._shape);b._depth_rb&&(d.bindRenderbuffer(d.RENDERBUFFER,b._depth_rb),b._useDepth&&b._useStencil?d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_STENCIL,b._shape[0],b._shape[1]):
b._useDepth?d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_COMPONENT16,b._shape[0],b._shape[1]):b._useStencil&&d.renderbufferStorage(d.RENDERBUFFER,d.STENCIL_INDEX,b._shape[0],b._shape[1]));d.bindFramebuffer(d.FRAMEBUFFER,b.handle);c=d.checkFramebufferStatus(d.FRAMEBUFFER);c!==d.FRAMEBUFFER_COMPLETE&&(b.dispose(),k(d,a),m(c));k(d,a)}}var l=a("gl-texture2d");q.exports=function(b,a,g,h){d||(d=b.FRAMEBUFFER_UNSUPPORTED,c=b.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,r=b.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,u=b.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);
var l=b.getExtension("WEBGL_draw_buffers");if(!f&&l){var k=b.getParameter(l.MAX_COLOR_ATTACHMENTS_WEBGL);f=Array(k+1);for(var t=0;t<=k;++t){for(var m=Array(k),n=0;n<t;++n)m[n]=b.COLOR_ATTACHMENT0+n;for(n=t;n<k;++n)m[n]=b.NONE;f[t]=m}}Array.isArray(a)&&(h=g,g=a[1]|0,a=a[0]|0);if("number"!==typeof a)throw Error("gl-fbo: Missing shape parameter");k=b.getParameter(b.MAX_RENDERBUFFER_SIZE);if(0>a||a>k||0>g||g>k)throw Error("gl-fbo: Parameters are too large for FBO");h=h||{};k=1;if("color"in h){k=Math.max(h.color|
0,0);if(0>k)throw Error("gl-fbo: Must specify a nonnegative number of colors");if(1<k){if(!l)throw Error("gl-fbo: Multiple draw buffer extension not supported");if(k>b.getParameter(l.MAX_COLOR_ATTACHMENTS_WEBGL))throw Error("gl-fbo: Context does not support "+k+" draw buffers");}}t=b.UNSIGNED_BYTE;m=b.getExtension("OES_texture_float");if(h.float&&0<k){if(!m)throw Error("gl-fbo: Context does not support floating point textures");t=b.FLOAT}else h.preferFloat&&0<k&&m&&(t=b.FLOAT);m=!0;"depth"in h&&(m=
!!h.depth);n=!1;"stencil"in h&&(n=!!h.stencil);return new e(b,a,g,t,k,m,n,l)};var f=null,d,c,r,u;a=e.prototype;Object.defineProperties(a,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(b){Array.isArray(b)||(b=[b|0,b|0]);if(2!==b.length)throw Error("gl-fbo: Shape vector must be length 2");var a=b[0]|0;b=b[1]|0;t(this,a,b);return[a,b]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(b){b|=0;t(this,b,this._shape[1]);return b},
enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(b){b|=0;t(this,this._shape[0],b);return b},enumerable:!1}});a.bind=function(){if(!this._destroyed){var b=this.gl;b.bindFramebuffer(b.FRAMEBUFFER,this.handle);b.viewport(0,0,this._shape[0],this._shape[1])}};a.dispose=function(){if(!this._destroyed){this._destroyed=!0;var b=this.gl;b.deleteFramebuffer(this.handle);this.handle=null;this.depth&&(this.depth.dispose(),this.depth=null);this._depth_rb&&(b.deleteRenderbuffer(this._depth_rb),
this._depth_rb=null);for(var a=0;a<this.color.length;++a)this.color[a].dispose(),this.color[a]=null;this._color_rb&&(b.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":324}],253:[function(a,q,p){var n=a("sprintf-js").sprintf,k=a("gl-constants/lookup"),m=a("glsl-shader-name"),h=a("add-line-numbers");q.exports=function(b,a,e){var g=m(a)||"of unknown name (see npm glsl-shader-name)",l="unknown type";void 0!==e&&(l=e===k.FRAGMENT_SHADER?"fragment":"vertex");e=n("Error compiling %s shader %s:\n",
l,g);g=n("%s%s",e,b);var f=b.split("\n");b={};for(l=0;l<f.length;l++){var d=f[l];if(""!==d&&"\x00"!==d){var c=parseInt(d.split(":")[2]);if(isNaN(c))throw Error(n("Could not parse error: %s",d));b[c]=d}}a=h(a).split("\n");for(l=0;l<a.length;l++)if(b[l+3]||b[l+2]||b[l+1])e+=a[l]+"\n",b[l+1]&&(f=b[l+1],f=f.substr(f.split(":",3).join(":").length+1).trim(),e+=n("^^^ %s\n\n",f));return{long:e.trim(),short:g.trim()}}},{"add-line-numbers":64,"gl-constants/lookup":249,"glsl-shader-name":402,"sprintf-js":526}],
254:[function(a,q,p){function n(b,a,d,c,e,g,h){this.plot=b;this.shader=a;this.pickShader=d;this.positionBuffer=c;this.weightBuffer=e;this.colorBuffer=g;this.idBuffer=h;this.xData=[];this.yData=[];this.shape=[0,0];this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.pickOffset=0}q.exports=function(a,f){var d=a.gl,c=b(d,e.vertex,e.fragment),h=b(d,e.pickVertex,e.pickFragment),l=g(d),k=g(d),t=g(d);d=g(d);c=new n(a,c,h,l,k,t,d);c.update(f);a.addObject(c);return c};var k=a("binary-search-bounds"),m=
a("iota-array"),h=a("typedarray-pool"),b=a("gl-shader"),g=a("gl-buffer"),e=a("./lib/shaders");a=n.prototype;var t=[0,0,1,0,0,1,1,0,1,1,0,1];a.draw=function(){var b=[1,0,0,0,1,0,0,0,1];return function(){var a=this.plot,d=this.shader,c=this.bounds,e=this.numVertices;if(!(0>=e)){var g=a.gl;a=a.dataBox;var h=c[3]-c[1],l=a[2]-a[0],k=a[3]-a[1];b[0]=2*(c[2]-c[0])/l;b[4]=2*h/k;b[6]=2*(c[0]-a[0])/l-1;b[7]=2*(c[1]-a[1])/k-1;d.bind();c=d.uniforms;c.viewTransform=b;c.shape=this.shape;d=d.attributes;this.positionBuffer.bind();
d.position.pointer();this.weightBuffer.bind();d.weight.pointer(g.UNSIGNED_BYTE,!1);this.colorBuffer.bind();d.color.pointer(g.UNSIGNED_BYTE,!0);g.drawArrays(g.TRIANGLES,0,e)}}}();a.drawPick=function(){var b=[1,0,0,0,1,0,0,0,1],a=[0,0,0,0];return function(d){var c=this.plot,e=this.pickShader,f=this.bounds,g=this.numVertices;if(!(0>=g)){var h=c.gl;c=c.dataBox;var l=f[3]-f[1],k=c[2]-c[0],t=c[3]-c[1];b[0]=2*(f[2]-f[0])/k;b[4]=2*l/t;b[6]=2*(f[0]-c[0])/k-1;b[7]=2*(f[1]-c[1])/t-1;for(f=0;4>f;++f)a[f]=d>>
8*f&255;this.pickOffset=d;e.bind();f=e.uniforms;f.viewTransform=b;f.pickOffset=a;f.shape=this.shape;e=e.attributes;this.positionBuffer.bind();e.position.pointer();this.weightBuffer.bind();e.weight.pointer(h.UNSIGNED_BYTE,!1);this.idBuffer.bind();e.pickId.pointer(h.UNSIGNED_BYTE,!1);h.drawArrays(h.TRIANGLES,0,g);return d+this.shape[0]*this.shape[1]}}}();a.pick=function(b,a,d){b=this.pickOffset;a=this.shape[0]*this.shape[1];if(d<b||d>=b+a)return null;d-=b;return{object:this,pointId:d,dataCoord:[this.xData[d%
this.shape[0]],this.yData[d/this.shape[0]|0]]}};a.update=function(b){b=b||{};var a=b.shape||[0,0],d=b.x||m(a[0]),c=b.y||m(a[1]),e=b.z||new Float32Array(a[0]*a[1]);this.xData=d;this.yData=c;var g=b.colorLevels||[0];b=b.colorValues||[0,0,0,1];var l=g.length,n=this.bounds,y=n[0]=d[0],A=n[1]=c[0],z=n[2]=d[d.length-1];n=n[3]=c[c.length-1];z=1/(z-y);n=1/(n-A);var x=a[0];a=a[1];this.shape=[x,a];var C=(x-1)*(a-1)*(t.length>>>1);this.numVertices=C;var B=h.mallocUint8(4*C),D=h.mallocFloat32(2*C),q=h.mallocUint8(2*
C);C=h.mallocUint32(C);for(var p=0,F=0;F<a-1;++F)for(var L=n*(c[F]-A),J=n*(c[F+1]-A),H=0;H<x-1;++H)for(var K=z*(d[H]-y),M=z*(d[H+1]-y),I=0;I<t.length;I+=2){var N=t[I],O=t[I+1],P=e[(F+O)*x+(H+N)],Q=k.le(g,P);if(0>Q){Q=b[0];P=b[1];var T=b[2];var V=b[3]}else if(Q===l-1)Q=b[4*l-4],P=b[4*l-3],T=b[4*l-2],V=b[4*l-1];else{V=(P-g[Q])/(g[Q+1]-g[Q]);var Y=1-V,ca=4*Q,Z=4*(Q+1);Q=Y*b[ca]+V*b[Z];P=Y*b[ca+1]+V*b[Z+1];T=Y*b[ca+2]+V*b[Z+2];V=Y*b[ca+3]+V*b[Z+3]}B[4*p]=255*Q;B[4*p+1]=255*P;B[4*p+2]=255*T;B[4*p+3]=255*
V;D[2*p]=.5*K+.5*M;D[2*p+1]=.5*L+.5*J;q[2*p]=N;q[2*p+1]=O;C[p]=F*x+H;p+=1}this.positionBuffer.update(D);this.weightBuffer.update(q);this.colorBuffer.update(B);this.idBuffer.update(C);h.free(D);h.free(B);h.free(q);h.free(C)};a.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.positionBuffer.dispose();this.weightBuffer.dispose();this.colorBuffer.dispose();this.idBuffer.dispose();this.plot.removeObject(this)}},{"./lib/shaders":255,"binary-search-bounds":256,"gl-buffer":244,"gl-shader":304,
"iota-array":417,"typedarray-pool":543}],255:[function(a,q,p){a=a("glslify");q.exports={fragment:a(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor \x3d vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition \x3d viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor \x3d color;\n  gl_Position \x3d vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),
pickFragment:a(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d \x3d step(.5, vWeight);\n  vec4 id \x3d fragId + pickOffset;\n  id.x +\x3d d.x + d.y*shape.x;\n\n  id.y +\x3d floor(id.x / 256.0);\n  id.x -\x3d floor(id.x / 256.0) * 256.0;\n\n  id.z +\x3d floor(id.y / 256.0);\n  id.y -\x3d floor(id.y / 256.0) * 256.0;\n\n  id.w +\x3d floor(id.z / 256.0);\n  id.z -\x3d floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor \x3d id/255.;\n}\n"]),
pickVertex:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight \x3d weight;\n\n  fragId \x3d pickId;\n\n  vec3 vPosition \x3d viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position \x3d vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:410}],256:[function(a,q,p){arguments[4][113][0].apply(p,
arguments)},{dup:113}],257:[function(a,q,p){q=a("glslify");var n=a("gl-shader"),k=q(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint \x3d project(position);\n  vec4 endPoint   \x3d project(nextPosition);\n\n  vec2 A \x3d startPoint.xy / startPoint.w;\n  vec2 B \x3d   endPoint.xy /   endPoint.w;\n\n  float clipAngle \x3d atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset \x3d 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position \x3d vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition \x3d position;\n  pixelArcLength \x3d arcLength;\n  fragColor \x3d color;\n}\n"]),
m=q(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity \x3d\x3d 0.\n  ) discard;\n\n  float dashWeight \x3d texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight \x3c 0.5) {\n    discard;\n  }\n  gl_FragColor \x3d fragColor * opacity;\n}\n"]),
h=q(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av \x3d abs(v);\n\n  //Handle special cases\n  if(av \x3c FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v \x3e FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v \x3c -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c \x3d vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e \x3d floor(log2(av));\n  float m \x3d av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] \x3d floor(128.0 * m);\n  m -\x3d c[1] / 128.0;\n  c[2] \x3d floor(32768.0 * m);\n  m -\x3d c[2] / 32768.0;\n  c[3] \x3d floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias \x3d e + 127.0;\n  c[0] \x3d floor(ebias / 2.0);\n  ebias -\x3d c[0] * 2.0;\n  c[1] +\x3d floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] +\x3d 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor \x3d vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),
b=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];p.createShader=function(a){return n(a,k,m,null,b)};p.createPickShader=function(a){return n(a,k,h,null,b)}},{"gl-shader":304,glslify:410}],258:[function(a,q,p){function n(b){for(var a=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],c=0;3>c;++c)a[0][c]=Math.max(b[0][c],a[0][c]),a[1][c]=Math.min(b[1][c],a[1][c]);return a}function k(b,a,c,d){this.arcLength=b;
this.position=a;this.index=c;this.dataCoordinate=d}function m(b,a,c,d,e,f){this.gl=b;this.shader=a;this.pickShader=c;this.buffer=d;this.vao=e;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.points=[];this.arcLength=[];this.vertexCount=0;this.bounds=[[0,0,0],[0,0,0]];this.pickId=0;this.lineWidth=1;this.texture=f;this.opacity=this.dashScale=1;this.hasAlpha=!1;this.dirty=!0;this.pixelRatio=1}q.exports=function(a){var e=a.gl||a.scene&&a.scene.gl,r=d(e);r.attributes.position.location=
0;r.attributes.nextPosition.location=1;r.attributes.arcLength.location=2;r.attributes.lineWidth.location=3;r.attributes.color.location=4;var l=c(e);l.attributes.position.location=0;l.attributes.nextPosition.location=1;l.attributes.arcLength.location=2;l.attributes.lineWidth.location=3;l.attributes.color.location=4;for(var k=h(e),t=b(e,[{buffer:k,size:3,offset:0,stride:48},{buffer:k,size:3,offset:12,stride:48},{buffer:k,size:1,offset:24,stride:48},{buffer:k,size:1,offset:28,stride:48},{buffer:k,size:4,
offset:32,stride:48}]),u=f(Array(1024),[256,1,4]),n=0;1024>n;++n)u.data[n]=255;u=g(e,u);u.wrap=e.REPEAT;e=new m(e,r,l,k,t,u);e.update(a);return e};var h=a("gl-buffer"),b=a("gl-vao"),g=a("gl-texture2d"),e=new Uint8Array(4),t=new Float32Array(e.buffer),l=a("binary-search-bounds"),f=a("ndarray");a=a("./lib/shaders");var d=a.createShader,c=a.createPickShader,r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a=m.prototype;a.isTransparent=function(){return this.hasAlpha};a.isOpaque=function(){return!this.hasAlpha};a.pickSlots=
1;a.setPickBase=function(b){this.pickId=b};a.drawTransparent=a.draw=function(b){if(this.vertexCount){var a=this.gl,c=this.shader,d=this.vao;c.bind();c.uniforms={model:b.model||r,view:b.view||r,projection:b.projection||r,clipBounds:n(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[a.drawingBufferWidth,a.drawingBufferHeight],pixelRatio:this.pixelRatio};d.bind();d.draw(a.TRIANGLE_STRIP,this.vertexCount);
d.unbind()}};a.drawPick=function(b){if(this.vertexCount){var a=this.gl,c=this.pickShader,d=this.vao;c.bind();c.uniforms={model:b.model||r,view:b.view||r,projection:b.projection||r,pickId:this.pickId,clipBounds:n(this.clipBounds),screenShape:[a.drawingBufferWidth,a.drawingBufferHeight],pixelRatio:this.pixelRatio};d.bind();d.draw(a.TRIANGLE_STRIP,this.vertexCount);d.unbind()}};a.update=function(b){var a;this.dirty=!0;var c=!!b.connectGaps;"dashScale"in b&&(this.dashScale=b.dashScale);this.hasAlpha=
!1;"opacity"in b&&(this.opacity=+b.opacity,1>this.opacity&&(this.hasAlpha=!0));var d=[],e=[],g=[],h=0,r=0,k=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],t=b.position||b.positions;if(t){var u=b.color||b.colors||[0,0,0,1],m=b.lineWidth||1,n=!1;var q=1;a:for(;q<t.length;++q){var p=t[q-1],H=t[q];e.push(h);g.push(p.slice());for(a=0;3>a;++a){if(isNaN(p[a])||isNaN(H[a])||!isFinite(p[a])||!isFinite(H[a])){if(!c&&0<d.length){for(n=0;24>n;++n)d.push(d[d.length-12]);r+=2;n=!0}continue a}k[0][a]=
Math.min(k[0][a],p[a],H[a]);k[1][a]=Math.max(k[1][a],p[a],H[a])}if(Array.isArray(u[0])){var K=u.length>q-1?u[q-1]:0<u.length?u[u.length-1]:[0,0,0,1];var M=u.length>q?u[q]:0<u.length?u[u.length-1]:[0,0,0,1]}else K=M=u;3===K.length&&(K=[K[0],K[1],K[2],1]);3===M.length&&(M=[M[0],M[1],M[2],1]);!this.hasAlpha&&1>K[3]&&(this.hasAlpha=!0);var I=Array.isArray(m)?m.length>q-1?m[q-1]:0<m.length?m[m.length-1]:[0,0,0,1]:m;var N=h;a=h;for(var O=h=0;3>O;++O){var P=p[O]-H[O];h+=P*P}h=a+Math.sqrt(h);if(n){for(a=
0;2>a;++a)d.push(p[0],p[1],p[2],H[0],H[1],H[2],N,I,K[0],K[1],K[2],K[3]);r+=2;n=!1}d.push(p[0],p[1],p[2],H[0],H[1],H[2],N,I,K[0],K[1],K[2],K[3],p[0],p[1],p[2],H[0],H[1],H[2],N,-I,K[0],K[1],K[2],K[3],H[0],H[1],H[2],p[0],p[1],p[2],h,-I,M[0],M[1],M[2],M[3],H[0],H[1],H[2],p[0],p[1],p[2],h,I,M[0],M[1],M[2],M[3]);r+=4}}this.buffer.update(d);e.push(h);g.push(t[t.length-1].slice());this.bounds=k;this.vertexCount=r;this.points=g;this.arcLength=e;if("dashes"in b){b=b.dashes.slice();b.unshift(0);for(q=1;q<b.length;++q)b[q]=
b[q-1]+b[q];c=f(Array(1024),[256,1,4]);for(q=0;256>q;++q){for(a=0;4>a;++a)c.set(q,0,a,0);l.le(b,b[b.length-1]*q/255)&1?c.set(q,0,0,0):c.set(q,0,0,255)}this.texture.setPixels(c)}};a.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()};a.pick=function(b){if(!b||b.id!==this.pickId)return null;var a=b.value[0];var c=b.value[1];b=b.value[2];e[0]=0;e[1]=b;e[2]=c;e[3]=a;a=t[0];b=l.le(this.arcLength,a);if(0>b)return null;if(b===this.arcLength.length-1)return new k(this.arcLength[this.arcLength.length-
1],this.points[this.points.length-1].slice(),b);var d=this.points[b],f=this.points[Math.min(b+1,this.points.length-1)],g=(a-this.arcLength[b])/(this.arcLength[b+1]-this.arcLength[b]),h=1-g;c=[0,0,0];for(var r=0;3>r;++r)c[r]=h*d[r]+g*f[r];b=Math.min(.5>g?b:b+1,this.points.length-1);return new k(a,c,b,this.points[b])}},{"./lib/shaders":257,"binary-search-bounds":259,"gl-buffer":244,"gl-texture2d":324,"gl-vao":329,ndarray:451}],259:[function(a,q,p){arguments[4][113][0].apply(p,arguments)},{dup:113}],
260:[function(a,q,p){q.exports=function(a,k){var m=k[0],h=k[1],b=k[2];k=k[3];var g=m*k-b*h;if(!g)return null;g=1/g;a[0]=k*g;a[1]=-h*g;a[2]=-b*g;a[3]=m*g;return a}},{}],261:[function(a,q,p){q.exports=function(a,k){var m=k[0],h=k[1],b=k[2],g=k[3],e=k[4],t=k[5],l=k[6],f=k[7];k=k[8];var d=k*e-t*f,c=-k*g+t*l,r=f*g-e*l,u=m*d+h*c+b*r;if(!u)return null;u=1/u;a[0]=d*u;a[1]=(-k*h+b*f)*u;a[2]=(t*h-b*e)*u;a[3]=c*u;a[4]=(k*m-b*l)*u;a[5]=(-t*m+b*g)*u;a[6]=r*u;a[7]=(-f*m+h*l)*u;a[8]=(e*m-h*g)*u;return a}},{}],262:[function(a,
q,p){q.exports=function(a){var k=new Float32Array(16);k[0]=a[0];k[1]=a[1];k[2]=a[2];k[3]=a[3];k[4]=a[4];k[5]=a[5];k[6]=a[6];k[7]=a[7];k[8]=a[8];k[9]=a[9];k[10]=a[10];k[11]=a[11];k[12]=a[12];k[13]=a[13];k[14]=a[14];k[15]=a[15];return k}},{}],263:[function(a,q,p){q.exports=function(){var a=new Float32Array(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],264:[function(a,q,p){q.exports=function(a){var k=a[0],m=a[1],
h=a[2],b=a[3],g=a[4],e=a[5],t=a[6],l=a[7],f=a[8],d=a[9],c=a[10],r=a[11],u=a[12],n=a[13],w=a[14];a=a[15];return(k*e-m*g)*(c*a-r*w)-(k*t-h*g)*(d*a-r*n)+(k*l-b*g)*(d*w-c*n)+(m*t-h*e)*(f*a-r*u)-(m*l-b*e)*(f*w-c*u)+(h*l-b*t)*(f*n-d*u)}},{}],265:[function(a,q,p){q.exports=function(a,k){var m=k[0],h=k[1],b=k[2];k=k[3];var g=m+m,e=h+h,t=b+b;m*=g;var l=h*g;h*=e;var f=b*g,d=b*e;b*=t;g*=k;e*=k;k*=t;a[0]=1-h-b;a[1]=l+k;a[2]=f-e;a[3]=0;a[4]=l-k;a[5]=1-m-b;a[6]=d+g;a[7]=0;a[8]=f+e;a[9]=d-g;a[10]=1-m-h;a[11]=0;
a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],266:[function(a,q,p){q.exports=function(a,k,m){var h=k[0],b=k[1],g=k[2],e=k[3],t=h+h,l=b+b,f=g+g;k=h*t;var d=h*l;h*=f;var c=b*l;b*=f;g*=f;t*=e;l*=e;e*=f;a[0]=1-(c+g);a[1]=d+e;a[2]=h-l;a[3]=0;a[4]=d-e;a[5]=1-(k+g);a[6]=b+t;a[7]=0;a[8]=h+l;a[9]=b-t;a[10]=1-(k+c);a[11]=0;a[12]=m[0];a[13]=m[1];a[14]=m[2];a[15]=1;return a}},{}],267:[function(a,q,p){q.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;
a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],268:[function(a,q,p){q.exports=function(a,k){var m=k[0],h=k[1],b=k[2],g=k[3],e=k[4],t=k[5],l=k[6],f=k[7],d=k[8],c=k[9],r=k[10],u=k[11],n=k[12],w=k[13],y=k[14];k=k[15];var A=m*t-h*e,z=m*l-b*e,x=m*f-g*e,C=h*l-b*t,B=h*f-g*t,D=b*f-g*l,q=d*w-c*n,p=d*y-r*n,F=d*k-u*n,L=c*y-r*w,J=c*k-u*w,H=r*k-u*y,K=A*H-z*J+x*L+C*F-B*p+D*q;if(!K)return null;K=1/K;a[0]=(t*H-l*J+f*L)*K;a[1]=(b*J-h*H-g*L)*K;a[2]=(w*D-y*B+k*C)*K;a[3]=(r*B-c*D-u*C)*K;a[4]=(l*F-e*H-f*p)*K;a[5]=(m*
H-b*F+g*p)*K;a[6]=(y*x-n*D-k*z)*K;a[7]=(d*D-r*x+u*z)*K;a[8]=(e*J-t*F+f*q)*K;a[9]=(h*F-m*J-g*q)*K;a[10]=(n*B-w*x+k*A)*K;a[11]=(c*x-d*B-u*A)*K;a[12]=(t*p-e*L-l*q)*K;a[13]=(m*L-h*p+b*q)*K;a[14]=(w*z-n*C-y*A)*K;a[15]=(d*C-c*z+r*A)*K;return a}},{}],269:[function(a,q,p){var n=a("./identity");q.exports=function(a,m,h,b){var g=m[0],e=m[1];m=m[2];var k=b[0];var l=b[1];var f=b[2];var d=h[0];b=h[1];var c=h[2];if(1E-6>Math.abs(g-d)&&1E-6>Math.abs(e-b)&&1E-6>Math.abs(m-c))return n(a);h=g-d;b=e-b;d=m-c;var r=1/
Math.sqrt(h*h+b*b+d*d);h*=r;b*=r;d*=r;c=l*d-f*b;f=f*h-k*d;k=k*b-l*h;(r=Math.sqrt(c*c+f*f+k*k))?(r=1/r,c*=r,f*=r,k*=r):k=f=c=0;l=b*k-d*f;var u=d*c-h*k;var v=h*f-b*c;(r=Math.sqrt(l*l+u*u+v*v))?(r=1/r,l*=r,u*=r,v*=r):v=u=l=0;a[0]=c;a[1]=l;a[2]=h;a[3]=0;a[4]=f;a[5]=u;a[6]=b;a[7]=0;a[8]=k;a[9]=v;a[10]=d;a[11]=0;a[12]=-(c*g+f*e+k*m);a[13]=-(l*g+u*e+v*m);a[14]=-(h*g+b*e+d*m);a[15]=1;return a}},{"./identity":267}],270:[function(a,q,p){q.exports=function(a,k,m){var h=k[0],b=k[1],g=k[2],e=k[3],t=k[4],l=k[5],
f=k[6],d=k[7],c=k[8],r=k[9],u=k[10],n=k[11],w=k[12],y=k[13],A=k[14];k=k[15];var z=m[0],x=m[1],C=m[2],B=m[3];a[0]=z*h+x*t+C*c+B*w;a[1]=z*b+x*l+C*r+B*y;a[2]=z*g+x*f+C*u+B*A;a[3]=z*e+x*d+C*n+B*k;z=m[4];x=m[5];C=m[6];B=m[7];a[4]=z*h+x*t+C*c+B*w;a[5]=z*b+x*l+C*r+B*y;a[6]=z*g+x*f+C*u+B*A;a[7]=z*e+x*d+C*n+B*k;z=m[8];x=m[9];C=m[10];B=m[11];a[8]=z*h+x*t+C*c+B*w;a[9]=z*b+x*l+C*r+B*y;a[10]=z*g+x*f+C*u+B*A;a[11]=z*e+x*d+C*n+B*k;z=m[12];x=m[13];C=m[14];B=m[15];a[12]=z*h+x*t+C*c+B*w;a[13]=z*b+x*l+C*r+B*y;a[14]=
z*g+x*f+C*u+B*A;a[15]=z*e+x*d+C*n+B*k;return a}},{}],271:[function(a,q,p){q.exports=function(a,k,m,h,b,g,e){var t=1/(k-m),l=1/(h-b),f=1/(g-e);a[0]=-2*t;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*l;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*f;a[11]=0;a[12]=(k+m)*t;a[13]=(b+h)*l;a[14]=(e+g)*f;a[15]=1;return a}},{}],272:[function(a,q,p){q.exports=function(a,k,m,h,b){k=1/Math.tan(k/2);var g=1/(h-b);a[0]=k/m;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=k;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(b+h)*g;a[11]=-1;a[12]=0;a[13]=0;a[14]=
2*b*h*g;a[15]=0;return a}},{}],273:[function(a,q,p){q.exports=function(a,k,m,h){var b=h[0],g=h[1];h=h[2];var e=Math.sqrt(b*b+g*g+h*h);if(1E-6>Math.abs(e))return null;e=1/e;b*=e;g*=e;h*=e;var t=Math.sin(m);var l=Math.cos(m);var f=1-l;m=k[0];e=k[1];var d=k[2];var c=k[3];var r=k[4];var u=k[5];var n=k[6];var w=k[7];var y=k[8];var A=k[9];var z=k[10];var x=k[11];var C=b*b*f+l;var B=g*b*f+h*t;var D=h*b*f-g*t;var q=b*g*f-h*t;var p=g*g*f+l;var F=h*g*f+b*t;var L=b*h*f+g*t;b=g*h*f-b*t;g=h*h*f+l;a[0]=m*C+r*B+
y*D;a[1]=e*C+u*B+A*D;a[2]=d*C+n*B+z*D;a[3]=c*C+w*B+x*D;a[4]=m*q+r*p+y*F;a[5]=e*q+u*p+A*F;a[6]=d*q+n*p+z*F;a[7]=c*q+w*p+x*F;a[8]=m*L+r*b+y*g;a[9]=e*L+u*b+A*g;a[10]=d*L+n*b+z*g;a[11]=c*L+w*b+x*g;k!==a&&(a[12]=k[12],a[13]=k[13],a[14]=k[14],a[15]=k[15]);return a}},{}],274:[function(a,q,p){q.exports=function(a,k,m){var h=Math.sin(m);m=Math.cos(m);var b=k[4],g=k[5],e=k[6],t=k[7],l=k[8],f=k[9],d=k[10],c=k[11];k!==a&&(a[0]=k[0],a[1]=k[1],a[2]=k[2],a[3]=k[3],a[12]=k[12],a[13]=k[13],a[14]=k[14],a[15]=k[15]);
a[4]=b*m+l*h;a[5]=g*m+f*h;a[6]=e*m+d*h;a[7]=t*m+c*h;a[8]=l*m-b*h;a[9]=f*m-g*h;a[10]=d*m-e*h;a[11]=c*m-t*h;return a}},{}],275:[function(a,q,p){q.exports=function(a,k,m){var h=Math.sin(m);m=Math.cos(m);var b=k[0],g=k[1],e=k[2],t=k[3],l=k[8],f=k[9],d=k[10],c=k[11];k!==a&&(a[4]=k[4],a[5]=k[5],a[6]=k[6],a[7]=k[7],a[12]=k[12],a[13]=k[13],a[14]=k[14],a[15]=k[15]);a[0]=b*m-l*h;a[1]=g*m-f*h;a[2]=e*m-d*h;a[3]=t*m-c*h;a[8]=b*h+l*m;a[9]=g*h+f*m;a[10]=e*h+d*m;a[11]=t*h+c*m;return a}},{}],276:[function(a,q,p){q.exports=
function(a,k,m){var h=Math.sin(m);m=Math.cos(m);var b=k[0],g=k[1],e=k[2],t=k[3],l=k[4],f=k[5],d=k[6],c=k[7];k!==a&&(a[8]=k[8],a[9]=k[9],a[10]=k[10],a[11]=k[11],a[12]=k[12],a[13]=k[13],a[14]=k[14],a[15]=k[15]);a[0]=b*m+l*h;a[1]=g*m+f*h;a[2]=e*m+d*h;a[3]=t*m+c*h;a[4]=l*m-b*h;a[5]=f*m-g*h;a[6]=d*m-e*h;a[7]=c*m-t*h;return a}},{}],277:[function(a,q,p){q.exports=function(a,k,m){var h=m[0],b=m[1];m=m[2];a[0]=k[0]*h;a[1]=k[1]*h;a[2]=k[2]*h;a[3]=k[3]*h;a[4]=k[4]*b;a[5]=k[5]*b;a[6]=k[6]*b;a[7]=k[7]*b;a[8]=
k[8]*m;a[9]=k[9]*m;a[10]=k[10]*m;a[11]=k[11]*m;a[12]=k[12];a[13]=k[13];a[14]=k[14];a[15]=k[15];return a}},{}],278:[function(a,q,p){q.exports=function(a,k,m){var h=m[0],b=m[1];m=m[2];if(k===a)a[12]=k[0]*h+k[4]*b+k[8]*m+k[12],a[13]=k[1]*h+k[5]*b+k[9]*m+k[13],a[14]=k[2]*h+k[6]*b+k[10]*m+k[14],a[15]=k[3]*h+k[7]*b+k[11]*m+k[15];else{var g=k[0];var e=k[1];var t=k[2];var l=k[3];var f=k[4];var d=k[5];var c=k[6];var r=k[7];var u=k[8];var n=k[9];var w=k[10];var y=k[11];a[0]=g;a[1]=e;a[2]=t;a[3]=l;a[4]=f;a[5]=
d;a[6]=c;a[7]=r;a[8]=u;a[9]=n;a[10]=w;a[11]=y;a[12]=g*h+f*b+u*m+k[12];a[13]=e*h+d*b+n*m+k[13];a[14]=t*h+c*b+w*m+k[14];a[15]=l*h+r*b+y*m+k[15]}return a}},{}],279:[function(a,q,p){q.exports=function(a,k){if(a===k){var m=k[1],h=k[2],b=k[3],g=k[6],e=k[7],t=k[11];a[1]=k[4];a[2]=k[8];a[3]=k[12];a[4]=m;a[6]=k[9];a[7]=k[13];a[8]=h;a[9]=g;a[11]=k[14];a[12]=b;a[13]=e;a[14]=t}else a[0]=k[0],a[1]=k[4],a[2]=k[8],a[3]=k[12],a[4]=k[1],a[5]=k[5],a[6]=k[9],a[7]=k[13],a[8]=k[2],a[9]=k[6],a[10]=k[10],a[11]=k[14],a[12]=
k[3],a[13]=k[7],a[14]=k[11],a[15]=k[15];return a}},{}],280:[function(a,q,p){q.exports=function(a,b){switch(b.length){case 0:break;case 1:a[0]=1/b[0];break;case 4:n(a,b);break;case 9:k(a,b);break;case 16:m(a,b);break;default:throw Error("currently supports matrices up to 4x4");}return a};var n=a("gl-mat2/invert"),k=a("gl-mat3/invert"),m=a("gl-mat4/invert")},{"gl-mat2/invert":260,"gl-mat3/invert":261,"gl-mat4/invert":268}],281:[function(a,q,p){function n(a,b){for(var g=[0,0,0,0],e=0;4>e;++e)for(var h=
0;4>h;++h)g[h]+=a[4*e+h]*b[e];return g}var k=a("barycentric"),m=a("polytope-closest-point/lib/closest_point_2d.js");q.exports=function(a,b,g,e,t,l){if(1===a.length)return[0,a[0].slice()];for(var f=Array(a.length),d=0;d<a.length;++d){var c=d,h=a[d],u=l;h=n(t,n(e,n(g,[h[0],h[1],h[2],1])));for(var v=0;3>v;++v)h[v]/=h[3];f[c]=[.5*u[0]*(1+h[0]),.5*u[1]*(1-h[1])]}g=0;e=Infinity;for(d=0;d<f.length;++d){for(l=t=0;2>l;++l)t+=Math.pow(f[d][l]-b[l],2);t<e&&(e=t,g=d)}if(2===f.length){for(t=e=d=0;2>t;++t)d+=Math.pow(b[t]-
f[0][t],2),e+=Math.pow(b[t]-f[1][t],2);d=Math.sqrt(d);e=Math.sqrt(e);b=1E-6>d+e?[1,0]:[e/(d+e),d/(e+d)]}else 3===f.length?(d=[0,0],m(f[0],f[1],f[2],b,d),b=k(f,d)):b=[];for(d=f=0;3>d;++d){if(-.001>b[d]||1.0001<b[d])return null;f+=b[d]}if(.001<Math.abs(f-1))return null;f=[0,0,0];for(d=0;d<a.length;++d)for(e=a[d],t=b[d],l=0;3>l;++l)f[l]+=t*e[l];return[g,f,b]}},{barycentric:75,"polytope-closest-point/lib/closest_point_2d.js":482}],282:[function(a,q,p){var n=a("glslify");a=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      \x3d project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * vec4(position , 1.0);\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal  \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          \x3d color;\n  f_data           \x3d position;\n  f_uv             \x3d uv;\n}\n"]);
q=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann \x3d require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a \x3d\x3d 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular \x3d max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * f_color.a;\n}\n"]);
var k=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  f_color \x3d color;\n  f_data  \x3d position;\n  f_uv    \x3d uv;\n}"]),m=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor \x3d f_color * texture2D(texture, f_uv) * opacity;\n}"]),
h=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize \x3d pointSize;\n  f_color \x3d color;\n  f_uv \x3d uv;\n}"]),
b=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR \x3d gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) \x3e 0.25) {\n    discard;\n  }\n  gl_FragColor \x3d f_color * texture2D(texture, f_uv) * opacity;\n}"]),g=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  f_id        \x3d id;\n  f_position  \x3d position;\n}"]),
e=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]),
t=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  \x3d projection * view * model * vec4(position, 1.0);\n    gl_PointSize \x3d pointSize;\n  }\n  f_id         \x3d id;\n  f_position   \x3d position;\n}"]),
l=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n}"]);n=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor \x3d vec4(contourColor, 1.0);\n}\n"]);p.meshShader={vertex:a,fragment:q,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};
p.wireShader={vertex:k,fragment:m,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};p.pointShader={vertex:h,fragment:b,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]};p.pickShader={vertex:g,fragment:e,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]};p.pointPickShader={vertex:t,fragment:e,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},
{name:"id",type:"vec4"}]};p.contourShader={vertex:l,fragment:n,attributes:[{name:"position",type:"vec3"}]}},{glslify:410}],283:[function(a,q,p){function n(b,a,c,d,e,f,g,h,r,l,k,t,u,m,n,w,v,z,y,A,x,C,q,p,la,da,ma){this.gl=b;this.pixelRatio=1;this.cells=[];this.positions=[];this.intensity=[];this.texture=a;this.dirty=!0;this.triShader=c;this.lineShader=d;this.pointShader=e;this.pickShader=f;this.pointPickShader=g;this.contourShader=h;this.trianglePositions=r;this.triangleColors=k;this.triangleNormals=
u;this.triangleUVs=t;this.triangleIds=l;this.triangleVAO=m;this.triangleCount=0;this.lineWidth=1;this.edgePositions=n;this.edgeColors=v;this.edgeUVs=z;this.edgeIds=w;this.edgeVAO=y;this.edgeCount=0;this.pointPositions=A;this.pointColors=C;this.pointUVs=q;this.pointSizes=p;this.pointIds=x;this.pointVAO=la;this.pointCount=0;this.contourLineWidth=1;this.contourPositions=da;this.contourVAO=ma;this.contourCount=0;this.contourColor=[0,0,0];this.pickVertex=this.contourEnable=!0;this.pickId=1;this.bounds=
[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.opacity=1;this.opacityscale=this.hasAlpha=!1;this._projection=this._view=this._model=B;this._resolution=[1,1]}function k(b,a){if(!a||!a.length)return 1;for(var c=0;c<a.length&&!(2>a.length);++c){if(a[c][0]===b)return a[c][1];if(a[c][0]>
b&&0<c)return b=(a[c][0]-b)/(a[c][0]-a[c-1][0]),a[c][1]*(1-b)+b*a[c-1][1]}return 1}function m(b,a){b=c({colormap:b,nshades:256,format:"rgba"});for(var e=new Uint8Array(1024),f=0;256>f;++f){for(var g=b[f],h=0;3>h;++h)e[4*f+h]=g[h];e[4*f+3]=a?255*k(f/255,a):255*g[3]}return d(e,[256,256,4],[4,0,1])}var h=a("gl-shader"),b=a("gl-buffer"),g=a("gl-vao"),e=a("gl-texture2d"),t=a("normals"),l=a("gl-mat4/multiply"),f=a("gl-mat4/invert"),d=a("ndarray"),c=a("colormap"),r=a("simplicial-complex-contour"),u=a("typedarray-pool");
p=a("./lib/shaders");var v=a("./lib/closest-point"),w=p.meshShader,y=p.wireShader,A=p.pointShader,z=p.pickShader,x=p.pointPickShader,C=p.contourShader,B=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a=n.prototype;a.isOpaque=function(){return!this.hasAlpha};a.isTransparent=function(){return this.hasAlpha};a.pickSlots=1;a.setPickBase=function(b){this.pickId=b};a.highlight=function(b){if(b&&this.contourEnable){var a=r(this.cells,this.intensity,b.intensity);b=a.cells;var c=a.vertexIds;a=a.vertexWeights;for(var d=
b.length,e=u.mallocFloat32(6*d),f=0,g=0;g<d;++g)for(var h=b[g],l=0;2>l;++l){var k=h[0];2===h.length&&(k=h[l]);var t=a[k],m=1-t,n=this.positions[c[k][0]];k=this.positions[c[k][1]];for(var w=0;3>w;++w)e[f++]=t*n[w]+m*k[w]}this.contourCount=f/3|0;this.contourPositions.update(e.subarray(0,f));u.free(e)}else this.contourCount=0};a.update=function(b){b=b||{};var a=this.gl;this.dirty=!0;"contourEnable"in b&&(this.contourEnable=b.contourEnable);"contourColor"in b&&(this.contourColor=b.contourColor);"lineWidth"in
b&&(this.lineWidth=b.lineWidth);"lightPosition"in b&&(this.lightPosition=b.lightPosition);this.hasAlpha=!1;"opacity"in b&&(this.opacity=b.opacity,1>this.opacity&&(this.hasAlpha=!0));"opacityscale"in b&&(this.opacityscale=b.opacityscale,this.hasAlpha=!0);"ambient"in b&&(this.ambientLight=b.ambient);"diffuse"in b&&(this.diffuseLight=b.diffuse);"specular"in b&&(this.specularLight=b.specular);"roughness"in b&&(this.roughness=b.roughness);"fresnel"in b&&(this.fresnel=b.fresnel);b.texture?(this.texture.dispose(),
this.texture=e(a,b.texture)):b.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=a.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=a.LINEAR,this.texture.setPixels(m(b.colormap,this.opacityscale)),this.texture.generateMipmap());a=b.cells;var c=b.positions;if(c&&a){var d=[],f=[],g=[],h=[],r=[],l=[],u=[],n=[],w=[],v=[],z=[],y=[],A=[],x=[];this.cells=a;this.positions=c;var B=b.vertexNormals,C=b.cellNormals,q=void 0===b.vertexNormalsEpsilon?1E-6:b.vertexNormalsEpsilon,p=void 0===b.faceNormalsEpsilon?
1E-6:b.faceNormalsEpsilon;b.useFacetNormals&&!C&&(C=t.faceNormals(a,c,p));C||B||(B=t.vertexNormals(a,c,q));q=b.vertexColors;p=b.cellColors;var D=b.meshColor||[1,1,1,1],ea=b.vertexUVs,fa=b.vertexIntensity,la=b.cellUVs,da=b.cellIntensity,ma=Infinity,aa=-Infinity;if(!ea&&!la)if(fa)if(b.vertexIntensityBounds)ma=+b.vertexIntensityBounds[0],aa=+b.vertexIntensityBounds[1];else for(var na=0;na<fa.length;++na){var ha=fa[na];ma=Math.min(ma,ha);aa=Math.max(aa,ha)}else if(da)if(b.cellIntensityBounds)ma=+b.cellIntensityBounds[0],
aa=+b.cellIntensityBounds[1];else for(na=0;na<da.length;++na)ha=da[na],ma=Math.min(ma,ha),aa=Math.max(aa,ha);else for(na=0;na<c.length;++na)ha=c[na][2],ma=Math.min(ma,ha),aa=Math.max(aa,ha);if(fa)this.intensity=fa;else if(da)this.intensity=da;else{na=c.length;ha=Array(na);for(var ja=0;ja<na;++ja)ha[ja]=c[ja][2];this.intensity=ha}this.pickVertex=!(da||p);ha=b.pointSizes;b=b.pointSize||1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(na=0;na<c.length;++na){var oa=c[na];
for(ja=0;3>ja;++ja)!isNaN(oa[ja])&&isFinite(oa[ja])&&(this.bounds[0][ja]=Math.min(this.bounds[0][ja],oa[ja]),this.bounds[1][ja]=Math.max(this.bounds[1][ja],oa[ja]))}var ka=0,ia=0,xa=0;na=0;a:for(;na<a.length;++na){var ya=a[na];switch(ya.length){case 1:var sa=ya[0];oa=c[sa];for(ja=0;3>ja;++ja)if(isNaN(oa[ja])||!isFinite(oa[ja]))continue a;v.push(oa[0],oa[1],oa[2]);var W=q?q[sa]:p?p[na]:D;this.opacityscale&&fa?f.push(W[0],W[1],W[2],this.opacity*k((fa[sa]-ma)/(aa-ma),this.opacityscale)):3===W.length?
z.push(W[0],W[1],W[2],this.opacity):(z.push(W[0],W[1],W[2],W[3]*this.opacity),1>W[3]&&(this.hasAlpha=!0));oa=ea?ea[sa]:fa?[(fa[sa]-ma)/(aa-ma),0]:la?la[na]:da?[(da[na]-ma)/(aa-ma),0]:[(oa[2]-ma)/(aa-ma),0];y.push(oa[0],oa[1]);ha?A.push(ha[sa]):A.push(b);x.push(na);xa+=1;break;case 2:for(ja=0;2>ja;++ja)for(sa=ya[ja],oa=c[sa],sa=0;3>sa;++sa)if(isNaN(oa[sa])||!isFinite(oa[sa]))continue a;for(ja=0;2>ja;++ja)sa=ya[ja],oa=c[sa],l.push(oa[0],oa[1],oa[2]),W=q?q[sa]:p?p[na]:D,this.opacityscale&&fa?f.push(W[0],
W[1],W[2],this.opacity*k((fa[sa]-ma)/(aa-ma),this.opacityscale)):3===W.length?u.push(W[0],W[1],W[2],this.opacity):(u.push(W[0],W[1],W[2],W[3]*this.opacity),1>W[3]&&(this.hasAlpha=!0)),oa=ea?ea[sa]:fa?[(fa[sa]-ma)/(aa-ma),0]:la?la[na]:da?[(da[na]-ma)/(aa-ma),0]:[(oa[2]-ma)/(aa-ma),0],n.push(oa[0],oa[1]),w.push(na);ia+=1;break;case 3:for(ja=0;3>ja;++ja)for(sa=ya[ja],oa=c[sa],sa=0;3>sa;++sa)if(isNaN(oa[sa])||!isFinite(oa[sa]))continue a;for(ja=0;3>ja;++ja)sa=ya[2-ja],oa=c[sa],d.push(oa[0],oa[1],oa[2]),
(W=q?q[sa]:p?p[na]:D)?this.opacityscale&&fa?f.push(W[0],W[1],W[2],this.opacity*k((fa[sa]-ma)/(aa-ma),this.opacityscale)):3===W.length?f.push(W[0],W[1],W[2],this.opacity):(f.push(W[0],W[1],W[2],W[3]*this.opacity),1>W[3]&&(this.hasAlpha=!0)):f.push(.5,.5,.5,1),oa=ea?ea[sa]:fa?[(fa[sa]-ma)/(aa-ma),0]:la?la[na]:da?[(da[na]-ma)/(aa-ma),0]:[(oa[2]-ma)/(aa-ma),0],h.push(oa[0],oa[1]),oa=B?B[sa]:C[na],g.push(oa[0],oa[1],oa[2]),r.push(na);ka+=1}}this.pointCount=xa;this.edgeCount=ia;this.triangleCount=ka;this.pointPositions.update(v);
this.pointColors.update(z);this.pointUVs.update(y);this.pointSizes.update(A);this.pointIds.update(new Uint32Array(x));this.edgePositions.update(l);this.edgeColors.update(u);this.edgeUVs.update(n);this.edgeIds.update(new Uint32Array(w));this.trianglePositions.update(d);this.triangleColors.update(f);this.triangleUVs.update(h);this.triangleNormals.update(g);this.triangleIds.update(new Uint32Array(r))}};a.drawTransparent=a.draw=function(b){b=b||{};var a=this.gl,c=b.model||B,d=b.view||B,e=b.projection||
B,g=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]];for(b=0;3>b;++b)g[0][b]=Math.max(g[0][b],this.clipBounds[0][b]),g[1][b]=Math.min(g[1][b],this.clipBounds[1][b]);c={model:c,view:d,projection:e,inverseModel:B.slice(),clipBounds:g,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};c.inverseModel=f(c.inverseModel,c.model);a.disable(a.CULL_FACE);this.texture.bind(0);
d=Array(16);l(d,c.view,c.model);l(d,c.projection,d);f(d,d);for(b=0;3>b;++b)c.eyePosition[b]=d[12+b]/d[15];e=d[15];for(b=0;3>b;++b)e+=this.lightPosition[b]*d[4*b+3];for(b=0;3>b;++b){g=d[12+b];for(var h=0;3>h;++h)g+=d[4*h+b]*this.lightPosition[h];c.lightPosition[b]=g/e}0<this.triangleCount&&(b=this.triShader,b.bind(),b.uniforms=c,this.triangleVAO.bind(),a.drawArrays(a.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());0<this.edgeCount&&0<this.lineWidth&&(b=this.lineShader,b.bind(),b.uniforms=
c,this.edgeVAO.bind(),a.lineWidth(this.lineWidth*this.pixelRatio),a.drawArrays(a.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(b=this.pointShader,b.bind(),b.uniforms=c,this.pointVAO.bind(),a.drawArrays(a.POINTS,0,this.pointCount),this.pointVAO.unbind());this.contourEnable&&0<this.contourCount&&0<this.contourLineWidth&&(b=this.contourShader,b.bind(),b.uniforms=c,this.contourVAO.bind(),a.drawArrays(a.LINES,0,this.contourCount),this.contourVAO.unbind())};a.drawPick=function(b){b=
b||{};var a=this.gl,c=b.model||B,d=b.view||B;b=b.projection||B;for(var e=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],f=0;3>f;++f)e[0][f]=Math.max(e[0][f],this.clipBounds[0][f]),e[1][f]=Math.min(e[1][f],this.clipBounds[1][f]);this._model=[].slice.call(c);this._view=[].slice.call(d);this._projection=[].slice.call(b);this._resolution=[a.drawingBufferWidth,a.drawingBufferHeight];c={model:c,view:d,projection:b,clipBounds:e,pickId:this.pickId/255};d=this.pickShader;d.bind();d.uniforms=c;0<this.triangleCount&&(this.triangleVAO.bind(),
a.drawArrays(a.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());0<this.edgeCount&&(this.edgeVAO.bind(),a.lineWidth(this.lineWidth*this.pixelRatio),a.drawArrays(a.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(d=this.pointPickShader,d.bind(),d.uniforms=c,this.pointVAO.bind(),a.drawArrays(a.POINTS,0,this.pointCount),this.pointVAO.unbind())};a.pick=function(b){if(!b||b.id!==this.pickId)return null;for(var a=b.value[0]+256*b.value[1]+65536*b.value[2],c=this.cells[a],
d=this.positions,e=Array(c.length),f=0;f<c.length;++f)e[f]=d[c[f]];f=b.coord[0];b=b.coord[1];if(!this.pickVertex){e=this.positions[c[0]];d=this.positions[c[1]];var g=this.positions[c[2]];return{_cellCenter:!0,position:[f,b],index:a,cell:c,cellId:a,intensity:this.intensity[a],dataCoordinate:[(e[0]+d[0]+g[0])/3,(e[1]+d[1]+g[1])/3,(e[2]+d[2]+g[2])/3]}}e=v(e,[f*this.pixelRatio,this._resolution[1]-b*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!e)return null;b=e[2];for(f=
d=0;f<c.length;++f)d+=b[f]*this.intensity[c[f]];return{position:e[1],index:c[e[0]],cell:c,cellId:a,intensity:d,dataCoordinate:this.positions[c[e[0]]]}};a.dispose=function(){this.texture.dispose();this.triShader.dispose();this.lineShader.dispose();this.pointShader.dispose();this.pickShader.dispose();this.pointPickShader.dispose();this.triangleVAO.dispose();this.trianglePositions.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();this.triangleNormals.dispose();this.triangleIds.dispose();
this.edgeVAO.dispose();this.edgePositions.dispose();this.edgeColors.dispose();this.edgeUVs.dispose();this.edgeIds.dispose();this.pointVAO.dispose();this.pointPositions.dispose();this.pointColors.dispose();this.pointUVs.dispose();this.pointSizes.dispose();this.pointIds.dispose();this.contourVAO.dispose();this.contourPositions.dispose();this.contourShader.dispose()};q.exports=function(a,c){1===arguments.length&&(c=a,a=c.gl);if(!(a.getExtension("OES_standard_derivatives")||a.getExtension("MOZ_OES_standard_derivatives")||
a.getExtension("WEBKIT_OES_standard_derivatives")))throw Error("derivatives not supported");var f=h(a,w.vertex,w.fragment);f.attributes.position.location=0;f.attributes.color.location=2;f.attributes.uv.location=3;f.attributes.normal.location=4;var r=h(a,y.vertex,y.fragment);r.attributes.position.location=0;r.attributes.color.location=2;r.attributes.uv.location=3;var l=h(a,A.vertex,A.fragment);l.attributes.position.location=0;l.attributes.color.location=2;l.attributes.uv.location=3;l.attributes.pointSize.location=
4;var k=h(a,z.vertex,z.fragment);k.attributes.position.location=0;k.attributes.id.location=1;var t=h(a,x.vertex,x.fragment);t.attributes.position.location=0;t.attributes.id.location=1;t.attributes.pointSize.location=4;var u=h(a,C.vertex,C.fragment);u.attributes.position.location=0;var m=e(a,d(new Uint8Array([255,255,255,255]),[1,1,4]));m.generateMipmap();m.minFilter=a.LINEAR_MIPMAP_LINEAR;m.magFilter=a.LINEAR;var v=b(a),B=b(a),q=b(a),p=b(a),D=b(a),G=g(a,[{buffer:v,type:a.FLOAT,size:3},{buffer:D,type:a.UNSIGNED_BYTE,
size:4,normalized:!0},{buffer:B,type:a.FLOAT,size:4},{buffer:q,type:a.FLOAT,size:2},{buffer:p,type:a.FLOAT,size:3}]),V=b(a),Y=b(a),ca=b(a),Z=b(a),R=g(a,[{buffer:V,type:a.FLOAT,size:3},{buffer:Z,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Y,type:a.FLOAT,size:4},{buffer:ca,type:a.FLOAT,size:2}]),U=b(a),X=b(a),ea=b(a),fa=b(a),la=b(a),da=g(a,[{buffer:U,type:a.FLOAT,size:3},{buffer:la,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:X,type:a.FLOAT,size:4},{buffer:ea,type:a.FLOAT,size:2},{buffer:fa,
type:a.FLOAT,size:1}]),ma=b(a),aa=g(a,[{buffer:ma,type:a.FLOAT,size:3}]);f=new n(a,m,f,r,l,k,t,u,v,D,B,q,p,G,V,Z,Y,ca,R,U,la,X,ea,fa,da,ma,aa);f.update(c);return f}},{"./lib/closest-point":281,"./lib/shaders":282,colormap:128,"gl-buffer":244,"gl-mat4/invert":268,"gl-mat4/multiply":270,"gl-shader":304,"gl-texture2d":324,"gl-vao":329,ndarray:451,normals:454,"simplicial-complex-contour":516,"typedarray-pool":543}],284:[function(a,q,p){function n(b,a,e){this.plot=b;this.vbo=a;this.shader=e}q.exports=
function(b){var a=b.gl,e=k(a,[0,0,0,1,1,0,1,1]);a=m(a,h.boxVert,h.lineFrag);return new n(b,e,a)};var k=a("gl-buffer"),m=a("gl-shader"),h=a("./shaders");a=n.prototype;a.bind=function(){var b=this.shader;this.vbo.bind();this.shader.bind();b.attributes.coord.pointer();b.uniforms.screenBox=this.plot.screenBox};a.drawBox=function(){var b=[0,0],a=[0,0];return function(e,g,h,f,d){var c=this.shader,r=this.plot.gl;b[0]=e;b[1]=g;a[0]=h;a[1]=f;c.uniforms.lo=b;c.uniforms.hi=a;c.uniforms.color=d;r.drawArrays(r.TRIANGLE_STRIP,
0,4)}}();a.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":287,"gl-buffer":244,"gl-shader":304}],285:[function(a,q,p){function n(b,a,g,f){this.plot=b;this.vbo=a;this.shader=g;this.tickShader=f;this.ticks=[[],[]]}function k(b,a){return b-a}q.exports=function(b){var a=b.gl,e=m(a),f=h(a,g.gridVert,g.gridFrag);a=h(a,g.tickVert,g.gridFrag);return new n(b,e,f,a)};var m=a("gl-buffer"),h=a("gl-shader"),b=a("binary-search-bounds"),g=a("./shaders");a=n.prototype;a.draw=function(){var b=
[0,0],a=[0,0],g=[0,0];return function(){var e=this.plot,d=this.vbo,c=this.shader,h=this.ticks,l=e.gl,k=e._tickBounds,t=e.dataBox,m=e.viewBox,n=e.gridLineWidth,z=e.gridLineColor,x=e.gridLineEnable;e=e.pixelRatio;for(var C=0;2>C;++C){var B=k[C],q=.5*(t[C+2]+t[C]),p=t[C+2]-t[C];a[C]=2*(k[C+2]-B)/p;b[C]=2*(B-q)/p}c.bind();d.bind();c.attributes.dataCoord.pointer();c.uniforms.dataShift=b;c.uniforms.dataScale=a;for(C=d=0;2>C;++C)g[0]=g[1]=0,g[C]=1,c.uniforms.dataAxis=g,c.uniforms.lineWidth=n[C]/(m[C+2]-
m[C])*e,c.uniforms.color=z[C],k=6*h[C].length,x[C]&&k&&l.drawArrays(l.TRIANGLES,d,k),d+=k}}();a.drawTickMarks=function(){var a=[0,0],g=[0,0],h=[1,0],f=[0,1],d=[0,0],c=[0,0];return function(){var e=this.plot,l=this.vbo,t=this.tickShader,m=this.ticks,n=e.gl,A=e._tickBounds,z=e.dataBox,x=e.viewBox,C=e.pixelRatio,B=e.screenBox,q=B[2]-B[0];B=B[3]-B[1];for(var p=x[2]-x[0],E=x[3]-x[1],F=0;2>F;++F){var L=A[F],J=.5*(z[F+2]+z[F]),H=z[F+2]-z[F];g[F]=2*(A[F+2]-L)/H;a[F]=2*(L-J)/H}g[0]*=p/q;a[0]*=p/q;g[1]*=E/
B;a[1]*=E/B;t.bind();l.bind();t.attributes.dataCoord.pointer();l=t.uniforms;l.dataShift=a;l.dataScale=g;t=e.tickMarkLength;p=e.tickMarkWidth;e=e.tickMarkColor;F=6*m[0].length;L=Math.min(b.ge(m[0],(z[0]-A[0])/(A[2]-A[0]),k),m[0].length);J=Math.min(b.gt(m[0],(z[2]-A[0])/(A[2]-A[0]),k),m[0].length);E=6*L;L=6*Math.max(0,J-L);J=Math.min(b.ge(m[1],(z[1]-A[1])/(A[3]-A[1]),k),m[1].length);m=Math.min(b.gt(m[1],(z[3]-A[1])/(A[3]-A[1]),k),m[1].length);A=F+6*J;m=6*Math.max(0,m-J);d[0]=2*(x[0]-t[1])/q-1;d[1]=
(x[3]+x[1])/B-1;c[0]=t[1]*C/q;c[1]=p[1]*C/B;m&&(l.color=e[1],l.tickScale=c,l.dataAxis=f,l.screenOffset=d,n.drawArrays(n.TRIANGLES,A,m));d[0]=(x[2]+x[0])/q-1;d[1]=2*(x[1]-t[0])/B-1;c[0]=p[0]*C/q;c[1]=t[0]*C/B;L&&(l.color=e[0],l.tickScale=c,l.dataAxis=h,l.screenOffset=d,n.drawArrays(n.TRIANGLES,E,L));d[0]=2*(x[2]+t[3])/q-1;d[1]=(x[3]+x[1])/B-1;c[0]=t[3]*C/q;c[1]=p[3]*C/B;m&&(l.color=e[3],l.tickScale=c,l.dataAxis=f,l.screenOffset=d,n.drawArrays(n.TRIANGLES,A,m));d[0]=(x[2]+x[0])/q-1;d[1]=2*(x[3]+t[2])/
B-1;c[0]=p[2]*C/q;c[1]=t[2]*C/B;L&&(l.color=e[2],l.tickScale=c,l.dataAxis=h,l.screenOffset=d,n.drawArrays(n.TRIANGLES,E,L))}}();a.update=function(){var b=[1,1,-1,-1,1,-1],a=[1,-1,1,1,-1,-1];return function(e){var f=e.ticks;e=e.bounds;for(var d=new Float32Array(18*(f[0].length+f[1].length)),c=0,g=[[],[]],h=0;2>h;++h)for(var l=g[h],k=f[h],t=e[h],m=e[h+2],n=0;n<k.length;++n){var x=(k[n].x-t)/(m-t);l.push(x);for(var C=0;6>C;++C)d[c++]=x,d[c++]=b[C],d[c++]=a[C]}this.ticks=g;this.vbo.update(d)}}();a.dispose=
function(){this.vbo.dispose();this.shader.dispose();this.tickShader.dispose()}},{"./shaders":287,"binary-search-bounds":289,"gl-buffer":244,"gl-shader":304}],286:[function(a,q,p){function n(b,a,e){this.plot=b;this.vbo=a;this.shader=e}q.exports=function(b){var a=b.gl,e=k(a,[-1,-1,-1,1,1,-1,1,1]);a=m(a,h.lineVert,h.lineFrag);return new n(b,e,a)};var k=a("gl-buffer"),m=a("gl-shader"),h=a("./shaders");a=n.prototype;a.bind=function(){var b=this.shader;this.vbo.bind();this.shader.bind();b.attributes.coord.pointer();
b.uniforms.screenBox=this.plot.screenBox};a.drawLine=function(){var b=[0,0],a=[0,0];return function(e,g,h,f,d,c){var r=this.plot,l=this.shader,k=r.gl;b[0]=e;b[1]=g;a[0]=h;a[1]=f;l.uniforms.start=b;l.uniforms.end=a;l.uniforms.width=d*r.pixelRatio;l.uniforms.color=c;k.drawArrays(k.TRIANGLE_STRIP,0,4)}}();a.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":287,"gl-buffer":244,"gl-shader":304}],287:[function(a,q,p){a=a("glslify");p=a(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d vec4(color.xyz * color.w, color.w);\n}\n"]);
q.exports={lineVert:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta \x3d normalize(perp(start - end));\n  vec2 offset \x3d mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position \x3d vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),
lineFrag:p,textVert:a(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  \x3d textCoordinate.z;\n  vec2 glyphOffset  \x3d textCoordinate.xy;\n  mat2 glyphMatrix \x3d mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate \x3d dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position \x3d vec4(screenCoordinate, 0, 1);\n}\n"]),
textFrag:p,gridVert:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos \x3d dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos +\x3d 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position \x3d vec4(pos, 0, 1);\n}\n"]),gridFrag:p,boxVert:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position \x3d vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),
tickVert:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos \x3d dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position \x3d vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:410}],288:[function(a,q,p){function n(b,a,g){this.plot=b;this.vbo=a;this.shader=g;this.tickOffset=[[],[]];this.tickX=[[],[]];this.labelOffset=[0,0];this.labelCount=
[0,0]}q.exports=function(b){var a=b.gl,e=k(a);a=m(a,g.textVert,g.textFrag);return new n(b,e,a)};var k=a("gl-buffer"),m=a("gl-shader"),h=a("text-cache"),b=a("binary-search-bounds"),g=a("./shaders");a=n.prototype;a.drawTicks=function(){var a=[0,0],g=[0,0],h=[0,0];return function(e){var d=this.plot,c=this.shader,f=this.tickX[e],l=this.tickOffset[e],k=d.gl,t=d.viewBox,m=d.dataBox,n=d.screenBox,z=d.pixelRatio,x=d.tickEnable,C=d.tickPad,B=d.tickColor,q=d.tickAngle,p=d.labelEnable,E=d.labelPad,F=d.labelColor;
d=d.labelAngle;var L=this.labelOffset[e],J=this.labelCount[e],H=b.lt(f,m[e]);f=b.le(f,m[e+2]);a[0]=a[1]=0;a[e]=1;g[e]=(t[2+e]+t[e])/(n[2+e]-n[e])-1;n=2/n[2+(e^1)]-n[e^1];g[e^1]=n*t[e^1]-1;x[e]&&(g[e^1]-=n*z*C[e],H<f&&l[f]>l[H]&&(c.uniforms.dataAxis=a,c.uniforms.screenOffset=g,c.uniforms.color=B[e],c.uniforms.angle=q[e],k.drawArrays(k.TRIANGLES,l[H],l[f]-l[H])));p[e]&&J&&(g[e^1]-=n*z*E[e],c.uniforms.dataAxis=h,c.uniforms.screenOffset=g,c.uniforms.color=F[e],c.uniforms.angle=d[e],k.drawArrays(k.TRIANGLES,
L,J));g[e^1]=n*t[2+(e^1)]-1;x[e+2]&&(g[e^1]+=n*z*C[e+2],H<f&&l[f]>l[H]&&(c.uniforms.dataAxis=a,c.uniforms.screenOffset=g,c.uniforms.color=B[e+2],c.uniforms.angle=q[e+2],k.drawArrays(k.TRIANGLES,l[H],l[f]-l[H])));p[e+2]&&J&&(g[e^1]+=n*z*E[e+2],c.uniforms.dataAxis=h,c.uniforms.screenOffset=g,c.uniforms.color=F[e+2],c.uniforms.angle=d[e+2],k.drawArrays(k.TRIANGLES,L,J))}}();a.drawTitle=function(){var b=[0,0],a=[0,0];return function(){var e=this.plot,f=this.shader,d=e.gl,c=e.screenBox,g=e.titleCenter,
h=e.titleAngle,k=e.titleColor;e=e.pixelRatio;if(this.titleCount){for(var t=0;2>t;++t)a[t]=2*(g[t]*e-c[t])/(c[2+t]-c[t])-1;f.bind();f.uniforms.dataAxis=b;f.uniforms.screenOffset=a;f.uniforms.angle=h;f.uniforms.color=k;d.drawArrays(d.TRIANGLES,this.titleOffset,this.titleCount)}}}();a.bind=function(){var b=[0,0],a=[0,0],g=[0,0];return function(){var e=this.plot,d=this.shader,c=e._tickBounds,h=e.dataBox,l=e.screenBox,k=e.viewBox;d.bind();for(var t=0;2>t;++t){var m=c[t],n=.5*(h[t+2]+h[t]),z=h[t+2]-h[t],
x=k[t+2]-k[t],C=l[t+2]-l[t];a[t]=2*(c[t+2]-m)/z*x/C;b[t]=2*(m-n)/z*x/C}g[1]=2*e.pixelRatio/(l[3]-l[1]);g[0]=g[1]*(l[3]-l[1])/(l[2]-l[0]);d.uniforms.dataScale=a;d.uniforms.dataShift=b;d.uniforms.textScale=g;this.vbo.bind();d.attributes.textCoordinate.pointer()}}();a.update=function(b){var a=[],e=b.ticks,f=b.bounds,d,c;for(c=0;2>c;++c){var g=[Math.floor(a.length/3)],k=[-Infinity],m=e[c];for(d=0;d<m.length;++d){var n=m[d];var y=n.x;var A=n.text;var z=n.font||"sans-serif";n=n.fontSize||12;for(var x=1/
(f[c+2]-f[c]),C=f[c],B=A.split("\n"),q=0;q<B.length;q++){var p=h(z,B[q]).data;for(A=0;A<p.length;A+=2)a.push(p[A]*n,-p[A+1]*n-q*n*1.2,(y-C)*x)}g.push(Math.floor(a.length/3));k.push(y)}this.tickOffset[c]=g;this.tickX[c]=k}for(c=0;2>c;++c){this.labelOffset[c]=Math.floor(a.length/3);p=h(b.labelFont[c],b.labels[c],{textAlign:"center"}).data;n=b.labelSize[c];for(d=0;d<p.length;d+=2)a.push(p[d]*n,-p[d+1]*n,0);this.labelCount[c]=Math.floor(a.length/3)-this.labelOffset[c]}this.titleOffset=Math.floor(a.length/
3);p=h(b.titleFont,b.title).data;n=b.titleSize;for(d=0;d<p.length;d+=2)a.push(p[d]*n,-p[d+1]*n,0);this.titleCount=Math.floor(a.length/3)-this.titleOffset;this.vbo.update(a)};a.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":287,"binary-search-bounds":289,"gl-buffer":244,"gl-shader":304,"text-cache":534}],289:[function(a,q,p){arguments[4][113][0].apply(p,arguments)},{dup:113}],290:[function(a,q,p){function n(b,a){this.gl=b;this.pickBuffer=a;this.screenBox=[0,0,b.drawingBufferWidth,
b.drawingBufferHeight];this.viewBox=[0,0,0,0];this.dataBox=[-10,-10,10,10];this.gridLineEnable=[!0,!0];this.gridLineWidth=[1,1];this.gridLineColor=[[0,0,0,1],[0,0,0,1]];this.pixelRatio=1;this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickEnable=[!0,!0,!0,!0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[15,15,15,15];this.labelAngle=[0,Math.PI/
2,0,3*Math.PI/2];this.labelEnable=[!0,!0,!0,!0];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.titleCenter=[0,0];this.titleEnable=!0;this.titleAngle=0;this.titleColor=[0,0,0,1];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[4,4];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderLineEnable=[!0,!0,!0,!0];this.borderLineWidth=[2,2,2,2];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.box=this.line=this.text=
this.grid=null;this.objects=[];this.overlays=[];this._tickBounds=[Infinity,Infinity,-Infinity,-Infinity];this.pickDirty=this.dirty=this.static=!1;this.pickDelay=120;this.pickRadius=10;this._pickTimeout=null;this._drawPick=this.drawPick.bind(this);this._depthCounter=0}function k(b){b=b.slice();for(var a=0;a<b.length;++a)b[a]=b[a].slice();return b}function m(b,a){return b.x-a.x}q.exports=function(a){var f=a.gl,d=h(f,[f.drawingBufferWidth,f.drawingBufferHeight]);f=new n(f,d);f.grid=b(f);f.text=g(f);
f.line=e(f);f.box=t(f);f.update(a);return f};var h=a("gl-select-static"),b=a("./lib/grid"),g=a("./lib/text"),e=a("./lib/line"),t=a("./lib/box");a=n.prototype;a.setDirty=function(){this.dirty=this.pickDirty=!0};a.setOverlayDirty=function(){this.dirty=!0};a.nextDepthValue=function(){return this._depthCounter++/65536};a.draw=function(){return function(){var b=this.gl,a=this.screenBox,d=this.viewBox,c=this.dataBox,e=this.pixelRatio,g=this.grid,h=this.line,k=this.text,t=this.objects;this._depthCounter=
0;this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay));if(this.dirty){this.dirty=!1;b.bindFramebuffer(b.FRAMEBUFFER,null);b.enable(b.SCISSOR_TEST);b.disable(b.DEPTH_TEST);b.depthFunc(b.LESS);b.depthMask(!1);b.enable(b.BLEND);b.blendEquation(b.FUNC_ADD,b.FUNC_ADD);b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA);if(this.borderColor){b.scissor(a[0],a[1],a[2]-a[0],a[3]-a[1]);var m=this.borderColor;b.clearColor(m[0]*
m[3],m[1]*m[3],m[2]*m[3],m[3]);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)}b.scissor(d[0],d[1],d[2]-d[0],d[3]-d[1]);b.viewport(d[0],d[1],d[2]-d[0],d[3]-d[1]);m=this.backgroundColor;b.clearColor(m[0]*m[3],m[1]*m[3],m[2]*m[3],m[3]);b.clear(b.COLOR_BUFFER_BIT);g.draw();m=this.zeroLineEnable;var n=this.zeroLineColor,x=this.zeroLineWidth;if(m[0]||m[1])for(h.bind(),g=0;2>g;++g)if(m[g]&&0>=c[g]&&0<=c[g+2]){var C=a[g]-c[g]*(a[g+2]-a[g])/(c[g+2]-c[g]);0===g?h.drawLine(C,a[1],C,a[3],x[g],n[g]):h.drawLine(a[0],
C,a[2],C,x[g],n[g])}for(g=0;g<t.length;++g)t[g].draw();b.viewport(a[0],a[1],a[2]-a[0],a[3]-a[1]);b.scissor(a[0],a[1],a[2]-a[0],a[3]-a[1]);this.grid.drawTickMarks();h.bind();a=this.borderLineEnable;c=this.borderLineWidth;t=this.borderLineColor;a[1]&&h.drawLine(d[0],d[1]-.5*c[1]*e,d[0],d[3]+.5*c[3]*e,c[1],t[1]);a[0]&&h.drawLine(d[0]-.5*c[0]*e,d[1],d[2]+.5*c[2]*e,d[1],c[0],t[0]);a[3]&&h.drawLine(d[2],d[1]-.5*c[1]*e,d[2],d[3]+.5*c[3]*e,c[3],t[3]);a[2]&&h.drawLine(d[0]-.5*c[0]*e,d[3],d[2]+.5*c[2]*e,d[3],
c[2],t[2]);k.bind();for(g=0;2>g;++g)k.drawTicks(g);this.titleEnable&&k.drawTitle();d=this.overlays;for(g=0;g<d.length;++g)d[g].draw();b.disable(b.SCISSOR_TEST);b.disable(b.BLEND);b.depthMask(!0)}}}();a.drawPick=function(){return function(){if(!this.static){var b=this.pickBuffer;this._pickTimeout=null;b.begin();for(var a=1,d=this.objects,c=0;c<d.length;++c)a=d[c].drawPick(a);b.end()}}}();a.pick=function(){return function(b,a){if(!this.static){var d=this.pixelRatio,c=this.pickPixelRatio,e=this.viewBox;
b=Math.round((b-e[0]/d)*c)|0;a=Math.round((a-e[1]/d)*c)|0;d=this.pickBuffer.query(b,a,this.pickRadius);if(!d)return null;d=d.id+(d.value[0]<<8)+(d.value[1]<<16)+(d.value[2]<<24);c=this.objects;for(e=0;e<c.length;++e){var f=c[e].pick(b,a,d);if(f)return f}return null}}}();a.setScreenBox=function(b){var a=this.screenBox,d=this.pixelRatio;a[0]=Math.round(b[0]*d)|0;a[1]=Math.round(b[1]*d)|0;a[2]=Math.round(b[2]*d)|0;a[3]=Math.round(b[3]*d)|0;this.setDirty()};a.setDataBox=function(b){var a=this.dataBox;
if(a[0]!==b[0]||a[1]!==b[1]||a[2]!==b[2]||a[3]!==b[3])a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],this.setDirty()};a.setViewBox=function(b){var a=this.pixelRatio,d=this.viewBox;d[0]=Math.round(b[0]*a)|0;d[1]=Math.round(b[1]*a)|0;d[2]=Math.round(b[2]*a)|0;d[3]=Math.round(b[3]*a)|0;a=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((b[2]-b[0])*a)|0,Math.round((b[3]-b[1])*a)|0];this.setDirty()};a.update=function(b){b=b||{};var a=this.gl,d=this.pixelRatio=b.pixelRatio||1;this.pickPixelRatio=Math.max(d,
1);this.setScreenBox(b.screenBox||[0,0,a.drawingBufferWidth/d,a.drawingBufferHeight/d]);this.setViewBox(b.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/d,.125*(this.screenBox[3]-this.screenBox[1])/d,.875*(this.screenBox[2]-this.screenBox[0])/d,.875*(this.screenBox[3]-this.screenBox[1])/d]);a=this.viewBox;var c=(a[2]-a[0])/(a[3]-a[1]);this.setDataBox(b.dataBox||[-10,-10/c,10,10/c]);this.borderColor=!1!==b.borderColor?(b.borderColor||[0,0,0,0]).slice():!1;this.backgroundColor=(b.backgroundColor||
[0,0,0,0]).slice();this.gridLineEnable=(b.gridLineEnable||[!0,!0]).slice();this.gridLineWidth=(b.gridLineWidth||[1,1]).slice();this.gridLineColor=k(b.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]);this.zeroLineEnable=(b.zeroLineEnable||[!0,!0]).slice();this.zeroLineWidth=(b.zeroLineWidth||[4,4]).slice();this.zeroLineColor=k(b.zeroLineColor||[[0,0,0,1],[0,0,0,1]]);this.tickMarkLength=(b.tickMarkLength||[0,0,0,0]).slice();this.tickMarkWidth=(b.tickMarkWidth||[0,0,0,0]).slice();this.tickMarkColor=k(b.tickMarkColor||
[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.titleCenter=(b.titleCenter||[.5*(a[0]+a[2])/d,(a[3]+120)/d]).slice();this.titleEnable=!("titleEnable"in b)||!!b.titleEnable;this.titleAngle=b.titleAngle||0;this.titleColor=(b.titleColor||[0,0,0,1]).slice();this.labelPad=(b.labelPad||[15,15,15,15]).slice();this.labelAngle=(b.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice();this.labelEnable=(b.labelEnable||[!0,!0,!0,!0]).slice();this.labelColor=k(b.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);
this.tickPad=(b.tickPad||[15,15,15,15]).slice();this.tickAngle=(b.tickAngle||[0,0,0,0]).slice();this.tickEnable=(b.tickEnable||[!0,!0,!0,!0]).slice();this.tickColor=k(b.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.borderLineEnable=(b.borderLineEnable||[!0,!0,!0,!0]).slice();this.borderLineWidth=(b.borderLineWidth||[2,2,2,2]).slice();this.borderLineColor=k(b.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);d=b.ticks||[[],[]];a=this._tickBounds;a[0]=a[1]=Infinity;a[2]=a[3]=
-Infinity;for(c=0;2>c;++c){var e=d[c].slice(0);0!==e.length&&(e.sort(m),a[c]=Math.min(a[c],e[0].x),a[c+2]=Math.max(a[c+2],e[e.length-1].x))}this.grid.update({bounds:a,ticks:d});this.text.update({bounds:a,ticks:d,labels:b.labels||["x","y"],labelSize:b.labelSize||[12,12],labelFont:b.labelFont||["sans-serif","sans-serif"],title:b.title||"",titleSize:b.titleSize||18,titleFont:b.titleFont||"sans-serif"});this.static=!!b.static;this.setDirty()};a.dispose=function(){this.box.dispose();this.grid.dispose();
this.text.dispose();this.line.dispose();for(var b=this.objects.length-1;0<=b;--b)this.objects[b].dispose();this.objects.length=0;for(b=this.overlays.length-1;0<=b;--b)this.overlays[b].dispose();this.overlays.length=0;this.gl=null};a.addObject=function(b){0>this.objects.indexOf(b)&&(this.objects.push(b),this.setDirty())};a.removeObject=function(b){for(var a=this.objects,d=0;d<a.length;++d)if(a[d]===b){a.splice(d,1);this.setDirty();break}};a.addOverlay=function(b){0>this.overlays.indexOf(b)&&(this.overlays.push(b),
this.setOverlayDirty())};a.removeOverlay=function(b){for(var a=this.overlays,d=0;d<a.length;++d)if(a[d]===b){a.splice(d,1);this.setOverlayDirty();break}}},{"./lib/box":284,"./lib/grid":285,"./lib/line":286,"./lib/text":288,"gl-select-static":303}],291:[function(a,q,p){q.exports=function(a,t){a=a||document.body;t=t||{};var e=[.01,Infinity];"distanceLimits"in t&&(e[0]=t.distanceLimits[0],e[1]=t.distanceLimits[1]);"zoomMin"in t&&(e[0]=t.zoomMin);"zoomMax"in t&&(e[1]=t.zoomMax);var f=k({center:t.center||
[0,0,0],up:t.up||[0,1,0],eye:t.eye||[0,0,10],mode:t.mode||"orbit",distanceLimits:e}),d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c=0,r=a.clientWidth,u=a.clientHeight,v={keyBindingMode:"rotate",enableWheel:!0,view:f,element:a,delay:t.delay||16,rotateSpeed:t.rotateSpeed||1,zoomSpeed:t.zoomSpeed||1,translateSpeed:t.translateSpeed||1,flipX:!!t.flipX,flipY:!!t.flipY,modes:f.modes,_ortho:t._ortho||t.projection&&"orthographic"===t.projection.type||!1,tick:function(){var b=n(),e=this.delay,g=b-2*e;f.idle(b-e);f.recalcMatrix(g);
f.flush(b-(100+2*e));b=!0;e=f.computedMatrix;for(g=0;16>g;++g)b=b&&d[g]===e[g],d[g]=e[g];e=a.clientWidth===r&&a.clientHeight===u;r=a.clientWidth;u=a.clientHeight;if(b)return!e;c=Math.exp(f.computedRadius[0]);return!0},lookAt:function(b,a,c){f.lookAt(f.lastT(),b,a,c)},rotate:function(b,a,c){f.rotate(f.lastT(),b,a,c)},pan:function(b,a,c){f.pan(f.lastT(),b,a,c)},translate:function(b,a,c){f.translate(f.lastT(),b,a,c)}};Object.defineProperties(v,{matrix:{get:function(){return f.computedMatrix},set:function(b){f.setMatrix(f.lastT(),
b);return f.computedMatrix},enumerable:!0},mode:{get:function(){return f.getMode()},set:function(b){var a=f.computedUp.slice(),c=f.computedEye.slice(),d=f.computedCenter.slice();f.setMode(b);"turntable"===b&&(b=n(),f._active.lookAt(b,c,d,a),f._active.lookAt(b+500,c,d,[0,0,1]),f._active.flush(b));return f.getMode()},enumerable:!0},center:{get:function(){return f.computedCenter},set:function(b){f.lookAt(f.lastT(),null,b);return f.computedCenter},enumerable:!0},eye:{get:function(){return f.computedEye},
set:function(b){f.lookAt(f.lastT(),b);return f.computedEye},enumerable:!0},up:{get:function(){return f.computedUp},set:function(b){f.lookAt(f.lastT(),null,null,b);return f.computedUp},enumerable:!0},distance:{get:function(){return c},set:function(b){f.setDistance(f.lastT(),b);return b},enumerable:!0},distanceLimits:{get:function(){return f.getDistanceLimits(e)},set:function(b){f.setDistanceLimits(b);return b},enumerable:!0}});a.addEventListener("contextmenu",function(b){b.preventDefault();return!1});
v._lastX=-1;v._lastY=-1;v._lastMods={shift:!1,control:!1,alt:!1,meta:!1};v.enableMouseListeners=function(){function d(b,d,e,g){var h=v.keyBindingMode;if(!1!==h){var k="rotate"===h,r="pan"===h;h="zoom"===h;var l=!!g.control,t=!!g.alt,m=!!g.shift,u=!!(b&1),w=!!(b&2);b=!!(b&4);var z=1/a.clientHeight,y=z*(d-v._lastX),A=z*(e-v._lastY),x=v.flipX?1:-1,p=v.flipY?1:-1,q=Math.PI*v.rotateSpeed;z=n();-1!==v._lastX&&-1!==v._lastY&&((k&&u&&!l&&!t&&!m||u&&!l&&!t&&m)&&f.rotate(z,x*q*y,-p*q*A,0),(r&&u&&!l&&!t&&!m||
w||u&&l&&!t&&!m)&&f.pan(z,-v.translateSpeed*y*c,v.translateSpeed*A*c,0),h&&u&&!l&&!t&&!m||b||u&&!l&&t&&!m)&&(k=-v.zoomSpeed*A/window.innerHeight*(z-f.lastT())*100,f.pan(z,0,0,c*(Math.exp(k)-1)));v._lastX=d;v._lastY=e;v._lastMods=g;return!0}}v.mouseListener=m(a,d);a.addEventListener("touchstart",function(c){var e=b(c.changedTouches[0],a);d(0,e[0],e[1],v._lastMods);d(1,e[0],e[1],v._lastMods);c.preventDefault()},g?{passive:!1}:!1);a.addEventListener("touchmove",function(c){var e=b(c.changedTouches[0],
a);d(1,e[0],e[1],v._lastMods);c.preventDefault()},g?{passive:!1}:!1);a.addEventListener("touchend",function(b){d(0,v._lastX,v._lastY,v._lastMods);b.preventDefault()},g?{passive:!1}:!1);v.wheelListener=h(a,function(b,a){if(!1!==v.keyBindingMode&&v.enableWheel){var d=v.flipX?1:-1,e=v.flipY?1:-1,g=n();Math.abs(b)>Math.abs(a)?f.rotate(g,0,0,-b*d*Math.PI*v.rotateSpeed/window.innerWidth):v._ortho||(b=-v.zoomSpeed*e*a/window.innerHeight*(g-f.lastT())/20,f.pan(g,0,0,c*(Math.exp(b)-1)))}},!0)};v.enableMouseListeners();
return v};var n=a("right-now"),k=a("3d-view"),m=a("mouse-change"),h=a("mouse-wheel"),b=a("mouse-event-offset"),g=a("has-passive-events")},{"3d-view":54,"has-passive-events":412,"mouse-change":436,"mouse-event-offset":437,"mouse-wheel":439,"right-now":502}],292:[function(a,q,p){p=a("glslify");var n=a("gl-shader"),k=p(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv \x3d position;\n  gl_Position \x3d vec4(position, 0, 1);\n}"]),m=p(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum \x3d texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor \x3d min(vec4(1,1,1,1), accum);\n}"]);
q.exports=function(a){return n(a,k,m,null,[{name:"position",type:"vec2"}])}},{"gl-shader":304,glslify:410}],293:[function(a,q,p){function n(){this.mouse=[-1,-1];this.screen=null;this.distance=Infinity;this.data=this.object=this.dataPosition=this.dataCoordinate=this.index=null}function k(b,a){var c=null;try{(c=b.getContext("webgl",a))||(c=b.getContext("experimental-webgl",a))}catch(z){return null}return c}function m(b){return"boolean"===typeof b?b:!0}var h=a("./camera.js"),b=a("gl-axes3d"),g=a("gl-axes3d/properties"),
e=a("gl-spikes3d"),t=a("gl-select-static"),l=a("gl-fbo"),f=a("a-big-triangle"),d=a("mouse-change"),c=a("gl-mat4/perspective"),r=a("gl-mat4/ortho"),u=a("./lib/shader"),v=a("is-mobile")({tablet:!0,featureDetect:!0});q.exports={createScene:function(a){function w(){if(!Z._stopped&&Z.autoResize){var b=B.parentNode;if(b&&b!==document.body){var a=b.clientWidth;b=b.clientHeight}else a=window.innerWidth,b=window.innerHeight;var c=Math.ceil(a*Z.pixelRatio)|0,d=Math.ceil(b*Z.pixelRatio)|0;if(c!==B.width||d!==
B.height)B.width=c,B.height=d,c=B.style,c.position=c.position||"absolute",c.left="0px",c.top="0px",c.width=a+"px",c.height=b+"px",T=!0}}function A(){for(var b=N.length,a=Q.length,c=0;c<a;++c)P[c]=0;c=0;a:for(;c<b;++c){var d=N[c],e=d.pickSlots;if(e){for(var f=0;f<a;++f)if(255>P[f]+e){O[c]=f;d.setPickBase(P[f]+1);P[f]+=e;continue a}f=t(p,ca);O[c]=a;Q.push(f);P.push(e);d.setPickBase(1);a+=1}else O[c]=-1}for(;0<a&&0===P[a-1];)P.pop(),Q.pop().dispose()}function z(){if(Z.contextLost)return!0;if(p.isContextLost()&&
(Z.contextLost=!0,Z.mouseListener.enabled=!1,Z.selection.object=null,Z.oncontextloss))Z.oncontextloss()}function x(){if(!z()){w();var b=Z.camera.tick();Y.view=Z.camera.matrix;T=T||b;V=V||b;M.pixelRatio=Z.pixelRatio;I.pixelRatio=Z.pixelRatio;b=N.length;var a=U[0],d=U[1];a[0]=a[1]=a[2]=Infinity;d[0]=d[1]=d[2]=-Infinity;for(var e=0;e<b;++e){var h=N[e];h.pixelRatio=Z.pixelRatio;h.axes=Z.axes;T=T||!!h.dirty;V=V||!!h.dirty;if(h=h.bounds){var k=h[0],l=h[1];for(h=0;3>h;++h)a[h]=Math.min(a[h],k[h]),d[h]=Math.max(d[h],
l[h])}}k=Z.bounds;if(Z.autoBounds)for(h=0;3>h;++h)d[h]<a[h]?(a[h]=-1,d[h]=1):(a[h]===d[h]&&(--a[h],d[h]+=1),e=.05*(d[h]-a[h]),a[h]-=e,d[h]+=e),k[0][h]=a[h],k[1][h]=d[h];a=!1;for(h=0;3>h;++h)a=a||X[0][h]!==k[0][h]||X[1][h]!==k[1][h],X[0][h]=k[0][h],X[1][h]=k[1][h];V=V||a;if(T=T||a){if(a){a=[0,0,0];for(e=0;3>e;++e)d=e,h=(k[1][e]-k[0][e])/10,l=Math.round(Math.log(Math.abs(h))/Math.log(10)),0>l?(l=Math.round(Math.pow(10,-l)),h=Math.ceil(h*l)/l):0<l?(l=Math.round(Math.pow(10,l)),h=Math.ceil(h/l)*l):h=
Math.ceil(h),a[d]=h;M.autoTicks?M.update({bounds:k,tickSpacing:a}):M.update({bounds:k})}a=p.drawingBufferWidth;d=p.drawingBufferHeight;ca[0]=a;ca[1]=d;R[0]=Math.max(a/Z.pixelRatio,1)|0;R[1]=Math.max(d/Z.pixelRatio,1)|0;e=Z;h=e.bounds;var t=e.cameraParams,m=t.projection;l=t.model;var u=e.zNear,n=e.zFar,v=e.fovy,y=e.gl.drawingBufferWidth/e.gl.drawingBufferHeight;J?(r(m,-y,y,-1,1,u,n),t._ortho=!0):(c(m,v,y,u,n),t._ortho=!1);for(t=0;16>t;++t)l[t]=0;l[15]=1;for(t=m=0;3>t;++t)m=Math.max(m,h[1][t]-h[0][t]);
for(t=0;3>t;++t)l[5*t]=e.autoScale?e.aspect[t]/(h[1][t]-h[0][t]):1/m,e.autoCenter&&(l[12+t]=.5*-l[5*t]*(h[0][t]+h[1][t]));for(e=0;e<b;++e)h=N[e],h.axesBounds=k,Z.clipToBounds&&(h.clipBounds=k);E.object&&(I.position=Z.snapToData?E.dataCoordinate:E.dataPosition,I.bounds=k);if(V&&(V=!1,!z()))for(p.colorMask(!0,!0,!0,!0),p.depthMask(!0),p.disable(p.BLEND),p.enable(p.DEPTH_TEST),p.depthFunc(p.LEQUAL),k=N.length,e=Q.length,h=0;h<e;++h){l=Q[h];l.shape=R;l.begin();for(t=0;t<k;++t)O[t]===h&&(m=N[t],m.drawPick&&
(m.pixelRatio=1,m.drawPick(Y)));l.end()}Z.axesPixels=g(Z.axes,Y,a,d);if(Z.onrender)Z.onrender();p.bindFramebuffer(p.FRAMEBUFFER,null);p.viewport(0,0,a,d);Z.clearRGBA();p.depthMask(!0);p.colorMask(!0,!0,!0,!0);p.enable(p.DEPTH_TEST);p.depthFunc(p.LEQUAL);p.disable(p.BLEND);p.disable(p.CULL_FACE);k=!1;M.enable&&(k=k||M.isTransparent(),M.draw(Y));I.axes=M;E.object&&I.draw(Y);p.disable(p.CULL_FACE);for(e=0;e<b;++e)h=N[e],h.axes=M,h.pixelRatio=Z.pixelRatio,h.isOpaque&&h.isOpaque()&&h.draw(Y),h.isTransparent&&
h.isTransparent()&&(k=!0);if(k){F.shape=ca;F.bind();p.clear(p.DEPTH_BUFFER_BIT);p.colorMask(!1,!1,!1,!1);p.depthMask(!0);p.depthFunc(p.LESS);M.enable&&M.isTransparent()&&M.drawTransparent(Y);for(e=0;e<b;++e)h=N[e],h.isOpaque&&h.isOpaque()&&h.draw(Y);p.enable(p.BLEND);p.blendEquation(p.FUNC_ADD);p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA);p.colorMask(!0,!0,!0,!0);p.depthMask(!1);p.clearColor(0,0,0,0);p.clear(p.COLOR_BUFFER_BIT);M.isTransparent()&&M.drawTransparent(Y);for(e=0;e<b;++e)h=N[e],h.isTransparent&&
h.isTransparent()&&h.drawTransparent(Y);p.bindFramebuffer(p.FRAMEBUFFER,null);p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA);p.disable(p.DEPTH_TEST);L.bind();F.color[0].bind(0);L.uniforms.accumBuffer=0;f(p);p.disable(p.BLEND)}T=!1;for(e=0;e<b;++e)N[e].dirty=!1}}}function C(){Z._stopped||Z.contextLost||(x(),requestAnimationFrame(C))}a=a||{};a.camera=a.camera||{};var B=a.canvas;B||(B=document.createElement("canvas"),a.container?a.container.appendChild(B):document.body.appendChild(B));var p=a.gl;p||(a.glOptions&&
(v=!!a.glOptions.preserveDrawingBuffer),p=k(B,a.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:v}));if(!p)throw Error("webgl not supported");var q=a.bounds||[[-10,-10,-10],[10,10,10]],E=new n,F=l(p,p.drawingBufferWidth,p.drawingBufferHeight,{preferFloat:!v}),L=u(p),J=a.cameraObject&&!0===a.cameraObject._ortho||a.camera.projection&&"orthographic"===a.camera.projection.type||!1,H={eye:a.camera.eye||[2,0,0],center:a.camera.center||[0,0,0],up:a.camera.up||[0,1,0],zoomMin:a.camera.zoomMax||
.1,zoomMax:a.camera.zoomMin||100,mode:a.camera.mode||"turntable",_ortho:J},K=a.axes||{},M=b(p,K);M.enable=!K.disable;var I=e(p,a.spikes||{}),N=[],O=[],P=[],Q=[],T=!0,V=!0,Y={view:null,projection:Array(16),model:Array(16),_ortho:!1};V=!0;var ca=[p.drawingBufferWidth,p.drawingBufferHeight];H=a.cameraObject||h(B,H);var Z={gl:p,contextLost:!1,pixelRatio:a.pixelRatio||1,canvas:B,selection:E,camera:H,axes:M,axesPixels:null,spikes:I,bounds:q,objects:N,shape:ca,aspect:a.aspectRatio||[1,1,1],pickRadius:a.pickRadius||
10,zNear:a.zNear||.01,zFar:a.zFar||1E3,fovy:a.fovy||Math.PI/4,clearColor:a.clearColor||[0,0,0,0],autoResize:m(a.autoResize),autoBounds:m(a.autoBounds),autoScale:!!a.autoScale,autoCenter:m(a.autoCenter),clipToBounds:m(a.clipToBounds),snapToData:!!a.snapToData,onselect:a.onselect||null,onrender:a.onrender||null,onclick:a.onclick||null,cameraParams:Y,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(b){this.aspect[0]=
b.x;this.aspect[1]=b.y;this.aspect[2]=b.z;V=!0},setBounds:function(b,a){this.bounds[0][b]=a.min;this.bounds[1][b]=a.max},setClearColor:function(b){this.clearColor=b},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]);this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},R=[p.drawingBufferWidth/Z.pixelRatio|0,p.drawingBufferHeight/Z.pixelRatio|0];Z.autoResize&&w();window.addEventListener("resize",w);Z.update=function(b){Z._stopped||
(V=T=!0)};Z.add=function(b){Z._stopped||(b.axes=M,N.push(b),O.push(-1),V=T=!0,A())};Z.remove=function(b){Z._stopped||(b=N.indexOf(b),0>b||(N.splice(b,1),O.pop(),V=T=!0,A()))};Z.dispose=function(){if(!Z._stopped&&(Z._stopped=!0,window.removeEventListener("resize",w),B.removeEventListener("webglcontextlost",z),Z.mouseListener.enabled=!1,!Z.contextLost)){M.dispose();I.dispose();for(var b=0;b<N.length;++b)N[b].dispose();F.dispose();for(b=0;b<Q.length;++b)Q[b].dispose();L.dispose();I=M=p=null;N=[]}};Z._mouseRotating=
!1;Z._prevButtons=0;Z.enableMouseListeners=function(){Z.mouseListener=d(B,function(b,a,c){if(!Z._stopped){var d=Q.length,e=N.length,f=E.object;E.distance=Infinity;E.mouse[0]=a;E.mouse[1]=c;E.object=null;E.screen=null;E.dataCoordinate=E.dataPosition=null;var g=!1;if(b&&Z._prevButtons)Z._mouseRotating=!0;else{Z._mouseRotating&&(V=!0);Z._mouseRotating=!1;for(var h=0;h<d;++h){var k=Q[h].query(a,R[1]-c-1,Z.pickRadius);if(k&&!(k.distance>E.distance))for(var r=0;r<e;++r){var l=N[r];if(O[r]===h){var t=l.pick(k);
t&&(E.buttons=b,E.screen=k.coord,E.distance=k.distance,E.object=l,E.index=t.distance,E.dataPosition=t.position,E.dataCoordinate=t.dataCoordinate,E.data=t,g=!0)}}}}f&&f!==E.object&&(f.highlight&&f.highlight(null),T=!0);E.object&&(E.object.highlight&&E.object.highlight(E.data),T=!0);if((g=g||E.object!==f)&&Z.onselect)Z.onselect(E);if(b&1&&!(Z._prevButtons&1)&&Z.onclick)Z.onclick(E);Z._prevButtons=b}})};B.addEventListener("webglcontextlost",z);var U=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,
-Infinity]],X=[U[0].slice(),U[1].slice()];Z.enableMouseListeners();C();Z.redraw=function(){Z._stopped||(T=!0,x())};return Z},createCamera:h}},{"./camera.js":291,"./lib/shader":292,"a-big-triangle":62,"gl-axes3d":236,"gl-axes3d/properties":243,"gl-fbo":252,"gl-mat4/ortho":271,"gl-mat4/perspective":272,"gl-select-static":303,"gl-spikes3d":313,"is-mobile":421,"mouse-change":436}],294:[function(a,q,p){a=a("glslify");p.pointVertex=a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a \x3d 12.9898;\n  highp float b \x3d 78.233;\n  highp float c \x3d 43758.5453;\n  highp float d \x3d dot(co.xy, vec2(a, b));\n  highp float e \x3d mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition \x3d matrix * vec3(position, 1);\n  gl_Position  \x3d vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize \x3d pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud !\x3d 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *\x3d 0.886;\n  }\n}"]);
p.pointFragment=a(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud !\x3d 0.0) { // pointCloud is truthy\n    if(centerFraction \x3d\x3d 1.0) {\n      gl_FragColor \x3d color;\n    } else {\n      gl_FragColor \x3d mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius \x3e 1.0) {\n      discard;\n    }\n    baseColor \x3d mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor \x3d vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]);
p.pickVertex=a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition \x3d matrix * vec3(position, 1);\n  gl_Position  \x3d vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize \x3d pointSize;\n\n  vec4 id \x3d pickId + pickOffset;\n  id.y +\x3d floor(id.x / 256.0);\n  id.x -\x3d floor(id.x / 256.0) * 256.0;\n\n  id.z +\x3d floor(id.y / 256.0);\n  id.y -\x3d floor(id.y / 256.0) * 256.0;\n\n  id.w +\x3d floor(id.z / 256.0);\n  id.z -\x3d floor(id.z / 256.0) * 256.0;\n\n  fragId \x3d id;\n}\n"]);
p.pickFragment=a(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius \x3e 1.0) {\n    discard;\n  }\n  gl_FragColor \x3d fragId / 255.0;\n}\n"])},{glslify:410}],295:[function(a,q,p){function n(b,a,h,k,f){this.plot=b;this.offsetBuffer=a;this.pickBuffer=h;this.shader=k;this.pickShader=f;this.sizeMin=.5;this.sizeMinCap=2;this.sizeMax=20;this.areaRatio=1;this.pointCount=0;this.color=[1,0,0,1];this.borderColor=
[0,0,0,1];this.blend=!1;this.pickOffset=0;this.points=null}var k=a("gl-shader"),m=a("gl-buffer"),h=a("typedarray-pool"),b=a("./lib/shader");q.exports=function(a,e){var g=a.gl,h=m(g),f=m(g),d=k(g,b.pointVertex,b.pointFragment);g=k(g,b.pickVertex,b.pickFragment);h=new n(a,h,f,d,g);h.update(e);a.addObject(h);return h};a=n.prototype;a.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.offsetBuffer.dispose();this.pickBuffer.dispose();this.plot.removeObject(this)};a.update=function(b){function a(a,
c){return a in b?b[a]:c}var g;b=b||{};this.sizeMin=a("sizeMin",.5);this.sizeMax=a("sizeMax",20);this.color=a("color",[1,0,0,1]).slice();this.areaRatio=a("areaRatio",1);this.borderColor=a("borderColor",[0,0,0,1]).slice();this.blend=a("blend",!1);var k=b.positions.length>>>1,f=b.positions instanceof Float32Array,d=b.idToIndex instanceof Int32Array&&b.idToIndex.length>=k,c=b.positions,r=f?c:h.mallocFloat32(c.length),m=d?b.idToIndex:h.mallocInt32(k);f||r.set(c);if(!d)for(r.set(c),g=0;g<k;g++)m[g]=g;this.points=
c;this.offsetBuffer.update(r);this.pickBuffer.update(m);f||h.free(r);d||h.free(m);this.pointCount=k;this.pickOffset=0};a.unifiedDraw=function(){var b=[1,0,0,0,1,0,0,0,1],a=[0,0,0,0];return function(e){var g=void 0!==e,f=g?this.pickShader:this.shader,d=this.plot.gl,c=this.plot.dataBox;if(0===this.pointCount)return e;var h=c[2]-c[0],k=c[3]-c[1],t=this.points,m=0,n=t.length>>>1,A;for(A=0;A<n;A++){var z=t[2*A],x=t[2*A+1];z>=c[0]&&z<=c[2]&&x>=c[1]&&x<=c[3]&&m++}t=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,
this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(m,.33333)));b[0]=2/h;b[4]=2/k;b[6]=-2*c[0]/h-1;b[7]=-2*c[1]/k-1;this.offsetBuffer.bind();f.bind();f.attributes.position.pointer();f.uniforms.matrix=b;f.uniforms.color=this.color;f.uniforms.borderColor=this.borderColor;f.uniforms.pointCloud=5>t;f.uniforms.pointSize=t;f.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio)));g&&(a[0]=e&255,a[1]=e>>8&255,a[2]=e>>16&255,a[3]=e>>24&255,this.pickBuffer.bind(),f.attributes.pickId.pointer(d.UNSIGNED_BYTE),
f.uniforms.pickOffset=a,this.pickOffset=e);g=d.getParameter(d.BLEND);f=d.getParameter(d.DITHER);g&&!this.blend&&d.disable(d.BLEND);f&&d.disable(d.DITHER);d.drawArrays(d.POINTS,0,this.pointCount);g&&!this.blend&&d.enable(d.BLEND);f&&d.enable(d.DITHER);return e+this.pointCount}}();a.draw=a.unifiedDraw;a.drawPick=a.unifiedDraw;a.pick=function(b,a,h){b=this.pickOffset;a=this.pointCount;if(h<b||h>=b+a)return null;h-=b;b=this.points;return{object:this,pointId:h,dataCoord:[b[2*h],b[2*h+1]]}}},{"./lib/shader":294,
"gl-buffer":244,"gl-shader":304,"typedarray-pool":543}],296:[function(a,q,p){q.exports=function(a,k,m,h){var b=k[0],g=k[1],e=k[2];k=k[3];var t=m[0],l=m[1],f=m[2];m=m[3];var d=b*t+g*l+e*f+k*m;0>d&&(d=-d,t=-t,l=-l,f=-f,m=-m);if(1E-6<1-d){var c=Math.acos(d);var r=Math.sin(c);d=Math.sin((1-h)*c)/r;h=Math.sin(h*c)/r}else d=1-h;a[0]=d*b+h*t;a[1]=d*g+h*l;a[2]=d*e+h*f;a[3]=d*k+h*m;return a}},{}],297:[function(a,q,p){q.exports=function(a){return a||0===a?a.toString():""}},{}],298:[function(a,q,p){var n=a("vectorize-text");
q.exports=function(a,h,b){var g=k[h];g||(g=k[h]={});if(a in g)return g[a];var e={textAlign:"center",textBaseline:"middle",lineHeight:1,font:h,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0};h=n(a,e);e.triangles=!1;e=n(a,e);var t,l;if(b&&1!==b){for(t=0;t<h.positions.length;++t)for(l=0;l<h.positions[t].length;++l)h.positions[t][l]/=b;for(t=0;t<e.positions.length;++t)for(l=0;l<e.positions[t].length;++l)e.positions[t][l]/=b}b=[[Infinity,Infinity],
[-Infinity,-Infinity]];var f=e.positions.length;for(t=0;t<f;++t){var d=e.positions[t];for(l=0;2>l;++l)b[0][l]=Math.min(b[0][l],d[l]),b[1][l]=Math.max(b[1][l],d[l])}return g[a]=[h,e,b]};var k={}},{"vectorize-text":548}],299:[function(a,q,p){function n(b,a){b=k(b,a);a=b.attributes;a.position.location=0;a.color.location=1;a.glyph.location=2;a.id.location=3;return b}var k=a("gl-shader"),m=a("glslify");a=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float scale \x3d 1.0;\n    if(distance(highlightId, id) \x3c 0.0001) {\n      scale \x3d highlightScale;\n    }\n\n    vec4 worldPosition \x3d model * vec4(position, 1);\n    vec4 viewPosition \x3d view * worldPosition;\n    viewPosition \x3d viewPosition / viewPosition.w;\n    vec4 clipPosition \x3d projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position \x3d clipPosition;\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d position;\n  }\n}"]);
q=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float scale \x3d pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) \x3c 0.001) {\n      scale *\x3d highlightScale;\n    }\n\n    vec4 worldPosition \x3d model * vec4(position, 1.0);\n    vec4 viewPosition \x3d view * worldPosition;\n    vec4 clipPosition \x3d projection * viewPosition;\n    clipPosition /\x3d clipPosition.w;\n\n    gl_Position \x3d clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d position;\n  }\n}"]);
var h=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float lscale \x3d pixelRatio * scale;\n    if(distance(highlightId, id) \x3c 0.0001) {\n      lscale *\x3d highlightScale;\n    }\n\n    vec4 clipCenter   \x3d projection * view * model * vec4(position, 1);\n    vec3 dataPosition \x3d position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition \x3d projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position \x3d clipPosition;\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d dataPosition;\n  }\n}\n"]),
b=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity \x3d\x3d 0.\n  ) discard;\n  gl_FragColor \x3d interpColor * opacity;\n}\n"]);
m=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor \x3d vec4(pickGroup, pickId.bgr);\n}"]);
var g=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],e={vertex:a,fragment:b,attributes:g},t={vertex:q,fragment:b,attributes:g},l={vertex:h,fragment:b,attributes:g},f={vertex:a,fragment:m,attributes:g},d={vertex:q,fragment:m,attributes:g},c={vertex:h,fragment:m,attributes:g};p.createPerspective=function(b){return n(b,e)};p.createOrtho=function(b){return n(b,t)};p.createProject=function(b){return n(b,l)};p.createPickPerspective=function(b){return n(b,
f)};p.createPickOrtho=function(b){return n(b,d)};p.createPickProject=function(b){return n(b,c)}},{"gl-shader":304,glslify:410}],300:[function(a,q,p){function n(b,a){var c=b[0],d=b[1],e=b[2],f=b[3];b[0]=a[0]*c+a[4]*d+a[8]*e+a[12]*f;b[1]=a[1]*c+a[5]*d+a[9]*e+a[13]*f;b[2]=a[2]*c+a[6]*d+a[10]*e+a[14]*f;b[3]=a[3]*c+a[7]*d+a[11]*e+a[15]*f;return b}function k(b,a,c,d){n(d,d,c);n(d,d,a);return n(d,d,b)}function m(b,a){this.index=b;this.dataCoordinate=this.position=a}function h(b){return!0===b||1<b?1:b}function b(b,
a,c,d,e,f,g,h,k,r,l,t){this.gl=b;this.pixelRatio=1;this.shader=a;this.orthoShader=c;this.projectShader=d;this.pointBuffer=e;this.colorBuffer=f;this.glyphBuffer=g;this.idBuffer=h;this.vao=k;this.lineVertexCount=this.vertexCount=0;this.opacity=1;this.hasAlpha=!1;this.lineWidth=0;this.projectScale=[2/3,2/3,2/3];this.projectOpacity=[1,1,1];this.projectHasAlpha=!1;this.pickId=0;this.pickPerspectiveShader=r;this.pickOrthoShader=l;this.pickProjectShader=t;this.points=[];this._selectResult=new m(0,[0,0,0]);
this.useOrtho=!0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.axesProject=[!0,!0,!0];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.highlightId=[1,1,1,1];this.highlightScale=2;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.dirty=!0}function g(b){b[0]=b[1]=b[2]=0;return b}function e(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=1;return b}function t(b,a,c,d){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[c]=d;return b}
function l(b,a,c,d,f,h,r){var l=c.gl;if(h===c.projectHasAlpha||r){for(var m=c.axesProject,u=c.gl,n=a.uniforms,w=d.model||z,y=d.view||z,A=d.projection||z,p=c.axesBounds,q=c.clipBounds,I=L,H=0;2>H;++H)for(var M=0;3>M;++M)I[H][M]=Math.max(Math.min(q[H][M],1E8),-1E8);q=c.axes&&c.axes.lastCubeProps?c.axes.lastCubeProps.axis:[1,1,1];x[0]=2/u.drawingBufferWidth;x[1]=2/u.drawingBufferHeight;a.bind();n.view=y;n.projection=A;n.screenSize=x;n.highlightId=c.highlightId;n.highlightScale=c.highlightScale;n.clipBounds=
I;n.pickGroup=c.pickId/255;n.pixelRatio=f;for(a=0;3>a;++a)if(m[a]){n.scale=c.projectScale[a];n.opacity=c.projectOpacity[a];H=E;for(var N=0;16>N;++N)H[N]=0;for(N=0;4>N;++N)H[5*N]=1;H[5*a]=0;H[12+a]=0>q[a]?p[0][a]:p[1][a];v(H,w,H);n.model=H;H=(a+1)%3;M=(a+2)%3;var K=g(C),O=g(B);K[H]=1;O[M]=1;N=k(A,y,w,e(D,K));var P=k(A,y,w,e(G,O));if(Math.abs(N[1])>Math.abs(P[1])){var ha=N;N=P;P=ha;ha=K;K=O;O=ha;ha=H;H=M;M=ha}0>N[0]&&(K[H]=-1);0<P[1]&&(O[M]=-1);for(N=ha=P=0;4>N;++N)P+=Math.pow(w[4*H+N],2),ha+=Math.pow(w[4*
M+N],2);K[H]/=Math.sqrt(P);O[M]/=Math.sqrt(ha);n.axes[0]=K;n.axes[1]=O;n.fragClipBounds[0]=t(F,I[0],a,-1E8);n.fragClipBounds[1]=t(F,I[1],a,1E8);c.vao.bind();c.vao.draw(u.TRIANGLES,c.vertexCount);0<c.lineWidth&&(u.lineWidth(c.lineWidth*f),c.vao.draw(u.LINES,c.lineVertexCount,c.vertexCount));c.vao.unbind()}}if(h===c.hasAlpha||r)b.bind(),b=b.uniforms,b.model=d.model||z,b.view=d.view||z,b.projection=d.projection||z,x[0]=2/l.drawingBufferWidth,x[1]=2/l.drawingBufferHeight,b.screenSize=x,b.highlightId=
c.highlightId,b.highlightScale=c.highlightScale,b.fragClipBounds=J,b.clipBounds=c.axes.bounds,b.opacity=c.opacity,b.pickGroup=c.pickId/255,b.pixelRatio=f,c.vao.bind(),c.vao.draw(l.TRIANGLES,c.vertexCount),0<c.lineWidth&&(l.lineWidth(c.lineWidth*f),c.vao.draw(l.LINES,c.lineVertexCount,c.vertexCount)),c.vao.unbind()}function f(b,a,c,e){a=Array.isArray(b)?a<b.length?b[a]:void 0:b;a=A(a);b=!0;d(a)&&(a="",b=!1);c=y(a,c,e);return{mesh:c[0],lines:c[1],bounds:c[2],visible:b}}var d=a("is-string-blank"),c=
a("gl-buffer"),r=a("gl-vao"),u=a("typedarray-pool"),v=a("gl-mat4/multiply"),w=a("./lib/shaders"),y=a("./lib/glyphs"),A=a("./lib/get-simple-string"),z=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];q.exports=function(a){var d=a.gl,e=w.createPerspective(d),f=w.createOrtho(d),g=w.createProject(d),h=w.createPickPerspective(d),k=w.createPickOrtho(d),l=w.createPickProject(d),t=c(d),m=c(d),u=c(d),n=c(d),v=r(d,[{buffer:t,size:3,type:d.FLOAT},{buffer:m,size:4,type:d.FLOAT},{buffer:u,size:2,type:d.FLOAT},{buffer:n,size:4,
type:d.UNSIGNED_BYTE,normalized:!0}]);d=new b(d,e,f,g,t,m,u,n,v,h,k,l);d.update(a);return d};a=b.prototype;a.pickSlots=1;a.setPickBase=function(b){this.pickId=b};a.isTransparent=function(){if(this.hasAlpha)return!0;for(var b=0;3>b;++b)if(this.axesProject[b]&&this.projectHasAlpha)return!0;return!1};a.isOpaque=function(){if(!this.hasAlpha)return!0;for(var b=0;3>b;++b)if(this.axesProject[b]&&!this.projectHasAlpha)return!0;return!1};var x=[0,0],C=[0,0,0],B=[0,0,0],D=[0,0,0,1],G=[0,0,0,1],E=z.slice(),
F=[0,0,0],L=[[0,0,0],[0,0,0]],J=[[-1E8,-1E8,-1E8],[1E8,1E8,1E8]];a.draw=function(b){l(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,b,this.pixelRatio,!1,!1)};a.drawTransparent=function(b){l(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,b,this.pixelRatio,!0,!1)};a.drawPick=function(b){l(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,b,1,!0,!0)};a.pick=function(b){if(!b||b.id!==this.pickId)return null;var a=b.value[2]+
(b.value[1]<<8)+(b.value[0]<<16);if(a>=this.pointCount||0>a)return null;b=this.points[a];var c=this._selectResult;c.index=a;for(a=0;3>a;++a)c.position[a]=c.dataCoordinate[a]=b[a];return c};a.highlight=function(b){b?(b=b.index,this.highlightId=[(b&255)/255,(b>>8&255)/255,(b>>16&255)/255,0]):this.highlightId=[1,1,1,1]};a.update=function(b){b=b||{};"perspective"in b&&(this.useOrtho=!b.perspective);"orthographic"in b&&(this.useOrtho=!!b.orthographic);"lineWidth"in b&&(this.lineWidth=b.lineWidth);if("project"in
b)if(Array.isArray(b.project))this.axesProject=b.project;else{var a=!!b.project;this.axesProject=[a,a,a]}"projectScale"in b&&(Array.isArray(b.projectScale)?this.projectScale=b.projectScale.slice():(a=+b.projectScale,this.projectScale=[a,a,a]));this.projectHasAlpha=!1;if("projectOpacity"in b){Array.isArray(b.projectOpacity)?this.projectOpacity=b.projectOpacity.slice():(a=+b.projectOpacity,this.projectOpacity=[a,a,a]);for(var c=0;3>c;++c)this.projectOpacity[c]=h(this.projectOpacity[c]),1>this.projectOpacity[c]&&
(this.projectHasAlpha=!0)}this.hasAlpha=!1;"opacity"in b&&(this.opacity=h(b.opacity),1>this.opacity&&(this.hasAlpha=!0));this.dirty=!0;a=b.position;var d=b.font||"normal",e=b.alignment||[0,0];if(2===e.length){var g=e[0];var k=e[1]}else for(g=[],k=[],c=0;c<e.length;++c)g[c]=e[c][0],k[c]=e[c][1];e=[Infinity,Infinity,Infinity];var r=[-Infinity,-Infinity,-Infinity],l=b.glyph,t=b.color,m=b.size,n=b.angle;b=b.lineColor;var v=-1,w=0,z=0,y=0;if(a.length)a:for(y=a.length,c=0;c<y;++c){for(var A=a[c],x=0;3>
x;++x)if(isNaN(A[x])||!isFinite(A[x]))continue a;var B=f(l,c,d,this.pixelRatio),p=B.mesh,C=B.lines;w+=3*p.cells.length;z+=2*C.edges.length}c=w+z;var q=u.mallocFloat(3*c),D=u.mallocFloat(4*c),E=u.mallocFloat(2*c),G=u.mallocUint32(c);if(0<c){var H=0,J=w,F=[0,0,0,1],L=[0,0,0,1],ya=Array.isArray(t)&&Array.isArray(t[0]),sa=Array.isArray(b)&&Array.isArray(b[0]);c=0;a:for(;c<y;++c){v+=1;A=a[c];for(x=0;3>x;++x){if(isNaN(A[x])||!isFinite(A[x]))continue a;r[x]=Math.max(r[x],A[x]);e[x]=Math.min(e[x],A[x])}B=
f(l,c,d,this.pixelRatio);p=B.mesh;C=B.lines;var W=B.bounds;var za=B.visible;if(za)if(Array.isArray(t))if(B=ya?c<t.length?t[c]:[0,0,0,0]:t,3===B.length){for(x=0;3>x;++x)F[x]=B[x];F[3]=1}else{if(4===B.length){for(x=0;4>x;++x)F[x]=B[x];!this.hasAlpha&&1>B[3]&&(this.hasAlpha=!0)}}else F[0]=F[1]=F[2]=0,F[3]=1;else F=[1,1,1,0];if(za)if(Array.isArray(b))if(B=sa?c<b.length?b[c]:[0,0,0,0]:b,3===B.length){for(x=0;3>x;++x)L[x]=B[x];L[x]=1}else{if(4===B.length){for(x=0;4>x;++x)L[x]=B[x];!this.hasAlpha&&1>B[3]&&
(this.hasAlpha=!0)}}else L[0]=L[1]=L[2]=0,L[3]=1;else L=[1,1,1,0];B=.5;za?Array.isArray(m)?B=c<m.length?+m[c]:12:m?B=+m:this.useOrtho&&(B=12):B=0;A=0;Array.isArray(n)?A=c<n.length?+n[c]:0:n&&(A=+n);za=Math.cos(A);var Da=Math.sin(A);A=a[c];for(x=0;3>x;++x)r[x]=Math.max(r[x],A[x]),e[x]=Math.min(e[x],A[x]);x=0;Array.isArray(g)?x=c<g.length?g[c]:0:g&&(x=g);var ra=0;Array.isArray(k)?ra=c<k.length?k[c]:0:k&&(ra=k);x*=0<x?1-W[0][0]:0>x?1+W[1][0]:1;ra*=0<ra?1-W[0][1]:0>ra?1+W[1][1]:1;W=[x,ra];ra=p.cells||
[];p=p.positions||[];for(x=0;x<ra.length;++x)for(var ua=ra[x],Aa=0;3>Aa;++Aa){for(var wa=0;3>wa;++wa)q[3*H+wa]=A[wa];for(wa=0;4>wa;++wa)D[4*H+wa]=F[wa];G[H]=v;wa=p[ua[Aa]];E[2*H]=B*(za*wa[0]-Da*wa[1]+W[0]);E[2*H+1]=B*(Da*wa[0]+za*wa[1]+W[1]);H+=1}ra=C.edges;p=C.positions;for(x=0;x<ra.length;++x)for(ua=ra[x],Aa=0;2>Aa;++Aa){for(wa=0;3>wa;++wa)q[3*J+wa]=A[wa];for(wa=0;4>wa;++wa)D[4*J+wa]=L[wa];G[J]=v;wa=p[ua[Aa]];E[2*J]=B*(za*wa[0]-Da*wa[1]+W[0]);E[2*J+1]=B*(Da*wa[0]+za*wa[1]+W[1]);J+=1}}}this.bounds=
[e,r];this.points=a;this.pointCount=a.length;this.vertexCount=w;this.lineVertexCount=z;this.pointBuffer.update(q);this.colorBuffer.update(D);this.glyphBuffer.update(E);this.idBuffer.update(G);u.free(q);u.free(D);u.free(E);u.free(G)};a.dispose=function(){this.shader.dispose();this.orthoShader.dispose();this.pickPerspectiveShader.dispose();this.pickOrthoShader.dispose();this.vao.dispose();this.pointBuffer.dispose();this.colorBuffer.dispose();this.glyphBuffer.dispose();this.idBuffer.dispose()}},{"./lib/get-simple-string":297,
"./lib/glyphs":298,"./lib/shaders":299,"gl-buffer":244,"gl-mat4/multiply":270,"gl-vao":329,"is-string-blank":424,"typedarray-pool":543}],301:[function(a,q,p){a=a("glslify");p.boxVertex=a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position \x3d vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]);p.boxFragment=a(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor \x3d color;\n}\n"])},
{glslify:410}],302:[function(a,q,p){function n(b,a,e){this.plot=b;this.boxBuffer=a;this.boxShader=e;this.enabled=!0;this.selectBox=[Infinity,Infinity,-Infinity,-Infinity];this.borderColor=[0,0,0,1];this.innerFill=!1;this.innerColor=[0,0,0,.25];this.outerFill=!0;this.outerColor=[0,0,0,.5];this.borderWidth=10}var k=a("gl-shader"),m=a("gl-buffer"),h=a("./lib/shaders");q.exports=function(b,a){var e=b.gl,g=m(e,[0,0,0,1,1,0,1,1]);e=k(e,h.boxVertex,h.boxFragment);g=new n(b,g,e);g.update(a);b.addOverlay(g);
return g};a=n.prototype;a.draw=function(){if(this.enabled){var b=this.plot,a=this.selectBox,e=this.borderWidth,h=this.innerColor,k=this.outerColor,f=this.borderColor,d=b.box,c=b.screenBox,r=b.dataBox,m=b.viewBox,n=b.pixelRatio;b=(a[0]-r[0])*(m[2]-m[0])/(r[2]-r[0])+m[0];var w=(a[1]-r[1])*(m[3]-m[1])/(r[3]-r[1])+m[1],y=(a[2]-r[0])*(m[2]-m[0])/(r[2]-r[0])+m[0];a=(a[3]-r[1])*(m[3]-m[1])/(r[3]-r[1])+m[1];b=Math.max(b,m[0]);w=Math.max(w,m[1]);y=Math.min(y,m[2]);a=Math.min(a,m[3]);y<b||a<w||(d.bind(),m=
c[2]-c[0],c=c[3]-c[1],this.outerFill&&(d.drawBox(0,0,m,w,k),d.drawBox(0,w,b,a,k),d.drawBox(0,a,m,c,k),d.drawBox(y,w,m,a,k)),this.innerFill&&d.drawBox(b,w,y,a,h),0<e&&(e*=n,d.drawBox(b-e,w-e,y+e,w+e,f),d.drawBox(b-e,a-e,y+e,a+e,f),d.drawBox(b-e,w-e,b+e,a+e,f),d.drawBox(y-e,w-e,y+e,a+e,f)))}};a.update=function(b){b=b||{};this.innerFill=!!b.innerFill;this.outerFill=!!b.outerFill;this.innerColor=(b.innerColor||[0,0,0,.5]).slice();this.outerColor=(b.outerColor||[0,0,0,.5]).slice();this.borderColor=(b.borderColor||
[0,0,0,1]).slice();this.borderWidth=b.borderWidth||0;this.selectBox=(b.selectBox||this.selectBox).slice()};a.dispose=function(){this.boxBuffer.dispose();this.boxShader.dispose();this.plot.removeOverlay(this)}},{"./lib/shaders":301,"gl-buffer":244,"gl-shader":304}],303:[function(a,q,p){function n(b,a,e,d,c){this.coord=[b,a];this.id=e;this.value=d;this.distance=c}function k(b,a,e){this.gl=b;this.fbo=a;this.buffer=e;this._readTimeout=null;var d=this;this._readCallback=function(){d.gl&&(a.bind(),b.readPixels(0,
0,a.shape[0],a.shape[1],b.RGBA,b.UNSIGNED_BYTE,d.buffer),d._readTimeout=null)}}q.exports=function(b,a){var e=a[0],d=a[1];a=m(b,e,d,{});e=h.mallocUint8(e*d*4);return new k(b,a,e)};var m=a("gl-fbo"),h=a("typedarray-pool"),b=a("ndarray"),g=a("bit-twiddle").nextPow2,e=a("cwise/lib/wrapper")({args:["array",{offset:[0,0,1],array:0},{offset:[0,0,2],array:0},{offset:[0,0,3],array:0},"scalar","scalar","index"],pre:{body:"{this_closestD2\x3d1e8,this_closestX\x3d-1,this_closestY\x3d-1}",args:[],thisVars:["this_closestD2",
"this_closestX","this_closestY"],localVars:[]},body:{body:"{if(_inline_16_arg0_\x3c255||_inline_16_arg1_\x3c255||_inline_16_arg2_\x3c255||_inline_16_arg3_\x3c255){var _inline_16_l\x3d_inline_16_arg4_-_inline_16_arg6_[0],_inline_16_a\x3d_inline_16_arg5_-_inline_16_arg6_[1],_inline_16_f\x3d_inline_16_l*_inline_16_l+_inline_16_a*_inline_16_a;_inline_16_f\x3cthis_closestD2\x26\x26(this_closestD2\x3d_inline_16_f,this_closestX\x3d_inline_16_arg6_[0],this_closestY\x3d_inline_16_arg6_[1])}}",args:[{name:"_inline_16_arg0_",
lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg4_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg6_",lvalue:!1,rvalue:!0,count:4}],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:["_inline_16_a","_inline_16_f","_inline_16_l"]},post:{body:"{return[this_closestX,this_closestY,this_closestD2]}",
args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});a=k.prototype;Object.defineProperty(a,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(b){if(this.gl){this.fbo.shape=b;var a=this.fbo.shape[0],e=this.fbo.shape[1];if(e*a*4>this.buffer.length){h.free(this.buffer);for(var d=this.buffer=h.mallocUint8(g(e*a*4)),c=0;c<e*a*4;++c)d[c]=255}return b}}});a.begin=function(){var b=this.gl;b&&(this.fbo.bind(),
b.clearColor(1,1,1,1),b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT))};a.end=function(){var b=this.gl;b&&(b.bindFramebuffer(b.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))};a.query=function(a,g,f){if(!this.gl)return null;var d=this.fbo.shape.slice();a|=0;g|=0;"number"!==typeof f&&(f=1);var c=Math.min(Math.max(a-f,0),d[0])|0,h=Math.min(Math.max(a+f,0),d[0])|0;a=Math.min(Math.max(g-f,0),d[1])|0;g=Math.min(Math.max(g+f,0),d[1])|
0;if(h<=c||g<=a)return null;g=[h-c,g-a];d=b(this.buffer,[g[0],g[1],4],[4,4*d[0],1],4*(c+d[0]*a));f=e(d.hi(g[0],g[1],1),f,f);g=f[0];h=f[1];if(0>g||Math.pow(this.radius,2)<f[2])return null;var k=d.get(g,h,0),l=d.get(g,h,1),t=d.get(g,h,2);d=d.get(g,h,3);return new n(g+c|0,h+a|0,k,[l,t,d],Math.sqrt(f[2]))};a.dispose=function(){this.gl&&(this.fbo.dispose(),h.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":94,"cwise/lib/wrapper":151,"gl-fbo":252,ndarray:451,
"typedarray-pool":543}],304:[function(a,q,p){function n(b){this.gl=b;this.gl.lastAttribCount=0;this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function k(b,a){return b.name<a.name?-1:1}var m=a("./lib/create-uniforms"),h=a("./lib/create-attributes"),b=a("./lib/reflect"),g=a("./lib/shader-cache"),e=a("./lib/runtime-reflect"),t=a("./lib/GLError");a=n.prototype;a.bind=function(){this.program||this._relink();var b,a=this.gl.getProgramParameter(this.program,
this.gl.ACTIVE_ATTRIBUTES),d=this.gl.lastAttribCount;if(a>d)for(b=d;b<a;b++)this.gl.enableVertexAttribArray(b);else if(d>a)for(b=a;b<d;b++)this.gl.disableVertexAttribArray(b);this.gl.lastAttribCount=a;this.gl.useProgram(this.program)};a.dispose=function(){for(var b=this.gl.lastAttribCount,a=0;a<b;a++)this.gl.disableVertexAttribArray(a);this.gl.lastAttribCount=0;this._fref&&this._fref.dispose();this._vref&&this._vref.dispose();this.attributes=this.types=this.vertShader=this.fragShader=this.program=
this._relink=this._fref=this._vref=null};a.update=function(a,f,d,c){function r(){n.program=g.program(w,n._vref,n._fref,y,A);for(var b=0;b<d.length;++b)G[b]=w.getUniformLocation(n.program,d[b].name)}if(!f||1===arguments.length){var l=a;a=l.vertex;f=l.fragment;d=l.uniforms;c=l.attributes}var n=this,w=n.gl;l=n._vref;n._vref=g.shader(w,w.VERTEX_SHADER,a);l&&l.dispose();n.vertShader=n._vref.shader;l=this._fref;n._fref=g.shader(w,w.FRAGMENT_SHADER,f);l&&l.dispose();n.fragShader=n._fref.shader;if(!d||!c){l=
w.createProgram();w.attachShader(l,n.fragShader);w.attachShader(l,n.vertShader);w.linkProgram(l);if(!w.getProgramParameter(l,w.LINK_STATUS))throw l=w.getProgramInfoLog(l),new t(l,"Error linking program:"+l);d=d||e.uniforms(w,l);c=c||e.attributes(w,l);w.deleteProgram(l)}c=c.slice();c.sort(k);l=[];var y=[],A=[],z;for(z=0;z<c.length;++z){var x=c[z];if(0<=x.type.indexOf("mat")){for(var p=x.type.charAt(x.type.length-1)|0,B=Array(p),q=0;q<p;++q)B[q]=A.length,y.push(x.name+"["+q+"]"),"number"===typeof x.location?
A.push(x.location+q):Array.isArray(x.location)&&x.location.length===p&&"number"===typeof x.location[q]?A.push(x.location[q]|0):A.push(-1);l.push({name:x.name,type:x.type,locations:B})}else l.push({name:x.name,type:x.type,locations:[A.length]}),y.push(x.name),"number"===typeof x.location?A.push(x.location|0):A.push(-1)}for(z=x=0;z<A.length;++z)if(0>A[z]){for(;0<=A.indexOf(x);)x+=1;A[z]=x}var G=Array(d.length);r();n._relink=r;n.types={uniforms:b(d),attributes:b(c)};n.attributes=h(w,n,l,A);Object.defineProperty(n,
"uniforms",m(w,n,d,G))};q.exports=function(b,a,d,c,e){b=new n(b);b.update(a,d,c,e);return b}},{"./lib/GLError":305,"./lib/create-attributes":306,"./lib/create-uniforms":307,"./lib/reflect":308,"./lib/runtime-reflect":309,"./lib/shader-cache":310}],305:[function(a,q,p){function n(a,m,h){this.shortMessage=m||"";this.longMessage=h||"";this.rawError=a||"";this.message="gl-shader: "+(m||a||"")+(h?"\n"+h:"");this.stack=Error().stack}n.prototype=Error();n.prototype.name="GLError";n.prototype.constructor=
n;q.exports=n},{}],306:[function(a,q,p){function n(b,a,e,h,k,f){this._gl=b;this._wrapper=a;this._index=e;this._locations=h;this._dimension=k;this._constFunc=f}function k(b,a,e,h,k,f,d){for(var c=["gl","v"],g=[],l=0;l<k;++l)c.push("x"+l),g.push("x"+l);c.push("if(x0.length\x3d\x3d\x3dvoid 0){return gl.vertexAttrib"+k+"f(v,"+g.join()+")}else{return gl.vertexAttrib"+k+"fv(v,x0)}");var t=Function.apply(null,c),m=new n(b,a,e,h,k,t);Object.defineProperty(f,d,{set:function(a){b.disableVertexAttribArray(h[e]);
t(b,h[e],a);return a},get:function(){return m},enumerable:!0})}function m(b,a,e,h,l,f,d){for(var c=Array(l),g=Array(l),t=0;t<l;++t)k(b,a,e[t],h,l,c,t),g[t]=c[t];Object.defineProperty(c,"location",{set:function(b){if(Array.isArray(b))for(var a=0;a<l;++a)g[a].location=b[a];else for(a=0;a<l;++a)g[a].location=b+a;return b},get:function(){for(var b=Array(l),a=0;a<l;++a)b[a]=h[e[a]];return b},enumerable:!0});c.pointer=function(a,c,d,f){a=a||b.FLOAT;c=!!c;d=d||l*l;f=f||0;for(var g=0;g<l;++g){var k=h[e[g]];
b.vertexAttribPointer(k,l,a,c,d,f+g*l);b.enableVertexAttribArray(k)}};var m=Array(l),n=b["vertexAttrib"+l+"fv"];Object.defineProperty(f,d,{set:function(a){for(var c=0;c<l;++c){var d=h[e[c]];b.disableVertexAttribArray(d);if(Array.isArray(a[0]))n.call(b,d,a[c]);else{for(var f=0;f<l;++f)m[f]=a[l*c+f];n.call(b,d,m)}}return a},get:function(){return c},enumerable:!0})}q.exports=function(b,a,e,t){for(var g={},f=0,d=e.length;f<d;++f){var c=e[f],r=c.name,u=c.type;c=c.locations;switch(u){case "bool":case "int":case "float":k(b,
a,c[0],t,1,g,r);break;default:if(0<=u.indexOf("vec")){var n=u.charCodeAt(u.length-1)-48;if(2>n||4<n)throw new h("","Invalid data type for attribute "+r+": "+u);k(b,a,c[0],t,n,g,r)}else if(0<=u.indexOf("mat")){n=u.charCodeAt(u.length-1)-48;if(2>n||4<n)throw new h("","Invalid data type for attribute "+r+": "+u);m(b,a,c,t,n,g,r)}else throw new h("","Unknown data type for attribute "+r+": "+u);}}return g};var h=a("./GLError");a=n.prototype;a.pointer=function(b,a,e,h){var g=this._gl,f=this._locations[this._index];
g.vertexAttribPointer(f,this._dimension,b||g.FLOAT,!!a,e||0,h||0);g.enableVertexAttribArray(f)};a.set=function(b,a,e,h){return this._constFunc(this._locations[this._index],b,a,e,h)};Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(b){b!==this._locations[this._index]&&(this._locations[this._index]=b|0,this._wrapper.program=null);return b|0}})},{"./GLError":305}],307:[function(a,q,p){function n(b){return(new Function("y","return function(){return y}"))(b)}
function k(b,a){for(var e=Array(b),g=0;g<b;++g)e[g]=a;return e}var m=a("./reflect"),h=a("./GLError");q.exports=function(b,a,e,t){function g(b,a,c){switch(c){case "bool":case "int":case "sampler2D":case "samplerCube":return"gl.uniform1i(locations["+a+"],obj"+b+")";case "float":return"gl.uniform1f(locations["+a+"],obj"+b+")";default:var d=c.indexOf("vec");if(0<=d&&1>=d&&c.length===4+d){d=c.charCodeAt(c.length-1)-48;if(2>d||4<d)throw new h("","Invalid data type");switch(c.charAt(0)){case "b":case "i":return"gl.uniform"+
d+"iv(locations["+a+"],obj"+b+")";case "v":return"gl.uniform"+d+"fv(locations["+a+"],obj"+b+")";default:throw new h("","Unrecognized data type for vector "+name+": "+c);}}else{if(0===c.indexOf("mat")&&4===c.length){d=c.charCodeAt(c.length-1)-48;if(2>d||4<d)throw new h("","Invalid uniform dimension type for matrix "+name+": "+c);return"gl.uniformMatrix"+d+"fv(locations["+a+"],false,obj"+b+")"}throw new h("","Unknown uniform data type for "+name+": "+c);}}}function f(b,a){if("object"!==typeof a)return[[b,
a]];var c=[],d;for(d in a){var e=a[d],g=b;g=parseInt(d)+""===d?g+("["+d+"]"):g+("."+d);"object"===typeof e?c.push.apply(c,f(g,e)):c.push([g,e])}return c}function d(a){var c=["return function updateProperty(obj){"];a=f("",a);for(var d=0;d<a.length;++d){var h=a[d],k=h[0];h=h[1];t[h]&&c.push(g(k,h,e[h].type))}c.push("return obj}");return(new Function("gl","locations",c.join("\n")))(b,t)}function c(b){switch(b){case "bool":return!1;case "int":case "sampler2D":case "samplerCube":return 0;case "float":return 0;
default:var a=b.indexOf("vec");if(0<=a&&1>=a&&b.length===4+a){a=b.charCodeAt(b.length-1)-48;if(2>a||4<a)throw new h("","Invalid data type");return"b"===b.charAt(0)?k(a,!1):k(a,0)}if(0===b.indexOf("mat")&&4===b.length){a=b.charCodeAt(b.length-1)-48;if(2>a||4<a)throw new h("","Invalid uniform dimension type for matrix "+name+": "+b);return k(a*a,0)}throw new h("","Unknown uniform data type for "+name+": "+b);}}function r(f,g,h){if("object"===typeof h){var k=u(h);Object.defineProperty(f,g,{get:n(k),
set:d(h),enumerable:!0,configurable:!1})}else t[h]?Object.defineProperty(f,g,{get:(new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+h+"])}"))(b,a,t),set:d(h),enumerable:!0,configurable:!1}):f[g]=c(e[h].type)}function u(b){if(Array.isArray(b)){var a=Array(b.length);for(var c=0;c<b.length;++c)r(a,c,b[c])}else for(c in a={},b)r(a,c,b[c]);return a}var v=m(e,!0);return{get:n(u(v)),set:d(v),enumerable:!0,configurable:!0}}},{"./GLError":305,"./reflect":308}],
308:[function(a,q,p){q.exports=function(a,k){for(var m={},h=0;h<a.length;++h)for(var b=a[h].name.split("."),g=m,e=0;e<b.length;++e){var t=b[e].split("[");if(1<t.length){t[0]in g||(g[t[0]]=[]);g=g[t[0]];for(var l=1;l<t.length;++l){var f=parseInt(t[l]);l<t.length-1||e<b.length-1?(f in g||(g[f]=l<t.length-1?[]:{}),g=g[f]):g[f]=k?h:a[h].type}}else e<b.length-1?(t[0]in g||(g[t[0]]={}),g=g[t[0]]):g[t[0]]=k?h:a[h].type}return m}},{}],309:[function(a,q,p){function n(a,b){if(!m){var g=Object.keys(k);m={};
for(var e=0;e<g.length;++e){var h=g[e];m[a[h]]=k[h]}}return m[b]}p.uniforms=function(a,b){for(var g=a.getProgramParameter(b,a.ACTIVE_UNIFORMS),e=[],h=0;h<g;++h){var k=a.getActiveUniform(b,h);if(k){var f=n(a,k.type);if(1<k.size)for(var d=0;d<k.size;++d)e.push({name:k.name.replace("[0]","["+d+"]"),type:f});else e.push({name:k.name,type:f})}}return e};p.attributes=function(a,b){for(var g=a.getProgramParameter(b,a.ACTIVE_ATTRIBUTES),e=[],h=0;h<g;++h){var k=a.getActiveAttrib(b,h);k&&e.push({name:k.name,
type:n(a,k.type)})}return e};var k={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},m=null},{}],310:[function(a,q,p){function n(b,a,e,d,c,g,h){this.id=b;this.src=a;this.type=e;this.shader=d;this.count=g;this.programs=[];this.cache=h}function k(b){this.gl=
b;this.shaders=[{},{}];this.programs={}}function m(b){var a=g.get(b);a||(a=new k(b),g.set(b,a));return a}p.shader=function(b,a,e){return m(b).getShaderReference(a,e)};p.program=function(b,a,e,d,c){return m(b).getProgram(a,e,d,c)};var h=a("./GLError"),b=a("gl-format-compiler-error"),g=new ("undefined"===typeof WeakMap?a("weakmap-shim"):WeakMap),e=0;n.prototype.dispose=function(){if(0===--this.count){for(var b=this.cache,a=b.gl,e=this.programs,d=0,c=e.length;d<c;++d){var g=b.programs[e[d]];g&&(delete b.programs[d],
a.deleteProgram(g))}a.deleteShader(this.shader);delete b.shaders[this.type===a.FRAGMENT_SHADER|0][this.src]}};a=k.prototype;a.getShaderReference=function(a,g){var f=this.gl,d=this.shaders[a===f.FRAGMENT_SHADER|0],c=d[g];if(c&&f.isShader(c.shader))c.count+=1;else{c=f.createShader(a);f.shaderSource(c,g);f.compileShader(c);if(!f.getShaderParameter(c,f.COMPILE_STATUS)){f=f.getShaderInfoLog(c);try{var k=b(f,g,a)}catch(u){throw console.warn("Failed to format compiler error: "+u),new h(f,"Error compiling shader:\n"+
f);}throw new h(f,k.short,k.long);}c=d[g]=new n(e++,g,a,c,[],1,this)}return c};a.getProgram=function(b,a,e,d){var c=[b.id,a.id,e.join(":"),d.join(":")].join("@"),f=this.programs[c];if(!f||!this.gl.isProgram(f)){f=this.programs;var g=this.gl,k=b.shader,l=a.shader,t=g.createProgram();g.attachShader(t,k);g.attachShader(t,l);for(k=0;k<e.length;++k)g.bindAttribLocation(t,d[k],e[k]);g.linkProgram(t);if(!g.getProgramParameter(t,g.LINK_STATUS))throw b=g.getProgramInfoLog(t),new h(b,"Error linking program: "+
b);f[c]=f=t;b.programs.push(c);a.programs.push(c)}return f}},{"./GLError":305,"gl-format-compiler-error":253,"weakmap-shim":553}],311:[function(a,q,p){function n(a){this.plot=a;this.enable=[!0,!0,!1,!1];this.width=[1,1,1,1];this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.center=[Infinity,Infinity]}q.exports=function(a,m){var h=new n(a);h.update(m);a.addOverlay(h);return h};a=n.prototype;a.update=function(a){a=a||{};this.enable=(a.enable||[!0,!0,!1,!1]).slice();this.width=(a.width||[1,1,
1,1]).slice();this.color=(a.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(a){return a.slice()});this.center=(a.center||[Infinity,Infinity]).slice();this.plot.setOverlayDirty()};a.draw=function(){var a=this.enable,m=this.width,h=this.color,b=this.center,g=this.plot,e=g.line,t=g.dataBox;g=g.viewBox;e.bind();if(t[0]<=b[0]&&b[0]<=t[2]&&t[1]<=b[1]&&b[1]<=t[3]){var l=g[0]+(b[0]-t[0])/(t[2]-t[0])*(g[2]-g[0]);b=g[1]+(b[1]-t[1])/(t[3]-t[1])*(g[3]-g[1]);a[0]&&e.drawLine(l,b,g[0],b,m[0],h[0]);
a[1]&&e.drawLine(l,b,l,g[1],m[1],h[1]);a[2]&&e.drawLine(l,b,g[2],b,m[2],h[2]);a[3]&&e.drawLine(l,b,l,g[3],m[3],h[3])}};a.dispose=function(){this.plot.removeOverlay(this)}},{}],312:[function(a,q,p){p=a("glslify");var n=a("gl-shader"),k=p(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition \x3d mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos \x3d projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset \x3d (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta \x3d weight * clipOffset * screenShape;\n  vec2 lineOffset \x3d normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   \x3d vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     \x3d color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),
m=p(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor \x3d fragColor;\n}"]);q.exports=function(a){return n(a,k,m,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":304,glslify:410}],313:[function(a,q,p){function n(b,a,d,c){this.gl=b;this.buffer=a;this.vao=d;this.shader=c;this.pixelRatio=1;this.bounds=[[-1E3,-1E3,-1E3],[1E3,1E3,1E3]];this.position=[0,0,0];this.lineWidth=[2,2,2];this.colors=
[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.enabled=[!0,!0,!0];this.drawSides=[!0,!0,!0];this.axes=null}var k=a("gl-buffer"),m=a("gl-vao"),h=a("./shaders/index");q.exports=function(b,a){function d(b,a,d,e,f,g){b=[b,a,d,0,0,0,1];b[e+3]=1;b[e]=f;c.push.apply(c,b);b[6]=-1;c.push.apply(c,b);b[e]=g;c.push.apply(c,b);c.push.apply(c,b);b[6]=1;c.push.apply(c,b);b[e]=f;c.push.apply(c,b)}var c=[];d(0,0,0,0,0,1);d(0,0,0,1,0,1);d(0,0,0,2,0,1);d(1,0,0,1,-1,1);d(1,0,0,2,-1,1);d(0,1,0,0,-1,1);d(0,1,0,2,-1,1);d(0,0,1,0,
-1,1);d(0,0,1,1,-1,1);var e=k(b,c),f=m(b,[{type:b.FLOAT,buffer:e,size:3,offset:0,stride:28},{type:b.FLOAT,buffer:e,size:3,offset:12,stride:28},{type:b.FLOAT,buffer:e,size:1,offset:24,stride:28}]),g=h(b);g.attributes.position.location=0;g.attributes.color.location=1;g.attributes.weight.location=2;b=new n(b,e,f,g);b.update(a);return b};var b=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a=n.prototype;var g=[0,0,0],e=[0,0,0],t=[0,0];a.isTransparent=function(){return!1};a.drawTransparent=function(b){};a.draw=function(a){var f=
this.gl,d=this.vao,c=this.shader;d.bind();c.bind();var h=a.model||b,k=a.view||b;a=a.projection||b;if(this.axes)var l=this.axes.lastCubeProps.axis;for(var m=0;3>m;++m)l&&0>l[m]?(g[m]=this.bounds[0][m],e[m]=this.bounds[1][m]):(g[m]=this.bounds[1][m],e[m]=this.bounds[0][m]);t[0]=f.drawingBufferWidth;t[1]=f.drawingBufferHeight;c.uniforms.model=h;c.uniforms.view=k;c.uniforms.projection=a;c.uniforms.coordinates=[this.position,g,e];c.uniforms.colors=this.colors;c.uniforms.screenShape=t;for(m=0;3>m;++m)c.uniforms.lineWidth=
this.lineWidth[m]*this.pixelRatio,this.enabled[m]&&(d.draw(f.TRIANGLES,6,6*m),this.drawSides[m]&&d.draw(f.TRIANGLES,12,18+12*m));d.unbind()};a.update=function(b){b&&("bounds"in b&&(this.bounds=b.bounds),"position"in b&&(this.position=b.position),"lineWidth"in b&&(this.lineWidth=b.lineWidth),"colors"in b&&(this.colors=b.colors),"enabled"in b&&(this.enabled=b.enabled),"drawSides"in b&&(this.drawSides=b.drawSides))};a.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},
{"./shaders/index":312,"gl-buffer":244,"gl-vao":329}],314:[function(a,q,p){var n=a("glslify");a=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount \x3d 8.0;\n\n  float angle \x3d 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d);\n  vec3 y \x3d v * sin(angle) * length(d);\n  vec3 v3 \x3d x + y;\n\n  normal \x3d normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model \x26 view changes.\n  vec3 normal;\n  vec3 XYZ \x3d getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * tubePosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  \x3d model * vec4(tubePosition, 1.0);\n  vec4 t_position  \x3d view * tubePosition;\n  gl_Position      \x3d projection * t_position;\n\n  f_color          \x3d color;\n  f_data           \x3d tubePosition.xyz;\n  f_position       \x3d position.xyz;\n  f_uv             \x3d uv;\n}\n"]);
q=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d f_color * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * opacity;\n}\n"]);
var k=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount \x3d 8.0;\n\n  float angle \x3d 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d);\n  vec3 y \x3d v * sin(angle) * length(d);\n  vec3 v3 \x3d x + y;\n\n  normal \x3d normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ \x3d getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position \x3d projection * view * tubePosition;\n  f_id        \x3d id;\n  f_position  \x3d position.xyz;\n}\n"]);
n=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]);
p.meshShader={vertex:a,fragment:q,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]};p.pickShader={vertex:k,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:410}],315:[function(a,q,p){var n=a("gl-vec3"),k=a("gl-vec4"),m="xyz xzy yxz yzx zxy zyx".split(" "),h=function(b,a,e,f){for(var c=0,d=0;d<b.length;d++)for(var g=b[d].velocities,h=0;h<g.length;h++)c=Math.max(c,
n.length(g[h]));b=b.map(function(b){var a=c,d=b.points,g=b.velocities;b=b.divergences;var h=[],r=[],l=[],t=[],m=[],u=[],v=0;k.create();for(var w=k.create(),z=0;z<d.length;z++){var x=d[z],A=g[z],y=b[z];0===e&&(y=.05*f);var B=n.length(A)/a;var p=k.create();n.copy(p,A);p[3]=y;for(A=0;8>A;A++)m[A]=[x[0],x[1],x[2],A];if(0<t.length)for(A=0;8>A;A++)x=(A+1)%8,h.push(t[A],m[A],m[x],m[x],t[x],t[A]),l.push(w,p,p,p,w,w),u.push(v,B,B,B,v,v),x=h.length,r.push([x-6,x-5,x-4],[x-3,x-2,x-1]);v=t;t=m;m=v;w=p;v=B}return{positions:h,
cells:r,vectors:l,vertexIntensity:u}});g=[];var r=[],l=[],t=[];for(d=0;d<b.length;d++){var m=b[d],u=g.length;g=g.concat(m.positions);l=l.concat(m.vectors);t=t.concat(m.vertexIntensity);for(h=0;h<m.cells.length;h++){var p=m.cells[h],q=[];r.push(q);for(var F=0;F<p.length;F++)q.push(p[F]+u)}}return{positions:g,cells:r,vectors:l,vertexIntensity:t,colormap:a}},b=function(b,a){var c=b.length,d;for(d=0;d<c;d++){var e=b[d];if(e===a)break;else if(e>a)return d-1}return d},g=function(b,a,e){return b<a?a:b>e?
e:b},e=function(b){var a=Infinity;b.sort(function(b,a){return b-a});for(var d=b.length,e=1;e<d;e++){var f=Math.abs(b[e]-b[e-1]);f<a&&(a=f)}return a},t=function(b){for(var a=[],d=[],f=[],g={},h={},k={},l=b.length,t=0;t<l;t++){var m=b[t],n=m[0],B=m[1];m=m[2];g[n]||(a.push(n),g[n]=!0);h[B]||(d.push(B),h[B]=!0);k[m]||(f.push(m),k[m]=!0)}b=e(a);d=e(d);f=e(f);f=Math.min(b,d,f);return isFinite(f)?f:1};q.exports=function(a,c){var d=a.startingPositions,e=a.maxLength||1E3,f=a.tubeSize||1,k=a.absoluteTubeSize,
l=a.gridFill||"+x+y+z",A,z,x;-1!==l.indexOf("-x")&&(A=!0);-1!==l.indexOf("-y")&&(z=!0);-1!==l.indexOf("-z")&&(x=!0);var p=m.indexOf(l.replace(/-/g,"").replace(/\+/g,""));var B=a.getVelocity||function(c){var d=a.vectors,e=a.meshgrid;var f=c[0];var h=c[1],k=c[2];c=e[0].length;var r=e[1].length,l=e[2].length,t=b(e[0],f),m=b(e[1],h),u=b(e[2],k),v=t+1,w=m+1,y=u+1;t=g(t,0,c-1);v=g(v,0,c-1);m=g(m,0,r-1);w=g(w,0,r-1);u=g(u,0,l-1);y=g(y,0,l-1);if(0>t||0>m||0>u||v>c-1||w>r-1||y>l-1)f=n.create();else{var B=
e[0][t],C=e[1][m],q=e[2][u];f=(f-B)/(e[0][v]-B);h=(h-C)/(e[1][w]-C);e=(k-q)/(e[2][y]-q);isFinite(f)||(f=.5);isFinite(h)||(h=.5);isFinite(e)||(e=.5);A&&(t=c-1-t,v=c-1-v);z&&(m=r-1-m,w=r-1-w);x&&(u=l-1-u,y=l-1-y);switch(p){case 5:m*=l;w*=l;t=t*l*r;v=v*l*r;break;case 4:t*=l;v*=l;m=m*l*c;w=w*l*c;break;case 3:u*=r;y*=r;t=t*r*l;v=v*r*l;break;case 2:t*=r;v*=r;u=u*r*c;y=y*r*c;break;case 1:u*=c;y*=c;m=m*c*l;w=w*c*l;break;default:m*=c,w*=c,u=u*c*r,y=y*c*r}c=d[t+m+u];r=d[t+m+y];l=d[t+w+u];t=d[t+w+y];k=d[v+m+
u];m=d[v+m+y];u=d[v+w+u];q=d[v+w+y];d=n.create();v=n.create();w=n.create();y=n.create();n.lerp(d,c,k,f);n.lerp(v,r,m,f);n.lerp(w,l,u,f);n.lerp(y,t,q,f);f=n.create();c=n.create();n.lerp(f,d,w,h);n.lerp(c,v,y,h);h=n.create();n.lerp(h,f,c,e);f=h}return f};l=a.getDivergence||function(b,a){var c=n.create();n.add(c,b,[1E-4,0,0]);var d=B(c);n.subtract(d,d,a);n.scale(d,d,1E4);n.add(c,b,[0,1E-4,0]);var e=B(c);n.subtract(e,e,a);n.scale(e,e,1E4);n.add(c,b,[0,0,1E-4]);b=B(c);n.subtract(b,b,a);n.scale(b,b,1E4);
n.add(c,d,e);n.add(c,c,b);return c};var q=[],G=c[0][0],E=c[0][1],F=c[0][2],L=c[1][0],J=c[1][1],H=c[1][2],K=function(b){var a=b[0],c=b[1];b=b[2];return!(a<G||a>L||c<E||c>J||b<F||b>H)},M=10*n.distance(c[0],c[1])/e,I=M*M;c=1;var N=0,O=d.length;1<O&&(c=t(d));for(var P=0;P<O;P++){var Q=n.create();n.copy(Q,d[P]);var T=[Q],V=[],Y=B(Q),ca=Q;V.push(Y);var Z=[],R=l(Q,Y);R=n.length(R);isFinite(R)&&R>N&&(N=R);Z.push(R);q.push({points:T,velocities:V,divergences:Z});for(var U=0;U<100*e&&T.length<e&&K(Q);){U++;
var X=n.clone(Y);Y=n.squaredLength(X);if(0===Y)break;else Y>I&&n.scale(X,X,M/Math.sqrt(Y));n.add(X,X,Q);Y=B(X);n.squaredDistance(ca,X)-I>-1E-4*I&&(T.push(X),ca=X,V.push(Y),R=l(X,Y),R=n.length(R),isFinite(R)&&R>N&&(N=R),Z.push(R));Q=X}}d=h(q,a.colormap,N,c);k?d.tubeScale=k:(0===N&&(N=1),d.tubeScale=.5*f*c/N);return d};var l=a("./lib/shaders"),f=a("gl-cone3d").createMesh;q.exports.createTubeMesh=function(b,a){return f(b,a,{shaders:l,traceType:"streamtube"})}},{"./lib/shaders":314,"gl-cone3d":245,"gl-vec3":348,
"gl-vec4":384}],316:[function(a,q,p){var n=a("gl-shader");a=a("glslify");var k=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate \x3d vec3(uv.zw, f.x);\n  worldCoordinate \x3d objectOffset + localCoordinate;\n  vec4 worldPosition \x3d model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition \x3d projection * view * worldPosition;\n  gl_Position \x3d clipPosition;\n  kill \x3d f.y;\n  value \x3d f.z;\n  planeCoordinate \x3d uv.xy;\n\n  vColor \x3d texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * worldPosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  \x3d normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),
m=a(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if ((kill \x3e 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec3 N \x3d normalize(surfaceNormal);\n  vec3 V \x3d normalize(eyeDirection);\n  vec3 L \x3d normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color  in vertex or in fragment\n  vec4 surfaceColor \x3d\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),
h=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate \x3d permutation * vec3(uv.xy, height);\n  worldCoordinate \x3d objectOffset + dataCoordinate;\n  vec4 worldPosition \x3d model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition \x3d projection * view * worldPosition;\n  clipPosition.z +\x3d zOffset;\n\n  gl_Position \x3d clipPosition;\n  value \x3d f + objectOffset.z;\n  kill \x3d -1.0;\n  planeCoordinate \x3d uv.zw;\n\n  vColor \x3d texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   \x3d vec3(1,0,0);\n  eyeDirection    \x3d vec3(0,1,0);\n  lightDirection  \x3d vec3(0,0,1);\n}\n"]),
b=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh \x3d 255.0 * v;\n  float upper \x3d floor(vh);\n  float lower \x3d fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill \x3e 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux \x3d splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy \x3d splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor \x3d vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);
p.createShader=function(b){b=n(b,k,m,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);b.attributes.uv.location=0;b.attributes.f.location=1;b.attributes.normal.location=2;return b};p.createPickShader=function(a){a=n(a,k,b,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);a.attributes.uv.location=0;a.attributes.f.location=1;a.attributes.normal.location=2;return a};p.createContourShader=function(b){b=n(b,h,m,null,[{name:"uv",type:"vec4"},
{name:"f",type:"float"}]);b.attributes.uv.location=0;b.attributes.f.location=1;return b};p.createPickContourShader=function(a){a=n(a,h,b,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);a.attributes.uv.location=0;a.attributes.f.location=1;return a}},{"gl-shader":304,glslify:410}],317:[function(a,q,p){arguments[4][113][0].apply(p,arguments)},{dup:113}],318:[function(a,q,p){function n(b,a,c,d,e){this.position=b;this.index=a;this.uv=c;this.level=d;this.dataCoordinate=e}function k(b){b=w([u({colormap:b,
nshades:M,format:"rgba"}).map(function(b){return[b[0],b[1],b[2],255*b[3]]})]);v.divseq(b,255);return b}function m(b,a,c,d,e,f,g,h,k,l,t,m,u,v,w){this.gl=b;this.shape=a;this.bounds=c;this.objectOffset=w;this.intensityBounds=[];this._shader=d;this._pickShader=e;this._coordinateBuffer=f;this._vao=g;this._colorMap=h;this._contourShader=k;this._contourPickShader=l;this._contourBuffer=t;this._contourVAO=m;this._contourOffsets=[[],[],[]];this._contourCounts=[[],[],[]];this._vertexCount=0;this._pickResult=
new n([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]);this._dynamicBuffer=u;this._dynamicVAO=v;this._dynamicOffsets=[0,0,0];this._dynamicCounts=[0,0,0];this.contourWidth=[1,1,1];this.contourLevels=[[1],[1],[1]];this.contourTint=[0,0,0];this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]];this.showSurface=this.showContour=!0;this.enableHighlight=[!0,!0,!0];this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.highlightTint=[1,1,1];this.highlightLevel=[-1,-1,-1];this.enableDynamic=[!0,!0,!0];this.dynamicLevel=
[NaN,NaN,NaN];this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.dynamicTint=[1,1,1];this.dynamicWidth=[1,1,1];this.axesBounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.surfaceProject=[!1,!1,!1];this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]];this.colorBounds=[!1,!1];this._field=[y(r.mallocFloat(1024),[0,0]),y(r.mallocFloat(1024),[0,0]),y(r.mallocFloat(1024),[0,0])];this.pickId=1;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.snapToData=
!1;this.opacity=this.pixelRatio=1;this.lightPosition=[10,1E4,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.vertexColor=0;this.dirty=!0}function h(b,a){var c,d,e=a.axes&&a.axes.lastCubeProps.axis||I,f=a.showSurface,g=a.showContour;for(c=0;3>c;++c)for(f=f||a.surfaceProject[c],d=0;3>d;++d)g=g||a.contourProject[c][d];for(c=0;3>c;++c){var h=N.projections[c];for(d=0;16>d;++d)h[d]=0;for(d=0;4>d;++d)h[5*d]=1;h[5*c]=0;h[12+c]=a.axesBounds[+(0<e[c])][c];
z(h,b.model,h);var k=N.clipBounds[c];for(h=0;2>h;++h)for(d=0;3>d;++d)k[h][d]=b.clipBounds[h][d];k[0][c]=-1E8;k[1][c]=1E8}N.showSurface=f;N.showContour=g;return N}function b(b,a){b=b||{};var c=this.gl;c.disable(c.CULL_FACE);this._colorMap.bind(0);var d=O;d.model=b.model||J;d.view=b.view||J;d.projection=b.projection||J;d.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]];d.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]];d.objectOffset=
this.objectOffset;d.contourColor=this.contourColor[0];d.inverseModel=x(d.inverseModel,d.model);for(b=0;2>b;++b)for(var e=d.clipBounds[b],f=0;3>f;++f)e[f]=Math.min(Math.max(this.clipBounds[b][f],-1E8),1E8);d.kambient=this.ambientLight;d.kdiffuse=this.diffuseLight;d.kspecular=this.specularLight;d.roughness=this.roughness;d.fresnel=this.fresnel;d.opacity=this.opacity;d.height=0;d.permutation=Q;d.vertexColor=this.vertexColor;e=P;z(e,d.view,d.model);z(e,d.projection,e);x(e,e);for(b=0;3>b;++b)d.eyePosition[b]=
e[12+b]/e[15];var g=e[15];for(b=0;3>b;++b)g+=this.lightPosition[b]*e[4*b+3];for(b=0;3>b;++b){var k=e[12+b];for(f=0;3>f;++f)k+=e[4*f+b]*this.lightPosition[f];d.lightPosition[b]=k/g}e=h(d,this);if(e.showSurface&&a===1>this.opacity){this._shader.bind();this._shader.uniforms=d;this._vao.bind();this.showSurface&&this._vertexCount&&this._vao.draw(c.TRIANGLES,this._vertexCount);for(b=0;3>b;++b)this.surfaceProject[b]&&this.vertexCount&&(this._shader.uniforms.model=e.projections[b],this._shader.uniforms.clipBounds=
e.clipBounds[b],this._vao.draw(c.TRIANGLES,this._vertexCount));this._vao.unbind()}if(e.showContour&&!a){a=this._contourShader;d.kambient=1;d.kdiffuse=0;d.kspecular=0;d.opacity=1;a.bind();a.uniforms=d;g=this._contourVAO;g.bind();for(b=0;3>b;++b)for(a.uniforms.permutation=K[b],c.lineWidth(this.contourWidth[b]*this.pixelRatio),f=0;f<this.contourLevels[b].length;++f){if(f===this.highlightLevel[b])a.uniforms.contourColor=this.highlightColor[b],a.uniforms.contourTint=this.highlightTint[b];else if(0===f||
f-1===this.highlightLevel[b])a.uniforms.contourColor=this.contourColor[b],a.uniforms.contourTint=this.contourTint[b];this._contourCounts[b][f]&&(a.uniforms.height=this.contourLevels[b][f],g.draw(c.LINES,this._contourCounts[b][f],this._contourOffsets[b][f]))}for(b=0;3>b;++b)for(a.uniforms.model=e.projections[b],a.uniforms.clipBounds=e.clipBounds[b],f=0;3>f;++f)if(this.contourProject[b][f])for(a.uniforms.permutation=K[f],c.lineWidth(this.contourWidth[f]*this.pixelRatio),k=0;k<this.contourLevels[f].length;++k){if(k===
this.highlightLevel[f])a.uniforms.contourColor=this.highlightColor[f],a.uniforms.contourTint=this.highlightTint[f];else if(0===k||k-1===this.highlightLevel[f])a.uniforms.contourColor=this.contourColor[f],a.uniforms.contourTint=this.contourTint[f];this._contourCounts[f][k]&&(a.uniforms.height=this.contourLevels[f][k],g.draw(c.LINES,this._contourCounts[f][k],this._contourOffsets[f][k]))}g.unbind();g=this._dynamicVAO;g.bind();for(b=0;3>b;++b)if(0!==this._dynamicCounts[b])for(a.uniforms.model=d.model,
a.uniforms.clipBounds=d.clipBounds,a.uniforms.permutation=K[b],c.lineWidth(this.dynamicWidth[b]*this.pixelRatio),a.uniforms.contourColor=this.dynamicColor[b],a.uniforms.contourTint=this.dynamicTint[b],a.uniforms.height=this.dynamicLevel[b],g.draw(c.LINES,this._dynamicCounts[b],this._dynamicOffsets[b]),f=0;3>f;++f)this.contourProject[f][b]&&(a.uniforms.model=e.projections[f],a.uniforms.clipBounds=e.clipBounds[f],g.draw(c.LINES,this._dynamicCounts[b],this._dynamicOffsets[b]));g.unbind()}}function g(b,
a){return Array.isArray(b)?[a(b[0]),a(b[1]),a(b[2])]:[a(b),a(b),a(b)]}function e(b){return Array.isArray(b)?3===b.length?[b[0],b[1],b[2],1]:[b[0],b[1],b[2],b[3]]:[0,0,0,1]}function t(b){if(Array.isArray(b)){if(Array.isArray(b))return[e(b[0]),e(b[1]),e(b[2])];b=e(b);return[b.slice(),b.slice(),b.slice()]}}q.exports=function(b){var a=b.gl,e=D(a),g=E(a),h=G(a),k=F(a),r=f(a),l=d(a,[{buffer:r,size:4,stride:L,offset:0},{buffer:r,size:3,stride:L,offset:16},{buffer:r,size:3,stride:L,offset:28}]),t=f(a),u=
d(a,[{buffer:t,size:4,stride:20,offset:0},{buffer:t,size:1,stride:20,offset:16}]),n=f(a),v=d(a,[{buffer:n,size:2,type:a.FLOAT}]),w=c(a,1,M,a.RGBA,a.UNSIGNED_BYTE);w.minFilter=a.LINEAR;w.magFilter=a.LINEAR;a=new m(a,[0,0],[[0,0,0],[0,0,0]],e,g,r,l,w,h,k,t,u,n,v,[0,0,0]);e={levels:[[],[],[]]};for(var z in b)e[z]=b[z];e.colormap=e.colormap||"jet";a.update(e);return a};var l=a("bit-twiddle"),f=a("gl-buffer"),d=a("gl-vao"),c=a("gl-texture2d"),r=a("typedarray-pool"),u=a("colormap"),v=a("ndarray-ops"),w=
a("ndarray-pack"),y=a("ndarray"),A=a("surface-nets"),z=a("gl-mat4/multiply"),x=a("gl-mat4/invert"),C=a("binary-search-bounds"),B=a("ndarray-gradient");a=a("./lib/shaders");var D=a.createShader,G=a.createContourShader,E=a.createPickShader,F=a.createPickContourShader,L=40,J=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],K=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var b=0;3>b;++b){var a=K[b],c=(b+2)%3;a[(b+1)%3]=1;a[c+3]=1;a[b+6]=1}})();
var M=256;a=m.prototype;a.isTransparent=function(){return 1>this.opacity};a.isOpaque=function(){if(1<=this.opacity)return!0;for(var b=0;3>b;++b)if(0<this._contourCounts[b].length||0<this._dynamicCounts[b])return!0;return!1};a.pickSlots=1;a.setPickBase=function(b){this.pickId=b};var I=[0,0,0],N={showSurface:!1,showContour:!1,projections:[J.slice(),J.slice(),J.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]},O={model:J,view:J,projection:J,inverseModel:J.slice(),lowerBound:[0,
0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1E-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1E3,1E3,1E3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},P=J.slice(),Q=[1,0,0,0,1,0,0,0,1];a.draw=function(a){return b.call(this,a,!1)};a.drawTransparent=function(a){return b.call(this,a,!0)};var T={model:J,view:J,projection:J,inverseModel:J,clipBounds:[[0,
0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};a.drawPick=function(b){b=b||{};var a=this.gl;a.disable(a.CULL_FACE);T.model=b.model||J;T.view=b.view||J;T.projection=b.projection||J;T.shape=this._field[2].shape;T.pickId=this.pickId/255;T.lowerBound=this.bounds[0];T.upperBound=this.bounds[1];T.objectOffset=this.objectOffset;T.permutation=Q;for(b=0;2>b;++b)for(var c=
T.clipBounds[b],d=0;3>d;++d)c[d]=Math.min(Math.max(this.clipBounds[b][d],-1E8),1E8);c=h(T,this);if(c.showSurface){this._pickShader.bind();this._pickShader.uniforms=T;this._vao.bind();this._vao.draw(a.TRIANGLES,this._vertexCount);for(b=0;3>b;++b)this.surfaceProject[b]&&(this._pickShader.uniforms.model=c.projections[b],this._pickShader.uniforms.clipBounds=c.clipBounds[b],this._vao.draw(a.TRIANGLES,this._vertexCount));this._vao.unbind()}if(c.showContour){var e=this._contourPickShader;e.bind();e.uniforms=
T;var f=this._contourVAO;f.bind();for(d=0;3>d;++d)for(a.lineWidth(this.contourWidth[d]*this.pixelRatio),e.uniforms.permutation=K[d],b=0;b<this.contourLevels[d].length;++b)this._contourCounts[d][b]&&(e.uniforms.height=this.contourLevels[d][b],f.draw(a.LINES,this._contourCounts[d][b],this._contourOffsets[d][b]));for(b=0;3>b;++b)for(e.uniforms.model=c.projections[b],e.uniforms.clipBounds=c.clipBounds[b],d=0;3>d;++d)if(this.contourProject[b][d]){e.uniforms.permutation=K[d];a.lineWidth(this.contourWidth[d]*
this.pixelRatio);for(var g=0;g<this.contourLevels[d].length;++g)this._contourCounts[d][g]&&(e.uniforms.height=this.contourLevels[d][g],f.draw(a.LINES,this._contourCounts[d][g],this._contourOffsets[d][g]))}f.unbind()}};a.pick=function(b){if(!b||b.id!==this.pickId)return null;var a=this._field[2].shape,c=this._pickResult,d=a[0]*(b.value[0]+(b.value[2]>>4)/16)/255,e=Math.floor(d),f=d-e;b=a[1]*(b.value[1]+(b.value[2]&15)/16)/255;var g=Math.floor(b),h=b-g;e+=1;g+=1;for(var k=c.position,r=k[0]=k[1]=k[2]=
0;2>r;++r)for(var l=r?f:1-f,t=0;2>t;++t)for(var m=e+r,u=g+t,n=l*(t?h:1-h),v=0;3>v;++v)k[v]+=this._field[v].get(m,u)*n;r=this._pickResult.level;for(l=0;3>l;++l)r[l]=C.le(this.contourLevels[l],k[l]),0>r[l]?0<this.contourLevels[l].length&&(r[l]=0):r[l]<this.contourLevels[l].length-1&&Math.abs(this.contourLevels[l][r[l]]-k[l])>Math.abs(this.contourLevels[l][r[l]+1]-k[l])&&(r[l]+=1);c.index[0]=.5>f?e:e+1;c.index[1]=.5>h?g:g+1;c.uv[0]=d/a[0];c.uv[1]=b/a[1];for(v=0;3>v;++v)c.dataCoordinate[v]=this._field[v].get(c.index[0],
c.index[1]);return c};a.padField=function(b,a){var c=a.shape.slice(),d=b.shape.slice();v.assign(b.lo(1,1).hi(c[0],c[1]),a);v.assign(b.lo(1).hi(c[0],1),a.hi(c[0],1));v.assign(b.lo(1,d[1]-1).hi(c[0],1),a.lo(0,c[1]-1).hi(c[0],1));v.assign(b.lo(0,1).hi(1,c[1]),a.hi(1));v.assign(b.lo(d[0]-1,1).hi(1,c[1]),a.lo(c[0]-1));b.set(0,0,a.get(0,0));b.set(0,d[1]-1,a.get(0,c[1]-1));b.set(d[0]-1,0,a.get(c[0]-1,0));b.set(d[0]-1,d[1]-1,a.get(c[0]-1,c[1]-1))};a.update=function(b){b=b||{};this.objectOffset=b.objectOffset||
this.objectOffset;this.dirty=!0;"contourWidth"in b&&(this.contourWidth=g(b.contourWidth,Number));"showContour"in b&&(this.showContour=g(b.showContour,Boolean));"showSurface"in b&&(this.showSurface=!!b.showSurface);"contourTint"in b&&(this.contourTint=g(b.contourTint,Boolean));"contourColor"in b&&(this.contourColor=t(b.contourColor));"contourProject"in b&&(this.contourProject=g(b.contourProject,function(b){return g(b,Boolean)}));"surfaceProject"in b&&(this.surfaceProject=b.surfaceProject);"dynamicColor"in
b&&(this.dynamicColor=t(b.dynamicColor));"dynamicTint"in b&&(this.dynamicTint=g(b.dynamicTint,Number));"dynamicWidth"in b&&(this.dynamicWidth=g(b.dynamicWidth,Number));"opacity"in b&&(this.opacity=b.opacity);"colorBounds"in b&&(this.colorBounds=b.colorBounds);"vertexColor"in b&&(this.vertexColor=b.vertexColor?1:0);var a=b.field||b.coords&&b.coords[2]||null,c=!1;a||(a=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,
0));if("field"in b||"coords"in b){var d=(a.shape[0]+2)*(a.shape[1]+2);d>this._field[2].data.length&&(r.freeFloat(this._field[2].data),this._field[2].data=r.mallocFloat(l.nextPow2(d)));this._field[2]=y(this._field[2].data,[a.shape[0]+2,a.shape[1]+2]);this.padField(this._field[2],a);d=this.shape=a.shape.slice();for(a=0;2>a;++a)this._field[2].size>this._field[a].data.length&&(r.freeFloat(this._field[a].data),this._field[a].data=r.mallocFloat(this._field[2].size)),this._field[a]=y(this._field[a].data,
[d[0]+2,d[1]+2]);if(b.coords){var e=b.coords;if(!Array.isArray(e)||3!==e.length)throw Error("gl-surface: invalid coordinates for x/y");for(a=0;2>a;++a){var f=e[a];for(h=0;2>h;++h)if(f.shape[h]!==d[h])throw Error("gl-surface: coords have incorrect shape");this.padField(this._field[a],f)}}else if(b.ticks){h=b.ticks;if(!Array.isArray(h)||2!==h.length)throw Error("gl-surface: invalid ticks");for(a=0;2>a;++a){e=h[a];if(Array.isArray(e)||e.length)e=y(e);if(e.shape[0]!==d[a])throw Error("gl-surface: invalid tick length");
f=y(e.data,d);f.stride[a]=e.stride[0];f.stride[a^1]=0;this.padField(this._field[a],f)}}else{for(a=0;2>a;++a)h=[0,0],h[a]=1,this._field[a]=y(this._field[a].data,[d[0]+2,d[1]+2],h,0);this._field[0].set(0,0,0);for(var h=0;h<d[0];++h)this._field[0].set(h+1,0,h);this._field[0].set(d[0]+1,0,d[0]-1);this._field[1].set(0,0,0);for(h=0;h<d[1];++h)this._field[1].set(0,h+1,h);this._field[1].set(0,d[1]+1,d[1]-1)}h=this._field;e=y(r.mallocFloat(6*h[2].size),[3,d[0]+2,d[1]+2,2]);for(a=0;3>a;++a)B(e.pick(a),h[a],
"mirror");var m=y(r.mallocFloat(3*h[2].size),[d[0]+2,d[1]+2,3]);for(a=0;a<d[0]+2;++a)for(h=0;h<d[1]+2;++h){f=e.get(0,a,h,0);var u=e.get(0,a,h,1),n=e.get(1,a,h,0),v=e.get(1,a,h,1),w=e.get(2,a,h,0),z=e.get(2,a,h,1),x=n*z-v*w;w=w*u-z*f;z=f*v-u*n;f=Math.sqrt(x*x+w*w+z*z);1E-8>f?(f=Math.max(Math.abs(x),Math.abs(w),Math.abs(z)),1E-8>f?(z=1,w=x=0,f=1):f=1/f):f=1/Math.sqrt(f);m.set(a,h,0,x*f);m.set(a,h,1,w*f);m.set(a,h,2,z*f)}r.free(e.data);var p=[Infinity,Infinity,Infinity],C=[-Infinity,-Infinity,-Infinity],
q=Infinity,D=-Infinity,I=r.mallocFloat(l.nextPow2((d[0]-1)*(d[1]-1)*60)),E=0;for(a=e=0;a<d[0]-1;++a)a:for(h=0;h<d[1]-1;++h){for(x=0;2>x;++x)for(w=0;2>w;++w)for(f=0;3>f;++f)if(u=this._field[f].get(1+a+x,1+h+w),isNaN(u)||!isFinite(u))continue a;for(f=0;6>f;++f){n=a+H[f][0];v=h+H[f][1];var N=this._field[0].get(n+1,v+1),G=this._field[1].get(n+1,v+1);u=this._field[2].get(n+1,v+1);x=m.get(n+1,v+1,0);w=m.get(n+1,v+1,1);z=m.get(n+1,v+1,2);b.intensity&&(M=b.intensity.get(n,v));var M=b.intensity?b.intensity.get(n,
v):u+this.objectOffset[2];I[E++]=n;I[E++]=v;I[E++]=N;I[E++]=G;I[E++]=u;I[E++]=0;I[E++]=M;I[E++]=x;I[E++]=w;I[E++]=z;p[0]=Math.min(p[0],N+this.objectOffset[0]);p[1]=Math.min(p[1],G+this.objectOffset[1]);p[2]=Math.min(p[2],u+this.objectOffset[2]);q=Math.min(q,M);C[0]=Math.max(C[0],N+this.objectOffset[0]);C[1]=Math.max(C[1],G+this.objectOffset[1]);C[2]=Math.max(C[2],u+this.objectOffset[2]);D=Math.max(D,M);e+=1}}b.intensityBounds&&(q=+b.intensityBounds[0],D=+b.intensityBounds[1]);for(a=6;a<E;a+=10)I[a]=
(I[a]-q)/(D-q);this._vertexCount=e;this._coordinateBuffer.update(I.subarray(0,E));r.freeFloat(I);r.free(m.data);this.bounds=[p,C];this.intensity=b.intensity||this._field[2];if(this.intensityBounds[0]!==q||this.intensityBounds[1]!==D)c=!0;this.intensityBounds=[q,D]}if("levels"in b){d=b.levels;d=Array.isArray(d[0])?d.slice():[[],[],d];for(a=0;3>a;++a)d[a]=d[a].slice(),d[a].sort(function(b,a){return b-a});for(a=0;3>a;++a)for(h=0;h<d[a].length;++h)d[a][h]-=this.objectOffset[a];a=0;a:for(;3>a;++a){if(d[a].length!==
this.contourLevels[a].length){c=!0;break}for(h=0;h<d[a].length;++h)if(d[a][h]!==this.contourLevels[a][h]){c=!0;break a}}this.contourLevels=d}if(c){h=this._field;d=this.shape;c=[];for(m=0;3>m;++m){z=this.contourLevels[m];p=[];C=[];q=[0,0,0];for(a=0;a<z.length;++a){D=A(this._field[m],z[a]);p.push(c.length/5|0);h=e=0;a:for(;h<D.cells.length;++h)for(I=D.cells[h],f=0;2>f;++f){E=D.positions[I[f]];u=E[0];N=Math.floor(u)|0;G=u-N;u=E[1];M=Math.floor(u)|0;var K=u-M,J=!1,F=0;b:for(;3>F;++F){q[F]=0;var O=(m+
F+1)%3;for(x=0;2>x;++x){var L=x?G:1-G;n=Math.min(Math.max(N+x,0),d[0])|0;for(w=0;2>w;++w){var Q=w?K:1-K;v=Math.min(Math.max(M+w,0),d[1])|0;u=2>F?this._field[O].get(n,v):(this.intensity.get(n,v)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]);if(!isFinite(u)||isNaN(u)){J=!0;break b}q[F]+=L*Q*u}}}if(J){if(0<f){for(f=0;5>f;++f)c.pop();--e}continue a}else c.push(q[0],q[1],E[0],E[1],q[2]),e+=1}C.push(e)}this._contourOffsets[m]=p;this._contourCounts[m]=C}d=r.mallocFloat(c.length);
for(a=0;a<c.length;++a)d[a]=c[a];this._contourBuffer.update(d);r.freeFloat(d)}b.colormap&&this._colorMap.setPixels(k(b.colormap))};a.dispose=function(){this._shader.dispose();this._vao.dispose();this._coordinateBuffer.dispose();this._colorMap.dispose();this._contourBuffer.dispose();this._contourVAO.dispose();this._contourShader.dispose();this._contourPickShader.dispose();this._dynamicBuffer.dispose();this._dynamicVAO.dispose();for(var b=0;3>b;++b)r.freeFloat(this._field[b].data)};a.highlight=function(b){var a;
if(b){for(a=0;3>a;++a)this.highlightLevel[a]=this.enableHighlight[a]?b.level[a]:-1;b=this.snapToData?b.dataCoordinate:b.position;for(a=0;3>a;++a)b[a]-=this.objectOffset[a];if(this.enableDynamic[0]&&b[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&b[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&b[2]!==this.dynamicLevel[2]){for(var c=0,d=this.shape,e=r.mallocFloat(12*d[0]*d[1]),f=0;3>f;++f)if(this.enableDynamic[f]){this.dynamicLevel[f]=b[f];var g=this._field[(f+1)%3],h=this._field[(f+2)%3];a=
A(this._field[f],b[f]);var k=a.cells,l=a.positions;this._dynamicOffsets[f]=c;for(a=0;a<k.length;++a)for(var t=k[a],m=0;2>m;++m){var u=l[t[m]],n=+u[0],v=n|0,w=Math.min(v+1,d[0])|0,z=n-v,x=1-z,y=+u[1];u=y|0;n=Math.min(u+1,d[1])|0;var B=y-u,p=1-B;y=x*p;x*=B;p*=z;B*=z;z=y*g.get(v,u)+x*g.get(v,n)+p*g.get(w,u)+B*g.get(w,n);v=y*h.get(v,u)+x*h.get(v,n)+p*h.get(w,u)+B*h.get(w,n);if(isNaN(z)||isNaN(v)){m&&--c;break}e[2*c]=z;e[2*c+1]=v;c+=1}this._dynamicCounts[f]=c-this._dynamicOffsets[f]}else this.dynamicLevel[f]=
NaN,this._dynamicCounts[f]=0;this._dynamicBuffer.update(e.subarray(0,2*c));r.freeFloat(e)}}else this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1]}},{"./lib/shaders":316,"binary-search-bounds":317,"bit-twiddle":94,colormap:128,"gl-buffer":244,"gl-mat4/invert":268,"gl-mat4/multiply":270,"gl-texture2d":324,"gl-vao":329,ndarray:451,"ndarray-gradient":442,"ndarray-ops":445,"ndarray-pack":446,"surface-nets":529,"typedarray-pool":543}],319:[function(a,q,p){var n=
a("css-font"),k=a("pick-by-alias"),m=a("regl"),h=a("gl-util/context");p=a("es6-weak-map");var b=a("color-normalize"),g=a("font-atlas"),e=a("typedarray-pool"),t=a("parse-rect"),l=a("is-plain-obj"),f=a("parse-unit"),d=a("to-px"),c=a("detect-kerning"),r=a("object-assign"),u=a("font-measure"),v=a("flatten-vertex-data"),w=a("bit-twiddle").nextPow2,y=new p,A=!1;document.body&&(a=document.body.appendChild(document.createElement("div")),a.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(a).fontStretch&&
(A=!0),document.body.removeChild(a));var z=function(b){"function"===typeof b&&b._gl&&b.prop&&b.texture&&b.buffer?(b={regl:b},this.gl=b.regl._gl):this.gl=h(b);this.regl=(this.shader=y.get(this.gl))?this.shader.regl:b.regl||m({gl:this.gl});this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"});this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"});this.shader||(this.shader=this.createShader(),y.set(this.gl,this.shader));this.batch=[];this.fontSize=[];this.font=[];this.fontAtlas=[];
this.draw=this.shader.draw.bind(this);this.render=function(){this.regl._refresh();this.draw(this.batch)};this.canvas=this.gl.canvas;this.update(l(b)?b:{})};z.prototype.createShader=function(){var b=this.regl,a=b({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:b.prop("count"),offset:b.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:b.this("sizeBuffer")},
width:{offset:0,stride:8,buffer:b.this("sizeBuffer")},char:b.this("charBuffer"),position:b.this("position")},uniforms:{atlasSize:function(b,a){return[a.atlas.width,a.atlas.height]},atlasDim:function(b,a){return[a.atlas.cols,a.atlas.rows]},atlas:function(b,a){return a.atlas.texture},charStep:function(b,a){return a.atlas.step},em:function(b,a){return a.atlas.em},color:b.prop("color"),opacity:b.prop("opacity"),viewport:b.this("viewportArray"),scale:b.this("scale"),align:b.prop("align"),baseline:b.prop("baseline"),
translate:b.this("translate"),positionOffset:b.prop("positionOffset")},primitive:"points",viewport:b.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\t"+
(z.normalViewport?"":"vec2 positionOffset \x3d vec2(positionOffset.x,- positionOffset.y);")+"\n\n\t\t\t\tvec2 offset \x3d floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ positionOffset))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position \x3d (position + translate) * scale;\n\t\t\t\tposition +\x3d offset * scale;\n\n\t\t\t\t"+(z.normalViewport?"position.y \x3d 1. - position.y;":"")+"\n\n\t\t\t\tcharCoord \x3d position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position \x3d vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize \x3d charStep;\n\n\t\t\t\tcharId.x \x3d mod(char, atlasDim.x);\n\t\t\t\tcharId.y \x3d floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth \x3d width * em;\n\n\t\t\t\tfontColor \x3d color / 255.;\n\t\t\t}",
frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform sampler2D atlas;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv \x3d gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep \x3d floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y \x3d charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth \x3d ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) \x3e halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) \x3c halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv +\x3d charId * charStep;\n\t\t\t\tuv \x3d uv / atlasSize;\n\n\t\t\t\tvec4 color \x3d fontColor;\n\t\t\t\tvec4 mask \x3d texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY \x3d lightness(mask);\n\t\t\t\t// float colorY \x3d lightness(color);\n\t\t\t\tcolor.a *\x3d maskY;\n\t\t\t\tcolor.a *\x3d opacity;\n\n\t\t\t\t// color.a +\x3d .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb +\x3d (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor \x3d color;\n\t\t\t}"});
return{regl:b,draw:a,atlas:{}}};z.prototype.update=function(a){var h=this;if("string"===typeof a)a={text:a};else if(!a)return;a=k(a,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",
kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0);null!=a.opacity&&(Array.isArray(a.opacity)?this.opacity=a.opacity.map(function(b){return parseFloat(b)}):this.opacity=parseFloat(a.opacity));null!=a.viewport&&(this.viewport=t(a.viewport),z.normalViewport&&(this.viewport.y=this.canvas.height-this.viewport.y-this.viewport.height),
this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]);null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]);null!=a.kerning&&(this.kerning=a.kerning);null!=a.offset&&("number"===typeof a.offset&&(a.offset=[a.offset,0]),this.positionOffset=v(a.offset));a.direction&&(this.direction=a.direction);a.range&&(this.range=
a.range,this.scale=[1/(a.range[2]-a.range[0]),1/(a.range[3]-a.range[1])],this.translate=[-a.range[0],-a.range[1]]);a.scale&&(this.scale=a.scale);a.translate&&(this.translate=a.translate);this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]);this.translate||(this.translate=[0,0]);this.font.length||a.font||(a.font=z.baseFontSize+"px sans-serif");var l=!1,m=!1;a.font&&(Array.isArray(a.font)?a.font:[a.font]).forEach(function(b,a){if("string"===typeof b)try{b=n.parse(b)}catch(Z){b=n.parse(z.baseFontSize+
"px "+b)}else b=n.parse(n.stringify(b));var c=n.stringify({size:z.baseFontSize,family:b.family,stretch:A?b.stretch:void 0,variant:b.variant,weight:b.weight,style:b.style}),e=f(b.size);e=Math.round(e[0]*d(e[1]));e!==h.fontSize[a]&&(m=!0,h.fontSize[a]=e);if(!h.font[a]||c!=h.font[a].baseString)if(l=!0,h.font[a]=z.fonts[c],!h.font[a]){e=b.family.join(", ");var g=[b.style];b.style!=b.variant&&g.push(b.variant);b.variant!=b.weight&&g.push(b.weight);A&&b.weight!=b.stretch&&g.push(b.stretch);h.font[a]={baseString:c,
family:e,weight:b.weight,stretch:b.stretch,style:b.style,variant:b.variant,width:{},kerning:{},metrics:u(e,{origin:"top",fontSize:z.baseFontSize,fontStyle:g.join(" ")})};z.fonts[c]=h.font[a]}});(l||m)&&this.font.forEach(function(b,c){var d=n.stringify({size:h.fontSize[c],family:b.family,stretch:A?b.stretch:void 0,variant:b.variant,weight:b.weight,style:b.style});h.fontAtlas[c]=h.shader.atlas[d];h.fontAtlas[c]||(h.shader.atlas[d]=h.fontAtlas[c]={fontString:d,step:2*Math.ceil(h.fontSize[c]*b.metrics.bottom*
.5),em:h.fontSize[c],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:h.regl.texture()});null==a.text&&(a.text=h.text)});if("string"===typeof a.text&&a.position&&2<a.position.length){for(var y=Array(.5*a.position.length),x=0;x<y.length;x++)y[x]=a.text;a.text=y}if(null!=a.text||l){this.textOffsets=[0];if(Array.isArray(a.text)){this.count=a.text[0].length;this.counts=[this.count];for(y=1;y<a.text.length;y++)this.textOffsets[y]=this.textOffsets[y-1]+a.text[y-1].length,this.count+=a.text[y].length,
this.counts.push(a.text[y].length);this.text=a.text.join("")}else this.text=a.text,this.count=this.text.length,this.counts=[this.count];var p=[];this.font.forEach(function(b,a){z.atlasContext.font=b.baseString;a=h.fontAtlas[a];for(var d=0;d<h.text.length;d++){var e=h.text.charAt(d);null==a.ids[e]&&(a.ids[e]=a.chars.length,a.chars.push(e),p.push(e));if(null==b.width[e]&&(b.width[e]=z.atlasContext.measureText(e).width/z.baseFontSize,h.kerning)){var f=[],g;for(g in b.width)f.push(g+e,e+g);r(b.kerning,
c(b.family,{pairs:f}))}}})}if(a.position)if(2<a.position.length){y=!a.position[0].length;x=e.mallocFloat(2*this.count);for(var q=0,J=0;q<this.counts.length;q++){var H=this.counts[q];if(y)for(var K=0;K<H;K++)x[J++]=a.position[2*q],x[J++]=a.position[2*q+1];else for(K=0;K<H;K++)x[J++]=a.position[q][0],x[J++]=a.position[q][1]}this.position.call?this.position({type:"float",data:x}):this.position=this.regl.buffer({type:"float",data:x});e.freeFloat(x)}else this.position.destroy&&this.position.destroy(),
this.position={constant:a.position};if(a.text||l){y=e.mallocUint8(this.count);x=e.mallocFloat(2*this.count);this.textWidth=[];for(J=q=0;q<this.counts.length;q++){H=this.counts[q];K=this.font[q]||this.font[0];for(var M=this.fontAtlas[q]||this.fontAtlas[0],I=0;I<H;I++){var N=this.text.charAt(J),O=this.text.charAt(J-1);y[J]=M.ids[N];x[2*J]=K.width[N];if(I){var P=x[2*J-1]+.5*x[2*J-2]+.5*x[2*J];this.kerning&&(N=K.kerning[O+N])&&(P+=.001*N);x[2*J+1]=P}else x[2*J+1]=.5*x[2*J];J++}this.textWidth.push(x.length?
.5*x[2*J-2]+x[2*J-1]:0)}a.align||(a.align=this.align);this.charBuffer({data:y,type:"uint8",usage:"stream"});this.sizeBuffer({data:x,type:"float",usage:"stream"});e.freeUint8(y);e.freeFloat(x);p.length&&this.font.forEach(function(b,a){b=h.fontAtlas[a];a=b.step;var c=Math.min(Math.floor(z.maxAtlasSize/a),b.chars.length),d=Math.ceil(b.chars.length/c),e=w(c*a),f=w(d*a);b.width=e;b.height=f;b.rows=d;b.cols=c;b.em&&b.texture({data:g({canvas:z.atlasCanvas,font:b.fontString,chars:b.chars,shape:[e,f],step:[a,
a]})})})}a.align&&(this.align=a.align,this.alignOffset=this.textWidth.map(function(b,a){a=Array.isArray(h.align)?1<h.align.length?h.align[a]:h.align[0]:h.align;if("number"===typeof a)return a;switch(a){case "right":case "end":return-b;case "center":case "centre":case "middle":return.5*-b}return 0}));null==this.baseline&&null==a.baseline&&(a.baseline=0);null!=a.baseline&&(this.baseline=a.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(b,
a){a=(h.font[a]||h.font[0]).metrics;var c=.5*a.bottom;c="number"===typeof b?c+(b-a.baseline):c+-a[b];z.normalViewport||(c*=-1);return c}));if(null!=a.color)if(a.color||(a.color="transparent"),"string"!==typeof a.color&&isNaN(a.color)){if("number"===typeof a.color[0]&&a.color.length>this.counts.length)for(x=a.color.length,y=e.mallocUint8(x),q=(a.color.subarray||a.color.slice).bind(a.color),J=0;J<x;J+=4)y.set(b(q(J,J+4),"uint8"),J);else for(x=a.color.length,y=e.mallocUint8(4*x),q=0;q<x;q++)y.set(b(a.color[q]||
0,"uint8"),4*q);this.color=y}else this.color=b(a.color,"uint8");if(a.position||a.text||a.color||a.baseline||a.align||a.font||a.offset||a.opacity)if(4<this.color.length||1<this.baselineOffset.length||this.align&&1<this.align.length||1<this.fontAtlas.length||2<this.positionOffset.length)for(this.batch=Array(Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0)),
y=0;y<this.batch.length;y++)this.batch[y]={count:1<this.counts.length?this.counts[y]:this.counts[0],offset:1<this.textOffsets.length?this.textOffsets[y]:this.textOffsets[0],color:this.color?4>=this.color.length?this.color:this.color.subarray(4*y,4*y+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[y]:this.opacity,baseline:null!=this.baselineOffset[y]?this.baselineOffset[y]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[y]?this.alignOffset[y]:this.alignOffset[0]:0,atlas:this.fontAtlas[y]||
this.fontAtlas[0],positionOffset:2<this.positionOffset.length?this.positionOffset.subarray(2*y,2*y+2):this.positionOffset};else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]};z.prototype.destroy=function(){};z.prototype.kerning=!0;z.prototype.position={constant:new Float32Array(2)};
z.prototype.translate=null;z.prototype.scale=null;z.prototype.font=null;z.prototype.text="";z.prototype.positionOffset=[0,0];z.prototype.opacity=1;z.prototype.color=new Uint8Array([0,0,0,255]);z.prototype.alignOffset=[0,0];z.normalViewport=!1;z.maxAtlasSize=1024;z.atlasCanvas=document.createElement("canvas");z.atlasContext=z.atlasCanvas.getContext("2d",{alpha:!1});z.baseFontSize=64;z.fonts={};q.exports=z},{"bit-twiddle":94,"color-normalize":122,"css-font":141,"detect-kerning":168,"es6-weak-map":320,
"flatten-vertex-data":230,"font-atlas":231,"font-measure":232,"gl-util/context":325,"is-plain-obj":423,"object-assign":455,"parse-rect":460,"parse-unit":462,"pick-by-alias":466,regl:500,"to-px":537,"typedarray-pool":543}],320:[function(a,q,p){q.exports=a("./is-implemented")()?WeakMap:a("./polyfill")},{"./is-implemented":321,"./polyfill":323}],321:[function(a,q,p){q.exports=function(){var a;if("function"!==typeof WeakMap)return!1;try{var k=new WeakMap([[a={},"one"],[{},"two"],[{},"three"]])}catch(m){return!1}return"[object WeakMap]"!==
String(k)||"function"!==typeof k.set||k.set({},1)!==k||"function"!==typeof k.delete||"function"!==typeof k.has||"one"!==k.get(a)?!1:!0}},{}],322:[function(a,q,p){a="function"!==typeof WeakMap?!1:"[object WeakMap]"===Object.prototype.toString.call(new WeakMap);q.exports=a},{}],323:[function(a,q,p){var n=a("es5-ext/object/is-value"),k=a("es5-ext/object/set-prototype-of"),m=a("es5-ext/object/valid-object"),h=a("es5-ext/object/valid-value"),b=a("es5-ext/string/random-uniq"),g=a("d"),e=a("es6-iterator/get"),
t=a("es6-iterator/for-of");p=a("es6-symbol").toStringTag;var l=a("./is-native-implemented"),f=Array.isArray,d=Object.defineProperty,c=Object.prototype.hasOwnProperty,r=Object.getPrototypeOf,u;q.exports=u=function(a){if(!(this instanceof u))throw new TypeError("Constructor requires 'new'");var c=l&&k&&WeakMap!==u?k(new WeakMap,r(this)):this;n(a)&&(f(a)||(a=e(a)));d(c,"__weakMapData__",g("c","$weakMap$"+b()));if(!a)return c;t(a,function(b){h(b);c.set(b[0],b[1])});return c};l&&(k&&k(u,WeakMap),u.prototype=
Object.create(WeakMap.prototype,{constructor:g(u)}));Object.defineProperties(u.prototype,{delete:g(function(b){return c.call(m(b),this.__weakMapData__)?(delete b[this.__weakMapData__],!0):!1}),get:g(function(b){if(c.call(m(b),this.__weakMapData__))return b[this.__weakMapData__]}),has:g(function(b){return c.call(m(b),this.__weakMapData__)}),set:g(function(b,a){d(m(b),this.__weakMapData__,g("c",a));return this}),toString:g(function(){return"[object WeakMap]"})});d(u.prototype,p,g("c","WeakMap"))},{"./is-native-implemented":322,
d:153,"es5-ext/object/is-value":197,"es5-ext/object/set-prototype-of":203,"es5-ext/object/valid-object":207,"es5-ext/object/valid-value":208,"es5-ext/string/random-uniq":213,"es6-iterator/for-of":215,"es6-iterator/get":216,"es6-symbol":222}],324:[function(a,q,p){function n(b){return"undefined"!=typeof HTMLCanvasElement&&b instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&b instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&b instanceof HTMLVideoElement||"undefined"!=
typeof ImageData&&b instanceof ImageData}function k(b,a,c){var d=b.gl,e=d.getParameter(d.MAX_TEXTURE_SIZE);if(0>a||a>e||0>c||c>e)throw Error("gl-texture2d: Invalid texture size");b._shape=[a,c];b.bind();d.texImage2D(d.TEXTURE_2D,0,b.format,a,c,0,b.format,b.type,null);b._mipLevels=[0];return b}function m(b,a,c,d,e,f){this.gl=b;this.handle=a;this.format=e;this.type=f;this._shape=[c,d];this._mipLevels=[0];this._minFilter=this._magFilter=b.NEAREST;this._wrapT=this._wrapS=b.CLAMP_TO_EDGE;this._anisoSamples=
1;var g=this;b=[this._wrapS,this._wrapT];Object.defineProperties(b,[{get:function(){return g._wrapS},set:function(b){return g.wrapS=b}},{get:function(){return g._wrapT},set:function(b){return g.wrapT=b}}]);this._wrapVector=b;b=[this._shape[0],this._shape[1]];Object.defineProperties(b,[{get:function(){return g._shape[0]},set:function(b){return g.width=b}},{get:function(){return g._shape[1]},set:function(b){return g.height=b}}]);this._shapeVector=b}function h(b,a){return 3===b.length?1===a[2]&&a[1]===
b[0]*b[2]&&a[0]===b[2]:1===a[0]&&a[1]===b[0]}function b(b){var a=b.createTexture();b.bindTexture(b.TEXTURE_2D,a);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);return a}function g(a,c,d,e,f){var g=a.getParameter(a.MAX_TEXTURE_SIZE);if(0>c||c>g||0>d||d>g)throw Error("gl-texture2d: Invalid texture shape");
if(f===a.FLOAT&&!a.getExtension("OES_texture_float"))throw Error("gl-texture2d: Floating point textures not supported on this platform");g=b(a);a.texImage2D(a.TEXTURE_2D,0,e,c,d,0,e,f,null);return new m(a,g,c,d,e,f)}var e=a("ndarray"),t=a("ndarray-ops"),l=a("typedarray-pool");q.exports=function(a){if(1>=arguments.length)throw Error("gl-texture2d: Missing arguments for texture2d constructor");f||(f=[a.LINEAR,a.NEAREST_MIPMAP_LINEAR,a.LINEAR_MIPMAP_NEAREST,a.LINEAR_MIPMAP_NEAREST],d=[a.NEAREST,a.LINEAR,
a.NEAREST_MIPMAP_NEAREST,a.NEAREST_MIPMAP_LINEAR,a.LINEAR_MIPMAP_NEAREST,a.LINEAR_MIPMAP_LINEAR],c=[a.REPEAT,a.CLAMP_TO_EDGE,a.MIRRORED_REPEAT]);if("number"===typeof arguments[1])return g(a,arguments[1],arguments[2],arguments[3]||a.RGBA,arguments[4]||a.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return g(a,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||a.RGBA,arguments[3]||a.UNSIGNED_BYTE);if("object"===typeof arguments[1]){var k=arguments[1],r=n(k)?k:k.raw;if(r){var w=k.width|0;k=k.height|0;
var y=arguments[2]||a.RGBA,A=arguments[3]||a.UNSIGNED_BYTE,z=b(a);a.texImage2D(a.TEXTURE_2D,0,y,y,A,r);return new m(a,z,w,k,y,A)}if(k.shape&&k.data&&k.stride){z=k;var x=z.dtype;r=z.shape.slice();k=a.getParameter(a.MAX_TEXTURE_SIZE);if(0>r[0]||r[0]>k||0>r[1]||r[1]>k)throw Error("gl-texture2d: Invalid texture size");k=h(r,z.stride.slice());"float32"===x?y=a.FLOAT:"float64"===x?(y=a.FLOAT,k=!1,x="float32"):"uint8"===x?y=a.UNSIGNED_BYTE:(y=a.UNSIGNED_BYTE,k=!1,x="uint8");if(2===r.length)A=a.LUMINANCE,
r=[r[0],r[1],1],z=e(z.data,r,[z.stride[0],z.stride[1],1],z.offset);else if(3===r.length)if(1===r[2])A=a.ALPHA;else if(2===r[2])A=a.LUMINANCE_ALPHA;else if(3===r[2])A=a.RGB;else if(4===r[2])A=a.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");else throw Error("gl-texture2d: Invalid shape for texture");y!==a.FLOAT||a.getExtension("OES_texture_float")||(y=a.UNSIGNED_BYTE,k=!1);var p=z.size;if(k)z=0===z.offset&&z.data.length===p?z.data:z.data.subarray(z.offset,z.offset+p);else{var B=
[r[2],r[2]*r[0],1];w=l.malloc(p,x);B=e(w,r,B,0);"float32"!==x&&"float64"!==x||y!==a.UNSIGNED_BYTE?t.assign(B,z):t.muls(B,z,255);z=w.subarray(0,p)}x=b(a);a.texImage2D(a.TEXTURE_2D,0,A,r[0],r[1],0,A,y,z);k||l.free(w);return new m(a,x,r[0],r[1],A,y)}}throw Error("gl-texture2d: Invalid arguments for texture2d constructor");};var f=null,d=null,c=null;a=m.prototype;Object.defineProperties(a,{minFilter:{get:function(){return this._minFilter},set:function(b){this.bind();var a=this.gl;this.type===a.FLOAT&&
0<=f.indexOf(b)&&!a.getExtension("OES_texture_float_linear")&&(b=a.NEAREST);if(0>d.indexOf(b))throw Error("gl-texture2d: Unknown filter mode "+b);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,b);return this._minFilter=b}},magFilter:{get:function(){return this._magFilter},set:function(b){this.bind();var a=this.gl;this.type===a.FLOAT&&0<=f.indexOf(b)&&!a.getExtension("OES_texture_float_linear")&&(b=a.NEAREST);if(0>d.indexOf(b))throw Error("gl-texture2d: Unknown filter mode "+b);a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MAG_FILTER,b);return this._magFilter=b}},mipSamples:{get:function(){return this._anisoSamples},set:function(b){var a=this._anisoSamples;this._anisoSamples=Math.max(b,1)|0;a!==this._anisoSamples&&(b=this.gl.getExtension("EXT_texture_filter_anisotropic"))&&this.gl.texParameterf(this.gl.TEXTURE_2D,b.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples);return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(b){this.bind();if(0>c.indexOf(b))throw Error("gl-texture2d: Unknown wrap mode "+
b);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,b);return this._wrapS=b}},wrapT:{get:function(){return this._wrapT},set:function(b){this.bind();if(0>c.indexOf(b))throw Error("gl-texture2d: Unknown wrap mode "+b);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,b);return this._wrapT=b}},wrap:{get:function(){return this._wrapVector},set:function(b){Array.isArray(b)||(b=[b,b]);if(2!==b.length)throw Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var a=
0;2>a;++a)if(0>c.indexOf(b[a]))throw Error("gl-texture2d: Unknown wrap mode "+b);this._wrapS=b[0];this._wrapT=b[1];a=this.gl;this.bind();a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,this._wrapS);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,this._wrapT);return b}},shape:{get:function(){return this._shapeVector},set:function(b){if(!Array.isArray(b))b=[b|0,b|0];else if(2!==b.length)throw Error("gl-texture2d: Invalid texture shape");k(this,b[0]|0,b[1]|0);return[b[0]|0,b[1]|0]}},width:{get:function(){return this._shape[0]},
set:function(b){b|=0;k(this,b,this._shape[1]);return b}},height:{get:function(){return this._shape[1]},set:function(b){b|=0;k(this,this._shape[0],b);return b}}});a.bind=function(b){var a=this.gl;void 0!==b&&a.activeTexture(a.TEXTURE0+(b|0));a.bindTexture(a.TEXTURE_2D,this.handle);return void 0!==b?b|0:a.getParameter(a.ACTIVE_TEXTURE)-a.TEXTURE0};a.dispose=function(){this.gl.deleteTexture(this.handle)};a.generateMipmap=function(){this.bind();this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var b=Math.min(this._shape[0],
this._shape[1]),a=0;0<b;++a,b>>>=1)0>this._mipLevels.indexOf(a)&&this._mipLevels.push(a)};a.setPixels=function(b,a,c,d){var f=this.gl;this.bind();Array.isArray(a)?(d=c,c=a[1]|0,a=a[0]|0):(a=a||0,c=c||0);d=d||0;var g=n(b)?b:b.raw;if(g)0>this._mipLevels.indexOf(d)?(f.texImage2D(f.TEXTURE_2D,0,this.format,this.format,this.type,g),this._mipLevels.push(d)):f.texSubImage2D(f.TEXTURE_2D,d,a,c,this.format,this.type,g);else if(b.shape&&b.stride&&b.data){if(2>b.shape.length||a+b.shape[1]>this._shape[1]>>>d||
c+b.shape[0]>this._shape[0]>>>d||0>a||0>c)throw Error("gl-texture2d: Texture dimensions are out of bounds");g=this.format;var k=this.type,r=this._mipLevels,m=b.dtype,u=b.shape.slice();if(2>u.length||3<u.length)throw Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var v=h(u,b.stride.slice());"float32"===m?m=f.FLOAT:"float64"===m?(m=f.FLOAT,v=!1):"uint8"===m?m=f.UNSIGNED_BYTE:(m=f.UNSIGNED_BYTE,v=!1);if(2===u.length){var w=f.LUMINANCE;u=[u[0],u[1],1];b=e(b.data,u,[b.stride[0],b.stride[1],1],
b.offset)}else if(3===u.length)if(1===u[2])w=f.ALPHA;else if(2===u[2])w=f.LUMINANCE_ALPHA;else if(3===u[2])w=f.RGB;else if(4===u[2])w=f.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");else throw Error("gl-texture2d: Invalid shape for texture");w!==f.LUMINANCE&&w!==f.ALPHA||g!==f.LUMINANCE&&g!==f.ALPHA||(w=g);if(w!==g)throw Error("gl-texture2d: Incompatible texture format for setPixels");w=b.size;var p=0>r.indexOf(d);p&&r.push(d);m===k&&v?0===b.offset&&b.data.length===w?p?f.texImage2D(f.TEXTURE_2D,
d,g,u[0],u[1],0,g,k,b.data):f.texSubImage2D(f.TEXTURE_2D,d,a,c,u[0],u[1],g,k,b.data):p?f.texImage2D(f.TEXTURE_2D,d,g,u[0],u[1],0,g,k,b.data.subarray(b.offset,b.offset+w)):f.texSubImage2D(f.TEXTURE_2D,d,a,c,u[0],u[1],g,k,b.data.subarray(b.offset,b.offset+w)):(r=k===f.FLOAT?l.mallocFloat32(w):l.mallocUint8(w),v=e(r,u,[u[2],u[2]*u[0],1]),m===f.FLOAT&&k===f.UNSIGNED_BYTE?t.muls(v,b,255):t.assign(v,b),p?f.texImage2D(f.TEXTURE_2D,d,g,u[0],u[1],0,g,k,r.subarray(0,w)):f.texSubImage2D(f.TEXTURE_2D,d,a,c,u[0],
u[1],g,k,r.subarray(0,w)),k===f.FLOAT?l.freeFloat32(r):l.freeUint8(r))}else throw Error("gl-texture2d: Unsupported data type");}},{ndarray:451,"ndarray-ops":445,"typedarray-pool":543}],325:[function(a,q,p){(function(n){function k(b){if(b.container)if(b.container==document.body)document.body.style.width||(b.canvas.width=b.width||b.pixelRatio*n.innerWidth),document.body.style.height||(b.canvas.height=b.height||b.pixelRatio*n.innerHeight);else{var a=b.container.getBoundingClientRect();b.canvas.width=
b.width||a.right-a.left;b.canvas.height=b.height||a.bottom-a.top}}function m(b){return"function"===typeof b.getContext&&"width"in b&&"height"in b}function h(){var b=document.createElement("canvas");b.style.position="absolute";b.style.top=0;b.style.left=0;return b}var b=a("pick-by-alias");q.exports=function(a){a?"string"===typeof a&&(a={container:a}):a={};a=m(a)?{container:a}:"string"===typeof a.nodeName&&"function"===typeof a.appendChild&&"function"===typeof a.getBoundingClientRect?{container:a}:
"function"===typeof a.drawArrays||"function"===typeof a.drawElements?{gl:a}:b(a,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0);a.pixelRatio||(a.pixelRatio=n.pixelRatio||1);if(a.gl)return a.gl;a.canvas&&(a.container=a.canvas.parentNode);if(a.container){if("string"===typeof a.container){var e=
document.querySelector(a.container);if(!e)throw Error("Element "+a.container+" is not found");a.container=e}m(a.container)?(a.canvas=a.container,a.container=a.canvas.parentNode):a.canvas||(a.canvas=h(),a.container.appendChild(a.canvas),k(a))}else if(!a.canvas)if("undefined"!==typeof document)a.container=document.body||document.documentElement,a.canvas=h(),a.container.appendChild(a.canvas),k(a);else throw Error("Not DOM environment. Use headless-gl.");if(!a.gl)try{a.gl=a.canvas.getContext("webgl",
a.attrs)}catch(t){try{a.gl=a.canvas.getContext("experimental-webgl",a.attrs)}catch(l){a.gl=a.canvas.getContext("webgl-experimental",a.attrs)}}return a.gl}}).call(this,"undefined"!==typeof pa?pa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"pick-by-alias":466}],326:[function(a,q,p){q.exports=function(a,k,m){k?k.bind():a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);k=a.getParameter(a.MAX_VERTEX_ATTRIBS)|0;if(m){if(m.length>k)throw Error("gl-vao: Too many vertex attributes");for(var h=
0;h<m.length;++h){var b=m[h];if(b.buffer){var g=b.size||4,e=b.type||a.FLOAT,t=!!b.normalized,l=b.stride||0,f=b.offset||0;b.buffer.bind();a.enableVertexAttribArray(h);a.vertexAttribPointer(h,g,e,t,l,f)}else{if("number"===typeof b)a.vertexAttrib1f(h,b);else if(1===b.length)a.vertexAttrib1f(h,b[0]);else if(2===b.length)a.vertexAttrib2f(h,b[0],b[1]);else if(3===b.length)a.vertexAttrib3f(h,b[0],b[1],b[2]);else if(4===b.length)a.vertexAttrib4f(h,b[0],b[1],b[2],b[3]);else throw Error("gl-vao: Invalid vertex attribute");
a.disableVertexAttribArray(h)}}}else a.bindBuffer(a.ARRAY_BUFFER,null),h=0;for(;h<k;++h)a.disableVertexAttribArray(h)}},{}],327:[function(a,q,p){function n(a){this.gl=a;this._attributes=this._elements=null;this._elementsType=a.UNSIGNED_SHORT}var k=a("./do-bind.js");n.prototype.bind=function(){k(this.gl,this._elements,this._attributes)};n.prototype.update=function(a,h,b){this._elements=h;this._attributes=a;this._elementsType=b||this.gl.UNSIGNED_SHORT};n.prototype.dispose=function(){};n.prototype.unbind=
function(){};n.prototype.draw=function(a,h,b){b=b||0;var g=this.gl;this._elements?g.drawElements(a,h,this._elementsType,b):g.drawArrays(a,b,h)};q.exports=function(a){return new n(a)}},{"./do-bind.js":326}],328:[function(a,q,p){function n(a,b,g,e,k,l){this.location=a;this.dimension=b;this.a=g;this.b=e;this.c=k;this.d=l}function k(a,b,g){this.gl=a;this._ext=b;this.handle=g;this._attribs=[];this._useElements=!1;this._elementsType=a.UNSIGNED_SHORT}var m=a("./do-bind.js");n.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,
this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}};k.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)};k.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)};k.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)};k.prototype.update=
function(a,b,g){this.bind();m(this.gl,b,a);this.unbind();this._attribs.length=0;if(a)for(var e=0;e<a.length;++e){var h=a[e];"number"===typeof h?this._attribs.push(new n(e,1,h)):Array.isArray(h)&&this._attribs.push(new n(e,h.length,h[0],h[1],h[2],h[3]))}this._useElements=!!b;this._elementsType=g||this.gl.UNSIGNED_SHORT};k.prototype.draw=function(a,b,g){g=g||0;var e=this.gl;this._useElements?e.drawElements(a,b,this._elementsType,g):e.drawArrays(a,g,b)};q.exports=function(a,b){return new k(a,b,b.createVertexArrayOES())}},
{"./do-bind.js":326}],329:[function(a,q,p){function n(a){this.bindVertexArrayOES=a.bindVertexArray.bind(a);this.createVertexArrayOES=a.createVertexArray.bind(a);this.deleteVertexArrayOES=a.deleteVertexArray.bind(a)}var k=a("./lib/vao-native.js"),m=a("./lib/vao-emulated.js");q.exports=function(a,b,g,e){var h=a.createVertexArray?new n(a):a.getExtension("OES_vertex_array_object");a=h?k(a,h):m(a);a.update(b,g,e);return a}},{"./lib/vao-emulated.js":327,"./lib/vao-native.js":328}],330:[function(a,q,p){q.exports=
function(a,k,m){a[0]=k[0]+m[0];a[1]=k[1]+m[1];a[2]=k[2]+m[2];return a}},{}],331:[function(a,q,p){q.exports=function(a,b){a=n(a[0],a[1],a[2]);b=n(b[0],b[1],b[2]);k(a,a);k(b,b);b=m(a,b);return 1<b?0:Math.acos(b)};var n=a("./fromValues"),k=a("./normalize"),m=a("./dot")},{"./dot":341,"./fromValues":347,"./normalize":358}],332:[function(a,q,p){q.exports=function(a,k){a[0]=Math.ceil(k[0]);a[1]=Math.ceil(k[1]);a[2]=Math.ceil(k[2]);return a}},{}],333:[function(a,q,p){q.exports=function(a){var k=new Float32Array(3);
k[0]=a[0];k[1]=a[1];k[2]=a[2];return k}},{}],334:[function(a,q,p){q.exports=function(a,k){a[0]=k[0];a[1]=k[1];a[2]=k[2];return a}},{}],335:[function(a,q,p){q.exports=function(){var a=new Float32Array(3);a[0]=0;a[1]=0;a[2]=0;return a}},{}],336:[function(a,q,p){q.exports=function(a,k,m){var h=k[0],b=k[1];k=k[2];var g=m[0],e=m[1];m=m[2];a[0]=b*m-k*e;a[1]=k*g-h*m;a[2]=h*e-b*g;return a}},{}],337:[function(a,q,p){q.exports=a("./distance")},{"./distance":338}],338:[function(a,q,p){q.exports=function(a,k){var m=
k[0]-a[0],h=k[1]-a[1];a=k[2]-a[2];return Math.sqrt(m*m+h*h+a*a)}},{}],339:[function(a,q,p){q.exports=a("./divide")},{"./divide":340}],340:[function(a,q,p){q.exports=function(a,k,m){a[0]=k[0]/m[0];a[1]=k[1]/m[1];a[2]=k[2]/m[2];return a}},{}],341:[function(a,q,p){q.exports=function(a,k){return a[0]*k[0]+a[1]*k[1]+a[2]*k[2]}},{}],342:[function(a,q,p){q.exports=1E-6},{}],343:[function(a,q,p){q.exports=function(a,m){var h=a[0],b=a[1];a=a[2];var g=m[0],e=m[1];m=m[2];return Math.abs(h-g)<=n*Math.max(1,Math.abs(h),
Math.abs(g))&&Math.abs(b-e)<=n*Math.max(1,Math.abs(b),Math.abs(e))&&Math.abs(a-m)<=n*Math.max(1,Math.abs(a),Math.abs(m))};var n=a("./epsilon")},{"./epsilon":342}],344:[function(a,q,p){q.exports=function(a,k){return a[0]===k[0]&&a[1]===k[1]&&a[2]===k[2]}},{}],345:[function(a,q,p){q.exports=function(a,k){a[0]=Math.floor(k[0]);a[1]=Math.floor(k[1]);a[2]=Math.floor(k[2]);return a}},{}],346:[function(a,q,p){q.exports=function(a,m,h,b,g,e){m||(m=3);h||(h=0);for(b=b?Math.min(b*m+h,a.length):a.length;h<b;h+=
m)n[0]=a[h],n[1]=a[h+1],n[2]=a[h+2],g(n,n,e),a[h]=n[0],a[h+1]=n[1],a[h+2]=n[2];return a};var n=a("./create")()},{"./create":335}],347:[function(a,q,p){q.exports=function(a,k,m){var h=new Float32Array(3);h[0]=a;h[1]=k;h[2]=m;return h}},{}],348:[function(a,q,p){q.exports={EPSILON:a("./epsilon"),create:a("./create"),clone:a("./clone"),angle:a("./angle"),fromValues:a("./fromValues"),copy:a("./copy"),set:a("./set"),equals:a("./equals"),exactEquals:a("./exactEquals"),add:a("./add"),subtract:a("./subtract"),
sub:a("./sub"),multiply:a("./multiply"),mul:a("./mul"),divide:a("./divide"),div:a("./div"),min:a("./min"),max:a("./max"),floor:a("./floor"),ceil:a("./ceil"),round:a("./round"),scale:a("./scale"),scaleAndAdd:a("./scaleAndAdd"),distance:a("./distance"),dist:a("./dist"),squaredDistance:a("./squaredDistance"),sqrDist:a("./sqrDist"),length:a("./length"),len:a("./len"),squaredLength:a("./squaredLength"),sqrLen:a("./sqrLen"),negate:a("./negate"),inverse:a("./inverse"),normalize:a("./normalize"),dot:a("./dot"),
cross:a("./cross"),lerp:a("./lerp"),random:a("./random"),transformMat4:a("./transformMat4"),transformMat3:a("./transformMat3"),transformQuat:a("./transformQuat"),rotateX:a("./rotateX"),rotateY:a("./rotateY"),rotateZ:a("./rotateZ"),forEach:a("./forEach")}},{"./add":330,"./angle":331,"./ceil":332,"./clone":333,"./copy":334,"./create":335,"./cross":336,"./dist":337,"./distance":338,"./div":339,"./divide":340,"./dot":341,"./epsilon":342,"./equals":343,"./exactEquals":344,"./floor":345,"./forEach":346,
"./fromValues":347,"./inverse":349,"./len":350,"./length":351,"./lerp":352,"./max":353,"./min":354,"./mul":355,"./multiply":356,"./negate":357,"./normalize":358,"./random":359,"./rotateX":360,"./rotateY":361,"./rotateZ":362,"./round":363,"./scale":364,"./scaleAndAdd":365,"./set":366,"./sqrDist":367,"./sqrLen":368,"./squaredDistance":369,"./squaredLength":370,"./sub":371,"./subtract":372,"./transformMat3":373,"./transformMat4":374,"./transformQuat":375}],349:[function(a,q,p){q.exports=function(a,k){a[0]=
1/k[0];a[1]=1/k[1];a[2]=1/k[2];return a}},{}],350:[function(a,q,p){q.exports=a("./length")},{"./length":351}],351:[function(a,q,p){q.exports=function(a){var k=a[0],m=a[1];a=a[2];return Math.sqrt(k*k+m*m+a*a)}},{}],352:[function(a,q,p){q.exports=function(a,k,m,h){var b=k[0],g=k[1];k=k[2];a[0]=b+h*(m[0]-b);a[1]=g+h*(m[1]-g);a[2]=k+h*(m[2]-k);return a}},{}],353:[function(a,q,p){q.exports=function(a,k,m){a[0]=Math.max(k[0],m[0]);a[1]=Math.max(k[1],m[1]);a[2]=Math.max(k[2],m[2]);return a}},{}],354:[function(a,
q,p){q.exports=function(a,k,m){a[0]=Math.min(k[0],m[0]);a[1]=Math.min(k[1],m[1]);a[2]=Math.min(k[2],m[2]);return a}},{}],355:[function(a,q,p){q.exports=a("./multiply")},{"./multiply":356}],356:[function(a,q,p){q.exports=function(a,k,m){a[0]=k[0]*m[0];a[1]=k[1]*m[1];a[2]=k[2]*m[2];return a}},{}],357:[function(a,q,p){q.exports=function(a,k){a[0]=-k[0];a[1]=-k[1];a[2]=-k[2];return a}},{}],358:[function(a,q,p){q.exports=function(a,k){var m=k[0],h=k[1],b=k[2];m=m*m+h*h+b*b;0<m&&(m=1/Math.sqrt(m),a[0]=
k[0]*m,a[1]=k[1]*m,a[2]=k[2]*m);return a}},{}],359:[function(a,q,p){q.exports=function(a,k){k=k||1;var m=2*Math.random()*Math.PI,h=2*Math.random()-1,b=Math.sqrt(1-h*h)*k;a[0]=Math.cos(m)*b;a[1]=Math.sin(m)*b;a[2]=h*k;return a}},{}],360:[function(a,q,p){q.exports=function(a,k,m,h){var b=m[1];m=m[2];var g=k[1]-b,e=k[2]-m,t=Math.sin(h);h=Math.cos(h);a[0]=k[0];a[1]=b+g*h-e*t;a[2]=m+g*t+e*h;return a}},{}],361:[function(a,q,p){q.exports=function(a,k,m,h){var b=m[0];m=m[2];var g=k[0]-b,e=k[2]-m,t=Math.sin(h);
h=Math.cos(h);a[0]=b+e*t+g*h;a[1]=k[1];a[2]=m+e*h-g*t;return a}},{}],362:[function(a,q,p){q.exports=function(a,k,m,h){var b=m[0];m=m[1];var g=k[0]-b,e=k[1]-m,t=Math.sin(h);h=Math.cos(h);a[0]=b+g*h-e*t;a[1]=m+g*t+e*h;a[2]=k[2];return a}},{}],363:[function(a,q,p){q.exports=function(a,k){a[0]=Math.round(k[0]);a[1]=Math.round(k[1]);a[2]=Math.round(k[2]);return a}},{}],364:[function(a,q,p){q.exports=function(a,k,m){a[0]=k[0]*m;a[1]=k[1]*m;a[2]=k[2]*m;return a}},{}],365:[function(a,q,p){q.exports=function(a,
k,m,h){a[0]=k[0]+m[0]*h;a[1]=k[1]+m[1]*h;a[2]=k[2]+m[2]*h;return a}},{}],366:[function(a,q,p){q.exports=function(a,k,m,h){a[0]=k;a[1]=m;a[2]=h;return a}},{}],367:[function(a,q,p){q.exports=a("./squaredDistance")},{"./squaredDistance":369}],368:[function(a,q,p){q.exports=a("./squaredLength")},{"./squaredLength":370}],369:[function(a,q,p){q.exports=function(a,k){var m=k[0]-a[0],h=k[1]-a[1];a=k[2]-a[2];return m*m+h*h+a*a}},{}],370:[function(a,q,p){q.exports=function(a){var k=a[0],m=a[1];a=a[2];return k*
k+m*m+a*a}},{}],371:[function(a,q,p){q.exports=a("./subtract")},{"./subtract":372}],372:[function(a,q,p){q.exports=function(a,k,m){a[0]=k[0]-m[0];a[1]=k[1]-m[1];a[2]=k[2]-m[2];return a}},{}],373:[function(a,q,p){q.exports=function(a,k,m){var h=k[0],b=k[1];k=k[2];a[0]=h*m[0]+b*m[3]+k*m[6];a[1]=h*m[1]+b*m[4]+k*m[7];a[2]=h*m[2]+b*m[5]+k*m[8];return a}},{}],374:[function(a,q,p){q.exports=function(a,k,m){var h=k[0],b=k[1];k=k[2];var g=m[3]*h+m[7]*b+m[11]*k+m[15];g=g||1;a[0]=(m[0]*h+m[4]*b+m[8]*k+m[12])/
g;a[1]=(m[1]*h+m[5]*b+m[9]*k+m[13])/g;a[2]=(m[2]*h+m[6]*b+m[10]*k+m[14])/g;return a}},{}],375:[function(a,q,p){q.exports=function(a,k,m){var h=k[0],b=k[1],g=k[2];k=m[0];var e=m[1],t=m[2];m=m[3];var l=m*h+e*g-t*b,f=m*b+t*h-k*g,d=m*g+k*b-e*h;h=-k*h-e*b-t*g;a[0]=l*m+h*-k+f*-t-d*-e;a[1]=f*m+h*-e+d*-k-l*-t;a[2]=d*m+h*-t+l*-e-f*-k;return a}},{}],376:[function(a,q,p){q.exports=function(a,k,m){a[0]=k[0]+m[0];a[1]=k[1]+m[1];a[2]=k[2]+m[2];a[3]=k[3]+m[3];return a}},{}],377:[function(a,q,p){q.exports=function(a){var k=
new Float32Array(4);k[0]=a[0];k[1]=a[1];k[2]=a[2];k[3]=a[3];return k}},{}],378:[function(a,q,p){q.exports=function(a,k){a[0]=k[0];a[1]=k[1];a[2]=k[2];a[3]=k[3];return a}},{}],379:[function(a,q,p){q.exports=function(){var a=new Float32Array(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a}},{}],380:[function(a,q,p){q.exports=function(a,k){var m=k[0]-a[0],h=k[1]-a[1],b=k[2]-a[2];a=k[3]-a[3];return Math.sqrt(m*m+h*h+b*b+a*a)}},{}],381:[function(a,q,p){q.exports=function(a,k,m){a[0]=k[0]/m[0];a[1]=k[1]/m[1];a[2]=
k[2]/m[2];a[3]=k[3]/m[3];return a}},{}],382:[function(a,q,p){q.exports=function(a,k){return a[0]*k[0]+a[1]*k[1]+a[2]*k[2]+a[3]*k[3]}},{}],383:[function(a,q,p){q.exports=function(a,k,m,h){var b=new Float32Array(4);b[0]=a;b[1]=k;b[2]=m;b[3]=h;return b}},{}],384:[function(a,q,p){q.exports={create:a("./create"),clone:a("./clone"),fromValues:a("./fromValues"),copy:a("./copy"),set:a("./set"),add:a("./add"),subtract:a("./subtract"),multiply:a("./multiply"),divide:a("./divide"),min:a("./min"),max:a("./max"),
scale:a("./scale"),scaleAndAdd:a("./scaleAndAdd"),distance:a("./distance"),squaredDistance:a("./squaredDistance"),length:a("./length"),squaredLength:a("./squaredLength"),negate:a("./negate"),inverse:a("./inverse"),normalize:a("./normalize"),dot:a("./dot"),lerp:a("./lerp"),random:a("./random"),transformMat4:a("./transformMat4"),transformQuat:a("./transformQuat")}},{"./add":376,"./clone":377,"./copy":378,"./create":379,"./distance":380,"./divide":381,"./dot":382,"./fromValues":383,"./inverse":385,"./length":386,
"./lerp":387,"./max":388,"./min":389,"./multiply":390,"./negate":391,"./normalize":392,"./random":393,"./scale":394,"./scaleAndAdd":395,"./set":396,"./squaredDistance":397,"./squaredLength":398,"./subtract":399,"./transformMat4":400,"./transformQuat":401}],385:[function(a,q,p){q.exports=function(a,k){a[0]=1/k[0];a[1]=1/k[1];a[2]=1/k[2];a[3]=1/k[3];return a}},{}],386:[function(a,q,p){q.exports=function(a){var k=a[0],m=a[1],h=a[2];a=a[3];return Math.sqrt(k*k+m*m+h*h+a*a)}},{}],387:[function(a,q,p){q.exports=
function(a,k,m,h){var b=k[0],g=k[1],e=k[2];k=k[3];a[0]=b+h*(m[0]-b);a[1]=g+h*(m[1]-g);a[2]=e+h*(m[2]-e);a[3]=k+h*(m[3]-k);return a}},{}],388:[function(a,q,p){q.exports=function(a,k,m){a[0]=Math.max(k[0],m[0]);a[1]=Math.max(k[1],m[1]);a[2]=Math.max(k[2],m[2]);a[3]=Math.max(k[3],m[3]);return a}},{}],389:[function(a,q,p){q.exports=function(a,k,m){a[0]=Math.min(k[0],m[0]);a[1]=Math.min(k[1],m[1]);a[2]=Math.min(k[2],m[2]);a[3]=Math.min(k[3],m[3]);return a}},{}],390:[function(a,q,p){q.exports=function(a,
k,m){a[0]=k[0]*m[0];a[1]=k[1]*m[1];a[2]=k[2]*m[2];a[3]=k[3]*m[3];return a}},{}],391:[function(a,q,p){q.exports=function(a,k){a[0]=-k[0];a[1]=-k[1];a[2]=-k[2];a[3]=-k[3];return a}},{}],392:[function(a,q,p){q.exports=function(a,k){var m=k[0],h=k[1],b=k[2];k=k[3];var g=m*m+h*h+b*b+k*k;0<g&&(g=1/Math.sqrt(g),a[0]=m*g,a[1]=h*g,a[2]=b*g,a[3]=k*g);return a}},{}],393:[function(a,q,p){var n=a("./normalize"),k=a("./scale");q.exports=function(a,h){h=h||1;a[0]=Math.random();a[1]=Math.random();a[2]=Math.random();
a[3]=Math.random();n(a,a);k(a,a,h);return a}},{"./normalize":392,"./scale":394}],394:[function(a,q,p){q.exports=function(a,k,m){a[0]=k[0]*m;a[1]=k[1]*m;a[2]=k[2]*m;a[3]=k[3]*m;return a}},{}],395:[function(a,q,p){q.exports=function(a,k,m,h){a[0]=k[0]+m[0]*h;a[1]=k[1]+m[1]*h;a[2]=k[2]+m[2]*h;a[3]=k[3]+m[3]*h;return a}},{}],396:[function(a,q,p){q.exports=function(a,k,m,h,b){a[0]=k;a[1]=m;a[2]=h;a[3]=b;return a}},{}],397:[function(a,q,p){q.exports=function(a,k){var m=k[0]-a[0],h=k[1]-a[1],b=k[2]-a[2];
a=k[3]-a[3];return m*m+h*h+b*b+a*a}},{}],398:[function(a,q,p){q.exports=function(a){var k=a[0],m=a[1],h=a[2];a=a[3];return k*k+m*m+h*h+a*a}},{}],399:[function(a,q,p){q.exports=function(a,k,m){a[0]=k[0]-m[0];a[1]=k[1]-m[1];a[2]=k[2]-m[2];a[3]=k[3]-m[3];return a}},{}],400:[function(a,q,p){q.exports=function(a,k,m){var h=k[0],b=k[1],g=k[2];k=k[3];a[0]=m[0]*h+m[4]*b+m[8]*g+m[12]*k;a[1]=m[1]*h+m[5]*b+m[9]*g+m[13]*k;a[2]=m[2]*h+m[6]*b+m[10]*g+m[14]*k;a[3]=m[3]*h+m[7]*b+m[11]*g+m[15]*k;return a}},{}],401:[function(a,
q,p){q.exports=function(a,k,m){var h=k[0],b=k[1],g=k[2],e=m[0],t=m[1],l=m[2];m=m[3];var f=m*h+t*g-l*b,d=m*b+l*h-e*g,c=m*g+e*b-t*h;h=-e*h-t*b-l*g;a[0]=f*m+h*-e+d*-l-c*-t;a[1]=d*m+h*-t+c*-e-f*-l;a[2]=c*m+h*-l+f*-t-d*-e;a[3]=k[3];return a}},{}],402:[function(a,q,p){var n=a("glsl-tokenizer"),k=a("atob-lite");q.exports=function(a){a=Array.isArray(a)?a:n(a);for(var h=0;h<a.length;h++){var b=a[h];if("preprocessor"===b.type&&(b=b.data.match(/#define\s+SHADER_NAME(_B64)?\s+(.+)$/))&&b[2])return a=b[2],(b[1]?
k(a):a).trim()}}},{"atob-lite":74,"glsl-tokenizer":409}],403:[function(a,q,p){q.exports=function(a){function B(b){b.length&&P.push({type:x[M],data:b,position:V,line:Q,column:T})}function p(){O=O.length?[]:O;if("/"===N&&"*"===I)return V=K+H-1,M=t,N=I,H+1;if("/"===N&&"/"===I)return V=K+H-1,M=l,N=I,H+1;if("#"===I)return M=f,V=K+H,H;if(/\s/.test(I))return M=y,V=K+H,H;Y=/\d/.test(I);ca=/[^\w_]/.test(I);V=K+H;M=Y?c:ca?d:e;return H}function q(){if(("\r"===I||"\n"===I)&&"\\"!==N)return B(O.join("")),M=g,
H;O.push(I);N=I;return H+1}function C(){if("."===N&&/\d/.test(I))return M=r,H;if("/"===N&&"*"===I)return M=t,H;if("/"===N&&"/"===I)return M=l,H;if("."===I&&O.length){for(;F(O););M=r;return H}if(";"===I||")"===I||"("===I){if(O.length)for(;F(O););B(I);M=g;return H+1}var b=2===O.length&&"\x3d"!==I;if(/[\w_\d\s]/.test(I)||b){for(;F(O););M=g;return H}O.push(I);N=I;return H+1}function F(b){var a=0;do{var c=k.indexOf(b.slice(0,b.length+a).join(""));var d=k[c];if(-1===c){if(0<a--+b.length)continue;d=b.slice(0,
1).join("")}B(d);V+=d.length;O=O.slice(d.length);return O.length}while(1)}function L(){if("."===I||/[eE]/.test(I))return O.push(I),M=r,N=I,H+1;if("x"===I&&1===O.length&&"0"===O[0])return M=z,O.push(I),N=I,H+1;if(/[^\d]/.test(I))return B(O.join("")),M=g,H;O.push(I);N=I;return H+1}function J(){"f"===I&&(O.push(I),N=I,H+=1);if(/[eE]/.test(I)||"-"===I&&/[eE]/.test(N))return O.push(I),N=I,H+1;if(/[^\d]/.test(I))return B(O.join("")),M=g,H;O.push(I);N=I;return H+1}var H=0,K=0,M=g,I,N,O=[],P=[],Q=1,T=0,V=
0,Y=!1,ca=!1,Z="",R;a=a||{};var U=m,X=n;"300 es"===a.version&&(U=b,X=h);return function(b){P=[];if(null!==b){b=b.replace?b.replace(/\r\n/g,"\n"):b;H=0;Z+=b;for(R=Z.length;I=Z[H],H<R;){b=H;switch(M){case t:"/"===I&&"*"===N?(O.push(I),B(O.join("")),M=g):(O.push(I),N=I);H+=1;break;case l:H=q();break;case f:H=q();break;case d:H=C();break;case c:H=L();break;case z:/[^a-fA-F0-9]/.test(I)?(B(O.join("")),M=g):(O.push(I),N=I,H+=1);break;case r:H=J();break;case e:if(/[^\d\w_]/.test(I)){var a=O.join("");M=-1<
X.indexOf(a)?w:-1<U.indexOf(a)?v:u;B(O.join(""));M=g}else O.push(I),N=I,H+=1;break;case y:/[^\s]/g.test(I)?(B(O.join("")),M=g):(O.push(I),N=I,H+=1);break;case g:H=p()}if(b!==H)switch(Z[b]){case "\n":T=0;++Q;break;default:++T}}K+=H;Z=Z.slice(H);return P}O.length&&B(O.join(""));M=A;B("(eof)");return P}};var n=a("./lib/literals"),k=a("./lib/operators"),m=a("./lib/builtins"),h=a("./lib/literals-300es"),b=a("./lib/builtins-300es"),g=999,e=9999,t=0,l=1,f=2,d=3,c=4,r=5,u=6,v=7,w=8,y=9,A=10,z=11,x="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ")},
{"./lib/builtins":405,"./lib/builtins-300es":404,"./lib/literals":407,"./lib/literals-300es":406,"./lib/operators":408}],404:[function(a,q,p){a=a("./builtins");a=a.slice().filter(function(a){return!/^(gl_|texture)/.test(a)});q.exports=a.concat("gl_VertexID gl_InstanceID gl_Position gl_PointSize gl_FragCoord gl_FrontFacing gl_FragDepth gl_PointCoord gl_MaxVertexAttribs gl_MaxVertexUniformVectors gl_MaxVertexOutputVectors gl_MaxFragmentInputVectors gl_MaxVertexTextureImageUnits gl_MaxCombinedTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformVectors gl_MaxDrawBuffers gl_MinProgramTexelOffset gl_MaxProgramTexelOffset gl_DepthRangeParameters gl_DepthRange trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" "))},
{"./builtins":405}],405:[function(a,q,p){q.exports="abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")},
{}],406:[function(a,q,p){a=a("./literals");q.exports=a.slice().concat("layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray".split(" "))},
{"./literals":407}],407:[function(a,q,p){q.exports="precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")},
{}],408:[function(a,q,p){q.exports="\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")},{}],409:[function(a,q,p){var n=a("./index");q.exports=function(a,m){m=n(m);var h=[];h=h.concat(m(a));return h=h.concat(m(null))}},{"./index":403}],410:[function(a,q,p){q.exports=function(a){"string"===typeof a&&(a=[a]);for(var k=[].slice.call(arguments,
1),m=[],h=0;h<a.length-1;h++)m.push(a[h],k[h]||"");m.push(a[h]);return m.join("")}},{}],411:[function(a,q,p){p="undefined"!==typeof pa?pa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};a=a("is-browser");a="function"===typeof p.matchMedia?!p.matchMedia("(hover: none)").matches:a;q.exports=a},{"is-browser":418}],412:[function(a,q,p){function n(){var a=!1;try{var m=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",null,m);window.removeEventListener("test",
null,m)}catch(h){a=!1}return a}a=a("is-browser");q.exports=a&&n()},{"is-browser":418}],413:[function(a,q,p){p.read=function(a,k,m,h,b){var g=8*b-h-1;var e=(1<<g)-1,t=e>>1,l=-7;b=m?b-1:0;var f=m?-1:1,d=a[k+b];b+=f;m=d&(1<<-l)-1;d>>=-l;for(l+=g;0<l;m=256*m+a[k+b],b+=f,l-=8);g=m&(1<<-l)-1;m>>=-l;for(l+=h;0<l;g=256*g+a[k+b],b+=f,l-=8);if(0===m)m=1-t;else{if(m===e)return g?NaN:Infinity*(d?-1:1);g+=Math.pow(2,h);m-=t}return(d?-1:1)*g*Math.pow(2,m-h)};p.write=function(a,k,m,h,b,g){var e,t=8*g-b-1,l=(1<<
t)-1,f=l>>1,d=23===b?Math.pow(2,-24)-Math.pow(2,-77):0;g=h?0:g-1;var c=h?1:-1,r=0>k||0===k&&0>1/k?1:0;k=Math.abs(k);isNaN(k)||Infinity===k?(k=isNaN(k)?1:0,h=l):(h=Math.floor(Math.log(k)/Math.LN2),1>k*(e=Math.pow(2,-h))&&(h--,e*=2),k=1<=h+f?k+d/e:k+d*Math.pow(2,1-f),2<=k*e&&(h++,e/=2),h+f>=l?(k=0,h=l):1<=h+f?(k=(k*e-1)*Math.pow(2,b),h+=f):(k=k*Math.pow(2,f-1)*Math.pow(2,b),h=0));for(;8<=b;a[m+g]=k&255,g+=c,k/=256,b-=8);h=h<<b|k;for(t+=b;0<t;a[m+g]=h&255,g+=c,h/=256,t-=8);a[m+g-c]|=128*r}},{}],414:[function(a,
q,p){function n(b,a,d){this.vertices=b;this.adjacent=a;this.boundary=d;this.lastVisited=-1}function k(b,a,d){this.vertices=b;this.cell=a;this.index=d}function m(b,a){return e(b.vertices,a.vertices)}function h(b){for(var a=["function orient(){var tuple\x3dthis.tuple;return test("],d=0;d<=b;++d)0<d&&a.push(","),a.push("tuple[",d,"]");a.push(")}return orient");a=new Function("test",a.join(""));(b=g[b+1])||(b=g);return a(b)}function b(b,a,d){this.dimension=b;this.vertices=a;this.simplices=d;this.interior=
d.filter(function(b){return!b.boundary});this.tuple=Array(b+1);for(a=0;a<=b;++a)this.tuple[a]=this.vertices[a];(a=t[b])||(a=t[b]=h(b));this.orient=a}q.exports=function(a,e){var d=a.length;if(0===d)throw Error("Must have at least d+1 points");var c=a[0].length;if(d<=c)throw Error("Must input at least d+1 points");var f=a.slice(0,c+1),h=g.apply(void 0,f);if(0===h)throw Error("Input not in general position");for(var k=Array(c+1),l=0;l<=c;++l)k[l]=l;0>h&&(k[0]=1,k[1]=0);h=new n(k,Array(c+1),!1);var t=
h.adjacent,m=Array(c+2);for(l=0;l<=c;++l){for(var z=k.slice(),x=0;x<=c;++x)x===l&&(z[x]=-1);x=z[0];z[0]=z[1];z[1]=x;z=new n(z,Array(c+1),!0);t[l]=z;m[l]=z}m[c+1]=h;for(l=0;l<=c;++l)for(z=t[l].vertices,k=t[l].adjacent,x=0;x<=c;++x){var p=z[x];if(0>p)k[x]=h;else for(var B=0;B<=c;++B)0>t[B].vertices.indexOf(p)&&(k[x]=t[B])}f=new b(c,f,m);e=!!e;for(l=c+1;l<d;++l)f.insert(a[l],e);return f.boundary()};var g=a("robust-orientation"),e=a("simplicial-complex").compareCells;n.prototype.flip=function(){var b=
this.vertices[0];this.vertices[0]=this.vertices[1];this.vertices[1]=b;b=this.adjacent[0];this.adjacent[0]=this.adjacent[1];this.adjacent[1]=b};var t=[];a=b.prototype;a.handleBoundaryDegeneracy=function(b,a){var d=this.dimension,c=this.vertices.length-1,e=this.tuple,f=this.vertices,g=[b];for(b.lastVisited=-c;0<g.length;){b=g.pop();b=b.adjacent;for(var h=0;h<=d;++h){var k=b[h];if(k.boundary&&!(k.lastVisited<=-c)){for(var l=k.vertices,t=0;t<=d;++t){var m=l[t];e[t]=0>m?a:f[m]}l=this.orient();if(0<l)return k;
k.lastVisited=-c;0===l&&g.push(k)}}}return null};a.walk=function(b,a){var d=this.vertices.length-1,c=this.dimension,e=this.vertices,f=this.tuple,g=this.interior[a?this.interior.length*Math.random()|0:this.interior.length-1];a:for(;!g.boundary;){var h=g.vertices;a=g.adjacent;for(var k=0;k<=c;++k)f[k]=e[h[k]];g.lastVisited=d;for(k=0;k<=c;++k)if(g=a[k],!(g.lastVisited>=d)){h=f[k];f[k]=b;var l=this.orient();f[k]=h;if(0>l)continue a;else g.lastVisited=g.boundary?-d:d}return}return g};a.addPeaks=function(b,
a){var d=this.vertices.length-1,c=this.dimension,e=this.vertices,f=this.tuple,g=this.interior,h=this.simplices,l=[a];a.lastVisited=d;a.vertices[a.vertices.indexOf(-1)]=d;a.boundary=!1;g.push(a);for(var t=[];0<l.length;){a=l.pop();var z=a.vertices,x=a.adjacent,p=z.indexOf(d);if(!(0>p))for(var B=0;B<=c;++B)if(B!==p){var q=x[B];if(q.boundary&&!(q.lastVisited>=d)){var G=q.vertices;if(q.lastVisited!==-d){for(var E=0,F=0;F<=c;++F)0>G[F]?(E=F,f[F]=b):f[F]=e[G[F]];if(0<this.orient()){G[E]=d;q.boundary=!1;
g.push(q);l.push(q);q.lastVisited=d;continue}else q.lastVisited=-d}F=q.adjacent;G=z.slice();var L=x.slice();E=new n(G,L,!0);h.push(E);var J=F.indexOf(a);if(!(0>J))for(F[J]=E,L[p]=q,G[B]=-1,L[B]=a,x[B]=E,E.flip(),F=0;F<=c;++F)if(q=G[F],!(0>q||q===d)){q=Array(c-1);for(J=L=0;J<=c;++J){var H=G[J];0>H||J===F||(q[L++]=H)}t.push(new k(q,E,F))}}}}t.sort(m);for(B=0;B+1<t.length;B+=2)b=t[B],a=t[B+1],d=a.index,0>b.index||0>d||(b.cell.adjacent[b.index]=a.cell,a.cell.adjacent[a.index]=b.cell)};a.insert=function(b,
a){var d=this.vertices;d.push(b);if(a=this.walk(b,a)){for(var c=this.dimension,e=this.tuple,f=0;f<=c;++f){var g=a.vertices[f];e[f]=0>g?b:d[g]}d=this.orient(e);if(!(0>d)){if(0===d&&(a=this.handleBoundaryDegeneracy(a,b),!a))return;this.addPeaks(b,a)}}};a.boundary=function(){for(var b=this.dimension,a=[],d=this.simplices,c=d.length,e=0;e<c;++e){var g=d[e];if(g.boundary){var h=Array(b);g=g.vertices;for(var k=0,t=0,m=0;m<=b;++m)0<=g[m]?h[k++]=g[m]:t=m&1;t===(b&1)&&(g=h[0],h[0]=h[1],h[1]=g);a.push(h)}}return a}},
{"robust-orientation":508,"simplicial-complex":518}],415:[function(a,q,p){function n(b,a,c,d,e){this.mid=b;this.left=a;this.right=c;this.leftPoints=d;this.rightPoints=e;this.count=(a?a.count:0)+(c?c.count:0)+d.length}function k(b,a){b.mid=a.mid;b.left=a.left;b.right=a.right;b.leftPoints=a.leftPoints;b.rightPoints=a.rightPoints;b.count=a.count}function m(b,a){a=d(a);b.mid=a.mid;b.left=a.left;b.right=a.right;b.leftPoints=a.leftPoints;b.rightPoints=a.rightPoints;b.count=a.count}function h(b,a){var c=
b.intervals([]);a=c.indexOf(a);if(0>a)return 0;c.splice(a,1);m(b,c);return 1}function b(b,a,c){for(var d=0;d<b.length&&b[d][0]<=a;++d){var e=c(b[d]);if(e)return e}}function g(b,a,c){for(var d=b.length-1;0<=d&&b[d][1]>=a;--d){var e=c(b[d]);if(e)return e}}function e(b,a){for(var c=0;c<b.length;++c){var d=a(b[c]);if(d)return d}}function t(b,a){return b-a}function l(b,a){var c=b[0]-a[0];return c?c:b[1]-a[1]}function f(b,a){var c=b[1]-a[1];return c?c:b[0]-a[0]}function d(b){if(0===b.length)return null;
for(var a=[],c=0;c<b.length;++c)a.push(b[c][0],b[c][1]);a.sort(t);a=a[a.length>>1];var e=[],g=[],h=[];for(c=0;c<b.length;++c){var k=b[c];k[1]<a?e.push(k):a<k[0]?g.push(k):h.push(k)}b=h.slice();h.sort(l);b.sort(f);return new n(a,d(e),d(g),h,b)}function c(b){this.root=b}var r=a("binary-search-bounds");q.exports=function(b){return b&&0!==b.length?new c(d(b)):new c(null)};a=n.prototype;a.intervals=function(b){b.push.apply(b,this.leftPoints);this.left&&this.left.intervals(b);this.right&&this.right.intervals(b);
return b};a.insert=function(b){var a=this.count-this.leftPoints.length;this.count+=1;if(b[1]<this.mid)this.left?4*(this.left.count+1)>3*(a+1)?(a=this.intervals([]),a.push(b),m(this,a)):this.left.insert(b):this.left=d([b]);else if(b[0]>this.mid)this.right?4*(this.right.count+1)>3*(a+1)?(a=this.intervals([]),a.push(b),m(this,a)):this.right.insert(b):this.right=d([b]);else{a=r.ge(this.leftPoints,b,l);var c=r.ge(this.rightPoints,b,f);this.leftPoints.splice(a,0,b);this.rightPoints.splice(c,0,b)}};a.remove=
function(b){var a=this.count-this.leftPoints;if(b[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(a-1))return h(this,b);a=this.left.remove(b);if(2===a)return this.left=null,--this.count,1;1===a&&--this.count;return a}if(b[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(a-1))return h(this,b);a=this.right.remove(b);if(2===a)return this.right=null,--this.count,1;1===a&&--this.count;return a}if(1===this.count)return this.leftPoints[0]===b?2:0;if(1===
this.leftPoints.length&&this.leftPoints[0]===b){if(this.left&&this.right){b=this;for(var c=this.left;c.right;)b=c,c=c.right;if(b===this)c.right=this.right;else{var d=this.left;a=this.right;b.count-=c.count;b.right=c.left;c.left=d;c.right=a}k(this,c);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?k(this,this.left):k(this,this.right);return 1}for(d=r.ge(this.leftPoints,b,l);d<this.leftPoints.length&&this.leftPoints[d][0]===b[0];++d)if(this.leftPoints[d]===
b)for(--this.count,this.leftPoints.splice(d,1),a=r.ge(this.rightPoints,b,f);a<this.rightPoints.length&&this.rightPoints[a][1]===b[1];++a)if(this.rightPoints[a]===b)return this.rightPoints.splice(a,1),1;return 0};a.queryPoint=function(a,c){if(a<this.mid){if(this.left){var d=this.left.queryPoint(a,c);if(d)return d}return b(this.leftPoints,a,c)}return a>this.mid?this.right&&(d=this.right.queryPoint(a,c))?d:g(this.rightPoints,a,c):e(this.leftPoints,c)};a.queryInterval=function(a,c,d){if(a<this.mid&&this.left){var f=
this.left.queryInterval(a,c,d);if(f)return f}return c>this.mid&&this.right&&(f=this.right.queryInterval(a,c,d))?f:c<this.mid?b(this.leftPoints,c,d):a>this.mid?g(this.rightPoints,a,d):e(this.leftPoints,d)};a=c.prototype;a.insert=function(b){this.root?this.root.insert(b):this.root=new n(b[0],null,null,[b],[b])};a.remove=function(b){return this.root?(b=this.root.remove(b),2===b&&(this.root=null),0!==b):!1};a.queryPoint=function(b,a){if(this.root)return this.root.queryPoint(b,a)};a.queryInterval=function(b,
a,c){if(b<=a&&this.root)return this.root.queryInterval(b,a,c)};Object.defineProperty(a,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(a,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":93}],416:[function(a,q,p){q.exports=function(a,k){k=k||Array(a.length);for(var m=0;m<a.length;++m)k[a[m]]=m;return k}},{}],417:[function(a,q,p){q.exports=function(a){for(var k=Array(a),m=0;m<a;++m)k[m]=m;return k}},{}],418:[function(a,
q,p){q.exports=!0},{}],419:[function(a,q,p){function n(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}q.exports=function(a){return null!=a&&(n(a)||"function"===typeof a.readFloatLE&&"function"===typeof a.slice&&n(a.slice(0,0))||!!a._isBuffer)}},{}],420:[function(a,q,p){q.exports="undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],421:[function(a,q,p){function n(a){a||(a={});var b=a.ua;b||"undefined"===
typeof navigator||(b=navigator.userAgent);b&&b.headers&&"string"===typeof b.headers["user-agent"]&&(b=b.headers["user-agent"]);if("string"!==typeof b)return!1;var g=a.tablet?m.test(b):k.test(b);!g&&a.tablet&&a.featureDetect&&navigator&&1<navigator.maxTouchPoints&&-1!==b.indexOf("Macintosh")&&-1!==b.indexOf("Safari")&&(g=!0);return g}q.exports=n;q.exports.isMobile=n;q.exports.default=n;var k=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,
m=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i},{}],422:[function(a,q,p){q.exports=function(a){var k=typeof a;return null!==a&&("object"===k||"function"===k)}},{}],423:[function(a,q,p){var n=Object.prototype.toString;
q.exports=function(a){var k;return"[object Object]"===n.call(a)&&(k=Object.getPrototypeOf(a),null===k||k===Object.getPrototypeOf({}))}},{}],424:[function(a,q,p){q.exports=function(a){for(var k=a.length,m,h=0;h<k;h++)if(m=a.charCodeAt(h),(9>m||13<m)&&32!==m&&133!==m&&160!==m&&5760!==m&&6158!==m&&(8192>m||8205<m)&&8232!==m&&8233!==m&&8239!==m&&8287!==m&&8288!==m&&12288!==m&&65279!==m)return!1;return!0}},{}],425:[function(a,q,p){q.exports=function(a){if("string"!==typeof a)return!1;a=a.trim();return/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(a)&&
/[\dz]$/i.test(a)&&4<a.length?!0:!1}},{}],426:[function(a,q,p){q.exports=function(a,k,m){return a*(1-m)+k*m}},{}],427:[function(a,q,p){(function(a,k){"object"===typeof p&&"undefined"!==typeof q?q.exports=k():(a=a||self,a.mapboxgl=k())})(this,function(){function a(b,a){if(k)if(m){b="var sharedChunk \x3d {}; ("+k+")(sharedChunk); ("+m+")(sharedChunk);";var e={};k(e);h=a(e);h.workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"}))}else m=a;else k=a}var k,m,h;a(["exports"],function(b){function a(b,
a){return b(a={exports:{}},a.exports),a.exports}function e(b,a,c,d){this.cx=3*b;this.bx=3*(c-b)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*a;this.by=3*(d-a)-this.cy;this.ay=1-this.cy-this.by;this.p1x=b;this.p1y=d;this.p2x=c;this.p2y=d}function h(b,a){this.x=b;this.y=a}function k(b,a){if(Array.isArray(b)){if(!Array.isArray(a)||b.length!==a.length)return!1;for(var c=0;c<b.length;c++)if(!k(b[c],a[c]))return!1;return!0}if("object"==typeof b&&null!==b&&null!==a){if("object"!=typeof a||Object.keys(b).length!==
Object.keys(a).length)return!1;for(c in b)if(!k(b[c],a[c]))return!1;return!0}return b===a}function f(b,a,c,d){var e=new fi(b,a,c,d);return function(b){return e.solve(b)}}function d(b,a,c){return Math.min(c,Math.max(a,b))}function c(b,a,c){var d=c-a;b=((b-a)%d+d)%d+a;return b===a?c:b}function r(b){for(var a=[],c=arguments.length-1;0<c--;)a[c]=arguments[c+1];for(c=0;c<a.length;c+=1){var d=a[c],e;for(e in d)b[e]=d[e]}return b}function m(){return function Si(b){return b?(b^16*Math.random()>>b/4).toString(16):
"10000000-1000-4000-8000-100000000000".replace(/[018]/g,Si)}()}function n(b){return!!b&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(b)}function w(b,a){b.forEach(function(b){a[b]&&(a[b]=a[b].bind(a))})}function y(b,a){return-1!==b.indexOf(a,b.length-a.length)}function A(b,a,c){var d={},e;for(e in b)d[e]=a.call(c||this,b[e],e,b);return d}function z(b,a,c){var d={},e;for(e in b)a.call(c||this,b[e],e,b)&&(d[e]=b[e]);return d}function x(b){return Array.isArray(b)?b.map(x):
"object"==typeof b&&b?A(b,x):b}function p(b){Qh[b]||("undefined"!=typeof console&&console.warn(b),Qh[b]=!0)}function B(b,a,c){return(c.y-b.y)*(a.x-b.x)>(a.y-b.y)*(c.x-b.x)}function q(b){var a={};if(b.replace(/(?:^|(?:\s*,\s*))([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)(?:=(?:([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)|(?:"((?:[^"\\]|\\.)*)")))?/g,function(b,c,d,e){b=d||e;return a[c]=!b||b.toLowerCase(),""}),a["max-age"])b=parseInt(a["max-age"],10),isNaN(b)?delete a["max-age"]:a["max-age"]=b;return a}
function G(b){try{var a=self[b];return a.setItem("_mapbox_test_",1),a.removeItem("_mapbox_test_"),!0}catch(Si){return!1}}function E(b){var a=b.createTexture();b.bindTexture(b.TEXTURE_2D,a);try{if(b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,kh),b.isContextLost())return;Qe.supported=!0}catch(Si){}b.deleteTexture(a);dh=!0}function F(b){return 0===b.indexOf("mapbox:")}function L(b){b=b.match(Bi);if(!b)throw Error("Unable to parse URL object");return{protocol:b[1],authority:b[2],path:b[3]||
"/",params:b[4]?b[4].split("\x26"):[]}}function J(b){var a=b.params.length?"?"+b.params.join("\x26"):"";return b.protocol+"://"+b.authority+b.path+a}function H(b){if(!b)return null;var a;b=b.split(".");if(!b||3!==b.length)return null;try{return JSON.parse((a=b[1],decodeURIComponent(self.atob(a).split("").map(function(b){return"%"+("00"+b.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch(Si){return null}}function K(b,a,c){if(self.caches){var d={status:a.status,statusText:a.statusText,headers:new self.Headers};
a.headers.forEach(function(b,a){return d.headers.set(a,b)});var e=q(a.headers.get("Cache-Control")||"");e["no-store"]||(e["max-age"]&&d.headers.set("Expires",(new Date(c+1E3*e["max-age"])).toUTCString()),42E4>(new Date(d.headers.get("Expires"))).getTime()-c||function(b,a){if(void 0===Ee)try{new Response(new ReadableStream),Ee=!0}catch(Sg){Ee=!1}Ee?a(b.body):b.blob().then(a)}(a,function(a){var c=new self.Response(a,d);self.caches.open("mapbox-tiles").then(function(a){return a.put(M(b.url),c)}).catch(function(b){return p(b.message)})}))}}
function M(b){var a=b.indexOf("?");return 0>a?b:b.slice(0,a)}function I(b,a){if(!self.caches)return a(null);var c=M(b.url);self.caches.open("mapbox-tiles").then(function(b){b.match(c).then(function(d){if(d){var e=new Date(d.headers.get("Expires"));var f=q(d.headers.get("Cache-Control")||"");e=e>Date.now()&&!f["no-cache"]}else e=!1;b.delete(c);e&&b.put(c,d.clone());a(null,d,e)}).catch(a)}).catch(a)}function N(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}
function O(b,a){var c,d=new self.AbortController,e=new self.Request(b.url,{method:b.method||"GET",body:b.body,credentials:b.credentials,headers:b.headers,referrer:mi(),signal:d.signal}),f=!1,g=!1,h=0<(c=e.url).indexOf("sku\x3d")&&$d.test(c);"json"===b.type&&e.headers.set("Accept","application/json");c=function(c,d,f){if(!g){if(c&&"SecurityError"!==c.message&&p(c),d&&f)return k(d);var l=Date.now();self.fetch(e).then(function(c){if(c.ok){var d=h?c.clone():null;return k(c,d,l)}return a(new Sh(c.statusText,
c.status,b.url))}).catch(function(b){20!==b.code&&a(Error(b.message))})}};var k=function(c,d,h){("arrayBuffer"===b.type?c.arrayBuffer():"json"===b.type?c.json():c.text()).then(function(b){g||(d&&h&&K(e,d,h),f=!0,a(null,b,c.headers.get("Cache-Control"),c.headers.get("Expires")))}).catch(function(b){return a(Error(b.message))})};return h?I(e,c):c(null,null),{cancel:function(){g=!0;f||d.abort()}}}function P(b,a,c){c[b]&&-1!==c[b].indexOf(a)||(c[b]=c[b]||[],c[b].push(a))}function Q(b,a,c){c&&c[b]&&(a=
c[b].indexOf(a),-1!==a&&c[b].splice(a,1))}function T(b){var a=b.key;return(b=b.value)?[new La(a,b,"constants have been deprecated as of v8")]:[]}function V(b){for(var a=[],c=arguments.length-1;0<c--;)a[c]=arguments[c+1];for(c=0;c<a.length;c+=1){var d=a[c],e;for(e in d)b[e]=d[e]}return b}function Y(b){return b instanceof Number||b instanceof String||b instanceof Boolean}function ca(b){return Y(b)?b.valueOf():b}function Z(b){if(Array.isArray(b))return b.map(Z);if(b instanceof Object&&!Y(b)){var a={},
c;for(c in b)a[c]=Z(b[c]);return a}return ca(b)}function R(b,a){return{kind:"array",itemType:b,N:a}}function U(b){if("array"===b.kind){var a=U(b.itemType);return"number"==typeof b.N?"array\x3c"+a+", "+b.N+"\x3e":"value"===b.itemType.kind?"array":"array\x3c"+a+"\x3e"}return b.kind}function X(b,a){if("error"===a.kind)return null;if("array"===b.kind){if("array"===a.kind&&(0===a.N&&"value"===a.itemType.kind||!X(b.itemType,a.itemType))&&("number"!=typeof b.N||b.N===a.N))return null}else{if(b.kind===a.kind)return null;
if("value"===b.kind)for(var c=0,d=Vf;c<d.length;c+=1)if(!X(d[c],a))return null}return"Expected "+U(b)+" but found "+U(a)+" instead."}function ea(b,a,c,d){return"number"==typeof b&&0<=b&&255>=b&&"number"==typeof a&&0<=a&&255>=a&&"number"==typeof c&&0<=c&&255>=c?void 0===d||"number"==typeof d&&0<=d&&1>=d?null:"Invalid rgba value ["+[b,a,c,d].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof d?[b,a,c,d]:[b,a,c]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}
function fa(b){if(null===b)return oi;if("string"==typeof b)return mb;if("boolean"==typeof b)return lb;if("number"==typeof b)return Ha;if(b instanceof sb)return hd;if(b instanceof Sf)return le;if(b instanceof Gd)return xf;if(Array.isArray(b)){for(var a,c=b.length,d=0;d<b.length;d+=1){var e=fa(b[d]);if(a){if(a===e)continue;a=Bb;break}a=e}return R(a||Bb,c)}return kg}function la(b){var a=typeof b;return null===b?"":"string"===a||"number"===a||"boolean"===a?String(b):b instanceof sb||b instanceof Gd?b.toString():
JSON.stringify(b)}function da(b){if(b instanceof Vc&&("get"===b.name&&1===b.args.length||"feature-state"===b.name||"has"===b.name&&1===b.args.length||"properties"===b.name||"geometry-type"===b.name||"id"===b.name||/^filter-/.test(b.name)))return!1;var a=!0;return b.eachChild(function(b){a&&!da(b)&&(a=!1)}),a}function ma(b){if(b instanceof Vc&&"feature-state"===b.name)return!1;var a=!0;return b.eachChild(function(b){a&&!ma(b)&&(a=!1)}),a}function aa(b,a){if(b instanceof Vc&&0<=a.indexOf(b.name))return!1;
var c=!0;return b.eachChild(function(b){c&&!aa(b,a)&&(c=!1)}),c}function na(b,a){for(var c,d,e=b.length-1,f=0,g=e,h=0;f<=g;)if(c=b[h=Math.floor((f+g)/2)],d=b[h+1],c<=a){if(h===e||a<d)return h;f=h+1}else{if(!(c>a))throw new rd("Input is not a number.");g=h-1}return 0}function ha(b,a,c){return b*(1-c)+a*c}function ja(b){return b>Zh?Math.pow(b,1/3):b/Qi+pi}function oa(b){return b>Ec?b*b*b:Qi*(b-pi)}function ka(b){return 255*(.0031308>=b?12.92*b:1.055*Math.pow(b,1/2.4)-.055)}function ia(b){return.04045>=
(b/=255)?b/12.92:Math.pow((b+.055)/1.055,2.4)}function xa(b){var a=ia(b.r),c=ia(b.g),d=ia(b.b),e=ja((.4124564*a+.3575761*c+.1804375*d)/.95047),f=ja(.2126729*a+.7151522*c+.072175*d);return{l:116*f-16,a:500*(e-f),b:200*(f-ja((.0193339*a+.119192*c+.9503041*d)/1.08883)),alpha:b.a}}function ya(b){var a=(b.l+16)/116,c=isNaN(b.a)?a:a+b.a/500,d=isNaN(b.b)?a:a-b.b/200;return a=1*oa(a),c=.95047*oa(c),d=1.08883*oa(d),new sb(ka(3.2404542*c-1.5371385*a-.4985314*d),ka(-.969266*c+1.8760108*a+.041556*d),ka(.0556434*
c-.2040259*a+1.0572252*d),b.alpha)}function sa(b,a,c,d){d-=c;b-=c;return 0===d?0:1===a?b/d:(Math.pow(a,b)-1)/(Math.pow(a,d)-1)}function W(b,a){return"\x3d\x3d"===b||"!\x3d"===b?"boolean"===a.kind||"string"===a.kind||"number"===a.kind||"null"===a.kind||"value"===a.kind:"string"===a.kind||"number"===a.kind||"value"===a.kind}function za(b,a,c,d){return 0===d.compare(a,c)}function Da(b,a,c){var d="\x3d\x3d"!==b&&"!\x3d"!==b;return function(){function e(b,a,c){this.type=lb;this.lhs=b;this.rhs=a;this.collator=
c;this.hasUntypedArgument="value"===b.type.kind||"value"===a.type.kind}return e.parse=function(b,a){if(3!==b.length&&4!==b.length)return a.error("Expected two or three arguments.");var c=b[0],f=a.parse(b[1],1,Bb);if(!f)return null;if(!W(c,f.type))return a.concat(1).error('"'+c+"\" comparisons are not supported for type '"+U(f.type)+"'.");var g=a.parse(b[2],2,Bb);if(!g)return null;if(!W(c,g.type))return a.concat(2).error('"'+c+"\" comparisons are not supported for type '"+U(g.type)+"'.");if(f.type.kind!==
g.type.kind&&"value"!==f.type.kind&&"value"!==g.type.kind)return a.error("Cannot compare types '"+U(f.type)+"' and '"+U(g.type)+"'.");d&&("value"===f.type.kind&&"value"!==g.type.kind?f=new tc(g.type,[f]):"value"!==f.type.kind&&"value"===g.type.kind&&(g=new tc(f.type,[g])));c=null;if(4===b.length){if("string"!==f.type.kind&&"string"!==g.type.kind&&"value"!==f.type.kind&&"value"!==g.type.kind)return a.error("Cannot use collator to compare non-string types.");if(!(c=a.parse(b[3],3,le)))return null}return new e(f,
g,c)},e.prototype.evaluate=function(e){var f=this.lhs.evaluate(e),g=this.rhs.evaluate(e);if(d&&this.hasUntypedArgument){var h=fa(f),k=fa(g);if(h.kind!==k.kind||"string"!==h.kind&&"number"!==h.kind)throw new rd('Expected arguments for "'+b+'" to be (string, string) or (number, number), but found ('+h.kind+", "+k.kind+") instead.");}return this.collator&&!d&&this.hasUntypedArgument&&(h=fa(f),k=fa(g),"string"!==h.kind||"string"!==k.kind)?a(e,f,g):this.collator?c(e,f,g,this.collator.evaluate(e)):a(e,
f,g)},e.prototype.eachChild=function(b){b(this.lhs);b(this.rhs);this.collator&&b(this.collator)},e.prototype.possibleOutputs=function(){return[!0,!1]},e.prototype.serialize=function(){var a=[b];return this.eachChild(function(b){a.push(b.serialize())}),a},e}()}function ra(b,a){var c=a[0],d=a[1],e=a[2];a=a[3];c=c.evaluate(b);d=d.evaluate(b);e=e.evaluate(b);b=a?a.evaluate(b):1;if(a=ea(c,d,e,b))throw new rd(a);return new sb(c/255*b,d/255*b,e/255*b,b)}function ua(b,a){b=a[b];return void 0===b?null:b}function Aa(b){return{result:"success",
value:b}}function wa(b){return{result:"error",value:b}}function Ma(b){return"data-driven"===b["property-type"]||"cross-faded-data-driven"===b["property-type"]}function ba(b){return!!b.expression&&-1<b.expression.parameters.indexOf("zoom")}function Ea(b){return!!b.expression&&b.expression.interpolated}function Ba(b){return b instanceof Number?"number":b instanceof String?"string":b instanceof Boolean?"boolean":Array.isArray(b)?"array":null===b?"null":typeof b}function Na(b){return"object"==typeof b&&
null!==b&&!Array.isArray(b)}function Ja(b){return b}function Lb(b,a,c){return void 0!==b?b:void 0!==a?a:void 0!==c?c:void 0}function Mb(b,a,c,d,e){return Lb(typeof c===e?d[c]:void 0,b.default,a.default)}function Pa(b,a,c){if("number"!==Ba(c))return Lb(b.default,a.default);a=b.stops.length;if(1===a||c<=b.stops[0][0])return b.stops[0][1];if(c>=b.stops[a-1][0])return b.stops[a-1][1];c=na(b.stops.map(function(b){return b[0]}),c);return b.stops[c][1]}function zb(b,a,c){var d=void 0!==b.base?b.base:1;if("number"!==
Ba(c))return Lb(b.default,a.default);var e=b.stops.length;if(1===e||c<=b.stops[0][0])return b.stops[0][1];if(c>=b.stops[e-1][0])return b.stops[e-1][1];e=na(b.stops.map(function(b){return b[0]}),c);var f=function(b,a,c,d){d-=c;b-=c;return 0===d?0:1===a?b/d:(Math.pow(a,b)-1)/(Math.pow(a,d)-1)}(c,d,b.stops[e][0],b.stops[e+1][0]),g=b.stops[e][1],h=b.stops[e+1][1],k=Td[a.type]||Ja;if(b.colorSpace&&"rgb"!==b.colorSpace){var l=me[b.colorSpace];k=function(b,a){return l.reverse(l.interpolate(l.forward(b),
l.forward(a),f))}}return"function"==typeof g.evaluate?{evaluate:function(){for(var b=[],a=arguments.length;a--;)b[a]=arguments[a];a=g.evaluate.apply(void 0,b);b=h.evaluate.apply(void 0,b);if(void 0!==a&&void 0!==b)return k(a,b,f)}}:k(g,h,f)}function cb(b,a,c){return"color"===a.type?c=sb.parse(c):"formatted"===a.type?c=Gd.fromString(c.toString()):Ba(c)===a.type||"enum"===a.type&&a.values[c]||(c=void 0),Lb(c,b.default,a.default)}function ub(b){return Array.isArray(b)&&0<b.length&&"string"==typeof b[0]&&
b[0]in yf}function db(b,a){var c=Tf;if(a){var d={color:hd,string:mb,number:Ha,enum:mb,boolean:lb,formatted:xf};d="array"===a.type?R(d[a.value]||Bb,a.length):d[a.type]}else d=void 0;c=new c(yf,[],d);return(b=c.parse(b,void 0,void 0,void 0,a&&"string"===a.type?{typeAnnotation:"coerce"}:void 0))?Aa(new Xf(b,a)):wa(c.errors)}function ab(b,a){if("error"===(b=db(b,a)).result)return b;var c=b.value.expression,d=da(c);if(!d&&!Ma(a))return wa([new Vd("","data expressions not supported")]);var e=aa(c,["zoom"]);
return e||ba(a)?(c=function Sg(b){var a=null;if(b instanceof yc)a=Sg(b.result);else if(b instanceof zf)for(var c=0,d=b.args;c<d.length&&!(a=Sg(d[c]));c+=1);else(b instanceof Ke||b instanceof Sb)&&b.input instanceof Vc&&"zoom"===b.input.name&&(a=b);if(a instanceof Vd)return a;b.eachChild(function(b){b=Sg(b);b instanceof Vd?a=b:!a&&b?a=new Vd("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&b&&a!==b&&(a=new Vd("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))});
return a}(c))||e?c instanceof Vd?wa([c]):c instanceof Sb&&!Ea(a)?wa([new Vd("",'"interpolate" expressions cannot be used with this property')]):c?Aa(new yh(d?"camera":"composite",b.value,c.labels,c instanceof Sb?c.interpolation:void 0)):Aa(new xh(d?"constant":"source",b.value)):wa([new Vd("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]):wa([new Vd("","zoom expressions not supported")])}function eb(b){var a=b.key,c=b.value,d=b.valueSpec||{},e=b.objectElementValidators||
{},f=b.style;b=b.styleSpec;var g=[],h=Ba(c);if("object"!==h)return[new La(a,c,"object expected, "+h+" found")];for(var k in c){var l=k.split(".")[0];h=d[l]||d["*"];if(e[l])l=e[l];else if(d[l])l=Ub;else if(e["*"])l=e["*"];else{if(!d["*"]){g.push(new La(a,c[k],'unknown property "'+k+'"'));continue}l=Ub}g=g.concat(l({key:(a?a+".":a)+k,value:c[k],valueSpec:h,style:f,styleSpec:b,object:c,objectKey:k},c))}for(var r in d)e[r]||d[r].required&&void 0===d[r].default&&void 0===c[r]&&g.push(new La(a,c,'missing required property "'+
r+'"'));return g}function gb(b){var a=b.value,c=b.valueSpec,d=b.style,e=b.styleSpec,f=b.key;b=b.arrayElementValidator||Ub;if("array"!==Ba(a))return[new La(f,a,"array expected, "+Ba(a)+" found")];if(c.length&&a.length!==c.length)return[new La(f,a,"array length "+c.length+" expected, length "+a.length+" found")];if(c["min-length"]&&a.length<c["min-length"])return[new La(f,a,"array length at least "+c["min-length"]+" expected, length "+a.length+" found")];var g={type:c.value,values:c.values};7>e.$version&&
(g.function=c.function);"object"===Ba(c.value)&&(g=c.value);c=[];for(var h=0;h<a.length;h++)c=c.concat(b({array:a,arrayIndex:h,value:a[h],valueSpec:g,style:d,styleSpec:e,key:f+"["+h+"]"}));return c}function jb(b){var a=b.key,c=b.value;b=b.valueSpec;var d=Ba(c);return"number"!==d?[new La(a,c,"number expected, "+d+" found")]:"minimum"in b&&c<b.minimum?[new La(a,c,c+" is less than the minimum value "+b.minimum)]:"maximum"in b&&c>b.maximum?[new La(a,c,c+" is greater than the maximum value "+b.maximum)]:
[]}function Oa(b){function a(b){var a=[],d=b.value,h=b.key;if("array"!==Ba(d))return[new La(h,d,"array expected, "+Ba(d)+" found")];if(2!==d.length)return[new La(h,d,"array length 2 expected, length "+d.length+" found")];if(t){if("object"!==Ba(d[0]))return[new La(h,d,"object expected, "+Ba(d[0])+" found")];if(void 0===d[0].zoom)return[new La(h,d,"object stop key must have zoom")];if(void 0===d[0].value)return[new La(h,d,"object stop key must have value")];if(f&&f>ca(d[0].zoom))return[new La(h,d[0].zoom,
"stop zoom values must appear in ascending order")];ca(d[0].zoom)!==f&&(f=ca(d[0].zoom),e=void 0,k={});a=a.concat(eb({key:h+"[0]",value:d[0],valueSpec:{zoom:{}},style:b.style,styleSpec:b.styleSpec,objectElementValidators:{zoom:jb,value:c}}))}else a=a.concat(c({key:h+"[0]",value:d[0],valueSpec:{},style:b.style,styleSpec:b.styleSpec},d));return ub(Z(d[1]))?a.concat([new La(h+"[1]",d[1],"expressions are not allowed in function stops.")]):a.concat(Ub({key:h+"[1]",value:d[1],valueSpec:g,style:b.style,
styleSpec:b.styleSpec}))}function c(b,a){var c=Ba(b.value),f=ca(b.value);a=null!==b.value?b.value:a;if(d){if(c!==d)return[new La(b.key,a,c+" stop domain type must match previous stop domain type "+d)]}else d=c;return"number"!==c&&"string"!==c&&"boolean"!==c?[new La(b.key,a,"stop domain value must be a number, string, or boolean")]:"number"!==c&&"categorical"!==h?(c="number expected, "+c+" found",Ma(g)&&void 0===h&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),
[new La(b.key,a,c)]):"categorical"!==h||"number"!==c||isFinite(f)&&Math.floor(f)===f?"categorical"!==h&&"number"===c&&void 0!==e&&f<e?[new La(b.key,a,"stop domain values must appear in ascending order")]:(e=f,"categorical"===h&&f in k?[new La(b.key,a,"stop domain values must be unique")]:(k[f]=!0,[])):[new La(b.key,a,"integer expected, found "+f)]}var d,e,f,g=b.valueSpec,h=ca(b.value.type),k={},l="categorical"!==h&&void 0===b.value.property,r=!l,t="array"===Ba(b.value.stops)&&"array"===Ba(b.value.stops[0])&&
"object"===Ba(b.value.stops[0][0]),m=eb({key:b.key,value:b.value,valueSpec:b.styleSpec.function,style:b.style,styleSpec:b.styleSpec,objectElementValidators:{stops:function(b){if("identity"===h)return[new La(b.key,b.value,'identity function may not have a "stops" property')];var c=[],d=b.value;c=c.concat(gb({key:b.key,value:d,valueSpec:b.valueSpec,style:b.style,styleSpec:b.styleSpec,arrayElementValidator:a}));"array"===Ba(d)&&0===d.length&&c.push(new La(b.key,d,"array must have at least one stop"));
return c},default:function(b){return Ub({key:b.key,value:b.value,valueSpec:g,style:b.style,styleSpec:b.styleSpec})}}});return"identity"===h&&l&&m.push(new La(b.key,b.value,'missing required property "property"')),"identity"===h||b.value.stops||m.push(new La(b.key,b.value,'missing required property "stops"')),"exponential"===h&&b.valueSpec.expression&&!Ea(b.valueSpec)&&m.push(new La(b.key,b.value,"exponential functions not supported")),8<=b.styleSpec.$version&&(r&&!Ma(b.valueSpec)?m.push(new La(b.key,
b.value,"property functions not supported")):l&&!ba(b.valueSpec)&&m.push(new La(b.key,b.value,"zoom functions not supported"))),"categorical"!==h&&!t||void 0!==b.value.property||m.push(new La(b.key,b.value,'"property" property is required')),m}function Za(b){var a=("property"===b.expressionContext?ab:db)(Z(b.value),b.valueSpec);if("error"===a.result)return a.value.map(function(a){return new La(""+b.key+a.key,b.value,a.message)});a=a.value.expression||a.value._styleExpression.expression;if("property"===
b.expressionContext&&"text-font"===b.propertyKey&&-1!==a.possibleOutputs().indexOf(void 0))return[new La(b.key,b.value,'Invalid data expression for "'+b.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===b.expressionContext&&"layout"===b.propertyType&&!ma(a))return[new La(b.key,b.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===b.expressionContext&&!ma(a))return[new La(b.key,b.value,'"feature-state" data expressions are not supported with filters.')];
if(b.expressionContext&&0===b.expressionContext.indexOf("cluster")){if(!aa(a,["zoom","feature-state"]))return[new La(b.key,b.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===b.expressionContext&&!da(a))return[new La(b.key,b.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Wc(b){var a=b.key,c=b.value;b=b.valueSpec;var d=[];return Array.isArray(b.values)?-1===b.values.indexOf(ca(c))&&
d.push(new La(a,c,"expected one of ["+b.values.join(", ")+"], "+JSON.stringify(c)+" found")):-1===Object.keys(b.values).indexOf(ca(c))&&d.push(new La(a,c,"expected one of ["+Object.keys(b.values).join(", ")+"], "+JSON.stringify(c)+" found")),d}function vb(b){if(!0===b||!1===b)return!0;if(!Array.isArray(b)||0===b.length)return!1;switch(b[0]){case "has":return 2<=b.length&&"$id"!==b[1]&&"$type"!==b[1];case "in":case "!in":case "!has":case "none":return!1;case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3e\x3d":case "\x3c":case "\x3c\x3d":return 3!==
b.length||Array.isArray(b[1])||Array.isArray(b[2]);case "any":case "all":var a=0;for(b=b.slice(1);a<b.length;a+=1){var c=b[a];if(!vb(c)&&"boolean"!=typeof c)return!1}return!0;default:return!0}}function Nb(b){if(null==b)return function(){return!0};vb(b)||(b=td(b));var a=db(b,ri);if("error"===a.result)throw Error(a.value.map(function(b){return b.key+": "+b.message}).join(", "));return function(b,c){return a.value.evaluate(b,c)}}function Ya(b,a){return b<a?-1:b>a?1:0}function td(b){if(!b)return!0;var a,
c=b[0];return 1>=b.length?"any"!==c:"\x3d\x3d"===c?mc(b[1],b[2],"\x3d\x3d"):"!\x3d"===c?Hb(mc(b[1],b[2],"\x3d\x3d")):"\x3c"===c||"\x3e"===c||"\x3c\x3d"===c||"\x3e\x3d"===c?mc(b[1],b[2],c):"any"===c?(a=b.slice(1),["any"].concat(a.map(td))):"all"===c?["all"].concat(b.slice(1).map(td)):"none"===c?["all"].concat(b.slice(1).map(td).map(Hb)):"in"===c?ud(b[1],b.slice(2)):"!in"===c?Hb(ud(b[1],b.slice(2))):"has"===c?Nc(b[1]):"!has"!==c||Hb(Nc(b[1]))}function mc(b,a,c){switch(b){case "$type":return["filter-type-"+
c,a];case "$id":return["filter-id-"+c,a];default:return["filter-"+c,b,a]}}function ud(b,a){if(0===a.length)return!1;switch(b){case "$type":return["filter-type-in",["literal",a]];case "$id":return["filter-id-in",["literal",a]];default:return 200<a.length&&!a.some(function(b){return typeof b!=typeof a[0]})?["filter-in-large",b,["literal",a.sort(Ya)]]:["filter-in-small",b,["literal",a]]}}function Nc(b){switch(b){case "$type":return!0;case "$id":return["filter-has-id"];default:return["filter-has",b]}}
function Hb(b){return["!",b]}function Yb(b){return vb(Z(b.value))?Za(V({},b,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function gj(b){var a=b.value,c=b.key;if("array"!==Ba(a))return[new La(c,a,"array expected, "+Ba(a)+" found")];var d=b.styleSpec,e,f=[];if(1>a.length)return[new La(c,a,"filter array must have at least 1 element")];f=f.concat(Wc({key:c+"[0]",value:a[0],valueSpec:d.filter_operator,style:b.style,styleSpec:b.styleSpec}));switch(ca(a[0])){case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":2<=
a.length&&"$type"===ca(a[1])&&f.push(new La(c,a,'"$type" cannot be use with operator "'+a[0]+'"'));case "\x3d\x3d":case "!\x3d":3!==a.length&&f.push(new La(c,a,'filter array for operator "'+a[0]+'" must have 3 elements'));case "in":case "!in":2<=a.length&&"string"!==(e=Ba(a[1]))&&f.push(new La(c+"[1]",a[1],"string expected, "+e+" found"));for(var g=2;g<a.length;g++)e=Ba(a[g]),"$type"===ca(a[1])?f=f.concat(Wc({key:c+"["+g+"]",value:a[g],valueSpec:d.geometry_type,style:b.style,styleSpec:b.styleSpec})):
"string"!==e&&"number"!==e&&"boolean"!==e&&f.push(new La(c+"["+g+"]",a[g],"string, number, or boolean expected, "+e+" found"));break;case "any":case "all":case "none":for(d=1;d<a.length;d++)f=f.concat(gj({key:c+"["+d+"]",value:a[d],style:b.style,styleSpec:b.styleSpec}));break;case "has":case "!has":e=Ba(a[1]),2!==a.length?f.push(new La(c,a,'filter array for "'+a[0]+'" operator must have 2 elements')):"string"!==e&&f.push(new La(c+"[1]",a[1],"string expected, "+e+" found"))}return f}(b)}function uc(b,
a){var c=b.key,d=b.style,e=b.styleSpec,f=b.value,g=b.objectKey,h=e[a+"_"+b.layerType];if(!h)return[];var k=g.match(/^(.*)-transition$/);if("paint"===a&&k&&h[k[1]]&&h[k[1]].transition)return Ub({key:c,value:f,valueSpec:e.transition,style:d,styleSpec:e});var l;h=b.valueSpec||h[g];if(!h)return[new La(c,f,'unknown property "'+g+'"')];if("string"===Ba(f)&&Ma(h)&&!h.tokens&&(l=/^{([^}]+)}$/.exec(f)))return[new La(c,f,'"'+g+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+
JSON.stringify(l[1])+" }`.")];l=[];return"symbol"===b.layerType&&("text-field"===g&&d&&!d.glyphs&&l.push(new La(c,f,'use of "text-field" requires a style "glyphs" property')),"text-font"===g&&Na(Z(f))&&"identity"===ca(f.type)&&l.push(new La(c,f,'"text-font" does not support identity functions'))),l.concat(Ub({key:b.key,value:f,valueSpec:h,style:d,styleSpec:e,expressionContext:"property",propertyType:a,propertyKey:g}))}function $a(b){return uc(b,"paint")}function Xd(b){return uc(b,"layout")}function Fc(b){var a=
[],c=b.value,d=b.key,e=b.style,f=b.styleSpec;c.type||c.ref||a.push(new La(d,c,'either "type" or "ref" is required'));var g,h=ca(c.type),k=ca(c.ref);if(c.id)for(var l=ca(c.id),r=0;r<b.arrayIndex;r++){var t=e.layers[r];ca(t.id)===l&&a.push(new La(d,c.id,'duplicate layer id "'+c.id+'", previously used at line '+t.id.__line__))}"ref"in c?(["type","source","source-layer","filter","layout"].forEach(function(b){b in c&&a.push(new La(d,c[b],'"'+b+'" is prohibited for ref layers'))}),e.layers.forEach(function(b){ca(b.id)===
k&&(g=b)}),g?g.ref?a.push(new La(d,c.ref,"ref cannot reference another ref layer")):h=ca(g.type):a.push(new La(d,c.ref,'ref layer "'+k+'" not found'))):"background"!==h&&(c.source?(l=(e=e.sources&&e.sources[c.source])&&ca(e.type),e?"vector"===l&&"raster"===h?a.push(new La(d,c.source,'layer "'+c.id+'" requires a raster source')):"raster"===l&&"raster"!==h?a.push(new La(d,c.source,'layer "'+c.id+'" requires a vector source')):"vector"!==l||c["source-layer"]?"raster-dem"===l&&"hillshade"!==h?a.push(new La(d,
c.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==h||!c.paint||!c.paint["line-gradient"]||"geojson"===l&&e.lineMetrics||a.push(new La(d,c,'layer "'+c.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):a.push(new La(d,c,'layer "'+c.id+'" must specify a "source-layer"')):a.push(new La(d,c.source,'source "'+c.source+'" not found'))):a.push(new La(d,c,'missing required property "source"')));return a=a.concat(eb({key:d,value:c,
valueSpec:f.layer,style:b.style,styleSpec:b.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Ub({key:d+".type",value:c.type,valueSpec:f.layer.type,style:b.style,styleSpec:b.styleSpec,object:c,objectKey:"type"})},filter:Yb,layout:function(b){return eb({layer:c,key:b.key,value:b.value,style:b.style,styleSpec:b.styleSpec,objectElementValidators:{"*":function(b){return Xd(V({layerType:h},b))}}})},paint:function(b){return eb({layer:c,key:b.key,value:b.value,style:b.style,
styleSpec:b.styleSpec,objectElementValidators:{"*":function(b){return $a(V({layerType:h},b))}}})}}}))}function Md(b){var a=b.value,c=b.key,d=b.styleSpec,e=b.style;if(!a.type)return[new La(c,a,'"type" is required')];var f=ca(a.type);switch(f){case "vector":case "raster":case "raster-dem":return eb({key:c,value:a,valueSpec:d["source_"+f.replace("-","_")],style:b.style,styleSpec:d});case "geojson":if(b=eb({key:c,value:a,valueSpec:d.source_geojson,style:e,styleSpec:d}),a.cluster)for(var g in a.clusterProperties)d=
a.clusterProperties[g],e=d[0],e="string"==typeof e?[e,["accumulated"],["get",g]]:e,b.push.apply(b,Za({key:c+"."+g+".map",value:d[1],expressionContext:"cluster-map"})),b.push.apply(b,Za({key:c+"."+g+".reduce",value:e,expressionContext:"cluster-reduce"}));return b;case "video":return eb({key:c,value:a,valueSpec:d.source_video,style:e,styleSpec:d});case "image":return eb({key:c,value:a,valueSpec:d.source_image,style:e,styleSpec:d});case "canvas":return[new La(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.",
"source.canvas")];default:return Wc({key:c+".type",value:a.type,valueSpec:{values:"vector raster raster-dem geojson video image".split(" ")},style:e,styleSpec:d})}}function nc(b){var a=b.value,c=b.styleSpec,d=c.light;b=b.style;var e=[],f=Ba(a);if(void 0===a)return e;if("object"!==f)return e.concat([new La("light",a,"object expected, "+f+" found")]);for(var g in a)e=(f=g.match(/^(.*)-transition$/))&&d[f[1]]&&d[f[1]].transition?e.concat(Ub({key:g,value:a[g],valueSpec:c.transition,style:b,styleSpec:c})):
d[g]?e.concat(Ub({key:g,value:a[g],valueSpec:d[g],style:b,styleSpec:c})):e.concat([new La(g,a[g],'unknown property "'+g+'"')]);return e}function Yd(b){var a=b.value;b=b.key;var c=Ba(a);return"string"!==c?[new La(b,a,"string expected, "+c+" found")]:[]}function Ub(b){var a=b.value,c=b.valueSpec,d=b.styleSpec;return c.expression&&Na(ca(a))?Oa(b):c.expression&&ub(Z(a))?Za(b):c.type&&Yf[c.type]?Yf[c.type](b):eb(V({},b,{valueSpec:c.type?d[c.type]:c}))}function Oc(b){var a=b.value,c=b.key;b=Yd(b);return b.length?
b:(-1===a.indexOf("{fontstack}")&&b.push(new La(c,a,'"glyphs" url must include a "{fontstack}" token')),-1===a.indexOf("{range}")&&b.push(new La(c,a,'"glyphs" url must include a "{range}" token')),b)}function pb(b,a){a=a||ta;var c=[];return c=c.concat(Ub({key:"",value:b,valueSpec:a.$root,styleSpec:a,style:b,objectElementValidators:{glyphs:Oc,"*":function(){return[]}}})),b.constants&&(c=c.concat(T({key:"constants",value:b.constants,style:b,styleSpec:a}))),Nd(c)}function Nd(b){return[].concat(b).sort(function(b,
a){return b.line-a.line})}function Xc(b){return function(){for(var a=[],c=arguments.length;c--;)a[c]=arguments[c];return Nd(b.apply(this,a))}}function qa(b,a){var c=!1;if(a&&a.length)for(var d=0;d<a.length;d+=1)b.fire(new wf(Error(a[d].message))),c=!0;return c}function vc(b,a,c){var d=this.cells=[];if(b instanceof ArrayBuffer){this.arrayBuffer=b;var e=new Int32Array(this.arrayBuffer);b=e[0];a=e[1];c=e[2];this.d=a+2*c;for(var f=0;f<this.d*this.d;f++){var g=e[ne+f],h=e[ne+f+1];d.push(g===h?null:e.subarray(g,
h))}f=e[ne+d.length+1];this.keys=e.subarray(e[ne+d.length],f);this.bboxes=e.subarray(f);this.insert=this._insertReadonly}else{this.d=a+2*c;for(e=0;e<this.d*this.d;e++)d.push([]);this.keys=[];this.bboxes=[]}this.n=a;this.extent=b;this.padding=c;this.scale=a/b;this.uid=0;a=c/a*b;this.min=-a;this.max=b+a}function Ka(b,a,c){void 0===c&&(c={});Object.defineProperty(a,"_classRegistryKey",{value:b,writeable:!1});Dc[b]={klass:a,omit:c.omit||[],shallow:c.shallow||[]}}function Pc(b,a){if(null==b||"boolean"==
typeof b||"number"==typeof b||"string"==typeof b||b instanceof Boolean||b instanceof Number||b instanceof String||b instanceof Date||b instanceof RegExp)return b;if(b instanceof ArrayBuffer)return a&&a.push(b),b;if(ArrayBuffer.isView(b))return a&&a.push(b.buffer),b;if(b instanceof Kd)return a&&a.push(b.data.buffer),b;if(Array.isArray(b)){for(var c=[],d=0;d<b.length;d+=1)c.push(Pc(b[d],a));return c}if("object"==typeof b){var e=b.constructor;c=e._classRegistryKey;if(!c)throw Error("can't serialize object of unregistered class");
d=e.serialize?e.serialize(b,a):{};if(!e.serialize){for(var f in b)!b.hasOwnProperty(f)||0<=Dc[c].omit.indexOf(f)||(e=b[f],d[f]=0<=Dc[c].shallow.indexOf(f)?e:Pc(e,a));b instanceof Error&&(d.message=b.message)}if(d.$name)throw Error("$name property is reserved for worker serialization logic.");return"Object"!==c&&(d.$name=c),d}throw Error("can't serialize object of type "+typeof b);}function Qc(b){if(null==b||"boolean"==typeof b||"number"==typeof b||"string"==typeof b||b instanceof Boolean||b instanceof
Number||b instanceof String||b instanceof Date||b instanceof RegExp||b instanceof ArrayBuffer||ArrayBuffer.isView(b)||b instanceof Kd)return b;if(Array.isArray(b))return b.map(Qc);if("object"==typeof b){var a=b.$name||"Object",c=Dc[a].klass;if(!c)throw Error("can't deserialize unregistered class "+a);if(c.deserialize)return c.deserialize(b);c=Object.create(c.prototype);for(var d=0,e=Object.keys(b);d<e.length;d+=1){var f=e[d];if("$name"!==f){var g=b[f];c[f]=0<=Dc[a].shallow.indexOf(f)?g:Qc(g)}}return c}throw Error("can't deserialize object of type "+
typeof b);}function pa(b){for(var a=0;a<b.length;a+=1)if(gf(b[a].charCodeAt(0)))return!0;return!1}function gf(b){return 746===b||747===b||!(4352>b)&&(!!Ia["Bopomofo Extended"](b)||!!Ia.Bopomofo(b)||!(!Ia["CJK Compatibility Forms"](b)||65097<=b&&65103>=b)||!!Ia["CJK Compatibility Ideographs"](b)||!!Ia["CJK Compatibility"](b)||!!Ia["CJK Radicals Supplement"](b)||!!Ia["CJK Strokes"](b)||!(!Ia["CJK Symbols and Punctuation"](b)||12296<=b&&12305>=b||12308<=b&&12319>=b||12336===b)||!!Ia["CJK Unified Ideographs Extension A"](b)||
!!Ia["CJK Unified Ideographs"](b)||!!Ia["Enclosed CJK Letters and Months"](b)||!!Ia["Hangul Compatibility Jamo"](b)||!!Ia["Hangul Jamo Extended-A"](b)||!!Ia["Hangul Jamo Extended-B"](b)||!!Ia["Hangul Jamo"](b)||!!Ia["Hangul Syllables"](b)||!!Ia.Hiragana(b)||!!Ia["Ideographic Description Characters"](b)||!!Ia.Kanbun(b)||!!Ia["Kangxi Radicals"](b)||!!Ia["Katakana Phonetic Extensions"](b)||!(!Ia.Katakana(b)||12540===b)||!(!Ia["Halfwidth and Fullwidth Forms"](b)||65288===b||65289===b||65293===b||65306<=
b&&65310>=b||65339===b||65341===b||65343===b||65371<=b&&65503>=b||65507===b||65512<=b&&65519>=b)||!(!Ia["Small Form Variants"](b)||65112<=b&&65118>=b||65123<=b&&65126>=b)||!!Ia["Unified Canadian Aboriginal Syllabics"](b)||!!Ia["Unified Canadian Aboriginal Syllabics Extended"](b)||!!Ia["Vertical Forms"](b)||!!Ia["Yijing Hexagram Symbols"](b)||!!Ia["Yi Syllables"](b)||!!Ia["Yi Radicals"](b))}function Vb(b){var a;(a=gf(b))||(a=!(!Ia["Latin-1 Supplement"](b)||167!==b&&169!==b&&174!==b&&177!==b&&188!==
b&&189!==b&&190!==b&&215!==b&&247!==b)||!(!Ia["General Punctuation"](b)||8214!==b&&8224!==b&&8225!==b&&8240!==b&&8241!==b&&8251!==b&&8252!==b&&8258!==b&&8263!==b&&8264!==b&&8265!==b&&8273!==b)||!!Ia["Letterlike Symbols"](b)||!!Ia["Number Forms"](b)||!(!Ia["Miscellaneous Technical"](b)||!(8960<=b&&8967>=b||8972<=b&&8991>=b||8996<=b&&9E3>=b||9003===b||9085<=b&&9114>=b||9150<=b&&9165>=b||9167===b||9169<=b&&9179>=b||9186<=b&&9215>=b))||!(!Ia["Control Pictures"](b)||9251===b)||!!Ia["Optical Character Recognition"](b)||
!!Ia["Enclosed Alphanumerics"](b)||!!Ia["Geometric Shapes"](b)||!(!Ia["Miscellaneous Symbols"](b)||9754<=b&&9759>=b)||!(!Ia["Miscellaneous Symbols and Arrows"](b)||!(11026<=b&&11055>=b||11088<=b&&11097>=b||11192<=b&&11243>=b))||!!Ia["CJK Symbols and Punctuation"](b)||!!Ia.Katakana(b)||!!Ia["Private Use Area"](b)||!!Ia["CJK Compatibility Forms"](b)||!!Ia["Small Form Variants"](b)||!!Ia["Halfwidth and Fullwidth Forms"](b)||8734===b||8756===b||8757===b||9984<=b&&10087>=b||10102<=b&&10131>=b||65532===
b||65533===b);return!a}function fb(b,a){void 0===a&&(a=1);var c=0,d=0;return{members:b.map(function(b){var e,f=(e=b.type,Tb[e].BYTES_PER_ELEMENT);e=c=Ib(c,Math.max(a,f));var g=b.components||1;return d=Math.max(d,f),c+=f*g,{name:b.name,type:b.type,components:g,offset:e}}),size:Ib(c,Math.max(d,a)),alignment:a}}function Ib(b,a){return Math.ceil(b/a)*a}function vd(b,a){return 256*d(Math.floor(b),0,255)+d(Math.floor(a),0,255)}function Qb(b,a,c){var d=b[a];b[a]=b[c];b[c]=d}function oe(b){return[vd(255*
b.r,255*b.g),vd(255*b.b,255*b.a)]}function fc(b,a,c){var d={color:{source:Ga,composite:$c},number:{source:ff,composite:Ga}};return(b={"line-pattern":{source:cf,composite:cf},"fill-pattern":{source:cf,composite:cf},"fill-extrusion-pattern":{source:cf,composite:cf}}[b])&&b[c]||d[a][c]}function pe(b){var a=8192/b.extent;b=b.loadGeometry();for(var c=0;c<b.length;c++)for(var e=b[c],f=0;f<e.length;f++){var g=e[f];g.x=Math.round(g.x*a);g.y=Math.round(g.y*a);(g.x<te.min||g.x>te.max||g.y<te.min||g.y>te.max)&&
(p("Geometry exceeds allowed extent, reduce your vector tile buffer size"),g.x=d(g.x,te.min,te.max),g.y=d(g.y,te.min,te.max))}return b}function va(b,a,c,d,e){b.emplaceBack(2*a+(d+1)/2,2*c+(e+1)/2)}function qe(b,a){for(var c=0;c<b.length;c++)if(Zb(a,b[c]))return!0;for(c=0;c<a.length;c++)if(Zb(b,a[c]))return!0;return!!oc(b,a)}function Ta(b,a,c){return!!Zb(b,a)||!!kb(a,b,c)}function Fa(b,a){if(1===b.length)return jd(a,b[0]);for(var c=0;c<a.length;c++)for(var d=a[c],e=0;e<d.length;e++)if(Zb(b,d[e]))return!0;
for(c=0;c<b.length;c++)if(jd(a,b[c]))return!0;for(c=0;c<a.length;c++)if(oc(b,a[c]))return!0;return!1}function oc(b,a){if(0===b.length||0===a.length)return!1;for(var c=0;c<b.length-1;c++)for(var d=b[c],e=b[c+1],f=0;f<a.length-1;f++){var g=d,h=e,k=a[f],l=a[f+1];if(B(g,k,l)!==B(h,k,l)&&B(g,h,k)!==B(g,h,l))return!0}return!1}function kb(b,a,c){c*=c;if(1===a.length)return b.distSqr(a[0])<c;for(var d=1;d<a.length;d++)if(ic(b,a[d-1],a[d])<c)return!0;return!1}function ic(b,a,c){var d=a.distSqr(c);if(0===d)return b.distSqr(a);
d=((b.x-a.x)*(c.x-a.x)+(b.y-a.y)*(c.y-a.y))/d;return 0>d?b.distSqr(a):1<d?b.distSqr(c):b.distSqr(c.sub(a)._mult(d)._add(a))}function jd(b,a){for(var c,d,e,f=!1,g=0;g<b.length;g++){var h=0;for(e=(c=b[g]).length-1;h<c.length;e=h++)d=c[h],e=c[e],d.y>a.y!=e.y>a.y&&a.x<(e.x-d.x)*(a.y-d.y)/(e.y-d.y)+d.x&&(f=!f)}return f}function Zb(b,a){for(var c=!1,d=0,e=b.length-1;d<b.length;e=d++){var f=b[d];e=b[e];f.y>a.y!=e.y>a.y&&a.x<(e.x-f.x)*(a.y-f.y)/(e.y-f.y)+f.x&&(c=!c)}return c}function wd(b,a,c){var d=a.paint.get(b).value;
return"constant"===d.kind?d.value:c.programConfigurations.get(a.id).binders[b].maxValue}function hb(b){return Math.sqrt(b[0]*b[0]+b[1]*b[1])}function nb(b,a,c,d,e){if(!a[0]&&!a[1])return b;a=Sa.convert(a)._mult(e);"viewport"===c&&a._rotate(-d);c=[];for(d=0;d<b.length;d++)c.push(b[d].sub(a));return c}function se(b,a,c){var d=a[0],e=a[1],f=a[2];a=a[3];return b[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*a,b[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*a,b[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*a,b[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*a,b}function Ic(b,
a){b=se([],[b.x,b.y,0,1],a);return new Sa(b[0]/b[3],b[1]/b[3])}function Od(b,a,c,d){var e=a.width;a=a.height;if(d)if(d instanceof Uint8ClampedArray)d=new Uint8Array(d.buffer);else{if(d.length!==e*a*c)throw new RangeError("mismatched image size");}else d=new Uint8Array(e*a*c);return b.width=e,b.height=a,b.data=d,b}function wc(b,a,c){var d=a.width;a=a.height;if(d!==b.width||a!==b.height){var e=Od({},{width:d,height:a},c);Jc(b,e,{x:0,y:0},{x:0,y:0},{width:Math.min(b.width,d),height:Math.min(b.height,
a)},c);b.width=d;b.height=a;b.data=e.data}}function Jc(b,a,c,d,e,f){if(0===e.width||0===e.height)return a;if(e.width>b.width||e.height>b.height||c.x>b.width-e.width||c.y>b.height-e.height)throw new RangeError("out of range source coordinates for image copy");if(e.width>a.width||e.height>a.height||d.x>a.width-e.width||d.y>a.height-e.height)throw new RangeError("out of range destination coordinates for image copy");for(var g=b.data,h=a.data,k=0;k<e.height;k++)for(var l=((c.y+k)*b.width+c.x)*f,r=((d.y+
k)*a.width+d.x)*f,t=0;t<e.width*f;t++)h[r+t]=g[l+t];return a}function pc(b,a){for(var c=new Uint8Array(1024),d={},e=0,f=0;256>e;e++,f+=4){d[a]=e/255;var g=b.evaluate(d);c[f+0]=Math.floor(255*g.r/g.a);c[f+1]=Math.floor(255*g.g/g.a);c[f+2]=Math.floor(255*g.b/g.a);c[f+3]=Math.floor(255*g.a)}return new Lc({width:256,height:1},c)}function Db(b,a,c){c=c||2;var d,e,f,g=a&&a.length,h=g?a[0]*c:b.length,k=wb(b,0,h,c,!0),l=[];if(!k||k.next===k.prev)return l;if(g){g=c;var r,t=[];var m=0;for(r=a.length;m<r;m++){var u=
a[m]*g;var n=m<r-1?a[m+1]*g:b.length;(d=wb(b,u,n,g,!1))===d.next&&(d.steiner=!0);t.push(qc(d))}t.sort(Pe);for(m=0;m<t.length;m++)Bh(t[m],k),k=ac(k,k.next)}if(b.length>80*c){var v=a=b[0];var w=d=b[1];for(g=c;g<h;g+=c)(e=b[g])<v&&(v=e),(f=b[g+1])<w&&(w=f),e>a&&(a=e),f>d&&(d=f);var z=0!==(z=Math.max(a-v,d-w))?1/z:0}return Zc(k,l,c,v,w,z),l}function wb(b,a,c,d,e){if(e===0<Pd(b,a,c,d))for(e=a;e<c;e+=d)var f=Ef(e,b[e],b[e+1],f);else for(e=c-d;e>=a;e-=d)f=Ef(e,b[e],b[e+1],f);return f&&ve(f,f.next)&&(jf(f),
f=f.next),f}function ac(b,a){if(!b)return b;a||(a=b);var c=b;do if(b=!1,c.steiner||!ve(c,c.next)&&0!==ob(c.prev,c,c.next))c=c.next;else{if(jf(c),(c=a=c.prev)===c.next)break;b=!0}while(b||c!==a);return a}function Zc(b,a,c,d,e,f,g){if(b){if(!g&&f){var h=b,k=h;do null===k.z&&(k.z=Df(k.x,k.y,d,e,f)),k.prevZ=k.prev,k=k.nextZ=k.next;while(k!==h);k.prevZ.nextZ=null;k.prevZ=null;h=k;var l,r,t,m,u=1;do{k=h;var n=h=null;for(t=0;k;){t++;var v=k;for(l=m=0;l<u&&(m++,v=v.nextZ);l++);for(l=u;0<m||0<l&&v;)0!==m&&
(0===l||!v||k.z<=v.z)?(r=k,k=k.nextZ,m--):(r=v,v=v.nextZ,l--),n?n.nextZ=r:h=r,r.prevZ=n,n=r;k=v}n.nextZ=null;u*=2}while(1<t)}for(k=b;b.prev!==b.next;){r=b.prev;h=b.next;if(f)a:{v=b;u=d;l=e;var w=f;n=v.prev;t=v.next;if(0<=ob(n,v,t))v=!1;else{var z=n.x>v.x?n.x>t.x?n.x:t.x:v.x>t.x?v.x:t.x,x=n.y>v.y?n.y>t.y?n.y:t.y:v.y>t.y?v.y:t.y;m=Df(n.x<v.x?n.x<t.x?n.x:t.x:v.x<t.x?v.x:t.x,n.y<v.y?n.y<t.y?n.y:t.y:v.y<t.y?v.y:t.y,u,l,w);u=Df(z,x,u,l,w);l=v.prevZ;for(w=v.nextZ;l&&l.z>=m&&w&&w.z<=u;){if(l!==v.prev&&l!==
v.next&&xd(n.x,n.y,v.x,v.y,t.x,t.y,l.x,l.y)&&0<=ob(l.prev,l,l.next)||(l=l.prevZ,w!==v.prev&&w!==v.next&&xd(n.x,n.y,v.x,v.y,t.x,t.y,w.x,w.y)&&0<=ob(w.prev,w,w.next))){v=!1;break a}w=w.nextZ}for(;l&&l.z>=m;){if(l!==v.prev&&l!==v.next&&xd(n.x,n.y,v.x,v.y,t.x,t.y,l.x,l.y)&&0<=ob(l.prev,l,l.next)){v=!1;break a}l=l.prevZ}for(;w&&w.z<=u;){if(w!==v.prev&&w!==v.next&&xd(n.x,n.y,v.x,v.y,t.x,t.y,w.x,w.y)&&0<=ob(w.prev,w,w.next)){v=!1;break a}w=w.nextZ}v=!0}}else a:if(v=b,n=v.prev,t=v.next,0<=ob(n,v,t))v=!1;
else{for(m=v.next.next;m!==v.prev;){if(xd(n.x,n.y,v.x,v.y,t.x,t.y,m.x,m.y)&&0<=ob(m.prev,m,m.next)){v=!1;break a}m=m.next}v=!0}if(v)a.push(r.i/c),a.push(b.i/c),a.push(h.i/c),jf(b),k=b=h.next;else if((b=h)===k){if(g)if(1===g){b=ac(b);g=a;r=c;h=b;do k=h.prev,v=h.next.next,!ve(k,v)&&hf(k,h,h.next,v)&&Sc(k,v)&&Sc(v,k)&&(g.push(k.i/r),g.push(h.i/r),g.push(v.i/r),jf(h),jf(h.next),h=b=v),h=h.next;while(h!==b);b=ac(h);Zc(b,a,c,d,e,f,2)}else{if(2===g)a:{g=b;do{for(r=g.next.next;r!==g.prev;){if(g.i!==r.i&&
Zf(g,r)){b=Zd(g,r);g=ac(g,g.next);b=ac(b,b.next);Zc(g,a,c,d,e,f);Zc(b,a,c,d,e,f);break a}r=r.next}g=g.next}while(g!==b)}}else Zc(ac(b),a,c,d,e,f,1);break}}}}function Pe(b,a){return b.x-a.x}function Bh(b,a){if(a=function(b,a){var c=a,d=b.x,e=b.y,f=-1/0;do{if(e<=c.y&&e>=c.next.y&&c.next.y!==c.y){var g=c.x+(e-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(g<=d&&g>f){if(f=g,g===d){if(e===c.y)return c;if(e===c.next.y)return c.next}var h=c.x<c.next.x?c:c.next}}c=c.next}while(c!==a);if(!h)return null;if(d===f)return h;
g=h;var k=h.x,l=h.y,r=1/0;c=h;do{if(d>=c.x&&c.x>=k&&d!==c.x&&xd(e<l?d:f,e,k,l,e<l?f:d,e,c.x,c.y)){a=Math.abs(e-c.y)/(d-c.x);var t;if((t=Sc(c,b))&&!(t=a<r)&&(t=a===r)&&!(t=c.x>h.x)&&(t=c.x===h.x)){t=h;var m=c;t=0>ob(t.prev,t,m.prev)&&0>ob(m.next,t,t.next)}t&&(h=c,r=a)}c=c.next}while(c!==g);return h}(b,a))b=Zd(a,b),ac(b,b.next)}function Df(b,a,c,d,e){return 1431655765&((b=858993459&((b=252645135&((b=16711935&((b=32767*(b-c)*e)|b<<8))|b<<4))|b<<2))|b<<1)|(1431655765&((a=858993459&((a=252645135&((a=16711935&
((a=32767*(a-d)*e)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function qc(b){var a=b,c=b;do(a.x<c.x||a.x===c.x&&a.y<c.y)&&(c=a),a=a.next;while(a!==b);return c}function xd(b,a,c,d,e,f,g,h){return 0<=(e-g)*(a-h)-(b-g)*(f-h)&&0<=(b-g)*(d-h)-(c-g)*(a-h)&&0<=(c-g)*(f-h)-(e-g)*(d-h)}function Zf(b,a){return b.next.i!==a.i&&b.prev.i!==a.i&&!function(b,a){var c=b;do{if(c.i!==b.i&&c.next.i!==b.i&&c.i!==a.i&&c.next.i!==a.i&&hf(c,c.next,b,a))return!0;c=c.next}while(c!==b);return!1}(b,a)&&(Sc(b,a)&&Sc(a,b)&&function(b,a){var c=
b,d=!1,e=(b.x+a.x)/2;a=(b.y+a.y)/2;do c.y>a!=c.next.y>a&&c.next.y!==c.y&&e<(c.next.x-c.x)*(a-c.y)/(c.next.y-c.y)+c.x&&(d=!d),c=c.next;while(c!==b);return d}(b,a)&&(ob(b.prev,b,a.prev)||ob(b,a.prev,a))||ve(b,a)&&0<ob(b.prev,b,b.next)&&0<ob(a.prev,a,a.next))}function ob(b,a,c){return(a.y-b.y)*(c.x-a.x)-(a.x-b.x)*(c.y-a.y)}function ve(b,a){return b.x===a.x&&b.y===a.y}function hf(b,a,c,d){var e=cd(ob(b,a,c)),f=cd(ob(b,a,d)),g=cd(ob(c,d,b)),h=cd(ob(c,d,a));return e!==f&&g!==h||!(0!==e||!Gb(b,c,a))||!(0!==
f||!Gb(b,d,a))||!(0!==g||!Gb(c,b,d))||!(0!==h||!Gb(c,a,d))}function Gb(b,a,c){return a.x<=Math.max(b.x,c.x)&&a.x>=Math.min(b.x,c.x)&&a.y<=Math.max(b.y,c.y)&&a.y>=Math.min(b.y,c.y)}function cd(b){return 0<b?1:0>b?-1:0}function Sc(b,a){return 0>ob(b.prev,b,b.next)?0<=ob(b,a,b.next)&&0<=ob(b,b.prev,a):0>ob(b,a,b.prev)||0>ob(b,b.next,a)}function Zd(b,a){var c=new zc(b.i,b.x,b.y),d=new zc(a.i,a.x,a.y),e=b.next,f=a.prev;return b.next=a,a.prev=b,c.next=e,e.prev=c,d.next=c,c.prev=d,f.next=d,d.prev=f,d}function Ef(b,
a,c,d){b=new zc(b,a,c);return d?(b.next=d.next,b.prev=d,d.next.prev=b,d.next=b):(b.prev=b,b.next=b),b}function jf(b){b.next.prev=b.prev;b.prev.next=b.next;b.prevZ&&(b.prevZ.nextZ=b.nextZ);b.nextZ&&(b.nextZ.prevZ=b.prevZ)}function zc(b,a,c){this.i=b;this.x=a;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function Pd(b,a,c,d){for(var e=0,f=c-d;a<c;a+=d)e+=(b[f]-b[a])*(b[a+1]+b[f+1]),f=a;return e}function we(b,a,c,d,e){!function lj(b,a,c,d,e){for(;d>c;){if(600<d-c){var f=
d-c+1,g=a-c+1,h=Math.log(f),k=.5*Math.exp(2*h/3);h=.5*Math.sqrt(h*k*(f-k)/f)*(0>g-f/2?-1:1);lj(b,a,Math.max(c,Math.floor(a-g*k/f+h)),Math.min(d,Math.floor(a+(f-g)*k/f+h)),e)}f=b[a];g=c;k=d;lf(b,c,a);for(0<e(b[d],f)&&lf(b,c,d);g<k;){lf(b,g,k);g++;for(k--;0>e(b[g],f);)g++;for(;0<e(b[k],f);)k--}0===e(b[c],f)?lf(b,c,k):lf(b,++k,d);k<=a&&(c=k+1);a<=k&&(d=k-1)}}(b,a,c||0,d||b.length-1,e||$f)}function lf(b,a,c){var d=b[a];b[a]=b[c];b[c]=d}function $f(b,a){return b<a?-1:b>a?1:0}function Re(b,a){var c=b.length;
if(1>=c)return[b];for(var d,e,f=[],g=0;g<c;g++){var h=b[g];for(var k=0,l=0,r=h.length,t=r-1,m,u=void 0;l<r;t=l++)m=h[l],k+=((u=h[t]).x-m.x)*(m.y+u.y);h=k;0!==h&&(b[g].area=Math.abs(h),void 0===e&&(e=0>h),e===0>h?(d&&f.push(d),d=[b[g]]):d.push(b[g]))}if(d&&f.push(d),1<a)for(b=0;b<f.length;b++)f[b].length<=a||(we(f[b],a,1,f[b].length-1,Qd),f[b]=f[b].slice(0,a));return f}function Qd(b,a){return a.area-b.area}function ld(b,a,c){c=c.patternDependencies;for(var d=!1,e=0;e<a.length;e+=1){var f=a[e].paint.get(b+
"-pattern");f.isConstant()||(d=!0);(f=f.constantOr(null))&&(d=!0,c[f.to]=!0,c[f.from]=!0)}return d}function Hf(b,a,c,d,e){e=e.patternDependencies;for(var f=0;f<a.length;f+=1){var g=a[f],h=g.paint.get(b+"-pattern").value;if("constant"!==h.kind){var k=h.evaluate({zoom:d-1},c,{}),l=h.evaluate({zoom:d},c,{});h=h.evaluate({zoom:d+1},c,{});e[k]=!0;e[l]=!0;e[h]=!0;c.patterns[g.id]={min:k,mid:l,max:h}}}return c}function xe(b,a,c,d,e){this.properties={};this.extent=c;this.type=0;this._pbf=b;this._geometry=
-1;this._keys=d;this._values=e;b.readFields(ye,this,a)}function ye(b,a,c){if(1==b)a.id=c.readVarint();else if(2==b)for(b=c.readVarint()+c.pos;c.pos<b;){var d=a._keys[c.readVarint()],e=a._values[c.readVarint()];a.properties[d]=e}else 3==b?a.type=c.readVarint():4==b&&(a._geometry=c.pos)}function nf(b,a){this.version=1;this.name=null;this.extent=4096;this.length=0;this._pbf=b;this._keys=[];this._values=[];this._features=[];b.readFields(Bg,this,a);this.length=this._features.length}function Bg(b,a,c){15===
b?a.version=c.readVarint():1===b?a.name=c.readString():5===b?a.extent=c.readVarint():2===b?a._features.push(c.pos):3===b?a._keys.push(c.readString()):4===b&&a._values.push(function(b){for(var a=null,c=b.readVarint()+b.pos;b.pos<c;)a=b.readVarint()>>3,a=1===a?b.readString():2===a?b.readFloat():3===a?b.readDouble():4===a?b.readVarint64():5===a?b.readVarint():6===a?b.readSVarint():7===a?b.readBoolean():null;return a}(c))}function Te(b,a,c){3===b&&(b=new jh(c,c.readVarint()+c.pos),b.length&&(a[b.name]=
b))}function Ad(b,a,c,d,e,f,g,h){b.emplaceBack(a,c,2*Math.floor(d*ph)+g,e*ph*2,f*ph*2,Math.round(h))}function ag(b){return b.every(function(b){return 0>b.x})||b.every(function(b){return 8192<b.x})||b.every(function(b){return 0>b.y})||b.every(function(b){return 8192<b.y})}function of(b,a){return b.x*a.x+b.y*a.y}function bg(b,a){if(1===b.length){var c=a[0],d=a[1];a=a[3];b=b[0];var e=d.sub(c),f=a.sub(c),g=b.sub(c);b=of(e,e);var h=of(e,f),k=of(f,f);e=of(g,e);f=of(g,f);g=b*k-h*h;k=(k*e-h*f)/g;b=(b*f-h*
e)/g;return c.z*(1-k-b)+d.z*k+a.z*b}c=1/0;for(d=0;d<a.length;d+=1)c=Math.min(c,a[d].z);return c}function Bd(b,a){return 0<a?a+2*b:b}function ih(b,a,c){return b.sections.forEach(function(b){var d=b.text;var e=a.layout.get("text-transform").evaluate(c,{});e=("uppercase"===e?d=d.toLocaleUpperCase():"lowercase"===e&&(d=d.toLocaleLowerCase()),Pg.applyArabicShaping&&(d=Pg.applyArabicShaping(d)),d);b.text=e}),b}function Ca(b,a,c,d,e,f,g,h,k,l,r){c=gc.fromFeature(b,c);l===Kc.vertical&&c.verticalizePunctuation();
var t=Pg.processBidirectionalText,m=Pg.processStyledBidirectionalText;if(t&&1===c.sections.length){b=[];var u=0;for(d=t(c.toString(),pf(c,h,d,a));u<d.length;u+=1){t=d[u];m=new gc;m.text=t;m.sections=c.sections;for(var n=0;n<t.length;n++)m.sectionIndex.push(0);b.push(m)}}else if(m)for(b=[],u=0,d=m(c.text,c.sectionIndex,pf(c,h,d,a));u<d.length;u+=1)t=d[u],m=new gc,m.text=t[0],m.sectionIndex=t[1],m.sections=c.sections,b.push(m);else b=function(b,a){for(var c=[],d=b.text,e=0,f=0;f<a.length;f+=1){var g=
a[f];c.push(b.substring(e,g));e=g}return e<d.length&&c.push(b.substring(e,d.length)),c}(c,pf(c,h,d,a));d=[];k={positionedGlyphs:d,text:c.toString(),top:k[1],bottom:k[1],left:k[0],right:k[0],writingMode:l,lineCount:b.length,yOffset:-17};return function(b,a,c,d,e,f,g,h,k){var l=0,r=b.yOffset,t=0,m=b.positionedGlyphs;f="right"===f?1:"left"===f?0:.5;for(var u=0;u<c.length;u+=1){var n=c[u];n.trim();var v=n.getMaxScale();if(n.length()){for(var w=m.length,z=0;z<n.length();z++){var x=n.getSection(z),A=n.getSectionIndex(z),
y=n.getCharCode(z),B=24*(v-x.scale),p=a[x.fontStack];(p=p&&p[y])&&(g===Kc.horizontal||!k&&!gf(y)||k&&(ae[y]||(Cb=y,Ia.Arabic(Cb)||Ia["Arabic Supplement"](Cb)||Ia["Arabic Extended-A"](Cb)||Ia["Arabic Presentation Forms-A"](Cb)||Ia["Arabic Presentation Forms-B"](Cb)))?(m.push({glyph:y,x:l,y:r+B,vertical:!1,scale:x.scale,fontStack:x.fontStack,sectionIndex:A}),l+=p.metrics.advance*x.scale+h):(m.push({glyph:y,x:l,y:r+B,vertical:!0,scale:x.scale,fontStack:x.fontStack,sectionIndex:A}),l+=24*x.scale+h))}if(m.length!==
w&&(t=Math.max(l-h,t),l=m,n=m.length-1,f&&(z=l[n],x=(x=a[z.fontStack])&&x[z.glyph])))for(z=(l[n].x+x.metrics.advance*z.scale)*f;w<=n;w++)l[w].x-=z;l=0;r+=d*v}else r+=d}var Cb;e=Uc(e);a=e.horizontalAlign;e=e.verticalAlign;f=(f-a)*t;c=(-e*c.length+.5)*d;for(d=0;d<m.length;d++)m[d].x+=f,m[d].y+=c;!0;r-=b.yOffset;b.top+=-e*r;b.bottom=b.top+r;b.left+=-a*t;b.right=b.left+t}(k,a,b,e,f,g,l,h,r),!!d.length&&k}function Fb(b,a,c,d){var e=Math.pow(b-a,2);return d?b<a?e/2:2*e:e+Math.abs(c)*c}function Dd(b,a,c){var d=
0;return 10===b&&(d-=1E4),c&&(d+=150),40!==b&&65288!==b||(d+=50),41!==a&&65289!==a||(d+=50),d}function Dg(b,a,c,d,e,f){for(var g=null,h=Fb(a,c,e,f),k=0;k<d.length;k+=1){var l=d[k],r=Fb(a-l.x,c,e,f)+l.badness;r<=h&&(g=l,h=r)}return{index:b,x:a,priorBreak:g,badness:h}}function pf(b,a,c,d){if(!c||!b)return[];var e,f=[];c=function(b,a,c,d){for(var e=0,f=0;f<b.length();f++){var g=b.getSection(f),h=d[g.fontStack];(h=h&&h[b.getCharCode(f)])&&(e+=h.metrics.advance*g.scale+a)}return e/Math.max(1,Math.ceil(e/
c))}(b,a,c,d);for(var g=0<=b.text.indexOf(""),h=0,k=0;k<b.length();k++){var l=b.getSection(k),r=b.getCharCode(k),t=d[l.fontStack];t=t&&t[r];if(t&&!ae[r]&&(h+=t.metrics.advance*l.scale+a),k<b.length()-1)l=!(11904>(e=r)||!(Ia["Bopomofo Extended"](e)||Ia.Bopomofo(e)||Ia["CJK Compatibility Forms"](e)||Ia["CJK Compatibility Ideographs"](e)||Ia["CJK Compatibility"](e)||Ia["CJK Radicals Supplement"](e)||Ia["CJK Strokes"](e)||Ia["CJK Symbols and Punctuation"](e)||Ia["CJK Unified Ideographs Extension A"](e)||
Ia["CJK Unified Ideographs"](e)||Ia["Enclosed CJK Letters and Months"](e)||Ia["Halfwidth and Fullwidth Forms"](e)||Ia.Hiragana(e)||Ia["Ideographic Description Characters"](e)||Ia["Kangxi Radicals"](e)||Ia["Katakana Phonetic Extensions"](e)||Ia.Katakana(e)||Ia["Vertical Forms"](e)||Ia["Yi Radicals"](e)||Ia["Yi Syllables"](e))),(Kf[r]||l)&&f.push(Dg(k+1,h,c,f,Dd(r,b.getCharCode(k+1),l&&g),!1))}return function mj(b){return b?mj(b.priorBreak).concat(b.index):[]}(Dg(b.length(),h,c,f,0,!0))}function Uc(b){var a=
.5,c=.5;switch(b){case "right":case "top-right":case "bottom-right":a=1;break;case "left":case "top-left":case "bottom-left":a=0}switch(b){case "bottom":case "bottom-right":case "bottom-left":c=1;break;case "top":case "top-right":case "top-left":c=0}return{horizontalAlign:a,verticalAlign:c}}function Eg(b,a){a=a.expression;if("constant"===a.kind)return{kind:"constant",layoutSize:a.evaluate(new yb(b+1))};if("source"===a.kind)return{kind:"source"};for(var c=a.zoomStops,d=a.interpolationType,e=0;e<c.length&&
c[e]<=b;)e++;for(var f=e=Math.max(0,e-1);f<c.length&&c[f]<b+1;)f++;f=Math.min(c.length-1,f);b=c[e];c=c[f];return"composite"===a.kind?{kind:"composite",minZoom:b,maxZoom:c,interpolationType:d}:{kind:"camera",minZoom:b,maxZoom:c,minSize:a.evaluate(new yb(b)),maxSize:a.evaluate(new yb(c)),interpolationType:d}}function Ue(b,a,c){var d=a.uSize;a=a.uSizeT;var e=c.lowerSize;c=c.upperSize;return"source"===b.kind?e/256:"composite"===b.kind?ha(e/256,c/256,a):d}function Sd(b,a){var c=0,e=0;if("constant"===b.kind)e=
b.layoutSize;else if("source"!==b.kind){var f=b.interpolationType,g=b.minZoom,h=b.maxZoom;a=f?d(Sb.interpolationFactor(f,a,g,h),0,1):0;"camera"===b.kind?e=ha(b.minSize,b.maxSize,a):c=a}return{uSizeT:c,uSize:e}}function Lf(b,a,c,d,e,f,g,h){b.emplaceBack(a,c,Math.round(32*d),Math.round(32*e),f,g,h?h[0]:0,h?h[1]:0)}function qf(b,a,c){b.emplaceBack(a.x,a.y,c);b.emplaceBack(a.x,a.y,c);b.emplaceBack(a.x,a.y,c);b.emplaceBack(a.x,a.y,c)}function rf(b){for(var a=0,c=0,d=0;d<b.length;d+=1){var e=b[d];a+=e.w*
e.h;c=Math.max(c,e.w)}b.sort(function(b,a){return a.h-b.h});c=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),c),h:1/0}];for(var f=e=d=0;f<b.length;f+=1)for(var g=b[f],h=c.length-1;0<=h;h--){var k=c[h];if(!(g.w>k.w||g.h>k.h)){(g.x=k.x,g.y=k.y,e=Math.max(e,g.y+g.h),d=Math.max(d,g.x+g.w),g.w===k.w&&g.h===k.h)?(g=c.pop(),h<c.length&&(c[h]=g)):g.h===k.h?(k.x+=g.w,k.w-=g.w):g.w===k.w?(k.y+=g.h,k.h-=g.h):(c.push({x:k.x+g.w,y:k.y,w:k.w-g.w,h:g.h}),k.y+=g.h,k.h-=g.h);break}}return{w:d,h:e,fill:a/(d*e)||
0}}function ib(b){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(b)?b:new Uint8Array(b||0);this.type=this.pos=0;this.length=this.buf.length}function nd(b){return b.type===ib.Bytes?b.readVarint()+b.pos:b.pos+1}function Ve(b,a,c){a=16383>=a?1:2097151>=a?2:268435455>=a?3:Math.floor(Math.log(a)/(7*Math.LN2));c.realloc(a);for(var d=c.pos-1;d>=b;d--)c.buf[d+a]=c.buf[d]}function dg(b,a){for(var c=0;c<b.length;c++)a.writeVarint(b[c])}function eg(b,a){for(var c=0;c<b.length;c++)a.writeSVarint(b[c])}function md(b,
a){for(var c=0;c<b.length;c++)a.writeFloat(b[c])}function ce(b,a){for(var c=0;c<b.length;c++)a.writeDouble(b[c])}function de(b,a){for(var c=0;c<b.length;c++)a.writeBoolean(b[c])}function dd(b,a){for(var c=0;c<b.length;c++)a.writeFixed32(b[c])}function fg(b,a){for(var c=0;c<b.length;c++)a.writeSFixed32(b[c])}function qb(b,a){for(var c=0;c<b.length;c++)a.writeFixed64(b[c])}function Hh(b,a){for(var c=0;c<b.length;c++)a.writeSFixed64(b[c])}function tf(b,a){return(b[a]|b[a+1]<<8|b[a+2]<<16)+16777216*b[a+
3]}function ee(b,a,c){b[c]=a;b[c+1]=a>>>8;b[c+2]=a>>>16;b[c+3]=a>>>24}function lc(b,a){return(b[a]|b[a+1]<<8|b[a+2]<<16)+(b[a+3]<<24)}function Ab(b,a,c){1===b&&c.readMessage(hc,a)}function hc(b,a,c){if(3===b){b=c.readMessage(pd,{});c=b.width;var d=b.height,e=b.left,f=b.top,g=b.advance;a.push({id:b.id,bitmap:new ze({width:c+6,height:d+6},b.bitmap),metrics:{width:c,height:d,left:e,top:f,advance:g}})}}function pd(b,a,c){1===b?a.id=c.readVarint():2===b?a.bitmap=c.readBytes():3===b?a.width=c.readVarint():
4===b?a.height=c.readVarint():5===b?a.left=c.readSVarint():6===b?a.top=c.readSVarint():7===b&&(a.advance=c.readVarint())}function qd(b,a,c){c=12756274*Math.PI/256/Math.pow(2,c);return[b*c-12756274*Math.PI/2,a*c-12756274*Math.PI/2]}function fe(b){return(180+b)/360}function Fg(b){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+b*Math.PI/360)))/360}function ed(b){return 360/Math.PI*Math.atan(Math.exp((180-360*b)*Math.PI/180))-90}function jc(b,a,c,d){0>(b*=2)&&(b=-1*b-1);var e=1<<a;return 32*(e*e*
b+e*d+c)+a}function Jf(b){for(var a=1/0,c=1/0,d=-1/0,e=-1/0,f=0;f<b.length;f+=1){var g=b[f];a=Math.min(a,g.x);c=Math.min(c,g.y);d=Math.max(d,g.x);e=Math.max(e,g.y)}return{minX:a,minY:c,maxX:d,maxY:e}}function Ac(b,a){return a-b}function lh(b,a,c,d,e){if(void 0===a.segment)return!0;var f=a;a=a.segment+1;for(var g=0;g>-c/2;){if(0>--a)return!1;g-=b[a].dist(f);f=b[a]}g+=b[a].dist(b[a+1]);a++;f=[];for(var h=0;g<c/2;){var k=b[a],l=b[a+1];if(!l)return!1;var r=b[a-1].angleTo(k)-k.angleTo(l);r=Math.abs((r+
3*Math.PI)%(2*Math.PI)-Math.PI);f.push({distance:g,angleDelta:r});for(h+=r;g-f[0].distance>d;)h-=f.shift().angleDelta;if(h>e)return!1;a++;g+=k.dist(l)}return!0}function dc(b){for(var a=0,c=0;c<b.length-1;c++)a+=b[c].dist(b[c+1]);return a}function gg(b,a,c,d,e,f){e=c?.6*e*f:0;c=Math.max(c?c.right-c.left:0,d?d.right-d.left:0)*f;var g=0,h=dc(b)/2;for(d=0;d<b.length-1;d++){f=b[d];var k=b[d+1],l=f.dist(k);if(g+l>h)return h=(h-g)/l,g=ha(f.x,k.x,h),h=ha(f.y,k.y,h),d=new cg(g,h,k.angleTo(f),d),d._round(),
!e||lh(b,d,c,e,a)?d:void 0;g+=l}}function ge(b,a,c,d,e,f,g,h,k){e=Math.max(d?d.right-d.left:0,e?e.right-e.left:0);var l=e*g,r=0===b[0].x||b[0].x===k||0===b[0].y||b[0].y===k;return a-l<a/4&&(a=l+a/4),function nj(b,a,c,d,e,f,g,h,k){var l=f/2,r=dc(b),t=0;a-=c;for(var m=[],u=0;u<b.length-1;u++){for(var n=b[u],v=b[u+1],w=n.dist(v),z=v.angleTo(n);a+c<t+w;){var x=((a+=c)-t)/w,A=ha(n.x,v.x,x);x=ha(n.y,v.y,x);0<=A&&A<k&&0<=x&&x<k&&0<=a-l&&a+l<=r&&(A=new cg(A,x,z,u),A._round(),d&&!lh(b,A,f,d,e)||m.push(A))}t+=
w}h||m.length||g||(m=nj(b,t/2,c,d,e,f,g,!0,k));return m}(b,r?a/2*h%a:(e/2+2*f)*g*h%a,a,d?.6*f*g:0,c,l,r,!1,k)}function Ii(b,a){return b<a?-1:b>a?1:0}function he(b,a,c){void 0===a&&(a=1);void 0===c&&(c=!1);for(var d=1/0,e=1/0,f=-1/0,g=-1/0,h=b[0],k=0;k<h.length;k++){var l=h[k];(!k||l.x<d)&&(d=l.x);(!k||l.y<e)&&(e=l.y);(!k||l.x>f)&&(f=l.x);(!k||l.y>g)&&(g=l.y)}l=Math.min(f-d,g-e);h=l/2;k=new ii([],Kh);if(0===l)return new Sa(d,e);for(;d<f;d+=l)for(var r=e;r<g;r+=l)k.push(new uf(d+h,r+h,h,b));g=f=e=0;
d=b[0];l=0;r=d.length;for(var t=r-1;l<r;t=l++){var m=d[l];t=d[t];var u=m.x*t.y-t.x*m.y;f+=(m.x+t.x)*u;g+=(m.y+t.y)*u;e+=3*u}e=new uf(f/e,g/e,0,b);for(f=k.length;k.length;)g=k.pop(),(g.d>e.d||!e.d)&&(e=g,c&&console.log("found best %d after %d probes",Math.round(1E4*g.d)/1E4,f)),g.max-e.d<=a||(h=g.h/2,k.push(new uf(g.p.x-h,g.p.y-h,h,b)),k.push(new uf(g.p.x+h,g.p.y-h,h,b)),k.push(new uf(g.p.x-h,g.p.y+h,h,b)),k.push(new uf(g.p.x+h,g.p.y+h,h,b)),f+=4);return c&&(console.log("num probes: "+f),console.log("best distance: "+
e.d)),e.p}function Kh(b,a){return a.max-b.max}function uf(b,a,c,d){this.p=new Sa(b,a);this.h=c;b=this.p;a=!1;c=1/0;for(var e=0;e<d.length;e++)for(var f=d[e],g=0,h=f.length,k=h-1;g<h;k=g++){var l=f[g];k=f[k];l.y>b.y!=k.y>b.y&&b.x<(k.x-l.x)*(b.y-l.y)/(k.y-l.y)+l.x&&(a=!a);c=Math.min(c,ic(b,l,k))}this.d=(a?1:-1)*Math.sqrt(c);this.max=this.d+this.h*Math.SQRT2}function ie(b,a){var c=0,d=0,e=a/Math.sqrt(2);switch(b){case "top-right":case "top-left":d=e-7;break;case "bottom-right":case "bottom-left":d=-e+
7;break;case "bottom":d=-a+7;break;case "top":d=a-7}switch(b){case "top-right":case "bottom-right":c=-e;break;case "top-left":case "bottom-left":c=e;break;case "left":c=a;break;case "right":c=-a}return[c,d]}function Cc(b){switch(b){case "right":case "top-right":case "bottom-right":return"right";case "left":case "top-left":case "bottom-left":return"left"}return"center"}function Mc(b,a,c,d,e,f,g,h,k,l,r,t,m){for(var u=b.allowVerticalPlacement,n=d.layout.get("text-rotate").evaluate(f,{})*Math.PI/180,
v=c.positionedGlyphs,w=[],z=0;z<v.length;z++){var x=v[z],A=t[x.fontStack],y=A&&A[x.glyph];if(y&&(A=y.rect)){var B=y.metrics.advance*x.scale/2,q=e?[x.x+B,x.y]:[0,0],C=e?[0,0]:[x.x+B+g[0],x.y+g[1]],Cb=(e||u)&&x.vertical,D=[0,0];Cb&&(D=C,C=[0,0]);var I=(y.metrics.left-4)*x.scale-B+C[0];C=(-y.metrics.top-4)*x.scale+C[1];var E=I+A.w*x.scale,N=C+A.h*x.scale;y=new Sa(I,C);C=new Sa(E,C);I=new Sa(I,N);E=new Sa(E,N);Cb&&(Cb=new Sa(-B,B-c.yOffset),N=-Math.PI/2,B=new Sa(5-c.yOffset-(12-B),0),D=new (Function.prototype.bind.apply(Sa,
[null].concat(D))),y._rotateAround(N,Cb)._add(B)._add(D),C._rotateAround(N,Cb)._add(B)._add(D),I._rotateAround(N,Cb)._add(B)._add(D),E._rotateAround(N,Cb)._add(B)._add(D));n&&(D=Math.sin(n),B=Math.cos(n),D=[B,-D,D,B],y._matMult(D),C._matMult(D),I._matMult(D),E._matMult(D));w.push({tl:y,tr:C,bl:I,br:E,tex:A,writingMode:c.writingMode,glyphOffset:q,sectionIndex:x.sectionIndex})}}c=b.textSizeData;t=null;"source"===c.kind?65535<(t=[256*d.layout.get("text-size").evaluate(f,{})])[0]&&p(b.layerIds[0]+': Value for "text-size" is \x3e\x3d 256. Reduce your "text-size".'):
"composite"===c.kind&&(65535<(t=[256*m.compositeTextSizes[0].evaluate(f,{}),256*m.compositeTextSizes[1].evaluate(f,{})])[0]||65535<t[1])&&p(b.layerIds[0]+': Value for "text-size" is \x3e\x3d 256. Reduce your "text-size".');b.addSymbols(b.text,w,t,g,e,f,k,a,h.lineStartIndex,h.lineLength);for(a=0;a<l.length;a+=1)r[l[a]]=b.text.placedSymbolArray.length-1;return 4*w.length}function ch(b){for(var a in b)return b[a];return null}function wi(b,a,c,d){b=b.compareText;if(a in b)for(var e=b[a],f=e.length-1;0<=
f;f--){if(d.dist(e[f])<c)return!0}else b[a]=[];return b[a].push(d),!1}var fi=e;e.prototype.sampleCurveX=function(b){return((this.ax*b+this.bx)*b+this.cx)*b};e.prototype.sampleCurveY=function(b){return((this.ay*b+this.by)*b+this.cy)*b};e.prototype.sampleCurveDerivativeX=function(b){return(3*this.ax*b+2*this.bx)*b+this.cx};e.prototype.solveCurveX=function(b,a){var c,d;void 0===a&&(a=1E-6);var e=b;for(c=0;8>c;c++){if(d=this.sampleCurveX(e)-b,Math.abs(d)<a)return e;var f=this.sampleCurveDerivativeX(e);
if(1E-6>Math.abs(f))break;e-=d/f}if((e=b)<(c=0))return c;if(e>(f=1))return f;for(;c<f&&!(d=this.sampleCurveX(e),Math.abs(d-b)<a);)b>d?c=e:f=e,e=.5*(f-c)+c;return e};e.prototype.solve=function(b,a){return this.sampleCurveY(this.solveCurveX(b,a))};var Sa=h;h.prototype={clone:function(){return new h(this.x,this.y)},add:function(b){return this.clone()._add(b)},sub:function(b){return this.clone()._sub(b)},multByPoint:function(b){return this.clone()._multByPoint(b)},divByPoint:function(b){return this.clone()._divByPoint(b)},
mult:function(b){return this.clone()._mult(b)},div:function(b){return this.clone()._div(b)},rotate:function(b){return this.clone()._rotate(b)},rotateAround:function(b,a){return this.clone()._rotateAround(b,a)},matMult:function(b){return this.clone()._matMult(b)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(b){return this.x===b.x&&
this.y===b.y},dist:function(b){return Math.sqrt(this.distSqr(b))},distSqr:function(b){var a=b.x-this.x;b=b.y-this.y;return a*a+b*b},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(b){return Math.atan2(this.y-b.y,this.x-b.x)},angleWith:function(b){return this.angleWithSep(b.x,b.y)},angleWithSep:function(b,a){return Math.atan2(this.x*a-this.y*b,this.x*b+this.y*a)},_matMult:function(b){var a=b[2]*this.x+b[3]*this.y;return this.x=b[0]*this.x+b[1]*this.y,this.y=a,this},_add:function(b){return this.x+=
b.x,this.y+=b.y,this},_sub:function(b){return this.x-=b.x,this.y-=b.y,this},_mult:function(b){return this.x*=b,this.y*=b,this},_div:function(b){return this.x/=b,this.y/=b,this},_multByPoint:function(b){return this.x*=b.x,this.y*=b.y,this},_divByPoint:function(b){return this.x/=b.x,this.y/=b.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var b=this.y;return this.y=this.x,this.x=-b,this},_rotate:function(b){var a=Math.cos(b);b=Math.sin(b);var c=b*this.x+a*this.y;return this.x=
a*this.x-b*this.y,this.y=c,this},_rotateAround:function(b,a){var c=Math.cos(b);b=Math.sin(b);var d=a.y+b*(this.x-a.x)+c*(this.y-a.y);return this.x=a.x+c*(this.x-a.x)-b*(this.y-a.y),this.y=d,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};h.convert=function(b){return b instanceof h?b:Array.isArray(b)?new h(b[0],b[1]):b};var Li=f(.25,.1,.25,1),Ae=1,Qh={},De,We,nh,kh,Ni=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),
ig=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,rc=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,be={now:Ni,frame:function(b){var a=ig(b);return{cancel:function(){return rc(a)}}},getImageData:function(b){var a=self.document.createElement("canvas"),c=a.getContext("2d");if(!c)throw Error("failed to create canvas 2d context");return a.width=b.width,a.height=
b.height,c.drawImage(b,0,0,b.width,b.height),c.getImageData(0,0,b.width,b.height)},resolveURL:function(b){return De||(De=self.document.createElement("a")),De.href=b,De.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==We&&(We=self.matchMedia("(prefers-reduced-motion: reduce)")),We.matches)}},Ob={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?
"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Qe={supported:!1,testSupport:function(b){!dh&&kh&&(Eb?E(b):nh=b)}},dh=!1,Eb=!1;self.document&&((kh=self.document.createElement("img")).onload=function(){nh&&E(nh);nh=null;Eb=!0},kh.onerror=function(){dh=!0;nh=null},kh.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA\x3d");
var xb=function(b,a){this._transformRequestFn=b;this._customAccessToken=a;this._createSkuToken()};xb.prototype._createSkuToken=function(){var b;var a="";for(b=0;10>b;b++)a+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];a=["101",a].join("");b=Date.now()+432E5;this._skuToken=a;this._skuTokenExpiresAt=b};xb.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt};xb.prototype.transformRequest=function(b,a){return this._transformRequestFn&&
this._transformRequestFn(b,a)||{url:b}};xb.prototype.normalizeStyleURL=function(b,a){if(!F(b))return b;b=L(b);return b.path="/styles/v1"+b.path,this._makeAPIURL(b,this._customAccessToken||a)};xb.prototype.normalizeGlyphsURL=function(b,a){if(!F(b))return b;b=L(b);return b.path="/fonts/v1"+b.path,this._makeAPIURL(b,this._customAccessToken||a)};xb.prototype.normalizeSourceURL=function(b,a){if(!F(b))return b;b=L(b);return b.path="/v4/"+b.authority+".json",b.params.push("secure"),this._makeAPIURL(b,this._customAccessToken||
a)};xb.prototype.normalizeSpriteURL=function(b,a,c,d){var e=L(b);return F(b)?(e.path="/styles/v1"+e.path+"/sprite"+a+c,this._makeAPIURL(e,this._customAccessToken||d)):(e.path+=""+a+c,J(e))};xb.prototype.normalizeTileURL=function(b,a,c){if(this._isSkuTokenExpired()&&this._createSkuToken(),!a||!F(a))return b;b=L(b);return b.path=b.path.replace(/(\.(png|jpg)\d*)(?=$)/,(2<=be.devicePixelRatio||512===c?"@2x":"")+(Qe.supported?".webp":"$1")),b.path=b.path.replace(/^.+\/v4\//,"/"),b.path="/v4"+b.path,Ob.REQUIRE_ACCESS_TOKEN&&
(Ob.ACCESS_TOKEN||this._customAccessToken)&&this._skuToken&&b.params.push("sku\x3d"+this._skuToken),this._makeAPIURL(b,this._customAccessToken)};xb.prototype.canonicalizeTileURL=function(b){var a=L(b);if(!a.path.match(/(^\/v4\/)/)||!a.path.match(/\.[\w]+$/))return b;b="mapbox://tiles/"+a.path.replace("/v4/","");a=a.params.filter(function(b){return!b.match(/^access_token=/)});return a.length&&(b+="?"+a.join("\x26")),b};xb.prototype.canonicalizeTileset=function(b,a){if(!F(a))return b.tiles||[];a=[];
var c=0;for(b=b.tiles;c<b.length;c+=1){var d=this.canonicalizeTileURL(b[c]);a.push(d)}return a};xb.prototype._makeAPIURL=function(b,a){var c=L(Ob.API_URL);if(b.protocol=c.protocol,b.authority=c.authority,"/"!==c.path&&(b.path=""+c.path+b.path),!Ob.REQUIRE_ACCESS_TOKEN)return J(b);if(!(a=a||Ob.ACCESS_TOKEN))throw Error("An API access token is required to use Mapbox GL. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");if("s"===a[0])throw Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");
return b.params=b.params.filter(function(b){return-1===b.indexOf("access_token")}),b.params.push("access_token\x3d"+a),J(b)};var $d=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i,Bi=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/,jg=function(b){this.type=b;this.anonId=null;this.eventData={};this.queue=[];this.pendingRequest=null};jg.prototype.getStorageKey=function(b){var a,c=H(Ob.ACCESS_TOKEN),d="";return c&&c.u?(a=c.u,d=self.btoa(encodeURIComponent(a).replace(/%([0-9A-F]{2})/g,function(b,a){return String.fromCharCode(Number("0x"+
a))}))):d=Ob.ACCESS_TOKEN||"",b?"mapbox.eventData."+b+":"+d:"mapbox.eventData:"+d};jg.prototype.fetchEventData=function(){var b=G("localStorage"),a=this.getStorageKey(),c=this.getStorageKey("uuid");if(b)try{var d=self.localStorage.getItem(a);d&&(this.eventData=JSON.parse(d));var e=self.localStorage.getItem(c);e&&(this.anonId=e)}catch(df){p("Unable to read from LocalStorage")}};jg.prototype.saveEventData=function(){var b=G("localStorage"),a=this.getStorageKey(),c=this.getStorageKey("uuid");if(b)try{self.localStorage.setItem(c,
this.anonId),1<=Object.keys(this.eventData).length&&self.localStorage.setItem(a,JSON.stringify(this.eventData))}catch(gj){p("Unable to write to LocalStorage")}};jg.prototype.processRequests=function(b){};jg.prototype.postEvent=function(b,a,c,d){var e=this;if(Ob.EVENTS_URL){var f=L(Ob.EVENTS_URL);f.params.push("access_token\x3d"+(d||Ob.ACCESS_TOKEN||""));b={event:this.type,created:(new Date(b)).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.3.2",skuId:"01",userId:this.anonId};a=a?r(b,a):
b;f={url:J(f),headers:{"Content-Type":"text/plain"},body:JSON.stringify([a])};this.pendingRequest=$e(f,function(b){e.pendingRequest=null;c(b);e.saveEventData();e.processRequests(d)})}};jg.prototype.queueRequest=function(b,a){this.queue.push(b);this.processRequests(a)};var Ee,qh=function(b){function a(){b.call(this,"map.load");this.success={};this.skuToken=""}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.postMapLoadEvent=function(b,a,c,d){this.skuToken=
c;(Ob.EVENTS_URL&&d||Ob.ACCESS_TOKEN&&Array.isArray(b)&&b.some(function(b){return F(b)||$d.test(b)}))&&this.queueRequest({id:a,timestamp:Date.now()},d)},a.prototype.processRequests=function(b){var a=this;if(!this.pendingRequest&&0!==this.queue.length){var c=this.queue.shift(),d=c.id;c=c.timestamp;d&&this.success[d]||(this.anonId||this.fetchEventData(),n(this.anonId)||(this.anonId=m()),this.postEvent(c,{skuToken:this.skuToken},function(b){b||d&&(a.success[d]=!0)},b))}},a}(jg),Ci=new (function(b){function a(a){b.call(this,
"appUserTurnstile");this._customAccessToken=a}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.postTurnstileEvent=function(b,a){Ob.EVENTS_URL&&Ob.ACCESS_TOKEN&&Array.isArray(b)&&b.some(function(b){return F(b)||$d.test(b)})&&this.queueRequest(Date.now(),a)},a.prototype.processRequests=function(b){var a=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var c=
H(Ob.ACCESS_TOKEN),d=c?c.u:Ob.ACCESS_TOKEN;c=d!==this.eventData.tokenU;n(this.anonId)||(this.anonId=m(),c=!0);var e=this.queue.shift();if(this.eventData.lastSuccess){var f=new Date(this.eventData.lastSuccess),g=new Date(e),h=(e-this.eventData.lastSuccess)/864E5;c=c||1<=h||-1>h||f.getDate()!==g.getDate()}else c=!0;if(!c)return this.processRequests();this.postEvent(e,{"enabled.telemetry":!1},function(b){b||(a.eventData.lastSuccess=e,a.eventData.tokenU=d)},b)}},a}(jg)),ej=Ci.postTurnstileEvent.bind(Ci),
Mg=new qh,ki=Mg.postMapLoadEvent.bind(Mg),Rh=500,li=50,Ng=1/0,Di={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Di);var Sh=function(b){function a(a,c,d){401===c&&$d.test(d)&&(a+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");b.call(this,a);this.status=c;this.url=d;this.name=
this.constructor.name;this.message=a}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},a}(Error),mi=N()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href},ug=function(b,a){if(c=b.url,!(/^file:/.test(c)||/^file:/.test(mi())&&!/^\w+:/.test(c))){if(self.fetch&&self.Request&&
self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return O(b,a);if(N()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",b,a)}var c;return function(b,a){var c=new self.XMLHttpRequest,d;for(d in c.open(b.method||"GET",b.url,!0),"arrayBuffer"===b.type&&(c.responseType="arraybuffer"),b.headers)c.setRequestHeader(d,b.headers[d]);return"json"===b.type&&(c.responseType="text",c.setRequestHeader("Accept","application/json")),c.withCredentials="include"===b.credentials,
c.onerror=function(){a(Error(c.statusText))},c.onload=function(){if((200<=c.status&&300>c.status||0===c.status)&&null!==c.response){var d=c.response;if("json"===b.type)try{d=JSON.parse(c.response)}catch(aj){return a(aj)}a(null,d,c.getResponseHeader("Cache-Control"),c.getResponseHeader("Expires"))}else a(new Sh(c.statusText,c.status,b.url))},c.send(b.body),{cancel:function(){return c.abort()}}}(b,a)},sd=function(b,a){return ug(r(b,{type:"arrayBuffer"}),a)},$e=function(b,a){return ug(r(b,{method:"POST"}),
a)};var Rg=[];var vf=0;var vh=function(b,a){if(vf>=Ob.MAX_PARALLEL_IMAGE_REQUESTS)return b={requestParameters:b,callback:a,cancelled:!1,cancel:function(){this.cancelled=!0}},Rg.push(b),b;vf++;var c=!1,d=function(){if(!c)for(c=!0,vf--;Rg.length&&vf<Ob.MAX_PARALLEL_IMAGE_REQUESTS;){var b=Rg.shift(),a=b.requestParameters,d=b.callback;b.cancelled||(b.cancel=vh(a,d).cancel)}},e=sd(b,function(b,c,e,f){if(d(),b)a(b);else if(c){var g=new self.Image,h=self.URL||self.webkitURL;g.onload=function(){a(null,g);
h.revokeObjectURL(g.src)};g.onerror=function(){return a(Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};b=new self.Blob([new Uint8Array(c)],{type:"image/png"});g.cacheControl=e;g.expires=f;g.src=c.byteLength?h.createObjectURL(b):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII\x3d"}});return{cancel:function(){e.cancel();d()}}},og=function(b,a){void 0===
a&&(a={});r(this,a);this.type=b},wf=function(b){function a(a,c){void 0===c&&(c={});b.call(this,"error",r({error:a},c))}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a}(og),ke=function(){};ke.prototype.on=function(b,a){return this._listeners=this._listeners||{},P(b,a,this._listeners),this};ke.prototype.off=function(b,a){return Q(b,a,this._listeners),Q(b,a,this._oneTimeListeners),this};ke.prototype.once=function(b,a){return this._oneTimeListeners=this._oneTimeListeners||
{},P(b,a,this._oneTimeListeners),this};ke.prototype.fire=function(b,a){"string"==typeof b&&(b=new og(b,a||{}));a=b.type;if(this.listens(a)){b.target=this;for(var c=0,d=this._listeners&&this._listeners[a]?this._listeners[a].slice():[];c<d.length;c+=1)d[c].call(this,b);c=0;for(d=this._oneTimeListeners&&this._oneTimeListeners[a]?this._oneTimeListeners[a].slice():[];c<d.length;c+=1){var e=d[c];Q(a,e,this._oneTimeListeners);e.call(this,b)}(a=this._eventedParent)&&(r(b,"function"==typeof this._eventedParentData?
this._eventedParentData():this._eventedParentData),a.fire(b))}else b instanceof wf&&console.error(b.error);return this};ke.prototype.listens=function(b){return this._listeners&&this._listeners[b]&&0<this._listeners[b].length||this._oneTimeListeners&&this._oneTimeListeners[b]&&0<this._oneTimeListeners[b].length||this._eventedParent&&this._eventedParent.listens(b)};ke.prototype.setEventedParent=function(b,a){return this._eventedParent=b,this._eventedParentData=a,this};var ta={$version:8,$root:{version:{required:!0,
type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:"source_vector source_raster source_raster_dem source_geojson source_video source_image".split(" "),
source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",
value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},
minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",
default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},
coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},
layout:"layout_fill layout_line layout_circle layout_heatmap layout_fill-extrusion layout_symbol layout_raster layout_hillshade layout_background".split(" "),layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},
layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",
values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,
requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},
source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,
parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},
height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"string",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},
"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line",
"line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom",
"feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},
default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",
default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",
default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},
"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],
expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,
parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"},{"!":"text-variable-anchor"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},
"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},
none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"\x3d\x3d":{},"!\x3d":{},"\x3e":{},"\x3e\x3d":{},"\x3c":{},"\x3c\x3d":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",
values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",
value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},
string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},
id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},
round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"\x3d\x3d":{group:"Decision"},"!\x3d":{group:"Decision"},"\x3e":{group:"Decision"},"\x3c":{group:"Decision"},"\x3e\x3d":{group:"Decision"},"\x3c\x3d":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",
values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,
maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:"paint_fill paint_line paint_circle paint_heatmap paint_fill-extrusion paint_symbol paint_raster paint_hillshade paint_background".split(" "),paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},
"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,
0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",
default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},
"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature",
"feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,
transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",
values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,
parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,
units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,
transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",
values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",
default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,
parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],
expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image",
"icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],
expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},
paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},
"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",
values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},
"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",
default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"string",
transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},
"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},La=function(b,a,c,d){this.message=(b?b+": ":"")+c;d&&(this.identifier=d);null!=a&&a.__line__&&(this.line=a.__line__)},Vd=function(b){function a(a,c){b.call(this,c);this.message=c;this.key=a}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a}(Error),Rf=function(b,a){void 0===a&&(a=[]);this.parent=b;this.bindings={};for(b=0;b<a.length;b+=1){var c=
a[b];this.bindings[c[0]]=c[1]}};Rf.prototype.concat=function(b){return new Rf(this,b)};Rf.prototype.get=function(b){if(this.bindings[b])return this.bindings[b];if(this.parent)return this.parent.get(b);throw Error(b+" not found in scope.");};Rf.prototype.has=function(b){return!!this.bindings[b]||!!this.parent&&this.parent.has(b)};var oi={kind:"null"},Ha={kind:"number"},mb={kind:"string"},lb={kind:"boolean"},hd={kind:"color"},kg={kind:"object"},Bb={kind:"value"},le={kind:"collator"},xf={kind:"formatted"},
Vf=[oi,Ha,mb,lb,hd,xf,kg,R(Bb)],Wd=a(function(b,a){function c(b){return 0>(b=Math.round(b))?0:255<b?255:b}function d(b){return 0>b?0:1<b?1:b}function e(b){return"%"===b[b.length-1]?c(parseFloat(b)/100*255):c(parseInt(b))}function f(b){return"%"===b[b.length-1]?d(parseFloat(b)/100):d(parseFloat(b))}function g(b,a,c){return 0>c?c+=1:1<c&&--c,1>6*c?b+(a-b)*c*6:1>2*c?a:2>3*c?b+(a-b)*(2/3-c)*6:b}var h={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,
255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,
1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,
144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,
252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,
50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,
230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,
69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,
245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{a.parseCSSColor=function(b){var a;b=b.replace(/ /g,"").toLowerCase();if(b in h)return h[b].slice();if("#"===b[0])return 4===b.length?0<=(a=parseInt(b.substr(1),16))&&4095>=a?[(3840&a)>>4|(3840&a)>>8,240&a|(240&a)>>4,15&a|(15&a)<<4,1]:null:7===b.length&&0<=(a=parseInt(b.substr(1),16))&&16777215>=a?[(16711680&a)>>16,(65280&a)>>8,255&a,1]:null;var d=b.indexOf("("),k=b.indexOf(")");if(-1!==d&&k+1===b.length)switch(a=b.substr(0,d),d=b.substr(d+
1,k-(d+1)).split(","),b=1,a){case "rgba":if(4!==d.length)break;b=f(d.pop());case "rgb":return 3!==d.length?null:[e(d[0]),e(d[1]),e(d[2]),b];case "hsla":if(4!==d.length)break;b=f(d.pop());case "hsl":if(3===d.length)return a=(parseFloat(d[0])%360+360)%360/360,k=f(d[1]),d=f(d[2]),k=.5>=d?d*(k+1):d+k-d*k,d=2*d-k,[c(255*g(d,k,a+1/3)),c(255*g(d,k,a)),c(255*g(d,k,a-1/3)),b]}return null}}catch(aj){}}).parseCSSColor,sb=function(b,a,c,d){void 0===d&&(d=1);this.r=b;this.g=a;this.b=c;this.a=d};sb.parse=function(b){if(b){if(b instanceof
sb)return b;if("string"==typeof b&&(b=Wd(b)))return new sb(b[0]/255*b[3],b[1]/255*b[3],b[2]/255*b[3],b[3])}};sb.prototype.toString=function(){var b=this.toArray();return"rgba("+Math.round(b[0])+","+Math.round(b[1])+","+Math.round(b[2])+","+b[3]+")"};sb.prototype.toArray=function(){var b=this.r,a=this.g,c=this.b,d=this.a;return 0===d?[0,0,0,0]:[255*b/d,255*a/d,255*c/d,d]};sb.black=new sb(0,0,0,1);sb.white=new sb(1,1,1,1);sb.transparent=new sb(0,0,0,0);sb.red=new sb(1,0,0,1);var Sf=function(b,a,c){this.sensitivity=
b?a?"variant":"case":a?"accent":"base";this.locale=c;this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Sf.prototype.compare=function(b,a){return this.collator.compare(b,a)};Sf.prototype.resolvedLocale=function(){return(new Intl.Collator(this.locale?this.locale:[])).resolvedOptions().locale};var Pi=function(b,a,c,d){this.text=b;this.scale=a;this.fontStack=c;this.textColor=d},Gd=function(b){this.sections=b};Gd.fromString=function(b){return new Gd([new Pi(b,
null,null,null)])};Gd.prototype.toString=function(){return this.sections.map(function(b){return b.text}).join("")};Gd.prototype.serialize=function(){for(var b=["format"],a=0,c=this.sections;a<c.length;a+=1){var d=c[a];b.push(d.text);var e={};d.fontStack&&(e["text-font"]=["literal",d.fontStack.split(",")]);d.scale&&(e["font-scale"]=d.scale);d.textColor&&(e["text-color"]=["rgba"].concat(d.textColor.toArray()));b.push(e)}return b};var Fe=function(b,a){this.type=b;this.value=a};Fe.parse=function(b,a){if(2!==
b.length)return a.error("'literal' expression requires exactly one argument, but found "+(b.length-1)+" instead.");if(!function df(b){if(null===b||"string"==typeof b||"boolean"==typeof b||"number"==typeof b||b instanceof sb||b instanceof Sf||b instanceof Gd)return!0;if(Array.isArray(b)){for(var a=0;a<b.length;a+=1)if(!df(b[a]))return!1;return!0}if("object"==typeof b){for(a in b)if(!df(b[a]))return!1;return!0}return!1}(b[1]))return a.error("invalid value");b=b[1];var c=fa(b);a=a.expectedType;return"array"!==
c.kind||0!==c.N||!a||"array"!==a.kind||"number"==typeof a.N&&0!==a.N||(c=a),new Fe(c,b)};Fe.prototype.evaluate=function(){return this.value};Fe.prototype.eachChild=function(){};Fe.prototype.possibleOutputs=function(){return[this.value]};Fe.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof sb?["rgba"].concat(this.value.toArray()):this.value instanceof Gd?this.value.serialize():this.value};var rd=function(b){this.name=
"ExpressionEvaluationError";this.message=b};rd.prototype.toJSON=function(){return this.message};var vg={string:mb,number:Ha,boolean:lb,object:kg},tc=function(b,a){this.type=b;this.args=a};tc.parse=function(b,a){if(2>b.length)return a.error("Expected at least one argument.");var c=1,d=b[0];if("array"===d){if(2<b.length){d=b[1];if("string"!=typeof d||!(d in vg)||"object"===d)return a.error('The item type argument of "array" must be one of string, number, boolean',1);d=vg[d];c++}else d=Bb;if(3<b.length){if(null!==
b[2]&&("number"!=typeof b[2]||0>b[2]||b[2]!==Math.floor(b[2])))return a.error('The length argument to "array" must be a positive integer literal',2);var e=b[2];c++}e=R(d,e)}else e=vg[d];for(d=[];c<b.length;c++){var f=a.parse(b[c],c,Bb);if(!f)return null;d.push(f)}return new tc(e,d)};tc.prototype.evaluate=function(b){for(var a=0;a<this.args.length;a++){var c=this.args[a].evaluate(b);if(!X(this.type,fa(c)))return c;if(a===this.args.length-1)throw new rd("Expected value to be of type "+U(this.type)+
", but found "+U(fa(c))+" instead.");}return null};tc.prototype.eachChild=function(b){this.args.forEach(b)};tc.prototype.possibleOutputs=function(){var b;return(b=[]).concat.apply(b,this.args.map(function(b){return b.possibleOutputs()}))};tc.prototype.serialize=function(){var b=this.type,a=[b.kind];if("array"===b.kind){var c=b.itemType;if("string"===c.kind||"number"===c.kind||"boolean"===c.kind)a.push(c.kind),b=b.N,("number"==typeof b||1<this.args.length)&&a.push(b)}return a.concat(this.args.map(function(b){return b.serialize()}))};
var Je=function(b){this.type=xf;this.sections=b};Je.parse=function(b,a){if(3>b.length)return a.error("Expected at least two arguments.");if(0!=(b.length-1)%2)return a.error("Expected an even number of arguments.");for(var c=[],d=1;d<b.length-1;d+=2){var e=a.parse(b[d],1,Bb);if(!e)return null;var f=e.type.kind;if("string"!==f&&"value"!==f&&"null"!==f)return a.error("Formatted text type must be 'string', 'value', or 'null'.");f=b[d+1];if("object"!=typeof f||Array.isArray(f))return a.error("Format options argument must be an object.");
var g=null;if(f["font-scale"]&&!(g=a.parse(f["font-scale"],1,Ha)))return null;var h=null;if(f["text-font"]&&!(h=a.parse(f["text-font"],1,R(mb))))return null;var k=null;if(f["text-color"]&&!(k=a.parse(f["text-color"],1,hd)))return null;c.push({text:e,scale:g,font:h,textColor:k})}return new Je(c)};Je.prototype.evaluate=function(b){return new Gd(this.sections.map(function(a){return new Pi(la(a.text.evaluate(b)),a.scale?a.scale.evaluate(b):null,a.font?a.font.evaluate(b).join(","):null,a.textColor?a.textColor.evaluate(b):
null)}))};Je.prototype.eachChild=function(b){for(var a=0,c=this.sections;a<c.length;a+=1){var d=c[a];b(d.text);d.scale&&b(d.scale);d.font&&b(d.font);d.textColor&&b(d.textColor)}};Je.prototype.possibleOutputs=function(){return[void 0]};Je.prototype.serialize=function(){for(var b=["format"],a=0,c=this.sections;a<c.length;a+=1){var d=c[a];b.push(d.text.serialize());var e={};d.scale&&(e["font-scale"]=d.scale.serialize());d.font&&(e["text-font"]=d.font.serialize());d.textColor&&(e["text-color"]=d.textColor.serialize());
b.push(e)}return b};var Yh={"to-boolean":lb,"to-color":hd,"to-number":Ha,"to-string":mb},Ge=function(b,a){this.type=b;this.args=a};Ge.parse=function(b,a){if(2>b.length)return a.error("Expected at least one argument.");var c=b[0];if(("to-boolean"===c||"to-string"===c)&&2!==b.length)return a.error("Expected one argument.");c=Yh[c];for(var d=[],e=1;e<b.length;e++){var f=a.parse(b[e],e,Bb);if(!f)return null;d.push(f)}return new Ge(c,d)};Ge.prototype.evaluate=function(b){if("boolean"===this.type.kind)return!!this.args[0].evaluate(b);
if("color"===this.type.kind){for(var a,c,d=0,e=this.args;d<e.length;d+=1){if(c=null,(a=e[d].evaluate(b))instanceof sb)return a;if("string"==typeof a){var f=b.parseColor(a);if(f)return f}else if(Array.isArray(a)&&!(c=3>a.length||4<a.length?"Invalid rbga value "+JSON.stringify(a)+": expected an array containing either three or four numeric values.":ea(a[0],a[1],a[2],a[3])))return new sb(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new rd(c||"Could not parse color from value '"+("string"==typeof a?a:String(JSON.stringify(a)))+
"'");}if("number"===this.type.kind){a=null;c=0;for(d=this.args;c<d.length;c+=1){if(null===(a=d[c].evaluate(b)))return 0;e=Number(a);if(!isNaN(e))return e}throw new rd("Could not convert "+JSON.stringify(a)+" to number.");}return"formatted"===this.type.kind?Gd.fromString(la(this.args[0].evaluate(b))):la(this.args[0].evaluate(b))};Ge.prototype.eachChild=function(b){this.args.forEach(b)};Ge.prototype.possibleOutputs=function(){var b;return(b=[]).concat.apply(b,this.args.map(function(b){return b.possibleOutputs()}))};
Ge.prototype.serialize=function(){if("formatted"===this.type.kind)return(new Je([{text:this.args[0],scale:null,font:null,textColor:null}])).serialize();var b=["to-"+this.type.kind];return this.eachChild(function(a){b.push(a.serialize())}),b};var fj=["Unknown","Point","LineString","Polygon"],wh=function(){this.formattedSection=this.featureState=this.feature=this.globals=null;this._parseColorCache={}};wh.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null};wh.prototype.geometryType=
function(){return this.feature?"number"==typeof this.feature.type?fj[this.feature.type]:this.feature.type:null};wh.prototype.properties=function(){return this.feature&&this.feature.properties||{}};wh.prototype.parseColor=function(b){var a=this._parseColorCache[b];return a||(a=this._parseColorCache[b]=sb.parse(b)),a};var Vc=function(b,a,c,d){this.name=b;this.type=a;this._evaluate=c;this.args=d};Vc.prototype.evaluate=function(b){return this._evaluate(b,this.args)};Vc.prototype.eachChild=function(b){this.args.forEach(b)};
Vc.prototype.possibleOutputs=function(){return[void 0]};Vc.prototype.serialize=function(){return[this.name].concat(this.args.map(function(b){return b.serialize()}))};Vc.parse=function(b,a){var c,d=b[0],e=Vc.definitions[d];if(!e)return a.error('Unknown expression "'+d+'". If you wanted a literal array, use ["literal", [...]].',0);var f=Array.isArray(e)?e[0]:e.type;e=Array.isArray(e)?[[e[1],e[2]]]:e.overloads;for(var g=e.filter(function(a){a=a[0];return!Array.isArray(a)||a.length===b.length-1}),h=null,
k=0;k<g.length;k+=1){h=g[k];var l=h[0],r=h[1];h=new Tf(a.registry,a.path,null,a.scope);for(var t=[],m=!1,u=1;u<b.length;u++){var n=b[u],v=Array.isArray(l)?l[u-1]:l.type;n=h.parse(n,1+t.length,v);if(!n){m=!0;break}t.push(n)}if(!m)if(Array.isArray(l)&&l.length!==t.length)h.error("Expected "+l.length+" arguments, but found "+t.length+" instead.");else{for(m=0;m<t.length;m++)u=Array.isArray(l)?l[m]:l.type,n=t[m],h.concat(m+1).checkSubtype(u,n.type);if(0===h.errors.length)return new Vc(d,f,r,t)}}if(1===
g.length)(c=a.errors).push.apply(c,h.errors);else{c=(g.length?g:e).map(function(b){var a;return a=b[0],Array.isArray(a)?"("+a.map(U).join(", ")+")":"("+U(a.type)+"...)"}).join(" | ");d=[];for(f=1;f<b.length;f++){e=a.parse(b[f],1+d.length);if(!e)return null;d.push(U(e.type))}a.error("Expected arguments of type "+c+", but found ("+d.join(", ")+") instead.")}return null};Vc.register=function(b,a){for(var c in Vc.definitions=a,a)b[c]=Vc};var He=function(b,a,c){this.type=le;this.locale=c;this.caseSensitive=
b;this.diacriticSensitive=a};He.parse=function(b,a){if(2!==b.length)return a.error("Expected one argument.");b=b[1];if("object"!=typeof b||Array.isArray(b))return a.error("Collator options argument must be an object.");var c=a.parse(void 0!==b["case-sensitive"]&&b["case-sensitive"],1,lb);if(!c)return null;var d=a.parse(void 0!==b["diacritic-sensitive"]&&b["diacritic-sensitive"],1,lb);if(!d)return null;var e=null;return b.locale&&!(e=a.parse(b.locale,1,mb))?null:new He(c,d,e)};He.prototype.evaluate=
function(b){return new Sf(this.caseSensitive.evaluate(b),this.diacriticSensitive.evaluate(b),this.locale?this.locale.evaluate(b):null)};He.prototype.eachChild=function(b){b(this.caseSensitive);b(this.diacriticSensitive);this.locale&&b(this.locale)};He.prototype.possibleOutputs=function(){return[void 0]};He.prototype.serialize=function(){var b={};return b["case-sensitive"]=this.caseSensitive.serialize(),b["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(b.locale=this.locale.serialize()),
["collator",b]};var lg=function(b,a){this.type=a.type;this.name=b;this.boundExpression=a};lg.parse=function(b,a){if(2!==b.length||"string"!=typeof b[1])return a.error("'var' expression requires exactly one string literal argument.");b=b[1];return a.scope.has(b)?new lg(b,a.scope.get(b)):a.error('Unknown variable "'+b+'". Make sure "'+b+'" has been bound in an enclosing "let" expression before using it.',1)};lg.prototype.evaluate=function(b){return this.boundExpression.evaluate(b)};lg.prototype.eachChild=
function(){};lg.prototype.possibleOutputs=function(){return[void 0]};lg.prototype.serialize=function(){return["var",this.name]};var Tf=function(b,a,c,d,e){void 0===a&&(a=[]);void 0===d&&(d=new Rf);void 0===e&&(e=[]);this.registry=b;this.path=a;this.key=a.map(function(b){return"["+b+"]"}).join("");this.scope=d;this.errors=e;this.expectedType=c};Tf.prototype.parse=function(b,a,c,d,e){return void 0===e&&(e={}),a?this.concat(a,c,d)._parse(b,e):this._parse(b,e)};Tf.prototype._parse=function(b,a){function c(b,
a,c){return"assert"===c?new tc(a,[b]):"coerce"===c?new Ge(a,[b]):b}if(null!==b&&"string"!=typeof b&&"boolean"!=typeof b&&"number"!=typeof b||(b=["literal",b]),Array.isArray(b)){if(0===b.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var d=b[0];if("string"!=typeof d)return this.error("Expression name must be a string, but found "+typeof d+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var e=this.registry[d];
if(e){b=e.parse(b,this);if(!b)return null;if(this.expectedType)if(d=this.expectedType,e=b.type,"string"!==d.kind&&"number"!==d.kind&&"boolean"!==d.kind&&"object"!==d.kind&&"array"!==d.kind||"value"!==e.kind)if("color"!==d.kind&&"formatted"!==d.kind||"value"!==e.kind&&"string"!==e.kind){if(this.checkSubtype(d,e))return null}else b=c(b,d,a.typeAnnotation||"coerce");else b=c(b,d,a.typeAnnotation||"assert");if(!(b instanceof Fe)&&function Sg(b){if(b instanceof lg)return Sg(b.boundExpression);if(b instanceof
Vc&&"error"===b.name||b instanceof He)return!1;var a=b instanceof Ge||b instanceof tc,c=!0;b.eachChild(function(b){c=a?c&&Sg(b):c&&b instanceof Fe});return c?da(b)&&aa(b,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}(b)){a=new wh;try{b=new Fe(b.type,b.evaluate(a))}catch($i){return this.error($i.message),null}}return b}return this.error('Unknown expression "'+d+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===b?this.error("'undefined' value invalid. Use null instead."):
"object"==typeof b?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof b+" instead.")};Tf.prototype.concat=function(b,a,c){b="number"==typeof b?this.path.concat(b):this.path;c=c?this.scope.concat(c):this.scope;return new Tf(this.registry,b,a||null,c,this.errors)};Tf.prototype.error=function(b){for(var a=[],c=arguments.length-1;0<c--;)a[c]=arguments[c+1];a=""+this.key+a.map(function(b){return"["+b+"]"}).join("");this.errors.push(new Vd(a,
b))};Tf.prototype.checkSubtype=function(b,a){b=X(b,a);return b&&this.error(b),b};var Ke=function(b,a,c){this.type=b;this.input=a;this.labels=[];this.outputs=[];for(b=0;b<c.length;b+=1){a=c[b];var d=a[1];this.labels.push(a[0]);this.outputs.push(d)}};Ke.parse=function(b,a){if(4>b.length-1)return a.error("Expected at least 4 arguments, but found only "+(b.length-1)+".");if(0!=(b.length-1)%2)return a.error("Expected an even number of arguments.");var c=a.parse(b[1],1,Ha);if(!c)return null;var d=[],e=
null;a.expectedType&&"value"!==a.expectedType.kind&&(e=a.expectedType);for(var f=1;f<b.length;f+=2){var g=1===f?-1/0:b[f],h=b[f+1],k=f,l=f+1;if("number"!=typeof g)return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(d.length&&d[d.length-1][0]>=g)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);h=a.parse(h,l,e);if(!h)return null;
e=e||h.type;d.push([g,h])}return new Ke(e,c,d)};Ke.prototype.evaluate=function(b){var a=this.labels,c=this.outputs;if(1===a.length)return c[0].evaluate(b);var d=this.input.evaluate(b);if(d<=a[0])return c[0].evaluate(b);var e=a.length;return d>=a[e-1]?c[e-1].evaluate(b):c[na(a,d)].evaluate(b)};Ke.prototype.eachChild=function(b){b(this.input);for(var a=0,c=this.outputs;a<c.length;a+=1)b(c[a])};Ke.prototype.possibleOutputs=function(){var b;return(b=[]).concat.apply(b,this.outputs.map(function(b){return b.possibleOutputs()}))};
Ke.prototype.serialize=function(){for(var b=["step",this.input.serialize()],a=0;a<this.labels.length;a++)0<a&&b.push(this.labels[a]),b.push(this.outputs[a].serialize());return b};var Td=Object.freeze({number:ha,color:function(b,a,c){return new sb(ha(b.r,a.r,c),ha(b.g,a.g,c),ha(b.b,a.b,c),ha(b.a,a.a,c))},array:function(b,a,c){return b.map(function(b,d){return ha(b,a[d],c)})}}),pi=4/29,Ec=6/29,Qi=3*Ec*Ec,Zh=Ec*Ec*Ec,pg=Math.PI/180,Uf=180/Math.PI,rg={forward:xa,reverse:ya,interpolate:function(b,a,c){return{l:ha(b.l,
a.l,c),a:ha(b.a,a.a,c),b:ha(b.b,a.b,c),alpha:ha(b.alpha,a.alpha,c)}}},Ld={forward:function(b){var a=xa(b),c=a.a,d=a.b,e=Math.atan2(d,c)*Uf;return{h:0>e?e+360:e,c:Math.sqrt(c*c+d*d),l:a.l,alpha:b.a}},reverse:function(b){var a=b.h*pg,c=b.c;return ya({l:b.l,a:Math.cos(a)*c,b:Math.sin(a)*c,alpha:b.alpha})},interpolate:function(b,a,c){var d=b.h,e=a.h-d;return{h:d+c*(180<e||-180>e?e-360*Math.round(e/360):e),c:ha(b.c,a.c,c),l:ha(b.l,a.l,c),alpha:ha(b.alpha,a.alpha,c)}}},me=Object.freeze({lab:rg,hcl:Ld}),
Sb=function(b,a,c,d,e){this.type=b;this.operator=a;this.interpolation=c;this.input=d;this.labels=[];this.outputs=[];for(b=0;b<e.length;b+=1)a=e[b],c=a[1],this.labels.push(a[0]),this.outputs.push(c)};Sb.interpolationFactor=function(b,a,c,d){var e=0;"exponential"===b.name?e=sa(a,b.base,c,d):"linear"===b.name?e=sa(a,1,c,d):"cubic-bezier"===b.name&&(b=b.controlPoints,e=(new fi(b[0],b[1],b[2],b[3])).solve(sa(a,1,c,d)));return e};Sb.parse=function(b,a){var c=b[0],d=b[1],e=b[2],f=b.slice(3);if(!Array.isArray(d)||
0===d.length)return a.error("Expected an interpolation type expression.",1);if("linear"===d[0])d={name:"linear"};else if("exponential"===d[0]){d=d[1];if("number"!=typeof d)return a.error("Exponential interpolation requires a numeric base.",1,1);d={name:"exponential",base:d}}else{if("cubic-bezier"!==d[0])return a.error("Unknown interpolation type "+String(d[0]),1,0);d=d.slice(1);if(4!==d.length||d.some(function(b){return"number"!=typeof b||0>b||1<b}))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",
1);d={name:"cubic-bezier",controlPoints:d}}if(4>b.length-1)return a.error("Expected at least 4 arguments, but found only "+(b.length-1)+".");if(0!=(b.length-1)%2)return a.error("Expected an even number of arguments.");if(!(e=a.parse(e,2,Ha)))return null;b=[];var g=null;"interpolate-hcl"===c||"interpolate-lab"===c?g=hd:a.expectedType&&"value"!==a.expectedType.kind&&(g=a.expectedType);for(var h=0;h<f.length;h+=2){var k=f[h],l=f[h+1],r=h+3,t=h+4;if("number"!=typeof k)return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',
r);if(b.length&&b[b.length-1][0]>=k)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);l=a.parse(l,t,g);if(!l)return null;g=g||l.type;b.push([k,l])}return"number"===g.kind||"color"===g.kind||"array"===g.kind&&"number"===g.itemType.kind&&"number"==typeof g.N?new Sb(g,c,d,e,b):a.error("Type "+U(g)+" is not interpolatable.")};Sb.prototype.evaluate=function(b){var a=this.labels,c=this.outputs;if(1===a.length)return c[0].evaluate(b);
var d=this.input.evaluate(b);if(d<=a[0])return c[0].evaluate(b);var e=a.length;if(d>=a[e-1])return c[e-1].evaluate(b);e=na(a,d);a=Sb.interpolationFactor(this.interpolation,d,a[e],a[e+1]);d=c[e].evaluate(b);b=c[e+1].evaluate(b);return"interpolate"===this.operator?Td[this.type.kind.toLowerCase()](d,b,a):"interpolate-hcl"===this.operator?Ld.reverse(Ld.interpolate(Ld.forward(d),Ld.forward(b),a)):rg.reverse(rg.interpolate(rg.forward(d),rg.forward(b),a))};Sb.prototype.eachChild=function(b){b(this.input);
for(var a=0,c=this.outputs;a<c.length;a+=1)b(c[a])};Sb.prototype.possibleOutputs=function(){var b;return(b=[]).concat.apply(b,this.outputs.map(function(b){return b.possibleOutputs()}))};Sb.prototype.serialize=function(){var b="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);b=[this.operator,b,this.input.serialize()];for(var a=
0;a<this.labels.length;a++)b.push(this.labels[a],this.outputs[a].serialize());return b};var zf=function(b,a){this.type=b;this.args=a};zf.parse=function(b,a){if(2>b.length)return a.error("Expectected at least one argument.");var c=null,d=a.expectedType;d&&"value"!==d.kind&&(c=d);var e=[],f=0;for(b=b.slice(1);f<b.length;f+=1){var g=a.parse(b[f],1+e.length,c,void 0,{typeAnnotation:"omit"});if(!g)return null;c=c||g.type;e.push(g)}a=d&&e.some(function(b){return X(d,b.type)});return new zf(a?Bb:c,e)};zf.prototype.evaluate=
function(b){for(var a=null,c=0,d=this.args;c<d.length&&null===(a=d[c].evaluate(b));c+=1);return a};zf.prototype.eachChild=function(b){this.args.forEach(b)};zf.prototype.possibleOutputs=function(){var b;return(b=[]).concat.apply(b,this.args.map(function(b){return b.possibleOutputs()}))};zf.prototype.serialize=function(){var b=["coalesce"];return this.eachChild(function(a){b.push(a.serialize())}),b};var yc=function(b,a){this.type=a.type;this.bindings=[].concat(b);this.result=a};yc.prototype.evaluate=
function(b){return this.result.evaluate(b)};yc.prototype.eachChild=function(b){for(var a=0,c=this.bindings;a<c.length;a+=1)b(c[a][1]);b(this.result)};yc.parse=function(b,a){if(4>b.length)return a.error("Expected at least 3 arguments, but found "+(b.length-1)+" instead.");for(var c=[],d=1;d<b.length-1;d+=2){var e=b[d];if("string"!=typeof e)return a.error("Expected string, but found "+typeof e+" instead.",d);if(/[^a-zA-Z0-9_]/.test(e))return a.error("Variable names must contain only alphanumeric characters or '_'.",
d);var f=a.parse(b[d+1],d+1);if(!f)return null;c.push([e,f])}return(b=a.parse(b[b.length-1],b.length-1,a.expectedType,c))?new yc(c,b):null};yc.prototype.possibleOutputs=function(){return this.result.possibleOutputs()};yc.prototype.serialize=function(){for(var b=["let"],a=0,c=this.bindings;a<c.length;a+=1){var d=c[a];b.push(d[0],d[1].serialize())}return b.push(this.result.serialize()),b};var kf=function(b,a,c){this.type=b;this.index=a;this.input=c};kf.parse=function(b,a){if(3!==b.length)return a.error("Expected 2 arguments, but found "+
(b.length-1)+" instead.");var c=a.parse(b[1],1,Ha);b=a.parse(b[2],2,R(a.expectedType||Bb));return c&&b?new kf(b.type.itemType,c,b):null};kf.prototype.evaluate=function(b){var a=this.index.evaluate(b);b=this.input.evaluate(b);if(0>a)throw new rd("Array index out of bounds: "+a+" \x3c 0.");if(a>=b.length)throw new rd("Array index out of bounds: "+a+" \x3e "+(b.length-1)+".");if(a!==Math.floor(a))throw new rd("Array index must be an integer, but found "+a+" instead.");return b[a]};kf.prototype.eachChild=
function(b){b(this.index);b(this.input)};kf.prototype.possibleOutputs=function(){return[void 0]};kf.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Le=function(b,a,c,d,e,f){this.inputType=b;this.type=a;this.input=c;this.cases=d;this.outputs=e;this.otherwise=f};Le.parse=function(b,a){if(5>b.length)return a.error("Expected at least 4 arguments, but found only "+(b.length-1)+".");if(1!=b.length%2)return a.error("Expected an even number of arguments.");var c;
a.expectedType&&"value"!==a.expectedType.kind&&(c=a.expectedType);for(var d={},e=[],f=2;f<b.length-1;f+=2){var g=b[f],h=b[f+1];Array.isArray(g)||(g=[g]);var k=a.concat(f);if(0===g.length)return k.error("Expected at least one branch label.");for(var l=0;l<g.length;l+=1){var r=g[l];if("number"!=typeof r&&"string"!=typeof r)return k.error("Branch labels must be numbers or strings.");if("number"==typeof r&&Math.abs(r)>Number.MAX_SAFE_INTEGER)return k.error("Branch labels must be integers no larger than "+
Number.MAX_SAFE_INTEGER+".");if("number"==typeof r&&Math.floor(r)!==r)return k.error("Numeric branch labels must be integer values.");if(t){if(k.checkSubtype(t,fa(r)))return null}else var t=fa(r);if(void 0!==d[String(r)])return k.error("Branch labels must be unique.");d[String(r)]=e.length}h=a.parse(h,f,c);if(!h)return null;c=c||h.type;e.push(h)}f=a.parse(b[1],1,Bb);return f?(b=a.parse(b[b.length-1],b.length-1,c))?"value"!==f.type.kind&&a.concat(1).checkSubtype(t,f.type)?null:new Le(t,c,f,d,e,b):
null:null};Le.prototype.evaluate=function(b){var a=this.input.evaluate(b);return(fa(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(b)};Le.prototype.eachChild=function(b){b(this.input);this.outputs.forEach(b);b(this.otherwise)};Le.prototype.possibleOutputs=function(){var b;return(b=[]).concat.apply(b,this.outputs.map(function(b){return b.possibleOutputs()})).concat(this.otherwise.possibleOutputs())};Le.prototype.serialize=function(){for(var b=this,a=["match",this.input.serialize()],
c=[],d={},e=0,f=Object.keys(this.cases).sort();e<f.length;e+=1){var g=f[e];void 0===(h=d[this.cases[g]])?(d[this.cases[g]]=c.length,c.push([this.cases[g],[g]])):c[h][1].push(g)}d=function(a){return"number"===b.inputType.kind?Number(a):a};for(e=0;e<c.length;e+=1){f=c[e];var h=f[0];h=f[1];1===h.length?a.push(d(h[0])):a.push(h.map(d));a.push(this.outputs[outputIndex$1].serialize())}return a.push(this.otherwise.serialize()),a};var Jd=function(b,a,c){this.type=b;this.branches=a;this.otherwise=c};Jd.parse=
function(b,a){if(4>b.length)return a.error("Expected at least 3 arguments, but found only "+(b.length-1)+".");if(0!=b.length%2)return a.error("Expected an odd number of arguments.");var c;a.expectedType&&"value"!==a.expectedType.kind&&(c=a.expectedType);for(var d=[],e=1;e<b.length-1;e+=2){var f=a.parse(b[e],e,lb);if(!f)return null;var g=a.parse(b[e+1],e+1,c);if(!g)return null;d.push([f,g]);c=c||g.type}return(b=a.parse(b[b.length-1],b.length-1,c))?new Jd(c,d,b):null};Jd.prototype.evaluate=function(b){for(var a=
0,c=this.branches;a<c.length;a+=1){var d=c[a],e=d[1];if(d[0].evaluate(b))return e.evaluate(b)}return this.otherwise.evaluate(b)};Jd.prototype.eachChild=function(b){for(var a=0,c=this.branches;a<c.length;a+=1){var d=c[a],e=d[1];b(d[0]);b(e)}b(this.otherwise)};Jd.prototype.possibleOutputs=function(){var b;return(b=[]).concat.apply(b,this.branches.map(function(b){b[0];return b[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs())};Jd.prototype.serialize=function(){var b=["case"];return this.eachChild(function(a){b.push(a.serialize())}),
b};var Ti=Da("\x3d\x3d",function(b,a,c){return a===c},za),qi=Da("!\x3d",function(b,a,c){return a!==c},function(b,a,c,d){return!za(0,a,c,d)}),Ui=Da("\x3c",function(b,a,c){return a<c},function(b,a,c,d){return 0>d.compare(a,c)}),Gi=Da("\x3e",function(b,a,c){return a>c},function(b,a,c,d){return 0<d.compare(a,c)}),Zi=Da("\x3c\x3d",function(b,a,c){return a<=c},function(b,a,c,d){return 0>=d.compare(a,c)}),Tg=Da("\x3e\x3d",function(b,a,c){return a>=c},function(b,a,c,d){return 0<=d.compare(a,c)}),Me=function(b,
a,c,d,e){this.type=mb;this.number=b;this.locale=a;this.currency=c;this.minFractionDigits=d;this.maxFractionDigits=e};Me.parse=function(b,a){if(3!==b.length)return a.error("Expected two arguments.");var c=a.parse(b[1],1,Ha);if(!c)return null;b=b[2];if("object"!=typeof b||Array.isArray(b))return a.error("NumberFormat options argument must be an object.");var d=null;if(b.locale&&!(d=a.parse(b.locale,1,mb)))return null;var e=null;if(b.currency&&!(e=a.parse(b.currency,1,mb)))return null;var f=null;if(b["min-fraction-digits"]&&
!(f=a.parse(b["min-fraction-digits"],1,Ha)))return null;var g=null;return b["max-fraction-digits"]&&!(g=a.parse(b["max-fraction-digits"],1,Ha))?null:new Me(c,d,e,f,g)};Me.prototype.evaluate=function(b){return(new Intl.NumberFormat(this.locale?this.locale.evaluate(b):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(b):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(b):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(b):
void 0})).format(this.number.evaluate(b))};Me.prototype.eachChild=function(b){b(this.number);this.locale&&b(this.locale);this.currency&&b(this.currency);this.minFractionDigits&&b(this.minFractionDigits);this.maxFractionDigits&&b(this.maxFractionDigits)};Me.prototype.possibleOutputs=function(){return[void 0]};Me.prototype.serialize=function(){var b={};return this.locale&&(b.locale=this.locale.serialize()),this.currency&&(b.currency=this.currency.serialize()),this.minFractionDigits&&(b["min-fraction-digits"]=
this.minFractionDigits.serialize()),this.maxFractionDigits&&(b["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),b]};var Wf=function(b){this.type=Ha;this.input=b};Wf.parse=function(b,a){return 2!==b.length?a.error("Expected 1 argument, but found "+(b.length-1)+" instead."):(b=a.parse(b[1],1))?"array"!==b.type.kind&&"string"!==b.type.kind&&"value"!==b.type.kind?a.error("Expected argument of type string or array, but found "+U(b.type)+" instead."):new Wf(b):
null};Wf.prototype.evaluate=function(b){b=this.input.evaluate(b);if("string"==typeof b||Array.isArray(b))return b.length;throw new rd("Expected value to be of type string or array, but found "+U(fa(b))+" instead.");};Wf.prototype.eachChild=function(b){b(this.input)};Wf.prototype.possibleOutputs=function(){return[void 0]};Wf.prototype.serialize=function(){var b=["length"];return this.eachChild(function(a){b.push(a.serialize())}),b};var yf={"\x3d\x3d":Ti,"!\x3d":qi,"\x3e":Gi,"\x3c":Ui,"\x3e\x3d":Tg,
"\x3c\x3d":Zi,array:tc,at:kf,boolean:tc,case:Jd,coalesce:zf,collator:He,format:Je,interpolate:Sb,"interpolate-hcl":Sb,"interpolate-lab":Sb,length:Wf,let:yc,literal:Fe,match:Le,number:tc,"number-format":Me,object:tc,step:Ke,string:tc,"to-boolean":Ge,"to-color":Ge,"to-number":Ge,"to-string":Ge,var:lg};Vc.register(yf,{error:[{kind:"error"},[mb],function(b,a){throw new rd(a[0].evaluate(b));}],typeof:[mb,[Bb],function(b,a){return U(fa(a[0].evaluate(b)))}],"to-rgba":[R(Ha,4),[hd],function(b,a){return a[0].evaluate(b).toArray()}],
rgb:[hd,[Ha,Ha,Ha],ra],rgba:[hd,[Ha,Ha,Ha,Ha],ra],has:{type:lb,overloads:[[[mb],function(b,a){a=a[0].evaluate(b);b=b.properties();return a in b}],[[mb,kg],function(b,a){var c=a[1];a=a[0].evaluate(b);b=c.evaluate(b);return a in b}]]},get:{type:Bb,overloads:[[[mb],function(b,a){return ua(a[0].evaluate(b),b.properties())}],[[mb,kg],function(b,a){var c=a[1];return ua(a[0].evaluate(b),c.evaluate(b))}]]},"feature-state":[Bb,[mb],function(b,a){return ua(a[0].evaluate(b),b.featureState||{})}],properties:[kg,
[],function(b){return b.properties()}],"geometry-type":[mb,[],function(b){return b.geometryType()}],id:[Bb,[],function(b){return b.id()}],zoom:[Ha,[],function(b){return b.globals.zoom}],"heatmap-density":[Ha,[],function(b){return b.globals.heatmapDensity||0}],"line-progress":[Ha,[],function(b){return b.globals.lineProgress||0}],accumulated:[Bb,[],function(b){return void 0===b.globals.accumulated?null:b.globals.accumulated}],"+":[Ha,{type:Ha},function(b,a){for(var c=0,d=0;d<a.length;d+=1)c+=a[d].evaluate(b);
return c}],"*":[Ha,{type:Ha},function(b,a){for(var c=1,d=0;d<a.length;d+=1)c*=a[d].evaluate(b);return c}],"-":{type:Ha,overloads:[[[Ha,Ha],function(b,a){var c=a[1];return a[0].evaluate(b)-c.evaluate(b)}],[[Ha],function(b,a){return-a[0].evaluate(b)}]]},"/":[Ha,[Ha,Ha],function(b,a){var c=a[1];return a[0].evaluate(b)/c.evaluate(b)}],"%":[Ha,[Ha,Ha],function(b,a){var c=a[1];return a[0].evaluate(b)%c.evaluate(b)}],ln2:[Ha,[],function(){return Math.LN2}],pi:[Ha,[],function(){return Math.PI}],e:[Ha,[],
function(){return Math.E}],"^":[Ha,[Ha,Ha],function(b,a){var c=a[1];return Math.pow(a[0].evaluate(b),c.evaluate(b))}],sqrt:[Ha,[Ha],function(b,a){return Math.sqrt(a[0].evaluate(b))}],log10:[Ha,[Ha],function(b,a){return Math.log(a[0].evaluate(b))/Math.LN10}],ln:[Ha,[Ha],function(b,a){return Math.log(a[0].evaluate(b))}],log2:[Ha,[Ha],function(b,a){return Math.log(a[0].evaluate(b))/Math.LN2}],sin:[Ha,[Ha],function(b,a){return Math.sin(a[0].evaluate(b))}],cos:[Ha,[Ha],function(b,a){return Math.cos(a[0].evaluate(b))}],
tan:[Ha,[Ha],function(b,a){return Math.tan(a[0].evaluate(b))}],asin:[Ha,[Ha],function(b,a){return Math.asin(a[0].evaluate(b))}],acos:[Ha,[Ha],function(b,a){return Math.acos(a[0].evaluate(b))}],atan:[Ha,[Ha],function(b,a){return Math.atan(a[0].evaluate(b))}],min:[Ha,{type:Ha},function(b,a){return Math.min.apply(Math,a.map(function(a){return a.evaluate(b)}))}],max:[Ha,{type:Ha},function(b,a){return Math.max.apply(Math,a.map(function(a){return a.evaluate(b)}))}],abs:[Ha,[Ha],function(b,a){return Math.abs(a[0].evaluate(b))}],
round:[Ha,[Ha],function(b,a){b=a[0].evaluate(b);return 0>b?-Math.round(-b):Math.round(b)}],floor:[Ha,[Ha],function(b,a){return Math.floor(a[0].evaluate(b))}],ceil:[Ha,[Ha],function(b,a){return Math.ceil(a[0].evaluate(b))}],"filter-\x3d\x3d":[lb,[mb,Bb],function(b,a){var c=a[0];a=a[1];return b.properties()[c.value]===a.value}],"filter-id-\x3d\x3d":[lb,[Bb],function(b,a){a=a[0];return b.id()===a.value}],"filter-type-\x3d\x3d":[lb,[mb],function(b,a){a=a[0];return b.geometryType()===a.value}],"filter-\x3c":[lb,
[mb,Bb],function(b,a){var c=a[0];a=a[1];b=b.properties()[c.value];c=a.value;return typeof b==typeof c&&b<c}],"filter-id-\x3c":[lb,[Bb],function(b,a){a=a[0];b=b.id();a=a.value;return typeof b==typeof a&&b<a}],"filter-\x3e":[lb,[mb,Bb],function(b,a){var c=a[0];a=a[1];b=b.properties()[c.value];c=a.value;return typeof b==typeof c&&b>c}],"filter-id-\x3e":[lb,[Bb],function(b,a){a=a[0];b=b.id();a=a.value;return typeof b==typeof a&&b>a}],"filter-\x3c\x3d":[lb,[mb,Bb],function(b,a){var c=a[0];a=a[1];b=b.properties()[c.value];
c=a.value;return typeof b==typeof c&&b<=c}],"filter-id-\x3c\x3d":[lb,[Bb],function(b,a){a=a[0];b=b.id();a=a.value;return typeof b==typeof a&&b<=a}],"filter-\x3e\x3d":[lb,[mb,Bb],function(b,a){var c=a[0];a=a[1];b=b.properties()[c.value];c=a.value;return typeof b==typeof c&&b>=c}],"filter-id-\x3e\x3d":[lb,[Bb],function(b,a){a=a[0];b=b.id();a=a.value;return typeof b==typeof a&&b>=a}],"filter-has":[lb,[Bb],function(b,a){return a[0].value in b.properties()}],"filter-has-id":[lb,[],function(b){return null!==
b.id()}],"filter-type-in":[lb,[R(mb)],function(b,a){return 0<=a[0].value.indexOf(b.geometryType())}],"filter-id-in":[lb,[R(Bb)],function(b,a){return 0<=a[0].value.indexOf(b.id())}],"filter-in-small":[lb,[mb,R(Bb)],function(b,a){var c=a[0];return 0<=a[1].value.indexOf(b.properties()[c.value])}],"filter-in-large":[lb,[mb,R(Bb)],function(b,a){var c=a[0];a=a[1];a:{b=b.properties()[c.value];c=a.value;var d=0;for(a=a.value.length-1;d<=a;){var e=d+a>>1;if(c[e]===b){a=!0;break a}c[e]>b?a=e-1:d=e+1}a=!1}return a}],
all:{type:lb,overloads:[[[lb,lb],function(b,a){var c=a[1];return a[0].evaluate(b)&&c.evaluate(b)}],[{type:lb},function(b,a){for(var c=0;c<a.length;c+=1)if(!a[c].evaluate(b))return!1;return!0}]]},any:{type:lb,overloads:[[[lb,lb],function(b,a){var c=a[1];return a[0].evaluate(b)||c.evaluate(b)}],[{type:lb},function(b,a){for(var c=0;c<a.length;c+=1)if(a[c].evaluate(b))return!0;return!1}]]},"!":[lb,[lb],function(b,a){return!a[0].evaluate(b)}],"is-supported-script":[lb,[mb],function(b,a){a=a[0];var c=b.globals&&
b.globals.isSupportedScript;return!c||c(a.evaluate(b))}],upcase:[mb,[mb],function(b,a){return a[0].evaluate(b).toUpperCase()}],downcase:[mb,[mb],function(b,a){return a[0].evaluate(b).toLowerCase()}],concat:[mb,{type:Bb},function(b,a){return a.map(function(a){return la(a.evaluate(b))}).join("")}],"resolved-locale":[mb,[le],function(b,a){return a[0].evaluate(b).resolvedLocale()}]});var Xf=function(b,a){this.expression=b;this._warningHistory={};this._evaluator=new wh;this._defaultValue=a?"color"===a.type&&
Na(a.default)?new sb(0,0,0,0):"color"===a.type?sb.parse(a.default)||null:void 0===a.default?null:a.default:null;this._enumValues=a&&"enum"===a.type?a.values:null};Xf.prototype.evaluateWithoutErrorHandling=function(b,a,c,d){return this._evaluator.globals=b,this._evaluator.feature=a,this._evaluator.featureState=c,this._evaluator.formattedSection=d,this.expression.evaluate(this._evaluator)};Xf.prototype.evaluate=function(b,a,c,d){this._evaluator.globals=b;this._evaluator.feature=a||null;this._evaluator.featureState=
c||null;this._evaluator.formattedSection=d||null;try{var e=this.expression.evaluate(this._evaluator);if(null==e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new rd("Expected value to be one of "+Object.keys(this._enumValues).map(function(b){return JSON.stringify(b)}).join(", ")+", but found "+JSON.stringify(e)+" instead.");return e}catch(df){return this._warningHistory[df.message]||(this._warningHistory[df.message]=!0,"undefined"!=typeof console&&console.warn(df.message)),
this._defaultValue}};var xh=function(b,a){this.kind=b;this._styleExpression=a;this.isStateDependent="constant"!==b&&!ma(a.expression)};xh.prototype.evaluateWithoutErrorHandling=function(b,a,c,d){return this._styleExpression.evaluateWithoutErrorHandling(b,a,c,d)};xh.prototype.evaluate=function(b,a,c,d){return this._styleExpression.evaluate(b,a,c,d)};var yh=function(b,a,c,d){this.kind=b;this.zoomStops=c;this._styleExpression=a;this.isStateDependent="camera"!==b&&!ma(a.expression);this.interpolationType=
d};yh.prototype.evaluateWithoutErrorHandling=function(b,a,c,d){return this._styleExpression.evaluateWithoutErrorHandling(b,a,c,d)};yh.prototype.evaluate=function(b,a,c,d){return this._styleExpression.evaluate(b,a,c,d)};yh.prototype.interpolationFactor=function(b,a,c){return this.interpolationType?Sb.interpolationFactor(this.interpolationType,b,a,c):0};var qg=function(b,a){this._parameters=b;this._specification=a;V(this,function df(b,a){var c="color"===a.type,d=b.stops&&"object"==typeof b.stops[0][0],
e=d||void 0!==b.property;e=d||!e;var f=b.type||(Ea(a)?"exponential":"interval");if(c&&((b=V({},b)).stops&&(b.stops=b.stops.map(function(b){return[b[0],sb.parse(b[1])]})),b.default?b.default=sb.parse(b.default):b.default=sb.parse(a.default)),b.colorSpace&&"rgb"!==b.colorSpace&&!me[b.colorSpace])throw Error("Unknown color space: "+b.colorSpace);if("exponential"===f)var g=zb;else if("interval"===f)g=Pa;else if("categorical"===f){g=Mb;var h=Object.create(null);c=0;for(var k=b.stops;c<k.length;c+=1){var l=
k[c];h[l[0]]=l[1]}var r=typeof b.stops[0][0]}else{if("identity"!==f)throw Error('Unknown function type "'+f+'"');g=cb}if(d){d={};e=[];for(f=0;f<b.stops.length;f++)c=b.stops[f],k=c[0].zoom,void 0===d[k]&&(d[k]={zoom:k,type:b.type,property:b.property,default:b.default,stops:[]},e.push(k)),d[k].stops.push([c[0].value,c[1]]);var t=[];for(f=0;f<e.length;f+=1)c=e[f],t.push([d[c].zoom,df(d[c],a)]);d={name:"linear"};return{kind:"composite",interpolationType:d,interpolationFactor:Sb.interpolationFactor.bind(void 0,
d),zoomStops:t.map(function(b){return b[0]}),evaluate:function(c,d){c=c.zoom;return zb({stops:t,base:b.base},a,c).evaluate(c,d)}}}return e?(d="exponential"===f?{name:"exponential",base:void 0!==b.base?b.base:1}:null,{kind:"camera",interpolationType:d,interpolationFactor:Sb.interpolationFactor.bind(void 0,d),zoomStops:b.stops.map(function(b){return b[0]}),evaluate:function(c){return g(b,a,c.zoom,h,r)}}):{kind:"source",evaluate:function(c,d){c=d&&d.properties?d.properties[b.property]:void 0;return void 0===
c?Lb(b.default,a.default):g(b,a,c,h,r)}}}(this._parameters,this._specification))};qg.deserialize=function(b){return new qg(b._parameters,b._specification)};qg.serialize=function(b){return{_parameters:b._parameters,_specification:b._specification}};var ri={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},Yf={"*":function(){return[]},array:gb,boolean:function(b){var a=b.value;b=b.key;var c=Ba(a);return"boolean"!==c?[new La(b,
a,"boolean expected, "+c+" found")]:[]},number:jb,color:function(b){var a=b.key;b=b.value;var c=Ba(b);return"string"!==c?[new La(a,b,"color expected, "+c+" found")]:null===Wd(b)?[new La(a,b,'color expected, "'+b+'" found')]:[]},constants:T,enum:Wc,filter:Yb,function:Oa,layer:Fc,object:eb,source:Md,light:nc,string:Yd,formatted:function(b){return 0===Yd(b).length?[]:Za(b)}};pb.source=Xc(Md);pb.light=Xc(nc);pb.layer=Xc(Fc);pb.filter=Xc(Yb);pb.paintProperty=Xc($a);pb.layoutProperty=Xc(Xd);var id=pb.light,
Ri=pb.paintProperty,S=pb.layoutProperty,ne=3;vc.prototype.insert=function(b,a,c,d,e){this._forEachCell(a,c,d,e,this._insertCell,this.uid++);this.keys.push(b);this.bboxes.push(a);this.bboxes.push(c);this.bboxes.push(d);this.bboxes.push(e)};vc.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer.";};vc.prototype._insertCell=function(b,a,c,d,e,f){this.cells[e].push(f)};vc.prototype.query=function(b,a,c,d,e){var f=this.min,g=this.max;if(b<=f&&a<=f&&g<=
c&&g<=d&&!e)return Array.prototype.slice.call(this.keys);f=[];return this._forEachCell(b,a,c,d,this._queryCell,f,{},e),f};vc.prototype._queryCell=function(b,a,c,d,e,f,g,h){e=this.cells[e];if(null!==e)for(var k=this.keys,l=this.bboxes,r=0;r<e.length;r++){var t=e[r];if(void 0===g[t]){var m=4*t;(h?h(l[m+0],l[m+1],l[m+2],l[m+3]):b<=l[m+2]&&a<=l[m+3]&&c>=l[m+0]&&d>=l[m+1])?(g[t]=!0,f.push(k[t])):g[t]=!1}}};vc.prototype._forEachCell=function(b,a,c,d,e,f,g,h){for(var k=this._convertToCellCoord(b),l=this._convertToCellCoord(a),
r=this._convertToCellCoord(c),t=this._convertToCellCoord(d);k<=r;k++)for(var m=l;m<=t;m++){var u=this.d*m+k;if((!h||h(this._convertFromCellCoord(k),this._convertFromCellCoord(m),this._convertFromCellCoord(k+1),this._convertFromCellCoord(m+1)))&&e.call(this,b,a,c,d,u,f,g,h))return}};vc.prototype._convertFromCellCoord=function(b){return(b-this.padding)/this.scale};vc.prototype._convertToCellCoord=function(b){return Math.max(0,Math.min(this.d-1,Math.floor(b*this.scale)+this.padding))};vc.prototype.toArrayBuffer=
function(){if(this.arrayBuffer)return this.arrayBuffer;for(var b=this.cells,a=ne+this.cells.length+1+1,c=0,d=0;d<this.cells.length;d++)c+=this.cells[d].length;c=new Int32Array(a+c+this.keys.length+this.bboxes.length);c[0]=this.extent;c[1]=this.n;c[2]=this.padding;for(d=0;d<b.length;d++){var e=b[d];c[ne+d]=a;c.set(e,a);a+=e.length}return c[ne+b.length]=a,c.set(this.keys,a),a+=this.keys.length,c[ne+b.length+1]=a,c.set(this.bboxes,a),c.buffer};var Kd=self.ImageData,Dc={},rh;for(rh in Ka("Object",Object),
vc.serialize=function(b,a){b=b.toArrayBuffer();return a&&a.push(b),{buffer:b}},vc.deserialize=function(b){return new vc(b.buffer)},Ka("Grid",vc),Ka("Color",sb),Ka("Error",Error),Ka("StylePropertyFunction",qg),Ka("StyleExpression",Xf,{omit:["_evaluator"]}),Ka("ZoomDependentExpression",yh),Ka("ZoomConstantExpression",xh),Ka("CompoundExpression",Vc,{omit:["_evaluate"]}),yf)yf[rh]._classRegistryKey||Ka("Expression_"+rh,yf[rh]);var sh=function(){this.first=!0};sh.prototype.update=function(b,a){var c=Math.floor(b);
return this.first?(this.first=!1,this.lastIntegerZoom=c,this.lastIntegerZoomTime=0,this.lastZoom=b,this.lastFloorZoom=c,!0):(this.lastFloorZoom>c?(this.lastIntegerZoom=c+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<c&&(this.lastIntegerZoom=c,this.lastIntegerZoomTime=a),b!==this.lastZoom&&(this.lastZoom=b,this.lastFloorZoom=c,!0))};var Ia={"Latin-1 Supplement":function(b){return 128<=b&&255>=b},Arabic:function(b){return 1536<=b&&1791>=b},"Arabic Supplement":function(b){return 1872<=b&&1919>=b},
"Arabic Extended-A":function(b){return 2208<=b&&2303>=b},"Hangul Jamo":function(b){return 4352<=b&&4607>=b},"Unified Canadian Aboriginal Syllabics":function(b){return 5120<=b&&5759>=b},Khmer:function(b){return 6016<=b&&6143>=b},"Unified Canadian Aboriginal Syllabics Extended":function(b){return 6320<=b&&6399>=b},"General Punctuation":function(b){return 8192<=b&&8303>=b},"Letterlike Symbols":function(b){return 8448<=b&&8527>=b},"Number Forms":function(b){return 8528<=b&&8591>=b},"Miscellaneous Technical":function(b){return 8960<=
b&&9215>=b},"Control Pictures":function(b){return 9216<=b&&9279>=b},"Optical Character Recognition":function(b){return 9280<=b&&9311>=b},"Enclosed Alphanumerics":function(b){return 9312<=b&&9471>=b},"Geometric Shapes":function(b){return 9632<=b&&9727>=b},"Miscellaneous Symbols":function(b){return 9728<=b&&9983>=b},"Miscellaneous Symbols and Arrows":function(b){return 11008<=b&&11263>=b},"CJK Radicals Supplement":function(b){return 11904<=b&&12031>=b},"Kangxi Radicals":function(b){return 12032<=b&&
12255>=b},"Ideographic Description Characters":function(b){return 12272<=b&&12287>=b},"CJK Symbols and Punctuation":function(b){return 12288<=b&&12351>=b},Hiragana:function(b){return 12352<=b&&12447>=b},Katakana:function(b){return 12448<=b&&12543>=b},Bopomofo:function(b){return 12544<=b&&12591>=b},"Hangul Compatibility Jamo":function(b){return 12592<=b&&12687>=b},Kanbun:function(b){return 12688<=b&&12703>=b},"Bopomofo Extended":function(b){return 12704<=b&&12735>=b},"CJK Strokes":function(b){return 12736<=
b&&12783>=b},"Katakana Phonetic Extensions":function(b){return 12784<=b&&12799>=b},"Enclosed CJK Letters and Months":function(b){return 12800<=b&&13055>=b},"CJK Compatibility":function(b){return 13056<=b&&13311>=b},"CJK Unified Ideographs Extension A":function(b){return 13312<=b&&19903>=b},"Yijing Hexagram Symbols":function(b){return 19904<=b&&19967>=b},"CJK Unified Ideographs":function(b){return 19968<=b&&40959>=b},"Yi Syllables":function(b){return 40960<=b&&42127>=b},"Yi Radicals":function(b){return 42128<=
b&&42191>=b},"Hangul Jamo Extended-A":function(b){return 43360<=b&&43391>=b},"Hangul Syllables":function(b){return 44032<=b&&55215>=b},"Hangul Jamo Extended-B":function(b){return 55216<=b&&55295>=b},"Private Use Area":function(b){return 57344<=b&&63743>=b},"CJK Compatibility Ideographs":function(b){return 63744<=b&&64255>=b},"Arabic Presentation Forms-A":function(b){return 64336<=b&&65023>=b},"Vertical Forms":function(b){return 65040<=b&&65055>=b},"CJK Compatibility Forms":function(b){return 65072<=
b&&65103>=b},"Small Form Variants":function(b){return 65104<=b&&65135>=b},"Arabic Presentation Forms-B":function(b){return 65136<=b&&65279>=b},"Halfwidth and Fullwidth Forms":function(b){return 65280<=b&&65519>=b}},ni,Ei=!1,th=null,Xa=!1,Og=new ke,Pg={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Xa||null!=Pg.applyArabicShaping}},yb=function(b,a){this.zoom=b;a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,
this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new sh,this.transition={})};yb.prototype.isSupportedScript=function(b){a:{for(var a=Pg.isLoaded(),c=0;c<b.length;c+=1){var d=b[c].charCodeAt(0);if(!a&&(1424<=d&&2303>=d||Ia["Arabic Presentation Forms-A"](d)||Ia["Arabic Presentation Forms-B"](d))||2304<=d&&3583>=d||3840<=d&&4255>=d||Ia.Khmer(d)){b=!1;break a}}b=!0}return b};yb.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/
this.fadeDuration,1)};yb.prototype.getCrossfadeParameters=function(){var b=this.zoom,a=b-Math.floor(b),c=this.crossFadingFactor();return b>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*c}:{fromScale:.5,toScale:1,t:1-(1-c)*a}};var Qg=function(b,a){this.property=b;this.value=a;this.expression=function(b,a){if(Na(b))return new qg(b,a);if(ub(b)){b=ab(b,a);if("error"===b.result)throw Error(b.value.map(function(b){return b.key+": "+b.message}).join(", "));return b.value}var c=b;return"string"==
typeof b&&"color"===a.type&&(c=sb.parse(b)),{kind:"constant",evaluate:function(){return c}}}(void 0===a?b.specification.default:a,b.specification)};Qg.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind};Qg.prototype.possiblyEvaluate=function(b){return this.property.possiblyEvaluate(this,b)};var Ug=function(b){this.property=b;this.value=new Qg(b,void 0)};Ug.prototype.transitioned=function(b,a){return new tb(this.property,this.value,a,r({},b.transition,
this.transition),b.now)};Ug.prototype.untransitioned=function(){return new tb(this.property,this.value,null,{},0)};var af=function(b){this._properties=b;this._values=Object.create(b.defaultTransitionablePropertyValues)};af.prototype.getValue=function(b){return x(this._values[b].value.value)};af.prototype.setValue=function(b,a){this._values.hasOwnProperty(b)||(this._values[b]=new Ug(this._values[b].property));this._values[b].value=new Qg(this._values[b].property,null===a?void 0:x(a))};af.prototype.getTransition=
function(b){return x(this._values[b].transition)};af.prototype.setTransition=function(b,a){this._values.hasOwnProperty(b)||(this._values[b]=new Ug(this._values[b].property));this._values[b].transition=x(a)||void 0};af.prototype.serialize=function(){for(var b={},a=0,c=Object.keys(this._values);a<c.length;a+=1){var d=c[a],e=this.getValue(d);void 0!==e&&(b[d]=e);e=this.getTransition(d);void 0!==e&&(b[d+"-transition"]=e)}return b};af.prototype.transitioned=function(b,a){for(var c=new Th(this._properties),
d=0,e=Object.keys(this._values);d<e.length;d+=1){var f=e[d];c._values[f]=this._values[f].transitioned(b,a._values[f])}return c};af.prototype.untransitioned=function(){for(var b=new Th(this._properties),a=0,c=Object.keys(this._values);a<c.length;a+=1){var d=c[a];b._values[d]=this._values[d].untransitioned()}return b};var tb=function(b,a,c,d,e){this.property=b;this.value=a;this.begin=e+d.delay||0;this.end=this.begin+d.duration||0;b.specification.transition&&(d.delay||d.duration)&&(this.prior=c)};tb.prototype.possiblyEvaluate=
function(b){var a=b.now||0,c=this.value.possiblyEvaluate(b),d=this.prior;if(d){if(a>this.end||this.value.isDataDriven())return this.prior=null,c;if(a<this.begin)return d.possiblyEvaluate(b);a=(a-this.begin)/(this.end-this.begin);return this.property.interpolate(d.possiblyEvaluate(b),c,function(b){if(0>=b)return 0;if(1<=b)return 1;var a=b*b,c=a*b;return 4*(.5>b?c:3*(b-a)+c-.75)}(a))}return c};var Th=function(b){this._properties=b;this._values=Object.create(b.defaultTransitioningPropertyValues)};Th.prototype.possiblyEvaluate=
function(b){for(var a=new mg(this._properties),c=0,d=Object.keys(this._values);c<d.length;c+=1){var e=d[c];a._values[e]=this._values[e].possiblyEvaluate(b)}return a};Th.prototype.hasTransition=function(){for(var b=0,a=Object.keys(this._values);b<a.length;b+=1)if(this._values[a[b]].prior)return!0;return!1};var Ie=function(b){this._properties=b;this._values=Object.create(b.defaultPropertyValues)};Ie.prototype.getValue=function(b){return x(this._values[b].value)};Ie.prototype.setValue=function(b,a){this._values[b]=
new Qg(this._values[b].property,null===a?void 0:x(a))};Ie.prototype.serialize=function(){for(var b={},a=0,c=Object.keys(this._values);a<c.length;a+=1){var d=c[a],e=this.getValue(d);void 0!==e&&(b[d]=e)}return b};Ie.prototype.possiblyEvaluate=function(b){for(var a=new mg(this._properties),c=0,d=Object.keys(this._values);c<d.length;c+=1){var e=d[c];a._values[e]=this._values[e].possiblyEvaluate(b)}return a};var Hd=function(b,a,c){this.property=b;this.value=a;this.parameters=c};Hd.prototype.isConstant=
function(){return"constant"===this.value.kind};Hd.prototype.constantOr=function(b){return"constant"===this.value.kind?this.value.value:b};Hd.prototype.evaluate=function(b,a){return this.property.evaluate(this.value,this.parameters,b,a)};var mg=function(b){this._properties=b;this._values=Object.create(b.defaultPossiblyEvaluatedValues)};mg.prototype.get=function(b){return this._values[b]};var Qa=function(b){this.specification=b};Qa.prototype.possiblyEvaluate=function(b,a){return b.expression.evaluate(a)};
Qa.prototype.interpolate=function(b,a,c){var d=Td[this.specification.type];return d?d(b,a,c):b};var Va=function(b,a){this.specification=b;this.overrides=a};Va.prototype.possiblyEvaluate=function(b,a){return"constant"===b.expression.kind||"camera"===b.expression.kind?new Hd(this,{kind:"constant",value:b.expression.evaluate(a)},a):new Hd(this,b.expression,a)};Va.prototype.interpolate=function(b,a,c){if("constant"!==b.value.kind||"constant"!==a.value.kind)return b;if(void 0===b.value.value||void 0===
a.value.value)return new Hd(this,{kind:"constant",value:void 0},b.parameters);var d=Td[this.specification.type];return d?new Hd(this,{kind:"constant",value:d(b.value.value,a.value.value,c)},b.parameters):b};Va.prototype.evaluate=function(b,a,c,d){return"constant"===b.kind?b.value:b.evaluate(a,c,d)};var Wa=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.possiblyEvaluate=function(b,a){return void 0===
b.value?new Hd(this,{kind:"constant",value:void 0},a):"constant"===b.expression.kind?(b=b.expression.evaluate(a),b=this._calculate(b,b,b,a),new Hd(this,{kind:"constant",value:b},a)):"camera"===b.expression.kind?(b=this._calculate(b.expression.evaluate({zoom:a.zoom-1}),b.expression.evaluate({zoom:a.zoom}),b.expression.evaluate({zoom:a.zoom+1}),a),new Hd(this,{kind:"constant",value:b},a)):new Hd(this,b.expression,a)},a.prototype.evaluate=function(b,a,c,d){return"source"===b.kind?(b=b.evaluate(a,c,d),
this._calculate(b,b,b,a)):"composite"===b.kind?this._calculate(b.evaluate({zoom:Math.floor(a.zoom)-1},c,d),b.evaluate({zoom:Math.floor(a.zoom)},c,d),b.evaluate({zoom:Math.floor(a.zoom)+1},c,d),a):b.value},a.prototype._calculate=function(b,a,c,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:b,to:a}:{from:c,to:a}},a.prototype.interpolate=function(b){return b},a}(Va),fd=function(b){this.specification=b};fd.prototype.possiblyEvaluate=function(b,a){if(void 0!==b.value)return"constant"===b.expression.kind?
(b=b.expression.evaluate(a),this._calculate(b,b,b,a)):this._calculate(b.expression.evaluate(new yb(Math.floor(a.zoom-1),a)),b.expression.evaluate(new yb(Math.floor(a.zoom),a)),b.expression.evaluate(new yb(Math.floor(a.zoom+1),a)),a)};fd.prototype._calculate=function(b,a,c,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:b,to:a}:{from:c,to:a}};fd.prototype.interpolate=function(b){return b};var Uh=function(b){this.specification=b};Uh.prototype.possiblyEvaluate=function(b,a){return!!b.expression.evaluate(a)};
Uh.prototype.interpolate=function(){return!1};var rb=function(b){for(var a in this.properties=b,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],b){var c=b[a];c.specification.overridable&&this.overridableProperties.push(a);var d=this.defaultPropertyValues[a]=new Qg(c,void 0);c=this.defaultTransitionablePropertyValues[a]=new Ug(c);this.defaultTransitioningPropertyValues[a]=
c.untransitioned();this.defaultPossiblyEvaluatedValues[a]=d.possiblyEvaluate({})}};Ka("DataDrivenProperty",Va);Ka("DataConstantProperty",Qa);Ka("CrossFadedDataDrivenProperty",Wa);Ka("CrossFadedProperty",fd);Ka("ColorRampProperty",Uh);var Ra=function(b){function a(a,c){if(b.call(this),this.id=a.id,this.type=a.type,this._featureFilter=function(){return!0},"custom"!==a.type&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,"background"!==a.type&&(this.source=a.source,this.sourceLayer=
a["source-layer"],this.filter=a.filter),c.layout&&(this._unevaluatedLayout=new Ie(c.layout)),c.paint)){for(var d in this._transitionablePaint=new af(c.paint),a.paint)this.setPaintProperty(d,a.paint[d],{validate:!1});for(var e in a.layout)this.setLayoutProperty(e,a.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},
a.prototype.getLayoutProperty=function(b){return"visibility"===b?this.visibility:this._unevaluatedLayout.getValue(b)},a.prototype.setLayoutProperty=function(b,a,c){(void 0===c&&(c={}),null!=a)&&this._validate(S,"layers."+this.id+".layout."+b,b,a,c)||("visibility"!==b?this._unevaluatedLayout.setValue(b,a):this.visibility=a)},a.prototype.getPaintProperty=function(b){return y(b,"-transition")?this._transitionablePaint.getTransition(b.slice(0,-11)):this._transitionablePaint.getValue(b)},a.prototype.setPaintProperty=
function(b,a,c){if((void 0===c&&(c={}),null!=a)&&this._validate(Ri,"layers."+this.id+".paint."+b,b,a,c))return!1;if(y(b,"-transition"))return this._transitionablePaint.setTransition(b.slice(0,-11),a||void 0),!1;var d=this._transitionablePaint._values[b];c="cross-faded-data-driven"===d.property.specification["property-type"];var e=d.value.isDataDriven();d=d.value;this._transitionablePaint.setValue(b,a);this._handleSpecialPaintPropertyUpdate(b);a=this._transitionablePaint._values[b].value;return a.isDataDriven()||
e||c||this._handleOverridablePaintPropertyUpdate(b,d,a)},a.prototype._handleSpecialPaintPropertyUpdate=function(b){},a.prototype._handleOverridablePaintPropertyUpdate=function(b,a,c){return!1},a.prototype.isHidden=function(b){return!!(this.minzoom&&b<this.minzoom)||!!(this.maxzoom&&b>=this.maxzoom)||"none"===this.visibility},a.prototype.updateTransitions=function(b){this._transitioningPaint=this._transitionablePaint.transitioned(b,this._transitioningPaint)},a.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},
a.prototype.recalculate=function(b){b.getCrossfadeParameters&&(this._crossfadeParameters=b.getCrossfadeParameters());this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(b));this.paint=this._transitioningPaint.possiblyEvaluate(b)},a.prototype.serialize=function(){var b={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),
paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(b.layout=b.layout||{},b.layout.visibility=this.visibility),z(b,function(b,a){return!(void 0===b||"layout"===a&&!Object.keys(b).length||"paint"===a&&!Object.keys(b).length)})},a.prototype._validate=function(b,a,c,d,e){return void 0===e&&(e={}),(!e||!1!==e.validate)&&qa(this,b.call(pb,{key:a,layerType:this.type,objectKey:c,value:d,styleSpec:ta,style:{glyphs:!0,sprite:!0}}))},a.prototype.is3D=function(){return!1},
a.prototype.isTileClipped=function(){return!1},a.prototype.hasOffscreenPass=function(){return!1},a.prototype.resize=function(){},a.prototype.isStateDependent=function(){for(var b in this.paint._values){var a=this.paint.get(b);if(a instanceof Hd&&Ma(a.property.specification)&&("source"===a.value.kind||"composite"===a.value.kind)&&a.value.isStateDependent)return!0}return!1},a}(ke),Tb={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},
bf=function(b,a){this._structArray=b;this._pos1=a*this.size;this._pos2=this._pos1/2;this._pos4=this._pos1/4;this._pos8=this._pos1/8},Pb=function(){this.isTransferred=!1;this.capacity=-1;this.resize(0)};Pb.serialize=function(b,a){return b._trim(),a&&(b.isTransferred=!0,a.push(b.arrayBuffer)),{length:b.length,arrayBuffer:b.arrayBuffer}};Pb.deserialize=function(b){var a=Object.create(this.prototype);return a.arrayBuffer=b.arrayBuffer,a.length=b.length,a.capacity=b.arrayBuffer.byteLength/a.bytesPerElement,
a._refreshViews(),a};Pb.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())};Pb.prototype.clear=function(){this.length=0};Pb.prototype.resize=function(b){this.reserve(b);this.length=b};Pb.prototype.reserve=function(b){b>this.capacity&&(this.capacity=Math.max(b,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement),b=this.uint8,
this._refreshViews(),b&&this.uint8.set(b))};Pb.prototype._refreshViews=function(){throw Error("_refreshViews() must be implemented by each concrete StructArray layout");};var Pf=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a){var c=this.length;
return this.resize(c+1),this.emplace(c,b,a)},a.prototype.emplace=function(b,a,c){var d=2*b;return this.int16[d+0]=a,this.int16[d+1]=c,b},a}(Pb);Pf.prototype.bytesPerElement=4;Ka("StructArrayLayout2i4",Pf);var Vh=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=
function(b,a,c,d){var e=this.length;return this.resize(e+1),this.emplace(e,b,a,c,d)},a.prototype.emplace=function(b,a,c,d,e){var f=4*b;return this.int16[f+0]=a,this.int16[f+1]=c,this.int16[f+2]=d,this.int16[f+3]=e,b},a}(Pb);Vh.prototype.bytesPerElement=8;Ka("StructArrayLayout4i8",Vh);var Wh=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);
this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a,c,d,e,f){var g=this.length;return this.resize(g+1),this.emplace(g,b,a,c,d,e,f)},a.prototype.emplace=function(b,a,c,d,e,f,g){var h=6*b;return this.int16[h+0]=a,this.int16[h+1]=c,this.int16[h+2]=d,this.int16[h+3]=e,this.int16[h+4]=f,this.int16[h+5]=g,b},a}(Pb);Wh.prototype.bytesPerElement=12;Ka("StructArrayLayout2i4i12",Wh);var Xh=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&
b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a,c,d,e,f){var g=this.length;return this.resize(g+1),this.emplace(g,b,a,c,d,e,f)},a.prototype.emplace=function(b,a,c,d,e,f,g){var h=4*b,k=8*b;return this.int16[h+0]=a,this.int16[h+1]=c,this.uint8[k+4]=d,this.uint8[k+5]=e,this.uint8[k+6]=f,this.uint8[k+7]=g,b},a}(Pb);Xh.prototype.bytesPerElement=8;Ka("StructArrayLayout2i4ub8",
Xh);var cf=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a,c,d,e,f,g,h){var k=this.length;return this.resize(k+1),this.emplace(k,b,a,c,d,e,f,g,h)},a.prototype.emplace=function(b,a,c,d,e,f,g,h,k){var l=8*b;return this.uint16[l+0]=a,this.uint16[l+
1]=c,this.uint16[l+2]=d,this.uint16[l+3]=e,this.uint16[l+4]=f,this.uint16[l+5]=g,this.uint16[l+6]=h,this.uint16[l+7]=k,b},a}(Pb);cf.prototype.bytesPerElement=16;Ka("StructArrayLayout8ui16",cf);var si=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},
a.prototype.emplaceBack=function(b,a,c,d,e,f,g,h){var k=this.length;return this.resize(k+1),this.emplace(k,b,a,c,d,e,f,g,h)},a.prototype.emplace=function(b,a,c,d,e,f,g,h,k){var l=8*b;return this.int16[l+0]=a,this.int16[l+1]=c,this.int16[l+2]=d,this.int16[l+3]=e,this.uint16[l+4]=f,this.uint16[l+5]=g,this.uint16[l+6]=h,this.uint16[l+7]=k,b},a}(Pb);si.prototype.bytesPerElement=16;Ka("StructArrayLayout4i4ui16",si);var Wg=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=
Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a,c){var d=this.length;return this.resize(d+1),this.emplace(d,b,a,c)},a.prototype.emplace=function(b,a,c,d){var e=3*b;return this.float32[e+0]=a,this.float32[e+1]=c,this.float32[e+2]=d,b},a}(Pb);Wg.prototype.bytesPerElement=12;Ka("StructArrayLayout3f12",Wg);var Vg=function(b){function a(){b.apply(this,
arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b){var a=this.length;return this.resize(a+1),this.emplace(a,b)},a.prototype.emplace=function(b,a){return this.uint32[1*b]=a,b},a}(Pb);Vg.prototype.bytesPerElement=4;Ka("StructArrayLayout1ul4",Vg);var zh=function(b){function a(){b.apply(this,
arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a,c,d,e,f,g,h,k,l,r){var t=this.length;return this.resize(t+1),this.emplace(t,b,a,c,d,e,f,g,h,k,l,r)},a.prototype.emplace=function(b,a,c,d,e,f,
g,h,k,l,r,t){var m=12*b;return this.int16[m+0]=a,this.int16[m+1]=c,this.int16[m+2]=d,this.int16[m+3]=e,this.int16[m+4]=f,this.int16[m+5]=g,this.uint32[6*b+3]=h,this.uint16[m+8]=k,this.uint16[m+9]=l,this.int16[m+10]=r,this.int16[m+11]=t,b},a}(Pb);zh.prototype.bytesPerElement=24;Ka("StructArrayLayout6i1ul2ui2i24",zh);var uh=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=
new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a,c,d,e,f){var g=this.length;return this.resize(g+1),this.emplace(g,b,a,c,d,e,f)},a.prototype.emplace=function(b,a,c,d,e,f,g){var h=6*b;return this.int16[h+0]=a,this.int16[h+1]=c,this.int16[h+2]=d,this.int16[h+3]=e,this.int16[h+4]=f,this.int16[h+5]=g,b},a}(Pb);uh.prototype.bytesPerElement=12;Ka("StructArrayLayout2i2i2i12",uh);var Xg=function(b){function a(){b.apply(this,arguments)}return b&&
(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a,c,d){var e=this.length;return this.resize(e+1),this.emplace(e,b,a,c,d)},a.prototype.emplace=function(b,a,c,d,e){var f=12*b,g=3*b;return this.uint8[f+0]=a,this.uint8[f+1]=c,this.float32[g+1]=d,this.float32[g+2]=e,b},a}(Pb);Xg.prototype.bytesPerElement=
12;Ka("StructArrayLayout2ub2f12",Xg);var ef=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a,c,d,e,f,g,h,
k,l,r,t,m,u,n,v){var w=this.length;return this.resize(w+1),this.emplace(w,b,a,c,d,e,f,g,h,k,l,r,t,m,u,n,v)},a.prototype.emplace=function(b,a,c,d,e,f,g,h,k,l,r,t,m,u,n,v,w){var z=22*b,x=11*b,A=44*b;return this.int16[z+0]=a,this.int16[z+1]=c,this.uint16[z+2]=d,this.uint16[z+3]=e,this.uint32[x+2]=f,this.uint32[x+3]=g,this.uint32[x+4]=h,this.uint16[z+10]=k,this.uint16[z+11]=l,this.uint16[z+12]=r,this.float32[x+7]=t,this.float32[x+8]=m,this.uint8[A+36]=u,this.uint8[A+37]=n,this.uint8[A+38]=v,this.uint32[x+
10]=w,b},a}(Pb);ef.prototype.bytesPerElement=44;Ka("StructArrayLayout2i2ui3ul3ui2f3ub1ul44",ef);var tg=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},
a.prototype.emplaceBack=function(b,a,c,d,e,f,g,h,k,l,r,t,m,u,n,v,w,z,x,A){var y=this.length;return this.resize(y+1),this.emplace(y,b,a,c,d,e,f,g,h,k,l,r,t,m,u,n,v,w,z,x,A)},a.prototype.emplace=function(b,a,c,d,e,f,g,h,k,l,r,t,m,u,n,v,w,z,x,A,y){var B=24*b,p=12*b;return this.int16[B+0]=a,this.int16[B+1]=c,this.int16[B+2]=d,this.int16[B+3]=e,this.int16[B+4]=f,this.int16[B+5]=g,this.uint16[B+6]=h,this.uint16[B+7]=k,this.uint16[B+8]=l,this.uint16[B+9]=r,this.uint16[B+10]=t,this.uint16[B+11]=m,this.uint16[B+
12]=u,this.uint16[B+13]=n,this.uint16[B+14]=v,this.uint16[B+15]=w,this.uint16[B+16]=z,this.uint32[p+9]=x,this.float32[p+10]=A,this.float32[p+11]=y,b},a}(Pb);tg.prototype.bytesPerElement=48;Ka("StructArrayLayout6i11ui1ul2f48",tg);var ff=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},
a.prototype.emplaceBack=function(b){var a=this.length;return this.resize(a+1),this.emplace(a,b)},a.prototype.emplace=function(b,a){return this.float32[1*b]=a,b},a}(Pb);ff.prototype.bytesPerElement=4;Ka("StructArrayLayout1f4",ff);var sg=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},
a.prototype.emplaceBack=function(b,a,c){var d=this.length;return this.resize(d+1),this.emplace(d,b,a,c)},a.prototype.emplace=function(b,a,c,d){var e=3*b;return this.int16[e+0]=a,this.int16[e+1]=c,this.int16[e+2]=d,b},a}(Pb);sg.prototype.bytesPerElement=6;Ka("StructArrayLayout3i6",sg);var Fi=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);
this.uint32=new Uint32Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a,c){var d=this.length;return this.resize(d+1),this.emplace(d,b,a,c)},a.prototype.emplace=function(b,a,c,d){var e=4*b;return this.uint32[2*b]=a,this.uint16[e+2]=c,this.uint16[e+3]=d,b},a}(Pb);Fi.prototype.bytesPerElement=8;Ka("StructArrayLayout1ul2ui8",Fi);var Ze=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),
a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a,c){var d=this.length;return this.resize(d+1),this.emplace(d,b,a,c)},a.prototype.emplace=function(b,a,c,d){var e=3*b;return this.uint16[e+0]=a,this.uint16[e+1]=c,this.uint16[e+2]=d,b},a}(Pb);Ze.prototype.bytesPerElement=6;Ka("StructArrayLayout3ui6",Ze);var ng=function(b){function a(){b.apply(this,arguments)}return b&&
(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a){var c=this.length;return this.resize(c+1),this.emplace(c,b,a)},a.prototype.emplace=function(b,a,c){var d=2*b;return this.uint16[d+0]=a,this.uint16[d+1]=c,b},a}(Pb);ng.prototype.bytesPerElement=4;Ka("StructArrayLayout2ui4",ng);var ui=function(b){function a(){b.apply(this,
arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b){var a=this.length;return this.resize(a+1),this.emplace(a,b)},a.prototype.emplace=function(b,a){return this.uint16[1*b]=a,b},a}(Pb);ui.prototype.bytesPerElement=2;Ka("StructArrayLayout1ui2",ui);var Ga=function(b){function a(){b.apply(this,
arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a){var c=this.length;return this.resize(c+1),this.emplace(c,b,a)},a.prototype.emplace=function(b,a,c){var d=2*b;return this.float32[d+0]=a,this.float32[d+1]=c,b},a}(Pb);Ga.prototype.bytesPerElement=8;Ka("StructArrayLayout2f8",Ga);var $c=
function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a,c,d){var e=this.length;return this.resize(e+1),this.emplace(e,b,a,c,d)},a.prototype.emplace=function(b,a,c,d,e){var f=4*b;return this.float32[f+0]=a,this.float32[f+1]=c,this.float32[f+2]=d,this.float32[f+
3]=e,b},a}(Pb);$c.prototype.bytesPerElement=16;Ka("StructArrayLayout4f16",$c);var Af=function(b){function a(){b.apply(this,arguments)}b&&(a.__proto__=b);a.prototype=Object.create(b&&b.prototype);a.prototype.constructor=a;var c={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},
anchorPoint:{configurable:!0}};return c.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},c.anchorPointX.set=function(b){this._structArray.int16[this._pos2+0]=b},c.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},c.anchorPointY.set=function(b){this._structArray.int16[this._pos2+1]=b},c.x1.get=function(){return this._structArray.int16[this._pos2+2]},c.x1.set=function(b){this._structArray.int16[this._pos2+2]=b},c.y1.get=function(){return this._structArray.int16[this._pos2+
3]},c.y1.set=function(b){this._structArray.int16[this._pos2+3]=b},c.x2.get=function(){return this._structArray.int16[this._pos2+4]},c.x2.set=function(b){this._structArray.int16[this._pos2+4]=b},c.y2.get=function(){return this._structArray.int16[this._pos2+5]},c.y2.set=function(b){this._structArray.int16[this._pos2+5]=b},c.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},c.featureIndex.set=function(b){this._structArray.uint32[this._pos4+3]=b},c.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+
8]},c.sourceLayerIndex.set=function(b){this._structArray.uint16[this._pos2+8]=b},c.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},c.bucketIndex.set=function(b){this._structArray.uint16[this._pos2+9]=b},c.radius.get=function(){return this._structArray.int16[this._pos2+10]},c.radius.set=function(b){this._structArray.int16[this._pos2+10]=b},c.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},c.signedDistanceFromAnchor.set=function(b){this._structArray.int16[this._pos2+
11]=b},c.anchorPoint.get=function(){return new Sa(this.anchorPointX,this.anchorPointY)},Object.defineProperties(a.prototype,c),a}(bf);Af.prototype.size=24;var Ph=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.get=function(b){return new Af(this,b)},a}(zh);Ka("CollisionBoxArray",Ph);var ec=function(b){function a(){b.apply(this,arguments)}b&&(a.__proto__=b);a.prototype=Object.create(b&&b.prototype);
a.prototype.constructor=a;var c={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0}};
return c.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},c.anchorX.set=function(b){this._structArray.int16[this._pos2+0]=b},c.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},c.anchorY.set=function(b){this._structArray.int16[this._pos2+1]=b},c.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},c.glyphStartIndex.set=function(b){this._structArray.uint16[this._pos2+2]=b},c.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+
3]},c.numGlyphs.set=function(b){this._structArray.uint16[this._pos2+3]=b},c.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},c.vertexStartIndex.set=function(b){this._structArray.uint32[this._pos4+2]=b},c.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},c.lineStartIndex.set=function(b){this._structArray.uint32[this._pos4+3]=b},c.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},c.lineLength.set=function(b){this._structArray.uint32[this._pos4+
4]=b},c.segment.get=function(){return this._structArray.uint16[this._pos2+10]},c.segment.set=function(b){this._structArray.uint16[this._pos2+10]=b},c.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},c.lowerSize.set=function(b){this._structArray.uint16[this._pos2+11]=b},c.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},c.upperSize.set=function(b){this._structArray.uint16[this._pos2+12]=b},c.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+
7]},c.lineOffsetX.set=function(b){this._structArray.float32[this._pos4+7]=b},c.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},c.lineOffsetY.set=function(b){this._structArray.float32[this._pos4+8]=b},c.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},c.writingMode.set=function(b){this._structArray.uint8[this._pos1+36]=b},c.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},c.placedOrientation.set=function(b){this._structArray.uint8[this._pos1+
37]=b},c.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},c.hidden.set=function(b){this._structArray.uint8[this._pos1+38]=b},c.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},c.crossTileID.set=function(b){this._structArray.uint32[this._pos4+10]=b},Object.defineProperties(a.prototype,c),a}(bf);ec.prototype.size=44;var hi=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=
a,a.prototype.get=function(b){return new ec(this,b)},a}(ef);Ka("PlacedSymbolArray",hi);var Ji=function(b){function a(){b.apply(this,arguments)}b&&(a.__proto__=b);a.prototype=Object.create(b&&b.prototype);a.prototype.constructor=a;var c={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},key:{configurable:!0},
textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},radialTextOffset:{configurable:!0}};return c.anchorX.get=function(){return this._structArray.int16[this._pos2+
0]},c.anchorX.set=function(b){this._structArray.int16[this._pos2+0]=b},c.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},c.anchorY.set=function(b){this._structArray.int16[this._pos2+1]=b},c.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},c.rightJustifiedTextSymbolIndex.set=function(b){this._structArray.int16[this._pos2+2]=b},c.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},c.centerJustifiedTextSymbolIndex.set=
function(b){this._structArray.int16[this._pos2+3]=b},c.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},c.leftJustifiedTextSymbolIndex.set=function(b){this._structArray.int16[this._pos2+4]=b},c.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},c.verticalPlacedTextSymbolIndex.set=function(b){this._structArray.int16[this._pos2+5]=b},c.key.get=function(){return this._structArray.uint16[this._pos2+6]},c.key.set=function(b){this._structArray.uint16[this._pos2+
6]=b},c.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+7]},c.textBoxStartIndex.set=function(b){this._structArray.uint16[this._pos2+7]=b},c.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+8]},c.textBoxEndIndex.set=function(b){this._structArray.uint16[this._pos2+8]=b},c.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},c.verticalTextBoxStartIndex.set=function(b){this._structArray.uint16[this._pos2+9]=b},c.verticalTextBoxEndIndex.get=
function(){return this._structArray.uint16[this._pos2+10]},c.verticalTextBoxEndIndex.set=function(b){this._structArray.uint16[this._pos2+10]=b},c.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},c.iconBoxStartIndex.set=function(b){this._structArray.uint16[this._pos2+11]=b},c.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},c.iconBoxEndIndex.set=function(b){this._structArray.uint16[this._pos2+12]=b},c.featureIndex.get=function(){return this._structArray.uint16[this._pos2+
13]},c.featureIndex.set=function(b){this._structArray.uint16[this._pos2+13]=b},c.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+14]},c.numHorizontalGlyphVertices.set=function(b){this._structArray.uint16[this._pos2+14]=b},c.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+15]},c.numVerticalGlyphVertices.set=function(b){this._structArray.uint16[this._pos2+15]=b},c.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+
16]},c.numIconVertices.set=function(b){this._structArray.uint16[this._pos2+16]=b},c.crossTileID.get=function(){return this._structArray.uint32[this._pos4+9]},c.crossTileID.set=function(b){this._structArray.uint32[this._pos4+9]=b},c.textBoxScale.get=function(){return this._structArray.float32[this._pos4+10]},c.textBoxScale.set=function(b){this._structArray.float32[this._pos4+10]=b},c.radialTextOffset.get=function(){return this._structArray.float32[this._pos4+11]},c.radialTextOffset.set=function(b){this._structArray.float32[this._pos4+
11]=b},Object.defineProperties(a.prototype,c),a}(bf);Ji.prototype.size=48;var $g=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.get=function(b){return new Ji(this,b)},a}(tg);Ka("SymbolInstanceArray",$g);var wg=function(b){function a(){b.apply(this,arguments)}b&&(a.__proto__=b);a.prototype=Object.create(b&&b.prototype);a.prototype.constructor=a;var c={offsetX:{configurable:!0}};return c.offsetX.get=
function(){return this._structArray.float32[this._pos4+0]},c.offsetX.set=function(b){this._structArray.float32[this._pos4+0]=b},Object.defineProperties(a.prototype,c),a}(bf);wg.prototype.size=4;var Bf=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getoffsetX=function(b){return this.float32[1*b]},a.prototype.get=function(b){return new wg(this,b)},a}(ff);Ka("GlyphOffsetArray",Bf);var ad=function(b){function a(){b.apply(this,
arguments)}b&&(a.__proto__=b);a.prototype=Object.create(b&&b.prototype);a.prototype.constructor=a;var c={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return c.x.get=function(){return this._structArray.int16[this._pos2+0]},c.x.set=function(b){this._structArray.int16[this._pos2+0]=b},c.y.get=function(){return this._structArray.int16[this._pos2+1]},c.y.set=function(b){this._structArray.int16[this._pos2+1]=b},c.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+
2]},c.tileUnitDistanceFromAnchor.set=function(b){this._structArray.int16[this._pos2+2]=b},Object.defineProperties(a.prototype,c),a}(bf);ad.prototype.size=6;var Yc=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getx=function(b){return this.int16[3*b]},a.prototype.gety=function(b){return this.int16[3*b+1]},a.prototype.gettileUnitDistanceFromAnchor=function(b){return this.int16[3*b+2]},a.prototype.get=
function(b){return new ad(this,b)},a}(sg);Ka("SymbolLineVertexArray",Yc);var Rc=function(b){function a(){b.apply(this,arguments)}b&&(a.__proto__=b);a.prototype=Object.create(b&&b.prototype);a.prototype.constructor=a;var c={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return c.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},c.featureIndex.set=function(b){this._structArray.uint32[this._pos4+0]=b},c.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+
2]},c.sourceLayerIndex.set=function(b){this._structArray.uint16[this._pos2+2]=b},c.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},c.bucketIndex.set=function(b){this._structArray.uint16[this._pos2+3]=b},Object.defineProperties(a.prototype,c),a}(bf);Rc.prototype.size=8;var Ah=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.get=function(b){return new Rc(this,b)},a}(Fi);
Ka("FeatureIndexArray",Ah);var bh=fb([{name:"a_pos",components:2,type:"Int16"}],4).members,Wb=function(b){void 0===b&&(b=[]);this.segments=b};Wb.prototype.prepareSegment=function(b,a,c,d){var e=this.segments[this.segments.length-1];return b>Wb.MAX_VERTEX_ARRAY_LENGTH&&p("Max vertices per segment is "+Wb.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+b),(!e||e.vertexLength+b>Wb.MAX_VERTEX_ARRAY_LENGTH||e.sortKey!==d)&&(e={vertexOffset:a.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0},
void 0!==d&&(e.sortKey=d),this.segments.push(e)),e};Wb.prototype.get=function(){return this.segments};Wb.prototype.destroy=function(){for(var b=0,a=this.segments;b<a.length;b+=1){var c=a[b],d;for(d in c.vaos)c.vaos[d].destroy()}};Wb.simpleSegment=function(b,a,c,d){return new Wb([{vertexOffset:b,primitiveOffset:a,vertexLength:c,primitiveLength:d,vaos:{},sortKey:0}])};Wb.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1;Ka("SegmentVector",Wb);var Be=function(){this.ids=[];this.positions=[];this.indexed=!1};
Be.prototype.add=function(b,a,c,d){this.ids.push(b);this.positions.push(a,c,d)};Be.prototype.getPositions=function(b){for(var a=0,c=this.ids.length-1;a<c;){var d=a+c>>1;this.ids[d]>=b?c=d:a=d+1}for(c=[];this.ids[a]===b;)c.push({index:this.positions[3*a],start:this.positions[3*a+1],end:this.positions[3*a+2]}),a++;return c};Be.serialize=function(b,a){var c=new Float64Array(b.ids);b=new Uint32Array(b.positions);return function aj(b,a,c,d){if(!(c>=d)){for(var e=b[c+d>>1],f=c-1,g=d+1;;){do f++;while(b[f]<
e);do g--;while(b[g]>e);if(f>=g)break;Qb(b,f,g);Qb(a,3*f,3*g);Qb(a,3*f+1,3*g+1);Qb(a,3*f+2,3*g+2)}aj(b,a,c,g);aj(b,a,g+1,d)}}(c,b,0,c.length-1),a.push(c.buffer,b.buffer),{ids:c,positions:b}};Be.deserialize=function(b){var a=new Be;return a.ids=b.ids,a.positions=b.positions,a.indexed=!0,a};Ka("FeaturePositionMap",Be);var Id=function(b,a){this.gl=b.gl;this.location=a},Qf=function(b){function a(a,c){b.call(this,a,c);this.current=0}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=
a,a.prototype.set=function(b){this.current!==b&&(this.current=b,this.gl.uniform1i(this.location,b))},a}(Id),Ne=function(b){function a(a,c){b.call(this,a,c);this.current=0}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.set=function(b){this.current!==b&&(this.current=b,this.gl.uniform1f(this.location,b))},a}(Id),re=function(b){function a(a,c){b.call(this,a,c);this.current=[0,0]}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),
a.prototype.constructor=a,a.prototype.set=function(b){b[0]===this.current[0]&&b[1]===this.current[1]||(this.current=b,this.gl.uniform2f(this.location,b[0],b[1]))},a}(Id),ah=function(b){function a(a,c){b.call(this,a,c);this.current=[0,0,0]}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.set=function(b){b[0]===this.current[0]&&b[1]===this.current[1]&&b[2]===this.current[2]||(this.current=b,this.gl.uniform3f(this.location,b[0],b[1],b[2]))},a}(Id),
yg=function(b){function a(a,c){b.call(this,a,c);this.current=[0,0,0,0]}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.set=function(b){b[0]===this.current[0]&&b[1]===this.current[1]&&b[2]===this.current[2]&&b[3]===this.current[3]||(this.current=b,this.gl.uniform4f(this.location,b[0],b[1],b[2],b[3]))},a}(Id),Cf=function(b){function a(a,c){b.call(this,a,c);this.current=sb.transparent}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),
a.prototype.constructor=a,a.prototype.set=function(b){b.r===this.current.r&&b.g===this.current.g&&b.b===this.current.b&&b.a===this.current.a||(this.current=b,this.gl.uniform4f(this.location,b.r,b.g,b.b,b.a))},a}(Id),Oe=new Float32Array(16),Hi=function(b){function a(a,c){b.call(this,a,c);this.current=Oe}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.set=function(b){if(b[12]!==this.current[12]||b[0]!==this.current[0])return this.current=b,void this.gl.uniformMatrix4fv(this.location,
!1,b);for(var a=1;16>a;a++)if(b[a]!==this.current[a]){this.current=b;this.gl.uniformMatrix4fv(this.location,!1,b);break}},a}(Id),Fd=function(b,a,c){this.value=b;this.names=a;this.uniformNames=this.names.map(function(b){return"u_"+b});this.type=c;this.maxValue=-1/0};Fd.prototype.defines=function(){return this.names.map(function(b){return"#define HAS_UNIFORM_u_"+b})};Fd.prototype.setConstantPatternPositions=function(){};Fd.prototype.populatePaintArray=function(){};Fd.prototype.updatePaintArray=function(){};
Fd.prototype.upload=function(){};Fd.prototype.destroy=function(){};Fd.prototype.setUniforms=function(b,a,c,d){a.set(d.constantOr(this.value))};Fd.prototype.getBinding=function(b,a){return"color"===this.type?new Cf(b,a):new Ne(b,a)};Fd.serialize=function(b){var a=b.names,c=b.type;return{value:Pc(b.value),names:a,type:c}};Fd.deserialize=function(b){var a=b.names,c=b.type;return new Fd(Qc(b.value),a,c)};var Gc=function(b,a,c){this.value=b;this.names=a;this.uniformNames=this.names.map(function(b){return"u_"+
b});this.type=c;this.maxValue=-1/0;this.patternPositions={patternTo:null,patternFrom:null}};Gc.prototype.defines=function(){return this.names.map(function(b){return"#define HAS_UNIFORM_u_"+b})};Gc.prototype.populatePaintArray=function(){};Gc.prototype.updatePaintArray=function(){};Gc.prototype.upload=function(){};Gc.prototype.destroy=function(){};Gc.prototype.setConstantPatternPositions=function(b,a){this.patternPositions.patternTo=b.tlbr;this.patternPositions.patternFrom=a.tlbr};Gc.prototype.setUniforms=
function(b,a,c,d,e){b=this.patternPositions;"u_pattern_to"===e&&b.patternTo&&a.set(b.patternTo);"u_pattern_from"===e&&b.patternFrom&&a.set(b.patternFrom)};Gc.prototype.getBinding=function(b,a){return new yg(b,a)};var Hc=function(b,a,c,d){this.expression=b;this.names=a;this.type=c;this.uniformNames=this.names.map(function(b){return"a_"+b});this.maxValue=-1/0;this.paintVertexAttributes=a.map(function(b){return{name:"a_"+b,type:"Float32",components:"color"===c?2:1,offset:0}});this.paintVertexArray=new d};
Hc.prototype.defines=function(){return[]};Hc.prototype.setConstantPatternPositions=function(){};Hc.prototype.populatePaintArray=function(b,a,c,d){c=this.paintVertexArray;var e=c.length;c.reserve(b);a=this.expression.evaluate(new yb(0),a,{},d);if("color"===this.type)for(a=oe(a);e<b;e++)c.emplaceBack(a[0],a[1]);else{for(;e<b;e++)c.emplaceBack(a);this.maxValue=Math.max(this.maxValue,a)}};Hc.prototype.updatePaintArray=function(b,a,c,d){var e=this.paintVertexArray;c=this.expression.evaluate({zoom:0},c,
d);if("color"===this.type)for(c=oe(c);b<a;b++)e.emplace(b,c[0],c[1]);else{for(;b<a;b++)e.emplace(b,c);this.maxValue=Math.max(this.maxValue,c)}};Hc.prototype.upload=function(b){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=b.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))};Hc.prototype.destroy=function(){this.paintVertexBuffer&&
this.paintVertexBuffer.destroy()};Hc.prototype.setUniforms=function(b,a){a.set(0)};Hc.prototype.getBinding=function(b,a){return new Ne(b,a)};var bd=function(b,a,c,d,e,f){this.expression=b;this.names=a;this.uniformNames=this.names.map(function(b){return"u_"+b+"_t"});this.type=c;this.useIntegerZoom=d;this.zoom=e;this.maxValue=-1/0;this.paintVertexAttributes=a.map(function(b){return{name:"a_"+b,type:"Float32",components:"color"===c?4:2,offset:0}});this.paintVertexArray=new f};bd.prototype.defines=function(){return[]};
bd.prototype.setConstantPatternPositions=function(){};bd.prototype.populatePaintArray=function(b,a,c,d){c=this.paintVertexArray;var e=c.length;c.reserve(b);var f=this.expression.evaluate(new yb(this.zoom),a,{},d);a=this.expression.evaluate(new yb(this.zoom+1),a,{},d);if("color"===this.type)for(f=oe(f),a=oe(a);e<b;e++)c.emplaceBack(f[0],f[1],a[0],a[1]);else{for(;e<b;e++)c.emplaceBack(f,a);this.maxValue=Math.max(this.maxValue,f,a)}};bd.prototype.updatePaintArray=function(b,a,c,d){var e=this.paintVertexArray,
f=this.expression.evaluate({zoom:this.zoom},c,d);c=this.expression.evaluate({zoom:this.zoom+1},c,d);if("color"===this.type)for(f=oe(f),c=oe(c);b<a;b++)e.emplace(b,f[0],f[1],c[0],c[1]);else{for(;b<a;b++)e.emplace(b,f,c);this.maxValue=Math.max(this.maxValue,f,c)}};bd.prototype.upload=function(b){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=b.createVertexBuffer(this.paintVertexArray,
this.paintVertexAttributes,this.expression.isStateDependent))};bd.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};bd.prototype.interpolationFactor=function(b){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(b),this.zoom,this.zoom+1):this.expression.interpolationFactor(b,this.zoom,this.zoom+1)};bd.prototype.setUniforms=function(b,a,c){a.set(this.interpolationFactor(c.zoom))};bd.prototype.getBinding=function(b,a){return new Ne(b,a)};var Ud=
function(b,a,c,d,e,f,g){this.expression=b;this.names=a;this.type=c;this.uniformNames=this.names.map(function(b){return"u_"+b+"_t"});this.useIntegerZoom=d;this.zoom=e;this.maxValue=-1/0;this.layerId=g;this.paintVertexAttributes=a.map(function(b){return{name:"a_"+b,type:"Uint16",components:4,offset:0}});this.zoomInPaintVertexArray=new f;this.zoomOutPaintVertexArray=new f};Ud.prototype.defines=function(){return[]};Ud.prototype.setConstantPatternPositions=function(){};Ud.prototype.populatePaintArray=
function(b,a,c){var d=this.zoomInPaintVertexArray,e=this.zoomOutPaintVertexArray,f=this.layerId,g=d.length;if(d.reserve(b),e.reserve(b),c&&a.patterns&&a.patterns[f]){var h=a.patterns[f];a=c[h.min];f=c[h.mid];c=c[h.max];if(a&&f&&c)for(;g<b;g++)d.emplaceBack(f.tl[0],f.tl[1],f.br[0],f.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1]),e.emplaceBack(f.tl[0],f.tl[1],f.br[0],f.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1])}};Ud.prototype.updatePaintArray=function(b,a,c,d,e){d=this.zoomInPaintVertexArray;var f=this.zoomOutPaintVertexArray,
g=this.layerId;if(e&&c.patterns&&c.patterns[g]){var h=c.patterns[g];c=e[h.min];g=e[h.mid];e=e[h.max];if(c&&g&&e)for(;b<a;b++)d.emplace(b,g.tl[0],g.tl[1],g.br[0],g.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1]),f.emplace(b,g.tl[0],g.tl[1],g.br[0],g.br[1],e.tl[0],e.tl[1],e.br[0],e.br[1])}};Ud.prototype.upload=function(b){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=b.createVertexBuffer(this.zoomInPaintVertexArray,
this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=b.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))};Ud.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy();this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};Ud.prototype.setUniforms=function(b,a){a.set(0)};Ud.prototype.getBinding=function(b,a){return new Ne(b,a)};var Xb=function(){this.binders=
{};this.cacheKey="";this._buffers=[];this._featureMap=new Be;this._bufferOffset=0};Xb.createDynamic=function(b,a,c){var d=new Xb,e=[],f;for(f in b.paint._values)if(c(f)){var g=b.paint.get(f);if(g instanceof Hd&&Ma(g.property.specification)){var h={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],
"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[f]||[f.replace(b.type+"-","").replace(/-/g,"_")],k=g.property.specification.type,l=g.property.useIntegerZoom;if("cross-faded"===g.property.specification["property-type"]||"cross-faded-data-driven"===g.property.specification["property-type"])if("constant"===g.value.kind)d.binders[f]=new Gc(g.value.value,
h,k),e.push("/u_"+f);else{var r=fc(f,k,"source");d.binders[f]=new Ud(g.value,h,k,l,a,r,b.id);e.push("/a_"+f)}else"constant"===g.value.kind?(d.binders[f]=new Fd(g.value.value,h,k),e.push("/u_"+f)):"source"===g.value.kind?(l=fc(f,k,"source"),d.binders[f]=new Hc(g.value,h,k,l),e.push("/a_"+f)):(r=fc(f,k,"composite"),d.binders[f]=new bd(g.value,h,k,l,a,r),e.push("/z_"+f))}}return d.cacheKey=e.sort().join(""),d};Xb.prototype.populatePaintArrays=function(b,a,c,d,e){for(var f in this.binders)this.binders[f].populatePaintArray(b,
a,d,e);void 0!==a.id&&this._featureMap.add(+a.id,c,this._bufferOffset,b);this._bufferOffset=b};Xb.prototype.setConstantPatternPositions=function(b,a){for(var c in this.binders)this.binders[c].setConstantPatternPositions(b,a)};Xb.prototype.updatePaintArrays=function(b,a,c,d){var e=!1,f;for(f in b)for(var g=0,h=this._featureMap.getPositions(+f);g<h.length;g+=1){var k=h[g],l=a.feature(k.index),r;for(r in this.binders){var t=this.binders[r];t instanceof Fd||t instanceof Gc||!0!==t.expression.isStateDependent||
(e=c.paint.get(r),t.expression=e.value,t.updatePaintArray(k.start,k.end,l,b[f],d),e=!0)}}return e};Xb.prototype.defines=function(){var b=[],a;for(a in this.binders)b.push.apply(b,this.binders[a].defines());return b};Xb.prototype.getPaintVertexBuffers=function(){return this._buffers};Xb.prototype.getUniforms=function(b,a){var c=[],d;for(d in this.binders)for(var e=this.binders[d],f=0,g=e.uniformNames;f<g.length;f+=1){var h=g[f];if(a[h]){var k=e.getBinding(b,a[h]);c.push({name:h,property:d,binding:k})}}return c};
Xb.prototype.setUniforms=function(b,a,c,d){for(var e=0;e<a.length;e+=1){var f=a[e],g=f.name,h=f.property;this.binders[h].setUniforms(b,f.binding,d,c.get(h),g)}};Xb.prototype.updatePatternPaintBuffers=function(b){var a=[],c;for(c in this.binders){var d=this.binders[c];d instanceof Ud?(d=2===b.fromScale?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer)&&a.push(d):(d instanceof Hc||d instanceof bd)&&d.paintVertexBuffer&&a.push(d.paintVertexBuffer)}this._buffers=a};Xb.prototype.upload=function(b){for(var a in this.binders)this.binders[a].upload(b);
b=[];for(var c in this.binders)a=this.binders[c],(a instanceof Hc||a instanceof bd)&&a.paintVertexBuffer&&b.push(a.paintVertexBuffer);this._buffers=b};Xb.prototype.destroy=function(){for(var b in this.binders)this.binders[b].destroy()};var kd=function(b,a,c,d){void 0===d&&(d=function(){return!0});this.programConfigurations={};for(var e=0;e<a.length;e+=1){var f=a[e];this.programConfigurations[f.id]=Xb.createDynamic(f,c,d);this.programConfigurations[f.id].layoutAttributes=b}this.needsUpload=!1};kd.prototype.populatePaintArrays=
function(b,a,c,d,e){for(var f in this.programConfigurations)this.programConfigurations[f].populatePaintArrays(b,a,c,d,e);this.needsUpload=!0};kd.prototype.updatePaintArrays=function(b,a,c,d){for(var e=0;e<c.length;e+=1){var f=c[e];this.needsUpload=this.programConfigurations[f.id].updatePaintArrays(b,a,f,d)||this.needsUpload}};kd.prototype.get=function(b){return this.programConfigurations[b]};kd.prototype.upload=function(b){if(this.needsUpload){for(var a in this.programConfigurations)this.programConfigurations[a].upload(b);
this.needsUpload=!1}};kd.prototype.destroy=function(){for(var b in this.programConfigurations)this.programConfigurations[b].destroy()};Ka("ConstantBinder",Fd);Ka("CrossFadedConstantBinder",Gc);Ka("SourceExpressionBinder",Hc);Ka("CrossFadedCompositeBinder",Ud);Ka("CompositeExpressionBinder",bd);Ka("ProgramConfiguration",Xb,{omit:["_buffers"]});Ka("ProgramConfigurationSet",kd);var te={min:-1*Math.pow(2,14),max:Math.pow(2,14)-1},$b=function(b){this.zoom=b.zoom;this.overscaling=b.overscaling;this.layers=
b.layers;this.layerIds=this.layers.map(function(b){return b.id});this.index=b.index;this.hasPattern=!1;this.layoutVertexArray=new Pf;this.indexArray=new Ze;this.segments=new Wb;this.programConfigurations=new kd(bh,b.layers,b.zoom);this.stateDependentLayerIds=this.layers.filter(function(b){return b.isStateDependent()}).map(function(b){return b.id})};$b.prototype.populate=function(b,a){var c=this.layers[0],d=[],e=null;"circle"===c.type&&(e=c.layout.get("circle-sort-key"));for(c=0;c<b.length;c+=1){var f=
b[c],g=f.feature,h=f.index;f=f.sourceLayerIndex;if(this.layers[0]._featureFilter(new yb(this.zoom),g)){var k=pe(g),l=e?e.evaluate(g,{}):void 0;d.push({id:g.id,properties:g.properties,type:g.type,sourceLayerIndex:f,index:h,geometry:k,patterns:{},sortKey:l})}}e&&d.sort(function(b,a){return b.sortKey-a.sortKey});for(e=0;e<d.length;e+=1)f=c=d[e],g=f.geometry,h=f.index,f=f.sourceLayerIndex,k=b[h].feature,this.addFeature(c,g,h),a.featureIndex.insert(k,g,h,f,this.index)};$b.prototype.update=function(b,a,
c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(b,a,this.stateDependentLayers,c)};$b.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};$b.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};$b.prototype.upload=function(b){this.uploaded||(this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,bh),this.indexBuffer=b.createIndexBuffer(this.indexArray));this.programConfigurations.upload(b);
this.uploaded=!0};$b.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};$b.prototype.addFeature=function(b,a,c){for(var d=0;d<a.length;d+=1)for(var e=0,f=a[d];e<f.length;e+=1){var g=f[e],h=g.x;g=g.y;if(!(0>h||8192<=h||0>g||8192<=g)){var k=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,b.sortKey),l=k.vertexLength;va(this.layoutVertexArray,h,g,-1,-1);
va(this.layoutVertexArray,h,g,1,-1);va(this.layoutVertexArray,h,g,1,1);va(this.layoutVertexArray,h,g,-1,1);this.indexArray.emplaceBack(l,l+1,l+2);this.indexArray.emplaceBack(l,l+3,l+2);k.vertexLength+=4;k.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,b,c,{})};Ka("CircleBucket",$b,{omit:["layers"]});var zg=new rb({"circle-sort-key":new Va(ta.layout_circle["circle-sort-key"])}),ue={paint:new rb({"circle-radius":new Va(ta.paint_circle["circle-radius"]),
"circle-color":new Va(ta.paint_circle["circle-color"]),"circle-blur":new Va(ta.paint_circle["circle-blur"]),"circle-opacity":new Va(ta.paint_circle["circle-opacity"]),"circle-translate":new Qa(ta.paint_circle["circle-translate"]),"circle-translate-anchor":new Qa(ta.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Qa(ta.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Qa(ta.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Va(ta.paint_circle["circle-stroke-width"]),
"circle-stroke-color":new Va(ta.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Va(ta.paint_circle["circle-stroke-opacity"])}),layout:zg},Cd="undefined"!=typeof Float32Array?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var b=arguments,a=0,c=arguments.length;c--;)a+=b[c]*b[c];return Math.sqrt(a)});var ai=new Cd(3);Cd!=Float32Array&&(ai[0]=0,ai[1]=0,ai[2]=0);!function(){var b=new Cd(4);Cd!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0,b[3]=0)}();var $h=function(b){function a(a){b.call(this,
a,ue)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.createBucket=function(b){return new $b(b)},a.prototype.queryRadius=function(b){return wd("circle-radius",this,b)+wd("circle-stroke-width",this,b)+hb(this.paint.get("circle-translate"))},a.prototype.queryIntersectsFeature=function(b,a,c,d,e,f,g,h){b=nb(b,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),f.angle,g);e=this.paint.get("circle-radius").evaluate(a,c)+
this.paint.get("circle-stroke-width").evaluate(a,c);c=(a="map"===this.paint.get("circle-pitch-alignment"))?b:function(b,a){return b.map(function(b){return Ic(b,a)})}(b,h);g=a?e*g:e;for(b=0;b<d.length;b+=1){e=0;for(var k=d[b];e<k.length;e+=1){var l=k[e],r=a?l:Ic(l,h),t=g;l=se([],[l.x,l.y,0,1],h);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?t*=l[3]/f.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&
(t*=f.cameraToCenterDistance/l[3]),Ta(c,r,t))return!0}}return!1},a}(Ra),Ch=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a}($b);Ka("HeatmapBucket",Ch,{omit:["layers"]});var ze=function(b,a){Od(this,b,1,a)};ze.prototype.resize=function(b){wc(this,b,1)};ze.prototype.clone=function(){return new ze({width:this.width,height:this.height},new Uint8Array(this.data))};ze.copy=function(b,a,c,d,e){Jc(b,a,c,d,e,1)};
var Lc=function(b,a){Od(this,b,4,a)};Lc.prototype.resize=function(b){wc(this,b,4)};Lc.prototype.replace=function(b,a){a?this.data.set(b):b instanceof Uint8ClampedArray?this.data=new Uint8Array(b.buffer):this.data=b};Lc.prototype.clone=function(){return new Lc({width:this.width,height:this.height},new Uint8Array(this.data))};Lc.copy=function(b,a,c,d,e){Jc(b,a,c,d,e,4)};Ka("AlphaImage",ze);Ka("RGBAImage",Lc);var Ff={paint:new rb({"heatmap-radius":new Va(ta.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Va(ta.paint_heatmap["heatmap-weight"]),
"heatmap-intensity":new Qa(ta.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Uh(ta.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Qa(ta.paint_heatmap["heatmap-opacity"])})},yd=function(b){function a(a){b.call(this,a,Ff);this._updateColorRamp()}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.createBucket=function(b){return new Ch(b)},a.prototype._handleSpecialPaintPropertyUpdate=function(b){"heatmap-color"===b&&this._updateColorRamp()},
a.prototype._updateColorRamp=function(){this.colorRamp=pc(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity");this.colorRampTexture=null},a.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},a.prototype.queryRadius=function(){return 0},a.prototype.queryIntersectsFeature=function(){return!1},a.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},a}(Ra),Gf={paint:new rb({"hillshade-illumination-direction":new Qa(ta.paint_hillshade["hillshade-illumination-direction"]),
"hillshade-illumination-anchor":new Qa(ta.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Qa(ta.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Qa(ta.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Qa(ta.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Qa(ta.paint_hillshade["hillshade-accent-color"])})},Dh=function(b){function a(a){b.call(this,a,Gf)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&
b.prototype),a.prototype.constructor=a,a.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},a}(Ra),sf=fb([{name:"a_pos",components:2,type:"Int16"}],4).members;Db.deviation=function(b,a,c,d){var e=a&&a.length,f=Math.abs(Pd(b,0,e?a[0]*c:b.length,c));if(e){e=0;for(var g=a.length;e<g;e++)f-=Math.abs(Pd(b,a[e]*c,e<g-1?a[e+1]*c:b.length,c))}for(e=a=0;e<d.length;e+=3){g=d[e]*c;var h=d[e+1]*c,k=d[e+2]*c;a+=Math.abs((b[g]-b[k])*(b[h+1]-b[g+
1])-(b[g]-b[h])*(b[k+1]-b[g+1]))}return 0===f&&0===a?0:Math.abs((a-f)/f)};Db.flatten=function(b){for(var a=b[0][0].length,c={vertices:[],holes:[],dimensions:a},d=0,e=0;e<b.length;e++){for(var f=0;f<b[e].length;f++)for(var g=0;g<a;g++)c.vertices.push(b[e][f][g]);0<e&&(d+=b[e-1].length,c.holes.push(d))}return c};Db.default=Db;var od=function(b){this.zoom=b.zoom;this.overscaling=b.overscaling;this.layers=b.layers;this.layerIds=this.layers.map(function(b){return b.id});this.index=b.index;this.hasPattern=
!1;this.patternFeatures=[];this.layoutVertexArray=new Pf;this.indexArray=new Ze;this.indexArray2=new ng;this.programConfigurations=new kd(sf,b.layers,b.zoom);this.segments=new Wb;this.segments2=new Wb;this.stateDependentLayerIds=this.layers.filter(function(b){return b.isStateDependent()}).map(function(b){return b.id})};od.prototype.populate=function(b,a){this.hasPattern=ld("fill",this.layers,a);for(var c=this.layers[0].layout.get("fill-sort-key"),d=[],e=0;e<b.length;e+=1){var f=b[e],g=f.feature,h=
f.index;f=f.sourceLayerIndex;if(this.layers[0]._featureFilter(new yb(this.zoom),g)){var k=pe(g),l=c?c.evaluate(g,{}):void 0;d.push({id:g.id,properties:g.properties,type:g.type,sourceLayerIndex:f,index:h,geometry:k,patterns:{},sortKey:l})}}c&&d.sort(function(b,a){return b.sortKey-a.sortKey});for(c=0;c<d.length;c+=1)f=h=d[c],e=f.geometry,g=f.index,f=f.sourceLayerIndex,this.hasPattern?(h=Hf("fill",this.layers,h,this.zoom,a),this.patternFeatures.push(h)):this.addFeature(h,e,g,{}),a.featureIndex.insert(b[g].feature,
e,g,f,this.index)};od.prototype.update=function(b,a,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(b,a,this.stateDependentLayers,c)};od.prototype.addFeatures=function(b,a){b=0;for(var c=this.patternFeatures;b<c.length;b+=1){var d=c[b];this.addFeature(d,d.geometry,d.index,a)}};od.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};od.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};od.prototype.upload=
function(b){this.uploaded||(this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,sf),this.indexBuffer=b.createIndexBuffer(this.indexArray),this.indexBuffer2=b.createIndexBuffer(this.indexArray2));this.programConfigurations.upload(b);this.uploaded=!0};od.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())};
od.prototype.addFeature=function(b,a,c,d){var e=0;for(a=Re(a,500);e<a.length;e+=1){for(var f=a[e],g=0,h=0,k=f;h<k.length;h+=1)g+=k[h].length;h=this.segments.prepareSegment(g,this.layoutVertexArray,this.indexArray);k=h.vertexLength;for(var l=[],r=[],t=0,m=f;t<m.length;t+=1){var u=m[t];if(0!==u.length){u!==f[0]&&r.push(l.length/2);var n=this.segments2.prepareSegment(u.length,this.layoutVertexArray,this.indexArray2),v=n.vertexLength;this.layoutVertexArray.emplaceBack(u[0].x,u[0].y);this.indexArray2.emplaceBack(v+
u.length-1,v);l.push(u[0].x);l.push(u[0].y);for(var w=1;w<u.length;w++)this.layoutVertexArray.emplaceBack(u[w].x,u[w].y),this.indexArray2.emplaceBack(v+w-1,v+w),l.push(u[w].x),l.push(u[w].y);n.vertexLength+=u.length;n.primitiveLength+=u.length}}f=Db(l,r);for(l=0;l<f.length;l+=3)this.indexArray.emplaceBack(k+f[l],k+f[l+1],k+f[l+2]);h.vertexLength+=g;h.primitiveLength+=f.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,b,c,d)};Ka("FillBucket",od,{omit:["layers",
"patternFeatures"]});var Gh=new rb({"fill-sort-key":new Va(ta.layout_fill["fill-sort-key"])}),kc={paint:new rb({"fill-antialias":new Qa(ta.paint_fill["fill-antialias"]),"fill-opacity":new Va(ta.paint_fill["fill-opacity"]),"fill-color":new Va(ta.paint_fill["fill-color"]),"fill-outline-color":new Va(ta.paint_fill["fill-outline-color"]),"fill-translate":new Qa(ta.paint_fill["fill-translate"]),"fill-translate-anchor":new Qa(ta.paint_fill["fill-translate-anchor"]),"fill-pattern":new Wa(ta.paint_fill["fill-pattern"])}),
layout:Gh},Cg=function(b){function a(a){b.call(this,a,kc)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.recalculate=function(a){b.prototype.recalculate.call(this,a);a=this.paint._values["fill-outline-color"];"constant"===a.value.kind&&void 0===a.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},a.prototype.createBucket=function(b){return new od(b)},a.prototype.queryRadius=function(){return hb(this.paint.get("fill-translate"))},
a.prototype.queryIntersectsFeature=function(b,a,c,d,e,f,g){return Fa(nb(b,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),f.angle,g),d)},a.prototype.isTileClipped=function(){return!0},a}(Ra),yi=fb([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members;xe.types=["Unknown","Point","LineString","Polygon"];xe.prototype.loadGeometry=function(){var b=this._pbf;b.pos=this._geometry;for(var a,c=b.readVarint()+b.pos,d=1,e=0,f=0,g=0,h=[];b.pos<
c;)if(0>=e&&(e=b.readVarint(),d=7&e,e>>=3),e--,1===d||2===d)f+=b.readSVarint(),g+=b.readSVarint(),1===d&&(a&&h.push(a),a=[]),a.push(new Sa(f,g));else{if(7!==d)throw Error("unknown command "+d);a&&a.push(a[0].clone())}return a&&h.push(a),h};xe.prototype.bbox=function(){var b=this._pbf;b.pos=this._geometry;for(var a=b.readVarint()+b.pos,c=1,d=0,e=0,f=0,g=1/0,h=-1/0,k=1/0,l=-1/0;b.pos<a;)if(0>=d&&(d=b.readVarint(),c=7&d,d>>=3),d--,1===c||2===c)(e+=b.readSVarint())<g&&(g=e),e>h&&(h=e),(f+=b.readSVarint())<
k&&(k=f),f>l&&(l=f);else if(7!==c)throw Error("unknown command "+c);return[g,k,h,l]};xe.prototype.toGeoJSON=function(b,a,c){function d(b){for(var a=0;a<b.length;a++){var c=b[a];b[a]=[360*(c.x+f)/e-180,360/Math.PI*Math.atan(Math.exp((180-360*(c.y+g)/e)*Math.PI/180))-90]}}var e=this.extent*Math.pow(2,c),f=this.extent*b,g=this.extent*a;a=this.loadGeometry();c=xe.types[this.type];switch(this.type){case 1:var h=[];for(b=0;b<a.length;b++)h[b]=a[b][0];d(a=h);break;case 2:for(b=0;b<a.length;b++)d(a[b]);break;
case 3:for(a=function(b){var a=b.length;if(1>=a)return[b];for(var c,d,e=[],f=0;f<a;f++){var g=void 0;for(var h,k=b[f],l=0,r=0,t=k.length,m=t-1;r<t;m=r++)h=k[r],l+=((g=k[m]).x-h.x)*(h.y+g.y);g=l;0!==g&&(void 0===d&&(d=0>g),d===0>g?(c&&e.push(c),c=[b[f]]):c.push(b[f]))}c&&e.push(c);return e}(a),b=0;b<a.length;b++)for(h=0;h<a[b].length;h++)d(a[b][h])}1===a.length?a=a[0]:c="Multi"+c;b={type:"Feature",geometry:{type:c,coordinates:a},properties:this.properties};return"id"in this&&(b.id=this.id),b};var jh=
nf;nf.prototype.feature=function(b){if(0>b||b>=this._features.length)throw Error("feature index out of bounds");this._pbf.pos=this._features[b];b=this._pbf.readVarint()+this._pbf.pos;return new xe(this._pbf,b,this.extent,this._keys,this._values)};var Ih={VectorTile:function(b,a){this.layers=b.readFields(Te,{},a)},VectorTileFeature:xe,VectorTileLayer:jh},dj=Ih.VectorTileFeature.types,ph=Math.pow(2,13),Ce=function(b){this.zoom=b.zoom;this.overscaling=b.overscaling;this.layers=b.layers;this.layerIds=
this.layers.map(function(b){return b.id});this.index=b.index;this.hasPattern=!1;this.layoutVertexArray=new Wh;this.indexArray=new Ze;this.programConfigurations=new kd(yi,b.layers,b.zoom);this.segments=new Wb;this.stateDependentLayerIds=this.layers.filter(function(b){return b.isStateDependent()}).map(function(b){return b.id})};Ce.prototype.populate=function(b,a){this.features=[];this.hasPattern=ld("fill-extrusion",this.layers,a);for(var c=0;c<b.length;c+=1){var d=b[c],e=d.feature,f=d.index;d=d.sourceLayerIndex;
if(this.layers[0]._featureFilter(new yb(this.zoom),e)){var g=pe(e),h={sourceLayerIndex:d,index:f,geometry:g,properties:e.properties,type:e.type,patterns:{}};void 0!==e.id&&(h.id=e.id);this.hasPattern?this.features.push(Hf("fill-extrusion",this.layers,h,this.zoom,a)):this.addFeature(h,g,f,{});a.featureIndex.insert(e,g,f,d,this.index,!0)}}};Ce.prototype.addFeatures=function(b,a){b=0;for(var c=this.features;b<c.length;b+=1){var d=c[b];this.addFeature(d,d.geometry,d.index,a)}};Ce.prototype.update=function(b,
a,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(b,a,this.stateDependentLayers,c)};Ce.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Ce.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};Ce.prototype.upload=function(b){this.uploaded||(this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,yi),this.indexBuffer=b.createIndexBuffer(this.indexArray));this.programConfigurations.upload(b);
this.uploaded=!0};Ce.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};Ce.prototype.addFeature=function(b,a,c,d){var e=0;for(a=Re(a,500);e<a.length;e+=1){for(var f=a[e],g=0,h=0,k=f;h<k.length;h+=1)g+=k[h].length;h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);k=0;for(var l=f;k<l.length;k+=1){var r=l[k];if(0!==r.length&&!ag(r))for(var t=0,m=0;m<r.length;m++){var u=
r[m];if(1<=m){var n=r[m-1];if(!(u.x===n.x&&(0>u.x||8192<u.x)||u.y===n.y&&(0>u.y||8192<u.y))){h.vertexLength+4>Wb.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var v=u.sub(n)._perp()._unit(),w=n.dist(u);32768<t+w&&(t=0);Ad(this.layoutVertexArray,u.x,u.y,v.x,v.y,0,0,t);Ad(this.layoutVertexArray,u.x,u.y,v.x,v.y,0,1,t);t+=w;Ad(this.layoutVertexArray,n.x,n.y,v.x,v.y,0,0,t);Ad(this.layoutVertexArray,n.x,n.y,v.x,v.y,0,1,t);u=h.vertexLength;this.indexArray.emplaceBack(u,
u+2,u+1);this.indexArray.emplaceBack(u+1,u+2,u+3);h.vertexLength+=4;h.primitiveLength+=2}}}}if(h.vertexLength+g>Wb.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(g,this.layoutVertexArray,this.indexArray)),"Polygon"===dj[b.type]){l=[];r=[];k=h.vertexLength;t=0;for(m=f;t<m.length;t+=1)if(u=m[t],0!==u.length)for(u!==f[0]&&r.push(l.length/2),n=0;n<u.length;n++)v=u[n],Ad(this.layoutVertexArray,v.x,v.y,0,0,1,1,0),l.push(v.x),l.push(v.y);f=Db(l,r);for(l=0;l<f.length;l+=3)this.indexArray.emplaceBack(k+
f[l],k+f[l+2],k+f[l+1]);h.primitiveLength+=f.length/3;h.vertexLength+=g}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,b,c,d)};Ka("FillExtrusionBucket",Ce,{omit:["layers","features"]});var Mi={paint:new rb({"fill-extrusion-opacity":new Qa(ta["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Va(ta["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Qa(ta["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Qa(ta["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),
"fill-extrusion-pattern":new Wa(ta["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Va(ta["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Va(ta["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Qa(ta["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},ti=function(b){function a(a){b.call(this,a,Mi)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.createBucket=
function(b){return new Ce(b)},a.prototype.queryRadius=function(){return hb(this.paint.get("fill-extrusion-translate"))},a.prototype.is3D=function(){return!0},a.prototype.queryIntersectsFeature=function(b,a,c,d,e,f,g,h){e=nb(b,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),f.angle,g);b=this.paint.get("fill-extrusion-height").evaluate(a,c);a=this.paint.get("fill-extrusion-base").evaluate(a,c);c=function(b,a,c,d){c=[];for(var e=0;e<b.length;e+=1){var f=b[e];
f=[f.x,f.y,d,1];se(f,f,a);c.push(new Sa(f[0]/f[3],f[1]/f[3]))}return c}(e,h,0,0);d=function(b,a,c,d){var e=[],f=[],g=d[8]*a,h=d[9]*a,k=d[10]*a;a*=d[11];var l=d[8]*c,r=d[9]*c,t=d[10]*c;c*=d[11];for(var m=0;m<b.length;m+=1){for(var u=[],n=[],v=0,w=b[m];v<w.length;v+=1){var z=w[v],x=z.x,A=z.y;z=d[0]*x+d[4]*A+d[12];var y=d[1]*x+d[5]*A+d[13],B=d[2]*x+d[6]*A+d[14],p=d[3]*x+d[7]*A+d[15];x=B+k;A=p+a;var q=z+l,C=y+r;B+=t;p+=c;z=new Sa((z+g)/A,(y+h)/A);z.z=x/A;u.push(z);z=new Sa(q/p,C/p);z.z=B/p;n.push(z)}e.push(u);
f.push(n)}return[e,f]}(d,a,b,h);return function(b,a,c){var d=1/0;Fa(c,a)&&(d=bg(c,a[0]));for(var e=0;e<a.length;e++)for(var f=a[e],g=b[e],h=0;h<f.length-1;h++){var k=f[h];k=[k,f[h+1],g[h+1],g[h],k];qe(c,k)&&(d=Math.min(d,bg(c,k)))}return d!==1/0&&d}(d[0],d[1],c)},a}(Ra),eh=fb([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Ag=Ih.VectorTileFeature.types,zd=Math.cos(Math.PI/180*37.5),mf=Math.pow(2,14)/.5,Tc=function(b){this.zoom=b.zoom;this.overscaling=
b.overscaling;this.layers=b.layers;this.layerIds=this.layers.map(function(b){return b.id});this.index=b.index;this.hasPattern=!1;this.patternFeatures=[];this.layoutVertexArray=new Xh;this.indexArray=new Ze;this.programConfigurations=new kd(eh,b.layers,b.zoom);this.segments=new Wb;this.stateDependentLayerIds=this.layers.filter(function(b){return b.isStateDependent()}).map(function(b){return b.id})};Tc.prototype.populate=function(b,a){this.hasPattern=ld("line",this.layers,a);for(var c=this.layers[0].layout.get("line-sort-key"),
d=[],e=0;e<b.length;e+=1){var f=b[e],g=f.feature,h=f.index;f=f.sourceLayerIndex;if(this.layers[0]._featureFilter(new yb(this.zoom),g)){var k=pe(g),l=c?c.evaluate(g,{}):void 0;d.push({id:g.id,properties:g.properties,type:g.type,sourceLayerIndex:f,index:h,geometry:k,patterns:{},sortKey:l})}}c&&d.sort(function(b,a){return b.sortKey-a.sortKey});for(c=0;c<d.length;c+=1)f=h=d[c],e=f.geometry,g=f.index,f=f.sourceLayerIndex,this.hasPattern?(h=Hf("line",this.layers,h,this.zoom,a),this.patternFeatures.push(h)):
this.addFeature(h,e,g,{}),a.featureIndex.insert(b[g].feature,e,g,f,this.index)};Tc.prototype.update=function(b,a,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(b,a,this.stateDependentLayers,c)};Tc.prototype.addFeatures=function(b,a){b=0;for(var c=this.patternFeatures;b<c.length;b+=1){var d=c[b];this.addFeature(d,d.geometry,d.index,a)}};Tc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Tc.prototype.uploadPending=function(){return!this.uploaded||
this.programConfigurations.needsUpload};Tc.prototype.upload=function(b){this.uploaded||(this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,eh),this.indexBuffer=b.createIndexBuffer(this.indexArray));this.programConfigurations.upload(b);this.uploaded=!0};Tc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};Tc.prototype.addFeature=function(b,a,c,d){var e=this.layers[0].layout,
f=e.get("line-join").evaluate(b,{}),g=e.get("line-cap"),h=e.get("line-miter-limit");e=e.get("line-round-limit");for(var k=0;k<a.length;k+=1)this.addLine(a[k],b,f,g,h,e,c,d)};Tc.prototype.addLine=function(b,a,c,d,e,f,g,h){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,a.properties&&a.properties.hasOwnProperty("mapbox_clip_start")&&a.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+a.properties.mapbox_clip_start;this.clipEnd=+a.properties.mapbox_clip_end;for(var k=0;k<b.length-
1;k++)this.totalDistance+=b[k].dist(b[k+1])}k="Polygon"===Ag[a.type];for(var l=b.length;2<=l&&b[l-1].equals(b[l-2]);)l--;for(var r=0;r<l-1&&b[r].equals(b[r+1]);)r++;if(!(l<(k?3:2))){"bevel"===c&&(e=1.05);var t,m=8192/(512*this.overscaling)*15,u=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray),n=void 0,v=void 0,w=void 0,z=void 0;this.e1=this.e2=-1;k&&(t=b[l-2],z=b[r].sub(t)._unit()._perp());for(var x=r;x<l;x++)if(!(v=k&&x===l-1?b[r+1]:b[x+1])||!b[x].equals(v)){z&&(w=z);t&&
(n=t);t=b[x];z=v?v.sub(t)._unit()._perp():w;var A=(w=w||z).add(z);0===A.x&&0===A.y||A._unit();var y=w.x*z.x+w.y*z.y,B=A.x*z.x+A.y*z.y,p=0!==B?1/B:1/0,q=2*Math.sqrt(2-2*B);B=B<zd&&n&&v;var C=0<w.x*z.y-w.y*z.x;if(B&&x>r){var D=t.dist(n);D>2*m&&(D=t.sub(t.sub(n)._mult(m/D)._round()),this.updateDistance(n,D),this.addCurrentVertex(D,w,0,0,u),n=D)}var I=n&&v;D=I?c:k?"butt":d;if(I&&"round"===D&&(p<f?D="miter":2>=p&&(D="fakeround")),"miter"===D&&p>e&&(D="bevel"),"bevel"===D&&(2<p&&(D="flipbevel"),p<e&&(D=
"miter")),n&&this.updateDistance(n,t),"miter"===D)A._mult(p),this.addCurrentVertex(t,A,0,0,u);else if("flipbevel"===D)100<p?A=z.mult(-1):(y=p*w.add(z).mag()/w.sub(z).mag(),A._perp()._mult(y*(C?-1:1))),this.addCurrentVertex(t,A,0,0,u),this.addCurrentVertex(t,A.mult(-1),0,0,u);else if("bevel"===D||"fakeround"===D){p=-Math.sqrt(p*p-1);A=C?p:0;p=C?0:p;if(n&&this.addCurrentVertex(t,w,A,p,u),"fakeround"===D)for(q=Math.round(180*q/Math.PI/20),D=1;D<q;D++){I=D/q;if(.5!==I){var E=I-.5;I+=I*E*(I-1)*((1.0904+
y*(y*(3.55645-1.43519*y)-3.2452))*E*E+(.848013+y*(.215638*y-1.06021)))}I=z.sub(w)._mult(I)._add(w)._unit()._mult(C?-1:1);this.addHalfVertex(t,I.x,I.y,!1,C,0,u)}v&&this.addCurrentVertex(t,z,-A,-p,u)}else"butt"===D?this.addCurrentVertex(t,A,0,0,u):"square"===D?(y=n?1:-1,this.addCurrentVertex(t,A,y,y,u)):"round"===D&&(n&&(this.addCurrentVertex(t,w,0,0,u),this.addCurrentVertex(t,w,1,1,u,!0)),v&&(this.addCurrentVertex(t,z,-1,-1,u,!0),this.addCurrentVertex(t,z,0,0,u)));B&&x<l-1&&(B=t.dist(v),B>2*m&&(B=
t.add(v.sub(t)._mult(m/B)._round()),this.updateDistance(t,B),this.addCurrentVertex(B,z,0,0,u),t=B))}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,g,h)}};Tc.prototype.addCurrentVertex=function(b,a,c,d,e,f){void 0===f&&(f=!1);var g=-a.x+a.y*d,h=-a.y-a.x*d;this.addHalfVertex(b,a.x+a.y*c,a.y-a.x*c,f,!1,c,e);this.addHalfVertex(b,g,h,f,!0,-d,e);this.distance>mf/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(b,a,c,d,e,f))};Tc.prototype.addHalfVertex=function(b,
a,c,d,e,f,g){var h=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((b.x<<1)+(d?1:0),(b.y<<1)+(e?1:0),Math.round(63*a)+128,Math.round(63*c)+128,1+(0===f?0:0>f?-1:1)|(63&h)<<2,h>>6);b=g.vertexLength++;0<=this.e1&&0<=this.e2&&(this.indexArray.emplaceBack(this.e1,this.e2,b),g.primitiveLength++);e?this.e2=b:this.e1=b};Tc.prototype.updateDistance=function(b,a){this.distance+=b.dist(a);this.scaledDistance=0<this.totalDistance?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*
(mf-1):this.distance};Ka("LineBucket",Tc,{omit:["layers","patternFeatures"]});var Rd=new rb({"line-cap":new Qa(ta.layout_line["line-cap"]),"line-join":new Va(ta.layout_line["line-join"]),"line-miter-limit":new Qa(ta.layout_line["line-miter-limit"]),"line-round-limit":new Qa(ta.layout_line["line-round-limit"]),"line-sort-key":new Va(ta.layout_line["line-sort-key"])}),gh={paint:new rb({"line-opacity":new Va(ta.paint_line["line-opacity"]),"line-color":new Va(ta.paint_line["line-color"]),"line-translate":new Qa(ta.paint_line["line-translate"]),
"line-translate-anchor":new Qa(ta.paint_line["line-translate-anchor"]),"line-width":new Va(ta.paint_line["line-width"]),"line-gap-width":new Va(ta.paint_line["line-gap-width"]),"line-offset":new Va(ta.paint_line["line-offset"]),"line-blur":new Va(ta.paint_line["line-blur"]),"line-dasharray":new fd(ta.paint_line["line-dasharray"]),"line-pattern":new Wa(ta.paint_line["line-pattern"]),"line-gradient":new Uh(ta.paint_line["line-gradient"])}),layout:Rd},Fh=new (function(b){function a(){b.apply(this,arguments)}
return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.possiblyEvaluate=function(a,c){return c=new yb(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),b.prototype.possiblyEvaluate.call(this,a,c)},a.prototype.evaluate=function(a,c,d,e){return c=r({},c,{zoom:Math.floor(c.zoom)}),b.prototype.evaluate.call(this,a,c,d,e)},a}(Va))(gh.paint.properties["line-width"].specification);Fh.useIntegerZoom=
!0;var If=function(b){function a(a){b.call(this,a,gh)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._handleSpecialPaintPropertyUpdate=function(b){"line-gradient"===b&&this._updateGradient()},a.prototype._updateGradient=function(){this.gradient=pc(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress");this.gradientTexture=null},a.prototype.recalculate=function(a){b.prototype.recalculate.call(this,a);this.paint._values["line-floorwidth"]=
Fh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)},a.prototype.createBucket=function(b){return new Tc(b)},a.prototype.queryRadius=function(b){var a=Bd(wd("line-width",this,b),wd("line-gap-width",this,b));b=wd("line-offset",this,b);return a/2+Math.abs(b)+hb(this.paint.get("line-translate"))},a.prototype.queryIntersectsFeature=function(b,a,c,d,e,f,g){b=nb(b,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),f.angle,g);e=g/2*Bd(this.paint.get("line-width").evaluate(a,
c),this.paint.get("line-gap-width").evaluate(a,c));a=this.paint.get("line-offset").evaluate(a,c);return a&&(d=function(b,a){for(var c=[],d=new Sa(0,0),e=0;e<b.length;e++){for(var f=b[e],g=[],h=0;h<f.length;h++){var k=f[h-1],l=f[h],r=f[h+1];k=0===h?d:l.sub(k)._unit()._perp();r=h===f.length-1?d:r.sub(l)._unit()._perp();k=k._add(r)._unit();k._mult(1/(k.x*r.x+k.y*r.y));g.push(k._mult(a)._add(l))}c.push(g)}return c}(d,a*g)),function(b,a,c){for(var d=0;d<a.length;d++){var e=a[d];if(3<=b.length)for(var f=
0;f<e.length;f++)if(Zb(b,e[f]))return!0;a:{f=b;var g=c;if(1<f.length){if(oc(f,e)){f=!0;break a}for(var h=0;h<e.length;h++)if(kb(e[h],f,g)){f=!0;break a}}for(h=0;h<f.length;h++)if(kb(f[h],e,g)){f=!0;break a}f=!1}if(f)return!0}return!1}(b,d,e)},a.prototype.isTileClipped=function(){return!0},a}(Ra),hh=fb([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),bi=fb([{name:"a_projected_pos",components:3,type:"Float32"}],4),Se=(fb([{name:"a_fade_opacity",components:1,
type:"Uint32"}],4),fb([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),fh=(fb([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),fb([{name:"a_pos",components:2,
type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),ci=fb([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);fb([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},
{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"}]);fb([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},
{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},
{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"radialTextOffset"}]);fb([{type:"Float32",name:"offsetX"}]);fb([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Eh={"!":"","#":"",$:"","%":"","\x26":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","\x3c":"","\x3d":"","\x3e":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"",
"~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Kc={horizontal:1,vertical:2,horizontalOnly:3},gc=function(){this.text=
"";this.sectionIndex=[];this.sections=[]};gc.fromFeature=function(b,a){for(var c=new gc,d=0;d<b.sections.length;d++){var e=b.sections[d];c.sections.push({scale:e.scale||1,fontStack:e.fontStack||a});c.text+=e.text;for(var f=0;f<e.text.length;f++)c.sectionIndex.push(d)}return c};gc.prototype.length=function(){return this.text.length};gc.prototype.getSection=function(b){return this.sections[this.sectionIndex[b]]};gc.prototype.getSectionIndex=function(b){return this.sectionIndex[b]};gc.prototype.getCharCode=
function(b){return this.text.charCodeAt(b)};gc.prototype.verticalizePunctuation=function(){for(var b=this.text,a="",c=0;c<b.length;c++){var d=b.charCodeAt(c+1)||null,e=b.charCodeAt(c-1)||null;d&&Vb(d)&&!Eh[b[c+1]]||e&&Vb(e)&&!Eh[b[c-1]]||!Eh[b[c]]?a+=b[c]:a+=Eh[b[c]]}this.text=a};gc.prototype.trim=function(){for(var b=0,a=0;a<this.text.length&&ae[this.text.charCodeAt(a)];a++)b++;a=this.text.length;for(var c=this.text.length-1;0<=c&&c>=b&&ae[this.text.charCodeAt(c)];c--)a--;this.text=this.text.substring(b,
a);this.sectionIndex=this.sectionIndex.slice(b,a)};gc.prototype.substring=function(b,a){var c=new gc;return c.text=this.text.substring(b,a),c.sectionIndex=this.sectionIndex.slice(b,a),c.sections=this.sections,c};gc.prototype.toString=function(){return this.text};gc.prototype.getMaxScale=function(){var b=this;return this.sectionIndex.reduce(function(a,c){return Math.max(a,b.sections[c].scale)},0)};var ae={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Kf={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,
183:!0,8203:!0,8208:!0,8211:!0,8231:!0},cg=function(b){function a(a,c,d,e){b.call(this,a,c);this.angle=d;void 0!==e&&(this.segment=e)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.clone=function(){return new a(this.x,this.y,this.angle,this.segment)},a}(Sa);Ka("Anchor",cg);var Rb=Object.freeze({getSizeData:Eg,evaluateSizeForFeature:Ue,evaluateSizeForZoom:Sd,SIZE_PACK_FACTOR:256}),Vi=Ih.VectorTileFeature.types,Lg=[{name:"a_fade_opacity",components:1,
type:"Uint8",offset:0}],Of=function(b){this.layoutVertexArray=new si;this.indexArray=new Ze;this.programConfigurations=b;this.segments=new Wb;this.dynamicLayoutVertexArray=new Wg;this.opacityVertexArray=new Vg;this.placedSymbolArray=new hi};Of.prototype.upload=function(b,a,c,d){c&&(this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,hh.members),this.indexBuffer=b.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=b.createVertexBuffer(this.dynamicLayoutVertexArray,
bi.members,!0),this.opacityVertexBuffer=b.createVertexBuffer(this.opacityVertexArray,Lg,!0),this.opacityVertexBuffer.itemSize=1);(c||d)&&this.programConfigurations.upload(b)};Of.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())};Ka("SymbolBuffers",Of);var oh=function(b,a,c){this.layoutVertexArray=
new b;this.layoutAttributes=a;this.indexArray=new c;this.segments=new Wb;this.collisionVertexArray=new Xg};oh.prototype.upload=function(b){this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes);this.indexBuffer=b.createIndexBuffer(this.indexArray);this.collisionVertexBuffer=b.createVertexBuffer(this.collisionVertexArray,Se.members,!0)};oh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),
this.collisionVertexBuffer.destroy())};Ka("CollisionBuffers",oh);var Kb=function(b){this.collisionBoxArray=b.collisionBoxArray;this.zoom=b.zoom;this.overscaling=b.overscaling;this.layers=b.layers;this.layerIds=this.layers.map(function(b){return b.id});this.index=b.index;this.pixelRatio=b.pixelRatio;this.sourceLayerIndex=b.sourceLayerIndex;this.hasPaintOverrides=this.hasPattern=!1;var a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Eg(this.zoom,a["text-size"]);this.iconSizeData=Eg(this.zoom,
a["icon-size"]);a=this.layers[0].layout;var c=a.get("symbol-sort-key"),d=a.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==d&&void 0!==c.constantOr(1);this.sortFeaturesByY=("viewport-y"===d||"auto"===d&&!this.sortFeaturesByKey)&&(a.get("text-allow-overlap")||a.get("icon-allow-overlap")||a.get("text-ignore-placement")||a.get("icon-ignore-placement"));"point"===a.get("symbol-placement")&&(this.writingModes=a.get("text-writing-mode").map(function(b){return Kc[b]}));this.stateDependentLayerIds=
this.layers.filter(function(b){return b.isStateDependent()}).map(function(b){return b.id});this.sourceID=b.sourceID};Kb.prototype.createArrays=function(){this.hasPaintOverrides=Nh.hasPaintOverrides(this.layers[0].layout);this.text=new Of(new kd(hh.members,this.layers,this.zoom,function(b){return/^text/.test(b)}));this.icon=new Of(new kd(hh.members,this.layers,this.zoom,function(b){return/^icon/.test(b)}));this.collisionBox=new oh(uh,fh.members,ng);this.collisionCircle=new oh(uh,ci.members,Ze);this.glyphOffsetArray=
new Bf;this.lineVertexArray=new Yc;this.symbolInstances=new $g};Kb.prototype.calculateGlyphDependencies=function(b,a,c,d,e){for(var f=0;f<b.length;f++)if(a[b.charCodeAt(f)]=!0,(c||d)&&e){var g=Eh[b.charAt(f)];g&&(a[g.charCodeAt(0)]=!0)}};Kb.prototype.populate=function(b,a){var c=this.layers[0],d=c.layout,e=d.get("text-font"),f=d.get("text-field"),g=d.get("icon-image");f=("constant"!==f.value.kind||0<f.value.value.toString().length)&&("constant"!==e.value.kind||0<e.value.value.length);g="constant"!==
g.value.kind||g.value.value&&0<g.value.value.length;var h=d.get("symbol-sort-key");if(this.features=[],f||g){var k=a.iconDependencies;a=a.glyphDependencies;for(var l=new yb(this.zoom),r=0;r<b.length;r+=1){var t=b[r],m=t.feature,u=t.index,n=t.sourceLayerIndex;if(c._featureFilter(l,m)){t=void 0;f&&(t=c.getValueAndResolveTokens("text-field",m),t=ih(t instanceof Gd?t:Gd.fromString(t),c,m));var v=void 0;if(g&&(v=c.getValueAndResolveTokens("icon-image",m)),t||v){var w=this.sortFeaturesByKey?h.evaluate(m,
{}):void 0;u={text:t,icon:v,index:u,sourceLayerIndex:n,geometry:pe(m),properties:m.properties,type:Vi[m.type],sortKey:w};if(void 0!==m.id&&(u.id=m.id),this.features.push(u),v&&(k[v]=!0),t)for(m=e.evaluate(m,{}).join(","),u="map"===d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),this.allowVerticalPlacement=this.writingModes&&0<=this.writingModes.indexOf(Kc.vertical),n=0,v=t.sections;n<v.length;n+=1){w=v[n];var z=pa(t.toString()),x=w.fontStack||m;x=a[x]=a[x]||{};this.calculateGlyphDependencies(w.text,
x,u,this.allowVerticalPlacement,z)}}}}"line"===d.get("symbol-placement")&&(this.features=function(b){function a(b,a,c){var d=f[b];return delete f[b],f[a]=d,g[d].geometry[0].pop(),g[d].geometry[0]=g[d].geometry[0].concat(c[0]),d}function c(b,a,c){var d=e[a];return delete e[a],e[b]=d,g[d].geometry[0].shift(),g[d].geometry[0]=c[0].concat(g[d].geometry[0]),d}function d(b,a,c){a=c?a[0][a[0].length-1]:a[0][0];return b+":"+a.x+":"+a.y}for(var e={},f={},g=[],h=0,k=0;k<b.length;k++){var l=b[k],r=l.geometry;
if(l=l.text?l.text.toString():null){var t=d(l,r),m=d(l,r,!0);if(t in f&&m in e&&f[t]!==e[m]){r=c(t,m,r);var u=a(t,m,g[r].geometry);delete e[t];delete f[m];f[d(l,g[u].geometry,!0)]=u;g[r].geometry=null}else t in f?a(t,m,r):m in e?c(t,m,r):(g.push(b[k]),h++,e[t]=h-1,f[m]=h-1)}else g.push(b[k]),h++}return g.filter(function(b){return b.geometry})}(this.features));this.sortFeaturesByKey&&this.features.sort(function(b,a){return b.sortKey-a.sortKey})}};Kb.prototype.update=function(b,a,c){this.stateDependentLayers.length&&
(this.text.programConfigurations.updatePaintArrays(b,a,this.layers,c),this.icon.programConfigurations.updatePaintArrays(b,a,this.layers,c))};Kb.prototype.isEmpty=function(){return 0===this.symbolInstances.length};Kb.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload};Kb.prototype.upload=function(b){this.uploaded||(this.collisionBox.upload(b),this.collisionCircle.upload(b));this.text.upload(b,this.sortFeaturesByY,
!this.uploaded,this.text.programConfigurations.needsUpload);this.icon.upload(b,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload);this.uploaded=!0};Kb.prototype.destroy=function(){this.text.destroy();this.icon.destroy();this.collisionBox.destroy();this.collisionCircle.destroy()};Kb.prototype.addToLineVertexArray=function(b,a){var c=this.lineVertexArray.length;if(void 0!==b.segment){for(var d=b.dist(a[b.segment+1]),e=b.dist(a[b.segment]),f={},g=b.segment+1;g<a.length;g++)f[g]=
{x:a[g].x,y:a[g].y,tileUnitDistanceFromAnchor:d},g<a.length-1&&(d+=a[g+1].dist(a[g]));for(b=b.segment||0;0<=b;b--)f[b]={x:a[b].x,y:a[b].y,tileUnitDistanceFromAnchor:e},0<b&&(e+=a[b-1].dist(a[b]));for(e=0;e<a.length;e++)b=f[e],this.lineVertexArray.emplaceBack(b.x,b.y,b.tileUnitDistanceFromAnchor)}return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}};Kb.prototype.addSymbols=function(b,a,c,d,e,f,g,h,k,l){var r=this,t=b.indexArray,m=b.layoutVertexArray,u=b.dynamicLayoutVertexArray,n=b.segments.prepareSegment(4*
a.length,b.layoutVertexArray,b.indexArray,f.sortKey);e=this.glyphOffsetArray.length;var v=n.vertexLength,w=this.allowVerticalPlacement&&g===Kc.vertical?Math.PI/2:0,z=function(b){var a=b.tl,d=b.tr,e=b.bl,f=b.br,g=b.tex,k=n.vertexLength,l=b.glyphOffset[1];Lf(m,h.x,h.y,a.x,l+a.y,g.x,g.y,c);Lf(m,h.x,h.y,d.x,l+d.y,g.x+g.w,g.y,c);Lf(m,h.x,h.y,e.x,l+e.y,g.x,g.y+g.h,c);Lf(m,h.x,h.y,f.x,l+f.y,g.x+g.w,g.y+g.h,c);qf(u,h,w);t.emplaceBack(k,k+1,k+2);t.emplaceBack(k+1,k+2,k+3);n.vertexLength+=4;n.primitiveLength+=
2;r.glyphOffsetArray.emplaceBack(b.glyphOffset[0])};if(f.text&&f.text.sections){var x=f.text.sections;if(this.hasPaintOverrides){for(var A,y=function(a,c){void 0===A||A===a&&!c||b.programConfigurations.populatePaintArrays(b.layoutVertexArray.length,f,f.index,{},x[A]);A=a},B=0;B<a.length;B+=1){var p=a[B];y(p.sectionIndex,!1);z(p)}y(A,!0)}else{for(y=0;y<a.length;y+=1)z(a[y]);b.programConfigurations.populatePaintArrays(b.layoutVertexArray.length,f,f.index,{},x[0])}}else{for(y=0;y<a.length;y+=1)z(a[y]);
b.programConfigurations.populatePaintArrays(b.layoutVertexArray.length,f,f.index,{})}b.placedSymbolArray.emplaceBack(h.x,h.y,e,this.glyphOffsetArray.length-e,v,k,l,h.segment,c?c[0]:0,c?c[1]:0,d[0],d[1],g,0,!1,0)};Kb.prototype._addCollisionDebugVertex=function(b,a,c,d,e,f){return a.emplaceBack(0,0),b.emplaceBack(c.x,c.y,d,e,Math.round(f.x),Math.round(f.y))};Kb.prototype.addCollisionDebugVertices=function(b,a,c,d,e,f,g,h){var k=e.segments.prepareSegment(4,e.layoutVertexArray,e.indexArray),l=k.vertexLength,
r=e.layoutVertexArray,t=e.collisionVertexArray,m=g.anchorX;g=g.anchorY;(this._addCollisionDebugVertex(r,t,f,m,g,new Sa(b,a)),this._addCollisionDebugVertex(r,t,f,m,g,new Sa(c,a)),this._addCollisionDebugVertex(r,t,f,m,g,new Sa(c,d)),this._addCollisionDebugVertex(r,t,f,m,g,new Sa(b,d)),k.vertexLength+=4,h)?(b=e.indexArray,b.emplaceBack(l,l+1,l+2),b.emplaceBack(l,l+2,l+3),k.primitiveLength+=2):(b=e.indexArray,b.emplaceBack(l,l+1),b.emplaceBack(l+1,l+2),b.emplaceBack(l+2,l+3),b.emplaceBack(l+3,l),k.primitiveLength+=
4)};Kb.prototype.addDebugCollisionBoxes=function(b,a,c){for(;b<a;b++){var d=this.collisionBoxArray.get(b),e=0<d.radius;this.addCollisionDebugVertices(d.x1,d.y1,d.x2,d.y2,e?this.collisionCircle:this.collisionBox,d.anchorPoint,c,e)}};Kb.prototype.generateCollisionDebugBuffers=function(){for(var b=0;b<this.symbolInstances.length;b++){var a=this.symbolInstances.get(b);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a);this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,
a);this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a)}};Kb.prototype._deserializeCollisionBoxesForSymbol=function(b,a,c,d,e,f,g){for(var h={};a<c;a++){var k=b.get(a);if(0===k.radius){h.textBox={x1:k.x1,y1:k.y1,x2:k.x2,y2:k.y2,anchorPointX:k.anchorPointX,anchorPointY:k.anchorPointY};h.textFeatureIndex=k.featureIndex;break}h.textCircles||(h.textCircles=[],h.textFeatureIndex=k.featureIndex);h.textCircles.push(k.anchorPointX,k.anchorPointY,k.radius,k.signedDistanceFromAnchor,1)}for(c=
d;c<e;c++)if(d=b.get(c),0===d.radius){h.verticalTextBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY};h.verticalTextFeatureIndex=d.featureIndex;break}for(e=f;e<g;e++)if(f=b.get(e),0===f.radius){h.iconBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,anchorPointX:f.anchorPointX,anchorPointY:f.anchorPointY};h.iconFeatureIndex=f.featureIndex;break}return h};Kb.prototype.deserializeCollisionBoxes=function(b){this.collisionArrays=[];for(var a=0;a<this.symbolInstances.length;a++){var c=
this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(b,c.textBoxStartIndex,c.textBoxEndIndex,c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c.iconBoxStartIndex,c.iconBoxEndIndex))}};Kb.prototype.hasTextData=function(){return 0<this.text.segments.get().length};Kb.prototype.hasIconData=function(){return 0<this.icon.segments.get().length};Kb.prototype.hasCollisionBoxData=function(){return 0<this.collisionBox.segments.get().length};Kb.prototype.hasCollisionCircleData=
function(){return 0<this.collisionCircle.segments.get().length};Kb.prototype.addIndicesForPlacedTextSymbol=function(b){var a=this.text.placedSymbolArray.get(b);b=a.vertexStartIndex+4*a.numGlyphs;for(a=a.vertexStartIndex;a<b;a+=4)this.text.indexArray.emplaceBack(a,a+1,a+2),this.text.indexArray.emplaceBack(a+1,a+2,a+3)};Kb.prototype.getSortedSymbolIndexes=function(b){if(this.sortedAngle===b&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;var a=Math.sin(b);b=Math.cos(b);for(var c=
[],d=[],e=[],f=0;f<this.symbolInstances.length;++f){e.push(f);var g=this.symbolInstances.get(f);c.push(0|Math.round(a*g.anchorX+b*g.anchorY));d.push(g.featureIndex)}return e.sort(function(b,a){return c[b]-c[a]||d[a]-d[b]}),e};Kb.prototype.sortFeatures=function(b){var a=this;if(this.sortFeaturesByY&&this.sortedAngle!==b&&!(1<this.text.segments.get().length||1<this.icon.segments.get().length)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(b);this.sortedAngle=b;this.text.indexArray.clear();
this.icon.indexArray.clear();this.featureSortOrder=[];b=0;for(var c=this.symbolInstanceIndexes;b<c.length;b+=1){var d=c[b],e=this.symbolInstances.get(d);this.featureSortOrder.push(e.featureIndex);[e.rightJustifiedTextSymbolIndex,e.centerJustifiedTextSymbolIndex,e.leftJustifiedTextSymbolIndex].forEach(function(b,c,d){0<=b&&d.indexOf(b)===c&&a.addIndicesForPlacedTextSymbol(b)});0<=e.verticalPlacedTextSymbolIndex&&this.addIndicesForPlacedTextSymbol(e.verticalPlacedTextSymbolIndex);d=this.icon.placedSymbolArray.get(d);
d.numGlyphs&&(d=d.vertexStartIndex,this.icon.indexArray.emplaceBack(d,d+1,d+2),this.icon.indexArray.emplaceBack(d+1,d+2,d+3))}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray);this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}};Ka("SymbolBucket",Kb,{omit:["layers","collisionBoxArray","features","compareText"]});Kb.MAX_GLYPHS=65535;Kb.addDynamicAttributes=qf;var cj=new rb({"symbol-placement":new Qa(ta.layout_symbol["symbol-placement"]),"symbol-spacing":new Qa(ta.layout_symbol["symbol-spacing"]),
"symbol-avoid-edges":new Qa(ta.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Va(ta.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Qa(ta.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Qa(ta.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Qa(ta.layout_symbol["icon-ignore-placement"]),"icon-optional":new Qa(ta.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Qa(ta.layout_symbol["icon-rotation-alignment"]),"icon-size":new Va(ta.layout_symbol["icon-size"]),
"icon-text-fit":new Qa(ta.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Qa(ta.layout_symbol["icon-text-fit-padding"]),"icon-image":new Va(ta.layout_symbol["icon-image"]),"icon-rotate":new Va(ta.layout_symbol["icon-rotate"]),"icon-padding":new Qa(ta.layout_symbol["icon-padding"]),"icon-keep-upright":new Qa(ta.layout_symbol["icon-keep-upright"]),"icon-offset":new Va(ta.layout_symbol["icon-offset"]),"icon-anchor":new Va(ta.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Qa(ta.layout_symbol["icon-pitch-alignment"]),
"text-pitch-alignment":new Qa(ta.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Qa(ta.layout_symbol["text-rotation-alignment"]),"text-field":new Va(ta.layout_symbol["text-field"]),"text-font":new Va(ta.layout_symbol["text-font"]),"text-size":new Va(ta.layout_symbol["text-size"]),"text-max-width":new Va(ta.layout_symbol["text-max-width"]),"text-line-height":new Qa(ta.layout_symbol["text-line-height"]),"text-letter-spacing":new Va(ta.layout_symbol["text-letter-spacing"]),"text-justify":new Va(ta.layout_symbol["text-justify"]),
"text-radial-offset":new Va(ta.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Qa(ta.layout_symbol["text-variable-anchor"]),"text-anchor":new Va(ta.layout_symbol["text-anchor"]),"text-max-angle":new Qa(ta.layout_symbol["text-max-angle"]),"text-writing-mode":new Qa(ta.layout_symbol["text-writing-mode"]),"text-rotate":new Va(ta.layout_symbol["text-rotate"]),"text-padding":new Qa(ta.layout_symbol["text-padding"]),"text-keep-upright":new Qa(ta.layout_symbol["text-keep-upright"]),"text-transform":new Va(ta.layout_symbol["text-transform"]),
"text-offset":new Va(ta.layout_symbol["text-offset"]),"text-allow-overlap":new Qa(ta.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Qa(ta.layout_symbol["text-ignore-placement"]),"text-optional":new Qa(ta.layout_symbol["text-optional"])}),Oh={paint:new rb({"icon-opacity":new Va(ta.paint_symbol["icon-opacity"]),"icon-color":new Va(ta.paint_symbol["icon-color"]),"icon-halo-color":new Va(ta.paint_symbol["icon-halo-color"]),"icon-halo-width":new Va(ta.paint_symbol["icon-halo-width"]),
"icon-halo-blur":new Va(ta.paint_symbol["icon-halo-blur"]),"icon-translate":new Qa(ta.paint_symbol["icon-translate"]),"icon-translate-anchor":new Qa(ta.paint_symbol["icon-translate-anchor"]),"text-opacity":new Va(ta.paint_symbol["text-opacity"]),"text-color":new Va(ta.paint_symbol["text-color"],{runtimeType:hd,getOverride:function(b){return b.textColor},hasOverride:function(b){return!!b.textColor}}),"text-halo-color":new Va(ta.paint_symbol["text-halo-color"]),"text-halo-width":new Va(ta.paint_symbol["text-halo-width"]),
"text-halo-blur":new Va(ta.paint_symbol["text-halo-blur"]),"text-translate":new Qa(ta.paint_symbol["text-translate"]),"text-translate-anchor":new Qa(ta.paint_symbol["text-translate-anchor"])}),layout:cj},Kg=function(b){this.type=b.property.overrides?b.property.overrides.runtimeType:oi;this.defaultValue=b};Kg.prototype.evaluate=function(b){if(b.formattedSection){var a=this.defaultValue.property.overrides;if(a&&a.hasOverride(b.formattedSection))return a.getOverride(b.formattedSection)}return b.feature&&
b.featureState?this.defaultValue.evaluate(b.feature,b.featureState):this.defaultValue.property.specification.default};Kg.prototype.eachChild=function(b){this.defaultValue.isConstant()||b(this.defaultValue.value._styleExpression.expression)};Kg.prototype.possibleOutputs=function(){return[void 0]};Kg.prototype.serialize=function(){return null};Ka("FormatSectionOverride",Kg,{omit:["defaultValue"]});var Nh=function(b){function a(a){b.call(this,a,Oh)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&
b.prototype),a.prototype.constructor=a,a.prototype.recalculate=function(a){if(b.prototype.recalculate.call(this,a),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]=
"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement"))if(a=this.layout.get("text-writing-mode")){for(var c=[],d=0;d<a.length;d+=1){var e=a[d];0>c.indexOf(e)&&c.push(e)}this.layout._values["text-writing-mode"]=c}else this.layout._values["text-writing-mode"]=
["horizontal"];this._setPaintOverrides()},a.prototype.getValueAndResolveTokens=function(b,a){var c=this.layout.get(b).evaluate(a,{});b=this._unevaluatedLayout._values[b];return b.isDataDriven()||ub(b.value)?c:function(b,a){return a.replace(/{([^{}]+)}/g,function(a,c){return c in b?String(b[c]):""})}(a.properties,c)},a.prototype.createBucket=function(b){return new Kb(b)},a.prototype.queryRadius=function(){return 0},a.prototype.queryIntersectsFeature=function(){return!1},a.prototype._setPaintOverrides=
function(){for(var b=0,c=Oh.paint.overridableProperties;b<c.length;b+=1){var d=c[b];if(a.hasPaintOverride(this.layout,d)){var e=this.paint.get(d),f=new Kg(e);f=new Xf(f,e.property.specification);f="constant"===e.value.kind||"source"===e.value.kind?new xh("source",f):new yh("composite",f,e.value.zoomStops,e.value._interpolationType);this.paint._values[d]=new Hd(e.property,f,e.parameters)}}},a.prototype._handleOverridablePaintPropertyUpdate=function(b,c,d){return!(!this.layout||c.isDataDriven()||d.isDataDriven())&&
a.hasPaintOverride(this.layout,b)},a.hasPaintOverride=function(b,a){b=b.get("text-field");var c=Oh.paint.properties[a],d=!1,e=function(b){for(var a=0;a<b.length;a+=1){var e=b[a];if(c.overrides&&c.overrides.hasOverride(e))return void(d=!0)}};if("constant"===b.value.kind&&b.value.value instanceof Gd)e(b.value.value.sections);else if("source"===b.value.kind){var f=function(b){d||(b instanceof Fe&&fa(b.value)===xf?e(b.value.sections):b instanceof Je?e(b.sections):b.eachChild(f))};a=b.value;a._styleExpression&&
f(a._styleExpression.expression)}return d},a.hasPaintOverrides=function(b){for(var c=0,d=Oh.paint.overridableProperties;c<d.length;c+=1)if(a.hasPaintOverride(b,d[c]))return!0;return!1},a}(Ra),Ki={paint:new rb({"background-color":new Qa(ta.paint_background["background-color"]),"background-pattern":new fd(ta.paint_background["background-pattern"]),"background-opacity":new Qa(ta.paint_background["background-opacity"])})},Bc=function(b){function a(a){b.call(this,a,Ki)}return b&&(a.__proto__=b),a.prototype=
Object.create(b&&b.prototype),a.prototype.constructor=a,a}(Ra),di={paint:new rb({"raster-opacity":new Qa(ta.paint_raster["raster-opacity"]),"raster-hue-rotate":new Qa(ta.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Qa(ta.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Qa(ta.paint_raster["raster-brightness-max"]),"raster-saturation":new Qa(ta.paint_raster["raster-saturation"]),"raster-contrast":new Qa(ta.paint_raster["raster-contrast"]),"raster-resampling":new Qa(ta.paint_raster["raster-resampling"]),
"raster-fade-duration":new Qa(ta.paint_raster["raster-fade-duration"])})},Mf=function(b){function a(a){b.call(this,a,di)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a}(Ra),Nf=function(b){function a(a){b.call(this,a,{});this.implementation=a}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},a.prototype.hasOffscreenPass=function(){return void 0!==
this.implementation.prerender},a.prototype.recalculate=function(){},a.prototype.updateTransitions=function(){},a.prototype.hasTransition=function(){},a.prototype.serialize=function(){},a.prototype.onAdd=function(b){this.implementation.onAdd&&this.implementation.onAdd(b,b.painter.context.gl)},a.prototype.onRemove=function(b){this.implementation.onRemove&&this.implementation.onRemove(b,b.painter.context.gl)},a}(Ra),Ig={circle:$h,heatmap:yd,hillshade:Dh,fill:Cg,"fill-extrusion":ti,line:If,symbol:Nh,
background:Bc,raster:Mf},ei=function(b,a){var c=a.pixelRatio;a=a.version;this.paddedRect=b;this.pixelRatio=c;this.version=a},Ye={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Ye.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]};Ye.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]};Ye.tlbr.get=function(){return this.tl.concat(this.br)};Ye.displaySize.get=function(){return[(this.paddedRect.w-
2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]};Object.defineProperties(ei.prototype,Ye);var Mh=function(b,a){var c={},d={};this.haveRenderCallbacks=[];var e=[];this.addImages(b,c,e);this.addImages(a,d,e);e=rf(e);e=new Lc({width:e.w||1,height:e.h||1});for(var f in b){var g=b[f],h=c[f].paddedRect;Lc.copy(g.data,e,{x:0,y:0},{x:h.x+1,y:h.y+1},g.data)}for(var k in a){b=a[k];g=d[k].paddedRect;f=g.x+1;g=g.y+1;h=b.data.width;var l=b.data.height;Lc.copy(b.data,e,{x:0,y:0},{x:f,y:g},b.data);Lc.copy(b.data,
e,{x:0,y:l-1},{x:f,y:g-1},{width:h,height:1});Lc.copy(b.data,e,{x:0,y:0},{x:f,y:g+l},{width:h,height:1});Lc.copy(b.data,e,{x:h-1,y:0},{x:f-1,y:g},{width:1,height:l});Lc.copy(b.data,e,{x:0,y:0},{x:f+h,y:g},{width:1,height:l})}this.image=e;this.iconPositions=c;this.patternPositions=d};Mh.prototype.addImages=function(b,a,c){for(var d in b){var e=b[d],f={x:0,y:0,w:e.data.width+2,h:e.data.height+2};c.push(f);a[d]=new ei(f,e);e.hasRenderCallback&&this.haveRenderCallbacks.push(d)}};Mh.prototype.patchUpdatedImages=
function(b,a){for(var c in b.dispatchRenderCallbacks(this.haveRenderCallbacks),b.updatedImages)this.patchUpdatedImage(this.iconPositions[c],b.getImage(c),a),this.patchUpdatedImage(this.patternPositions[c],b.getImage(c),a)};Mh.prototype.patchUpdatedImage=function(b,a,c){b&&a&&b.version!==a.version&&(b.version=a.version,b=b.tl,c.update(a.data,void 0,{x:b[0],y:b[1]}))};Ka("ImagePosition",ei);Ka("ImageAtlas",Mh);var Xi=self.HTMLImageElement,bb=self.HTMLCanvasElement,Jh=self.HTMLVideoElement,Jb=self.ImageData,
Ed=function(b,a,c,d){this.context=b;this.format=c;this.texture=b.gl.createTexture();this.update(a,d)};Ed.prototype.update=function(b,a,c){var d=b.width,e=b.height,f=!(this.size&&this.size[0]===d&&this.size[1]===e||c),g=this.context,h=g.gl;(this.useMipmap=!(!a||!a.useMipmap),h.bindTexture(h.TEXTURE_2D,this.texture),g.pixelStoreUnpackFlipY.set(!1),g.pixelStoreUnpack.set(1),g.pixelStoreUnpackPremultiplyAlpha.set(this.format===h.RGBA&&(!a||!1!==a.premultiply)),f)?(this.size=[d,e],b instanceof Xi||b instanceof
bb||b instanceof Jh||b instanceof Jb?h.texImage2D(h.TEXTURE_2D,0,this.format,this.format,h.UNSIGNED_BYTE,b):h.texImage2D(h.TEXTURE_2D,0,this.format,d,e,0,this.format,h.UNSIGNED_BYTE,b.data)):(c=c||{x:0,y:0},a=c.x,c=c.y,b instanceof Xi||b instanceof bb||b instanceof Jh||b instanceof Jb?h.texSubImage2D(h.TEXTURE_2D,0,a,c,h.RGBA,h.UNSIGNED_BYTE,b):h.texSubImage2D(h.TEXTURE_2D,0,a,c,d,e,h.RGBA,h.UNSIGNED_BYTE,b.data));this.useMipmap&&this.isSizePowerOfTwo()&&h.generateMipmap(h.TEXTURE_2D)};Ed.prototype.bind=
function(b,a,c){var d=this.context.gl;d.bindTexture(d.TEXTURE_2D,this.texture);c!==d.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(c=d.LINEAR);b!==this.filter&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,b),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,c||b),this.filter=b);a!==this.wrap&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,a),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,a),this.wrap=a)};Ed.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&0==Math.log(this.size[0])/
Math.LN2%1};Ed.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture);this.texture=null};var je=function(b,a,c,d,e){var f=8*e-d-1;var g=(1<<f)-1,h=g>>1,k=-7;e=c?e-1:0;var l=c?-1:1,r=b[a+e];e+=l;c=r&(1<<-k)-1;r>>=-k;for(k+=f;0<k;c=256*c+b[a+e],e+=l,k-=8);f=c&(1<<-k)-1;c>>=-k;for(k+=d;0<k;f=256*f+b[a+e],e+=l,k-=8);if(0===c)c=1-h;else{if(c===g)return f?NaN:1/0*(r?-1:1);f+=Math.pow(2,d);c-=h}return(r?-1:1)*f*Math.pow(2,c-d)},Jg=function(b,a,c,d,e,f){var g,h,k,l=8*f-e-1,r=(1<<l)-1,t=
r>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;f=d?0:f-1;d=d?1:-1;var u=0>a||0===a&&0>1/a?1:0;a=Math.abs(a);for(isNaN(a)||a===1/0?(h=isNaN(a)?1:0,g=r):(g=Math.floor(Math.log(a)/Math.LN2),1>a*(k=Math.pow(2,-g))&&(g--,k*=2),2<=(a+=1<=g+t?m/k:m*Math.pow(2,1-t))*k&&(g++,k/=2),g+t>=r?(h=0,g=r):1<=g+t?(h=(a*k-1)*Math.pow(2,e),g+=t):(h=a*Math.pow(2,t-1)*Math.pow(2,e),g=0));8<=e;b[c+f]=255&h,f+=d,h/=256,e-=8);g=g<<e|h;for(l+=e;0<l;b[c+f]=255&g,f+=d,g/=256,l-=8);b[c+f-d]|=128*u};ib.Varint=0;ib.Fixed64=1;
ib.Bytes=2;ib.Fixed32=5;ib.prototype={destroy:function(){this.buf=null},readFields:function(b,a,c){for(c=c||this.length;this.pos<c;){var d=this.readVarint(),e=d>>3,f=this.pos;this.type=7&d;b(e,a,this);this.pos===f&&this.skip(d)}return a},readMessage:function(b,a){return this.readFields(b,a,this.readVarint()+this.pos)},readFixed32:function(){var b=tf(this.buf,this.pos);return this.pos+=4,b},readSFixed32:function(){var b=lc(this.buf,this.pos);return this.pos+=4,b},readFixed64:function(){var b=tf(this.buf,
this.pos)+4294967296*tf(this.buf,this.pos+4);return this.pos+=8,b},readSFixed64:function(){var b=tf(this.buf,this.pos)+4294967296*lc(this.buf,this.pos+4);return this.pos+=8,b},readFloat:function(){var b=je(this.buf,this.pos,!0,23,4);return this.pos+=4,b},readDouble:function(){var b=je(this.buf,this.pos,!0,52,8);return this.pos+=8,b},readVarint:function(b){var a,c=this.buf;var d=127&(a=c[this.pos++]);if(128>a)b=d;else if(d|=(127&(a=c[this.pos++]))<<7,128>a)b=d;else if(d|=(127&(a=c[this.pos++]))<<14,
128>a)b=d;else if(d|=(127&(a=c[this.pos++]))<<21,128>a)b=d;else{d|=(15&c[this.pos])<<28;var e,f;a=this.buf;if((f=a[this.pos++],e=(112&f)>>4,128>f)||(f=a[this.pos++],e|=(127&f)<<3,128>f)||(f=a[this.pos++],e|=(127&f)<<10,128>f)||(f=a[this.pos++],e|=(127&f)<<17,128>f)||(f=a[this.pos++],e|=(127&f)<<24,128>f)||(f=a[this.pos++],e|=(1&f)<<31,128>f))b=b?4294967296*e+(d>>>0):4294967296*(e>>>0)+(d>>>0);else throw Error("Expected varint not more than 10 bytes");}return b},readVarint64:function(){return this.readVarint(!0)},
readSVarint:function(){var b=this.readVarint();return 1==b%2?(b+1)/-2:b/2},readBoolean:function(){return!!this.readVarint()},readString:function(){for(var b=this.readVarint()+this.pos,a=this.buf,c="",d=this.pos;d<b;){var e,f,g,h=a[d],k=null,l=239<h?4:223<h?3:191<h?2:1;if(d+l>b)break;1===l?128>h&&(k=h):2===l?128==(192&(e=a[d+1]))&&127>=(k=(31&h)<<6|63&e)&&(k=null):3===l?(e=a[d+1],f=a[d+2],128==(192&e)&&128==(192&f)&&(2047>=(k=(15&h)<<12|(63&e)<<6|63&f)||55296<=k&&57343>=k)&&(k=null)):4===l&&(e=a[d+
1],f=a[d+2],g=a[d+3],128==(192&e)&&128==(192&f)&&128==(192&g)&&(65535>=(k=(15&h)<<18|(63&e)<<12|(63&f)<<6|63&g)||1114112<=k)&&(k=null));null===k?(k=65533,l=1):65535<k&&(k-=65536,c+=String.fromCharCode(k>>>10&1023|55296),k=56320|1023&k);c+=String.fromCharCode(k);d+=l}return this.pos=b,c},readBytes:function(){var b=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,b);return this.pos=b,a},readPackedVarint:function(b,a){if(this.type!==ib.Bytes)return b.push(this.readVarint(a));var c=nd(this);for(b=
b||[];this.pos<c;)b.push(this.readVarint(a));return b},readPackedSVarint:function(b){if(this.type!==ib.Bytes)return b.push(this.readSVarint());var a=nd(this);for(b=b||[];this.pos<a;)b.push(this.readSVarint());return b},readPackedBoolean:function(b){if(this.type!==ib.Bytes)return b.push(this.readBoolean());var a=nd(this);for(b=b||[];this.pos<a;)b.push(this.readBoolean());return b},readPackedFloat:function(b){if(this.type!==ib.Bytes)return b.push(this.readFloat());var a=nd(this);for(b=b||[];this.pos<
a;)b.push(this.readFloat());return b},readPackedDouble:function(b){if(this.type!==ib.Bytes)return b.push(this.readDouble());var a=nd(this);for(b=b||[];this.pos<a;)b.push(this.readDouble());return b},readPackedFixed32:function(b){if(this.type!==ib.Bytes)return b.push(this.readFixed32());var a=nd(this);for(b=b||[];this.pos<a;)b.push(this.readFixed32());return b},readPackedSFixed32:function(b){if(this.type!==ib.Bytes)return b.push(this.readSFixed32());var a=nd(this);for(b=b||[];this.pos<a;)b.push(this.readSFixed32());
return b},readPackedFixed64:function(b){if(this.type!==ib.Bytes)return b.push(this.readFixed64());var a=nd(this);for(b=b||[];this.pos<a;)b.push(this.readFixed64());return b},readPackedSFixed64:function(b){if(this.type!==ib.Bytes)return b.push(this.readSFixed64());var a=nd(this);for(b=b||[];this.pos<a;)b.push(this.readSFixed64());return b},skip:function(b){b&=7;if(b===ib.Varint)for(;127<this.buf[this.pos++];);else if(b===ib.Bytes)this.pos=this.readVarint()+this.pos;else if(b===ib.Fixed32)this.pos+=
4;else{if(b!==ib.Fixed64)throw Error("Unimplemented type: "+b);this.pos+=8}},writeTag:function(b,a){this.writeVarint(b<<3|a)},realloc:function(b){for(var a=this.length||16;a<this.pos+b;)a*=2;a!==this.length&&(b=new Uint8Array(a),b.set(this.buf),this.buf=b,this.length=a)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(b){this.realloc(4);ee(this.buf,b,this.pos);this.pos+=4},writeSFixed32:function(b){this.realloc(4);ee(this.buf,b,this.pos);
this.pos+=4},writeFixed64:function(b){this.realloc(8);ee(this.buf,-1&b,this.pos);ee(this.buf,Math.floor(1/4294967296*b),this.pos+4);this.pos+=8},writeSFixed64:function(b){this.realloc(8);ee(this.buf,-1&b,this.pos);ee(this.buf,Math.floor(1/4294967296*b),this.pos+4);this.pos+=8},writeVarint:function(b){268435455<(b=+b||0)||0>b?function(b,a){var c,d;0<=b?(c=b%4294967296|0,d=b/4294967296|0):(d=~(-b/4294967296),4294967295^(c=~(-b%4294967296))?c=c+1|0:(c=0,d=d+1|0));if(1.8446744073709552E19<=b||-1.8446744073709552E19>
b)throw Error("Given varint doesn't fit into 10 bytes");a.realloc(10);(function(b,a,c){c.buf[c.pos++]=127&b|128;b>>>=7;c.buf[c.pos++]=127&b|128;b>>>=7;c.buf[c.pos++]=127&b|128;b>>>=7;c.buf[c.pos++]=127&b|128;c.buf[c.pos]=127&b>>>7})(c,0,a);(function(b,a){if(a.buf[a.pos++]|=(7&b)<<4|((b>>>=3)?128:0),b)if(a.buf[a.pos++]=127&b|((b>>>=7)?128:0),b)if(a.buf[a.pos++]=127&b|((b>>>=7)?128:0),b)if(a.buf[a.pos++]=127&b|((b>>>=7)?128:0),b)if(a.buf[a.pos++]=127&b|((b>>>=7)?128:0),b)a.buf[a.pos++]=127&b})(d,a)}(b,
this):(this.realloc(4),this.buf[this.pos++]=127&b|(127<b?128:0),127>=b||(this.buf[this.pos++]=127&(b>>>=7)|(127<b?128:0),127>=b||(this.buf[this.pos++]=127&(b>>>=7)|(127<b?128:0),127>=b||(this.buf[this.pos++]=b>>>7&127))))},writeSVarint:function(b){this.writeVarint(0>b?2*-b-1:2*b)},writeBoolean:function(b){this.writeVarint(!!b)},writeString:function(b){b=String(b);this.realloc(4*b.length);this.pos++;for(var a=this.pos,c=this.buf,d=this.pos,e,f,g=0;g<b.length;g++){if(55295<(e=b.charCodeAt(g))&&57344>
e){if(!f){56319<e||g+1===b.length?(c[d++]=239,c[d++]=191,c[d++]=189):f=e;continue}if(56320>e){c[d++]=239;c[d++]=191;c[d++]=189;f=e;continue}e=f-55296<<10|e-56320|65536;f=null}else f&&(c[d++]=239,c[d++]=191,c[d++]=189,f=null);128>e?c[d++]=e:(2048>e?c[d++]=e>>6|192:(65536>e?c[d++]=e>>12|224:(c[d++]=e>>18|240,c[d++]=e>>12&63|128),c[d++]=e>>6&63|128),c[d++]=63&e|128)}this.pos=d;c=this.pos-a;128<=c&&Ve(a,c,this);this.pos=a-1;this.writeVarint(c);this.pos+=c},writeFloat:function(b){this.realloc(4);Jg(this.buf,
b,this.pos,!0,23,4);this.pos+=4},writeDouble:function(b){this.realloc(8);Jg(this.buf,b,this.pos,!0,52,8);this.pos+=8},writeBytes:function(b){var a=b.length;this.writeVarint(a);this.realloc(a);for(var c=0;c<a;c++)this.buf[this.pos++]=b[c]},writeRawMessage:function(b,a){this.pos++;var c=this.pos;b(a,this);b=this.pos-c;128<=b&&Ve(c,b,this);this.pos=c-1;this.writeVarint(b);this.pos+=b},writeMessage:function(b,a,c){this.writeTag(b,ib.Bytes);this.writeRawMessage(a,c)},writePackedVarint:function(b,a){a.length&&
this.writeMessage(b,dg,a)},writePackedSVarint:function(b,a){a.length&&this.writeMessage(b,eg,a)},writePackedBoolean:function(b,a){a.length&&this.writeMessage(b,de,a)},writePackedFloat:function(b,a){a.length&&this.writeMessage(b,md,a)},writePackedDouble:function(b,a){a.length&&this.writeMessage(b,ce,a)},writePackedFixed32:function(b,a){a.length&&this.writeMessage(b,dd,a)},writePackedSFixed32:function(b,a){a.length&&this.writeMessage(b,fg,a)},writePackedFixed64:function(b,a){a.length&&this.writeMessage(b,
qb,a)},writePackedSFixed64:function(b,a){a.length&&this.writeMessage(b,Hh,a)},writeBytesField:function(b,a){this.writeTag(b,ib.Bytes);this.writeBytes(a)},writeFixed32Field:function(b,a){this.writeTag(b,ib.Fixed32);this.writeFixed32(a)},writeSFixed32Field:function(b,a){this.writeTag(b,ib.Fixed32);this.writeSFixed32(a)},writeFixed64Field:function(b,a){this.writeTag(b,ib.Fixed64);this.writeFixed64(a)},writeSFixed64Field:function(b,a){this.writeTag(b,ib.Fixed64);this.writeSFixed64(a)},writeVarintField:function(b,
a){this.writeTag(b,ib.Varint);this.writeVarint(a)},writeSVarintField:function(b,a){this.writeTag(b,ib.Varint);this.writeSVarint(a)},writeStringField:function(b,a){this.writeTag(b,ib.Bytes);this.writeString(a)},writeFloatField:function(b,a){this.writeTag(b,ib.Fixed32);this.writeFloat(a)},writeDoubleField:function(b,a){this.writeTag(b,ib.Fixed64);this.writeDouble(a)},writeBooleanField:function(b,a){this.writeVarintField(b,!!a)}};var vi=function(b){var a=this;this._callback=b;this._triggered=!1;"undefined"!=
typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){a._triggered=!1;a._callback()})};vi.prototype.trigger=function(){var b=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){b._triggered=!1;b._callback()},0))};var Lh=function(b,a,c){this.target=b;this.parent=a;this.mapId=c;this.callbacks={};this.tasks={};this.taskQueue=[];this.cancelCallbacks={};w(["receive","process"],this);this.invoker=new vi(this.process);
this.target.addEventListener("message",this.receive,!1)};Lh.prototype.send=function(b,a,c,d){var e=this,f=Math.round(1E18*Math.random()).toString(36).substring(0,10);c&&(this.callbacks[f]=c);var g=[];return this.target.postMessage({id:f,type:b,hasCallback:!!c,targetMapId:d,sourceMapId:this.mapId,data:Pc(a,g)},g),{cancel:function(){c&&delete e.callbacks[f];e.target.postMessage({id:f,type:"\x3ccancel\x3e",targetMapId:d,sourceMapId:e.mapId})}}};Lh.prototype.receive=function(b){var a=b.data;!(b=a.id)||
a.targetMapId&&this.mapId!==a.targetMapId||("\x3ccancel\x3e"===a.type?(delete this.tasks[b],a=this.cancelCallbacks[b],delete this.cancelCallbacks[b],a&&a()):(this.tasks[b]=a,this.taskQueue.push(b),this.invoker.trigger()))};Lh.prototype.process=function(){var b=this;if(this.taskQueue.length){var a=this.taskQueue.shift(),c=this.tasks[a];if(delete this.tasks[a],this.taskQueue.length&&this.invoker.trigger(),c)if("\x3cresponse\x3e"===c.type){var d=this.callbacks[a];delete this.callbacks[a];d&&(c.error?
d(Qc(c.error)):d(null,Qc(c.data)))}else{var e=!1;d=c.hasCallback?function(c,d){e=!0;delete b.cancelCallbacks[a];var f=[];b.target.postMessage({id:a,type:"\x3cresponse\x3e",sourceMapId:b.mapId,error:c?Pc(c):null,data:Pc(d,f)},f)}:function(b){e=!0};var f=null,g=Qc(c.data);this.parent[c.type]?f=this.parent[c.type](c.sourceMapId,g,d):this.parent.getWorkerSource?(f=c.type.split("."),f=this.parent.getWorkerSource(c.sourceMapId,f[0],g.source)[f[1]](g,d)):d(Error("Could not find function "+c.type));!e&&f&&
f.cancel&&(this.cancelCallbacks[a]=f.cancel)}}};Lh.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};var sc=function(b,a){b&&(a?this.setSouthWest(b).setNorthEast(a):4===b.length?this.setSouthWest([b[0],b[1]]).setNorthEast([b[2],b[3]]):this.setSouthWest(b[0]).setNorthEast(b[1]))};sc.prototype.setNorthEast=function(b){return this._ne=b instanceof bc?new bc(b.lng,b.lat):bc.convert(b),this};sc.prototype.setSouthWest=function(b){return this._sw=b instanceof bc?new bc(b.lng,
b.lat):bc.convert(b),this};sc.prototype.extend=function(b){var a,c=this._sw,d=this._ne;if(b instanceof bc)var e=a=b;else{if(!(b instanceof sc))return Array.isArray(b)?b.every(Array.isArray)?this.extend(sc.convert(b)):this.extend(bc.convert(b)):this;if(a=b._sw,e=b._ne,!a||!e)return this}return c||d?(c.lng=Math.min(a.lng,c.lng),c.lat=Math.min(a.lat,c.lat),d.lng=Math.max(e.lng,d.lng),d.lat=Math.max(e.lat,d.lat)):(this._sw=new bc(a.lng,a.lat),this._ne=new bc(e.lng,e.lat)),this};sc.prototype.getCenter=
function(){return new bc((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)};sc.prototype.getSouthWest=function(){return this._sw};sc.prototype.getNorthEast=function(){return this._ne};sc.prototype.getNorthWest=function(){return new bc(this.getWest(),this.getNorth())};sc.prototype.getSouthEast=function(){return new bc(this.getEast(),this.getSouth())};sc.prototype.getWest=function(){return this._sw.lng};sc.prototype.getSouth=function(){return this._sw.lat};sc.prototype.getEast=function(){return this._ne.lng};
sc.prototype.getNorth=function(){return this._ne.lat};sc.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]};sc.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"};sc.prototype.isEmpty=function(){return!(this._sw&&this._ne)};sc.convert=function(b){return!b||b instanceof sc?b:new sc(b)};var bc=function(b,a){if(isNaN(b)||isNaN(a))throw Error("Invalid LngLat object: ("+b+", "+a+")");if(this.lng=+b,this.lat=+a,90<this.lat||-90>
this.lat)throw Error("Invalid LngLat latitude value: must be between -90 and 90");};bc.prototype.wrap=function(){return new bc(c(this.lng,-180,180),this.lat)};bc.prototype.toArray=function(){return[this.lng,this.lat]};bc.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"};bc.prototype.toBounds=function(b){void 0===b&&(b=0);b=360*b/40075017;var a=b/Math.cos(Math.PI/180*this.lat);return new sc(new bc(this.lng-a,this.lat-b),new bc(this.lng+a,this.lat+b))};bc.convert=function(b){if(b instanceof
bc)return b;if(Array.isArray(b)&&(2===b.length||3===b.length))return new bc(Number(b[0]),Number(b[1]));if(!Array.isArray(b)&&"object"==typeof b&&null!==b)return new bc(Number("lng"in b?b.lng:b.lon),Number(b.lat));throw Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: \x3clng\x3e, lat: \x3clat\x3e}, an object {lon: \x3clng\x3e, lat: \x3clat\x3e}, or an array of [\x3clng\x3e, \x3clat\x3e]");};var gi=12756274*Math.PI,Ua=function(b,a,c){void 0===c&&(c=0);this.x=+b;
this.y=+a;this.z=+c};Ua.fromLngLat=function(b,a){void 0===a&&(a=0);b=bc.convert(b);return new Ua(fe(b.lng),Fg(b.lat),a/(gi*Math.cos(b.lat*Math.PI/180)))};Ua.prototype.toLngLat=function(){return new bc(360*this.x-180,ed(this.y))};Ua.prototype.toAltitude=function(){return b=this.z,a=this.y,b*gi*Math.cos(ed(a)*Math.PI/180);var b,a};Ua.prototype.meterInMercatorCoordinateUnits=function(){return 1/gi*(b=ed(this.y),1/Math.cos(b*Math.PI/180));var b};var Xe=function(b,a,c){this.z=b;this.x=a;this.y=c;this.key=
jc(0,b,a,c)};Xe.prototype.equals=function(b){return this.z===b.z&&this.x===b.x&&this.y===b.y};Xe.prototype.url=function(b,a){var c,d,e,f,g,h=(c=this.x,d=this.y,e=this.z,f=qd(256*c,256*(d=Math.pow(2,e)-d-1),e),g=qd(256*(c+1),256*(d+1),e),f[0]+","+f[1]+","+g[0]+","+g[1]),k;c="";for(d=this.z;0<d;d--)c+=(this.x&(k=1<<d-1)?1:0)+(this.y&k?2:0);k=c;return b[(this.x+this.y)%b.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",
String("tms"===a?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",k).replace("{bbox-epsg-3857}",h)};Xe.prototype.getTilePoint=function(b){var a=Math.pow(2,this.z);return new Sa(8192*(b.x*a-this.x),8192*(b.y*a-this.y))};var Wi=function(b,a){this.wrap=b;this.canonical=a;this.key=jc(b,a.z,a.x,a.y)},cc=function(b,a,c,d,e){this.overscaledZ=b;this.wrap=a;this.canonical=new Xe(c,+d,+e);this.key=jc(a,b,d,e)};cc.prototype.equals=function(b){return this.overscaledZ===b.overscaledZ&&this.wrap===b.wrap&&
this.canonical.equals(b.canonical)};cc.prototype.scaledTo=function(b){var a=this.canonical.z-b;return b>this.canonical.z?new cc(b,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new cc(b,this.wrap,b,this.canonical.x>>a,this.canonical.y>>a)};cc.prototype.isChildOf=function(b){if(b.wrap!==this.wrap)return!1;var a=this.canonical.z-b.canonical.z;return 0===b.overscaledZ||b.overscaledZ<this.overscaledZ&&b.canonical.x===this.canonical.x>>a&&b.canonical.y===this.canonical.y>>a};cc.prototype.children=
function(b){if(this.overscaledZ>=b)return[new cc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];b=this.canonical.z+1;var a=2*this.canonical.x,c=2*this.canonical.y;return[new cc(b,this.wrap,b,a,c),new cc(b,this.wrap,b,a+1,c),new cc(b,this.wrap,b,a,c+1),new cc(b,this.wrap,b,a+1,c+1)]};cc.prototype.isLessThan=function(b){return this.wrap<b.wrap||!(this.wrap>b.wrap)&&(this.overscaledZ<b.overscaledZ||!(this.overscaledZ>b.overscaledZ)&&(this.canonical.x<b.canonical.x||
!(this.canonical.x>b.canonical.x)&&this.canonical.y<b.canonical.y))};cc.prototype.wrapped=function(){return new cc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)};cc.prototype.unwrapTo=function(b){return new cc(this.overscaledZ,b,this.canonical.z,this.canonical.x,this.canonical.y)};cc.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)};cc.prototype.toUnwrapped=function(){return new Wi(this.wrap,this.canonical)};cc.prototype.toString=function(){return this.overscaledZ+
"/"+this.canonical.x+"/"+this.canonical.y};cc.prototype.getTilePoint=function(b){return this.canonical.getTilePoint(new Ua(b.x-this.wrap,b.y))};Ka("CanonicalTileID",Xe);Ka("OverscaledTileID",cc,{omit:["posMatrix"]});var hg=function(b,a,c){if(this.uid=b,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(c&&"mapbox"!==c&&"terrarium"!==c)return p('"'+c+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');b=this.dim=a.height;this.stride=this.dim+2;this.data=
new Int32Array(this.stride*this.stride);a=a.data;c="terrarium"===c?this._unpackTerrarium:this._unpackMapbox;for(var d=0;d<b;d++)for(var e=0;e<b;e++){var f=4*(d*b+e);this.set(e,d,c(a[f],a[f+1],a[f+2]))}for(a=0;a<b;a++)this.set(-1,a,this.get(0,a)),this.set(b,a,this.get(b-1,a)),this.set(a,-1,this.get(a,0)),this.set(a,b,this.get(a,b-1));this.set(-1,-1,this.get(0,0));this.set(b,-1,this.get(b-1,0));this.set(-1,b,this.get(0,b-1));this.set(b,b,this.get(b-1,b-1))};hg.prototype.set=function(b,a,c){this.data[this._idx(b,
a)]=c+65536};hg.prototype.get=function(b,a){return this.data[this._idx(b,a)]-65536};hg.prototype._idx=function(b,a){if(-1>b||b>=this.dim+1||-1>a||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(b+1)};hg.prototype._unpackMapbox=function(b,a,c){return(65536*b+256*a+c)/10-1E4};hg.prototype._unpackTerrarium=function(b,a,c){return 256*b+a+c/256-32768};hg.prototype.getPixels=function(){return new Lc({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))};
hg.prototype.backfillBorder=function(b,a,c){if(this.dim!==b.dim)throw Error("dem dimension mismatch");var d=a*this.dim,e=a*this.dim+this.dim,f=c*this.dim,g=c*this.dim+this.dim;switch(a){case -1:d=e-1;break;case 1:e=d+1}switch(c){case -1:f=g-1;break;case 1:g=f+1}a=-a*this.dim;for(c=-c*this.dim;f<g;f++)for(var h=d;h<e;h++)this.set(h,f,b.get(h+a,f+c))};Ka("DEMData",hg);var xi=fb([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Ai=function(b){this._stringToNumber=
{};this._numberToString=[];for(var a=0;a<b.length;a++){var c=b[a];this._stringToNumber[c]=a;this._numberToString[a]=c}};Ai.prototype.encode=function(b){return this._stringToNumber[b]};Ai.prototype.decode=function(b){return this._numberToString[b]};var zi=function(b,a,c,d){this.type="Feature";this._vectorTileFeature=b;b._z=a;b._x=c;b._y=d;this.properties=b.properties;null!=b.id&&(this.id=b.id)},mh={geometry:{configurable:!0}};mh.geometry.get=function(){return void 0===this._geometry&&(this._geometry=
this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry};mh.geometry.set=function(b){this._geometry=b};zi.prototype.toJSON=function(){var b={geometry:this.geometry},a;for(a in this)"_geometry"!==a&&"_vectorTileFeature"!==a&&(b[a]=this[a]);return b};Object.defineProperties(zi.prototype,mh);var Gg=function(){this.state={};this.stateChanges={};this.deletedStates={}};Gg.prototype.updateState=function(b,a,c){a=String(a);
if(this.stateChanges[b]=this.stateChanges[b]||{},this.stateChanges[b][a]=this.stateChanges[b][a]||{},r(this.stateChanges[b][a],c),null===this.deletedStates[b])for(var d in this.deletedStates[b]={},this.state[b])d!==a&&(this.deletedStates[b][d]=null);else if(this.deletedStates[b]&&null===this.deletedStates[b][a])for(var e in this.deletedStates[b][a]={},this.state[b][a])c[e]||(this.deletedStates[b][a][e]=null);else for(var f in c)this.deletedStates[b]&&this.deletedStates[b][a]&&null===this.deletedStates[b][a][f]&&
delete this.deletedStates[b][a][f]};Gg.prototype.removeFeatureState=function(b,a,c){if(null!==this.deletedStates[b]){var d=String(a);if(this.deletedStates[b]=this.deletedStates[b]||{},c&&void 0!==a&&0<=a)null!==this.deletedStates[b][d]&&(this.deletedStates[b][d]=this.deletedStates[b][d]||{},this.deletedStates[b][d][c]=null);else if(void 0!==a&&0<=a)if(this.stateChanges[b]&&this.stateChanges[b][d])for(c in this.deletedStates[b][d]={},this.stateChanges[b][d])this.deletedStates[b][d][c]=null;else this.deletedStates[b][d]=
null;else this.deletedStates[b]=null}};Gg.prototype.getState=function(b,a){var c=String(a);c=r({},(this.state[b]||{})[c],(this.stateChanges[b]||{})[c]);if(null===this.deletedStates[b])return{};if(this.deletedStates[b]){b=this.deletedStates[b][a];if(null===b)return{};for(var d in b)delete c[d]}return c};Gg.prototype.initializeTileState=function(b,a){b.setFeatureState(this.state,a)};Gg.prototype.coalesceChanges=function(b,a){var c={};for(g in this.stateChanges){this.state[g]=this.state[g]||{};var d=
{},e;for(e in this.stateChanges[g])this.state[g][e]||(this.state[g][e]={}),r(this.state[g][e],this.stateChanges[g][e]),d[e]=this.state[g][e];c[g]=d}for(var f in this.deletedStates){this.state[f]=this.state[f]||{};var g={};if(null===this.deletedStates[f])for(var h in this.state[f])g[h]={},this.state[f][h]={};else for(var k in this.deletedStates[f]){if(null===this.deletedStates[f][k])this.state[f][k]={};else for(d=0,e=Object.keys(this.deletedStates[f][k]);d<e.length;d+=1)delete this.state[f][k][e[d]];
g[k]=this.state[f][k]}c[f]=c[f]||{};r(c[f],g)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(c).length)for(var l in b)b[l].setFeatureState(c,a)};var Hg=function(b,a,c){this.tileID=b;this.x=b.canonical.x;this.y=b.canonical.y;this.z=b.canonical.z;this.grid=a||new vc(8192,16,0);this.grid3D=new vc(8192,16,0);this.featureIndexArray=c||new Ah};Hg.prototype.insert=function(b,a,c,d,e,f){b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,d,e);c=f?this.grid3D:this.grid;for(d=
0;d<a.length;d++){e=a[d];f=[1/0,1/0,-1/0,-1/0];for(var g=0;g<e.length;g++){var h=e[g];f[0]=Math.min(f[0],h.x);f[1]=Math.min(f[1],h.y);f[2]=Math.max(f[2],h.x);f[3]=Math.max(f[3],h.y)}8192>f[0]&&8192>f[1]&&0<=f[2]&&0<=f[3]&&c.insert(b,f[0],f[1],f[2],f[3])}};Hg.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=(new Ih.VectorTile(new ib(this.rawTileData))).layers,this.sourceLayerCoder=new Ai(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers};Hg.prototype.query=
function(b,a,c){var d=this;this.loadVTLayers();var e=b.params||{},f=8192/b.tileSize/b.scale,g=Nb(e.filter),h=b.queryGeometry,k=b.queryPadding*f,l=Jf(h),r=this.grid.query(l.minX-k,l.minY-k,l.maxX+k,l.maxY+k),t=Jf(b.cameraQueryGeometry);l=0;for(t=this.grid3D.query(t.minX-k,t.minY-k,t.maxX+k,t.maxY+k,function(a,c,d,e){a:{var f=b.cameraQueryGeometry;a-=k;c-=k;d+=k;e+=k;for(var g=0;g<f.length;g+=1){var h=f[g];if(a<=h.x&&c<=h.y&&d>=h.x&&e>=h.y){f=!0;break a}}a=[new Sa(a,c),new Sa(a,e),new Sa(d,e),new Sa(d,
c)];if(2<f.length)for(c=0;c<a.length;c+=1)if(Zb(f,a[c])){f=!0;break a}for(c=0;c<f.length-1;c++){e=f[c];d=f[c+1];g=a;h=g[0];var l=g[2];e.x<h.x&&d.x<h.x||e.x>l.x&&d.x>l.x||e.y<h.y&&d.y<h.y||e.y>l.y&&d.y>l.y?e=!1:(h=B(e,d,g[0]),e=h!==B(e,d,g[1])||h!==B(e,d,g[2])||h!==B(e,d,g[3]));if(e){f=!0;break a}}f=!1}return f});l<t.length;l+=1)r.push(t[l]);r.sort(Ac);var m,u={};l=function(k){k=r[k];if(k!==m){m=k;k=d.featureIndexArray.get(k);var l=null;d.loadMatchingFeature(u,k.bucketIndex,k.sourceLayerIndex,k.featureIndex,
g,e.layers,a,function(a,e){l||(l=pe(a));var g={};return a.id&&(g=c.getState(e.sourceLayer||"_geojsonTileLayer",a.id)),e.queryIntersectsFeature(h,a,g,l,d.z,b.transform,f,b.pixelPosMatrix)})}};for(t=0;t<r.length;t++)l(t);return u};Hg.prototype.loadMatchingFeature=function(b,a,c,d,e,f,g,h){a=this.bucketLayerIDs[a];var k;if(!(k=!f))a:{for(k=0;k<f.length;k++)if(0<=a.indexOf(f[k])){k=!0;break a}k=!1}if(k&&(c=this.sourceLayerCoder.decode(c),c=this.vtLayers[c].feature(d),e(new yb(this.tileID.overscaledZ),
c)))for(e=0;e<a.length;e++)if(k=a[e],!(f&&0>f.indexOf(k))){var l=g[k];if(l){var r=!h||h(c,l);if(r){var t=new zi(c,this.z,this.x,this.y);t.layer=l.serialize();l=b[k];void 0===l&&(l=b[k]=[]);l.push({featureIndex:d,feature:t,intersectionZ:r})}}}};Hg.prototype.lookupSymbolFeatures=function(b,a,c,d,e,f){var g={};this.loadVTLayers();d=Nb(d);for(var h=0;h<b.length;h+=1)this.loadMatchingFeature(g,a,c,b[h],d,e,f);return g};Hg.prototype.hasLayer=function(b){for(var a=0,c=this.bucketLayerIDs;a<c.length;a+=1)for(var d=
0,e=c[a];d<e.length;d+=1)if(b===e[d])return!0;return!1};Ka("FeatureIndex",Hg,{omit:["rawTileData","sourceLayerCoder"]});var xc=function(b,a){this.tileID=b;this.uid=Ae++;this.uses=0;this.tileSize=a;this.buckets={};this.expirationTime=null;this.queryPadding=0;this.hasSymbolBuckets=!1;this.expiredRequestCount=0;this.state="loading"};xc.prototype.registerFadeDuration=function(b){b+=this.timeAdded;b<be.now()||this.fadeEndTime&&b<this.fadeEndTime||(this.fadeEndTime=b)};xc.prototype.wasRequested=function(){return"errored"===
this.state||"loaded"===this.state||"reloading"===this.state};xc.prototype.loadVectorData=function(b,a,c){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",b){for(var d in b.featureIndex&&(this.latestFeatureIndex=b.featureIndex,b.rawTileData?(this.latestRawTileData=b.rawTileData,this.latestFeatureIndex.rawTileData=b.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=b.collisionBoxArray,this.buckets=function(b,a){var c=
{};if(!a)return c;for(var d=function(){var b=f[e],d=b.layerIds.map(function(b){return a.getLayer(b)}).filter(Boolean);if(0!==d.length){b.layers=d;b.stateDependentLayerIds&&(b.stateDependentLayers=b.stateDependentLayerIds.map(function(b){return d.filter(function(a){return a.id===b})[0]}));for(var g=0;g<d.length;g+=1)c[d[g].id]=b}},e=0,f=b;e<f.length;e+=1)d();return c}(b.buckets,a.style),this.hasSymbolBuckets=!1,this.buckets){var e=this.buckets[d];if(e instanceof Kb){if(this.hasSymbolBuckets=!0,!c)break;
e.justReloaded=!0}}for(var f in this.queryPadding=0,this.buckets)c=this.buckets[f],this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(f).queryRadius(c));b.imageAtlas&&(this.imageAtlas=b.imageAtlas);b.glyphAtlasImage&&(this.glyphAtlasImage=b.glyphAtlasImage)}else this.collisionBoxArray=new Ph};xc.prototype.unloadVectorData=function(){for(var b in this.buckets)this.buckets[b].destroy();this.buckets={};this.imageAtlasTexture&&this.imageAtlasTexture.destroy();this.imageAtlas&&(this.imageAtlas=
null);this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy();this.latestFeatureIndex=null;this.state="unloaded"};xc.prototype.unloadDEMData=function(){this.neighboringTiles=this.dem=null;this.state="unloaded"};xc.prototype.getBucket=function(b){return this.buckets[b.id]};xc.prototype.upload=function(b){for(var a in this.buckets){var c=this.buckets[a];c.uploadPending()&&c.upload(b)}a=b.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ed(b,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=
!0);this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ed(b,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)};xc.prototype.prepare=function(b){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(b,this.imageAtlasTexture)};xc.prototype.queryRenderedFeatures=function(b,a,c,d,e,f,g,h,k){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:c,cameraQueryGeometry:d,scale:e,tileSize:this.tileSize,pixelPosMatrix:k,transform:g,params:f,queryPadding:this.queryPadding*
h},b,a):{}};xc.prototype.querySourceFeatures=function(b,a){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var c=this.latestFeatureIndex.loadVTLayers(),d=a?a.sourceLayer:"";if(c=c._geojsonTileLayer||c[d]){a=Nb(a&&a.filter);var e=this.tileID.canonical;d=e.z;var f=e.x;e=e.y;for(var g={z:d,x:f,y:e},h=0;h<c.length;h++){var k=c.feature(h);a(new yb(this.tileID.overscaledZ),k)&&(k=new zi(k,d,f,e),k.tile=g,b.push(k))}}}};xc.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),
delete this.segments);this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer);this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)};xc.prototype.setMask=function(b,a){if(!k(this.mask,b)&&(this.mask=b,this.clearMask(),!k(b,{0:!0}))){var c=new Vh,d=new Ze;this.segments=new Wb;this.segments.prepareSegment(0,c,d);for(var e=Object.keys(b),f=0;f<e.length;f++){var g=b[+e[f]],h=8192>>g.z;g=new Sa(g.x*h,g.y*h);var l=new Sa(g.x+h,g.y+h);
h=this.segments.prepareSegment(4,c,d);c.emplaceBack(g.x,g.y,g.x,g.y);c.emplaceBack(l.x,g.y,l.x,g.y);c.emplaceBack(g.x,l.y,g.x,l.y);c.emplaceBack(l.x,l.y,l.x,l.y);g=h.vertexLength;d.emplaceBack(g,g+1,g+2);d.emplaceBack(g+1,g+2,g+3);h.vertexLength+=4;h.primitiveLength+=2}this.maskedBoundsBuffer=a.createVertexBuffer(c,xi.members);this.maskedIndexBuffer=a.createIndexBuffer(d)}};xc.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state};xc.prototype.patternsLoaded=
function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length};xc.prototype.setExpiryData=function(b){var a=this.expirationTime;b.cacheControl?(b=q(b.cacheControl),b["max-age"]&&(this.expirationTime=Date.now()+1E3*b["max-age"])):b.expires&&(this.expirationTime=(new Date(b.expires)).getTime());if(this.expirationTime){b=Date.now();var c=!1;this.expirationTime>b?c=!1:a?this.expirationTime<a?c=!0:(a=this.expirationTime-a)?this.expirationTime=b+Math.max(a,3E4):c=!0:c=!0;c?(this.expiredRequestCount++,
this.state="expired"):this.expiredRequestCount=0}};xc.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1E3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)};xc.prototype.setFeatureState=function(b,a){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(b).length){var c=this.latestFeatureIndex.loadVTLayers(),d;for(d in this.buckets){var e=this.buckets[d],f=e.layers[0].sourceLayer||
"_geojsonTileLayer",g=c[f];f=b[f];g&&f&&0!==Object.keys(f).length&&(e.update(f,g,this.imageAtlas&&this.imageAtlas.patternPositions||{}),a&&a.style&&(this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(d).queryRadius(e))))}}};xc.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil};xc.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<be.now()};xc.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0};xc.prototype.setHoldDuration=
function(b){this.symbolFadeHoldUntil=be.now()+b};var Oi=function(b,a,c,d,e,f,g,h,k,l,r,t){var m=g.top*h-k,u=g.bottom*h+k,n=g.left*h-k;g=g.right*h+k;(this.boxStartIndex=b.length,l)?(t=u-m,0<t&&(t=Math.max(10*h,t),this._addLineCollisionCircles(b,a,c,c.segment,g-n,t,d,e,f,r))):(t&&(a=new Sa(n,m),h=new Sa(g,m),r=new Sa(n,u),u=new Sa(g,u),n=t*Math.PI/180,a._rotate(n),h._rotate(n),r._rotate(n),u._rotate(n),n=Math.min(a.x,h.x,r.x,u.x),g=Math.max(a.x,h.x,r.x,u.x),m=Math.min(a.y,h.y,r.y,u.y),u=Math.max(a.y,
h.y,r.y,u.y)),b.emplaceBack(c.x,c.y,n,m,g,u,d,e,f,0,0));this.boxEndIndex=b.length};Oi.prototype._addLineCollisionCircles=function(b,a,c,d,e,f,g,h,k,l){var r=f/2,t=Math.floor(e/r)||1;l=Math.floor(t*(1+.4*Math.log(l)/Math.LN2)/2);var m=-f/2,u=c;d+=1;c=m;var n=-e/2,v=n-e/4;do{if(0>--d){if(c>n)return;d=0;break}c-=a[d].dist(u);u=a[d]}while(c>v);u=a[d].dist(a[d+1]);for(v=-l;v<t+l;v++){var w=v*r,z=n+w;if(0>w&&(z+=w),w>e&&(z+=w-e),!(z<c)){for(;c+u<z;){if(c+=u,++d+1>=a.length)return;u=a[d].dist(a[d+1])}w=
z-c;var x=a[d];w=a[d+1].sub(x)._unit()._mult(w)._add(x)._round();b.emplaceBack(w.x,w.y,-f/2,-f/2,f/2,f/2,g,h,k,f/2,Math.abs(z-m)<r?0:.8*(z-m))}}};var ii=function(b,a){if(void 0===b&&(b=[]),void 0===a&&(a=Ii),this.data=b,this.length=this.data.length,this.compare=a,0<this.length)for(b=(this.length>>1)-1;0<=b;b--)this._down(b)};ii.prototype.push=function(b){this.data.push(b);this.length++;this._up(this.length-1)};ii.prototype.pop=function(){if(0!==this.length){var b=this.data[0],a=this.data.pop();return this.length--,
0<this.length&&(this.data[0]=a,this._down(0)),b}};ii.prototype.peek=function(){return this.data[0]};ii.prototype._up=function(b){for(var a=this.data,c=this.compare,d=a[b];0<b;){var e=b-1>>1,f=a[e];if(0<=c(d,f))break;a[b]=f;b=e}a[b]=d};ii.prototype._down=function(b){for(var a=this.data,c=this.compare,d=this.length>>1,e=a[b];b<d;){var f=1+(b<<1),g=a[f],h=f+1;if(h<this.length&&0>c(a[h],g)&&(f=h,g=a[h]),0<=c(g,e))break;a[b]=g;b=f}a[b]=e};var ji=a(function(b){b.exports=function(b,a){var c,d;var e=3&b.length;
var f=b.length-e;for(d=0;d<f;){var g=255&b.charCodeAt(d)|(255&b.charCodeAt(++d))<<8|(255&b.charCodeAt(++d))<<16|(255&b.charCodeAt(++d))<<24;++d;a=27492+(65535&(c=5*(65535&(a=(a^=461845907*(65535&(g=(g=3432918353*(65535&g)+((3432918353*(g>>>16)&65535)<<16)&4294967295)<<15|g>>>17))+((461845907*(g>>>16)&65535)<<16)&4294967295)<<13|a>>>19))+((5*(a>>>16)&65535)<<16)&4294967295))+((58964+(c>>>16)&65535)<<16)}switch(g=0,e){case 3:g^=(255&b.charCodeAt(d+2))<<16;case 2:g^=(255&b.charCodeAt(d+1))<<8;case 1:a^=
461845907*(65535&(g=(g=3432918353*(65535&(g^=255&b.charCodeAt(d)))+((3432918353*(g>>>16)&65535)<<16)&4294967295)<<15|g>>>17))+((461845907*(g>>>16)&65535)<<16)&4294967295}return a^=b.length,a=2246822507*(65535&(a^=a>>>16))+((2246822507*(a>>>16)&65535)<<16)&4294967295,a=3266489909*(65535&(a^=a>>>13))+((3266489909*(a>>>16)&65535)<<16)&4294967295,(a^a>>>16)>>>0}}),bj=a(function(b){b.exports=function(b,a){var c=b.length;a^=c;for(var d=0;4<=c;){var e=1540483477*(65535&(e=255&b.charCodeAt(d)|(255&b.charCodeAt(++d))<<
8|(255&b.charCodeAt(++d))<<16|(255&b.charCodeAt(++d))<<24))+((1540483477*(e>>>16)&65535)<<16);a=1540483477*(65535&a)+((1540483477*(a>>>16)&65535)<<16)^(e=1540483477*(65535&(e^=e>>>24))+((1540483477*(e>>>16)&65535)<<16));c-=4;++d}switch(c){case 3:a^=(255&b.charCodeAt(d+2))<<16;case 2:a^=(255&b.charCodeAt(d+1))<<8;case 1:a=1540483477*(65535&(a^=255&b.charCodeAt(d)))+((1540483477*(a>>>16)&65535)<<16)}return a=1540483477*(65535&(a^=a>>>13))+((1540483477*(a>>>16)&65535)<<16),(a^a>>>15)>>>0}});ji.murmur3=
ji;ji.murmur2=bj;b.Actor=Lh;b.AlphaImage=ze;b.CanonicalTileID=Xe;b.CollisionBoxArray=Ph;b.Color=sb;b.DEMData=hg;b.DataConstantProperty=Qa;b.DictionaryCoder=Ai;b.EXTENT=8192;b.ErrorEvent=wf;b.EvaluationParameters=yb;b.Event=og;b.Evented=ke;b.FeatureIndex=Hg;b.FillBucket=od;b.FillExtrusionBucket=Ce;b.ImageAtlas=Mh;b.ImagePosition=ei;b.LineBucket=Tc;b.LngLat=bc;b.LngLatBounds=sc;b.MercatorCoordinate=Ua;b.ONE_EM=24;b.OverscaledTileID=cc;b.Point=Sa;b.Point$1=Sa;b.ProgramConfiguration=Xb;b.Properties=rb;
b.Protobuf=ib;b.RGBAImage=Lc;b.RequestManager=xb;b.ResourceType=Di;b.SegmentVector=Wb;b.SourceFeatureState=Gg;b.StructArrayLayout1ui2=ui;b.StructArrayLayout2i4=Pf;b.StructArrayLayout2ui4=ng;b.StructArrayLayout3ui6=Ze;b.StructArrayLayout4i8=Vh;b.SymbolBucket=Kb;b.Texture=Ed;b.Tile=xc;b.Transitionable=af;b.Uniform1f=Ne;b.Uniform1i=Qf;b.Uniform2f=re;b.Uniform3f=ah;b.Uniform4f=yg;b.UniformColor=Cf;b.UniformMatrix4f=Hi;b.UnwrappedTileID=Wi;b.ValidationError=La;b.WritingMode=Kc;b.ZoomHistory=sh;b.addDynamicAttributes=
qf;b.asyncAll=function(b,a,c){if(!b.length)return c(null,[]);var d=b.length,e=Array(b.length),f=null;b.forEach(function(b,g){a(b,function(b,a){b&&(f=b);e[g]=a;0==--d&&c(f,e)})})};b.bezier=f;b.bindAll=w;b.browser=be;b.cacheEntryPossiblyAdded=function(b){++Ng>li&&(b.getActor().send("enforceCacheSizeLimit",Rh),Ng=0)};b.clamp=d;b.clearTileCache=function(b){var a=self.caches.delete("mapbox-tiles");b&&a.catch(b).then(function(){return b()})};b.clone=function(b){var a=new Cd(16);return a[0]=b[0],a[1]=b[1],
a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a};b.clone$1=x;b.config=Ob;b.create=function(){var b=new Cd(16);return Cd!=Float32Array&&(b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[11]=0,b[12]=0,b[13]=0,b[14]=0),b[0]=1,b[5]=1,b[10]=1,b[15]=1,b};b.create$1=function(){var b=new Cd(9);return Cd!=Float32Array&&(b[1]=0,b[2]=0,b[3]=0,b[5]=0,b[6]=0,b[7]=0),b[0]=1,b[4]=1,b[8]=1,b};b.create$2=
function(){var b=new Cd(4);return Cd!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b};b.createCommonjsModule=a;b.createExpression=db;b.createLayout=fb;b.createStyleLayer=function(b){return"custom"===b.type?new Nf(b):new Ig[b.type](b)};b.deepEqual=k;b.ease=Li;b.emitValidationErrors=qa;b.endsWith=y;b.enforceCacheSizeLimit=function(b){self.caches&&self.caches.open("mapbox-tiles").then(function(a){a.keys().then(function(c){for(var d=0;d<c.length-b;d++)a.delete(c[d])})})};b.evaluateRadialOffset=ie;b.evaluateSizeForFeature=
Ue;b.evaluateSizeForZoom=Sd;b.evented=Og;b.extend=r;b.featureFilter=Nb;b.filterObject=z;b.fromRotation=function(b,a){var c=Math.sin(a);a=Math.cos(a);return b[0]=a,b[1]=c,b[2]=0,b[3]=-c,b[4]=a,b[5]=0,b[6]=0,b[7]=0,b[8]=1,b};b.getAnchorAlignment=Uc;b.getAnchorJustification=Cc;b.getArrayBuffer=sd;b.getImage=vh;b.getJSON=function(b,a){return ug(r(b,{type:"json"}),a)};b.getReferrer=mi;b.getVideo=function(b,a){var c=self.document.createElement("video");c.muted=!0;c.onloadstart=function(){a(null,c)};for(var d=
0;d<b.length;d++){var e=self.document.createElement("source");var f=b[d];var g=void 0;(g=self.document.createElement("a")).href=f;g.protocol===self.document.location.protocol&&g.host===self.document.location.host||(c.crossOrigin="Anonymous");e.src=b[d];c.appendChild(e)}return{cancel:function(){}}};b.identity=function(b){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};b.invert=function(b,a){var c=a[0],d=a[1],e=a[2],f=a[3],
g=a[4],h=a[5],k=a[6],l=a[7],r=a[8],t=a[9],m=a[10],u=a[11],n=a[12],v=a[13],w=a[14];a=a[15];var z=c*h-d*g,x=c*k-e*g,A=c*l-f*g,y=d*k-e*h,B=d*l-f*h,p=e*l-f*k,q=r*v-t*n,C=r*w-m*n,D=r*a-u*n,I=t*w-m*v,E=t*a-u*v,N=m*a-u*w,H=z*N-x*E+A*I+y*D-B*C+p*q;return H?(H=1/H,b[0]=(h*N-k*E+l*I)*H,b[1]=(e*E-d*N-f*I)*H,b[2]=(v*p-w*B+a*y)*H,b[3]=(m*B-t*p-u*y)*H,b[4]=(k*D-g*N-l*C)*H,b[5]=(c*N-e*D+f*C)*H,b[6]=(w*A-n*p-a*x)*H,b[7]=(r*p-m*A+u*x)*H,b[8]=(g*E-h*D+l*q)*H,b[9]=(d*D-c*E-f*q)*H,b[10]=(n*B-v*A+a*z)*H,b[11]=(t*A-r*
B-u*z)*H,b[12]=(h*C-g*I-k*q)*H,b[13]=(c*I-d*C+e*q)*H,b[14]=(v*x-n*y-w*z)*H,b[15]=(r*y-t*x+m*z)*H,b):null};b.isChar=Ia;b.isMapboxURL=F;b.keysDifference=function(b,a){var c=[],d;for(d in b)d in a||c.push(d);return c};b.makeRequest=ug;b.mapObject=A;b.mercatorXfromLng=fe;b.mercatorYfromLat=Fg;b.mercatorZfromAltitude=function(b,a){return b/(gi*Math.cos(a*Math.PI/180))};b.multiply=function(b,a,c){var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],k=a[5],l=a[6],r=a[7],t=a[8],m=a[9],u=a[10],n=a[11],v=a[12],w=a[13],z=
a[14];a=a[15];var x=c[0],A=c[1],y=c[2],B=c[3];return b[0]=x*d+A*h+y*t+B*v,b[1]=x*e+A*k+y*m+B*w,b[2]=x*f+A*l+y*u+B*z,b[3]=x*g+A*r+y*n+B*a,x=c[4],A=c[5],y=c[6],B=c[7],b[4]=x*d+A*h+y*t+B*v,b[5]=x*e+A*k+y*m+B*w,b[6]=x*f+A*l+y*u+B*z,b[7]=x*g+A*r+y*n+B*a,x=c[8],A=c[9],y=c[10],B=c[11],b[8]=x*d+A*h+y*t+B*v,b[9]=x*e+A*k+y*m+B*w,b[10]=x*f+A*l+y*u+B*z,b[11]=x*g+A*r+y*n+B*a,x=c[12],A=c[13],y=c[14],B=c[15],b[12]=x*d+A*h+y*t+B*v,b[13]=x*e+A*k+y*m+B*w,b[14]=x*f+A*l+y*u+B*z,b[15]=x*g+A*r+y*n+B*a,b};b.mvt=Ih;b.number=
ha;b.ortho=function(b,a,c,d,e,f,g){var h=1/(a-c),k=1/(d-e),l=1/(f-g);return b[0]=-2*h,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=-2*k,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=2*l,b[11]=0,b[12]=(a+c)*h,b[13]=(e+d)*k,b[14]=(g+f)*l,b[15]=1,b};b.parseGlyphPBF=function(b){return(new ib(b)).readFields(Ab,[])};b.pbf=ib;b.performSymbolLayout=function(b,a,c,d,e,f){b.createArrays();b.tilePixelRatio=8192/(512*b.overscaling);b.compareText={};b.iconsNeedLinear=!1;var g=b.layers[0].layout,h=b.layers[0]._unevaluatedLayout._values,
k={};if("composite"===b.textSizeData.kind){var l=b.textSizeData,r=l.maxZoom;k.compositeTextSizes=[h["text-size"].possiblyEvaluate(new yb(l.minZoom)),h["text-size"].possiblyEvaluate(new yb(r))]}"composite"===b.iconSizeData.kind&&(l=b.iconSizeData,r=l.maxZoom,k.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new yb(l.minZoom)),h["icon-size"].possiblyEvaluate(new yb(r))]);k.layoutTextSize=h["text-size"].possiblyEvaluate(new yb(b.zoom+1));k.layoutIconSize=h["icon-size"].possiblyEvaluate(new yb(b.zoom+
1));k.textMaxSize=h["text-size"].possiblyEvaluate(new yb(18));var t=24*g.get("text-line-height"),m="map"===g.get("text-rotation-alignment")&&"point"!==g.get("symbol-placement"),u=g.get("text-keep-upright");h=function(){var f=v[n],h=g.get("text-font").evaluate(f,{}).join(","),l={horizontal:{},vertical:void 0},r=f.text,w=[0,0];if(r){var z=r.toString(),x=24*g.get("text-letter-spacing").evaluate(f,{}),A=function(b){for(var a=0;a<b.length;a+=1){var c=b[a].charCodeAt(0);if(Ia.Arabic(c)||Ia["Arabic Supplement"](c)||
Ia["Arabic Extended-A"](c)||Ia["Arabic Presentation Forms-A"](c)||Ia["Arabic Presentation Forms-B"](c))return!1}return!0}(z)?x:0,y=g.get("text-anchor").evaluate(f,{}),B=g.get("text-variable-anchor");x=g.get("text-radial-offset").evaluate(f,{});B||(w=x?ie(y,24*x):g.get("text-offset").evaluate(f,{}).map(function(b){return 24*b}));var q=m?"center":g.get("text-justify").evaluate(f,{}),C="point"===g.get("symbol-placement")?24*g.get("text-max-width").evaluate(f,{}):0;x=function(){b.allowVerticalPlacement&&
pa(z)&&(l.vertical=Ca(r,a,h,C,t,y,"left",A,w,Kc.vertical,!0))};if(!m&&B){B="auto"===q?B.map(function(b){return Cc(b)}):[q];q=!1;for(var D=0;D<B.length;D++){var I=B[D];if(!l.horizontal[I])if(q)l.horizontal[I]=l.horizontal[0];else{var E=Ca(r,a,h,C,t,"center",I,A,w,Kc.horizontal,!1);E&&(l.horizontal[I]=E,q=1===E.lineCount)}}x()}else"auto"===q&&(q=Cc(y)),(B=Ca(r,a,h,C,t,y,q,A,w,Kc.horizontal,!1))&&(l.horizontal[q]=B),x(),pa(z)&&m&&u&&(l.vertical=Ca(r,a,h,C,t,y,q,A,w,Kc.vertical,!1))}x=void 0;f.icon&&
(B=d[f.icon])&&(x=function(b,a,c){var d=Uc(c);c=a[0]-b.displaySize[0]*d.horizontalAlign;a=a[1]-b.displaySize[1]*d.verticalAlign;return{image:b,top:a,bottom:a+b.displaySize[1],left:c,right:c+b.displaySize[0]}}(e[f.icon],g.get("icon-offset").evaluate(f,{}),g.get("icon-anchor").evaluate(f,{})),void 0===b.sdfIcons?b.sdfIcons=B.sdf:b.sdfIcons!==B.sdf&&p("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),B.pixelRatio!==b.pixelRatio?b.iconsNeedLinear=!0:0!==g.get("icon-rotate").constantOr(1)&&
(b.iconsNeedLinear=!0));(Object.keys(l.horizontal).length||x)&&function(b,a,c,d,e,f,g){var h=f.layoutTextSize.evaluate(a,{}),k=f.layoutIconSize.evaluate(a,{}),l=f.textMaxSize.evaluate(a,{});void 0===l&&(l=h);var r=b.layers[0].layout,t=r.get("icon-offset").evaluate(a,{}),m=ch(c.horizontal),u=h/24*b.tilePixelRatio;h=b.tilePixelRatio*l/24;var n=b.tilePixelRatio*k;l=b.tilePixelRatio*r.get("symbol-spacing");var v=r.get("text-padding")*b.tilePixelRatio,w=r.get("icon-padding")*b.tilePixelRatio;k=r.get("text-max-angle")/
180*Math.PI;var z="map"===r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement"),x="map"===r.get("icon-rotation-alignment")&&"point"!==r.get("symbol-placement"),A=r.get("symbol-placement"),y=l/2;r=function(h,k){if(!(0>k.x||8192<=k.x||0>k.y||8192<=k.y)){var l=b.layers[0],r=b.collisionBoxArray,m=a.index,A=a.sourceLayerIndex,y=b.index,B=b.addToLineVertexArray(k,h),q=0,C=0,D=0,I={},E=ji(""),N=24*(l.layout.get("text-radial-offset").evaluate(a,{})||0);if(b.allowVerticalPlacement&&c.vertical){var H=
l.layout.get("text-rotate").evaluate(a,{})+90;var M=new Oi(r,h,k,m,A,y,c.vertical,u,v,z,b.overscaling,H)}for(var G in c.horizontal){H=c.horizontal[G];if(!K){E=ji(H.text);var K=l.layout.get("text-rotate").evaluate(a,{});K=new Oi(r,h,k,m,A,y,H,u,v,z,b.overscaling,K)}var J=1===H.lineCount;if(C+=Mc(b,k,H,l,z,a,g,B,c.vertical?Kc.horizontal:Kc.horizontalOnly,J?Object.keys(c.horizontal):[G],I,e,f),J)break}c.vertical&&(D+=Mc(b,k,c.vertical,l,z,a,g,B,Kc.vertical,["vertical"],I,e,f));G=K?K.boxStartIndex:b.collisionBoxArray.length;
K=K?K.boxEndIndex:b.collisionBoxArray.length;H=M?M.boxStartIndex:b.collisionBoxArray.length;M=M?M.boxEndIndex:b.collisionBoxArray.length;if(d){var F=ch(c.horizontal);q=d.image;var O=l.layout;var L=d.top-1/q.pixelRatio,Eb=d.left-1/q.pixelRatio;var xb=d.bottom+1/q.pixelRatio;var Q=d.right+1/q.pixelRatio;if("none"!==O.get("icon-text-fit")&&F){J=Q-Eb;var P=xb-L;L=O.get("text-size").evaluate(a,{})/24;xb=F.left*L;Eb=F.top*L;var $d=F.right*L-xb,T=F.bottom*L-Eb,Bi=O.get("icon-text-fit-padding")[0];var Y=
O.get("icon-text-fit-padding")[1];F=O.get("icon-text-fit-padding")[2];L=O.get("icon-text-fit-padding")[3];Q="width"===O.get("icon-text-fit")?.5*(T-P):0;var R="height"===O.get("icon-text-fit")?.5*($d-J):0;$d="width"===O.get("icon-text-fit")||"both"===O.get("icon-text-fit")?$d:J;P="height"===O.get("icon-text-fit")||"both"===O.get("icon-text-fit")?T:P;O=new Sa(xb+R-L,Eb+Q-Bi);J=new Sa(xb+R+Y+$d,Eb+Q-Bi);Y=new Sa(xb+R+Y+$d,Eb+Q+F+P);xb=new Sa(xb+R-L,Eb+Q+F+P)}else O=new Sa(Eb,L),J=new Sa(Q,L),Y=new Sa(Q,
xb),xb=new Sa(Eb,xb);if(F=l.layout.get("icon-rotate").evaluate(a,{})*Math.PI/180)Eb=Math.sin(F),F=Math.cos(F),Eb=[F,-Eb,Eb,F],O._matMult(Eb),J._matMult(Eb),xb._matMult(Eb),Y._matMult(Eb);J=[{tl:O,tr:J,bl:xb,br:Y,tex:q.paddedRect,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0}];q=l.layout.get("icon-rotate").evaluate(a,{});O=new Oi(r,h,k,m,A,y,d,n,w,!1,b.overscaling,q);q=4*J.length;h=b.iconSizeData;r=null;"source"===h.kind?65535<(r=[256*l.layout.get("icon-size").evaluate(a,{})])[0]&&p(b.layerIds[0]+
': Value for "icon-size" is \x3e\x3d 256. Reduce your "icon-size".'):"composite"===h.kind&&(65535<(r=[256*f.compositeIconSizes[0].evaluate(a,{}),256*f.compositeIconSizes[1].evaluate(a,{})])[0]||65535<r[1])&&p(b.layerIds[0]+': Value for "icon-size" is \x3e\x3d 256. Reduce your "icon-size".');b.addSymbols(b.icon,J,r,t,x,a,!1,k,B.lineStartIndex,B.lineLength)}l=O?O.boxStartIndex:b.collisionBoxArray.length;B=O?O.boxEndIndex:b.collisionBoxArray.length;b.glyphOffsetArray.length>=Kb.MAX_GLYPHS&&p("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");
b.symbolInstances.emplaceBack(k.x,k.y,0<=I.right?I.right:-1,0<=I.center?I.center:-1,0<=I.left?I.left:-1,I.vertical||-1,E,G,K,H,M,l,B,m,C,D,q,0,u,N)}};if("line"===A){A=0;for(var B=function(b,a,c,d,e){for(var f=[],g=0;g<b.length;g++)for(var h=b[g],k=void 0,l=0;l<h.length-1;l++){var r=h[l],t=h[l+1];r.x<a&&t.x<a||(r.x<a?r=(new Sa(a,r.y+(a-r.x)/(t.x-r.x)*(t.y-r.y)))._round():t.x<a&&(t=(new Sa(a,r.y+(a-r.x)/(t.x-r.x)*(t.y-r.y)))._round()),r.y<c&&t.y<c||(r.y<c?r=(new Sa(r.x+(c-r.y)/(t.y-r.y)*(t.x-r.x),c))._round():
t.y<c&&(t=(new Sa(r.x+(c-r.y)/(t.y-r.y)*(t.x-r.x),c))._round()),r.x>=d&&t.x>=d||(r.x>=d?r=(new Sa(d,r.y+(d-r.x)/(t.x-r.x)*(t.y-r.y)))._round():t.x>=d&&(t=(new Sa(d,r.y+(d-r.x)/(t.x-r.x)*(t.y-r.y)))._round()),r.y>=e&&t.y>=e||(r.y>=e?r=(new Sa(r.x+(e-r.y)/(t.y-r.y)*(t.x-r.x),e))._round():t.y>=e&&(t=(new Sa(r.x+(e-r.y)/(t.y-r.y)*(t.x-r.x),e))._round()),k&&r.equals(k[k.length-1])||(k=[r],f.push(k)),k.push(t)))))}return f}(a.geometry,0,0,8192,8192);A<B.length;A+=1)for(var q=B[A],C=0,D=ge(q,l,k,c.vertical||
m,d,24,h,b.overscaling,8192);C<D.length;C+=1){var I=D[C],E=m;E&&wi(b,E.text,y,I)||r(q,I)}}else if("line-center"===A)for(l=0,y=a.geometry;l<y.length;l+=1)A=y[l],1<A.length&&(B=gg(A,k,c.vertical||m,d,24,h))&&r(A,B);else if("Polygon"===a.type)for(m=0,h=Re(a.geometry,0);m<h.length;m+=1)k=h[m],l=he(k,16),r(k[0],new cg(l.x,l.y,0));else if("LineString"===a.type)for(m=0,h=a.geometry;m<h.length;m+=1)k=h[m],r(k,new cg(k[0].x,k[0].y,0));else if("Point"===a.type)for(m=0,h=a.geometry;m<h.length;m+=1)for(k=0,l=
h[m];k<l.length;k+=1)y=l[k],r([y],new cg(y.x,y.y,0))}(b,f,l,x,c,k,w)};for(var n=0,v=b.features;n<v.length;n+=1)h();f&&b.generateCollisionDebugBuffers()};b.perspective=function(b,a,c,d,e){var f;a=1/Math.tan(a/2);return b[0]=a/c,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=a,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[11]=-1,b[12]=0,b[13]=0,b[15]=0,null!=e&&e!==1/0?(f=1/(d-e),b[10]=(e+d)*f,b[14]=2*e*d*f):(b[10]=-1,b[14]=-2*d),b};b.pick=function(b,a){for(var c={},d=0;d<a.length;d++){var e=a[d];e in b&&(c[e]=b[e])}return c};b.plugin=
Pg;b.polygonIntersectsPolygon=qe;b.postMapLoadEvent=ki;b.postTurnstileEvent=ej;b.potpack=rf;b.rasterBoundsAttributes=xi;b.refProperties="type source source-layer minzoom maxzoom filter layout".split(" ");b.register=Ka;b.registerForPluginAvailability=function(b){return th?b({pluginURL:th,completionCallback:ni}):Og.once("pluginAvailable",b),b};b.rotate=function(b,a,c){var d=a[0],e=a[1],f=a[2];a=a[3];var g=Math.sin(c);c=Math.cos(c);return b[0]=d*c+f*g,b[1]=e*c+a*g,b[2]=d*-g+f*c,b[3]=e*-g+a*c,b};b.rotateX=
function(b,a,c){var d=Math.sin(c);c=Math.cos(c);var e=a[4],f=a[5],g=a[6],h=a[7],k=a[8],l=a[9],r=a[10],t=a[11];return a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]),b[4]=e*c+k*d,b[5]=f*c+l*d,b[6]=g*c+r*d,b[7]=h*c+t*d,b[8]=k*c-e*d,b[9]=l*c-f*d,b[10]=r*c-g*d,b[11]=t*c-h*d,b};b.rotateZ=function(b,a,c){var d=Math.sin(c);c=Math.cos(c);var e=a[0],f=a[1],g=a[2],h=a[3],k=a[4],l=a[5],r=a[6],t=a[7];return a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=
a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]),b[0]=e*c+k*d,b[1]=f*c+l*d,b[2]=g*c+r*d,b[3]=h*c+t*d,b[4]=k*c-e*d,b[5]=l*c-f*d,b[6]=r*c-g*d,b[7]=t*c-h*d,b};b.scale=function(b,a,c){var d=c[0],e=c[1];c=c[2];return b[0]=a[0]*d,b[1]=a[1]*d,b[2]=a[2]*d,b[3]=a[3]*d,b[4]=a[4]*e,b[5]=a[5]*e,b[6]=a[6]*e,b[7]=a[7]*e,b[8]=a[8]*c,b[9]=a[9]*c,b[10]=a[10]*c,b[11]=a[11]*c,b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b};b.setCacheLimits=function(b,a){Rh=b;li=a};b.setRTLTextPlugin=function(b,a){if(Ei)throw Error("setRTLTextPlugin cannot be called multiple times.");
Ei=!0;th=be.resolveURL(b);ni=function(b){b?(Ei=!1,th=null,a&&a(b)):Xa=!0};Og.fire(new og("pluginAvailable",{pluginURL:th,completionCallback:ni}))};b.sphericalToCartesian=function(b){var a=b[0],c=b[1];b=b[2];return c+=90,c*=Math.PI/180,b*=Math.PI/180,{x:a*Math.cos(c)*Math.sin(b),y:a*Math.sin(c)*Math.sin(b),z:a*Math.cos(b)}};b.styleSpec=ta;b.symbolSize=Rb;b.transformMat3=function(b,a,c){var d=a[0],e=a[1];a=a[2];return b[0]=d*c[0]+e*c[3]+a*c[6],b[1]=d*c[1]+e*c[4]+a*c[7],b[2]=d*c[2]+e*c[5]+a*c[8],b};
b.transformMat4=se;b.translate=function(b,a,c){var d,e,f,g,h,k,l,r,t,m,u,n,v=c[0],w=c[1];c=c[2];return a===b?(b[12]=a[0]*v+a[4]*w+a[8]*c+a[12],b[13]=a[1]*v+a[5]*w+a[9]*c+a[13],b[14]=a[2]*v+a[6]*w+a[10]*c+a[14],b[15]=a[3]*v+a[7]*w+a[11]*c+a[15]):(d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],k=a[5],l=a[6],r=a[7],t=a[8],m=a[9],u=a[10],n=a[11],b[0]=d,b[1]=e,b[2]=f,b[3]=g,b[4]=h,b[5]=k,b[6]=l,b[7]=r,b[8]=t,b[9]=m,b[10]=u,b[11]=n,b[12]=d*v+h*w+t*c+a[12],b[13]=e*v+k*w+m*c+a[13],b[14]=f*v+l*w+u*c+a[14],b[15]=g*v+r*
w+n*c+a[15]),b};b.uniqueId=function(){return Ae++};b.validateCustomStyleLayer=function(b){var a=[],c=b.id;return void 0===c&&a.push({message:"layers."+c+': missing required property "id"'}),void 0===b.render&&a.push({message:"layers."+c+': missing required method "render"'}),b.renderingMode&&"2d"!==b.renderingMode&&"3d"!==b.renderingMode&&a.push({message:"layers."+c+': property "renderingMode" must be either "2d" or "3d"'}),a};b.validateLight=id;b.validateStyle=pb;b.values=function(b){var a=[],c;
for(c in b)a.push(b[c]);return a};b.vectorTile=Ih;b.version="1.3.2";b.warnOnce=p;b.webpSupported=Qe;b.window=self;b.wrap=c});a(["./shared"],function(b){function a(b){var c=typeof b;if("number"===c||"boolean"===c||"string"===c||null==b)return JSON.stringify(b);if(Array.isArray(b)){c="[";for(var d=0;d<b.length;d+=1)c+=a(b[d])+",";return c+"]"}c=Object.keys(b).sort();d="{";for(var e=0;e<c.length;e++)d+=JSON.stringify(c[e])+":"+a(b[c[e]])+",";return d+"}"}function e(a,c){c=new b.EvaluationParameters(c);
for(var d=0;d<a.length;d+=1)a[d].recalculate(c)}function h(a,c){var d=b.getArrayBuffer(a.request,function(a,d,e,f){a?c(a):d&&c(null,{vectorTile:new b.vectorTile.VectorTile(new b.pbf(d)),rawData:d,cacheControl:e,expires:f})});return function(){d.cancel();c()}}function k(b){var a=0;if(b&&0<b.length){a+=Math.abs(f(b[0]));for(var c=1;c<b.length;c++)a-=Math.abs(f(b[c]))}return a}function f(b){var a,c,d,e,f=0,g=b.length;if(2<g){for(e=0;e<g;e++){e===g-2?(a=g-2,c=g-1,d=0):e===g-1?(a=g-1,c=0,d=1):(a=e,c=e+
1,d=e+2);var h=b[a];var k=b[c];f+=(b[d][0]*Math.PI/180-h[0]*Math.PI/180)*Math.sin(k[1]*Math.PI/180)}f=f*sa.RADIUS*sa.RADIUS/2}return f}function d(b,a){return function(c){return b(c,a)}}function c(b,a){a=!!a;b[0]=r(b[0],a);for(var c=1;c<b.length;c++)b[c]=r(b[c],!a);return b}function r(b,a){return 0<=W.ring(b)===a?b:b.reverse()}function m(b,a){this.options=a||{};this.features=b;this.length=b.length}function n(b,a){this.id="number"==typeof b.id?b.id:void 0;this.type=b.type;this.rawGeometry=1===b.type?
[b.geometry]:b.geometry;this.properties=b.tags;this.extent=a||4096}function w(a){var c=new b.pbf,d;for(d in a.layers)c.writeMessage(3,y,a.layers[d]);return c.finish()}function y(b,a){var c;a.writeVarintField(15,b.version||1);a.writeStringField(1,b.name||"");a.writeVarintField(5,b.extent||4096);var d={keys:[],values:[],keycache:{},valuecache:{}};for(c=0;c<b.length;c++)d.feature=b.feature(c),a.writeMessage(2,A,d);b=d.keys;for(c=0;c<b.length;c++)a.writeStringField(3,b[c]);d=d.values;for(c=0;c<d.length;c++)a.writeMessage(4,
p,d[c])}function A(b,a){var c=b.feature;void 0!==c.id&&a.writeVarintField(1,c.id);a.writeMessage(2,z,b);a.writeVarintField(3,c.type);a.writeMessage(4,x,c)}function z(b,a){var c=b.feature,d=b.keys,e=b.values,f=b.keycache;b=b.valuecache;for(var g in c.properties){var h=f[g];void 0===h&&(d.push(g),h=d.length-1,f[g]=h);a.writeVarint(h);h=c.properties[g];var k=typeof h;"string"!==k&&"boolean"!==k&&"number"!==k&&(h=JSON.stringify(h));k=k+":"+h;var l=b[k];void 0===l&&(e.push(h),l=e.length-1,b[k]=l);a.writeVarint(l)}}
function x(b,a){var c=b.loadGeometry();b=b.type;for(var d=0,e=0,f=c.length,g=0;g<f;g++){var h=c[g],k=1;1===b&&(k=h.length);a.writeVarint((k<<3)+1);k=3===b?h.length-1:h.length;for(var l=0;l<k;l++){1===l&&1!==b&&a.writeVarint((k-1<<3)+2);var r=h[l].x-d,t=h[l].y-e;a.writeVarint(r<<1^r>>31);a.writeVarint(t<<1^t>>31);d+=r;e+=t}3===b&&a.writeVarint(15)}}function p(b,a){var c=typeof b;"string"===c?a.writeStringField(1,b):"boolean"===c?a.writeBooleanField(7,b):"number"===c&&(0!=b%1?a.writeDoubleField(3,b):
0>b?a.writeSVarintField(6,b):a.writeVarintField(5,b))}function B(b,a,c,d,e,f){if(!(e-d<=c)){var g=d+e>>1;!function Wc(b,a,c,d,e,f){for(;e>d;){if(600<e-d){var g=e-d+1,h=c-d+1,k=Math.log(g),l=.5*Math.exp(2*k/3);k=.5*Math.sqrt(k*l*(g-l)/g)*(0>h-g/2?-1:1);Wc(b,a,c,Math.max(d,Math.floor(c-h*l/g+k)),Math.min(e,Math.floor(c+(g-h)*l/g+k)),f)}g=a[2*c+f];h=d;l=e;q(b,a,d,c);for(a[2*e+f]>g&&q(b,a,d,e);h<l;){q(b,a,h,l);h++;for(l--;a[2*h+f]<g;)h++;for(;a[2*l+f]>g;)l--}a[2*d+f]===g?q(b,a,d,l):q(b,a,++l,e);l<=c&&
(d=l+1);c<=l&&(e=l-1)}}(b,a,g,d,e,f%2);B(b,a,c,d,g-1,f+1);B(b,a,c,g+1,e,f+1)}}function q(b,a,c,d){G(b,c,d);G(a,2*c,2*d);G(a,2*c+1,2*d+1)}function G(b,a,c){var d=b[a];b[a]=b[c];b[c]=d}function E(b,a){b=b.geometry.coordinates;return{x:b[0]/360+.5,y:J(b[1]),zoom:1/0,index:a,parentId:-1}}function F(b){return{type:"Feature",id:b.id,properties:L(b),geometry:{type:"Point",coordinates:[(d=b.x,360*(d-.5)),(a=b.y,c=(180-360*a)*Math.PI/180,360*Math.atan(Math.exp(c))/Math.PI-90)]}};var a,c,d}function L(b){var a=
b.numPoints,c=1E4<=a?Math.round(a/1E3)+"k":1E3<=a?Math.round(a/100)/10+"k":a;return H(H({},b.properties),{cluster:!0,cluster_id:b.id,point_count:a,point_count_abbreviated:c})}function J(b){b=Math.sin(b*Math.PI/180);b=.5-.25*Math.log((1+b)/(1-b))/Math.PI;return 0>b?0:1<b?1:b}function H(b,a){for(var c in a)b[c]=a[c];return b}function K(b){return b.x}function M(b){return b.y}function I(b,a,c,d){b={id:void 0===b?null:b,type:a,geometry:c,tags:d,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};a=b.geometry;c=b.type;
if("Point"===c||"MultiPoint"===c||"LineString"===c)N(b,a);else if("Polygon"===c||"MultiLineString"===c)for(c=0;c<a.length;c++)N(b,a[c]);else if("MultiPolygon"===c)for(c=0;c<a.length;c++)for(d=0;d<a[c].length;d++)N(b,a[c][d]);return b}function N(b,a){for(var c=0;c<a.length;c+=3)b.minX=Math.min(b.minX,a[c]),b.minY=Math.min(b.minY,a[c+1]),b.maxX=Math.max(b.maxX,a[c]),b.maxY=Math.max(b.maxY,a[c+1])}function O(b,a,c,d){if(a.geometry){var e=a.geometry.coordinates,f=a.geometry.type,g=Math.pow(c.tolerance/
((1<<c.maxZoom)*c.extent),2),h=[],k=a.id;if(c.promoteId?k=a.properties[c.promoteId]:c.generateId&&(k=d||0),"Point"===f)P(e,h);else if("MultiPoint"===f)for(var l=0;l<e.length;l++)P(e[l],h);else if("LineString"===f)Q(e,h,g,!1);else if("MultiLineString"===f){if(c.lineMetrics){for(l=0;l<e.length;l++)h=[],Q(e[l],h,g,!1),b.push(I(k,"LineString",h,a.properties));return}T(e,h,g,!1)}else if("Polygon"===f)T(e,h,g,!0);else{if("MultiPolygon"!==f){if("GeometryCollection"===f){for(l=0;l<a.geometry.geometries.length;l++)O(b,
{id:k,geometry:a.geometry.geometries[l],properties:a.properties},c,d);return}throw Error("Input data is not a valid GeoJSON object.");}for(l=0;l<e.length;l++)c=[],T(e[l],c,g,!0),h.push(c)}b.push(I(k,f,h,a.properties))}}function P(b,a){a.push(b[0]/360+.5);a.push(V(b[1]));a.push(0)}function Q(b,a,c,d){for(var e,f,g=0,h=0;h<b.length;h++){var k=b[h][0]/360+.5,l=V(b[h][1]);a.push(k);a.push(l);a.push(0);0<h&&(g+=d?(e*l-k*f)/2:Math.sqrt(Math.pow(k-e,2)+Math.pow(l-f,2)));e=k;f=l}b=a.length-3;a[2]=1;(function vb(b,
a,c,d){for(var e,f=d,g=c-a>>1,h=c-a,k=b[a],l=b[a+1],r=b[c],t=b[c+1],m=a+3;m<c;m+=3){var u=b[m];var n=b[m+1],v=k,w=l,z=r-v,x=t-w;if(0!==z||0!==x){var A=((u-v)*z+(n-w)*x)/(z*z+x*x);1<A?(v=r,w=t):0<A&&(v+=z*A,w+=x*A)}u=(z=u-v)*z+(x=n-w)*x;u>f?(e=m,f=u):u===f&&(z=Math.abs(m-g),z<h&&(e=m,h=z))}f>d&&(3<e-a&&vb(b,a,e,d),b[e+2]=f,3<c-e&&vb(b,e,c,d))})(a,0,b,c);a[b+2]=1;a.size=Math.abs(g);a.start=0;a.end=a.size}function T(b,a,c,d){for(var e=0;e<b.length;e++){var f=[];Q(b[e],f,c,d);a.push(f)}}function V(b){b=
Math.sin(b*Math.PI/180);b=.5-.25*Math.log((1+b)/(1-b))/Math.PI;return 0>b?0:1<b?1:b}function Y(b,a,c,d,e,f,g,h){if(d/=a,f>=(c/=a)&&g<d)return b;if(g<c||f>=d)return null;a=[];for(f=0;f<b.length;f++){g=b[f];var k=g.geometry,l=g.type,r=0===e?g.minX:g.minY,t=0===e?g.maxX:g.maxY;if(r>=c&&t<d)a.push(g);else if(!(t<c||r>=d)){r=[];if("Point"===l||"MultiPoint"===l){t=r;for(var m=c,u=d,n=e,v=0;v<k.length;v+=3){var w=k[v+n];w>=m&&w<=u&&(t.push(k[v]),t.push(k[v+1]),t.push(k[v+2]))}}else if("LineString"===l)ca(k,
r,c,d,e,!1,h.lineMetrics);else if("MultiLineString"===l)R(k,r,c,d,e,!1);else if("Polygon"===l)R(k,r,c,d,e,!0);else if("MultiPolygon"===l)for(t=0;t<k.length;t++)m=[],R(k[t],m,c,d,e,!0),m.length&&r.push(m);if(r.length)if(h.lineMetrics&&"LineString"===l)for(t=0;t<r.length;t++)a.push(I(g.id,l,r[t],g.tags));else"LineString"!==l&&"MultiLineString"!==l||(1===r.length?(l="LineString",r=r[0]):l="MultiLineString"),"Point"!==l&&"MultiPoint"!==l||(l=3===r.length?"Point":"MultiPoint"),a.push(I(g.id,l,r,g.tags))}}return a.length?
a:null}function ca(b,a,c,d,e,f,g){for(var h,k,l=Z(b),r=0===e?U:X,t=b.start,m=0;m<b.length-3;m+=3){var u=b[m],n=b[m+1],v=b[m+2],w=b[m+3],z=b[m+4],x=0===e?u:n,A=0===e?w:z,y=!1;g&&(h=Math.sqrt(Math.pow(u-w,2)+Math.pow(n-z,2)));if(x<c)A>c&&(k=r(l,u,n,w,z,c),g&&(l.start=t+h*k));else if(x>d)A<d&&(k=r(l,u,n,w,z,d),g&&(l.start=t+h*k));else{var B=l,p=n;B.push(u);B.push(p);B.push(v)}A<c&&x>=c&&(k=r(l,u,n,w,z,c),y=!0);A>d&&x<=d&&(k=r(l,u,n,w,z,d),y=!0);!f&&y&&(g&&(l.end=t+h*k),a.push(l),l=Z(b));g&&(t+=h)}v=
b.length-3;u=b[v];n=b[v+1];v=b[v+2];(x=0===e?u:n)>=c&&x<=d&&(b=l,c=v,b.push(u),b.push(n),b.push(c));v=l.length-3;f&&3<=v&&(l[v]!==l[0]||l[v+1]!==l[1])&&(f=l,u=l[1],n=l[2],f.push(l[0]),f.push(u),f.push(n));l.length&&a.push(l)}function Z(b){var a=[];return a.size=b.size,a.start=b.start,a.end=b.end,a}function R(b,a,c,d,e,f){for(var g=0;g<b.length;g++)ca(b[g],a,c,d,e,f,!1)}function U(b,a,c,d,e,f){a=(f-a)/(d-a);return b.push(f),b.push(c+(e-c)*a),b.push(1),a}function X(b,a,c,d,e,f){c=(f-c)/(e-c);return b.push(a+
(d-a)*c),b.push(f),b.push(1),c}function ea(b,a){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=e.type;if("Point"===f||"MultiPoint"===f||"LineString"===f)var g=fa(e.geometry,a);else if("MultiLineString"===f||"Polygon"===f){g=[];for(var h=0;h<e.geometry.length;h++)g.push(fa(e.geometry[h],a))}else if("MultiPolygon"===f)for(g=[],h=0;h<e.geometry.length;h++){for(var k=[],l=0;l<e.geometry[h].length;l++)k.push(fa(e.geometry[h][l],a));g.push(k)}c.push(I(e.id,f,g,e.tags))}return c}function fa(b,a){var c=[];
c.size=b.size;void 0!==b.start&&(c.start=b.start,c.end=b.end);for(var d=0;d<b.length;d+=3)c.push(b[d]+a,b[d+1],b[d+2]);return c}function la(b,a){if(b.transformed)return b;var c,d,e=1<<b.z,f=b.x,g=b.y;for(c=0;c<b.features.length;c++){var h=b.features[c],k=h.geometry;var l=h.type;if(h.geometry=[],1===l)for(l=0;l<k.length;l+=2)h.geometry.push([Math.round(a*(k[l]*e-f)),Math.round(a*(k[l+1]*e-g))]);else for(l=0;l<k.length;l++){var r=[];for(d=0;d<k[l].length;d+=2)r.push([Math.round(a*(k[l][d]*e-f)),Math.round(a*
(k[l][d+1]*e-g))]);h.geometry.push(r)}}return b.transformed=!0,b}function da(b,a,c,d,e,f){var g=d*d;if(0<d&&a.size<(e?g:d))c.numPoints+=a.length/3;else{for(var h=[],k=0;k<a.length;k+=3)(0===d||a[k+2]>g)&&(c.numSimplified++,h.push(a[k]),h.push(a[k+1])),c.numPoints++;if(e){a=d=0;c=h.length;for(e=c-2;a<c;e=a,a+=2)d+=(h[a]-h[e])*(h[a+1]+h[e+1]);if(0<d===f)for(a=0,c=h.length;a<c/2;a+=2)f=h[a],d=h[a+1],h[a]=h[c-2-a],h[a+1]=h[c-1-a],h[c-2-a]=f,h[c-1-a]=d}b.push(h)}}function ma(b,a){var c=(a=this.options=
function(b,a){for(var c in a)b[c]=a[c];return b}(Object.create(this.options),a)).debug;if(c&&console.time("preprocess data"),0>a.maxZoom||24<a.maxZoom)throw Error("maxZoom should be in the 0-24 range");if(a.promoteId&&a.generateId)throw Error("promoteId and generateId cannot be used together.");b=function(b,a){var c=[];if("FeatureCollection"===b.type)for(var d=0;d<b.features.length;d++)O(c,b.features[d],a,d);else"Feature"===b.type?O(c,b,a):O(c,{geometry:b},a);return c}(b,a);this.tiles={};this.tileCoords=
[];c&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",a.indexMaxZoom,a.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0);(b=function(b,a){var c=a.buffer/a.extent,d=b,e=Y(b,1,-1-c,c,0,-1,2,a),f=Y(b,1,1-c,2+c,0,-1,2,a);return(e||f)&&(d=Y(b,1,-c,1+c,0,-1,2,a)||[],e&&(d=ea(e,1).concat(d)),f&&(d=d.concat(ea(f,-1)))),d}(b,a)).length&&this.splitTile(b,0,0,0);c&&(b.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),
console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function aa(b,a){b=b.tileID.canonical;if(!this._geoJSONIndex)return a(null,null);b=this._geoJSONIndex.getTile(b.z,b.x,b.y);if(!b)return a(null,null);b=new ua(b.features);var c=Aa(b);0===c.byteOffset&&c.byteLength===c.buffer.byteLength||(c=new Uint8Array(c));a(null,{vectorTile:b,rawData:c.buffer})}var na=function(b){this.keyCache={};b&&this.replace(b)};na.prototype.replace=function(b){this._layerConfigs=
{};this._layers={};this.update(b,[])};na.prototype.update=function(c,d){for(var e=this,f=0;f<c.length;f+=1){var g=c[f];this._layerConfigs[g.id]=g;var h=this._layers[g.id]=b.createStyleLayer(g);h._featureFilter=b.featureFilter(h.filter);this.keyCache[g.id]&&delete this.keyCache[g.id]}for(c=0;c<d.length;c+=1)f=d[c],delete this.keyCache[f],delete this._layerConfigs[f],delete this._layers[f];this.familiesBySource={};d=0;for(c=function(c,d){for(var e={},f=0;f<c.length;f++){var g;if(!(g=d&&d[c[f].id])){g=
c[f];for(var h="",k=0,l=b.refProperties;k<l.length;k+=1)h+="/"+a(g[l[k]]);g=h}d&&(d[c[f].id]=g);(h=e[g])||(h=e[g]=[]);h.push(c[f])}c=[];for(var r in e)c.push(e[r]);return c}(b.values(this._layerConfigs),this.keyCache);d<c.length;d+=1)if(f=c[d].map(function(b){return e._layers[b.id]}),h=f[0],"none"!==h.visibility){var k=h.source||"";(g=this.familiesBySource[k])||(g=this.familiesBySource[k]={});h=h.sourceLayer||"_geojsonTileLayer";(k=g[h])||(k=g[h]=[]);k.push(f)}};var ha=function(a){var c={},d=[];for(r in a){var e=
a[r],f=c[r]={},g;for(g in e){var h=e[+g];if(h&&0!==h.bitmap.width&&0!==h.bitmap.height){var k={x:0,y:0,w:h.bitmap.width+2,h:h.bitmap.height+2};d.push(k);f[g]={rect:k,metrics:h.metrics}}}}d=b.potpack(d);d=new b.AlphaImage({width:d.w||1,height:d.h||1});for(var l in a){var r=a[l];for(var t in r)(e=r[+t])&&0!==e.bitmap.width&&0!==e.bitmap.height&&(f=c[l][t].rect,b.AlphaImage.copy(e.bitmap,d,{x:0,y:0},{x:f.x+1,y:f.y+1},e.bitmap))}this.image=d;this.positions=c};b.register("GlyphAtlas",ha);var ja=function(a){this.tileID=
new b.OverscaledTileID(a.tileID.overscaledZ,a.tileID.wrap,a.tileID.canonical.z,a.tileID.canonical.x,a.tileID.canonical.y);this.uid=a.uid;this.zoom=a.zoom;this.pixelRatio=a.pixelRatio;this.tileSize=a.tileSize;this.source=a.source;this.overscaling=this.tileID.overscaleFactor();this.showCollisionBoxes=a.showCollisionBoxes;this.collectResourceTiming=!!a.collectResourceTiming;this.returnDependencies=!!a.returnDependencies};ja.prototype.parse=function(a,c,d,f){function g(){if(r)return f(r);if(t&&m&&u){var a=
new ha(t),c=new b.ImageAtlas(m,u),d;for(d in n){var g=n[d];g instanceof b.SymbolBucket?(e(g.layers,this.zoom),b.performSymbolLayout(g,t,a.positions,m,c.iconPositions,this.showCollisionBoxes)):g.hasPattern&&(g instanceof b.LineBucket||g instanceof b.FillBucket||g instanceof b.FillExtrusionBucket)&&(e(g.layers,this.zoom),g.addFeatures(v,c.patternPositions))}this.status="done";f(null,{buckets:b.values(n).filter(function(b){return!b.isEmpty()}),featureIndex:l,collisionBoxArray:this.collisionBoxArray,
glyphAtlasImage:a.image,imageAtlas:c,glyphMap:this.returnDependencies?t:null,iconMap:this.returnDependencies?m:null,glyphPositions:this.returnDependencies?a.positions:null})}}var h=this;this.status="parsing";this.data=a;this.collisionBoxArray=new b.CollisionBoxArray;var k=new b.DictionaryCoder(Object.keys(a.layers).sort()),l=new b.FeatureIndex(this.tileID);l.bucketLayerIDs=[];var r,t,m,u,n={},v={featureIndex:l,iconDependencies:{},patternDependencies:{},glyphDependencies:{}};c=c.familiesBySource[this.source];
for(var w in c){var z=a.layers[w];if(z){1===z.version&&b.warnOnce('Vector tile source "'+this.source+'" layer "'+w+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var x=k.encode(w),A=[],y=0;y<z.length;y++){var B=z.feature(y);A.push({feature:B,index:y,sourceLayerIndex:x})}z=0;for(y=c[w];z<y.length;z+=1){B=y[z];var p=B[0];p.minzoom&&this.zoom<Math.floor(p.minzoom)||p.maxzoom&&this.zoom>=p.maxzoom||"none"===p.visibility||(e(B,this.zoom),(n[p.id]=p.createBucket({index:l.bucketLayerIDs.length,
layers:B,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:x,sourceID:this.source})).populate(A,v),l.bucketLayerIDs.push(B.map(function(b){return b.id})))}}}a=b.mapObject(v.glyphDependencies,function(b){return Object.keys(b).map(Number)});Object.keys(a).length?d.send("getGlyphs",{uid:this.uid,stacks:a},function(b,a){r||(r=b,t=a,g.call(h))}):t={};a=Object.keys(v.iconDependencies);a.length?d.send("getImages",{icons:a},function(b,
a){r||(r=b,m=a,g.call(h))}):m={};a=Object.keys(v.patternDependencies);a.length?d.send("getImages",{icons:a},function(b,a){r||(r=b,u=a,g.call(h))}):u={};g.call(this)};var oa="undefined"!=typeof performance,ka={getEntriesByName:function(b){return!!(oa&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(b)},mark:function(b){return!!(oa&&performance&&performance.mark)&&performance.mark(b)},measure:function(b,a,c){return!!(oa&&performance&&performance.measure)&&performance.measure(b,
a,c)},clearMarks:function(b){return!!(oa&&performance&&performance.clearMarks)&&performance.clearMarks(b)},clearMeasures:function(b){return!!(oa&&performance&&performance.clearMeasures)&&performance.clearMeasures(b)}},ia=function(b){this._marks={start:[b.url,"start"].join("#"),end:[b.url,"end"].join("#"),measure:b.url.toString()};ka.mark(this._marks.start)};ia.prototype.finish=function(){ka.mark(this._marks.end);var b=ka.getEntriesByName(this._marks.measure);return 0===b.length&&(ka.measure(this._marks.measure,
this._marks.start,this._marks.end),b=ka.getEntriesByName(this._marks.measure),ka.clearMarks(this._marks.start),ka.clearMarks(this._marks.end),ka.clearMeasures(this._marks.measure)),b};ka.Performance=ia;var xa=function(b,a,c){this.actor=b;this.layerIndex=a;this.loadVectorData=c||h;this.loading={};this.loaded={}};xa.prototype.loadTile=function(a,c){var d=this,e=a.uid;this.loading||(this.loading={});var f=!!(a&&a.request&&a.request.collectResourceTiming)&&new ka.Performance(a.request),g=this.loading[e]=
new ja(a);g.abort=this.loadVectorData(a,function(a,h){if(delete d.loading[e],a||!h)return g.status="done",d.loaded[e]=g,c(a);var k=h.rawData,l={};h.expires&&(l.expires=h.expires);h.cacheControl&&(l.cacheControl=h.cacheControl);var r={};f&&(a=f.finish())&&(r.resourceTiming=JSON.parse(JSON.stringify(a)));g.vectorTile=h.vectorTile;g.parse(h.vectorTile,d.layerIndex,d.actor,function(a,d){if(a||!d)return c(a);c(null,b.extend({rawTileData:k.slice(0)},d,l,r))});d.loaded=d.loaded||{};d.loaded[e]=g})};xa.prototype.reloadTile=
function(b,a){var c=this.loaded,d=b.uid,e=this;if(c&&c[d]){var f=c[d];f.showCollisionBoxes=b.showCollisionBoxes;b=function(b,c){var d=f.reloadCallback;d&&(delete f.reloadCallback,f.parse(f.vectorTile,e.layerIndex,e.actor,d));a(b,c)};"parsing"===f.status?f.reloadCallback=b:"done"===f.status&&(f.vectorTile?f.parse(f.vectorTile,this.layerIndex,this.actor,b):b())}};xa.prototype.abortTile=function(b,a){var c=this.loading;b=b.uid;c&&c[b]&&c[b].abort&&(c[b].abort(),delete c[b]);a()};xa.prototype.removeTile=
function(b,a){var c=this.loaded;b=b.uid;c&&c[b]&&delete c[b];a()};var ya=function(){this.loaded={}};ya.prototype.loadTile=function(a,c){var d=a.uid;a=new b.DEMData(d,a.rawImageData,a.encoding);this.loaded=this.loaded||{};this.loaded[d]=a;c(null,a)};ya.prototype.removeTile=function(b){var a=this.loaded;b=b.uid;a&&a[b]&&delete a[b]};var sa={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142},W={geometry:function Mb(b){var a,c=0;switch(b.type){case "Polygon":return k(b.coordinates);
case "MultiPolygon":for(a=0;a<b.coordinates.length;a++)c+=k(b.coordinates[a]);return c;case "Point":case "MultiPoint":case "LineString":case "MultiLineString":return 0;case "GeometryCollection":for(a=0;a<b.geometries.length;a++)c+=Mb(b.geometries[a]);return c}},ring:f},za=function zb(b,a){switch(b&&b.type||null){case "FeatureCollection":return b.features=b.features.map(d(zb,a)),b;case "GeometryCollection":return b.geometries=b.geometries.map(d(zb,a)),b;case "Feature":return b.geometry=zb(b.geometry,
a),b;case "Polygon":case "MultiPolygon":return"Polygon"===b.type?b.coordinates=c(b.coordinates,a):"MultiPolygon"===b.type&&(b.coordinates=b.coordinates.map(d(c,a))),b;default:return b}},Da=b.vectorTile.VectorTileFeature.prototype.toGeoJSON,ra=function(a){this._feature=a;this.extent=b.EXTENT;this.type=a.type;this.properties=a.tags;"id"in a&&!isNaN(a.id)&&(this.id=parseInt(a.id,10))};ra.prototype.loadGeometry=function(){if(1===this._feature.type){for(var a=[],c=0,d=this._feature.geometry;c<d.length;c+=
1){var e=d[c];a.push([new b.Point$1(e[0],e[1])])}return a}a=[];c=0;for(d=this._feature.geometry;c<d.length;c+=1){e=[];for(var f=0,g=d[c];f<g.length;f+=1){var h=g[f];e.push(new b.Point$1(h[0],h[1]))}a.push(e)}return a};ra.prototype.toGeoJSON=function(b,a,c){return Da.call(this,b,a,c)};var ua=function(a){this.layers={_geojsonTileLayer:this};this.name="_geojsonTileLayer";this.extent=b.EXTENT;this.length=a.length;this._features=a};ua.prototype.feature=function(b){return new ra(this._features[b])};ia=
b.vectorTile.VectorTileFeature;m.prototype.feature=function(b){return new n(this.features[b],this.options.extent)};n.prototype.loadGeometry=function(){var a=this.rawGeometry;this.geometry=[];for(var c=0;c<a.length;c++){for(var d=a[c],e=[],f=0;f<d.length;f++)e.push(new b.Point$1(d[f][0],d[f][1]));this.geometry.push(e)}return this.geometry};n.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var b=this.geometry,a=1/0,c=-1/0,d=1/0,e=-1/0,f=0;f<b.length;f++)for(var g=b[f],h=0;h<g.length;h++){var k=
g[h];a=Math.min(a,k.x);c=Math.max(c,k.x);d=Math.min(d,k.y);e=Math.max(e,k.y)}return[a,d,c,e]};n.prototype.toGeoJSON=ia.prototype.toGeoJSON;var Aa=w;Aa.fromVectorTileJs=w;Aa.fromGeojsonVt=function(b,a){a=a||{};var c={},d;for(d in b)c[d]=new m(b[d].features,a),c[d].name=d,c[d].version=a.version,c[d].extent=a.extent;return w({layers:c})};Aa.GeoJSONWrapper=m;var wa=function(b){return b[0]},Ma=function(b){return b[1]},ba=function(b,a,c,d,e){void 0===a&&(a=wa);void 0===c&&(c=Ma);void 0===d&&(d=64);void 0===
e&&(e=Float64Array);this.nodeSize=d;this.points=b;var f=this.ids=new (65536>b.length?Uint16Array:Uint32Array)(b.length);e=this.coords=new e(2*b.length);for(var g=0;g<b.length;g++)f[g]=g,e[2*g]=a(b[g]),e[2*g+1]=c(b[g]);B(f,e,d,0,f.length-1,0)};ba.prototype.range=function(b,a,c,d){for(var e=this.ids,f=this.coords,g=this.nodeSize,h,k,l=[0,e.length-1,0],r=[];l.length;){var t=l.pop(),m=l.pop(),u=l.pop();if(m-u<=g)for(t=u;t<=m;t++)h=f[2*t],k=f[2*t+1],h>=b&&h<=c&&k>=a&&k<=d&&r.push(e[t]);else{var n=Math.floor((u+
m)/2);h=f[2*n];k=f[2*n+1];h>=b&&h<=c&&k>=a&&k<=d&&r.push(e[n]);var v=(t+1)%2;(0===t?b<=h:a<=k)&&(l.push(u),l.push(n-1),l.push(v));(0===t?c>=h:d>=k)&&(l.push(n+1),l.push(m),l.push(v))}}return r};ba.prototype.within=function(b,a,c){for(var d=this.ids,e=this.coords,f=this.nodeSize,g=[0,d.length-1,0],h=[],k=c*c;g.length;){var l=g.pop(),r=g.pop(),t=g.pop();if(r-t<=f)for(l=t;l<=r;l++){t=e[2*l]-b;var m=e[2*l+1]-a;t*t+m*m<=k&&h.push(d[l])}else{m=Math.floor((t+r)/2);var u=e[2*m],n=e[2*m+1],v=u-b,w=n-a;v*v+
w*w<=k&&h.push(d[m]);v=(l+1)%2;(0===l?b-c<=u:a-c<=n)&&(g.push(t),g.push(m-1),g.push(v));(0===l?b+c>=u:a+c>=n)&&(g.push(m+1),g.push(r),g.push(v))}}return h};var Ea={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,map:function(b){return b}},Ba=function(b){this.options=H(Object.create(Ea),b);this.trees=Array(this.options.maxZoom+1)};Ba.prototype.load=function(b){var a=this.options,c=a.log,d=a.minZoom,e=a.maxZoom;a=a.nodeSize;c&&console.time("total time");var f="prepare "+b.length+
" points";c&&console.time(f);this.points=b;for(var g=[],h=0;h<b.length;h++)b[h].geometry&&g.push(E(b[h],h));this.trees[e+1]=new ba(g,K,M,a,Float32Array);c&&console.timeEnd(f);for(b=e;b>=d;b--)e=+Date.now(),g=this._cluster(g,b),this.trees[b]=new ba(g,K,M,a,Float32Array),c&&console.log("z%d: %d clusters in %dms",b,g.length,+Date.now()-e);return c&&console.timeEnd("total time"),this};Ba.prototype.getClusters=function(b,a){var c=((b[0]+180)%360+360)%360-180,d=Math.max(-90,Math.min(90,b[1])),e=180===b[2]?
180:((b[2]+180)%360+360)%360-180,f=Math.max(-90,Math.min(90,b[3]));if(360<=b[2]-b[0])c=-180,e=180;else if(c>e)return c=this.getClusters([c,d,180,f],a),d=this.getClusters([-180,d,e,f],a),c.concat(d);a=this.trees[this._limitZoom(a)];b=[];var g=0;for(d=a.range(c/360+.5,J(f),e/360+.5,J(d));g<d.length;g+=1)e=a.points[d[g]],b.push(e.numPoints?F(e):this.points[e.index]);return b};Ba.prototype.getChildren=function(b){var a=b%32,c=this.trees[a];if(!c)throw Error("No cluster with the specified id.");var d=
c.points[b>>5];if(!d)throw Error("No cluster with the specified id.");var e=[],f=0;for(a=c.within(d.x,d.y,this.options.radius/(this.options.extent*Math.pow(2,a-1)));f<a.length;f+=1)d=c.points[a[f]],d.parentId===b&&e.push(d.numPoints?F(d):this.points[d.index]);if(0===e.length)throw Error("No cluster with the specified id.");return e};Ba.prototype.getLeaves=function(b,a,c){var d=[];return this._appendLeaves(d,b,a||10,c||0,0),d};Ba.prototype.getTile=function(b,a,c){var d=this.trees[this._limitZoom(b)];
b=Math.pow(2,b);var e=this.options;e=e.radius/e.extent;var f=(c-e)/b,g=(c+1+e)/b,h={features:[]};return this._addTileFeatures(d.range((a-e)/b,f,(a+1+e)/b,g),d.points,a,c,b,h),0===a&&this._addTileFeatures(d.range(1-e/b,f,1,g),d.points,b,c,b,h),a===b-1&&this._addTileFeatures(d.range(0,f,e/b,g),d.points,-1,c,b,h),h.features.length?h:null};Ba.prototype.getClusterExpansionZoom=function(b){for(var a=b%32-1;a<=this.options.maxZoom;){b=this.getChildren(b);if(a++,1!==b.length)break;b=b[0].properties.cluster_id}return a};
Ba.prototype._appendLeaves=function(b,a,c,d,e){var f=0;for(a=this.getChildren(a);f<a.length;f+=1){var g=a[f],h=g.properties;if(h&&h.cluster?e+h.point_count<=d?e+=h.point_count:e=this._appendLeaves(b,h.cluster_id,c,d,e):e<d?e++:b.push(g),b.length===c)break}return e};Ba.prototype._addTileFeatures=function(b,a,c,d,e,f){for(var g=0;g<b.length;g+=1){var h=a[b[g]],k={type:1,geometry:[[Math.round(this.options.extent*(h.x*e-c)),Math.round(this.options.extent*(h.y*e-d))]],tags:h.numPoints?L(h):this.points[h.index].properties};
h=h.numPoints?h.id:this.points[h.index].id;void 0!==h&&(k.id=h);f.features.push(k)}};Ba.prototype._limitZoom=function(b){return Math.max(this.options.minZoom,Math.min(b,this.options.maxZoom+1))};Ba.prototype._cluster=function(b,a){var c=[],d=this.options,e=d.reduce;d=d.radius/(d.extent*Math.pow(2,a));for(var f=0;f<b.length;f++){var g=b[f];if(!(g.zoom<=a)){g.zoom=a;for(var h=this.trees[a+1],k=h.within(g.x,g.y,d),l=g.numPoints||1,r=g.x*l,t=g.y*l,m=e&&1<l?this._map(g,!0):null,u=(f<<5)+(a+1),n=0;n<k.length;n+=
1){var v=h.points[k[n]];if(!(v.zoom<=a)){v.zoom=a;var w=v.numPoints||1;r+=v.x*w;t+=v.y*w;l+=w;v.parentId=u;e&&(m||(m=this._map(g,!0)),e(m,this._map(v)))}}1===l?c.push(g):(g.parentId=u,c.push({x:r/l,y:t/l,zoom:1/0,id:u,parentId:-1,numPoints:l,properties:m}))}}return c};Ba.prototype._map=function(b,a){if(b.numPoints)return a?H({},b.properties):b.properties;b=this.points[b.index].properties;var c=this.options.map(b);return a&&c===b?H({},c):c};ma.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1E5,
tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};ma.prototype.splitTile=function(b,a,c,d,e,f,g){for(var h=[b,a,c,d],k=this.options,l=k.debug;h.length;){d=h.pop();c=h.pop();a=h.pop();b=h.pop();var r=1<<a,t=32*((1<<a)*d+c)+a,m=this.tiles[t],u;if(u=!m){1<l&&console.time("creation");m=this.tiles;u=b;for(var n=k,v=a===n.maxZoom?0:n.tolerance/((1<<a)*n.extent),w={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:c,y:d,z:a,transformed:!1,minX:2,minY:1,
maxX:-1,maxY:0},z=0;z<u.length;z++){w.numFeatures++;var x=void 0,A=w,y=u[z],B=v,p=n,q=y.geometry,C=y.type,D=[];if("Point"===C||"MultiPoint"===C)for(var I=0;I<q.length;I+=3)D.push(q[I]),D.push(q[I+1]),A.numPoints++,A.numSimplified++;else if("LineString"===C)da(D,q,A,B,!1,!1);else if("MultiLineString"===C||"Polygon"===C)for(I=0;I<q.length;I++)da(D,q[I],A,B,"Polygon"===C,0===I);else if("MultiPolygon"===C)for(var E=0;E<q.length;E++){var N=q[E];for(I=0;I<N.length;I++)da(D,N[I],A,B,!0,0===I)}if(D.length){B=
y.tags||null;if("LineString"===C&&p.lineMetrics){for(x in B={},y.tags)B[x]=y.tags[x];B.mapbox_clip_start=q.start/q.size;B.mapbox_clip_end=q.end/q.size}x={geometry:D,type:"Polygon"===C||"MultiPolygon"===C?3:"LineString"===C||"MultiLineString"===C?2:1,tags:B};null!==y.id&&(x.id=y.id);A.features.push(x)}A=u[z].minX;y=u[z].minY;x=u[z].maxX;p=u[z].maxY;A<w.minX&&(w.minX=A);y<w.minY&&(w.minY=y);x>w.maxX&&(w.maxX=x);p>w.maxY&&(w.maxY=p)}u=(m=m[t]=w,this.tileCoords.push({z:a,x:c,y:d}),l)}u&&(1<l&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",
a,c,d,m.numFeatures,m.numPoints,m.numSimplified),console.timeEnd("creation")),t="z"+a,this.stats[t]=(this.stats[t]||0)+1,this.total++);if(m.source=b,e){if(a===k.maxZoom||a===e)continue;t=1<<e-a;if(c!==Math.floor(f/t)||d!==Math.floor(g/t))continue}else if(a===k.indexMaxZoom||m.numPoints<=k.indexMaxPoints)continue;if(m.source=null,0!==b.length)1<l&&console.time("clipping"),z=.5*k.buffer/k.extent,A=.5-z,y=.5+z,x=1+z,t=u=n=v=null,w=Y(b,r,c-z,c+y,0,m.minX,m.maxX,k),b=Y(b,r,c+A,c+x,0,m.minX,m.maxX,k),w&&
(t=Y(w,r,d-z,d+y,1,m.minY,m.maxY,k),u=Y(w,r,d+A,d+x,1,m.minY,m.maxY,k)),b&&(n=Y(b,r,d-z,d+y,1,m.minY,m.maxY,k),v=Y(b,r,d+A,d+x,1,m.minY,m.maxY,k)),1<l&&console.timeEnd("clipping"),h.push(t||[],a+1,2*c,2*d),h.push(u||[],a+1,2*c,2*d+1),h.push(n||[],a+1,2*c+1,2*d),h.push(v||[],a+1,2*c+1,2*d+1)}};ma.prototype.getTile=function(b,a,c){var d=this.options,e=d.extent;d=d.debug;if(0>b||24<b)return null;var f=1<<b;f=a=(a%f+f)%f;f=32*((1<<b)*c+f)+b;if(this.tiles[f])return la(this.tiles[f],e);1<d&&console.log("drilling down to z%d-%d-%d",
b,a,c);for(var g,h=b,k=a,l=c;!g&&0<h;)h--,k=Math.floor(k/2),l=Math.floor(l/2),g=this.tiles[32*((1<<h)*l+k)+h];return g&&g.source?(1<d&&console.log("found parent tile z%d-%d-%d",h,k,l),1<d&&console.time("drilling down"),this.splitTile(g.source,h,k,l,b,a,c),1<d&&console.timeEnd("drilling down"),this.tiles[f]?la(this.tiles[f],e):null):null};var Na=function(a){function c(b,c,d){a.call(this,b,c,aa);d&&(this.loadGeoJSON=d)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=
c,c.prototype.loadData=function(b,a){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});this._pendingCallback=a;this._pendingLoadDataParams=b;this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},c.prototype._loadData=function(){var a=this;if(this._pendingCallback&&this._pendingLoadDataParams){var c=this._pendingCallback,d=this._pendingLoadDataParams;delete this._pendingCallback;delete this._pendingLoadDataParams;var e=!!(d&&d.request&&
d.request.collectResourceTiming)&&new ka.Performance(d.request);this.loadGeoJSON(d,function(f,g){if(f||!g)return c(f);if("object"!=typeof g)return c(Error("Input data given to '"+d.source+"' is not a valid GeoJSON object."));za(g,!0);try{a._geoJSONIndex=d.cluster?(new Ba(function(a){var c=a.superclusterOptions;a=a.clusterProperties;if(!a||!c)return c;for(var d={},e={},f={accumulated:null,zoom:0},g={properties:null},h=Object.keys(a),k=0;k<h.length;k+=1){var l=h[k],r=a[l],t=r[0];r=b.createExpression(r[1]);
t=b.createExpression("string"==typeof t?[t,["accumulated"],["get",l]]:t);d[l]=r.value;e[l]=t.value}return c.map=function(b){g.properties=b;b={};for(var a=0;a<h.length;a+=1){var c=h[a];b[c]=d[c].evaluate(f,g)}return b},c.reduce=function(b,a){g.properties=a;for(a=0;a<h.length;a+=1){var c=h[a];f.accumulated=b[c];b[c]=e[c].evaluate(f,g)}},c}(d))).load(g.features):new ma(g,d.geojsonVtOptions)}catch(gb){return c(gb)}a.loaded={};f={};e&&(g=e.finish())&&(f.resourceTiming={},f.resourceTiming[d.source]=JSON.parse(JSON.stringify(g)));
c(null,f)})}},c.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},c.prototype.reloadTile=function(b,c){var d=this.loaded,e=b.uid;return d&&d[e]?a.prototype.reloadTile.call(this,b,c):this.loadTile(b,c)},c.prototype.loadGeoJSON=function(a,c){if(a.request)b.getJSON(a.request,c);else{if("string"!=typeof a.data)return c(Error("Input data given to '"+a.source+"' is not a valid GeoJSON object."));try{return c(null,
JSON.parse(a.data))}catch(ub){return c(Error("Input data given to '"+a.source+"' is not a valid GeoJSON object."))}}},c.prototype.removeSource=function(b,a){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});a()},c.prototype.getClusterExpansionZoom=function(b,a){a(null,this._geoJSONIndex.getClusterExpansionZoom(b.clusterId))},c.prototype.getClusterChildren=function(b,a){a(null,this._geoJSONIndex.getChildren(b.clusterId))},c.prototype.getClusterLeaves=function(b,a){a(null,this._geoJSONIndex.getLeaves(b.clusterId,
b.limit,b.offset))},c}(xa);ia=function(a){var c=this;this.self=a;this.actor=new b.Actor(a,this);this.layerIndexes={};this.workerSourceTypes={vector:xa,geojson:Na};this.workerSources={};this.demWorkerSources={};this.self.registerWorkerSource=function(b,a){if(c.workerSourceTypes[b])throw Error('Worker source with name "'+b+'" already registered.');c.workerSourceTypes[b]=a};this.self.registerRTLTextPlugin=function(a){if(b.plugin.isLoaded())throw Error("RTL text plugin already registered.");b.plugin.applyArabicShaping=
a.applyArabicShaping;b.plugin.processBidirectionalText=a.processBidirectionalText;b.plugin.processStyledBidirectionalText=a.processStyledBidirectionalText}};return ia.prototype.setReferrer=function(b,a){this.referrer=a},ia.prototype.setLayers=function(b,a,c){this.getLayerIndex(b).replace(a);c()},ia.prototype.updateLayers=function(b,a,c){this.getLayerIndex(b).update(a.layers,a.removedIds);c()},ia.prototype.loadTile=function(b,a,c){this.getWorkerSource(b,a.type,a.source).loadTile(a,c)},ia.prototype.loadDEMTile=
function(b,a,c){this.getDEMWorkerSource(b,a.source).loadTile(a,c)},ia.prototype.reloadTile=function(b,a,c){this.getWorkerSource(b,a.type,a.source).reloadTile(a,c)},ia.prototype.abortTile=function(b,a,c){this.getWorkerSource(b,a.type,a.source).abortTile(a,c)},ia.prototype.removeTile=function(b,a,c){this.getWorkerSource(b,a.type,a.source).removeTile(a,c)},ia.prototype.removeDEMTile=function(b,a){this.getDEMWorkerSource(b,a.source).removeTile(a)},ia.prototype.removeSource=function(b,a,c){if(this.workerSources[b]&&
this.workerSources[b][a.type]&&this.workerSources[b][a.type][a.source]){var d=this.workerSources[b][a.type][a.source];delete this.workerSources[b][a.type][a.source];void 0!==d.removeSource?d.removeSource(a,c):c()}},ia.prototype.loadWorkerSource=function(b,a,c){try{this.self.importScripts(a.url),c()}catch(cb){c(cb.toString())}},ia.prototype.loadRTLTextPlugin=function(a,c,d){try{b.plugin.isLoaded()||(this.self.importScripts(c),d(b.plugin.isLoaded()?null:Error("RTL Text Plugin failed to import scripts from "+
c)))}catch(cb){d(cb.toString())}},ia.prototype.getLayerIndex=function(b){var a=this.layerIndexes[b];return a||(a=this.layerIndexes[b]=new na),a},ia.prototype.getWorkerSource=function(b,a,c){var d=this;(this.workerSources[b]||(this.workerSources[b]={}),this.workerSources[b][a]||(this.workerSources[b][a]={}),this.workerSources[b][a][c])||(this.workerSources[b][a][c]=new this.workerSourceTypes[a]({send:function(a,c,e){d.actor.send(a,c,e,b)}},this.getLayerIndex(b)));return this.workerSources[b][a][c]},
ia.prototype.getDEMWorkerSource=function(b,a){return this.demWorkerSources[b]||(this.demWorkerSources[b]={}),this.demWorkerSources[b][a]||(this.demWorkerSources[b][a]=new ya),this.demWorkerSources[b][a]},ia.prototype.enforceCacheSizeLimit=function(a,c){b.enforceCacheSizeLimit(c)},"undefined"!=typeof WorkerGlobalScope&&void 0!==b.window&&b.window instanceof WorkerGlobalScope&&(b.window.worker=new ia(b.window)),ia});a(["./shared"],function(b){function a(b){if(!za)return b[0];for(var a=0;a<b.length;a++)if(b[a]in
za)return b[a];return b[0]}function e(b,a,c,d,e,f){this.fontSize=b||24;this.buffer=void 0===a?3:a;this.cutoff=d||.25;this.fontFamily=e||"sans-serif";this.fontWeight=f||"normal";this.radius=c||8;b=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=b;this.ctx=this.canvas.getContext("2d");this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily;this.ctx.textBaseline="middle";this.ctx.fillStyle="black";this.gridOuter=new Float64Array(b*
b);this.gridInner=new Float64Array(b*b);this.f=new Float64Array(b);this.d=new Float64Array(b);this.z=new Float64Array(b+1);this.v=new Int16Array(b);this.middle=Math.round(b/2*(0<=navigator.userAgent.indexOf("Gecko/")?1.2:1))}function h(b,a,c,d,e,f,g){for(var h=0;h<a;h++){for(var l=0;l<c;l++)d[l]=b[l*a+h];k(d,e,f,g,c);for(l=0;l<c;l++)b[l*a+h]=e[l]}for(l=0;l<c;l++){for(h=0;h<a;h++)d[h]=b[l*a+h];k(d,e,f,g,a);for(h=0;h<a;h++)b[l*a+h]=Math.sqrt(e[h])}}function k(b,a,c,d,e){c[0]=0;d[0]=-1E20;d[1]=1E20;
for(var f=1,g=0;f<e;f++){for(var h=(b[f]+f*f-(b[c[g]]+c[g]*c[g]))/(2*f-2*c[g]);h<=d[g];)g--,h=(b[f]+f*f-(b[c[g]]+c[g]*c[g]))/(2*f-2*c[g]);c[++g]=f;d[g]=h;d[g+1]=1E20}for(g=f=0;f<e;f++){for(;d[g+1]<f;)g++;a[f]=(f-c[g])*(f-c[g])+b[c[g]]}}function f(a,c,d){var e=function(e,f){if(e)return d(e);f&&(e=b.pick(b.extend(f,a),"tiles minzoom maxzoom attribution mapbox_logo bounds scheme tileSize encoding".split(" ")),f.vector_layers&&(e.vectorLayers=f.vector_layers,e.vectorLayerIds=e.vectorLayers.map(function(b){return b.id})),
a.url&&(e.tiles=c.canonicalizeTileset(e,a.url)),d(null,e))};return a.url?b.getJSON(c.transformRequest(c.normalizeSourceURL(a.url),b.ResourceType.Source),e):b.browser.frame(function(){return e(null,a)})}function d(a,c){var d=b.identity([]);return b.translate(d,d,[1,1,0]),b.scale(d,d,[.5*a.width,.5*a.height,1]),b.multiply(d,d,a.calculatePosMatrix(c.toUnwrapped()))}function c(b,a,c,e,f){var g=function(b,a,c){if(b)for(var d=0;d<b.length;d+=1){var e=a[b[d]];if(e&&e.source===c&&"fill-extrusion"===e.type)return!0}else for(d in a)if(b=
a[d],b.source===c&&"fill-extrusion"===b.type)return!0;return!1}(e&&e.layers,a,b.id),h=f.maxPitchScaleFactor();c=b.tilesIn(c,h,g);c.sort(r);g=[];for(var k=0;k<c.length;k+=1){var l=c[k];g.push({wrappedTileID:l.tileID.wrapped().key,queryResults:l.tile.queryRenderedFeatures(a,b._state,l.queryGeometry,l.cameraQueryGeometry,l.scale,e,f,h,d(b.transform,l.tileID))})}a=function(b){for(var a={},c={},d=0;d<b.length;d+=1){var e=b[d],f=e.queryResults;e=e.wrappedTileID;e=c[e]=c[e]||{};for(var g in f)for(var h=
f[g],k=e[g]=e[g]||{},l=a[g]=a[g]||[],r=0;r<h.length;r+=1){var t=h[r];k[t.featureIndex]||(k[t.featureIndex]=!0,l.push(t))}}return a}(g);for(var t in a)a[t].forEach(function(a){a=a.feature;var c=b.getFeatureState(a.layer["source-layer"],a.id);a.source=a.layer.source;a.layer["source-layer"]&&(a.sourceLayer=a.layer["source-layer"]);a.state=c});return a}function r(b,a){b=b.tileID;a=a.tileID;return b.overscaledZ-a.overscaledZ||b.canonical.y-a.canonical.y||b.wrap-a.wrap||b.canonical.x-a.canonical.x}function m(b,
a){return b%32-a%32||a-b}function n(b){return"raster"===b||"image"===b||"video"===b}function w(){return new b.window.Worker(Qe.workerUrl)}function y(a,c){var d={},e;for(e in a)"ref"!==e&&(d[e]=a[e]);return b.refProperties.forEach(function(b){b in c&&(d[b]=c[b])}),d}function A(b){b=b.slice();for(var a=Object.create(null),c=0;c<b.length;c++)a[b[c].id]=b[c];for(c=0;c<b.length;c++)"ref"in b[c]&&(b[c]=y(b[c],a[b[c].ref]));return b}function z(a,c,d,e,f,g){for(var h in c=c||{},a=a||{})a.hasOwnProperty(h)&&
(b.deepEqual(a[h],c[h])||d.push({command:g,args:[e,h,c[h],f]}));for(h in c)c.hasOwnProperty(h)&&!a.hasOwnProperty(h)&&(b.deepEqual(a[h],c[h])||d.push({command:g,args:[e,h,c[h],f]}))}function x(b){return b.id}function p(b,a){return b[a.id]=a,b}function B(a,c){if(!a)return[{command:hb.setStyle,args:[c]}];var d=[];try{if(!b.deepEqual(a.version,c.version))return[{command:hb.setStyle,args:[c]}];b.deepEqual(a.center,c.center)||d.push({command:hb.setCenter,args:[c.center]});b.deepEqual(a.zoom,c.zoom)||d.push({command:hb.setZoom,
args:[c.zoom]});b.deepEqual(a.bearing,c.bearing)||d.push({command:hb.setBearing,args:[c.bearing]});b.deepEqual(a.pitch,c.pitch)||d.push({command:hb.setPitch,args:[c.pitch]});b.deepEqual(a.sprite,c.sprite)||d.push({command:hb.setSprite,args:[c.sprite]});b.deepEqual(a.glyphs,c.glyphs)||d.push({command:hb.setGlyphs,args:[c.glyphs]});b.deepEqual(a.transition,c.transition)||d.push({command:hb.setTransition,args:[c.transition]});b.deepEqual(a.light,c.light)||d.push({command:hb.setLight,args:[c.light]});
var e={},f=[];!function(a,c,d,e){for(var f in c=c||{},a=a||{})if(a.hasOwnProperty(f)&&!c.hasOwnProperty(f)){var g=f,h=e;d.push({command:hb.removeSource,args:[g]});h[g]=!0}for(f in c)if(c.hasOwnProperty(f))if(a.hasOwnProperty(f)){if(!b.deepEqual(a[f],c[f])){if(g="geojson"===a[f].type&&"geojson"===c[f].type)a:{g=void 0;h=a;var k=c,l=f;for(g in h[l])if(h[l].hasOwnProperty(g)&&"data"!==g&&!b.deepEqual(h[l][g],k[l][g])){g=!1;break a}for(g in k[l])if(k[l].hasOwnProperty(g)&&"data"!==g&&!b.deepEqual(h[l][g],
k[l][g])){g=!1;break a}g=!0}if(g)d.push({command:hb.setGeoJSONSourceData,args:[f,c[f].data]});else{g=f;h=c;k=d;l=g;var r=e;k.push({command:hb.removeSource,args:[l]});r[l]=!0;k.push({command:hb.addSource,args:[g,h[g]]})}}}else d.push({command:hb.addSource,args:[f,c[f]]})}(a.sources,c.sources,f,e);var g=[];a.layers&&a.layers.forEach(function(b){e[b.source]?d.push({command:hb.removeLayer,args:[b.id]}):g.push(b)});d=d.concat(f);(function(a,c,d){c=c||[];var e,f,g,h,k,l=(a=a||[]).map(x),r=c.map(x);a=a.reduce(p,
{});var t=c.reduce(p,{}),m=l.slice(),u=Object.create(null);for(e=c=0;c<l.length;c++){var n=l[c];t.hasOwnProperty(n)?e++:(d.push({command:hb.removeLayer,args:[n]}),m.splice(m.indexOf(n,e),1))}for(e=c=0;c<r.length;c++)n=r[r.length-1-c],m[m.length-1-c]!==n&&(a.hasOwnProperty(n)?(d.push({command:hb.removeLayer,args:[n]}),m.splice(m.lastIndexOf(n,m.length-e),1)):e++,h=m[m.length-c],d.push({command:hb.addLayer,args:[t[n],h]}),m.splice(m.length-c,0,n),u[n]=!0);for(c=0;c<r.length;c++)if(f=a[n=r[c]],g=t[n],
!u[n]&&!b.deepEqual(f,g))if(b.deepEqual(f.source,g.source)&&b.deepEqual(f["source-layer"],g["source-layer"])&&b.deepEqual(f.type,g.type)){for(k in z(f.layout,g.layout,d,n,null,hb.setLayoutProperty),z(f.paint,g.paint,d,n,null,hb.setPaintProperty),b.deepEqual(f.filter,g.filter)||d.push({command:hb.setFilter,args:[n,g.filter]}),b.deepEqual(f.minzoom,g.minzoom)&&b.deepEqual(f.maxzoom,g.maxzoom)||d.push({command:hb.setLayerZoomRange,args:[n,g.minzoom,g.maxzoom]}),f)f.hasOwnProperty(k)&&"layout"!==k&&"paint"!==
k&&"filter"!==k&&"metadata"!==k&&"minzoom"!==k&&"maxzoom"!==k&&(0===k.indexOf("paint.")?z(f[k],g[k],d,n,k.slice(6),hb.setPaintProperty):b.deepEqual(f[k],g[k])||d.push({command:hb.setLayerProperty,args:[n,k,g[k]]}));for(k in g)g.hasOwnProperty(k)&&!f.hasOwnProperty(k)&&"layout"!==k&&"paint"!==k&&"filter"!==k&&"metadata"!==k&&"minzoom"!==k&&"maxzoom"!==k&&(0===k.indexOf("paint.")?z(f[k],g[k],d,n,k.slice(6),hb.setPaintProperty):b.deepEqual(f[k],g[k])||d.push({command:hb.setLayerProperty,args:[n,k,g[k]]}))}else d.push({command:hb.removeLayer,
args:[n]}),h=m[m.lastIndexOf(n)+1],d.push({command:hb.addLayer,args:[g,h]})})(g,c.layers,d)}catch(Ee){console.warn("Unable to compute style diff:",Ee),d=[{command:hb.setStyle,args:[c]}]}return d}function q(a,c,d,e,f){var g=b.create();return c?(b.scale(g,g,[1/f,1/f,1]),d||b.rotateZ(g,g,e.angle)):b.multiply(g,e.labelPlaneMatrix,a),g}function G(a,c,d,e,f){return c?(a=b.clone(a),b.scale(a,a,[f,f,1]),d||b.rotateZ(a,a,-e.angle),a):e.glCoordMatrix}function E(a,c){a=[a.x,a.y,0,1];N(a,a,c);c=a[3];return{point:new b.Point(a[0]/
c,a[1]/c),signedDistanceFromCamera:c}}function F(a,c,d,e,f,g,h,k){var l=e?a.textSizeData:a.iconSizeData,r=b.evaluateSizeForZoom(l,d.transform.zoom),t=[256/d.width*2+1,256/d.height*2+1],m=e?a.text.dynamicLayoutVertexArray:a.icon.dynamicLayoutVertexArray;m.clear();for(var u=a.lineVertexArray,n=e?a.text.placedSymbolArray:a.icon.placedSymbolArray,v=d.transform.width/d.transform.height,w=!1,z=0;z<n.length;z++){var x=n.get(z);if(x.hidden||x.writingMode===b.WritingMode.vertical&&!w)I(x.numGlyphs,m);else{w=
!1;var A=[x.anchorX,x.anchorY,0,1];b.transformMat4(A,A,c);var y=A[0]/A[3],B=A[1]/A[3];if(y>=-t[0]&&y<=t[0]&&B>=-t[1]&&B<=t[1]){w=.5+A[3]/d.transform.cameraToCenterDistance*.5;A=b.evaluateSizeForFeature(l,r,x);A=h?A*w:A/w;y=new b.Point(x.anchorX,x.anchorY);B=E(y,f).point;var p={},q=H(x,A,!1,k,c,f,g,a.glyphOffsetArray,u,m,B,y,p,v);w=q.useVertical;(q.notEnoughRoom||w||q.needsFlipping&&H(x,A,!0,k,c,f,g,a.glyphOffsetArray,u,m,B,y,p,v).notEnoughRoom)&&I(x.numGlyphs,m)}else I(x.numGlyphs,m)}}e?a.text.dynamicLayoutVertexBuffer.updateData(m):
a.icon.dynamicLayoutVertexBuffer.updateData(m)}function L(b,a,c,d,e,f,g,h,k,l,r,t){var m=h.glyphStartIndex+h.numGlyphs,u=h.lineStartIndex,n=h.lineStartIndex+h.lineLength,v=a.getoffsetX(h.glyphStartIndex);a=a.getoffsetX(m-1);v=M(b*v,c,d,e,f,g,h.segment,u,n,k,l,r,t);return v?(b=M(b*a,c,d,e,f,g,h.segment,u,n,k,l,r,t))?{first:v,last:b}:null:null}function J(a,c,d,e){return a===b.WritingMode.horizontal&&Math.abs(d.y-c.y)>Math.abs(d.x-c.x)*e?{useVertical:!0}:(a===b.WritingMode.vertical?c.y<d.y:c.x>d.x)?
{needsFlipping:!0}:null}function H(a,c,d,e,f,g,h,k,l,r,t,m,u,n){c/=24;var v=a.lineOffsetX*c,w=a.lineOffsetY*c;if(1<a.numGlyphs){f=a.glyphStartIndex+a.numGlyphs;var z=a.lineStartIndex,x=a.lineStartIndex+a.lineLength,A=L(c,k,v,w,d,t,m,a,l,g,u,!1);if(!A)return{notEnoughRoom:!0};var y=E(A.first.point,h).point;h=E(A.last.point,h).point;if(e&&!d&&(n=J(a.writingMode,y,h,n)))return n;n=[A.first];for(e=a.glyphStartIndex+1;e<f-1;e++)n.push(M(c*k.getoffsetX(e),v,w,d,t,m,a.segment,z,x,l,g,u,!1));n.push(A.last)}else{if(e&&
!d&&(z=E(m,f).point,x=a.lineStartIndex+a.segment+1,x=new b.Point(l.getx(x),l.gety(x)),A=E(x,f),f=0<A.signedDistanceFromCamera?A.point:K(m,x,z,1,f),n=J(a.writingMode,z,f,n)))return n;a=M(c*k.getoffsetX(a.glyphStartIndex),v,w,d,t,m,a.segment,a.lineStartIndex,a.lineStartIndex+a.lineLength,l,g,u,!1);if(!a)return{notEnoughRoom:!0};n=[a]}a=0;for(d=n;a<d.length;a+=1)g=d[a],b.addDynamicAttributes(r,g.point,g.angle);return{}}function K(b,a,c,d,e){b=E(b.add(b.sub(a)._unit()),e).point;b=c.sub(b);return c.add(b._mult(d/
b.mag()))}function M(a,c,d,e,f,g,h,k,l,r,t,m,u){var n=e?a-c:a+c;a=0<n?1:-1;c=0;e&&(a*=-1,c=Math.PI);0>a&&(c+=Math.PI);h=e=0<a?k+h:k+h+1;var v=f,w=0,z=0;for(n=Math.abs(n);w+z<=n;){if((e+=a)<k||e>=l)return null;if(f=v,void 0===(v=m[e])){v=new b.Point(r.getx(e),r.gety(e));var x=E(v,t);0<x.signedDistanceFromCamera?v=m[e]=x.point:(x=e-a,v=K(0===w?g:new b.Point(r.getx(x),r.gety(x)),v,f,n-w+1,t))}w+=z;z=f.dist(v)}k=(n-w)/z;g=v.sub(f);k=g.mult(k)._add(f);return k._add(g._unit()._perp()._mult(d*a)),{point:k,
angle:c+Math.atan2(v.y-f.y,v.x-f.x),tileDistance:u?{prevTileDistance:e-a===h?0:r.gettileUnitDistanceFromAnchor(e-a),lastSegmentViewportDistance:n-w}:null}}function I(b,a){for(var c=0;c<b;c++){var d=a.length;a.resize(d+4);a.float32.set(se,3*d)}}function N(b,a,c){var d=a[0];a=a[1];return b[0]=c[0]*d+c[4]*a+c[12],b[1]=c[1]*d+c[5]*a+c[13],b[3]=c[3]*d+c[7]*a+c[15],b}function O(a,c,d){return b.EXTENT/(a.tileSize*Math.pow(2,d-a.tileID.overscaledZ))*c}function P(a,c,d,e,f){var g=b.getAnchorAlignment(a);c*=
-(g.horizontalAlign-.5);d*=-(g.verticalAlign-.5);a=b.evaluateRadialOffset(a,e);return new b.Point(c+a[0]*f,d+a[1]*f)}function Q(b,a,c,d,e){b.emplaceBack(a?1:0,c?1:0,d||0,e||0);b.emplaceBack(a?1:0,c?1:0,d||0,e||0);b.emplaceBack(a?1:0,c?1:0,d||0,e||0);b.emplaceBack(a?1:0,c?1:0,d||0,e||0)}function T(b){if(0===b.opacity&&!b.placed)return 0;if(1===b.opacity&&b.placed)return 4294967295;var a=b.placed?1:0;b=Math.floor(127*b.opacity);return b*ac+a*Zc+b*Pe+a*Bh+b*Df+a*qc+b*xd+a}function V(b,a){var c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,
d={};return{fragmentSource:b=b.replace(c,function(b,a,c,e,f){return d[f]=!0,"define"===a?"\n#ifndef HAS_UNIFORM_u_"+f+"\nvarying "+c+" "+e+" "+f+";\n#else\nuniform "+c+" "+e+" u_"+f+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+f+"\n    "+c+" "+e+" "+f+" \x3d u_"+f+";\n#endif\n"}),vertexSource:a=a.replace(c,function(b,a,c,e,f){b="float"===e?"vec2":"vec4";var g=f.match(/color/)?"color":b;return d[f]?"define"===a?"\n#ifndef HAS_UNIFORM_u_"+f+"\nuniform lowp float u_"+f+"_t;\nattribute "+c+" "+b+" a_"+f+";\nvarying "+
c+" "+e+" "+f+";\n#else\nuniform "+c+" "+e+" u_"+f+";\n#endif\n":"vec4"===g?"\n#ifndef HAS_UNIFORM_u_"+f+"\n    "+f+" \x3d a_"+f+";\n#else\n    "+c+" "+e+" "+f+" \x3d u_"+f+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+f+"\n    "+f+" \x3d unpack_mix_"+g+"(a_"+f+", u_"+f+"_t);\n#else\n    "+c+" "+e+" "+f+" \x3d u_"+f+";\n#endif\n":"define"===a?"\n#ifndef HAS_UNIFORM_u_"+f+"\nuniform lowp float u_"+f+"_t;\nattribute "+c+" "+b+" a_"+f+";\n#else\nuniform "+c+" "+e+" u_"+f+";\n#endif\n":"vec4"===g?"\n#ifndef HAS_UNIFORM_u_"+
f+"\n    "+c+" "+e+" "+f+" \x3d a_"+f+";\n#else\n    "+c+" "+e+" "+f+" \x3d u_"+f+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+f+"\n    "+c+" "+e+" "+f+" \x3d unpack_mix_"+g+"(a_"+f+", u_"+f+"_t);\n#else\n    "+c+" "+e+" "+f+" \x3d u_"+f+";\n#endif\n"})}}function Y(a,c,d){var e=1/O(d,1,c.transform.tileZoom),f=Math.pow(2,d.tileID.overscaledZ);c=d.tileSize*Math.pow(2,c.transform.tileZoom)/f;f=c*(d.tileID.canonical.x+d.tileID.wrap*f);c*=d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,
u_scale:[b.browser.devicePixelRatio,e,a.fromScale,a.toScale],u_fade:a.t,u_pixel_coord_upper:[f>>16,c>>16],u_pixel_coord_lower:[65535&f,65535&c]}}function ca(b,a,c){return b.translatePosMatrix(a.tileID.posMatrix,a,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}function Z(a,c){a=a.sort(function(b,a){return b.tileID.isLessThan(a.tileID)?-1:a.tileID.isLessThan(b.tileID)?1:0});for(var d=0;d<a.length;d++){var e={},f=a[d],g=a.slice(d+1);R(f.tileID.wrapped(),f.tileID,g,new b.OverscaledTileID(0,
f.tileID.wrap+1,0,0,0),e);f.setMask(e,c)}}function R(a,c,d,e,f){for(var g=0;g<d.length;g++){var h=d[g];if(e.isLessThan(h.tileID))break;if(c.key===h.tileID.key)return;if(h.tileID.isChildOf(c)){c=c.children(1/0);for(h=0;h<c.length;h++)R(a,c[h],d.slice(g),e,f);return}}d=c.overscaledZ-a.overscaledZ;a=new b.CanonicalTileID(d,c.canonical.x-(a.canonical.x<<d),c.canonical.y-(a.canonical.y<<d));f[a.key]=f[a.key]||a}function U(b,a,c,d,e){for(var f=b.context,g=f.gl,h=e?b.useProgram("collisionCircle"):b.useProgram("collisionBox"),
k=0;k<d.length;k++){var l=d[k],r=a.getTile(l),t=r.getBucket(c);t&&(t=e?t.collisionCircle:t.collisionBox)&&h.draw(f,e?g.TRIANGLES:g.LINES,Ta.disabled,Fa.disabled,b.colorModeForRenderPass(),kb.disabled,nd(l.posMatrix,b.transform,r),c.id,t.layoutVertexBuffer,t.indexBuffer,t.segments,null,b.transform.zoom,null,null,t.collisionVertexBuffer)}}function X(a,c,d,e,f,g,h,k,l,r){var t=a.text.placedSymbolArray,m=a.text.dynamicLayoutVertexArray;m.clear();for(var u=0;u<t.length;u++){var n=t.get(u),v=a.allowVerticalPlacement&&
!n.placedOrientation,w=n.hidden||!n.crossTileID||v?null:e[n.crossTileID];if(w){v=new b.Point(n.anchorX,n.anchorY);var z=E(v,d?k:h),x=.5+g.cameraToCenterDistance/z.signedDistanceFromCamera*.5,A=f.evaluateSizeForFeature(a.textSizeData,r,n)*x/b.ONE_EM;d&&(A*=a.tilePixelRatio/l);x=w.anchor;var y=w.width,B=w.height,p=w.radialOffset;w=w.textBoxScale;var q=b.getAnchorAlignment(x);y*=-(q.horizontalAlign-.5);B*=-(q.verticalAlign-.5);x=b.evaluateRadialOffset(x,p);x=new b.Point((y/w+x[0])*A,(B/w+x[1])*A);v=
d?E(v.add(x),h).point:z.point.add(c?x.rotate(-g.angle):x);z=a.allowVerticalPlacement&&n.placedOrientation===b.WritingMode.vertical?Math.PI/2:0;for(x=0;x<n.numGlyphs;x++)b.addDynamicAttributes(m,v,z)}else I(n.numGlyphs,m)}a.text.dynamicLayoutVertexBuffer.updateData(m)}function ea(a){var c=a.text.placedSymbolArray,d=a.text.dynamicLayoutVertexArray;d.clear();for(var e=0;e<c.length;e++){var f=c.get(e);if(f.hidden||!f.placedOrientation)I(f.numGlyphs,d);else for(var g=new b.Point(f.anchorX,f.anchorY),h=
a.allowVerticalPlacement&&f.placedOrientation===b.WritingMode.vertical?Math.PI/2:0,k=0;k<f.numGlyphs;k++)b.addDynamicAttributes(d,g,h)}a.text.dynamicLayoutVertexBuffer.updateData(d)}function fa(a,c,d,e,f,g,h,k,l,r,t,m,u){var n,v,w=a.context,z=w.gl,x=a.transform,A="map"===k,y="map"===l,B=A&&"point"!==d.layout.get("symbol-placement"),p=A&&!y&&!B,C=void 0!==d.layout.get("symbol-sort-key").constantOr(1);l=a.depthModeForSublayer(0,Ta.ReadOnly);var D=d.layout.get("text-variable-anchor");k=[];for(var I=
0;I<e.length;I+=1){var E=e[I],N=c.getTile(E),H=N.getBucket(d);if(H){var M=f?H.text:H.icon;if(M&&M.segments.get().length){var K=M.programConfigurations.get(d.id),J=f||H.sdfIcons,L=f?H.textSizeData:H.iconSizeData;n||(n=a.useProgram(J?"symbolSDF":"symbolIcon",K),v=b.evaluateSizeForZoom(L,x.zoom));w.activeTexture.set(z.TEXTURE0);var Q=void 0,P=K=void 0;f?(K=N.glyphAtlasTexture,P=z.LINEAR,Q=N.glyphAtlasTexture.size):(Q=1!==d.layout.get("icon-size").constantOr(0)||H.iconsNeedLinear,P=y||0!==x.pitch,K=N.imageAtlasTexture,
P=J||a.options.rotating||a.options.zooming||Q||P?z.LINEAR:z.NEAREST,Q=N.imageAtlasTexture.size);var Eb=O(N,1,a.transform.zoom),xb=q(E.posMatrix,y,A,a.transform,Eb);Eb=G(E.posMatrix,y,A,a.transform,Eb);B?F(H,E.posMatrix,a,f,xb,Eb,y,r):f&&v&&D?X(H,A,y,u,b.symbolSize,x,xb,E.posMatrix,Math.pow(2,x.zoom-N.tileID.overscaledZ),v):f&&v&&H.allowVerticalPlacement&&ea(H);E=a.translatePosMatrix(E.posMatrix,N,g,h);H=B||f&&D?Hh:xb;N=a.translatePosMatrix(Eb,N,g,h,!0);xb=J&&0!==d.paint.get(f?"text-halo-width":"icon-halo-width").constantOr(1);
J={program:n,buffers:M,uniformValues:J?dd(L.kind,v,p,y,a,E,H,N,f,Q,!0):de(L.kind,v,p,y,a,E,H,N,f,Q),atlasTexture:K,atlasInterpolation:P,isSDF:J,hasHalo:xb};if(C)for(L=0,M=M.segments.get();L<M.length;L+=1)K=M[L],k.push({segments:new b.SegmentVector([K]),sortKey:K.sortKey,state:J});else k.push({segments:M.segments,sortKey:0,state:J})}}}C&&k.sort(function(b,a){return b.sortKey-a.sortKey});for(c=0;c<k.length;c+=1){e=k[c];f=e.state;if(f.atlasTexture.bind(f.atlasInterpolation,z.CLAMP_TO_EDGE),f.isSDF)g=
f.uniformValues,f.hasHalo&&(g.u_is_halo=1,la(f.buffers,e.segments,d,a,f.program,l,t,m,g)),g.u_is_halo=0;la(f.buffers,e.segments,d,a,f.program,l,t,m,f.uniformValues)}}function la(b,a,c,d,e,f,g,h,k){var l=d.context;e.draw(l,l.gl.TRIANGLES,f,g,h,kb.disabled,k,c.id,b.layoutVertexBuffer,b.indexBuffer,a,c.paint,d.transform.zoom,b.programConfigurations.get(c.id),b.dynamicLayoutVertexBuffer,b.opacityVertexBuffer)}function da(a,c,d,e,f,g,h){var k,l,r,t=a.context.gl,m=d.paint.get("fill-pattern"),u=m&&m.constantOr(1),
n=d.getCrossfadeParameters();h?(l=u&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",k=t.LINES):(l=u?"fillPattern":"fill",k=t.TRIANGLES);for(var v=0;v<e.length;v+=1){var w=e[v];var z=c.getTile(w);if(!u||z.patternsLoaded()){var x=z.getBucket(d);if(x){var A=x.programConfigurations.get(d.id),y=a.useProgram(l,A);u&&(a.context.activeTexture.set(t.TEXTURE0),z.imageAtlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE),A.updatePatternPaintBuffers(n));if((r=m.constantOr(null))&&z.imageAtlas){var B=
z.imageAtlas.patternPositions[r.to];r=z.imageAtlas.patternPositions[r.from];B&&r&&A.setConstantPatternPositions(B,r)}var p=a.translatePosMatrix(w.posMatrix,z,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(h){B=x.indexBuffer2;r=x.segments2;var q=[t.drawingBufferWidth,t.drawingBufferHeight];z="fillOutlinePattern"===l&&u?b.extend(b.extend({u_matrix:p},Y(n,a,z)),{u_world:q}):{u_matrix:p,u_world:q}}else B=x.indexBuffer,r=x.segments,z=u?b.extend({u_matrix:p},Y(n,a,z)):{u_matrix:p};
y.draw(a.context,k,f,a.stencilModeForClipping(w),g,kb.disabled,z,d.id,x.layoutVertexBuffer,B,r,d.paint,a.transform.zoom,A)}}}}function ma(a,c,d,e,f,g,h){for(var k=a.context,l=k.gl,r=d.paint.get("fill-extrusion-pattern"),t=r.constantOr(1),m=d.getCrossfadeParameters(),u=d.paint.get("fill-extrusion-opacity"),n=0;n<e.length;n+=1){var v=e[n],w=c.getTile(v),z=w.getBucket(d);if(z){var x=z.programConfigurations.get(d.id),A=a.useProgram(t?"fillExtrusionPattern":"fillExtrusion",x);t&&(a.context.activeTexture.set(l.TEXTURE0),
w.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),x.updatePatternPaintBuffers(m));var y=r.constantOr(null);if(y&&w.imageAtlas){var B=w.imageAtlas.patternPositions[y.to];y=w.imageAtlas.patternPositions[y.from];B&&y&&x.setConstantPatternPositions(B,y)}B=a.translatePosMatrix(v.posMatrix,w,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor"));y=d.paint.get("fill-extrusion-vertical-gradient");if(t){var p=a,q=m;w=b.extend(qf(B,p,y,u),Y(q,p,w),{u_height_factor:-Math.pow(2,
v.overscaledZ)/w.tileSize/8})}else w=qf(B,a,y,u);A.draw(k,k.gl.TRIANGLES,f,g,h,kb.backCCW,w,d.id,z.layoutVertexBuffer,z.indexBuffer,z.segments,d.paint,a.transform.zoom,x)}}}function aa(b,a){if(b.y>a.y){var c=b;b=a;a=c}return{x0:b.x,y0:b.y,x1:a.x,y1:a.y,dx:a.x-b.x,dy:a.y-b.y}}function na(b,a,c,d,e){c=Math.max(c,Math.floor(a.y0));d=Math.min(d,Math.ceil(a.y1));if(b.x0===a.x0&&b.y0===a.y0?b.x0+a.dy/b.dy*b.dx<a.x1:b.x1-a.dy/b.dy*b.dx<a.x0){var f=b;b=a;a=f}f=b.dx/b.dy;for(var g=a.dx/a.dy,h=0<b.dx,k=0>a.dx;c<
d;c++)e(Math.floor(g*Math.max(0,Math.min(a.dy,c+k-a.y0))+a.x0),Math.ceil(f*Math.max(0,Math.min(b.dy,c+h-b.y0))+b.x0),c)}function ha(b,a,c,d,e,f){var g,h=aa(b,a);a=aa(a,c);b=aa(c,b);h.dy>a.dy&&(g=h,h=a,a=g);h.dy>b.dy&&(g=h,h=b,b=g);a.dy>b.dy&&(g=a,a=b,b=g);h.dy&&na(b,h,d,e,f);a.dy&&na(b,a,d,e,f)}function ja(b){return b*(2-b)}function oa(b){b.parentNode&&b.parentNode.removeChild(b)}function ka(a,c,d){if(a=new b.LngLat(a.lng,a.lat),c){var e=new b.LngLat(a.lng-360,a.lat),f=new b.LngLat(a.lng+360,a.lat),
g=d.locationPoint(a).distSqr(c);d.locationPoint(e).distSqr(c)<g?a=e:d.locationPoint(f).distSqr(c)<g&&(a=f)}for(;180<Math.abs(a.lng-d.center.lng);){c=d.locationPoint(a);if(0<=c.x&&0<=c.y&&c.x<=d.width&&c.y<=d.height)break;a.lng>d.center.lng?a.lng-=360:a.lng+=360}return a}function ia(b,a,c){b=b.classList;for(var d in Qh)b.remove("mapboxgl-"+c+"-anchor-"+d);b.add("mapboxgl-"+c+"-anchor-"+a)}function xa(b,a,c){var d,e,f,g,h,k,l=c&&c.maxWidth||100,r=b._container.clientHeight/2;b=(d=b.unproject([0,r]),
e=b.unproject([l,r]),f=Math.PI/180,g=d.lat*f,h=e.lat*f,k=Math.sin(g)*Math.sin(h)+Math.cos(g)*Math.cos(h)*Math.cos((e.lng-d.lng)*f),6371E3*Math.acos(Math.min(k,1)));c&&"imperial"===c.unit?(c=3.2808*b,5280<c?ya(a,l,c/5280,"mi"):ya(a,l,c,"ft")):c&&"nautical"===c.unit?ya(a,l,b/1852,"nm"):ya(a,l,b,"m")}function ya(b,a,c,d){var e;var f=Math.pow(10,(""+Math.floor(c)).length-1);if(10<=(e=c/f))var g=10;else 5<=e?g=5:3<=e?g=3:2<=e?g=2:1<=e?g=1:(g=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10)),g=Math.round(e*
g)/g);f=(e=g,f*e);c=f/c;"m"===d&&1E3<=f&&(f/=1E3,d="km");b.style.width=a*c+"px";b.innerHTML=f+d}var sa=b.createCommonjsModule(function(b){function a(b){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&
Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var b=new Blob([""],{type:"text/javascript"});b=URL.createObjectURL(b);try{var a=new Worker(b);var c=!0}catch(qh){c=
!1}a&&a.terminate();return URL.revokeObjectURL(b),c}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&function(b){if(void 0===c[b]){var d=c;var e=document.createElement("canvas");var f=Object.create(a.webGLContextAttributes);e=(f.failIfMajorPerformanceCaveat=b,e.probablySupportsContext?e.probablySupportsContext("webgl",f)||e.probablySupportsContext("experimental-webgl",f):e.supportsContext?e.supportsContext("webgl",f)||e.supportsContext("experimental-webgl",f):e.getContext("webgl",f)||e.getContext("experimental-webgl",
f));d[b]=e}return c[b]}(b&&b.failIfMajorPerformanceCaveat))}b.exports?b.exports=a:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=a);var c={};a.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),W={create:function(a,c,d){a=b.window.document.createElement(a);return void 0!==c&&(a.className=c),d&&d.appendChild(a),a},createNS:function(a,c){return b.window.document.createElementNS(a,c)}},za=b.window.document.documentElement.style,Da,ra=a(["userSelect","MozUserSelect",
"WebkitUserSelect","msUserSelect"]);W.disableDrag=function(){za&&ra&&(Da=za[ra],za[ra]="none")};W.enableDrag=function(){za&&ra&&(za[ra]=Da)};var ua=a(["transform","WebkitTransform"]);W.setTransform=function(b,a){b.style[ua]=a};var Aa=!1;try{var wa=Object.defineProperty({},"passive",{get:function(){Aa=!0}});b.window.addEventListener("test",wa,wa);b.window.removeEventListener("test",wa,wa)}catch(dh){Aa=!1}W.addEventListener=function(b,a,c,d){void 0===d&&(d={});"passive"in d&&Aa?b.addEventListener(a,
c,d):b.addEventListener(a,c,d.capture)};W.removeEventListener=function(b,a,c,d){void 0===d&&(d={});"passive"in d&&Aa?b.removeEventListener(a,c,d):b.removeEventListener(a,c,d.capture)};var Ma=function(a){a.preventDefault();a.stopPropagation();b.window.removeEventListener("click",Ma,!0)};W.suppressClick=function(){b.window.addEventListener("click",Ma,!0);b.window.setTimeout(function(){b.window.removeEventListener("click",Ma,!0)},0)};W.mousePos=function(a,c){var d=a.getBoundingClientRect();c=b.window.TouchEvent&&
c instanceof b.window.TouchEvent?c.touches[0]:c;return new b.Point(c.clientX-d.left-a.clientLeft,c.clientY-d.top-a.clientTop)};W.touchPos=function(a,c){var d=a.getBoundingClientRect(),e=[];c="touchend"===c.type?c.changedTouches:c.touches;for(var f=0;f<c.length;f++)e.push(new b.Point(c[f].clientX-d.left-a.clientLeft,c[f].clientY-d.top-a.clientTop));return e};W.mouseButton=function(a){return void 0!==b.window.InstallTrigger&&2===a.button&&a.ctrlKey&&0<=b.window.navigator.platform.toUpperCase().indexOf("MAC")?
0:a.button};W.remove=function(b){b.parentNode&&b.parentNode.removeChild(b)};var ba=function(a){function c(){a.call(this);this.images={};this.updatedImages={};this.callbackDispatchedThisFrame={};this.loaded=!1;this.requestors=[];this.patterns={};this.atlasImage=new b.RGBAImage({width:1,height:1});this.dirty=!0}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.isLoaded=function(){return this.loaded},c.prototype.setLoaded=function(b){if(this.loaded!==
b&&(this.loaded=b,b)){b=0;for(var a=this.requestors;b<a.length;b+=1){var c=a[b];this._notify(c.ids,c.callback)}this.requestors=[]}},c.prototype.getImage=function(b){return this.images[b]},c.prototype.addImage=function(b,a){this.images[b]=a},c.prototype.updateImage=function(b,a){a.version=this.images[b].version+1;this.images[b]=a;this.updatedImages[b]=!0},c.prototype.removeImage=function(b){var a=this.images[b];delete this.images[b];delete this.patterns[b];a.userImage&&a.userImage.onRemove&&a.userImage.onRemove()},
c.prototype.listImages=function(){return Object.keys(this.images)},c.prototype.getImages=function(b,a){var c=!0;if(!this.isLoaded())for(var d=0;d<b.length;d+=1)this.images[b[d]]||(c=!1);this.isLoaded()||c?this._notify(b,a):this.requestors.push({ids:b,callback:a})},c.prototype._notify=function(a,c){for(var d={},e=0;e<a.length;e+=1){var f=a[e];this.images[f]||this.fire(new b.Event("styleimagemissing",{id:f}));var g=this.images[f];g?d[f]={data:g.data.clone(),pixelRatio:g.pixelRatio,sdf:g.sdf,version:g.version,
hasRenderCallback:!(!g.userImage||!g.userImage.render)}:b.warnOnce('Image "'+f+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}c(null,d)},c.prototype.getPixelSize=function(){var b=this.atlasImage;return{width:b.width,height:b.height}},c.prototype.getPattern=function(a){var c=this.patterns[a],d=this.getImage(a);if(!d)return null;if(c&&c.position.version===
d.version)return c.position;c?c.position.version=d.version:(c={w:d.data.width+2,h:d.data.height+2,x:0,y:0},d=new b.ImagePosition(c,d),this.patterns[a]={bin:c,position:d});return this._updatePatternAtlas(),this.patterns[a].position},c.prototype.bind=function(a){var c=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new b.Texture(a,this.atlasImage,c.RGBA);this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)},c.prototype._updatePatternAtlas=function(){var a=
[];for(c in this.patterns)a.push(this.patterns[c].bin);a=b.potpack(a);var c=a.w;var d=a.h;a=this.atlasImage;for(var e in a.resize({width:c||1,height:d||1}),this.patterns){d=this.patterns[e].bin;c=d.x+1;d=d.y+1;var f=this.images[e].data,g=f.width,h=f.height;b.RGBAImage.copy(f,a,{x:0,y:0},{x:c,y:d},{width:g,height:h});b.RGBAImage.copy(f,a,{x:0,y:h-1},{x:c,y:d-1},{width:g,height:1});b.RGBAImage.copy(f,a,{x:0,y:0},{x:c,y:d+h},{width:g,height:1});b.RGBAImage.copy(f,a,{x:g-1,y:0},{x:c-1,y:d},{width:1,height:h});
b.RGBAImage.copy(f,a,{x:0,y:0},{x:c+g,y:d},{width:1,height:h})}this.dirty=!0},c.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},c.prototype.dispatchRenderCallbacks=function(b){for(var a=0;a<b.length;a+=1){var c=b[a];if(!this.callbackDispatchedThisFrame[c]){this.callbackDispatchedThisFrame[c]=!0;var d=this.images[c];var e=d;var f=e.userImage;e=f&&f.render&&f.render()?(e.data.replace(new Uint8Array(f.data.buffer)),!0):!1;e&&this.updateImage(c,d)}}},c}(b.Evented);e.prototype.draw=
function(b){this.ctx.clearRect(0,0,this.size,this.size);this.ctx.fillText(b,this.buffer,this.middle);b=this.ctx.getImageData(0,0,this.size,this.size);for(var a=new Uint8ClampedArray(this.size*this.size),c=0;c<this.size*this.size;c++){var d=b.data[4*c+3]/255;this.gridOuter[c]=1===d?0:0===d?1E20:Math.pow(Math.max(0,.5-d),2);this.gridInner[c]=1===d?1E20:0===d?0:Math.pow(Math.max(0,d-.5),2)}h(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z);h(this.gridInner,this.size,this.size,this.f,this.d,
this.v,this.z);for(c=0;c<this.size*this.size;c++)a[c]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[c]-this.gridInner[c])/this.radius+this.cutoff))));return a};e.default=e;var Ea=function(b,a){this.requestManager=b;this.localIdeographFontFamily=a;this.entries={}};Ea.prototype.setURL=function(b){this.url=b};Ea.prototype.getGlyphs=function(a,c){var d=this,e=[],f;for(f in a)for(var g=0,h=a[f];g<h.length;g+=1)e.push({stack:f,id:h[g]});b.asyncAll(e,function(b,a){var c=b.stack,e=b.id,f=d.entries[c];
f||(f=d.entries[c]={glyphs:{},requests:{}});b=f.glyphs[e];if(void 0===b){if(b=d._tinySDF(f,c,e))return f.glyphs[e]=b,void a(null,{stack:c,id:e,glyph:b});var g=Math.floor(e/256);if(65535<256*g)a(Error("glyphs \x3e 65535 not supported"));else{var h=f.requests[g];h||(h=f.requests[g]=[],Ea.loadGlyphRange(c,g,d.url,d.requestManager,function(b,a){if(a)for(var c in a)d._doesCharSupportLocalGlyph(+c)||(f.glyphs[+c]=a[+c]);c=0;for(var e=h;c<e.length;c+=1)(0,e[c])(b,a);delete f.requests[g]}));h.push(function(b,
d){b?a(b):d&&a(null,{stack:c,id:e,glyph:d[e]||null})})}}else a(null,{stack:c,id:e,glyph:b})},function(b,a){if(b)c(b);else if(a){b={};for(var d=0;d<a.length;d+=1){var e=a[d],f=e.stack,g=e.id;e=e.glyph;(b[f]||(b[f]={}))[g]=e&&{id:e.id,bitmap:e.bitmap.clone(),metrics:e.metrics}}c(null,b)}})};Ea.prototype._doesCharSupportLocalGlyph=function(a){return!!this.localIdeographFontFamily&&(b.isChar["CJK Unified Ideographs"](a)||b.isChar["Hangul Syllables"](a)||b.isChar.Hiragana(a)||b.isChar.Katakana(a))};Ea.prototype._tinySDF=
function(a,c,d){var e=this.localIdeographFontFamily;if(e&&this._doesCharSupportLocalGlyph(d)){var f=a.tinySDF;f||(f="400",/bold/i.test(c)?f="900":/medium/i.test(c)?f="500":/light/i.test(c)&&(f="200"),f=a.tinySDF=new Ea.TinySDF(24,3,8,.25,e,f));return{id:d,bitmap:new b.AlphaImage({width:30,height:30},f.draw(String.fromCharCode(d))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}};Ea.loadGlyphRange=function(a,c,d,e,f){c*=256;var g=c+255;a=e.transformRequest(e.normalizeGlyphsURL(d).replace("{fontstack}",
a).replace("{range}",c+"-"+g),b.ResourceType.Glyphs);b.getArrayBuffer(a,function(a,c){if(a)f(a);else if(c){a={};var d=0;for(c=b.parseGlyphPBF(c);d<c.length;d+=1){var e=c[d];a[e.id]=e}f(null,a)}})};Ea.TinySDF=e;var Ba=function(){this.specification=b.styleSpec.light.position};Ba.prototype.possiblyEvaluate=function(a,c){return b.sphericalToCartesian(a.expression.evaluate(c))};Ba.prototype.interpolate=function(a,c,d){return{x:b.number(a.x,c.x,d),y:b.number(a.y,c.y,d),z:b.number(a.z,c.z,d)}};var Na=new b.Properties({anchor:new b.DataConstantProperty(b.styleSpec.light.anchor),
position:new Ba,color:new b.DataConstantProperty(b.styleSpec.light.color),intensity:new b.DataConstantProperty(b.styleSpec.light.intensity)}),Ja=function(a){function c(c){a.call(this);this._transitionable=new b.Transitionable(Na);this.setLight(c);this._transitioning=this._transitionable.untransitioned()}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getLight=function(){return this._transitionable.serialize()},c.prototype.setLight=function(a,
c){if(void 0===c&&(c={}),!this._validate(b.validateLight,a,c))for(var d in a)c=a[d],b.endsWith(d,"-transition")?this._transitionable.setTransition(d.slice(0,-11),c):this._transitionable.setValue(d,c)},c.prototype.updateTransitions=function(b){this._transitioning=this._transitionable.transitioned(b,this._transitioning)},c.prototype.hasTransition=function(){return this._transitioning.hasTransition()},c.prototype.recalculate=function(b){this.properties=this._transitioning.possiblyEvaluate(b)},c.prototype._validate=
function(a,c,d){return(!d||!1!==d.validate)&&b.emitValidationErrors(this,a.call(b.validateStyle,b.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:b.styleSpec})))},c}(b.Evented),Lb=function(b,a){this.width=b;this.height=a;this.nextRow=0;this.bytes=4;this.data=new Uint8Array(this.width*this.height*this.bytes);this.positions={}};Lb.prototype.getDash=function(b,a){var c=b.join(",")+String(a);return this.positions[c]||(this.positions[c]=this.addDash(b,a)),this.positions[c]};Lb.prototype.addDash=
function(a,c){var d=c?7:0,e=2*d+1;if(this.nextRow+e>this.height)return b.warnOnce("LineAtlas out of space"),null;for(var f=0,g=0;g<a.length;g++)f+=a[g];g=this.width/f;for(var h=g/2,k=1==a.length%2,l=-d;l<=d;l++)for(var r=this.width*(this.nextRow+d+l),t=k?-a[a.length-1]:0,m=a[0],u=1,n=0;n<this.width;n++){for(;m<n/g;)t=m,m+=a[u],k&&u===a.length-1&&(m+=a[0]),u++;var v=Math.min(Math.abs(n-t*g),Math.abs(n-m*g)),w=1==u%2;if(c){var z=d?l/d*(h+1):0;w?(w=h-Math.abs(z),v=Math.sqrt(v*v+w*w)):v=h-Math.sqrt(v*
v+z*z)}else v*=w?1:-1;this.data[3+4*(r+n)]=Math.max(0,Math.min(255,v+128))}a={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:f};return this.nextRow+=e,this.dirty=!0,a};Lb.prototype.bind=function(b){b=b.gl;this.texture?(b.bindTexture(b.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,b.texSubImage2D(b.TEXTURE_2D,0,0,0,this.width,this.height,b.RGBA,b.UNSIGNED_BYTE,this.data))):(this.texture=b.createTexture(),b.bindTexture(b.TEXTURE_2D,this.texture),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,
b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,this.width,this.height,0,b.RGBA,b.UNSIGNED_BYTE,this.data))};var Mb=function $d(a,c){this.workerPool=a;this.actors=[];this.currentActor=0;this.id=b.uniqueId();a=this.workerPool.acquire(this.id);for(var d=0;d<a.length;d++){var e=new $d.Actor(a[d],c,this.id);e.name="Worker "+d;this.actors.push(e)}};
Mb.prototype.broadcast=function(a,c,d){b.asyncAll(this.actors,function(b,d){b.send(a,c,d)},d||function(){})};Mb.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]};Mb.prototype.remove=function(){this.actors.forEach(function(b){b.remove()});this.actors=[];this.workerPool.release(this.id)};Mb.Actor=b.Actor;var Pa=function(a,c,d){this.bounds=b.LngLatBounds.convert(this.validateBounds(a));this.minzoom=c||0;this.maxzoom=d||24};
Pa.prototype.validateBounds=function(b){return Array.isArray(b)&&4===b.length?[Math.max(-180,b[0]),Math.max(-90,b[1]),Math.min(180,b[2]),Math.min(90,b[3])]:[-180,-90,180,90]};Pa.prototype.contains=function(a){var c=Math.pow(2,a.z),d=Math.floor(b.mercatorXfromLng(this.bounds.getWest())*c),e=Math.floor(b.mercatorYfromLat(this.bounds.getNorth())*c),f=Math.ceil(b.mercatorXfromLng(this.bounds.getEast())*c);c=Math.ceil(b.mercatorYfromLat(this.bounds.getSouth())*c);return a.x>=d&&a.x<f&&a.y>=e&&a.y<c};var zb=
function(a){function c(c,d,e,f){if(a.call(this),this.id=c,this.dispatcher=e,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,b.extend(this,b.pick(d,["url","scheme","tileSize"])),this._options=b.extend({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,512!==this.tileSize)throw Error("vector tile sources must have a tileSize of 512");this.setEventedParent(f)}return a&&(c.__proto__=
a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.load=function(){var a=this;this._loaded=!1;this.fire(new b.Event("dataloading",{dataType:"source"}));this._tileJSONRequest=f(this._options,this.map._requestManager,function(c,d){a._tileJSONRequest=null;a._loaded=!0;c?a.fire(new b.ErrorEvent(c)):d&&(b.extend(a,d),d.bounds&&(a.tileBounds=new Pa(d.bounds,a.minzoom,a.maxzoom)),b.postTurnstileEvent(d.tiles,a.map._requestManager._customAccessToken),b.postMapLoadEvent(d.tiles,
a.map._getMapId(),a.map._requestManager._skuToken,a.map._requestManager._customAccessToken),a.fire(new b.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new b.Event("data",{dataType:"source",sourceDataType:"content"})))})},c.prototype.loaded=function(){return this._loaded},c.prototype.hasTile=function(b){return!this.tileBounds||this.tileBounds.contains(b.canonical)},c.prototype.onAdd=function(b){this.map=b;this.load()},c.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),
this._tileJSONRequest=null)},c.prototype.serialize=function(){return b.extend({},this._options)},c.prototype.loadTile=function(a,c){function d(d,e){return delete a.request,a.aborted?c(null):d&&404!==d.status?c(d):(e&&e.resourceTiming&&(a.resourceTiming=e.resourceTiming),this.map._refreshExpiredTiles&&e&&a.setExpiryData(e),a.loadVectorData(e,this.map.painter),b.cacheEntryPossiblyAdded(this.dispatcher),c(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}var e=
this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.url,null);e={request:this.map._requestManager.transformRequest(e,b.ResourceType.Tile),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:b.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};e.request.collectResourceTiming=this._collectResourceTiming;a.actor&&"expired"!==a.state?"loading"===a.state?
a.reloadCallback=c:a.request=a.actor.send("reloadTile",e,d.bind(this)):(a.actor=this.dispatcher.getActor(),a.request=a.actor.send("loadTile",e,d.bind(this)))},c.prototype.abortTile=function(b){b.request&&(b.request.cancel(),delete b.request);b.actor&&b.actor.send("abortTile",{uid:b.uid,type:this.type,source:this.id},void 0)},c.prototype.unloadTile=function(b){b.unloadVectorData();b.actor&&b.actor.send("removeTile",{uid:b.uid,type:this.type,source:this.id},void 0)},c.prototype.hasTransition=function(){return!1},
c}(b.Evented),cb=function(a){function c(c,d,e,f){a.call(this);this.id=c;this.dispatcher=e;this.setEventedParent(f);this.type="raster";this.minzoom=0;this.maxzoom=22;this.roundZoom=!0;this.scheme="xyz";this.tileSize=512;this._loaded=!1;this._options=b.extend({type:"raster"},d);b.extend(this,b.pick(d,["url","scheme","tileSize"]))}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.load=function(){var a=this;this._loaded=!1;this.fire(new b.Event("dataloading",
{dataType:"source"}));this._tileJSONRequest=f(this._options,this.map._requestManager,function(c,d){a._tileJSONRequest=null;a._loaded=!0;c?a.fire(new b.ErrorEvent(c)):d&&(b.extend(a,d),d.bounds&&(a.tileBounds=new Pa(d.bounds,a.minzoom,a.maxzoom)),b.postTurnstileEvent(d.tiles),b.postMapLoadEvent(d.tiles,a.map._getMapId(),a.map._requestManager._skuToken),a.fire(new b.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new b.Event("data",{dataType:"source",sourceDataType:"content"})))})},
c.prototype.loaded=function(){return this._loaded},c.prototype.onAdd=function(b){this.map=b;this.load()},c.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},c.prototype.serialize=function(){return b.extend({},this._options)},c.prototype.hasTile=function(b){return!this.tileBounds||this.tileBounds.contains(b.canonical)},c.prototype.loadTile=function(a,c){var d=this,e=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,
this.scheme),this.url,this.tileSize);a.request=b.getImage(this.map._requestManager.transformRequest(e,b.ResourceType.Tile),function(e,f){if(delete a.request,a.aborted)a.state="unloaded",c(null);else if(e)a.state="errored",c(e);else if(f){d.map._refreshExpiredTiles&&a.setExpiryData(f);delete f.cacheControl;delete f.expires;e=d.map.painter.context;var g=e.gl;a.texture=d.map.painter.getTileTexture(f.width);a.texture?a.texture.update(f,{useMipmap:!0}):(a.texture=new b.Texture(e,f,g.RGBA,{useMipmap:!0}),
a.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST),e.extTextureFilterAnisotropic&&g.texParameterf(g.TEXTURE_2D,e.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.extTextureFilterAnisotropicMax));a.state="loaded";b.cacheEntryPossiblyAdded(d.dispatcher);c(null)}})},c.prototype.abortTile=function(b,a){b.request&&(b.request.cancel(),delete b.request);a()},c.prototype.unloadTile=function(b,a){b.texture&&this.map.painter.saveTileTexture(b.texture);a()},c.prototype.hasTransition=function(){return!1},
c}(b.Evented),ub=function(a){function c(c,d,e,f){a.call(this,c,d,e,f);this.type="raster-dem";this.maxzoom=22;this._options=b.extend({type:"raster-dem"},d);this.encoding=d.encoding||"mapbox"}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},c.prototype.loadTile=function(a,c){function d(b,d){b&&(a.state=
"errored",c(b));d&&(a.dem=d,a.needsHillshadePrepare=!0,a.state="loaded",c(null))}var e=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);a.request=b.getImage(this.map._requestManager.transformRequest(e,b.ResourceType.Tile),function(e,f){(delete a.request,a.aborted)?(a.state="unloaded",c(null)):e?(a.state="errored",c(e)):f&&(this.map._refreshExpiredTiles&&a.setExpiryData(f),delete f.cacheControl,delete f.expires,e=b.browser.getImageData(f),
e={uid:a.uid,coord:a.tileID,source:this.id,rawImageData:e,encoding:this.encoding},a.actor&&"expired"!==a.state||(a.actor=this.dispatcher.getActor(),a.actor.send("loadDEMTile",e,d.bind(this))))}.bind(this));a.neighboringTiles=this._getNeighboringTiles(a.tileID)},c.prototype._getNeighboringTiles=function(a){var c=a.canonical,d=Math.pow(2,c.z),e=(c.x-1+d)%d,f=0===c.x?a.wrap-1:a.wrap,g=(c.x+1+d)%d,h=c.x+1===d?a.wrap+1:a.wrap,k={};return k[(new b.OverscaledTileID(a.overscaledZ,f,c.z,e,c.y)).key]={backfilled:!1},
k[(new b.OverscaledTileID(a.overscaledZ,h,c.z,g,c.y)).key]={backfilled:!1},0<c.y&&(k[(new b.OverscaledTileID(a.overscaledZ,f,c.z,e,c.y-1)).key]={backfilled:!1},k[(new b.OverscaledTileID(a.overscaledZ,a.wrap,c.z,c.x,c.y-1)).key]={backfilled:!1},k[(new b.OverscaledTileID(a.overscaledZ,h,c.z,g,c.y-1)).key]={backfilled:!1}),c.y+1<d&&(k[(new b.OverscaledTileID(a.overscaledZ,f,c.z,e,c.y+1)).key]={backfilled:!1},k[(new b.OverscaledTileID(a.overscaledZ,a.wrap,c.z,c.x,c.y+1)).key]={backfilled:!1},k[(new b.OverscaledTileID(a.overscaledZ,
h,c.z,g,c.y+1)).key]={backfilled:!1}),k},c.prototype.unloadTile=function(b){b.demTexture&&this.map.painter.saveTileTexture(b.demTexture);b.fbo&&(b.fbo.destroy(),delete b.fbo);b.dem&&delete b.dem;delete b.neighboringTiles;b.state="unloaded";b.actor&&b.actor.send("removeDEMTile",{uid:b.uid,source:this.id})},c}(cb),db=function(a){function c(c,d,e,f){a.call(this);this.id=c;this.type="geojson";this.minzoom=0;this.maxzoom=18;this.tileSize=512;this.reparseOverscaled=this.isTileClipped=!0;this._loaded=this._removed=
!1;this.actor=e.getActor();this.setEventedParent(f);this._data=d.data;this._options=b.extend({},d);this._collectResourceTiming=d.collectResourceTiming;this._resourceTiming=[];void 0!==d.maxzoom&&(this.maxzoom=d.maxzoom);d.type&&(this.type=d.type);d.attribution&&(this.attribution=d.attribution);c=b.EXTENT/this.tileSize;this.workerOptions=b.extend({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(void 0!==d.buffer?d.buffer:128)*c,tolerance:(void 0!==d.tolerance?d.tolerance:.375)*c,extent:b.EXTENT,
maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:void 0!==d.clusterMaxZoom?Math.min(d.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:b.EXTENT,radius:(d.clusterRadius||50)*c,log:!1},clusterProperties:d.clusterProperties},d.workerOptions)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.load=function(){var a=this;this.fire(new b.Event("dataloading",{dataType:"source"}));this._updateWorkerData(function(c){c?
a.fire(new b.ErrorEvent(c)):(c={dataType:"source",sourceDataType:"metadata"},a._collectResourceTiming&&a._resourceTiming&&0<a._resourceTiming.length&&(c.resourceTiming=a._resourceTiming,a._resourceTiming=[]),a.fire(new b.Event("data",c)))})},c.prototype.onAdd=function(b){this.map=b;this.load()},c.prototype.setData=function(a){var c=this;return this._data=a,this.fire(new b.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(a){a?c.fire(new b.ErrorEvent(a)):(a={dataType:"source",
sourceDataType:"content"},c._collectResourceTiming&&c._resourceTiming&&0<c._resourceTiming.length&&(a.resourceTiming=c._resourceTiming,c._resourceTiming=[]),c.fire(new b.Event("data",a)))}),this},c.prototype.getClusterExpansionZoom=function(b,a){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:b,source:this.id},a),this},c.prototype.getClusterChildren=function(b,a){return this.actor.send("geojson.getClusterChildren",{clusterId:b,source:this.id},a),this},c.prototype.getClusterLeaves=
function(b,a,c,d){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:b,limit:a,offset:c},d),this},c.prototype._updateWorkerData=function(a){var c=this;this._loaded=!1;var d=b.extend({},this.workerOptions),e=this._data;"string"==typeof e?(d.request=this.map._requestManager.transformRequest(b.browser.resolveURL(e),b.ResourceType.Source),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(e);this.actor.send(this.type+".loadData",d,function(b,e){c._removed||
e&&e.abandoned||(c._loaded=!0,e&&e.resourceTiming&&e.resourceTiming[c.id]&&(c._resourceTiming=e.resourceTiming[c.id].slice(0)),c.actor.send(c.type+".coalesce",{source:d.source},null),a(b))})},c.prototype.loaded=function(){return this._loaded},c.prototype.loadTile=function(a,c){var d=this,e=a.actor?"reloadTile":"loadTile";a.actor=this.actor;a.request=this.actor.send(e,{type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:b.browser.devicePixelRatio,
showCollisionBoxes:this.map.showCollisionBoxes},function(b,f){return delete a.request,a.unloadVectorData(),a.aborted?c(null):b?c(b):(a.loadVectorData(f,d.map.painter,"reloadTile"===e),c(null))})},c.prototype.abortTile=function(b){b.request&&(b.request.cancel(),delete b.request);b.aborted=!0},c.prototype.unloadTile=function(b){b.unloadVectorData();this.actor.send("removeTile",{uid:b.uid,type:this.type,source:this.id})},c.prototype.onRemove=function(){this._removed=!0;this.actor.send("removeSource",
{type:this.type,source:this.id})},c.prototype.serialize=function(){return b.extend({},this._options,{type:this.type,data:this._data})},c.prototype.hasTransition=function(){return!1},c}(b.Evented),ab=function(a){function c(b,c,d,e){a.call(this);this.id=b;this.dispatcher=d;this.coordinates=c.coordinates;this.type="image";this.minzoom=0;this.maxzoom=22;this.tileSize=512;this.tiles={};this._loaded=!1;this.setEventedParent(e);this.options=c}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),
c.prototype.constructor=c,c.prototype.load=function(a,c){var d=this;this._loaded=!1;this.fire(new b.Event("dataloading",{dataType:"source"}));this.url=this.options.url;b.getImage(this.map._requestManager.transformRequest(this.url,b.ResourceType.Image),function(e,f){d._loaded=!0;e?d.fire(new b.ErrorEvent(e)):f&&(d.image=f,a&&(d.coordinates=a),c&&c(),d._finishLoading())})},c.prototype.loaded=function(){return this._loaded},c.prototype.updateImage=function(b){var a=this;return this.image&&b.url?(this.options.url=
b.url,this.load(b.coordinates,function(){a.texture=null}),this):this},c.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new b.Event("data",{dataType:"source",sourceDataType:"metadata"})))},c.prototype.onAdd=function(b){this.map=b;this.load()},c.prototype.setCoordinates=function(a){var c=this;this.coordinates=a;a=a.map(b.MercatorCoordinate.fromLngLat);this.tileID=function(a){for(var c=1/0,d=1/0,e=-1/0,f=-1/0,g=0;g<a.length;g+=1){var h=a[g];c=Math.min(c,
h.x);d=Math.min(d,h.y);e=Math.max(e,h.x);f=Math.max(f,h.y)}a=Math.max(0,Math.floor(-Math.log(Math.max(e-c,f-d))/Math.LN2));g=Math.pow(2,a);return new b.CanonicalTileID(a,Math.floor((c+e)/2*g),Math.floor((d+f)/2*g))}(a);this.minzoom=this.maxzoom=this.tileID.z;a=a.map(function(b){return c.tileID.getTilePoint(b)._round()});return this._boundsArray=new b.StructArrayLayout4i8,this._boundsArray.emplaceBack(a[0].x,a[0].y,0,0),this._boundsArray.emplaceBack(a[1].x,a[1].y,b.EXTENT,0),this._boundsArray.emplaceBack(a[3].x,
a[3].y,0,b.EXTENT),this._boundsArray.emplaceBack(a[2].x,a[2].y,b.EXTENT,b.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new b.Event("data",{dataType:"source",sourceDataType:"content"})),this},c.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var a=this.map.painter.context,c=a.gl,d;for(d in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,b.rasterBoundsAttributes.members)),this.boundsSegments||
(this.boundsSegments=b.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new b.Texture(a,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles)a=this.tiles[d],"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}},c.prototype.loadTile=function(b,a){this.tileID&&this.tileID.equals(b.tileID.canonical)?(this.tiles[String(b.tileID.wrap)]=b,b.buckets={},a(null)):(b.state="errored",a(null))},c.prototype.serialize=function(){return{type:"image",url:this.options.url,
coordinates:this.coordinates}},c.prototype.hasTransition=function(){return!1},c}(b.Evented),eb=function(a){function c(b,c,d,e){a.call(this,b,c,d,e);this.roundZoom=!0;this.type="video";this.options=c}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.load=function(){var a=this;this._loaded=!1;var c=this.options;this.urls=[];var d=0;for(c=c.urls;d<c.length;d+=1)this.urls.push(this.map._requestManager.transformRequest(c[d],b.ResourceType.Source).url);
b.getVideo(this.urls,function(c,d){a._loaded=!0;c?a.fire(new b.ErrorEvent(c)):d&&(a.video=d,a.video.loop=!0,a.video.addEventListener("playing",function(){a.map.triggerRepaint()}),a.map&&a.video.play(),a._finishLoading())})},c.prototype.pause=function(){this.video&&this.video.pause()},c.prototype.play=function(){this.video&&this.video.play()},c.prototype.seek=function(a){if(this.video){var c=this.video.seekable;a<c.start(0)||a>c.end(0)?this.fire(new b.ErrorEvent(new b.ValidationError("Playback for this video can be set only between the "+
c.start(0)+" and "+c.end(0)+"-second mark."))):this.video.currentTime=a}},c.prototype.getVideo=function(){return this.video},c.prototype.onAdd=function(b){this.map||(this.map=b,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},c.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||2>this.video.readyState)){var a=this.map.painter.context,c=a.gl,d;for(d in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,b.rasterBoundsAttributes.members)),
this.boundsSegments||(this.boundsSegments=b.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new b.Texture(a,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles)a=this.tiles[d],"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}},c.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},
c.prototype.hasTransition=function(){return this.video&&!this.video.paused},c}(ab),gb=function(a){function c(c,d,e,f){a.call(this,c,d,e,f);d.coordinates?Array.isArray(d.coordinates)&&4===d.coordinates.length&&!d.coordinates.some(function(b){return!Array.isArray(b)||2!==b.length||b.some(function(b){return"number"!=typeof b})})||this.fire(new b.ErrorEvent(new b.ValidationError("sources."+c,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new b.ErrorEvent(new b.ValidationError("sources."+
c,null,'missing required property "coordinates"')));d.animate&&"boolean"!=typeof d.animate&&this.fire(new b.ErrorEvent(new b.ValidationError("sources."+c,null,'optional "animate" property must be a boolean value')));d.canvas?"string"==typeof d.canvas||d.canvas instanceof b.window.HTMLCanvasElement||this.fire(new b.ErrorEvent(new b.ValidationError("sources."+c,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new b.ErrorEvent(new b.ValidationError("sources."+
c,null,'missing required property "canvas"')));this.options=d;this.animate=void 0===d.animate||d.animate}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.load=function(){this._loaded=!0;this.canvas||(this.canvas=this.options.canvas instanceof b.window.HTMLCanvasElement?this.options.canvas:b.window.document.getElementById(this.options.canvas));this.width=this.canvas.width;this.height=this.canvas.height;this._hasInvalidDimensions()?this.fire(new b.ErrorEvent(Error("Canvas dimensions cannot be less than or equal to zero."))):
(this.play=function(){this._playing=!0;this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},c.prototype.getCanvas=function(){return this.canvas},c.prototype.onAdd=function(b){this.map=b;this.load();this.canvas&&this.animate&&this.play()},c.prototype.onRemove=function(){this.pause()},c.prototype.prepare=function(){var a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=
this.canvas.height,a=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var c=this.map.painter.context,d=c.gl,e;for(e in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,b.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=b.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new b.Texture(c,this.canvas,d.RGBA,{premultiply:!0}),this.tiles)a=this.tiles[e],
"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}},c.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},c.prototype.hasTransition=function(){return this._playing},c.prototype._hasInvalidDimensions=function(){for(var b=0,a=[this.canvas.width,this.canvas.height];b<a.length;b+=1){var c=a[b];if(isNaN(c)||0>=c)return!0}return!1},c}(ab),pa={vector:zb,raster:cb,"raster-dem":ub,geojson:db,video:eb,image:ab,canvas:gb},Oa=function(a,c,d,e){c=new pa[c.type](a,c,d,
e);if(c.id!==a)throw Error("Expected Source id to be "+a+" instead of "+c.id);return b.bindAll(["load","abort","unload","serialize","prepare"],c),c},Za=function(b,a){this.max=b;this.onRemove=a;this.reset()};Za.prototype.reset=function(){for(var b in this.data)for(var a=0,c=this.data[b];a<c.length;a+=1){var d=c[a];d.timeout&&clearTimeout(d.timeout);this.onRemove(d.value)}return this.data={},this.order=[],this};Za.prototype.add=function(b,a,c){var d=this,e=b.wrapped().key;void 0===this.data[e]&&(this.data[e]=
[]);var f={value:a,timeout:void 0};(void 0!==c&&(f.timeout=setTimeout(function(){d.remove(b,f)},c)),this.data[e].push(f),this.order.push(e),this.order.length>this.max)&&(a=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(a);return this};Za.prototype.has=function(b){return b.wrapped().key in this.data};Za.prototype.getAndRemove=function(b){return this.has(b)?this._getAndRemoveByKey(b.wrapped().key):null};Za.prototype._getAndRemoveByKey=function(b){var a=this.data[b].shift();return a.timeout&&
clearTimeout(a.timeout),0===this.data[b].length&&delete this.data[b],this.order.splice(this.order.indexOf(b),1),a.value};Za.prototype.get=function(b){return this.has(b)?this.data[b.wrapped().key][0].value:null};Za.prototype.remove=function(b,a){if(!this.has(b))return this;b=b.wrapped().key;a=void 0===a?0:this.data[b].indexOf(a);var c=this.data[b][a];return this.data[b].splice(a,1),c.timeout&&clearTimeout(c.timeout),0===this.data[b].length&&delete this.data[b],this.onRemove(c.value),this.order.splice(this.order.indexOf(b),
1),this};Za.prototype.setMaxSize=function(b){for(this.max=b;this.order.length>this.max;)(b=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(b);return this};var qa=function(b,a,c){this.context=b;var d=b.gl;this.buffer=d.createBuffer();this.dynamicDraw=!!c;this.context.unbindVAO();b.bindElementBuffer.set(this.buffer);d.bufferData(d.ELEMENT_ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW);this.dynamicDraw||delete a.arrayBuffer};qa.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)};
qa.prototype.updateData=function(b){var a=this.context.gl;this.context.unbindVAO();this.bind();a.bufferSubData(a.ELEMENT_ARRAY_BUFFER,0,b.arrayBuffer)};qa.prototype.destroy=function(){var b=this.context.gl;this.buffer&&(b.deleteBuffer(this.buffer),delete this.buffer)};var vb={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Nb=function(b,a,c,d){this.length=a.length;this.attributes=c;this.itemSize=a.bytesPerElement;this.dynamicDraw=
d;this.context=b;c=b.gl;this.buffer=c.createBuffer();b.bindVertexBuffer.set(this.buffer);c.bufferData(c.ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?c.DYNAMIC_DRAW:c.STATIC_DRAW);this.dynamicDraw||delete a.arrayBuffer};Nb.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)};Nb.prototype.updateData=function(b){var a=this.context.gl;this.bind();a.bufferSubData(a.ARRAY_BUFFER,0,b.arrayBuffer)};Nb.prototype.enableAttributes=function(b,a){for(var c=0;c<this.attributes.length;c++){var d=
a.attributes[this.attributes[c].name];void 0!==d&&b.enableVertexAttribArray(d)}};Nb.prototype.setVertexAttribPointers=function(b,a,c){for(var d=0;d<this.attributes.length;d++){var e=this.attributes[d],f=a.attributes[e.name];void 0!==f&&b.vertexAttribPointer(f,e.components,b[vb[e.type]],!1,this.itemSize,e.offset+this.itemSize*(c||0))}};Nb.prototype.destroy=function(){var b=this.context.gl;this.buffer&&(b.deleteBuffer(this.buffer),delete this.buffer)};var Ya=function(b){this.gl=b.gl;this.current=this.default=
this.getDefault();this.dirty=!1};Ya.prototype.get=function(){return this.current};Ya.prototype.set=function(b){};Ya.prototype.getDefault=function(){return this.default};Ya.prototype.setDefault=function(){this.set(this.default)};var td=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return b.Color.transparent},c.prototype.set=function(b){var a=this.current;(b.r!==a.r||b.g!==
a.g||b.b!==a.b||b.a!==a.a||this.dirty)&&(this.gl.clearColor(b.r,b.g,b.b,b.a),this.current=b,this.dirty=!1)},c}(Ya),mc=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return 1},a.prototype.set=function(b){(b!==this.current||this.dirty)&&(this.gl.clearDepth(b),this.current=b,this.dirty=!1)},a}(Ya),ud=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=
b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return 0},a.prototype.set=function(b){(b!==this.current||this.dirty)&&(this.gl.clearStencil(b),this.current=b,this.dirty=!1)},a}(Ya),Nc=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return[!0,!0,!0,!0]},a.prototype.set=function(b){var a=this.current;(b[0]!==a[0]||b[1]!==
a[1]||b[2]!==a[2]||b[3]!==a[3]||this.dirty)&&(this.gl.colorMask(b[0],b[1],b[2],b[3]),this.current=b,this.dirty=!1)},a}(Ya),Hb=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return!0},a.prototype.set=function(b){(b!==this.current||this.dirty)&&(this.gl.depthMask(b),this.current=b,this.dirty=!1)},a}(Ya),Yb=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=
b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return 255},a.prototype.set=function(b){(b!==this.current||this.dirty)&&(this.gl.stencilMask(b),this.current=b,this.dirty=!1)},a}(Ya),uc=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},a.prototype.set=function(b){var a=this.current;
(b.func!==a.func||b.ref!==a.ref||b.mask!==a.mask||this.dirty)&&(this.gl.stencilFunc(b.func,b.ref,b.mask),this.current=b,this.dirty=!1)},a}(Ya),$a=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){var b=this.gl;return[b.KEEP,b.KEEP,b.KEEP]},a.prototype.set=function(b){var a=this.current;(b[0]!==a[0]||b[1]!==a[1]||b[2]!==a[2]||this.dirty)&&(this.gl.stencilOp(b[0],b[1],b[2]),
this.current=b,this.dirty=!1)},a}(Ya),Xd=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return!1},a.prototype.set=function(b){if(b!==this.current||this.dirty){var a=this.gl;b?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST);this.current=b;this.dirty=!1}},a}(Ya),Fc=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&
b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return[0,1]},a.prototype.set=function(b){var a=this.current;(b[0]!==a[0]||b[1]!==a[1]||this.dirty)&&(this.gl.depthRange(b[0],b[1]),this.current=b,this.dirty=!1)},a}(Ya),Md=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return!1},a.prototype.set=function(b){if(b!==this.current||this.dirty){var a=this.gl;
b?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST);this.current=b;this.dirty=!1}},a}(Ya),nc=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return this.gl.LESS},a.prototype.set=function(b){(b!==this.current||this.dirty)&&(this.gl.depthFunc(b),this.current=b,this.dirty=!1)},a}(Ya),Yd=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&
b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return!1},a.prototype.set=function(b){if(b!==this.current||this.dirty){var a=this.gl;b?a.enable(a.BLEND):a.disable(a.BLEND);this.current=b;this.dirty=!1}},a}(Ya),Ub=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){var b=this.gl;return[b.ONE,b.ZERO]},a.prototype.set=function(b){var a=this.current;(b[0]!==
a[0]||b[1]!==a[1]||this.dirty)&&(this.gl.blendFunc(b[0],b[1]),this.current=b,this.dirty=!1)},a}(Ya),Oc=function(a){function c(){a.apply(this,arguments)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return b.Color.transparent},c.prototype.set=function(b){var a=this.current;(b.r!==a.r||b.g!==a.g||b.b!==a.b||b.a!==a.a||this.dirty)&&(this.gl.blendColor(b.r,b.g,b.b,b.a),this.current=b,this.dirty=!1)},c}(Ya),pb=function(b){function a(){b.apply(this,
arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return this.gl.FUNC_ADD},a.prototype.set=function(b){(b!==this.current||this.dirty)&&(this.gl.blendEquation(b),this.current=b,this.dirty=!1)},a}(Ya),Nd=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return!1},a.prototype.set=function(b){if(b!==
this.current||this.dirty){var a=this.gl;b?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE);this.current=b;this.dirty=!1}},a}(Ya),Xc=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return this.gl.BACK},a.prototype.set=function(b){(b!==this.current||this.dirty)&&(this.gl.cullFace(b),this.current=b,this.dirty=!1)},a}(Ya),Yg=function(b){function a(){b.apply(this,arguments)}return b&&
(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return this.gl.CCW},a.prototype.set=function(b){(b!==this.current||this.dirty)&&(this.gl.frontFace(b),this.current=b,this.dirty=!1)},a}(Ya),vc=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return null},a.prototype.set=function(b){(b!==this.current||this.dirty)&&
(this.gl.useProgram(b),this.current=b,this.dirty=!1)},a}(Ya),Ka=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return this.gl.TEXTURE0},a.prototype.set=function(b){(b!==this.current||this.dirty)&&(this.gl.activeTexture(b),this.current=b,this.dirty=!1)},a}(Ya),Pc=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),
a.prototype.constructor=a,a.prototype.getDefault=function(){var b=this.gl;return[0,0,b.drawingBufferWidth,b.drawingBufferHeight]},a.prototype.set=function(b){var a=this.current;(b[0]!==a[0]||b[1]!==a[1]||b[2]!==a[2]||b[3]!==a[3]||this.dirty)&&(this.gl.viewport(b[0],b[1],b[2],b[3]),this.current=b,this.dirty=!1)},a}(Ya),Qc=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return null},
a.prototype.set=function(b){if(b!==this.current||this.dirty){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,b);this.current=b;this.dirty=!1}},a}(Ya),Zg=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return null},a.prototype.set=function(b){if(b!==this.current||this.dirty){var a=this.gl;a.bindRenderbuffer(a.RENDERBUFFER,b);this.current=b;this.dirty=!1}},a}(Ya),gf=function(b){function a(){b.apply(this,
arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return null},a.prototype.set=function(b){if(b!==this.current||this.dirty){var a=this.gl;a.bindTexture(a.TEXTURE_2D,b);this.current=b;this.dirty=!1}},a}(Ya),Vb=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return null},a.prototype.set=
function(b){if(b!==this.current||this.dirty){var a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,b);this.current=b;this.dirty=!1}},a}(Ya),fb=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return null},a.prototype.set=function(b){var a=this.gl;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,b);this.current=b;this.dirty=!1},a}(Ya),Ib=function(b){function a(a){b.call(this,a);this.vao=a.extVertexArrayObject}
return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return null},a.prototype.set=function(b){this.vao&&(b!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(b),this.current=b,this.dirty=!1)},a}(Ya),vd=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return 4},a.prototype.set=function(b){if(b!==
this.current||this.dirty){var a=this.gl;a.pixelStorei(a.UNPACK_ALIGNMENT,b);this.current=b;this.dirty=!1}},a}(Ya),Qb=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return!1},a.prototype.set=function(b){if(b!==this.current||this.dirty){var a=this.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b);this.current=b;this.dirty=!1}},a}(Ya),oe=function(b){function a(){b.apply(this,
arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return!1},a.prototype.set=function(b){if(b!==this.current||this.dirty){var a=this.gl;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b);this.current=b;this.dirty=!1}},a}(Ya),fc=function(b){function a(a,c){b.call(this,a);this.context=a;this.parent=c}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getDefault=function(){return null},
a}(Ya),pe=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.setDirty=function(){this.dirty=!0},a.prototype.set=function(b){if(b!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var a=this.gl;a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,b,0);this.current=b;this.dirty=!1}},a}(fc),va=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=
b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.set=function(b){if(b!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,b);this.current=b;this.dirty=!1}},a}(fc),qe=function(b,a,c){this.context=b;this.width=a;this.height=c;a=this.framebuffer=b.gl.createFramebuffer();this.colorAttachment=new pe(b,a);this.depthAttachment=new va(b,a)};qe.prototype.destroy=function(){var b=
this.context.gl,a=this.colorAttachment.get();a&&b.deleteTexture(a);(a=this.depthAttachment.get())&&b.deleteRenderbuffer(a);b.deleteFramebuffer(this.framebuffer)};var Ta=function(b,a,c){this.func=b;this.mask=a;this.range=c};Ta.ReadOnly=!1;Ta.ReadWrite=!0;Ta.disabled=new Ta(519,Ta.ReadOnly,[0,1]);var Fa=function(b,a,c,d,e,f){this.test=b;this.ref=a;this.mask=c;this.fail=d;this.depthFail=e;this.pass=f};Fa.disabled=new Fa({func:519,mask:0},0,0,7680,7680,7680);var oc=function(b,a,c){this.blendFunction=
b;this.blendColor=a;this.mask=c};oc.Replace=[1,0];oc.disabled=new oc(oc.Replace,b.Color.transparent,[!1,!1,!1,!1]);oc.unblended=new oc(oc.Replace,b.Color.transparent,[!0,!0,!0,!0]);oc.alphaBlended=new oc([1,771],b.Color.transparent,[!0,!0,!0,!0]);var kb=function(b,a,c){this.enable=b;this.mode=a;this.frontFace=c};kb.disabled=new kb(!1,1029,2305);kb.backCCW=new kb(!0,1029,2305);var ic=function(b){this.gl=b;this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object");this.clearColor=new td(this);
this.clearDepth=new mc(this);this.clearStencil=new ud(this);this.colorMask=new Nc(this);this.depthMask=new Hb(this);this.stencilMask=new Yb(this);this.stencilFunc=new uc(this);this.stencilOp=new $a(this);this.stencilTest=new Xd(this);this.depthRange=new Fc(this);this.depthTest=new Md(this);this.depthFunc=new nc(this);this.blend=new Yd(this);this.blendFunc=new Ub(this);this.blendColor=new Oc(this);this.blendEquation=new pb(this);this.cullFace=new Nd(this);this.cullFaceSide=new Xc(this);this.frontFace=
new Yg(this);this.program=new vc(this);this.activeTexture=new Ka(this);this.viewport=new Pc(this);this.bindFramebuffer=new Qc(this);this.bindRenderbuffer=new Zg(this);this.bindTexture=new gf(this);this.bindVertexBuffer=new Vb(this);this.bindElementBuffer=new fb(this);this.bindVertexArrayOES=this.extVertexArrayObject&&new Ib(this);this.pixelStoreUnpack=new vd(this);this.pixelStoreUnpackPremultiplyAlpha=new Qb(this);this.pixelStoreUnpackFlipY=new oe(this);(this.extTextureFilterAnisotropic=b.getExtension("EXT_texture_filter_anisotropic")||
b.getExtension("MOZ_EXT_texture_filter_anisotropic")||b.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))&&(this.extTextureFilterAnisotropicMax=b.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT));(this.extTextureHalfFloat=b.getExtension("OES_texture_half_float"))&&b.getExtension("OES_texture_half_float_linear")};ic.prototype.setDefault=function(){this.unbindVAO();this.clearColor.setDefault();this.clearDepth.setDefault();this.clearStencil.setDefault();this.colorMask.setDefault();
this.depthMask.setDefault();this.stencilMask.setDefault();this.stencilFunc.setDefault();this.stencilOp.setDefault();this.stencilTest.setDefault();this.depthRange.setDefault();this.depthTest.setDefault();this.depthFunc.setDefault();this.blend.setDefault();this.blendFunc.setDefault();this.blendColor.setDefault();this.blendEquation.setDefault();this.cullFace.setDefault();this.cullFaceSide.setDefault();this.frontFace.setDefault();this.program.setDefault();this.activeTexture.setDefault();this.bindFramebuffer.setDefault();
this.pixelStoreUnpack.setDefault();this.pixelStoreUnpackPremultiplyAlpha.setDefault();this.pixelStoreUnpackFlipY.setDefault()};ic.prototype.setDirty=function(){this.clearColor.dirty=!0;this.clearDepth.dirty=!0;this.clearStencil.dirty=!0;this.colorMask.dirty=!0;this.depthMask.dirty=!0;this.stencilMask.dirty=!0;this.stencilFunc.dirty=!0;this.stencilOp.dirty=!0;this.stencilTest.dirty=!0;this.depthRange.dirty=!0;this.depthTest.dirty=!0;this.depthFunc.dirty=!0;this.blend.dirty=!0;this.blendFunc.dirty=
!0;this.blendColor.dirty=!0;this.blendEquation.dirty=!0;this.cullFace.dirty=!0;this.cullFaceSide.dirty=!0;this.frontFace.dirty=!0;this.program.dirty=!0;this.activeTexture.dirty=!0;this.viewport.dirty=!0;this.bindFramebuffer.dirty=!0;this.bindRenderbuffer.dirty=!0;this.bindTexture.dirty=!0;this.bindVertexBuffer.dirty=!0;this.bindElementBuffer.dirty=!0;this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0);this.pixelStoreUnpack.dirty=!0;this.pixelStoreUnpackPremultiplyAlpha.dirty=!0;this.pixelStoreUnpackFlipY.dirty=
!0};ic.prototype.createIndexBuffer=function(b,a){return new qa(this,b,a)};ic.prototype.createVertexBuffer=function(b,a,c){return new Nb(this,b,a,c)};ic.prototype.createRenderbuffer=function(b,a,c){var d=this.gl,e=d.createRenderbuffer();return this.bindRenderbuffer.set(e),d.renderbufferStorage(d.RENDERBUFFER,b,a,c),this.bindRenderbuffer.set(null),e};ic.prototype.createFramebuffer=function(b,a){return new qe(this,b,a)};ic.prototype.clear=function(b){var a=b.color;b=b.depth;var c=this.gl,d=0;a&&(d|=
c.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0]));void 0!==b&&(d|=c.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(b),this.depthMask.set(!0));c.clear(d)};ic.prototype.setCullFace=function(b){!1===b.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(b.mode),this.frontFace.set(b.frontFace))};ic.prototype.setDepthMode=function(b){b.func!==this.gl.ALWAYS||b.mask?(this.depthTest.set(!0),this.depthFunc.set(b.func),this.depthMask.set(b.mask),
this.depthRange.set(b.range)):this.depthTest.set(!1)};ic.prototype.setStencilMode=function(b){b.test.func!==this.gl.ALWAYS||b.mask?(this.stencilTest.set(!0),this.stencilMask.set(b.mask),this.stencilOp.set([b.fail,b.depthFail,b.pass]),this.stencilFunc.set({func:b.test.func,ref:b.ref,mask:b.test.mask})):this.stencilTest.set(!1)};ic.prototype.setColorMode=function(a){b.deepEqual(a.blendFunction,oc.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor));
this.colorMask.set(a.mask)};ic.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var jd=function(a){function c(c,d,e){var f=this;a.call(this);this.id=c;this.dispatcher=e;this.on("data",function(b){"source"===b.dataType&&"metadata"===b.sourceDataType&&(f._sourceLoaded=!0);f._sourceLoaded&&!f._paused&&"source"===b.dataType&&"content"===b.sourceDataType&&(f.reload(),f.transform&&f.update(f.transform))});this.on("error",function(){f._sourceErrored=!0});this._source=
Oa(c,d,e,this);this._tiles={};this._cache=new Za(0,this._unloadTile.bind(this));this._timers={};this._cacheTimers={};this._maxTileCacheSize=null;this._coveredTiles={};this._state=new b.SourceFeatureState}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.onAdd=function(b){this._maxTileCacheSize=(this.map=b)?b._maxTileCacheSize:null;this._source&&this._source.onAdd&&this._source.onAdd(b)},c.prototype.onRemove=function(b){this._source&&this._source.onRemove&&
this._source.onRemove(b)},c.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var b in this._tiles){var a=this._tiles[b];if("loaded"!==a.state&&"errored"!==a.state)return!1}return!0},c.prototype.getSource=function(){return this._source},c.prototype.pause=function(){this._paused=!0},c.prototype.resume=function(){if(this._paused){var b=this._shouldReloadOnResume;this._shouldReloadOnResume=this._paused=!1;b&&this.reload();this.transform&&
this.update(this.transform)}},c.prototype._loadTile=function(b,a){return this._source.loadTile(b,a)},c.prototype._unloadTile=function(b){if(this._source.unloadTile)return this._source.unloadTile(b,function(){})},c.prototype._abortTile=function(b){if(this._source.abortTile)return this._source.abortTile(b,function(){})},c.prototype.serialize=function(){return this._source.serialize()},c.prototype.prepare=function(b){for(var a in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,
this.map?this.map.painter:null),this._tiles){var c=this._tiles[a];c.upload(b);c.prepare(this.map.style.imageManager)}},c.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(m)},c.prototype.getRenderableIds=function(a){var c=this,d=[],e;for(e in this._tiles)this._isIdRenderable(+e,a)&&d.push(+e);return a?d.sort(function(a,d){a=c._tiles[a].tileID;d=c._tiles[d].tileID;var e=(new b.Point(a.canonical.x,a.canonical.y))._rotate(c.transform.angle),f=(new b.Point(d.canonical.x,d.canonical.y))._rotate(c.transform.angle);
return a.overscaledZ-d.overscaledZ||f.y-e.y||f.x-e.x}):d.sort(m)},c.prototype.hasRenderableParent=function(b){b=this.findLoadedParent(b,0);return!!b&&this._isIdRenderable(b.tileID.key)},c.prototype._isIdRenderable=function(b,a){return this._tiles[b]&&this._tiles[b].hasData()&&!this._coveredTiles[b]&&(a||!this._tiles[b].holdingForFade())},c.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var b in this._cache.reset(),this._tiles)"errored"!==this._tiles[b].state&&this._reloadTile(b,
"reloading")},c.prototype._reloadTile=function(b,a){var c=this._tiles[b];c&&("loading"!==c.state&&(c.state=a),this._loadTile(c,this._tileLoaded.bind(this,c,b,a)))},c.prototype._tileLoaded=function(a,c,d,e){if(e)return a.state="errored",void(404!==e.status?this._source.fire(new b.ErrorEvent(e,{tile:a})):this.update(this.transform));a.timeAdded=b.browser.now();"expired"===d&&(a.refreshedUponExpiration=!0);this._setTileReloadTimer(c,a);"raster-dem"===this.getSource().type&&a.dem&&this._backfillDEM(a);
this._state.initializeTileState(a,this.map?this.map.painter:null);this._source.fire(new b.Event("data",{dataType:"source",tile:a,coord:a.tileID}))},c.prototype._backfillDEM=function(b){function a(b,a){b.needsHillshadePrepare=!0;var c=a.tileID.canonical.x-b.tileID.canonical.x,d=a.tileID.canonical.y-b.tileID.canonical.y,e=Math.pow(2,b.tileID.canonical.z),f=a.tileID.key;0===c&&0===d||1<Math.abs(d)||(1<Math.abs(c)&&(1===Math.abs(c+e)?c+=e:1===Math.abs(c-e)&&(c-=e)),a.dem&&b.dem&&(b.dem.backfillBorder(a.dem,
c,d),b.neighboringTiles&&b.neighboringTiles[f]&&(b.neighboringTiles[f].backfilled=!0)))}for(var c=this.getRenderableIds(),d=0;d<c.length;d++){var e=c[d];b.neighboringTiles&&b.neighboringTiles[e]&&(e=this.getTileByID(e),a(b,e),a(e,b))}},c.prototype.getTile=function(b){return this.getTileByID(b.key)},c.prototype.getTileByID=function(b){return this._tiles[b]},c.prototype.getZoom=function(b){return b.zoom+b.scaleZoom(b.tileSize/this._source.tileSize)},c.prototype._retainLoadedChildren=function(b,a,c,
d){for(var e in this._tiles){var f=this._tiles[e];if(!(d[e]||!f.hasData()||f.tileID.overscaledZ<=a||f.tileID.overscaledZ>c)){for(var g=f.tileID;f&&f.tileID.overscaledZ>a+1;){var h=f.tileID.scaledTo(f.tileID.overscaledZ-1);(f=this._tiles[h.key])&&f.hasData()&&(g=h)}for(f=g;f.overscaledZ>a;)if(b[(f=f.scaledTo(f.overscaledZ-1)).key]){d[g.key]=g;break}}}},c.prototype.findLoadedParent=function(b,a){for(var c=b.overscaledZ-1;c>=a;c--){var d=b.scaledTo(c);if(!d)break;var e=this._tiles[String(d.key)];if(e&&
e.hasData())return e;if(this._cache.has(d))return this._cache.get(d)}},c.prototype.updateCacheSize=function(b){b=Math.floor(5*(Math.ceil(b.width/this._source.tileSize)+1)*(Math.ceil(b.height/this._source.tileSize)+1));this._cache.setMaxSize("number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,b):b)},c.prototype.handleWrapJump=function(b){var a=Math.round((b-(void 0===this._prevLng?b:this._prevLng))/360);if(this._prevLng=b,a){b={};for(var c in this._tiles){var d=this._tiles[c];d.tileID=
d.tileID.unwrapTo(d.tileID.wrap+a);b[d.tileID.key]=d}for(var e in this._tiles=b,this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(var f in this._tiles)this._setTileReloadTimer(f,this._tiles[f])}},c.prototype.update=function(a){var d=this;if(this.transform=a,this._sourceLoaded&&!this._paused){var e;this.updateCacheSize(a);this.handleWrapJump(this.transform.center.lng);this._coveredTiles={};this.used?this._source.tileID?e=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(a){return new b.OverscaledTileID(a.canonical.z,
a.wrap,a.canonical.z,a.canonical.x,a.canonical.y)}):(e=a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(e=e.filter(function(b){return d._source.hasTile(b)}))):e=[];a=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(a));var f=Math.max(a-c.maxOverzooming,this._source.minzoom),g=Math.max(a+c.maxUnderzooming,this._source.minzoom);
e=this._updateRetainedTiles(e,a);if(n(this._source.type)){for(var h={},k={},l=0,r=Object.keys(e);l<r.length;l+=1){var t=r[l],m=e[t],u=this._tiles[t];!u||u.fadeEndTime&&u.fadeEndTime<=b.browser.now()||((u=this.findLoadedParent(m,f))&&(this._addTile(u.tileID),h[u.tileID.key]=u.tileID),k[t]=m)}for(var v in this._retainLoadedChildren(k,a,g,e),h)e[v]||(this._coveredTiles[v]=!0,e[v]=h[v])}for(var w in e)this._tiles[w].clearFadeHold();v=0;for(w=b.keysDifference(this._tiles,e);v<w.length;v+=1)a=w[v],f=this._tiles[a],
f.hasSymbolBuckets&&!f.holdingForFade()?f.setHoldDuration(this.map._fadeDuration):f.hasSymbolBuckets&&!f.symbolFadeFinished()||this._removeTile(a)}},c.prototype.releaseSymbolFadeTiles=function(){for(var b in this._tiles)this._tiles[b].holdingForFade()&&this._removeTile(b)},c.prototype._updateRetainedTiles=function(b,a){for(var d={},e={},f=Math.max(a-c.maxOverzooming,this._source.minzoom),g=Math.max(a+c.maxUnderzooming,this._source.minzoom),h={},k=0;k<b.length;k+=1){var l=b[k],r=this._addTile(l);d[l.key]=
l;r.hasData()||a<this._source.maxzoom&&(h[l.key]=l)}this._retainLoadedChildren(h,a,g,d);for(g=0;g<b.length;g+=1)if(h=b[g],k=this._tiles[h.key],!k.hasData()){if(a+1>this._source.maxzoom){if(l=h.children(this._source.maxzoom)[0],(r=this.getTile(l))&&r.hasData()){d[l.key]=l;continue}}else if(l=h.children(this._source.maxzoom),d[l[0].key]&&d[l[1].key]&&d[l[2].key]&&d[l[3].key])continue;l=k.wasRequested();for(r=h.overscaledZ-1;r>=f;--r){var t=h.scaledTo(r);if(e[t.key])break;if(e[t.key]=!0,!(k=this.getTile(t))&&
l&&(k=this._addTile(t)),k&&(d[t.key]=t,l=k.wasRequested(),k.hasData()))break}}return d},c.prototype._addTile=function(a){var c=this._tiles[a.key];if(c)return c;(c=this._cache.getAndRemove(a))&&(this._setTileReloadTimer(a.key,c),c.tileID=a,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,c)));var d=!!c;return d||(c=new b.Tile(a,this._source.tileSize*a.overscaleFactor()),
this._loadTile(c,this._tileLoaded.bind(this,c,a.key,c.state))),c?(c.uses++,this._tiles[a.key]=c,d||this._source.fire(new b.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c):null},c.prototype._setTileReloadTimer=function(b,a){var c=this;b in this._timers&&(clearTimeout(this._timers[b]),delete this._timers[b]);(a=a.getExpiryTimeout())&&(this._timers[b]=setTimeout(function(){c._reloadTile(b,"expired");delete c._timers[b]},a))},c.prototype._removeTile=function(b){var a=this._tiles[b];
a&&(a.uses--,delete this._tiles[b],this._timers[b]&&(clearTimeout(this._timers[b]),delete this._timers[b]),0<a.uses||(a.hasData()&&"reloading"!==a.state?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))},c.prototype.clearTiles=function(){for(var b in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(b);this._cache.reset()},c.prototype.tilesIn=function(a,c,d){var e=this,f=[],g=this.transform;if(!g)return f;d=d?g.getCameraQueryGeometry(a):
a;var h=a.map(function(b){return g.pointCoordinate(b)}),k=d.map(function(b){return g.pointCoordinate(b)}),l=this.getIds(),r=1/0,t=1/0,m=-1/0,u=-1/0;for(a=0;a<k.length;a+=1)d=k[a],r=Math.min(r,d.x),t=Math.min(t,d.y),m=Math.max(m,d.x),u=Math.max(u,d.y);a=function(a){a=e._tiles[l[a]];if(!a.holdingForFade()){var d=a.tileID,n=Math.pow(2,g.zoom-a.tileID.overscaledZ),v=c*a.queryPadding*b.EXTENT/a.tileSize/n,w=[d.getTilePoint(new b.MercatorCoordinate(r,t)),d.getTilePoint(new b.MercatorCoordinate(m,u))];w[0].x-
v<b.EXTENT&&w[0].y-v<b.EXTENT&&0<=w[1].x+v&&0<=w[1].y+v&&(v=h.map(function(b){return d.getTilePoint(b)}),w=k.map(function(b){return d.getTilePoint(b)}),f.push({tile:a,tileID:d,queryGeometry:v,cameraQueryGeometry:w,scale:n}))}};for(d=0;d<l.length;d++)a(d);return f},c.prototype.getVisibleCoordinates=function(b){var a=this;b=this.getRenderableIds(b).map(function(b){return a._tiles[b].tileID});for(var c=0;c<b.length;c+=1){var d=b[c];d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped())}return b},
c.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(n(this._source.type))for(var a in this._tiles){var c=this._tiles[a];if(void 0!==c.fadeEndTime&&c.fadeEndTime>=b.browser.now())return!0}return!1},c.prototype.setFeatureState=function(b,a,c){this._state.updateState(b||"_geojsonTileLayer",a,c)},c.prototype.removeFeatureState=function(b,a,c){this._state.removeFeatureState(b||"_geojsonTileLayer",a,c)},c.prototype.getFeatureState=function(b,a){return b=b||"_geojsonTileLayer",
this._state.getState(b,a)},c}(b.Evented);jd.maxOverzooming=10;jd.maxUnderzooming=3;var Zb=function(){this.active={}};Zb.prototype.acquire=function(b){if(!this.workers)for(this.workers=[];this.workers.length<Zb.workerCount;)this.workers.push(new w);return this.active[b]=!0,this.workers.slice()};Zb.prototype.release=function(b){delete this.active[b];0===Object.keys(this.active).length&&(this.workers.forEach(function(b){b.terminate()}),this.workers=null)};var wd;Zb.workerCount=Math.max(Math.min(Math.floor(b.browser.hardwareConcurrency/
2),6),1);var hb={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",
setLight:"setLight"},nb=function(b,a,c){var d=this.boxCells=[],e=this.circleCells=[];this.xCellCount=Math.ceil(b/c);this.yCellCount=Math.ceil(a/c);for(c=0;c<this.xCellCount*this.yCellCount;c++)d.push([]),e.push([]);this.circleKeys=[];this.boxKeys=[];this.bboxes=[];this.circles=[];this.width=b;this.height=a;this.xScale=this.xCellCount/b;this.yScale=this.yCellCount/a;this.circleUid=this.boxUid=0};nb.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length};nb.prototype.insert=
function(b,a,c,d,e){this._forEachCell(a,c,d,e,this._insertBoxCell,this.boxUid++);this.boxKeys.push(b);this.bboxes.push(a);this.bboxes.push(c);this.bboxes.push(d);this.bboxes.push(e)};nb.prototype.insertCircle=function(b,a,c,d){this._forEachCell(a-d,c-d,a+d,c+d,this._insertCircleCell,this.circleUid++);this.circleKeys.push(b);this.circles.push(a);this.circles.push(c);this.circles.push(d)};nb.prototype._insertBoxCell=function(b,a,c,d,e,f){this.boxCells[e].push(f)};nb.prototype._insertCircleCell=function(b,
a,c,d,e,f){this.circleCells[e].push(f)};nb.prototype._query=function(b,a,c,d,e,f){if(0>c||b>this.width||0>d||a>this.height)return!e&&[];var g=[];if(0>=b&&0>=a&&this.width<=c&&this.height<=d){if(e)return!0;for(b=0;b<this.boxKeys.length;b++)g.push({key:this.boxKeys[b],x1:this.bboxes[4*b],y1:this.bboxes[4*b+1],x2:this.bboxes[4*b+2],y2:this.bboxes[4*b+3]});for(b=0;b<this.circleKeys.length;b++)a=this.circles[3*b],c=this.circles[3*b+1],d=this.circles[3*b+2],g.push({key:this.circleKeys[b],x1:a-d,y1:c-d,
x2:a+d,y2:c+d});return f?g.filter(f):g}return this._forEachCell(b,a,c,d,this._queryCell,g,{hitTest:e,seenUids:{box:{},circle:{}}},f),e?0<g.length:g};nb.prototype._queryCircle=function(b,a,c,d,e){var f=b-c,g=b+c,h=a-c,k=a+c;if(0>g||f>this.width||0>k||h>this.height)return!d&&[];var l=[];return this._forEachCell(f,h,g,k,this._queryCellCircle,l,{hitTest:d,circle:{x:b,y:a,radius:c},seenUids:{box:{},circle:{}}},e),d?0<l.length:l};nb.prototype.query=function(b,a,c,d,e){return this._query(b,a,c,d,!1,e)};
nb.prototype.hitTest=function(b,a,c,d,e){return this._query(b,a,c,d,!0,e)};nb.prototype.hitTestCircle=function(b,a,c,d){return this._queryCircle(b,a,c,!0,d)};nb.prototype._queryCell=function(b,a,c,d,e,f,g,h){var k=g.seenUids,l=this.boxCells[e];if(null!==l)for(var r=this.bboxes,t=0;t<l.length;t+=1){var m=l[t];if(!k.box[m]){k.box[m]=!0;var u=4*m;if(b<=r[u+2]&&a<=r[u+3]&&c>=r[u+0]&&d>=r[u+1]&&(!h||h(this.boxKeys[m]))){if(g.hitTest)return f.push(!0),!0;f.push({key:this.boxKeys[m],x1:r[u],y1:r[u+1],x2:r[u+
2],y2:r[u+3]})}}}e=this.circleCells[e];if(null!==e)for(l=this.circles,r=0;r<e.length;r+=1)if(t=e[r],!k.circle[t]){k.circle[t]=!0;var n=3*t;if(this._circleAndRectCollide(l[n],l[n+1],l[n+2],b,a,c,d)&&(!h||h(this.circleKeys[t]))){if(g.hitTest)return f.push(!0),!0;m=l[n];u=l[n+1];n=l[n+2];f.push({key:this.circleKeys[t],x1:m-n,y1:u-n,x2:m+n,y2:u+n})}}};nb.prototype._queryCellCircle=function(b,a,c,d,e,f,g,h){b=g.circle;g=g.seenUids;a=this.boxCells[e];if(null!==a)for(c=this.bboxes,d=0;d<a.length;d+=1){var k=
a[d];if(!g.box[k]){g.box[k]=!0;var l=4*k;if(this._circleAndRectCollide(b.x,b.y,b.radius,c[l+0],c[l+1],c[l+2],c[l+3])&&(!h||h(this.boxKeys[k])))return f.push(!0),!0}}e=this.circleCells[e];if(null!==e)for(a=this.circles,c=0;c<e.length;c+=1)if(d=e[c],!g.circle[d]&&(g.circle[d]=!0,k=3*d,this._circlesCollide(a[k],a[k+1],a[k+2],b.x,b.y,b.radius)&&(!h||h(this.circleKeys[d]))))return f.push(!0),!0};nb.prototype._forEachCell=function(b,a,c,d,e,f,g,h){for(var k=this._convertToXCellCoord(b),l=this._convertToYCellCoord(a),
r=this._convertToXCellCoord(c),t=this._convertToYCellCoord(d);k<=r;k++)for(var m=l;m<=t;m++)if(e.call(this,b,a,c,d,this.xCellCount*m+k,f,g,h))return};nb.prototype._convertToXCellCoord=function(b){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(b*this.xScale)))};nb.prototype._convertToYCellCoord=function(b){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(b*this.yScale)))};nb.prototype._circlesCollide=function(b,a,c,d,e,f){b=d-b;a=e-a;c+=f;return c*c>b*b+a*a};nb.prototype._circleAndRectCollide=
function(b,a,c,d,e,f,g){f=(f-d)/2;b=Math.abs(b-(d+f));if(b>f+c)return!1;g=(g-e)/2;a=Math.abs(a-(e+g));if(a>g+c)return!1;if(b<=f||a<=g)return!0;e=b-f;a-=g;return e*e+a*a<=c*c};var se=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]),Ic=function(b,a,c){void 0===a&&(a=new nb(b.width+200,b.height+200,25));void 0===c&&(c=new nb(b.width+200,b.height+200,25));this.transform=b;this.grid=a;this.ignoredGrid=c;this.pitchfactor=Math.cos(b._pitch)*b.cameraToCenterDistance;this.screenRightBoundary=
b.width+100;this.screenBottomBoundary=b.height+100;this.gridRightBoundary=b.width+200;this.gridBottomBoundary=b.height+200};Ic.prototype.placeCollisionBox=function(b,a,c,d,e){d=this.projectAndGetPerspectiveRatio(d,b.anchorPointX,b.anchorPointY);var f=c*d.perspectiveRatio;c=b.x1*f+d.point.x;var g=b.y1*f+d.point.y,h=b.x2*f+d.point.x;b=b.y2*f+d.point.y;return!this.isInsideGrid(c,g,h,b)||!a&&this.grid.hitTest(c,g,h,b,e)?{box:[],offscreen:!1}:{box:[c,g,h,b],offscreen:this.isOffscreen(c,g,h,b)}};Ic.prototype.approximateTileDistance=
function(b,a,c,d,e){c*=b.lastSegmentViewportDistance;return b.prevTileDistance+c+((e?1:d/this.pitchfactor)-1)*c*Math.abs(Math.sin(a))};Ic.prototype.placeCollisionCircles=function(a,c,d,e,f,g,h,k,l,r,t,m,u){var n=[],v=this.projectAnchor(l,f.anchorX,f.anchorY),w=k/24,z=f.lineOffsetX*k;k*=f.lineOffsetY;var x=new b.Point(f.anchorX,f.anchorY);f=L(w,h,z,k,!1,E(x,r).point,x,f,g,r,{},!0);h=g=!1;r=!0;w=v.perspectiveRatio*e;z=1/(e*d);e=d=0;f&&(d=this.approximateTileDistance(f.first.tileDistance,f.first.angle,
z,v.cameraDistance,m),e=this.approximateTileDistance(f.last.tileDistance,f.last.angle,z,v.cameraDistance,m));for(m=0;m<a.length;m+=5)if(v=a[m],k=a[m+1],z=a[m+2],x=a[m+3],!f||x<-d||x>e)a[m+4]=0;else{v=this.projectPoint(l,v,k);z*=w;if(0<n.length&&(k=v.x-n[n.length-4],x=v.y-n[n.length-3],z*z*2>k*k+x*x&&m+8<a.length&&(k=a[m+8],k>-d&&k<e))){a[m+4]=0;continue}n.push(v.x,v.y,z,m/5);a[m+4]=1;k=v.x-z;x=v.y-z;var A=v.x+z,y=v.y+z;if(r=r&&this.isOffscreen(k,x,A,y),h=h||this.isInsideGrid(k,x,A,y),!c&&this.grid.hitTestCircle(v.x,
v.y,z,u)){if(!t)return{circles:[],offscreen:!1};g=!0}}return{circles:g||!h?[]:n,offscreen:r}};Ic.prototype.queryRenderedSymbols=function(a){if(0===a.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var c=[],d=1/0,e=1/0,f=-1/0,g=-1/0,h=0;h<a.length;h+=1){var k=a[h];k=new b.Point(k.x+100,k.y+100);d=Math.min(d,k.x);e=Math.min(e,k.y);f=Math.max(f,k.x);g=Math.max(g,k.y);c.push(k)}a={};h={};k=0;for(d=this.grid.query(d,e,f,g).concat(this.ignoredGrid.query(d,e,f,g));k<d.length;k+=
1)f=d[k],e=f.key,(void 0===a[e.bucketInstanceId]&&(a[e.bucketInstanceId]={}),a[e.bucketInstanceId][e.featureIndex])||(f=[new b.Point(f.x1,f.y1),new b.Point(f.x2,f.y1),new b.Point(f.x2,f.y2),new b.Point(f.x1,f.y2)],b.polygonIntersectsPolygon(c,f)&&(a[e.bucketInstanceId][e.featureIndex]=!0,void 0===h[e.bucketInstanceId]&&(h[e.bucketInstanceId]=[]),h[e.bucketInstanceId].push(e.featureIndex)));return h};Ic.prototype.insertCollisionBox=function(b,a,c,d,e){(a?this.ignoredGrid:this.grid).insert({bucketInstanceId:c,
featureIndex:d,collisionGroupID:e},b[0],b[1],b[2],b[3])};Ic.prototype.insertCollisionCircles=function(b,a,c,d,e){a=a?this.ignoredGrid:this.grid;c={bucketInstanceId:c,featureIndex:d,collisionGroupID:e};for(d=0;d<b.length;d+=4)a.insertCircle(c,b[d],b[d+1],b[d+2])};Ic.prototype.projectAnchor=function(b,a,c){a=[a,c,0,1];return N(a,a,b),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/a[3]*.5,cameraDistance:a[3]}};Ic.prototype.projectPoint=function(a,c,d){c=[c,d,0,1];return N(c,c,a),new b.Point((c[0]/
c[3]+1)/2*this.transform.width+100,(-c[1]/c[3]+1)/2*this.transform.height+100)};Ic.prototype.projectAndGetPerspectiveRatio=function(a,c,d){c=[c,d,0,1];return N(c,c,a),{point:new b.Point((c[0]/c[3]+1)/2*this.transform.width+100,(-c[1]/c[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/c[3]*.5}};Ic.prototype.isOffscreen=function(b,a,c,d){return 100>c||b>=this.screenRightBoundary||100>d||a>this.screenBottomBoundary};Ic.prototype.isInsideGrid=function(b,a,c,
d){return 0<=c&&b<this.gridRightBoundary&&0<=d&&a<this.gridBottomBoundary};var Od=function(b,a,c,d){this.opacity=b?Math.max(0,Math.min(1,b.opacity+(b.placed?a:-a))):d&&c?1:0;this.placed=c};Od.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var wc=function(b,a,c,d,e){this.text=new Od(b?b.text:null,a,c,e);this.icon=new Od(b?b.icon:null,a,d,e)};wc.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Jc=function(b,a,c){this.text=b;this.icon=a;this.skipFade=
c},pc=function(b,a,c,d,e){this.bucketInstanceId=b;this.featureIndex=a;this.sourceLayerIndex=c;this.bucketIndex=d;this.tileID=e},Db=function(b){this.crossSourceCollisions=b;this.maxGroupID=0;this.collisionGroups={}};Db.prototype.get=function(b){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[b]){var a=++this.maxGroupID;this.collisionGroups[b]={ID:a,predicate:function(b){return b.collisionGroupID===a}}}return this.collisionGroups[b]};var wb=function(b,a,c,d){this.transform=
b.clone();this.collisionIndex=new Ic(this.transform);this.placements={};this.opacities={};this.variableOffsets={};this.stale=!1;this.commitTime=0;this.fadeDuration=a;this.retainedQueryData={};this.collisionGroups=new Db(c);(this.prevPlacement=d)&&(d.prevPlacement=void 0);this.placedOrientations={}};wb.prototype.placeLayerTile=function(a,c,d,e){var f=c.getBucket(a),g=c.latestFeatureIndex;if(f&&g&&a.id===f.layerIds[0]){a=c.collisionBoxArray;var h=f.layers[0].layout,k=Math.pow(2,this.transform.zoom-
c.tileID.overscaledZ),l=c.tileSize/b.EXTENT,r=this.transform.calculatePosMatrix(c.tileID.toUnwrapped()),t=q(r,"map"===h.get("text-pitch-alignment"),"map"===h.get("text-rotation-alignment"),this.transform,O(c,1,this.transform.zoom));h=q(r,"map"===h.get("icon-pitch-alignment"),"map"===h.get("icon-rotation-alignment"),this.transform,O(c,1,this.transform.zoom));this.retainedQueryData[f.bucketInstanceId]=new pc(f.bucketInstanceId,g,f.sourceLayerIndex,f.index,c.tileID);this.placeLayerBucket(f,r,t,h,k,l,
d,c.holdingForFade(),e,a)}};wb.prototype.attemptAnchorPlacement=function(a,c,d,e,f,g,h,k,l,r,t,m,u,n,v){var w,z=P(a,d,e,f,g);c=this.collisionIndex.placeCollisionBox(function(a,c,d,e,f,g){var h=a.x1,k=a.x2,l=a.y1,r=a.y2,t=a.anchorPointX;a=a.anchorPointY;c=new b.Point(c,d);return e&&c._rotate(f?g:-g),{x1:h+c.x,y1:l+c.y,x2:k+c.x,y2:r+c.y,anchorPointX:t,anchorPointY:a}}(c,z.x,z.y,h,k,this.transform.angle),m,l,r,t.predicate);if(0<c.box.length)return this.prevPlacement&&this.prevPlacement.variableOffsets[u.crossTileID]&&
this.prevPlacement.placements[u.crossTileID]&&this.prevPlacement.placements[u.crossTileID].text&&(w=this.prevPlacement.variableOffsets[u.crossTileID].anchor),this.variableOffsets[u.crossTileID]={radialOffset:f,width:d,height:e,anchor:a,textBoxScale:g,prevAnchor:w},this.markUsedJustification(n,a,u,v),n.allowVerticalPlacement&&(this.markUsedOrientation(n,v,u),this.placedOrientations[u.crossTileID]=v),c};wb.prototype.placeLayerBucket=function(a,c,d,e,f,g,h,k,l,r){var t=this,m=a.layers[0].layout,u=b.evaluateSizeForZoom(a.textSizeData,
this.transform.zoom),n=m.get("text-optional"),v=m.get("icon-optional"),w=m.get("text-allow-overlap");e=m.get("icon-allow-overlap");var z=w&&(e||!a.hasIconData()||v),x=e&&(w||!a.hasTextData()||n),A=this.collisionGroups.get(a.sourceID),y="map"===m.get("text-rotation-alignment"),B="map"===m.get("text-pitch-alignment");e="viewport-y"===m.get("symbol-z-order");!a.collisionArrays&&r&&a.deserializeCollisionBoxes(r);r=function(e,r){if(!l[e.crossTileID])if(k)t.placements[e.crossTileID]=new Jc(!1,!1,!1);else{var p,
q=!1,C=!1,D=!0,I={box:null,offscreen:null},E={box:null,offscreen:null},N=null,H=null,M=0,K=0,G=0;r.textFeatureIndex&&(M=r.textFeatureIndex);r.verticalTextFeatureIndex&&(K=r.verticalTextFeatureIndex);var J=r.textBox;if(J){var F=function(c){var d=b.WritingMode.horizontal;a.allowVerticalPlacement&&!c&&t.prevPlacement&&(c=t.prevPlacement.placedOrientations[e.crossTileID])&&(t.placedOrientations[e.crossTileID]=c,d=c,t.markUsedOrientation(a,d,e));return d};D=function(c,d){if(a.allowVerticalPlacement&&0<
e.numVerticalGlyphVertices&&r.verticalTextBox)for(var f=0,g=a.writingModes;f<g.length&&!(g[f]===b.WritingMode.vertical?(I=d(),E=I):I=c(),I&&I.box&&I.box.length);f+=1);else I=c()};if(m.get("text-variable-anchor")){var O=m.get("text-variable-anchor");if(t.prevPlacement&&t.prevPlacement.variableOffsets[e.crossTileID]){var L=t.prevPlacement.variableOffsets[e.crossTileID];0<O.indexOf(L.anchor)&&(O=O.filter(function(b){return b!==L.anchor})).unshift(L.anchor)}var Q=function(b,d){for(var f=b.x2-b.x1,h=b.y2-
b.y1,k=e.textBoxScale,l={box:[],offscreen:!1},r=w?2*O.length:O.length,m=0;m<r;++m)if((l=t.attemptAnchorPlacement(O[m%O.length],b,f,h,e.radialTextOffset,k,y,B,g,c,A,m>=O.length,e,a,d))&&l.box&&l.box.length){q=!0;break}return l};D(function(){return Q(J,b.WritingMode.horizontal)},function(){var c=r.verticalTextBox,d=I&&I.box&&I.box.length;return a.allowVerticalPlacement&&!d&&0<e.numVerticalGlyphVertices&&c?Q(c,b.WritingMode.vertical):{box:null,offscreen:null}});I&&(q=I.box,D=I.offscreen);D=F(I&&I.box);
!q&&t.prevPlacement&&(F=t.prevPlacement.variableOffsets[e.crossTileID])&&(t.variableOffsets[e.crossTileID]=F,t.markUsedJustification(a,F.anchor,e,D))}else{var P=function(b,d){b=t.collisionIndex.placeCollisionBox(b,m.get("text-allow-overlap"),g,c,A.predicate);return b&&b.box&&b.box.length&&(t.markUsedOrientation(a,d,e),t.placedOrientations[e.crossTileID]=d),b};D(function(){return P(J,b.WritingMode.horizontal)},function(){var c=r.verticalTextBox;return a.allowVerticalPlacement&&0<e.numVerticalGlyphVertices&&
c?P(c,b.WritingMode.vertical):{box:null,offscreen:null}});F(I&&I.box&&I.box.length)}}q=(p=I)&&p.box&&0<p.box.length;D=p&&p.offscreen;if(F=r.textCircles){N=a.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex);var T=b.evaluateSizeForFeature(a.textSizeData,u,N);N=t.collisionIndex.placeCollisionCircles(F,m.get("text-allow-overlap"),f,g,N,a.lineVertexArray,a.glyphOffsetArray,T,c,d,h,B,A.predicate);q=m.get("text-allow-overlap")||0<N.circles.length;D=D&&N.offscreen}r.iconFeatureIndex&&(G=r.iconFeatureIndex);
r.iconBox&&(C=0<(H=t.collisionIndex.placeCollisionBox(r.iconBox,m.get("icon-allow-overlap"),g,c,A.predicate)).box.length,D=D&&H.offscreen);F=n||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices;T=v||0===e.numIconVertices;F||T?T?F||(C=C&&q):q=C&&q:C=q=C&&q;q&&p&&p.box&&(E&&E.box&&K?t.collisionIndex.insertCollisionBox(p.box,m.get("text-ignore-placement"),a.bucketInstanceId,K,A.ID):t.collisionIndex.insertCollisionBox(p.box,m.get("text-ignore-placement"),a.bucketInstanceId,M,A.ID));C&&
H&&t.collisionIndex.insertCollisionBox(H.box,m.get("icon-ignore-placement"),a.bucketInstanceId,G,A.ID);q&&N&&t.collisionIndex.insertCollisionCircles(N.circles,m.get("text-ignore-placement"),a.bucketInstanceId,M,A.ID);t.placements[e.crossTileID]=new Jc(q||z,C||x,D||a.justReloaded);l[e.crossTileID]=!0}};if(e){e=a.getSortedSymbolIndexes(this.transform.angle);for(var p=e.length-1;0<=p;--p){var q=e[p];r(a.symbolInstances.get(q),a.collisionArrays[q])}}else for(e=0;e<a.symbolInstances.length;++e)r(a.symbolInstances.get(e),
a.collisionArrays[e]);a.justReloaded=!1};wb.prototype.markUsedJustification=function(a,c,d,e){var f={left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex};c=e===b.WritingMode.vertical?d.verticalPlacedTextSymbolIndex:f[b.getAnchorJustification(c)];e=0;for(f=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];e<f.length;e+=1){var g=f[e];0<=g&&(a.text.placedSymbolArray.get(g).crossTileID=
0<=c&&g!==c?0:d.crossTileID)}};wb.prototype.markUsedOrientation=function(a,c,d){var e=c===b.WritingMode.horizontal||c===b.WritingMode.horizontalOnly?c:0;c=c===b.WritingMode.vertical?c:0;for(var f=0,g=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];f<g.length;f+=1)a.text.placedSymbolArray.get(g[f]).placedOrientation=e;d.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=c)};wb.prototype.commit=
function(b){this.commitTime=b;var a=this.prevPlacement,c=!1,d=a&&0!==this.fadeDuration?(this.commitTime-a.commitTime)/this.fadeDuration:1,e=a?a.opacities:{},f=a?a.variableOffsets:{},g=a?a.placedOrientations:{};for(r in this.placements){var h=this.placements[r],k=e[r];k?(this.opacities[r]=new wc(k,d,h.text,h.icon),c=c||h.text!==k.text.placed||h.icon!==k.icon.placed):(this.opacities[r]=new wc(null,d,h.text,h.icon,h.skipFade),c=c||h.text||h.icon)}for(var l in e){var r=e[l];this.opacities[l]||(h=new wc(r,
d,!1,!1),h.isHidden()||(this.opacities[l]=h,c=c||r.text.placed||r.icon.placed))}for(var t in f)this.variableOffsets[t]||!this.opacities[t]||this.opacities[t].isHidden()||(this.variableOffsets[t]=f[t]);for(var m in g)this.placedOrientations[m]||!this.opacities[m]||this.opacities[m].isHidden()||(this.placedOrientations[m]=g[m]);c?this.lastPlacementChangeTime=b:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=a?a.lastPlacementChangeTime:b)};wb.prototype.updateLayerOpacities=
function(b,a){for(var c={},d=0;d<a.length;d+=1){var e=a[d],f=e.getBucket(b);f&&e.latestFeatureIndex&&b.id===f.layerIds[0]&&this.updateBucketOpacities(f,c,e.collisionBoxArray)}};wb.prototype.updateBucketOpacities=function(a,c,d){a.hasTextData()&&a.text.opacityVertexArray.clear();a.hasIconData()&&a.icon.opacityVertexArray.clear();a.hasCollisionBoxData()&&a.collisionBox.collisionVertexArray.clear();a.hasCollisionCircleData()&&a.collisionCircle.collisionVertexArray.clear();var e=a.layers[0].layout,f=
new wc(null,0,!1,!1,!0),g=e.get("text-allow-overlap"),h=e.get("icon-allow-overlap"),k=e.get("text-variable-anchor"),l="map"===e.get("text-rotation-alignment"),r="map"===e.get("text-pitch-alignment");e=new wc(null,0,g&&(h||!a.hasIconData()||e.get("icon-optional")),h&&(g||!a.hasTextData()||e.get("text-optional")),!0);!a.collisionArrays&&d&&(a.hasCollisionBoxData()||a.hasCollisionCircleData())&&a.deserializeCollisionBoxes(d);for(d=0;d<a.symbolInstances.length;d++){var t=a.symbolInstances.get(d),m=t.numHorizontalGlyphVertices,
u=t.numVerticalGlyphVertices,n=t.crossTileID;g=c[n];h=this.opacities[n];g?h=f:h||(h=e,this.opacities[n]=h);c[n]=!0;var v=0<t.numIconVertices;if(0<m||0<u){var w=T(h.text);m=(m+u)/4;for(u=0;u<m;u++)a.text.opacityVertexArray.emplaceBack(w);var z=h.text.isHidden()?1:0;w=this.placedOrientations[t.crossTileID];m=w===b.WritingMode.horizontal||w===b.WritingMode.horizontalOnly?1:0;var x=w===b.WritingMode.vertical?1:0;[t.rightJustifiedTextSymbolIndex,t.centerJustifiedTextSymbolIndex,t.leftJustifiedTextSymbolIndex].forEach(function(b){0<=
b&&(a.text.placedSymbolArray.get(b).hidden=z||x)});0<=t.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(t.verticalPlacedTextSymbolIndex).hidden=z||m);(m=this.variableOffsets[t.crossTileID])&&this.markUsedJustification(a,m.anchor,t,w);(w=this.placedOrientations[t.crossTileID])&&(this.markUsedJustification(a,"left",t,w),this.markUsedOrientation(a,w,t))}if(v){v=T(h.icon);for(w=0;w<t.numIconVertices/4;w++)a.icon.opacityVertexArray.emplaceBack(v);a.icon.placedSymbolArray.get(d).hidden=h.icon.isHidden()}if(a.hasCollisionBoxData()||
a.hasCollisionCircleData())if(t=a.collisionArrays[d])if(t.textBox&&(v=new b.Point(0,0),w=!0,k&&((n=this.variableOffsets[n])?(v=P(n.anchor,n.width,n.height,n.radialOffset,n.textBoxScale),l&&v._rotate(r?this.transform.angle:-this.transform.angle)):w=!1),Q(a.collisionBox.collisionVertexArray,h.text.placed,!w,v.x,v.y)),t.iconBox&&Q(a.collisionBox.collisionVertexArray,h.icon.placed,!1),(n=t.textCircles)&&a.hasCollisionCircleData())for(t=0;t<n.length;t+=5)Q(a.collisionCircle.collisionVertexArray,h.text.placed,
g||0===n[t+4])}a.sortFeatures(this.transform.angle);this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder);a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray);a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray);a.hasCollisionBoxData()&&a.collisionBox.collisionVertexBuffer&&a.collisionBox.collisionVertexBuffer.updateData(a.collisionBox.collisionVertexArray);
a.hasCollisionCircleData()&&a.collisionCircle.collisionVertexBuffer&&a.collisionCircle.collisionVertexBuffer.updateData(a.collisionCircle.collisionVertexArray)};wb.prototype.symbolFadeChange=function(b){return 0===this.fadeDuration?1:(b-this.commitTime)/this.fadeDuration};wb.prototype.hasTransitions=function(b){return this.stale||b-this.lastPlacementChangeTime<this.fadeDuration};wb.prototype.stillRecent=function(b){return this.commitTime+this.fadeDuration>b};wb.prototype.setStale=function(){this.stale=
!0};var ac=Math.pow(2,25),Zc=Math.pow(2,24),Pe=Math.pow(2,17),Bh=Math.pow(2,16),Df=Math.pow(2,9),qc=Math.pow(2,8),xd=Math.pow(2,1),Zf=function(){this._currentTileIndex=0;this._seenCrossTileIDs={}};Zf.prototype.continuePlacement=function(b,a,c,d,e){for(;this._currentTileIndex<b.length;)if(a.placeLayerTile(d,b[this._currentTileIndex],c,this._seenCrossTileIDs),this._currentTileIndex++,e())return!0};var ob=function(b,a,c,d,e,f,g){this.placement=new wb(b,e,f,g);this._currentPlacementIndex=a.length-1;this._forceFullPlacement=
c;this._showCollisionBoxes=d;this._done=!1};ob.prototype.isDone=function(){return this._done};ob.prototype.continuePlacement=function(a,c,d){for(var e=this,f=b.browser.now(),g=function(){var a=b.browser.now()-f;return!e._forceFullPlacement&&2<a};0<=this._currentPlacementIndex;){var h=c[a[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if("symbol"===h.type&&(!h.minzoom||h.minzoom<=k)&&(!h.maxzoom||h.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new Zf),this._inProgressLayer.continuePlacement(d[h.source],
this.placement,this._showCollisionBoxes,h,g))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0};ob.prototype.commit=function(b){return this.placement.commit(b),this.placement};var ve=512/b.EXTENT/2,hf=function(b,a,c){this.tileID=b;this.indexedSymbolInstances={};this.bucketInstanceId=c;for(c=0;c<a.length;c++){var d=a.get(c),e=d.key;this.indexedSymbolInstances[e]||(this.indexedSymbolInstances[e]=[]);this.indexedSymbolInstances[e].push({crossTileID:d.crossTileID,coord:this.getScaledCoordinates(d,
b)})}};hf.prototype.getScaledCoordinates=function(a,c){var d=ve/Math.pow(2,c.canonical.z-this.tileID.canonical.z);return{x:Math.floor((c.canonical.x*b.EXTENT+a.anchorX)*d),y:Math.floor((c.canonical.y*b.EXTENT+a.anchorY)*d)}};hf.prototype.findMatches=function(b,a,c){for(var d=this.tileID.canonical.z<a.canonical.z?1:Math.pow(2,this.tileID.canonical.z-a.canonical.z),e=0;e<b.length;e++){var f=b.get(e);if(!f.crossTileID){var g=this.indexedSymbolInstances[f.key];if(g)for(var h=this.getScaledCoordinates(f,
a),k=0;k<g.length;k+=1){var l=g[k];if(Math.abs(l.coord.x-h.x)<=d&&Math.abs(l.coord.y-h.y)<=d&&!c[l.crossTileID]){c[l.crossTileID]=!0;f.crossTileID=l.crossTileID;break}}}}};var Gb=function(){this.maxCrossTileID=0};Gb.prototype.generate=function(){return++this.maxCrossTileID};var cd=function(){this.indexes={};this.usedCrossTileIDs={};this.lng=0};cd.prototype.handleWrapJump=function(b){var a=Math.round((b-this.lng)/360);if(0!==a)for(var c in this.indexes){var d=this.indexes[c],e={},f;for(f in d){var g=
d[f];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+a);e[g.tileID.key]=g}this.indexes[c]=e}this.lng=b};cd.prototype.addBucket=function(b,a,c){if(this.indexes[b.overscaledZ]&&this.indexes[b.overscaledZ][b.key]){if(this.indexes[b.overscaledZ][b.key].bucketInstanceId===a.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(b.overscaledZ,this.indexes[b.overscaledZ][b.key])}for(var d=0;d<a.symbolInstances.length;d++)a.symbolInstances.get(d).crossTileID=0;this.usedCrossTileIDs[b.overscaledZ]||(this.usedCrossTileIDs[b.overscaledZ]=
{});d=this.usedCrossTileIDs[b.overscaledZ];for(var e in this.indexes){var f=this.indexes[e];if(Number(e)>b.overscaledZ)for(var g in f){var h=f[g];h.tileID.isChildOf(b)&&h.findMatches(a.symbolInstances,b,d)}else(f=f[b.scaledTo(Number(e)).key])&&f.findMatches(a.symbolInstances,b,d)}for(e=0;e<a.symbolInstances.length;e++)g=a.symbolInstances.get(e),g.crossTileID||(g.crossTileID=c.generate(),d[g.crossTileID]=!0);return void 0===this.indexes[b.overscaledZ]&&(this.indexes[b.overscaledZ]={}),this.indexes[b.overscaledZ][b.key]=
new hf(b,a.symbolInstances,a.bucketInstanceId),!0};cd.prototype.removeBucketCrossTileIDs=function(b,a){for(var c in a.indexedSymbolInstances)for(var d=0,e=a.indexedSymbolInstances[c];d<e.length;d+=1)delete this.usedCrossTileIDs[b][e[d].crossTileID]};cd.prototype.removeStaleBuckets=function(b){var a=!1,c;for(c in this.indexes){var d=this.indexes[c],e;for(e in d)b[d[e].bucketInstanceId]||(this.removeBucketCrossTileIDs(c,d[e]),delete d[e],a=!0)}return a};var Sc=function(){this.layerIndexes={};this.crossTileIDs=
new Gb;this.maxBucketInstanceId=0;this.bucketsInCurrentPlacement={}};Sc.prototype.addLayer=function(b,a,c){var d=this.layerIndexes[b.id];void 0===d&&(d=this.layerIndexes[b.id]=new cd);var e=!1,f={};d.handleWrapJump(c);for(c=0;c<a.length;c+=1){var g=a[c],h=g.getBucket(b);h&&b.id===h.layerIds[0]&&(h.bucketInstanceId||(h.bucketInstanceId=++this.maxBucketInstanceId),d.addBucket(g.tileID,h,this.crossTileIDs)&&(e=!0),f[h.bucketInstanceId]=!0)}return d.removeStaleBuckets(f)&&(e=!0),e};Sc.prototype.pruneUnusedLayers=
function(b){var a={},c;for(c in b.forEach(function(b){a[b]=!0}),this.layerIndexes)a[c]||delete this.layerIndexes[c]};var Zd=function(a,c){return b.emitValidationErrors(a,c&&c.filter(function(b){return"source.canvas"!==b.identifier}))},Ef=b.pick(hb,"addLayer removeLayer setPaintProperty setLayoutProperty setFilter addSource removeSource setLayerZoomRange setLight setTransition setGeoJSONSourceData".split(" ")),jf=b.pick(hb,["setCenter","setZoom","setBearing","setPitch"]),zc=function(a){function d(c,
e){var f=this;void 0===e&&(e={});a.call(this);this.map=c;this.dispatcher=new Mb((wd||(wd=new Zb),wd),this);this.imageManager=new ba;this.imageManager.setEventedParent(this);this.glyphManager=new Ea(c._requestManager,e.localIdeographFontFamily);this.lineAtlas=new Lb(256,512);this.crossTileSymbolIndex=new Sc;this._layers={};this._order=[];this.sourceCaches={};this.zoomHistory=new b.ZoomHistory;this._loaded=!1;this._resetUpdates();this.dispatcher.broadcast("setReferrer",b.getReferrer());var g=this;this._rtlTextPluginCallback=
d.registerForPluginAvailability(function(b){for(var a in g.dispatcher.broadcast("loadRTLTextPlugin",b.pluginURL,b.completionCallback),g.sourceCaches)g.sourceCaches[a].reload()});this.on("data",function(b){if("source"===b.dataType&&"metadata"===b.sourceDataType&&(b=f.sourceCaches[b.sourceId])&&(b=b.getSource())&&b.vectorLayerIds)for(var a in f._layers){var c=f._layers[a];c.source===b.id&&f._validateLayer(c)}})}return a&&(d.__proto__=a),d.prototype=Object.create(a&&a.prototype),d.prototype.constructor=
d,d.prototype.loadURL=function(a,c){var d=this;void 0===c&&(c={});this.fire(new b.Event("dataloading",{dataType:"style"}));var e="boolean"==typeof c.validate?c.validate:!b.isMapboxURL(a);a=this.map._requestManager.normalizeStyleURL(a,c.accessToken);a=this.map._requestManager.transformRequest(a,b.ResourceType.Style);this._request=b.getJSON(a,function(a,c){d._request=null;a?d.fire(new b.ErrorEvent(a)):c&&d._load(c,e)})},d.prototype.loadJSON=function(a,c){var d=this;void 0===c&&(c={});this.fire(new b.Event("dataloading",
{dataType:"style"}));this._request=b.browser.frame(function(){d._request=null;d._load(a,!1!==c.validate)})},d.prototype._load=function(a,c){var d=this;if(!c||!Zd(this,b.validateStyle(a))){for(var e in this._loaded=!0,this.stylesheet=a,a.sources)this.addSource(e,a.sources[e],{validate:!1});a.sprite?this._spriteRequest=function(a,c,d){function e(){if(h)d(h);else if(f&&g){var a=b.browser.getImageData(g),c={},e;for(e in f){var k=f[e],l=k.width,r=k.height,t=k.x,m=k.y,u=k.sdf;k=k.pixelRatio;var n=new b.RGBAImage({width:l,
height:r});b.RGBAImage.copy(a,n,{x:t,y:m},{x:0,y:0},{width:l,height:r});c[e]={data:n,pixelRatio:k,sdf:u}}d(null,c)}}var f,g,h,k=1<b.browser.devicePixelRatio?"@2x":"",l=b.getJSON(c.transformRequest(c.normalizeSpriteURL(a,k,".json"),b.ResourceType.SpriteJSON),function(b,a){l=null;h||(h=b,f=a,e())}),r=b.getImage(c.transformRequest(c.normalizeSpriteURL(a,k,".png"),b.ResourceType.SpriteImage),function(b,a){r=null;h||(h=b,g=a,e())});return{cancel:function(){l&&(l.cancel(),l=null);r&&(r.cancel(),r=null)}}}(a.sprite,
this.map._requestManager,function(a,c){if(d._spriteRequest=null,a)d.fire(new b.ErrorEvent(a));else if(c)for(var e in c)d.imageManager.addImage(e,c[e]);d.imageManager.setLoaded(!0);d.fire(new b.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0);this.glyphManager.setURL(a.glyphs);a=A(this.stylesheet.layers);this._order=a.map(function(b){return b.id});this._layers={};for(c=0;c<a.length;c+=1)e=a[c],(e=b.createStyleLayer(e)).setEventedParent(this,{layer:{id:e.id}}),this._layers[e.id]=
e;this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order));this.light=new Ja(this.stylesheet.light);this.fire(new b.Event("data",{dataType:"style"}));this.fire(new b.Event("style.load"))}},d.prototype._validateLayer=function(a){var c=this.sourceCaches[a.source];if(c){var d=a.sourceLayer;d&&(c=c.getSource(),("geojson"===c.type||c.vectorLayerIds&&-1===c.vectorLayerIds.indexOf(d))&&this.fire(new b.ErrorEvent(Error('Source layer "'+d+'" does not exist on source "'+c.id+'" as specified by style layer "'+
a.id+'"'))))}},d.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var b in this.sourceCaches)if(!this.sourceCaches[b].loaded())return!1;return!!this.imageManager.isLoaded()},d.prototype._serializeLayers=function(b){for(var a=[],c=0;c<b.length;c+=1){var d=this._layers[b[c]];"custom"!==d.type&&a.push(d.serialize())}return a},d.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var b in this.sourceCaches)if(this.sourceCaches[b].hasTransition())return!0;
for(var a in this._layers)if(this._layers[a].hasTransition())return!0;return!1},d.prototype._checkLoaded=function(){if(!this._loaded)throw Error("Style is not done loading");},d.prototype.update=function(a){if(this._loaded){var c=this._changed;if(this._changed){var d=Object.keys(this._updatedLayers),e=Object.keys(this._removedLayers);for(h in(d.length||e.length)&&this._updateWorkerLayers(d,e),this._updatedSources)d=this._updatedSources[h],"reload"===d?this._reloadSource(h):"clear"===d&&this._clearSource(h);
for(var f in this._updatedPaintProps)this._layers[f].updateTransitions(a);this.light.updateTransitions(a);this._resetUpdates()}for(var g in this.sourceCaches)this.sourceCaches[g].used=!1;var h=0;for(f=this._order;h<f.length;h+=1)g=this._layers[f[h]],g.recalculate(a),!g.isHidden(a.zoom)&&g.source&&(this.sourceCaches[g.source].used=!0);this.light.recalculate(a);this.z=a.zoom;c&&this.fire(new b.Event("data",{dataType:"style"}))}},d.prototype._updateWorkerLayers=function(b,a){this.dispatcher.broadcast("updateLayers",
{layers:this._serializeLayers(b),removedIds:a})},d.prototype._resetUpdates=function(){this._changed=!1;this._updatedLayers={};this._removedLayers={};this._updatedSources={};this._updatedPaintProps={}},d.prototype.setState=function(a){var c=this;if(this._checkLoaded(),Zd(this,b.validateStyle(a)))return!1;(a=b.clone$1(a)).layers=A(a.layers);var d=B(this.serialize(),a).filter(function(b){return!(b.command in jf)});if(0===d.length)return!1;var e=d.filter(function(b){return!(b.command in Ef)});if(0<e.length)throw Error("Unimplemented: "+
e.map(function(b){return b.command}).join(", ")+".");return d.forEach(function(b){"setTransition"!==b.command&&c[b.command].apply(c,b.args)}),this.stylesheet=a,!0},d.prototype.addImage=function(a,c){if(this.getImage(a))return this.fire(new b.ErrorEvent(Error("An image with this name already exists.")));this.imageManager.addImage(a,c);this.fire(new b.Event("data",{dataType:"style"}))},d.prototype.updateImage=function(b,a){this.imageManager.updateImage(b,a)},d.prototype.getImage=function(b){return this.imageManager.getImage(b)},
d.prototype.removeImage=function(a){if(!this.getImage(a))return this.fire(new b.ErrorEvent(Error("No image with this name exists.")));this.imageManager.removeImage(a);this.fire(new b.Event("data",{dataType:"style"}))},d.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},d.prototype.addSource=function(a,c,d){var e=this;if(void 0===d&&(d={}),this._checkLoaded(),void 0!==this.sourceCaches[a])throw Error("There is already a source with this ID");if(!c.type)throw Error("The type property must be defined, but the only the following properties were given: "+
Object.keys(c).join(", ")+".");if(!(0<=["vector","raster","geojson","video","image"].indexOf(c.type)&&this._validate(b.validateStyle.source,"sources."+a,c,null,d))){this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);var f=this.sourceCaches[a]=new jd(a,c,this.dispatcher);f.style=this;f.setEventedParent(this,function(){return{isSourceLoaded:e.loaded(),source:f.serialize(),sourceId:a}});f.onAdd(this.map);this._changed=!0}},d.prototype.removeSource=function(a){if(this._checkLoaded(),
void 0===this.sourceCaches[a])throw Error("There is no source with this ID");for(var c in this._layers)if(this._layers[c].source===a)return this.fire(new b.ErrorEvent(Error('Source "'+a+'" cannot be removed while layer "'+c+'" is using it.')));c=this.sourceCaches[a];delete this.sourceCaches[a];delete this._updatedSources[a];c.fire(new b.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:a}));c.setEventedParent(null);c.clearTiles();c.onRemove&&c.onRemove(this.map);this._changed=!0},
d.prototype.setGeoJSONSourceData=function(b,a){this._checkLoaded();this.sourceCaches[b].getSource().setData(a);this._changed=!0},d.prototype.getSource=function(b){return this.sourceCaches[b]&&this.sourceCaches[b].getSource()},d.prototype.addLayer=function(a,c,d){void 0===d&&(d={});this._checkLoaded();var e=a.id;if(this.getLayer(e))this.fire(new b.ErrorEvent(Error('Layer with id "'+e+'" already exists on this map')));else{if("custom"===a.type){if(Zd(this,b.validateCustomStyleLayer(a)))return;a=b.createStyleLayer(a)}else{if("object"==
typeof a.source&&(this.addSource(e,a.source),a=b.clone$1(a),a=b.extend(a,{source:e})),this._validate(b.validateStyle.layer,"layers."+e,a,{arrayIndex:-1},d))return;a=b.createStyleLayer(a);this._validateLayer(a);a.setEventedParent(this,{layer:{id:e}})}d=c?this._order.indexOf(c):this._order.length;if(c&&-1===d)this.fire(new b.ErrorEvent(Error('Layer with id "'+c+'" does not exist on this map.')));else{if(this._order.splice(d,0,e),this._layerOrderChanged=!0,this._layers[e]=a,this._removedLayers[e]&&a.source&&
"custom"!==a.type)c=this._removedLayers[e],delete this._removedLayers[e],c.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause());this._updateLayer(a);a.onAdd&&a.onAdd(this.map)}}},d.prototype.moveLayer=function(a,c){if(this._checkLoaded(),this._changed=!0,this._layers[a]){if(a!==c){var d=this._order.indexOf(a);this._order.splice(d,1);d=c?this._order.indexOf(c):this._order.length;c&&-1===d?this.fire(new b.ErrorEvent(Error('Layer with id "'+
c+'" does not exist on this map.'))):(this._order.splice(d,0,a),this._layerOrderChanged=!0)}}else this.fire(new b.ErrorEvent(Error("The layer '"+a+"' does not exist in the map's style and cannot be moved.")))},d.prototype.removeLayer=function(a){this._checkLoaded();var c=this._layers[a];if(c){c.setEventedParent(null);var d=this._order.indexOf(a);this._order.splice(d,1);this._changed=this._layerOrderChanged=!0;this._removedLayers[a]=c;delete this._layers[a];delete this._updatedLayers[a];delete this._updatedPaintProps[a];
c.onRemove&&c.onRemove(this.map)}else this.fire(new b.ErrorEvent(Error("The layer '"+a+"' does not exist in the map's style and cannot be removed.")))},d.prototype.getLayer=function(b){return this._layers[b]},d.prototype.setLayerZoomRange=function(a,c,d){this._checkLoaded();var e=this.getLayer(a);e?e.minzoom===c&&e.maxzoom===d||(null!=c&&(e.minzoom=c),null!=d&&(e.maxzoom=d),this._updateLayer(e)):this.fire(new b.ErrorEvent(Error("The layer '"+a+"' does not exist in the map's style and cannot have zoom extent.")))},
d.prototype.setFilter=function(a,c,d){void 0===d&&(d={});this._checkLoaded();var e=this.getLayer(a);if(e){if(!b.deepEqual(e.filter,c))return null==c?(e.filter=void 0,void this._updateLayer(e)):void(this._validate(b.validateStyle.filter,"layers."+e.id+".filter",c,null,d)||(e.filter=b.clone$1(c),this._updateLayer(e)))}else this.fire(new b.ErrorEvent(Error("The layer '"+a+"' does not exist in the map's style and cannot be filtered.")))},d.prototype.getFilter=function(a){return b.clone$1(this.getLayer(a).filter)},
d.prototype.setLayoutProperty=function(a,c,d,e){void 0===e&&(e={});this._checkLoaded();var f=this.getLayer(a);f?b.deepEqual(f.getLayoutProperty(c),d)||(f.setLayoutProperty(c,d,e),this._updateLayer(f)):this.fire(new b.ErrorEvent(Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},d.prototype.getLayoutProperty=function(a,c){var d=this.getLayer(a);if(d)return d.getLayoutProperty(c);this.fire(new b.ErrorEvent(Error("The layer '"+a+"' does not exist in the map's style.")))},
d.prototype.setPaintProperty=function(a,c,d,e){void 0===e&&(e={});this._checkLoaded();var f=this.getLayer(a);f?b.deepEqual(f.getPaintProperty(c),d)||(f.setPaintProperty(c,d,e)&&this._updateLayer(f),this._changed=!0,this._updatedPaintProps[a]=!0):this.fire(new b.ErrorEvent(Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},d.prototype.getPaintProperty=function(b,a){return this.getLayer(b).getPaintProperty(a)},d.prototype.setFeatureState=function(a,c){this._checkLoaded();
var d=a.source,e=a.sourceLayer,f=this.sourceCaches[d];a=parseInt(a.id,10);void 0!==f?(d=f.getSource().type,"geojson"===d&&e?this.fire(new b.ErrorEvent(Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==d||e?isNaN(a)||0>a?this.fire(new b.ErrorEvent(Error("The feature id parameter must be provided and non-negative."))):f.setFeatureState(e,a,c):this.fire(new b.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))):this.fire(new b.ErrorEvent(Error("The source '"+
d+"' does not exist in the map's style.")))},d.prototype.removeFeatureState=function(a,c){this._checkLoaded();var d=a.source,e=this.sourceCaches[d];if(void 0!==e){d=e.getSource().type;var f="vector"===d?a.sourceLayer:void 0,g=parseInt(a.id,10);"vector"!==d||f?void 0!==a.id&&isNaN(g)||0>g?this.fire(new b.ErrorEvent(Error("The feature id parameter must be non-negative."))):c&&"string"!=typeof a.id&&"number"!=typeof a.id?this.fire(new b.ErrorEvent(Error("A feature id is requred to remove its specific state property."))):
e.removeFeatureState(f,g,c):this.fire(new b.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new b.ErrorEvent(Error("The source '"+d+"' does not exist in the map's style.")))},d.prototype.getFeatureState=function(a){this._checkLoaded();var c=a.source,d=a.sourceLayer,e=this.sourceCaches[c];a=parseInt(a.id,10);if(void 0!==e)if("vector"!==e.getSource().type||d){if(!(isNaN(a)||0>a))return e.getFeatureState(d,a);this.fire(new b.ErrorEvent(Error("The feature id parameter must be provided and non-negative.")))}else this.fire(new b.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")));
else this.fire(new b.ErrorEvent(Error("The source '"+c+"' does not exist in the map's style.")))},d.prototype.getTransition=function(){return b.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},d.prototype.serialize=function(){return b.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,
sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:b.mapObject(this.sourceCaches,function(b){return b.serialize()}),layers:this._serializeLayers(this._order)},function(b){return void 0!==b})},d.prototype._updateLayer=function(b){this._updatedLayers[b.id]=!0;b.source&&!this._updatedSources[b.source]&&(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause());this._changed=!0},d.prototype._flattenAndSortRenderedFeatures=function(b){for(var a=
{},c=[],d=this._order.length-1;0<=d;d--){var e=this._order[d];if("fill-extrusion"===this._layers[e].type){a[e]=d;for(var f=0,g=b;f<g.length;f+=1){var h=g[f][e];if(h)for(var k=0;k<h.length;k+=1)c.push(h[k])}}}c.sort(function(b,a){return a.intersectionZ-b.intersectionZ});d=[];for(e=this._order.length-1;0<=e;e--)if(f=this._order[e],"fill-extrusion"===this._layers[f].type)for(f=c.length-1;0<=f;f--){g=c[f].feature;if(a[g.layer.id]<e)break;d.push(g);c.pop()}else for(g=0,k=b;g<k.length;g+=1){var l=k[g][f];
if(l)for(h=0;h<l.length;h+=1)d.push(l[h].feature)}return d},d.prototype.queryRenderedFeatures=function(a,d,e){d&&d.filter&&this._validate(b.validateStyle.filter,"queryRenderedFeatures.filter",d.filter,null,d);var f={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new b.ErrorEvent(Error("parameters.layers must be an Array."))),[];for(var g=0,h=d.layers;g<h.length;g+=1){var k=h[g],l=this._layers[k];if(!l)return this.fire(new b.ErrorEvent(Error("The layer '"+k+"' does not exist in the map's style and cannot be queried for features."))),
[];f[l.source]=!0}}g=[];for(var t in this.sourceCaches)d.layers&&!f[t]||g.push(c(this.sourceCaches[t],this._layers,a,d,e));return this.placement&&g.push(function(b,a,c,d,e,f){var g={},h=e.queryRenderedSymbols(c);c=[];e=0;for(var k=Object.keys(h).map(Number);e<k.length;e+=1)c.push(f[k[e]]);c.sort(r);f=function(){var a=t[l],c=a.featureIndex.lookupSymbolFeatures(h[a.bucketInstanceId],a.bucketIndex,a.sourceLayerIndex,d.filter,d.layers,b),e;for(e in c){var f=g[e]=g[e]||[],k=c[e];k.sort(function(b,c){var d=
a.featureSortOrder;return d?(b=d.indexOf(b.featureIndex),d.indexOf(c.featureIndex)-b):c.featureIndex-b.featureIndex});for(var r=0;r<k.length;r+=1)f.push(k[r])}};for(var l=0,t=c;l<t.length;l+=1)f();f=function(c){g[c].forEach(function(d){d=d.feature;var e=a[b[c].source].getFeatureState(d.layer["source-layer"],d.id);d.source=d.layer.source;d.layer["source-layer"]&&(d.sourceLayer=d.layer["source-layer"]);d.state=e})};for(var m in g)f(m);return g}(this._layers,this.sourceCaches,a,d,this.placement.collisionIndex,
this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(g)},d.prototype.querySourceFeatures=function(a,c){c&&c.filter&&this._validate(b.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);return(a=this.sourceCaches[a])?function(b,a){for(var c=b.getRenderableIds().map(function(a){return b.getTileByID(a)}),d=[],e={},f=0;f<c.length;f++){var g=c[f],h=g.tileID.canonical.key;e[h]||(e[h]=!0,g.querySourceFeatures(d,a))}return d}(a,c):[]},d.prototype.addSourceType=function(b,
a,c){return d.getSourceType(b)?c(Error('A source type called "'+b+'" already exists.')):(d.setSourceType(b,a),a.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:b,url:a.workerSourceURL},c):c(null,null))},d.prototype.getLight=function(){return this.light.getLight()},d.prototype.setLight=function(a,c){void 0===c&&(c={});this._checkLoaded();var d=this.light.getLight(),e=!1,f;for(f in a)if(!b.deepEqual(a[f],d[f])){e=!0;break}e&&(d={now:b.browser.now(),transition:b.extend({duration:300,
delay:0},this.stylesheet.transition)},this.light.setLight(a,c),this.light.updateTransitions(d))},d.prototype._validate=function(a,c,d,e,f){return void 0===f&&(f={}),(!f||!1!==f.validate)&&Zd(this,a.call(b.validateStyle,b.extend({key:c,style:this.serialize(),value:d,styleSpec:b.styleSpec},e)))},d.prototype._remove=function(){for(var a in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),b.evented.off("pluginAvailable",
this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[a].clearTiles();this.dispatcher.remove()},d.prototype._clearSource=function(b){this.sourceCaches[b].clearTiles()},d.prototype._reloadSource=function(b){this.sourceCaches[b].resume();this.sourceCaches[b].reload()},d.prototype._updateSources=function(b){for(var a in this.sourceCaches)this.sourceCaches[a].update(b)},d.prototype._generateCollisionBoxes=function(){for(var b in this.sourceCaches)this._reloadSource(b)},d.prototype._updatePlacement=
function(a,c,d,e){for(var f=!1,g=!1,h={},k=0,l=this._order;k<l.length;k+=1){var r=this._layers[l[k]];if("symbol"===r.type){if(!h[r.source]){var t=this.sourceCaches[r.source];h[r.source]=t.getRenderableIds(!0).map(function(b){return t.getTileByID(b)}).sort(function(b,a){return a.tileID.overscaledZ-b.tileID.overscaledZ||(b.tileID.isLessThan(a.tileID)?-1:1)})}r=this.crossTileSymbolIndex.addLayer(r,h[r.source],a.center.lng);f=f||r}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);k=this._layerOrderChanged||
0===d;if((k||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(b.browser.now()))&&(this.pauseablePlacement=new ob(a,this._order,k,c,d,e,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,h),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(b.browser.now()),g=!0),f&&this.pauseablePlacement.placement.setStale()),
g||f)for(a=0,c=this._order;a<c.length;a+=1)d=this._layers[c[a]],"symbol"===d.type&&this.placement.updateLayerOpacities(d,h[d.source]);return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(b.browser.now())},d.prototype._releaseSymbolFadeTiles=function(){for(var b in this.sourceCaches)this.sourceCaches[b].releaseSymbolFadeTiles()},d.prototype.getImages=function(b,a,c){this.imageManager.getImages(a.icons,c)},d.prototype.getGlyphs=function(b,a,c){this.glyphManager.getGlyphs(a.stacks,
c)},d.prototype.getResource=function(a,c,d){return b.makeRequest(c,d)},d}(b.Evented);zc.getSourceType=function(b){return pa[b]};zc.setSourceType=function(b,a){pa[b]=a};zc.registerForPluginAvailability=b.registerForPluginAvailability;var Pd=b.createLayout([{name:"a_pos",type:"Int16",components:2}]),we=V("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue\x3dint(packedValue);int v0\x3dpackedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity\x3dint(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor\x3ddecode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor\x3ddecode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset\x3dmod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),
lf=V("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor\x3du_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);}"),$f=V("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);gl_FragColor\x3dmix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),
Re=V("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude\x3dv_data.xy;float extrude_length\x3dlength(extrude);lowp float antialiasblur\x3dv_data.z;float antialiased_blur\x3d-max(blur,antialiasblur);float opacity_t\x3dsmoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t\x3dstroke_width \x3c 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor\x3dopacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude\x3dvec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center\x3dfloor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position\x3dcircle_center;if (u_scale_with_map) {corner_position+\x3dextrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center\x3du_matrix*vec4(circle_center,0,1);corner_position+\x3dextrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position\x3du_matrix*vec4(corner_position,0,1);} else {gl_Position\x3du_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+\x3dextrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+\x3dextrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur\x3d1.0/u_device_pixel_ratio/(radius+stroke_width);v_data\x3dvec3(extrude.x,extrude.y,antialiasblur);}"),
Qd=V("void main() {gl_FragColor\x3dvec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);}"),ld=V("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d\x3d-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val\x3dweight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor\x3dvec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO\x3d1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude\x3dvec2(mod(a_pos,2.0)*2.0-1.0);float S\x3dsqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude\x3dS*unscaled_extrude;vec2 extrude\x3dv_extrude*radius*u_extrude_scale;vec4 pos\x3dvec4(floor(a_pos*0.5)+extrude,0,1);gl_Position\x3du_matrix*pos;}"),
Hf=V("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t\x3dtexture2D(u_image,v_pos).r;vec4 color\x3dtexture2D(u_color_ramp,vec2(t,0.5));gl_FragColor\x3dcolor*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos*u_world,0,1);v_pos.x\x3da_pos.x;v_pos.y\x3d1.0-a_pos.y;}"),xe=
V("varying float v_placed;varying float v_notUsed;void main() {float alpha\x3d0.5;gl_FragColor\x3dvec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed \x3e 0.5) {gl_FragColor\x3dvec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed \x3e 0.5) {gl_FragColor*\x3d.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint\x3du_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float collision_perspective_ratio\x3dclamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position\x3du_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+\x3d(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed\x3da_placed.x;v_notUsed\x3da_placed.y;}"),
ye=V("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha\x3d0.5;vec4 color\x3dvec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed \x3e 0.5) {color\x3dvec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed \x3e 0.5) {color*\x3d.2;}float extrude_scale_length\x3dlength(v_extrude_scale);float extrude_length\x3dlength(v_extrude)*extrude_scale_length;float stroke_width\x3d15.0*extrude_scale_length/u_overscale_factor;float radius\x3dv_radius*extrude_scale_length;float distance_to_edge\x3dabs(extrude_length-radius);float opacity_t\x3dsmoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor\x3dopacity_t*color;}",
"attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint\x3du_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float collision_perspective_ratio\x3dclamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position\x3du_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor\x3d1.2;gl_Position.xy+\x3da_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed\x3da_placed.x;v_notUsed\x3da_placed.y;v_radius\x3dabs(a_extrude.y);v_extrude\x3da_extrude*padding_factor;v_extrude_scale\x3du_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"),
nf=V("uniform highp vec4 u_color;void main() {gl_FragColor\x3du_color;}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);}"),Bg=V("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor\x3dcolor*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position\x3du_matrix*vec4(a_pos,0,1);}"),
Te=V("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_pos-gl_FragCoord.xy);float alpha\x3d1.0-smoothstep(0.0,1.0,dist);gl_FragColor\x3doutline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos\x3d(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),
Ad=V("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);float dist\x3dlength(v_pos-gl_FragCoord.xy);float alpha\x3d1.0-smoothstep(0.0,1.0,dist);gl_FragColor\x3dmix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float pixelRatio\x3du_scale.x;float tileRatio\x3du_scale.y;float fromScale\x3du_scale.z;float toScale\x3du_scale.w;gl_Position\x3du_matrix*vec4(a_pos,0,1);vec2 display_size_a\x3dvec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b\x3dvec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos\x3d(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),
ag=V("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);gl_FragColor\x3dmix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float pixelRatio\x3du_scale.x;float tileZoomRatio\x3du_scale.y;float fromScale\x3du_scale.z;float toScale\x3du_scale.w;vec2 display_size_a\x3dvec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b\x3dvec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),
of=V("varying vec4 v_color;void main() {gl_FragColor\x3dv_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal\x3da_normal_ed.xyz;base\x3dmax(0.0,base);height\x3dmax(0.0,height);float t\x3dmod(normal.x,2.0);gl_Position\x3du_matrix*vec4(a_pos,t \x3e 0.0 ? height : base,1);float colorvalue\x3dcolor.r*0.2126+color.g*0.7152+color.b*0.0722;v_color\x3dvec4(0.0,0.0,0.0,1.0);vec4 ambientlight\x3dvec4(0.03,0.03,0.03,1.0);color+\x3dambientlight;float directional\x3dclamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional\x3dmix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !\x3d0.0) {directional*\x3d((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+\x3dclamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+\x3dclamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+\x3dclamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*\x3du_opacity;}"),
bg=V("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);vec4 mixedColor\x3dmix(color1,color2,u_fade);gl_FragColor\x3dmixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec4 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float pixelRatio\x3du_scale.x;float tileRatio\x3du_scale.y;float fromScale\x3du_scale.z;float toScale\x3du_scale.w;vec3 normal\x3da_normal_ed.xyz;float edgedistance\x3da_normal_ed.w;vec2 display_size_a\x3dvec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b\x3dvec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);base\x3dmax(0.0,base);height\x3dmax(0.0,height);float t\x3dmod(normal.x,2.0);float z\x3dt \x3e 0.0 ? height : base;gl_Position\x3du_matrix*vec4(a_pos,z,1);vec2 pos\x3dnormal.x\x3d\x3d1.0 \x26\x26 normal.y\x3d\x3d0.0 \x26\x26 normal.z\x3d\x3d16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting\x3dvec4(0.0,0.0,0.0,1.0);float directional\x3dclamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional\x3dmix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !\x3d0.0) {directional*\x3d((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+\x3dclamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*\x3du_opacity;}"),
Bd=V("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;float getElevation(vec2 coord,float bias) {vec4 data\x3dtexture2D(u_image,coord)*255.0;return (data.r+data.g*256.0+data.b*256.0*256.0)/4.0;}void main() {vec2 epsilon\x3d1.0/u_dimension;float a\x3dgetElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b\x3dgetElevation(v_pos+vec2(0,-epsilon.y),0.0);float c\x3dgetElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d\x3dgetElevation(v_pos+vec2(-epsilon.x,0),0.0);float e\x3dgetElevation(v_pos,0.0);float f\x3dgetElevation(v_pos+vec2(epsilon.x,0),0.0);float g\x3dgetElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h\x3dgetElevation(v_pos+vec2(0,epsilon.y),0.0);float i\x3dgetElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration\x3du_zoom \x3c 2.0 ? 0.4 : u_zoom \x3c 4.5 ? 0.35 : 0.3;vec2 deriv\x3dvec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor\x3dclamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);highp vec2 epsilon\x3d1.0/u_dimension;float scale\x3d(u_dimension.x-2.0)/u_dimension.x;v_pos\x3d(a_texture_pos/8192.0)*scale+epsilon;}"),ih=V("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel\x3dtexture2D(u_image,v_pos);vec2 deriv\x3d((pixel.rg*2.0)-1.0);float scaleFactor\x3dcos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope\x3datan(1.25*length(deriv)/scaleFactor);float aspect\x3dderiv.x !\x3d0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y \x3e 0.0 ? 1.0 :-1.0);float intensity\x3du_light.x;float azimuth\x3du_light.y+PI;float base\x3d1.875-intensity*1.75;float maxValue\x3d0.5*PI;float scaledSlope\x3dintensity !\x3d0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent\x3dcos(scaledSlope);vec4 accent_color\x3d(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade\x3dabs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color\x3dmix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor\x3daccent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos\x3da_texture_pos/8192.0;}"),Ca=V("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;v_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_width2\x3dvec2(outset,inset);}"),
Fb=V("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color\x3dtexture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;v_lineprogress\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_width2\x3dvec2(outset,inset);}"),
Dd=V("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec4 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float pixelRatio\x3du_scale.x;float tileZoomRatio\x3du_scale.y;float fromScale\x3du_scale.z;float toScale\x3du_scale.w;vec2 display_size_a\x3dvec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b\x3dvec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);vec2 pattern_size_a\x3dvec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b\x3dvec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a\x3dmod(v_linesofar/pattern_size_a.x,1.0);float x_b\x3dmod(v_linesofar/pattern_size_b.x,1.0);float y_a\x3d0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);float y_b\x3d0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);vec2 pos_a\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,vec2(x_a,y_a));vec2 pos_b\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,vec2(x_b,y_b));vec4 color\x3dmix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor\x3dcolor*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;float a_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_linesofar\x3da_linesofar;v_width2\x3dvec2(outset,inset);}"),
Dg=V("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a\x3dtexture2D(u_image,v_tex_a).a;float sdfdist_b\x3dtexture2D(u_image,v_tex_b).a;float sdfdist\x3dmix(sdfdist_a,sdfdist_b,u_mix);alpha*\x3dsmoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;float a_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_tex_a\x3dvec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b\x3dvec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2\x3dvec2(outset,inset);}"),
pf=V("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0\x3dtexture2D(u_image0,v_pos0);vec4 color1\x3dtexture2D(u_image1,v_pos1);if (color0.a \x3e 0.0) {color0.rgb\x3dcolor0.rgb/color0.a;}if (color1.a \x3e 0.0) {color1.rgb\x3dcolor1.rgb/color1.a;}vec4 color\x3dmix(color0,color1,u_fade_t);color.a*\x3du_opacity;vec3 rgb\x3dcolor.rgb;rgb\x3dvec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average\x3d(color.r+color.g+color.b)/3.0;rgb+\x3d(average-rgb)*u_saturation_factor;rgb\x3d(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec\x3dvec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec\x3dvec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor\x3dvec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos0\x3d(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1\x3d(v_pos0*u_scale_parent)+u_tl_parent;}"),Uc=V("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha\x3dopacity*v_fade_opacity;gl_FragColor\x3dtexture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size[0]/256.0;} else if (!u_is_size_zoom_constant \x26\x26 u_is_size_feature_constant) {size\x3du_size;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3du_is_text ? size/24.0 : size;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);v_tex\x3da_tex/u_texsize;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));}"),
Eg=V("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA\x3d0.105/u_device_pixel_ratio;vec2 tex\x3dv_data0.xy;float gamma_scale\x3dv_data1.x;float size\x3dv_data1.y;float fade_opacity\x3dv_data1[2];float fontScale\x3du_is_text ? size/24.0 : size;lowp vec4 color\x3dfill_color;highp float gamma\x3dEDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff\x3d(256.0-64.0)/256.0;if (u_is_halo) {color\x3dhalo_color;gamma\x3d(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff\x3d(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist\x3dtexture2D(u_texture,tex).a;highp float gamma_scaled\x3dgamma*gamma_scale;highp float alpha\x3dsmoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor\x3dcolor*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size[0]/256.0;} else if (!u_is_size_zoom_constant \x26\x26 u_is_size_feature_constant) {size\x3du_size;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3du_is_text ? size/24.0 : size;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale\x3dgl_Position.w;vec2 tex\x3da_tex/u_texsize;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0\x3dvec2(tex.x,tex.y);v_data1\x3dvec3(gamma_scale,size,interpolated_fade_opacity);}"),
Ue=Object.freeze({prelude:we,background:lf,backgroundPattern:$f,circle:Re,clippingMask:Qd,heatmap:ld,heatmapTexture:Hf,collisionBox:xe,collisionCircle:ye,debug:nf,fill:Bg,fillOutline:Te,fillOutlinePattern:Ad,fillPattern:ag,fillExtrusion:of,fillExtrusionPattern:bg,hillshadePrepare:Bd,hillshade:ih,line:Ca,lineGradient:Fb,linePattern:Dd,lineSDF:Dg,raster:pf,symbolIcon:Uc,symbolSDF:Eg}),Sd=function(){this.boundLayoutVertexBuffer=this.boundProgram=null;this.boundPaintVertexBuffers=[];this.vao=this.boundDynamicVertexBuffer=
this.boundVertexOffset=this.boundIndexBuffer=null};Sd.prototype.bind=function(b,a,c,d,e,f,g,h){this.context=b;for(var k=this.boundPaintVertexBuffers.length!==d.length,l=0;!k&&l<d.length;l++)this.boundPaintVertexBuffers[l]!==d[l]&&(k=!0);k=!this.vao||this.boundProgram!==a||this.boundLayoutVertexBuffer!==c||k||this.boundIndexBuffer!==e||this.boundVertexOffset!==f||this.boundDynamicVertexBuffer!==g||this.boundDynamicVertexBuffer2!==h;!b.extVertexArrayObject||k?this.freshBind(a,c,d,e,f,g,h):(b.bindVertexArrayOES.set(this.vao),
g&&g.bind(),e&&e.dynamicDraw&&e.bind(),h&&h.bind())};Sd.prototype.freshBind=function(b,a,c,d,e,f,g){var h=b.numAttributes,k=this.context,l=k.gl;if(k.extVertexArrayObject)this.vao&&this.destroy(),this.vao=k.extVertexArrayObject.createVertexArrayOES(),k.bindVertexArrayOES.set(this.vao),this.boundProgram=b,this.boundLayoutVertexBuffer=a,this.boundPaintVertexBuffers=c,this.boundIndexBuffer=d,this.boundVertexOffset=e,this.boundDynamicVertexBuffer=f,this.boundDynamicVertexBuffer2=g;else{var r=k.currentNumAttributes||
0;for(var t=h;t<r;t++)l.disableVertexAttribArray(t)}a.enableAttributes(l,b);for(r=0;r<c.length;r+=1)c[r].enableAttributes(l,b);f&&f.enableAttributes(l,b);g&&g.enableAttributes(l,b);a.bind();a.setVertexAttribPointers(l,b,e);for(a=0;a<c.length;a+=1)r=c[a],r.bind(),r.setVertexAttribPointers(l,b,e);f&&(f.bind(),f.setVertexAttribPointers(l,b,e));d&&d.bind();g&&(g.bind(),g.setVertexAttribPointers(l,b,e));k.currentNumAttributes=h};Sd.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),
this.vao=null)};var Lf=function(b,a,c,d,e){var f=b.gl;this.program=f.createProgram();var g=c.defines();e&&g.push("#define OVERDRAW_INSPECTOR;");e=g.concat(we.fragmentSource,a.fragmentSource).join("\n");a=g.concat(we.vertexSource,a.vertexSource).join("\n");g=f.createShader(f.FRAGMENT_SHADER);f.shaderSource(g,e);f.compileShader(g);f.attachShader(this.program,g);e=f.createShader(f.VERTEX_SHADER);f.shaderSource(e,a);f.compileShader(e);f.attachShader(this.program,e);e=c.layoutAttributes||[];for(a=0;a<
e.length;a++)f.bindAttribLocation(this.program,a,e[a].name);f.linkProgram(this.program);this.numAttributes=f.getProgramParameter(this.program,f.ACTIVE_ATTRIBUTES);this.attributes={};e={};for(a=0;a<this.numAttributes;a++)(g=f.getActiveAttrib(this.program,a))&&(this.attributes[g.name]=f.getAttribLocation(this.program,g.name));a=f.getProgramParameter(this.program,f.ACTIVE_UNIFORMS);for(g=0;g<a;g++){var h=f.getActiveUniform(this.program,g);h&&(e[h.name]=f.getUniformLocation(this.program,h.name))}this.fixedUniforms=
d(b,e);this.binderUniforms=c.getUniforms(b,e)};Lf.prototype.draw=function(b,a,c,d,e,f,g,h,k,l,r,t,m,u,n,v){var w,z=b.gl,x;for(x in b.program.set(this.program),b.setDepthMode(c),b.setStencilMode(d),b.setColorMode(e),b.setCullFace(f),this.fixedUniforms)this.fixedUniforms[x].set(g[x]);u&&u.setUniforms(b,this.binderUniforms,t,{zoom:m});c=(w={},w[z.LINES]=2,w[z.TRIANGLES]=3,w[z.LINE_STRIP]=1,w)[a];w=0;for(r=r.get();w<r.length;w+=1)d=r[w],e=d.vaos||(d.vaos={}),(e[h]||(e[h]=new Sd)).bind(b,this,k,u?u.getPaintVertexBuffers():
[],l,d.vertexOffset,n,v),z.drawElements(a,d.primitiveLength*c,z.UNSIGNED_SHORT,d.primitiveOffset*c*2)};var qf=function(a,c,d,e){var f=c.style.light,g=f.properties.get("position");g=[g.x,g.y,g.z];var h=b.create$1();"viewport"===f.properties.get("anchor")&&b.fromRotation(h,-c.transform.angle);b.transformMat3(g,g,h);c=f.properties.get("color");return{u_matrix:a,u_lightpos:g,u_lightintensity:f.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+d,u_opacity:e}},rf=function(a,c,
d,e){var f=a.transform;if("map"===e.paint.get("circle-pitch-alignment")){var g=O(d,1,f.zoom);var h=!0;g=[g,g]}else h=!1,g=f.pixelsToGLUnits;return{u_camera_to_center_distance:f.cameraToCenterDistance,u_scale_with_map:+("map"===e.paint.get("circle-pitch-scale")),u_matrix:a.translatePosMatrix(c.posMatrix,d,e.paint.get("circle-translate"),e.paint.get("circle-translate-anchor")),u_pitch_with_map:+h,u_device_pixel_ratio:b.browser.devicePixelRatio,u_extrude_scale:g}},ib=function(a,c){return{u_matrix:new b.UniformMatrix4f(a,
c.u_matrix),u_camera_to_center_distance:new b.Uniform1f(a,c.u_camera_to_center_distance),u_pixels_to_tile_units:new b.Uniform1f(a,c.u_pixels_to_tile_units),u_extrude_scale:new b.Uniform2f(a,c.u_extrude_scale),u_overscale_factor:new b.Uniform1f(a,c.u_overscale_factor)}},nd=function(b,a,c){var d=O(c,1,a.zoom),e=Math.pow(2,a.zoom-c.tileID.overscaledZ);c=c.tileID.overscaleFactor();return{u_matrix:b,u_camera_to_center_distance:a.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[a.pixelsToGLUnits[0]/
(d*e),a.pixelsToGLUnits[1]/(d*e)],u_overscale_factor:c}},Ve=function(b,a){return{u_matrix:b,u_color:a}},dg=function(b,a,c,d){return{u_matrix:b,u_extrude_scale:O(a,1,c),u_intensity:d}},eg=function(a,c,d,e){var f=b.create();b.ortho(f,0,a.width,a.height,0,0,1);a=a.context.gl;return{u_matrix:f,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:d,u_color_ramp:e,u_opacity:c.paint.get("heatmap-opacity")}},md=function(a,c){var d=a.dem.stride,e=b.create();return b.ortho(e,0,b.EXTENT,-b.EXTENT,0,
0,1),b.translate(e,e,[0,-b.EXTENT,0]),{u_matrix:e,u_image:1,u_dimension:[d,d],u_zoom:a.tileID.overscaledZ,u_maxzoom:c}},ce=function(a,c,d){var e=a.transform;return{u_matrix:ca(a,c,d),u_ratio:1/O(c,1,e.zoom),u_device_pixel_ratio:b.browser.devicePixelRatio,u_units_to_pixels:[1/e.pixelsToGLUnits[0],1/e.pixelsToGLUnits[1]]}},de=function(b,a,c,d,e,f,g,h,k,l){var r=e.transform;return{u_is_size_zoom_constant:+("constant"===b||"source"===b),u_is_size_feature_constant:+("constant"===b||"camera"===b),u_size_t:a?
a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:r.cameraToCenterDistance,u_pitch:r.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:r.width/r.height,u_fade_change:e.options.fadeDuration?e.symbolFadeChange:1,u_matrix:f,u_label_plane_matrix:g,u_coord_matrix:h,u_is_text:+k,u_pitch_with_map:+d,u_texsize:l,u_texture:0}},dd=function(a,c,d,e,f,g,h,k,l,r,t){var m=f.transform;return b.extend(de(a,c,d,e,f,g,h,k,l,r),{u_gamma_scale:e?Math.cos(m._pitch)*m.cameraToCenterDistance:1,u_device_pixel_ratio:b.browser.devicePixelRatio,
u_is_halo:+t})},fg=function(a,c,d,e,f,g){return b.extend(function(b,a,c,d){var e=c.imageManager.getPattern(b.from);b=c.imageManager.getPattern(b.to);var f=c.imageManager.getPixelSize(),g=Math.pow(2,d.tileID.overscaledZ),h=d.tileSize*Math.pow(2,c.transform.tileZoom)/g;g=h*(d.tileID.canonical.x+d.tileID.wrap*g);h*=d.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:e.tl,u_pattern_br_a:e.br,u_pattern_tl_b:b.tl,u_pattern_br_b:b.br,u_texsize:[f.width,f.height],u_mix:a.t,u_pattern_size_a:e.displaySize,
u_pattern_size_b:b.displaySize,u_scale_a:a.fromScale,u_scale_b:a.toScale,u_tile_units_to_pixels:1/O(d,1,c.transform.tileZoom),u_pixel_coord_upper:[g>>16,h>>16],u_pixel_coord_lower:[65535&g,65535&h]}}(e,g,d,f),{u_matrix:a,u_opacity:c})},qb={fillExtrusion:function(a,c){return{u_matrix:new b.UniformMatrix4f(a,c.u_matrix),u_lightpos:new b.Uniform3f(a,c.u_lightpos),u_lightintensity:new b.Uniform1f(a,c.u_lightintensity),u_lightcolor:new b.Uniform3f(a,c.u_lightcolor),u_vertical_gradient:new b.Uniform1f(a,
c.u_vertical_gradient),u_opacity:new b.Uniform1f(a,c.u_opacity)}},fillExtrusionPattern:function(a,c){return{u_matrix:new b.UniformMatrix4f(a,c.u_matrix),u_lightpos:new b.Uniform3f(a,c.u_lightpos),u_lightintensity:new b.Uniform1f(a,c.u_lightintensity),u_lightcolor:new b.Uniform3f(a,c.u_lightcolor),u_vertical_gradient:new b.Uniform1f(a,c.u_vertical_gradient),u_height_factor:new b.Uniform1f(a,c.u_height_factor),u_image:new b.Uniform1i(a,c.u_image),u_texsize:new b.Uniform2f(a,c.u_texsize),u_pixel_coord_upper:new b.Uniform2f(a,
c.u_pixel_coord_upper),u_pixel_coord_lower:new b.Uniform2f(a,c.u_pixel_coord_lower),u_scale:new b.Uniform4f(a,c.u_scale),u_fade:new b.Uniform1f(a,c.u_fade),u_opacity:new b.Uniform1f(a,c.u_opacity)}},fill:function(a,c){return{u_matrix:new b.UniformMatrix4f(a,c.u_matrix)}},fillPattern:function(a,c){return{u_matrix:new b.UniformMatrix4f(a,c.u_matrix),u_image:new b.Uniform1i(a,c.u_image),u_texsize:new b.Uniform2f(a,c.u_texsize),u_pixel_coord_upper:new b.Uniform2f(a,c.u_pixel_coord_upper),u_pixel_coord_lower:new b.Uniform2f(a,
c.u_pixel_coord_lower),u_scale:new b.Uniform4f(a,c.u_scale),u_fade:new b.Uniform1f(a,c.u_fade)}},fillOutline:function(a,c){return{u_matrix:new b.UniformMatrix4f(a,c.u_matrix),u_world:new b.Uniform2f(a,c.u_world)}},fillOutlinePattern:function(a,c){return{u_matrix:new b.UniformMatrix4f(a,c.u_matrix),u_world:new b.Uniform2f(a,c.u_world),u_image:new b.Uniform1i(a,c.u_image),u_texsize:new b.Uniform2f(a,c.u_texsize),u_pixel_coord_upper:new b.Uniform2f(a,c.u_pixel_coord_upper),u_pixel_coord_lower:new b.Uniform2f(a,
c.u_pixel_coord_lower),u_scale:new b.Uniform4f(a,c.u_scale),u_fade:new b.Uniform1f(a,c.u_fade)}},circle:function(a,c){return{u_camera_to_center_distance:new b.Uniform1f(a,c.u_camera_to_center_distance),u_scale_with_map:new b.Uniform1i(a,c.u_scale_with_map),u_pitch_with_map:new b.Uniform1i(a,c.u_pitch_with_map),u_extrude_scale:new b.Uniform2f(a,c.u_extrude_scale),u_device_pixel_ratio:new b.Uniform1f(a,c.u_device_pixel_ratio),u_matrix:new b.UniformMatrix4f(a,c.u_matrix)}},collisionBox:ib,collisionCircle:ib,
debug:function(a,c){return{u_color:new b.UniformColor(a,c.u_color),u_matrix:new b.UniformMatrix4f(a,c.u_matrix)}},clippingMask:function(a,c){return{u_matrix:new b.UniformMatrix4f(a,c.u_matrix)}},heatmap:function(a,c){return{u_extrude_scale:new b.Uniform1f(a,c.u_extrude_scale),u_intensity:new b.Uniform1f(a,c.u_intensity),u_matrix:new b.UniformMatrix4f(a,c.u_matrix)}},heatmapTexture:function(a,c){return{u_matrix:new b.UniformMatrix4f(a,c.u_matrix),u_world:new b.Uniform2f(a,c.u_world),u_image:new b.Uniform1i(a,
c.u_image),u_color_ramp:new b.Uniform1i(a,c.u_color_ramp),u_opacity:new b.Uniform1f(a,c.u_opacity)}},hillshade:function(a,c){return{u_matrix:new b.UniformMatrix4f(a,c.u_matrix),u_image:new b.Uniform1i(a,c.u_image),u_latrange:new b.Uniform2f(a,c.u_latrange),u_light:new b.Uniform2f(a,c.u_light),u_shadow:new b.UniformColor(a,c.u_shadow),u_highlight:new b.UniformColor(a,c.u_highlight),u_accent:new b.UniformColor(a,c.u_accent)}},hillshadePrepare:function(a,c){return{u_matrix:new b.UniformMatrix4f(a,c.u_matrix),
u_image:new b.Uniform1i(a,c.u_image),u_dimension:new b.Uniform2f(a,c.u_dimension),u_zoom:new b.Uniform1f(a,c.u_zoom),u_maxzoom:new b.Uniform1f(a,c.u_maxzoom)}},line:function(a,c){return{u_matrix:new b.UniformMatrix4f(a,c.u_matrix),u_ratio:new b.Uniform1f(a,c.u_ratio),u_device_pixel_ratio:new b.Uniform1f(a,c.u_device_pixel_ratio),u_units_to_pixels:new b.Uniform2f(a,c.u_units_to_pixels)}},lineGradient:function(a,c){return{u_matrix:new b.UniformMatrix4f(a,c.u_matrix),u_ratio:new b.Uniform1f(a,c.u_ratio),
u_device_pixel_ratio:new b.Uniform1f(a,c.u_device_pixel_ratio),u_units_to_pixels:new b.Uniform2f(a,c.u_units_to_pixels),u_image:new b.Uniform1i(a,c.u_image)}},linePattern:function(a,c){return{u_matrix:new b.UniformMatrix4f(a,c.u_matrix),u_texsize:new b.Uniform2f(a,c.u_texsize),u_ratio:new b.Uniform1f(a,c.u_ratio),u_device_pixel_ratio:new b.Uniform1f(a,c.u_device_pixel_ratio),u_image:new b.Uniform1i(a,c.u_image),u_units_to_pixels:new b.Uniform2f(a,c.u_units_to_pixels),u_scale:new b.Uniform4f(a,c.u_scale),
u_fade:new b.Uniform1f(a,c.u_fade)}},lineSDF:function(a,c){return{u_matrix:new b.UniformMatrix4f(a,c.u_matrix),u_ratio:new b.Uniform1f(a,c.u_ratio),u_device_pixel_ratio:new b.Uniform1f(a,c.u_device_pixel_ratio),u_units_to_pixels:new b.Uniform2f(a,c.u_units_to_pixels),u_patternscale_a:new b.Uniform2f(a,c.u_patternscale_a),u_patternscale_b:new b.Uniform2f(a,c.u_patternscale_b),u_sdfgamma:new b.Uniform1f(a,c.u_sdfgamma),u_image:new b.Uniform1i(a,c.u_image),u_tex_y_a:new b.Uniform1f(a,c.u_tex_y_a),u_tex_y_b:new b.Uniform1f(a,
c.u_tex_y_b),u_mix:new b.Uniform1f(a,c.u_mix)}},raster:function(a,c){return{u_matrix:new b.UniformMatrix4f(a,c.u_matrix),u_tl_parent:new b.Uniform2f(a,c.u_tl_parent),u_scale_parent:new b.Uniform1f(a,c.u_scale_parent),u_buffer_scale:new b.Uniform1f(a,c.u_buffer_scale),u_fade_t:new b.Uniform1f(a,c.u_fade_t),u_opacity:new b.Uniform1f(a,c.u_opacity),u_image0:new b.Uniform1i(a,c.u_image0),u_image1:new b.Uniform1i(a,c.u_image1),u_brightness_low:new b.Uniform1f(a,c.u_brightness_low),u_brightness_high:new b.Uniform1f(a,
c.u_brightness_high),u_saturation_factor:new b.Uniform1f(a,c.u_saturation_factor),u_contrast_factor:new b.Uniform1f(a,c.u_contrast_factor),u_spin_weights:new b.Uniform3f(a,c.u_spin_weights)}},symbolIcon:function(a,c){return{u_is_size_zoom_constant:new b.Uniform1i(a,c.u_is_size_zoom_constant),u_is_size_feature_constant:new b.Uniform1i(a,c.u_is_size_feature_constant),u_size_t:new b.Uniform1f(a,c.u_size_t),u_size:new b.Uniform1f(a,c.u_size),u_camera_to_center_distance:new b.Uniform1f(a,c.u_camera_to_center_distance),
u_pitch:new b.Uniform1f(a,c.u_pitch),u_rotate_symbol:new b.Uniform1i(a,c.u_rotate_symbol),u_aspect_ratio:new b.Uniform1f(a,c.u_aspect_ratio),u_fade_change:new b.Uniform1f(a,c.u_fade_change),u_matrix:new b.UniformMatrix4f(a,c.u_matrix),u_label_plane_matrix:new b.UniformMatrix4f(a,c.u_label_plane_matrix),u_coord_matrix:new b.UniformMatrix4f(a,c.u_coord_matrix),u_is_text:new b.Uniform1f(a,c.u_is_text),u_pitch_with_map:new b.Uniform1i(a,c.u_pitch_with_map),u_texsize:new b.Uniform2f(a,c.u_texsize),u_texture:new b.Uniform1i(a,
c.u_texture)}},symbolSDF:function(a,c){return{u_is_size_zoom_constant:new b.Uniform1i(a,c.u_is_size_zoom_constant),u_is_size_feature_constant:new b.Uniform1i(a,c.u_is_size_feature_constant),u_size_t:new b.Uniform1f(a,c.u_size_t),u_size:new b.Uniform1f(a,c.u_size),u_camera_to_center_distance:new b.Uniform1f(a,c.u_camera_to_center_distance),u_pitch:new b.Uniform1f(a,c.u_pitch),u_rotate_symbol:new b.Uniform1i(a,c.u_rotate_symbol),u_aspect_ratio:new b.Uniform1f(a,c.u_aspect_ratio),u_fade_change:new b.Uniform1f(a,
c.u_fade_change),u_matrix:new b.UniformMatrix4f(a,c.u_matrix),u_label_plane_matrix:new b.UniformMatrix4f(a,c.u_label_plane_matrix),u_coord_matrix:new b.UniformMatrix4f(a,c.u_coord_matrix),u_is_text:new b.Uniform1f(a,c.u_is_text),u_pitch_with_map:new b.Uniform1i(a,c.u_pitch_with_map),u_texsize:new b.Uniform2f(a,c.u_texsize),u_texture:new b.Uniform1i(a,c.u_texture),u_gamma_scale:new b.Uniform1f(a,c.u_gamma_scale),u_device_pixel_ratio:new b.Uniform1f(a,c.u_device_pixel_ratio),u_is_halo:new b.Uniform1f(a,
c.u_is_halo)}},background:function(a,c){return{u_matrix:new b.UniformMatrix4f(a,c.u_matrix),u_opacity:new b.Uniform1f(a,c.u_opacity),u_color:new b.UniformColor(a,c.u_color)}},backgroundPattern:function(a,c){return{u_matrix:new b.UniformMatrix4f(a,c.u_matrix),u_opacity:new b.Uniform1f(a,c.u_opacity),u_image:new b.Uniform1i(a,c.u_image),u_pattern_tl_a:new b.Uniform2f(a,c.u_pattern_tl_a),u_pattern_br_a:new b.Uniform2f(a,c.u_pattern_br_a),u_pattern_tl_b:new b.Uniform2f(a,c.u_pattern_tl_b),u_pattern_br_b:new b.Uniform2f(a,
c.u_pattern_br_b),u_texsize:new b.Uniform2f(a,c.u_texsize),u_mix:new b.Uniform1f(a,c.u_mix),u_pattern_size_a:new b.Uniform2f(a,c.u_pattern_size_a),u_pattern_size_b:new b.Uniform2f(a,c.u_pattern_size_b),u_scale_a:new b.Uniform1f(a,c.u_scale_a),u_scale_b:new b.Uniform1f(a,c.u_scale_b),u_pixel_coord_upper:new b.Uniform2f(a,c.u_pixel_coord_upper),u_pixel_coord_lower:new b.Uniform2f(a,c.u_pixel_coord_lower),u_tile_units_to_pixels:new b.Uniform1f(a,c.u_tile_units_to_pixels)}}},Hh=b.identity(new Float32Array(16)),
tf={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"\x26":[26,
[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],
".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,
12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,
4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"\x3c":[24,[20,18,4,9,20,0]],"\x3d":[26,[4,12,22,12,-1,-1,4,6,22,6]],"\x3e":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,
4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,
0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,
[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,
17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,
3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],
e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,
0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,
14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,
-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},ee={symbol:function(b,
a,c,d,e){if("translucent"===b.renderPass){var f=Fa.disabled,g=b.colorModeForRenderPass();0!==c.paint.get("icon-opacity").constantOr(1)&&fa(b,a,c,d,!1,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),c.layout.get("icon-rotation-alignment"),c.layout.get("icon-pitch-alignment"),c.layout.get("icon-keep-upright"),f,g,e);0!==c.paint.get("text-opacity").constantOr(1)&&fa(b,a,c,d,!0,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),c.layout.get("text-rotation-alignment"),
c.layout.get("text-pitch-alignment"),c.layout.get("text-keep-upright"),f,g,e);a.map.showCollisionBoxes&&(U(b,a,c,d,!1),U(b,a,c,d,!0))}},circle:function(a,c,d,e){if("translucent"===a.renderPass){var f=d.paint.get("circle-opacity"),g=d.paint.get("circle-stroke-width"),h=d.paint.get("circle-stroke-opacity"),k=void 0!==d.layout.get("circle-sort-key").constantOr(1);if(0!==f.constantOr(1)||0!==g.constantOr(1)&&0!==h.constantOr(1)){f=a.context;g=f.gl;h=a.depthModeForSublayer(0,Ta.ReadOnly);for(var l=Fa.disabled,
r=a.colorModeForRenderPass(),t=[],m=0;m<e.length;m++){var u=e[m],n=c.getTile(u),v=n.getBucket(d);if(v){var w=v.programConfigurations.get(d.id);u={programConfiguration:w,program:a.useProgram("circle",w),layoutVertexBuffer:v.layoutVertexBuffer,indexBuffer:v.indexBuffer,uniformValues:rf(a,u,n,d)};if(k)for(n=0,v=v.segments.get();n<v.length;n+=1)w=v[n],t.push({segments:new b.SegmentVector([w]),sortKey:w.sortKey,state:u});else t.push({segments:v.segments,sortKey:0,state:u})}}k&&t.sort(function(b,a){return b.sortKey-
a.sortKey});for(c=0;c<t.length;c+=1)e=t[c],k=e.state,k.program.draw(f,g.TRIANGLES,h,l,r,kb.disabled,k.uniformValues,d.id,k.layoutVertexBuffer,k.indexBuffer,e.segments,d.paint,a.transform.zoom,k.programConfiguration)}}},heatmap:function(a,c,d,e){if(0!==d.paint.get("heatmap-opacity"))if("offscreen"===a.renderPass){var f=a.context,g=f.gl,h=a.depthModeForSublayer(0,Ta.ReadOnly),k=Fa.disabled,l=new oc([g.ONE,g.ONE],b.Color.transparent,[!0,!0,!0,!0]);!function(b,a,c){var d=b.gl;b.activeTexture.set(d.TEXTURE1);
b.viewport.set([0,0,a.width/4,a.height/4]);var e=c.heatmapFbo;if(e)d.bindTexture(d.TEXTURE_2D,e.colorAttachment.get()),b.bindFramebuffer.set(e.framebuffer);else{var f=d.createTexture();d.bindTexture(d.TEXTURE_2D,f);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR);e=c.heatmapFbo=b.createFramebuffer(a.width/
4,a.height/4);(function ke(b,a,c,d){var e=b.gl;e.texImage2D(e.TEXTURE_2D,0,e.RGBA,a.width/4,a.height/4,0,e.RGBA,b.extTextureHalfFloat?b.extTextureHalfFloat.HALF_FLOAT_OES:e.UNSIGNED_BYTE,null);d.colorAttachment.set(c);b.extTextureHalfFloat&&e.checkFramebufferStatus(e.FRAMEBUFFER)!==e.FRAMEBUFFER_COMPLETE&&(b.extTextureHalfFloat=null,d.colorAttachment.setDirty(),ke(b,a,c,d))})(b,a,f,e)}}(f,a,d);f.clear({color:b.Color.transparent});for(var r=0;r<e.length;r++){var t=e[r];if(!c.hasRenderableParent(t)){var m=
c.getTile(t),u=m.getBucket(d);if(u){var n=u.programConfigurations.get(d.id);a.useProgram("heatmap",n).draw(f,g.TRIANGLES,h,k,l,kb.disabled,dg(t.posMatrix,m,a.transform.zoom,d.paint.get("heatmap-intensity")),d.id,u.layoutVertexBuffer,u.indexBuffer,u.segments,d.paint,a.transform.zoom,n)}}}f.viewport.set([0,0,a.width,a.height])}else"translucent"===a.renderPass&&(a.context.setColorMode(a.colorModeForRenderPass()),function(a,c){var d=a.context,e=d.gl,f=c.heatmapFbo;f&&(d.activeTexture.set(e.TEXTURE0),
e.bindTexture(e.TEXTURE_2D,f.colorAttachment.get()),d.activeTexture.set(e.TEXTURE1),(f=c.colorRampTexture)||(f=c.colorRampTexture=new b.Texture(d,c.colorRamp,e.RGBA)),f.bind(e.LINEAR,e.CLAMP_TO_EDGE),a.useProgram("heatmapTexture").draw(d,e.TRIANGLES,Ta.disabled,Fa.disabled,a.colorModeForRenderPass(),kb.disabled,eg(a,c,0,1),c.id,a.viewportBuffer,a.quadTriangleIndexBuffer,a.viewportSegments,c.paint,a.transform.zoom))}(a,d))},line:function(a,c,d,e){if("translucent"===a.renderPass){var f=d.paint.get("line-opacity"),
g=d.paint.get("line-width");if(0!==f.constantOr(1)&&0!==g.constantOr(1)){f=a.depthModeForSublayer(0,Ta.ReadOnly);g=a.colorModeForRenderPass();var h=d.paint.get("line-dasharray"),k=d.paint.get("line-pattern"),l=k.constantOr(1),r=d.paint.get("line-gradient"),t=d.getCrossfadeParameters(),m=h?"lineSDF":l?"linePattern":r?"lineGradient":"line",u=a.context,n=u.gl,v=!0;if(r){u.activeTexture.set(n.TEXTURE0);var w=d.gradientTexture;if(!d.gradient)return;w||(w=d.gradientTexture=new b.Texture(u,d.gradient,n.RGBA));
w.bind(n.LINEAR,n.CLAMP_TO_EDGE)}for(w=0;w<e.length;w+=1){var z=e[w],x=c.getTile(z);if(!l||x.patternsLoaded()){var A=x.getBucket(d);if(A){var y=A.programConfigurations.get(d.id),B=a.context.program.get(),p=a.useProgram(m,y);v=v||p.program!==B;var q=k.constantOr(null);q&&x.imageAtlas&&(B=x.imageAtlas.patternPositions[q.to],q=x.imageAtlas.patternPositions[q.from],B&&q&&y.setConstantPatternPositions(B,q));if(h){B=a;q=x;var C=d,D=h,I=t,E=B.lineAtlas,N=1/O(q,1,B.transform.tileZoom),H="round"===C.layout.get("line-cap"),
M=E.getDash(D.from,H);D=E.getDash(D.to,H);H=M.width*I.fromScale;var K=D.width*I.toScale;B=b.extend(ce(B,q,C),{u_patternscale_a:[N/H,-M.height/2],u_patternscale_b:[N/K,-D.height/2],u_sdfgamma:E.width/(256*Math.min(H,K)*b.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:M.y,u_tex_y_b:D.y,u_mix:I.t})}else l?(B=a,q=x,C=d,I=t,E=B.transform,N=1/O(q,1,E.tileZoom),B={u_matrix:ca(B,q,C),u_texsize:q.imageAtlasTexture.size,u_ratio:1/O(q,1,E.zoom),u_device_pixel_ratio:b.browser.devicePixelRatio,u_image:0,u_scale:[b.browser.devicePixelRatio,
N,I.fromScale,I.toScale],u_fade:I.t,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}):B=r?b.extend(ce(a,x,d),{u_image:0}):ce(a,x,d);h&&(v||a.lineAtlas.dirty)?(u.activeTexture.set(n.TEXTURE0),a.lineAtlas.bind(u)):l&&(u.activeTexture.set(n.TEXTURE0),x.imageAtlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE),y.updatePatternPaintBuffers(t));p.draw(u,n.TRIANGLES,f,a.stencilModeForClipping(z),g,kb.disabled,B,d.id,A.layoutVertexBuffer,A.indexBuffer,A.segments,d.paint,a.transform.zoom,y);v=!1}}}}}},
fill:function(a,c,d,e){var f=d.paint.get("fill-color"),g=d.paint.get("fill-opacity");if(0!==g.constantOr(1)){var h=a.colorModeForRenderPass(),k=d.paint.get("fill-pattern");f=a.opaquePassEnabledForLayer()&&!k.constantOr(1)&&1===f.constantOr(b.Color.transparent).a&&1===g.constantOr(0)?"opaque":"translucent";a.renderPass===f&&(f=a.depthModeForSublayer(1,"opaque"===a.renderPass?Ta.ReadWrite:Ta.ReadOnly),da(a,c,d,e,f,h,!1));"translucent"===a.renderPass&&d.paint.get("fill-antialias")&&(f=a.depthModeForSublayer(d.getPaintProperty("fill-outline-color")?
2:0,Ta.ReadOnly),da(a,c,d,e,f,h,!0))}},"fill-extrusion":function(b,a,c,d){var e=c.paint.get("fill-extrusion-opacity");if(0!==e&&"translucent"===b.renderPass){var f=new Ta(b.context.gl.LEQUAL,Ta.ReadWrite,b.depthRangeFor3D);1!==e||c.paint.get("fill-extrusion-pattern").constantOr(1)?(ma(b,a,c,d,f,Fa.disabled,oc.disabled),ma(b,a,c,d,f,b.stencilModeFor3D(),b.colorModeForRenderPass())):(e=b.colorModeForRenderPass(),ma(b,a,c,d,f,Fa.disabled,e))}},hillshade:function(a,c,d,e){if("offscreen"===a.renderPass||
"translucent"===a.renderPass){for(var f=a.context,g=c.getSource().maxzoom,h=a.depthModeForSublayer(0,Ta.ReadOnly),k=Fa.disabled,l=a.colorModeForRenderPass(),r=0;r<e.length;r+=1){var t=c.getTile(e[r]);if(t.needsHillshadePrepare&&"offscreen"===a.renderPass){var m=a,u=d,n=g,v=h,w=k,z=l,x=m.context,A=x.gl;if(t.dem&&t.dem.data){var y=t.dem.dim,B=t.dem.stride,p=t.dem.getPixels();(x.activeTexture.set(A.TEXTURE1),x.pixelStoreUnpackPremultiplyAlpha.set(!1),t.demTexture=t.demTexture||m.getTileTexture(B),t.demTexture)?
(B=t.demTexture,B.update(p,{premultiply:!1}),B.bind(A.NEAREST,A.CLAMP_TO_EDGE)):(t.demTexture=new b.Texture(x,p,A.RGBA,{premultiply:!1}),t.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE));x.activeTexture.set(A.TEXTURE0);p=t.fbo;p||(B=new b.Texture(x,{width:y,height:y,data:null},A.RGBA),B.bind(A.LINEAR,A.CLAMP_TO_EDGE),(p=t.fbo=x.createFramebuffer(y,y)).colorAttachment.set(B.texture));x.bindFramebuffer.set(p.framebuffer);x.viewport.set([0,0,y,y]);m.useProgram("hillshadePrepare").draw(x,A.TRIANGLES,v,w,
z,kb.disabled,md(t,n),u.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments);t.needsHillshadePrepare=!1}}else if("translucent"===a.renderPass&&(m=a,u=d,n=h,v=k,w=l,z=m.context,x=z.gl,y=t.fbo)){A=m.useProgram("hillshade");z.activeTexture.set(x.TEXTURE0);x.bindTexture(x.TEXTURE_2D,y.colorAttachment.get());var q=m;var C=t;y=u;p=y.paint.get("hillshade-shadow-color");B=y.paint.get("hillshade-highlight-color");var D=y.paint.get("hillshade-accent-color"),I=y.paint.get("hillshade-illumination-direction")*
(Math.PI/180);"viewport"===y.paint.get("hillshade-illumination-anchor")&&(I-=q.transform.angle);var E=!q.options.moving;q=q.transform.calculatePosMatrix(C.tileID.toUnwrapped(),E);E=C.tileID;C=Math.pow(2,E.canonical.z);E=E.canonical.y;C=[(new b.MercatorCoordinate(0,E/C)).toLngLat().lat,(new b.MercatorCoordinate(0,(E+1)/C)).toLngLat().lat];y={u_matrix:q,u_image:0,u_latrange:C,u_light:[y.paint.get("hillshade-exaggeration"),I],u_shadow:p,u_highlight:B,u_accent:D};t.maskedBoundsBuffer&&t.maskedIndexBuffer&&
t.segments?A.draw(z,x.TRIANGLES,n,v,w,kb.disabled,y,u.id,t.maskedBoundsBuffer,t.maskedIndexBuffer,t.segments):A.draw(z,x.TRIANGLES,n,v,w,kb.disabled,y,u.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}}f.viewport.set([0,0,a.width,a.height])}},raster:function(a,c,d,e){if("translucent"===a.renderPass&&0!==d.paint.get("raster-opacity"))for(var f=a.context,g=f.gl,h=c.getSource(),k=a.useProgram("raster"),l=Fa.disabled,r=a.colorModeForRenderPass(),t=e.length&&e[0].overscaledZ,
m=!a.options.moving,u=0;u<e.length;u+=1){var n=e[u],v=a.depthModeForSublayer(n.overscaledZ-t,1===d.paint.get("raster-opacity")?Ta.ReadWrite:Ta.ReadOnly,g.LESS),w=c.getTile(n),z=a.transform.calculatePosMatrix(n.toUnwrapped(),m);w.registerFadeDuration(d.paint.get("raster-fade-duration"));n=c.findLoadedParent(n,0);var x=w,A=n;var y=c;var B=a.transform,p=d.paint.get("raster-fade-duration");if(0<p){var q=b.browser.now(),C=(q-x.timeAdded)/p;p=A?(q-A.timeAdded)/p:-1;y=y.getSource();B=B.coveringZoomLevel({tileSize:y.tileSize,
roundZoom:y.roundZoom});B=(B=!A||Math.abs(A.tileID.overscaledZ-B)>Math.abs(x.tileID.overscaledZ-B))&&x.refreshedUponExpiration?1:b.clamp(B?C:1-p,0,1);y=(x.refreshedUponExpiration&&1<=C&&(x.refreshedUponExpiration=!1),A?{opacity:1,mix:1-B}:{opacity:B,mix:0})}else y={opacity:1,mix:0};B=C=void 0;x="nearest"===d.paint.get("raster-resampling")?g.NEAREST:g.LINEAR;f.activeTexture.set(g.TEXTURE0);w.texture.bind(x,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST);f.activeTexture.set(g.TEXTURE1);n?(n.texture.bind(x,
g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST),C=Math.pow(2,n.tileID.overscaledZ-w.tileID.overscaledZ),B=[w.tileID.canonical.x*C%1,w.tileID.canonical.y*C%1]):w.texture.bind(x,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST);x=p=void 0;A=d;n=B||[0,0];C=C||1;B=y.mix;y=y.opacity*A.paint.get("raster-opacity");q=A.paint.get("raster-brightness-min");var D=A.paint.get("raster-brightness-max"),I=(p=A.paint.get("raster-saturation"),0<p?1-1/(1.001-p):-p);p=(x=A.paint.get("raster-contrast"),0<x?1/(1-x):1+x);A=A.paint.get("raster-hue-rotate");
A*=Math.PI/180;x=Math.sin(A);A=Math.cos(A);z={u_matrix:z,u_tl_parent:n,u_scale_parent:C,u_buffer_scale:1,u_fade_t:B,u_opacity:y,u_image0:0,u_image1:1,u_brightness_low:q,u_brightness_high:D,u_saturation_factor:I,u_contrast_factor:p,u_spin_weights:[(2*A+1)/3,(-Math.sqrt(3)*x-A+1)/3,(Math.sqrt(3)*x-A+1)/3]};h instanceof ab?k.draw(f,g.TRIANGLES,v,l,r,kb.disabled,z,d.id,h.boundsBuffer,a.quadTriangleIndexBuffer,h.boundsSegments):w.maskedBoundsBuffer&&w.maskedIndexBuffer&&w.segments?k.draw(f,g.TRIANGLES,
v,l,r,kb.disabled,z,d.id,w.maskedBoundsBuffer,w.maskedIndexBuffer,w.segments,d.paint,a.transform.zoom):k.draw(f,g.TRIANGLES,v,l,r,kb.disabled,z,d.id,a.rasterBoundsBuffer,a.quadTriangleIndexBuffer,a.rasterBoundsSegments)}},background:function(b,a,c){a=c.paint.get("background-color");var d=c.paint.get("background-opacity");if(0!==d){var e=b.context,f=e.gl,g=b.transform,h=g.tileSize,k=c.paint.get("background-pattern");if(!b.isPatternMissing(k)){var l=!k&&1===a.a&&1===d&&b.opaquePassEnabledForLayer()?
"opaque":"translucent";if(b.renderPass===l){var r=Fa.disabled;l=b.depthModeForSublayer(0,"opaque"===l?Ta.ReadWrite:Ta.ReadOnly);var t=b.colorModeForRenderPass(),m=b.useProgram(k?"backgroundPattern":"background");g=g.coveringTiles({tileSize:h});k&&(e.activeTexture.set(f.TEXTURE0),b.imageManager.bind(b.context));for(var u=c.getCrossfadeParameters(),n=0;n<g.length;n+=1){var v=g[n],w=b.transform.calculatePosMatrix(v.toUnwrapped());v=k?fg(w,d,b,k,{tileID:v,tileSize:h},u):{u_matrix:w,u_opacity:d,u_color:a};
m.draw(e,f.TRIANGLES,l,r,t,kb.disabled,v,c.id,b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}}}}},debug:function(a,c,d){for(var e=0;e<d.length;e++){var f=void 0,g=void 0,h,k,l,r=a,t=c,m=d[e],u=r.context,n=u.gl,v=m.posMatrix,w=r.useProgram("debug"),z=Ta.disabled,x=Fa.disabled,A=r.colorModeForRenderPass();w.draw(u,n.LINE_STRIP,z,x,A,kb.disabled,Ve(v,b.Color.red),"$debug",r.debugBuffer,r.tileBorderIndexBuffer,r.debugSegments);var y=t.getTileByID(m.key).latestRawTileData,B=Math.floor((y&&
y.byteLength||0)/1024);t=t.getTile(m).tileSize;y=512/Math.min(t,512);var p=m.toString()+" "+B+"kb",q=50,C=200*y,D=5*y;D=D||1;B=[];var I=0;for(l=p.length;I<l;I++)if(h=tf[p[I]]){var E=null;var N=0;for(k=h[1].length;N<k;N+=2)-1===h[1][N]&&-1===h[1][N+1]?E=null:(g=q+h[1][N]*D,f=C-h[1][N+1]*D,E&&B.push(E.x,E.y,g,f),E={x:g,y:f});q+=h[0]*D}E=new b.StructArrayLayout2i4;g=new b.StructArrayLayout2ui4;for(f=0;f<B.length;f+=2)E.emplaceBack(B[f],B[f+1]),g.emplaceBack(f,f+1);f=u.createVertexBuffer(E,Pd.members);
g=u.createIndexBuffer(g);B=b.SegmentVector.simpleSegment(0,0,E.length/2,E.length/2);r=b.EXTENT/(Math.pow(2,r.transform.zoom-m.overscaledZ)*t*y);m=[];for(t=-1;1>=t;t++)for(y=-1;1>=y&&(0!==t||0!==y);y++)m.push([t,y]);for(t=0;t<m.length;t++)y=m[t],w.draw(u,n.LINES,z,x,A,kb.disabled,Ve(b.translate([],v,[r*y[0],r*y[1],0]),b.Color.white),"$debug",f,g,B);w.draw(u,n.LINES,z,x,A,kb.disabled,Ve(v,b.Color.black),"$debug",f,g,B)}},custom:function(b,a,c){a=b.context;c=c.implementation;if("offscreen"===b.renderPass){var d=
c.prerender;d&&(b.setCustomLayerDefaults(),a.setColorMode(b.colorModeForRenderPass()),d.call(c,a.gl,b.transform.customLayerMatrix()),a.setDirty(),b.setBaseState())}else"translucent"===b.renderPass&&(b.setCustomLayerDefaults(),a.setColorMode(b.colorModeForRenderPass()),a.setStencilMode(Fa.disabled),d="3d"===c.renderingMode?new Ta(b.context.gl.LEQUAL,Ta.ReadWrite,b.depthRangeFor3D):b.depthModeForSublayer(0,Ta.ReadOnly),a.setDepthMode(d),c.render(a.gl,b.transform.customLayerMatrix()),a.setDirty(),b.setBaseState(),
a.bindFramebuffer.set(null))}},lc=function(a,c){this.context=new ic(a);this.transform=c;this._tileTextures={};this.setup();this.numSublayers=jd.maxUnderzooming+jd.maxOverzooming+1;this.depthEpsilon=1/Math.pow(2,16);this.depthRboNeedsClear=!0;this.emptyProgramConfiguration=new b.ProgramConfiguration;this.crossTileSymbolIndex=new Sc};lc.prototype.resize=function(a,c){var d=this.context.gl;if(this.width=a*b.browser.devicePixelRatio,this.height=c*b.browser.devicePixelRatio,this.context.viewport.set([0,
0,this.width,this.height]),this.style)for(a=0,c=this.style._order;a<c.length;a+=1)this.style._layers[c[a]].resize();this.depthRbo&&(d.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)};lc.prototype.setup=function(){var a=this.context,c=new b.StructArrayLayout2i4;c.emplaceBack(0,0);c.emplaceBack(b.EXTENT,0);c.emplaceBack(0,b.EXTENT);c.emplaceBack(b.EXTENT,b.EXTENT);this.tileExtentBuffer=a.createVertexBuffer(c,Pd.members);this.tileExtentSegments=b.SegmentVector.simpleSegment(0,0,4,2);c=new b.StructArrayLayout2i4;
c.emplaceBack(0,0);c.emplaceBack(b.EXTENT,0);c.emplaceBack(0,b.EXTENT);c.emplaceBack(b.EXTENT,b.EXTENT);this.debugBuffer=a.createVertexBuffer(c,Pd.members);this.debugSegments=b.SegmentVector.simpleSegment(0,0,4,5);c=new b.StructArrayLayout4i8;c.emplaceBack(0,0,0,0);c.emplaceBack(b.EXTENT,0,b.EXTENT,0);c.emplaceBack(0,b.EXTENT,0,b.EXTENT);c.emplaceBack(b.EXTENT,b.EXTENT,b.EXTENT,b.EXTENT);this.rasterBoundsBuffer=a.createVertexBuffer(c,b.rasterBoundsAttributes.members);this.rasterBoundsSegments=b.SegmentVector.simpleSegment(0,
0,4,2);c=new b.StructArrayLayout2i4;c.emplaceBack(0,0);c.emplaceBack(1,0);c.emplaceBack(0,1);c.emplaceBack(1,1);this.viewportBuffer=a.createVertexBuffer(c,Pd.members);this.viewportSegments=b.SegmentVector.simpleSegment(0,0,4,2);c=new b.StructArrayLayout1ui2;c.emplaceBack(0);c.emplaceBack(1);c.emplaceBack(3);c.emplaceBack(2);c.emplaceBack(0);this.tileBorderIndexBuffer=a.createIndexBuffer(c);c=new b.StructArrayLayout3ui6;c.emplaceBack(0,1,2);c.emplaceBack(2,1,3);this.quadTriangleIndexBuffer=a.createIndexBuffer(c);
a=this.context.gl;this.stencilClearMode=new Fa({func:a.ALWAYS,mask:0},0,255,a.ZERO,a.ZERO,a.ZERO)};lc.prototype.clearStencil=function(){var a=this.context,c=a.gl;this.nextStencilID=1;this.currentStencilSource=void 0;var d=b.create();b.ortho(d,0,this.width,this.height,0,0,1);b.scale(d,d,[c.drawingBufferWidth,c.drawingBufferHeight,0]);this.useProgram("clippingMask").draw(a,c.TRIANGLES,Ta.disabled,this.stencilClearMode,oc.disabled,kb.disabled,{u_matrix:d},"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,
this.viewportSegments)};lc.prototype._renderTileClippingMasks=function(b,a){if(this.currentStencilSource!==b.source&&b.isTileClipped()&&a&&a.length){this.currentStencilSource=b.source;b=this.context;var c=b.gl;256<this.nextStencilID+a.length&&this.clearStencil();b.setColorMode(oc.disabled);b.setDepthMode(Ta.disabled);var d=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var e=0;e<a.length;e+=1){var f=a[e],g=this._tileClippingMaskIDs[f.key]=this.nextStencilID++;d.draw(b,c.TRIANGLES,
Ta.disabled,new Fa({func:c.ALWAYS,mask:0},g,255,c.KEEP,c.KEEP,c.REPLACE),oc.disabled,kb.disabled,{u_matrix:f.posMatrix},"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}};lc.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0;256<this.nextStencilID+1&&this.clearStencil();var b=this.nextStencilID++,a=this.context.gl;return new Fa({func:a.NOTEQUAL,mask:255},b,255,a.KEEP,a.KEEP,a.REPLACE)};lc.prototype.stencilModeForClipping=function(b){var a=
this.context.gl;return new Fa({func:a.EQUAL,mask:255},this._tileClippingMaskIDs[b.key],0,a.KEEP,a.KEEP,a.REPLACE)};lc.prototype.colorModeForRenderPass=function(){var a=this.context.gl;return this._showOverdrawInspector?new oc([a.CONSTANT_COLOR,a.ONE],new b.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?oc.unblended:oc.alphaBlended};lc.prototype.depthModeForSublayer=function(b,a,c){if(!this.opaquePassEnabledForLayer())return Ta.disabled;b=1-((1+this.currentLayer)*this.numSublayers+
b)*this.depthEpsilon;return new Ta(c||this.context.gl.LEQUAL,a,[b,b])};lc.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff};lc.prototype.render=function(a,c){this.style=a;this.options=c;this.lineAtlas=a.lineAtlas;this.imageManager=a.imageManager;this.glyphManager=a.glyphManager;this.symbolFadeChange=a.placement.symbolFadeChange(b.browser.now());this.imageManager.beginFrame();var d=this.style._order,e=this.style.sourceCaches;for(g in e){var f=e[g];f.used&&
f.prepare(this.context)}var g={};f={};var h={};for(r in e){var k=e[r];g[r]=k.getVisibleCoordinates();f[r]=g[r].slice().reverse();h[r]=k.getVisibleCoordinates(!0).reverse()}for(var l in e){var r=e[l];k=r.getSource();if("raster"===k.type||"raster-dem"===k.type){k=[];for(var t=0,m=g[l];t<m.length;t+=1)k.push(r.getTile(m[t]));Z(k,this.context)}}this.opaquePassCutoff=1/0;for(l=0;l<d.length;l++)if(this.style._layers[d[l]].is3D()){this.opaquePassCutoff=l;break}this.renderPass="offscreen";this.depthRboNeedsClear=
!0;for(l=0;l<d.length;l+=1)r=this.style._layers[d[l]],r.hasOffscreenPass()&&!r.isHidden(this.transform.zoom)&&(k=f[r.source],("custom"===r.type||k.length)&&this.renderLayer(this,e[r.source],r,k));this.context.bindFramebuffer.set(null);this.context.clear({color:c.showOverdrawInspector?b.Color.black:b.Color.transparent,depth:1});this.clearStencil();this._showOverdrawInspector=c.showOverdrawInspector;this.depthRangeFor3D=[0,1-(a._order.length+2)*this.numSublayers*this.depthEpsilon];this.renderPass="opaque";
for(this.currentLayer=d.length-1;0<=this.currentLayer;this.currentLayer--)a=this.style._layers[d[this.currentLayer]],c=e[a.source],l=g[a.source],this._renderTileClippingMasks(a,l),this.renderLayer(this,c,a,l);this.renderPass="translucent";for(this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++)a=this.style._layers[d[this.currentLayer]],c=e[a.source],l=("symbol"===a.type?h:f)[a.source],this._renderTileClippingMasks(a,g[a.source]),this.renderLayer(this,c,a,l);if(this.options.showTileBoundaries)for(var u in e){ee.debug(this,
e[u],g[u]);break}this.context.setDefault()};lc.prototype.setupOffscreenDepthRenderbuffer=function(){var b=this.context;this.depthRbo||(this.depthRbo=b.createRenderbuffer(b.gl.DEPTH_COMPONENT16,this.width,this.height))};lc.prototype.renderLayer=function(b,a,c,d){c.isHidden(this.transform.zoom)||("background"===c.type||"custom"===c.type||d.length)&&(this.id=c.id,ee[c.type](b,a,c,d,this.style.placement.variableOffsets))};lc.prototype.translatePosMatrix=function(a,c,d,e,f){if(!d[0]&&!d[1])return a;var g=
f?"map"===e?this.transform.angle:0:"viewport"===e?-this.transform.angle:0;g&&(e=Math.sin(g),g=Math.cos(g),d=[d[0]*g-d[1]*e,d[0]*e+d[1]*g]);c=[f?d[0]:O(c,d[0],this.transform.zoom),f?d[1]:O(c,d[1],this.transform.zoom),0];d=new Float32Array(16);return b.translate(d,a,c),d};lc.prototype.saveTileTexture=function(b){var a=this._tileTextures[b.size[0]];a?a.push(b):this._tileTextures[b.size[0]]=[b]};lc.prototype.getTileTexture=function(b){return(b=this._tileTextures[b])&&0<b.length?b.pop():null};lc.prototype.isPatternMissing=
function(b){if(!b)return!1;var a=this.imageManager.getPattern(b.from);b=this.imageManager.getPattern(b.to);return!a||!b};lc.prototype.useProgram=function(b,a){void 0===a&&(a=this.emptyProgramConfiguration);this.cache=this.cache||{};var c=""+b+(a.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[c]||(this.cache[c]=new Lf(this.context,Ue[b],a,qb[b],this._showOverdrawInspector)),this.cache[c]};lc.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO();this.context.cullFace.setDefault();
this.context.activeTexture.setDefault();this.context.pixelStoreUnpack.setDefault();this.context.pixelStoreUnpackPremultiplyAlpha.setDefault();this.context.pixelStoreUnpackFlipY.setDefault()};lc.prototype.setBaseState=function(){var b=this.context.gl;this.context.cullFace.set(!1);this.context.viewport.set([0,0,this.width,this.height]);this.context.blendEquation.set(b.FUNC_ADD)};var Ab=function(a,c,d){this.tileSize=512;this.maxValidLatitude=85.051129;this._renderWorldCopies=void 0===d||d;this._minZoom=
a||0;this._maxZoom=c||22;this.setMaxBounds();this.height=this.width=0;this._center=new b.LngLat(0,0);this.angle=this.zoom=0;this._fov=.6435011087932844;this._pitch=0;this._unmodified=!0;this._posMatrixCache={};this._alignedPosMatrixCache={}},hc={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},
center:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Ab.prototype.clone=function(){var b=new Ab(this._minZoom,this._maxZoom,this._renderWorldCopies);return b.tileSize=this.tileSize,b.latRange=this.latRange,b.width=this.width,b.height=this.height,b._center=this._center,b.zoom=this.zoom,b.angle=this.angle,b._fov=this._fov,b._pitch=this._pitch,b._unmodified=this._unmodified,b._calcMatrices(),b};hc.minZoom.get=function(){return this._minZoom};hc.minZoom.set=function(b){this._minZoom!==
b&&(this._minZoom=b,this.zoom=Math.max(this.zoom,b))};hc.maxZoom.get=function(){return this._maxZoom};hc.maxZoom.set=function(b){this._maxZoom!==b&&(this._maxZoom=b,this.zoom=Math.min(this.zoom,b))};hc.renderWorldCopies.get=function(){return this._renderWorldCopies};hc.renderWorldCopies.set=function(b){void 0===b?b=!0:null===b&&(b=!1);this._renderWorldCopies=b};hc.worldSize.get=function(){return this.tileSize*this.scale};hc.centerPoint.get=function(){return this.size._div(2)};hc.size.get=function(){return new b.Point(this.width,
this.height)};hc.bearing.get=function(){return-this.angle/Math.PI*180};hc.bearing.set=function(a){a=-b.wrap(a,-180,180)*Math.PI/180;this.angle!==a&&(this._unmodified=!1,this.angle=a,this._calcMatrices(),this.rotationMatrix=b.create$2(),b.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))};hc.pitch.get=function(){return this._pitch/Math.PI*180};hc.pitch.set=function(a){a=b.clamp(a,0,60)/180*Math.PI;this._pitch!==a&&(this._unmodified=!1,this._pitch=a,this._calcMatrices())};hc.fov.get=function(){return this._fov/
Math.PI*180};hc.fov.set=function(b){b=Math.max(.01,Math.min(60,b));this._fov!==b&&(this._unmodified=!1,this._fov=b/180*Math.PI,this._calcMatrices())};hc.zoom.get=function(){return this._zoom};hc.zoom.set=function(b){b=Math.min(Math.max(b,this.minZoom),this.maxZoom);this._zoom!==b&&(this._unmodified=!1,this._zoom=b,this.scale=this.zoomScale(b),this.tileZoom=Math.floor(b),this.zoomFraction=b-this.tileZoom,this._constrain(),this._calcMatrices())};hc.center.get=function(){return this._center};hc.center.set=
function(b){b.lat===this._center.lat&&b.lng===this._center.lng||(this._unmodified=!1,this._center=b,this._constrain(),this._calcMatrices())};Ab.prototype.coveringZoomLevel=function(b){return(b.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/b.tileSize))};Ab.prototype.getVisibleUnwrappedCoordinates=function(a){var c=[new b.UnwrappedTileID(0,a)];if(this._renderWorldCopies){var d=this.pointCoordinate(new b.Point(0,0)),e=this.pointCoordinate(new b.Point(this.width,0)),f=this.pointCoordinate(new b.Point(this.width,
this.height)),g=this.pointCoordinate(new b.Point(0,this.height)),h=Math.floor(Math.max(d.x,e.x,f.x,g.x));for(d=Math.floor(Math.min(d.x,e.x,f.x,g.x))-1;d<=h+1;d++)0!==d&&c.push(new b.UnwrappedTileID(d,a))}return c};Ab.prototype.coveringTiles=function(a){var c=this.coveringZoomLevel(a),d=c;if(void 0!==a.minzoom&&c<a.minzoom)return[];void 0!==a.maxzoom&&c>a.maxzoom&&(c=a.maxzoom);var e=b.MercatorCoordinate.fromLngLat(this.center),f=Math.pow(2,c),g=new b.Point(f*e.x-.5,f*e.y-.5);return function(a,c,d,
e){function f(c,f,k){var l;if(0<=k&&k<=g)for(;c<f;c++){var r=Math.floor(c/g);var t=(c%g+g)%g;0!==r&&!0!==e||(l=new b.OverscaledTileID(d,r,a,t,k),h[l.key]=l)}}void 0===e&&(e=!0);var g=1<<a,h={};c=c.map(function(a){return(new b.Point(a.x,a.y))._mult(g)});return ha(c[0],c[1],c[2],0,g,f),ha(c[2],c[3],c[0],0,g,f),Object.keys(h).map(function(b){return h[b]})}(c,[this.pointCoordinate(new b.Point(0,0)),this.pointCoordinate(new b.Point(this.width,0)),this.pointCoordinate(new b.Point(this.width,this.height)),
this.pointCoordinate(new b.Point(0,this.height))],a.reparseOverscaled?d:c,this._renderWorldCopies).sort(function(b,a){return g.dist(b.canonical)-g.dist(a.canonical)})};Ab.prototype.resize=function(b,a){this.width=b;this.height=a;this.pixelsToGLUnits=[2/b,-2/a];this._constrain();this._calcMatrices()};hc.unmodified.get=function(){return this._unmodified};Ab.prototype.zoomScale=function(b){return Math.pow(2,b)};Ab.prototype.scaleZoom=function(b){return Math.log(b)/Math.LN2};Ab.prototype.project=function(a){var c=
b.clamp(a.lat,-this.maxValidLatitude,this.maxValidLatitude);return new b.Point(b.mercatorXfromLng(a.lng)*this.worldSize,b.mercatorYfromLat(c)*this.worldSize)};Ab.prototype.unproject=function(a){return(new b.MercatorCoordinate(a.x/this.worldSize,a.y/this.worldSize)).toLngLat()};hc.point.get=function(){return this.project(this.center)};Ab.prototype.setLocationAtPoint=function(a,c){c=this.pointCoordinate(c);var d=this.pointCoordinate(this.centerPoint);a=this.locationCoordinate(a);a=new b.MercatorCoordinate(a.x-
(c.x-d.x),a.y-(c.y-d.y));this.center=this.coordinateLocation(a);this._renderWorldCopies&&(this.center=this.center.wrap())};Ab.prototype.locationPoint=function(b){return this.coordinatePoint(this.locationCoordinate(b))};Ab.prototype.pointLocation=function(b){return this.coordinateLocation(this.pointCoordinate(b))};Ab.prototype.locationCoordinate=function(a){return b.MercatorCoordinate.fromLngLat(a)};Ab.prototype.coordinateLocation=function(b){return b.toLngLat()};Ab.prototype.pointCoordinate=function(a){var c=
[a.x,a.y,0,1];a=[a.x,a.y,1,1];b.transformMat4(c,c,this.pixelMatrixInverse);b.transformMat4(a,a,this.pixelMatrixInverse);var d=c[3],e=a[3],f=c[1]/d,g=a[1]/e,h=c[2]/d,k=a[2]/e;h=h===k?0:(0-h)/(k-h);return new b.MercatorCoordinate(b.number(c[0]/d,a[0]/e,h)/this.worldSize,b.number(f,g,h)/this.worldSize)};Ab.prototype.coordinatePoint=function(a){a=[a.x*this.worldSize,a.y*this.worldSize,0,1];return b.transformMat4(a,a,this.pixelMatrix),new b.Point(a[0]/a[3],a[1]/a[3])};Ab.prototype.getBounds=function(){return(new b.LngLatBounds).extend(this.pointLocation(new b.Point(0,
0))).extend(this.pointLocation(new b.Point(this.width,0))).extend(this.pointLocation(new b.Point(this.width,this.height))).extend(this.pointLocation(new b.Point(0,this.height)))};Ab.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new b.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null};Ab.prototype.setMaxBounds=function(b){b?(this.lngRange=[b.getWest(),b.getEast()],this.latRange=[b.getSouth(),
b.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])};Ab.prototype.calculatePosMatrix=function(a,c){void 0===c&&(c=!1);var d=a.key,e=c?this._alignedPosMatrixCache:this._posMatrixCache;if(e[d])return e[d];var f=a.canonical,g=this.worldSize/this.zoomScale(f.z);a=f.x+Math.pow(2,f.z)*a.wrap;var h=b.identity(new Float64Array(16));return b.translate(h,h,[a*g,f.y*g,0]),b.scale(h,h,[g/b.EXTENT,g/b.EXTENT,1]),b.multiply(h,c?this.alignedProjMatrix:
this.projMatrix,h),e[d]=new Float32Array(h),e[d]};Ab.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()};Ab.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var a,c,d=-90,e=90,f=-180,g=180,h=this.size,k=this._unmodified;if(this.latRange){var l=this.latRange;d=b.mercatorYfromLat(l[1])*this.worldSize;var r=(e=b.mercatorYfromLat(l[0])*this.worldSize)-d<h.y?h.y/(e-d):0}if(this.lngRange){l=this.lngRange;f=b.mercatorXfromLng(l[0])*
this.worldSize;var t=(g=b.mercatorXfromLng(l[1])*this.worldSize)-f<h.x?h.x/(g-f):0}l=this.point;var m=Math.max(t||0,r||0);if(m)return this.center=this.unproject(new b.Point(t?(g+f)/2:l.x,r?(e+d)/2:l.y)),this.zoom+=this.scaleZoom(m),this._unmodified=k,void(this._constraining=!1);this.latRange&&(r=l.y,t=h.y/2,r-t<d&&(c=d+t),r+t>e&&(c=e-t));this.lngRange&&(d=l.x,h=h.x/2,d-h<f&&(a=f+h),d+h>g&&(a=g-h));void 0===a&&void 0===c||(this.center=this.unproject(new b.Point(void 0!==a?a:l.x,void 0!==c?c:l.y)));
this._unmodified=k;this._constraining=!1}};Ab.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var a=this._fov/2,c=this.point,d=c.x;c=c.y;var e=1.01*(Math.sin(a)*this.cameraToCenterDistance/Math.sin(Math.PI-(Math.PI/2+this._pitch)-a)*Math.cos(Math.PI/2-this._pitch)+this.cameraToCenterDistance),f=this.height/50;a=new Float64Array(16);b.perspective(a,this._fov,this.width/this.height,f,e);b.scale(a,a,[1,-1,1]);b.translate(a,a,[0,0,-this.cameraToCenterDistance]);
b.rotateX(a,a,this._pitch);b.rotateZ(a,a,this.angle);b.translate(a,a,[-d,-c,0]);this.mercatorMatrix=b.scale([],a,[this.worldSize,this.worldSize,this.worldSize]);b.scale(a,a,[1,1,b.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]);this.projMatrix=a;e=this.width%2/2;f=this.height%2/2;var g=Math.cos(this.angle),h=Math.sin(this.angle);d=d-Math.round(d)+g*e+h*f;c=c-Math.round(c)+g*f+h*e;e=new Float64Array(a);if(b.translate(e,e,[.5<d?d-1:d,.5<c?c-1:c,0]),this.alignedProjMatrix=e,a=b.create(),
b.scale(a,a,[this.width/2,-this.height/2,1]),b.translate(a,a,[1,-1,0]),this.labelPlaneMatrix=a,a=b.create(),b.scale(a,a,[1,-1,1]),b.translate(a,a,[-1,-1,0]),b.scale(a,a,[2/this.width,2/this.height,1]),this.glCoordMatrix=a,this.pixelMatrix=b.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(a=b.invert(new Float64Array(16),this.pixelMatrix)))throw Error("failed to invert matrix");this.pixelMatrixInverse=a;this._posMatrixCache={};this._alignedPosMatrixCache={}}};Ab.prototype.maxPitchScaleFactor=
function(){if(!this.pixelMatrixInverse)return 1;var a=this.pointCoordinate(new b.Point(0,0));a=[a.x*this.worldSize,a.y*this.worldSize,0,1];return b.transformMat4(a,a,this.pixelMatrix)[3]/this.cameraToCenterDistance};Ab.prototype.getCameraPoint=function(){return this.centerPoint.add(new b.Point(0,Math.tan(this._pitch)*(this.cameraToCenterDistance||1)))};Ab.prototype.getCameraQueryGeometry=function(a){var c=this.getCameraPoint();if(1===a.length)return[a[0],c];var d=c.x,e=c.y,f=c.x;c=c.y;for(var g=0;g<
a.length;g+=1){var h=a[g];d=Math.min(d,h.x);e=Math.min(e,h.y);f=Math.max(f,h.x);c=Math.max(c,h.y)}return[new b.Point(d,e),new b.Point(f,e),new b.Point(f,c),new b.Point(d,c),new b.Point(d,e)]};Object.defineProperties(Ab.prototype,hc);var pd=function(){var a,c,d,e;b.bindAll(["_onHashChange","_updateHash"],this);this._updateHash=(a=this._updateHashUnthrottled.bind(this),c=!1,d=null,e=function(){d=null;c&&(a(),d=setTimeout(e,300),c=!1)},function(){return c=!0,d||e(),d})};pd.prototype.addTo=function(a){return this._map=
a,b.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this};pd.prototype.remove=function(){return b.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this};pd.prototype.getHashString=function(b){var a=this._map.getCenter(),c=Math.round(100*this._map.getZoom())/100,d=Math.pow(10,Math.ceil((c*Math.LN2+Math.log(512/360/.5))/Math.LN10)),e=Math.round(a.lng*
d)/d;a=Math.round(a.lat*d)/d;d=this._map.getBearing();var f=this._map.getPitch(),g="";return g+=b?"#/"+e+"/"+a+"/"+c:"#"+c+"/"+a+"/"+e,(d||f)&&(g+="/"+Math.round(10*d)/10),f&&(g+="/"+Math.round(f)),g};pd.prototype._onHashChange=function(){var a=b.window.location.hash.replace("#","").split("/");return 3<=a.length&&(this._map.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:+(a[3]||0),pitch:+(a[4]||0)}),!0)};pd.prototype._updateHashUnthrottled=function(){var a=this.getHashString();try{b.window.history.replaceState(b.window.history.state,
"",a)}catch(xb){}};var qd=function(a){function c(c,d,e,f){void 0===f&&(f={});var g=W.mousePos(d.getCanvasContainer(),e),h=d.unproject(g);a.call(this,c,b.extend({point:g,lngLat:h,originalEvent:e},f));this._defaultPrevented=!1;this.target=d}a&&(c.__proto__=a);c.prototype=Object.create(a&&a.prototype);c.prototype.constructor=c;var d={defaultPrevented:{configurable:!0}};return c.prototype.preventDefault=function(){this._defaultPrevented=!0},d.defaultPrevented.get=function(){return this._defaultPrevented},
Object.defineProperties(c.prototype,d),c}(b.Event),fe=function(a){function c(c,d,e){var f=W.touchPos(d.getCanvasContainer(),e),g=f.map(function(b){return d.unproject(b)}),h=f.reduce(function(b,a,c,d){return b.add(a.div(d.length))},new b.Point(0,0)),k=d.unproject(h);a.call(this,c,{points:f,point:h,lngLats:g,lngLat:k,originalEvent:e});this._defaultPrevented=!1}a&&(c.__proto__=a);c.prototype=Object.create(a&&a.prototype);c.prototype.constructor=c;var d={defaultPrevented:{configurable:!0}};return c.prototype.preventDefault=
function(){this._defaultPrevented=!0},d.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(c.prototype,d),c}(b.Event),Fg=function(b){function a(a,c,d){b.call(this,a,{originalEvent:d});this._defaultPrevented=!1}b&&(a.__proto__=b);a.prototype=Object.create(b&&b.prototype);a.prototype.constructor=a;var c={defaultPrevented:{configurable:!0}};return a.prototype.preventDefault=function(){this._defaultPrevented=!0},c.defaultPrevented.get=function(){return this._defaultPrevented},
Object.defineProperties(a.prototype,c),a}(b.Event),ed=function(a){this._map=a;this._el=a.getCanvasContainer();this._delta=0;this._defaultZoomRate=.01;this._wheelZoomRate=1/450;b.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};ed.prototype.setZoomRate=function(b){this._defaultZoomRate=b};ed.prototype.setWheelZoomRate=function(b){this._wheelZoomRate=b};ed.prototype.isEnabled=function(){return!!this._enabled};ed.prototype.isActive=function(){return!!this._active};ed.prototype.isZooming=
function(){return!!this._zooming};ed.prototype.enable=function(b){this.isEnabled()||(this._enabled=!0,this._aroundCenter=b&&"center"===b.around)};ed.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};ed.prototype.onWheel=function(a){if(this.isEnabled()){var c=a.deltaMode===b.window.WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY,d=b.browser.now(),e=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d;0!==c&&0==c%4.000244140625?this._type="wheel":0!==c&&4>Math.abs(c)?this._type=
"trackpad":400<e?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=200>Math.abs(e*c)?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue));a.shiftKey&&c&&(c/=4);this._type&&(this._lastWheelEvent=a,this._delta-=c,this.isActive()||this._start(a));a.preventDefault()}};ed.prototype._onTimeout=function(b){this._type="wheel";this._delta-=this._lastValue;this.isActive()||this._start(b)};ed.prototype._start=
function(a){this._delta&&(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0,this._map.fire(new b.Event("movestart",{originalEvent:a})),this._map.fire(new b.Event("zoomstart",{originalEvent:a}))),this._finishTimeout&&clearTimeout(this._finishTimeout),a=W.mousePos(this._el,a),this._around=b.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(a)),this._aroundPoint=this._map.transform.locationPoint(this._around),
this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)))};ed.prototype._onScrollFrame=function(){var a=this;if(this._frameId=null,this.isActive()){var c=this._map.transform;if(0!==this._delta){var d=2/(1+Math.exp(-Math.abs(this._delta*("wheel"===this._type&&4.000244140625<Math.abs(this._delta)?this._wheelZoomRate:this._defaultZoomRate))));0>this._delta&&0!==d&&(d=1/d);var e="number"==typeof this._targetZoom?c.zoomScale(this._targetZoom):c.scale;this._targetZoom=Math.min(c.maxZoom,
Math.max(c.minZoom,c.scaleZoom(e*d)));"wheel"===this._type&&(this._startZoom=c.zoom,this._easing=this._smoothOutEasing(200));this._delta=0}d="number"==typeof this._targetZoom?this._targetZoom:c.zoom;e=this._startZoom;var f=this._easing,g=!1;if("wheel"===this._type&&e&&f){var h=Math.min((b.browser.now()-this._lastWheelEventTime)/200,1);f=f(h);c.zoom=b.number(e,d,f);1>h?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):g=!0}else c.zoom=d,g=!0;c.setLocationAtPoint(this._around,
this._aroundPoint);this._map.fire(new b.Event("move",{originalEvent:this._lastWheelEvent}));this._map.fire(new b.Event("zoom",{originalEvent:this._lastWheelEvent}));g&&(this._active=!1,this._finishTimeout=setTimeout(function(){a._zooming=!1;a._map.fire(new b.Event("zoomend",{originalEvent:a._lastWheelEvent}));a._map.fire(new b.Event("moveend",{originalEvent:a._lastWheelEvent}));delete a._targetZoom},200))}};ed.prototype._smoothOutEasing=function(a){var c=b.ease;if(this._prevEase){c=this._prevEase;
var d=(b.browser.now()-c.start)/c.duration;c=c.easing(d+.01)-c.easing(d);c=.27/Math.sqrt(c*c+1E-4)*.01;c=b.bezier(c,Math.sqrt(.0729-c*c),.25,1)}return this._prevEase={start:b.browser.now(),duration:a,easing:c},c};var jc=function(a,c){this._map=a;this._el=a.getCanvasContainer();this._container=a.getContainer();this._clickTolerance=c.clickTolerance||1;b.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};jc.prototype.isEnabled=function(){return!!this._enabled};jc.prototype.isActive=function(){return!!this._active};
jc.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)};jc.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};jc.prototype.onMouseDown=function(a){this.isEnabled()&&a.shiftKey&&0===a.button&&(b.window.document.addEventListener("mousemove",this._onMouseMove,!1),b.window.document.addEventListener("keydown",this._onKeyDown,!1),b.window.document.addEventListener("mouseup",this._onMouseUp,!1),W.disableDrag(),this._startPos=this._lastPos=W.mousePos(this._el,a),this._active=
!0)};jc.prototype._onMouseMove=function(b){var a=W.mousePos(this._el,b);if(!(this._lastPos.equals(a)||!this._box&&a.dist(this._startPos)<this._clickTolerance)){var c=this._startPos;this._lastPos=a;this._box||(this._box=W.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",b));b=Math.min(c.x,a.x);var d=Math.max(c.x,a.x),e=Math.min(c.y,a.y);a=Math.max(c.y,a.y);W.setTransform(this._box,"translate("+b+"px,"+e+"px)");this._box.style.width=
d-b+"px";this._box.style.height=a-e+"px"}};jc.prototype._onMouseUp=function(a){if(0===a.button){var c=this._startPos,d=W.mousePos(this._el,a);this._finish();W.suppressClick();c.x===d.x&&c.y===d.y?this._fireEvent("boxzoomcancel",a):this._map.fitScreenCoordinates(c,d,this._map.getBearing(),{linear:!0}).fire(new b.Event("boxzoomend",{originalEvent:a}))}};jc.prototype._onKeyDown=function(b){27===b.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",b))};jc.prototype._finish=function(){this._active=
!1;b.window.document.removeEventListener("mousemove",this._onMouseMove,!1);b.window.document.removeEventListener("keydown",this._onKeyDown,!1);b.window.document.removeEventListener("mouseup",this._onMouseUp,!1);this._container.classList.remove("mapboxgl-crosshair");this._box&&(W.remove(this._box),this._box=null);W.enableDrag();delete this._startPos;delete this._lastPos};jc.prototype._fireEvent=function(a,c){return this._map.fire(new b.Event(a,{originalEvent:c}))};var Jf=b.bezier(0,0,.25,1),Ac=function(a,
c){this._map=a;this._el=c.element||a.getCanvasContainer();this._state="disabled";this._button=c.button||"right";this._bearingSnap=c.bearingSnap||0;this._pitchWithRotate=!1!==c.pitchWithRotate;b.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};Ac.prototype.isEnabled=function(){return"disabled"!==this._state};Ac.prototype.isActive=function(){return"active"===this._state};Ac.prototype.enable=function(){this.isEnabled()||(this._state="enabled")};Ac.prototype.disable=
function(){if(this.isEnabled())switch(this._state){case "active":this._state="disabled";this._unbind();this._deactivate();this._fireEvent("rotateend");this._pitchWithRotate&&this._fireEvent("pitchend");this._fireEvent("moveend");break;case "pending":this._state="disabled";this._unbind();break;default:this._state="disabled"}};Ac.prototype.onMouseDown=function(a){if("enabled"===this._state){var c="touchstart"===a.type;if(c)this._startTime=Date.now();else if("right"===this._button){if(this._eventButton=
W.mouseButton(a),this._eventButton!==(a.ctrlKey?0:2))return}else{if(a.ctrlKey||0!==W.mouseButton(a))return;this._eventButton=0}W.disableDrag();c?(b.window.document.addEventListener("touchmove",this._onMouseMove,{capture:!0}),b.window.document.addEventListener("touchend",this._onMouseUp)):(b.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),b.window.document.addEventListener("mouseup",this._onMouseUp));b.window.addEventListener("blur",this._onBlur);this._state="pending";
this._inertia=[[b.browser.now(),this._map.getBearing()]];this._startPos=this._prevPos=this._lastPos=W.mousePos(this._el,a);this._center=this._map.transform.centerPoint;a.preventDefault()}};Ac.prototype._onMouseMove=function(b){var a=W.mousePos(this._el,b);this._lastPos.equals(a)||(this._lastMoveEvent=b,this._lastPos=a,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",b),this._fireEvent("movestart",b),this._pitchWithRotate&&this._fireEvent("pitchstart",b)),this._frameId||
(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))};Ac.prototype._onDragFrame=function(){this._frameId=null;var a=this._lastMoveEvent;if(a){var c=this._map.transform,d=this._prevPos,e=this._lastPos,f=c.bearing-.8*(d.x-e.x);d=c.pitch- -.5*(d.y-e.y);e=this._inertia;var g=e[e.length-1];this._drainInertiaBuffer();e.push([b.browser.now(),this._map._normalizeBearing(f,g[1])]);c.bearing=f;this._pitchWithRotate&&(this._fireEvent("pitch",a),c.pitch=d);this._fireEvent("rotate",a);this._fireEvent("move",
a);delete this._lastMoveEvent;this._prevPos=this._lastPos}};Ac.prototype._onMouseUp=function(b){if("touchend"===b.type&&this._startPos===this._lastPos&&300>Date.now()-this._startTime&&this._el.click(),W.mouseButton(b)===this._eventButton)switch(this._state){case "active":this._state="enabled";W.suppressClick();this._unbind();this._deactivate();this._inertialRotate(b);break;case "pending":this._state="enabled",this._unbind()}};Ac.prototype._onBlur=function(b){switch(this._state){case "active":this._state=
"enabled";this._unbind();this._deactivate();this._fireEvent("rotateend",b);this._pitchWithRotate&&this._fireEvent("pitchend",b);this._fireEvent("moveend",b);break;case "pending":this._state="enabled",this._unbind()}};Ac.prototype._unbind=function(){b.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0});b.window.document.removeEventListener("mouseup",this._onMouseUp);b.window.document.removeEventListener("touchmove",this._onMouseMove,{capture:!0});b.window.document.removeEventListener("touchend",
this._onMouseUp);b.window.removeEventListener("blur",this._onBlur);W.enableDrag()};Ac.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null);delete this._lastMoveEvent;delete this._startPos;delete this._prevPos;delete this._lastPos};Ac.prototype._inertialRotate=function(b){var a=this;this._fireEvent("rotateend",b);this._drainInertiaBuffer();var c=this._map,d=c.getBearing(),e=this._inertia,f=function(){Math.abs(d)<a._bearingSnap?c.resetNorth({noMoveStart:!0},
{originalEvent:b}):a._fireEvent("moveend",b);a._pitchWithRotate&&a._fireEvent("pitchend",b)};if(2>e.length)f();else{var g=e[0],h=e[e.length-1];e=c._normalizeBearing(d,e[e.length-2][1]);var k=h[1]-g[1],l=0>k?-1:1;g=(h[0]-g[0])/1E3;0!==k&&0!==g?(f=Math.abs(.25/g*k),180<f&&(f=180),g=f/180,e+=g/2*f*l,Math.abs(c._normalizeBearing(e,0))<this._bearingSnap&&(e=c._normalizeBearing(0,e)),c.rotateTo(e,{duration:1E3*g,easing:Jf,noMoveStart:!0},{originalEvent:b})):f()}};Ac.prototype._fireEvent=function(a,c){return this._map.fire(new b.Event(a,
c?{originalEvent:c}:{}))};Ac.prototype._drainInertiaBuffer=function(){for(var a=this._inertia,c=b.browser.now();0<a.length&&160<c-a[0][0];)a.shift()};var lh=b.bezier(0,0,.3,1),dc=function(a,c){this._map=a;this._el=a.getCanvasContainer();this._state="disabled";this._clickTolerance=c.clickTolerance||1;b.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};dc.prototype.isEnabled=function(){return"disabled"!==this._state};dc.prototype.isActive=function(){return"active"===this._state};
dc.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")};dc.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case "active":this._state="disabled";this._unbind();this._deactivate();this._fireEvent("dragend");this._fireEvent("moveend");break;case "pending":this._state="disabled";this._unbind();break;default:this._state="disabled"}};dc.prototype.onMouseDown=function(a){"enabled"===
this._state&&(a.ctrlKey||0!==W.mouseButton(a)||(W.addEventListener(b.window.document,"mousemove",this._onMove,{capture:!0}),W.addEventListener(b.window.document,"mouseup",this._onMouseUp),this._start(a)))};dc.prototype.onTouchStart=function(a){"enabled"===this._state&&(1<a.touches.length||(W.addEventListener(b.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),W.addEventListener(b.window.document,"touchend",this._onTouchEnd),this._start(a)))};dc.prototype._start=function(a){b.window.addEventListener("blur",
this._onBlur);this._state="pending";this._startPos=this._mouseDownPos=this._prevPos=this._lastPos=W.mousePos(this._el,a);this._inertia=[[b.browser.now(),this._startPos]]};dc.prototype._onMove=function(a){a.preventDefault();var c=W.mousePos(this._el,a);this._lastPos.equals(c)||"pending"===this._state&&c.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=a,this._lastPos=c,this._drainInertiaBuffer(),this._inertia.push([b.browser.now(),this._lastPos]),"pending"===this._state&&(this._state=
"active",this._fireEvent("dragstart",a),this._fireEvent("movestart",a)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))};dc.prototype._onDragFrame=function(){this._frameId=null;var b=this._lastMoveEvent;if(b){var a=this._map.transform;a.setLocationAtPoint(a.pointLocation(this._prevPos),this._lastPos);this._fireEvent("drag",b);this._fireEvent("move",b);this._prevPos=this._lastPos;delete this._lastMoveEvent}};dc.prototype._onMouseUp=function(b){if(0===W.mouseButton(b))switch(this._state){case "active":this._state=
"enabled";W.suppressClick();this._unbind();this._deactivate();this._inertialPan(b);break;case "pending":this._state="enabled",this._unbind()}};dc.prototype._onTouchEnd=function(b){switch(this._state){case "active":this._state="enabled";this._unbind();this._deactivate();this._inertialPan(b);break;case "pending":this._state="enabled",this._unbind()}};dc.prototype._onBlur=function(b){switch(this._state){case "active":this._state="enabled";this._unbind();this._deactivate();this._fireEvent("dragend",b);
this._fireEvent("moveend",b);break;case "pending":this._state="enabled",this._unbind()}};dc.prototype._unbind=function(){W.removeEventListener(b.window.document,"touchmove",this._onMove,{capture:!0,passive:!1});W.removeEventListener(b.window.document,"touchend",this._onTouchEnd);W.removeEventListener(b.window.document,"mousemove",this._onMove,{capture:!0});W.removeEventListener(b.window.document,"mouseup",this._onMouseUp);W.removeEventListener(b.window,"blur",this._onBlur)};dc.prototype._deactivate=
function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null);delete this._lastMoveEvent;delete this._startPos;delete this._prevPos;delete this._mouseDownPos;delete this._lastPos};dc.prototype._inertialPan=function(b){this._fireEvent("dragend",b);this._drainInertiaBuffer();var a=this._inertia;if(2>a.length)this._fireEvent("moveend",b);else{var c=a[a.length-1];a=a[0];var d=c[1].sub(a[1]),e=(c[0]-a[0])/1E3;0===e||c[1].equals(a[1])?this._fireEvent("moveend",b):(c=d.mult(.3/
e),a=c.mag(),1400<a&&(a=1400,c._unit()._mult(a)),a/=750,c=c.mult(-a/2),this._map.panBy(c,{duration:1E3*a,easing:lh,noMoveStart:!0},{originalEvent:b}))}};dc.prototype._fireEvent=function(a,c){return this._map.fire(new b.Event(a,c?{originalEvent:c}:{}))};dc.prototype._drainInertiaBuffer=function(){for(var a=this._inertia,c=b.browser.now();0<a.length&&160<c-a[0][0];)a.shift()};var gg=function(a){this._map=a;this._el=a.getCanvasContainer();b.bindAll(["_onKeyDown"],this)};gg.prototype.isEnabled=function(){return!!this._enabled};
gg.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)};gg.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)};gg.prototype._onKeyDown=function(b){if(!(b.altKey||b.ctrlKey||b.metaKey)){var a=0,c=0,d=0,e=0,f=0;switch(b.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:b.shiftKey?c=-1:(b.preventDefault(),e=-1);break;
case 39:b.shiftKey?c=1:(b.preventDefault(),e=1);break;case 38:b.shiftKey?d=1:(b.preventDefault(),f=-1);break;case 40:b.shiftKey?d=-1:(f=1,b.preventDefault());break;default:return}var g=this._map,h=g.getZoom();a={duration:300,delayEndEvents:500,easing:ja,zoom:a?Math.round(h)+a*(b.shiftKey?2:1):h,bearing:g.getBearing()+15*c,pitch:g.getPitch()+10*d,offset:[100*-e,100*-f],center:g.getCenter()};g.easeTo(a,{originalEvent:b})}};var ge=function(a){this._map=a;b.bindAll(["_onDblClick","_onZoomEnd"],this)};
ge.prototype.isEnabled=function(){return!!this._enabled};ge.prototype.isActive=function(){return!!this._active};ge.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)};ge.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};ge.prototype.onTouchStart=function(b){var a=this;if(this.isEnabled()&&!(1<b.points.length))if(this._tapped){var c=b.points[0],d=this._tappedPoint;if(d&&30>=d.dist(c)){b.originalEvent.preventDefault();var e=function(){a._tapped&&a._zoom(b);a._map.off("touchcancel",
f);a._resetTapped()},f=function(){a._map.off("touchend",e);a._resetTapped()};this._map.once("touchend",e);this._map.once("touchcancel",f)}else this._resetTapped()}else this._tappedPoint=b.points[0],this._tapped=setTimeout(function(){a._tapped=null;a._tappedPoint=null},300)};ge.prototype._resetTapped=function(){clearTimeout(this._tapped);this._tappedPoint=this._tapped=null};ge.prototype.onDblClick=function(b){this.isEnabled()&&(b.originalEvent.preventDefault(),this._zoom(b))};ge.prototype._zoom=function(b){this._active=
!0;this._map.on("zoomend",this._onZoomEnd);this._map.zoomTo(this._map.getZoom()+(b.originalEvent.shiftKey?-1:1),{around:b.lngLat},b)};ge.prototype._onZoomEnd=function(){this._active=!1;this._map.off("zoomend",this._onZoomEnd)};var Ii=b.bezier(0,0,.15,1),he=function(a){this._map=a;this._el=a.getCanvasContainer();b.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};he.prototype.isEnabled=function(){return!!this._enabled};he.prototype.enable=function(b){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),
this._enabled=!0,this._aroundCenter=!!b&&"center"===b.around)};he.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)};he.prototype.disableRotation=function(){this._rotationDisabled=!0};he.prototype.enableRotation=function(){this._rotationDisabled=!1};he.prototype.onStart=function(a){if(this.isEnabled()&&2===a.touches.length){var c=W.mousePos(this._el,a.touches[0]);a=W.mousePos(this._el,a.touches[1]);var d=c.add(a).div(2);this._startVec=
c.sub(a);this._startAround=this._map.transform.pointLocation(d);this._gestureIntent=void 0;this._inertia=[];W.addEventListener(b.window.document,"touchmove",this._onMove,{passive:!1});W.addEventListener(b.window.document,"touchend",this._onEnd)}};he.prototype._getTouchEventData=function(b){var a=W.mousePos(this._el,b.touches[0]);b=W.mousePos(this._el,b.touches[1]);var c=a.sub(b);return{vec:c,center:a.add(b).div(2),scale:c.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*c.angleWith(this._startVec)/
Math.PI}};he.prototype._onMove=function(a){if(2===a.touches.length){var c=this._getTouchEventData(a),d=c.vec,e=c.scale;c=c.bearing;this._gestureIntent||(e=this._rotationDisabled&&1!==e||.15<Math.abs(1-e),10<Math.abs(c)?this._gestureIntent="rotate":e&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new b.Event(this._gestureIntent+"start",{originalEvent:a})),this._map.fire(new b.Event("movestart",{originalEvent:a})),this._startVec=d));this._lastTouchEvent=a;this._frameId||(this._frameId=
this._map._requestRenderFrame(this._onTouchFrame));a.preventDefault()}};he.prototype._onTouchFrame=function(){this._frameId=null;var a=this._gestureIntent;if(a){var c=this._map.transform;this._startScale||(this._startScale=c.scale,this._startBearing=c.bearing);var d=this._getTouchEventData(this._lastTouchEvent),e=d.center,f=d.bearing;d=d.scale;var g=c.pointLocation(e);g=c.locationPoint(g);"rotate"===a&&(c.bearing=this._startBearing+f);c.zoom=c.scaleZoom(this._startScale*d);c.setLocationAtPoint(this._startAround,
g);this._map.fire(new b.Event(a,{originalEvent:this._lastTouchEvent}));this._map.fire(new b.Event("move",{originalEvent:this._lastTouchEvent}));this._drainInertiaBuffer();this._inertia.push([b.browser.now(),d,e])}};he.prototype._onEnd=function(a){W.removeEventListener(b.window.document,"touchmove",this._onMove,{passive:!1});W.removeEventListener(b.window.document,"touchend",this._onEnd);var c=this._gestureIntent,d=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=
null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,c){this._map.fire(new b.Event(c+"end",{originalEvent:a}));this._drainInertiaBuffer();var e=this._inertia;c=this._map;if(2>e.length)c.snapToNorth({},{originalEvent:a});else{var f=e[e.length-1],g=e[0];e=c.transform.scaleZoom(d*f[1]);d=c.transform.scaleZoom(d*g[1]);var h=e-d;g=(f[0]-g[0])/1E3;f=f[2];0!==g&&e!==d?(h=.15*h/g,2.5<Math.abs(h)&&(h=0<h?2.5:-2.5),d=1E3*Math.abs(h/(12*.15)),e+=h*d/
2E3,0>e&&(e=0),c.easeTo({zoom:e,duration:d,easing:Ii,around:this._aroundCenter?c.getCenter():c.unproject(f),noMoveStart:!0},{originalEvent:a})):c.snapToNorth({},{originalEvent:a})}}};he.prototype._drainInertiaBuffer=function(){for(var a=this._inertia,c=b.browser.now();2<a.length&&160<c-a[0][0];)a.shift()};var Kh={scrollZoom:ed,boxZoom:jc,dragRotate:Ac,dragPan:dc,keyboard:gg,doubleClickZoom:ge,touchZoomRotate:he},uf=function(a){function c(c,d){a.call(this);this._zooming=this._moving=!1;this.transform=
c;this._bearingSnap=d.bearingSnap;b.bindAll(["_renderFrameCallback"],this)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getCenter=function(){return new b.LngLat(this.transform.center.lng,this.transform.center.lat)},c.prototype.setCenter=function(b,a){return this.jumpTo({center:b},a)},c.prototype.panBy=function(a,c,d){return a=b.Point.convert(a).mult(-1),this.panTo(this.transform.center,b.extend({offset:a},c),d)},c.prototype.panTo=function(a,
c,d){return this.easeTo(b.extend({center:a},c),d)},c.prototype.getZoom=function(){return this.transform.zoom},c.prototype.setZoom=function(b,a){return this.jumpTo({zoom:b},a),this},c.prototype.zoomTo=function(a,c,d){return this.easeTo(b.extend({zoom:a},c),d)},c.prototype.zoomIn=function(b,a){return this.zoomTo(this.getZoom()+1,b,a),this},c.prototype.zoomOut=function(b,a){return this.zoomTo(this.getZoom()-1,b,a),this},c.prototype.getBearing=function(){return this.transform.bearing},c.prototype.setBearing=
function(b,a){return this.jumpTo({bearing:b},a),this},c.prototype.rotateTo=function(a,c,d){return this.easeTo(b.extend({bearing:a},c),d)},c.prototype.resetNorth=function(a,c){return this.rotateTo(0,b.extend({duration:1E3},a),c),this},c.prototype.resetNorthPitch=function(a,c){return this.easeTo(b.extend({bearing:0,pitch:0,duration:1E3},a),c),this},c.prototype.snapToNorth=function(b,a){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(b,a):this},c.prototype.getPitch=function(){return this.transform.pitch},
c.prototype.setPitch=function(b,a){return this.jumpTo({pitch:b},a),this},c.prototype.cameraForBounds=function(a,c){return a=b.LngLatBounds.convert(a),this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),0,c)},c.prototype._cameraForBoxAndBearing=function(a,c,d,e){if("number"==typeof(e=b.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding){var f=e.padding;e.padding={top:f,bottom:f,right:f,left:f}}if(b.deepEqual(Object.keys(e.padding).sort(function(b,
a){return b<a?-1:b>a?1:0}),["bottom","left","right","top"])){f=this.transform;a=f.project(b.LngLat.convert(a));c=f.project(b.LngLat.convert(c));var g=a.rotate(-d*Math.PI/180),h=c.rotate(-d*Math.PI/180),k=new b.Point(Math.max(g.x,h.x),Math.max(g.y,h.y));g=new b.Point(Math.min(g.x,h.x),Math.min(g.y,h.y));g=k.sub(g);k=(f.width-e.padding.left-e.padding.right)/g.x;g=(f.height-e.padding.top-e.padding.bottom)/g.y;if(!(0>g||0>k))return k=Math.min(f.scaleZoom(f.scale*Math.min(k,g)),e.maxZoom),g=b.Point.convert(e.offset),
e=(new b.Point(g.x+(e.padding.left-e.padding.right)/2,g.y+(e.padding.top-e.padding.bottom)/2)).mult(f.scale/f.zoomScale(k)),{center:f.unproject(a.add(c).div(2).sub(e)),zoom:k,bearing:d};b.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else b.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},c.prototype.fitBounds=function(b,a,c){return this._fitInternal(this.cameraForBounds(b,a),a,c)},c.prototype.fitScreenCoordinates=
function(a,c,d,e,f){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(b.Point.convert(a)),this.transform.pointLocation(b.Point.convert(c)),d,e),e,f)},c.prototype._fitInternal=function(a,c,d){return a?(c=b.extend(a,c)).linear?this.easeTo(c,d):this.flyTo(c,d):this},c.prototype.jumpTo=function(a,c){this.stop();var d=this.transform,e=!1,f=!1,g=!1;return"zoom"in a&&d.zoom!==+a.zoom&&(e=!0,d.zoom=+a.zoom),void 0!==a.center&&(d.center=b.LngLat.convert(a.center)),"bearing"in
a&&d.bearing!==+a.bearing&&(f=!0,d.bearing=+a.bearing),"pitch"in a&&d.pitch!==+a.pitch&&(g=!0,d.pitch=+a.pitch),this.fire(new b.Event("movestart",c)).fire(new b.Event("move",c)),e&&this.fire(new b.Event("zoomstart",c)).fire(new b.Event("zoom",c)).fire(new b.Event("zoomend",c)),f&&this.fire(new b.Event("rotatestart",c)).fire(new b.Event("rotate",c)).fire(new b.Event("rotateend",c)),g&&this.fire(new b.Event("pitchstart",c)).fire(new b.Event("pitch",c)).fire(new b.Event("pitchend",c)),this.fire(new b.Event("moveend",
c))},c.prototype.easeTo=function(a,c){var d=this;this.stop();(!1===(a=b.extend({offset:[0,0],duration:500,easing:b.ease},a)).animate||b.browser.prefersReducedMotion)&&(a.duration=0);var e=this.transform,f=this.getZoom(),g=this.getBearing(),h=this.getPitch(),k="zoom"in a?+a.zoom:f,l="bearing"in a?this._normalizeBearing(a.bearing,g):g,r="pitch"in a?+a.pitch:h,t=e.centerPoint.add(b.Point.convert(a.offset)),m=e.pointLocation(t),u=b.LngLat.convert(a.center||m);this._normalizeCenter(u);var n,v,w=e.project(m),
z=e.project(u).sub(w),x=e.zoomScale(k-f);return a.around&&(n=b.LngLat.convert(a.around),v=e.locationPoint(n)),this._zooming=k!==f,this._rotating=g!==l,this._pitching=r!==h,this._prepareEase(c,a.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(a){if(d._zooming&&(e.zoom=b.number(f,k,a)),d._rotating&&(e.bearing=b.number(g,l,a)),d._pitching&&(e.pitch=b.number(h,r,a)),n)e.setLocationAtPoint(n,v);else{var m=e.zoomScale(e.zoom-f);a=e.unproject(w.add(z.mult(a*Math.pow(k>f?Math.min(2,
x):Math.max(.5,x),1-a))).mult(m));e.setLocationAtPoint(e.renderWorldCopies?a.wrap():a,t)}d._fireMoveEvents(c)},function(){a.delayEndEvents?d._easeEndTimeoutID=setTimeout(function(){return d._afterEase(c)},a.delayEndEvents):d._afterEase(c)},a),this},c.prototype._prepareEase=function(a,c){this._moving=!0;c||this.fire(new b.Event("movestart",a));this._zooming&&this.fire(new b.Event("zoomstart",a));this._rotating&&this.fire(new b.Event("rotatestart",a));this._pitching&&this.fire(new b.Event("pitchstart",
a))},c.prototype._fireMoveEvents=function(a){this.fire(new b.Event("move",a));this._zooming&&this.fire(new b.Event("zoom",a));this._rotating&&this.fire(new b.Event("rotate",a));this._pitching&&this.fire(new b.Event("pitch",a))},c.prototype._afterEase=function(a){var c=this._zooming,d=this._rotating,e=this._pitching;this._pitching=this._rotating=this._zooming=this._moving=!1;c&&this.fire(new b.Event("zoomend",a));d&&this.fire(new b.Event("rotateend",a));e&&this.fire(new b.Event("pitchend",a));this.fire(new b.Event("moveend",
a))},c.prototype.flyTo=function(a,c){function d(b){b=(B*B-y*y+(b?-1:1)*q*q*p*p)/(2*(b?B:y)*q*p);return Math.log(Math.sqrt(b*b+1)-b)}function e(b){return(Math.exp(b)+Math.exp(-b))/2}var f=this;if(b.browser.prefersReducedMotion)return a=b.pick(a,["center","zoom","bearing","pitch","around"]),this.jumpTo(a,c);this.stop();a=b.extend({offset:[0,0],speed:1.2,curve:1.42,easing:b.ease},a);var g=this.transform,h=this.getZoom(),k=this.getBearing(),l=this.getPitch(),r="zoom"in a?b.clamp(+a.zoom,g.minZoom,g.maxZoom):
h,t="bearing"in a?this._normalizeBearing(a.bearing,k):k,m="pitch"in a?+a.pitch:l,u=g.zoomScale(r-h),n=g.centerPoint.add(b.Point.convert(a.offset)),v=g.pointLocation(n),w=b.LngLat.convert(a.center||v);this._normalizeCenter(w);var z=g.project(v),x=g.project(w).sub(z),A=a.curve,y=Math.max(g.width,g.height),B=y/u,p=x.mag();"minZoom"in a&&(u=b.clamp(Math.min(a.minZoom,h,r),g.minZoom,g.maxZoom),u=y/g.zoomScale(u-h),A=Math.sqrt(u/p*2));var q=A*A,C=d(0),D=function(b){return e(C)/e(C+A*b)},I=function(b){var a=
e(C);b=c=C+A*b;return y*((a*((Math.exp(b)-Math.exp(-b))/2/e(c))-(Math.exp(C)-Math.exp(-C))/2)/q)/p;var c},E=(d(1)-C)/A;if(1E-6>Math.abs(p)||!isFinite(E)){if(1E-6>Math.abs(y-B))return this.easeTo(a,c);var N=B<y?-1:1;E=Math.abs(Math.log(B/y))/A;I=function(){return 0};D=function(b){return Math.exp(N*A*b)}}a.duration="duration"in a?+a.duration:1E3*E/("screenSpeed"in a?+a.screenSpeed/A:+a.speed);return a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=k!==t,this._pitching=
m!==l,this._prepareEase(c,!1),this._ease(function(a){var d=a*E,e=1/D(d);g.zoom=1===a?r:h+g.scaleZoom(e);f._rotating&&(g.bearing=b.number(k,t,a));f._pitching&&(g.pitch=b.number(l,m,a));a=1===a?w:g.unproject(z.add(x.mult(I(d))).mult(e));g.setLocationAtPoint(g.renderWorldCopies?a.wrap():a,n);f._fireMoveEvents(c)},function(){return f._afterEase(c)},a),this},c.prototype.isEasing=function(){return!!this._easeFrameId},c.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),
delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var b=this._onEaseEnd;delete this._onEaseEnd;b.call(this)}return this},c.prototype._ease=function(a,c,d){!1===d.animate||0===d.duration?(a(1),c()):(this._easeStart=b.browser.now(),this._easeOptions=d,this._onEaseFrame=a,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},c.prototype._renderFrameCallback=function(){var a=Math.min((b.browser.now()-this._easeStart)/this._easeOptions.duration,1);
this._onEaseFrame(this._easeOptions.easing(a));1>a?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},c.prototype._normalizeBearing=function(a,c){a=b.wrap(a,-180,180);var d=Math.abs(a-c);return Math.abs(a-360-c)<d&&(a-=360),Math.abs(a+360-c)<d&&(a+=360),a},c.prototype._normalizeCenter=function(b){var a=this.transform;a.renderWorldCopies&&!a.lngRange&&(a=b.lng-a.center.lng,b.lng+=180<a?-360:-180>a?360:0)},c}(b.Evented),ie=function(a){void 0===a&&(a={});this.options=
a;b.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};ie.prototype.getDefaultPosition=function(){return"bottom-right"};ie.prototype.onAdd=function(b){var a=this.options&&this.options.compact;return this._map=b,this._container=W.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=W.create("div","mapboxgl-ctrl-attrib-inner",this._container),a&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",
this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===a&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container};ie.prototype.onRemove=function(){W.remove(this._container);this._map.off("styledata",this._updateData);this._map.off("sourcedata",this._updateData);this._map.off("moveend",this._updateEditLink);this._map.off("resize",this._updateCompact);this._map=void 0};ie.prototype._updateEditLink=function(){var a=
this._editLink;a||(a=this._editLink=this._container.querySelector(".mapbox-improve-map"));var c=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||b.config.ACCESS_TOKEN}];if(a){var d=c.reduce(function(b,a,d){return a.value&&(b+=a.key+"\x3d"+a.value+(d<c.length-1?"\x26":"")),b},"?");a.href=b.config.FEEDBACK_URL+"/"+d+(this._map._hash?this._map._hash.getHashString(!0):"");a.rel="noopener nofollow"}};ie.prototype._updateData=
function(b){!b||"metadata"!==b.sourceDataType&&"style"!==b.dataType||(this._updateAttributions(),this._updateEditLink())};ie.prototype._updateAttributions=function(){if(this._map.style){var b=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?b=b.concat(this.options.customAttribution.map(function(b){return"string"!=typeof b?"":b})):"string"==typeof this.options.customAttribution&&b.push(this.options.customAttribution)),this._map.style.stylesheet){var a=this._map.style.stylesheet;
this.styleOwner=a.owner;this.styleId=a.id}a=this._map.style.sourceCaches;for(var c in a){var d=a[c];d.used&&(d=d.getSource(),d.attribution&&0>b.indexOf(d.attribution)&&b.push(d.attribution))}b.sort(function(b,a){return b.length-a.length});c=(b=b.filter(function(a,c){for(c+=1;c<b.length;c++)if(0<=b[c].indexOf(a))return!1;return!0})).join(" | ");c!==this._attribHTML&&(this._attribHTML=c,b.length?(this._innerContainer.innerHTML=c,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),
this._editLink=null)}};ie.prototype._updateCompact=function(){640>=this._map.getCanvasContainer().offsetWidth?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Cc=function(){b.bindAll(["_updateLogo"],this);b.bindAll(["_updateCompact"],this)};Cc.prototype.onAdd=function(b){this._map=b;this._container=W.create("div","mapboxgl-ctrl");b=W.create("a","mapboxgl-ctrl-logo");return b.target="_blank",b.rel="noopener nofollow",b.href="https://www.mapbox.com/",
b.setAttribute("aria-label","Mapbox logo"),b.setAttribute("rel","noopener nofollow"),this._container.appendChild(b),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container};Cc.prototype.onRemove=function(){W.remove(this._container);this._map.off("sourcedata",this._updateLogo);this._map.off("resize",this._updateCompact)};Cc.prototype.getDefaultPosition=function(){return"bottom-left"};
Cc.prototype._updateLogo=function(b){b&&"metadata"!==b.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")};Cc.prototype._logoRequired=function(){if(this._map.style){var b=this._map.style.sourceCaches,a;for(a in b)if(b[a].getSource().mapbox_logo)return!0;return!1}};Cc.prototype._updateCompact=function(){var b=this._container.children;b.length&&(b=b[0],250>this._map.getCanvasContainer().offsetWidth?b.classList.add("mapboxgl-compact"):b.classList.remove("mapboxgl-compact"))};
var Mc=function(){this._queue=[];this._id=0;this._currentlyRunning=this._cleared=!1};Mc.prototype.add=function(b){var a=++this._id;return this._queue.push({callback:b,id:a,cancelled:!1}),a};Mc.prototype.remove=function(b){var a=this._currentlyRunning,c=0;for(a=a?this._queue.concat(a):this._queue;c<a.length;c+=1){var d=a[c];if(d.id===b)return void(d.cancelled=!0)}};Mc.prototype.run=function(){var b=this._currentlyRunning=this._queue;this._queue=[];for(var a=0;a<b.length;a+=1){var c=b[a];if(!c.cancelled&&
(c.callback(),this._cleared))break}this._currentlyRunning=this._cleared=!1};Mc.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0);this._queue=[]};var ch=b.window.HTMLImageElement,wi=b.window.HTMLElement,fi={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,
trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Sa=function(a){function c(c){var d=this;if(null!=(c=b.extend({},fi,c)).minZoom&&null!=c.maxZoom&&c.minZoom>c.maxZoom)throw Error("maxZoom must be greater than minZoom");var e=new Ab(c.minZoom,c.maxZoom,c.renderWorldCopies);if(a.call(this,e,c),this._interactive=c.interactive,this._maxTileCacheSize=c.maxTileCacheSize,
this._failIfMajorPerformanceCaveat=c.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=c.preserveDrawingBuffer,this._antialias=c.antialias,this._trackResize=c.trackResize,this._bearingSnap=c.bearingSnap,this._refreshExpiredTiles=c.refreshExpiredTiles,this._fadeDuration=c.fadeDuration,this._crossSourceCollisions=c.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=c.collectResourceTiming,this._renderTaskQueue=new Mc,this._controls=[],this._mapId=b.uniqueId(),this._requestManager=
new b.RequestManager(c.transformRequest,c.accessToken),"string"==typeof c.container){if(this._container=b.window.document.getElementById(c.container),!this._container)throw Error("Container '"+c.container+"' not found.");}else{if(!(c.container instanceof wi))throw Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=c.container}if(c.maxBounds&&this.setMaxBounds(c.maxBounds),b.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),
this._setupPainter(),void 0===this.painter)throw Error("Failed to initialize WebGL.");this.on("move",function(){return d._update(!1)});this.on("moveend",function(){return d._update(!1)});this.on("zoom",function(){return d._update(!0)});void 0!==b.window&&(b.window.addEventListener("online",this._onWindowOnline,!1),b.window.addEventListener("resize",this._onWindowResize,!1));(function(b,a){var c=b.getCanvasContainer(),d=null,e=!1,f=null,g;for(g in Kh)b[g]=new Kh[g](b,a),a.interactive&&a[g]&&b[g].enable(a[g]);
W.addEventListener(c,"mouseout",function(a){b.fire(new qd("mouseout",b,a))});W.addEventListener(c,"mousedown",function(d){e=!0;f=W.mousePos(c,d);var g=new qd("mousedown",b,d);(b.fire(g),g.defaultPrevented)||(a.interactive&&!b.doubleClickZoom.isActive()&&b.stop(),b.boxZoom.onMouseDown(d),b.boxZoom.isActive()||b.dragPan.isActive()||b.dragRotate.onMouseDown(d),b.boxZoom.isActive()||b.dragRotate.isActive()||b.dragPan.onMouseDown(d))});W.addEventListener(c,"mouseup",function(a){var c=b.dragRotate.isActive();
d&&!c&&b.fire(new qd("contextmenu",b,d));d=null;e=!1;b.fire(new qd("mouseup",b,a))});W.addEventListener(c,"mousemove",function(a){if(!b.dragPan.isActive()&&!b.dragRotate.isActive()){for(var d=a.target;d&&d!==c;)d=d.parentNode;d===c&&b.fire(new qd("mousemove",b,a))}});W.addEventListener(c,"mouseover",function(a){for(var d=a.target;d&&d!==c;)d=d.parentNode;d===c&&b.fire(new qd("mouseover",b,a))});W.addEventListener(c,"touchstart",function(c){var d=new fe("touchstart",b,c);(b.fire(d),d.defaultPrevented)||
(a.interactive&&b.stop(),b.boxZoom.isActive()||b.dragRotate.isActive()||b.dragPan.onTouchStart(c),b.touchZoomRotate.onStart(c),b.doubleClickZoom.onTouchStart(d))},{passive:!1});W.addEventListener(c,"touchmove",function(a){b.fire(new fe("touchmove",b,a))},{passive:!1});W.addEventListener(c,"touchend",function(a){b.fire(new fe("touchend",b,a))});W.addEventListener(c,"touchcancel",function(a){b.fire(new fe("touchcancel",b,a))});W.addEventListener(c,"click",function(d){var e=W.mousePos(c,d);(!f||e.equals(f)||
e.dist(f)<a.clickTolerance)&&b.fire(new qd("click",b,d))});W.addEventListener(c,"dblclick",function(a){a=new qd("dblclick",b,a);if(b.fire(a),!a.defaultPrevented)b.doubleClickZoom.onDblClick(a)});W.addEventListener(c,"contextmenu",function(a){var c=b.dragRotate.isActive();e||c?e&&(d=a):b.fire(new qd("contextmenu",b,a));(b.dragRotate.isEnabled()||b.listens("contextmenu"))&&a.preventDefault()});W.addEventListener(c,"wheel",function(c){a.interactive&&b.stop();var d=new Fg("wheel",b,c);if(b.fire(d),!d.defaultPrevented)b.scrollZoom.onWheel(c)},
{passive:!1})})(this,c);(this._hash=c.hash&&(new pd).addTo(this))&&this._hash._onHashChange()||(this.jumpTo({center:c.center,zoom:c.zoom,bearing:c.bearing,pitch:c.pitch}),c.bounds&&(this.resize(),this.fitBounds(c.bounds,b.extend({},c.fitBoundsOptions,{duration:0}))));this.resize();this._localIdeographFontFamily=c.localIdeographFontFamily;c.style&&this.setStyle(c.style,{localIdeographFontFamily:c.localIdeographFontFamily});c.attributionControl&&this.addControl(new ie({customAttribution:c.customAttribution}));
this.addControl(new Cc,c.logoPosition);this.on("style.load",function(){d.transform.unmodified&&d.jumpTo(d.style.stylesheet)});this.on("data",function(a){d._update("style"===a.dataType);d.fire(new b.Event(a.dataType+"data",a))});this.on("dataloading",function(a){d.fire(new b.Event(a.dataType+"dataloading",a))})}a&&(c.__proto__=a);c.prototype=Object.create(a&&a.prototype);c.prototype.constructor=c;var d={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},
repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return c.prototype._getMapId=function(){return this._mapId},c.prototype.addControl=function(a,c){if(void 0===c&&a.getDefaultPosition&&(c=a.getDefaultPosition()),void 0===c&&(c="top-right"),!a||!a.onAdd)return this.fire(new b.ErrorEvent(Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var d=a.onAdd(this);this._controls.push(a);a=this._controlPositions[c];return-1!==
c.indexOf("bottom")?a.insertBefore(d,a.firstChild):a.appendChild(d),this},c.prototype.removeControl=function(a){if(!a||!a.onRemove)return this.fire(new b.ErrorEvent(Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var c=this._controls.indexOf(a);return-1<c&&this._controls.splice(c,1),a.onRemove(this),this},c.prototype.resize=function(a){var c=this._containerDimensions(),d=c[0];c=c[1];return this._resizeCanvas(d,c),this.transform.resize(d,
c),this.painter.resize(d,c),this.fire(new b.Event("movestart",a)).fire(new b.Event("move",a)).fire(new b.Event("resize",a)).fire(new b.Event("moveend",a)),this},c.prototype.getBounds=function(){return this.transform.getBounds()},c.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},c.prototype.setMaxBounds=function(a){return this.transform.setMaxBounds(b.LngLatBounds.convert(a)),this._update()},c.prototype.setMinZoom=function(b){if(0<=(b=null==b?0:b)&&b<=this.transform.maxZoom)return this.transform.minZoom=
b,this._update(),this.getZoom()<b&&this.setZoom(b),this;throw Error("minZoom must be between 0 and the current maxZoom, inclusive");},c.prototype.getMinZoom=function(){return this.transform.minZoom},c.prototype.setMaxZoom=function(b){if((b=null==b?22:b)>=this.transform.minZoom)return this.transform.maxZoom=b,this._update(),this.getZoom()>b&&this.setZoom(b),this;throw Error("maxZoom must be greater than the current minZoom");},c.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},
c.prototype.setRenderWorldCopies=function(b){return this.transform.renderWorldCopies=b,this._update()},c.prototype.getMaxZoom=function(){return this.transform.maxZoom},c.prototype.project=function(a){return this.transform.locationPoint(b.LngLat.convert(a))},c.prototype.unproject=function(a){return this.transform.pointLocation(b.Point.convert(a))},c.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},c.prototype.isZooming=
function(){return this._zooming||this.scrollZoom.isZooming()},c.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},c.prototype.on=function(b,c,d){var e=this;if(void 0===d)return a.prototype.on.call(this,b,c);var f=function(){var a;if("mouseenter"===b||"mouseover"===b){var f=!1;return{layer:c,listener:d,delegates:{mousemove:function(a){var g=e.getLayer(c)?e.queryRenderedFeatures(a.point,{layers:[c]}):[];g.length?f||(f=!0,d.call(e,new qd(b,e,a.originalEvent,{features:g}))):
f=!1},mouseout:function(){f=!1}}}}if("mouseleave"===b||"mouseout"===b){var g=!1;return{layer:c,listener:d,delegates:{mousemove:function(a){(e.getLayer(c)?e.queryRenderedFeatures(a.point,{layers:[c]}):[]).length?g=!0:g&&(g=!1,d.call(e,new qd(b,e,a.originalEvent)))},mouseout:function(a){g&&(g=!1,d.call(e,new qd(b,e,a.originalEvent)))}}}}return{layer:c,listener:d,delegates:(a={},a[b]=function(b){var a=e.getLayer(c)?e.queryRenderedFeatures(b.point,{layers:[c]}):[];a.length&&(b.features=a,d.call(e,b),
delete b.features)},a)}}(),g;for(g in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[b]=this._delegatedListeners[b]||[],this._delegatedListeners[b].push(f),f.delegates)this.on(g,f.delegates[g]);return this},c.prototype.off=function(b,c,d){if(void 0===d)return a.prototype.off.call(this,b,c);if(this._delegatedListeners&&this._delegatedListeners[b]){b=this._delegatedListeners[b];for(var e=0;e<b.length;e++){var f=b[e];if(f.layer===c&&f.listener===d){for(var g in f.delegates)this.off(g,
f.delegates[g]);return b.splice(e,1),this}}}return this},c.prototype.queryRenderedFeatures=function(a,c){if(!this.style)return[];if(void 0!==c||void 0===a||a instanceof b.Point||Array.isArray(a)||(c=a,a=void 0),c=c||{},(a=a||[[0,0],[this.transform.width,this.transform.height]])instanceof b.Point||"number"==typeof a[0])var d=[b.Point.convert(a)];else d=b.Point.convert(a[0]),a=b.Point.convert(a[1]),d=[d,new b.Point(a.x,d.y),a,new b.Point(d.x,a.y),d];return this.style.queryRenderedFeatures(d,c,this.transform)},
c.prototype.querySourceFeatures=function(b,a){return this.style.querySourceFeatures(b,a)},c.prototype.setStyle=function(a,c){return!1!==(c=b.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},c)).diff&&c.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&a?(this._diffStyle(a,c),this):(this._localIdeographFontFamily=c.localIdeographFontFamily,this._updateStyle(a,c))},c.prototype._updateStyle=function(b,a){return this.style&&(this.style.setEventedParent(null),this.style._remove()),
b?(this.style=new zc(this,a||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof b?this.style.loadURL(b):this.style.loadJSON(b),this):(delete this.style,this)},c.prototype._diffStyle=function(a,c){var d=this;"string"==typeof a?(a=this._requestManager.normalizeStyleURL(a),a=this._requestManager.transformRequest(a,b.ResourceType.Style),b.getJSON(a,function(a,e){a?d.fire(new b.ErrorEvent(a)):e&&d._updateDiff(e,c)})):"object"==typeof a&&this._updateDiff(a,c)},c.prototype._updateDiff=
function(a,c){try{this.style.setState(a)&&this._update(!0)}catch(Ee){b.warnOnce("Unable to perform style diff: "+(Ee.message||Ee.error||Ee)+".  Rebuilding the style from scratch."),this._updateStyle(a,c)}},c.prototype.getStyle=function(){if(this.style)return this.style.serialize()},c.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():b.warnOnce("There is no style added to the map.")},c.prototype.addSource=function(b,a){return this.style.addSource(b,a),this._update(!0)},c.prototype.isSourceLoaded=
function(a){var c=this.style&&this.style.sourceCaches[a];if(void 0!==c)return c.loaded();this.fire(new b.ErrorEvent(Error("There is no source with ID '"+a+"'")))},c.prototype.areTilesLoaded=function(){var b=this.style&&this.style.sourceCaches,a;for(a in b){var c=b[a]._tiles,d;for(d in c){var e=c[d];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0},c.prototype.addSourceType=function(b,a,c){return this.style.addSourceType(b,a,c)},c.prototype.removeSource=function(b){return this.style.removeSource(b),
this._update(!0)},c.prototype.getSource=function(b){return this.style.getSource(b)},c.prototype.addImage=function(a,c,d){void 0===d&&(d={});var e=d.pixelRatio;void 0===e&&(e=1);d=d.sdf;void 0===d&&(d=!1);if(c instanceof ch)c=b.browser.getImageData(c),this.style.addImage(a,{data:new b.RGBAImage({width:c.width,height:c.height},c.data),pixelRatio:e,sdf:d,version:0});else{if(void 0===c.width||void 0===c.height)return this.fire(new b.ErrorEvent(Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));
this.style.addImage(a,{data:new b.RGBAImage({width:c.width,height:c.height},new Uint8Array(c.data)),pixelRatio:e,sdf:d,version:0,userImage:c});c.onAdd&&c.onAdd(this,a)}},c.prototype.updateImage=function(a,c){var d=this.style.getImage(a);if(!d)return this.fire(new b.ErrorEvent(Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var e=c instanceof ch?b.browser.getImageData(c):c,f=e.width,g=e.height;e=e.data;if(void 0===f||void 0===g)return this.fire(new b.ErrorEvent(Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));
if(f!==d.data.width||g!==d.data.height)return this.fire(new b.ErrorEvent(Error("The width and height of the updated image must be that same as the previous version of the image")));d.data.replace(e,!(c instanceof ch));this.style.updateImage(a,d)},c.prototype.hasImage=function(a){return a?!!this.style.getImage(a):(this.fire(new b.ErrorEvent(Error("Missing required image id"))),!1)},c.prototype.removeImage=function(b){this.style.removeImage(b)},c.prototype.loadImage=function(a,c){b.getImage(this._requestManager.transformRequest(a,
b.ResourceType.Image),c)},c.prototype.listImages=function(){return this.style.listImages()},c.prototype.addLayer=function(b,a){return this.style.addLayer(b,a),this._update(!0)},c.prototype.moveLayer=function(b,a){return this.style.moveLayer(b,a),this._update(!0)},c.prototype.removeLayer=function(b){return this.style.removeLayer(b),this._update(!0)},c.prototype.getLayer=function(b){return this.style.getLayer(b)},c.prototype.setFilter=function(b,a,c){return void 0===c&&(c={}),this.style.setFilter(b,
a,c),this._update(!0)},c.prototype.setLayerZoomRange=function(b,a,c){return this.style.setLayerZoomRange(b,a,c),this._update(!0)},c.prototype.getFilter=function(b){return this.style.getFilter(b)},c.prototype.setPaintProperty=function(b,a,c,d){return void 0===d&&(d={}),this.style.setPaintProperty(b,a,c,d),this._update(!0)},c.prototype.getPaintProperty=function(b,a){return this.style.getPaintProperty(b,a)},c.prototype.setLayoutProperty=function(b,a,c,d){return void 0===d&&(d={}),this.style.setLayoutProperty(b,
a,c,d),this._update(!0)},c.prototype.getLayoutProperty=function(b,a){return this.style.getLayoutProperty(b,a)},c.prototype.setLight=function(b,a){return void 0===a&&(a={}),this.style.setLight(b,a),this._update(!0)},c.prototype.getLight=function(){return this.style.getLight()},c.prototype.setFeatureState=function(b,a){return this.style.setFeatureState(b,a),this._update()},c.prototype.removeFeatureState=function(b,a){return this.style.removeFeatureState(b,a),this._update()},c.prototype.getFeatureState=
function(b){return this.style.getFeatureState(b)},c.prototype.getContainer=function(){return this._container},c.prototype.getCanvasContainer=function(){return this._canvasContainer},c.prototype.getCanvas=function(){return this._canvas},c.prototype._containerDimensions=function(){var b=0,a=0;return this._container&&(b=this._container.clientWidth||400,a=this._container.clientHeight||300),[b,a]},c.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==b.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&
b.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},c.prototype._setupContainer=function(){var b=this._container;b.classList.add("mapboxgl-map");(this._missingCSSCanary=W.create("div","mapboxgl-canary",b)).style.visibility="hidden";this._detectMissingCSS();var a=this._canvasContainer=W.create("div","mapboxgl-canvas-container",
b);this._interactive&&a.classList.add("mapboxgl-interactive");this._canvas=W.create("canvas","mapboxgl-canvas",a);this._canvas.style.position="absolute";this._canvas.addEventListener("webglcontextlost",this._contextLost,!1);this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1);this._canvas.setAttribute("tabindex","0");this._canvas.setAttribute("aria-label","Map");a=this._containerDimensions();this._resizeCanvas(a[0],a[1]);var c=this._controlContainer=W.create("div","mapboxgl-control-container",
b),d=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(b){d[b]=W.create("div","mapboxgl-ctrl-"+b,c)})},c.prototype._resizeCanvas=function(a,c){var d=b.window.devicePixelRatio||1;this._canvas.width=d*a;this._canvas.height=d*c;this._canvas.style.width=a+"px";this._canvas.style.height=c+"px"},c.prototype._setupPainter=function(){var a=b.extend({},sa.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,
antialias:this._antialias||!1});(a=this._canvas.getContext("webgl",a)||this._canvas.getContext("experimental-webgl",a))?(this.painter=new lc(a,this.transform),b.webpSupported.testSupport(a)):this.fire(new b.ErrorEvent(Error("Failed to initialize WebGL")))},c.prototype._contextLost=function(a){a.preventDefault();this._frame&&(this._frame.cancel(),this._frame=null);this.fire(new b.Event("webglcontextlost",{originalEvent:a}))},c.prototype._contextRestored=function(a){this._setupPainter();this.resize();
this._update();this.fire(new b.Event("webglcontextrestored",{originalEvent:a}))},c.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},c.prototype._update=function(b){return this.style?(this._styleDirty=this._styleDirty||b,this._sourcesDirty=!0,this.triggerRepaint(),this):this},c.prototype._requestRenderFrame=function(b){return this._update(),this._renderTaskQueue.add(b)},c.prototype._cancelRenderFrame=function(b){this._renderTaskQueue.remove(b)},
c.prototype._render=function(){this.painter.context.setDirty();this.painter.setBaseState();this._renderTaskQueue.run();var a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var c=this.transform.zoom,d=b.browser.now();this.style.zoomHistory.update(c,d);c=new b.EvaluationParameters(c,{now:d,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()});d=c.crossFadingFactor();1===d&&d===this._crossFadingFactor||(a=!0,this._crossFadingFactor=d);this.style.update(c)}return this.style&&
this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration}),this.fire(new b.Event("render")),
this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new b.Event("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new b.Event("idle")),this},c.prototype.remove=function(){this._hash&&this._hash.remove();for(var a=0,c=this._controls;a<c.length;a+=1)c[a].onRemove(this);
this._controls=[];this._frame&&(this._frame.cancel(),this._frame=null);this._renderTaskQueue.clear();this.setStyle(null);void 0!==b.window&&(b.window.removeEventListener("resize",this._onWindowResize,!1),b.window.removeEventListener("online",this._onWindowOnline,!1));(a=this.painter.context.gl.getExtension("WEBGL_lose_context"))&&a.loseContext();oa(this._canvasContainer);oa(this._controlContainer);oa(this._missingCSSCanary);this._container.classList.remove("mapboxgl-map");this.fire(new b.Event("remove"))},
c.prototype.triggerRepaint=function(){var a=this;this.style&&!this._frame&&(this._frame=b.browser.frame(function(){a._frame=null;a._render()}))},c.prototype._onWindowOnline=function(){this._update()},c.prototype._onWindowResize=function(){this._trackResize&&this.resize()._update()},d.showTileBoundaries.get=function(){return!!this._showTileBoundaries},d.showTileBoundaries.set=function(b){this._showTileBoundaries!==b&&(this._showTileBoundaries=b,this._update())},d.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},
d.showCollisionBoxes.set=function(b){this._showCollisionBoxes!==b&&(this._showCollisionBoxes=b,b?this.style._generateCollisionBoxes():this._update())},d.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},d.showOverdrawInspector.set=function(b){this._showOverdrawInspector!==b&&(this._showOverdrawInspector=b,this._update())},d.repaint.get=function(){return!!this._repaint},d.repaint.set=function(b){this._repaint!==b&&(this._repaint=b,this.triggerRepaint())},d.vertices.get=function(){return!!this._vertices},
d.vertices.set=function(b){this._vertices=b;this._update()},c.prototype._setCacheLimits=function(a,c){b.setCacheLimits(a,c)},d.version.get=function(){return b.version},Object.defineProperties(c.prototype,d),c}(uf),Li={showCompass:!0,showZoom:!0,visualizePitch:!1},Ae=function(a){var c=this;this.options=b.extend({},Li,a);this._container=W.create("div","mapboxgl-ctrl mapboxgl-ctrl-group");this._container.addEventListener("contextmenu",function(b){return b.preventDefault()});this.options.showZoom&&(b.bindAll(["_updateZoomButtons"],
this),this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom in",function(){return c._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom out",function(){return c._map.zoomOut()}));this.options.showCompass&&(b.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset bearing to north",function(){c.options.visualizePitch?c._map.resetNorthPitch():c._map.resetNorth()}),
this._compassArrow=W.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};Ae.prototype._updateZoomButtons=function(){var b=this._map.getZoom();b===this._map.getMaxZoom()?this._zoomInButton.classList.add("mapboxgl-ctrl-icon-disabled"):this._zoomInButton.classList.remove("mapboxgl-ctrl-icon-disabled");b===this._map.getMinZoom()?this._zoomOutButton.classList.add("mapboxgl-ctrl-icon-disabled"):this._zoomOutButton.classList.remove("mapboxgl-ctrl-icon-disabled")};Ae.prototype._rotateCompassArrow=
function(){this._compassArrow.style.transform=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(Math.PI/180*this._map.transform.pitch),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+180/Math.PI*this._map.transform.angle+"deg)":"rotate("+180/Math.PI*this._map.transform.angle+"deg)"};Ae.prototype.onAdd=function(b){return this._map=b,this.options.showZoom&&(this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this.options.visualizePitch&&
this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ac(b,{button:"left",element:this._compass}),W.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),W.addEventListener(this._compass,"touchstart",this._handler.onMouseDown,{passive:!1}),this._handler.enable()),this._container};Ae.prototype.onRemove=function(){W.remove(this._container);this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons);
this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),W.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),W.removeEventListener(this._compass,"touchstart",this._handler.onMouseDown,{passive:!1}),this._handler.disable(),delete this._handler);delete this._map};Ae.prototype._createButton=function(b,a,c){b=W.create("button",b,this._container);return b.type="button",b.title=a,b.setAttribute("aria-label",
a),b.addEventListener("click",c),b};var Qh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},De,We=function(a){function c(c,d){if(a.call(this),(c instanceof b.window.HTMLElement||d)&&(c=b.extend({element:c},d)),b.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],
this),this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._draggable=c&&c.draggable||!1,this._state="inactive",c&&c.element)this._element=c.element,this._offset=b.Point.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0;this._element=W.create("div");d=W.createNS("http://www.w3.org/2000/svg","svg");d.setAttributeNS(null,"display","block");d.setAttributeNS(null,"height","41px");d.setAttributeNS(null,"width","27px");d.setAttributeNS(null,"viewBox","0 0 27 41");var e=W.createNS("http://www.w3.org/2000/svg",
"g");e.setAttributeNS(null,"stroke","none");e.setAttributeNS(null,"stroke-width","1");e.setAttributeNS(null,"fill","none");e.setAttributeNS(null,"fill-rule","evenodd");e=W.createNS("http://www.w3.org/2000/svg","g");e.setAttributeNS(null,"fill-rule","nonzero");var f=W.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(3.0, 29.0)");f.setAttributeNS(null,"fill","#000000");for(var g=0,h=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},
{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];g<h.length;g+=1){var k=h[g],l=W.createNS("http://www.w3.org/2000/svg","ellipse");l.setAttributeNS(null,"opacity","0.04");l.setAttributeNS(null,"cx","10.5");l.setAttributeNS(null,"cy","5.80029008");l.setAttributeNS(null,"rx",k.rx);l.setAttributeNS(null,"ry",k.ry);f.appendChild(l)}g=W.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"fill",this._color);
h=W.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z");g.appendChild(h);h=W.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"opacity","0.25");h.setAttributeNS(null,"fill","#000000");k=W.createNS("http://www.w3.org/2000/svg","path");k.setAttributeNS(null,
"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z");
h.appendChild(k);k=W.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(6.0, 7.0)");k.setAttributeNS(null,"fill","#FFFFFF");l=W.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(8.0, 8.0)");var r=W.createNS("http://www.w3.org/2000/svg","circle");r.setAttributeNS(null,"fill","#000000");r.setAttributeNS(null,"opacity","0.25");r.setAttributeNS(null,"cx","5.5");r.setAttributeNS(null,"cy","5.5");r.setAttributeNS(null,"r","5.4999962");
var t=W.createNS("http://www.w3.org/2000/svg","circle");t.setAttributeNS(null,"fill","#FFFFFF");t.setAttributeNS(null,"cx","5.5");t.setAttributeNS(null,"cy","5.5");t.setAttributeNS(null,"r","5.4999962");l.appendChild(r);l.appendChild(t);e.appendChild(f);e.appendChild(g);e.appendChild(h);e.appendChild(k);e.appendChild(l);d.appendChild(e);this._element.appendChild(d);this._offset=b.Point.convert(c&&c.offset||[0,-14])}this._element.classList.add("mapboxgl-marker");this._element.addEventListener("dragstart",
function(b){b.preventDefault()});ia(this._element,this._anchor,"marker");this._popup=null}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.addTo=function(b){return this.remove(),this._map=b,b.getCanvasContainer().appendChild(this._element),b.on("move",this._update),b.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},c.prototype.remove=function(){return this._map&&(this._map.off("click",
this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),W.remove(this._element),this._popup&&this._popup.remove(),this},c.prototype.getLngLat=function(){return this._lngLat},c.prototype.setLngLat=function(a){return this._lngLat=
b.LngLat.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},c.prototype.getElement=function(){return this._element},c.prototype.setPopup=function(b){if(this._popup&&(this._popup.remove(),this._popup=null),b){if(!("offset"in b.options)){var a=Math.sqrt(Math.pow(13.5,2)/2);b.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[a,-1*(24.6+a)],"bottom-right":[-a,-1*(24.6+a)],left:[13.5,-24.6],right:[-13.5,
-24.6]}:this._offset}this._popup=b;this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},c.prototype._onMapClick=function(b){b=b.originalEvent.target;var a=this._element;this._popup&&(b===a||a.contains(b))&&this.togglePopup()},c.prototype.getPopup=function(){return this._popup},c.prototype.togglePopup=function(){var b=this._popup;return b?(b.isOpen()?b.remove():b.addTo(this._map),this):this},c.prototype._update=function(b){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=
ka(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),b&&"moveend"!==b.type||(this._pos=this._pos.round()),W.setTransform(this._element,Qh[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"))},c.prototype.getOffset=function(){return this._offset},c.prototype.setOffset=function(a){return this._offset=b.Point.convert(a),this._update(),this},c.prototype._onMove=function(a){this._pos=a.point.sub(this._positionDelta);this._lngLat=this._map.unproject(this._pos);
this.setLngLat(this._lngLat);this._element.style.pointerEvents="none";"pending"===this._state&&(this._state="active",this.fire(new b.Event("dragstart")));this.fire(new b.Event("drag"))},c.prototype._onUp=function(){this._element.style.pointerEvents="auto";this._positionDelta=null;this._map.off("mousemove",this._onMove);this._map.off("touchmove",this._onMove);"active"===this._state&&this.fire(new b.Event("dragend"));this._state="inactive"},c.prototype._addDragHandler=function(b){this._element.contains(b.originalEvent.target)&&
(b.preventDefault(),this._positionDelta=b.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},c.prototype.setDraggable=function(b){return this._draggable=!!b,this._map&&(b?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",
this._addDragHandler))),this},c.prototype.isDraggable=function(){return this._draggable},c}(b.Evented),nh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6E3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},kh=function(a){function c(c){a.call(this);this.options=b.extend({},nh,c);b.bindAll("_onSuccess _onError _finish _setupUI _updateCamera _updateMarker".split(" "),this)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=
c,c.prototype.onAdd=function(a){var c;return this._map=a,this._container=W.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),c=this._setupUI,void 0!==De?c(De):void 0!==b.window.navigator.permissions?b.window.navigator.permissions.query({name:"geolocation"}).then(function(b){De="denied"!==b.state;c(De)}):(De=!!b.window.navigator.geolocation,c(De)),this._container},c.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(b.window.navigator.geolocation.clearWatch(this._geolocationWatchID),
this._geolocationWatchID=void 0);this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove();W.remove(this._container);this._map=void 0},c.prototype._onSuccess=function(a){if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":this._watchState="ACTIVE_LOCK";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "BACKGROUND":case "BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(a);this.options.trackUserLocation&&"ACTIVE_LOCK"!==
this._watchState||this._updateCamera(a);this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale");this.fire(new b.Event("geolocate",a));this._finish()},c.prototype._updateCamera=function(a){var c=new b.LngLat(a.coords.longitude,a.coords.latitude);a=a.coords.accuracy;var d=this._map.getBearing();d=b.extend({bearing:d},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(a),d,{geolocateSource:!0})},c.prototype._updateMarker=function(b){b?this._userLocationDotMarker.setLngLat([b.coords.longitude,
b.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},c.prototype._onError=function(a){if(this.options.trackUserLocation)if(1===a.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),
void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case "WAITING_ACTIVE":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case "ACTIVE_LOCK":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");
break;case "BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale");this.fire(new b.Event("error",a));this._finish()},c.prototype._finish=function(){this._timeoutId&&
clearTimeout(this._timeoutId);this._timeoutId=void 0},c.prototype._setupUI=function(a){var c=this;!1!==a?(this._container.addEventListener("contextmenu",function(b){return b.preventDefault()}),this._geolocateButton=W.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState=
"OFF"),this.options.showUserLocation&&(this._dotElement=W.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new We(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(a){a.geolocateSource||"ACTIVE_LOCK"!==c._watchState||(c._watchState="BACKGROUND",c._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),
c._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),c.fire(new b.Event("trackuserlocationend")))})):b.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.")},c.prototype.trigger=function(){if(!this._setup)return b.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case "OFF":this._watchState="WAITING_ACTIVE";this.fire(new b.Event("trackuserlocationstart"));break;case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":case "BACKGROUND_ERROR":this._watchState=
"OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this.fire(new b.Event("trackuserlocationend"));break;case "BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),
this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new b.Event("trackuserlocationstart"))}switch(this._watchState){case "WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");
break;case "BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case "BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed",
"true"),this._geolocationWatchID=b.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else b.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1E4);return!0},c.prototype._clearWatch=function(){b.window.navigator.geolocation.clearWatch(this._geolocationWatchID);this._geolocationWatchID=void 0;this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");
this._geolocateButton.setAttribute("aria-pressed","false");this.options.showUserLocation&&this._updateMarker(null)},c}(b.Evented),Ni={maxWidth:100,unit:"metric"},ig=function(a){this.options=b.extend({},Ni,a);b.bindAll(["_onMove","setUnit"],this)};ig.prototype.getDefaultPosition=function(){return"bottom-left"};ig.prototype._onMove=function(){xa(this._map,this._container,this.options)};ig.prototype.onAdd=function(b){return this._map=b,this._container=W.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",
b.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container};ig.prototype.onRemove=function(){W.remove(this._container);this._map.off("move",this._onMove);this._map=void 0};ig.prototype.setUnit=function(b){this.options.unit=b;xa(this._map,this._container,this.options)};var rc=function(a){this._fullscreen=!1;a&&a.container&&(a.container instanceof b.window.HTMLElement?this._container=a.container:b.warnOnce("Full screen control 'container' must be a DOM element."));b.bindAll(["_onClickFullscreen",
"_changeIcon"],this);"onfullscreenchange"in b.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in b.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in b.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in b.window.document&&(this._fullscreenchange="MSFullscreenChange");this._className="mapboxgl-ctrl"};rc.prototype.onAdd=function(a){return this._map=a,this._container||(this._container=this._map.getContainer()),
this._controlContainer=W.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",b.warnOnce("This device does not support fullscreen mode.")),this._controlContainer};rc.prototype.onRemove=function(){W.remove(this._controlContainer);this._map=null;b.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)};rc.prototype._checkFullscreenSupport=function(){return!!(b.window.document.fullscreenEnabled||
b.window.document.mozFullScreenEnabled||b.window.document.msFullscreenEnabled||b.window.document.webkitFullscreenEnabled)};rc.prototype._setupUI=function(){(this._fullscreenButton=W.create("button",this._className+"-icon "+this._className+"-fullscreen",this._controlContainer)).type="button";this._updateTitle();this._fullscreenButton.addEventListener("click",this._onClickFullscreen);b.window.document.addEventListener(this._fullscreenchange,this._changeIcon)};rc.prototype._updateTitle=function(){var b=
this._isFullscreen()?"Exit fullscreen":"Enter fullscreen";this._fullscreenButton.setAttribute("aria-label",b);this._fullscreenButton.title=b};rc.prototype._isFullscreen=function(){return this._fullscreen};rc.prototype._changeIcon=function(){(b.window.document.fullscreenElement||b.window.document.mozFullScreenElement||b.window.document.webkitFullscreenElement||b.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+
"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"),this._updateTitle())};rc.prototype._onClickFullscreen=function(){this._isFullscreen()?b.window.document.exitFullscreen?b.window.document.exitFullscreen():b.window.document.mozCancelFullScreen?b.window.document.mozCancelFullScreen():b.window.document.msExitFullscreen?b.window.document.msExitFullscreen():b.window.document.webkitCancelFullScreen&&b.window.document.webkitCancelFullScreen():this._container.requestFullscreen?
this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var be={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Ob=function(a){function c(c){a.call(this);this.options=b.extend(Object.create(be),c);b.bindAll(["_update","_onClickClose","remove"],this)}return a&&(c.__proto__=
a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.addTo=function(a){var c=this;return this._map=a,this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",function(b){c._update(b.point)}),this._map.on("mouseup",function(b){c._update(b.point)}),this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):
this._map.on("move",this._update),this.fire(new b.Event("open")),this},c.prototype.isOpen=function(){return!!this._map},c.prototype.remove=function(){return this._content&&W.remove(this._content),this._container&&(W.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),this._map.off("remove",this.remove),this._map.off("mousemove"),delete this._map),this.fire(new b.Event("close")),this},c.prototype.getLngLat=function(){return this._lngLat},
c.prototype.setLngLat=function(a){return this._lngLat=b.LngLat.convert(a),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove"),this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},c.prototype.trackPointer=function(){var b=this;return this._trackPointer=!0,this._pos=null,this._map&&(this._map.off("move",this._update),this._map.on("mousemove",
function(a){b._update(a.point)}),this._map.on("drag",function(a){b._update(a.point)}),this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},c.prototype.getElement=function(){return this._container},c.prototype.setText=function(a){return this.setDOMContent(b.window.document.createTextNode(a))},c.prototype.setHTML=function(a){var c=b.window.document.createDocumentFragment(),d=b.window.document.createElement("body");for(d.innerHTML=
a;a=d.firstChild;)c.appendChild(a);return this.setDOMContent(c)},c.prototype.getMaxWidth=function(){return this._container.style.maxWidth},c.prototype.setMaxWidth=function(b){return this.options.maxWidth=b,this._update(),this},c.prototype.setDOMContent=function(b){return this._createContent(),this._content.appendChild(b),this._update(),this},c.prototype._createContent=function(){this._content&&W.remove(this._content);this._content=W.create("div","mapboxgl-popup-content",this._container);this.options.closeButton&&
(this._closeButton=W.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="\x26#215;",this._closeButton.addEventListener("click",this._onClickClose))},c.prototype._update=function(a){var c=this,d=this._lngLat||this._trackPointer;if(this._map&&d&&this._content&&(this._container||(this._container=W.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=W.create("div",
"mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(b){return c._container.classList.add(b)})),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ka(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||a)){a=this._pos=this._trackPointer&&
a?a:this._map.project(this._lngLat);var e=this.options.anchor;d=function Mg(a){if(a){if("number"==typeof a){var c=Math.round(Math.sqrt(.5*Math.pow(a,2)));return{center:new b.Point(0,0),top:new b.Point(0,a),"top-left":new b.Point(c,c),"top-right":new b.Point(-c,c),bottom:new b.Point(0,-a),"bottom-left":new b.Point(c,-c),"bottom-right":new b.Point(-c,-c),left:new b.Point(a,0),right:new b.Point(-a,0)}}return a instanceof b.Point||Array.isArray(a)?(a=b.Point.convert(a),{center:a,top:a,"top-left":a,"top-right":a,
bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}):{center:b.Point.convert(a.center||[0,0]),top:b.Point.convert(a.top||[0,0]),"top-left":b.Point.convert(a["top-left"]||[0,0]),"top-right":b.Point.convert(a["top-right"]||[0,0]),bottom:b.Point.convert(a.bottom||[0,0]),"bottom-left":b.Point.convert(a["bottom-left"]||[0,0]),"bottom-right":b.Point.convert(a["bottom-right"]||[0,0]),left:b.Point.convert(a.left||[0,0]),right:b.Point.convert(a.right||[0,0])}}return Mg(new b.Point(0,0))}(this.options.offset);
if(!e){e=this._container.offsetWidth;var f=this._container.offsetHeight;f=a.y+d.bottom.y<f?["top"]:a.y>this._map.transform.height-f?["bottom"]:[];a.x<e/2?f.push("left"):a.x>this._map.transform.width-e/2&&f.push("right");e=0===f.length?"bottom":f.join("-")}a=a.add(d[e]).round();W.setTransform(this._container,Qh[e]+" translate("+a.x+"px,"+a.y+"px)");ia(this._container,e,"popup")}},c.prototype._onClickClose=function(){this.remove()},c}(b.Evented),Qe={version:b.version,supported:sa,setRTLTextPlugin:b.setRTLTextPlugin,
Map:Sa,NavigationControl:Ae,GeolocateControl:kh,AttributionControl:ie,ScaleControl:ig,FullscreenControl:rc,Popup:Ob,Marker:We,Style:zc,LngLat:b.LngLat,LngLatBounds:b.LngLatBounds,Point:b.Point,MercatorCoordinate:b.MercatorCoordinate,Evented:b.Evented,config:b.config,get accessToken(){return b.config.ACCESS_TOKEN},set accessToken(a){b.config.ACCESS_TOKEN=a},get baseApiUrl(){return b.config.API_URL},set baseApiUrl(a){b.config.API_URL=a},get workerCount(){return Zb.workerCount},set workerCount(b){Zb.workerCount=
b},get maxParallelImageRequests(){return b.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(a){b.config.MAX_PARALLEL_IMAGE_REQUESTS=a},clearStorage:function(a){b.clearTileCache(a)},workerUrl:""};return Qe});return h})},{}],428:[function(a,q,p){function n(a,h,b){for(var g=Array(a),e=0;e<a;++e)g[e]=0,e===h&&(g[e]+=.5),e===b&&(g[e]+=.5);return g}q.exports=function(a){for(var h=1<<a+1,b=Array(h),g=0;g<h;++g){var e=g;var t=a,l=g;if(0===l||l===(1<<t+1)-1)var f=[];else{var d=[];f=[];for(var c=
0;c<=t;++c)if(l&1<<c){d.push(n(t,c-1,c-1));f.push(null);for(var r=0;r<=t;++r)~l&1<<r&&(d.push(n(t,c-1,r-1)),f.push([c,r]))}t=k(d);l=[];c=0;b:for(;c<t.length;++c){d=t[c];var m=[];for(r=0;r<d.length;++r){if(!f[d[r]])continue b;m.push(f[d[r]].slice())}l.push(m)}f=l}b[e]=f}return b};var k=a("convex-hull")},{"convex-hull":132}],429:[function(a,q,p){function n(b,a,c,d,e){b[0]=a[0]*d+c[0]*e;b[1]=a[1]*d+c[1]*e;b[2]=a[2]*d+c[2]*e}var k=a("./normalize");p=a("gl-mat4/create");var m=a("gl-mat4/clone"),h=a("gl-mat4/determinant"),
b=a("gl-mat4/invert"),g=a("gl-mat4/transpose"),e={length:a("gl-vec3/length"),normalize:a("gl-vec3/normalize"),dot:a("gl-vec3/dot"),cross:a("gl-vec3/cross")},t=p(),l=p(),f=[0,0,0,0],d=[[0,0,0],[0,0,0],[0,0,0]],c=[0,0,0];q.exports=function(a,u,v,w,y,A){u||(u=[0,0,0]);v||(v=[0,0,0]);w||(w=[0,0,0]);y||(y=[0,0,0,1]);A||(A=[0,0,0,1]);if(!k(t,a))return!1;m(l,t);l[3]=0;l[7]=0;l[11]=0;l[15]=1;if(Math.abs(1E-8>h(l)))return!1;var r=t[3],x=t[7],p=t[11];a=t[12];var B=t[13],q=t[14],G=t[15];if(0!==r||0!==x||0!==
p){f[0]=r;f[1]=x;f[2]=p;f[3]=G;if(!b(l,l))return!1;g(l,l);r=f[0];x=f[1];p=f[2];G=f[3];y[0]=l[0]*r+l[4]*x+l[8]*p+l[12]*G;y[1]=l[1]*r+l[5]*x+l[9]*p+l[13]*G;y[2]=l[2]*r+l[6]*x+l[10]*p+l[14]*G;y[3]=l[3]*r+l[7]*x+l[11]*p+l[15]*G}else y[0]=y[1]=y[2]=0,y[3]=1;u[0]=a;u[1]=B;u[2]=q;d[0][0]=t[0];d[0][1]=t[1];d[0][2]=t[2];d[1][0]=t[4];d[1][1]=t[5];d[1][2]=t[6];d[2][0]=t[8];d[2][1]=t[9];d[2][2]=t[10];v[0]=e.length(d[0]);e.normalize(d[0],d[0]);w[0]=e.dot(d[0],d[1]);n(d[1],d[1],d[0],1,-w[0]);v[1]=e.length(d[1]);
e.normalize(d[1],d[1]);w[0]/=v[1];w[1]=e.dot(d[0],d[2]);n(d[2],d[2],d[0],1,-w[1]);w[2]=e.dot(d[1],d[2]);n(d[2],d[2],d[1],1,-w[2]);v[2]=e.length(d[2]);e.normalize(d[2],d[2]);w[1]/=v[2];w[2]/=v[2];e.cross(c,d[1],d[2]);if(0>e.dot(d[0],c))for(u=0;3>u;u++)v[u]*=-1,d[u][0]*=-1,d[u][1]*=-1,d[u][2]*=-1;A[0]=.5*Math.sqrt(Math.max(1+d[0][0]-d[1][1]-d[2][2],0));A[1]=.5*Math.sqrt(Math.max(1-d[0][0]+d[1][1]-d[2][2],0));A[2]=.5*Math.sqrt(Math.max(1-d[0][0]-d[1][1]+d[2][2],0));A[3]=.5*Math.sqrt(Math.max(1+d[0][0]+
d[1][1]+d[2][2],0));d[2][1]>d[1][2]&&(A[0]=-A[0]);d[0][2]>d[2][0]&&(A[1]=-A[1]);d[1][0]>d[0][1]&&(A[2]=-A[2]);return!0}},{"./normalize":430,"gl-mat4/clone":262,"gl-mat4/create":263,"gl-mat4/determinant":264,"gl-mat4/invert":268,"gl-mat4/transpose":279,"gl-vec3/cross":336,"gl-vec3/dot":341,"gl-vec3/length":351,"gl-vec3/normalize":358}],430:[function(a,q,p){q.exports=function(a,k){var m=k[15];if(0===m)return!1;m=1/m;for(var h=0;16>h;h++)a[h]=k[h]*m;return!0}},{}],431:[function(a,q,p){function n(){return{translate:[0,
0,0],scale:[1,1,1],skew:[0,0,0],perspective:[0,0,0,1],quaternion:[0,0,0,1]}}var k=a("gl-vec3/lerp"),m=a("mat4-recompose"),h=a("mat4-decompose"),b=a("gl-mat4/determinant"),g=a("quat-slerp"),e=n(),t=n(),l=n();q.exports=function(a,d,c,r){if(0===b(d)||0===b(c))return!1;d=h(d,e.translate,e.scale,e.skew,e.perspective,e.quaternion);c=h(c,t.translate,t.scale,t.skew,t.perspective,t.quaternion);if(!d||!c)return!1;k(l.translate,e.translate,t.translate,r);k(l.skew,e.skew,t.skew,r);k(l.scale,e.scale,t.scale,r);
k(l.perspective,e.perspective,t.perspective,r);g(l.quaternion,e.quaternion,t.quaternion,r);m(a,l.translate,l.scale,l.skew,l.perspective,l.quaternion);return!0}},{"gl-mat4/determinant":264,"gl-vec3/lerp":352,"mat4-decompose":429,"mat4-recompose":432,"quat-slerp":484}],432:[function(a,q,p){var n={identity:a("gl-mat4/identity"),translate:a("gl-mat4/translate"),multiply:a("gl-mat4/multiply"),create:a("gl-mat4/create"),scale:a("gl-mat4/scale"),fromRotationTranslation:a("gl-mat4/fromRotationTranslation")};
n.create();var k=n.create();q.exports=function(a,h,b,g,e,t){n.identity(a);n.fromRotationTranslation(a,t,h);a[3]=e[0];a[7]=e[1];a[11]=e[2];a[15]=e[3];n.identity(k);0!==g[2]&&(k[9]=g[2],n.multiply(a,a,k));0!==g[1]&&(k[9]=0,k[8]=g[1],n.multiply(a,a,k));0!==g[0]&&(k[8]=0,k[4]=g[0],n.multiply(a,a,k));n.scale(a,a,b);return a}},{"gl-mat4/create":263,"gl-mat4/fromRotationTranslation":266,"gl-mat4/identity":267,"gl-mat4/multiply":270,"gl-mat4/scale":277,"gl-mat4/translate":278}],433:[function(a,q,p){q.exports=
Math.log2||function(a){return Math.log(a)*Math.LOG2E}},{}],434:[function(a,q,p){function n(b){this._components=b.slice();this._time=[0];this.prevMatrix=b.slice();this.nextMatrix=b.slice();this.computedMatrix=b.slice();this.computedInverse=b.slice();this.computedEye=[0,0,0];this.computedUp=[0,0,0];this.computedCenter=[0,0,0];this.computedRadius=[0];this._limits=[-Infinity,Infinity]}var k=a("binary-search-bounds"),m=a("mat4-interpolate"),h=a("gl-mat4/invert"),b=a("gl-mat4/rotateX"),g=a("gl-mat4/rotateY"),
e=a("gl-mat4/rotateZ"),t=a("gl-mat4/lookAt"),l=a("gl-mat4/translate");a("gl-mat4/scale");var f=a("gl-vec3/normalize"),d=[0,0,0];q.exports=function(b){b=b||{};return new n(b.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};a=n.prototype;a.recalcMatrix=function(b){var a=this._time,c=k.le(a,b),d=this.computedMatrix;if(!(0>c)){var e=this._components;if(c===a.length-1)for(var g=16*c,l=0;16>l;++l)d[l]=e[g++];else{var r=a[c+1]-a[c];g=16*c;var t=this.prevMatrix,n=!0;for(l=0;16>l;++l)t[l]=e[g++];var p=this.nextMatrix;
for(l=0;16>l;++l)p[l]=e[g++],n=n&&t[l]===p[l];if(1E-6>r||n)for(l=0;16>l;++l)d[l]=t[l];else m(d,t,p,(b-a[c])/r)}l=this.computedUp;l[0]=d[1];l[1]=d[5];l[2]=d[9];f(l,l);l=this.computedInverse;h(l,d);b=this.computedEye;a=l[15];b[0]=l[12]/a;b[1]=l[13]/a;b[2]=l[14]/a;a=this.computedCenter;c=Math.exp(this.computedRadius[0]);for(l=0;3>l;++l)a[l]=b[l]-d[2+4*l]*c}};a.idle=function(b){if(!(b<this.lastT())){for(var a=this._components,c=a.length-16,d=0;16>d;++d)a.push(a[c++]);this._time.push(b)}};a.flush=function(b){b=
k.gt(this._time,b)-2;0>b||(this._time.splice(0,b),this._components.splice(0,16*b))};a.lastT=function(){return this._time[this._time.length-1]};a.lookAt=function(b,a,c,e){this.recalcMatrix(b);a=a||this.computedEye;c=c||d;e=e||this.computedUp;this.setMatrix(b,t(this.computedMatrix,a,c,e));for(e=b=0;3>e;++e)b+=Math.pow(c[e]-a[e],2);b=Math.log(Math.sqrt(b));this.computedRadius[0]=b};a.rotate=function(a,c,d,f){this.recalcMatrix(a);var k=this.computedInverse;c&&g(k,k,c);d&&b(k,k,d);f&&e(k,k,f);this.setMatrix(a,
h(this.computedMatrix,k))};var c=[0,0,0];a.pan=function(b,a,d,e){c[0]=-(a||0);c[1]=-(d||0);c[2]=-(e||0);this.recalcMatrix(b);a=this.computedInverse;l(a,a,c);this.setMatrix(b,h(a,a))};a.translate=function(b,a,d,e){c[0]=a||0;c[1]=d||0;c[2]=e||0;this.recalcMatrix(b);a=this.computedMatrix;l(a,a,c);this.setMatrix(b,a)};a.setMatrix=function(b,a){if(!(b<this.lastT()))for(this._time.push(b),b=0;16>b;++b)this._components.push(a[b])};a.setDistance=function(b,a){this.computedRadius[0]=a};a.setDistanceLimits=
function(b,a){var c=this._limits;c[0]=b;c[1]=a};a.getDistanceLimits=function(b){var a=this._limits;return b?(b[0]=a[0],b[1]=a[1],b):a}},{"binary-search-bounds":93,"gl-mat4/invert":268,"gl-mat4/lookAt":269,"gl-mat4/rotateX":274,"gl-mat4/rotateY":275,"gl-mat4/rotateZ":276,"gl-mat4/scale":277,"gl-mat4/translate":278,"gl-vec3/normalize":358,"mat4-interpolate":431}],435:[function(a,q,p){q.exports=function(a){var k=a.length;if(3>k){for(var h=Array(k),b=0;b<k;++b)h[b]=b;return 2===k&&a[0][0]===a[1][0]&&
a[0][1]===a[1][1]?[0]:h}h=Array(k);for(b=0;b<k;++b)h[b]=b;h.sort(function(b,c){var d=a[b][0]-a[c][0];return d?d:a[b][1]-a[c][1]});var g=[h[0],h[1]],e=[h[0],h[1]];for(b=2;b<k;++b){for(var t=h[b],l=a[t],f=g.length;1<f&&0>=n(a[g[f-2]],a[g[f-1]],l);)--f,g.pop();g.push(t);for(f=e.length;1<f&&0<=n(a[e[f-2]],a[e[f-1]],l);)--f,e.pop();e.push(t)}h=Array(e.length+g.length-2);b=k=0;for(t=g.length;b<t;++b)h[k++]=g[b];for(b=e.length-2;0<b;--b)h[k++]=e[b];return h};var n=a("robust-orientation")[3]},{"robust-orientation":508}],
436:[function(a,q,p){q.exports=function(a,m){function h(b){var a=!1;"altKey"in b&&(a=a||b.altKey!==w.alt,w.alt=!!b.altKey);"shiftKey"in b&&(a=a||b.shiftKey!==w.shift,w.shift=!!b.shiftKey);"ctrlKey"in b&&(a=a||b.ctrlKey!==w.control,w.control=!!b.ctrlKey);"metaKey"in b&&(a=a||b.metaKey!==w.meta,w.meta=!!b.metaKey);return a}function b(b,a){var c=n.x(a),d=n.y(a);"buttons"in a&&(b=a.buttons|0);if(b!==r||c!==u||d!==v||h(a))r=b|0,u=c||0,v=d||0,m&&m(r,u,v,w)}function g(a){b(0,a)}function e(){if(r||u||v||
w.shift||w.alt||w.meta||w.control)r=u=v=0,w.shift=w.alt=w.control=w.meta=!1,m&&m(0,0,0,w)}function k(b){h(b)&&m&&m(r,u,v,w)}function l(a){0===n.buttons(a)?b(0,a):b(r,a)}function f(a){b(r|n.buttons(a),a)}function d(a){b(r&~n.buttons(a),a)}function c(){y||(y=!0,a.addEventListener("mousemove",l),a.addEventListener("mousedown",f),a.addEventListener("mouseup",d),a.addEventListener("mouseleave",g),a.addEventListener("mouseenter",g),a.addEventListener("mouseout",g),a.addEventListener("mouseover",g),a.addEventListener("blur",
e),a.addEventListener("keyup",k),a.addEventListener("keydown",k),a.addEventListener("keypress",k),a!==window&&(window.addEventListener("blur",e),window.addEventListener("keyup",k),window.addEventListener("keydown",k),window.addEventListener("keypress",k)))}m||(m=a,a=window);var r=0,u=0,v=0,w={shift:!1,alt:!1,control:!1,meta:!1},y=!1;c();var A={element:a};Object.defineProperties(A,{enabled:{get:function(){return y},set:function(b){b?c():y&&(y=!1,a.removeEventListener("mousemove",l),a.removeEventListener("mousedown",
f),a.removeEventListener("mouseup",d),a.removeEventListener("mouseleave",g),a.removeEventListener("mouseenter",g),a.removeEventListener("mouseout",g),a.removeEventListener("mouseover",g),a.removeEventListener("blur",e),a.removeEventListener("keyup",k),a.removeEventListener("keydown",k),a.removeEventListener("keypress",k),a!==window&&(window.removeEventListener("blur",e),window.removeEventListener("keyup",k),window.removeEventListener("keydown",k),window.removeEventListener("keypress",k)))},enumerable:!0},
buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return u},enumerable:!0},y:{get:function(){return v},enumerable:!0},mods:{get:function(){return w},enumerable:!0}});return A};var n=a("mouse-event")},{"mouse-event":438}],437:[function(a,q,p){var n={left:0,top:0};q.exports=function(a,m,h){m=m||a.currentTarget||a.srcElement;Array.isArray(h)||(h=[0,0]);var b=a.clientX||0;a=a.clientY||0;m=m===window||m===document||m===document.body?n:m.getBoundingClientRect();h[0]=b-m.left;h[1]=a-m.top;
return h}},{}],438:[function(a,q,p){function n(a){return a.target||a.srcElement||window}p.buttons=function(a){if("object"===typeof a){if("buttons"in a)return a.buttons;if("which"in a){a=a.which;if(2===a)return 4;if(3===a)return 2;if(0<a)return 1<<a-1}else if("button"in a){a=a.button;if(1===a)return 4;if(2===a)return 2;if(0<=a)return 1<<a}}return 0};p.element=n;p.x=function(a){if("object"===typeof a){if("offsetX"in a)return a.offsetX;var k=n(a).getBoundingClientRect();return a.clientX-k.left}return 0};
p.y=function(a){if("object"===typeof a){if("offsetY"in a)return a.offsetY;var k=n(a).getBoundingClientRect();return a.clientY-k.top}return 0}},{}],439:[function(a,q,p){var n=a("to-px");q.exports=function(a,m,h){"function"===typeof a&&(h=!!m,m=a,a=window);var b=n("ex",a),g=function(a){h&&a.preventDefault();var e=a.deltaX||0,g=a.deltaY||0,f=a.deltaZ||0,d=1;switch(a.deltaMode){case 1:d=b;break;case 2:d=window.innerHeight}e*=d;g*=d;f*=d;if(e||g||f)return m(e,g,f,a)};a.addEventListener("wheel",g);return g}},
{"to-px":537}],440:[function(a,q,p){function n(b,a,c){for(var d=0,e=0;e<b;++e)a&1<<e&&(d|=1<<c[e]);return d}function k(a,d,c,k,u,v){function f(b,a){q.push("for(","i"+u[b],"\x3d",a,";","i"+u[b],"\x3c","s"+u[b],";","++","i"+u[b],"){")}function r(b){for(var a=0;a<x;++a)q.push("p"+a,"+\x3d","u"+a+"_"+u[b],";");q.push("}")}function A(){for(var b=1;b<1<<p;++b)q.push(l,"\x3d","e"+b,";","e"+b,"\x3d","y"+b,";","y"+b,"\x3d",l,";")}function z(a,c){if(0>a){for(var d=0;d<x;++d)v[d]?q.push("c"+d+"_0","\x3d","d"+
d,".get(","p"+d,");"):q.push("c"+d+"_0","\x3d","d"+d,"[","p"+d,"];");a=[];for(d=0;d<x;++d)a.push("c"+d+"_0");for(d=0;d<k;++d)a.push("x"+d);q.push("b0","\x3d",b,"[",t,"]\x3dphase(",a.join(),");");for(a=1;a<1<<p;++a)q.push("b"+a,"\x3d",b,"[",t,"+","e"+a,"];");d=[];for(a=1;a<1<<p;++a)d.push("(b0!\x3d\x3db"+a+")");q.push("if(",d.join("||"),"){");var e=[];for(d=0;d<p;++d)e.push("i"+d);for(d=0;d<x;++d)for(e.push("c"+d+"_0"),a=1;a<1<<p;++a)v[d]?q.push("c"+d+"_"+a,"\x3d","d"+d,".get(","p"+d,"+","d"+d+"_"+
a,");"):q.push("c"+d+"_"+a,"\x3d","d"+d,"[","p"+d,"+","d"+d+"_"+a,"];"),e.push("c"+d+"_"+a);for(d=0;d<1<<p;++d)e.push("b"+d);for(d=0;d<k;++d)e.push("x"+d);q.push("vertex(",e.join(),");","v0","\x3d",h,"[",t,"]\x3d",g,"++;");d=(1<<p)-1;e="b"+d;for(a=0;a<p;++a)if(0===(c&~(1<<a))){for(var l=d^1<<a,m="b"+l,n=[],w=l;0<w;w=w-1&l)n.push(h+"["+t+"+e"+w+"]");n.push("v0");for(w=0;w<x;++w)a&1?n.push("c"+w+"_"+d,"c"+w+"_"+l):n.push("c"+w+"_"+l,"c"+w+"_"+d);a&1?n.push(e,m):n.push(m,e);for(w=0;w<k;++w)n.push("x"+
w);q.push("if(",e,"!\x3d\x3d",m,"){","face(",n.join(),")}")}q.push("}",t,"+\x3d1;")}else{for(d=a-1;0<=d;--d)f(d,0);e=[];for(d=0;d<x;++d)v[d]?e.push("d"+d+".get(p"+d+")"):e.push("d"+d+"[p"+d+"]");for(d=0;d<k;++d)e.push("x"+d);q.push(b,"[",t,"++]\x3dphase(",e.join(),");");for(d=0;d<a;++d)r(d);for(d=0;d<x;++d)q.push("p"+d,"+\x3d","u"+d+"_"+u[a],";");q.push("if(","s"+u[a],"\x3e0){","i"+u[a],"\x3d1;");z(a-1,c|1<<u[a]);for(d=0;d<x;++d)q.push("p"+d,"+\x3d","u"+d+"_"+u[a],";");a===p-1&&(q.push(t,"\x3d0;"),
A());f(a,2);z(a-1,c);a===p-1&&(q.push("if(","i"+u[p-1],"\x261){",t,"\x3d0;}"),A());r(a);q.push("}")}}var x=v.length,p=u.length;if(2>p)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var B="extractContour"+u.join("_"),q=[],G=[],E=[],F=0;F<x;++F)E.push("a"+F);for(F=0;F<k;++F)E.push("x"+F);for(F=0;F<p;++F)G.push("s"+F+"\x3da0.shape["+F+"]|0");for(F=0;F<x;++F){G.push("d"+F+"\x3da"+F+".data","o"+F+"\x3da"+F+".offset|0");for(var L=0;L<p;++L)G.push("t"+F+"_"+L+"\x3da"+F+".stride["+
L+"]|0")}for(F=0;F<x;++F)for(G.push("p"+F+"\x3do"+F),G.push("c"+F+"_0"),L=1;L<1<<p;++L){for(var J=[],H=0;H<p;++H)L&1<<H&&J.push("-t"+(F+"_"+H));G.push("d"+F+"_"+L+"\x3d("+J.join("")+")|0");G.push("c"+F+"_"+L+"\x3d0")}for(F=0;F<x;++F)for(L=0;L<p;++L)H=["t"+F+"_"+u[L]],0<L&&H.push("t"+F+"_"+u[L-1]+"*s"+u[L-1]),G.push("u"+F+"_"+u[L]+"\x3d("+H.join("-")+")|0");for(F=0;F<p;++F)G.push("i"+F+"\x3d0");G.push(g+"\x3d0");L=["2"];for(F=p-2;0<=F;--F)L.push("s"+u[F]);G.push(e+"\x3d("+L.join("*")+")|0",b+"\x3dmallocUint32("+
e+")",h+"\x3dmallocUint32("+e+")",t+"\x3d0");G.push("b0\x3d0");for(L=1;L<1<<p;++L){F=[];J=[];for(H=0;H<p;++H)L&1<<H&&(0===J.length?F.push("1"):F.unshift(J.join("*"))),J.push("s"+u[H]);H="";0>F[0].indexOf("s"+u[p-2])&&(H="-");J=n(p,L,u);G.push("e"+J+"\x3d(-"+F.join("-")+")|0","y"+J+"\x3d("+H+F.join("-")+")|0","b"+J+"\x3d0")}G.push("v0\x3d0",l+"\x3d0");z(p-1,0);q.push("freeUint32(",h,");freeUint32(",b,");");B=["'use strict';function ",B,"(",E.join(),"){var ",G.join(),";",q.join(""),"}return ",B].join("");
return(new Function("vertex","face","phase","mallocUint32","freeUint32",B))(a,d,c,m.mallocUint32,m.freeUint32)}var m=a("typedarray-pool");q.exports=function(b){function a(b){throw Error("ndarray-extract-contour: "+b);}"object"!==typeof b&&a("Must specify arguments");var c=b.order;Array.isArray(c)||a("Must specify order");var e=b.arrayArguments||1;1>e&&a("Must have at least one array argument");var f=b.scalarArguments||0;0>f&&a("Scalar arg count must be \x3e 0");"function"!==typeof b.vertex&&a("Must specify vertex creation function");
"function"!==typeof b.cell&&a("Must specify cell creation function");"function"!==typeof b.phase&&a("Must specify phase function");for(var g=b.getters||[],h=Array(e),l=0;l<e;++l)0<=g.indexOf(l)?h[l]=!0:h[l]=!1;return k(b.vertex,b.cell,b.phase,f,c,h)};var h="V",b="P",g="N",e="Q",t="X",l="T"},{"typedarray-pool":543}],441:[function(a,q,p){var n=a("cwise/lib/wrapper")({args:["index","array","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_1_arg1_\x3d_inline_1_arg2_.apply(void 0,_inline_1_arg0_)}",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});q.exports=function(a,m){n(a,m);return a}},{"cwise/lib/wrapper":151}],442:[function(a,q,p){function n(b){if(b in h)return h[b];for(var a=[],d=0;d<b;++d)a.push("out",d,"s\x3d0.5*(inp",d,"l-inp",d,"r);");var c=["array"],e=
["junk"];for(d=0;d<b;++d){c.push("array");e.push("out"+d+"s");var l=k(b);l[d]=-1;c.push({array:0,offset:l.slice()});l[d]=1;c.push({array:0,offset:l.slice()});e.push("inp"+d+"l","inp"+d+"r")}return h[b]=m({args:c,pre:g,post:g,body:{body:a.join(""),args:e.map(function(b){return{name:b,lvalue:0===b.indexOf("out"),rvalue:0===b.indexOf("inp"),count:"junk"!==b|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+b})}q.exports=function(a,f,d){if(Array.isArray(d)){if(d.length!==f.dimension)throw Error("ndarray-gradient: invalid boundary conditions");
}else d="string"===typeof d?k(f.dimension,d):k(f.dimension,"clamp");if(a.dimension!==f.dimension+1)throw Error("ndarray-gradient: output dimension must be +1 input dimension");if(a.shape[f.dimension]!==f.dimension)throw Error("ndarray-gradient: output shape must match input shape");for(var c=0;c<f.dimension;++c)if(a.shape[c]!==f.shape[c])throw Error("ndarray-gradient: shape mismatch");if(0===f.size)return a;if(0>=f.dimension)return a.set(0),a;var g=d;d=g.join();c=b[d];if(!c){c=g.length;for(var l=
["function gradient(dst,src){var s\x3dsrc.shape.slice();"],m=0;m<1<<c;++m){for(var w=[],y=0;y<c;++y)m&1<<y&&w.push(y+1);for(var A=0;A<1<<w.length;++A){var z=w.slice();for(y=0;y<w.length;++y)A&1<<y&&(z[y]=-z[y]);y=z;z=c-y.length;for(var x=[],p=[],B=[],q=0;q<c;++q)0<=y.indexOf(q+1)?B.push("0"):0<=y.indexOf(-(q+1))?B.push("s["+q+"]-1"):(B.push("-1"),x.push("1"),p.push("s["+q+"]-2"));p=".lo("+x.join()+").hi("+p.join()+")";0===x.length&&(p="");if(0<z){l.push("if(1");for(q=0;q<c;++q)0<=y.indexOf(q+1)||
0<=y.indexOf(-(q+1))||l.push("\x26\x26s[",q,"]\x3e2");l.push("){grad",z,"(src.pick(",B.join(),")",p);for(q=0;q<c;++q)0<=y.indexOf(q+1)||0<=y.indexOf(-(q+1))||l.push(",dst.pick(",B.join(),",",q,")",p);l.push(");")}for(q=0;q<y.length;++q){x=Math.abs(y[q])-1;var G="dst.pick("+B.join()+","+x+")"+p;switch(g[x]){case "clamp":var E=B.slice(),F=B.slice();0>y[q]?E[x]="s["+x+"]-2":F[x]="1";0===z?l.push("if(s[",x,"]\x3e1){dst.set(",B.join(),",",x,",0.5*(src.get(",E.join(),")-src.get(",F.join(),")))}else{dst.set(",
B.join(),",",x,",0)};"):l.push("if(s[",x,"]\x3e1){diff(",G,",src.pick(",E.join(),")",p,",src.pick(",F.join(),")",p,");}else{zero(",G,");};");break;case "mirror":0===z?l.push("dst.set(",B.join(),",",x,",0);"):l.push("zero(",G,");");break;case "wrap":E=B.slice();F=B.slice();0>y[q]?(E[x]="s["+x+"]-2",F[x]="0"):(E[x]="s["+x+"]-1",F[x]="1");0===z?l.push("if(s[",x,"]\x3e2){dst.set(",B.join(),",",x,",0.5*(src.get(",E.join(),")-src.get(",F.join(),")))}else{dst.set(",B.join(),",",x,",0)};"):l.push("if(s[",
x,"]\x3e2){diff(",G,",src.pick(",E.join(),")",p,",src.pick(",F.join(),")",p,");}else{zero(",G,");};");break;default:throw Error("ndarray-gradient: Invalid boundary condition");}}0<z&&l.push("};")}}l.push("return dst;};return gradient");g=["diff","zero"];w=[e,t];for(m=1;m<=c;++m)g.push("grad"+m),w.push(n(m));g.push(l.join(""));c=Function.apply(void 0,g).apply(void 0,w);h[d]=c}return c(a,f)};var k=a("dup"),m=a("cwise-compiler"),h={},b={},g={body:"",args:[],thisVars:[],localVars:[]},e=m({args:["array",
"array","array"],pre:g,post:g,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out\x3d0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),t=m({args:["array"],pre:g,post:g,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out\x3d0",thisVars:[],localVars:[]},funcName:"zero"})},{"cwise-compiler":148,dup:172}],443:[function(a,q,p){var n=a("ndarray-warp"),k=a("gl-matrix-invert");q.exports=
function(a,h,b){var g=h.dimension,e=k([],b);n(a,h,function(b,a){for(var f=0;f<g;++f){b[f]=e[(g+1)*g+f];for(var d=0;d<g;++d)b[f]+=e[(g+1)*d+f]*a[d]}f=e[(g+1)*(g+1)-1];for(d=0;d<g;++d)f+=e[(g+1)*d+g]*a[d];a=1/f;for(f=0;f<g;++f)b[f]*=a;return b});return a}},{"gl-matrix-invert":280,"ndarray-warp":450}],444:[function(a,q,p){function n(b,a){var e=Math.floor(a);a-=e;var g=0<=e+1&&e+1<b.shape[0],h=0<=e&&e<b.shape[0]?+b.get(e):0;b=g?+b.get(e+1):0;return(1-a)*h+a*b}function k(b,a,e){var g=Math.floor(a);a-=
g;var h=0<=g&&g<b.shape[0],f=0<=g+1&&g+1<b.shape[0],d=Math.floor(e);e-=d;var c=0<=d&&d<b.shape[1],k=0<=d+1&&d+1<b.shape[1],m=h&&c?b.get(g,d):0;h=h&&k?b.get(g,d+1):0;c=f&&c?b.get(g+1,d):0;b=f&&k?b.get(g+1,d+1):0;return(1-e)*((1-a)*m+a*c)+e*((1-a)*h+a*b)}function m(b,a,e,h){var g=Math.floor(a);a-=g;var f=0<=g&&g<b.shape[0],d=0<=g+1&&g+1<b.shape[0],c=Math.floor(e);e-=c;var k=0<=c&&c<b.shape[1],t=0<=c+1&&c+1<b.shape[1],m=Math.floor(h);h-=m;var n=0<=m&&m<b.shape[2],y=0<=m+1&&m+1<b.shape[2],A=f&&k&&n?b.get(g,
c,m):0,z=f&&t&&n?b.get(g,c+1,m):0,x=d&&k&&n?b.get(g+1,c,m):0;n=d&&t&&n?b.get(g+1,c+1,m):0;var p=f&&k&&y?b.get(g,c,m+1):0;f=f&&t&&y?b.get(g,c+1,m+1):0;k=d&&k&&y?b.get(g+1,c,m+1):0;b=d&&t&&y?b.get(g+1,c+1,m+1):0;return(1-h)*((1-e)*((1-a)*A+a*x)+e*((1-a)*z+a*n))+h*((1-e)*((1-a)*p+a*k)+e*((1-a)*f+a*b))}function h(b){var a=b.shape.length|0,e=Array(a),h=Array(a),k=Array(a),f=Array(a),d;for(d=0;d<a;++d){var c=+arguments[d+1];e[d]=Math.floor(c);h[d]=c-e[d];k[d]=0<=e[d]&&e[d]<b.shape[d];f[d]=0<=e[d]+1&&e[d]+
1<b.shape[d]}c=0;var r;d=0;a:for(;d<1<<a;++d){var m=1;var n=b.offset;for(r=0;r<a;++r)if(d&1<<r){if(!f[r])continue a;m*=h[r];n+=b.stride[r]*(e[r]+1)}else{if(!k[r])continue a;m*=1-h[r];n+=b.stride[r]*e[r]}c+=m*b.data[n]}return c}q.exports=function(b,a,e,t){switch(b.shape.length){case 0:return 0;case 1:return n(b,a);case 2:return k(b,a,e);case 3:return m(b,a,e,t);default:return h.apply(void 0,arguments)}};q.exports.d1=n;q.exports.d2=k;q.exports.d3=m},{}],445:[function(a,q,p){function n(b){if(!b)return h;
for(var a=0;a<b.args.length;++a){var d=b.args[a];b.args[a]=0===a?{name:d,lvalue:!0,rvalue:!!b.rvalue,count:b.count||1}:{name:d,lvalue:!1,rvalue:!0,count:1}}b.thisVars||(b.thisVars=[]);b.localVars||(b.localVars=[]);return b}function k(b){for(var a=[],d=0;d<b.args.length;++d)a.push("a"+d);a=new Function("P",["return function ",b.funcName,"_ndarrayops(",a.join(","),") {P(",a.join(","),");return a0}"].join(""));b=m({args:b.args,pre:n(b.pre),body:n(b.body),post:n(b.proc),funcName:b.funcName});return a(b)}
var m=a("cwise-compiler"),h={body:"",args:[],thisVars:[],localVars:[]},b={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"\x26",bor:"|",bxor:"^",lshift:"\x3c\x3c",rshift:"\x3e\x3e",rrshift:"\x3e\x3e\x3e"};(function(){for(var a in b){var c=b[a];p[a]=k({args:["array","array","array"],body:{args:["a","b","c"],body:"a\x3db"+c+"c"},funcName:a});p[a+"eq"]=k({args:["array","array"],body:{args:["a","b"],body:"a"+c+"\x3db"},rvalue:!0,funcName:a+"eq"});p[a+"s"]=k({args:["array","array","scalar"],body:{args:["a",
"b","s"],body:"a\x3db"+c+"s"},funcName:a+"s"});p[a+"seq"]=k({args:["array","scalar"],body:{args:["a","s"],body:"a"+c+"\x3ds"},rvalue:!0,funcName:a+"seq"})}})();var g={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var b in g){var a=g[b];p[b]=k({args:["array","array"],body:{args:["a","b"],body:"a\x3d"+a+"b"},funcName:b});p[b+"eq"]=k({args:["array"],body:{args:["a"],body:"a\x3d"+a+"a"},rvalue:!0,count:2,funcName:b+"eq"})}})();var e={and:"\x26\x26",or:"||",eq:"\x3d\x3d\x3d",neq:"!\x3d\x3d",lt:"\x3c",
gt:"\x3e",leq:"\x3c\x3d",geq:"\x3e\x3d"};(function(){for(var b in e){var a=e[b];p[b]=k({args:["array","array","array"],body:{args:["a","b","c"],body:"a\x3db"+a+"c"},funcName:b});p[b+"s"]=k({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a\x3db"+a+"s"},funcName:b+"s"});p[b+"eq"]=k({args:["array","array"],body:{args:["a","b"],body:"a\x3da"+a+"b"},rvalue:!0,count:2,funcName:b+"eq"});p[b+"seq"]=k({args:["array","scalar"],body:{args:["a","s"],body:"a\x3da"+a+"s"},rvalue:!0,count:2,funcName:b+
"seq"})}})();var t="abs acos asin atan ceil cos exp floor log round sin sqrt tan".split(" ");(function(){for(var b=0;b<t.length;++b){var a=t[b];p[a]=k({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+a,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(b)",thisVars:["this_f"]},funcName:a});p[a+"eq"]=k({args:["array"],pre:{args:[],body:"this_f\x3dMath."+a,thisVars:["this_f"]},body:{args:["a"],body:"a\x3dthis_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:a+"eq"})}})();var l=
["max","min","atan2","pow"];(function(){for(var b=0;b<l.length;++b){var a=l[b];p[a]=k({args:["array","array","array"],pre:{args:[],body:"this_f\x3dMath."+a,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(b,c)",thisVars:["this_f"]},funcName:a});p[a+"s"]=k({args:["array","array","scalar"],pre:{args:[],body:"this_f\x3dMath."+a,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(b,c)",thisVars:["this_f"]},funcName:a+"s"});p[a+"eq"]=k({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+
a,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:a+"eq"});p[a+"seq"]=k({args:["array","scalar"],pre:{args:[],body:"this_f\x3dMath."+a,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:a+"seq"})}})();var f=["atan2","pow"];(function(){for(var b=0;b<f.length;++b){var a=f[b];p[a+"op"]=k({args:["array","array","array"],pre:{args:[],body:"this_f\x3dMath."+a,thisVars:["this_f"]},
body:{args:["a","b","c"],body:"a\x3dthis_f(c,b)",thisVars:["this_f"]},funcName:a+"op"});p[a+"ops"]=k({args:["array","array","scalar"],pre:{args:[],body:"this_f\x3dMath."+a,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(c,b)",thisVars:["this_f"]},funcName:a+"ops"});p[a+"opeq"]=k({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+a,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:a+"opeq"});p[a+"opseq"]=k({args:["array",
"scalar"],pre:{args:[],body:"this_f\x3dMath."+a,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:a+"opseq"})}})();p.any=m({args:["array"],pre:h,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"});p.all=m({args:["array"],pre:h,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],
thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"});p.sum=m({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+\x3da",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"});p.prod=m({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,
count:1}],body:"this_s*\x3da",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"});p.norm2squared=m({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+\x3da*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"});p.norm2=m({args:["array"],pre:{args:[],localVars:[],
thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+\x3da*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"});p.norminf=m({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a\x3ethis_s){this_s\x3d-a}else if(a\x3ethis_s){this_s\x3da}",localVars:[],thisVars:["this_s"]},post:{args:[],
localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"});p.norm1=m({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+\x3da\x3c0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"});p.sup=m({args:["array"],pre:{body:"this_h\x3d-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_\x3ethis_h)this_h\x3d_inline_1_arg0_",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});p.inf=m({args:["array"],pre:{body:"this_h\x3dInfinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_\x3cthis_h)this_h\x3d_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});p.argmin=
m({args:["index","array","shape"],pre:{body:"{this_v\x3dInfinity;this_i\x3d_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_\x3cthis_v){this_v\x3d_inline_1_arg1_;for(var _inline_1_k\x3d0;_inline_1_k\x3c_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]\x3d_inline_1_arg0_[_inline_1_k]}}}",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});p.argmax=m({args:["index","array","shape"],pre:{body:"{this_v\x3d-Infinity;this_i\x3d_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,
count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_\x3ethis_v){this_v\x3d_inline_1_arg1_;for(var _inline_1_k\x3d0;_inline_1_k\x3c_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]\x3d_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});p.random=
k({args:["array"],pre:{args:[],body:"this_f\x3dMath.random",thisVars:["this_f"]},body:{args:["a"],body:"a\x3dthis_f()",thisVars:["this_f"]},funcName:"random"});p.assign=k({args:["array","array"],body:{args:["a","b"],body:"a\x3db"},funcName:"assign"});p.assigns=k({args:["array","scalar"],body:{args:["a","b"],body:"a\x3db"},funcName:"assigns"});p.equals=m({args:["array","array"],pre:h,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!\x3d\x3dy){return false}",
localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":148}],446:[function(a,q,p){var n=a("ndarray"),k=a("./doConvert.js");q.exports=function(a,h){for(var b=[],g=a,e=1;Array.isArray(g);)b.push(g.length),e*=g.length,g=g[0];if(0===b.length)return n();h||(h=n(new Float64Array(e),b));k(h,a);return h}},{"./doConvert.js":447,ndarray:451}],447:[function(a,q,p){q.exports=a("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",
args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v\x3d_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i\x3d0;_inline_1_i\x3c_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v\x3d_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_\x3d_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i",
"_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":148}],448:[function(a,q,p){function n(a){switch(a){case "uint8":return[b.mallocUint8,b.freeUint8];case "uint16":return[b.mallocUint16,b.freeUint16];case "uint32":return[b.mallocUint32,b.freeUint32];case "int8":return[b.mallocInt8,b.freeInt8];case "int16":return[b.mallocInt16,b.freeInt16];case "int32":return[b.mallocInt32,b.freeInt32];case "float32":return[b.mallocFloat,b.freeFloat];
case "float64":return[b.mallocDouble,b.freeDouble];default:return null}}function k(b){for(var a=[],g=0;g<b;++g)a.push("s"+g);for(g=0;g<b;++g)a.push("n"+g);for(g=1;g<b;++g)a.push("d"+g);for(g=1;g<b;++g)a.push("e"+g);for(g=1;g<b;++g)a.push("f"+g);return a}function m(b,a){function e(b){return"generic"===a?["data.get(",b,")"].join(""):["data[",b,"]"].join("")}function g(b,c){return"generic"===a?["data.set(",b,",",c,")"].join(""):["data[",b,"]\x3d",c].join("")}var f=["'use strict'"],d=["ndarrayInsertionSort",
b.join("d"),a].join(""),c=["left","right","data","offset"].concat(k(b.length)),h=n(a),m=["i,j,cptr,ptr\x3dleft*s0+offset"];if(1<b.length){for(var v=[],w=1;w<b.length;++w)m.push("i"+w),v.push("n"+w);h?m.push("scratch\x3dmalloc("+v.join("*")+")"):m.push("scratch\x3dnew Array("+v.join("*")+")");m.push("dptr","sptr","a","b")}else m.push("scratch");f.push(["function ",d,"(",c.join(","),"){var ",m.join(",")].join(""),"for(i\x3dleft+1;i\x3c\x3dright;++i){","j\x3di;ptr+\x3ds0","cptr\x3dptr");if(1<b.length){f.push("dptr\x3d0;sptr\x3dptr");
for(w=b.length-1;0<=w;--w)c=b[w],0!==c&&f.push(["for(i",c,"\x3d0;i",c,"\x3cn",c,";++i",c,"){"].join(""));f.push("scratch[dptr++]\x3d",e("sptr"));for(w=0;w<b.length;++w)c=b[w],0!==c&&f.push("sptr+\x3dd"+c,"}");f.push("__g:while(j--\x3eleft){","dptr\x3d0","sptr\x3dcptr-s0");for(w=1;w<b.length;++w)1===w&&f.push("__l:"),f.push(["for(i",w,"\x3d0;i",w,"\x3cn",w,";++i",w,"){"].join(""));f.push(["a\x3d",e("sptr"),"\nb\x3dscratch[dptr]\nif(a\x3cb){break __g}\nif(a\x3eb){break __l}"].join(""));for(w=b.length-
1;1<=w;--w)f.push("sptr+\x3de"+w,"dptr+\x3df"+w,"}");f.push("dptr\x3dcptr;sptr\x3dcptr-s0");for(w=b.length-1;0<=w;--w)c=b[w],0!==c&&f.push(["for(i",c,"\x3d0;i",c,"\x3cn",c,";++i",c,"){"].join(""));f.push(g("dptr",e("sptr")));for(w=0;w<b.length;++w)c=b[w],0!==c&&f.push(["dptr+\x3dd",c,";sptr+\x3dd",c].join(""),"}");f.push("cptr-\x3ds0\n}");f.push("dptr\x3dcptr;sptr\x3d0");for(w=b.length-1;0<=w;--w)c=b[w],0!==c&&f.push(["for(i",c,"\x3d0;i",c,"\x3cn",c,";++i",c,"){"].join(""));f.push(g("dptr","scratch[sptr++]"));
for(w=0;w<b.length;++w)c=b[w],0!==c&&f.push("dptr+\x3dd"+c,"}")}else f.push("scratch\x3d"+e("ptr"),"while((j--\x3eleft)\x26\x26("+e("cptr-s0")+"\x3escratch)){",g("cptr",e("cptr-s0")),"cptr-\x3ds0","}",g("cptr","scratch"));f.push("}");1<b.length&&h&&f.push("free(scratch)");f.push("} return "+d);if(h)return b=new Function("malloc","free",f.join("\n")),b(h[0],h[1]);b=new Function(f.join("\n"));return b()}function h(b,a,h){function e(b){return["(offset+",b,"*s0)"].join("")}function f(b){return"generic"===
a?["data.get(",b,")"].join(""):["data[",b,"]"].join("")}function d(b,c){return"generic"===a?["data.set(",b,",",c,")"].join(""):["data[",b,"]\x3d",c].join("")}function c(a,c,d){if(1===a.length)G.push("ptr0\x3d"+e(a[0]));else for(var f=0;f<a.length;++f)G.push(["b_ptr",f,"\x3ds0*",a[f]].join(""));c&&G.push("pivot_ptr\x3d0");G.push("ptr_shift\x3doffset");for(f=b.length-1;0<=f;--f){var g=b[f];0!==g&&G.push(["for(i",g,"\x3d0;i",g,"\x3cn",g,";++i",g,"){"].join(""))}if(1<a.length)for(f=0;f<a.length;++f)G.push(["ptr",
f,"\x3db_ptr",f,"+ptr_shift"].join(""));G.push(d);c&&G.push("++pivot_ptr");for(f=0;f<b.length;++f)g=b[f],0!==g&&(1<a.length?G.push("ptr_shift+\x3dd"+g):G.push("ptr0+\x3dd"+g),G.push("}"))}function g(a,c,d,f){if(1===c.length)G.push("ptr0\x3d"+e(c[0]));else{for(var g=0;g<c.length;++g)G.push(["b_ptr",g,"\x3ds0*",c[g]].join(""));G.push("ptr_shift\x3doffset")}d&&G.push("pivot_ptr\x3d0");a&&G.push(a+":");for(g=1;g<b.length;++g)G.push(["for(i",g,"\x3d0;i",g,"\x3cn",g,";++i",g,"){"].join(""));if(1<c.length)for(g=
0;g<c.length;++g)G.push(["ptr",g,"\x3db_ptr",g,"+ptr_shift"].join(""));G.push(f);for(g=b.length-1;1<=g;--g)d&&G.push("pivot_ptr+\x3df"+g),1<c.length?G.push("ptr_shift+\x3de"+g):G.push("ptr0+\x3de"+g),G.push("}")}function t(){1<b.length&&L&&G.push("free(pivot1)","free(pivot2)")}function m(a,c){a="el"+a;c="el"+c;if(1<b.length){var d="__l"+ ++J;g(d,[a,c],!1,["comp\x3d",f("ptr0"),"-",f("ptr1"),"\nif(comp\x3e0){tmp0\x3d",a,";",a,"\x3d",c,";",c,"\x3dtmp0;break ",d,"}\nif(comp\x3c0){break ",d,"}"].join(""))}else G.push(["if(",
f(e(a)),"\x3e",f(e(c)),"){tmp0\x3d",a,";",a,"\x3d",c,";",c,"\x3dtmp0}"].join(""))}function w(a,g){1<b.length?c([a,g],!1,d("ptr0",f("ptr1"))):G.push(d(e(a),f(e(g))))}function y(a,c,d){if(1<b.length){var h="__l"+ ++J;g(h,[c],!0,[a,"\x3d",f("ptr0"),"-pivot",d,"[pivot_ptr]\nif(",a,"!\x3d\x3d0){break ",h,"}"].join(""))}else G.push([a,"\x3d",f(e(c)),"-pivot",d].join(""))}function A(a,g){1<b.length?c([a,g],!1,["tmp\x3d",f("ptr0"),"\n",d("ptr0",f("ptr1")),"\n",d("ptr1","tmp")].join("")):G.push(["ptr0\x3d",
e(a),"\nptr1\x3d",e(g),"\ntmp\x3d",f("ptr0"),"\n",d("ptr0",f("ptr1")),"\n",d("ptr1","tmp")].join(""))}function z(a,g,h){1<b.length?(c([a,g,h],!1,["tmp\x3d",f("ptr0"),"\n",d("ptr0",f("ptr1")),"\n",d("ptr1",f("ptr2")),"\n",d("ptr2","tmp")].join("")),G.push("++"+g,"--"+h)):G.push(["ptr0\x3d",e(a),"\nptr1\x3d",e(g),"\nptr2\x3d",e(h),"\n++",g,"\n--",h,"\ntmp\x3d",f("ptr0"),"\n",d("ptr0",f("ptr1")),"\n",d("ptr1",f("ptr2")),"\n",d("ptr2","tmp")].join(""))}function x(b,a){A(b,a);G.push("--"+a)}function p(a,
g,h){1<b.length?c([a,g],!0,[d("ptr0",f("ptr1")),"\n",d("ptr1",["pivot",h,"[pivot_ptr]"].join(""))].join("")):G.push(d(e(a),f(e(g))),d(e(g),"pivot"+h))}function B(a,c){G.push(["if((",c,"-",a,")\x3c\x3d32){\ninsertionSort(",a,",",c,",data,offset,",k(b.length).join(","),")\n}else{\n",E,"(",a,",",c,",data,offset,",k(b.length).join(","),")\n}"].join(""))}function q(a,d,g){1<b.length?(G.push(["__l",++J,":while(true){"].join("")),c([a],!0,["if(",f("ptr0"),"!\x3d\x3dpivot",d,"[pivot_ptr]){break __l",J,"}"].join("")),
G.push(g,"}")):G.push(["while(",f(e(a)),"\x3d\x3d\x3dpivot",d,"){",g,"}"].join(""))}var G=["'use strict'"],E=["ndarrayQuickSort",b.join("d"),a].join(""),F=["left","right","data","offset"].concat(k(b.length)),L=n(a),J=0;G.push(["function ",E,"(",F.join(","),"){"].join(""));F="sixth\x3d((right-left+1)/6)|0 index1\x3dleft+sixth index5\x3dright-sixth index3\x3d(left+right)\x3e\x3e1 index2\x3dindex3-sixth index4\x3dindex3+sixth el1\x3dindex1 el2\x3dindex2 el3\x3dindex3 el4\x3dindex4 el5\x3dindex5 less\x3dleft+1 great\x3dright-1 pivots_are_equal\x3dtrue tmp tmp0 x y z k ptr0 ptr1 ptr2 comp_pivot1\x3d0 comp_pivot2\x3d0 comp\x3d0".split(" ");
if(1<b.length){for(var H=[],K=1;K<b.length;++K)H.push("n"+K),F.push("i"+K);for(K=0;8>K;++K)F.push("b_ptr"+K);F.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize\x3d"+H.join("*"));L?F.push("pivot1\x3dmalloc(elementSize)","pivot2\x3dmalloc(elementSize)"):F.push("pivot1\x3dnew Array(elementSize),pivot2\x3dnew Array(elementSize)")}else F.push("pivot1","pivot2");G.push("var "+F.join(","));m(1,2);m(4,5);m(1,3);m(2,3);m(1,4);m(3,4);m(2,5);m(2,3);m(4,5);1<b.length?c("el1 el2 el3 el4 el5 index1 index3 index5".split(" "),
!0,["pivot1[pivot_ptr]\x3d",f("ptr1"),"\npivot2[pivot_ptr]\x3d",f("ptr3"),"\npivots_are_equal\x3dpivots_are_equal\x26\x26(pivot1[pivot_ptr]\x3d\x3d\x3dpivot2[pivot_ptr])\nx\x3d",f("ptr0"),"\ny\x3d",f("ptr2"),"\nz\x3d",f("ptr4"),"\n",d("ptr5","x"),"\n",d("ptr6","y"),"\n",d("ptr7","z")].join("")):G.push(["pivot1\x3d",f(e("el2")),"\npivot2\x3d",f(e("el4")),"\npivots_are_equal\x3dpivot1\x3d\x3d\x3dpivot2\nx\x3d",f(e("el1")),"\ny\x3d",f(e("el3")),"\nz\x3d",f(e("el5")),"\n",d(e("index1"),"x"),"\n",d(e("index3"),
"y"),"\n",d(e("index5"),"z")].join(""));w("index2","left");w("index4","right");G.push("if(pivots_are_equal){");G.push("for(k\x3dless;k\x3c\x3dgreat;++k){");y("comp","k",1);G.push("if(comp\x3d\x3d\x3d0){continue}");G.push("if(comp\x3c0){");G.push("if(k!\x3d\x3dless){");A("k","less");G.push("}");G.push("++less");G.push("}else{");G.push("while(true){");y("comp","great",1);G.push("if(comp\x3e0){");G.push("great--");G.push("}else if(comp\x3c0){");z("k","less","great");G.push("break");G.push("}else{");
x("k","great");G.push("break");G.push("}");G.push("}");G.push("}");G.push("}");G.push("}else{");G.push("for(k\x3dless;k\x3c\x3dgreat;++k){");y("comp_pivot1","k",1);G.push("if(comp_pivot1\x3c0){");G.push("if(k!\x3d\x3dless){");A("k","less");G.push("}");G.push("++less");G.push("}else{");y("comp_pivot2","k",2);G.push("if(comp_pivot2\x3e0){");G.push("while(true){");y("comp","great",2);G.push("if(comp\x3e0){");G.push("if(--great\x3ck){break}");G.push("continue");G.push("}else{");y("comp","great",1);G.push("if(comp\x3c0){");
z("k","less","great");G.push("}else{");x("k","great");G.push("}");G.push("break");G.push("}");G.push("}");G.push("}");G.push("}");G.push("}");G.push("}");p("left","(less-1)",1);p("right","(great+1)",2);B("left","(less-2)");B("(great+2)","right");G.push("if(pivots_are_equal){");t();G.push("return");G.push("}");G.push("if(less\x3cindex1\x26\x26great\x3eindex5){");q("less",1,"++less");q("great",2,"--great");G.push("for(k\x3dless;k\x3c\x3dgreat;++k){");y("comp_pivot1","k",1);G.push("if(comp_pivot1\x3d\x3d\x3d0){");
G.push("if(k!\x3d\x3dless){");A("k","less");G.push("}");G.push("++less");G.push("}else{");y("comp_pivot2","k",2);G.push("if(comp_pivot2\x3d\x3d\x3d0){");G.push("while(true){");y("comp","great",2);G.push("if(comp\x3d\x3d\x3d0){");G.push("if(--great\x3ck){break}");G.push("continue");G.push("}else{");y("comp","great",1);G.push("if(comp\x3c0){");z("k","less","great");G.push("}else{");x("k","great");G.push("}");G.push("break");G.push("}");G.push("}");G.push("}");G.push("}");G.push("}");G.push("}");t();
B("less","great");G.push("}return "+E);if(1<b.length&&L)return F=new Function("insertionSort","malloc","free",G.join("\n")),F(h,L[0],L[1]);F=new Function("insertionSort",G.join("\n"));return F(h)}var b=a("typedarray-pool");q.exports=function(b,a){var e=["'use strict'"],g=["ndarraySortWrapper",b.join("d"),a].join("");e.push(["function ",g,"(array){"].join(""));for(var f=["data\x3darray.data,offset\x3darray.offset|0,shape\x3darray.shape,stride\x3darray.stride"],d=0;d<b.length;++d)f.push(["s",d,"\x3dstride[",
d,"]|0,n",d,"\x3dshape[",d,"]|0"].join(""));var c=Array(b.length),r=[];for(d=0;d<b.length;++d){var u=b[d];0!==u&&(c[u]=0===r.length?"1":r.join("*"),r.push("n"+u))}var n=r=-1;for(d=0;d<b.length;++d)u=b[d],0!==u&&(0<r?f.push(["d",u,"\x3ds",u,"-d",r,"*n",r].join("")):f.push(["d",u,"\x3ds",u].join("")),r=u),u=b.length-1-d,0!==u&&(0<n?f.push(["e",u,"\x3ds",u,"-e",n,"*n",n,",f",u,"\x3d",c[u],"-f",n,"*n",n].join("")):f.push(["e",u,"\x3ds",u,",f",u,"\x3d",c[u]].join("")),n=u);e.push("var "+f.join(","));f=
["0","n0-1","data","offset"].concat(k(b.length));e.push(["if(n0\x3c\x3d32){insertionSort(",f.join(","),")}else{quickSort(",f.join(","),")}"].join(""));e.push("}return "+g);e=new Function("insertionSort","quickSort",e.join("\n"));g=m(b,a);b=h(b,a,g);return e(g,b)}},{"typedarray-pool":543}],449:[function(a,q,p){var n=a("./lib/compile_sort.js"),k={};q.exports=function(a){var h=a.order,b=a.dtype,g=[h,b].join(":"),e=k[g];e||(k[g]=e=n(h,b));e(a);return a}},{"./lib/compile_sort.js":448}],450:[function(a,
q,p){var n=a("ndarray-linear-interpolate"),k=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped\x3dnew Array(_inline_3_arg4_)}",args:[{name:"_inline_3_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_3_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_3_arg2_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_3_arg3_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_3_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_4_arg2_(this_warped,_inline_4_arg0_),_inline_4_arg1_\x3d_inline_4_arg3_.apply(void 0,this_warped)}",
args:[{name:"_inline_4_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_4_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_4_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_4_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_4_arg4_",lvalue:!1,rvalue:!1,count:0}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warpND",blockSize:64}),m=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped\x3d[0]}",
args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_7_arg2_(this_warped,_inline_7_arg0_),_inline_7_arg1_\x3d_inline_7_arg3_(_inline_7_arg4_,this_warped[0])}",args:[{name:"_inline_7_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_7_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",
args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp1D",blockSize:64}),h=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped\x3d[0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_10_arg2_(this_warped,_inline_10_arg0_),_inline_10_arg1_\x3d_inline_10_arg3_(_inline_10_arg4_,this_warped[0],this_warped[1])}",args:[{name:"_inline_10_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_10_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_10_arg2_",
lvalue:!1,rvalue:!0,count:1},{name:"_inline_10_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_10_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp2D",blockSize:64}),b=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped\x3d[0,0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_13_arg2_(this_warped,_inline_13_arg0_),_inline_13_arg1_\x3d_inline_13_arg3_(_inline_13_arg4_,this_warped[0],this_warped[1],this_warped[2])}",
args:[{name:"_inline_13_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_13_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp3D",blockSize:64});q.exports=function(a,e,t){switch(e.shape.length){case 1:m(a,t,n.d1,e);break;case 2:h(a,t,n.d2,
e);break;case 3:b(a,t,n.d3,e);break;default:k(a,t,n.bind(void 0,e),e.shape.length)}return a}},{"cwise/lib/wrapper":151,"ndarray-linear-interpolate":444}],451:[function(a,q,p){function n(b,a){return b[0]-a[0]}function k(){var b=this.stride,a=Array(b.length),d;for(d=0;d<a.length;++d)a[d]=[Math.abs(b[d]),d];a.sort(n);b=Array(a.length);for(d=0;d<b.length;++d)b[d]=a[d][1];return b}function m(a,e){var d=["View",e,"d",a].join("");0>e&&(d="View_Nil"+a);var c="generic"===a;if(-1===e)return e=new Function("function "+
d+"(a){this.data\x3da;};var proto\x3d"+d+".prototype;proto.dtype\x3d'"+a+"';proto.index\x3dfunction(){return -1};proto.size\x3d0;proto.dimension\x3d-1;proto.shape\x3dproto.stride\x3dproto.order\x3d[];proto.lo\x3dproto.hi\x3dproto.transpose\x3dproto.step\x3dfunction(){return new "+d+"(this.data);};proto.get\x3dproto.set\x3dfunction(){};proto.pick\x3dfunction(){return null};return function construct_"+d+"(a){return new "+d+"(a);}"),e();if(0===e)return e=new Function("TrivialArray","function "+d+"(a,d) {this.data \x3d a;this.offset \x3d d};var proto\x3d"+
d+".prototype;proto.dtype\x3d'"+a+"';proto.index\x3dfunction(){return this.offset};proto.dimension\x3d0;proto.size\x3d1;proto.shape\x3dproto.stride\x3dproto.order\x3d[];proto.lo\x3dproto.hi\x3dproto.transpose\x3dproto.step\x3dfunction "+d+"_copy() {return new "+d+"(this.data,this.offset)};proto.pick\x3dfunction "+d+"_pick(){return TrivialArray(this.data);};proto.valueOf\x3dproto.get\x3dfunction "+d+"_get(){return "+(c?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set\x3dfunction "+
d+"_set(v){return "+(c?"this.data.set(this.offset,v)":"this.data[this.offset]\x3dv")+"};return function construct_"+d+"(a,b,c,d){return new "+d+"(a,d)}"),e(t[a][0]);var f=["'use strict'"];var g=b(e),h=g.map(function(b){return"i"+b}),l="this.offset+"+g.map(function(b){return"this.stride["+b+"]*i"+b}).join("+"),m=g.map(function(b){return"b"+b}).join(","),n=g.map(function(b){return"c"+b}).join(",");f.push("function "+d+"(a,"+m+","+n+",d){this.data\x3da","this.shape\x3d["+m+"]","this.stride\x3d["+n+"]",
"this.offset\x3dd|0}","var proto\x3d"+d+".prototype","proto.dtype\x3d'"+a+"'","proto.dimension\x3d"+e);f.push("Object.defineProperty(proto,'size',{get:function "+d+"_size(){return "+g.map(function(b){return"this.shape["+b+"]"}).join("*"),"}})");1===e?f.push("proto.order\x3d[0]"):(f.push("Object.defineProperty(proto,'order',{get:"),4>e?(f.push("function "+d+"_order(){"),2===e?f.push("return (Math.abs(this.stride[0])\x3eMath.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&f.push("var s0\x3dMath.abs(this.stride[0]),s1\x3dMath.abs(this.stride[1]),s2\x3dMath.abs(this.stride[2]);if(s0\x3es1){if(s1\x3es2){return [2,1,0];}else if(s0\x3es2){return [1,2,0];}else{return [1,0,2];}}else if(s0\x3es2){return [2,0,1];}else if(s2\x3es1){return [0,1,2];}else{return [0,2,1];}}})")):
f.push("ORDER})"));f.push("proto.set\x3dfunction "+d+"_set("+h.join(",")+",v){");c?f.push("return this.data.set("+l+",v)}"):f.push("return this.data["+l+"]\x3dv}");f.push("proto.get\x3dfunction "+d+"_get("+h.join(",")+"){");c?f.push("return this.data.get("+l+")}"):f.push("return this.data["+l+"]}");f.push("proto.index\x3dfunction "+d+"_index(",h.join(),"){return "+l+"}");f.push("proto.hi\x3dfunction "+d+"_hi("+h.join(",")+"){return new "+d+"(this.data,"+g.map(function(b){return["(typeof i",b,"!\x3d\x3d'number'||i",
b,"\x3c0)?this.shape[",b,"]:i",b,"|0"].join("")}).join(",")+","+g.map(function(b){return"this.stride["+b+"]"}).join(",")+",this.offset)}");c=g.map(function(b){return"a"+b+"\x3dthis.shape["+b+"]"});l=g.map(function(b){return"c"+b+"\x3dthis.stride["+b+"]"});f.push("proto.lo\x3dfunction "+d+"_lo("+h.join(",")+"){var b\x3dthis.offset,d\x3d0,"+c.join(",")+","+l.join(","));for(c=0;c<e;++c)f.push("if(typeof i"+c+"\x3d\x3d\x3d'number'\x26\x26i"+c+"\x3e\x3d0){d\x3di"+c+"|0;b+\x3dc"+c+"*d;a"+c+"-\x3dd}");f.push("return new "+
d+"(this.data,"+g.map(function(b){return"a"+b}).join(",")+","+g.map(function(b){return"c"+b}).join(",")+",b)}");f.push("proto.step\x3dfunction "+d+"_step("+h.join(",")+"){var "+g.map(function(b){return"a"+b+"\x3dthis.shape["+b+"]"}).join(",")+","+g.map(function(b){return"b"+b+"\x3dthis.stride["+b+"]"}).join(",")+",c\x3dthis.offset,d\x3d0,ceil\x3dMath.ceil");for(c=0;c<e;++c)f.push("if(typeof i"+c+"\x3d\x3d\x3d'number'){d\x3di"+c+"|0;if(d\x3c0){c+\x3db"+c+"*(a"+c+"-1);a"+c+"\x3dceil(-a"+c+"/d)}else{a"+
c+"\x3dceil(a"+c+"/d)}b"+c+"*\x3dd}");f.push("return new "+d+"(this.data,"+g.map(function(b){return"a"+b}).join(",")+","+g.map(function(b){return"b"+b}).join(",")+",c)}");l=Array(e);m=Array(e);for(c=0;c<e;++c)l[c]="a[i"+c+"]",m[c]="b[i"+c+"]";f.push("proto.transpose\x3dfunction "+d+"_transpose("+h+"){"+h.map(function(b,a){return b+"\x3d("+b+"\x3d\x3d\x3dundefined?"+a+":"+b+"|0)"}).join(";"),"var a\x3dthis.shape,b\x3dthis.stride;return new "+d+"(this.data,"+l.join(",")+","+m.join(",")+",this.offset)}");
f.push("proto.pick\x3dfunction "+d+"_pick("+h+"){var a\x3d[],b\x3d[],c\x3dthis.offset");for(c=0;c<e;++c)f.push("if(typeof i"+c+"\x3d\x3d\x3d'number'\x26\x26i"+c+"\x3e\x3d0){c\x3d(c+this.stride["+c+"]*i"+c+")|0}else{a.push(this.shape["+c+"]);b.push(this.stride["+c+"])}");f.push("var ctor\x3dCTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");f.push("return function construct_"+d+"(data,shape,stride,offset){return new "+d+"(data,"+g.map(function(b){return"shape["+b+"]"}).join(",")+","+g.map(function(b){return"stride["+
b+"]"}).join(",")+",offset)}");e=new Function("CTOR_LIST","ORDER",f.join("\n"));return e(t[a],k)}function h(b){if(g(b))return"buffer";if(e)switch(Object.prototype.toString.call(b)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";
case "[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(b)?"array":"generic"}var b=a("iota-array"),g=a("is-buffer"),e="undefined"!==typeof Float64Array,t={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var b in t)t[b].push(m(b,-1))});q.exports=function(b,a,d,c){if(void 0===b){var e=t.array[0];return e([])}"number"===typeof b&&(b=[b]);void 0===a&&(a=[b.length]);e=a.length;if(void 0===
d){d=Array(e);for(var f=e-1,g=1;0<=f;--f)d[f]=g,g*=a[f]}if(void 0===c)for(f=c=0;f<e;++f)0>d[f]&&(c-=(a[f]-1)*d[f]);f=h(b);for(g=t[f];g.length<=e+1;)g.push(m(f,g.length-1));e=g[e+1];return e(b,a,d,c)}},{"iota-array":417,"is-buffer":419}],452:[function(a,q,p){var n=a("double-bits"),k=Math.pow(2,-1074);q.exports=function(a,h){if(isNaN(a)||isNaN(h))return NaN;if(a===h)return a;if(0===a)return 0>h?-k:k;var b=n.hi(a),g=n.lo(a);h>a===0<a?4294967295===g?(b+=1,g=0):g+=1:0===g?(g=4294967295,--b):--g;return n.pack(g,
b)}},{"double-bits":169}],453:[function(a,q,p){function n(b,a,g,f){return["C",b,a,g,f,g,f]}function k(b,a,g,f,d,c){return["C",b/3+2/3*g,a/3+2/3*f,d/3+2/3*g,c/3+2/3*f,d,c]}function m(a,k,l,f,d,c,r,u,n,w){if(w)x=w[0],c=w[1],t=w[2],v=w[3];else{x=h(a,k,-d);a=x.x;k=x.y;x=h(u,n,-d);u=x.x;n=x.y;x=(a-u)/2;t=(k-n)/2;v=x*x/(l*l)+t*t/(f*f);1<v&&(v=Math.sqrt(v),l*=v,f*=v);v=l*l;var e=f*f;c=(c==r?-1:1)*Math.sqrt(Math.abs((v*e-v*t*t-e*x*x)/(v*t*t+e*x*x)));Infinity==c&&(c=1);var t=c*l*t/f+(a+u)/2,v=c*-f*x/l+(k+
n)/2,x=Math.asin(((k-v)/f).toFixed(9));c=Math.asin(((n-v)/f).toFixed(9));x=a<t?b-x:x;c=u<t?b-c:c;0>x&&(x=2*b+x);0>c&&(c=2*b+c);r&&x>c&&(x-=2*b);!r&&c>x&&(c-=2*b)}if(Math.abs(c-x)>g){var p=c;e=u;var B=n;c=x+g*(r&&c>x?1:-1);u=t+l*Math.cos(c);n=v+f*Math.sin(c);p=m(u,n,l,f,d,0,r,e,B,[c,p,t,v])}r=Math.tan((c-x)/4);l=4/3*l*r;f=4/3*f*r;a=[2*a-(a+l*Math.sin(x)),2*k-(k-f*Math.cos(x)),u+l*Math.sin(c),n-f*Math.cos(c),u,n];if(w)return a;p&&(a=a.concat(p));for(w=0;w<a.length;)k=h(a[w],a[w+1],d),a[w++]=k.x,a[w++]=
k.y;return a}function h(b,a,g){return{x:b*Math.cos(g)-a*Math.sin(g),y:b*Math.sin(g)+a*Math.cos(g)}}var b=Math.PI,g=b/180*120;q.exports=function(a){for(var e,g=[],f=0,d=0,c=0,h=0,u=null,v=null,w=0,y=0,A=0,z=a.length;A<z;A++){var x=a[A],p=x[0];switch(p){case "M":c=x[1];h=x[2];break;case "A":x=m(w,y,x[1],x[2],b/180*x[3],x[4],x[5],x[6],x[7]);x.unshift("C");7<x.length&&(g.push(x.splice(0,7)),x.unshift("C"));break;case "S":if("C"==e||"S"==e)w+=w-f,y+=y-d;x=["C",w,y,x[1],x[2],x[3],x[4]];break;case "T":"Q"==
e||"T"==e?(u=2*w-u,v=2*y-v):(u=w,v=y);x=k(w,y,u,v,x[1],x[2]);break;case "Q":u=x[1];v=x[2];x=k(w,y,x[1],x[2],x[3],x[4]);break;case "L":x=n(w,y,x[1],x[2]);break;case "H":x=n(w,y,x[1],y);break;case "V":x=n(w,y,w,x[1]);break;case "Z":x=n(w,y,c,h)}e=p;w=x[x.length-2];y=x[x.length-1];4<x.length?(f=x[x.length-4],d=x[x.length-3]):(f=w,d=y);g.push(x)}return g}},{}],454:[function(a,q,p){p.vertexNormals=function(a,k,m){var h=k.length,b=Array(h);m=void 0===m?1E-6:m;for(var g=0;g<h;++g)b[g]=[0,0,0];for(g=0;g<
a.length;++g)for(var e=a[g],t,l=e[e.length-1],f=e[0],d=0;d<e.length;++d){t=l;l=f;f=e[(d+1)%e.length];var c=k[t],r=k[l],u=k[f],n=Array(3),w=0,y=Array(3),A=0;for(t=0;3>t;++t)n[t]=c[t]-r[t],w+=n[t]*n[t],y[t]=u[t]-r[t],A+=y[t]*y[t];if(w*A>m)for(c=b[l],w=1/Math.sqrt(w*A),t=0;3>t;++t)A=(t+1)%3,r=(t+2)%3,c[t]+=w*(y[A]*n[r]-y[r]*n[A])}for(g=0;g<h;++g){c=b[g];for(t=a=0;3>t;++t)a+=c[t]*c[t];if(a>m)for(w=1/Math.sqrt(a),t=0;3>t;++t)c[t]*=w;else for(t=0;3>t;++t)c[t]=0}return b};p.faceNormals=function(a,k,m){var h=
a.length,b=Array(h);m=void 0===m?1E-6:m;for(var g=0;g<h;++g){for(var e=a[g],t=Array(3),l=0;3>l;++l)t[l]=k[e[l]];e=Array(3);var f=Array(3);for(l=0;3>l;++l)e[l]=t[1][l]-t[0][l],f[l]=t[2][l]-t[0][l];t=Array(3);var d=0;for(l=0;3>l;++l){var c=(l+1)%3,r=(l+2)%3;t[l]=e[c]*f[r]-e[r]*f[c];d+=t[l]*t[l]}d=d>m?1/Math.sqrt(d):0;for(l=0;3>l;++l)t[l]*=d;b[g]=t}return b}},{}],455:[function(a,q,p){var n=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;q.exports=
function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var b={};for(a=0;10>a;a++)b["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var g={};"abcdefghijklmnopqrst".split("").forEach(function(b){g[b]=b});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},g)).join("")?!1:!0}catch(e){return!1}}()?Object.assign:function(a,b){if(null===a||void 0===
a)throw new TypeError("Object.assign cannot be called with null or undefined");var g=Object(a);for(var e,h=1;h<arguments.length;h++){var l=Object(arguments[h]);for(var f in l)k.call(l,f)&&(g[f]=l[f]);if(n){e=n(l);for(var d=0;d<e.length;d++)m.call(l,e[d])&&(g[e[d]]=l[e[d]])}}return g}},{}],456:[function(a,q,p){q.exports=function(a,k,m,h,b,g,e,t,l,f){var d=k+g+f;if(0<c){var c=Math.sqrt(d+1);a[0]=.5*(e-l)/c;a[1]=.5*(t-h)/c;a[2]=.5*(m-g)/c;a[3]=.5*c}else f=Math.max(k,g,f),c=Math.sqrt(2*f-d+1),k>=f?(a[0]=
.5*c,a[1]=.5*(b+m)/c,a[2]=.5*(t+h)/c,a[3]=.5*(e-l)/c):g>=f?(a[0]=.5*(m+b)/c,a[1]=.5*c,a[2]=.5*(l+e)/c,a[3]=.5*(t-h)/c):(a[0]=.5*(h+t)/c,a[1]=.5*(e+l)/c,a[2]=.5*c,a[3]=.5*(m-b)/c);return a}},{}],457:[function(a,q,p){function n(b,a,c){return Math.sqrt(Math.pow(b,2)+Math.pow(a,2)+Math.pow(c,2))}function k(b,a,c,e){return Math.sqrt(Math.pow(b,2)+Math.pow(a,2)+Math.pow(c,2)+Math.pow(e,2))}function m(b,a){var c=a[0],d=a[1],e=a[2];a=a[3];var f=k(c,d,e,a);1E-6<f?(b[0]=c/f,b[1]=d/f,b[2]=e/f,b[3]=a/f):(b[0]=
b[1]=b[2]=0,b[3]=1)}function h(a,d,c){this.radius=b([c]);this.center=b(d);this.rotation=b(a);this.computedRadius=this.radius.curve(0);this.computedCenter=this.center.curve(0);this.computedRotation=this.rotation.curve(0);this.computedUp=[.1,0,0];this.computedEye=[.1,0,0];this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.recalcMatrix(0)}q.exports=function(b){b=b||{};var a=b.center||[0,0,0],c=b.rotation||[0,0,0,1],e=b.radius||1;a=[].slice.call(a,0,3);c=[].slice.call(c,0,4);m(c,c);a=new h(c,
a,Math.log(e));a.setDistanceLimits(b.zoomMin,b.zoomMax);("eye"in b||"up"in b)&&a.lookAt(0,b.eye,b.center,b.up);return a};var b=a("filtered-vector"),g=a("gl-mat4/lookAt"),e=a("gl-mat4/fromQuat"),t=a("gl-mat4/invert"),l=a("./lib/quatFromFrame");a=h.prototype;a.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())};a.recalcMatrix=function(b){this.radius.curve(b);this.center.curve(b);this.rotation.curve(b);var a=this.computedRotation;m(a,a);b=this.computedMatrix;
e(b,a);var c=this.computedCenter;a=this.computedEye;var f=this.computedUp,g=Math.exp(this.computedRadius[0]);a[0]=c[0]+g*b[2];a[1]=c[1]+g*b[6];a[2]=c[2]+g*b[10];f[0]=b[1];f[1]=b[5];f[2]=b[9];for(c=0;3>c;++c){for(g=f=0;3>g;++g)f+=b[c+4*g]*a[g];b[12+c]=-f}};a.getMatrix=function(b,a){this.recalcMatrix(b);b=this.computedMatrix;if(a){for(var c=0;16>c;++c)a[c]=b[c];return a}return b};a.idle=function(b){this.center.idle(b);this.radius.idle(b);this.rotation.idle(b)};a.flush=function(b){this.center.flush(b);
this.radius.flush(b);this.rotation.flush(b)};a.pan=function(b,a,c,e){a=a||0;c=c||0;e=e||0;this.recalcMatrix(b);var d=this.computedMatrix,f=d[1],g=d[5],h=d[9],k=n(f,g,h);f/=k;g/=k;h/=k;k=d[0];var l=d[4],r=d[8],t=k*f+l*g+r*h;k-=f*t;l-=g*t;r-=h*t;t=n(k,l,r);k/=t;l/=t;r/=t;t=d[2];var m=d[6];d=d[10];var p=t*f+m*g+d*h,q=t*k+m*l+d*r;n(t-(p*f+q*k),m-(p*g+q*l),d-(p*h+q*r));this.center.move(b,k*a+f*c,l*a+g*c,r*a+h*c);a=Math.exp(this.computedRadius[0]);a=Math.max(1E-4,a+e);this.radius.set(b,Math.log(a))};a.rotate=
function(b,a,c,e){this.recalcMatrix(b);a=a||0;c=c||0;var d=this.computedMatrix,f=d[2],g=d[6],h=d[10],l=a*d[0]+c*d[1],r=a*d[4]+c*d[5];d=a*d[8]+c*d[9];c=-(g*d-h*r);d=-(h*l-f*d);l=-(f*r-g*l);r=Math.sqrt(Math.max(0,1-Math.pow(c,2)-Math.pow(d,2)-Math.pow(l,2)));var t=k(c,d,l,r);1E-6<t?(c/=t,d/=t,l/=t,r/=t):(c=d=l=0,r=1);t=this.computedRotation;var m=t[0],B=t[1],p=t[2],q=t[3];t=m*r+q*c+B*l-p*d;var E=B*r+q*d+p*c-m*l,F=p*r+q*l+m*d-B*c;m=q*r-m*c-B*d-p*l;e&&(c=f,d=g,l=h,e=Math.sin(e)/n(c,d,l),c*=e,d*=e,l*=
e,r=Math.cos(a),t=t*r+m*c+E*l-F*d,E=E*r+m*d+F*c-t*l,F=F*r+m*l+t*d-E*c,m=m*r-t*c-E*d-F*l);a=k(t,E,F,m);1E-6<a?(t/=a,E/=a,F/=a,m/=a):(t=E=F=0,m=1);this.rotation.set(b,t,E,F,m)};a.lookAt=function(b,a,c,e){this.recalcMatrix(b);c=c||this.computedCenter;a=a||this.computedEye;e=e||this.computedUp;var d=this.computedMatrix;g(d,a,c,e);e=this.computedRotation;l(e,d[0],d[1],d[2],d[4],d[5],d[6],d[8],d[9],d[10]);m(e,e);this.rotation.set(b,e[0],e[1],e[2],e[3]);for(e=d=0;3>e;++e)d+=Math.pow(c[e]-a[e],2);this.radius.set(b,
.5*Math.log(Math.max(d,1E-6)));this.center.set(b,c[0],c[1],c[2])};a.translate=function(b,a,c,e){this.center.move(b,a||0,c||0,e||0)};a.setMatrix=function(b,a){var c=this.computedRotation;l(c,a[0],a[1],a[2],a[4],a[5],a[6],a[8],a[9],a[10]);m(c,c);this.rotation.set(b,c[0],c[1],c[2],c[3]);c=this.computedMatrix;t(c,a);var d=c[15];if(1E-6<Math.abs(d)){a=c[12]/d;var e=c[13]/d;d=c[14]/d;this.recalcMatrix(b);var f=Math.exp(this.computedRadius[0]);this.center.set(b,a-c[2]*f,e-c[6]*f,d-c[10]*f)}else this.center.idle(b);
this.radius.idle(b)};a.setDistance=function(b,a){0<a&&this.radius.set(b,Math.log(a))};a.setDistanceLimits=function(b,a){b=0<b?Math.log(b):-Infinity;a=0<a?Math.log(a):Infinity;a=Math.max(a,b);this.radius.bounds[0][0]=b;this.radius.bounds[1][0]=a};a.getDistanceLimits=function(b){var a=this.radius.bounds;return b?(b[0]=Math.exp(a[0][0]),b[1]=Math.exp(a[1][0]),b):[Math.exp(a[0][0]),Math.exp(a[1][0])]};a.toJSON=function(){this.recalcMatrix(this.lastT());return{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),
distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}};a.fromJSON=function(b){var a=this.lastT(),c=b.center;c&&this.center.set(a,c[0],c[1],c[2]);(c=b.rotation)&&this.rotation.set(a,c[0],c[1],c[2],c[3]);(c=b.distance)&&0<c&&this.radius.set(a,Math.log(c));this.setDistanceLimits(b.zoomMin,b.zoomMax)}},{"./lib/quatFromFrame":456,"filtered-vector":229,"gl-mat4/fromQuat":265,"gl-mat4/invert":268,"gl-mat4/lookAt":269}],458:[function(a,q,p){var n=a("repeat-string");
q.exports=function(a,m,h){return n("undefined"!==typeof h?h+"":" ",m)+a}},{"repeat-string":501}],459:[function(a,q,p){function n(a,b){function g(b,a,c){c=[];for(var d,e=0;d=k.exec(b);){if(1E4<e++)throw Error("Circular references in parenthesis");c.push(b.slice(0,d.index));c.push(g(a[d[1]],a));b=b.slice(d.index+d[0].length)}c.push(b);return c}if("string"!==typeof a)return[a];var e=[a];"string"===typeof b||Array.isArray(b)?b={brackets:b}:b||(b={});a=b.brackets?Array.isArray(b.brackets)?b.brackets:[b.brackets]:
["{}","[]","()"];var h=b.escape||"___";b=!!b.flat;a.forEach(function(b){function a(a,c,d){a=e.push(a.slice(b[0].length,-b[1].length))-1;f.push(a);return h+a+h}var c=new RegExp(["\\",b[0],"[^\\",b[0],"\\",b[1],"]*\\",b[1]].join("")),f=[];e.forEach(function(b,d){for(var f,g=0;b!=f;)if(f=b,b=b.replace(c,a),1E4<g++)throw Error("References have circular dependency. Please, check them.");e[d]=b});f=f.reverse();e=e.map(function(a){f.forEach(function(c){a=a.replace(new RegExp("(\\"+h+c+"\\"+h+")","g"),b[0]+
"$1"+b[1])});return a})});var k=new RegExp("\\"+h+"([0-9]+)\\"+h);return b?e:g(e[0],e)}function k(a,b){function g(b,d){if(null==a[d])throw Error("Reference "+d+"is undefined");return a[d]}if(b&&b.flat){var e=b&&b.escape||"___";b=a[0];if(!b)return"";e=new RegExp("\\"+e+"([0-9]+)\\"+e);for(var h=0;b!=k;){if(1E4<h++)throw Error("Circular references in "+a);var k=b;b=b.replace(e,g)}return b}return a.reduce(function r(b,a){Array.isArray(a)&&(a=a.reduce(r,""));return b+a},"")}function m(a,b){return Array.isArray(a)?
k(a,b):n(a,b)}m.parse=n;m.stringify=k;q.exports=m},{}],460:[function(a,q,p){var n=a("pick-by-alias");q.exports=function(a){1<arguments.length&&(a=arguments);"string"===typeof a?a=a.split(/\s/).map(parseFloat):"number"===typeof a&&(a=[a]);if(a.length&&"number"===typeof a[0])var k=1===a.length?{width:a[0],height:a[0],x:0,y:0}:2===a.length?{width:a[0],height:a[1],x:0,y:0}:{x:a[0],y:a[1],width:a[2]-a[0]||0,height:a[3]-a[1]||0};else a&&(a=n(a,{left:"x l left Left",top:"y t top Top",width:"w width W Width",
height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),k={x:a.left||0,y:a.top||0},k.width=null==a.width?a.right?a.right-k.x:0:a.width,k.height=null==a.height?a.bottom?a.bottom-k.y:0:a.height);return k}},{"pick-by-alias":466}],461:[function(a,q,p){q.exports=function(a){var b=[];a.replace(k,function(a,e,h){a=e.toLowerCase();h=(h=h.match(m))?h.map(Number):[];"m"==a&&2<h.length&&(b.push([e].concat(h.splice(0,2))),a="l",e="m"==e?"l":"L");for(;;){if(h.length==n[a])return h.unshift(e),
b.push(h);if(h.length<n[a])throw Error("malformed path data");b.push([e].concat(h.splice(0,n[a])))}});return b};var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},k=/([astvzqmhlc])([^astvzqmhlc]*)/ig,m=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig},{}],462:[function(a,q,p){q.exports=function(a,k){k||(k=[0,""]);a=String(a);var m=parseFloat(a,10);k[0]=m;k[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return k}},{}],463:[function(a,q,p){(function(a){(function(){if("undefined"!==typeof performance&&null!==performance&&performance.now)q.exports=
function(){return performance.now()};else if("undefined"!==typeof a&&null!==a&&a.hrtime){q.exports=function(){return(m()-g)/1E6};var k=a.hrtime;var m=function(){var b=k();return 1E9*b[0]+b[1]};var h=m();var b=1E9*a.uptime();var g=h-b}else if(Date.now){q.exports=function(){return Date.now()-e};var e=Date.now()}else q.exports=function(){return(new Date).getTime()-e},e=(new Date).getTime()}).call(this)}).call(this,a("_process"))},{_process:483}],464:[function(a,q,p){q.exports=function(a){var h=a.length;
if(h<n)for(var b=1,g=0;g<h;++g)for(var e=0;e<g;++e)if(a[g]<a[e])b=-b;else{if(a[g]===a[e])return 0}else{var t=k.mallocUint8(h);for(g=0;g<h;++g)t[g]=0;b=1;for(g=0;g<h;++g)if(!t[g]){var l=1;t[g]=1;for(e=a[g];e!==g;e=a[e]){if(t[e])return k.freeUint8(t),0;l+=1;t[e]=1}l&1||(b=-b)}k.freeUint8(t)}return b};var n=32,k=a("typedarray-pool")},{"typedarray-pool":543}],465:[function(a,q,p){var n=a("typedarray-pool"),k=a("invert-permutation");p.rank=function(a){var h=a.length;switch(h){case 0:case 1:return 0;case 2:return a[1]}var b=
n.mallocUint32(h),g=n.mallocUint32(h),e=0,t;k(a,g);for(t=0;t<h;++t)b[t]=a[t];for(t=h-1;0<t;--t)h=g[t],a=b[t],b[t]=b[h],b[h]=a,g[t]=g[a],g[a]=h,e=(e+a)*t;n.freeUint32(g);n.freeUint32(b);return e};p.unrank=function(a,h,b){switch(a){case 0:return b?b:[];case 1:return b?(b[0]=0,b):[0];case 2:return b?(h?(b[0]=0,b[1]=1):(b[0]=1,b[1]=0),b):h?[0,1]:[1,0]}b=b||Array(a);var g,e=1;b[0]=0;for(g=1;g<a;++g)b[g]=g,e=e*g|0;for(g=a-1;0<g;--g){a=h/e|0;h=h-a*e|0;e=e/g|0;var k=b[g]|0;b[g]=b[a]|0;b[a]=k|0}return b}},
{"invert-permutation":416,"typedarray-pool":543}],466:[function(a,q,p){function n(a){if(k[a])return k[a];"string"===typeof a&&(a=k[a]=a.split(/\s*,\s*|\s+/));return a}q.exports=function(a,h,b){var g={},e,k;"string"===typeof h&&(h=n(h));if(Array.isArray(h)){var l={};for(k=0;k<h.length;k++)l[h[k]]=!0;h=l}for(e in h)h[e]=n(h[e]);l={};for(e in h){var f=h[e];if(Array.isArray(f))for(k=0;k<f.length;k++){var d=f[k];b&&(l[d]=!0);if(d in a){g[e]=a[d];if(b)for(;k<f.length;k++)l[f[k]]=!0;break}}else e in a&&
(h[e]&&(g[e]=a[e]),b&&(l[e]=!0))}if(b)for(e in a)l[e]||(g[e]=a[e]);return g};var k={}},{}],467:[function(a,q,p){q.exports=function(a,m){function h(b,a){a=l[a][b[a]];a.splice(a.indexOf(b),1)}function b(b,a,c){var d;for(d=0;2>d;++d)if(0<l[d][a].length){var e=l[d][a][0];var f=d;break}d=e[f^1];for(var g=0;2>g;++g)for(var k=l[g][a],r=0;r<k.length;++r){var t=k[r],u=t[g^1];0<n(m[b],m[a],m[d],m[u])&&(e=t,d=u,f=g)}if(c)return d;e&&h(e,f);return d}function g(a,c){var d=l[c][a][0],e=[a];h(d,c);for(c=d[c^1];;){for(;c!==
a;)e.push(c),c=b(e[e.length-2],c,!1);if(0===l[0][a].length+l[1][a].length)break;c=e[e.length-1];d=a;var f=e[1],g=b(c,d,!0);if(0>n(m[c],m[d],m[f],m[g]))break;e.push(a);c=b(c,d)}return e}for(var e=m.length|0,k=a.length,l=[Array(e),Array(e)],f=0;f<e;++f)l[0][f]=[],l[1][f]=[];for(f=0;f<k;++f){var d=a[f];l[0][d[0]].push(d);l[1][d[1]].push(d)}a=[];for(f=0;f<e;++f)0===l[0][f].length+l[1][f].length&&a.push([f]);for(f=0;f<e;++f)for(k=0;2>k;++k){for(d=[];0<l[k][f].length;){var c=g(f,k);c[1]===c[c.length-1]?
d.push.apply(d,c):(0<d.length&&a.push(d),d=c)}0<d.length&&a.push(d)}return a};var n=a("compare-angle")},{"compare-angle":129}],468:[function(a,q,p){q.exports=function(a,m){for(var h=n(a,m.length),b=Array(m.length),g=Array(m.length),e=[],k=0;k<m.length;++k){var l=h[k].length;g[k]=l;b[k]=!0;1>=l&&e.push(k)}for(;0<e.length;)for(l=e.pop(),b[l]=!1,l=h[l],k=0;k<l.length;++k){var f=l[k];0===--g[f]&&e.push(f)}h=Array(m.length);g=[];for(k=0;k<m.length;++k)b[k]?(l=g.length,h[k]=l,g.push(m[k])):h[k]=-1;m=[];
for(k=0;k<a.length;++k)e=a[k],b[e[0]]&&b[e[1]]&&m.push([h[e[0]],h[e[1]]]);return[m,g]};var n=a("edges-to-adjacency-list")},{"edges-to-adjacency-list":174}],469:[function(a,q,p){function n(b,a){for(var c=Array(b),d=0;d<b;++d)c[d]=a;return c}function k(b){for(var a=Array(b),c=0;c<b;++c)a[c]=[];return a}q.exports=function(a,d){function c(b){for(var a=b.length,c=0;c<a;++c)if(!F[b[c]])return!1;return!0}var f=l(a,d);a=f[0];d=f[1];for(var u=d.length,v=m(a,d.length),w=0;w<u;++w)if(1===v[w].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");
a=h(a,d);a=a.filter(function(b){for(var a=b.length,c=[0],f=0;f<a;++f){var h=d[b[f]],k=d[b[(f+1)%a]],l=g(-h[0],h[1]),r=g(-h[0],k[1]);h=g(k[0],h[1]);k=g(k[0],k[1]);c=e(c,e(e(l,r),e(h,k)))}return 0<c[c.length-1]});f=a.length;var y=Array(f),A=Array(f);for(w=0;w<f;++w){y[w]=w;var z=Array(f);v=a[w].map(function(b){return d[b]});var x=b([v]),p=0,B=0;a:for(;B<f;++B)if(z[B]=0,w!==B){v=a[B];for(var q=v.length,G=0;G<q;++G){var E=x(d[v[G]]);if(0!==E){0>E&&(z[B]=1,p+=1);continue a}}z[B]=1;p+=1}A[w]=[p,w,z]}A.sort(function(b,
a){return a[0]-b[0]});for(w=0;w<f;++w)for(z=A[w],v=z[1],q=z[2],B=0;B<f;++B)q[B]&&(y[B]=v);A=k(f);for(w=0;w<f;++w)A[w].push(y[w]),A[y[w]].push(w);z={};var F=n(u,!1);for(w=0;w<f;++w)for(v=a[w],q=v.length,B=0;B<q;++B)u=v[B],x=v[(B+1)%q],p=Math.min(u,x)+":"+Math.max(u,x),p in z?(p=z[p],A[p].push(w),A[w].push(p),F[u]=F[x]=!0):z[p]=w;B=[];u=n(f,-1);for(w=0;w<f;++w)y[w]!==w||c(a[w])?u[w]=-1:(B.push(w),u[w]=0);for(f=[];0<B.length;){w=B.pop();y=A[w];t(y,function(b,a){return b-a});q=y.length;z=u[w];if(0===
z){v=a[w];var L=[v]}for(w=0;w<q;++w)v=y[w],0<=u[v]||(u[v]=z^1,B.push(v),0===z&&(v=a[v],c(v)||(v.reverse(),L.push(v))));0===z&&f.push(L)}return f};var m=a("edges-to-adjacency-list"),h=a("planar-dual"),b=a("point-in-big-polygon"),g=a("two-product"),e=a("robust-sum"),t=a("uniq"),l=a("./lib/trim-leaves")},{"./lib/trim-leaves":468,"edges-to-adjacency-list":174,"planar-dual":467,"point-in-big-polygon":473,"robust-sum":513,"two-product":541,uniq:545}],470:[function(a,q,p){q.exports=a("./quad")},{"./quad":472}],
471:[function(a,q,p){arguments[4][113][0].apply(p,arguments)},{dup:113}],472:[function(a,q,p){function n(b,a){var c=a[0],d=a[1],e=1/(a[2]-c);a=1/(a[3]-d);for(var f=Array(b.length),g=0,h=b.length/2;g<h;g++)f[2*g]=m((b[2*g]-c)*e,0,1),f[2*g+1]=m((b[2*g+1]-d)*a,0,1);return f}var k=a("binary-search-bounds"),m=a("clamp"),h=a("parse-rect"),b=a("array-bounds"),g=a("pick-by-alias"),e=a("defined"),t=a("flatten-vertex-data"),l=a("is-obj"),f=a("dtype"),d=a("math-log2");q.exports=function(a,r){function c(b,a,
d,e,f,g){if(!e.length)return null;var h=B[f]||(B[f]=[]),k=G[f]||(G[f]=[]),l=q[f]||(q[f]=[]),r=h.length;f++;if(f>y||1073741824<g){for(b=0;b<e.length;b++)h.push(e[b]),k.push(g),l.push(null,null,null,null);return r}h.push(e[0]);k.push(g);if(1>=e.length)return l.push(null,null,null,null),r;h=.5*d;k=b+h;d=a+h;for(var t=[],m=[],n=[],u=[],v=1,w=e.length;v<w;v++){var x=e[v],A=z[2*x+1];z[2*x]<k?A<d?t.push(x):m.push(x):A<d?n.push(x):u.push(x)}g<<=2;l.push(c(b,a,h,t,f,g),c(b,d,h,m,f,g+1),c(k,a,h,n,f,g+2),c(k,
d,h,u,f,g+3));return r}function m(b,a,c,d,e){for(var f=[],g=0;g<e;g++){var h=G[g],l=E[g][0],r=w(b,a,g),t=w(c,d,g);r=k.ge(h,r);h=k.gt(h,t,r,h.length-1);f[g]=[r+l,h+l]}return f}function w(b,a,c){for(var d=1,e=.5,f=.5,g=.5,h=0;h<c;h++)d<<=2,d+=b<e?a<f?0:1:a<f?2:3,g*=.5,e+=b<e?-g:g,f+=a<f?-g:g;return d}r||(r={});a=t(a,"float64");r=g(r,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var y=e(r.maxDepth,
255),A=e(r.bounds,b(a,2));A[0]===A[2]&&A[2]++;A[1]===A[3]&&A[3]++;var z=n(a,A),x=a.length>>>1;r.dtype||(r.dtype="array");if("string"===typeof r.dtype)var p=new (f(r.dtype))(x);else r.dtype&&(p=r.dtype,Array.isArray(p)&&(p.length=x));for(r=0;r<x;++r)p[r]=r;var B=[],q=[],G=[],E=[];c(0,0,1,p,0,1);for(r=x=0;r<B.length;r++){var F=B[r];if(p.set)p.set(F,x);else for(var L=0,J=F.length;L<J;L++)p[L+x]=F[L];F=x+B[r].length;E[r]=[x,F];x=F}p.range=function(){function b(c,d,e,f,g,h){if(null!==g&&null!==h&&!(w>
c+e||x>d+e||z<c||y<d||f>=p||g===h)){var k=B[f];void 0===h&&(h=k.length);for(var l=g;l<h;l++){var m=k[l],n=a[2*m],A=a[2*m+1];n>=r&&n<=u&&A>=t&&A<=v&&D.push(m)}n=q[f];h=n[4*g];k=n[4*g+1];l=n[4*g+2];m=n[4*g+3];a:{A=null;for(var C=0;null===A;)if(A=n[4*(g+1)+C],C++,C>n.length){g=null;break a}g=A}e*=.5;f+=1;b(c,d,e,f,h,k||l||m||g);b(c,d+e,e,f,k,l||m||g);b(c+e,d,e,f,l,m||g);b(c+e,d+e,e,f,m,g)}}for(var c=[],f=arguments.length;f--;)c[f]=arguments[f];if(l(c[c.length-1])){var k=c.pop();c.length||null==k.x&&
null==k.l&&null==k.left||(c=[k],f={});f=g(k,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else f={};c.length||(c=A);c=h.apply(void 0,c);c=[Math.min(c.x,c.x+c.width),Math.min(c.y,c.y+c.height),Math.max(c.x,c.x+c.width),Math.max(c.y,c.y+c.height)];var r=c[0],t=c[1],u=c[2],v=c[3];c=n([r,t,u,v],A);var w=c[0],x=c[1],z=c[2],y=c[3],p=e(f.level,B.length);if(null!=f.d){if("number"===typeof f.d)var C=[f.d,f.d];else f.d.length&&
(C=f.d);p=Math.min(Math.max(Math.ceil(-d(Math.abs(C[0])/(A[2]-A[0]))),Math.ceil(-d(Math.abs(C[1])/(A[3]-A[1])))),p)}p=Math.min(p,B.length);if(f.lod)return m(w,x,z,y,p);var D=[];b(0,0,1,0,0,1);return D};return p}},{"array-bounds":68,"binary-search-bounds":471,clamp:117,defined:166,dtype:171,"flatten-vertex-data":230,"is-obj":422,"math-log2":433,"parse-rect":460,"pick-by-alias":466}],473:[function(a,q,p){function n(){return!0}function k(b){return function(a,c){return(a=b[a])?!!a.queryPoint(c,n):!1}}
function m(b){for(var a={},c=0;c<b.length;++c){var d=b[c],e=d[0][0],g=d[0][1];d=d[1][1];g=[Math.min(g,d),Math.max(g,d)];e in a?a[e].push(g):a[e]=[g]}b={};e=Object.keys(a);for(c=0;c<e.length;++c)b[e[c]]=f(a[e[c]]);return k(b)}function h(b,a){return function(c){var e=d.le(a,c[0]);if(0>e)return 1;var f=b[e];if(!f)if(0<e&&a[e]===c[0])f=b[e-1];else return 1;for(e=1;f;){var g=f.key,h=t(c,g[0],g[1]);if(g[0][0]<g[1][0])if(0>h)f=f.left;else if(0<h)e=-1,f=f.right;else return 0;else if(0<h)f=f.left;else if(0>
h)e=1,f=f.right;else return 0}return e}}function b(b){return 1}function g(b){return function(a){return b(a[0],a[1])?0:1}}function e(b,a){return function(c){return b(c[0],c[1])?0:a(c)}}q.exports=function(a){for(var c=a.length,d=[],f=[],k=0;k<c;++k)for(var t=a[k],n=t.length,z=n-1,x=0;x<n;z=x++){z=t[z];var p=t[x];z[0]===p[0]?f.push([z,p]):d.push([z,p])}if(0===d.length)return 0===f.length?b:g(m(f));a=l(d);a=h(a.slabs,a.coordinates);return 0===f.length?a:e(m(f),a)};var t=a("robust-orientation")[3],l=a("slab-decomposition"),
f=a("interval-tree-1d"),d=a("binary-search-bounds")},{"binary-search-bounds":93,"interval-tree-1d":415,"robust-orientation":508,"slab-decomposition":524}],474:[function(a,q,p){function n(b,a,c){b=l.segments(b);a=l.segments(a);a=l.combine(b,a);c=c(a);return l.polygon(c)}var k=a("./lib/build-log");p=a("./lib/epsilon");var m=a("./lib/intersecter"),h=a("./lib/segment-chainer"),b=a("./lib/segment-selector"),g=a("./lib/geojson"),e=!1,t=p();var l={buildLog:function(b){!0===b?e=k():!1===b&&(e=!1);return!1===
e?!1:e.list},epsilon:function(b){return t.epsilon(b)},segments:function(b){var a=m(!0,t,e);b.regions.forEach(a.addRegion);return{segments:a.calculate(b.inverted),inverted:b.inverted}},combine:function(b,a){return{combined:m(!1,t,e).calculate(b.segments,b.inverted,a.segments,a.inverted),inverted1:b.inverted,inverted2:a.inverted}},selectUnion:function(a){return{segments:b.union(a.combined,e),inverted:a.inverted1||a.inverted2}},selectIntersect:function(a){return{segments:b.intersect(a.combined,e),inverted:a.inverted1&&
a.inverted2}},selectDifference:function(a){return{segments:b.difference(a.combined,e),inverted:a.inverted1&&!a.inverted2}},selectDifferenceRev:function(a){return{segments:b.differenceRev(a.combined,e),inverted:!a.inverted1&&a.inverted2}},selectXor:function(a){return{segments:b.xor(a.combined,e),inverted:a.inverted1!==a.inverted2}},polygon:function(b){return{regions:h(b.segments,t,e),inverted:b.inverted}},polygonFromGeoJSON:function(b){return g.toPolygon(l,b)},polygonToGeoJSON:function(b){return g.fromPolygon(l,
t,b)},union:function(b,a){return n(b,a,l.selectUnion)},intersect:function(b,a){return n(b,a,l.selectIntersect)},difference:function(b,a){return n(b,a,l.selectDifference)},differenceRev:function(b,a){return n(b,a,l.selectDifferenceRev)},xor:function(b,a){return n(b,a,l.selectXor)}};"object"===typeof window&&(window.PolyBool=l);q.exports=l},{"./lib/build-log":475,"./lib/epsilon":476,"./lib/geojson":477,"./lib/intersecter":478,"./lib/segment-chainer":480,"./lib/segment-selector":481}],475:[function(a,
q,p){q.exports=function(){function a(b,a){k.list.push({type:b,data:a?JSON.parse(JSON.stringify(a)):void 0});return k}var k,m=0,h=!1;return k={list:[],segmentId:function(){return m++},checkIntersection:function(b,g){return a("check",{seg1:b,seg2:g})},segmentChop:function(b,g){a("div_seg",{seg:b,pt:g});return a("chop",{seg:b,pt:g})},statusRemove:function(b){return a("pop_seg",{seg:b})},segmentUpdate:function(b){return a("seg_update",{seg:b})},segmentNew:function(b,g){return a("new_seg",{seg:b,primary:g})},
segmentRemove:function(b){return a("rem_seg",{seg:b})},tempStatus:function(b,g,e){return a("temp_status",{seg:b,above:g,below:e})},rewind:function(b){return a("rewind",{seg:b})},status:function(b,g,e){return a("status",{seg:b,above:g,below:e})},vert:function(b){if(b===h)return k;h=b;return a("vert",{x:b})},log:function(b){"string"!==typeof b&&(b=JSON.stringify(b,!1,"  "));return a("log",{txt:b})},reset:function(){return a("reset")},selected:function(b){return a("selected",{segs:b})},chainStart:function(b){return a("chain_start",
{seg:b})},chainRemoveHead:function(b,g){return a("chain_rem_head",{index:b,pt:g})},chainRemoveTail:function(b,g){return a("chain_rem_tail",{index:b,pt:g})},chainNew:function(b,g){return a("chain_new",{pt1:b,pt2:g})},chainMatch:function(b){return a("chain_match",{index:b})},chainClose:function(b){return a("chain_close",{index:b})},chainAddHead:function(b,g){return a("chain_add_head",{index:b,pt:g})},chainAddTail:function(b,g){return a("chain_add_tail",{index:b,pt:g})},chainConnect:function(b,g){return a("chain_con",
{index1:b,index2:g})},chainReverse:function(b){return a("chain_rev",{index:b})},chainJoin:function(b,g){return a("chain_join",{index1:b,index2:g})},done:function(){return a("done")}}}},{}],476:[function(a,q,p){q.exports=function(a){"number"!==typeof a&&(a=1E-10);var k={epsilon:function(k){"number"===typeof k&&(a=k);return a},pointAboveOrOnLine:function(k,h,b){var g=h[0];h=h[1];return(b[0]-g)*(k[1]-h)-(b[1]-h)*(k[0]-g)>=-a},pointBetween:function(k,h,b){var g=b[0]-h[0];b=b[1]-h[1];k=(k[0]-h[0])*g+(k[1]-
h[1])*b;return k<a||k-(g*g+b*b)>-a?!1:!0},pointsSameX:function(k,h){return Math.abs(k[0]-h[0])<a},pointsSameY:function(k,h){return Math.abs(k[1]-h[1])<a},pointsSame:function(a,h){return k.pointsSameX(a,h)&&k.pointsSameY(a,h)},pointsCompare:function(a,h){return k.pointsSameX(a,h)?k.pointsSameY(a,h)?0:a[1]<h[1]?-1:1:a[0]<h[0]?-1:1},pointsCollinear:function(k,h,b){return Math.abs((k[0]-h[0])*(h[1]-b[1])-(h[0]-b[0])*(k[1]-h[1]))<a},linesIntersect:function(k,h,b,g){var e=h[0]-k[0];h=h[1]-k[1];var t=g[0]-
b[0],l=g[1]-b[1];g=e*l-h*t;if(Math.abs(g)<a)return!1;var f=k[0]-b[0];b=k[1]-b[1];t=(t*b-l*f)/g;b=(e*b-h*f)/g;k={alongA:0,alongB:0,pt:[k[0]+t*e,k[1]+t*h]};k.alongA=t<=-a?-2:t<a?-1:t-1<=-a?0:t-1<a?1:2;k.alongB=b<=-a?-2:b<a?-1:b-1<=-a?0:b-1<a?1:2;return k},pointInsideRegion:function(k,h){var b=k[0];k=k[1];for(var g=h[h.length-1][0],e=h[h.length-1][1],t=!1,l=0;l<h.length;l++){var f=h[l][0],d=h[l][1];d-k>a!=e-k>a&&(g-f)*(k-d)/(e-d)+f-b>a&&(t=!t);g=f;e=d}return t}};return k}},{}],477:[function(a,q,p){q.exports=
{toPolygon:function(a,k){function m(b){function e(b){b=b.slice(0,b.length-1);return a.segments({inverted:!1,regions:[b]})}if(0>=b.length)return a.segments({inverted:!1,regions:[]});for(var g=e(b[0]),h=1;h<b.length;h++)g=a.selectDifference(a.combine(g,e(b[h])));return g}if("Polygon"===k.type)return a.polygon(m(k.coordinates));if("MultiPolygon"===k.type){for(var h=a.segments({inverted:!1,regions:[]}),b=0;b<k.coordinates.length;b++)h=a.selectUnion(a.combine(h,m(k.coordinates[b])));return a.polygon(h)}throw Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon");
},fromPolygon:function(a,k,m){function h(b,a){return k.pointInsideRegion([.5*(b[0][0]+b[1][0]),.5*(b[0][1]+b[1][1])],a)}function b(a,d){for(var c=0;c<a.children.length;c++){var e=a.children[c];if(h(d,e.region)){b(e,d);return}}var f={region:d,children:[]};for(c=0;c<a.children.length;c++)e=a.children[c],h(e.region,d)&&(f.children.push(e),a.children.splice(c,1),c--);a.children.push(f)}function g(b,a){for(var c=0,d=b[b.length-1][0],e=b[b.length-1][1],f=[],g=0;g<b.length;g++){var h=b[g][0],k=b[g][1];f.push([h,
k]);c+=k*d-h*e;d=h;e=k}0>c!==a&&f.reverse();f.push([f[0][0],f[0][1]]);return f}function e(b){var a=[g(b.region,!1)];d.push(a);for(var c=0;c<b.children.length;c++)a.push(t(b.children[c]))}function t(b){for(var a=0;a<b.children.length;a++)e(b.children[a]);return g(b.region,!0)}m=a.polygon(a.segments(m));a={region:null,children:[]};for(var l=0;l<m.regions.length;l++){var f=m.regions[l];3>f.length||b(a,f)}var d=[];for(l=0;l<a.children.length;l++)e(a.children[l]);return 0>=d.length?{type:"Polygon",coordinates:[]}:
1==d.length?{type:"Polygon",coordinates:d[0]}:{type:"MultiPolygon",coordinates:d}}}},{}],478:[function(a,q,p){var n=a("./linked-list");q.exports=function(a,m,h){function b(b,a,e){return{id:h?h.segmentId():-1,start:b,end:a,myFill:{above:e.myFill.above,below:e.myFill.below},otherFill:null}}function g(b,a){f.insertBefore(b,function(c){var d=b.isStart;var e=c.isStart,f=c.pt;c=c.other.pt;var g=m.pointsCompare(b.pt,f);d=0!==g?g:m.pointsSame(a,c)?0:d!==e?d?1:-1:m.pointAboveOrOnLine(a,e?f:c,e?c:f)?1:-1;return 0>
d})}function e(b,a){var c=n.node({isStart:!0,pt:b.start,seg:b,primary:a,other:null,status:null});g(c,b.end);b=n.node({isStart:!1,pt:b.end,seg:b,primary:a,other:c,status:null});c.other=b;g(b,c.pt);return c}function k(a,c){var d=b(c,a.seg.end,a.seg);h&&h.segmentChop(a.seg,c);a.other.remove();a.seg.end=c;a.other.pt=c;g(a.other,a.pt);return e(d,a.primary)}function l(b,c){function d(b){return g.findTransition(function(a){var c=a.ev;a=b.seg.start;var d=b.seg.end,e=c.seg.start;c=c.seg.end;a=m.pointsCollinear(a,
e,c)?m.pointsCollinear(d,e,c)?1:m.pointAboveOrOnLine(d,e,c)?1:-1:m.pointAboveOrOnLine(a,e,c)?1:-1;return 0<a})}function e(b,a){var c=b.seg,d=a.seg,e=c.start,f=c.end,g=d.start,l=d.end;h&&h.checkIntersection(c,d);c=m.linesIntersect(e,f,g,l);if(!1===c){if(!m.pointsCollinear(e,f,g)||m.pointsSame(e,l)||m.pointsSame(f,g))return!1;c=m.pointsSame(e,g);d=m.pointsSame(f,l);if(c&&d)return a;var r=!c&&m.pointBetween(e,g,l);g=!d&&m.pointBetween(f,g,l);if(c)return g?k(a,f):k(b,l),a;r&&(d||(g?k(a,f):k(b,l)),k(a,
e))}else 0===c.alongA&&(-1===c.alongB?k(b,g):0===c.alongB?k(b,c.pt):1===c.alongB&&k(b,l)),0===c.alongB&&(-1===c.alongA?k(a,e):0===c.alongA?k(a,c.pt):1===c.alongA&&k(a,f));return!1}for(var g=n.create(),l=[];!f.isEmpty();){var t=f.getHead();h&&h.vert(t.pt[0]);if(t.isStart){h&&h.segmentNew(t.seg,t.primary);var A=d(t),z=A.before?A.before.ev:null,x=A.after?A.after.ev:null;h&&h.tempStatus(t.seg,z?z.seg:!1,x?x.seg:!1);var p=function(){if(z){var b=e(t,z);if(b)return b}return x?e(t,x):!1}();if(p){if(a){var B;
if(B=null===t.seg.myFill.below?!0:t.seg.myFill.above!==t.seg.myFill.below)p.seg.myFill.above=!p.seg.myFill.above}else p.seg.otherFill=t.seg.myFill;h&&h.segmentUpdate(p.seg);t.other.remove();t.remove()}if(f.getHead()!==t){h&&h.rewind(t.seg);continue}a?(B=null===t.seg.myFill.below?!0:t.seg.myFill.above!==t.seg.myFill.below,t.seg.myFill.below=x?x.seg.myFill.above:b,t.seg.myFill.above=B?!t.seg.myFill.below:t.seg.myFill.below):null===t.seg.otherFill&&(p=x?t.primary===x.primary?x.seg.otherFill.above:x.seg.myFill.above:
t.primary?c:b,t.seg.otherFill={above:p,below:p});h&&h.status(t.seg,z?z.seg:!1,x?x.seg:!1);t.other.status=A.insert(n.node({ev:t}))}else{A=t.status;if(null===A)throw Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");g.exists(A.prev)&&g.exists(A.next)&&e(A.prev.ev,A.next.ev);h&&h.statusRemove(A.ev.seg);A.remove();t.primary||(A=t.seg.myFill,t.seg.myFill=t.seg.otherFill,t.seg.otherFill=A);l.push(t.seg)}f.getHead().remove()}h&&h.done();return l}var f=n.create();
return a?{addRegion:function(b){for(var a,d=b[b.length-1],f=0;f<b.length;f++){a=d;d=b[f];var g=m.pointsCompare(a,d);if(0!==g){var k=0>g?a:d;a=0>g?d:a;k={id:h?h.segmentId():-1,start:k,end:a,myFill:{above:null,below:null},otherFill:null};e(k,!0)}}},calculate:function(b){return l(b,!1)}}:{calculate:function(a,c,f,g){a.forEach(function(a){e(b(a.start,a.end,a),!0)});f.forEach(function(a){e(b(a.start,a.end,a),!1)});return l(c,g)}}}},{"./linked-list":479}],479:[function(a,q,p){q.exports={create:function(){var a=
{root:{root:!0,next:null},exists:function(k){return null===k||k===a.root?!1:!0},isEmpty:function(){return null===a.root.next},getHead:function(){return a.root.next},insertBefore:function(k,m){for(var h=a.root,b=a.root.next;null!==b;){if(m(b)){k.prev=b.prev;k.next=b;b.prev.next=k;b.prev=k;return}h=b;b=b.next}h.next=k;k.prev=h;k.next=null},findTransition:function(k){for(var m=a.root,h=a.root.next;null!==h&&!k(h);)m=h,h=h.next;return{before:m===a.root?null:m,after:h,insert:function(b){b.prev=m;b.next=
h;m.next=b;null!==h&&(h.prev=b);return b}}}};return a},node:function(a){a.prev=null;a.next=null;a.remove=function(){if(a.prev.next=a.next)a.next.prev=a.prev;a.prev=null;a.next=null};return a}}},{}],480:[function(a,q,p){q.exports=function(a,k,m){var h=[],b=[];a.forEach(function(a){function e(b,a,d){u.index=b;u.matches_head=a;u.matches_pt1=d;if(u===c)return u=r,!1;u=null;return!0}function g(b){m&&m.chainReverse(b);h[b].reverse()}function l(b,a){var c=h[b],d=h[a],e=c[c.length-1],f=c[c.length-2],g=d[0],
l=d[1];k.pointsCollinear(f,e,g)&&(m&&m.chainRemoveTail(b,e),c.pop(),e=f);k.pointsCollinear(e,g,l)&&(m&&m.chainRemoveHead(a,g),d.shift());m&&m.chainJoin(b,a);h[b]=c.concat(d);h.splice(a,1)}var f=a.start,d=a.end;if(k.pointsSame(f,d))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{m&&m.chainStart(a);for(var c={index:0,matches_head:!1,matches_pt1:!1},r={index:0,matches_head:!1,matches_pt1:!1},u=c,n=0;n<h.length;n++){a=h[n];var w=a[0];
a=a[a.length-1];if(k.pointsSame(w,f)){if(e(n,!0,!0))break}else if(k.pointsSame(w,d)){if(e(n,!0,!1))break}else if(k.pointsSame(a,f)){if(e(n,!1,!0))break}else if(k.pointsSame(a,d)&&e(n,!1,!1))break}if(u===c)h.push([f,d]),m&&m.chainNew(f,d);else if(u===r){m&&m.chainMatch(c.index);n=c.index;f=c.matches_pt1?d:f;d=c.matches_head;a=h[n];w=d?a[0]:a[a.length-1];var y=d?a[1]:a[a.length-2],A=d?a[a.length-1]:a[0],z=d?a[a.length-2]:a[1];k.pointsCollinear(y,w,f)&&(d?(m&&m.chainRemoveHead(c.index,f),a.shift()):
(m&&m.chainRemoveTail(c.index,f),a.pop()),w=y);k.pointsSame(A,f)?(h.splice(n,1),k.pointsCollinear(z,A,w)&&(d?(m&&m.chainRemoveTail(c.index,w),a.pop()):(m&&m.chainRemoveHead(c.index,w),a.shift())),m&&m.chainClose(c.index),b.push(a)):d?(m&&m.chainAddHead(c.index,f),a.unshift(f)):(m&&m.chainAddTail(c.index,f),a.push(f))}else a=c.index,n=r.index,m&&m.chainConnect(a,n),f=h[a].length<h[n].length,c.matches_head?r.matches_head?f?(g(a),l(a,n)):(g(n),l(n,a)):l(n,a):r.matches_head?l(a,n):f?(g(a),l(n,a)):(g(n),
l(a,n))}});return b}},{}],481:[function(a,q,p){function n(a,m,h){var b=[];a.forEach(function(a){var e=(a.myFill.above?8:0)+(a.myFill.below?4:0)+(a.otherFill&&a.otherFill.above?2:0)+(a.otherFill&&a.otherFill.below?1:0);0!==m[e]&&b.push({id:h?h.segmentId():-1,start:a.start,end:a.end,myFill:{above:1===m[e],below:2===m[e]},otherFill:null})});h&&h.selected(b);return b}q.exports={union:function(a,m){return n(a,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],m)},intersect:function(a,m){return n(a,[0,0,0,0,0,2,0,2,0,0,
1,1,0,2,1,0],m)},difference:function(a,m){return n(a,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],m)},differenceRev:function(a,m){return n(a,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],m)},xor:function(a,m){return n(a,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],m)}}},{}],482:[function(a,q,p){var n=new Float64Array(4),k=new Float64Array(4),m=new Float64Array(4);q.exports=function(a,b,g,e,t){n.length<e.length&&(n=new Float64Array(e.length),k=new Float64Array(e.length),m=new Float64Array(e.length));for(var h=0;h<e.length;++h)n[h]=
a[h]-e[h],k[h]=b[h]-a[h],m[h]=g[h]-a[h];var f=0,d=0,c=0,r=0,u=0,v=0;for(h=0;h<e.length;++h){var w=k[h],y=m[h],A=n[h];f+=w*w;d+=w*y;c+=y*y;r+=A*w;u+=A*y;v+=A*A}h=Math.abs(f*c-d*d);w=d*u-c*r;y=d*r-f*u;w+y<=h?0>w?0>y?0>r?(y=0,-r>=f?(w=1,f=f+2*r+v):(w=-r/f,f=r*w+v)):(w=0,0<=u?(y=0,f=v):-u>=c?(y=1,f=c+2*u+v):(y=-u/c,f=u*y+v)):(w=0,0<=u?(y=0,f=v):-u>=c?(y=1,f=c+2*u+v):(y=-u/c,f=u*y+v)):0>y?(y=0,0<=r?(w=0,f=v):-r>=f?(w=1,f=f+2*r+v):(w=-r/f,f=r*w+v)):(h=1/h,w*=h,y*=h,f=w*(f*w+d*y+2*r)+y*(d*w+c*y+2*u)+v):
0>w?(w=d+r,h=c+u,h>w?(h-=w,w=f-2*d+c,h>=w?(w=1,y=0,f=f+2*r+v):(w=h/w,y=1-w,f=w*(f*w+d*y+2*r)+y*(d*w+c*y+2*u)+v)):(w=0,0>=h?(y=1,f=c+2*u+v):0<=u?(y=0,f=v):(y=-u/c,f=u*y+v))):0>y?(w=d+u,h=f+r,h>w?(h-=w,w=f-2*d+c,h>=w?(y=1,w=0,f=c+2*u+v):(y=h/w,w=1-y,f=w*(f*w+d*y+2*r)+y*(d*w+c*y+2*u)+v)):(y=0,0>=h?(w=1,f=f+2*r+v):0<=r?(w=0,f=v):(w=-r/f,f=r*w+v))):(h=c+u-d-r,0>=h?(w=0,y=1,f=c+2*u+v):(w=f-2*d+c,h>=w?(w=1,y=0,f=f+2*r+v):(w=h/w,y=1-w,f=w*(f*w+d*y+2*r)+y*(d*w+c*y+2*u)+v)));d=1-w-y;for(h=0;h<e.length;++h)t[h]=
d*a[h]+w*b[h]+y*g[h];return 0>f?0:f}},{}],483:[function(a,q,p){function n(){throw Error("setTimeout has not been defined");}function k(){throw Error("clearTimeout has not been defined");}function m(b){if(l===setTimeout)return setTimeout(b,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(b,0);try{return l(b,0)}catch(w){try{return l.call(null,b,0)}catch(y){return l.call(this,b,0)}}}function h(b){if(f===clearTimeout)return clearTimeout(b);if((f===k||!f)&&clearTimeout)return f=clearTimeout,
clearTimeout(b);try{return f(b)}catch(w){try{return f.call(null,b)}catch(y){return f.call(this,b)}}}function b(){c&&r&&(c=!1,r.length?d=r.concat(d):u=-1,d.length&&g())}function g(){if(!c){var a=m(b);c=!0;for(var e=d.length;e;){r=d;for(d=[];++u<e;)r&&r[u].run();u=-1;e=d.length}r=null;c=!1;h(a)}}function e(b,a){this.fun=b;this.array=a}function t(){}a=q.exports={};try{var l="function"===typeof setTimeout?setTimeout:n}catch(v){l=n}try{var f="function"===typeof clearTimeout?clearTimeout:k}catch(v){f=k}var d=
[],c=!1,r,u=-1;a.nextTick=function(b){var a=Array(arguments.length-1);if(1<arguments.length)for(var f=1;f<arguments.length;f++)a[f-1]=arguments[f];d.push(new e(b,a));1!==d.length||c||m(g)};e.prototype.run=function(){this.fun.apply(null,this.array)};a.title="browser";a.browser=!0;a.env={};a.argv=[];a.version="";a.versions={};a.on=t;a.addListener=t;a.once=t;a.off=t;a.removeListener=t;a.removeAllListeners=t;a.emit=t;a.prependListener=t;a.prependOnceListener=t;a.listeners=function(b){return[]};a.binding=
function(b){throw Error("process.binding is not supported");};a.cwd=function(){return"/"};a.chdir=function(b){throw Error("process.chdir is not supported");};a.umask=function(){return 0}},{}],484:[function(a,q,p){q.exports=a("gl-quat/slerp")},{"gl-quat/slerp":296}],485:[function(a,q,p){(function(n){var k=a("performance-now"),m="undefined"===typeof window?n:window;n=["moz","webkit"];for(var h=m.requestAnimationFrame,b=m.cancelAnimationFrame||m.cancelRequestAnimationFrame,g=0;!h&&g<n.length;g++)h=m[n[g]+
"RequestAnimationFrame"],b=m[n[g]+"CancelAnimationFrame"]||m[n[g]+"CancelRequestAnimationFrame"];if(!h||!b){var e=0,t=0,l=[],f=1E3/60;h=function(b){if(0===l.length){var a=k(),d=Math.max(0,f-(a-e));e=d+a;setTimeout(function(){for(var b=l.slice(0),a=l.length=0;a<b.length;a++)if(!b[a].cancelled)try{b[a].callback(e)}catch(w){setTimeout(function(){throw w;},0)}},Math.round(d))}l.push({handle:++t,callback:b,cancelled:!1});return t};b=function(b){for(var a=0;a<l.length;a++)l[a].handle===b&&(l[a].cancelled=
!0)}}q.exports=function(b){return h.call(m,b)};q.exports.cancel=function(){b.apply(m,arguments)};q.exports.polyfill=function(a){a||(a=m);a.requestAnimationFrame=h;a.cancelAnimationFrame=b}}).call(this,"undefined"!==typeof pa?pa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"performance-now":463}],486:[function(a,q,p){var n=a("big-rat/add");q.exports=function(a,m){for(var h=a.length,b=Array(h),g=0;g<h;++g)b[g]=n(a[g],m[g]);return b}},{"big-rat/add":77}],487:[function(a,q,
p){q.exports=function(a){for(var k=Array(a.length),h=0;h<a.length;++h)k[h]=n(a[h]);return k};var n=a("big-rat")},{"big-rat":80}],488:[function(a,q,p){var n=a("big-rat"),k=a("big-rat/mul");q.exports=function(a,h){h=n(h);for(var b=a.length,g=Array(b),e=0;e<b;++e)g[e]=k(a[e],h);return g}},{"big-rat":80,"big-rat/mul":89}],489:[function(a,q,p){var n=a("big-rat/sub");q.exports=function(a,m){for(var h=a.length,b=Array(h),g=0;g<h;++g)b[g]=n(a[g],m[g]);return b}},{"big-rat/sub":91}],490:[function(a,q,p){var n=
a("compare-cell"),k=a("compare-oriented-cell"),m=a("cell-orientation");q.exports=function(a){a.sort(k);for(var b=a.length,g=0,e=0;e<b;++e){var h=a[e],l=m(h);if(0!==l){if(0<g){var f=a[g-1];if(0===n(h,f)&&m(f)!==l){--g;continue}}a[g++]=h}}a.length=g;return a}},{"cell-orientation":114,"compare-cell":130,"compare-oriented-cell":131}],491:[function(a,q,p){var n=a("array-bounds"),k=a("color-normalize"),m=a("update-diff"),h=a("pick-by-alias"),b=a("object-assign"),g=a("flatten-vertex-data");a=a("to-float32");
var e=a.float32,t=a.fract32;q.exports=function(a,d){function c(b){b?v(b):null===b&&w();f()}function f(b){if("number"===typeof b)return u(b);b&&!Array.isArray(b)&&(b=[b]);a._refresh();z.forEach(function(a,c){a&&(b&&(a.draw=b[c]?!0:!1),a.draw?u(c):a.draw=!0)})}function u(b){"number"===typeof b&&(b=z[b]);null!=b&&b&&b.count&&b.color&&b.opacity&&b.positions&&1<b.positions.length&&(b.scaleRatio=[b.scale[0]*b.viewport.width,b.scale[1]*b.viewport.height],E(b),b.after&&b.after(b))}function v(a){if(a){null!=
a.length?"number"===typeof a[0]&&(a=[{positions:a}]):Array.isArray(a)||(a=[a]);var d=0,f=0;c.groups=z=a.map(function(a,c){var e=z[c];if(a)"function"===typeof a?a={after:a}:"number"===typeof a[0]&&(a={positions:a});else return e;a=h(a,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"});e||(z[c]=
e={id:c,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},a=b({},A,a));m(e,a,[{lineWidth:function(b){return.5*+b},capSize:function(b){return.5*+b},opacity:parseFloat,errors:function(b){b=g(b);f+=b.length;return b},positions:function(b,a){b=g(b,"float64");a.count=Math.floor(b.length/2);a.bounds=n(b,2);a.offset=d;d+=a.count;return b}},{color:function(b,a){a=a.count;b||(b="transparent");if(!Array.isArray(b)||"number"===typeof b[0]){var c=b;b=Array(a);for(var d=0;d<a;d++)b[d]=c}if(b.length<
a)throw Error("Not enough colors");c=new Uint8Array(4*a);for(d=0;d<a;d++){var e=k(b[d],"uint8");c.set(e,4*d)}return c},range:function(b,a,c){c=a.bounds;b||(b=c);a.scale=[1/(b[2]-b[0]),1/(b[3]-b[1])];a.translate=[-b[0],-b[1]];a.scaleFract=t(a.scale);a.translateFract=t(a.translate);return b},viewport:function(b){if(Array.isArray(b))var a={x:b[0],y:b[1],width:b[2]-b[0],height:b[3]-b[1]};else b?(a={x:b.x||b.left||0,y:b.y||b.top||0},a.width=b.right?b.right-a.x:b.w||b.width||0,a.height=b.bottom?b.bottom-
a.y:b.h||b.height||0):a={x:0,y:0,width:y.drawingBufferWidth,height:y.drawingBufferHeight};return a}}]);return e});if(d||f){a=z.reduce(function(b,a,c){return b+(a?a.count:0)},0);var l=new Float64Array(2*a),r=new Uint8Array(4*a),u=new Float32Array(4*a);z.forEach(function(b,a){if(b){a=b.positions;var c=b.offset,d=b.errors;b.count&&(r.set(b.color,4*c),u.set(d,4*c),l.set(a,2*c))}});p(e(l));B(t(l));x(r);q(u)}}}function w(){p.destroy();B.destroy();x.destroy();q.destroy();G.destroy()}"function"===typeof a?
(d||(d={}),d.regl=a):d=a;d.length&&(d.positions=d);a=d.regl;if(!a.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var y=a._gl,A={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},z=[];var x=a.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)});var p=a.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var B=a.buffer({usage:"dynamic",
type:"float",data:new Uint8Array(0)});var q=a.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var G=a.buffer({usage:"static",type:"float",data:l});v(d);var E=a({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor \x3d color / 255.;\n\n\t\t\tvec2 pixelOffset \x3d lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy \x3d -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position \x3d position + dxy;\n\n\t\t\tvec2 pos \x3d (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos +\x3d pixelOffset / viewport.zw;\n\n\t\t\tgl_Position \x3d vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",
frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor \x3d fragColor;\n\t\t\tgl_FragColor.a *\x3d opacity;\n\t\t}\n\t\t",uniforms:{range:a.prop("range"),lineWidth:a.prop("lineWidth"),capSize:a.prop("capSize"),opacity:a.prop("opacity"),scale:a.prop("scale"),translate:a.prop("translate"),scaleFract:a.prop("scaleFract"),translateFract:a.prop("translateFract"),viewport:function(b,a){return[a.viewport.x,a.viewport.y,b.viewportWidth,
b.viewportHeight]}},attributes:{color:{buffer:x,offset:function(b,a){return 4*a.offset},divisor:1},position:{buffer:p,offset:function(b,a){return 8*a.offset},divisor:1},positionFract:{buffer:B,offset:function(b,a){return 8*a.offset},divisor:1},error:{buffer:q,offset:function(b,a){return 16*a.offset},divisor:1},direction:{buffer:G,stride:24,offset:0},lineOffset:{buffer:G,stride:24,offset:8},capOffset:{buffer:G,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",
alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:a.prop("viewport")},viewport:a.prop("viewport"),stencil:!1,instances:a.prop("count"),count:l.length});b(c,{update:v,draw:f,destroy:w,regl:a,gl:y,canvas:y.canvas,groups:z});return c};var l=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,
1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":68,"color-normalize":122,"flatten-vertex-data":230,"object-assign":455,"pick-by-alias":466,
"to-float32":536,"update-diff":547}],492:[function(a,q,p){function n(b,a){if(!(this instanceof n))return new n(b,a);"function"===typeof b?(a||(a={}),a.regl=b):a=b;a.length&&(a.positions=a);b=a.regl;if(!b.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=b._gl;this.regl=b;this.passes=[];this.shaders=n.shaders.has(b)?n.shaders.get(b):n.shaders.set(b,n.createShaders(b)).get(b);this.update(a)}var k=a("color-normalize"),m=a("array-bounds"),
h=a("object-assign"),b=a("glslify"),g=a("pick-by-alias"),e=a("flatten-vertex-data"),t=a("earcut"),l=a("array-normalize");p=a("to-float32");var f=p.float32,d=p.fract32;p=a("es6-weak-map");var c=a("parse-rect");q.exports=n;n.dashMult=2;n.maxPatternLength=256;n.precisionThreshold=3E6;n.maxPoints=1E4;n.maxLines=2048;n.shaders=new p;n.createShaders=function(a){var c=a.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),d={primitive:"triangle strip",instances:a.prop("count"),count:4,offset:0,uniforms:{miterMode:function(b,
a){return"round"===a.join?2:1},miterLimit:a.prop("miterLimit"),scale:a.prop("scale"),scaleFract:a.prop("scaleFract"),translateFract:a.prop("translateFract"),translate:a.prop("translate"),thickness:a.prop("thickness"),dashPattern:a.prop("dashTexture"),opacity:a.prop("opacity"),pixelRatio:a.context("pixelRatio"),id:a.prop("id"),dashSize:a.prop("dashLength"),viewport:function(b,a){return[a.viewport.x,a.viewport.y,b.viewportWidth,b.viewportHeight]},depth:a.prop("depth")},blend:{enable:!0,color:[0,0,0,
0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(b,a){return!a.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:a.prop("viewport")},viewport:a.prop("viewport")},e=a(h({vert:b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart \x3d 1. - lineEnd;\n\tfloat lineOffset \x3d lineTop * 2. - 1.;\n\n\tvec2 diff \x3d (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent \x3d normalize(diff * scale * viewport.zw);\n\tvec2 normal \x3d vec2(-tangent.y, tangent.x);\n\n\tvec2 position \x3d project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position \x3d vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor \x3d color / 255.;\n}\n"]),
frag:b(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\n\nuniform float dashSize, pixelRatio, thickness, opacity, id;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha \x3d 1.;\n\n\tfloat t \x3d fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash \x3d texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor \x3d fragColor;\n\tgl_FragColor.a *\x3d alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:c,divisor:0,
stride:8,offset:0},lineTop:{buffer:c,divisor:0,stride:8,offset:4},aCoord:{buffer:a.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:a.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:a.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:a.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:a.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},d));try{var f=a(h({cull:{enable:!0,face:"back"},vert:b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD \x3d -.875;\nconst float MIN_DIFF \x3d 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff \x3d b - a;\n\tvec2 perp \x3d normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord \x3d aCoord, bCoord \x3d bCoord, prevCoord \x3d prevCoord, nextCoord \x3d nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x \x3d (abs(scale.x) \x3c MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y \x3d (abs(scale.y) \x3c MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio \x3d adjustedScale * viewport.zw;\n\tvec2 normalWidth \x3d thickness / scaleRatio;\n\n\tfloat lineStart \x3d 1. - lineEnd;\n\tfloat lineBot \x3d 1. - lineTop;\n\n\tfragColor \x3d (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord \x3d\x3d prevCoord) prevCoord \x3d aCoord + normalize(bCoord - aCoord);\n\tif (bCoord \x3d\x3d nextCoord) nextCoord \x3d bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff \x3d aCoord - prevCoord;\n\tvec2 currDiff \x3d bCoord - aCoord;\n\tvec2 nextDiff \x3d nextCoord - bCoord;\n\n\tvec2 prevTangent \x3d normalize(prevDiff * scaleRatio);\n\tvec2 currTangent \x3d normalize(currDiff * scaleRatio);\n\tvec2 nextTangent \x3d normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal \x3d vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal \x3d vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal \x3d vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection \x3d normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection \x3d normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff \x3d abs(prevTangent - currTangent);\n\tvec2 nextTanDiff \x3d abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) \x3c MIN_DIFF) {\n\t\tstartJoinDirection \x3d currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) \x3c MIN_DIFF) {\n\t\tendJoinDirection \x3d currNormal;\n\t}\n\tif (aCoord \x3d\x3d bCoord) {\n\t\tendJoinDirection \x3d startJoinDirection;\n\t\tcurrNormal \x3d prevNormal;\n\t\tcurrTangent \x3d prevTangent;\n\t}\n\n\ttangent \x3d currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift \x3d dot(currNormal, startJoinDirection);\n\tfloat endJoinShift \x3d dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio \x3d abs(1. / startJoinShift);\n\tfloat endMiterRatio \x3d abs(1. / endJoinShift);\n\n\tvec2 startJoin \x3d startJoinDirection * startMiterRatio;\n\tvec2 endJoin \x3d endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin \x3d sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin \x3d -startTopJoin;\n\n\tendTopJoin \x3d sign(endJoinShift) * endJoin * .5;\n\tendBotJoin \x3d -endTopJoin;\n\n\tvec2 aTopCoord \x3d aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord \x3d bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord \x3d aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord \x3d bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping \x3d distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping \x3d distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse \x3d dot(currTangent, prevTangent) \x3c\x3d REVERSE_THRESHOLD \x26\x26 abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) \x3c  length(normalWidth * currNormal);\n\tbool nextReverse \x3d dot(currTangent, nextTangent) \x3c\x3d REVERSE_THRESHOLD \x26\x26 abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) \x3c  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift \x3d normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust \x3d 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord \x3d aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord \x3d aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse \x26\x26 baClipping \x3e 0. \x26\x26 baClipping \x3c length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -\x3d normalWidth * endTopJoin;\n\t\tbTopCoord +\x3d normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift \x3d normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust \x3d 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord \x3d bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord \x3d bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse \x26\x26 abClipping \x3e 0. \x26\x26 abClipping \x3c length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -\x3d normalWidth * startBotJoin;\n\t\taBotCoord +\x3d normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition \x3d (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition \x3d (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition \x3d (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition \x3d (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position \x3d (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord \x3d aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord \x3d bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position \x3d vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter \x3d step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter \x3d step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode \x3d\x3d 1.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tvec2 startMiterWidth \x3d vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff \x3d vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw +\x3d vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff \x3d startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff +\x3d viewport.xyxy;\n\t\t\tstartCutoff +\x3d startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tvec2 endMiterWidth \x3d vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff \x3d vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw +\x3d vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff \x3d endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff +\x3d viewport.xyxy;\n\t\t\tendCutoff +\x3d endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode \x3d\x3d 2.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tvec2 startMiterWidth \x3d vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff \x3d vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw +\x3d vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff \x3d startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff +\x3d viewport.xyxy;\n\t\t\tstartCutoff +\x3d startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tvec2 endMiterWidth \x3d vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff \x3d vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw +\x3d vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff \x3d endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff +\x3d viewport.xyxy;\n\t\t\tendCutoff +\x3d endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),
frag:b(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform float dashSize, pixelRatio, thickness, opacity, id, miterMode;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff \x3d b - a;\n\tvec2 perp \x3d normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha \x3d 1., distToStart, distToEnd;\n\tfloat cutoff \x3d thickness * .5;\n\n\t//bevel miter\n\tif (miterMode \x3d\x3d 1.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tdistToStart \x3d distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart \x3c -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *\x3d min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tdistToEnd \x3d distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd \x3c -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *\x3d min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode \x3d\x3d 2.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tdistToStart \x3d distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart \x3c 0.) {\n\t\t\t\tfloat radius \x3d length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius \x3e cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -\x3d smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tdistToEnd \x3d distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd \x3c 0.) {\n\t\t\t\tfloat radius \x3d length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius \x3e cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -\x3d smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t \x3d fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash \x3d texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor \x3d fragColor;\n\tgl_FragColor.a *\x3d alpha * opacity * dash;\n}\n"]),
attributes:{lineEnd:{buffer:c,divisor:0,stride:8,offset:0},lineTop:{buffer:c,divisor:0,stride:8,offset:4},aColor:{buffer:a.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:a.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:a.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:a.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:a.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:a.prop("positionBuffer"),stride:8,
offset:24,divisor:1}}},d))}catch(A){f=e}return{fill:a({primitive:"triangle",elements:function(b,a){return a.triangles},offset:0,vert:b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES \x3d 256.;\n\nvoid main() {\n\tfloat depth \x3d (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position \x3d position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position \x3d vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor \x3d color / 255.;\n\tfragColor.a *\x3d opacity;\n}\n"]),
frag:b(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor \x3d fragColor;\n}\n"]),uniforms:{scale:a.prop("scale"),color:a.prop("fill"),scaleFract:a.prop("scaleFract"),translateFract:a.prop("translateFract"),translate:a.prop("translate"),opacity:a.prop("opacity"),pixelRatio:a.context("pixelRatio"),id:a.prop("id"),viewport:function(b,a){return[a.viewport.x,a.viewport.y,b.viewportWidth,b.viewportHeight]}},attributes:{position:{buffer:a.prop("positionBuffer"),
stride:8,offset:8},positionFract:{buffer:a.prop("positionFractBuffer"),stride:8,offset:8}},blend:d.blend,depth:{enable:!1},scissor:d.scissor,stencil:d.stencil,viewport:d.viewport}),rect:e,miter:f}};n.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null};n.prototype.render=function(){for(var b=[],a=arguments.length;a--;)b[a]=arguments[a];b.length&&this.update.apply(this,b);this.draw()};n.prototype.draw=
function(){for(var b=this,a=[],c=arguments.length;c--;)a[c]=arguments[c];(a.length?a:this.passes).forEach(function(a,c){if(a&&Array.isArray(a))return b.draw.apply(b,a);"number"===typeof a&&(a=b.passes[a]);a&&1<a.count&&a.opacity&&(b.regl._refresh(),a.fill&&a.triangles&&2<a.triangles.length&&b.shaders.fill(a),a.thickness&&(a.scale[0]*a.viewport.width>n.precisionThreshold||a.scale[1]*a.viewport.height>n.precisionThreshold?b.shaders.rect(a):"rect"===a.join||!a.join&&(2>=a.thickness||a.count>=n.maxPoints)?
b.shaders.rect(a):b.shaders.miter(a)))});return this};n.prototype.update=function(b){var a=this;if(b){null!=b.length?"number"===typeof b[0]&&(b=[{positions:b}]):Array.isArray(b)||(b=[b]);var r=this.regl,w=this.gl;b.forEach(function(b,u){var v=a.passes[u];if(void 0!==b)if(null===b)a.passes[u]=null;else{"number"===typeof b[0]&&(b={positions:b});b=g(b,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",
miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow"});v||(a.passes[u]=v={id:u,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:r.texture({channels:1,
data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:r.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:r.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:r.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},b=h({},n.defaults,b));null!=b.thickness&&(v.thickness=parseFloat(b.thickness));null!=b.opacity&&(v.opacity=parseFloat(b.opacity));null!=b.miterLimit&&(v.miterLimit=parseFloat(b.miterLimit));null!=b.overlay&&
(v.overlay=!!b.overlay,u<n.maxLines&&(v.depth=2*(n.maxLines-1-u%n.maxLines)/n.maxLines-1));null!=b.join&&(v.join=b.join);null!=b.hole&&(v.hole=b.hole);null!=b.fill&&(v.fill=b.fill?k(b.fill,"uint8"):null);null!=b.viewport&&(v.viewport=c(b.viewport));v.viewport||(v.viewport=c([w.drawingBufferWidth,w.drawingBufferHeight]));null!=b.close&&(v.close=b.close);null===b.positions&&(b.positions=[]);if(b.positions){if(b.positions.x&&b.positions.y){var x=b.positions.x,A=b.positions.y;var z=v.count=Math.max(x.length,
A.length);u=new Float64Array(2*z);for(var y=0;y<z;y++)u[2*y]=x[y],u[2*y+1]=A[y]}else u=e(b.positions,"float64"),z=v.count=Math.floor(u.length/2);x=v.bounds=m(u,2);if(v.fill){y=[];A={};for(var p=0,q=0,J=0,H=v.count;q<H;q++){var K=u[2*q],M=u[2*q+1];isNaN(K)||isNaN(M)||null==K||null==M?(K=u[2*p],M=u[2*p+1],A[q]=p):p=q;y[J++]=K;y[J++]=M}y=t(y,v.hole||[]);p=0;for(q=y.length;p<q;p++)null!=A[y[p]]&&(y[p]=A[y[p]]);v.triangles=y}A=new Float64Array(u);l(A,2,x);x=new Float64Array(2*z+6);v.close?u[0]===u[2*z-
2]&&u[1]===u[2*z-1]?(x[0]=A[2*z-4],x[1]=A[2*z-3]):(x[0]=A[2*z-2],x[1]=A[2*z-1]):(x[0]=A[0],x[1]=A[1]);x.set(A,2);v.close?u[0]===u[2*z-2]&&u[1]===u[2*z-1]?(x[2*z+2]=A[2],x[2*z+3]=A[3],--v.count):(x[2*z+2]=A[0],x[2*z+3]=A[1],x[2*z+4]=A[2],x[2*z+5]=A[3]):(x[2*z+2]=A[2*z-2],x[2*z+3]=A[2*z-1],x[2*z+4]=A[2*z-2],x[2*z+5]=A[2*z-1]);v.positionBuffer(f(x));v.positionFractBuffer(d(x))}b.range?v.range=b.range:v.range||(v.range=v.bounds);(b.range||b.positions)&&v.count&&(u=v.bounds,z=v.range[2]-v.range[0],x=v.range[3]-
v.range[1],v.scale=[(u[2]-u[0])/z,(u[3]-u[1])/x],v.translate=[-v.range[0]/z+u[0]/z||0,-v.range[1]/x+u[1]/x||0],v.scaleFract=d(v.scale),v.translateFract=d(v.translate));if(b.dashes){if(!b.dashes||2>b.dashes.length)u=1,z=new Uint8Array([255,255,255,255,255,255,255,255]);else{for(z=u=0;z<b.dashes.length;++z)u+=b.dashes[z];z=new Uint8Array(u*n.dashMult);x=0;A=255;for(y=0;2>y;y++)for(p=0;p<b.dashes.length;++p){q=0;for(J=b.dashes[p]*n.dashMult*.5;q<J;++q)z[x++]=A;A^=255}}v.dashLength=u;v.dashTexture({channels:1,
data:z,width:z.length,height:1,mag:"linear",min:"linear"},0,0)}if(b.color){u=v.count;(z=b.color)||(z="transparent");b=new Uint8Array(4*u+4);if(Array.isArray(z)&&"number"!==typeof z[0]){for(x=0;x<u;x++)A=k(z[x],"uint8"),b.set(A,4*x);b.set(k(z[0],"uint8"),4*u)}else for(z=k(z,"uint8"),x=0;x<u+1;x++)b.set(z,4*x);v.colorBuffer({usage:"dynamic",type:"uint8",data:b})}}});if(b.length<this.passes.length){for(var y=b.length;y<this.passes.length;y++){var A=a.passes[y];A&&(A.colorBuffer.destroy(),A.positionBuffer.destroy(),
A.dashTexture.destroy())}this.passes.length=b.length}b=[];for(y=0;y<this.passes.length;y++)null!==a.passes[y]&&b.push(a.passes[y]);this.passes=b;return this}};n.prototype.destroy=function(){this.passes.forEach(function(b){b.colorBuffer.destroy();b.positionBuffer.destroy();b.dashTexture.destroy()});this.passes.length=0;return this}},{"array-bounds":68,"array-normalize":493,"color-normalize":122,earcut:173,"es6-weak-map":494,"flatten-vertex-data":230,glslify:410,"object-assign":455,"parse-rect":460,
"pick-by-alias":466,"to-float32":536}],493:[function(a,q,p){var n=a("array-bounds");q.exports=function(a,m,h){if(!a||null==a.length)throw Error("Argument should be an array");null==m&&(m=1);null==h&&(h=n(a,m));for(var b=0;b<m;b++){var g=h[m+b],e=h[b],k,l=a.length;if(Infinity===g&&-Infinity===e)for(k=b;k<l;k+=m)a[k]=a[k]===g?1:a[k]===e?0:.5;else if(Infinity===g)for(k=b;k<l;k+=m)a[k]=a[k]===g?1:0;else if(-Infinity===e)for(k=b;k<l;k+=m)a[k]=a[k]===e?0:1;else for(g-=e,k=b;k<l;k+=m)isNaN(a[k])||(a[k]=
0===g?.5:(a[k]-e)/g)}return a}},{"array-bounds":68}],494:[function(a,q,p){arguments[4][320][0].apply(p,arguments)},{"./is-implemented":495,"./polyfill":497,dup:320}],495:[function(a,q,p){arguments[4][321][0].apply(p,arguments)},{dup:321}],496:[function(a,q,p){arguments[4][322][0].apply(p,arguments)},{dup:322}],497:[function(a,q,p){arguments[4][323][0].apply(p,arguments)},{"./is-native-implemented":496,d:153,dup:323,"es5-ext/object/is-value":197,"es5-ext/object/set-prototype-of":203,"es5-ext/object/valid-object":207,
"es5-ext/object/valid-value":208,"es5-ext/string/random-uniq":213,"es6-iterator/for-of":215,"es6-iterator/get":216,"es6-symbol":222}],498:[function(a,q,p){function n(b){if(Array.isArray(b)){var a=0;for(var c=Array(b.length);a<b.length;a++)c[a]=b[a];a=c}else a=void 0;a||($jscomp.initSymbol(),$jscomp.initSymbolIterator(),a=Symbol.iterator in Object(b)||"[object Arguments]"===Object.prototype.toString.call(b)?Array.from(b):void 0);if(!(b=a))throw new TypeError("Invalid attempt to spread non-iterable instance");
return b}function k(b,a){var d=this;if(!(this instanceof k))return new k(b,a);"function"===typeof b?(a||(a={}),a.regl=b):(a=b,b=null);a&&a.length&&(a.positions=a);b=a.regl;var f=b._gl,g=[];this.tooManyColors=c;var h=b.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"});e(this,{regl:b,gl:f,groups:[],markerCache:[null],markerTextures:[null],palette:g,paletteIds:{},paletteTexture:h,maxColors:255,maxSize:100,canvas:f.canvas});
this.update(a);f={uniforms:{pixelRatio:b.context("pixelRatio"),palette:h,paletteSize:function(b,a){return[d.tooManyColors?0:255,h.height]},scale:b.prop("scale"),scaleFract:b.prop("scaleFract"),translate:b.prop("translate"),translateFract:b.prop("translateFract"),opacity:b.prop("opacity"),marker:b.prop("markerTexture")},attributes:{x:function(b,a){return a.xAttr||{buffer:a.positionBuffer,stride:8,offset:0}},y:function(b,a){return a.yAttr||{buffer:a.positionBuffer,stride:8,offset:4}},xFract:function(b,
a){return a.xAttr?{constant:[0,0]}:{buffer:a.positionFractBuffer,stride:8,offset:0}},yFract:function(b,a){return a.yAttr?{constant:[0,0]}:{buffer:a.positionFractBuffer,stride:8,offset:4}},size:function(b,a){return a.size.length?{buffer:a.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*a.size/d.maxSize)]}},borderSize:function(b,a){return a.borderSize.length?{buffer:a.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*a.borderSize/d.maxSize)]}},colorId:function(b,a){return a.color.length?
{buffer:a.colorBuffer,stride:d.tooManyColors?8:4,offset:0}:{constant:d.tooManyColors?g.slice(4*a.color,4*a.color+4):[a.color]}},borderColorId:function(b,a){return a.borderColor.length?{buffer:a.colorBuffer,stride:d.tooManyColors?8:4,offset:d.tooManyColors?4:2}:{constant:d.tooManyColors?g.slice(4*a.borderColor,4*a.borderColor+4):[a.borderColor]}},isActive:function(b,a){return!0===a.activation?{constant:[1]}:a.activation?a.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",
dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:b.prop("viewport")},viewport:b.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:b.prop("elements"),count:b.prop("count"),offset:b.prop("offset"),primitive:"points"};a=e({},f);a.frag=t(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nuniform sampler2D marker;\nuniform float pixelRatio, opacity;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist \x3d texture2D(marker, gl_PointCoord).r, delta \x3d fragWidth;\n\n  // max-distance alpha\n  if (dist \x3c 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel \x3d\x3d fragColorLevel || fragBorderColor.a \x3d\x3d 0.) {\n    float colorAmt \x3d smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor \x3d vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt \x3d smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt \x3d smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color \x3d fragBorderColor;\n    color.a *\x3d borderColorAmt;\n    color \x3d mix(color, fragColor, colorAmt);\n    color.a *\x3d opacity;\n\n    gl_FragColor \x3d color;\n  }\n\n}\n"]);
a.vert=t(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform float pixelRatio;\nuniform sampler2D palette;\n\nconst float maxSize \x3d 100.;\nconst float borderLevel \x3d .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nbool isDirect \x3d (paletteSize.x \x3c 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  if (isActive \x3d\x3d 0.) return;\n\n  vec2 position \x3d vec2(x, y);\n  vec2 positionFract \x3d vec2(xFract, yFract);\n\n  vec4 color \x3d getColor(colorId);\n  vec4 borderColor \x3d getColor(borderColorId);\n\n  float size \x3d size * maxSize / 255.;\n  float borderSize \x3d borderSize * maxSize / 255.;\n\n  gl_PointSize \x3d 2. * size * pixelRatio;\n  fragPointSize \x3d size * pixelRatio;\n\n  vec2 pos \x3d (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position \x3d vec4(pos * 2. - 1., 0, 1);\n\n  fragColor \x3d color;\n  fragBorderColor \x3d borderColor;\n  fragWidth \x3d 1. / gl_PointSize;\n\n  fragBorderColorLevel \x3d clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel \x3d clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]);
this.drawMarker=b(a);f=e({},f);f.frag=t(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\n\nuniform float opacity;\nvarying float fragBorderRadius, fragWidth;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt \x3d clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha \x3d 1.0, delta \x3d fragWidth;\n\n\tradius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius \x3e 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -\x3d smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius \x3d fragBorderRadius;\n\tfloat ratio \x3d smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color \x3d mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *\x3d alpha * opacity;\n\tgl_FragColor \x3d color;\n}\n"]);
f.vert=t(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\nuniform sampler2D palette;\nuniform vec2 paletteSize;\n\nconst float maxSize \x3d 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nbool isDirect \x3d (paletteSize.x \x3c 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive \x3d\x3d 0.) return;\n\n  vec2 position \x3d vec2(x, y);\n  vec2 positionFract \x3d vec2(xFract, yFract);\n\n  vec4 color \x3d getColor(colorId);\n  vec4 borderColor \x3d getColor(borderColorId);\n\n  float size \x3d size * maxSize / 255.;\n  float borderSize \x3d borderSize * maxSize / 255.;\n\n  gl_PointSize \x3d (size + borderSize) * pixelRatio;\n\n  vec2 pos \x3d (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position \x3d vec4(pos * 2. - 1., 0, 1);\n\n  fragBorderRadius \x3d 1. - 2. * borderSize / (size + borderSize);\n  fragColor \x3d color;\n  fragBorderColor \x3d borderColor.a \x3d\x3d 0. || borderSize \x3d\x3d 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth \x3d 1. / gl_PointSize;\n}\n"]);
c&&(f.frag=f.frag.replace("smoothstep","smoothStep"),a.frag=a.frag.replace("smoothstep","smoothStep"));this.drawCircle=b(f)}var m=a("color-normalize"),h=a("array-bounds"),b=a("color-id"),g=a("point-cluster"),e=a("object-assign"),t=a("glslify"),l=a("pick-by-alias"),f=a("update-diff"),d=a("flatten-vertex-data"),c=a("is-iexplorer"),r=a("to-float32"),u=a("parse-rect");k.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,
count:0,offset:0,bounds:null,positions:[],snap:1E4};k.prototype.render=function(){arguments.length&&this.update.apply(this,arguments);this.draw();return this};k.prototype.draw=function(){for(var b=this,a=arguments.length,c=Array(a),d=0;d<a;d++)c[d]=arguments[d];a=this.groups;1===c.length&&Array.isArray(c[0])&&(null===c[0][0]||Array.isArray(c[0][0]))&&(c=c[0]);this.regl._refresh();if(c.length)for(a=0;a<c.length;a++)this.drawItem(a,c[a]);else a.forEach(function(a,c){b.drawItem(c)});return this};k.prototype.drawItem=
function(b,a){var c=this.groups;b=c[b];"number"===typeof a&&(b=c[a],a=null);if(b&&b.count&&b.opacity){b.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,b,a));c=[];for(var d=1;d<b.activation.length;d++)b.activation[d]&&(!0===b.activation[d]||b.activation[d].data.length)&&c.push.apply(c,n(this.getMarkerDrawOptions(d,b,a)));c.length&&this.drawMarker(c)}};k.prototype.getMarkerDrawOptions=function(b,a,c){var d=a.range,f=a.tree,g=a.viewport,h=a.activation,k=a.selectionBuffer,l=a.count;if(!f)return c?
[e({},a,{markerTexture:this.markerTextures[b],activation:h[b],count:c.length,elements:c,offset:0})]:[e({},a,{markerTexture:this.markerTextures[b],activation:h[b],offset:0})];var r=[];d=f.range(d,{lod:!0,px:[(d[2]-d[0])/g.width,(d[3]-d[1])/g.height]});if(c){f=h[b].data;l=new Uint8Array(l);for(g=0;g<c.length;g++){var t=c[g];l[t]=f?f[t]:1}k.subdata(l)}for(l=d.length;l--;){g=d[l];f=g;f=Array.isArray(f)?f:void 0;if(!f){f=void 0;t=[];var m=!0,n=!1,u=void 0;try{$jscomp.initSymbol();$jscomp.initSymbolIterator();
for(var v=g[Symbol.iterator]();!(m=(f=v.next()).done)&&(t.push(f.value),2!==t.length);m=!0);}catch(M){n=!0,u=M}finally{try{if(!m&&null!=v["return"])v["return"]()}finally{if(n)throw u;}}f=t}if(!f)throw new TypeError("Invalid attempt to destructure non-iterable instance");g=f[0];r.push(e({},a,{markerTexture:this.markerTextures[b],activation:c?k:h[b],offset:g,count:f[1]-g}))}return r};k.prototype.update=function(){for(var b=this,a=arguments.length,c=Array(a),t=0;t<a;t++)c[t]=arguments[t];if(c.length){1===
c.length&&Array.isArray(c[0])&&(c=c[0]);var m=this.groups,n=this.gl,v=this.regl,p=this.maxSize,q=this.maxColors,E=this.palette;this.groups=m=c.map(function(a,c){var t=m[c];if(void 0===a)return t;null===a?a={positions:null}:"function"===typeof a?a={ondraw:a}:"number"===typeof a[0]&&(a={positions:a});a=l(a,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",
color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"});null===a.positions&&(a.positions=[]);null!=a.tooManyColors&&(b.tooManyColors=a.tooManyColors);t||(m[c]=t={id:c,scale:null,
translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:v.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:v.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:v.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:v.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:v.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},a=e({},k.defaults,a));!a.positions||"marker"in
a||(a.marker=t.marker,delete t.marker);!a.marker||"positions"in a||(a.positions=t.positions,delete t.positions);var w=0,x=0;f(t,a,[{snap:!0,size:function(b,a){null==b&&(b=k.defaults.size);w+=b&&b.length?1:0;return b},borderSize:function(b,a){null==b&&(b=k.defaults.borderSize);w+=b&&b.length?1:0;return b},opacity:parseFloat,color:function(a,c){null==a&&(a=k.defaults.color);a=b.updateColor(a);x++;return a},borderColor:function(a,c){null==a&&(a=k.defaults.borderColor);a=b.updateColor(a);x++;return a},
bounds:function(b,a,c){"range"in c||(c.range=null);return b},positions:function(b,a,c){var e=a.snap,f=a.positionBuffer,k=a.positionFractBuffer,l=a.selectionBuffer;if(b.x||b.y)return a.xAttr=b.x.length?{buffer:v.buffer(b.x),offset:0,stride:4,count:b.x.length}:{buffer:b.x.buffer,offset:4*b.x.offset||0,stride:4*(b.x.stride||1),count:b.x.count},a.yAttr=b.y.length?{buffer:v.buffer(b.y),offset:0,stride:4,count:b.y.length}:{buffer:b.y.buffer,offset:4*b.y.offset||0,stride:4*(b.y.stride||1),count:b.y.count},
a.count=Math.max(a.xAttr.count,a.yAttr.count),b;b=d(b,"float64");var t=a.count=Math.floor(b.length/2),m=a.bounds=t?h(b,2):null;c.range||a.range||(delete a.range,c.range=m);c.marker||a.marker||(delete a.marker,c.marker=null);e&&(!0===e||t>e)?a.tree=g(b,{bounds:m}):e&&e.length&&(a.tree=e);a.tree&&(c={primitive:"points",usage:"static",data:a.tree,type:"uint32"},a.elements?a.elements(c):a.elements=v.elements(c));f({data:r.float(b),usage:"dynamic"});k({data:r.fract(b),usage:"dynamic"});l({data:new Uint8Array(t),
type:"uint8",usage:"stream"});return b}},{marker:function(a,c,d){d=c.activation;d.forEach(function(b){return b&&b.destroy&&b.destroy()});d.length=0;if(a&&"number"!==typeof a[0]){for(var e=[],f=0,g=Math.min(a.length,c.count);f<g;f++){var h=b.addMarker(a[f]);e[h]||(e[h]=new Uint8Array(c.count));e[h][f]=1}for(c=0;c<e.length;c++)if(e[c]){f={data:e[c],type:"uint8",usage:"static"};if(d[c])d[c](f);else d[c]=v.buffer(f);d[c].data=e[c]}}else e=b.addMarker(a),d[e]=!0;return a},range:function(b,a,c){if(c=a.bounds)return b||
(b=c),a.scale=[1/(b[2]-b[0]),1/(b[3]-b[1])],a.translate=[-b[0],-b[1]],a.scaleFract=r.fract(a.scale),a.translateFract=r.fract(a.translate),b},viewport:function(b){return u(b||[n.drawingBufferWidth,n.drawingBufferHeight])}}]);if(w){var z=t;a=z.count;c=z.size;var A=z.borderSize;z=z.sizeBuffer;var y=new Uint8Array(2*a);if(c.length||A.length)for(var B=0;B<a;B++)y[2*B]=Math.round(255*(null==c[B]?c:c[B])/p),y[2*B+1]=Math.round(255*(null==A[B]?A:A[B])/p);z({data:y,usage:"dynamic"})}if(x){z=t;a=z.count;c=
z.color;A=z.borderColor;z=z.colorBuffer;if(b.tooManyColors){if(c.length||A.length){var C=new Uint8Array(8*a);for(y=0;y<a;y++)B=c[y],C[8*y]=E[4*B],C[8*y+1]=E[4*B+1],C[8*y+2]=E[4*B+2],C[8*y+3]=E[4*B+3],B=A[y],C[8*y+4]=E[4*B],C[8*y+5]=E[4*B+1],C[8*y+6]=E[4*B+2],C[8*y+7]=E[4*B+3]}}else if(c.length||A.length)for(C=new Uint8Array(4*a+2),y=0;y<a;y++)null!=c[y]&&(C[4*y]=c[y]%q,C[4*y+1]=Math.floor(c[y]/q)),null!=A[y]&&(C[4*y+2]=A[y]%q,C[4*y+3]=Math.floor(A[y]/q));z({data:C||new Uint8Array(0),type:"uint8",
usage:"dynamic"})}return t})}};k.prototype.addMarker=function(b){var a=this.markerTextures,c=this.regl,d=this.markerCache,e=null==b?0:d.indexOf(b);if(0<=e)return e;if(b instanceof Uint8Array||b instanceof Uint8ClampedArray)var f=b;else{f=new Uint8Array(b.length);e=0;for(var g=b.length;e<g;e++)f[e]=255*b[e]}g=Math.floor(Math.sqrt(f.length));e=a.length;d.push(b);a.push(c.texture({channels:1,data:f,radius:g,mag:"linear",min:"linear"}));return e};k.prototype.updateColor=function(a){var c=this.paletteIds,
d=this.palette,e=this.maxColors;Array.isArray(a)||(a=[a]);var f=[];if("number"===typeof a[0]){var g=[];if(Array.isArray(a))for(var h=0;h<a.length;h+=4)g.push(a.slice(h,h+4));else for(h=0;h<a.length;h+=4)g.push(a.subarray(h,h+4));a=g}for(g=0;g<a.length;g++){h=a[g];h=m(h,"uint8");var k=b(h,!1);if(null==c[k]){var l=d.length;c[k]=Math.floor(l/4);d[l]=h[0];d[l+1]=h[1];d[l+2]=h[2];d[l+3]=h[3]}f[g]=c[k]}!this.tooManyColors&&d.length>4*e&&(this.tooManyColors=!0);this.updatePalette(d);return 1===f.length?
f[0]:f};k.prototype.updatePalette=function(b){if(!this.tooManyColors){var a=this.maxColors,c=this.paletteTexture,d=Math.ceil(.25*b.length/a);if(1<d){b=b.slice();for(var e=.25*b.length%a;e<d*a;e++)b.push(0,0,0,0)}c.height<d&&c.resize(a,d);c.subimage({width:Math.min(.25*b.length,a),height:d,data:b},0,0)}};k.prototype.destroy=function(){this.groups.forEach(function(b){b.sizeBuffer.destroy();b.positionBuffer.destroy();b.positionFractBuffer.destroy();b.colorBuffer.destroy();b.activation.forEach(function(b){return b&&
b.destroy&&b.destroy()});b.selectionBuffer.destroy();b.elements&&b.elements.destroy()});this.groups.length=0;this.paletteTexture.destroy();this.markerTextures.forEach(function(b){return b&&b.destroy&&b.destroy()});return this};var v=a("object-assign");q.exports=function(b,a){b=new k(b,a);a=b.render.bind(b);v(a,{render:a,update:b.update.bind(b),draw:b.draw.bind(b),destroy:b.destroy.bind(b),regl:b.regl,gl:b.gl,canvas:b.gl.canvas,groups:b.groups,markers:b.markerCache,palette:b.palette});return a}},{"array-bounds":68,
"color-id":120,"color-normalize":122,"flatten-vertex-data":230,glslify:410,"is-iexplorer":420,"object-assign":455,"parse-rect":460,"pick-by-alias":466,"point-cluster":470,"to-float32":536,"update-diff":547}],499:[function(a,q,p){function n(b,a){if(!(this instanceof n))return new n(b,a);this.traces=[];this.passes={};this.regl=b;this.scatter=h(b);this.canvas=this.scatter.canvas}function k(b,a,e){a=b[a];var c=b[e];2<a.length?(b=a[1],a=a[3]):a.length?(b=a[0],a=a[1]):(b=a.y,a=a.y+a.height);2<c.length?
(e=c[0],c=c[2]):c.length?(e=c[0],c=c[1]):(e=c.x,c=c.x+c.width);return[e,b,c,a]}function m(b){if("number"===typeof b)return[b,b,b,b];if(2===b.length)return[b[0],b[1],b[0],b[1]];b=l(b);return[b.x,b.y,b.x+b.width,b.y+b.height]}var h=a("regl-scatter2d"),b=a("pick-by-alias"),g=a("array-bounds"),e=a("raf"),t=a("array-range"),l=a("parse-rect"),f=a("flatten-vertex-data");q.exports=n;n.prototype.render=function(){for(var b=this,a=[],f=arguments.length;f--;)a[f]=arguments[f];a.length&&this.update.apply(this,
a);if(this.regl.attributes.preserveDrawingBuffer)return this.draw();this.dirty?null==this.planned&&(this.planned=e(function(){b.draw();b.dirty=!0;b.planned=null})):(this.draw(),this.dirty=!0,e(function(){b.dirty=!1}));return this};n.prototype.update=function(){for(var b,a=[],e=arguments.length;e--;)a[e]=arguments[e];if(a.length){for(e=0;e<a.length;e++)this.updateItem(e,a[e]);this.traces=this.traces.filter(Boolean);a=[];for(var f=e=0;f<this.traces.length;f++){for(var g=this.traces[f],h=this.traces[f].passes,
k=0;k<h.length;k++)a.push(this.passes[h[k]]);g.passOffset=e;e+=g.passes.length}(b=this.scatter).update.apply(b,a);return this}};n.prototype.updateItem=function(a,c){var d=this.regl;if(null===c)return this.traces[a]=null,this;if(!c)return this;c=b(c,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",
borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"});
a=this.traces[a]||(this.traces[a]={id:a,buffer:d.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:l([d._gl.drawingBufferWidth,d._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});null!=c.color&&(a.color=c.color);null!=c.size&&(a.size=c.size);null!=c.marker&&(a.marker=c.marker);null!=c.borderColor&&(a.borderColor=c.borderColor);null!=c.borderSize&&(a.borderSize=c.borderSize);
null!=c.opacity&&(a.opacity=c.opacity);c.viewport&&(a.viewport=l(c.viewport));null!=c.diagonal&&(a.diagonal=c.diagonal);null!=c.upper&&(a.upper=c.upper);null!=c.lower&&(a.lower=c.lower);if(c.data)for(a.buffer(f(c.data)),a.columns=c.data.length,a.count=c.data[0].length,a.bounds=[],d=0;d<a.columns;d++)a.bounds[d]=g(c.data[d],1);if(c.range){a.range=c.range;var e=a.range&&"number"!==typeof a.range[0]}c.domain&&(a.domain=c.domain);d=!1;null!=c.padding&&(Array.isArray(c.padding)&&c.padding.length===a.columns&&
"number"===typeof c.padding[c.padding.length-1]?(a.padding=c.padding.map(m),d=!0):a.padding=m(c.padding));var h=a.columns,t=a.count,n=a.viewport.width,A=a.viewport.height,z=a.viewport.x,x=a.viewport.y,p=n/h,B=A/h;a.passes=[];for(var q=0;q<h;q++)for(var G=0;G<h;G++)if(a.diagonal||G!==q)if(a.upper||!(q>G))if(a.lower||!(q<G)){var E=a.id;E=(null!=E.id?E.id:E)<<16|(q&255)<<8|G&255;var F=this.passes[E]||(this.passes[E]={});c.data&&(F.positions=c.transpose?{x:{buffer:a.buffer,offset:G,count:t,stride:h},
y:{buffer:a.buffer,offset:q,count:t,stride:h}}:{x:{buffer:a.buffer,offset:G*t,count:t},y:{buffer:a.buffer,offset:q*t,count:t}},F.bounds=k(a.bounds,q,G));if(c.domain||c.viewport||c.data){var L=d?k(a.padding,q,G):a.padding;if(a.domain){var J=k(a.domain,q,G);F.viewport=[z+J[0]*n+L[0],x+J[1]*A+L[1],z+J[2]*n-L[2],x+J[3]*A-L[3]]}else F.viewport=[z+G*p+p*L[0],x+q*B+B*L[1],z+(G+1)*p-p*L[2],x+(q+1)*B-B*L[3]]}c.color&&(F.color=a.color);c.size&&(F.size=a.size);c.marker&&(F.marker=a.marker);c.borderSize&&(F.borderSize=
a.borderSize);c.borderColor&&(F.borderColor=a.borderColor);c.opacity&&(F.opacity=a.opacity);c.range&&(F.range=e?k(a.range,q,G):a.range||F.bounds);a.passes.push(E)}return this};n.prototype.draw=function(){for(var b,a=[],e=arguments.length;e--;)a[e]=arguments[e];if(a.length){var f=[];for(e=0;e<a.length;e++)if("number"===typeof a[e]){var g=this.traces[a[e]],h=g.passOffset;f.push.apply(f,t(h,h+g.passes.length))}else if(a[e].length){var k=a[e];g=this.traces[e];h=g.passes;var l=g.passOffset;h=h.map(function(b,
a){f[l+a]=k})}(b=this.scatter).draw.apply(b,f)}else this.scatter.draw();return this};n.prototype.destroy=function(){this.traces.forEach(function(b){b.buffer&&b.buffer.destroy&&b.buffer.destroy()});this.passes=this.traces=null;this.scatter.destroy();return this}},{"array-bounds":68,"array-range":69,"flatten-vertex-data":230,"parse-rect":460,"pick-by-alias":466,raf:485,"regl-scatter2d":498}],500:[function(a,q,p){(function(a,k){"object"===typeof p&&"undefined"!==typeof q?q.exports=k():a.createREGL=k()})(this,
function(){function a(b,a){this.id=ma++;this.type=b;this.data=a}function k(b){if(0===b.length)return[];var a=b.charAt(0),c=b.charAt(b.length-1);if(1<b.length&&a===c&&('"'===a||"'"===a))return['"'+b.substr(1,b.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(a=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(b))return k(b.substr(0,a.index)).concat(k(a[1])).concat(k(b.substr(a.index+a[0].length)));a=b.split(".");if(1===a.length)return['"'+b.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];
b=[];for(c=0;c<a.length;++c)b=b.concat(k(a[c]));return b}function m(b){return"["+k(b).join("][")+"]"}function h(){var b={"":0},a=[""];return{id:function(c){var d=b[c];if(d)return d;d=b[c]=a.length;a.push(c);return d},str:function(b){return a[b]}}}function b(b,a,c){function d(){var a=window.innerWidth,d=window.innerHeight;b!==document.body&&(d=b.getBoundingClientRect(),a=d.right-d.left,d=d.bottom-d.top);e.width=c*a;e.height=c*d;da(e.style,{width:a+"px",height:d+"px"})}var e=document.createElement("canvas");
da(e.style,{border:0,margin:0,padding:0,top:0,left:0});b.appendChild(e);b===document.body&&(e.style.position="absolute",da(b.style,{margin:0,padding:0}));window.addEventListener("resize",d,!1);d();return{canvas:e,onDestroy:function(){window.removeEventListener("resize",d);b.removeChild(e)}}}function g(b,a){function c(c){try{return b.getContext(c,a)}catch(Hb){return null}}return c("webgl")||c("experimental-webgl")||c("webgl-experimental")}function e(b){return"string"===typeof b?b.split():b}function t(b){return"string"===
typeof b?document.querySelector(b):b}function l(a){var c=a||{},d,f,h,k;a={};var l=[],r=[],m="undefined"===typeof window?1:window.devicePixelRatio,n=!1,u=function(b){},v=function(){};"string"===typeof c?d=document.querySelector(c):"object"===typeof c&&("string"===typeof c.nodeName&&"function"===typeof c.appendChild&&"function"===typeof c.getBoundingClientRect?d=c:"function"===typeof c.drawArrays||"function"===typeof c.drawElements?(k=c,h=k.canvas):("gl"in c?k=c.gl:"canvas"in c?h=t(c.canvas):"container"in
c&&(f=t(c.container)),"attributes"in c&&(a=c.attributes),"extensions"in c&&(l=e(c.extensions)),"optionalExtensions"in c&&(r=e(c.optionalExtensions)),"onDone"in c&&(u=c.onDone),"profile"in c&&(n=!!c.profile),"pixelRatio"in c&&(m=+c.pixelRatio)));d&&("canvas"===d.nodeName.toLowerCase()?h=d:f=d);if(!k){if(!h){d=b(f||document.body,u,m);if(!d)return null;h=d.canvas;v=d.onDestroy}k=g(h,a)}return k?{gl:k,canvas:h,container:f,extensions:l,optionalExtensions:r,pixelRatio:m,profile:n,onDone:u,onDestroy:v}:
(v(),u("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function f(b,a){function c(a){a=a.toLowerCase();try{var c=d[a]=b.getExtension(a)}catch(Xd){}return!!c}for(var d={},e=0;e<a.extensions.length;++e){var f=a.extensions[e];if(!c(f))return a.onDestroy(),a.onDone('"'+f+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}a.optionalExtensions.forEach(c);return{extensions:d,restore:function(){Object.keys(d).forEach(function(b){if(d[b]&&
!c(b))throw Error("(regl): error restoring extension "+b);})}}}function d(b,a){for(var c=Array(b),d=0;d<b;++d)c[d]=a(d);return c}function c(b){var a=(65535<b)<<4;b>>>=a;var c=(255<b)<<3;b>>>=c;a|=c;c=(15<b)<<2;b>>>=c;a|=c;c=(3<b)<<1;return a|c|b>>>c>>1}function r(){function b(b){a:{for(var a=16;268435456>=a;a*=16)if(b<=a){b=a;break a}b=0}a=e[c(b)>>2];return 0<a.length?a.pop():new ArrayBuffer(b)}function a(b){e[c(b.byteLength)>>2].push(b)}var e=d(8,function(){return[]});return{alloc:b,free:a,allocType:function(a,
c){switch(a){case 5120:a=new Int8Array(b(c),0,c);break;case 5121:a=new Uint8Array(b(c),0,c);break;case 5122:a=new Int16Array(b(2*c),0,c);break;case 5123:a=new Uint16Array(b(2*c),0,c);break;case 5124:a=new Int32Array(b(4*c),0,c);break;case 5125:a=new Uint32Array(b(4*c),0,c);break;case 5126:a=new Float32Array(b(4*c),0,c);break;default:return null}return a.length!==c?a.subarray(0,c):a},freeType:function(b){a(b.buffer)}}}function u(b){return!!b&&"object"===typeof b&&Array.isArray(b.shape)&&Array.isArray(b.stride)&&
"number"===typeof b.offset&&b.shape.length===b.stride.length&&(Array.isArray(b.data)||ka(b.data))}function v(b,a,c,d,e,f){for(var g=0;g<a;++g)for(var h=b[g],k=0;k<c;++k)for(var l=h[k],r=0;r<d;++r)e[f++]=l[r]}function w(b,a,c,d,e){for(var f=1,g=c+1;g<a.length;++g)f*=a[g];var h=a[c];if(4===a.length-c){var k=a[c+1],l=a[c+2];a=a[c+3];for(g=0;g<h;++g)v(b[g],k,l,a,d,e),e+=f}else for(g=0;g<h;++g)w(b[g],a,c+1,d,e),e+=f}function y(b){return ya[Object.prototype.toString.call(b)]|0}function A(b,a){for(var c=
0;c<a.length;++c)b[c]=a[c]}function z(b,a,c,d,e,f,g){for(var h=0,k=0;k<c;++k)for(var l=0;l<d;++l)b[h++]=a[e*k+f*l+g]}function x(b,a,c,d){function e(a){this.id=k++;this.buffer=b.createBuffer();this.type=a;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;c.profile&&(this.stats={size:0})}function f(a,c,d){a.byteLength=c.byteLength;b.bufferData(a.type,c,d)}function g(b,a,c,d,e,g){b.usage=c;if(Array.isArray(a)){if(b.dtype=d||5126,0<a.length)if(Array.isArray(a[0])){e=
Da(a);for(var h=d=1;h<e.length;++h)d*=e[h];b.dimension=d;a=za(a,e,b.dtype);f(b,a,c);g?b.persistentData=a:ja.freeType(a)}else"number"===typeof a[0]?(b.dimension=e,e=ja.allocType(b.dtype,a.length),A(e,a),f(b,e,c),g?b.persistentData=e:ja.freeType(e)):ka(a[0])&&(b.dimension=a[0].length,b.dtype=d||y(a[0])||5126,a=za(a,[a.length,a[0].length],b.dtype),f(b,a,c),g?b.persistentData=a:ja.freeType(a))}else if(ka(a))b.dtype=d||y(a),b.dimension=e,f(b,a,c),g&&(b.persistentData=new Uint8Array(new Uint8Array(a.buffer)));
else if(u(a)){e=a.shape;var k=a.stride;h=a.offset;var l=0,r=0,t=0,m=0;1===e.length?(l=e[0],r=1,t=k[0],m=0):2===e.length&&(l=e[0],r=e[1],t=k[0],m=k[1]);b.dtype=d||y(a.data)||5126;b.dimension=r;e=ja.allocType(b.dtype,l*r);z(e,a.data,l,r,t,m,h);f(b,e,c);g?b.persistentData=e:ja.freeType(e)}}function h(c){a.bufferCount--;for(var e=0;e<d.state.length;++e){var f=d.state[e];f.buffer===c&&(b.disableVertexAttribArray(e),f.buffer=null)}b.deleteBuffer(c.buffer);c.buffer=null;delete l[c.id]}var k=0,l={};e.prototype.bind=
function(){b.bindBuffer(this.type,this.buffer)};e.prototype.destroy=function(){h(this)};var r=[];c.profile&&(a.getTotalBufferSize=function(){var b=0;Object.keys(l).forEach(function(a){b+=l[a].stats.size});return b});return{create:function(d,f,k,r){function t(a){var d=35044,e=null,f=0,h=0,k=1;Array.isArray(a)||ka(a)||u(a)?e=a:"number"===typeof a?f=a|0:a&&("data"in a&&(e=a.data),"usage"in a&&(d=W[a.usage]),"type"in a&&(h=sa[a.type]),"dimension"in a&&(k=a.dimension|0),"length"in a&&(f=a.length|0));m.bind();
e?g(m,e,d,h,k,r):(f&&b.bufferData(m.type,f,d),m.dtype=h||5121,m.usage=d,m.dimension=k,m.byteLength=f);c.profile&&(m.stats.size=m.byteLength*ra[m.dtype]);return t}a.bufferCount++;var m=new e(f);l[m.id]=m;k||t(d);t._reglType="buffer";t._buffer=m;t.subdata=function(a,c){c=(c||0)|0;m.bind();if(ka(a))b.bufferSubData(m.type,c,a);else if(Array.isArray(a)){if(0<a.length)if("number"===typeof a[0]){var d=ja.allocType(m.dtype,a.length);A(d,a);b.bufferSubData(m.type,c,d);ja.freeType(d)}else if(Array.isArray(a[0])||
ka(a[0])){var e=Da(a);d=za(a,e,m.dtype);b.bufferSubData(m.type,c,d);ja.freeType(d)}}else if(u(a)){e=a.shape;var f=a.stride,g=d=0,h=0,k=0;1===e.length?(d=e[0],g=1,h=f[0],k=0):2===e.length&&(d=e[0],g=e[1],h=f[0],k=f[1]);e=Array.isArray(a.data)?m.dtype:y(a.data);e=ja.allocType(e,d*g);z(e,a.data,d,g,h,k,a.offset);b.bufferSubData(m.type,c,e);ja.freeType(e)}return t};c.profile&&(t.stats=m.stats);t.destroy=function(){h(m)};return t},createStream:function(b,a){var c=r.pop();c||(c=new e(b));c.bind();g(c,a,
35040,0,1,!1);return c},destroyStream:function(b){r.push(b)},clear:function(){ia(l).forEach(h);r.forEach(h)},getBuffer:function(b){return b&&b._buffer instanceof e?b._buffer:null},restore:function(){ia(l).forEach(function(a){a.buffer=b.createBuffer();b.bindBuffer(a.type,a.buffer);b.bufferData(a.type,a.persistentData||a.byteLength,a.usage)})},_initBuffer:g}}function p(b,a,c,d){function e(b){this.id=k++;h[this.id]=this;this.buffer=b;this.primType=4;this.type=this.vertCount=0}function f(d,e,f,g,h,k,
l){d.buffer.bind();if(e){var r=l;l||ka(e)&&(!u(e)||ka(e.data))||(r=a.oes_element_index_uint?5125:5123);c._initBuffer(d.buffer,e,f,r,3)}else b.bufferData(34963,k,f),d.buffer.dtype=r||5121,d.buffer.usage=f,d.buffer.dimension=3,d.buffer.byteLength=k;r=l;if(!l){switch(d.buffer.dtype){case 5121:case 5120:r=5121;break;case 5123:case 5122:r=5123;break;case 5125:case 5124:r=5125}d.buffer.dtype=r}d.type=r;e=h;0>e&&(e=d.buffer.byteLength,5123===r?e>>=1:5125===r&&(e>>=2));d.vertCount=e;e=g;0>g&&(e=4,g=d.buffer.dimension,
1===g&&(e=0),2===g&&(e=1),3===g&&(e=4));d.primType=e}function g(b){d.elementsCount--;delete h[b.id];b.buffer.destroy();b.buffer=null}var h={},k=0,l={uint8:5121,uint16:5123};a.oes_element_index_uint&&(l.uint32=5125);e.prototype.bind=function(){this.buffer.bind()};var r=[];return{create:function(b,a){function h(b){if(b)if("number"===typeof b)k(b),r.primType=4,r.vertCount=b|0,r.type=5121;else{var a=null,c=35044,d=-1,e=-1,g=0,t=0;if(Array.isArray(b)||ka(b)||u(b))a=b;else if("data"in b&&(a=b.data),"usage"in
b&&(c=W[b.usage]),"primitive"in b&&(d=ua[b.primitive]),"count"in b&&(e=b.count|0),"type"in b&&(t=l[b.type]),"length"in b)g=b.length|0;else if(g=e,5123===t||5122===t)g*=2;else if(5125===t||5124===t)g*=4;f(r,a,c,d,e,g,t)}else k(),r.primType=4,r.vertCount=0,r.type=5121;return h}var k=c.create(null,34963,!0),r=new e(k._buffer);d.elementsCount++;h(b);h._reglType="elements";h._elements=r;h.subdata=function(b,a){k.subdata(b,a);return h};h.destroy=function(){g(r)};return h},createStream:function(b){var a=
r.pop();a||(a=new e(c.create(null,34963,!0,!1)._buffer));f(a,b,35040,-1,-1,0,0);return a},destroyStream:function(b){r.push(b)},getElements:function(b){return"function"===typeof b&&b._elements instanceof e?b._elements:null},clear:function(){ia(h).forEach(g)}}}function B(b){for(var a=ja.allocType(5123,b.length),c=0;c<b.length;++c)if(isNaN(b[c]))a[c]=65535;else if(Infinity===b[c])a[c]=31744;else if(-Infinity===b[c])a[c]=64512;else{Aa[0]=b[c];var d=wa[0],e=d>>>31<<15,f=(d<<1>>>24)-127;d=d>>13&1023;a[c]=
-24>f?e:-14>f?e+(d+1024>>-14-f):15<f?e+31744:e+(f+15<<10)+d}return a}function q(b){return Array.isArray(b)||ka(b)}function G(b){return"[object "+b+"]"}function E(b){return Array.isArray(b)&&(0===b.length||"number"===typeof b[0])}function F(b){return Array.isArray(b)&&0!==b.length&&q(b[0])?!0:!1}function L(b){return Object.prototype.toString.call(b)}function J(b){if(!b)return!1;var a=L(b);return 0<=Pa.indexOf(a)?!0:E(b)||F(b)||u(b)}function H(b,a){36193===b.type?(b.data=B(a),ja.freeType(a)):b.data=
a}function K(b,a,c,d,e,f){b="undefined"!==typeof cb[b]?cb[b]:Ea[b]*zb[a];f&&(b*=6);if(e){for(d=0;1<=c;)d+=b*c*c,c/=2;return d}return b*c*d}function M(b,a,c,d,e,f,g){function h(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function k(b,a){b.internalformat=a.internalformat;b.format=a.format;b.type=a.type;b.compressed=a.compressed;b.premultiplyAlpha=a.premultiplyAlpha;
b.flipY=a.flipY;b.unpackAlignment=a.unpackAlignment;b.colorSpace=a.colorSpace;b.width=a.width;b.height=a.height;b.channels=a.channels}function l(b,a){if("object"===typeof a&&a){"premultiplyAlpha"in a&&(b.premultiplyAlpha=a.premultiplyAlpha);"flipY"in a&&(b.flipY=a.flipY);"alignment"in a&&(b.unpackAlignment=a.alignment);"colorSpace"in a&&(b.colorSpace=la[a.colorSpace]);"type"in a&&(b.type=V[a.type]);var c=b.width,d=b.height,e=b.channels,f=!1;"shape"in a?(c=a.shape[0],d=a.shape[1],3===a.shape.length&&
(e=a.shape[2],f=!0)):("radius"in a&&(c=d=a.radius),"width"in a&&(c=a.width),"height"in a&&(d=a.height),"channels"in a&&(e=a.channels,f=!0));b.width=c|0;b.height=d|0;b.channels=e|0;c=!1;"format"in a&&(c=a.format,d=b.internalformat=X[c],b.format=aa[d],c in V&&!("type"in a)&&(b.type=V[c]),c in ca&&(b.compressed=!0),c=!0);!f&&c?b.channels=Ea[b.format]:f&&!c&&b.channels!==ba[b.format]&&(b.format=b.internalformat=ba[b.channels])}}function r(a){b.pixelStorei(37440,a.flipY);b.pixelStorei(37441,a.premultiplyAlpha);
b.pixelStorei(37443,a.colorSpace);b.pixelStorei(3317,a.unpackAlignment)}function t(){h.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function m(b,a){var c=null;J(a)?c=a:a&&(l(b,a),"x"in a&&(b.xOffset=a.x|0),"y"in a&&(b.yOffset=a.y|0),J(a.data)&&(c=a.data));if(a.copy){a=e.viewportWidth;var d=e.viewportHeight;b.width=b.width||a-b.xOffset;b.height=b.height||d-b.yOffset;b.needsCopy=!0}else if(!c)b.width=b.width||1,b.height=b.height||1,b.channels=
b.channels||4;else if(ka(c))b.channels=b.channels||4,b.data=c,"type"in a||5121!==b.type||(b.type=ya[Object.prototype.toString.call(c)]|0);else if(E(c)){b.channels=b.channels||4;a=c;d=a.length;switch(b.type){case 5121:case 5123:case 5125:case 5126:d=ja.allocType(b.type,d);d.set(a);b.data=d;break;case 36193:b.data=B(a)}b.alignment=1;b.needsFree=!0}else if(u(c)){a=c.data;Array.isArray(a)||5121!==b.type||(b.type=ya[Object.prototype.toString.call(a)]|0);d=c.shape;var f=c.stride,g,h;3===d.length?(g=d[2],
h=f[2]):h=g=1;var k=d[0];var r=d[1];d=f[0];f=f[1];b.alignment=1;b.width=k;b.height=r;b.channels=g;b.format=b.internalformat=ba[g];b.needsFree=!0;k=h;c=c.offset;g=b.width;h=b.height;r=b.channels;for(var t=ja.allocType(36193===b.type?5126:b.type,g*h*r),m=0,n=0;n<h;++n)for(var v=0;v<g;++v)for(var w=0;w<r;++w)t[m++]=a[d*v+f*n+k*w+c];H(b,t)}else if(L(c)===Ba||L(c)===Na)L(c)===Ba?b.element=c:b.element=c.canvas,b.width=b.element.width,b.height=b.element.height,b.channels=4;else if(L(c)===Ja)b.element=c,
b.width=c.width,b.height=c.height,b.channels=4;else if(L(c)===Lb)b.element=c,b.width=c.naturalWidth,b.height=c.naturalHeight,b.channels=4;else if(L(c)===Mb)b.element=c,b.width=c.videoWidth,b.height=c.videoHeight,b.channels=4;else if(F(c)){a=b.width||c[0].length;d=b.height||c.length;f=b.channels;f=q(c[0][0])?f||c[0][0].length:f||1;k=xa.shape(c);g=1;for(h=0;h<k.length;++h)g*=k[h];g=ja.allocType(36193===b.type?5126:b.type,g);xa.flatten(c,k,"",g);H(b,g);b.alignment=1;b.width=a;b.height=d;b.channels=f;
b.format=b.internalformat=ba[f];b.needsFree=!0}}function n(a,c,e,f,g){var h=a.element,k=a.data,l=a.internalformat,t=a.format,m=a.type,n=a.width,u=a.height;r(a);h?b.texSubImage2D(c,g,e,f,t,m,h):a.compressed?b.compressedTexSubImage2D(c,g,e,f,l,n,u,k):a.needsCopy?(d(),b.copyTexSubImage2D(c,g,e,f,a.xOffset,a.yOffset,n,u)):b.texSubImage2D(c,g,e,f,n,u,t,m,k)}function v(){return ha.pop()||new t}function w(b){b.needsFree&&ja.freeType(b.data);t.call(b);ha.push(b)}function x(){h.call(this);this.genMipmaps=
!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function z(b,a,c){var d=b.images[0]=v();b.mipmask=1;d.width=b.width=a;d.height=b.height=c;d.channels=b.channels=4}function A(b,a){if(J(a)){var c=b.images[0]=v();k(c,b);m(c,a);b.mipmask=1}else if(l(b,a),Array.isArray(a.mipmap)){a=a.mipmap;for(var d=0;d<a.length;++d)c=b.images[d]=v(),k(c,b),c.width>>=d,c.height>>=d,m(c,a[d]),b.mipmask|=1<<d}else c=b.images[0]=v(),k(c,b),m(c,a),b.mipmask=1;k(b,b.images[0])}function y(a,c){a=a.images;for(var e=
0;e<a.length&&a[e];++e){var f=a[e],g=c,h=e,k=f.element,l=f.data,t=f.internalformat,m=f.format,n=f.type,u=f.width,v=f.height,w=f.channels;r(f);k?b.texImage2D(g,h,m,m,n,k):f.compressed?b.compressedTexImage2D(g,h,t,u,v,0,l):f.needsCopy?(d(),b.copyTexImage2D(g,h,m,f.xOffset,f.yOffset,u,v,0)):((f=!l)&&(l=ja.zero.allocType(n,u*v*w)),b.texImage2D(g,h,m,u,v,0,m,n,l),f&&l&&ja.zero.freeType(l))}}function p(){var b=ua.pop()||new x;h.call(b);for(var a=b.mipmask=0;16>a;++a)b.images[a]=null;return b}function C(b){for(var a=
b.images,c=0;c<a.length;++c)a[c]&&w(a[c]),a[c]=null;ua.push(b)}function D(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function I(b,a){"min"in a&&(b.minFilter=R[a.min],0<=Ma.indexOf(b.minFilter)&&!("faces"in a)&&(b.genMipmaps=!0));"mag"in a&&(b.magFilter=Y[a.mag]);var c=b.wrapS,d=b.wrapT;if("wrap"in a){var e=a.wrap;"string"===typeof e?c=d=T[e]:Array.isArray(e)&&(c=T[e[0]],d=T[e[1]])}else"wrapS"in a&&(c=T[a.wrapS]),"wrapT"in
a&&(d=T[a.wrapT]);b.wrapS=c;b.wrapT=d;"anisotropic"in a&&(b.anisotropic=a.anisotropic);if("mipmap"in a){c=!1;switch(typeof a.mipmap){case "string":b.mipmapHint=P[a.mipmap];c=b.genMipmaps=!0;break;case "boolean":c=b.genMipmaps=a.mipmap;break;case "object":b.genMipmaps=!1,c=!0}!c||"min"in a||(b.minFilter=9984)}}function N(c,d){b.texParameteri(d,10241,c.minFilter);b.texParameteri(d,10240,c.magFilter);b.texParameteri(d,10242,c.wrapS);b.texParameteri(d,10243,c.wrapT);a.ext_texture_filter_anisotropic&&
b.texParameteri(d,34046,c.anisotropic);c.genMipmaps&&(b.hint(33170,c.mipmapHint),b.generateMipmap(d))}function M(a){h.call(this);this.mipmask=0;this.internalformat=6408;this.id=wa++;this.refCount=1;this.target=a;this.texture=b.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new D;g.profile&&(this.stats={size:0})}function G(a){b.activeTexture(33984);b.bindTexture(a.target,a.texture)}function O(){var a=Aa[0];a?b.bindTexture(a.target,a.texture):b.bindTexture(3553,null)}function Q(a){var c=
a.texture,d=a.unit,e=a.target;0<=d&&(b.activeTexture(33984+d),b.bindTexture(e,null),Aa[d]=null);b.deleteTexture(c);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete na[a.id];f.textureCount--}var P={"don't care":4352,"dont care":4352,nice:4354,fast:4353},T={repeat:10497,clamp:33071,mirror:33648},Y={nearest:9728,linear:9729},R=da({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Y),la={none:0,browser:37444},
V={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},X={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ca={};a.ext_srgb&&(X.srgb=35904,X.srgba=35906);a.oes_texture_float&&(V.float32=V["float"]=5126);a.oes_texture_half_float&&(V.float16=V["half float"]=36193);a.webgl_depth_texture&&(da(X,{depth:6402,"depth stencil":34041}),da(V,{uint16:5123,uint32:5125,"depth stencil":34042}));a.webgl_compressed_texture_s3tc&&da(ca,{"rgb s3tc dxt1":33776,
"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});a.webgl_compressed_texture_atc&&da(ca,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});a.webgl_compressed_texture_pvrtc&&da(ca,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});a.webgl_compressed_texture_etc1&&(ca["rgb etc1"]=36196);var Z=Array.prototype.slice.call(b.getParameter(34467));Object.keys(ca).forEach(function(b){var a=ca[b];
0<=Z.indexOf(a)&&(X[b]=a)});var fa=Object.keys(X);c.textureFormats=fa;var ma=[];Object.keys(X).forEach(function(b){ma[X[b]]=b});var U=[];Object.keys(V).forEach(function(b){U[V[b]]=b});var ra=[];Object.keys(Y).forEach(function(b){ra[Y[b]]=b});var ea=[];Object.keys(R).forEach(function(b){ea[R[b]]=b});var Da=[];Object.keys(T).forEach(function(b){Da[T[b]]=b});var aa=fa.reduce(function(b,a){var c=X[a];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c?b[c]=c:32855===c||0<=a.indexOf("rgba")?b[c]=
6408:b[c]=6407;return b},{}),ha=[],ua=[],wa=0,na={},W=c.maxTextureUnits,Aa=Array(W).map(function(){return null});da(M.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var c=0;c<W;++c){var d=Aa[c];if(d){if(0<d.bindCount)continue;d.unit=-1}Aa[c]=this;a=c;break}g.profile&&f.maxTextureUnits<a+1&&(f.maxTextureUnits=a+1);this.unit=a;b.activeTexture(33984+a);b.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&
Q(this)}});g.profile&&(f.getTotalTextureSize=function(){var b=0;Object.keys(na).forEach(function(a){b+=na[a].stats.size});return b});return{create2D:function(a,c){function d(b,a){var c=e.texInfo;D.call(c);var f=p();"number"===typeof b?"number"===typeof a?z(f,b|0,a|0):z(f,b|0,b|0):b?(I(c,b),A(f,b)):z(f,1,1);c.genMipmaps&&(f.mipmask=(f.width<<1)-1);e.mipmask=f.mipmask;k(e,f);e.internalformat=f.internalformat;d.width=f.width;d.height=f.height;G(e);y(f,3553);N(c,3553);O();C(f);g.profile&&(e.stats.size=
K(e.internalformat,e.type,f.width,f.height,c.genMipmaps,!1));d.format=ma[e.internalformat];d.type=U[e.type];d.mag=ra[c.magFilter];d.min=ea[c.minFilter];d.wrapS=Da[c.wrapS];d.wrapT=Da[c.wrapT];return d}var e=new M(3553);na[e.id]=e;f.textureCount++;d(a,c);d.subimage=function(b,a,c,f){a|=0;c|=0;f|=0;var g=v();k(g,e);g.width=0;g.height=0;m(g,b);g.width=g.width||(e.width>>f)-a;g.height=g.height||(e.height>>f)-c;G(e);n(g,3553,a,c,f);O();w(g);return d};d.resize=function(a,c){a|=0;c=c|0||a;if(a===e.width&&
c===e.height)return d;d.width=e.width=a;d.height=e.height=c;G(e);for(var f,h=e.channels,k=e.type,l=0;e.mipmask>>l;++l){var r=a>>l,t=c>>l;if(!r||!t)break;f=ja.zero.allocType(k,r*t*h);b.texImage2D(3553,l,e.format,r,t,0,e.format,e.type,f);f&&ja.zero.freeType(f)}O();g.profile&&(e.stats.size=K(e.internalformat,e.type,a,c,!1,!1));return d};d._reglType="texture2d";d._texture=e;g.profile&&(d.stats=e.stats);d.destroy=function(){e.decRef()};return d},createCube:function(a,c,d,e,h,r){function t(b,a,c,d,e,f){var h,
r=u.texInfo;D.call(r);for(h=0;6>h;++h)x[h]=p();if("number"===typeof b||!b)for(b=b|0||1,h=0;6>h;++h)z(x[h],b,b);else if("object"===typeof b)if(a)A(x[0],b),A(x[1],a),A(x[2],c),A(x[3],d),A(x[4],e),A(x[5],f);else if(I(r,b),l(u,b),"faces"in b)for(b=b.faces,h=0;6>h;++h)k(x[h],u),A(x[h],b[h]);else for(h=0;6>h;++h)A(x[h],b);k(u,x[0]);u.mipmask=r.genMipmaps?(x[0].width<<1)-1:x[0].mipmask;u.internalformat=x[0].internalformat;t.width=x[0].width;t.height=x[0].height;G(u);for(h=0;6>h;++h)y(x[h],34069+h);N(r,34067);
O();g.profile&&(u.stats.size=K(u.internalformat,u.type,t.width,t.height,r.genMipmaps,!0));t.format=ma[u.internalformat];t.type=U[u.type];t.mag=ra[r.magFilter];t.min=ea[r.minFilter];t.wrapS=Da[r.wrapS];t.wrapT=Da[r.wrapT];for(h=0;6>h;++h)C(x[h]);return t}var u=new M(34067);na[u.id]=u;f.cubeCount++;var x=Array(6);t(a,c,d,e,h,r);t.subimage=function(b,a,c,d,e){c|=0;d|=0;e|=0;var f=v();k(f,u);f.width=0;f.height=0;m(f,a);f.width=f.width||(u.width>>e)-c;f.height=f.height||(u.height>>e)-d;G(u);n(f,34069+
b,c,d,e);O();w(f);return t};t.resize=function(a){a|=0;if(a!==u.width){t.width=u.width=a;t.height=u.height=a;G(u);for(var c=0;6>c;++c)for(var d=0;u.mipmask>>d;++d)b.texImage2D(34069+c,d,u.format,a>>d,a>>d,0,u.format,u.type,null);O();g.profile&&(u.stats.size=K(u.internalformat,u.type,t.width,t.height,!1,!0));return t}};t._reglType="textureCube";t._texture=u;g.profile&&(t.stats=u.stats);t.destroy=function(){u.decRef()};return t},clear:function(){for(var a=0;a<W;++a)b.activeTexture(33984+a),b.bindTexture(3553,
null),Aa[a]=null;ia(na).forEach(Q);f.cubeCount=0;f.textureCount=0},getTexture:function(b){return null},restore:function(){for(var a=0;a<W;++a){var c=Aa[a];c&&(c.bindCount=0,c.unit=-1,Aa[a]=null)}ia(na).forEach(function(a){a.texture=b.createTexture();b.bindTexture(a.target,a.texture);for(var c=0;32>c;++c)if(0!==(a.mipmask&1<<c))if(3553===a.target)b.texImage2D(3553,c,a.internalformat,a.width>>c,a.height>>c,0,a.internalformat,a.type,null);else for(var d=0;6>d;++d)b.texImage2D(34069+d,c,a.internalformat,
a.width>>c,a.height>>c,0,a.internalformat,a.type,null);N(a.texInfo,a.target)})}}}function I(b,a,c,d,e,f){function g(b,a,c){this.target=b;this.texture=a;this.renderbuffer=c;var d=b=0;a?(b=a.width,d=a.height):c&&(b=c.width,d=c.height);this.width=b;this.height=d}function h(b){b&&(b.texture&&b.texture._texture.decRef(),b.renderbuffer&&b.renderbuffer._renderbuffer.decRef())}function k(b,a,c){b&&(b.texture?b.texture._texture.refCount+=1:b.renderbuffer._renderbuffer.refCount+=1)}function l(a,c){c&&(c.texture?
b.framebufferTexture2D(36160,a,c.target,c.texture._texture.texture,0):b.framebufferRenderbuffer(36160,a,36161,c.renderbuffer._renderbuffer.renderbuffer))}function r(b){var a=3553,c=null,d=null,e=b;"object"===typeof b&&(e=b.data,"target"in b&&(a=b.target|0));b=e._reglType;"texture2d"===b?c=e:"textureCube"===b?c=e:"renderbuffer"===b&&(d=e,a=36161);return new g(a,c,d)}function t(b,a,c,f,h){if(c)return b=d.create2D({width:b,height:a,format:f,type:h}),b._texture.refCount=0,new g(3553,b,null);b=e.create({width:b,
height:a,format:f});b._renderbuffer.refCount=0;return new g(36161,null,b)}function m(b){return b&&(b.texture||b.renderbuffer)}function u(b,a,c){b&&(b.texture?b.texture.resize(a,c):b.renderbuffer&&b.renderbuffer.resize(a,c),b.width=a,b.height=c)}function n(){this.id=q++;C[this.id]=this;this.framebuffer=b.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function v(b){b.colorAttachments.forEach(h);h(b.depthAttachment);
h(b.stencilAttachment);h(b.depthStencilAttachment)}function w(a){b.deleteFramebuffer(a.framebuffer);a.framebuffer=null;f.framebufferCount--;delete C[a.id]}function x(a){var d;b.bindFramebuffer(36160,a.framebuffer);var e=a.colorAttachments;for(d=0;d<e.length;++d)l(36064+d,e[d]);for(d=e.length;d<c.maxColorAttachments;++d)b.framebufferTexture2D(36160,36064+d,3553,null,0);b.framebufferTexture2D(36160,33306,3553,null,0);b.framebufferTexture2D(36160,36096,3553,null,0);b.framebufferTexture2D(36160,36128,
3553,null,0);l(36096,a.depthAttachment);l(36128,a.stencilAttachment);l(33306,a.depthStencilAttachment);b.checkFramebufferStatus(36160);b.isContextLost();b.bindFramebuffer(36160,A.next?A.next.framebuffer:null);A.cur=A.next;b.getError()}function z(b,a){function c(b,a){var e=0,f=0,g=!0,h=!0;var l=null;var u=!0,n="rgba",w="uint8",z=1,A=null,B=null,q=null,C=!1;if("number"===typeof b)e=b|0,f=a|0||e;else if(b){"shape"in b?(f=b.shape,e=f[0],f=f[1]):("radius"in b&&(e=f=b.radius),"width"in b&&(e=b.width),"height"in
b&&(f=b.height));if("color"in b||"colors"in b)l=b.color||b.colors,Array.isArray(l);if(!l){"colorCount"in b&&(z=b.colorCount|0);"colorTexture"in b&&(u=!!b.colorTexture,n="rgba4");if("colorType"in b&&(w=b.colorType,!u))if("half float"===w||"float16"===w)n="rgba16f";else if("float"===w||"float32"===w)n="rgba32f";"colorFormat"in b&&(n=b.colorFormat,0<=y.indexOf(n)?u=!0:0<=p.indexOf(n)&&(u=!1))}if("depthTexture"in b||"depthStencilTexture"in b)C=!(!b.depthTexture&&!b.depthStencilTexture);"depth"in b&&("boolean"===
typeof b.depth?g=b.depth:(A=b.depth,h=!1));"stencil"in b&&("boolean"===typeof b.stencil?h=b.stencil:(B=b.stencil,g=!1));"depthStencil"in b&&("boolean"===typeof b.depthStencil?g=h=b.depthStencil:(q=b.depthStencil,h=g=!1))}else e=f=1;var D=a=null,I=null;if(Array.isArray(l))b=l.map(r);else if(l)b=[r(l)];else for(b=Array(z),l=0;l<z;++l)b[l]=t(e,f,u,n,w);e=e||b[0].width;f=f||b[0].height;A?a=r(A):g&&!h&&(a=t(e,f,C,"depth","uint32"));B?D=r(B):h&&!g&&(D=t(e,f,!1,"stencil","uint8"));q?I=r(q):!A&&!B&&h&&g&&
(I=t(e,f,C,"depth stencil","depth stencil"));g=null;for(l=0;l<b.length;++l)k(b[l],e,f),b[l]&&b[l].texture&&(h=ab[b[l].texture._texture.format]*eb[b[l].texture._texture.type],null===g&&(g=h));k(a,e,f);k(D,e,f);k(I,e,f);v(d);d.width=e;d.height=f;d.colorAttachments=b;d.depthAttachment=a;d.stencilAttachment=D;d.depthStencilAttachment=I;c.color=b.map(m);c.depth=m(a);c.stencil=m(D);c.depthStencil=m(I);c.width=d.width;c.height=d.height;x(d);return c}var d=new n;f.framebufferCount++;c(b,a);return da(c,{resize:function(b,
a){b=Math.max(b|0,1);a=Math.max(a|0||b,1);if(b===d.width&&a===d.height)return c;for(var e=d.colorAttachments,f=0;f<e.length;++f)u(e[f],b,a);u(d.depthAttachment,b,a);u(d.stencilAttachment,b,a);u(d.depthStencilAttachment,b,a);d.width=c.width=b;d.height=c.height=a;x(d);return c},_reglType:"framebuffer",_framebuffer:d,destroy:function(){w(d);v(d)},use:function(b){A.setFBO({framebuffer:c},b)}})}var A={cur:null,next:null,dirty:!1,setFBO:null},y=["rgba"],p=["rgba4","rgb565","rgb5 a1"];a.ext_srgb&&p.push("srgba");
a.ext_color_buffer_half_float&&p.push("rgba16f","rgb16f");a.webgl_color_buffer_float&&p.push("rgba32f");var B=["uint8"];a.oes_texture_half_float&&B.push("half float","float16");a.oes_texture_float&&B.push("float","float32");var q=0,C={};return da(A,{getFramebuffer:function(b){return"function"===typeof b&&"framebuffer"===b._reglType&&(b=b._framebuffer,b instanceof n)?b:null},create:z,createCube:function(b){function a(b){var e={color:null},f=0,g=null;var h="rgba";var k="uint8",l=1;if("number"===typeof b)f=
b|0;else if(b){"shape"in b?f=b.shape[0]:("radius"in b&&(f=b.radius|0),"width"in b?f=b.width|0:"height"in b&&(f=b.height|0));if("color"in b||"colors"in b)g=b.color||b.colors,Array.isArray(g);g||("colorCount"in b&&(l=b.colorCount|0),"colorType"in b&&(k=b.colorType),"colorFormat"in b&&(h=b.colorFormat));"depth"in b&&(e.depth=b.depth);"stencil"in b&&(e.stencil=b.stencil);"depthStencil"in b&&(e.depthStencil=b.depthStencil)}else f=1;if(g)if(Array.isArray(g))for(b=[],h=0;h<g.length;++h)b[h]=g[h];else b=
[g];else for(b=Array(l),g={radius:f,format:h,type:k},h=0;h<l;++h)b[h]=d.createCube(g);e.color=Array(b.length);for(h=0;h<b.length;++h)l=b[h],f=f||l.width,e.color[h]={target:34069,data:b[h]};for(h=0;6>h;++h){for(l=0;l<b.length;++l)e.color[l].target=34069+h;0<h&&(e.depth=c[0].depth,e.stencil=c[0].stencil,e.depthStencil=c[0].depthStencil);if(c[h])c[h](e);else c[h]=z(e)}return da(a,{width:f,height:f,color:b})}var c=Array(6);a(b);return da(a,{faces:c,resize:function(b){var d=b|0;if(d===a.width)return a;
var e=a.color;for(b=0;b<e.length;++b)e[b].resize(d);for(b=0;6>b;++b)c[b].resize(d);a.width=a.height=d;return a},_reglType:"framebufferCube",destroy:function(){c.forEach(function(b){b.destroy()})}})},clear:function(){ia(C).forEach(w)},restore:function(){A.cur=null;A.next=null;A.dirty=!0;ia(C).forEach(function(a){a.framebuffer=b.createFramebuffer();x(a)})}})}function N(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=
this.offset=0}function O(b,a,c,d){b=c.maxAttributes;a=Array(b);for(c=0;c<b;++c)a[c]=new N;return{Record:N,scope:{},state:a}}function P(b,a,c,d){function e(b,a,c,d){this.name=b;this.id=a;this.location=c;this.info=d}function f(b,a){for(var c=0;c<b.length;++c)if(b[c].id===a.id){b[c].location=a.location;return}b.push(a)}function g(c,d,e){e=35632===c?l:r;var f=e[d];if(!f){var g=a.str(d);f=b.createShader(c);b.shaderSource(f,g);b.compileShader(f);e[d]=f}return f}function h(b,a){this.id=u++;this.fragId=b;
this.vertId=a;this.program=null;this.uniforms=[];this.attributes=[];d.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function k(c,h){h=g(35632,c.fragId);var k=g(35633,c.vertId);var l=c.program=b.createProgram();b.attachShader(l,h);b.attachShader(l,k);b.linkProgram(l);var r=b.getProgramParameter(l,35718);d.profile&&(c.stats.uniformsCount=r);var t=c.uniforms;for(h=0;h<r;++h)if(k=b.getActiveUniform(l,h))if(1<k.size)for(var m=0;m<k.size;++m){var u=k.name.replace("[0]","["+m+"]");f(t,new e(u,
a.id(u),b.getUniformLocation(l,u),k))}else f(t,new e(k.name,a.id(k.name),b.getUniformLocation(l,k.name),k));r=b.getProgramParameter(l,35721);d.profile&&(c.stats.attributesCount=r);t=c.attributes;for(h=0;h<r;++h)(k=b.getActiveAttrib(l,h))&&f(t,new e(k.name,a.id(k.name),b.getAttribLocation(l,k.name),k))}var l={},r={},t={},m=[],u=0;d.profile&&(c.getMaxUniformsCount=function(){var b=0;m.forEach(function(a){a.stats.uniformsCount>b&&(b=a.stats.uniformsCount)});return b},c.getMaxAttributesCount=function(){var b=
0;m.forEach(function(a){a.stats.attributesCount>b&&(b=a.stats.attributesCount)});return b});return{clear:function(){var a=b.deleteShader.bind(b);ia(l).forEach(a);l={};ia(r).forEach(a);r={};m.forEach(function(a){b.deleteProgram(a.program)});m.length=0;t={};c.shaderCount=0},program:function(b,a,d){var e=t[a];e||(e=t[a]={});var f=e[b];f||(f=new h(a,b),c.shaderCount++,k(f,d),e[b]=f,m.push(f));return f},restore:function(){l={};r={};for(var b=0;b<m.length;++b)k(m[b])},shader:g,frag:-1,vert:-1}}function Q(b,
a,c,d,e,f,g){function h(e){var f=null===a.next?5121:a.next.colorAttachments[0].texture._texture.type;var g=0,h=0,k=d.framebufferWidth,l=d.framebufferHeight,r=null;ka(e)?r=e:e&&(g=e.x|0,h=e.y|0,k=(e.width||d.framebufferWidth-g)|0,l=(e.height||d.framebufferHeight-h)|0,r=e.data||null);c();e=k*l*4;r||(5121===f?r=new Uint8Array(e):5126===f&&(r=r||new Float32Array(e)));b.pixelStorei(3333,4);b.readPixels(g,h,k,l,6408,f,r);return r}function k(b){var c;a.setFBO({framebuffer:b.framebuffer},function(){c=h(b)});
return c}return function(b){return b&&"framebuffer"in b?k(b):h(b)}}function T(b){return Array.prototype.slice.call(b)}function V(b){return T(b).join("")}function Y(){function b(){var b=[],a=[];return da(function(){b.push.apply(b,T(arguments))},{def:function(){var d="v"+c++;a.push(d);0<arguments.length&&(b.push(d,"\x3d"),b.push.apply(b,T(arguments)),b.push(";"));return d},toString:function(){return V([0<a.length?"var "+a+";":"",V(b)])}})}function a(){function a(b,a){d(b,a,"\x3d",c.def(b,a),";")}var c=
b(),d=b(),e=c.toString,f=d.toString;return da(function(){c.apply(c,T(arguments))},{def:c.def,entry:c,exit:d,save:a,set:function(b,d,e){a(b,d);c(b,d,"\x3d",e,";")},toString:function(){return e()+f()}})}var c=0,d=[],e=[],f=b(),g={};return{global:f,link:function(b){for(var a=0;a<e.length;++a)if(e[a]===b)return d[a];a="g"+c++;d.push(a);e.push(b);return a},block:b,proc:function(b,c){function d(){var b="a"+e.length;e.push(b);return b}var e=[];c=c||0;for(var f=0;f<c;++f)d();f=a();var h=f.toString;return g[b]=
da(f,{arg:d,toString:function(){return V(["function(",e.join(),"){",h(),"}"])}})},scope:a,cond:function(){var b=V(arguments),c=a(),d=a(),e=c.toString,f=d.toString;return da(c,{then:function(){c.apply(c,T(arguments));return this},"else":function(){d.apply(d,T(arguments));return this},toString:function(){var a=f();a&&(a="else{"+a+"}");return V(["if(",b,"){",e(),"}",a])}})},compile:function(){var b=['"use strict";',f,"return {"];Object.keys(g).forEach(function(a){b.push('"',a,'":',g[a].toString(),",")});
b.push("}");var a=V(b).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,d.concat(a)).apply(null,e)}}}function ca(b){return Array.isArray(b)||ka(b)||u(b)}function Z(b){return b.sort(function(b,a){return"viewport"===b?-1:"viewport"===a?1:b<a?-1:1})}function R(b,a,c,d){this.thisDep=b;this.contextDep=a;this.propDep=c;this.append=d}function U(b){return b&&!(b.thisDep||b.contextDep||b.propDep)}function X(b){return new R(!1,!1,!1,b)}function ea(b,a){var c=b.type;return 0===
c?(c=b.data.length,new R(!0,1<=c,2<=c,a)):4===c?(c=b.data,new R(c.thisDep,c.contextDep,c.propDep,a)):new R(3===c,2===c,1===c,a)}function fa(b,a,c,e,f,g,h,k,l,r,t,m,u,n,v){function w(b){return b.replace(".","_")}function x(b,a,c){var d=w(b);Aa.push(b);na[d]=ba[d]=!!c;W[d]=a}function z(b,a,c){var d=w(b);Aa.push(b);Array.isArray(c)?(ba[d]=c.slice(),na[d]=c.slice()):ba[d]=na[d]=c;ka[d]=a}function A(){var b=Y(),c=b.link,d=b.global;b.id=oa++;b.batchId="0";var e=c(Ma),f=b.shared={props:"a0"};Object.keys(Ma).forEach(function(b){f[b]=
d.def(e,".",b)});var g=b.next={},h=b.current={};Object.keys(ka).forEach(function(b){Array.isArray(ba[b])&&(g[b]=d.def(f.next,".",b),h[b]=d.def(f.current,".",b))});var k=b.constants={};Object.keys(Ja).forEach(function(b){k[b]=d.def(JSON.stringify(Ja[b]))});b.invoke=function(a,d){switch(d.type){case 0:var e=["this",f.context,f.props,b.batchId];return a.def(c(d.data),".call(",e.slice(0,Math.max(d.data.length+1,4)),")");case 1:return a.def(f.props,d.data);case 2:return a.def(f.context,d.data);case 3:return a.def("this",
d.data);case 4:return d.data.append(b,a),d.data.ref}};b.attribCache={};var l={};b.scopeAttrib=function(b){b=a.id(b);if(b in l)return l[b];var d=r.scope[b];d||(d=r.scope[b]=new ha);return l[b]=c(d)};return b}function y(b){var a=b["static"];b=b.dynamic;if("profile"in a){var c=!!a.profile;var d=X(function(b,a){return c});d.enable=c}else if("profile"in b){var e=b.profile;d=ea(e,function(b,a){return b.invoke(a,e)})}return d}function p(b,a){a=b["static"];b=b.dynamic;if("framebuffer"in a){var c=a.framebuffer;
return c?(c=k.getFramebuffer(c),X(function(b,a){var d=b.link(c);b=b.shared;a.set(b.framebuffer,".next",d);b=b.context;a.set(b,".framebufferWidth",d+".width");a.set(b,".framebufferHeight",d+".height");return d})):X(function(b,a){b=b.shared;a.set(b.framebuffer,".next","null");b=b.context;a.set(b,".framebufferWidth",b+".drawingBufferWidth");a.set(b,".framebufferHeight",b+".drawingBufferHeight");return"null"})}if("framebuffer"in b){var d=b.framebuffer;return ea(d,function(b,a){var c=b.invoke(a,d);b=b.shared;
var e=b.framebuffer;c=a.def(e,".getFramebuffer(",c,")");a.set(e,".next",c);b=b.context;a.set(b,".framebufferWidth",c+"?"+c+".width:"+b+".drawingBufferWidth");a.set(b,".framebufferHeight",c+"?"+c+".height:"+b+".drawingBufferHeight");return c})}return null}function B(b,a,c){function d(b){if(b in e){var c=e[b];b=!0;var d=c.x|0,g=c.y|0,h,k;"width"in c?h=c.width|0:b=!1;"height"in c?k=c.height|0:b=!1;return new R(!b&&a&&a.thisDep,!b&&a&&a.contextDep,!b&&a&&a.propDep,function(b,a){b=b.shared.context;var e=
h;"width"in c||(e=a.def(b,".","framebufferWidth","-",d));var f=k;"height"in c||(f=a.def(b,".","framebufferHeight","-",g));return[d,g,e,f]})}if(b in f){var l=f[b];b=ea(l,function(b,a){var c=b.invoke(a,l);b=b.shared.context;var d=a.def(c,".x|0"),e=a.def(c,".y|0"),f=a.def('"width" in ',c,"?",c,".width|0:","(",b,".","framebufferWidth","-",d,")");c=a.def('"height" in ',c,"?",c,".height|0:","(",b,".","framebufferHeight","-",e,")");return[d,e,f,c]});a&&(b.thisDep=b.thisDep||a.thisDep,b.contextDep=b.contextDep||
a.contextDep,b.propDep=b.propDep||a.propDep);return b}return a?new R(a.thisDep,a.contextDep,a.propDep,function(b,a){b=b.shared.context;return[0,0,a.def(b,".","framebufferWidth"),a.def(b,".","framebufferHeight")]}):null}var e=b["static"],f=b.dynamic;if(b=d("viewport")){var g=b;b=new R(b.thisDep,b.contextDep,b.propDep,function(b,a){var c=g.append(b,a);b=b.shared.context;a.set(b,".viewportWidth",c[2]);a.set(b,".viewportHeight",c[3]);return c})}return{viewport:b,scissor_box:d("scissor.box")}}function C(b){function c(b){if(b in
d){var c=a.id(d[b]);b=X(function(){return c});b.id=c;return b}if(b in e){var f=e[b];return ea(f,function(b,a){var c=b.invoke(a,f);return a.def(b.shared.strings,".id(",c,")")})}return null}var d=b["static"],e=b.dynamic,f=c("frag"),g=c("vert"),h=null;U(f)&&U(g)?(h=t.program(g.id,f.id),b=X(function(b,a){return b.link(h)})):b=new R(f&&f.thisDep||g&&g.thisDep,f&&f.contextDep||g&&g.contextDep,f&&f.propDep||g&&g.propDep,function(b,a){var c=b.shared.shader;var d=f?f.append(b,a):a.def(c,".","frag");b=g?g.append(b,
a):a.def(c,".","vert");return a.def(c+".program("+b+","+d+")")});return{frag:f,vert:g,progVar:b,program:h}}function D(b,a){function c(b,a){if(b in d){var c=d[b]|0;return X(function(b,d){a&&(b.OFFSET=c);return c})}if(b in e){var g=e[b];return ea(g,function(b,c){c=b.invoke(c,g);a&&(b.OFFSET=c);return c})}return a&&f?X(function(b,a){b.OFFSET="0";return 0}):null}var d=b["static"],e=b.dynamic,f=function(){if("elements"in d){var b=d.elements;ca(b)?b=g.getElements(g.create(b,!0)):b&&(b=g.getElements(b));
var a=X(function(a,c){return b?(c=a.link(b),a.ELEMENTS=c):a.ELEMENTS=null});a.value=b;return a}if("elements"in e){var c=e.elements;return ea(c,function(b,a){var d=b.shared,e=d.isBufferArgs;d=d.elements;var f=b.invoke(a,c),g=a.def("null");e=a.def(e,"(",f,")");f=b.cond(e).then(g,"\x3d",d,".createStream(",f,");")["else"](g,"\x3d",d,".getElements(",f,");");a.entry(f);a.exit(b.cond(e).then(d,".destroyStream(",g,");"));return b.ELEMENTS=g})}return null}(),h=c("offset",!0);return{elements:f,primitive:function(){if("primitive"in
d){var b=d.primitive;return X(function(a,c){return ua[b]})}if("primitive"in e){var a=e.primitive;return ea(a,function(b,c){var d=b.constants.primTypes;b=b.invoke(c,a);return c.def(d,"[",b,"]")})}return f?U(f)?f.value?X(function(b,a){return a.def(b.ELEMENTS,".primType")}):X(function(){return 4}):new R(f.thisDep,f.contextDep,f.propDep,function(b,a){b=b.ELEMENTS;return a.def(b,"?",b,".primType:",4)}):null}(),count:function(){if("count"in d){var b=d.count|0;return X(function(){return b})}if("count"in
e){var a=e.count;return ea(a,function(b,c){return b.invoke(c,a)})}return f?U(f)?f?h?new R(h.thisDep,h.contextDep,h.propDep,function(b,a){return a.def(b.ELEMENTS,".vertCount-",b.OFFSET)}):X(function(b,a){return a.def(b.ELEMENTS,".vertCount")}):X(function(){return-1}):new R(f.thisDep||h.thisDep,f.contextDep||h.contextDep,f.propDep||h.propDep,function(b,a){var c=b.ELEMENTS;return b.OFFSET?a.def(c,"?",c,".vertCount-",b.OFFSET,":-1"):a.def(c,"?",c,".vertCount:-1")}):null}(),instances:c("instances",!1),
offset:h}}function I(b,a){var c=b["static"],e=b.dynamic,f={};Aa.forEach(function(b){function a(a,d){if(b in c){var h=a(c[b]);f[g]=X(function(){return h})}else if(b in e){var k=e[b];f[g]=ea(k,function(b,a){return d(b,a,b.invoke(a,k))})}}var g=w(b);switch(b){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return a(function(b){return b},function(b,
a,c){return c});case "depth.func":return a(function(b){return Za[b]},function(b,a,c){return a.def(b.constants.compareFuncs,"[",c,"]")});case "depth.range":return a(function(b){return b},function(b,a,c){b=a.def("+",c,"[0]");a=a.def("+",c,"[1]");return[b,a]});case "blend.func":return a(function(b){return[Oa["srcRGB"in b?b.srcRGB:b.src],Oa["dstRGB"in b?b.dstRGB:b.dst],Oa["srcAlpha"in b?b.srcAlpha:b.src],Oa["dstAlpha"in b?b.dstAlpha:b.dst]]},function(b,a,c){function d(b,d){return a.def('"',b,d,'" in ',
c,"?",c,".",b,d,":",c,".",b)}b=b.constants.blendFuncs;var e=d("src","RGB"),f=d("dst","RGB");e=a.def(b,"[",e,"]");var g=a.def(b,"[",d("src","Alpha"),"]");f=a.def(b,"[",f,"]");b=a.def(b,"[",d("dst","Alpha"),"]");return[e,f,g,b]});case "blend.equation":return a(function(b){if("string"===typeof b)return[ja[b],ja[b]];if("object"===typeof b)return[ja[b.rgb],ja[b.alpha]]},function(b,a,c){var d=b.constants.blendEquations,e=a.def(),f=a.def();b=b.cond("typeof ",c,'\x3d\x3d\x3d"string"');b.then(e,"\x3d",f,"\x3d",
d,"[",c,"];");b["else"](e,"\x3d",d,"[",c,".rgb];",f,"\x3d",d,"[",c,".alpha];");a(b);return[e,f]});case "blend.color":return a(function(b){return d(4,function(a){return+b[a]})},function(b,a,c){return d(4,function(b){return a.def("+",c,"[",b,"]")})});case "stencil.mask":return a(function(b){return b|0},function(b,a,c){return a.def(c,"|0")});case "stencil.func":return a(function(b){return[Za[b.cmp||"keep"],b.ref||0,"mask"in b?b.mask:-1]},function(b,a,c){b=a.def('"cmp" in ',c,"?",b.constants.compareFuncs,
"[",c,".cmp]",":",7680);var d=a.def(c,".ref|0");a=a.def('"mask" in ',c,"?",c,".mask|0:-1");return[b,d,a]});case "stencil.opFront":case "stencil.opBack":return a(function(a){return["stencil.opBack"===b?1029:1028,pa[a.fail||"keep"],pa[a.zfail||"keep"],pa[a.zpass||"keep"]]},function(a,c,d){function e(b){return c.def('"',b,'" in ',d,"?",f,"[",d,".",b,"]:",7680)}var f=a.constants.stencilOps;return["stencil.opBack"===b?1029:1028,e("fail"),e("zfail"),e("zpass")]});case "polygonOffset.offset":return a(function(b){return[b.factor|
0,b.units|0]},function(b,a,c){b=a.def(c,".factor|0");a=a.def(c,".units|0");return[b,a]});case "cull.face":return a(function(b){var a=0;"front"===b?a=1028:"back"===b&&(a=1029);return a},function(b,a,c){return a.def(c,'\x3d\x3d\x3d"front"?',1028,":",1029)});case "lineWidth":return a(function(b){return b},function(b,a,c){return c});case "frontFace":return a(function(b){return vb[b]},function(b,a,c){return a.def(c+'\x3d\x3d\x3d"cw"?2304:2305')});case "colorMask":return a(function(b){return b.map(function(b){return!!b})},
function(b,a,c){return d(4,function(b){return"!!"+c+"["+b+"]"})});case "sample.coverage":return a(function(b){return["value"in b?b.value:1,!!b.invert]},function(b,a,c){b=a.def('"value" in ',c,"?+",c,".value:1");a=a.def("!!",c,".invert");return[b,a]})}});return f}function E(b,a){var c=b["static"],e=b.dynamic,f={};Object.keys(c).forEach(function(b){var a=c[b];if("number"===typeof a||"boolean"===typeof a)var e=X(function(){return a});else if("function"===typeof a){var g=a._reglType;if("texture2d"===
g||"textureCube"===g)e=X(function(b){return b.link(a)});else if("framebuffer"===g||"framebufferCube"===g)e=X(function(b){return b.link(a.color[0])})}else q(a)&&(e=X(function(b){return b.global.def("[",d(a.length,function(b){return a[b]}),"]")}));e.value=a;f[b]=e});Object.keys(e).forEach(function(b){var a=e[b];f[b]=ea(a,function(b,c){return b.invoke(c,a)})});return f}function H(b,c){var d=b["static"],e=b.dynamic,g={};Object.keys(d).forEach(function(b){var c=d[b],e=a.id(b),h=new ha;if(ca(c))h.state=
1,h.buffer=f.getBuffer(f.create(c,34962,!1,!0)),h.type=0;else{var k=f.getBuffer(c);if(k)h.state=1,h.buffer=k,h.type=0;else if("constant"in c){var l=c.constant;h.buffer="null";h.state=2;"number"===typeof l?h.x=l:gb.forEach(function(b,a){a<l.length&&(h[b]=l[a])})}else{k=ca(c.buffer)?f.getBuffer(f.create(c.buffer,34962,!1,!0)):f.getBuffer(c.buffer);var r=c.offset|0,t=c.stride|0,m=c.size|0,u=!!c.normalized,n=0;"type"in c&&(n=sa[c.type]);c=c.divisor|0;h.buffer=k;h.state=1;h.size=m;h.normalized=u;h.type=
n||k.dtype;h.offset=r;h.stride=t;h.divisor=c}}g[b]=X(function(b,a){a=b.attribCache;if(e in a)return a[e];var c={isStream:!1};Object.keys(h).forEach(function(b){c[b]=h[b]});h.buffer&&(c.buffer=b.link(h.buffer),c.type=c.type||c.buffer+".dtype");return a[e]=c})});Object.keys(e).forEach(function(b){var a=e[b];g[b]=ea(a,function(b,c){function d(b){c(h[b],"\x3d",e,".",b,"|0;")}var e=b.invoke(c,a);b=b.shared;var f=b.isBufferArgs,g=b.buffer,h={isStream:c.def(!1)},k=new ha;k.state=1;Object.keys(k).forEach(function(b){h[b]=
c.def(""+k[b])});var l=h.buffer,r=h.type;c("if(",f,"(",e,")){",h.isStream,"\x3dtrue;",l,"\x3d",g,".createStream(",34962,",",e,");",r,"\x3d",l,".dtype;","}else{",l,"\x3d",g,".getBuffer(",e,");","if(",l,"){",r,"\x3d",l,".dtype;",'}else if("constant" in ',e,"){",h.state,"\x3d",2,";","if(typeof "+e+'.constant \x3d\x3d\x3d "number"){',h[gb[0]],"\x3d",e,".constant;",gb.slice(1).map(function(b){return h[b]}).join("\x3d"),"\x3d0;","}else{",gb.map(function(b,a){return h[b]+"\x3d"+e+".constant.length\x3e"+
a+"?"+e+".constant["+a+"]:0;"}).join(""),"}}else{","if(",f,"(",e,".buffer)){",l,"\x3d",g,".createStream(",34962,",",e,".buffer);","}else{",l,"\x3d",g,".getBuffer(",e,".buffer);","}",r,'\x3d"type" in ',e,"?",b.glTypes,"[",e,".type]:",l,".dtype;",h.normalized,"\x3d!!",e,".normalized;");d("size");d("offset");d("stride");d("divisor");c("}}");c.exit("if(",h.isStream,"){",g,".destroyStream(",l,");","}");return h})});return g}function N(b){var a=b["static"],c=b.dynamic,d={};Object.keys(a).forEach(function(b){var c=
a[b];d[b]=X(function(b,a){return"number"===typeof c||"boolean"===typeof c?""+c:b.link(c)})});Object.keys(c).forEach(function(b){var a=c[b];d[b]=ea(a,function(b,c){return b.invoke(c,a)})});return d}function M(b,a,c,d,e){var f=p(b,e),g=B(b,f,e),h=D(b,e),k=I(b,e),l=C(b,e),r=g.viewport;r&&(k.viewport=r);r=w("scissor.box");(g=g[r])&&(k[r]=g);g=0<Object.keys(k).length;f={framebuffer:f,draw:h,shader:l,state:k,dirty:g};f.profile=y(b,e);f.uniforms=E(c,e);f.attributes=H(a,e);f.context=N(d,e);return f}function G(b,
a,c){var d=b.shared.context,e=b.scope();Object.keys(c).forEach(function(f){a.save(d,"."+f);e(d,".",f,"\x3d",c[f].append(b,a),";")});a(e)}function K(b,a,c,d){var e=b.shared,f=e.gl,g=e.framebuffer,h;wa&&(h=a.def(e.extensions,".webgl_draw_buffers"));var k=b.constants;e=k.drawBuffer;k=k.backBuffer;b=c?c.append(b,a):a.def(g,".next");d||a("if(",b,"!\x3d\x3d",g,".cur){");a("if(",b,"){",f,".bindFramebuffer(",36160,",",b,".framebuffer);");wa&&a(h,".drawBuffersWEBGL(",e,"[",b,".colorAttachments.length]);");
a("}else{",f,".bindFramebuffer(",36160,",null);");wa&&a(h,".drawBuffersWEBGL(",k,");");a("}",g,".cur\x3d",b,";");d||a("}")}function J(b,a,c){var e=b.shared,f=e.gl,g=b.current,h=b.next,k=e.current,l=e.next,r=b.cond(k,".dirty");Aa.forEach(function(a){a=w(a);if(!(a in c.state))if(a in h){var e=h[a];var t=g[a];var m=d(ba[a].length,function(b){return r.def(e,"[",b,"]")});r(b.cond(m.map(function(b,a){return b+"!\x3d\x3d"+t+"["+a+"]"}).join("||")).then(f,".",ka[a],"(",m,");",m.map(function(b,a){return t+
"["+a+"]\x3d"+b}).join(";"),";"))}else e=r.def(l,".",a),m=b.cond(e,"!\x3d\x3d",k,".",a),r(m),a in W?m(b.cond(e).then(f,".enable(",W[a],");")["else"](f,".disable(",W[a],");"),k,".",a,"\x3d",e,";"):m(f,".",ka[a],"(",e,");",k,".",a,"\x3d",e,";")});0===Object.keys(c.state).length&&r(k,".dirty\x3dfalse;");a(r)}function O(b,a,c,d){var e=b.shared,f=b.current,g=e.current,h=e.gl;Z(Object.keys(c)).forEach(function(e){var k=c[e];if(!d||d(k)){var l=k.append(b,a);if(W[e]){var r=W[e];U(k)?l?a(h,".enable(",r,");"):
a(h,".disable(",r,");"):a(b.cond(l).then(h,".enable(",r,");")["else"](h,".disable(",r,");"));a(g,".",e,"\x3d",l,";")}else if(q(l)){var t=f[e];a(h,".",ka[e],"(",l,");",l.map(function(b,a){return t+"["+a+"]\x3d"+b}).join(";"),";")}else a(h,".",ka[e],"(",l,");",g,".",e,"\x3d",l,";")}})}function F(b,a){Na&&(b.instancing=a.def(b.shared.extensions,".angle_instanced_arrays"))}function L(b,a,c,d,e){function f(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function g(b){u=a.def();
b(u,"\x3d",f(),";");"string"===typeof e?b(r,".count+\x3d",e,";"):b(r,".count++;");n&&(d?(v=a.def(),b(v,"\x3d",m,".getNumPendingQueries();")):b(m,".beginQuery(",r,");"))}function h(b){b(r,".cpuTime+\x3d",f(),"-",u,";");n&&(d?b(m,".pushScopeStats(",v,",",m,".getNumPendingQueries(),",r,");"):b(m,".endQuery();"))}function k(b){var c=a.def(t,".profile");a(t,".profile\x3d",b,";");a.exit(t,".profile\x3d",c,";")}var l=b.shared,r=b.stats,t=l.current,m=l.timer;c=c.profile;var u,v;if(c){if(U(c)){c.enable?(g(a),
h(a.exit),k("true")):k("false");return}c=c.append(b,a);k(c)}else c=a.def(t,".profile");l=b.block();g(l);a("if(",c,"){",l,"}");b=b.block();h(b);a.exit("if(",c,"){",b,"}")}function Q(b,a,c,d,e){function f(b){switch(b){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function g(c,d,e){function f(){a("if(!",r,".buffer){",k,".enableVertexAttribArray(",l,");}");var c=e.type;var f=e.size?a.def(e.size,"||",d):d;
a("if(",r,".type!\x3d\x3d",c,"||",r,".size!\x3d\x3d",f,"||",u.map(function(b){return r+"."+b+"!\x3d\x3d"+e[b]}).join("||"),"){",k,".bindBuffer(",34962,",",t,".buffer);",k,".vertexAttribPointer(",[l,f,c,e.normalized,e.stride,e.offset],");",r,".type\x3d",c,";",r,".size\x3d",f,";",u.map(function(b){return r+"."+b+"\x3d"+e[b]+";"}).join(""),"}");Na&&(c=e.divisor,a("if(",r,".divisor!\x3d\x3d",c,"){",b.instancing,".vertexAttribDivisorANGLE(",[l,c],");",r,".divisor\x3d",c,";}"))}function g(){a("if(",r,".buffer){",
k,".disableVertexAttribArray(",l,");","}if(",gb.map(function(b,a){return r+"."+b+"!\x3d\x3d"+m[a]}).join("||"),"){",k,".vertexAttrib4f(",l,",",m,");",gb.map(function(b,a){return r+"."+b+"\x3d"+m[a]+";"}).join(""),"}")}var k=h.gl,l=a.def(c,".location"),r=a.def(h.attributes,"[",l,"]");c=e.state;var t=e.buffer,m=[e.x,e.y,e.z,e.w],u=["buffer","normalized","offset","stride"];1===c?f():2===c?g():(a("if(",c,"\x3d\x3d\x3d",1,"){"),f(),a("}else{"),g(),a("}"))}var h=b.shared;d.forEach(function(d){var h=d.name,
k=c.attributes[h];if(k){if(!e(k))return;var l=k.append(b,a)}else{if(!e(Nb))return;var r=b.scopeAttrib(h);l={};Object.keys(new ha).forEach(function(b){l[b]=a.def(r,".",b)})}g(b.link(d),f(d.info.type),l)})}function P(b,c,e,f,g){for(var h=b.shared,k=h.gl,l,r=0;r<f.length;++r){var t=f[r],m=t.name,u=t.info.type,n=e.uniforms[m];t=b.link(t)+".location";if(n){if(!g(n))continue;if(U(n)){m=n.value;if(35678===u||35680===u)u=b.link(m._texture||m.color[0]._texture),c(k,".uniform1i(",t,",",u+".bind());"),c.exit(u,
".unbind();");else if(35674===u||35675===u||35676===u)m=b.global.def("new Float32Array(["+Array.prototype.slice.call(m)+"])"),n=2,35675===u?n=3:35676===u&&(n=4),c(k,".uniformMatrix",n,"fv(",t,",false,",m,");");else{switch(u){case 5126:l="1f";break;case 35664:l="2f";break;case 35665:l="3f";break;case 35666:l="4f";break;case 35670:l="1i";break;case 5124:l="1i";break;case 35671:l="2i";break;case 35667:l="2i";break;case 35672:l="3i";break;case 35668:l="3i";break;case 35673:l="4i";break;case 35669:l="4i"}c(k,
".uniform",l,"(",t,",",q(m)?Array.prototype.slice.call(m):m,");")}continue}else var v=n.append(b,c)}else{if(!g(Nb))continue;v=c.def(h.uniforms,"[",a.id(m),"]")}35678===u?c("if(",v,"\x26\x26",v,'._reglType\x3d\x3d\x3d"framebuffer"){',v,"\x3d",v,".color[0];","}"):35680===u&&c("if(",v,"\x26\x26",v,'._reglType\x3d\x3d\x3d"framebufferCube"){',v,"\x3d",v,".color[0];","}");m=1;switch(u){case 35678:case 35680:u=c.def(v,"._texture");c(k,".uniform1i(",t,",",u,".bind());");c.exit(u,".unbind();");continue;case 5124:case 35670:l=
"1i";break;case 35667:case 35671:l="2i";m=2;break;case 35668:case 35672:l="3i";m=3;break;case 35669:case 35673:l="4i";m=4;break;case 5126:l="1f";break;case 35664:l="2f";m=2;break;case 35665:l="3f";m=3;break;case 35666:l="4f";m=4;break;case 35674:l="Matrix2fv";break;case 35675:l="Matrix3fv";break;case 35676:l="Matrix4fv"}c(k,".uniform",l,"(",t,",");if("M"===l.charAt(0)){t=Math.pow(u-35674+2,2);var w=b.global.def("new Float32Array(",t,")");c("false,(Array.isArray(",v,")||",v," instanceof Float32Array)?",
v,":(",d(t,function(b){return w+"["+b+"]\x3d"+v+"["+b+"]"}),",",w,")")}else 1<m?c(d(m,function(b){return v+"["+b+"]"})):c(v);c(");")}}function T(b,a,c,d){function e(e){var f=r[e];return f?f.contextDep&&d.contextDynamic||f.propDep?f.append(b,c):f.append(b,a):a.def(l,".",e)}function f(){function b(){c(w,".drawElementsInstancedANGLE(",[m,n,x,u+"\x3c\x3c(("+x+"-5121)\x3e\x3e1)",v],");")}function a(){c(w,".drawArraysInstancedANGLE(",[m,u,n,v],");")}t?z?b():(c("if(",t,"){"),b(),c("}else{"),a(),c("}")):
a()}function g(){function b(){c(k+".drawElements("+[m,n,x,u+"\x3c\x3c(("+x+"-5121)\x3e\x3e1)"]+");")}function a(){c(k+".drawArrays("+[m,u,n]+");")}t?z?b():(c("if(",t,"){"),b(),c("}else{"),a(),c("}")):a()}var h=b.shared,k=h.gl,l=h.draw,r=d.draw,t=function(){var e=r.elements,f=a;if(e){if(e.contextDep&&d.contextDynamic||e.propDep)f=c;e=e.append(b,f)}else e=f.def(l,".","elements");e&&f("if("+e+")"+k+".bindBuffer(34963,"+e+".buffer.buffer);");return e}(),m=e("primitive"),u=e("offset"),n=function(){var e=
r.count,f=a;if(e){if(e.contextDep&&d.contextDynamic||e.propDep)f=c;e=e.append(b,f)}else e=f.def(l,".","count");return e}();if("number"===typeof n){if(0===n)return}else c("if(",n,"){"),c.exit("}");var v,w;Na&&(v=e("instances"),w=b.instancing);var x=t+".type",z=r.elements&&U(r.elements);Na&&("number"!==typeof v||0<=v)?"string"===typeof v?(c("if(",v,"\x3e0){"),f(),c("}else if(",v,"\x3c0){"),g(),c("}")):f():g()}function la(b,a,c,d,e){a=A();e=a.proc("body",e);Na&&(a.instancing=e.def(a.shared.extensions,
".angle_instanced_arrays"));b(a,e,c,d);return a.compile().body}function V(b,a,c,d){F(b,a);Q(b,a,c,d.attributes,function(){return!0});P(b,a,c,d.uniforms,function(){return!0});T(b,a,a,c)}function fa(b,a){var c=b.proc("draw",1);F(b,c);G(b,c,a.context);K(b,c,a.framebuffer);J(b,c,a);O(b,c,a.state);L(b,c,a,!1,!0);var d=a.shader.progVar.append(b,c);c(b.shared.gl,".useProgram(",d,".program);");if(a.shader.program)V(b,c,a,a.shader.program);else{var e=b.global.def("{}"),f=c.def(d,".id"),g=c.def(e,"[",f,"]");
c(b.cond(g).then(g,".call(this,a0);")["else"](g,"\x3d",e,"[",f,"]\x3d",b.link(function(c){return la(V,b,a,c,1)}),"(",d,");",g,".call(this,a0);"))}0<Object.keys(a.state).length&&c(b.shared.current,".dirty\x3dtrue;")}function ma(b,a,c,d){function e(){return!0}b.batchId="a1";F(b,a);Q(b,a,c,d.attributes,e);P(b,a,c,d.uniforms,e);T(b,a,a,c)}function da(b,a,c,d){function e(b){return b.contextDep&&g||b.propDep}function f(b){return!e(b)}F(b,a);var g=c.contextDep,h=a.def(),k=a.def();b.shared.props=k;b.batchId=
h;var l=b.scope(),r=b.scope();a(l.entry,"for(",h,"\x3d0;",h,"\x3c","a1",";++",h,"){",k,"\x3d","a0","[",h,"];",r,"}",l.exit);c.needsContext&&G(b,r,c.context);c.needsFramebuffer&&K(b,r,c.framebuffer);O(b,r,c.state,e);c.profile&&e(c.profile)&&L(b,r,c,!1,!0);d?(Q(b,l,c,d.attributes,f),Q(b,r,c,d.attributes,e),P(b,l,c,d.uniforms,f),P(b,r,c,d.uniforms,e),T(b,l,r,c)):(a=b.global.def("{}"),d=c.shader.progVar.append(b,r),k=r.def(d,".id"),l=r.def(a,"[",k,"]"),r(b.shared.gl,".useProgram(",d,".program);","if(!",
l,"){",l,"\x3d",a,"[",k,"]\x3d",b.link(function(a){return la(ma,b,c,a,2)}),"(",d,");}",l,".call(this,a0[",h,"],",h,");"))}function ra(b,a){function c(b){return b.contextDep&&e||b.propDep}var d=b.proc("batch",2);b.batchId="0";F(b,d);var e=!1,f=!0;Object.keys(a.context).forEach(function(b){e=e||a.context[b].propDep});e||(G(b,d,a.context),f=!1);var g=a.framebuffer,h=!1;g?(g.propDep?e=h=!0:g.contextDep&&e&&(h=!0),h||K(b,d,g)):K(b,d,null);a.state.viewport&&a.state.viewport.propDep&&(e=!0);J(b,d,a);O(b,
d,a.state,function(b){return!c(b)});a.profile&&c(a.profile)||L(b,d,a,!1,"a1");a.contextDep=e;a.needsContext=f;a.needsFramebuffer=h;f=a.shader.progVar;if(f.contextDep&&e||f.propDep)da(b,d,a,null);else if(f=f.append(b,d),d(b.shared.gl,".useProgram(",f,".program);"),a.shader.program)da(b,d,a,a.shader.program);else{g=b.global.def("{}");h=d.def(f,".id");var k=d.def(g,"[",h,"]");d(b.cond(k).then(k,".call(this,a0,a1);")["else"](k,"\x3d",g,"[",h,"]\x3d",b.link(function(c){return la(da,b,a,c,2)}),"(",f,");",
k,".call(this,a0,a1);"))}0<Object.keys(a.state).length&&d(b.shared.current,".dirty\x3dtrue;")}function Da(b,c){function d(a){var d=c.shader[a];d&&e.set(f.shader,"."+a,d.append(b,e))}var e=b.proc("scope",3);b.batchId="a2";var f=b.shared,g=f.current;G(b,e,c.context);c.framebuffer&&c.framebuffer.append(b,e);Z(Object.keys(c.state)).forEach(function(a){var d=c.state[a].append(b,e);q(d)?d.forEach(function(c,d){e.set(b.next[a],"["+d+"]",c)}):e.set(f.next,"."+a,d)});L(b,e,c,!0,!0);["elements","offset","count",
"instances","primitive"].forEach(function(a){var d=c.draw[a];d&&e.set(f.draw,"."+a,""+d.append(b,e))});Object.keys(c.uniforms).forEach(function(d){e.set(f.uniforms,"["+a.id(d)+"]",c.uniforms[d].append(b,e))});Object.keys(c.attributes).forEach(function(a){var d=c.attributes[a].append(b,e),f=b.scopeAttrib(a);Object.keys(new ha).forEach(function(b){e.set(f,"."+b,d[b])})});d("vert");d("frag");0<Object.keys(c.state).length&&(e(g,".dirty\x3dtrue;"),e.exit(g,".dirty\x3dtrue;"));e("a1(",b.shared.context,
",a0,",b.batchId,");")}function Ea(b){if("object"===typeof b&&!q(b)){for(var a=Object.keys(b),c=0;c<a.length;++c)if(aa.isDynamic(b[a[c]]))return!0;return!1}}function Ba(b,a,c){function d(b,a){g.forEach(function(c){var d=e[c];aa.isDynamic(d)&&(d=b.invoke(a,d),a(r,".",c,"\x3d",d,";"))})}var e=a["static"][c];if(e&&Ea(e)){var f=b.global,g=Object.keys(e),h=!1,k=!1,l=!1,r=b.global.def("{}");g.forEach(function(a){var c=e[a];if(aa.isDynamic(c))"function"===typeof c&&(c=e[a]=aa.unbox(c)),a=ea(c,null),h=h||
a.thisDep,l=l||a.propDep,k=k||a.contextDep;else{f(r,".",a,"\x3d");switch(typeof c){case "number":f(c);break;case "string":f('"',c,'"');break;case "object":Array.isArray(c)&&f("[",c.join(),"]");break;default:f(b.link(c))}f(";")}});a.dynamic[c]=new aa.DynamicVariable(4,{thisDep:h,contextDep:k,propDep:l,ref:r,append:d});delete a["static"][c]}}var ha=r.Record,ja={add:32774,subtract:32778,"reverse subtract":32779};c.ext_blend_minmax&&(ja.min=32775,ja.max=32776);var Na=c.angle_instanced_arrays,wa=c.webgl_draw_buffers,
ba={dirty:!0,profile:v.profile},na={},Aa=[],W={},ka={};x("dither",3024);x("blend.enable",3042);z("blend.color","blendColor",[0,0,0,0]);z("blend.equation","blendEquationSeparate",[32774,32774]);z("blend.func","blendFuncSeparate",[1,0,1,0]);x("depth.enable",2929,!0);z("depth.func","depthFunc",513);z("depth.range","depthRange",[0,1]);z("depth.mask","depthMask",!0);z("colorMask","colorMask",[!0,!0,!0,!0]);x("cull.enable",2884);z("cull.face","cullFace",1029);z("frontFace","frontFace",2305);z("lineWidth",
"lineWidth",1);x("polygonOffset.enable",32823);z("polygonOffset.offset","polygonOffset",[0,0]);x("sample.alpha",32926);x("sample.enable",32928);z("sample.coverage","sampleCoverage",[1,!1]);x("stencil.enable",2960);z("stencil.mask","stencilMask",-1);z("stencil.func","stencilFunc",[519,0,-1]);z("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);z("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);x("scissor.enable",3089);z("scissor.box","scissor",[0,0,b.drawingBufferWidth,b.drawingBufferHeight]);
z("viewport","viewport",[0,0,b.drawingBufferWidth,b.drawingBufferHeight]);var Ma={gl:b,context:u,strings:a,next:na,current:ba,draw:m,elements:g,buffer:f,shader:t,attributes:r.state,uniforms:l,framebuffer:k,extensions:c,timer:n,isBufferArgs:ca},Ja={primTypes:ua,compareFuncs:Za,blendFuncs:Oa,blendEquations:ja,stencilOps:pa,glTypes:sa,orientationType:vb};wa&&(Ja.backBuffer=[1029],Ja.drawBuffer=d(e.maxDrawbuffers,function(b){return 0===b?[0]:d(b,function(b){return 36064+b})}));var oa=0;return{next:na,
current:ba,procs:function(){var b=A(),a=b.proc("poll"),c=b.proc("refresh"),f=b.block();a(f);c(f);var g=b.shared,h=g.gl,k=g.next,l=g.current;f(l,".dirty\x3dfalse;");K(b,a);K(b,c,null,!0);var r;Na&&(r=b.link(Na));for(var t=0;t<e.maxAttributes;++t){var m=c.def(g.attributes,"[",t,"]"),u=b.cond(m,".buffer");u.then(h,".enableVertexAttribArray(",t,");",h,".bindBuffer(",34962,",",m,".buffer.buffer);",h,".vertexAttribPointer(",t,",",m,".size,",m,".type,",m,".normalized,",m,".stride,",m,".offset);")["else"](h,
".disableVertexAttribArray(",t,");",h,".vertexAttrib4f(",t,",",m,".x,",m,".y,",m,".z,",m,".w);",m,".buffer\x3dnull;");c(u);Na&&c(r,".vertexAttribDivisorANGLE(",t,",",m,".divisor);")}Object.keys(W).forEach(function(d){var e=W[d],g=f.def(k,".",d),r=b.block();r("if(",g,"){",h,".enable(",e,")}else{",h,".disable(",e,")}",l,".",d,"\x3d",g,";");c(r);a("if(",g,"!\x3d\x3d",l,".",d,"){",r,"}")});Object.keys(ka).forEach(function(e){var g=ka[e],r=ba[e],t,m,u=b.block();u(h,".",g,"(");q(r)?(g=r.length,t=b.global.def(k,
".",e),m=b.global.def(l,".",e),u(d(g,function(b){return t+"["+b+"]"}),");",d(g,function(b){return m+"["+b+"]\x3d"+t+"["+b+"];"}).join("")),a("if(",d(g,function(b){return t+"["+b+"]!\x3d\x3d"+m+"["+b+"]"}).join("||"),"){",u,"}")):(t=f.def(k,".",e),m=f.def(l,".",e),u(t,");",l,".",e,"\x3d",t,";"),a("if(",t,"!\x3d\x3d",m,"){",u,"}"));c(u)});return b.compile()}(),compile:function(b,a,c,d,e){var f=A();f.stats=f.link(e);Object.keys(a["static"]).forEach(function(b){Ba(f,a,b)});qa.forEach(function(a){Ba(f,
b,a)});c=M(b,a,c,d,f);fa(f,c);Da(f,c);ra(f,c);return f.compile()}}}function la(b,a){for(var c=0;c<b.length;++c)if(b[c]===a)return c;return-1}var da=function(b,a){for(var c=Object.keys(a),d=0;d<c.length;++d)b[c[d]]=a[c[d]];return b},ma=0,aa={DynamicVariable:a,define:function(b,c){return new a(b,m(c+""))},isDynamic:function(b){return"function"===typeof b&&!b._reglType||b instanceof a},unbox:function(b,c){return"function"===typeof b?new a(0,b):b},accessor:m},na={next:"function"===typeof requestAnimationFrame?
function(b){return requestAnimationFrame(b)}:function(b){return setTimeout(b,16)},cancel:"function"===typeof cancelAnimationFrame?function(b){return cancelAnimationFrame(b)}:clearTimeout},ha="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},ja=r();ja.zero=r();var oa=function(b,a){var c=1;a.ext_texture_filter_anisotropic&&(c=b.getParameter(34047));var d=1,e=1;a.webgl_draw_buffers&&(d=b.getParameter(34852),e=b.getParameter(36063));var f=
!!a.oes_texture_float;if(f){f=b.createTexture();b.bindTexture(3553,f);b.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var g=b.createFramebuffer();b.bindFramebuffer(36160,g);b.framebufferTexture2D(36160,36064,3553,f,0);b.bindTexture(3553,null);if(36053!==b.checkFramebufferStatus(36160))f=!1;else{b.viewport(0,0,1,1);b.clearColor(1,0,0,1);b.clear(16384);var h=ja.allocType(5126,4);b.readPixels(0,0,1,1,6408,5126,h);b.getError()?f=!1:(b.deleteFramebuffer(g),b.deleteTexture(f),f=1===h[0]);ja.freeType(h)}}h=
!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(h=b.createTexture(),g=ja.allocType(5121,36),b.activeTexture(33984),b.bindTexture(34067,h),b.texImage2D(34069,0,6408,3,3,0,6408,5121,g),ja.freeType(g),b.bindTexture(34067,null),b.deleteTexture(h),h=!b.getError());return{colorBits:[b.getParameter(3410),b.getParameter(3411),b.getParameter(3412),b.getParameter(3413)],depthBits:b.getParameter(3414),stencilBits:b.getParameter(3415),
subpixelBits:b.getParameter(3408),extensions:Object.keys(a).filter(function(b){return!!a[b]}),maxAnisotropic:c,maxDrawbuffers:d,maxColorAttachments:e,pointSizeDims:b.getParameter(33901),lineWidthDims:b.getParameter(33902),maxViewportDims:b.getParameter(3386),maxCombinedTextureUnits:b.getParameter(35661),maxCubeMapSize:b.getParameter(34076),maxRenderbufferSize:b.getParameter(34024),maxTextureUnits:b.getParameter(34930),maxTextureSize:b.getParameter(3379),maxAttributes:b.getParameter(34921),maxVertexUniforms:b.getParameter(36347),
maxVertexTextureUnits:b.getParameter(35660),maxVaryingVectors:b.getParameter(36348),maxFragmentUniforms:b.getParameter(36349),glsl:b.getParameter(35724),renderer:b.getParameter(7937),vendor:b.getParameter(7936),version:b.getParameter(7938),readFloat:f,npotTextureCube:h}},ka=function(b){return b instanceof Uint8Array||b instanceof Uint16Array||b instanceof Uint32Array||b instanceof Int8Array||b instanceof Int16Array||b instanceof Int32Array||b instanceof Float32Array||b instanceof Float64Array||b instanceof
Uint8ClampedArray},ia=function(b){return Object.keys(b).map(function(a){return b[a]})},xa={shape:function(b){for(var a=[];b.length;b=b[0])a.push(b.length);return a},flatten:function(b,a,c,d){var e=1;if(a.length)for(var f=0;f<a.length;++f)e*=a[f];else e=0;c=d||ja.allocType(c,e);switch(a.length){case 0:break;case 1:d=a[0];for(a=0;a<d;++a)c[a]=b[a];break;case 2:d=a[0];a=a[1];for(f=e=0;f<d;++f)for(var g=b[f],h=0;h<a;++h)c[e++]=g[h];break;case 3:v(b,a[0],a[1],a[2],c,0);break;default:w(b,a,0,c,0)}return c}},
ya={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},sa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126},W={dynamic:35048,stream:35040,"static":35044},za=xa.flatten,Da=xa.shape,ra=[];ra[5120]=1;ra[5122]=2;ra[5124]=4;ra[5121]=
1;ra[5123]=2;ra[5125]=4;ra[5126]=4;var ua={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Aa=new Float32Array(1),wa=new Uint32Array(Aa.buffer),Ma=[9984,9986,9985,9987],ba=[0,6409,6410,6407,6408],Ea={};Ea[6409]=Ea[6406]=Ea[6402]=1;Ea[34041]=Ea[6410]=2;Ea[6407]=Ea[35904]=3;Ea[6408]=Ea[35906]=4;var Ba=G("HTMLCanvasElement"),Na=G("CanvasRenderingContext2D"),Ja=G("ImageBitmap"),Lb=G("HTMLImageElement"),Mb=G("HTMLVideoElement"),Pa=
Object.keys(ya).concat([Ba,Na,Ja,Lb,Mb]),zb=[];zb[5121]=1;zb[5126]=4;zb[36193]=2;zb[5123]=2;zb[5125]=4;var cb=[];cb[32854]=2;cb[32855]=2;cb[36194]=2;cb[34041]=4;cb[33776]=.5;cb[33777]=.5;cb[33778]=1;cb[33779]=1;cb[35986]=.5;cb[35987]=1;cb[34798]=1;cb[35840]=.5;cb[35841]=.25;cb[35842]=.5;cb[35843]=.25;cb[36196]=.5;var ub=[];ub[32854]=2;ub[32855]=2;ub[36194]=2;ub[33189]=2;ub[36168]=1;ub[34041]=4;ub[35907]=4;ub[34836]=16;ub[34842]=8;ub[34843]=6;var db=function(b,a,c,d,e){function f(b){this.id=l++;this.refCount=
1;this.renderbuffer=b;this.format=32854;this.height=this.width=0;e.profile&&(this.stats={size:0})}function g(a){var c=a.renderbuffer;b.bindRenderbuffer(36161,null);b.deleteRenderbuffer(c);a.renderbuffer=null;a.refCount=0;delete r[a.id];d.renderbufferCount--}var h={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};a.ext_srgb&&(h.srgba=35907);a.ext_color_buffer_half_float&&(h.rgba16f=34842,h.rgb16f=34843);a.webgl_color_buffer_float&&(h.rgba32f=34836);var k=[];
Object.keys(h).forEach(function(b){k[h[b]]=b});var l=0,r={};f.prototype.decRef=function(){0>=--this.refCount&&g(this)};e.profile&&(d.getTotalRenderbufferSize=function(){var b=0;Object.keys(r).forEach(function(a){b+=r[a].stats.size});return b});return{create:function(a,c){function g(a,c){var d=0,f=0,r=32854;"object"===typeof a&&a?("shape"in a?(f=a.shape,d=f[0]|0,f=f[1]|0):("radius"in a&&(d=f=a.radius|0),"width"in a&&(d=a.width|0),"height"in a&&(f=a.height|0)),"format"in a&&(r=h[a.format])):"number"===
typeof a?(d=a|0,f="number"===typeof c?c|0:d):a||(d=f=1);if(d!==l.width||f!==l.height||r!==l.format)return g.width=l.width=d,g.height=l.height=f,l.format=r,b.bindRenderbuffer(36161,l.renderbuffer),b.renderbufferStorage(36161,r,d,f),e.profile&&(l.stats.size=ub[l.format]*l.width*l.height),g.format=k[l.format],g}var l=new f(b.createRenderbuffer());r[l.id]=l;d.renderbufferCount++;g(a,c);g.resize=function(a,c){a|=0;c=c|0||a;if(a===l.width&&c===l.height)return g;g.width=l.width=a;g.height=l.height=c;b.bindRenderbuffer(36161,
l.renderbuffer);b.renderbufferStorage(36161,l.format,a,c);e.profile&&(l.stats.size=ub[l.format]*l.width*l.height);return g};g._reglType="renderbuffer";g._renderbuffer=l;e.profile&&(g.stats=l.stats);g.destroy=function(){l.decRef()};return g},clear:function(){ia(r).forEach(g)},restore:function(){ia(r).forEach(function(a){a.renderbuffer=b.createRenderbuffer();b.bindRenderbuffer(36161,a.renderbuffer);b.renderbufferStorage(36161,a.format,a.width,a.height)});b.bindRenderbuffer(36161,null)}}},ab=[];ab[6408]=
4;ab[6407]=3;var eb=[];eb[5121]=1;eb[5126]=4;eb[36193]=2;var gb=["x","y","z","w"],qa="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Oa={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,
"src alpha saturate":776},Za={never:512,less:513,"\x3c":513,equal:514,"\x3d":514,"\x3d\x3d":514,"\x3d\x3d\x3d":514,lequal:515,"\x3c\x3d":515,greater:516,"\x3e":516,notequal:517,"!\x3d":517,"!\x3d\x3d":517,gequal:518,"\x3e\x3d":518,always:519},pa={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},vb={cw:2304,ccw:2305},Nb=new R(!1,!1,!1,function(){}),Ya=function(b,a){function c(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=
0;this.stats=null}function d(b,a,d){var e=g.pop()||new c;e.startQueryIndex=b;e.endQueryIndex=a;e.sum=0;e.stats=d;h.push(e)}if(!a.ext_disjoint_timer_query)return null;var e=[],f=[],g=[],h=[],k=[],l=[];return{beginQuery:function(b){var c=e.pop()||a.ext_disjoint_timer_query.createQueryEXT();a.ext_disjoint_timer_query.beginQueryEXT(35007,c);f.push(c);d(f.length-1,f.length,b)},endQuery:function(){a.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:d,update:function(){var b;var c=f.length;if(0!==
c){l.length=Math.max(l.length,c+1);k.length=Math.max(k.length,c+1);k[0]=0;var d=l[0]=0;for(b=c=0;b<f.length;++b){var r=f[b];a.ext_disjoint_timer_query.getQueryObjectEXT(r,34919)?(d+=a.ext_disjoint_timer_query.getQueryObjectEXT(r,34918),e.push(r)):f[c++]=r;k[b+1]=d;l[b+1]=c}f.length=c;for(b=c=0;b<h.length;++b){d=h[b];var t=d.startQueryIndex;r=d.endQueryIndex;d.sum+=k[r]-k[t];t=l[t];r=l[r];r===t?(d.stats.gpuTime+=d.sum/1E6,g.push(d)):(d.startQueryIndex=t,d.endQueryIndex=r,h[c++]=d)}h.length=c}},getNumPendingQueries:function(){return f.length},
clear:function(){e.push.apply(e,f);for(var b=0;b<e.length;b++)a.ext_disjoint_timer_query.deleteQueryEXT(e[b]);f.length=0;e.length=0},restore:function(){f.length=0;e.length=0}}};return function(b){function a(){if(0===ca.length)C&&C.update(),ra=null;else{ra=na.next(a);u();for(var b=ca.length-1;0<=b;--b){var c=ca[b];c&&c(N,null,0)}w.flush();C&&C.update()}}function c(){!ra&&0<ca.length&&(ra=na.next(a))}function d(){ra&&(na.cancel(a),ra=null)}function e(b){b.preventDefault();d();Z.forEach(function(b){b()})}
function g(b){w.getError();A.restore();F.restore();K.restore();L.restore();T.restore();Y.restore();C&&C.restore();R.procs.refresh();c();ma.forEach(function(b){b()})}function k(b){function a(b){var a={},c={};Object.keys(b).forEach(function(d){var e=b[d];aa.isDynamic(e)?c[d]=aa.unbox(e,d):a[d]=e});return{dynamic:c,"static":a}}function c(b){for(;r.length<b;)r.push(null);return r}var d=a(b.context||{}),e=a(b.uniforms||{}),f=a(b.attributes||{}),g=a(function(b){function a(b){if(b in c){var a=c[b];delete c[b];
Object.keys(a).forEach(function(d){c[b+"."+d]=a[d]})}}var c=da({},b);delete c.uniforms;delete c.attributes;delete c.context;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);a("blend");a("depth");a("cull");a("stencil");a("polygonOffset");a("scissor");a("sample");return c}(b));b={gpuTime:0,cpuTime:0,count:0};d=R.compile(g,f,e,d,b);var h=d.draw,k=d.batch,l=d.scope,r=[];return da(function(b,a){var d;if("function"===typeof b)return l.call(this,null,b,0);
if("function"===typeof a)if("number"===typeof b)for(d=0;d<b;++d)l.call(this,null,a,d);else if(Array.isArray(b))for(d=0;d<b.length;++d)l.call(this,b[d],a,d);else return l.call(this,b,a,0);else if("number"===typeof b){if(0<b)return k.call(this,c(b|0),b|0)}else if(Array.isArray(b)){if(b.length)return k.call(this,b,b.length)}else return h.call(this,b)},{stats:b})}function r(b,a){b=0;R.procs.poll();var c=a.color;c&&(w.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),b|=16384);"depth"in a&&(w.clearDepth(+a.depth),
b|=256);"stencil"in a&&(w.clearStencil(a.stencil|0),b|=1024);w.clear(b)}function t(b){ca.push(b);c();return{cancel:function(){function a(){var b=la(ca,a);ca[b]=ca[ca.length-1];--ca.length;0>=ca.length&&d()}var c=la(ca,b);ca[c]=a}}}function m(){var b=V.viewport,a=V.scissor_box;b[0]=b[1]=a[0]=a[1]=0;N.viewportWidth=N.framebufferWidth=N.drawingBufferWidth=b[2]=a[2]=w.drawingBufferWidth;N.viewportHeight=N.framebufferHeight=N.drawingBufferHeight=b[3]=a[3]=w.drawingBufferHeight}function u(){N.tick+=1;N.time=
v();m();R.procs.poll()}function n(){m();R.procs.refresh();C&&C.update()}function v(){return(ha()-D)/1E3}b=l(b);if(!b)return null;var w=b.gl,z=w.getContextAttributes();w.isContextLost();var A=f(w,b);if(!A)return null;var y=h(),B={bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},q=A.extensions,C=Ya(w,q),D=ha(),E=w.drawingBufferWidth,H=w.drawingBufferHeight,N={tick:0,time:0,viewportWidth:E,viewportHeight:H,framebufferWidth:E,
framebufferHeight:H,drawingBufferWidth:E,drawingBufferHeight:H,pixelRatio:b.pixelRatio},G=oa(w,q);E=O(w,q,G,y);var K=x(w,B,b,E),J=p(w,q,K,B),F=P(w,y,B,b),L=M(w,q,G,function(){R.procs.poll()},N,B,b),T=db(w,q,G,B,b),Y=I(w,q,G,L,T,B),R=fa(w,y,q,G,K,J,L,Y,{},E,F,{elements:null,primitive:4,count:-1,offset:0,instances:-1},N,C,b);y=Q(w,Y,R.procs.poll,N,z,q,G);var V=R.next,X=w.canvas,ca=[],Z=[],ma=[],U=[b.onDestroy],ra=null;X&&(X.addEventListener("webglcontextlost",e,!1),X.addEventListener("webglcontextrestored",
g,!1));var ea=Y.setFBO=k({framebuffer:aa.define.call(null,1,"framebuffer")});n();z=da(k,{clear:function(b){if("framebuffer"in b)if(b.framebuffer&&"framebufferCube"===b.framebuffer_reglType)for(var a=0;6>a;++a)ea(da({framebuffer:b.framebuffer.faces[a]},b),r);else ea(b,r);else r(null,b)},prop:aa.define.bind(null,1),context:aa.define.bind(null,2),"this":aa.define.bind(null,3),draw:k({}),buffer:function(b){return K.create(b,34962,!1,!1)},elements:function(b){return J.create(b,!1)},texture:L.create2D,
cube:L.createCube,renderbuffer:T.create,framebuffer:Y.create,framebufferCube:Y.createCube,attributes:z,frame:t,on:function(b,a){switch(b){case "frame":return t(a);case "lost":var c=Z;break;case "restore":c=ma;break;case "destroy":c=U}c.push(a);return{cancel:function(){for(var b=0;b<c.length;++b)if(c[b]===a){c[b]=c[c.length-1];c.pop();break}}}},limits:G,hasExtension:function(b){return 0<=G.extensions.indexOf(b.toLowerCase())},read:y,destroy:function(){ca.length=0;d();X&&(X.removeEventListener("webglcontextlost",
e),X.removeEventListener("webglcontextrestored",g));F.clear();Y.clear();T.clear();L.clear();J.clear();K.clear();C&&C.clear();U.forEach(function(b){b()})},_gl:w,_refresh:n,poll:function(){u();C&&C.update()},now:v,stats:B});b.onDone(null,z);return z}})},{}],501:[function(a,q,p){var n="",k;q.exports=function(a,h){if("string"!==typeof a)throw new TypeError("expected a string");if(1===h)return a;if(2===h)return a+a;var b=a.length*h;if(k!==a||"undefined"===typeof k)k=a,n="";else if(n.length>=b)return n.substr(0,
b);for(;b>n.length&&1<h;)h&1&&(n+=a),h>>=1,a+=a;n+=a;return n=n.substr(0,b)}},{}],502:[function(a,q,p){(function(a){q.exports=a.performance&&a.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,"undefined"!==typeof pa?pa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],503:[function(a,q,p){q.exports=function(a){for(var k=a.length,m=a[a.length-1],h=k,b=k-2;0<=b;--b){var g=m,e=a[b];m=g+e;g=m-g;if(e-=g)a[--h]=m,m=e}var t=0;
for(b=h;b<k;++b)g=a[b],e=m,m=g+e,g=m-g,(e-=g)&&(a[t++]=e);a[t++]=m;a.length=t;return a}},{}],504:[function(a,q,p){function n(b,a){for(var c=Array(b.length-1),d=1;d<b.length;++d)for(var e=c[d-1]=Array(b.length-1),f=0,g=0;f<b.length;++f)f!==a&&(e[g++]=b[d][f]);return c}function k(b){if(1===b.length)return b[0];if(2===b.length)return["sum(",b[0],",",b[1],")"].join("");var a=b.length>>1;return["sum(",k(b.slice(0,a)),",",k(b.slice(a)),")"].join("")}function m(b){if(2===b.length)return["sum(prod(",b[0][0],
",",b[1][1],"),prod(-",b[0][1],",",b[1][0],"))"].join("");for(var a=[],c=0;c<b.length;++c)a.push(["scale(",m(n(b,c)),",",c&1?"-":"",b[0][c],")"].join(""));return k(a)}function h(a){for(var d=Function,c=Array(a),f=0;f<a;++f){c[f]=Array(a);for(var h=0;h<a;++h)c[f][h]=["m[",f,"][",h,"]"].join("")}return(new d("sum","scale","prod","compress",["function robustDeterminant",a,"(m){return compress(",m(c),")};return robustDeterminant",a].join("")))(g,e,b,t)}var b=a("two-product"),g=a("robust-sum"),e=a("robust-scale"),
t=a("robust-compress"),l=[function(){return[0]},function(b){return[b[0][0]]}];(function(){for(;6>l.length;)l.push(h(l.length));for(var b=[],a=["function robustDeterminant(m){switch(m.length){"],c=0;6>c;++c)b.push("det"+c),a.push("case ",c,":return det",c,"(m);");a.push("}var det\x3dCACHE[m.length];if(!det)det\x3dCACHE[m.length]\x3dgen(m.length);return det(m);}return robustDeterminant");b.push("CACHE","gen",a.join(""));b=Function.apply(void 0,b);q.exports=b.apply(void 0,l.concat([l,h]));for(c=0;c<
l.length;++c)q.exports[c]=l[c]})()},{"robust-compress":503,"robust-scale":510,"robust-sum":513,"two-product":541}],505:[function(a,q,p){var n=a("two-product"),k=a("robust-sum");q.exports=function(a,h){for(var b=n(a[0],h[0]),g=1;g<a.length;++g)b=k(b,n(a[g],h[g]));return b}},{"robust-sum":513,"two-product":541}],506:[function(a,q,p){function n(b,a){for(var c=Array(b.length-1),d=1;d<b.length;++d)for(var e=c[d-1]=Array(b.length-1),f=0,g=0;f<b.length;++f)f!==a&&(e[g++]=b[d][f]);return c}function k(b){if(1===
b.length)return b[0];if(2===b.length)return["sum(",b[0],",",b[1],")"].join("");var a=b.length>>1;return["sum(",k(b.slice(0,a)),",",k(b.slice(a)),")"].join("")}function m(b,a){return"m"===b.charAt(0)?"w"===a.charAt(0)?(b=b.split("["),["w",a.substr(1),"m",b[0].substr(1)].join("")):["prod(",b,",",a,")"].join(""):m(a,b)}function h(b){if(2===b.length)return[["diff(",m(b[0][0],b[1][1]),",",m(b[1][0],b[0][1]),")"].join("")];for(var a=[],c=0;c<b.length;++c)a.push(["scale(",k(h(n(b,c))),",",c&1?"-":"",b[0][c],
")"].join(""));return a}function b(b,a){for(var c=[],d=0;d<a-2;++d)c.push(["prod(m",b,"[",d,"],m",b,"[",d,"])"].join(""));return k(c)}function g(a){for(var c=[],e=[],g=Array(a),r=0;r<a;++r){g[r]=Array(a);for(var m=0;m<a;++m)g[r][m]=["m",m,"[",a-r-2,"]"].join("")}for(r=0;r<a;++r)g[0][r]="1",g[a-1][r]="w"+r;for(r=0;r<a;++r)0===(r&1)?c.push.apply(c,h(n(g,r))):e.push.apply(e,h(n(g,r)));c=k(c);e=k(e);g="exactInSphere"+a;m=[];for(r=0;r<a;++r)m.push("m"+r);m=["function ",g,"(",m.join(),"){"];for(r=0;r<a;++r){m.push("var w",
r,"\x3d",b(r,a),";");for(var z=0;z<a;++z)z!==r&&m.push("var w",r,"m",z,"\x3dscale(w",r,",m",z,"[0]);")}m.push("var p\x3d",c,",n\x3d",e,",d\x3ddiff(p,n);return d[d.length-1];}return ",g);return(new Function("sum","diff","prod","scale",m.join("")))(l,f,t,d)}function e(b){var a=c[b.length];a||(a=c[b.length]=g(b.length));return a.apply(void 0,b)}var t=a("two-product"),l=a("robust-sum"),f=a("robust-subtract"),d=a("robust-scale"),c=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=
c.length;)c.push(g(c.length));for(var b=[],a=["slow"],d=0;6>=d;++d)b.push("a"+d),a.push("o"+d);var f=["function testInSphere(",b.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(d=2;6>=d;++d)f.push("case ",d,":return o",d,"(",b.slice(0,d).join(),");");f.push("}var s\x3dnew Array(arguments.length);for(var i\x3d0;i\x3carguments.length;++i){s[i]\x3darguments[i]};return slow(s);}return testInSphere");a.push(f.join(""));b=Function.apply(void 0,a);q.exports=b.apply(void 0,[e].concat(c));
for(d=0;6>=d;++d)q.exports[d]=c[d]})()},{"robust-scale":510,"robust-subtract":512,"robust-sum":513,"two-product":541}],507:[function(a,q,p){function n(a){for(var b="robustLinearSolve"+a+"d",g=["function ",b,"(A,b){return ["],e=0;e<a;++e){g.push("det([");for(var h=0;h<a;++h){0<h&&g.push(",");g.push("[");for(var l=0;l<a;++l)0<l&&g.push(","),l===e?g.push("+b[",h,"]"):g.push("+A[",h,"][",l,"]");g.push("]")}g.push("]),")}g.push("det(A)]}return ",b);b=new Function("det",g.join(""));return 6>a?b(k[a]):b(k)}
var k=a("robust-determinant"),m=[function(){return[0]},function(a,b){return[[b[0]],[a[0][0]]]}];(function(){for(;6>m.length;)m.push(n(m.length));for(var a=[],b=["function dispatchLinearSolve(A,b){switch(A.length){"],g=0;6>g;++g)a.push("s"+g),b.push("case ",g,":return s",g,"(A,b);");b.push("}var s\x3dCACHE[A.length];if(!s)s\x3dCACHE[A.length]\x3dg(A.length);return s(A,b)}return dispatchLinearSolve");a.push("CACHE","g",b.join(""));a=Function.apply(void 0,a);q.exports=a.apply(void 0,m.concat([m,n]));
for(g=0;6>g;++g)q.exports[g]=m[g]})()},{"robust-determinant":504}],508:[function(a,q,p){function n(b,a){for(var c=Array(b.length-1),d=1;d<b.length;++d)for(var e=c[d-1]=Array(b.length-1),f=0,g=0;f<b.length;++f)f!==a&&(e[g++]=b[d][f]);return c}function k(b){if(1===b.length)return b[0];if(2===b.length)return["sum(",b[0],",",b[1],")"].join("");var a=b.length>>1;return["sum(",k(b.slice(0,a)),",",k(b.slice(a)),")"].join("")}function m(b){if(2===b.length)return[["sum(prod(",b[0][0],",",b[1][1],"),prod(-",
b[0][1],",",b[1][0],"))"].join("")];for(var a=[],c=0;c<b.length;++c)a.push(["scale(",k(m(n(b,c))),",",c&1?"-":"",b[0][c],")"].join(""));return a}function h(b){for(var a=[],c=[],d=Array(b),f=0;f<b;++f){d[f]=Array(b);for(var h=0;h<b;++h)d[f][h]=["m",h,"[",b-f-1,"]"].join("")}f=[];for(h=0;h<b;++h)0===(h&1)?a.push.apply(a,m(n(d,h))):c.push.apply(c,m(n(d,h))),f.push("m"+h);a=k(a);c=k(c);b="orientation"+b+"Exact";b=["function ",b,"(",f.join(),"){var p\x3d",a,",n\x3d",c,",d\x3dsub(p,n);return d[d.length-1];};return ",
b].join("");return(new Function("sum","prod","scale","sub",b))(e,g,t,l)}function b(b){var a=c[b.length];a||(a=c[b.length]=h(b.length));return a.apply(void 0,b)}var g=a("two-product"),e=a("robust-sum"),t=a("robust-scale"),l=a("robust-subtract"),f=h(3),d=h(4),c=[function(){return 0},function(){return 0},function(b,a){return a[0]-b[0]},function(b,a,c){var d=(b[1]-c[1])*(a[0]-c[0]),e=(b[0]-c[0])*(a[1]-c[1]),g=d-e;if(0<d){if(0>=e)return g;d+=e}else if(0>d){if(0<=e)return g;d=-(d+e)}else return g;d*=3.3306690738754716E-16;
return g>=d||g<=-d?g:f(b,a,c)},function(b,a,c,e){var f=b[0]-e[0],g=a[0]-e[0],h=c[0]-e[0],k=b[1]-e[1],l=a[1]-e[1],r=c[1]-e[1],t=b[2]-e[2],m=a[2]-e[2],n=c[2]-e[2],u=g*r,v=h*l;h*=k;r*=f;f*=l;k*=g;g=t*(u-v)+m*(h-r)+n*(f-k);t=7.771561172376103E-16*((Math.abs(u)+Math.abs(v))*Math.abs(t)+(Math.abs(h)+Math.abs(r))*Math.abs(m)+(Math.abs(f)+Math.abs(k))*Math.abs(n));return g>t||-g>t?g:d(b,a,c,e)}];(function(){for(;5>=c.length;)c.push(h(c.length));for(var a=[],d=["slow"],e=0;5>=e;++e)a.push("a"+e),d.push("o"+
e);var f=["function getOrientation(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(e=2;5>=e;++e)f.push("case ",e,":return o",e,"(",a.slice(0,e).join(),");");f.push("}var s\x3dnew Array(arguments.length);for(var i\x3d0;i\x3carguments.length;++i){s[i]\x3darguments[i]};return slow(s);}return getOrientation");d.push(f.join(""));a=Function.apply(void 0,d);q.exports=a.apply(void 0,[b].concat(c));for(e=0;5>=e;++e)q.exports[e]=c[e]})()},{"robust-scale":510,"robust-subtract":512,"robust-sum":513,
"two-product":541}],509:[function(a,q,p){var n=a("robust-sum"),k=a("robust-scale");q.exports=function(a,h){if(1===a.length)return k(h,a[0]);if(1===h.length)return k(a,h[0]);if(0===a.length||0===h.length)return[0];var b=[0];if(a.length<h.length)for(var g=0;g<a.length;++g)b=n(b,k(h,a[g]));else for(g=0;g<h.length;++g)b=n(b,k(a,h[g]));return b}},{"robust-scale":510,"robust-sum":513}],510:[function(a,q,p){var n=a("two-product"),k=a("two-sum");q.exports=function(a,h){var b=a.length;if(1===b)return a=n(a[0],
h),a[0]?a:[a[1]];var g=Array(2*b),e=[.1,.1],t=[.1,.1],l=0;n(a[0],h,e);e[0]&&(g[l++]=e[0]);for(var f=1;f<b;++f){n(a[f],h,t);k(e[1],t[0],e);e[0]&&(g[l++]=e[0]);var d=t[1],c=e[1],r=d+c;d=c-(r-d);e[1]=r;d&&(g[l++]=d)}e[1]&&(g[l++]=e[1]);0===l&&(g[l++]=0);g.length=l;return g}},{"two-product":541,"two-sum":542}],511:[function(a,q,p){q.exports=function(a,m,h,b){var g=n(a,h,b),e=n(m,h,b);if(0<g&&0<e||0>g&&0>e)return!1;var k=n(h,a,m),l=n(b,a,m);if(0<k&&0<l||0>k&&0>l)return!1;if(0===g&&0===e&&0===k&&0===l){a:{for(g=
0;2>g;++g){e=a[g];k=m[g];l=Math.max(e,k);var f=h[g],d=b[g],c=Math.min(f,d);if(Math.max(f,d)<Math.min(e,k)||l<c){a=!1;break a}}a=!0}return a}return!0};var n=a("robust-orientation")[3]},{"robust-orientation":508}],512:[function(a,q,p){q.exports=function(a,k){var m=a.length|0,h=k.length|0;if(1===m&&1===h)return a=a[0],m=-k[0],k=a+m,h=k-a,k=(a=a-(k-h)+(m-h))?[a,k]:[k],k;var b=Array(m+h),g=0,e=0,t=0,l=Math.abs,f=a[e],d=l(f),c=-k[t],r=l(c);if(d<r){var n=f;e+=1;e<m&&(f=a[e],d=l(f))}else n=c,t+=1,t<h&&(c=
-k[t],r=l(c));if(e<m&&d<r||t>=h){var v=f;e+=1;e<m&&(f=a[e],d=l(f))}else v=c,t+=1,t<h&&(c=-k[t],r=l(c));var w=v+n;n-=w-v;for(var y=w,A;e<m&&t<h;)d<r?(v=f,e+=1,e<m&&(f=a[e],d=l(f))):(v=c,t+=1,t<h&&(c=-k[t],r=l(c))),w=v+n,v=w-v,(v=n-v)&&(b[g++]=v),v=y+w,A=v-y,n=v-A,w-=A,y-=n,n=y+w,y=v;for(;e<m;)v=f,w=v+n,v=w-v,(v=n-v)&&(b[g++]=v),v=y+w,A=v-y,n=v-A,w-=A,y-=n,n=y+w,y=v,e+=1,e<m&&(f=a[e]);for(;t<h;)v=c,w=v+n,v=w-v,(v=n-v)&&(b[g++]=v),v=y+w,A=v-y,n=v-A,w-=A,y-=n,n=y+w,y=v,t+=1,t<h&&(c=-k[t]);n&&(b[g++]=
n);y&&(b[g++]=y);g||(b[g++]=0);b.length=g;return b}},{}],513:[function(a,q,p){q.exports=function(a,k){var m=a.length|0,h=k.length|0;if(1===m&&1===h)return a=a[0],m=k[0],k=a+m,h=k-a,k=(a=a-(k-h)+(m-h))?[a,k]:[k],k;var b=Array(m+h),g=0,e=0,t=0,l=Math.abs,f=a[e],d=l(f),c=k[t],r=l(c);if(d<r){var n=f;e+=1;e<m&&(f=a[e],d=l(f))}else n=c,t+=1,t<h&&(c=k[t],r=l(c));if(e<m&&d<r||t>=h){var v=f;e+=1;e<m&&(f=a[e],d=l(f))}else v=c,t+=1,t<h&&(c=k[t],r=l(c));var w=v+n;n-=w-v;for(var y=w,A;e<m&&t<h;)d<r?(v=f,e+=1,
e<m&&(f=a[e],d=l(f))):(v=c,t+=1,t<h&&(c=k[t],r=l(c))),w=v+n,v=w-v,(v=n-v)&&(b[g++]=v),v=y+w,A=v-y,n=v-A,w-=A,y-=n,n=y+w,y=v;for(;e<m;)v=f,w=v+n,v=w-v,(v=n-v)&&(b[g++]=v),v=y+w,A=v-y,n=v-A,w-=A,y-=n,n=y+w,y=v,e+=1,e<m&&(f=a[e]);for(;t<h;)v=c,w=v+n,v=w-v,(v=n-v)&&(b[g++]=v),v=y+w,A=v-y,n=v-A,w-=A,y-=n,n=y+w,y=v,t+=1,t<h&&(c=k[t]);n&&(b[g++]=n);y&&(b[g++]=y);g||(b[g++]=0);b.length=g;return b}},{}],514:[function(a,q,p){q.exports=function(a){return 0>a?-1:0<a?1:0}},{}],515:[function(a,q,p){q.exports=function(a){return k(n(a))};
var n=a("boundary-cells"),k=a("reduce-simplicial-complex")},{"boundary-cells":97,"reduce-simplicial-complex":490}],516:[function(a,q,p){q.exports=function(b,a,e,t){e=e||0;if("undefined"===typeof t){for(var g=b.length,f=t=0;f<g;++f)t=Math.max(t,b[f].length)|0;--t}if(0===b.length||1>t)return{cells:[],vertexIds:[],vertexWeights:[]};f=+e;var d=a.length;g=k.mallocUint8(d);for(var c=0;c<d;++c)g[c]=a[c]<f|0;var r=t,u=b.length;f=k.mallocUint32(2*(r*(r+1)/2*u|0));for(c=d=0;c<u;++c){var v=b[c];r=v.length;for(var w=
0;w<r;++w)for(var y=0;y<w;++y){var A=v[y],z=v[w];f[d++]=Math.min(A,z)|0;f[d++]=Math.max(A,z)|0}}m(n(f,[d/2|0,2]));for(c=r=2;c<d;c+=2)if(f[c-2]!==f[c]||f[c-1]!==f[c+1])f[r++]=f[c],f[r++]=f[c+1];f=n(f,[r/2|0,2]);e=+e;d=f.data;c=f.shape[0];r=k.mallocDouble(c);for(v=u=0;v<c;++v)w=d[2*v],y=d[2*v+1],g[w]!==g[y]&&(A=a[w],z=a[y],d[2*u]=w,d[2*u+1]=y,r[u++]=(z-e)/(z-A));f.shape[0]=u;e=n(r,[u]);d=a.length|0;a=k.mallocInt32(2*d);c=f.shape[0];r=f.data;for(v=u=a[0]=0;v<c;++v)if(w=r[2*v],w!==u){for(a[2*u+1]=v;++u<
w;)a[2*u]=v,a[2*u+1]=v;a[2*u]=v}for(a[2*u+1]=c;++u<d;)a[2*u]=a[2*u+1]=c;b=h(t)(b,f.data,a,g);d=f.shape[0]|0;c=f.data;t=Array(d);for(r=0;r<d;++r)t[r]=[c[2*r],c[2*r+1]];d=[].slice.call(e.data,0,e.shape[0]);k.free(g);k.free(f.data);k.free(e.data);k.free(a);return{cells:b,vertexIds:t,vertexWeights:d}};var n=a("ndarray"),k=a("typedarray-pool"),m=a("ndarray-sort"),h=a("./lib/codegen")},{"./lib/codegen":517,ndarray:451,"ndarray-sort":449,"typedarray-pool":543}],517:[function(a,q,p){q.exports=function(a){var b=
m[a];if(!b){b=m;var g=Array(a+1);g[0]=[[]];for(var e=1;e<=a;++e)for(var h=g[e]=k(e),l=0;l<h.length;++l);var f=["function B(C,E,i,j){","var a\x3dMath.min(i,j)|0,b\x3dMath.max(i,j)|0,l\x3dC[2*a],h\x3dC[2*a+1];","while(l\x3ch){","var m\x3d(l+h)\x3e\x3e1,v\x3dE[2*m+1];","if(v\x3d\x3d\x3db){return m}","if(b\x3cv){h\x3dm}else{l\x3dm+1}","}","return l;","};","function getContour",a,"d(F,E,C,S){","var n\x3dF.length,R\x3d[];","for(var i\x3d0;i\x3cn;++i){var c\x3dF[i],l\x3dc.length;"];for(e=a+1;1<e;--e){e<
a+1&&f.push("else ");f.push("if(l\x3d\x3d\x3d",e,"){");h=[];for(l=0;l<e;++l)h.push("(S[c["+l+"]]\x3c\x3c"+l+")");f.push("var M\x3d",h.join("+"),";if(M\x3d\x3d\x3d0||M\x3d\x3d\x3d",(1<<e)-1,"){continue}switch(M){");h=g[e-1];for(l=0;l<h.length;++l){f.push("case ",l,":");var d=h[l];if(!(0>=d.length)){f.push("R.push(");for(var c=0;c<d.length;++c){var r=d[c];0<c&&f.push(",");f.push("[");for(var u=0;u<r.length;++u){var v=r[u];0<u&&f.push(",");f.push("B(C,E,c[",v[0],"],c[",v[1],"])")}f.push("]")}f.push(");")}f.push("break;")}f.push("}}")}f.push("}return R;};return getContour",
a,"d");g=(new Function("pool",f.join("")))(n);b=b[a]=g}return b};var n=a("typedarray-pool"),k=a("marching-simplex-table"),m={}},{"marching-simplex-table":428,"typedarray-pool":543}],518:[function(a,q,p){function n(b,a){var c=b.length,d=b.length-a.length,e=Math.min;if(d)return d;switch(c){case 0:return 0;case 1:return b[0]-a[0];case 2:return(c=b[0]+b[1]-a[0]-a[1])?c:e(b[0],b[1])-e(a[0],a[1]);case 3:d=b[0]+b[1];var f=a[0]+a[1];if(c=d+b[2]-(f+a[2]))return c;var g=e(b[0],b[1]),h=e(a[0],a[1]);return(c=
e(g,b[2])-e(h,a[2]))?c:e(g+b[2],d)-e(h+a[2],f);default:b=b.slice(0);b.sort();a=a.slice(0);a.sort();for(e=0;e<c;++e)if(d=b[e]-a[e])return d;return 0}}function k(b,a){return n(b[0],a[0])}function m(b,a){if(a){for(var c=b.length,d=Array(c),e=0;e<c;++e)d[e]=[b[e],a[e]];d.sort(k);for(e=0;e<c;++e)b[e]=d[e][0],a[e]=d[e][1]}else b.sort(n);return b}function h(b){if(0===b.length)return[];for(var a=1,c=b.length,e=1;e<c;++e){var f=b[e];n(f,b[e-1])&&(e===a?a++:b[a++]=f)}b.length=a;return b}function b(b,a){for(var c=
0,d=b.length-1,e=-1;c<=d;){var f=c+d>>1,g=n(b[f],a);0>=g?(0===g&&(e=f),c=f+1):0<g&&(d=f-1)}return e}function g(a,d){for(var c=Array(a.length),e=0,f=c.length;e<f;++e)c[e]=[];f=[];e=0;for(var g=d.length;e<g;++e)for(var h=d[e],k=h.length,l=1,m=1<<k;l<m;++l){f.length=t.popCount(l);for(var x=0,p=0;p<k;++p)l&1<<p&&(f[x++]=h[p]);x=b(a,f);if(!(0>x))for(;!(c[x++].push(e),x>=a.length||0!==n(a[x],f)););}return c}function e(b,a){if(0>a)return[];for(var c=[],d=(1<<a+1)-1,e=0;e<b.length;++e)for(var f=b[e],g=d;g<
1<<f.length;g=t.nextCombination(g)){for(var h=Array(a+1),k=0,l=0;l<f.length;++l)g&1<<l&&(h[k++]=f[l]);c.push(h)}return m(c)}"use restrict";var t=a("bit-twiddle"),l=a("union-find");p.dimension=function(b){for(var a=0,c=Math.max,e=0,f=b.length;e<f;++e)a=c(a,b[e].length);return a-1};p.countVertices=function(b){for(var a=-1,c=Math.max,e=0,f=b.length;e<f;++e)for(var g=b[e],h=0,k=g.length;h<k;++h)a=c(a,g[h]);return a+1};p.cloneCells=function(b){for(var a=Array(b.length),c=0,e=b.length;c<e;++c)a[c]=b[c].slice(0);
return a};p.compareCells=n;p.normalize=m;p.unique=h;p.findCell=b;p.incidence=g;p.dual=function(b,a){if(!a)return g(h(e(b,0)),b,0);for(var c=Array(a),d=0;d<a;++d)c[d]=[];d=0;for(a=b.length;d<a;++d)for(var f=b[d],k=0,l=f.length;k<l;++k)c[f[k]].push(d);return c};p.explode=function(b){for(var a=[],c=0,e=b.length;c<e;++c)for(var f=b[c],g=f.length|0,h=1,k=1<<g;h<k;++h){for(var l=[],t=0;t<g;++t)h>>>t&1&&l.push(f[t]);a.push(l)}return m(a)};p.skeleton=e;p.boundary=function(b){for(var a=[],c=0,e=b.length;c<
e;++c)for(var f=b[c],g=0,h=f.length;g<h;++g){for(var k=Array(f.length-1),l=0,t=0;l<h;++l)l!==g&&(k[t++]=f[l]);a.push(k)}return m(a)};p.connectedComponents=function(a,d){if(d){d=new l(d);for(var c=0;c<a.length;++c)for(var f=a[c],g=0;g<f.length;++g)for(var k=g+1;k<f.length;++k)d.link(f[g],f[k]);f=[];g=d.ranks;for(c=0;c<g.length;++c)g[c]=-1;for(c=0;c<a.length;++c)k=d.find(a[c][0]),0>g[k]?(g[k]=f.length,f.push([a[c].slice(0)])):f[g[k]].push(a[c].slice(0));return f}d=h(m(e(a,0)));c=new l(d.length);for(f=
0;f<a.length;++f)for(g=a[f],k=0;k<g.length;++k)for(var t=b(d,[g[k]]),n=k+1;n<g.length;++n)c.link(t,b(d,[g[n]]));g=[];k=c.ranks;for(f=0;f<k.length;++f)k[f]=-1;for(f=0;f<a.length;++f)t=c.find(b(d,[a[f][0]])),0>k[t]?(k[t]=g.length,g.push([a[f].slice(0)])):g[k[t]].push(a[f].slice(0));return g}},{"bit-twiddle":94,"union-find":544}],519:[function(a,q,p){arguments[4][94][0].apply(p,arguments)},{dup:94}],520:[function(a,q,p){arguments[4][518][0].apply(p,arguments)},{"bit-twiddle":519,dup:518,"union-find":521}],
521:[function(a,q,p){function n(a){this.roots=Array(a);this.ranks=Array(a);for(var k=0;k<a;++k)this.roots[k]=k,this.ranks[k]=0}"use restrict";q.exports=n;n.prototype.length=function(){return this.roots.length};n.prototype.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};n.prototype.find=function(a){for(var k=this.roots;k[a]!==a;){var h=k[a];k[a]=k[h];a=h}return a};n.prototype.link=function(a,m){a=this.find(a);m=this.find(m);if(a!==m){var h=this.ranks,b=this.roots,
g=h[a],e=h[m];g<e?b[a]=m:e<g?b[m]=a:(b[m]=a,++h[a])}}},{}],522:[function(a,q,p){q.exports=function(a,h,b){function g(b){if(z[b])return Infinity;var a=w[b],c=y[b];if(0>a||0>c)return Infinity;a=h[a];c=h[c];return Math.abs(n(h[b],a,c))/Math.sqrt(Math.pow(a[0]-c[0],2)+Math.pow(a[1]-c[1],2))}function e(b,a){var c=q[b],d=q[a];q[b]=d;q[a]=c;G[c]=a;G[d]=b}function t(b){for(var a=A[q[b]];;){var c=a,d=2*b+1,f=2*(b+1),g=b;if(d<E){var h=A[q[d]];h<c&&(g=d,c=h)}f<E&&A[q[f]]<c&&(g=f);if(g===b)return b;e(b,g);b=
g}}function l(b){for(var a=A[q[b]];0<b;){var c=b&1?b-1>>1:(b>>1)-1;if(0<=c&&a<A[q[c]])e(b,c),b=c;else return b}}function f(){if(0<E){var b=q[0];e(0,E-1);--E;t(0);return b}return-1}function d(b,a){var c=q[b];if(A[c]===a)return b;A[c]=-Infinity;l(b);f();A[c]=a;E+=1;return l(E-1)}function c(b){if(!z[b]){z[b]=!0;var a=w[b];b=y[b];0<=w[b]&&(w[b]=a);0<=y[a]&&(y[a]=b);0<=G[a]&&d(G[a],g(a));0<=G[b]&&d(G[b],g(b))}}function r(b,a){if(0>b[a])return a;var c=a,d=a;do{var e=b[d];if(!z[d]||0>e||e===d)break;d=e;
e=b[d];if(!z[d]||0>e||e===d)break;d=e;c=b[c]}while(c!==d);for(;a!==d;a=b[a])b[a]=d;return d}for(var m=h.length,v=a.length,w=Array(m),y=Array(m),A=Array(m),z=Array(m),x=0;x<m;++x)w[x]=y[x]=-1,A[x]=Infinity,z[x]=!1;for(x=0;x<v;++x){var p=a[x];if(2!==p.length)throw Error("Input must be a graph");var B=p[1];p=p[0];y[p]=-1!==y[p]?-2:B;w[B]=-1!==w[B]?-2:p}var q=[],G=Array(m);for(x=0;x<m;++x)Infinity>(A[x]=g(x))?(G[x]=q.length,q.push(x)):G[x]=-1;var E=q.length;for(x=E>>1;0<=x;--x)t(x);for(;;){x=f();if(0>
x||A[x]>b)break;c(x)}b=[];for(x=0;x<m;++x)z[x]||(G[x]=b.length,b.push(h[x].slice()));var F=[];a.forEach(function(b){var a=r(w,b[0]);b=r(y,b[1]);0<=a&&0<=b&&a!==b&&(a=G[a],b=G[b],a!==b&&F.push([a,b]))});k.unique(k.normalize(F));return{positions:b,edges:F}};var n=a("robust-orientation"),k=a("simplicial-complex")},{"robust-orientation":508,"simplicial-complex":520}],523:[function(a,q,p){function n(a,h){if(h[0][0]<h[1][0]){var b=h[0];h=h[1]}else if(h[0][0]>h[1][0])b=h[1],h=h[0];else{b=Math.min(a[0][1],
a[1][1]);a=Math.max(a[0][1],a[1][1]);var g=Math.min(h[0][1],h[1][1]);h=Math.max(h[0][1],h[1][1]);return a<g?a-g:b>h?b-h:a-h}a[0][1]<a[1][1]?(g=a[0],a=a[1]):(g=a[1],a=a[0]);return(g=k(h,b,g))?g:(g=k(h,b,a))?g:a-h}q.exports=function(a,h){if(h[0][0]<h[1][0]){var b=h[0];var g=h[1]}else if(h[0][0]>h[1][0])b=h[1],g=h[0];else return n(h,a);if(a[0][0]<a[1][0])h=a[0],a=a[1];else if(a[0][0]>a[1][0])h=a[1],a=a[0];else return-n(a,h);var e=k(b,g,a),t=k(b,g,h);if(0>e){if(0>=t)return e}else if(0<e){if(0<=t)return e}else if(t)return t;
e=k(a,h,g);t=k(a,h,b);if(0>e){if(0>=t)return e}else if(0<e){if(0<=t)return e}else if(t)return t;return g[0]-a[0]};var k=a("robust-orientation")},{"robust-orientation":508}],524:[function(a,q,p){function n(b,a,c){this.slabs=b;this.coordinates=a;this.horizontal=c}function k(b,a){return b.y-a}function m(b,a){for(var c=null;b;){var d=b.key;if(d[0][0]<d[1][0]){var e=d[0];var f=d[1]}else e=d[1],f=d[0];e=t(e,f,a);if(0>e)b=b.left;else if(0<e)if(a[0]!==d[1][0])c=b,b=b.right;else{if(d=m(b.right,a))return d;
b=b.left}else{if(a[0]!==d[1][0])return b;if(d=m(b.right,a))return d;b=b.left}}return c}function h(b,a,c,e){this.y=b;this.index=a;this.start=c;this.closed=e}function b(b,a,c,e){this.x=b;this.segment=a;this.create=c;this.index=e}q.exports=function(a){for(var d=a.length,c=2*d,f=Array(c),g=0;g<d;++g){var k=a[g],t=k[0][0]<k[1][0];f[2*g]=new b(k[0][0],k,t,g);f[2*g+1]=new b(k[1][0],k,!t,g)}f.sort(function(b,a){var c=b.x-a.x;return c?c:(c=b.create-a.create)?c:Math.min(b.segment[0][1],b.segment[1][1])-Math.min(a.segment[0][1],
a.segment[1][1])});a=e(l);d=[];k=[];t=[];for(g=0;g<c;){for(var m=f[g].x,A=[];g<c;){var z=f[g];if(z.x!==m)break;g+=1;z.segment[0][0]===z.x&&z.segment[1][0]===z.x?z.create&&(z.segment[0][1]<z.segment[1][1]?(A.push(new h(z.segment[0][1],z.index,!0,!0)),A.push(new h(z.segment[1][1],z.index,!1,!1))):(A.push(new h(z.segment[1][1],z.index,!0,!1)),A.push(new h(z.segment[0][1],z.index,!1,!0)))):a=z.create?a.insert(z.segment,z.index):a.remove(z.segment)}d.push(a.root);k.push(m);t.push(A)}return new n(d,k,t)};
var g=a("binary-search-bounds"),e=a("functional-red-black-tree"),t=a("robust-orientation"),l=a("./lib/order-segments");n.prototype.castUp=function(b){var a=g.le(this.coordinates,b[0]);if(0>a)return-1;var c=m(this.slabs[a],b),e=-1;c&&(e=c.value);if(this.coordinates[a]===b[0]){var f=null;c&&(f=c.key);0<a&&(c=m(this.slabs[a-1],b))&&(f?0<l(c.key,f)&&(f=c.key,e=c.value):(e=c.value,f=c.key));c=this.horizontal[a];if(0<c.length){var h=g.ge(c,b[1],k);if(h<c.length){a=c[h];if(b[1]===a.y){if(a.closed)return a.index;
for(;h<c.length-1&&c[h+1].y===b[1];)if(h+=1,a=c[h],a.closed)return a.index;if(a.y===b[1]&&!a.start){h+=1;if(h>=c.length)return e;a=c[h]}}a.start?f?(b=t(f[0],f[1],[b[0],a.y]),f[0][0]>f[1][0]&&(b=-b),0<b&&(e=a.index)):e=a.index:a.y!==b[1]&&(e=a.index)}}}return e}},{"./lib/order-segments":523,"binary-search-bounds":93,"functional-red-black-tree":233,"robust-orientation":508}],525:[function(a,q,p){function n(b,a){b=h(m(b,a),[a[a.length-1]]);return b[b.length-1]}function k(b,a,e,h){a=-a/(h-a);0>a?a=0:
1<a&&(a=1);h=1-a;for(var g=b.length,f=Array(g),d=0;d<g;++d)f[d]=a*b[d]+h*e[d];return f}var m=a("robust-dot-product"),h=a("robust-sum");q.exports=function(b,a){for(var e=[],g=[],h=n(b[b.length-1],a),f=b[b.length-1],d,c=0;c<b.length;++c,f=d){d=b[c];var r=n(d,a);if(0>h&&0<r||0<h&&0>r)h=k(f,r,d,h),e.push(h),g.push(h.slice());0>r?g.push(d.slice()):0<r?e.push(d.slice()):(e.push(d.slice()),g.push(d.slice()));h=r}return{positive:e,negative:g}};q.exports.positive=function(b,a){for(var e=[],g=n(b[b.length-
1],a),h=b[b.length-1],f,d=0;d<b.length;++d,h=f){f=b[d];var c=n(f,a);(0>g&&0<c||0<g&&0>c)&&e.push(k(h,c,f,g));0<=c&&e.push(f.slice());g=c}return e};q.exports.negative=function(b,a){for(var e=[],g=n(b[b.length-1],a),h=b[b.length-1],f,d=0;d<b.length;++d,h=f){f=b[d];var c=n(f,a);(0>g&&0<c||0<g&&0>c)&&e.push(k(h,c,f,g));0>=c&&e.push(f.slice());g=c}return e}},{"robust-dot-product":505,"robust-sum":513}],526:[function(a,q,p){!function(){function a(b){var g=b;if(h[g])g=h[g];else{for(var e=g,k,l=[],f=0;e;){if(null!==
(k=m.text.exec(e)))l.push(k[0]);else if(null!==(k=m.modulo.exec(e)))l.push("%");else if(null!==(k=m.placeholder.exec(e))){if(k[2]){f|=1;var d=[],c=k[2],r;if(null!==(r=m.key.exec(c)))for(d.push(r[1]);""!==(c=c.substring(r[0].length));)if(null!==(r=m.key_access.exec(c)))d.push(r[1]);else if(null!==(r=m.index_access.exec(c)))d.push(r[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");k[2]=d}else f|=
2;if(3===f)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");l.push({placeholder:k[0],param_no:k[1],keys:k[2],sign:k[3],pad_char:k[4],align:k[5],width:k[6],precision:k[7],type:k[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");e=e.substring(k[0].length)}g=h[g]=l}e=arguments;k=1;l=g.length;d="";var n,v;for(c=0;c<l;c++)if("string"===typeof g[c])d+=g[c];else if("object"===typeof g[c]){r=g[c];if(r.keys)for(f=e[k],n=0;n<r.keys.length;n++){if(void 0==
f)throw Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',r.keys[n],r.keys[n-1]));f=f[r.keys[n]]}else f=r.param_no?e[r.param_no]:e[k++];m.not_type.test(r.type)&&m.not_primitive.test(r.type)&&f instanceof Function&&(f=f());if(m.numeric_arg.test(r.type)&&"number"!==typeof f&&isNaN(f))throw new TypeError(a("[sprintf] expecting number but found %T",f));m.number.test(r.type)&&(v=0<=f);switch(r.type){case "b":f=parseInt(f,10).toString(2);break;case "c":f=String.fromCharCode(parseInt(f,
10));break;case "d":case "i":f=parseInt(f,10);break;case "j":f=JSON.stringify(f,null,r.width?parseInt(r.width):0);break;case "e":f=r.precision?parseFloat(f).toExponential(r.precision):parseFloat(f).toExponential();break;case "f":f=r.precision?parseFloat(f).toFixed(r.precision):parseFloat(f);break;case "g":f=r.precision?String(Number(f.toPrecision(r.precision))):parseFloat(f);break;case "o":f=(parseInt(f,10)>>>0).toString(8);break;case "s":f=String(f);f=r.precision?f.substring(0,r.precision):f;break;
case "t":f=String(!!f);f=r.precision?f.substring(0,r.precision):f;break;case "T":f=Object.prototype.toString.call(f).slice(8,-1).toLowerCase();f=r.precision?f.substring(0,r.precision):f;break;case "u":f=parseInt(f,10)>>>0;break;case "v":f=f.valueOf();f=r.precision?f.substring(0,r.precision):f;break;case "x":f=(parseInt(f,10)>>>0).toString(16);break;case "X":f=(parseInt(f,10)>>>0).toString(16).toUpperCase()}if(m.json.test(r.type))d+=f;else{if(!m.number.test(r.type)||v&&!r.sign)var w="";else w=v?"+":
"-",f=f.toString().replace(m.sign,"");n=r.pad_char?"0"===r.pad_char?"0":r.pad_char.charAt(1):" ";var y=r.width-(w+f).length;y=r.width?0<y?n.repeat(y):"":"";d+=r.align?w+f+y:"0"===n?w+y+f:y+w+f}}return d}function k(b,g){return a.apply(null,[b].concat(g||[]))}var m={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,
key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/},h=Object.create(null);"undefined"!==typeof p&&(p.sprintf=a,p.vsprintf=k);"undefined"!==typeof window&&(window.sprintf=a,window.vsprintf=k)}()},{}],527:[function(a,q,p){var n=a("parenthesis");q.exports=function(a,m,h){if(null==a)throw Error("First argument should be a string");if(null==m)throw Error("Separator should be a string or a RegExp");if(!h)h={};else if("string"===typeof h||Array.isArray(h))h=
{ignore:h};null==h.escape&&(h.escape=!0);null==h.ignore?h.ignore="[] () {} \x3c\x3e \"\" '' ``  ".split(" "):("string"===typeof h.ignore&&(h.ignore=[h.ignore]),h.ignore=h.ignore.map(function(b){1===b.length&&(b+=b);return b}));a=n.parse(a,{flat:!0,brackets:h.ignore});var b=a[0].split(m);if(h.escape){h=[];for(var g=0;g<b.length;g++){var e=b[g],k=b[g+1];"\\"===e[e.length-1]&&"\\"!==e[e.length-2]?(h.push(e+m+k),g++):h.push(e)}b=h}for(g=0;g<b.length;g++)a[0]=b[g],b[g]=n.stringify(a,{flat:!0});return b}},
{parenthesis:459}],528:[function(a,q,p){q.exports=function(a){function k(f){var k=[f],m=[f];h[f]=b[f]=d;g[f]=!0;for(d+=1;0<m.length;){f=m[m.length-1];var n=a[f];if(e[f]<n.length){for(var u=e[f];u<n.length;++u){var v=n[u];if(0>h[v]){h[v]=b[v]=d;g[v]=!0;d+=1;k.push(v);m.push(v);break}else g[v]&&(b[f]=Math.min(b[f],b[v])|0);0<=t[v]&&l[f].push(t[v])}e[f]=u}else{if(b[f]===h[f]){var w=[];n=[];v=0;for(u=k.length-1;0<=u;--u){var p=k[u];g[p]=!1;w.push(p);n.push(l[p]);v+=l[p].length;t[p]=c.length;if(p===f){k.length=
u;break}}c.push(w);f=Array(v);for(u=0;u<n.length;u++)for(w=0;w<n[u].length;w++)f[--v]=n[u][w];r.push(f)}m.pop()}}}for(var m=a.length,h=Array(m),b=Array(m),g=Array(m),e=Array(m),t=Array(m),l=Array(m),f=0;f<m;++f)h[f]=-1,b[f]=0,g[f]=!1,e[f]=0,t[f]=-1,l[f]=[];var d=0,c=[],r=[];for(f=0;f<m;++f)0>h[f]&&k(f);for(f=0;f<r.length;f++){var n=r[f];if(0!==n.length){n.sort(function(b,a){return b-a});m=[n[0]];for(var v=1;v<n.length;v++)n[v]!==n[v-1]&&m.push(n[v]);r[f]=m}}return{components:c,adjacencyList:r}}},
{}],529:[function(a,q,p){function n(b,a){var e=b.length,g=["'use strict';"],f="surfaceNets"+b.join("_")+"d"+a;g.push("var contour\x3dgenContour({","order:[",b.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p \x3e c)|0 },");"generic"===a&&g.push("getters:[0],");var d=[];a=[];for(b=0;b<e;++b)d.push("d"+b),a.push("d"+b);for(b=0;b<1<<e;++b)d.push("v"+b),a.push("v"+b);for(b=0;b<1<<e;++b)d.push("p"+b),a.push("p"+b);d.push("a","b","c");a.push("a","c");g.push("vertex:function vertexFunc(",
d.join(),"){");d=[];for(b=0;b<1<<e;++b)d.push("(p"+b+"\x3c\x3c"+b+")");g.push("var m\x3d(",d.join("+"),")|0;if(m\x3d\x3d\x3d0||m\x3d\x3d\x3d",(1<<(1<<e))-1,"){return}");d=[];var c=[];128>=1<<(1<<e)?(g.push("switch(m){"),c=g):g.push("switch(m\x3e\x3e\x3e7){");for(b=0;b<1<<(1<<e);++b){128<1<<(1<<e)&&0===b%128&&(0<d.length&&c.push("}}"),c="vExtra"+d.length,g.push("case ",b>>>7,":",c,"(m\x260x7f,",a.join(),");break;"),c=["function ",c,"(m,",a.join(),"){switch(m){"],d.push(c));c.push("case ",b&127,":");
for(var h=Array(e),n=Array(e),v=Array(e),w=Array(e),y=0,A=0;A<e;++A)h[A]=[],n[A]=[],v[A]=0,w[A]=0;for(A=0;A<1<<e;++A)for(var z=0;z<e;++z){var x=A^1<<z;if(!(x>A)&&!(b&1<<x)!==!(b&1<<A)){var p=1;b&1<<x?n[z].push("v"+x+"-v"+A):(n[z].push("v"+A+"-v"+x),p=-p);0>p?(h[z].push("-v"+A+"-v"+x),v[z]+=2):(h[z].push("v"+A+"+v"+x),v[z]-=2);y+=1;for(p=0;p<e;++p)p!==z&&(x&1<<p?w[p]+=1:--w[p])}}A=[];for(z=0;z<e;++z)0===h[z].length?A.push("d"+z+"-0.5"):(x="",0>v[z]?x=v[z]+"*c":0<v[z]&&(x="+"+v[z]+"*c"),A.push("d"+
z+"-"+(.5+w[z]/y*.5)+"-"+h[z].length/y*.5+"*("+h[z].join("+")+x+")/("+n[z].join("+")+")"));c.push("a.push([",A.join(),"]);","break;")}g.push("}},");0<d.length&&c.push("}}");a=[];for(b=0;b<1<<e-1;++b)a.push("v"+b);a.push("c0","c1","p0","p1","a","b","c");g.push("cell:function cellFunc(",a.join(),"){");e=m(e-1);g.push("if(p0){b.push(",e.map(function(b){return"["+b.map(function(b){return"v"+b})+"]"}).join(),")}else{b.push(",e.map(function(b){b=b.slice();b.reverse();return"["+b.map(function(b){return"v"+
b})+"]"}).join(),")}}});function ",f,"(array,level){var verts\x3d[],cells\x3d[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",f,";");for(b=0;b<d.length;++b)g.push(d[b].join(""));return(new Function("genContour",g.join("")))(k)}q.exports=function(a,e){if(0>=a.dimension)return{positions:[],cells:[]};if(1===a.dimension){a=h(a,e);e=a.length;for(var g=Array(e),k=Array(e),f=0;f<e;++f)g[f]=[a[f]],k[f]=[f];return{positions:g,cells:k}}g=a.order.join()+"-"+a.dtype;k=b[g];
e=+e||0;k||(k=b[g]=n(a.order,a.dtype));return k(a,e)};var k=a("ndarray-extract-contour"),m=a("triangulate-hypercube"),h=a("zero-crossings"),b={}},{"ndarray-extract-contour":440,"triangulate-hypercube":539,"zero-crossings":572}],530:[function(a,q,p){Object.defineProperty(p,"__esModule",{value:!0});var n=function(){return function(b,a){if(Array.isArray(b))return b;$jscomp.initSymbol();$jscomp.initSymbolIterator();if(Symbol.iterator in Object(b)){var e=[],f=!0,d=!1,c=void 0;try{$jscomp.initSymbol();
$jscomp.initSymbolIterator();for(var g=b[Symbol.iterator](),h;!(f=(h=g.next()).done)&&(e.push(h.value),!a||e.length!==a);f=!0);}catch(v){d=!0,c=v}finally{try{if(!f&&g["return"])g["return"]()}finally{if(d)throw c;}}return e}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),k=2*Math.PI,m=function(b,a,g,f,d,c,h){var e=b.x;b=b.y;e*=a;b*=g;return{x:f*e-d*b+c,y:d*e+f*b+h}},h=function(b,a){var e=.551915024494*(0>a?-1:1),f=Math.cos(b),d=Math.sin(b),c=Math.cos(b+a);b=Math.sin(b+
a);return[{x:f-d*e,y:d+f*e},{x:c+b*e,y:b-c*e},{x:c,y:b}]},b=function(b,a,g,f){var d=(b*g+a*f)/(Math.sqrt(b*b+a*a)*Math.sqrt(b*b+a*a));1<d&&(d=1);-1>d&&(d=-1);return(0>b*f-a*g?-1:1)*Math.acos(d)},g=function(a,g,h,f,d,c,r,m,n,w,y,A){var e=Math.pow(d,2),l=Math.pow(c,2),t=Math.pow(y,2),u=Math.pow(A,2),v=e*l-e*u-l*t;0>v&&(v=0);v=Math.sqrt(v/(e*u+l*t))*(r===m?-1:1);r=v*d/c*A;v=v*-c/d*y;a=w*r-n*v+(a+h)/2;g=n*r+w*v+(g+f)/2;f=(y-r)/d;n=(A-v)/c;d=(-y-r)/d;A=(-A-v)/c;c=b(1,0,f,n);A=b(f,n,d,A);0===m&&0<A&&(A-=
k);1===m&&0>A&&(A+=k);return[a,g,c,A]};p.default=function(b){var a=b.px,e=b.py,f=b.cx,d=b.cy,c=b.rx,r=b.ry,u=b.xAxisRotation,v=void 0===u?0:u;u=b.largeArcFlag;var w=b.sweepFlag;b=[];if(0===c||0===r)return[];var y=Math.sin(v*k/360),A=Math.cos(v*k/360);v=A*(a-f)/2+y*(e-d)/2;var z=-y*(a-f)/2+A*(e-d)/2;if(0===v&&0===z)return[];c=Math.abs(c);r=Math.abs(r);var x=Math.pow(v,2)/Math.pow(c,2)+Math.pow(z,2)/Math.pow(r,2);1<x&&(c*=Math.sqrt(x),r*=Math.sqrt(x));a=g(a,e,f,d,c,r,void 0===u?0:u,void 0===w?0:w,y,
A,v,z);e=n(a,4);var p=e[0],B=e[1];a=e[2];e=e[3];f=Math.abs(e)/(k/4);1E-7>Math.abs(1-f)&&(f=1);f=Math.max(Math.ceil(f),1);e/=f;for(d=0;d<f;d++)b.push(h(a,e)),a+=e;return b.map(function(b){var a=m(b[0],c,r,A,y,p,B),d=a.x;a=a.y;var e=m(b[1],c,r,A,y,p,B),f=e.x;e=e.y;b=m(b[2],c,r,A,y,p,B);return{x1:d,y1:a,x2:f,y2:e,x:b.x,y:b.y}})};q.exports=p.default},{}],531:[function(a,q,p){var n=a("parse-svg-path"),k=a("abs-svg-path"),m=a("normalize-svg-path"),h=a("is-svg-path"),b=a("assert");q.exports=function(a){Array.isArray(a)&&
1===a.length&&"string"===typeof a[0]&&(a=a[0]);"string"===typeof a&&(b(h(a),"String is not an SVG path."),a=n(a));b(Array.isArray(a),"Argument should be a string or an array of path segments.");a=k(a);a=m(a);if(!a.length)return[0,0,0,0];for(var e=[Infinity,Infinity,-Infinity,-Infinity],g=0,l=a.length;g<l;g++)for(var f=a[g].slice(1),d=0;d<f.length;d+=2)f[d+0]<e[0]&&(e[0]=f[d+0]),f[d+1]<e[1]&&(e[1]=f[d+1]),f[d+0]>e[2]&&(e[2]=f[d+0]),f[d+1]>e[3]&&(e[3]=f[d+1]);return e}},{"abs-svg-path":63,assert:70,
"is-svg-path":425,"normalize-svg-path":532,"parse-svg-path":461}],532:[function(a,q,p){function n(a,b,g,e){return["C",a,b,g,e,g,e]}function k(a,b,g,e,k,l){return["C",a/3+2/3*g,b/3+2/3*e,k/3+2/3*g,l/3+2/3*e,k,l]}q.exports=function(a){for(var b,g=[],e=0,h=0,l=0,f=0,d=null,c=null,r=0,u=0,v=0,w=a.length;v<w;v++){var y=a[v],A=y[0];switch(A){case "M":l=y[1];f=y[2];break;case "A":var z=m({px:r,py:u,cx:y[6],cy:y[7],rx:y[1],ry:y[2],xAxisRotation:y[3],largeArcFlag:y[4],sweepFlag:y[5]});if(!z.length)continue;
for(b=0;b<z.length;b++)y=z[b],y=["C",y.x1,y.y1,y.x2,y.y2,y.x,y.y],b<z.length-1&&g.push(y);break;case "S":z=r;if("C"==b||"S"==b)z+=z-e,u+=u-h;y=["C",z,u,y[1],y[2],y[3],y[4]];break;case "T":"Q"==b||"T"==b?(d=2*r-d,c=2*u-c):(d=r,c=u);y=k(r,u,d,c,y[1],y[2]);break;case "Q":d=y[1];c=y[2];y=k(r,u,y[1],y[2],y[3],y[4]);break;case "L":y=n(r,u,y[1],y[2]);break;case "H":y=n(r,u,y[1],u);break;case "V":y=n(r,u,r,y[1]);break;case "Z":y=n(r,u,l,f)}b=A;r=y[y.length-2];u=y[y.length-1];4<y.length?(e=y[y.length-4],h=
y[y.length-3]):(e=r,h=u);g.push(y)}return g};var m=a("svg-arc-to-cubic-bezier")},{"svg-arc-to-cubic-bezier":530}],533:[function(a,q,p){function n(){if(null!=l)return l;var b=document.createElement("canvas").getContext("2d");b.canvas.width=b.canvas.height=1;if(!window.Path2D)return l=!1;var a=new Path2D("M0,0h1v1h-1v-1Z");b.fillStyle="black";b.fill(a);return l=(b=b.getImageData(0,0,1,1))&&b.data&&255===b.data[3]}var k=a("svg-path-bounds"),m=a("parse-svg-path"),h=a("draw-svg-path"),b=a("is-svg-path"),
g=a("bitmap-sdf"),e=document.createElement("canvas"),t=e.getContext("2d");q.exports=function(a,d){if(!b(a))throw Error("Argument should be valid svg path string");d||(d={});if(d.shape){var c=d.shape[0];var f=d.shape[1]}else c=e.width=d.w||d.width||200,f=e.height=d.h||d.height||200;var l=Math.min(c,f),v=d.stroke||0,w=d.viewbox||d.viewBox||k(a);w=[c/(w[2]-w[0]),f/(w[3]-w[1])];w=Math.min(w[0]||0,w[1]||0)/2;t.fillStyle="black";t.fillRect(0,0,c,f);t.fillStyle="white";v&&("number"!=typeof v&&(v=1),t.strokeStyle=
0<v?"white":"black",t.lineWidth=Math.abs(v));t.translate(.5*c,.5*f);t.scale(w,w);n()?(a=new Path2D(a),t.fill(a),v&&t.stroke(a)):(a=m(a),h(t,a),t.fill(),v&&t.stroke());t.setTransform(1,0,0,1,0,0);return g(t,{cutoff:null!=d.cutoff?d.cutoff:.5,radius:null!=d.radius?d.radius:.5*l})};var l},{"bitmap-sdf":95,"draw-svg-path":170,"is-svg-path":425,"parse-svg-path":461,"svg-path-bounds":531}],534:[function(a,q,p){(function(n){function k(b,a,e){e=e||{};var g=h[b];g||(g=h[b]={" ":{data:new Float32Array(0),shape:.2}});
var l=g[a];if(!l)if(1>=a.length||!/\d/.test(a)){l=m(a,{triangles:!0,font:b,textAlign:e.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}});e=l.cells;l=l.positions;for(var f=new Float32Array(6*e.length),d=b=0,c=0;c<e.length;++c)for(var r=e[c],n=0;3>n;++n){var v=l[r[n]];f[b++]=v[0];f[b++]=v[1]+1.4;d=Math.max(v[0],d)}l=g[a]={data:f,shape:d}}else{d=a.split(/(\d|\s)/);e=Array(d.length);for(f=l=c=0;f<d.length;++f)e[f]=k(b,d[f]),c+=e[f].data.length,
l+=e[f].shape,0<f&&(l+=.02);b=new Float32Array(c);d=0;c=-.5*l;for(f=0;f<e.length;++f){r=e[f].data;for(n=0;n<r.length;n+=2)b[d++]=r[n]+c,b[d++]=r[n+1];c+=e[f].shape+.02}l=g[a]={data:b,shape:l}}return l}q.exports=k;var m=a("vectorize-text");n=window||n.global||{};var h=n.__TEXT_CACHE||{};n.__TEXT_CACHE={}}).call(this,a("_process"))},{_process:483,"vectorize-text":548}],535:[function(a,q,p){(function(a){function k(b,c){var d,e;b=b?b:"";c=c||{};if(b instanceof k)return b;if(!(this instanceof k))return new k(b,
c);var f=b;var g={r:0,g:0,b:0};var l=1;var r=d=!1;if("string"==typeof f)a:{f=f.replace(F,"").replace(L,"").toLowerCase();var t=!1;if(N[f])f=N[f],t=!0;else if("transparent"==f){f={r:0,g:0,b:0,a:0,format:"name"};break a}f=(e=P.rgb.exec(f))?{r:e[1],g:e[2],b:e[3]}:(e=P.rgba.exec(f))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=P.hsl.exec(f))?{h:e[1],s:e[2],l:e[3]}:(e=P.hsla.exec(f))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=P.hsv.exec(f))?{h:e[1],s:e[2],v:e[3]}:(e=P.hsva.exec(f))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=P.hex8.exec(f))?
{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),a:parseInt(e[4],16)/255,format:t?"name":"hex8"}:(e=P.hex6.exec(f))?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),format:t?"name":"hex"}:(e=P.hex4.exec(f))?{r:parseInt(e[1]+""+e[1],16),g:parseInt(e[2]+""+e[2],16),b:parseInt(e[3]+""+e[3],16),a:parseInt(e[4]+""+e[4],16)/255,format:t?"name":"hex8"}:(e=P.hex3.exec(f))?{r:parseInt(e[1]+""+e[1],16),g:parseInt(e[2]+""+e[2],16),b:parseInt(e[3]+""+e[3],16),format:t?"name":"hex"}:!1}if("object"==
typeof f){if(E(f.r)&&E(f.g)&&E(f.b))g=f.g,d=f.b,g={r:255*B(f.r,255),g:255*B(g,255),b:255*B(d,255)},d=!0,r="%"===String(f.r).substr(-1)?"prgb":"rgb";else if(E(f.h)&&E(f.s)&&E(f.v)){g=G(f.s);r=G(f.v);e=f.h;d=g;g=r;e=6*B(e,360);d=B(d,100);g=B(g,100);r=a.floor(e);var m=e-r;e=g*(1-d);t=g*(1-m*d);d=g*(1-(1-m)*d);r%=6;g={r:255*[g,t,e,e,d,g][r],g:255*[d,g,g,t,e,e][r],b:255*[e,e,d,g,g,t][r]};d=!0;r="hsv"}else E(f.h)&&E(f.s)&&E(f.l)&&(g=G(f.s),d=G(f.l),g=h(f.h,g,d),d=!0,r="hsl");f.hasOwnProperty("a")&&(l=f.a)}l=
p(l);f=f.format||r;r=K(255,M(g.r,0));e=K(255,M(g.g,0));g=K(255,M(g.b,0));this._originalInput=b;this._r=r;this._g=e;this._b=g;this._a=l;this._roundA=H(100*this._a)/100;this._format=c.format||f;this._gradientType=c.gradientType;1>this._r&&(this._r=H(this._r));1>this._g&&(this._g=H(this._g));1>this._b&&(this._b=H(this._b));this._ok=d;this._tc_id=J++}function m(b,a,c){b=B(b,255);a=B(a,255);c=B(c,255);var d=M(b,a,c),e=K(b,a,c),f=(d+e)/2;if(d==e)var g=e=0;else{var h=d-e;e=.5<f?h/(2-d-e):h/(d+e);switch(d){case b:g=
(a-c)/h+(a<c?6:0);break;case a:g=(c-b)/h+2;break;case c:g=(b-a)/h+4}g/=6}return{h:g,s:e,l:f}}function h(b,a,c){function d(b,a,c){0>c&&(c+=1);1<c&&--c;return c<1/6?b+6*(a-b)*c:.5>c?a:c<2/3?b+(a-b)*(2/3-c)*6:b}b=B(b,360);a=B(a,100);c=B(c,100);if(0===a)c=a=b=c;else{var e=.5>c?c*(1+a):c+a-c*a,f=2*c-e;c=d(f,e,b+1/3);a=d(f,e,b);b=d(f,e,b-1/3)}return{r:255*c,g:255*a,b:255*b}}function b(b,a,c){b=B(b,255);a=B(a,255);c=B(c,255);var d=M(b,a,c),e=K(b,a,c),f=d-e;if(d==e)var g=0;else{switch(d){case b:g=(a-c)/f+
(a<c?6:0);break;case a:g=(c-b)/f+2;break;case c:g=(b-a)/f+4}g/=6}return{h:g,s:0===d?0:f/d,v:d}}function g(b,a,c,d){b=[D(H(b).toString(16)),D(H(a).toString(16)),D(H(c).toString(16))];return d&&b[0].charAt(0)==b[0].charAt(1)&&b[1].charAt(0)==b[1].charAt(1)&&b[2].charAt(0)==b[2].charAt(1)?b[0].charAt(0)+b[1].charAt(0)+b[2].charAt(0):b.join("")}function e(b,c,d,e){return[D(a.round(255*parseFloat(e)).toString(16)),D(H(b).toString(16)),D(H(c).toString(16)),D(H(d).toString(16))].join("")}function t(b,a){a=
0===a?0:a||10;b=k(b).toHsl();b.s-=a/100;b.s=K(1,M(0,b.s));return k(b)}function l(b,a){a=0===a?0:a||10;b=k(b).toHsl();b.s+=a/100;b.s=K(1,M(0,b.s));return k(b)}function f(b){return k(b).desaturate(100)}function d(b,a){a=0===a?0:a||10;b=k(b).toHsl();b.l+=a/100;b.l=K(1,M(0,b.l));return k(b)}function c(b,a){a=0===a?0:a||10;b=k(b).toRgb();b.r=M(0,K(255,b.r-H(255*-(a/100))));b.g=M(0,K(255,b.g-H(255*-(a/100))));b.b=M(0,K(255,b.b-H(255*-(a/100))));return k(b)}function r(b,a){a=0===a?0:a||10;b=k(b).toHsl();
b.l-=a/100;b.l=K(1,M(0,b.l));return k(b)}function n(b,a){b=k(b).toHsl();a=(b.h+a)%360;b.h=0>a?360+a:a;return k(b)}function v(b){b=k(b).toHsl();b.h=(b.h+180)%360;return k(b)}function w(b){var a=k(b).toHsl(),c=a.h;return[k(b),k({h:(c+120)%360,s:a.s,l:a.l}),k({h:(c+240)%360,s:a.s,l:a.l})]}function y(b){var a=k(b).toHsl(),c=a.h;return[k(b),k({h:(c+90)%360,s:a.s,l:a.l}),k({h:(c+180)%360,s:a.s,l:a.l}),k({h:(c+270)%360,s:a.s,l:a.l})]}function A(b){var a=k(b).toHsl(),c=a.h;return[k(b),k({h:(c+72)%360,s:a.s,
l:a.l}),k({h:(c+216)%360,s:a.s,l:a.l})]}function z(b,a,c){a=a||6;c=c||30;var d=k(b).toHsl();c=360/c;b=[k(b)];for(d.h=(d.h-(c*a>>1)+720)%360;--a;)d.h=(d.h+c)%360,b.push(k(d));return b}function x(b,a){a=a||6;var c=k(b).toHsv();b=c.h;var d=c.s;c=c.v;for(var e=[],f=1/a;a--;)e.push(k({h:b,s:d,v:c})),c=(c+f)%1;return e}function p(b){b=parseFloat(b);if(isNaN(b)||0>b||1<b)b=1;return b}function B(b,c){var d=b;"string"==typeof d&&-1!=d.indexOf(".")&&1===parseFloat(d)&&(b="100%");d="string"===typeof b&&-1!=
b.indexOf("%");b=K(c,M(0,parseFloat(b)));d&&(b=parseInt(b*c,10)/100);return 1E-6>a.abs(b-c)?1:b%c/parseFloat(c)}function D(b){return 1==b.length?"0"+b:""+b}function G(b){1>=b&&(b=100*b+"%");return b}function E(b){return!!P.CSS_UNIT.exec(b)}var F=/^\s+/,L=/\s+$/,J=0,H=a.round,K=a.min,M=a.max,I=a.random;k.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},
getAlpha:function(){return this._a},getBrightness:function(){var b=this.toRgb();return(299*b.r+587*b.g+114*b.b)/1E3},getLuminance:function(){var b=this.toRgb();var c=b.r/255;var d=b.g/255;b=b.b/255;c=.03928>=c?c/12.92:a.pow((c+.055)/1.055,2.4);d=.03928>=d?d/12.92:a.pow((d+.055)/1.055,2.4);b=.03928>=b?b/12.92:a.pow((b+.055)/1.055,2.4);return.2126*c+.7152*d+.0722*b},setAlpha:function(b){this._a=p(b);this._roundA=H(100*this._a)/100;return this},toHsv:function(){var a=b(this._r,this._g,this._b);return{h:360*
a.h,s:a.s,v:a.v,a:this._a}},toHsvString:function(){var a=b(this._r,this._g,this._b),c=H(360*a.h),d=H(100*a.s);a=H(100*a.v);return 1==this._a?"hsv("+c+", "+d+"%, "+a+"%)":"hsva("+c+", "+d+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var b=m(this._r,this._g,this._b);return{h:360*b.h,s:b.s,l:b.l,a:this._a}},toHslString:function(){var b=m(this._r,this._g,this._b),a=H(360*b.h),c=H(100*b.s);b=H(100*b.l);return 1==this._a?"hsl("+a+", "+c+"%, "+b+"%)":"hsla("+a+", "+c+"%, "+b+"%, "+this._roundA+")"},
toHex:function(b){return g(this._r,this._g,this._b,b)},toHexString:function(b){return"#"+this.toHex(b)},toHex8:function(b){var c=this._g,d=this._b,e=this._a;c=[D(H(this._r).toString(16)),D(H(c).toString(16)),D(H(d).toString(16)),D(a.round(255*parseFloat(e)).toString(16))];b=b&&c[0].charAt(0)==c[0].charAt(1)&&c[1].charAt(0)==c[1].charAt(1)&&c[2].charAt(0)==c[2].charAt(1)&&c[3].charAt(0)==c[3].charAt(1)?c[0].charAt(0)+c[1].charAt(0)+c[2].charAt(0)+c[3].charAt(0):c.join("");return b},toHex8String:function(b){return"#"+
this.toHex8(b)},toRgb:function(){return{r:H(this._r),g:H(this._g),b:H(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+H(this._r)+", "+H(this._g)+", "+H(this._b)+")":"rgba("+H(this._r)+", "+H(this._g)+", "+H(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:H(100*B(this._r,255))+"%",g:H(100*B(this._g,255))+"%",b:H(100*B(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+H(100*B(this._r,255))+"%, "+H(100*B(this._g,255))+"%, "+
H(100*B(this._b,255))+"%)":"rgba("+H(100*B(this._r,255))+"%, "+H(100*B(this._g,255))+"%, "+H(100*B(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":1>this._a?!1:O[g(this._r,this._g,this._b,!0)]||!1},toFilter:function(b){var a="#"+e(this._r,this._g,this._b,this._a),c=a,d=this._gradientType?"GradientType \x3d 1, ":"";b&&(b=k(b),c="#"+e(b._r,b._g,b._b,b._a));return"progid:DXImageTransform.Microsoft.gradient("+d+"startColorstr\x3d"+a+",endColorstr\x3d"+c+")"},toString:function(b){var a=
!!b;b=b||this._format;var c=!1,d=1>this._a&&0<=this._a;if(!a&&d&&("hex"===b||"hex6"===b||"hex3"===b||"hex4"===b||"hex8"===b||"name"===b))return"name"===b&&0===this._a?this.toName():this.toRgbString();"rgb"===b&&(c=this.toRgbString());"prgb"===b&&(c=this.toPercentageRgbString());if("hex"===b||"hex6"===b)c=this.toHexString();"hex3"===b&&(c=this.toHexString(!0));"hex4"===b&&(c=this.toHex8String(!0));"hex8"===b&&(c=this.toHex8String());"name"===b&&(c=this.toName());"hsl"===b&&(c=this.toHslString());"hsv"===
b&&(c=this.toHsvString());return c||this.toHexString()},clone:function(){return k(this.toString())},_applyModification:function(b,a){b=b.apply(null,[this].concat([].slice.call(a)));this._r=b._r;this._g=b._g;this._b=b._b;this.setAlpha(b._a);return this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(c,arguments)},darken:function(){return this._applyModification(r,arguments)},desaturate:function(){return this._applyModification(t,arguments)},
saturate:function(){return this._applyModification(l,arguments)},greyscale:function(){return this._applyModification(f,arguments)},spin:function(){return this._applyModification(n,arguments)},_applyCombination:function(b,a){return b.apply(null,[this].concat([].slice.call(a)))},analogous:function(){return this._applyCombination(z,arguments)},complement:function(){return this._applyCombination(v,arguments)},monochromatic:function(){return this._applyCombination(x,arguments)},splitcomplement:function(){return this._applyCombination(A,
arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(y,arguments)}};k.fromRatio=function(b,a){if("object"==typeof b){var c={},d;for(d in b)b.hasOwnProperty(d)&&(c[d]="a"===d?b[d]:G(b[d]));b=c}return k(b,a)};k.equals=function(b,a){return b&&a?k(b).toRgbString()==k(a).toRgbString():!1};k.random=function(){return k.fromRatio({r:I(),g:I(),b:I()})};k.mix=function(b,a,c){c=0===c?0:c||50;b=k(b).toRgb();a=k(a).toRgb();c/=100;return k({r:(a.r-
b.r)*c+b.r,g:(a.g-b.g)*c+b.g,b:(a.b-b.b)*c+b.b,a:(a.a-b.a)*c+b.a})};k.readability=function(b,c){b=k(b);c=k(c);return(a.max(b.getLuminance(),c.getLuminance())+.05)/(a.min(b.getLuminance(),c.getLuminance())+.05)};k.isReadable=function(b,a,c){b=k.readability(b,a);a=!1;var d=c||{level:"AA",size:"small"};c=(d.level||"AA").toUpperCase();d=(d.size||"small").toLowerCase();"AA"!==c&&"AAA"!==c&&(c="AA");"small"!==d&&"large"!==d&&(d="small");switch(c+d){case "AAsmall":case "AAAlarge":a=4.5<=b;break;case "AAlarge":a=
3<=b;break;case "AAAsmall":a=7<=b}return a};k.mostReadable=function(b,a,c){var d=null,e=0;c=c||{};var f=c.includeFallbackColors;var g=c.level;var h=c.size;for(var l=0;l<a.length;l++){var r=k.readability(b,a[l]);r>e&&(e=r,d=k(a[l]))}if(k.isReadable(b,d,{level:g,size:h})||!f)return d;c.includeFallbackColors=!1;return k.mostReadable(b,["#fff","#000"],c)};var N=k.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",
blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",
darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",
khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",
mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",
peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",
wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},O=k.hexNames=function(b){var a={},c;for(c in b)b.hasOwnProperty(c)&&(a[b[c]]=c);return a}(N),P={CSS_UNIT:/(?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?)/,rgb:/rgb[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,rgba:/rgba[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsl:/hsl[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsla:/hsla[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsv:/hsv[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsva:/hsva[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};"undefined"!==typeof q&&q.exports?
q.exports=k:window.tinycolor=k})(Math)},{}],536:[function(a,q,p){function n(a){if(a.length){if(a instanceof Float32Array)return a;var h=new Float32Array(a);h.set(a);return h}k[0]=a;return k[0]}q.exports=n;q.exports.float32=q.exports.float=n;q.exports.fract32=q.exports.fract=function(a){if(a.length){for(var h=n(a),b=0,g=h.length;b<g;b++)h[b]=a[b]-h[b];return h}return n(a-n(a))};var k=new Float32Array(1)},{}],537:[function(a,q,p){function n(b,a){a=m(getComputedStyle(b).getPropertyValue(a));return a[0]*
k(a[1],b)}function k(b,a){a=a||document.body;b=(b||"px").trim().toLowerCase();if(a===window||a===document)a=document.body;switch(b){case "%":return a.clientHeight/100;case "ch":case "ex":var e=document.createElement("div");e.style["font-size"]="128"+b;a.appendChild(e);b=n(e,"font-size")/128;a.removeChild(e);return b;case "em":return n(a,"font-size");case "rem":return n(document.body,"font-size");case "vw":return window.innerWidth/100;case "vh":return window.innerHeight/100;case "vmin":return Math.min(window.innerWidth,
window.innerHeight)/100;case "vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case "in":return h;case "cm":return h/2.54;case "mm":return h/25.4;case "pt":return h/72;case "pc":return h/6}return 1}var m=a("parse-unit");q.exports=k;var h=96},{"parse-unit":462}],538:[function(a,q,p){(function(a,k){"object"===typeof p&&"undefined"!==typeof q?k(p):k(a.topojson=a.topojson||{})})(this,function(a){function k(b,a){var c=a.id,d=a.bbox,e=null==a.properties?{}:a.properties;b=m(b,a);return null==
c&&null==d?{type:"Feature",properties:e,geometry:b}:null==d?{type:"Feature",id:c,properties:e,geometry:b}:{type:"Feature",id:c,bbox:d,properties:e,geometry:b}}function m(b,a){function c(b){return h(b.slice())}function d(b){for(var a=[],c=0,d=b.length;c<d;++c){var e=b[c],f=a;f.length&&f.pop();for(var g=k[0>e?~e:e],l=0,r=g.length;l<r;++l)f.push(h(g[l].slice(),l));if(0>e)for(e=f,f=e.length,g=f-r;g<--f;)r=e[g],e[g++]=e[f],e[f]=r}2>a.length&&a.push(a[0].slice());return a}function e(b){for(b=d(b);4>b.length;)b.push(b[0].slice());
return b}function f(b){return b.map(e)}function g(b){var a=b.type;switch(a){case "GeometryCollection":return{type:a,geometries:b.geometries.map(g)};case "Point":b=c(b.coordinates);break;case "MultiPoint":b=b.coordinates.map(c);break;case "LineString":b=d(b.arcs);break;case "MultiLineString":b=b.arcs.map(d);break;case "Polygon":b=f(b.arcs);break;case "MultiPolygon":b=b.arcs.map(f);break;default:return null}return{type:a,coordinates:b}}var h=t(b),k=b.arcs;return g(a)}function h(a,d,e){var c;if(1<arguments.length)var g=
b(a,d,e);else{var h=0;for(g=Array(c=a.arcs.length);h<c;++h)g[h]=h}return{type:"MultiLineString",arcs:f(a,g)}}function b(b,a,d){function c(b){var a=0>b?~b:b;(k[a]||(k[a]=[])).push({i:b,g:l})}function e(b){b.forEach(c)}function f(b){b.forEach(e)}function g(b){switch(l=b,b.type){case "GeometryCollection":b.geometries.forEach(g);break;case "LineString":e(b.arcs);break;case "MultiLineString":case "Polygon":f(b.arcs);break;case "MultiPolygon":b.arcs.forEach(f)}}var h=[],k=[],l;g(a);k.forEach(null==d?function(b){h.push(b[0].i)}:
function(b){d(b[0].g,b[b.length-1].g)&&h.push(b[0].i)});return h}function g(b,a){function c(b){switch(b.type){case "GeometryCollection":b.geometries.forEach(c);break;case "Polygon":d(b.arcs);break;case "MultiPolygon":b.arcs.forEach(d)}}function d(b){b.forEach(function(a){a.forEach(function(a){(g[a=0>a?~a:a]||(g[a]=[])).push(b)})});h.push(b)}function e(a){a=m(b,{type:"Polygon",arcs:[a]}).coordinates[0];for(var c=-1,d=a.length,e,f=a[d-1],g=0;++c<d;)e=f,f=a[c],g+=e[0]*f[1]-e[1]*f[0];return Math.abs(g)}
var g={},h=[],k=[];a.forEach(c);h.forEach(function(b){if(!b._){var a=[],c=[b];b._=1;for(k.push(a);b=c.pop();)a.push(b),b.forEach(function(b){b.forEach(function(b){g[0>b?~b:b].forEach(function(b){b._||(b._=1,c.push(b))})})})}});h.forEach(function(b){delete b._});return{type:"MultiPolygon",arcs:k.map(function(a){var c=[];a.forEach(function(b){b.forEach(function(b){b.forEach(function(b){2>g[0>b?~b:b].length&&c.push(b)})})});c=f(b,c);if(1<(a=c.length))for(var d=1,h=e(c[0]),k;d<a;++d)(k=e(c[d]))>h&&(h=
c[0],c[0]=c[d],c[d]=h,h=k);return c})}}var e=function(b){return b},t=function(b){if(null==(b=b.transform))return e;var a,c,d=b.scale[0],f=b.scale[1],g=b.translate[0],h=b.translate[1];return function(b,e){e||(a=c=0);b[0]=(a+=b[0])*d+g;b[1]=(c+=b[1])*f+h;return b}},l=function(b){function a(b){g[0]=b[0];g[1]=b[1];e(g);g[0]<k&&(k=g[0]);g[0]>m&&(m=g[0]);g[1]<l&&(l=g[1]);g[1]>n&&(n=g[1])}function c(b){switch(b.type){case "GeometryCollection":b.geometries.forEach(c);break;case "Point":a(b.coordinates);break;
case "MultiPoint":b.coordinates.forEach(a)}}var d=b.bbox;if(!d){var e=t(b),f,g=Array(2),h,k=Infinity,l=k,m=-k,n=-k;b.arcs.forEach(function(b){for(var a=-1,c=b.length;++a<c;)f=b[a],g[0]=f[0],g[1]=f[1],e(g,a),g[0]<k&&(k=g[0]),g[0]>m&&(m=g[0]),g[1]<l&&(l=g[1]),g[1]>n&&(n=g[1])});for(h in b.objects)c(b.objects[h]);d=b.bbox=[k,l,m,n]}return d},f=function(b,a){function c(a){var c=b.arcs[0>a?~a:a],d=c[0];if(b.transform){var e=[0,0];c.forEach(function(b){e[0]+=b[0];e[1]+=b[1]})}else e=c[c.length-1];return 0>
a?[e,d]:[d,e]}function d(b,a){for(var c in b){var d=b[c];delete a[d.start];delete d.start;delete d.end;d.forEach(function(b){e[0>b?~b:b]=1});h.push(d)}}var e={},f={},g={},h=[],k=-1;a.forEach(function(c,d){var e=b.arcs[0>c?~c:c];3>e.length&&!e[1][0]&&!e[1][1]&&(e=a[++k],a[k]=c,a[d]=e)});a.forEach(function(b){var a=c(b),d=a[0],e=a[1];(a=g[d])?(delete g[a.end],a.push(b),a.end=e,(b=f[e])?(delete f[b.start],d=b===a?a:a.concat(b),f[d.start=a.start]=g[d.end=b.end]=d):f[a.start]=g[a.end]=a):(a=f[e])?(delete f[a.start],
a.unshift(b),a.start=d,(b=g[d])?(delete g[b.end],d=b===a?a:b.concat(a),f[d.start=b.start]=g[d.end=a.end]=d):f[a.start]=g[a.end]=a):(a=[b],f[a.start=d]=g[a.end=e]=a)});d(g,f);d(f,g);a.forEach(function(b){e[0>b?~b:b]||h.push([b])});return h},d=function(b,a){for(var c=0,d=b.length;c<d;){var e=c+d>>>1;b[e]<a?c=e+1:d=e}return c};a.bbox=l;a.feature=function(b,a){return"GeometryCollection"===a.type?{type:"FeatureCollection",features:a.geometries.map(function(a){return k(b,a)})}:k(b,a)};a.mesh=function(b){return m(b,
h.apply(this,arguments))};a.meshArcs=h;a.merge=function(b){return m(b,g.apply(this,arguments))};a.mergeArcs=g;a.neighbors=function(b){function a(b,a){b.forEach(function(b){0>b&&(b=~b);var c=f[b];c?c.push(a):f[b]=[a]})}function c(b,c){b.forEach(function(b){a(b,c)})}function e(b,a){if("GeometryCollection"===b.type)b.geometries.forEach(function(b){e(b,a)});else if(b.type in h)h[b.type](b.arcs,a)}var f={},g=b.map(function(){return[]}),h={LineString:a,MultiLineString:c,Polygon:c,MultiPolygon:function(b,
a){b.forEach(function(b){c(b,a)})}};b.forEach(e);for(var k in f){b=f[k];for(var l=b.length,t=0;t<l;++t)for(var m=t+1;m<l;++m){var n=b[t],p=b[m],q;(q=g[n])[k=d(q,p)]!==p&&q.splice(k,0,p);(q=g[p])[k=d(q,n)]!==n&&q.splice(k,0,n)}}return g};a.quantize=function(b,a){function c(b){b[0]=Math.round((b[0]-g)/h);b[1]=Math.round((b[1]-k)/r)}function d(b){switch(b.type){case "GeometryCollection":b.geometries.forEach(d);break;case "Point":c(b.coordinates);break;case "MultiPoint":b.coordinates.forEach(c)}}if(!(2<=
(a=Math.floor(a))))throw Error("n must be 2");if(b.transform)throw Error("already quantized");var e=l(b),f,g=e[0],h=(e[2]-g)/(a-1)||1,k=e[1],r=(e[3]-k)/(a-1)||1;b.arcs.forEach(function(b){for(var a=1,c=1,d=b.length,e=b[0],f=e[0]=Math.round((e[0]-g)/h),l=e[1]=Math.round((e[1]-k)/r),t,m;a<d;++a)if(e=b[a],t=Math.round((e[0]-g)/h),m=Math.round((e[1]-k)/r),t!==f||m!==l)e=b[c++],e[0]=t-f,f=t,e[1]=m-l,l=m;2>c&&(e=b[c++],e[0]=0,e[1]=0);b.length=c});for(f in b.objects)d(b.objects[f]);b.transform={scale:[h,
r],translate:[g,k]};return b};a.transform=t;a.untransform=function(b){if(null==(b=b.transform))return e;var a,c,d=b.scale[0],f=b.scale[1],g=b.translate[0],h=b.translate[1];return function(b,e){e||(a=c=0);e=Math.round((b[0]-g)/d);var k=Math.round((b[1]-h)/f);b[0]=e-a;a=e;b[1]=k-c;c=k;return b}};Object.defineProperty(a,"__esModule",{value:!0})})},{}],539:[function(a,q,p){q.exports=function(a){if(0>a)return[];if(0===a)return[[0]];for(var b=Math.round(m(a+1))|0,g=[],e=0;e<b;++e){for(var h=n.unrank(a,
e),l=[0],f=0,d=0;d<h.length;++d)f+=1<<h[d],l.push(f);1>k(h)&&(l[0]=f,l[a]=0);g.push(l)}return g};var n=a("permutation-rank"),k=a("permutation-parity"),m=a("gamma")},{gamma:234,"permutation-parity":464,"permutation-rank":465}],540:[function(a,q,p){function n(b,a,e){return Math.sqrt(Math.pow(b,2)+Math.pow(a,2)+Math.pow(e,2))}function k(b){var a=Math.abs(b[0]),d=Math.abs(b[1]),e=Math.abs(b[2]),f=[0,0,0];a>Math.max(d,e)?f[2]=1:d>Math.max(a,e)?f[0]=1:f[1]=1;for(e=d=a=0;3>e;++e)a+=b[e]*b[e],d+=f[e]*b[e];
for(e=0;3>e;++e)f[e]-=d/a*b[e];t(f,f);return f}function m(b,a,e,f,g,k,l,t){this.center=h(e);this.up=h(f);this.right=h(g);this.radius=h([k]);this.angle=h([l,t]);this.angle.bounds=[[-Infinity,-Math.PI/2],[Infinity,Math.PI/2]];this.setDistanceLimits(b,a);this.computedCenter=this.center.curve(0);this.computedUp=this.up.curve(0);this.computedRight=this.right.curve(0);this.computedRadius=this.radius.curve(0);this.computedAngle=this.angle.curve(0);this.computedToward=[0,0,0];this.computedEye=[0,0,0];this.computedMatrix=
Array(16);for(b=0;16>b;++b)this.computedMatrix[b]=.5;this.recalcMatrix(0)}q.exports=function(b){b=b||{};var a=b.center||[0,0,0],d=b.up||[0,1,0],f=b.right||k(d),g=b.radius||1,h=b.theta||0,y=b.phi||0;a=[].slice.call(a,0,3);d=[].slice.call(d,0,3);t(d,d);f=[].slice.call(f,0,3);t(f,f);"eye"in b&&(g=b.eye,h=[g[0]-a[0],g[1]-a[1],g[2]-a[2]],e(f,h,d),1E-6>n(f[0],f[1],f[2])?f=k(d):t(f,f),g=n(h[0],h[1],h[2]),y=l(d,h)/g,h=l(f,h)/g,y=Math.acos(y),h=Math.acos(h));g=Math.log(g);return new m(b.zoomMin,b.zoomMax,
a,d,f,g,h,y)};var h=a("filtered-vector"),b=a("gl-mat4/invert"),g=a("gl-mat4/rotate"),e=a("gl-vec3/cross"),t=a("gl-vec3/normalize"),l=a("gl-vec3/dot");a=m.prototype;a.setDistanceLimits=function(b,a){b=0<b?Math.log(b):-Infinity;a=0<a?Math.log(a):Infinity;a=Math.max(a,b);this.radius.bounds[0][0]=b;this.radius.bounds[1][0]=a};a.getDistanceLimits=function(b){var a=this.radius.bounds[0];return b?(b[0]=Math.exp(a[0][0]),b[1]=Math.exp(a[1][0]),b):[Math.exp(a[0][0]),Math.exp(a[1][0])]};a.recalcMatrix=function(b){this.center.curve(b);
this.up.curve(b);this.right.curve(b);this.radius.curve(b);this.angle.curve(b);for(var a=this.computedUp,d=this.computedRight,f=0,g=0,h=0;3>h;++h)g+=a[h]*d[h],f+=a[h]*a[h];var k=Math.sqrt(f);for(h=b=0;3>h;++h)d[h]-=a[h]*g/f,b+=d[h]*d[h],a[h]/=k;b=Math.sqrt(b);for(h=0;3>h;++h)d[h]/=b;var l=this.computedToward;e(l,a,d);t(l,l);b=Math.exp(this.computedRadius[0]);k=this.computedAngle[0];f=this.computedAngle[1];g=Math.cos(k);k=Math.sin(k);var m=Math.cos(f),x=Math.sin(f);f=this.computedCenter;var p=g*m,q=
k*m,D=-g*x,G=-k*x;g=this.computedEye;k=this.computedMatrix;for(h=0;3>h;++h){var E=p*d[h]+q*l[h]+x*a[h];k[4*h+1]=D*d[h]+G*l[h]+m*a[h];k[4*h+2]=E;k[4*h+3]=0}d=k[1];h=k[5];x=k[9];l=k[2];m=k[6];p=k[10];a=h*p-x*m;x=x*l-d*p;d=d*m-h*l;h=n(a,x,d);k[0]=a/h;k[4]=x/h;k[8]=d/h;for(h=0;3>h;++h)g[h]=f[h]+k[2+4*h]*b;for(h=0;3>h;++h){for(f=b=0;3>f;++f)b+=k[h+4*f]*g[f];k[12+h]=-b}k[15]=1};a.getMatrix=function(b,a){this.recalcMatrix(b);b=this.computedMatrix;if(a){for(var c=0;16>c;++c)a[c]=b[c];return a}return b};var f=
[0,0,0];a.rotate=function(b,a,e,h){this.angle.move(b,a,e);if(h){this.recalcMatrix(b);a=this.computedMatrix;f[0]=a[2];f[1]=a[6];f[2]=a[10];e=this.computedUp;for(var c=this.computedRight,d=this.computedToward,k=0;3>k;++k)a[4*k]=e[k],a[4*k+1]=c[k],a[4*k+2]=d[k];g(a,a,h,f);for(k=0;3>k;++k)e[k]=a[4*k],c[k]=a[4*k+1];this.up.set(b,e[0],e[1],e[2]);this.right.set(b,c[0],c[1],c[2])}};a.pan=function(b,a,e,f){a=a||0;e=e||0;f=f||0;this.recalcMatrix(b);var c=this.computedMatrix,d=c[1],g=c[5],h=c[9],k=n(d,g,h);
d/=k;g/=k;h/=k;k=c[0];var l=c[4];c=c[8];var t=k*d+l*g+c*h;k-=d*t;l-=g*t;c-=h*t;t=n(k,l,c);this.center.move(b,k/t*a+d*e,l/t*a+g*e,c/t*a+h*e);a=Math.exp(this.computedRadius[0]);a=Math.max(1E-4,a+f);this.radius.set(b,Math.log(a))};a.translate=function(b,a,e,f){this.center.move(b,a||0,e||0,f||0)};a.setMatrix=function(a,c,e,f){var d=1;"number"===typeof e&&(d=e|0);if(0>d||3<d)d=1;var g=(d+2)%3;c||(this.recalcMatrix(a),c=this.computedMatrix);e=c[d];var h=c[d+4],k=c[d+8];if(f){f=Math.abs(e);var l=Math.abs(k),
t=Math.max(f,Math.abs(h),l);f===t?(e=0>e?-1:1,h=k=0):l===t?(k=0>k?-1:1,e=h=0):(h=0>h?-1:1,e=k=0)}else f=n(e,h,k),e/=f,h/=f,k/=f;f=c[g];l=c[g+4];g=c[g+8];t=f*e+l*h+g*k;f-=e*t;l-=h*t;g-=k*t;t=n(f,l,g);f/=t;l/=t;g/=t;t=h*g-k*l;var r=k*f-e*g,m=e*l-h*f,u=n(t,r,m);t/=u;r/=u;m/=u;this.center.jump(a,q,F,L);this.radius.idle(a);this.up.jump(a,e,h,k);this.right.jump(a,f,l,g);if(2===d)F=c[1],L=c[5],e=c[9],q=0>p?-Math.PI/2:Math.PI/2,F=Math.atan2(F*t+L*r+e*m,F*f+L*l+e*g);else{F=c[2];L=c[6];var p=c[10];q=Math.asin(Math.min(1,
Math.max(-1,F*e+L*h+p*k)));F=Math.atan2(F*t+L*r+p*m,F*f+L*l+p*g)}this.angle.jump(a,F,q);this.recalcMatrix(a);p=c[2];e=c[6];h=c[10];L=this.computedMatrix;b(L,c);c=L[15];var q=L[12]/c,F=L[13]/c,L=L[14]/c;c=Math.exp(this.computedRadius[0]);this.center.jump(a,q-p*c,F-e*c,L-h*c)};a.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())};a.idle=function(b){this.center.idle(b);this.up.idle(b);this.right.idle(b);this.radius.idle(b);
this.angle.idle(b)};a.flush=function(b){this.center.flush(b);this.up.flush(b);this.right.flush(b);this.radius.flush(b);this.angle.flush(b)};a.setDistance=function(b,a){0<a&&this.radius.set(b,Math.log(a))};a.lookAt=function(b,a,e,f){this.recalcMatrix(b);a=a||this.computedEye;e=e||this.computedCenter;f=f||this.computedUp;var c=f[0],d=f[1];f=f[2];var g=n(c,d,f);if(!(1E-6>g)){c/=g;d/=g;f/=g;g=a[0]-e[0];var h=a[1]-e[1];a=a[2]-e[2];var k=n(g,h,a);if(!(1E-6>k)){g/=k;h/=k;a/=k;var l=this.computedRight,t=
l[0],r=l[1];l=l[2];var m=c*t+d*r+f*l;t-=m*c;r-=m*d;l-=m*f;m=n(t,r,l);if(.01>m&&(t=d*a-f*h,r=f*g-c*a,l=c*h-d*g,m=n(t,r,l),1E-6>m))return;t/=m;r/=m;l/=m;this.up.set(b,c,d,f);this.right.set(b,t,r,l);this.center.set(b,e[0],e[1],e[2]);this.radius.set(b,Math.log(k));e=d*l-f*r;k=f*t-c*l;m=c*r-d*t;var u=n(e,k,m);c=Math.asin(Math.min(1,Math.max(-1,c*g+d*h+f*a)));d=Math.atan2(e/u*g+k/u*h+m/u*a,t*g+r*h+l*a);g=this.angle._state;f=g[g.length-1];g=g[g.length-2];f%=2*Math.PI;h=Math.abs(f-d);a=Math.abs(f-2*Math.PI-
d);Math.abs(f+2*Math.PI-d)<h&&(f+=2*Math.PI);a<h&&(f-=2*Math.PI);this.angle.jump(this.angle.lastT(),f,g);this.angle.set(b,d,c)}}}},{"filtered-vector":229,"gl-mat4/invert":268,"gl-mat4/rotate":273,"gl-vec3/cross":336,"gl-vec3/dot":341,"gl-vec3/normalize":358}],541:[function(a,q,p){q.exports=function(a,m,h){var b=a*m,g=n*a;g-=g-a;a-=g;var e=n*m;e-=e-m;m-=e;m=a*m-(b-g*e-a*e-g*m);return h?(h[0]=m,h[1]=b,h):[m,b]};var n=+(Math.pow(2,27)+1)},{}],542:[function(a,q,p){q.exports=function(a,k,m){var h=a+k,
b=h-a;k-=b;a-=h-b;return m?(m[0]=a+k,m[1]=h,m):[a+k,h]}},{}],543:[function(a,q,p){(function(n,k){function m(b){if(b){var a=w.log2(b.length||b.byteLength);x[a].push(b)}}function h(b){b=w.nextPow2(b);var a=w.log2(b);a=x[a];return 0<a.length?a.pop():new ArrayBuffer(b)}function b(b){return new Uint8Array(h(b),0,b)}function g(b){return new Uint16Array(h(2*b),0,b)}function e(b){return new Uint32Array(h(4*b),0,b)}function t(b){return new Int8Array(h(b),0,b)}function l(b){return new Int16Array(h(2*b),0,b)}
function f(b){return new Int32Array(h(4*b),0,b)}function d(b){return new Float32Array(h(4*b),0,b)}function c(b){return new Float64Array(h(8*b),0,b)}function r(a){return A?new Uint8ClampedArray(h(a),0,a):b(a)}function u(b){return new DataView(h(b),0,b)}function v(b){b=w.nextPow2(b);var a=w.log2(b);a=q[a];return 0<a.length?a.pop():new k(b)}var w=a("bit-twiddle"),y=a("dup");n.__TYPEDARRAY_POOL||(n.__TYPEDARRAY_POOL={UINT8:y([32,0]),UINT16:y([32,0]),UINT32:y([32,0]),INT8:y([32,0]),INT16:y([32,0]),INT32:y([32,
0]),FLOAT:y([32,0]),DOUBLE:y([32,0]),DATA:y([32,0]),UINT8C:y([32,0]),BUFFER:y([32,0])});var A="undefined"!==typeof Uint8ClampedArray,z=n.__TYPEDARRAY_POOL;z.UINT8C||(z.UINT8C=y([32,0]));z.BUFFER||(z.BUFFER=y([32,0]));var x=z.DATA,q=z.BUFFER;p.free=function(b){if(k.isBuffer(b))q[w.log2(b.length)].push(b);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(b)&&(b=b.buffer),b){var a=w.log2(b.length||b.byteLength)|0;x[a].push(b)}};p.freeUint8=p.freeUint16=p.freeUint32=p.freeInt8=p.freeInt16=
p.freeInt32=p.freeFloat32=p.freeFloat=p.freeFloat64=p.freeDouble=p.freeUint8Clamped=p.freeDataView=function(b){m(b.buffer)};p.freeArrayBuffer=m;p.freeBuffer=function(b){q[w.log2(b.length)].push(b)};p.malloc=function(a,k){if(void 0===k||"arraybuffer"===k)return h(a);switch(k){case "uint8":return b(a);case "uint16":return g(a);case "uint32":return e(a);case "int8":return t(a);case "int16":return l(a);case "int32":return f(a);case "float":case "float32":return d(a);case "double":case "float64":return c(a);
case "uint8_clamped":return r(a);case "buffer":return v(a);case "data":case "dataview":return u(a)}return null};p.mallocArrayBuffer=h;p.mallocUint8=b;p.mallocUint16=g;p.mallocUint32=e;p.mallocInt8=t;p.mallocInt16=l;p.mallocInt32=f;p.mallocFloat32=p.mallocFloat=d;p.mallocFloat64=p.mallocDouble=c;p.mallocUint8Clamped=r;p.mallocDataView=u;p.mallocBuffer=v;p.clearCache=function(){for(var b=0;32>b;++b)z.UINT8[b].length=0,z.UINT16[b].length=0,z.UINT32[b].length=0,z.INT8[b].length=0,z.INT16[b].length=0,
z.INT32[b].length=0,z.FLOAT[b].length=0,z.DOUBLE[b].length=0,z.UINT8C[b].length=0,x[b].length=0,q[b].length=0}}).call(this,"undefined"!==typeof pa?pa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":94,buffer:107,dup:172}],544:[function(a,q,p){function n(a){this.roots=Array(a);this.ranks=Array(a);for(var k=0;k<a;++k)this.roots[k]=k,this.ranks[k]=0}"use restrict";q.exports=n;a=n.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}});
a.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};a.find=function(a){for(var k=a,h=this.roots;h[a]!==a;)a=h[a];for(;h[k]!==a;){var b=h[k];h[k]=a;k=b}return a};a.link=function(a,m){a=this.find(a);m=this.find(m);if(a!==m){var h=this.ranks,b=this.roots,g=h[a],e=h[m];g<e?b[a]=m:e<g?b[m]=a:(b[m]=a,++h[a])}}},{}],545:[function(a,q,p){q.exports=function(a,k,m){if(0===a.length)return a;if(k){m||a.sort(k);m=1;for(var h=a.length,b=a[0],g,e=1;e<h;++e)g=b,b=a[e],k(b,
g)&&(e===m?m++:a[m++]=b);a.length=m;return a}m||a.sort();k=1;m=a.length;h=a[0];for(g=1;g<m;++g)b=h,h=a[g],h!==b&&(g===k?k++:a[k++]=h);a.length=k;return a}},{}],546:[function(a,q,p){var n=/['"]/;q.exports=function(a){if(!a)return"";n.test(a.charAt(0))&&(a=a.substr(1));n.test(a.charAt(a.length-1))&&(a=a.substr(0,a.length-1));return a}},{}],547:[function(a,q,p){q.exports=function(a,k,m){Array.isArray(m)||(m=[].slice.call(arguments,2));for(var h=0,b=m.length;h<b;h++){var g=m[h],e;for(e in g)if((void 0===
k[e]||Array.isArray(k[e])||a[e]!==k[e])&&e in k){if(!0===g[e])var t=k[e];else if(!1===g[e])continue;else if("function"===typeof g[e]&&(t=g[e](k[e],a,k),void 0===t))continue;a[e]=t}}return a}},{}],548:[function(a,q,p){q.exports=function(a,b){if("object"!==typeof b||null===b)b={};return n(a,b.canvas||k,b.context||m,b)};var n=a("./lib/vtext"),k=null,m=null;"undefined"!==typeof document&&(k=document.createElement("canvas"),k.width=8192,k.height=1024,m=k.getContext("2d"))},{"./lib/vtext":549}],549:[function(a,
q,p){function n(b,a,c,d){var e="\x3c"+b+"\x3e";b="\x3c/"+b+"\x3e";for(var f=e.length,g=b.length,h=a[0]===y||a[0]===x,k=0,l;-1<k;){k=c.indexOf(e,k);if(-1===k)break;l=c.indexOf(b,k+f);if(-1===l)break;if(l<=k)break;for(var t=k;t<l+g;++t)if(t<k+f||t>=l)d[t]=null,c=c.substr(0,t)+" "+c.substr(t+1);else if(null!==d[t]){var r=d[t].indexOf(a[0]);-1===r?d[t]+=a:h&&(d[t]=d[t].substr(0,r+1)+(1+parseInt(d[t][r+1]))+d[t].substr(r+2))}k+=f;k=c.substr(k,l-k).indexOf(e);k=-1!==k?k:l+g}return d}function k(b,a,c){for(var d=
a.textAlign||"start",e=a.textBaseline||"alphabetic",f=[1073741824,1073741824],g=[0,0],h=b.length,k=0;k<h;++k)for(var l=b[k],t=0;2>t;++t)f[t]=Math.min(f[t],l[t])|0,g[t]=Math.max(g[t],l[t])|0;var r=0;switch(d){case "center":r=-.5*(f[0]+g[0]);break;case "right":case "end":r=-g[0];break;case "left":case "start":r=-f[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+d+"'");}var m=0;switch(e){case "hanging":case "top":m=-f[1];break;case "middle":m=-.5*(f[1]+g[1]);break;case "alphabetic":case "ideographic":m=
-3*c;break;case "bottom":m=-g[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+e+"'");}var n=1/c;"lineHeight"in a?n*=+a.lineHeight:"width"in a?n=a.width/(g[0]-f[0]):"height"in a&&(n=a.height/(g[1]-f[1]));return b.map(function(b){return[n*(b[0]+r),n*(b[1]+m)]})}function m(b,a,d,f,g,h){function k(){if(""!==L){var b=a.measureText(L).width;a.fillText(L,E+Z,G+R);Z+=b}}function l(){return""+Math.round(U)+"px "}function t(b,c){var d=""+a.font;if(!0===h.subscripts){var e=b.indexOf(x),
f=c.indexOf(x);e=-1<e?parseInt(b[1+e]):0;f=-1<f?parseInt(c[1+f]):0;e!==f&&(d=d.replace(l(),"?px "),U*=Math.pow(.75,f-e),d=d.replace("?px ",l()));R+=.25*D*(f-e)}!0===h.superscripts&&(e=b.indexOf(y),f=c.indexOf(y),e=-1<e?parseInt(b[1+e]):0,f=-1<f?parseInt(c[1+f]):0,e!==f&&(d=d.replace(l(),"?px "),U*=Math.pow(.75,f-e),d=d.replace("?px ",l())),R-=.25*D*(f-e));!0===h.bolds&&(f=-1<b.indexOf(r),e=-1<c.indexOf(r),!f&&e&&(d=g?d.replace("italic ","italic bold "):"bold "+d),f&&!e&&(d=d.replace("bold ","")));
if(!0===h.italics){var g=-1<b.indexOf(v);b=-1<c.indexOf(v);!g&&b&&(d="italic "+d);g&&!b&&(d=d.replace("italic ",""))}a.font=d}d=d.replace(/\n/g,"");d=!0===h.breaklines?d.replace(/<br>/g,"\n"):d.replace(/<br>/g," ");var m="",p=[];for(F=0;F<d.length;++F)p[F]=m;!0===h.bolds&&(p=n(c,r,d,p));!0===h.italics&&(p=n(u,v,d,p));!0===h.superscripts&&(p=n(w,A,d,p));!0===h.subscripts&&(p=n(z,C,d,p));var q=[],B="";for(F=0;F<d.length;++F)null!==p[F]&&(B+=d[F],q.push(p[F]));p=B.split("\n");d=p.length;var D=Math.round(g*
f),E=f,G=2*f;g=0;F=d*D+G;b.height<F&&(b.height=F);a.fillStyle="#000";a.fillRect(0,0,b.width,b.height);a.fillStyle="#fff";var F;B=0;var L="";for(b=0;b<d;++b){var ca=p[b]+"\n";var Z=0;var R=b*D;var U=f;L="";for(F=0;F<ca.length;++F){var X=F+B<q.length?q[F+B]:q[q.length-1];m===X?L+=ca[F]:(k(),L=ca[F],void 0!==X&&(t(m,X),m=X))}k();B+=ca.length;F=Math.round(Z+2*E)|0;g<F&&(g=F)}f=g;m=G+D*d;return e(a.getImageData(0,0,f,m).data,[m,f,4]).pick(-1,-1,0).transpose(1,0)}function h(b,a,c,e){b=g(b,128);e=e?t(b.cells,
b.positions,.25):{edges:b.cells,positions:b.positions};c=k(e.positions,a,c);b=e.edges;e="ccw"===a.orientation;l(c,b);if(a.polygons||a.polygon||a.polyline){a=d(b,c);b=Array(a.length);for(var h=0;h<a.length;++h){for(var r=a[h],m=Array(r.length),n=0;n<r.length;++n){for(var u=r[n],v=Array(u.length),w=0;w<u.length;++w)v[w]=c[u[w]].slice();e&&v.reverse();m[n]=v}b[h]=m}return b}return a.triangles||a.triangulate||a.triangle?{cells:f(c,b,{delaunay:!1,exterior:!1,interior:!0}),positions:c}:{edges:b,positions:c}}
function b(b,a,c){try{return h(b,a,c,!0)}catch(E){}try{return h(b,a,c,!1)}catch(E){}return a.polygons||a.polyline||a.polygon?[]:a.triangles||a.triangulate||a.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}q.exports=function(a,c,d,e){var f=64,g=1.25,h={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};e&&(e.size&&0<e.size&&(f=e.size),e.lineSpacing&&0<e.lineSpacing&&(g=e.lineSpacing),e.styletags&&e.styletags.breaklines&&(h.breaklines=e.styletags.breaklines?!0:!1),e.styletags&&
e.styletags.bolds&&(h.bolds=e.styletags.bolds?!0:!1),e.styletags&&e.styletags.italics&&(h.italics=e.styletags.italics?!0:!1),e.styletags&&e.styletags.subscripts&&(h.subscripts=e.styletags.subscripts?!0:!1),e.styletags&&e.styletags.superscripts&&(h.superscripts=e.styletags.superscripts?!0:!1));d.font=[e.fontStyle,e.fontVariant,e.fontWeight,f+"px",e.font].filter(function(b){return b}).join(" ");d.textAlign="start";d.textBaseline="alphabetic";d.direction="ltr";a=m(c,d,a,f,g,h);return b(a,e,f)};q.exports.processPixels=
b;var g=a("surface-nets"),e=a("ndarray"),t=a("simplify-planar-graph"),l=a("clean-pslg"),f=a("cdt2d"),d=a("planar-graph-to-polyline"),c="b",r="b|",u="i",v="i|",w="sup",y="+",A="+1",z="sub",x="-",C="-1"},{cdt2d:108,"clean-pslg":118,ndarray:451,"planar-graph-to-polyline":469,"simplify-planar-graph":522,"surface-nets":529}],550:[function(a,q,p){(function(){function a(b){b.permitHostObjects___&&b.permitHostObjects___(a)}function k(b){return!("weakmap:"==b.substr(0,8)&&"___"===b.substr(b.length-3))}function m(b){if(b!==
Object(b))throw new TypeError("Not an object: "+b);var a=b[r];if(a&&a.key===b)return a;if(c(b)){a={key:b};try{return d(b,r,{value:a,writable:!1,enumerable:!1,configurable:!1}),a}catch(x){}}}function h(b){b.prototype=null;return Object.freeze(b)}function b(){v||"undefined"===typeof console||(v=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"===typeof ses||!ses.ok||ses.ok()){"undefined"!==typeof ses&&(ses.weakMapPermitHostObjects=
a);var g=!1;if("function"===typeof WeakMap){var e=WeakMap;if("undefined"===typeof navigator||!/Firefox/.test(navigator.userAgent)){var t=new e,l=Object.freeze({});t.set(l,1);if(1!==t.get(l))g=!0;else{q.exports=WeakMap;return}}}var f=Object.getOwnPropertyNames,d=Object.defineProperty,c=Object.isExtensible,r="weakmap:ident:"+Math.random()+"___";"undefined"!==typeof crypto&&"function"===typeof crypto.getRandomValues&&"function"===typeof ArrayBuffer&&"function"===typeof Uint8Array&&(t=new ArrayBuffer(25),
t=new Uint8Array(t),crypto.getRandomValues(t),r="weakmap:rand:"+Array.prototype.map.call(t,function(b){return(b%36).toString(36)}).join("")+"___");d(Object,"getOwnPropertyNames",{value:function(b){return f(b).filter(k)}});if("getPropertyNames"in Object){var u=Object.getPropertyNames;d(Object,"getPropertyNames",{value:function(b){return u(b).filter(k)}})}(function(){var b=Object.freeze;d(Object,"freeze",{value:function(a){m(a);return b(a)}});var a=Object.seal;d(Object,"seal",{value:function(b){m(b);
return a(b)}});var c=Object.preventExtensions;d(Object,"preventExtensions",{value:function(b){m(b);return c(b)}})})();var v=!1,w=0,y=function(){this instanceof y||b();var a=[],c=[],d=w++;return Object.create(y.prototype,{get___:{value:h(function(b,e){var f=m(b);if(f)return d in f?f[d]:e;b=a.indexOf(b);return 0<=b?c[b]:e})},has___:{value:h(function(b){var c=m(b);return c?d in c:0<=a.indexOf(b)})},set___:{value:h(function(b,e){var f;(f=m(b))?f[d]=e:(f=a.indexOf(b),0<=f?c[f]=e:(f=a.length,c[f]=e,a[f]=
b));return this})},delete___:{value:h(function(b){var e=m(b);if(e)return d in e&&delete e[d];b=a.indexOf(b);if(0>b)return!1;e=a.length-1;a[b]=void 0;c[b]=c[e];a[b]=a[e];a.length=e;c.length=e;return!0})}})};y.prototype=Object.create(Object.prototype,{get:{value:function(b,a){return this.get___(b,a)},writable:!0,configurable:!0},has:{value:function(b){return this.has___(b)},writable:!0,configurable:!0},set:{value:function(b,a){return this.set___(b,a)},writable:!0,configurable:!0},"delete":{value:function(b){return this.delete___(b)},
writable:!0,configurable:!0}});"function"===typeof e?function(){function c(){this instanceof y||b();var c=new e,d=void 0,f=!1;var k=g?function(b,a){c.set(b,a);c.has(b)||(d||(d=new y),d.set(b,a));return this}:function(b,a){if(f)try{c.set(b,a)}catch(E){d||(d=new y),d.set___(b,a)}else c.set(b,a);return this};return Object.create(y.prototype,{get___:{value:h(function(b,a){return d?c.has(b)?c.get(b):d.get___(b,a):c.get(b,a)})},has___:{value:h(function(b){return c.has(b)||(d?d.has___(b):!1)})},set___:{value:h(k)},
delete___:{value:h(function(b){var a=!!c["delete"](b);return d?d.delete___(b)||a:a})},permitHostObjects___:{value:h(function(b){if(b===a)f=!0;else throw Error("bogus call to permitHostObjects___");})}})}g&&"undefined"!==typeof Proxy&&(Proxy=void 0);c.prototype=y.prototype;q.exports=c;Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!==typeof Proxy&&(Proxy=void 0),q.exports=y)}})()},{}],551:[function(a,q,p){var n=a("./hidden-store.js");
q.exports=function(){var a={};return function(k){if(("object"!==typeof k||null===k)&&"function"!==typeof k)throw Error("Weakmap-shim: Key must be object");var h=k.valueOf(a);return h&&h.identity===a?h:n(k,a)}}},{"./hidden-store.js":552}],552:[function(a,q,p){q.exports=function(a,k){var m={identity:k},h=a.valueOf;Object.defineProperty(a,"valueOf",{value:function(b){return b!==k?h.apply(this,arguments):m},writable:!0});return m}},{}],553:[function(a,q,p){var n=a("./create-store.js");q.exports=function(){var a=
n();return{get:function(k,h){k=a(k);return k.hasOwnProperty("value")?k.value:h},set:function(k,h){a(k).value=h;return this},has:function(k){return"value"in a(k)},"delete":function(k){return delete a(k).value}}}},{"./create-store.js":551}],554:[function(a,q,p){var n=a("get-canvas-context");q.exports=function(a){return n("webgl",a)}},{"get-canvas-context":235}],555:[function(a,q,p){function n(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}var k=a("../main");a=a("object-assign");
var m=k.instance();n.prototype=new k.baseCalendar;a(n.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(a,d){if("string"===typeof a)return(d=a.match(b))?d[0]:"";var c=this._validateYear(a);a=a.month();var e=""+this.toChineseMonth(c,a);d&&2>e.length&&(e="0"+e);this.isIntercalaryMonth(c,a)&&(e+="i");return e},monthNames:function(b){if("string"===typeof b){var a=b.match(g);return a?
a[0]:""}a=this._validateYear(b);b=b.month();var c="           ".split(" ")[this.toChineseMonth(a,b)-1];this.isIntercalaryMonth(a,b)&&(c=""+c);return c},monthNamesShort:function(b){if("string"===typeof b){var a=b.match(e);return a?a[0]:""}a=this._validateYear(b);b=b.month();var c="           ".split(" ")[this.toChineseMonth(a,b)-1];this.isIntercalaryMonth(a,b)&&(c=""+c);return c},parseMonth:function(b,a){b=this._validateYear(b);var c=parseInt(a);if(isNaN(c)){if(""===
a[0]){var d=!0;a=a.substring(1)}""===a[a.length-1]&&(a=a.substring(0,a.length-1));c=1+"           ".split(" ").indexOf(a)}else a=a[a.length-1],d="i"===a||"I"===a;return this.toMonthIndex(b,c,d)},dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(b,a){b.year&&(b=b.year());if("number"!==
typeof b||1888>b||2111<b)throw a.replace(/\{0\}/,this.local.name);return b},toMonthIndex:function(b,a,c){b=this.intercalaryMonth(b);if(c&&a!==b||1>a||12<a)throw k.local.invalidMonth.replace(/\{0\}/,this.local.name);return b?!c&&a<=b?a-1:a:a-1},toChineseMonth:function(b,a){b.year&&(b=b.year(),a=b.month());b=this.intercalaryMonth(b);if(0>a||a>(b?12:11))throw k.local.invalidMonth.replace(/\{0\}/,this.local.name);return b?a<b?a+1:a:a+1},intercalaryMonth:function(b){b=this._validateYear(b);return t[b-
t[0]]>>13},isIntercalaryMonth:function(b,a){b.year&&(b=b.year(),a=b.month());b=this.intercalaryMonth(b);return!!b&&b===a},leapYear:function(b){return 0!==this.intercalaryMonth(b)},weekOfYear:function(b,a,c){var d=this._validateYear(b,k.local.invalidyear);d=l[d-l[0]];d=m.newDate(d>>9&4095,d>>5&15,d&31);d.add(4-(d.dayOfWeek()||7),"d");b=this.toJD(b,a,c)-d.toJD();return 1+Math.floor(b/7)},monthsInYear:function(b){return this.leapYear(b)?13:12},daysInMonth:function(b,a){b.year&&(a=b.month(),b=b.year());
b=this._validateYear(b);b=t[b-t[0]];if(a>(b>>13?12:11))throw k.local.invalidMonth.replace(/\{0\}/,this.local.name);return b&1<<12-a?30:29},weekDay:function(b,a,c){return 6>(this.dayOfWeek(b,a,c)||7)},toJD:function(b,a,c){e=this._validate(b,e,c,k.local.invalidDate);b=this._validateYear(e.year());a=e.month();c=e.day();var d=this.isIntercalaryMonth(b,a),e=this.toChineseMonth(b,a);if("object"===typeof b)a=e||{};else{if(!("number"===typeof b&&1888<=b&&2111>=b))throw Error("Lunar year outside range 1888-2111");
if(!("number"===typeof e&&1<=e&&12>=e))throw Error("Lunar month outside range 1 - 12");if(!("number"===typeof c&&1<=c&&30>=c))throw Error("Lunar day outside range 1 - 30");if("object"===typeof d){var f=!1;a=d}else f=!!d,a={};b={year:b,month:e,day:c,isIntercalary:f}}e=b.day-1;c=t[b.year-t[0]];d=(d=c>>13)?b.month>d?b.month:b.isIntercalary?b.month:b.month-1:b.month-1;for(f=0;f<d;f++)e+=c&1<<12-f?30:29;b=l[b.year-l[0]];b=new Date(b>>9&4095,(b>>5&15)-1,(b&31)+e);a.year=b.getFullYear();a.month=1+b.getMonth();
a.day=b.getDate();return m.toJD(a.year,a.month,a.day)},fromJD:function(b){var a=m.fromJD(b),c=a.year();b=a.month();a=a.day();if("object"===typeof c)b=b||{};else{if(!("number"===typeof c&&1888<=c&&2111>=c))throw Error("Solar year outside range 1888-2111");if(!("number"===typeof b&&1<=b&&12>=b))throw Error("Solar month outside range 1 - 12");if(!("number"===typeof a&&1<=a&&31>=a))throw Error("Solar day outside range 1 - 31");c={year:c,month:b,day:a};b={}}a=l[c.year-l[0]];b.year=(c.year<<9|c.month<<
5|c.day)>=a?c.year:c.year-1;a=l[b.year-l[0]];c=Math.round((new Date(c.year,c.month-1,c.day)-new Date(a>>9&4095,(a>>5&15)-1,a&31))/864E5);var e=t[b.year-t[0]];for(a=0;13>a;a++){var f=e&1<<12-a?30:29;if(c<f)break;c-=f}e>>=13;!e||a<e?(b.isIntercalary=!1,b.month=1+a):(b.isIntercalary=a===e?!0:!1,b.month=a);b.day=1+c;c=this.toMonthIndex(b.year,b.month,b.isIntercalary);return this.newDate(b.year,c,b.day)},fromString:function(b){b=b.match(h);var a=this._validateYear(+b[1]),c=this.toMonthIndex(a,+b[2],!!b[3]);
return this.newDate(a,c,+b[4])},add:function(b,a,c){var d=b.year(),e=b.month(),f=this.isIntercalaryMonth(d,e);d=this.toChineseMonth(d,e);b=Object.getPrototypeOf(n.prototype).add.call(this,b,a,c);"y"===c&&(a=b.year(),c=b.month(),e=this.isIntercalaryMonth(a,d),f=f&&e?this.toMonthIndex(a,d,!0):this.toMonthIndex(a,d,!1),f!==c&&b.month(f));return b}});var h=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,b=/^\d?\d[iI]?/m,g=/^??[]?/m,e=/^??[]?/m;k.calendars.chinese=n;var t=
[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,
2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,
5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],l=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,
988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,
1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,
1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":569,"object-assign":455}],556:[function(a,q,p){function n(a){this.local=
this.regionalOptions[a||""]||this.regionalOptions[""]}var k=a("../main");a=a("object-assign");n.prototype=new k.baseCalendar;a(n.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:"Thout;Paopi;Hathor;Koiak;Tobi;Meshir;Paremhat;Paremoude;Pashons;Paoni;Epip;Mesori;Pi Kogi Enavot".split(";"),monthNamesShort:"Tho Pao Hath Koi Tob Mesh Pat Pad Pash Pao Epi Meso PiK".split(" "),
dayNames:"Tkyriaka Pesnau Pshoment Peftoou Ptiou Psoou Psabbaton".split(" "),dayNamesShort:"Tky Pes Psh Pef Pti Pso Psa".split(" "),dayNamesMin:"Tk Pes Psh Pef Pt Pso Psa".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,k.local.invalidYear);a=a.year()+(0>a.year()?1:0);return 3===a%4||-1===a%4},monthsInYear:function(a){this._validate(a,this.minMonth,this.minDay,k.local.invalidYear||k.regionalOptions[""].invalidYear);
return 13},weekOfYear:function(a,h,b){a=this.newDate(a,h,b);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(a,h){a=this._validate(a,h,this.minDay,k.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(13===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,h,b){return 6>(this.dayOfWeek(a,h,b)||7)},toJD:function(a,h,b){h=this._validate(a,h,b,k.local.invalidDate);a=h.year();0>a&&a++;return h.day()+30*(h.month()-1)+365*(a-1)+Math.floor(a/4)+this.jdEpoch-
1},fromJD:function(a){var h=Math.floor(a)+.5-this.jdEpoch,b=Math.floor((h-Math.floor((h+366)/1461))/365)+1;0>=b&&b--;h=Math.floor(a)+.5-this.newDate(b,1,1).toJD();a=Math.floor(h/30)+1;return this.newDate(b,a,h-30*(a-1)+1)}});k.calendars.coptic=n},{"../main":569,"object-assign":455}],557:[function(a,q,p){function n(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var k=a("../main");a=a("object-assign");n.prototype=new k.baseCalendar;a(n.prototype,{name:"Discworld",jdEpoch:1721425.5,
daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:"Ick Offle February March April May June Grune August Spune Sektober Ember December".split(" "),monthNamesShort:"Ick Off Feb Mar Apr May Jun Gru Aug Spu Sek Emb Dec".split(" "),dayNames:"Sunday Octeday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Oct Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Oc Mo Tu We Th Fr Sa".split(" "),
digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(a){this._validate(a,this.minMonth,this.minDay,k.local.invalidYear);return!1},monthsInYear:function(a){this._validate(a,this.minMonth,this.minDay,k.local.invalidYear);return 13},daysInYear:function(a){this._validate(a,this.minMonth,this.minDay,k.local.invalidYear);return 400},weekOfYear:function(a,b,g){a=this.newDate(a,b,g);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/8)+1},daysInMonth:function(a,b){a=this._validate(a,
b,this.minDay,k.local.invalidMonth);return this.daysPerMonth[a.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(a,b,g){return(this._validate(a,b,g,k.local.invalidDate).day()+1)%8},weekDay:function(a,b,g){a=this.dayOfWeek(a,b,g);return 2<=a&&6>=a},extraInfo:function(a,b,g){a=this._validate(a,b,g,k.local.invalidDate);return{century:m[Math.floor((a.year()-1)/100)+1]||""}},toJD:function(a,b,g){g=this._validate(a,b,g,k.local.invalidDate);a=g.year()+(0>g.year()?1:0);b=g.month();g=g.day();
return g+(1<b?16:0)+(2<b?32*(b-2):0)+400*(a-1)+this.jdEpoch-1},fromJD:function(a){a=Math.floor(a+.5)-Math.floor(this.jdEpoch)-1;var b=Math.floor(a/400)+1;a-=400*(b-1);a+=15<a?16:0;var g=Math.floor(a/32)+1;return this.newDate(0>=b?b-1:b,g,a-32*(g-1)+1)}});var m={20:"Fruitbat",21:"Anchovy"};k.calendars.discworld=n},{"../main":569,"object-assign":455}],558:[function(a,q,p){function n(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var k=a("../main");a=a("object-assign");n.prototype=
new k.baseCalendar;a(n.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:"Meskerem Tikemet Hidar Tahesas Tir Yekatit Megabit Miazia Genbot Sene Hamle Nehase Pagume".split(" "),monthNamesShort:"Mes Tik Hid Tah Tir Yek Meg Mia Gen Sen Ham Neh Pag".split(" "),dayNames:"Ehud Segno Maksegno Irob Hamus Arb Kidame".split(" "),dayNamesShort:"Ehu Seg Mak Iro Ham Arb Kid".split(" "),
dayNamesMin:"Eh Se Ma Ir Ha Ar Ki".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,k.local.invalidYear);a=a.year()+(0>a.year()?1:0);return 3===a%4||-1===a%4},monthsInYear:function(a){this._validate(a,this.minMonth,this.minDay,k.local.invalidYear||k.regionalOptions[""].invalidYear);return 13},weekOfYear:function(a,h,b){a=this.newDate(a,h,b);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(a,
h){a=this._validate(a,h,this.minDay,k.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(13===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,h,b){return 6>(this.dayOfWeek(a,h,b)||7)},toJD:function(a,h,b){h=this._validate(a,h,b,k.local.invalidDate);a=h.year();0>a&&a++;return h.day()+30*(h.month()-1)+365*(a-1)+Math.floor(a/4)+this.jdEpoch-1},fromJD:function(a){var h=Math.floor(a)+.5-this.jdEpoch,b=Math.floor((h-Math.floor((h+366)/1461))/365)+1;0>=b&&b--;h=Math.floor(a)+.5-this.newDate(b,
1,1).toJD();a=Math.floor(h/30)+1;return this.newDate(b,a,h-30*(a-1)+1)}});k.calendars.ethiopian=n},{"../main":569,"object-assign":455}],559:[function(a,q,p){function n(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}function k(a,b){return a-b*Math.floor(a/b)}var m=a("../main");a=a("object-assign");n.prototype=new m.baseCalendar;a(n.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",
epochs:["BAM","AM"],monthNames:"Nisan;Iyar;Sivan;Tammuz;Av;Elul;Tishrei;Cheshvan;Kislev;Tevet;Shevat;Adar;Adar II".split(";"),monthNamesShort:"Nis Iya Siv Tam Av Elu Tis Che Kis Tev She Ada Ad2".split(" "),dayNames:"Yom Rishon;Yom Sheni;Yom Shlishi;Yom Revi'i;Yom Chamishi;Yom Shishi;Yom Shabbat".split(";"),dayNamesShort:"Ris She Shl Rev Cha Shi Sha".split(" "),dayNamesMin:"Ri She Shl Re Ch Shi Sha".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){a=this._validate(a,
this.minMonth,this.minDay,m.local.invalidYear);return this._leapYear(a.year())},_leapYear:function(a){return 7>k(7*(0>a?a+1:a)+1,19)},monthsInYear:function(a){this._validate(a,this.minMonth,this.minDay,m.local.invalidYear);return this._leapYear(a.year?a.year():a)?13:12},weekOfYear:function(a,b,g){a=this.newDate(a,b,g);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(a){a=this._validate(a,this.minMonth,this.minDay,m.local.invalidYear).year();return this.toJD(-1===
a?1:a+1,7,1)-this.toJD(a,7,1)},daysInMonth:function(a,b){a.year&&(b=a.month(),a=a.year());this._validate(a,b,this.minDay,m.local.invalidMonth);return 12===b&&this.leapYear(a)?30:8===b&&5===k(this.daysInYear(a),10)?30:9===b&&3===k(this.daysInYear(a),10)?29:this.daysPerMonth[b-1]},weekDay:function(a,b,g){return 6!==this.dayOfWeek(a,b,g)},extraInfo:function(a,b,g){a=this._validate(a,b,g,m.local.invalidDate);return{yearType:(this.leapYear(a)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(a)%
10-3]}},toJD:function(a,b,g){g=this._validate(a,b,g,m.local.invalidDate);a=g.year();b=g.month();g=g.day();var e=0>=a?a+1:a;g=this.jdEpoch+this._delay1(e)+this._delay2(e)+g+1;if(7>b){for(e=7;e<=this.monthsInYear(a);e++)g+=this.daysInMonth(a,e);e=1}else e=7;for(;e<b;e++)g+=this.daysInMonth(a,e);return g},_delay1:function(a){a=Math.floor((235*a-234)/19);a=29*a+Math.floor((12084+13753*a)/25920);3>k(3*(a+1),7)&&a++;return a},_delay2:function(a){var b=this._delay1(a-1),g=this._delay1(a);return 356===this._delay1(a+
1)-g?2:382===g-b?1:0},fromJD:function(a){a=Math.floor(a)+.5;for(var b=Math.floor(98496*(a-this.jdEpoch)/35975351)-1;a>=this.toJD(-1===b?1:b+1,7,1);)b++;for(var g=a<this.toJD(b,1,1)?7:1;a>this.toJD(b,g,this.daysInMonth(b,g));)g++;a=a-this.toJD(b,g,1)+1;return this.newDate(b,g,a)}});m.calendars.hebrew=n},{"../main":569,"object-assign":455}],560:[function(a,q,p){function n(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var k=a("../main");a=a("object-assign");n.prototype=new k.baseCalendar;
a(n.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:"Muharram;Safar;Rabi' al-awwal;Rabi' al-thani;Jumada al-awwal;Jumada al-thani;Rajab;Sha'aban;Ramadan;Shawwal;Dhu al-Qi'dah;Dhu al-Hijjah".split(";"),monthNamesShort:"Muh Saf Rab1 Rab2 Jum1 Jum2 Raj Sha' Ram Shaw DhuQ DhuH".split(" "),dayNames:"Yawm al-ahad;Yawm al-ithnayn;Yawm ath-thulaathaa';Yawm al-arbi'aa';Yawm al-khams;Yawm al-jum'a;Yawm as-sabt".split(";"),
dayNamesShort:"Aha Ith Thu Arb Kha Jum Sab".split(" "),dayNamesMin:"Ah It Th Ar Kh Ju Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(a){return 11>(11*this._validate(a,this.minMonth,this.minDay,k.local.invalidYear).year()+14)%30},weekOfYear:function(a,h,b){a=this.newDate(a,h,b);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(a){return this.leapYear(a)?355:354},daysInMonth:function(a,h){a=this._validate(a,h,this.minDay,
k.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(12===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,h,b){return 5!==this.dayOfWeek(a,h,b)},toJD:function(a,h,b){b=this._validate(a,h,b,k.local.invalidDate);a=b.year();h=b.month();b=b.day();a=0>=a?a+1:a;return b+Math.ceil(29.5*(h-1))+354*(a-1)+Math.floor((3+11*a)/30)+this.jdEpoch-1},fromJD:function(a){a=Math.floor(a)+.5;var h=Math.floor((30*(a-this.jdEpoch)+10646)/10631);h=0>=h?h-1:h;var b=Math.min(12,Math.ceil((a-29-this.toJD(h,
1,1))/29.5)+1);a=a-this.toJD(h,b,1)+1;return this.newDate(h,b,a)}});k.calendars.islamic=n},{"../main":569,"object-assign":455}],561:[function(a,q,p){function n(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var k=a("../main");a=a("object-assign");n.prototype=new k.baseCalendar;a(n.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:"January February March April May June July August September October November December".split(" "),
monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,k.local.invalidYear);a=0>a.year()?a.year()+1:a.year();return 0===a%4},weekOfYear:function(a,h,b){a=this.newDate(a,h,b);a.add(4-
(a.dayOfWeek()||7),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(a,h){a=this._validate(a,h,this.minDay,k.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(2===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,h,b){return 6>(this.dayOfWeek(a,h,b)||7)},toJD:function(a,h,b){b=this._validate(a,h,b,k.local.invalidDate);a=b.year();h=b.month();b=b.day();0>a&&a++;2>=h&&(a--,h+=12);return Math.floor(365.25*(a+4716))+Math.floor(30.6001*(h+1))+b-1524.5},fromJD:function(a){var h=
Math.floor(a+.5)+1524,b=Math.floor((h-122.1)/365.25),g=Math.floor(365.25*b),e=Math.floor((h-g)/30.6001);a=e-Math.floor(14>e?1:13);b-=Math.floor(2<a?4716:4715);h=h-g-Math.floor(30.6001*e);0>=b&&b--;return this.newDate(b,a,h)}});k.calendars.julian=n},{"../main":569,"object-assign":455}],562:[function(a,q,p){function n(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}function k(a,b){return a-b*Math.floor(a/b)}var m=a("../main");a=a("object-assign");n.prototype=new m.baseCalendar;a(n.prototype,
{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17".split(" "),monthNamesShort:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17".split(" "),dayNames:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),dayNamesShort:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),dayNamesMin:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),digits:null,
dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:"Pop Uo Zip Zotz Tzec Xul Yaxkin Mol Chen Yax Zac Ceh Mac Kankin Muan Pax Kayab Cumku Uayeb".split(" "),tzolkinMonths:"Imix Ik Akbal Kan Chicchan Cimi Manik Lamat Muluc Oc Chuen Eb Ben Ix Men Cib Caban Etznab Cauac Ahau".split(" ")}},leapYear:function(a){this._validate(a,this.minMonth,this.minDay,m.local.invalidYear);return!1},formatYear:function(a){a=this._validate(a,this.minMonth,this.minDay,m.local.invalidYear).year();var b=Math.floor(a/400);
a%=400;a+=0>a?400:0;return b+"."+Math.floor(a/20)+"."+a%20},forYear:function(a){a=a.split(".");if(3>a.length)throw"Invalid Mayan year";for(var b=0,g=0;g<a.length;g++){var e=parseInt(a[g],10);if(19<Math.abs(e)||0<g&&0>e)throw"Invalid Mayan year";b=20*b+e}return b},monthsInYear:function(a){this._validate(a,this.minMonth,this.minDay,m.local.invalidYear);return 18},weekOfYear:function(a,b,g){this._validate(a,b,g,m.local.invalidDate);return 0},daysInYear:function(a){this._validate(a,this.minMonth,this.minDay,
m.local.invalidYear);return 360},daysInMonth:function(a,b){this._validate(a,b,this.minDay,m.local.invalidMonth);return 20},daysInWeek:function(){return 5},dayOfWeek:function(a,b,g){return this._validate(a,b,g,m.local.invalidDate).day()},weekDay:function(a,b,g){this._validate(a,b,g,m.local.invalidDate);return!0},extraInfo:function(a,b,g){b=this._validate(a,b,g,m.local.invalidDate).toJD();a=this._toHaab(b);b=this._toTzolkin(b);return{haabMonthName:this.local.haabMonths[a[0]-1],haabMonth:a[0],haabDay:a[1],
tzolkinDayName:this.local.tzolkinMonths[b[0]-1],tzolkinDay:b[0],tzolkinTrecena:b[1]}},_toHaab:function(a){a-=this.jdEpoch;a=k(a+8+340,365);return[Math.floor(a/20)+1,k(a,20)]},_toTzolkin:function(a){a-=this.jdEpoch;return[k(a+20-1,20)+1,k(a+4-1,13)+1]},toJD:function(a,b,g){a=this._validate(a,b,g,m.local.invalidDate);return a.day()+20*a.month()+360*a.year()+this.jdEpoch},fromJD:function(a){a=Math.floor(a)+.5-this.jdEpoch;var b=Math.floor(a/360);a%=360;a+=0>a?360:0;return this.newDate(b,Math.floor(a/
20),a%20)}});m.calendars.mayan=n},{"../main":569,"object-assign":455}],563:[function(a,q,p){function n(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var k=a("../main");a=a("object-assign");n.prototype=new k.baseCalendar;var m=k.instance("gregorian");a(n.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:"Chet Vaisakh Jeth Harh Sawan Bhadon Assu Katak Maghar Poh Magh Phagun".split(" "),
monthNamesShort:"Che Vai Jet Har Saw Bha Ass Kat Mgr Poh Mgh Pha".split(" "),dayNames:"Somvaar Mangalvar Budhvaar Veervaar Shukarvaar Sanicharvaar Etvaar".split(" "),dayNamesShort:"Som Mangal Budh Veer Shukar Sanichar Et".split(" "),dayNamesMin:"So Ma Bu Ve Sh Sa Et".split(" "),digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,k.local.invalidYear||k.regionalOptions[""].invalidYear);return m.leapYear(a.year()+(1>a.year()?1:0)+
1469)},weekOfYear:function(a,b,g){a=this.newDate(a,b,g);a.add(1-(a.dayOfWeek()||7),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(a,b){a=this._validate(a,b,this.minDay,k.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(12===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,b,g){return 6>(this.dayOfWeek(a,b,g)||7)},toJD:function(a,b,g){b=this._validate(a,b,g,k.local.invalidMonth);a=b.year();0>a&&a++;g=b.day();for(var e=1;e<b.month();e++)g+=this.daysPerMonth[e-
1];return g+m.toJD(a+1468,3,13)},fromJD:function(a){a=Math.floor(a+.5);for(var b=Math.floor((a-(this.jdEpoch-1))/366);a>=this.toJD(b+1,1,1);)b++;a=a-Math.floor(this.toJD(b,1,1)+.5)+1;for(var g=1;a>this.daysInMonth(b,g);)a-=this.daysInMonth(b,g),g++;return this.newDate(b,g,a)}});k.calendars.nanakshahi=n},{"../main":569,"object-assign":455}],564:[function(a,q,p){function n(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var k=a("../main");a=a("object-assign");n.prototype=new k.baseCalendar;
a(n.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:"Baisakh Jestha Ashadh Shrawan Bhadra Ashwin Kartik Mangsir Paush Mangh Falgun Chaitra".split(" "),monthNamesShort:"Bai Je As Shra Bha Ash Kar Mang Pau Ma Fal Chai".split(" "),dayNames:"Aaitabaar Sombaar Manglbaar Budhabaar Bihibaar Shukrabaar Shanibaar".split(" "),dayNamesShort:"Aaita Som Mangl Budha Bihi Shukra Shani".split(" "),
dayNamesMin:"Aai So Man Bu Bi Shu Sha".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(a){return this.daysInYear(a)!==this.daysPerYear},weekOfYear:function(a,h,b){a=this.newDate(a,h,b);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(a){a=this._validate(a,this.minMonth,this.minDay,k.local.invalidYear).year();if("undefined"===typeof this.NEPALI_CALENDAR_DATA[a])return this.daysPerYear;for(var h=0,b=this.minMonth;12>=b;b++)h+=
this.NEPALI_CALENDAR_DATA[a][b];return h},daysInMonth:function(a,h){a.year&&(h=a.month(),a=a.year());this._validate(a,h,this.minDay,k.local.invalidMonth);return"undefined"===typeof this.NEPALI_CALENDAR_DATA[a]?this.daysPerMonth[h-1]:this.NEPALI_CALENDAR_DATA[a][h]},weekDay:function(a,h,b){return 6!==this.dayOfWeek(a,h,b)},toJD:function(a,h,b){b=this._validate(a,h,b,k.local.invalidDate);a=b.year();h=b.month();b=b.day();var g=k.instance(),e=0,t=h,l=a;this._createMissingCalendarData(a);a-=9<t||9===t&&
b>=this.NEPALI_CALENDAR_DATA[l][0]?56:57;9!==h&&(e=b,t--);for(;9!==t;)0>=t&&(t=12,l--),e+=this.NEPALI_CALENDAR_DATA[l][t],t--;9===h?(e+=b-this.NEPALI_CALENDAR_DATA[l][0],0>e&&(e+=g.daysInYear(a))):e+=this.NEPALI_CALENDAR_DATA[l][9]-this.NEPALI_CALENDAR_DATA[l][0];return g.newDate(a,1,1).add(e,"d").toJD()},fromJD:function(a){a=k.instance().fromJD(a);var h=a.year();a=a.dayOfYear();h+=56;this._createMissingCalendarData(h);for(var b=9,g=this.NEPALI_CALENDAR_DATA[h][b]-this.NEPALI_CALENDAR_DATA[h][0]+
1;a>g;)b++,12<b&&(b=1,h++),g+=this.NEPALI_CALENDAR_DATA[h][b];return this.newDate(h,b,this.NEPALI_CALENDAR_DATA[h][b]-(g-a))},_createMissingCalendarData:function(a){var h=this.daysPerMonth.slice(0);h.unshift(17);for(var b=a-1;b<a+2;b++)"undefined"===typeof this.NEPALI_CALENDAR_DATA[b]&&(this.NEPALI_CALENDAR_DATA[b]=h)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,
31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,
32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,
31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2E3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,
31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,
31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,
31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,
31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,
31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,
31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,
31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,
31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,
31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}});k.calendars.nepali=n},{"../main":569,"object-assign":455}],565:[function(a,q,p){function n(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var k=a("../main");a=a("object-assign");
n.prototype=new k.baseCalendar;a(n.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:"Farvardin Ordibehesht Khordad Tir Mordad Shahrivar Mehr Aban Azar Day Bahman Esfand".split(" "),monthNamesShort:"Far Ord Kho Tir Mor Sha Meh Aba Aza Day Bah Esf".split(" "),dayNames:"Yekshambe Doshambe Seshambe Chharshambe Panjshambe Jom'e Shambe".split(" "),
dayNamesShort:"Yek Do Se Ch Panj Jom Sha".split(" "),dayNamesMin:"Ye Do Se Ch Pa Jo Sh".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,k.local.invalidYear);return 682>682*((a.year()-(0<a.year()?474:473))%2820+512)%2816},weekOfYear:function(a,h,b){a=this.newDate(a,h,b);a.add(-((a.dayOfWeek()+1)%7),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(a,h){a=this._validate(a,h,this.minDay,k.local.invalidMonth);
return this.daysPerMonth[a.month()-1]+(12===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,h,b){return 5!==this.dayOfWeek(a,h,b)},toJD:function(a,h,b){b=this._validate(a,h,b,k.local.invalidDate);a=b.year();h=b.month();b=b.day();a-=0<=a?474:473;var g=474+(a-2820*Math.floor(a/2820));return b+(7>=h?31*(h-1):30*(h-1)+6)+Math.floor((682*g-110)/2816)+365*(g-1)+1029983*Math.floor(a/2820)+this.jdEpoch-1},fromJD:function(a){a=Math.floor(a)+.5;var h=a-this.toJD(475,1,1),b=Math.floor(h/1029983);
h-=1029983*Math.floor(h/1029983);var g=2820;1029982!==h&&(g=Math.floor(h/366),g=Math.floor((2134*g+2816*(h-366*Math.floor(h/366))+2815)/1028522)+g+1);b=g+2820*b+474;b=0>=b?b-1:b;h=a-this.toJD(b,1,1)+1;h=186>=h?Math.ceil(h/31):Math.ceil((h-6)/30);a=a-this.toJD(b,h,1)+1;return this.newDate(b,h,a)}});k.calendars.persian=n;k.calendars.jalali=n},{"../main":569,"object-assign":455}],566:[function(a,q,p){function n(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var k=a("../main");a=
a("object-assign");var m=k.instance();n.prototype=new k.baseCalendar;a(n.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,k.local.invalidYear);a=this._t2gYear(a.year());return m.leapYear(a)},weekOfYear:function(a,b,g){b=this._validate(a,this.minMonth,this.minDay,k.local.invalidYear);a=this._t2gYear(b.year());return m.weekOfYear(a,b.month(),b.day())},daysInMonth:function(a,b){a=this._validate(a,b,
this.minDay,k.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(2===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,b,g){return 6>(this.dayOfWeek(a,b,g)||7)},toJD:function(a,b,g){b=this._validate(a,b,g,k.local.invalidDate);a=this._t2gYear(b.year());return m.toJD(a,b.month(),b.day())},fromJD:function(a){a=m.fromJD(a);var b=this._g2tYear(a.year());return this.newDate(b,a.month(),a.day())},_t2gYear:function(a){return a+this.yearsOffset+(a>=-this.yearsOffset&&-1>=a?1:0)},_g2tYear:function(a){return a-
this.yearsOffset-(1<=a&&a<=this.yearsOffset?1:0)}});k.calendars.taiwan=n},{"../main":569,"object-assign":455}],567:[function(a,q,p){function n(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var k=a("../main");a=a("object-assign");var m=k.instance();n.prototype=new k.baseCalendar;a(n.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE",
"BE"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,k.local.invalidYear);
a=this._t2gYear(a.year());return m.leapYear(a)},weekOfYear:function(a,b,g){b=this._validate(a,this.minMonth,this.minDay,k.local.invalidYear);a=this._t2gYear(b.year());return m.weekOfYear(a,b.month(),b.day())},daysInMonth:function(a,b){a=this._validate(a,b,this.minDay,k.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(2===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,b,g){return 6>(this.dayOfWeek(a,b,g)||7)},toJD:function(a,b,g){b=this._validate(a,b,g,k.local.invalidDate);a=
this._t2gYear(b.year());return m.toJD(a,b.month(),b.day())},fromJD:function(a){a=m.fromJD(a);var b=this._g2tYear(a.year());return this.newDate(b,a.month(),a.day())},_t2gYear:function(a){return a-this.yearsOffset-(1<=a&&a<=this.yearsOffset?1:0)},_g2tYear:function(a){return a+this.yearsOffset+(a>=-this.yearsOffset&&-1>=a?1:0)}});k.calendars.thai=n},{"../main":569,"object-assign":455}],568:[function(a,q,p){function n(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var k=a("../main");
a=a("object-assign");n.prototype=new k.baseCalendar;a(n.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:"Al-Muharram;Safar;Rabi' al-awwal;Rabi' Al-Thani;Jumada Al-Awwal;Jumada Al-Thani;Rajab;Sha'aban;Ramadan;Shawwal;Dhu al-Qi'dah;Dhu al-Hijjah".split(";"),monthNamesShort:"Muh Saf Rab1 Rab2 Jum1 Jum2 Raj Sha' Ram Shaw DhuQ DhuH".split(" "),dayNames:"Yawm al-Ahad;Yawm al-Ithnain;Yawm al-Thalth;Yawm al-Arba;Yawm al-Khams;Yawm al-Juma;Yawm al-Sabt".split(";"),
dayNamesMin:"Ah Ith Th Ar Kh Ju Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,k.local.invalidYear);return 355===this.daysInYear(a.year())},weekOfYear:function(a,b,g){a=this.newDate(a,b,g);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(a){for(var b=0,g=1;12>=g;g++)b+=this.daysInMonth(a,g);return b},daysInMonth:function(a,b){a=this._validate(a,b,this.minDay,k.local.invalidMonth).toJD()-
24E5+.5;for(var g=b=0;g<m.length;g++){if(m[g]>a)return m[b]-m[b-1];b++}return 30},weekDay:function(a,b,g){return 5!==this.dayOfWeek(a,b,g)},toJD:function(a,b,g){a=this._validate(a,b,g,k.local.invalidDate);b=12*(a.year()-1)+a.month()-15292;return a.day()+m[b-1]-1+24E5-.5},fromJD:function(a){a=a-24E5+.5;for(var b=0,g=0;g<m.length&&!(m[g]>a);g++)b++;g=b+15292;var e=Math.floor((g-1)/12);return this.newDate(e+1,g-12*e,a-m[b-1]+1)},isValid:function(a,b,g){var e=k.baseCalendar.prototype.isValid.apply(this,
arguments);e&&(a=null!=a.year?a.year:a,e=1276<=a&&1500>=a);return e},_validate:function(a,b,g,e){var h=k.baseCalendar.prototype._validate.apply(this,arguments);if(1276>h.year||1500<h.year)throw e.replace(/\{0\}/,this.local.name);return h}});k.calendars.ummalqura=n;var m=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,
1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,
4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,
7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,
10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,
12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,
15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,
17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,
20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,
22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,
25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,
27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,
30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,
32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,
35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,
37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,
40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,
42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,
45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,
47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,
50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,
52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,
55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,
57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,
60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,
62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,
65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,
67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68E3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,
70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,
72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,
74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,
77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,
79930,79960,79990]},{"../main":569,"object-assign":455}],569:[function(a,q,p){function n(){this.regionalOptions=[];this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"};this.local=this.regionalOptions[""];this.calendars={};this._localCals={}}function k(b,a,h,f){this._calendar=b;this._year=a;this._month=h;this._day=f;if(0===this._calendar._validateLevel&&
!this._calendar.isValid(this._year,this._month,this._day))throw(g.local.invalidDate||g.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);}function m(b,a){b=""+b;return"000000".substring(0,a-b.length)+b}function h(){this.shortYearCutoff="+10"}function b(b){this.local=this.regionalOptions[b]||this.regionalOptions[""]}a=a("object-assign");a(n.prototype,{instance:function(b,a){b=(b||"gregorian").toLowerCase();a=a||"";var e=this._localCals[b+"-"+a];!e&&this.calendars[b]&&(e=new this.calendars[b](a),
this._localCals[b+"-"+a]=e);if(!e)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,b);return e},newDate:function(b,a,g,f,d){f=(null!=b&&b.year?b.calendar():"string"===typeof f?this.instance(f,d):f)||this.instance();return f.newDate(b,a,g)},substituteDigits:function(b){return function(a){return(a+"").replace(/[0-9]/g,function(a){return b[a]})}},substituteChineseDigits:function(b,a){return function(e){for(var f="",d=0;0<e;){var c=e%10;f=(0===c?"":b[c]+a[d])+
f;d++;e=Math.floor(e/10)}0===f.indexOf(b[1]+a[1])&&(f=f.substr(1));return f||b[0]}}});a(k.prototype,{newDate:function(b,a,g){return this._calendar.newDate(null==b?this:b,a,g)},year:function(b){return 0===arguments.length?this._year:this.set(b,"y")},month:function(b){return 0===arguments.length?this._month:this.set(b,"m")},day:function(b){return 0===arguments.length?this._day:this.set(b,"d")},date:function(b,a,h){if(!this._calendar.isValid(b,a,h))throw(g.local.invalidDate||g.regionalOptions[""].invalidDate).replace(/\{0\}/,
this._calendar.local.name);this._year=b;this._month=a;this._day=h;return this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},
dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(b,a){return this._calendar.add(this,b,a)},set:function(b,a){return this._calendar.set(this,b,a)},compareTo:function(b){if(this._calendar.name!==b._calendar.name)throw(g.local.differentCalendars||g.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,b._calendar.local.name);
b=this._year!==b._year?this._year-b._year:this._month!==b._month?this.monthOfYear()-b.monthOfYear():this._day-b._day;return 0===b?0:0>b?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(b){return this._calendar.fromJD(b)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(b){return this._calendar.fromJSDate(b)},toString:function(){return(0>this.year()?"-":"")+m(Math.abs(this.year()),4)+"-"+m(this.month(),2)+
"-"+m(this.day(),2)}});a(h.prototype,{_validateLevel:0,newDate:function(b,a,h){if(null==b)return this.today();b.year&&(this._validate(b,a,h,g.local.invalidDate||g.regionalOptions[""].invalidDate),h=b.day(),a=b.month(),b=b.year());return new k(this,b,a,h)},today:function(){return this.fromJSDate(new Date)},epoch:function(b){return 0>this._validate(b,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear).year()?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(b){b=
this._validate(b,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return(0>b.year()?"-":"")+m(Math.abs(b.year()),4)},monthsInYear:function(b){this._validate(b,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return 12},monthOfYear:function(b,a){b=this._validate(b,a,this.minDay,g.local.invalidMonth||g.regionalOptions[""].invalidMonth);return(b.month()+this.monthsInYear(b)-this.firstMonth)%this.monthsInYear(b)+this.minMonth},fromMonthOfYear:function(b,
a){a=(a+this.firstMonth-2*this.minMonth)%this.monthsInYear(b)+this.minMonth;this._validate(b,a,this.minDay,g.local.invalidMonth||g.regionalOptions[""].invalidMonth);return a},daysInYear:function(b){b=this._validate(b,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return this.leapYear(b)?366:365},dayOfYear:function(b,a,h){b=this._validate(b,a,h,g.local.invalidDate||g.regionalOptions[""].invalidDate);return b.toJD()-this.newDate(b.year(),this.fromMonthOfYear(b.year(),
this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(b,a,h){b=this._validate(b,a,h,g.local.invalidDate||g.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(b))+2)%this.daysInWeek()},extraInfo:function(b,a,h){this._validate(b,a,h,g.local.invalidDate||g.regionalOptions[""].invalidDate);return{}},add:function(b,a,h){this._validate(b,this.minMonth,this.minDay,g.local.invalidDate||g.regionalOptions[""].invalidDate);return this._correctAdd(b,this._add(b,a,
h),a,h)},_add:function(b,a,g){this._validateLevel++;if("d"===g||"w"===g){a=b.toJD()+a*("w"===g?this.daysInWeek():1);var e=b.calendar().fromJD(a);this._validateLevel--;return[e.year(),e.month(),e.day()]}try{var d=b.year()+("y"===g?a:0),c=b.monthOfYear()+("m"===g?a:0);e=b.day();if("y"===g)b.month()!==this.fromMonthOfYear(d,c)&&(c=this.newDate(d,b.month(),this.minDay).monthOfYear()),c=Math.min(c,this.monthsInYear(d)),e=Math.min(e,this.daysInMonth(d,this.fromMonthOfYear(d,c)));else if("m"===g){for(;c<
this.minMonth;)d--,c+=this.monthsInYear(d);for(var h=this.monthsInYear(d);c>h-1+this.minMonth;)d++,c-=h,h=this.monthsInYear(d);e=Math.min(e,this.daysInMonth(d,this.fromMonthOfYear(d,c)))}var k=[d,this.fromMonthOfYear(d,c),e];this._validateLevel--;return k}catch(v){throw this._validateLevel--,v;}},_correctAdd:function(b,a,g,f){this.hasYearZero||"y"!==f&&"m"!==f||0!==a[0]&&0<b.year()===0<a[0]||(a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),
"d"]}[f],a=this._add(b,g*a[0]+(0>g?-1:1)*a[1],a[2]));return b.date(a[0],a[1],a[2])},set:function(b,a,h){this._validate(b,this.minMonth,this.minDay,g.local.invalidDate||g.regionalOptions[""].invalidDate);var e="y"===h?a:b.year(),d="m"===h?a:b.month();a="d"===h?a:b.day();if("y"===h||"m"===h)a=Math.min(a,this.daysInMonth(e,d));return b.date(e,d,a)},isValid:function(b,a,g){this._validateLevel++;var e=this.hasYearZero||0!==b;e&&(b=this.newDate(b,a,this.minDay),e=a>=this.minMonth&&a-this.minMonth<this.monthsInYear(b)&&
g>=this.minDay&&g-this.minDay<this.daysInMonth(b));this._validateLevel--;return e},toJSDate:function(b,a,h){b=this._validate(b,a,h,g.local.invalidDate||g.regionalOptions[""].invalidDate);return g.instance().fromJD(this.toJD(b)).toJSDate()},fromJSDate:function(b){return this.fromJD(g.instance().fromJSDate(b).toJD())},_validate:function(b,a,h,f){if(b.year){if(0===this._validateLevel&&this.name!==b.calendar().name)throw(g.local.differentCalendars||g.regionalOptions[""].differentCalendars).replace(/\{0\}/,
this.local.name).replace(/\{1\}/,b.calendar().local.name);return b}try{this._validateLevel++;if(1===this._validateLevel&&!this.isValid(b,a,h))throw f.replace(/\{0\}/,this.local.name);var d=this.newDate(b,a,h);this._validateLevel--;return d}catch(c){throw this._validateLevel--,c;}}});b.prototype=new h;a(b.prototype,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE",
"CE"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){b=this._validate(b,this.minMonth,this.minDay,g.local.invalidYear||
g.regionalOptions[""].invalidYear);b=b.year()+(0>b.year()?1:0);return 0===b%4&&(0!==b%100||0===b%400)},weekOfYear:function(b,a,g){b=this.newDate(b,a,g);b.add(4-(b.dayOfWeek()||7),"d");return Math.floor((b.dayOfYear()-1)/7)+1},daysInMonth:function(b,a){b=this._validate(b,a,this.minDay,g.local.invalidMonth||g.regionalOptions[""].invalidMonth);return this.daysPerMonth[b.month()-1]+(2===b.month()&&this.leapYear(b.year())?1:0)},weekDay:function(b,a,g){return 6>(this.dayOfWeek(b,a,g)||7)},toJD:function(b,
a,h){h=this._validate(b,a,h,g.local.invalidDate||g.regionalOptions[""].invalidDate);b=h.year();a=h.month();h=h.day();0>b&&b++;3>a&&(a+=12,b--);var e=Math.floor(b/100);return Math.floor(365.25*(b+4716))+Math.floor(30.6001*(a+1))+h+(2-e+Math.floor(e/4))-1524.5},fromJD:function(b){b=Math.floor(b+.5);var a=Math.floor((b-1867216.25)/36524.25);a=b+1+a-Math.floor(a/4);var e=a+1524;b=Math.floor((e-122.1)/365.25);var f=Math.floor(365.25*b);a=Math.floor((e-f)/30.6001);e=e-f-Math.floor(30.6001*a);a-=13.5<a?
13:1;b-=2.5<a?4716:4715;0>=b&&b--;return this.newDate(b,a,e)},toJSDate:function(b,a,h){b=this._validate(b,a,h,g.local.invalidDate||g.regionalOptions[""].invalidDate);b=new Date(b.year(),b.month()-1,b.day());b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0);b.setHours(12<b.getHours()?b.getHours()+2:0);return b},fromJSDate:function(b){return this.newDate(b.getFullYear(),b.getMonth()+1,b.getDate())}});var g=q.exports=new n;g.cdate=k;g.baseCalendar=h;g.calendars.gregorian=b},{"object-assign":455}],
570:[function(a,q,p){q=a("object-assign");var n=a("./main");q(n.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});n.local=n.regionalOptions[""];q(n.cdate.prototype,{formatDate:function(a,m){"string"!==typeof a&&(m=a,a="");return this._calendar.formatDate(a||
"",this,m)}});q(n.baseCalendar.prototype,{UNIX_EPOCH:n.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:n.instance().jdEpoch,TICKS_PER_DAY:864E9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(a,m,h){"string"!==typeof a&&(h=m,m=a,a="");if(!m)return"";
if(m.calendar()!==this)throw n.local.invalidFormat||n.regionalOptions[""].invalidFormat;a=a||this.local.dateFormat;h=h||{};for(var b=h.dayNamesShort||this.local.dayNamesShort,g=h.dayNames||this.local.dayNames,e=h.monthNumbers||this.local.monthNumbers,k=h.monthNamesShort||this.local.monthNamesShort,l=h.monthNames||this.local.monthNames,f=function(b,c){for(var d=1;x+d<a.length&&a.charAt(x+d)===b;)d++;x+=d-1;return 1<Math.floor(d/(c||1))},d=function(b,a,c,d){a=""+a;if(f(b,d))for(;a.length<c;)a="0"+a;
return a},c=function(b,a,c,d){return f(b)?d[a]:c[a]},r=this,u=function(b){return"function"===typeof e?e.call(r,b,f("m")):y(d("m",b.month(),2))},v=function(b,a){return a?"function"===typeof l?l.call(r,b):l[b.month()-r.minMonth]:"function"===typeof k?k.call(r,b):k[b.month()-r.minMonth]},w=this.local.digits,y=function(b){return h.localNumbers&&w?w(b):b},A="",z=!1,x=0;x<a.length;x++)if(z)"'"!==a.charAt(x)||f("'")?A+=a.charAt(x):z=!1;else switch(a.charAt(x)){case "d":A+=y(d("d",m.day(),2));break;case "D":A+=
c("D",m.dayOfWeek(),b,g);break;case "o":A+=d("o",m.dayOfYear(),3);break;case "w":A+=d("w",m.weekOfYear(),2);break;case "m":A+=u(m);break;case "M":A+=v(m,f("M"));break;case "y":A+=f("y",2)?m.year():(10>m.year()%100?"0":"")+m.year()%100;break;case "Y":f("Y",2);A+=m.formatYear();break;case "J":A+=m.toJD();break;case "@":A+=(m.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case "!":A+=(m.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case "'":f("'")?A+="'":z=!0;break;default:A+=a.charAt(x)}return A},
parseDate:function(a,m,h){if(null==m)throw n.local.invalidArguments||n.regionalOptions[""].invalidArguments;m="object"===typeof m?m.toString():m+"";if(""===m)return null;a=a||this.local.dateFormat;h=h||{};var b=h.shortYearCutoff||this.shortYearCutoff;b="string"!==typeof b?b:this.today().year()%100+parseInt(b,10);for(var g=h.dayNamesShort||this.local.dayNamesShort,e=h.dayNames||this.local.dayNames,k=h.parseMonth||this.local.parseMonth,l=h.monthNumbers||this.local.monthNumbers,f=h.monthNamesShort||
this.local.monthNamesShort,d=h.monthNames||this.local.monthNames,c=h=-1,r=-1,u=-1,v=-1,w=!1,y=!1,A=function(b,c){for(var d=1;F+d<a.length&&a.charAt(F+d)===b;)d++;F+=d-1;return 1<Math.floor(d/(c||1))},z=function(b,a){a=A(b,a);b=[2,3,a?4:2,a?4:2,10,11,20]["oyYJ@!".indexOf(b)+1];b=new RegExp("^-?\\d{1,"+b+"}");b=m.substring(E).match(b);if(!b)throw(n.local.missingNumberAt||n.regionalOptions[""].missingNumberAt).replace(/\{0\}/,E);E+=b[0].length;return parseInt(b[0],10)},x=this,p=function(){if("function"===
typeof l){A("m");var b=l.call(x,m.substring(E));E+=b.length;return b}return z("m")},q=function(b,a,c,d){b=A(b,d)?c:a;for(a=0;a<b.length;a++)if(m.substr(E,b[a].length).toLowerCase()===b[a].toLowerCase())return E+=b[a].length,a+x.minMonth;throw(n.local.unknownNameAt||n.regionalOptions[""].unknownNameAt).replace(/\{0\}/,E);},D=function(){if("function"===typeof d){var b=A("M")?d.call(x,m.substring(E)):f.call(x,m.substring(E));E+=b.length;return b}return q("M",f,d)},G=function(){if(m.charAt(E)!==a.charAt(F))throw(n.local.unexpectedLiteralAt||
n.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,E);E++},E=0,F=0;F<a.length;F++)if(y)"'"!==a.charAt(F)||A("'")?G():y=!1;else switch(a.charAt(F)){case "d":u=z("d");break;case "D":q("D",g,e);break;case "o":v=z("o");break;case "w":z("w");break;case "m":r=p();break;case "M":r=D();break;case "y":c=F;w=!A("y",2);F=c;c=z("y",2);break;case "Y":c=z("Y",2);break;case "J":h=z("J")+.5;"."===m.charAt(E)&&(E++,z("J"));break;case "@":h=z("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case "!":h=z("!")/this.TICKS_PER_DAY+
this.TICKS_EPOCH;break;case "*":E=m.length;break;case "'":A("'")?G():y=!0;break;default:G()}if(E<m.length)throw n.local.unexpectedText||n.regionalOptions[""].unexpectedText;-1===c?c=this.today().year():100>c&&w&&(c+=-1===b?1900:this.today().year()-this.today().year()%100-(c<=b?0:100));"string"===typeof r&&(r=k.call(this,c,r));if(-1<v)for(r=1,u=v,b=this.daysInMonth(c,r);u>b;b=this.daysInMonth(c,r))r++,u-=b;return-1<h?this.fromJD(h):this.newDate(c,r,u)},determineDate:function(a,m,h,b,g){h&&"object"!==
typeof h&&(g=b,b=h,h=null);"string"!==typeof b&&(g=b,b="");m=m?m.newDate():null;if(null==a)a=m;else{if("string"===typeof a)a:{try{var e=this.parseDate(b,a,g);break a}catch(t){}a=a.toLowerCase();h=(a.match(/^c/)&&h?h.newDate():null)||this.today();b=/([+-]?[0-9]+)\s*(d|w|m|y)?/g;for(g=b.exec(a);g;)h.add(parseInt(g[1],10),g[2]||"d"),g=b.exec(a);e=h}else e="number"===typeof a?isNaN(a)||Infinity===a||-Infinity===a?m:this.today().add(a,"d"):this.newDate(a);a=e}return a}})},{"./main":569,"object-assign":455}],
571:[function(a,q,p){q.exports=a("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da \x3d _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db \x3d _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da \x3e\x3d 0) !\x3d\x3d (_inline_1_db \x3e\x3d 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":148}],572:[function(a,q,p){q.exports=function(a,m){var h=[];m=+m||0;n(a.hi(a.shape[0]-1),h,m);return h};var n=a("./lib/zc-core")},
{"./lib/zc-core":571}],573:[function(a,q,p){q.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],574:[function(a,q,p){p=
a("./arrow_paths");var n=a("../../plots/font_attributes"),k=a("../../plots/cartesian/constants");a=a("../../plot_api/plot_template").templatedArray;q.exports=a("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:n({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",
min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},
borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:p.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:p.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},
startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",k.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",
values:["pixel",k.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",k.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",k.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",
values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:n({editType:"arraydraw"}),
editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../plot_api/plot_template":754,"../../plots/cartesian/constants":770,"../../plots/font_attributes":790,"./arrow_paths":573}],575:[function(a,q,p){function n(b){m.filterVisible(b._fullLayout.annotations).forEach(function(a){var e=h.getFromId(b,a.xref),g=h.getFromId(b,a.yref);a._extremes={};e&&k(a,e);g&&k(a,g)})}function k(b,a){var e=a._id,g=e.charAt(0),
f=b[g],d=b["a"+g],c=b["_"+g+"padplus"],k=b["_"+g+"padminus"],m={x:1,y:-1}[g]*b[g+"shift"],n=3*b.arrowsize*b.arrowwidth||0,w=n+m,y=n-m,A=3*b.startarrowsize*b.arrowwidth||0;n=A+m;m=A-m;b["a"+g+"ref"]===b[g+"ref"]?(g=h.findExtremes(a,[a.r2c(f)],{ppadplus:w,ppadminus:y}),a=h.findExtremes(a,[a.r2c(d)],{ppadplus:Math.max(c,n),ppadminus:Math.max(k,m)}),a={min:[g.min[0],a.min[0]],max:[g.max[0],a.max[0]]}):(n=d?n+d:n,m=d?m-d:m,a=h.findExtremes(a,[a.r2c(f)],{ppadplus:Math.max(c,w,n),ppadminus:Math.max(k,y,
m)}));b._extremes[e]=a}var m=a("../../lib"),h=a("../../plots/cartesian/axes"),b=a("./draw").draw;q.exports=function(a){if(m.filterVisible(a._fullLayout.annotations).length&&a._fullData.length)return m.syncOrAsync([b,n],a)}},{"../../lib":716,"../../plots/cartesian/axes":764,"./draw":580}],576:[function(a,q,p){function n(b,a){b=b._fullLayout.annotations;var e=[],g=[],f=[],d=(a||[]).length,c,h,m;for(c=0;c<b.length;c++){var n=b[c];if(m=n.clicktoshow){for(h=0;h<d;h++){var w=a[h];var y=w.xaxis;var A=w.yaxis;
if(y._id===n.xref&&A._id===n.yref&&y.d2r(w.x)===k(n._xclick,y)&&A.d2r(w.y)===k(n._yclick,A)){w=n.visible?"onout"===m?g:f:e;w.push(c);break}}h===d&&n.visible&&"onout"===m&&g.push(c)}}return{on:e,off:g,explicitOff:f}}function k(b,a){return"log"===a.type?a.l2r(b):a.d2r(b)}var m=a("../../lib"),h=a("../../registry"),b=a("../../plot_api/plot_template").arrayEditor;q.exports={hasClickToShow:function(b,a){b=n(b,a);return 0<b.on.length||0<b.explicitOff.length},onClick:function(a,e){var g=n(a,e);e=g.on;g=g.off.concat(g.explicitOff);
var k={},f=a._fullLayout.annotations,d;if(e.length||g.length){for(d=0;d<e.length;d++){var c=b(a.layout,"annotations",f[e[d]]);c.modifyItem("visible",!0);m.extendFlat(k,c.getUpdateObj())}for(d=0;d<g.length;d++)c=b(a.layout,"annotations",f[g[d]]),c.modifyItem("visible",!1),m.extendFlat(k,c.getUpdateObj());return h.call("update",a,{},k)}}}},{"../../lib":716,"../../plot_api/plot_template":754,"../../registry":845}],577:[function(a,q,p){var n=a("../../lib"),k=a("../color");q.exports=function(a,h,b,g){g("opacity");
a=g("bgcolor");var e=g("bordercolor");e=k.opacity(e);g("borderpad");var t=g("borderwidth"),l=g("showarrow");g("text",l?" ":b._dfltTitle.annotation);g("textangle");n.coerceFont(g,"font",b.font);g("width");g("align");g("height")&&g("valign");if(l){l=g("arrowside");if(-1!==l.indexOf("end")){var f=g("arrowhead");var d=g("arrowsize")}-1!==l.indexOf("start")&&(g("startarrowhead",f),g("startarrowsize",d));g("arrowcolor",e?h.bordercolor:k.defaultLine);g("arrowwidth",2*(e&&t||1));g("standoff");g("startstandoff")}h=
g("hovertext");b=b.hoverlabel||{};h&&(a=g("hoverlabel.bgcolor",b.bgcolor||(k.opacity(a)?k.rgb(a):k.defaultLine)),a=g("hoverlabel.bordercolor",b.bordercolor||k.contrast(a)),n.coerceFont(g,"hoverlabel.font",{family:b.font.family,size:b.font.size,color:b.font.color||a}));g("captureevents",!!h)}},{"../../lib":716,"../color":591}],578:[function(a,q,p){var n=a("fast-isnumeric"),k=a("../../lib/to_log_range");q.exports=function(a,h,b,g){function e(b){var a=l[b];a=t?k(a,h.range):Math.pow(10,a);n(a)||(a=null);
g(f+b,a)}h=h||{};var t="log"===b&&"linear"===h.type;b="linear"===b&&"log"===h.type;if(t||b){a=a._fullLayout.annotations;b=h._id.charAt(0);for(var l,f,d=0;d<a.length;d++)l=a[d],f="annotations["+d+"].",l[b+"ref"]===h._id&&e(b),l["a"+b+"ref"]===h._id&&e("a"+b)}}},{"../../lib/to_log_range":742,"fast-isnumeric":228}],579:[function(a,q,p){function n(a,h,l){function e(b,c){return k.coerce(a,h,g,b,c)}var d=e("visible"),c=e("clicktoshow");if(d||c){b(a,h,l,e);d=h.showarrow;var t=["x","y"],n=[-10,-30];l={_fullLayout:l};
for(var v=0;2>v;v++){var w=t[v],y=m.coerceRef(a,h,l,w,"","paper");"paper"!==y&&m.getFromId(l,y)._annIndices.push(h._index);m.coercePosition(h,l,e,y,w,.5);if(d){var A="a"+w,z=m.coerceRef(a,h,l,A,"pixel");"pixel"!==z&&z!==y&&(z=h[A]="pixel");m.coercePosition(h,l,e,z,A,"pixel"===z?n[v]:.4)}e(w+"anchor");e(w+"shift")}k.noneOrAll(a,h,["x","y"]);d&&k.noneOrAll(a,h,["ax","ay"]);c&&(c=e("xclick"),d=e("yclick"),h._xclick=void 0===c?h.x:m.cleanPosition(c,l,h.xref),h._yclick=void 0===d?h.y:m.cleanPosition(d,
l,h.yref))}}var k=a("../../lib"),m=a("../../plots/cartesian/axes"),h=a("../../plots/array_container_defaults"),b=a("./common_defaults"),g=a("./attributes");q.exports=function(b,a){h(b,a,{name:"annotations",handleItemDefaults:n})}},{"../../lib":716,"../../plots/array_container_defaults":760,"../../plots/cartesian/axes":764,"./attributes":574,"./common_defaults":577}],580:[function(a,q,p){function n(b,a){var c=b._fullLayout.annotations[a]||{},d=e.getFromId(b,c.xref),f=e.getFromId(b,c.yref);d&&d.setScale();
f&&f.setScale();k(b,c,a,!1,d,f)}function k(b,a,e,k,n,p){function w(b){b={index:e,annotation:a._input,fullAnnotation:a,event:b};k&&(b.subplotId=k);return b}function x(c){c.call(l.font,ea).attr({"text-anchor":{left:"start",right:"end"}[a.align]||"middle"});d.convertToTspans(c,b,z);return c}function z(){function e(b,a){"auto"===a&&(a=b<1/3?"left":b>2/3?"right":"center");return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[a]}var f=fa.selectAll("a");1===f.size()&&f.text()===fa.text()&&Y.insert("a",
":first-child").attr({"xlink:xlink:href":f.attr("xlink:href"),"xlink:xlink:show":f.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(R.node());f=Y.select(".annotation-text-math-group");for(var m=!f.empty(),u=l.bBox((m?f:fa).node()),x=u.width,z=u.height,B=a.width||x,C=a.height||z,D=Math.round(B+2*Z),E=Math.round(C+2*Z),H=!1,G=["x","y"],J=0;J<G.length;J++){var F=G[J],L=a[F+"ref"]||F,ea=a["a"+F+"ref"],ra={x:n,y:p}[F],ua=(P+("x"===F?0:-90))*Math.PI/180,Aa=D*Math.cos(ua),wa=E*Math.sin(ua);
ua=Math.abs(Aa)+Math.abs(wa);var Ma=a[F+"anchor"],ba=a[F+"shift"]*("x"===F?1:-1),Ea=O[F];if(ra){var Ba=ra.r2fraction(a[F]);if(0>Ba||1<Ba)if(ea===L){if(Ba=ra.r2fraction(a["a"+F]),0>Ba||1<Ba)H=!0}else H=!0;Ba=ra._offset+ra.r2p(a[F]);var Na=.5}else"x"===F?(Na=a[F],Ba=y.l+y.w*Na):(Na=1-a[F],Ba=y.t+y.h*Na),Na=a.showarrow?.5:Na;a.showarrow?(Ea.head=Ba,Ma=a["a"+F],Aa=Aa*e(.5,a.xanchor)-wa*e(.5,a.yanchor),ea===L?(Ea.tail=ra._offset+ra.r2p(Ma),ra=Aa):(Ea.tail=Ba+Ma,ra=Aa+Ma),Ea.text=Ea.tail+Aa,Ba=A["x"===
F?"width":"height"],"paper"===L&&(Ea.head=g.constrain(Ea.head,1,Ba-1)),"pixel"===ea&&(L=-Math.max(Ea.tail-3,Ea.text),ea=Math.min(Ea.tail+3,Ea.text)-Ba,0<L?(Ea.tail+=L,Ea.text+=L):0<ea&&(Ea.tail-=ea,Ea.text-=ea)),Ea.tail+=ba,Ea.head+=ba):(ra=Aa=ua*e(Na,Ma),Ea.text=Ba+Aa);Ea.text+=ba;Aa+=ba;ra+=ba;a["_"+F+"padplus"]=ua/2+ra;a["_"+F+"padminus"]=ua/2-ra;a["_"+F+"size"]=ua;a["_"+F+"shift"]=Aa}if(H)Y.remove();else{G=H=0;"left"!==a.align&&(H=(B-x)*("center"===a.align?.5:1));"top"!==a.valign&&(G=(C-z)*("middle"===
a.valign?.5:1));m?f.select("svg").attr({x:Z+H-1,y:Z+G}).call(l.setClipUrl,U?N:null,b):fa.call(d.positionText,Z+H-u.left,Z+G-u.top).call(l.setClipUrl,U?N:null,b);X.select("rect").call(l.setRect,Z,Z,B,C);R.call(l.setRect,ca/2,ca/2,D-ca,E-ca);Y.call(l.setTranslate,Math.round(O.x.text-D/2),Math.round(O.y.text-E/2));T.attr({transform:"rotate("+P+","+O.x.text+","+O.y.text+")"});var Ja=function(c,d){Q.selectAll(".annotation-arrow-g").remove();var e=O.x.head,f=O.y.head,m=O.x.tail+c,u=O.y.tail+d,w=O.x.text+
c;c=O.y.text+d;d=g.rotationXYMatrix(P,w,c);var x=g.apply2DTransform(d);d=g.apply2DTransform2(d);var z=+R.attr("width"),A=+R.attr("height");w-=.5*z;z=w+z;c-=.5*A;A=c+A;d=[[w,c,w,A],[w,A,z,A],[z,A,z,c],[z,c,w,c]].map(d);if(!d.reduce(function(b,a){return b^!!g.segmentsIntersect(e,f,e+1E6,f+1E6,a[0],a[1],a[2],a[3])},!1)){d.forEach(function(b){if(b=g.segmentsIntersect(m,u,e,f,b[0],b[1],b[2],b[3]))m=b.x,u=b.y});d=a.arrowwidth;A=a.arrowcolor;c=a.arrowside;var B=Q.append("g").style({opacity:t.opacity(A)}).classed("annotation-arrow-g",
!0);A=B.append("path").attr("d","M"+m+","+u+"L"+e+","+f).style("stroke-width",d+"px").call(t.stroke,t.rgb(A));v(A,c,a);if(q.annotationPosition&&A.node().parentNode&&!k){c=e;A=f;a.standoff&&(w=Math.sqrt(Math.pow(e-m,2)+Math.pow(f-u,2)),c+=a.standoff*(m-e)/w,A+=a.standoff*(u-f)/w);d=B.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(m-c)+","+(u-A),transform:"translate("+c+","+A+")"}).style("stroke-width",d+6+"px").call(t.stroke,
"rgba(0,0,0,0)").call(t.fill,"rgba(0,0,0,0)");var C,D;r.init({element:d.node(),gd:b,prepFn:function(){var b=l.getTranslate(Y);C=b.x;D=b.y;n&&n.autorange&&K(n._name+".autorange",!0);p&&p.autorange&&K(p._name+".autorange",!0)},moveFn:function(b,c){var d=x(C,D),e=d[0]+b;d=d[1]+c;Y.call(l.setTranslate,e,d);M("x",n?n.p2r(n.r2p(a.x)+b):a.x+b/y.w);M("y",p?p.p2r(p.r2p(a.y)+c):a.y-c/y.h);a.axref===a.xref&&M("ax",n.p2r(n.r2p(a.ax)+b));a.ayref===a.yref&&M("ay",p.p2r(p.r2p(a.ay)+c));B.attr("transform","translate("+
b+","+c+")");T.attr({transform:"rotate("+P+","+e+","+d+")"})},doneFn:function(){h.call("_guiRelayout",b,I());var a=document.querySelector(".js-notes-box-panel");a&&a.redraw(a.selectedObj)}})}}};a.showarrow&&Ja(0,0);if(V){var Lb;r.init({element:Y.node(),gd:b,prepFn:function(){Lb=T.attr("transform")},moveFn:function(b,d){var e="pointer";if(a.showarrow)a.axref===a.xref?M("ax",n.p2r(n.r2p(a.ax)+b)):M("ax",a.ax+b),a.ayref===a.yref?M("ay",p.p2r(p.r2p(a.ay)+d)):M("ay",a.ay+d),Ja(b,d);else{if(k)return;if(n)var f=
n.p2r(n.r2p(a.x)+b);else f=a._xsize/y.w,f=r.align(a.x+(a._xshift-a.xshift)/y.w-f/2+b/y.w,f,0,1,a.xanchor);if(p)var g=p.p2r(p.r2p(a.y)+d);else g=a._ysize/y.h,g=r.align(a.y-(a._yshift+a.yshift)/y.h-g/2-d/y.h,g,0,1,a.yanchor);M("x",f);M("y",g);n&&p||(e=r.getCursor(n?.5:f,p?.5:g,a.xanchor,a.yanchor))}T.attr({transform:"translate("+b+","+d+")"+Lb});c(Y,e)},clickFn:function(c,d){a.captureevents&&b.emit("plotly_clickannotation",w(d))},doneFn:function(){c(Y);h.call("_guiRelayout",b,I());var a=document.querySelector(".js-notes-box-panel");
a&&a.redraw(a.selectedObj)}})}}}var A=b._fullLayout,y=b._fullLayout._size,q=b._context.edits;if(k){var C="annotation-"+k;var H=k+".annotations"}else C="annotation",H="annotations";H=u(b.layout,H,a);var K=H.modifyBase,M=H.modifyItem,I=H.getUpdateObj;A._infolayer.selectAll("."+C+'[data-index\x3d"'+e+'"]').remove();var N="clip"+A._uid+"_ann"+e;if(a._input&&!1!==a.visible){var O={x:{},y:{}},P=+a.textangle||0,Q=A._infolayer.append("g").classed(C,!0).attr("data-index",String(e)).style("opacity",a.opacity),
T=Q.append("g").classed("annotation-text-g",!0),V=q[a.showarrow?"annotationTail":"annotationPosition"];C=a.captureevents||q.annotationText||V;var Y=T.append("g").style("pointer-events",C?"all":null).call(c,"pointer").on("click",function(){b._dragging=!1;b.emit("plotly_clickannotation",w(m.event))});if(a.hovertext)Y.on("mouseover",function(){var c=a.hoverlabel,d=c.font,e=this.getBoundingClientRect(),g=b.getBoundingClientRect();f.loneHover({x0:e.left-g.left,x1:e.right-g.left,y:(e.top+e.bottom)/2-g.top,
text:a.hovertext,color:c.bgcolor,borderColor:c.bordercolor,fontFamily:d.family,fontSize:d.size,fontColor:d.color},{container:A._hoverlayer.node(),outerContainer:A._paper.node(),gd:b})}).on("mouseout",function(){f.loneUnhover(A._hoverlayer.node())});var ca=a.borderwidth,Z=ca+a.borderpad,R=Y.append("rect").attr("class","bg").style("stroke-width",ca+"px").call(t.stroke,a.bordercolor).call(t.fill,a.bgcolor),U=a.width||a.height,X=A._topclips.selectAll("#"+N).data(U?[0]:[]);X.enter().append("clipPath").classed("annclip",
!0).attr("id",N).append("rect");X.exit().remove();var ea=a.font;C=A._meta?g.templateString(a.text,A._meta):a.text;var fa=Y.append("text").classed("annotation-text",!0).text(C);if(q.annotationText)fa.call(d.makeEditable,{delegate:Y,gd:b}).call(x).on("edit",function(c){a.text=c;this.call(x);M("text",c);n&&n.autorange&&K(n._name+".autorange",!0);p&&p.autorange&&K(p._name+".autorange",!0);h.call("_guiRelayout",b,I())});else fa.call(x)}else m.selectAll("#"+N).remove()}var m=a("d3"),h=a("../../registry"),
b=a("../../plots/plots"),g=a("../../lib"),e=a("../../plots/cartesian/axes"),t=a("../color"),l=a("../drawing"),f=a("../fx"),d=a("../../lib/svg_text_utils"),c=a("../../lib/setcursor"),r=a("../dragelement"),u=a("../../plot_api/plot_template").arrayEditor,v=a("./draw_arrow_head");q.exports={draw:function(a){var c=a._fullLayout;c._infolayer.selectAll(".annotation").remove();for(var d=0;d<c.annotations.length;d++)c.annotations[d].visible&&n(a,d);return b.previousPromises(a)},drawOne:n,drawRaw:k}},{"../../lib":716,
"../../lib/setcursor":736,"../../lib/svg_text_utils":740,"../../plot_api/plot_template":754,"../../plots/cartesian/axes":764,"../../plots/plots":825,"../../registry":845,"../color":591,"../dragelement":609,"../drawing":612,"../fx":629,"./draw_arrow_head":581,d3:165}],581:[function(a,q,p){var n=a("d3"),k=a("../color"),m=a("./arrow_paths");q.exports=function(a,b,g){function e(){a.style("stroke-dasharray","0px,100px")}function h(b,c,d,e){b.path&&(b.noRotate&&(d=0),n.select(l.parentNode).append("path").attr({"class":a.attr("class"),
d:b.path,transform:"translate("+c.x+","+c.y+")"+(d?"rotate("+180*d/Math.PI+")":"")+"scale("+e+")"}).style({fill:k.rgb(g.arrowcolor),"stroke-width":0}))}var l=a.node(),f=m[g.arrowhead||0],d=m[g.startarrowhead||0],c=(g.arrowwidth||1)*(g.arrowsize||1),r=(g.arrowwidth||1)*(g.startarrowsize||1),u=0<=b.indexOf("start");b=0<=b.indexOf("end");var v=f.backoff*c+g.standoff,w=d.backoff*r+g.startstandoff;if("line"===l.nodeName){var p={x:+a.attr("x1"),y:+a.attr("y1")};var A={x:+a.attr("x2"),y:+a.attr("y2")};var z=
p.x-A.x,x=p.y-A.y;var q=Math.atan2(x,z);var B=q+Math.PI;if(v&&w&&v+w>Math.sqrt(z*z+x*x)){e();return}if(v){if(v*v>z*z+x*x){e();return}var D=v*Math.sin(q);A.x+=v*Math.cos(q);A.y+=D;a.attr({x2:A.x,y2:A.y})}if(w){if(w*w>z*z+x*x){e();return}v=w*Math.sin(q);p.x-=w*Math.cos(q);p.y-=v;a.attr({x1:p.x,y1:p.y})}}else if("path"===l.nodeName){z=l.getTotalLength();x="";if(z<v+w){e();return}p=l.getPointAtLength(0);q=l.getPointAtLength(.1);q=Math.atan2(p.y-q.y,p.x-q.x);p=l.getPointAtLength(Math.min(w,z));x="0px,"+
w+"px,";A=l.getPointAtLength(z);B=l.getPointAtLength(z-.1);B=Math.atan2(A.y-B.y,A.x-B.x);A=l.getPointAtLength(Math.max(0,z-v));a.style("stroke-dasharray",x+(z-(x?w+v:v)+"px,"+z+"px"))}u&&h(d,p,q,r);b&&h(f,A,B,c)}},{"../color":591,"./arrow_paths":573,d3:165}],582:[function(a,q,p){p=a("./draw");var n=a("./click");q.exports={moduleType:"component",name:"annotations",layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),includeBasePlot:a("../../plots/cartesian/include_components")("annotations"),
calcAutorange:a("./calc_autorange"),draw:p.draw,drawOne:p.drawOne,drawRaw:p.drawRaw,hasClickToShow:n.hasClickToShow,onClick:n.onClick,convertCoords:a("./convert_coords")}},{"../../plots/cartesian/include_components":774,"./attributes":574,"./calc_autorange":575,"./click":576,"./convert_coords":578,"./defaults":579,"./draw":580}],583:[function(a,q,p){p=a("../annotations/attributes");var n=a("../../plot_api/edit_types").overrideAll;a=a("../../plot_api/plot_template").templatedArray;q.exports=n(a("annotation",
{visible:p.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:p.xanchor,xshift:p.xshift,yanchor:p.yanchor,yshift:p.yshift,text:p.text,textangle:p.textangle,font:p.font,width:p.width,height:p.height,opacity:p.opacity,align:p.align,valign:p.valign,bgcolor:p.bgcolor,bordercolor:p.bordercolor,borderpad:p.borderpad,borderwidth:p.borderwidth,showarrow:p.showarrow,arrowcolor:p.arrowcolor,arrowhead:p.arrowhead,startarrowhead:p.startarrowhead,
arrowside:p.arrowside,arrowsize:p.arrowsize,startarrowsize:p.startarrowsize,arrowwidth:p.arrowwidth,standoff:p.standoff,startstandoff:p.startstandoff,hovertext:p.hovertext,hoverlabel:p.hoverlabel,captureevents:p.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":747,"../../plot_api/plot_template":754,"../annotations/attributes":574}],584:[function(a,q,p){function n(a,b){var g=b.fullSceneLayout.domain,e=b.fullLayout._size;b={pdata:null,type:"linear",autorange:!1,range:[-Infinity,Infinity]};
a._xa={};k.extendFlat(a._xa,b);m.setConvert(a._xa);a._xa._offset=e.l+g.x[0]*e.w;a._xa.l2p=function(){return.5*(1+a._pdata[0]/a._pdata[3])*e.w*(g.x[1]-g.x[0])};a._ya={};k.extendFlat(a._ya,b);m.setConvert(a._ya);a._ya._offset=e.t+(1-g.y[1])*e.h;a._ya.l2p=function(){return.5*(1-a._pdata[1]/a._pdata[3])*e.h*(g.y[1]-g.y[0])}}var k=a("../../lib"),m=a("../../plots/cartesian/axes");q.exports=function(a){for(var b=a.fullSceneLayout.annotations,g=0;g<b.length;g++)n(b[g],a);a.fullLayout._infolayer.selectAll(".annotation-"+
a.id).remove()}},{"../../lib":716,"../../plots/cartesian/axes":764}],585:[function(a,q,p){function n(a,h,l,f){function d(b,c){return k.coerce(a,h,g,b,c)}function c(b){var a=b+"axis",c={_fullLayout:{}};c._fullLayout[a]=l[a];return m.coercePosition(h,c,d,b,b,.5)}d("visible")&&(b(a,h,f.fullLayout,d),c("x"),c("y"),c("z"),k.noneOrAll(a,h,["x","y","z"]),h.xref="x",h.yref="y",h.zref="z",d("xanchor"),d("yanchor"),d("xshift"),d("yshift"),h.showarrow&&(h.axref="pixel",h.ayref="pixel",d("ax",-10),d("ay",-30),
k.noneOrAll(a,h,["ax","ay"])))}var k=a("../../lib"),m=a("../../plots/cartesian/axes"),h=a("../../plots/array_container_defaults"),b=a("../annotations/common_defaults"),g=a("./attributes");q.exports=function(b,a,g){h(b,a,{name:"annotations",handleItemDefaults:n,fullLayout:g.fullLayout})}},{"../../lib":716,"../../plots/array_container_defaults":760,"../../plots/cartesian/axes":764,"../annotations/common_defaults":577,"./attributes":583}],586:[function(a,q,p){var n=a("../annotations/draw").drawRaw,k=
a("../../plots/gl3d/project"),m=["x","y","z"];q.exports=function(a){for(var b=a.fullSceneLayout,g=a.dataScale,e=b.annotations,h=0;h<e.length;h++){for(var l=e[h],f=!1,d=0;3>d;d++){var c=m[d];c=b[c+"axis"].r2fraction(l[c]);if(0>c||1<c){f=!0;break}}f?a.fullLayout._infolayer.select(".annotation-"+a.id+'[data-index\x3d"'+h+'"]').remove():(l._pdata=k(a.glplot.cameraParams,[b.xaxis.r2l(l.x)*g[0],b.yaxis.r2l(l.y)*g[1],b.zaxis.r2l(l.z)*g[2]]),n(a.graphDiv,l,h,a.id,l._xa,l._ya))}}},{"../../plots/gl3d/project":813,
"../annotations/draw":580}],587:[function(a,q,p){var n=a("../../registry"),k=a("../../lib");q.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:a("./attributes")}}},layoutAttributes:a("./attributes"),handleDefaults:a("./defaults"),includeBasePlot:function(a,h){var b=n.subplotsRegistry.gl3d;if(b)for(var g=b.attrRegex,e=Object.keys(a),t=0;t<e.length;t++){var l=e[t];g.test(l)&&(a[l].annotations||[]).length&&(k.pushUnique(h._basePlotModules,b),k.pushUnique(h._subplots.gl3d,
l))}},convert:a("./convert"),draw:a("./draw")}},{"../../lib":716,"../../registry":845,"./attributes":583,"./convert":584,"./defaults":585,"./draw":586}],588:[function(a,q,p){q.exports=a("world-calendars/dist/main");a("world-calendars/dist/plus");a("world-calendars/dist/calendars/chinese");a("world-calendars/dist/calendars/coptic");a("world-calendars/dist/calendars/discworld");a("world-calendars/dist/calendars/ethiopian");a("world-calendars/dist/calendars/hebrew");a("world-calendars/dist/calendars/islamic");
a("world-calendars/dist/calendars/julian");a("world-calendars/dist/calendars/mayan");a("world-calendars/dist/calendars/nanakshahi");a("world-calendars/dist/calendars/nepali");a("world-calendars/dist/calendars/persian");a("world-calendars/dist/calendars/taiwan");a("world-calendars/dist/calendars/thai");a("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":555,"world-calendars/dist/calendars/coptic":556,"world-calendars/dist/calendars/discworld":557,"world-calendars/dist/calendars/ethiopian":558,
"world-calendars/dist/calendars/hebrew":559,"world-calendars/dist/calendars/islamic":560,"world-calendars/dist/calendars/julian":561,"world-calendars/dist/calendars/mayan":562,"world-calendars/dist/calendars/nanakshahi":563,"world-calendars/dist/calendars/nepali":564,"world-calendars/dist/calendars/persian":565,"world-calendars/dist/calendars/taiwan":566,"world-calendars/dist/calendars/thai":567,"world-calendars/dist/calendars/ummalqura":568,"world-calendars/dist/main":569,"world-calendars/dist/plus":570}],
589:[function(a,q,p){function n(b){var a=d[b];return a?a:a=d[b]=h.instance(b)}function k(a){return b.extendFlat({},t,{description:a})}function m(b){return"Sets the calendar system to use with `"+b+"` date data."}var h=a("./calendars"),b=a("../../lib");a=a("../../constants/numerical");var g=a.EPOCHJD,e=a.ONEDAY,t={valType:"enumerated",values:Object.keys(h.calendars),editType:"calc",dflt:"gregorian"},l=function(a,c,d,e){var f={};f[d]=t;return b.coerce(a,c,f,d,e)},f={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},
a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},d={};a={xcalendar:k(m("x"))};p=b.extendFlat({},a,{ycalendar:k(m("y"))});var c=b.extendFlat({},p,{zcalendar:k(m("z"))}),r=k("Sets the calendar system to use for `range` and `tick0` if this is a date axis. This does not set the calendar for interpreting data on this axis, that's specified in the trace or via the global `layout.calendar`");
q.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:p,bar:p,box:p,heatmap:p,contour:p,histogram:p,histogram2d:p,histogram2dcontour:p,scatter3d:c,surface:c,mesh3d:c,scattergl:p,ohlc:a,candlestick:a},layout:{calendar:k("Sets the default calendar system to use for interpreting and displaying dates throughout the plot.")},subplots:{xaxis:{calendar:r},yaxis:{calendar:r},scene:{xaxis:{calendar:r},yaxis:{calendar:r},zaxis:{calendar:r}},polar:{radialaxis:{calendar:r}}},transforms:{filter:{valuecalendar:k("Sets the calendar system to use for `value`, if it is a date."),
targetcalendar:k("Sets the calendar system to use for `target`, if it is an array of dates. If `target` is a string (eg *x*) we use the corresponding trace attribute (eg `xcalendar`) if it exists, even if `targetcalendar` is provided.")}}},layoutAttributes:t,handleDefaults:l,handleTraceDefaults:function(b,a,c,d){for(var e=0;e<c.length;e++)l(b,a,c[e]+"calendar",d.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",
islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",
ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],
thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:n,worldCalFmt:function(b,a,c){a=Math.floor((a+.05)/e)+g;c=n(c).fromJD(a);a=0;for(var d,h,k;-1!==(a=b.indexOf("%",a));)d=b.charAt(a+1),"0"===d||"-"===d||"_"===d?(k=3,h=b.charAt(a+2),"_"===d&&(d="-")):(h=d,d="0",k=2),(h=f[h])?(d="##"===h?"##":c.formatDate(h[d]),b=b.substr(0,a)+d+b.substr(a+k),a+=d.length):a+=k;return b}}},{"../../constants/numerical":692,"../../lib":716,"./calendars":588}],590:[function(a,q,p){p.defaults=
"#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" ");p.defaultLine="#444";p.lightLine="#eee";p.background="#fff";p.borderLine="#BEC8D9";p.lightFraction=1E3/11},{}],591:[function(a,q,p){function n(b){if(m(b)||"string"!==typeof b)return b;var a=b.trim();if("rgb"!==a.substr(0,3))return b;var e=a.match(/^rgba?\s*\(([^()]*)\)$/);if(!e)return b;e=e[1].trim().split(/\s*[\s,]\s*/);a="a"===a.charAt(3)&&4===e.length;if(!a&&3!==e.length)return b;for(var f=0;f<e.length;f++){if(!e[f].length)return b;
e[f]=Number(e[f]);if(!(0<=e[f]))return b;if(3===f)1<e[f]&&(e[f]=1);else if(1<=e[f])return b}b=Math.round(255*e[0])+", "+Math.round(255*e[1])+", "+Math.round(255*e[2]);return a?"rgba("+b+", "+e[3]+")":"rgb("+b+")"}var k=a("tinycolor2"),m=a("fast-isnumeric"),h=q.exports={};a=a("./attributes");h.defaults=a.defaults;var b=h.defaultLine=a.defaultLine;h.lightLine=a.lightLine;var g=h.background=a.background;h.tinyRGB=function(b){b=b.toRgb();return"rgb("+Math.round(b.r)+", "+Math.round(b.g)+", "+Math.round(b.b)+
")"};h.rgb=function(b){return h.tinyRGB(k(b))};h.opacity=function(b){return b?k(b).getAlpha():0};h.addOpacity=function(b,a){b=k(b).toRgb();return"rgba("+Math.round(b.r)+", "+Math.round(b.g)+", "+Math.round(b.b)+", "+a+")"};h.combine=function(b,a){var e=k(b).toRgb();if(1===e.a)return k(b).toRgbString();b=k(a||g).toRgb();b=1===b.a?b:{r:255*(1-b.a)+b.r*b.a,g:255*(1-b.a)+b.g*b.a,b:255*(1-b.a)+b.b*b.a};return k({r:b.r*(1-e.a)+e.r*e.a,g:b.g*(1-e.a)+e.g*e.a,b:b.b*(1-e.a)+e.b*e.a}).toRgbString()};h.contrast=
function(a,t,l){var e=k(a);1!==e.getAlpha()&&(e=k(h.combine(a,g)));return(e.isDark()?t?e.lighten(t):g:l?e.darken(l):b).toString()};h.stroke=function(b,a){a=k(a);b.style({stroke:h.tinyRGB(a),"stroke-opacity":a.getAlpha()})};h.fill=function(b,a){a=k(a);b.style({fill:h.tinyRGB(a),"fill-opacity":a.getAlpha()})};h.clean=function(b){if(b&&"object"===typeof b){var a=Object.keys(b),e;for(e=0;e<a.length;e++){var f=a[e];var d=b[f];if("color"===f.substr(f.length-5))if(Array.isArray(d))for(f=0;f<d.length;f++)d[f]=
n(d[f]);else b[f]=n(d);else if("colorscale"===f.substr(f.length-10)&&Array.isArray(d))for(f=0;f<d.length;f++)Array.isArray(d[f])&&(d[f][1]=n(d[f][1]));else if(Array.isArray(d)){if(f=d[0],!Array.isArray(f)&&f&&"object"===typeof f)for(f=0;f<d.length;f++)h.clean(d[f])}else d&&"object"===typeof d&&h.clean(d)}}}},{"./attributes":590,"fast-isnumeric":228,tinycolor2:535}],592:[function(a,q,p){p=a("../../plots/cartesian/layout_attributes");var n=a("../../plots/font_attributes"),k=a("../../lib/extend").extendFlat;
a=a("../../plot_api/edit_types").overrideAll;q.exports=a({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",
values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:p.linecolor,outlinewidth:p.linewidth,bordercolor:p.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:p.tickmode,nticks:p.nticks,tick0:p.tick0,dtick:p.dtick,tickvals:p.tickvals,ticktext:p.ticktext,ticks:k({},p.ticks,{dflt:""}),ticklen:p.ticklen,tickwidth:p.tickwidth,tickcolor:p.tickcolor,showticklabels:p.showticklabels,tickfont:n({}),tickangle:p.tickangle,
tickformat:p.tickformat,tickformatstops:p.tickformatstops,tickprefix:p.tickprefix,showtickprefix:p.showtickprefix,ticksuffix:p.ticksuffix,showticksuffix:p.showticksuffix,separatethousands:p.separatethousands,exponentformat:p.exponentformat,showexponent:p.showexponent,title:{text:{valType:"string"},font:n({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:n({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},
"colorbars","from-root")},{"../../lib/extend":707,"../../plot_api/edit_types":747,"../../plots/cartesian/layout_attributes":776,"../../plots/font_attributes":790}],593:[function(a,q,p){q.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],594:[function(a,q,p){var n=a("../../lib"),k=a("../../plot_api/plot_template"),
m=a("../../plots/cartesian/tick_value_defaults"),h=a("../../plots/cartesian/tick_mark_defaults"),b=a("../../plots/cartesian/tick_label_defaults"),g=a("./attributes");q.exports=function(a,t,l){function e(b,a){return n.coerce(c,d,g,b,a)}var d=k.newContainer(t,"colorbar"),c=a.colorbar||{};a=e("thicknessmode");e("thickness","fraction"===a?30/(l.width-l.margin.l-l.margin.r):30);a=e("lenmode");e("len","fraction"===a?1:l.height-l.margin.t-l.margin.b);e("x");e("xanchor");e("xpad");e("y");e("yanchor");e("ypad");
n.noneOrAll(c,d,["x","y"]);e("outlinecolor");e("outlinewidth");e("bordercolor");e("borderwidth");e("bgcolor");m(c,d,e,"linear");a={outerTicks:!1,font:l.font};b(c,d,e,"linear",a);h(c,d,e,"linear",a);e("title.text",l._dfltTitle.colorbar);n.coerceFont(e,"title.font",l.font);e("title.side")}},{"../../lib":716,"../../plot_api/plot_template":754,"../../plots/cartesian/tick_label_defaults":783,"../../plots/cartesian/tick_mark_defaults":784,"../../plots/cartesian/tick_value_defaults":785,"./attributes":592}],
595:[function(a,q,p){function n(b){function a(b){return r(b,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function c(){"function"===typeof l.calc?l.calc(b,k,g):(g._fillgradient=h.reversescale?z(h.colorscale):h.colorscale,g._zrange=[h[l.min],h[l.max]])}for(var d=b._fullLayout,e=b.calcdata,f=[],g,h,k,l,t=0;t<e.length;t++){k=e[t][0].trace;var m=k._module.colorbar;if(!0===k.visible&&m){var n=Array.isArray(m);
m=n?m:[m];for(var u=0;u<m.length;u++){l=m[u];var v=l.container;(h=v?k[v]:k)&&h.showscale&&(g=a(h.colorbar),g._id="cb"+k.uid+(n&&v?"-"+v:""),g._traceIndex=k.index,g._propPrefix=(v?v+".":"")+"colorbar.",g._meta=k._meta,c(),f.push(g))}}}for(var w in d._colorAxes)h=d[w],h.showscale&&(e=d._colorAxes[w],g=a(h.colorbar),g._id="cb"+w,g._propPrefix=w+".colorbar.",g._meta=d._meta,l={min:"cmin",max:"cmax"},"heatmap"!==e[0]&&(k=e[1],l.calc=k._module.colorbar.calc),c(),f.push(g));return f}function k(a,d,k){function l(b,
c){var e={propContainer:ka,propName:d._propPrefix+"title",traceIndex:d._traceIndex,_meta:d._meta,placeholder:m._dfltTitle.colorbar,containerGroup:a.select("."+F.cbtitle)},f="h"===b.charAt(0)?b.substr(1):"h"+b;a.selectAll("."+f+",."+f+"-math-group").remove();y.draw(k,b,r(e,c||{}))}var m=k._fullLayout,n=m._size,u=d._fillcolor,x=d._line,z=d.title,p=z.side,q=d._zrange||g.extent(("function"===typeof u?u:x.color).domain()),B="function"===typeof x.color?x.color:function(){return x.color},C="function"===
typeof u?u:function(){return u},H=d._levels,J=h(k,d,q),L=J.fill,U=J.line,X=Math.round(d.thickness*("fraction"===d.thicknessmode?n.w:1));J=X/n.w;var ea=Math.round(d.len*("fraction"===d.lenmode?n.h:1)),fa=ea/n.h,la=d.xpad/n.w,da=(d.borderwidth+d.outlinewidth)/2,ma=d.ypad/n.h,aa=Math.round(d.x*n.w+d.xpad),na=d.x-J*({middle:.5,right:1}[d.xanchor]||0),ha=d.y+fa*(({top:-.5,bottom:.5}[d.yanchor]||0)-.5),ja=Math.round(n.h*(1-ha)),oa=ja-ea;d._lenFrac=fa;d._thickFrac=J;d._xLeftFrac=na;d._yBottomFrac=ha;var ka=
d._axis=b(k,d,q);ka.position=d.x+la+J;-1!==["top","bottom"].indexOf(p)&&(ka.title.side=p,ka.titlex=d.x+la,ka.titley=ha+("top"===z.side?fa-ma:ma));x.color&&"auto"===d.tickmode&&(ka.tickmode="linear",ka.tick0=H.start,z=H.size,J=c.constrain((ja-oa)/50,4,15)+1,J=(q[1]-q[0])/((d.nticks||J)*z),1<J&&(ea=Math.pow(10,Math.floor(Math.log(J)/Math.LN10)),z*=ea*c.roundUp(J/ea,[2,5,10]),2E-6>(Math.abs(H.start)/H.size+1E-6)%1&&(ka.tick0=0)),ka.dtick=z);ka.domain=[ha+ma,ha+fa-ma];ka.setScale();a.attr("transform",
"translate("+Math.round(n.l)+","+Math.round(n.t)+")");var ia=a.select("."+F.cbtitleunshift).attr("transform","translate(-"+Math.round(n.l)+",-"+Math.round(n.t)+")"),xa=a.select("."+F.cbaxis),ya,sa=0;return c.syncOrAsync([t.previousPromises,function(){if(-1!==["top","bottom"].indexOf(p)){var b=ka.title.font.size;l(ka._id+"title",{attributes:{x:n.l+(d.x+la)*n.w,y:"top"===p?(1-(ha+fa-ma))*n.h+n.t+3+.75*b:(1-(ha+ma))*n.h+n.t-3-.25*b,"text-anchor":"start"}})}},function(){if(-1!==["top","bottom"].indexOf(p)){var b=
a.select("."+F.cbtitle),h=b.select("text"),l=[-d.outlinewidth/2,d.outlinewidth/2],r=b.select(".h"+ka._id+"title-math-group").node(),t=15.6;h.node()&&(t=parseInt(h.node().style.fontSize,10)*D);r?(sa=v.bBox(r).height,sa>t&&(l[1]-=(sa-t)/2)):h.node()&&!h.classed(F.jsPlaceholder)&&(sa=v.bBox(h.node()).height);sa&&(sa+=5,"top"===p?(ka.domain[1]-=sa/n.h,l[1]*=-1):(ka.domain[0]+=sa/n.h,h=A.lineCount(h),l[1]+=(1-h)*t),b.attr("transform","translate("+l+")"),ka.setScale())}a.selectAll("."+F.cbfills+",."+F.cblines).attr("transform",
"translate(0,"+Math.round(n.h*(1-ka.domain[1]))+")");xa.attr("transform","translate(0,"+Math.round(-n.t)+")");b=a.select("."+F.cbfills).selectAll("rect."+F.cbfill).data(L);b.enter().append("rect").classed(F.cbfill,!0).style("stroke","none");b.exit().remove();var m=q.map(ka.c2p).map(Math.round).sort(function(b,a){return b-a});b.each(function(b,a){a=[0===a?q[0]:(L[a]+L[a-1])/2,a===L.length-1?q[1]:(L[a]+L[a+1])/2].map(ka.c2p).map(Math.round);a[1]=c.constrain(a[1]+(a[1]>a[0])?1:-1,m[0],m[1]);a=g.select(this).attr({x:aa,
width:Math.max(X,2),y:g.min(a),height:Math.max(g.max(a)-g.min(a),2)});d._fillgradient?v.gradient(a,k,d._id,"vertical",d._fillgradient,"fill"):(b=C(b).replace("e-",""),a.attr("fill",e(b).toHexString()))});b=a.select("."+F.cblines).selectAll("path."+F.cbline).data(x.color&&x.width?U:[]);b.enter().append("path").classed(F.cbline,!0);b.exit().remove();b.each(function(b){g.select(this).attr("d","M"+aa+","+(Math.round(ka.c2p(b))+x.width/2%1)+"h"+X).call(v.lineGroupStyle,x.width,B(b),x.dash)});xa.selectAll("g."+
ka._id+"tick,path").remove();b=aa+X+(d.outlinewidth||0)/2-("outside"===d.ticks?1:0);l=f.calcTicks(ka);t=f.makeTransFn(ka);h=f.getTickSigns(ka)[2];f.drawTicks(k,ka,{vals:"inside"===ka.ticks?f.clipEnds(ka,l):l,layer:xa,path:f.makeTickPath(ka,b,h),transFn:t});return f.drawLabels(k,ka,{vals:l,layer:xa,transFn:t,labelFns:f.makeLabelFns(ka,b)})},function(){if(-1===["top","bottom"].indexOf(p)){var b=ka.title.font.size,a=ka._offset+ka._length/2;b=n.l+(ka.position||0)*n.w+("right"===ka.side?10+b*(ka.showticklabels?
1:.5):-10-b*(ka.showticklabels?.5:0));l("h"+ka._id+"title",{avoid:{selection:g.select(k).selectAll("g."+ka._id+"tick"),side:p,offsetLeft:n.l,offsetTop:0,maxShift:m.width},attributes:{x:b,y:a,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}},t.previousPromises,function(){var b=X+d.outlinewidth/2+v.bBox(xa.node()).width;ya=ia.select("text");if(ya.node()&&!ya.classed(F.jsPlaceholder)){var c=ia.select(".h"+ka._id+"title-math-group").node();c=c&&-1!==["top","bottom"].indexOf(p)?v.bBox(c).width:
v.bBox(ia.node()).right-aa-n.l;b=Math.max(b,c)}c=2*d.xpad+b+d.borderwidth+d.outlinewidth/2;var e=ja-oa;a.select("."+F.cbbg).attr({x:aa-d.xpad-(d.borderwidth+d.outlinewidth)/2,y:oa-da,width:Math.max(c,2),height:Math.max(e+2*da,2)}).call(w.fill,d.bgcolor).call(w.stroke,d.bordercolor).style("stroke-width",d.borderwidth);a.selectAll("."+F.cboutline).attr({x:aa,y:oa+d.ypad+("top"===p?sa:0),width:Math.max(X,2),height:Math.max(e-2*d.ypad-sa,2)}).call(w.stroke,d.outlinecolor).style({fill:"none","stroke-width":d.outlinewidth});
a.attr("transform","translate("+(n.l-({center:.5,right:1}[d.xanchor]||0)*c)+","+n.t+")");b={};var f=G[d.yanchor],g=E[d.yanchor];"pixels"===d.lenmode?(b.y=d.y,b.t=e*f,b.b=e*g):(b.t=b.b=0,b.yt=d.y+d.len*f,b.yb=d.y-d.len*g);e=G[d.xanchor];f=E[d.xanchor];"pixels"===d.thicknessmode?(b.x=d.x,b.l=c*e,b.r=c*f):(c-=X,b.l=c*e,b.r=c*f,b.xl=d.x-d.thickness*e,b.xr=d.x+d.thickness*f);t.autoMargin(k,d._id,b)}],k)}function m(b,a,c){var e=c._fullLayout._size,f,g,h;d.init({element:b.node(),gd:c,prepFn:function(){f=
b.attr("transform");u(b)},moveFn:function(c,k){b.attr("transform",f+" translate("+c+","+k+")");g=d.align(a._xLeftFrac+c/e.w,a._thickFrac,0,1,a.xanchor);h=d.align(a._yBottomFrac-k/e.h,a._lenFrac,0,1,a.yanchor);c=d.getCursor(g,h,a.xanchor,a.yanchor);u(b,c)},doneFn:function(){u(b);if(void 0!==g&&void 0!==h){var d={};d[a._propPrefix+"x"]=g;d[a._propPrefix+"y"]=h;void 0!==a._traceIndex?l.call("_guiRestyle",c,d,a._traceIndex):l.call("_guiRelayout",c,d)}}})}function h(b,a,c){var d=a._levels;b=[];var e=[],
f,g=d.end+d.size/100,h=d.size,k=1.001*c[0]-.001*c[1],l=1.001*c[1]-.001*c[0];for(f=0;1E5>f;f++){var r=d.start+f*h;if(0<h?r>=g:r<=g)break;r>k&&r<l&&b.push(r)}if(a._fillgradient)e=[0];else if("function"===typeof a._fillcolor)if(a=a._filllevels)for(g=a.end+a.size/100,h=a.size,f=0;1E5>f;f++){r=a.start+f*h;if(0<h?r>=g:r<=g)break;r>c[0]&&r<c[1]&&e.push(r)}else e=b.map(function(b){return b-d.size/2}),e.push(e[e.length-1]+d.size);else a._fillcolor&&"string"===typeof a._fillcolor&&(e=[0]);0>d.size&&(b.reverse(),
e.reverse());return{line:b,fill:e}}function b(b,a,d){function e(b,a){return c.coerce(f,g,B,b,a)}b=b._fullLayout;var f={type:"linear",range:d,tickmode:a.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:a.ticks,ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,showticklabels:a.showticklabels,tickfont:a.tickfont,tickangle:a.tickangle,tickformat:a.tickformat,exponentformat:a.exponentformat,separatethousands:a.separatethousands,showexponent:a.showexponent,
showtickprefix:a.showtickprefix,tickprefix:a.tickprefix,showticksuffix:a.showticksuffix,ticksuffix:a.ticksuffix,title:a.title,showline:!0,anchor:"free",side:"right",position:1},g={type:"linear",_id:"y"+a._id};a={letter:"y",font:b.font,noHover:!0,noTickson:!0,calendar:b.calendar};x(f,g,e,a,b);C(f,g,e,a);return g}var g=a("d3"),e=a("tinycolor2"),t=a("../../plots/plots"),l=a("../../registry"),f=a("../../plots/cartesian/axes"),d=a("../dragelement"),c=a("../../lib"),r=a("../../lib/extend").extendFlat,u=
a("../../lib/setcursor"),v=a("../drawing"),w=a("../color"),y=a("../titles"),A=a("../../lib/svg_text_utils"),z=a("../colorscale/helpers").flipScale,x=a("../../plots/cartesian/axis_defaults"),C=a("../../plots/cartesian/position_defaults"),B=a("../../plots/cartesian/layout_attributes");p=a("../../constants/alignment");var D=p.LINE_SPACING,G=p.FROM_TL,E=p.FROM_BR,F=a("./constants").cn;q.exports={draw:function(b){var a=b._fullLayout._infolayer.selectAll("g."+F.colorbar).data(n(b),function(b){return b._id});
a.enter().append("g").attr("class",function(b){return b._id}).classed(F.colorbar,!0);a.each(function(a){var d=g.select(this);c.ensureSingle(d,"rect",F.cbbg);c.ensureSingle(d,"g",F.cbfills);c.ensureSingle(d,"g",F.cblines);c.ensureSingle(d,"g",F.cbaxis,function(b){b.classed(F.crisp,!0)});c.ensureSingle(d,"g",F.cbtitleunshift,function(b){b.append("g").classed(F.cbtitle,!0)});c.ensureSingle(d,"rect",F.cboutline);var e=k(d,a,b);e&&e.then&&(b._promises||[]).push(e);b._context.edits.colorbarPosition&&m(d,
a,b)});a.exit().each(function(a){t.autoMargin(b,a._id)}).remove();a.order()}}},{"../../constants/alignment":685,"../../lib":716,"../../lib/extend":707,"../../lib/setcursor":736,"../../lib/svg_text_utils":740,"../../plots/cartesian/axes":764,"../../plots/cartesian/axis_defaults":766,"../../plots/cartesian/layout_attributes":776,"../../plots/cartesian/position_defaults":779,"../../plots/plots":825,"../../registry":845,"../color":591,"../colorscale/helpers":602,"../dragelement":609,"../drawing":612,
"../titles":678,"./constants":593,d3:165,tinycolor2:535}],596:[function(a,q,p){var n=a("../../lib");q.exports=function(a){return n.isPlainObject(a.colorbar)}},{"../../lib":716}],597:[function(a,q,p){q.exports={moduleType:"component",name:"colorbar",attributes:a("./attributes"),supplyDefaults:a("./defaults"),draw:a("./draw").draw,hasColorbar:a("./has_colorbar")}},{"./attributes":592,"./defaults":594,"./draw":595,"./has_colorbar":596}],598:[function(a,q,p){var n=a("../colorbar/attributes"),k=a("../../lib/regex").counter,
m=a("./scales.js").scales;Object.keys(m);q.exports=function(a,b){b=b||{};var g=b.cLetter||"c";a="noScale"in b?b.noScale:"marker.line"===(a||"");var e="showScaleDflt"in b?b.showScaleDflt:"z"===g,h="string"===typeof b.colorscaleDflt?m[b.colorscaleDflt]:null,l=b.editTypeOverride||"";var f="colorAttr"in b?b.colorAttr:{z:"z",c:"color"}[g];var d=g+"auto",c=g+"min",r=g+"max",u={};u[c]=u[r]=void 0;var v={};v[d]=!1;var w={};"color"===f&&(w.color={valType:"color",arrayOk:!0,editType:l||"style"},b.anim&&(w.color.anim=
!0));w[d]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:u};w[c]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:v};w[r]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:v};w[g+"mid"]={valType:"number",dflt:null,editType:"calc",impliedEdits:u};w.colorscale={valType:"colorscale",editType:"calc",dflt:h,impliedEdits:{autocolorscale:!1}};w.autocolorscale={valType:"boolean",dflt:!1===b.autoColorDflt?!1:!0,editType:"calc",impliedEdits:{colorscale:void 0}};w.reversescale=
{valType:"boolean",dflt:!1,editType:"plot"};a||(w.showscale={valType:"boolean",dflt:e,editType:"calc"},w.colorbar=n);b.noColorAxis||(w.coloraxis={valType:"subplotid",regex:k("coloraxis"),dflt:null,editType:"calc"});return w}},{"../../lib/regex":732,"../colorbar/attributes":592,"./scales.js":606}],599:[function(a,q,p){var n=a("fast-isnumeric"),k=a("../../lib"),m=a("./helpers").extractOpts;q.exports=function(a,b,g){a=a._fullLayout;var e=g.vals;b=(g=g.containerStr)?k.nestedProperty(b,g).get():b;g=m(b);
var h=!1!==g.auto,l=g.min,f=g.max,d=g.mid;void 0===l?l=k.aggNums(Math.min,null,e):h&&(l=b._colorAx&&n(l)?Math.min(l,k.aggNums(Math.min,null,e)):k.aggNums(Math.min,null,e));void 0===f?f=k.aggNums(Math.max,null,e):h&&(f=b._colorAx&&n(f)?Math.max(f,k.aggNums(Math.max,null,e)):k.aggNums(Math.max,null,e));h&&void 0!==d&&(f-d>d-l?l=d-(f-d):f-d<d-l&&(f=d+(d-l)));l===f&&(l-=.5,f+=.5);g._sync("min",l);g._sync("max",f);g.autocolorscale&&g._sync("colorscale",0>l*f?a.colorscale.diverging:0<=l?a.colorscale.sequential:
a.colorscale.sequentialminus)}},{"../../lib":716,"./helpers":602,"fast-isnumeric":228}],600:[function(a,q,p){var n=a("../../lib"),k=a("./helpers").hasColorscale,m=a("./helpers").extractOpts;q.exports=function(a,b){function g(b,a){var c=b["_"+a];void 0!==c&&(b[a]=c)}function e(a,c){if(a=c.container?n.nestedProperty(a,c.container).get():a)if(a.coloraxis)a._colorAx=b[a.coloraxis];else{var d=m(a),e=d.auto;(e||void 0===d.min)&&g(a,c.min);(e||void 0===d.max)&&g(a,c.max);d.autocolorscale&&g(a,"colorscale")}}
for(var h=0;h<a.length;h++){var l=a[h],f=l._module.colorbar;if(f)if(Array.isArray(f))for(var d=0;d<f.length;d++)e(l,f[d]);else e(l,f);k(l,"marker.line")&&e(l,{container:"marker.line",min:"cmin",max:"cmax"})}for(var c in b._colorAxes)e(b[c],{min:"cmin",max:"cmax"})}},{"../../lib":716,"./helpers":602}],601:[function(a,q,p){function n(b,a){var e=a.slice(0,a.length-1);return a?m.nestedProperty(b,e).get()||{}:b}var k=a("fast-isnumeric"),m=a("../../lib"),h=a("../colorbar/has_colorbar"),b=a("../colorbar/defaults"),
g=a("./scales").isValid,e=a("../../registry").traceIs;q.exports=function u(a,f,d,c,r){var l=r.prefix,w=r.cLetter,p="_module"in f,A=n(a,l),z=n(f,l),x=n(f._template||{},l)||{},q=function(){delete a.coloraxis;delete f.coloraxis;return u(a,f,d,c,r)};if(p){var B=d._colorAxes||{},D=c(l+"coloraxis");if(D){l=e(f,"contour")&&m.nestedProperty(f,"contours.coloring").get()||"heatmap";(p=B[D])?(p[2].push(q),p[0]!==l&&(p[0]=!1,m.warn(["Ignoring coloraxis:",D,"setting as it is linked to incompatible colorscales."].join(" ")))):
B[D]=[l,f,[q]];return}}q=A[w+"min"];B=A[w+"max"];q=k(q)&&k(B)&&q<B;c(l+w+"auto",!q)?c(l+w+"mid"):(c(l+w+"min"),c(l+w+"max"));w=A.colorscale;q=x.colorscale;var G;void 0!==w&&(G=!g(w));void 0!==q&&(G=!g(q));c(l+"autocolorscale",G);c(l+"colorscale");c(l+"reversescale");if("marker.line."!==l){var E;l&&p&&(E=h(A));c(l+"showscale",E)&&(l&&x&&(z._template=x),b(A,z,d))}}},{"../../lib":716,"../../registry":845,"../colorbar/defaults":594,"../colorbar/has_colorbar":596,"./scales":606,"fast-isnumeric":228}],
602:[function(a,q,p){function n(b){var a=b._colorAx,d=a?a:b;b={};var e;for(e=0;e<c.length;e++){var f=c[e];b[f]=d[f]}if(a){var g="c";for(e=0;e<r.length;e++)f=r[e],b[f]=d["c"+f]}else{for(e=0;e<r.length;e++){f=r[e];var h="c"+f;h in d?b[f]=d[h]:(h="z"+f,h in d&&(b[f]=d[h]))}g=h.charAt(0)}b._sync=function(b,a){b=-1!==r.indexOf(b)?g+b:b;d[b]=d["_"+b]=a};return b}function k(b){var a=n(b);b=a.min;var c=a.max;a=a.reversescale?m(a.colorscale):a.colorscale;for(var d=a.length,e=Array(d),f=Array(d),g=0;g<d;g++){var h=
a[g];e[g]=b+h[0]*(c-b);f[g]=h[1]}return{domain:e,range:f}}function m(b){var a=b.length,c=Array(a);--a;for(var d=0;0<=a;a--,d++){var e=b[a];c[d]=[1-e[0],e[1]]}return c}function h(a,c){c=c||{};var d=a.domain,h=a.range;a=h.length;for(var k=Array(a),l=0;l<a;l++){var r=e(h[l]).toRgb();k[l]=[r.r,r.g,r.b,r.a]}var m=g.scale.linear().domain(d).range(k).clamp(!0);d=c.noNumericCheck;c=c.returnArray;c=d&&c?m:d?function(a){return b(m(a))}:c?function(b){return t(b)?m(b):e(b).isValid()?b:f.defaultLine}:function(a){return t(a)?
b(m(a)):e(a).isValid()?a:f.defaultLine};c.domain=m.domain;c.range=function(){return h};return c}function b(b){return e({r:b[0],g:b[1],b:b[2],a:b[3]}).toRgbString()}var g=a("d3"),e=a("tinycolor2"),t=a("fast-isnumeric"),l=a("../../lib"),f=a("../color"),d=a("./scales").isValid,c=["showscale","autocolorscale","colorscale","reversescale","colorbar"],r=["min","max","mid","auto"];q.exports={hasColorscale:function(b,a,c){b=a?l.nestedProperty(b,a).get()||{}:b;c=b[c||"color"];a=!1;if(l.isArrayOrTypedArray(c))for(var e=
0;e<c.length;e++)if(t(c[e])){a=!0;break}return l.isPlainObject(b)&&(a||!0===b.showscale||t(b.cmin)&&t(b.cmax)||d(b.colorscale)||l.isPlainObject(b.colorbar))},extractOpts:n,extractScale:k,flipScale:m,makeColorScaleFunc:h,makeColorScaleFuncFromTrace:function(b,a){return h(k(b),a)}}},{"../../lib":716,"../color":591,"./scales":606,d3:165,"fast-isnumeric":228,tinycolor2:535}],603:[function(a,q,p){p=a("./scales");var n=a("./helpers");q.exports={moduleType:"component",name:"colorscale",attributes:a("./attributes"),
layoutAttributes:a("./layout_attributes"),supplyLayoutDefaults:a("./layout_defaults"),handleDefaults:a("./defaults"),crossTraceDefaults:a("./cross_trace_defaults"),calc:a("./calc"),scales:p.scales,defaultScale:p.defaultScale,getScale:p.get,isValidScale:p.isValid,hasColorscale:n.hasColorscale,extractOpts:n.extractOpts,extractScale:n.extractScale,flipScale:n.flipScale,makeColorScaleFunc:n.makeColorScaleFunc,makeColorScaleFuncFromTrace:n.makeColorScaleFuncFromTrace}},{"./attributes":598,"./calc":599,
"./cross_trace_defaults":600,"./defaults":601,"./helpers":602,"./layout_attributes":604,"./layout_defaults":605,"./scales":606}],604:[function(a,q,p){p=a("../../lib/extend").extendFlat;var n=a("./attributes");a=a("./scales").scales;q.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:a.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:a.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:a.RdBu,editType:"calc"}},coloraxis:p({_isSubplotObj:!0,
editType:"calc"},n("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":707,"./attributes":598,"./scales":606}],605:[function(a,q,p){var n=a("../../lib"),k=a("../../plot_api/plot_template"),m=a("./layout_attributes"),h=a("./defaults");q.exports=function(b,a){function e(b,a){return n.coerce(d,c,m.coloraxis,b,a)}n.coerce(b,a,m,"colorscale.sequential",void 0);n.coerce(b,a,m,"colorscale.sequentialminus",void 0);n.coerce(b,a,m,"colorscale.diverging",
void 0);var g=a._colorAxes,l;for(l in g){var f=g[l];if(f[0]){var d=b[l]||{};var c=k.newContainer(a,l,"coloraxis");c._name=l;h(d,c,a,e,{prefix:"",cLetter:"c"})}else{for(var r=0;r<f[2].length;r++)f[2][r]();delete a._colorAxes[l]}}}},{"../../lib":716,"../../plot_api/plot_template":754,"./defaults":601,"./layout_attributes":604}],606:[function(a,q,p){function n(b){var a=0;if(!Array.isArray(b)||2>b.length||!b[0]||!b[b.length-1]||0!==+b[0][0]||1!==+b[b.length-1][0])return!1;for(var e=0;e<b.length;e++){var h=
b[e];if(2!==h.length||+h[0]<a||!k(h[1]).isValid())return!1;a=+h[0]}return!0}var k=a("tinycolor2"),m={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],
[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],
[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],
[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],
[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],
[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],
[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},h=m.RdBu;q.exports={scales:m,defaultScale:h,get:function(b,a){function e(){try{b=m[b]||JSON.parse(b)}catch(t){b=
a}}a||(a=h);if(!b)return a;"string"===typeof b&&(e(),"string"===typeof b&&e());return n(b)?b:a},isValid:function(b){return void 0!==m[b]?!0:n(b)}}},{tinycolor2:535}],607:[function(a,q,p){q.exports=function(a,k,m,h,b){a=(a-m)/(h-m);k=a+k/(h-m);m=(a+k)/2;return"left"===b||"bottom"===b?a:"center"===b||"middle"===b?m:"right"===b||"top"===b?k:a<2/3-m?a:k>4/3-m?k:m}},{}],608:[function(a,q,p){var n=a("../../lib"),k=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize",
"ne-resize"]];q.exports=function(a,h,b,g){a="left"===b?0:"center"===b?1:"right"===b?2:n.constrain(Math.floor(3*a),0,2);h="bottom"===g?0:"middle"===g?1:"top"===g?2:n.constrain(Math.floor(3*h),0,2);return k[h][a]}},{"../../lib":716}],609:[function(a,q,p){function n(){var b=document.createElement("div");b.className="dragcover";var a=b.style;a.position="fixed";a.left=0;a.right=0;a.top=0;a.bottom=0;a.zIndex=999999999;a.background="none";document.body.appendChild(b);return b}function k(b){return m(b.changedTouches?
b.changedTouches[0]:b,document.body)}var m=a("mouse-event-offset"),h=a("has-hover"),b=a("has-passive-events"),g=a("../../lib").removeElement,e=a("../../plots/cartesian/constants"),t=q.exports={};t.align=a("./align");t.getCursor=a("./cursor");a=a("./unhover");t.unhover=a.wrapped;t.unhoverRaw=a.raw;t.init=function(a){function f(b,a,c){Math.abs(b)<c&&(b=0);Math.abs(a)<c&&(a=0);return[b,a]}function d(b){m._dragged=!1;m._dragging=!0;var d=k(b);A=d[0];z=d[1];G=b.target;D=b;E=2===b.buttons||b.ctrlKey;"undefined"===
typeof b.clientX&&"undefined"===typeof b.clientY&&(b.clientX=A,b.clientY=z);x=(new Date).getTime();x-m._mouseDownTime<w?v+=1:(v=1,m._mouseDownTime=x);a.prepFn&&a.prepFn(b,A,z);h&&!E?(B=n(),B.style.cursor=window.getComputedStyle(p).cursor):h||(B=document,q=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(p).cursor);document.addEventListener("mouseup",l);document.addEventListener("touchend",l);!1!==a.dragmode&&(b.preventDefault(),
document.addEventListener("mousemove",c),document.addEventListener("touchmove",c,{passive:!1}))}function c(b){b.preventDefault();b=k(b);var c=F(b[0]-A,b[1]-z,a.minDrag||e.MINDRAG);b=c[0];c=c[1];if(b||c)m._dragged=!0,t.unhover(m);m._dragged&&a.moveFn&&!E&&(m._dragdata={element:p,dx:b,dy:c},a.moveFn(b,c))}function l(b){delete m._dragdata;!1!==a.dragmode&&(b.preventDefault(),document.removeEventListener("mousemove",c),document.removeEventListener("touchmove",c));document.removeEventListener("mouseup",
l);document.removeEventListener("touchend",l);h?g(B):q&&(B.documentElement.style.cursor=q,q=null);if(m._dragging){m._dragging=!1;(new Date).getTime()-m._mouseDownTime>w&&(v=Math.max(v-1,1));if(m._dragged)a.doneFn&&a.doneFn();else if(a.clickFn&&a.clickFn(v,D),!E){try{var d=new MouseEvent("click",b)}catch(K){var e=k(b);d=document.createEvent("MouseEvents");d.initMouseEvent("click",b.bubbles,b.cancelable,b.view,b.detail,b.screenX,b.screenY,e[0],e[1],b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget)}G.dispatchEvent(d)}m._dragging=
!1}m._dragged=!1}var m=a.gd,v=1,w=m._context.doubleClickDelay,p=a.element,A,z,x,q,B,D,G,E;m._mouseDownTime||(m._mouseDownTime=0);p.style.pointerEvents="all";p.onmousedown=d;b?(p._ontouchstart&&p.removeEventListener("touchstart",p._ontouchstart),p._ontouchstart=d,p.addEventListener("touchstart",d,{passive:!1})):p.ontouchstart=d;var F=a.clampFn||f};t.coverSlip=n},{"../../lib":716,"../../plots/cartesian/constants":770,"./align":607,"./cursor":608,"./unhover":610,"has-hover":411,"has-passive-events":412,
"mouse-event-offset":437}],610:[function(a,q,p){var n=a("../../lib/events"),k=a("../../lib/throttle"),m=a("../../lib/dom").getGraphDiv,h=a("../fx/constants"),b=q.exports={};b.wrapped=function(a,e,t){a=m(a);a._fullLayout&&k.clear(a._fullLayout._uid+h.HOVERID);b.raw(a,e,t)};b.raw=function(b,a){var e=b._fullLayout,g=b._hoverdata;a||(a={});a.target&&!1===n.triggerHandler(b,"plotly_beforehover",a)||(e._hoverlayer.selectAll("g").remove(),e._hoverlayer.selectAll("line").remove(),e._hoverlayer.selectAll("circle").remove(),
b._hoverdata=void 0,a.target&&g&&b.emit("plotly_unhover",{event:a,points:g}))}},{"../../lib/dom":705,"../../lib/events":706,"../../lib/throttle":741,"../fx/constants":624}],611:[function(a,q,p){p.dash={valType:"string",values:"solid dot dash longdash dashdot longdashdot".split(" "),dflt:"solid",editType:"style"}},{}],612:[function(a,q,p){function n(b,a){return C.symbolFuncs[b%100](a)+(200<=b?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}function k(b,a,c,d){var f=e.select(b.node().parentNode),g=-1!==a.indexOf("top")?
"top":-1!==a.indexOf("bottom")?"bottom":"middle";a=-1!==a.indexOf("left")?"end":-1!==a.indexOf("right")?"start":"middle";var h=d?d/.8+1:0,k=(u.lineCount(b)-1)*w+1;d=F[a]*h;c=.75*c+F[g]*h+(F[g]-1)*k*c/2;b.attr("text-anchor",a);f.attr("transform","translate("+d+","+c+")")}function m(b,a){b=b.ts||a.textfont.size;return t(b)&&0<b?b:0}function h(b,a,c,d){var f=b[0]-a[0],g=b[1]-a[1],h=c[0]-a[0],k=c[1]-a[1];c=Math.pow(f*f+g*g,.25);b=Math.pow(h*h+k*k,.25);f=(b*b*f-c*c*h)*d;d*=b*b*g-c*c*k;g=3*b*(c+b);c=3*
c*(c+b);return[[e.round(a[0]+(g&&f/g),2),e.round(a[1]+(g&&d/g),2)],[e.round(a[0]-(c&&f/c),2),e.round(a[1]-(c&&d/c),2)]]}function b(b){var a=b.getAttribute("data-unformatted");if(null!==a)return a+b.getAttribute("data-math")+b.getAttribute("text-anchor")+b.getAttribute("style")}function g(b,a){if(!b)return null;a=a._context;return"url('"+(a._exportedPlot?"":a._baseUrl||"")+"#"+b+"')"}var e=a("d3"),t=a("fast-isnumeric"),l=a("tinycolor2"),f=a("../../registry"),d=a("../color"),c=a("../colorscale"),r=
a("../../lib"),u=a("../../lib/svg_text_utils"),v=a("../../constants/xmlns_namespaces"),w=a("../../constants/alignment").LINE_SPACING,y=a("../../constants/interactions").DESELECTDIM,A=a("../../traces/scatter/subtypes"),z=a("../../traces/scatter/make_bubble_size_func"),x=a("../../components/fx/helpers").appendArrayPointValue,C=q.exports={};C.font=function(b,a,c,e){r.isPlainObject(a)&&(e=a.color,c=a.size,a=a.family);a&&b.style("font-family",a);c+1&&b.style("font-size",c+"px");e&&b.call(d.fill,e)};C.setPosition=
function(b,a,c){b.attr("x",a).attr("y",c)};C.setSize=function(b,a,c){b.attr("width",a).attr("height",c)};C.setRect=function(b,a,c,d,e){b.call(C.setPosition,a,c).call(C.setSize,d,e)};C.translatePoint=function(b,a,c,d){c=c.c2p(b.x);b=d.c2p(b.y);if(t(c)&&t(b)&&a.node())"text"===a.node().nodeName?a.attr("x",c).attr("y",b):a.attr("transform","translate("+c+","+b+")");else return!1;return!0};C.translatePoints=function(b,a,c){b.each(function(b){var d=e.select(this);C.translatePoint(b,d,a,c)})};C.hideOutsideRangePoint=
function(b,a,c,d,e,f){a.attr("display",c.isPtWithinRange(b,e)&&d.isPtWithinRange(b,f)?null:"none")};C.hideOutsideRangePoints=function(b,a){if(a._hasClipOnAxisFalse){var c=a.xaxis,d=a.yaxis;b.each(function(a){a=a[0].trace;var g=a.xcalendar,h=a.ycalendar;a=f.traceIs(a,"bar-like")?".bartext":".point,.textpoint";b.selectAll(a).each(function(b){C.hideOutsideRangePoint(b,e.select(this),c,d,g,h)})})}};C.crispRound=function(b,a,c){return a&&t(a)?b._context.staticPlot?a:1>a?1:Math.round(a):c||0};C.singleLineStyle=
function(b,a,c,e,f){a.style("fill","none");b=(((b||[])[0]||{}).trace||{}).line||{};c=c||b.width||0;f=f||b.dash||"";d.stroke(a,e||b.color);C.dashLine(a,f,c)};C.lineGroupStyle=function(b,a,c,f){b.style("fill","none").each(function(b){b=(((b||[])[0]||{}).trace||{}).line||{};var g=a||b.width||0,h=f||b.dash||"";e.select(this).call(d.stroke,c||b.color).call(C.dashLine,h,g)})};C.dashLine=function(b,a,c){c=+c||0;a=C.dashStyle(a,c);b.style({"stroke-dasharray":a,"stroke-width":c+"px"})};C.dashStyle=function(b,
a){a=Math.max(+a||1,3);"solid"===b?b="":"dot"===b?b=a+"px,"+a+"px":"dash"===b?b=3*a+"px,"+3*a+"px":"longdash"===b?b=5*a+"px,"+5*a+"px":"dashdot"===b?b=3*a+"px,"+a+"px,"+a+"px,"+a+"px":"longdashdot"===b&&(b=5*a+"px,"+2*a+"px,"+a+"px,"+2*a+"px");return b};C.singleFillStyle=function(b){var a=(((e.select(b.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;a&&b.call(d.fill,a)};C.fillGroupStyle=function(b){b.style("stroke-width",0).each(function(b){var a=e.select(this);b[0].trace&&a.call(d.fill,b[0].trace.fillcolor)})};
var B=a("./symbol_defs");C.symbolNames=[];C.symbolFuncs=[];C.symbolNeedLines={};C.symbolNoDot={};C.symbolNoFill={};C.symbolList=[];Object.keys(B).forEach(function(b){var a=B[b],c=a.n;C.symbolList.push(c,b,c+100,b+"-open");C.symbolNames[c]=b;C.symbolFuncs[c]=a.f;a.needLine&&(C.symbolNeedLines[c]=!0);a.noDot?C.symbolNoDot[c]=!0:C.symbolList.push(c+200,b+"-dot",c+300,b+"-open-dot");a.noFill&&(C.symbolNoFill[c]=!0)});var D=C.symbolNames.length;C.symbolNumber=function(b){if("string"===typeof b){var a=
0;0<b.indexOf("-open")&&(a=100,b=b.replace("-open",""));0<b.indexOf("-dot")&&(a+=200,b=b.replace("-dot",""));b=C.symbolNames.indexOf(b);0<=b&&(b+=a)}return b%100>=D||400<=b?0:Math.floor(Math.max(b,0))};a={x1:1,x2:0,y1:0,y2:0};q={x1:0,x2:0,y1:1,y2:0};var G=e.format("~.1f"),E={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:a},horizontalreversed:{node:"linearGradient",attrs:a,reversed:!0},vertical:{node:"linearGradient",attrs:q},
verticalreversed:{node:"linearGradient",attrs:q,reversed:!0}};C.gradient=function(b,a,c,f,h,k){for(var t=h.length,m=E[f],n=Array(t),u=0;u<t;u++)m.reversed?n[t-1-u]=[G(100*(1-h[u][0])),h[u][1]]:n[u]=[G(100*h[u][0]),h[u][1]];h=a._fullLayout;var v="g"+h._uid+"-"+c;c=h._defs.select(".gradients").selectAll("#"+v).data([f+n.join(";")],r.identity);c.exit().remove();c.enter().append(m.node).each(function(){var b=e.select(this);m.attrs&&b.attr(m.attrs);b.attr("id",v);b=b.selectAll("stop").data(n);b.exit().remove();
b.enter().append("stop");b.each(function(b){var a=l(b[1]);e.select(this).attr({offset:b[0]+"%","stop-color":d.tinyRGB(a),"stop-opacity":a.getAlpha()})})});b.style(k,g(v,a)).style(k+"-opacity",null);b="."+e.select(b.node().parentNode).attr("class").replace(/\s/g,".")+"\x3e."+b.attr("class").replace(/\s/g,".");h._gradientUrlQueryParts[b]=1};C.initGradients=function(b){b=b._fullLayout;r.ensureSingle(b._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove();b._gradientUrlQueryParts=
{}};C.pointStyle=function(b,a,c){if(b.size()){var d=C.makePointStyleFns(a);b.each(function(b){C.singlePointStyle(b,e.select(this),a,d,c)})}};C.singlePointStyle=function(b,a,c,e,f){var g=c.marker,h=g.line;a.style("opacity",e.selectedOpacityFn?e.selectedOpacityFn(b):void 0===b.mo?g.opacity:b.mo);if(e.ms2mrc){var k="various"===b.ms||"various"===g.size?3:e.ms2mrc(b.ms);b.mrc=k;e.selectedSizeFn&&(k=b.mrc=e.selectedSizeFn(b));var l=C.symbolNumber(b.mx||g.symbol)||0;b.om=100<=l%200;a.attr("d",n(l,k))}k=
!1;if(b.so){l=h.outlierwidth;var t=h.outliercolor;h=g.outliercolor}else l=(h||{}).width,l=(b.mlw+1||l+1||(b.trace?(b.trace.marker.line||{}).width:0)+1)-1||0,t="mlc"in b?b.mlcc=e.lineScale(b.mlc):r.isArrayOrTypedArray(h.color)?d.defaultLine:h.color,r.isArrayOrTypedArray(g.color)&&(k=!0),h="mc"in b?b.mcc=e.markerScale(b.mc):g.color||"rgba(0,0,0,0)",e.selectedColorFn&&(h=e.selectedColorFn(b));if(b.om)a.call(d.stroke,h).style({"stroke-width":(l||1)+"px",fill:"none"});else{a.style("stroke-width",(b.isBlank?
0:l)+"px");var m=g.gradient;(e=b.mgt)?k=!0:e=m&&m.type;Array.isArray(e)&&(e=e[0],E[e]||(e=0));e&&"none"!==e?((g=b.mgc)?k=!0:g=m.color,c=c.uid,k&&(c+="-"+b.i),C.gradient(a,f,c,e,[[0,g],[1,h]],"fill")):d.fill(a,h);l&&d.stroke(a,t)}};C.makePointStyleFns=function(b){var a={},c=b.marker;a.markerScale=C.tryColorscale(c,"");a.lineScale=C.tryColorscale(c,"line");f.traceIs(b,"symbols")&&(a.ms2mrc=A.isBubble(b)?z(b):function(){return(c.size||6)/2});b.selectedpoints&&r.extendFlat(a,C.makeSelectedPointStyleFns(b));
return a};C.makeSelectedPointStyleFns=function(b){var a={},c=b.marker||{},d=(b.selected||{}).marker||{},e=(b.unselected||{}).marker||{},g=d.opacity,h=e.opacity,k=void 0!==g,l=void 0!==h;if(r.isArrayOrTypedArray(c.opacity)||k||l)a.selectedOpacityFn=function(b){var a=void 0===b.mo?c.opacity:b.mo;return b.selected?k?g:a:l?h:y*a};var t=c.color,m=d.color,n=e.color;if(m||n)a.selectedColorFn=function(b){var a=b.mcc||t;return b.selected?m||a:n||a};var u=c.size,v=d.size,w=e.size,x=void 0!==v,z=void 0!==w;
f.traceIs(b,"symbols")&&(x||z)&&(a.selectedSizeFn=function(b){var a=b.mrc||u/2;return b.selected?x?v/2:a:z?w/2:a});return a};C.makeSelectedTextStyleFns=function(b){var a={},c=(b.textfont||{}).color,e=((b.selected||{}).textfont||{}).color,f=((b.unselected||{}).textfont||{}).color;a.selectedTextColorFn=function(b){var a=b.tc||c;return b.selected?e||a:f?f:e?a:d.addOpacity(a,y)};return a};C.selectedPointStyle=function(b,a){if(b.size()&&a.selectedpoints){var c=C.makeSelectedPointStyleFns(a),f=a.marker||
{},g=[];c.selectedOpacityFn&&g.push(function(b,a){b.style("opacity",c.selectedOpacityFn(a))});c.selectedColorFn&&g.push(function(b,a){d.fill(b,c.selectedColorFn(a))});c.selectedSizeFn&&g.push(function(b,a){var d=a.mx||f.symbol||0,e=c.selectedSizeFn(a);b.attr("d",n(C.symbolNumber(d),e));a.mrc2=e});g.length&&b.each(function(b){for(var a=e.select(this),c=0;c<g.length;c++)g[c](a,b)})}};C.tryColorscale=function(b,a){if(b=a?r.nestedProperty(b,a).get():b)if(a=b.color,(b.colorscale||b._colorAx)&&r.isArrayOrTypedArray(a))return c.makeColorScaleFuncFromTrace(b);
return r.identity};var F={start:1,end:-1,middle:0,bottom:1,top:-1};C.textPointStyle=function(b,a,c){if(b.size()){if(a.selectedpoints)var d=C.makeSelectedTextStyleFns(a).selectedTextColorFn;var f=a.texttemplate,g=c._fullLayout;b.each(function(b){var h=e.select(this),l=f?r.extractOption(b,a,"txt","texttemplate"):r.extractOption(b,a,"tx","text");if(l||0===l){if(f){var t=a._module.formatLabels?a._module.formatLabels(b,a,g):{},n={};x(n,a,b.i);l=r.texttemplateString(l,t,g._d3locale,n,b,a._meta||{})}t=b.tp||
a.textposition;n=m(b,a);var v=d?d(b):b.tc||a.textfont.color;h.call(C.font,b.tf||a.textfont.family,n,v).text(l).call(u.convertToTspans,c).call(k,t,n,b.mrc)}else h.remove()})}};C.selectedTextStyle=function(b,a){if(b.size()&&a.selectedpoints){var c=C.makeSelectedTextStyleFns(a);b.each(function(b){var f=e.select(this),g=c.selectedTextColorFn(b),h=b.tp||a.textposition,l=m(b,a);d.fill(f,g);k(f,h,l,b.mrc2||b.mrc)})}};C.smoothopen=function(b,a){if(3>b.length)return"M"+b.join("L");var c="M"+b[0],d=[],e;for(e=
1;e<b.length-1;e++)d.push(h(b[e-1],b[e],b[e+1],a));c+="Q"+d[0][0]+" "+b[1];for(e=2;e<b.length-1;e++)c+="C"+d[e-2][1]+" "+d[e-1][0]+" "+b[e];return c+="Q"+d[b.length-3][1]+" "+b[b.length-1]};C.smoothclosed=function(b,a){if(3>b.length)return"M"+b.join("L")+"Z";var c="M"+b[0],d=b.length-1,e=[h(b[d],b[0],b[1],a)],f;for(f=1;f<d;f++)e.push(h(b[f-1],b[f],b[f+1],a));e.push(h(b[d-1],b[d],b[0],a));for(f=1;f<=d;f++)c+="C"+e[f-1][1]+" "+e[f][0]+" "+b[f];return c+="C"+e[d][1]+" "+e[0][0]+" "+b[0]+"Z"};var L={hv:function(b,
a){return"H"+e.round(a[0],2)+"V"+e.round(a[1],2)},vh:function(b,a){return"V"+e.round(a[1],2)+"H"+e.round(a[0],2)},hvh:function(b,a){return"H"+e.round((b[0]+a[0])/2,2)+"V"+e.round(a[1],2)+"H"+e.round(a[0],2)},vhv:function(b,a){return"V"+e.round((b[1]+a[1])/2,2)+"H"+e.round(a[0],2)+"V"+e.round(a[1],2)}},J=function(b,a){return"L"+e.round(a[0],2)+","+e.round(a[1],2)};C.steps=function(b){var a=L[b]||J;return function(b){for(var c="M"+e.round(b[0][0],2)+","+e.round(b[0][1],2),d=1;d<b.length;d++)c+=a(b[d-
1],b[d]);return c}};C.makeTester=function(){var b=r.ensureSingleById(e.select("body"),"svg","js-plotly-tester",function(b){b.attr(v.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),a=r.ensureSingle(b,"path","js-reference-point",function(b){b.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});C.tester=b;C.testref=a};C.savedBBoxes={};var H=0;C.bBox=function(a,c,d){d||(d=b(a));var f;if(d){if(f=C.savedBBoxes[d])return r.extendFlat({},
f)}else if(1===a.childNodes.length){var g=a.childNodes[0];if(d=b(g)){f=+g.getAttribute("x")||0;var h=+g.getAttribute("y")||0,k=g.getAttribute("transform");if(!k)return d=C.bBox(g,!1,d),f&&(d.left+=f,d.right+=f),h&&(d.top+=h,d.bottom+=h),d;d+="~"+f+"~"+h+"~"+k;if(f=C.savedBBoxes[d])return r.extendFlat({},f)}}if(!c){var l=C.tester.node();a=a.cloneNode(!0);l.appendChild(a)}e.select(a).attr("transform",null).call(u.positionText,0,0);f=a.getBoundingClientRect();h=C.testref.node().getBoundingClientRect();
c||l.removeChild(a);c={height:f.height,width:f.width,left:f.left-h.left,top:f.top-h.top,right:f.right-h.left,bottom:f.bottom-h.top};1E4<=H&&(C.savedBBoxes={},H=0);d&&(C.savedBBoxes[d]=c);H++;return r.extendFlat({},c)};C.setClipUrl=function(b,a,c){b.attr("clip-path",g(a,c))};C.getTranslate=function(b){b=(b[b.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(b,a,c){return[a,c].join(" ")}).split(" ");return{x:+b[0]||0,y:+b[1]||0}};
C.setTranslate=function(b,a,c){var d=b.attr?"attr":"setAttribute",e=b[b.attr?"attr":"getAttribute"]("transform")||"";a=a||0;c=c||0;e=e.replace(/(\btranslate\(.*?\);?)/,"").trim();e=(e+(" translate("+a+", "+c+")")).trim();b[d]("transform",e);return e};C.getScale=function(b){b=(b[b.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(b,a,c){return[a,c].join(" ")}).split(" ");return{x:+b[0]||1,y:+b[1]||1}};C.setScale=function(b,a,c){var d=b.attr?
"attr":"setAttribute",e=b[b.attr?"attr":"getAttribute"]("transform")||"";a=a||1;c=c||1;e=e.replace(/(\bscale\(.*?\);?)/,"").trim();e=(e+(" scale("+a+", "+c+")")).trim();b[d]("transform",e);return e};var K=/\s*sc.*/;C.setPointGroupScale=function(b,a,c){a=a||1;c=c||1;if(b){var d=1===a&&1===c?"":" scale("+a+","+c+")";b.each(function(){var b=(this.getAttribute("transform")||"").replace(K,"");b+=d;b=b.trim();this.setAttribute("transform",b)})}};var M=/translate\([^)]*\)\s*$/;C.setTextPointsScale=function(b,
a,c){b&&b.each(function(){var b=e.select(this),d=b.select("text");if(d.node()){var f=parseFloat(d.attr("x")||0);var g=parseFloat(d.attr("y")||0);d=(b.attr("transform")||"").match(M);f=1===a&&1===c?[]:["translate("+f+","+g+")","scale("+a+","+c+")","translate("+-f+","+-g+")"];d&&f.push(d);b.attr("transform",f.join(" "))}})}},{"../../components/fx/helpers":626,"../../constants/alignment":685,"../../constants/interactions":691,"../../constants/xmlns_namespaces":693,"../../lib":716,"../../lib/svg_text_utils":740,
"../../registry":845,"../../traces/scatter/make_bubble_size_func":1136,"../../traces/scatter/subtypes":1143,"../color":591,"../colorscale":603,"./symbol_defs":613,d3:165,"fast-isnumeric":228,tinycolor2:535}],613:[function(a,q,p){var n=a("d3");q.exports={circle:{n:0,f:function(a){a=n.round(a,2);return"M"+a+",0A"+a+","+a+" 0 1,1 0,-"+a+"A"+a+","+a+" 0 0,1 "+a+",0Z"}},square:{n:1,f:function(a){a=n.round(a,2);return"M"+a+","+a+"H-"+a+"V-"+a+"H"+a+"Z"}},diamond:{n:2,f:function(a){a=n.round(1.3*a,2);return"M"+
a+",0L0,"+a+"L-"+a+",0L0,-"+a+"Z"}},cross:{n:3,f:function(a){var k=n.round(.4*a,2);a=n.round(1.2*a,2);return"M"+a+","+k+"H"+k+"V"+a+"H-"+k+"V"+k+"H-"+a+"V-"+k+"H-"+k+"V-"+a+"H"+k+"V-"+k+"H"+a+"Z"}},x:{n:4,f:function(a){a=n.round(.8*a/Math.sqrt(2),2);var k="l"+a+","+a,h="l"+a+",-"+a,b="l-"+a+",-"+a,g="l-"+a+","+a;return"M0,"+a+k+h+b+h+b+g+b+g+k+g+k+"Z"}},"triangle-up":{n:5,f:function(a){var k=n.round(2*a/Math.sqrt(3),2),h=n.round(a/2,2);a=n.round(a,2);return"M-"+k+","+h+"H"+k+"L0,-"+a+"Z"}},"triangle-down":{n:6,
f:function(a){var k=n.round(2*a/Math.sqrt(3),2),h=n.round(a/2,2);a=n.round(a,2);return"M-"+k+",-"+h+"H"+k+"L0,"+a+"Z"}},"triangle-left":{n:7,f:function(a){var k=n.round(2*a/Math.sqrt(3),2),h=n.round(a/2,2);a=n.round(a,2);return"M"+h+",-"+k+"V"+k+"L-"+a+",0Z"}},"triangle-right":{n:8,f:function(a){var k=n.round(2*a/Math.sqrt(3),2),h=n.round(a/2,2);a=n.round(a,2);return"M-"+h+",-"+k+"V"+k+"L"+a+",0Z"}},"triangle-ne":{n:9,f:function(a){var k=n.round(.6*a,2);a=n.round(1.2*a,2);return"M-"+a+",-"+k+"H"+
k+"V"+a+"Z"}},"triangle-se":{n:10,f:function(a){var k=n.round(.6*a,2);a=n.round(1.2*a,2);return"M"+k+",-"+a+"V"+k+"H-"+a+"Z"}},"triangle-sw":{n:11,f:function(a){var k=n.round(.6*a,2);a=n.round(1.2*a,2);return"M"+a+","+k+"H-"+k+"V-"+a+"Z"}},"triangle-nw":{n:12,f:function(a){var k=n.round(.6*a,2);a=n.round(1.2*a,2);return"M-"+k+","+a+"V-"+k+"H"+a+"Z"}},pentagon:{n:13,f:function(a){var k=n.round(.951*a,2),h=n.round(.588*a,2),b=n.round(-a,2),g=n.round(-.309*a,2);a=n.round(.809*a,2);return"M"+k+","+g+
"L"+h+","+a+"H-"+h+"L-"+k+","+g+"L0,"+b+"Z"}},hexagon:{n:14,f:function(a){var k=n.round(a,2),h=n.round(a/2,2);a=n.round(a*Math.sqrt(3)/2,2);return"M"+a+",-"+h+"V"+h+"L0,"+k+"L-"+a+","+h+"V-"+h+"L0,-"+k+"Z"}},hexagon2:{n:15,f:function(a){var k=n.round(a,2),h=n.round(a/2,2);a=n.round(a*Math.sqrt(3)/2,2);return"M-"+h+","+a+"H"+h+"L"+k+",0L"+h+",-"+a+"H-"+h+"L-"+k+",0Z"}},octagon:{n:16,f:function(a){var k=n.round(.924*a,2);a=n.round(.383*a,2);return"M-"+a+",-"+k+"H"+a+"L"+k+",-"+a+"V"+a+"L"+a+","+k+"H-"+
a+"L-"+k+","+a+"V-"+a+"Z"}},star:{n:17,f:function(a){var k=1.4*a;a=n.round(.225*k,2);var h=n.round(.951*k,2),b=n.round(.363*k,2),g=n.round(.588*k,2),e=n.round(-k,2),t=n.round(-.309*k,2),l=n.round(.118*k,2),f=n.round(.809*k,2);k=n.round(.382*k,2);return"M"+a+","+t+"H"+h+"L"+b+","+l+"L"+g+","+f+"L0,"+k+"L-"+g+","+f+"L-"+b+","+l+"L-"+h+","+t+"H-"+a+"L0,"+e+"Z"}},hexagram:{n:18,f:function(a){var k=n.round(.66*a,2),h=n.round(.38*a,2);a=n.round(.76*a,2);return"M-"+a+",0l-"+h+",-"+k+"h"+a+"l"+h+",-"+k+"l"+
h+","+k+"h"+a+"l-"+h+","+k+"l"+h+","+k+"h-"+a+"l-"+h+","+k+"l-"+h+",-"+k+"h-"+a+"Z"}},"star-triangle-up":{n:19,f:function(a){var k=n.round(a*Math.sqrt(3)*.8,2),h=n.round(.8*a,2),b=n.round(1.6*a,2);a=n.round(4*a,2);a="A "+a+","+a+" 0 0 1 ";return"M-"+k+","+h+a+k+","+h+a+"0,-"+b+a+"-"+k+","+h+"Z"}},"star-triangle-down":{n:20,f:function(a){var k=n.round(a*Math.sqrt(3)*.8,2),h=n.round(.8*a,2),b=n.round(1.6*a,2);a=n.round(4*a,2);a="A "+a+","+a+" 0 0 1 ";return"M"+k+",-"+h+a+"-"+k+",-"+h+a+"0,"+b+a+k+",-"+
h+"Z"}},"star-square":{n:21,f:function(a){var k=n.round(1.1*a,2);a=n.round(2*a,2);a="A "+a+","+a+" 0 0 1 ";return"M-"+k+",-"+k+a+"-"+k+","+k+a+k+","+k+a+k+",-"+k+a+"-"+k+",-"+k+"Z"}},"star-diamond":{n:22,f:function(a){var k=n.round(1.4*a,2);a=n.round(1.9*a,2);a="A "+a+","+a+" 0 0 1 ";return"M-"+k+",0"+a+"0,"+k+a+k+",0"+a+"0,-"+k+a+"-"+k+",0Z"}},"diamond-tall":{n:23,f:function(a){var k=n.round(.7*a,2);a=n.round(1.4*a,2);return"M0,"+a+"L"+k+",0L0,-"+a+"L-"+k+",0Z"}},"diamond-wide":{n:24,f:function(a){var k=
n.round(1.4*a,2);a=n.round(.7*a,2);return"M0,"+a+"L"+k+",0L0,-"+a+"L-"+k+",0Z"}},hourglass:{n:25,f:function(a){a=n.round(a,2);return"M"+a+","+a+"H-"+a+"L"+a+",-"+a+"H-"+a+"Z"},noDot:!0},bowtie:{n:26,f:function(a){a=n.round(a,2);return"M"+a+","+a+"V-"+a+"L-"+a+","+a+"V-"+a+"Z"},noDot:!0},"circle-cross":{n:27,f:function(a){a=n.round(a,2);return"M0,"+a+"V-"+a+"M"+a+",0H-"+a+"M"+a+",0A"+a+","+a+" 0 1,1 0,-"+a+"A"+a+","+a+" 0 0,1 "+a+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(a){var k=n.round(a,
2);a=n.round(a/Math.sqrt(2),2);return"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a+"M"+k+",0A"+k+","+k+" 0 1,1 0,-"+k+"A"+k+","+k+" 0 0,1 "+k+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(a){a=n.round(a,2);return"M0,"+a+"V-"+a+"M"+a+",0H-"+a+"M"+a+","+a+"H-"+a+"V-"+a+"H"+a+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(a){a=n.round(a,2);return"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a+"M"+a+","+a+"H-"+a+"V-"+a+"H"+a+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,
f:function(a){a=n.round(1.3*a,2);return"M"+a+",0L0,"+a+"L-"+a+",0L0,-"+a+"ZM0,-"+a+"V"+a+"M-"+a+",0H"+a},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(a){var k=n.round(1.3*a,2);a=n.round(.65*a,2);return"M"+k+",0L0,"+k+"L-"+k+",0L0,-"+k+"ZM-"+a+",-"+a+"L"+a+","+a+"M-"+a+","+a+"L"+a+",-"+a},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(a){a=n.round(1.4*a,2);return"M0,"+a+"V-"+a+"M"+a+",0H-"+a},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(a){a=n.round(a,2);return"M"+a+","+a+"L-"+
a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(a){var k=n.round(1.2*a,2);a=n.round(.85*a,2);return"M0,"+k+"V-"+k+"M"+k+",0H-"+k+"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(a){var k=n.round(a/2,2);a=n.round(a,2);return"M"+k+","+a+"V-"+a+"m-"+a+",0V"+a+"M"+a+","+k+"H-"+a+"m0,-"+a+"H"+a},needLine:!0,noFill:!0},"y-up":{n:37,f:function(a){var k=n.round(1.2*a,2),h=n.round(1.6*a,2);a=n.round(.8*
a,2);return"M-"+k+","+a+"L0,0M"+k+","+a+"L0,0M0,-"+h+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(a){var k=n.round(1.2*a,2),h=n.round(1.6*a,2);a=n.round(.8*a,2);return"M-"+k+",-"+a+"L0,0M"+k+",-"+a+"L0,0M0,"+h+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(a){var k=n.round(1.2*a,2),h=n.round(1.6*a,2);a=n.round(.8*a,2);return"M"+a+","+k+"L0,0M"+a+",-"+k+"L0,0M-"+h+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(a){var k=n.round(1.2*a,2),
h=n.round(1.6*a,2);a=n.round(.8*a,2);return"M-"+a+","+k+"L0,0M-"+a+",-"+k+"L0,0M"+h+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(a){a=n.round(1.4*a,2);return"M"+a+",0H-"+a},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(a){a=n.round(1.4*a,2);return"M0,"+a+"V-"+a},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(a){a=n.round(a,2);return"M"+a+",-"+a+"L-"+a+","+a},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(a){a=n.round(a,2);return"M"+a+","+
a+"L-"+a+",-"+a},needLine:!0,noDot:!0,noFill:!0}}},{d3:165}],614:[function(a,q,p){q.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",
min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],615:[function(a,q,p){function n(a,t,l,f){var d=t["error_"+f]||{},c=[];if(d.visible&&
-1!==["linear","log"].indexOf(l.type)){d=g(d);for(var e=0;e<a.length;e++){var m=a[e],n=m.i;if(void 0===n)n=e;else if(null===n)continue;var w=m[f];if(k(l.c2l(w))){var p=d(w,n);k(p[0])&&k(p[1])&&(n=m[f+"s"]=w-p[0],m=m[f+"h"]=w+p[1],c.push(n,m))}}a=t._extremes[l._id];l=h.findExtremes(l,c,b.extendFlat({tozero:a.opts.tozero},{padded:!0}));a.min=a.min.concat(l.min);a.max=a.max.concat(l.max)}}var k=a("fast-isnumeric"),m=a("../../registry"),h=a("../../plots/cartesian/axes"),b=a("../../lib"),g=a("./compute_error");
q.exports=function(b){for(var a=b.calcdata,e=0;e<a.length;e++){var f=a[e],d=f[0].trace;if(!0===d.visible&&m.traceIs(d,"errorBarsOK")){var c=h.getFromId(b,d.xaxis),g=h.getFromId(b,d.yaxis);n(f,d,c,"x");n(f,d,g,"y")}}}},{"../../lib":716,"../../plots/cartesian/axes":764,"../../registry":845,"./compute_error":616,"fast-isnumeric":228}],616:[function(a,q,p){function n(a,m){if("percent"===a)return function(a){return Math.abs(a*m/100)};if("constant"===a)return function(){return Math.abs(m)};if("sqrt"===
a)return function(a){return Math.sqrt(Math.abs(a))}}q.exports=function(a){var k=a.type,h=a.symmetric;if("data"===k){var b=a.array||[];if(h)return function(a,e){a=+b[e];return[a,a]};var g=a.arrayminus||[];return function(a,e){a=+b[e];e=+g[e];return isNaN(a)&&isNaN(e)?[NaN,NaN]:[e||0,a||0]}}var e=n(k,a.value),t=n(k,a.valueminus);return h||void 0===a.valueminus?function(b){b=e(b);return[b,b]}:function(b){return[t(b),e(b)]}}},{}],617:[function(a,q,p){var n=a("fast-isnumeric"),k=a("../../registry"),m=
a("../../lib"),h=a("../../plot_api/plot_template"),b=a("./attributes");q.exports=function(a,e,t,l){function f(a,d){return m.coerce(g,c,b,a,d)}var d="error_"+l.axis,c=h.newContainer(e,d),g=a[d]||{};if(!1!==f("visible",void 0!==g.array||void 0!==g.value||"sqrt"===g.type)){a=f("type","array"in g?"data":"percent");d=!0;"sqrt"!==a&&(d=f("symmetric",!(("data"===a?"arrayminus":"valueminus")in g)));if("data"===a)f("array"),f("traceref"),d||(f("arrayminus"),f("tracerefminus"));else if("percent"===a||"constant"===
a)f("value"),d||f("valueminus");a="copy_"+l.inherit+"style";l.inherit&&(e["error_"+l.inherit]||{}).visible&&f(a,!(g.color||n(g.thickness)||n(g.width)));l.inherit&&c[a]||(f("color",t),f("thickness"),f("width",k.traceIs(e,"gl3d")?0:4))}}},{"../../lib":716,"../../plot_api/plot_template":754,"../../registry":845,"./attributes":614,"fast-isnumeric":228}],618:[function(a,q,p){var n=a("../../lib");p=a("../../plot_api/edit_types").overrideAll;var k=a("./attributes"),m={error_x:n.extendFlat({},k),error_y:n.extendFlat({},
k)};delete m.error_x.copy_zstyle;delete m.error_y.copy_zstyle;delete m.error_y.copy_ystyle;n={error_x:n.extendFlat({},k),error_y:n.extendFlat({},k),error_z:n.extendFlat({},k)};delete n.error_x.copy_ystyle;delete n.error_y.copy_ystyle;delete n.error_z.copy_ystyle;delete n.error_z.copy_zstyle;q.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:m,bar:m,histogram:m,scatter3d:p(n,"calc","nested"),scattergl:p(m,"calc","nested")}},supplyDefaults:a("./defaults"),calc:a("./calc"),makeComputeError:a("./compute_error"),
plot:a("./plot"),style:a("./style"),hoverInfo:function(a,b,g){(b.error_y||{}).visible&&(g.yerr=a.yh-a.y,b.error_y.symmetric||(g.yerrneg=a.y-a.ys));(b.error_x||{}).visible&&(g.xerr=a.xh-a.x,b.error_x.symmetric||(g.xerrneg=a.x-a.xs))}}},{"../../lib":716,"../../plot_api/edit_types":747,"./attributes":614,"./calc":615,"./compute_error":616,"./defaults":617,"./plot":619,"./style":620}],619:[function(a,q,p){var n=a("d3"),k=a("fast-isnumeric"),m=a("../drawing"),h=a("../../traces/scatter/subtypes");q.exports=
function(b,a,e,t){var g,f=e.xaxis,d=e.yaxis,c=t&&0<t.duration;a.each(function(a){var l=a[0].trace,r=l.error_x||{},w=l.error_y||{},p;l.ids&&(p=function(b){return b.id});var A=h.hasMarkers(l)&&0<l.marker.maxdisplayed;w.visible||r.visible||(a=[]);l=n.select(this).selectAll("g.errorbar").data(a,p);l.exit().remove();a.length&&(r.visible||l.selectAll("path.xerror").remove(),w.visible||l.selectAll("path.yerror").remove(),l.style("opacity",1),a=l.enter().append("g").classed("errorbar",!0),c&&a.style("opacity",
0).transition().duration(t.duration).style("opacity",1),m.setClipUrl(l,e.layerClipId,b),l.each(function(b){var a=n.select(this),e=f.c2p(b.x),h=d.c2p(b.y);if(void 0!==b.yh){var l=d.c2p(b.yh);var m=d.c2p(b.ys);if(!k(m)){var u=!0;m=d.c2p(b.ys,!0)}}if(void 0!==b.xh){var v=f.c2p(b.xh);var z=f.c2p(b.xs);if(!k(z)){var p=!0;z=f.c2p(b.xs,!0)}}if(!A||b.vis){b=a.select("path.yerror");if(w.visible&&k(e)&&k(l)&&k(m)){var q=w.width;e="M"+(e-q)+","+l+"h"+2*q+"m-"+q+",0V"+m;u||(e+="m-"+q+",0h"+2*q);(g=!b.size())?
b=a.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):c&&(b=b.transition().duration(t.duration).ease(t.easing));b.attr("d",e)}else b.remove();u=a.select("path.xerror");r.visible&&k(h)&&k(v)&&k(z)?(l=(r.copy_ystyle?w:r).width,e="M"+v+","+(h-l)+"v"+2*l+"m0,-"+l+"H"+z,p||(e+="m0,-"+l+"v"+2*l),(g=!u.size())?u=a.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):c&&(u=u.transition().duration(t.duration).ease(t.easing)),u.attr("d",e)):u.remove()}}))})}},
{"../../traces/scatter/subtypes":1143,"../drawing":612,d3:165,"fast-isnumeric":228}],620:[function(a,q,p){var n=a("d3"),k=a("../color");q.exports=function(a){a.each(function(a){var b=a[0].trace;a=b.error_y||{};b=b.error_x||{};var g=n.select(this);g.selectAll("path.yerror").style("stroke-width",a.thickness+"px").call(k.stroke,a.color);b.copy_ystyle&&(b=a);g.selectAll("path.xerror").style("stroke-width",b.thickness+"px").call(k.stroke,b.color)})}},{"../color":591,d3:165}],621:[function(a,q,p){p=a("../../plots/font_attributes");
var n=a("./layout_attributes").hoverlabel;a=a("../../lib/extend").extendFlat;q.exports={hoverlabel:{bgcolor:a({},n.bgcolor,{arrayOk:!0}),bordercolor:a({},n.bordercolor,{arrayOk:!0}),font:p({arrayOk:!0,editType:"none"}),align:a({},n.align,{arrayOk:!0}),namelength:a({},n.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":707,"../../plots/font_attributes":790,"./layout_attributes":630}],622:[function(a,q,p){function n(a,b,g,e){e=e||k.identity;Array.isArray(a)&&(b[0][g]=e(a))}var k=a("../../lib"),
m=a("../../registry");q.exports=function(a){function b(b){return function(a){return k.coerceHoverinfo({hoverinfo:a},{_module:b._module},e)}}var g=a.calcdata,e=a._fullLayout;for(a=0;a<g.length;a++){var h=g[a],l=h[0].trace;if(!m.traceIs(l,"pie-like")){var f=m.traceIs(l,"2dMap")?n:k.fillArray;f(l.hoverinfo,h,"hi",b(l));l.hovertemplate&&f(l.hovertemplate,h,"ht");l.hoverlabel&&(f(l.hoverlabel.bgcolor,h,"hbg"),f(l.hoverlabel.bordercolor,h,"hbc"),f(l.hoverlabel.font.size,h,"hts"),f(l.hoverlabel.font.color,
h,"htc"),f(l.hoverlabel.font.family,h,"htf"),f(l.hoverlabel.namelength,h,"hnl"),f(l.hoverlabel.align,h,"hta"))}}}},{"../../lib":716,"../../registry":845}],623:[function(a,q,p){var n=a("../../registry"),k=a("./hover").hover;q.exports=function(a,h,b){function g(){a.emit("plotly_click",{points:a._hoverdata,event:h})}var e=n.getComponentMethod("annotations","onClick")(a,a._hoverdata);void 0!==b&&k(a,h,b,!0);a._hoverdata&&h&&h.target&&(e&&e.then?e.then(g):g(),h.stopImmediatePropagation&&h.stopImmediatePropagation())}},
{"../../registry":845,"./hover":627}],624:[function(a,q,p){q.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],625:[function(a,q,p){var n=a("../../lib"),k=a("./attributes"),m=a("./hoverlabel_defaults");q.exports=function(a,b,g,e){g=n.extendFlat({},e.hoverlabel);b.hovertemplate&&(g.namelength=-1);m(a,b,function(e,g){return n.coerce(a,b,k,e,g)},g)}},{"../../lib":716,"./attributes":621,"./hoverlabel_defaults":628}],
626:[function(a,q,p){function n(a,b){if(Array.isArray(b)){if(Array.isArray(a)&&Array.isArray(a[b[0]]))return a[b[0]][b[1]]}else return a[b]}var k=a("../../lib");p.getSubplot=function(a){return a.subplot||a.xaxis+a.yaxis||a.geo};p.isTraceInSubplots=function(a,b){if("splom"===a.type){var g=a.xaxes||[];a=a.yaxes||[];for(var e=0;e<g.length;e++)for(var h=0;h<a.length;h++)if(-1!==b.indexOf(g[e]+a[h]))return!0;return!1}return-1!==b.indexOf(p.getSubplot(a))};p.flat=function(a,b){for(var g=Array(a.length),
e=0;e<a.length;e++)g[e]=b;return g};p.p2c=function(a,b){for(var g=Array(a.length),e=0;e<a.length;e++)g[e]=a[e].p2c(b);return g};p.getDistanceFunction=function(a,b,g,e){return"closest"===a?e||p.quadrature(b,g):"x"===a?b:g};p.getClosest=function(a,b,g){if(!1!==g.index)0<=g.index&&g.index<a.length?g.distance=0:g.index=!1;else for(var e=0;e<a.length;e++){var h=b(a[e]);h<=g.distance&&(g.index=e,g.distance=h)}return g};p.inbox=function(a,b,g){return 0>a*b||0===a?g:Infinity};p.quadrature=function(a,b){return function(g){var e=
a(g);g=b(g);return Math.sqrt(e*e+g*g)}};p.makeEventData=function(a,b,g){var e="index"in a?a.index:a.pointNumber,h={data:b._input,fullData:b,curveNumber:b.index,pointNumber:e};if(b._indexToPoints){var k=b._indexToPoints[e];1===k.length?h.pointIndex=k[0]:h.pointIndices=k}else h.pointIndex=e;b._module.eventData?h=b._module.eventData(h,a,b,g,e):("xVal"in a?h.x=a.xVal:"x"in a&&(h.x=a.x),"yVal"in a?h.y=a.yVal:"y"in a&&(h.y=a.y),a.xa&&(h.xaxis=a.xa),a.ya&&(h.yaxis=a.ya),void 0!==a.zLabelVal&&(h.z=a.zLabelVal));
p.appendArrayPointValue(h,b,e);return h};p.appendArrayPointValue=function(a,b,g){var e=b._arrayAttrs;if(e)for(var h=0;h<e.length;h++){var l=e[h],f=m[l]||l;void 0===a[f]&&(l=k.nestedProperty(b,l).get(),l=n(l,g),void 0!==l&&(a[f]=l))}};p.appendArrayMultiPointValues=function(a,b,g){var e=b._arrayAttrs;if(e)for(var h=0;h<e.length;h++){var l=e[h],f=m[l]||l;if(void 0===a[f]){l=k.nestedProperty(b,l).get();for(var d=Array(g.length),c=0;c<g.length;c++)d[c]=n(l,g[c]);a[f]=d}}};var m={ids:"id",locations:"location",
labels:"label",values:"value","marker.colors":"color",parents:"parent"}},{"../../lib":716}],627:[function(a,q,p){function n(a,d,t,n){function u(b,a){for(var c=null,d=Infinity,e,f=0;f<b.length;f++)e=b[f].spikeDistance,e<d&&e<=a&&(c=b[f],d=e);return c}function w(b){return b?{xa:b.xa,ya:b.ya,x:void 0!==b.xSpike?b.xSpike:(b.x0+b.x1)/2,y:void 0!==b.ySpike?b.ySpike:(b.y0+b.y1)/2,distance:b.distance,spikeDistance:b.spikeDistance,curveNumber:b.trace.index,color:b.color,pointNumber:b.index}:null}t||(t="xy");
var z=Array.isArray(t)?t:[t],p=a._fullLayout,q=p._plots||[];t=q[t];var B=p._has("cartesian");t&&(t=t.overlays.map(function(b){return b.id}),z=z.concat(t));var D=z.length;t=Array(D);for(var E=Array(D),I=!1,H=0;H<D;H++){var M=z[H];if(q[M])I=!0,t[H]=q[M].xaxis,E[H]=q[M].yaxis;else if(p[M]&&p[M]._subplot)M=p[M]._subplot,t[H]=M.xaxis,E[H]=M.yaxis;else{c.warn("Unrecognized subplot: "+M);return}}(q=d.hovermode||p.hovermode)&&!I&&(q="closest");if(-1===["x","y","closest"].indexOf(q)||!a.calcdata||a.querySelector(".zoombox")||
a._dragging)return A.unhoverRaw(a,d);var K=-1===p.hoverdistance?Infinity:p.hoverdistance,G=-1===p.spikedistance?Infinity:p.spikedistance;I=[];D=[];var N,F;M={hLinePoint:null,vLinePoint:null};H=!1;if(Array.isArray(d))for(q="array",N=0;N<d.length;N++){if(F=a.calcdata[d[N].curveNumber||0]){var J=F[0].trace;"skip"!==F[0].trace.hoverinfo&&(D.push(F),"h"===J.orientation&&(H=!0))}}else{for(N=0;N<a.calcdata.length;N++)F=a.calcdata[N],J=F[0].trace,"skip"!==J.hoverinfo&&C.isTraceInSubplots(J,z)&&(D.push(F),
"h"===J.orientation&&(H=!0));if(d.target){if(!1===r.triggerHandler(a,"plotly_beforehover",d))return;var L=d.target.getBoundingClientRect();var na=d.clientX-L.left;L=d.clientY-L.top;if(0>na||na>t[0]._length||0>L||L>E[0]._length)return A.unhoverRaw(a,d)}else na="xpx"in d?d.xpx:t[0]._length/2,L="ypx"in d?d.ypx:E[0]._length/2;d.pointerX=na+t[0]._offset;d.pointerY=L+E[0]._offset;na="xval"in d?C.flat(z,d.xval):C.p2c(t,na);L="yval"in d?C.flat(z,d.yval):C.p2c(E,L);if(!f(na[0])||!f(L[0]))return c.warn("Fx.hover failed",
d,a),A.unhoverRaw(a,d)}var ha=Infinity;for(N=0;N<D.length;N++)if((F=D[N])&&F[0]&&F[0].trace&&(J=F[0].trace,!0===J.visible&&0!==J._length&&-1===["carpet","contourcarpet"].indexOf(J._module.name))){if("splom"===J.type){var ja=0;var oa=z[ja]}else oa=C.getSubplot(J),ja=z.indexOf(oa);var ka=q;F={cd:F,trace:J,xa:t[ja],ya:E[ja],maxHoverDistance:K,maxSpikeDistance:G,index:!1,distance:Math.min(ha,K),spikeDistance:Infinity,xSpike:void 0,ySpike:void 0,color:y.defaultLine,name:J.name,x0:void 0,x1:void 0,y0:void 0,
y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0};p[oa]&&(F.subplot=p[oa]._subplot);p._splomScenes&&p._splomScenes[J.uid]&&(F.scene=p._splomScenes[J.uid]);oa=I.length;if("array"===ka)if(ja=d[N],"pointNumber"in ja)F.index=ja.pointNumber,ka="closest";else{ka="";if("xval"in ja){var ia=ja.xval;ka="x"}if("yval"in ja){var xa=ja.yval;ka=ka?"closest":"y"}}else ia=na[ja],xa=L[ja];if(0!==K)if(J._module&&J._module.hoverPoints){if(ka=J._module.hoverPoints(F,ia,xa,ka,p._hoverlayer))for(var ya=
0;ya<ka.length;ya++)ja=ka[ya],f(ja.x0)&&f(ja.y0)&&I.push(b(ja,q))}else c.log("Unrecognized trace type in hover:",J);"closest"===q&&I.length>oa&&(I.splice(0,oa),ha=I[0].distance);B&&0!==G&&0===I.length&&(F.distance=G,F.index=!1,(J=J._module.hoverPoints(F,ia,xa,"closest",p._hoverlayer))&&(J=J.filter(function(b){return b.spikeDistance<=G})),J&&J.length)&&(F=J.filter(function(b){return b.xa.showspikes}),F.length&&(F=F[0],f(F.x0)&&f(F.y0)&&(F=w(F),!M.vLinePoint||M.vLinePoint.spikeDistance>F.spikeDistance))&&
(M.vLinePoint=F),J=J.filter(function(b){return b.ya.showspikes}),J.length&&(J=J[0],f(J.x0)&&f(J.y0)&&(F=w(J),!M.hLinePoint||M.hLinePoint.spikeDistance>F.spikeDistance))&&(M.hLinePoint=F))}z={fullLayout:p,container:p._hoverlayer,outerContainer:p._paperdiv,event:d};a._spikepoints={vLinePoint:M.vLinePoint,hLinePoint:M.hLinePoint};B&&0!==G&&0!==I.length&&(ia=I.filter(function(b){return b.ya.showspikes}),ia=u(ia,G),M.hLinePoint=w(ia),ia=I.filter(function(b){return b.xa.showspikes}),ia=u(ia,G),M.vLinePoint=
w(ia));if(0===I.length)return d=A.unhoverRaw(a,d),!B||null===M.hLinePoint&&null===M.vLinePoint||g(a,M,z),d;B&&g(a,M,z);I.sort(function(b,a){return b.distance-a.distance});B=a._hoverdata;z=[];for(N=0;N<I.length;N++)ia=I[N],xa=C.makeEventData(ia,ia.trace,ia.cd),!1!==ia.hovertemplate&&(M=!1,ia.cd[ia.index]&&ia.cd[ia.index].ht&&(M=ia.cd[ia.index].ht),ia.hovertemplate=M||ia.trace.hovertemplate||!1),ia.eventData=[xa],z.push(xa);a._hoverdata=z;D="y"===q&&(1<D.length||1<I.length)||"closest"===q&&H&&1<I.length;
H=y.combine(p.plot_bgcolor||y.background,p.paper_bgcolor);q=k(I,{hovermode:q,rotateLabels:D,bgColor:H,container:p._hoverlayer,outerContainer:p._paperdiv,commonLabelOpts:p.hoverlabel,hoverdistance:p.hoverdistance},a);m(q,D?"xa":"ya",p);h(q,D);d.target&&d.target.tagName&&(p=x.getComponentMethod("annotations","hasClickToShow")(a,z),v(l.select(d.target),p?"pointer":""));d.target&&!n&&e(a,d,B)&&(B&&a.emit("plotly_unhover",{event:d,points:B}),a.emit("plotly_hover",{event:d,points:a._hoverdata,xaxes:t,yaxes:E,
xvals:na,yvals:L}))}function k(b,a,d){var e=d._fullLayout,f=a.hovermode,g=a.rotateLabels,h=a.bgColor,k=a.container,r=a.outerContainer,m=a.commonLabelOpts||{},n=a.fontFamily||B.HOVERFONT,v=a.fontSize||B.HOVERFONTSIZE,x=b[0],z=x.xa,A=x.ya,p="y"===f?"yLabel":"xLabel",q=x[p],C=(String(q)||"").split(" ")[0];r=r.node().getBoundingClientRect();var E=r.top,I=r.width,M=r.height,G=void 0!==q&&x.distance<=a.hoverdistance&&("x"===f||"y"===f);if(G){a=!0;var K;for(r=0;r<b.length;r++)if(a&&void 0===b[r].zLabel&&
(a=!1),K=b[r].hoverinfo||b[r].trace.hoverinfo)if(K=Array.isArray(K)?K:K.split("+"),-1===K.indexOf("all")&&-1===K.indexOf(f)){G=!1;break}a&&(G=!1)}a=k.selectAll("g.axistext").data(G?[0]:[]);a.enter().append("g").classed("axistext",!0);a.exit().remove();a.each(function(){var a=l.select(this),g=c.ensureSingle(a,"path","",function(b){b.style({"stroke-width":"1px"})}),h=c.ensureSingle(a,"text","",function(b){b.attr("data-notex",1)}),k=m.bgcolor||y.defaultLine,r=m.bordercolor||y.contrast(k),t=y.contrast(k),
B={family:m.font.family||n,size:m.font.size||v,color:m.font.color||t};g.style({fill:k,stroke:r});h.text(q).call(w.font,B).call(u.positionText,0,0).call(u.convertToTspans,d);a.attr("transform","");var D=h.node().getBoundingClientRect();if("x"===f)t="top"===z.side?"-":"",h.attr("text-anchor","middle").call(u.positionText,0,"top"===z.side?E-D.bottom-L-J:E-D.top+L+J),k=z._offset+(x.x0+x.x1)/2,r=A._offset+("top"===z.side?0:A._length),h=D.width/2+J,k<h?(k=h,g.attr("d","M-"+(h-L)+",0L-"+(h-2*L)+","+t+L+
"H"+(J+D.width/2)+"v"+t+(2*J+D.height)+"H-"+h+"V"+t+L+"Z")):k>e.width-h?(k=e.width-h,g.attr("d","M"+(h-L)+",0L"+h+","+t+L+"v"+t+(2*J+D.height)+"H-"+h+"V"+t+L+"H"+(h-2*L)+"Z")):g.attr("d","M0,0L"+L+","+t+L+"H"+(J+D.width/2)+"v"+t+(2*J+D.height)+"H-"+(J+D.width/2)+"V"+t+L+"H-"+L+"Z");else{if("right"===A.side){t="start";var I=1;var H="";k=z._offset+z._length}else t="end",I=-1,H="-",k=z._offset;r=A._offset+(x.y0+x.y1)/2;h.attr("text-anchor",t);g.attr("d","M0,0L"+H+L+","+L+"V"+(J+D.height/2)+"h"+H+(2*
J+D.width)+"V-"+(J+D.height/2)+"H"+H+L+"V-"+L+"Z");var M=D.height/2;H=E-D.top-M;g="clip"+e._uid+"commonlabel"+A._id;if(k<D.width+2*J+L){I="M-"+(L+J)+"-"+M+"h-"+(D.width-J)+"V"+M+"h"+(D.width-J)+"Z";var G=D.width-k+J;u.positionText(h,G,H);"end"===t&&h.selectAll("tspan").each(function(){var b=l.select(this),a=w.tester.append("text").text(b.text()).call(w.font,B),c=a.node().getBoundingClientRect();Math.round(c.width)<Math.round(D.width)&&b.attr("x",G-c.width);a.remove()})}else u.positionText(h,I*(J+
L),H),I=null;t=e._topclips.selectAll("#"+g).data(I?[0]:[]);t.enter().append("clipPath").attr("id",g).append("path");t.exit().remove();t.select("path").attr("d",I);w.setClipUrl(h,I?g:null,d)}a.attr("transform","translate("+k+","+r+")");b=b.filter(function(b){return void 0!==b.zLabelVal||(b[p]||"").split(" ")[0]===C})});k=k.selectAll("g.hovertext").data(b,function(b){return[b.trace.index,b.index,b.x0,b.y0,b.name,b.attr,b.xa,b.ya||""].join()});k.enter().append("g").classed("hovertext",!0).each(function(){var b=
l.select(this);b.append("rect").call(y.fill,y.addOpacity(h,.8));b.append("text").classed("name",!0);b.append("path").style("stroke-width","1px");b.append("text").classed("nums",!0).call(w.font,n,v)});k.exit().remove();k.each(function(b){var a=l.select(this).attr("transform",""),k="",r="",m=b.bgcolor||b.color,x=y.combine(y.opacity(m)?m:y.defaultLine,h),z=y.combine(y.opacity(b.color)?b.color:y.defaultLine,h),A=b.borderColor||y.contrast(x);void 0!==b.nameOverride&&(b.name=b.nameOverride);b.name&&(b.trace._meta&&
(b.name=c.templateString(b.name,b.trace._meta)),k=t(b.name,b.nameLength));void 0!==b.zLabel?(void 0!==b.xLabel&&(r+="x: "+b.xLabel+"\x3cbr\x3e"),void 0!==b.yLabel&&(r+="y: "+b.yLabel+"\x3cbr\x3e"),"choropleth"!==b.trace.type&&"choroplethmapbox"!==b.trace.type&&(r+=(r?"z: ":"")+b.zLabel)):G&&b[f+"Label"]===q?r=b[("x"===f?"y":"x")+"Label"]||"":void 0===b.xLabel?void 0!==b.yLabel&&"scattercarpet"!==b.trace.type&&(r=b.yLabel):r=void 0===b.yLabel?b.xLabel:"("+b.xLabel+", "+b.yLabel+")";!b.text&&0!==b.text||
Array.isArray(b.text)||(r+=(r?"\x3cbr\x3e":"")+b.text);void 0!==b.extraText&&(r+=(r?"\x3cbr\x3e":"")+b.extraText);""!==r||b.hovertemplate||(""===k&&a.remove(),r=k);m=e._d3locale;var p=b.hovertemplate||!1,B=b.hovertemplateLabels||b,C=b.eventData[0]||{};p&&(r=c.hovertemplateString(p,B,m,C,b.trace._meta),r=r.replace(H,function(a,c){k=t(c,b.nameLength);return""}));m=a.select("text.nums").call(w.font,b.fontFamily||n,b.fontSize||v,b.fontColor||A).text(r).attr("data-notex",1).call(u.positionText,0,0).call(u.convertToTspans,
d);p=a.select("text.name");C=B=0;k&&k!==r?(p.call(w.font,b.fontFamily||n,b.fontSize||v,z).text(k).attr("data-notex",1).call(u.positionText,0,0).call(u.convertToTspans,d),C=p.node().getBoundingClientRect(),B=C.width+2*J,C=C.height+2*J):(p.remove(),a.select("rect").remove());a.select("path").style({fill:x,stroke:A});var K=m.node().getBoundingClientRect();r=b.xa._offset+(b.x0+b.x1)/2;x=b.ya._offset+(b.y0+b.y1)/2;A=Math.abs(b.x1-b.x0);z=Math.abs(b.y1-b.y0);var N=K.width+L+J+B;b.ty0=E-K.top;b.bx=K.width+
2*J;b.by=Math.max(K.height+2*J,C);b.anchor="start";b.txwidth=K.width;b.tx2width=B;b.offset=0;g?(b.pos=r,C=x+z/2+N<=M,("top"===b.idealAlign||!C)&&0<=x-z/2-N?(x-=z/2,b.anchor="end"):C?(x+=z/2,b.anchor="start"):b.anchor="middle"):(b.pos=x,C=r+A/2+N<=I,("left"===b.idealAlign||!C)&&0<=r-A/2-N?(r-=A/2,b.anchor="end"):C?(r+=A/2,b.anchor="start"):(b.anchor="middle",A=N/2,C=r+A-I,A=r-A,0<C&&(r-=C),0>A&&(r+=-A)));m.attr("text-anchor",b.anchor);B&&p.attr("text-anchor",b.anchor);a.attr("transform","translate("+
r+","+x+")"+(g?"rotate("+D+")":""))});return k}function m(b,a,c){function d(b){var a=b[0],c=b[b.length-1];r=a.pmin-a.pos-a.dp+a.size;t=c.pos+c.dp+c.size-a.pmax;if(.01<r){for(n=b.length-1;0<=n;n--)b[n].dp+=r;l=!1}if(!(.01>t)){if(-.01>r){for(n=b.length-1;0<=n;n--)b[n].dp-=t;l=!1}if(l){for(m=c=0;m<b.length;m++)u=b[m],u.pos+u.dp+u.size>a.pmax&&c++;for(m=b.length-1;0<=m&&!(0>=c);m--)u=b[m],u.pos>a.pmax-1&&(u.del=!0,c--);for(m=0;m<b.length&&!(0>=c);m++)if(u=b[m],u.pos<a.pmin+1)for(u.del=!0,c--,t=2*u.size,
n=b.length-1;0<=n;n--)b[n].dp-=t;for(m=b.length-1;0<=m&&!(0>=c);m--)u=b[m],u.pos+u.dp+u.size>a.pmax&&(u.del=!0,c--)}}}var e=0,f=1,g=b.size(),h=Array(g),k=0;b.each(function(b){var d=b[a],e="x"===d._id.charAt(0);d=d.range;0===k&&d&&d[0]>d[1]!==e&&(f=-1);h[k++]=[{datum:b,traceIndex:b.trace.index,dp:0,pos:b.pos,posref:b.posref,size:b.by*(e?G:1)/2,pmin:0,pmax:e?c.width:c.height}]});h.sort(function(b,a){return b[0].posref-a[0].posref||f*(a[0].traceIndex-b[0].traceIndex)});for(var l,r,t,m,n,u,v;!l&&e<=g;){e++;
l=!0;for(m=0;m<h.length-1;){b=h[m];v=h[m+1];var w=b[b.length-1],x=v[0];r=w.pos+w.dp+w.size-x.pos-x.dp+x.size;if(.01<r&&w.pmin===x.pmin&&w.pmax===x.pmax){for(n=v.length-1;0<=n;n--)v[n].dp+=r;b.push.apply(b,v);h.splice(m+1,1);v=0;for(n=b.length-1;0<=n;n--)v+=b[n].dp;t=v/b.length;for(n=b.length-1;0<=n;n--)b[n].dp-=t;l=!1}else m++}h.forEach(d)}for(m=h.length-1;0<=m;m--)for(e=h[m],n=e.length-1;0<=n;n--)g=e[n],b=g.datum,b.offset=g.dp,b.del=g.del}function h(b,a){b.each(function(b){var c=l.select(this);if(b.del)return c.remove();
var d=c.select("text.nums"),e=b.anchor,f="end"===e?-1:1,g={start:1,end:-1,middle:0}[e],h=g*(L+J),k=h+g*(b.txwidth+J),r=0,t=b.offset;"middle"===e&&(h-=b.tx2width/2,k+=b.txwidth/2+J);a&&(t*=-F,r=b.offset*E);c.select("path").attr("d","middle"===e?"M-"+(b.bx/2+b.tx2width/2)+","+(t-b.by/2)+"h"+b.bx+"v"+b.by+"h-"+b.bx+"Z":"M0,0L"+(f*L+r)+","+(L+t)+"v"+(b.by/2-L)+"h"+f*b.bx+"v-"+b.by+"H"+(f*L+r)+"V"+(t-L)+"Z");f=h+r;h=t+b.ty0-b.by/2+J;var m=b.textAlign||"auto";"auto"!==m&&("left"===m&&"start"!==e?(d.attr("text-anchor",
"start"),f="middle"===e?-b.bx/2-b.tx2width/2+J:-b.bx-J):"right"===m&&"end"!==e&&(d.attr("text-anchor","end"),f="middle"===e?b.bx/2-b.tx2width/2-J:b.bx+J));d.call(u.positionText,f,h);b.tx2width&&(c.select("text.name").call(u.positionText,k+g*J+r,t+b.ty0-b.by/2+J),c.select("rect").call(w.setRect,k+(g-1)*b.tx2width/2+r,t-b.by/2-1,b.tx2width,b.by+2))})}function b(b,a){function d(b){return b||f(b)&&0===b}function e(a,c,e){c=r(c,e);d(c)&&(b[a]=c)}var g=b.index,h=b.trace||{},k=b.cd[0],l=b.cd[g]||{},r=Array.isArray(g)?
function(b,a){b=c.castOption(k,g,b);return d(b)?b:c.extractOption({},h,"",a)}:function(b,a){return c.extractOption(l,h,b,a)};e("hoverinfo","hi","hoverinfo");e("bgcolor","hbg","hoverlabel.bgcolor");e("borderColor","hbc","hoverlabel.bordercolor");e("fontFamily","htf","hoverlabel.font.family");e("fontSize","hts","hoverlabel.font.size");e("fontColor","htc","hoverlabel.font.color");e("nameLength","hnl","hoverlabel.namelength");e("textAlign","hta","hoverlabel.align");b.posref="y"===a||"closest"===a&&"h"===
h.orientation?b.xa._offset+(b.x0+b.x1)/2:b.ya._offset+(b.y0+b.y1)/2;b.x0=c.constrain(b.x0,0,b.xa._length);b.x1=c.constrain(b.x1,0,b.xa._length);b.y0=c.constrain(b.y0,0,b.ya._length);b.y1=c.constrain(b.y1,0,b.ya._length);void 0!==b.xLabelVal&&(b.xLabel="xLabel"in b?b.xLabel:z.hoverLabelText(b.xa,b.xLabelVal),b.xVal=b.xa.c2d(b.xLabelVal));void 0!==b.yLabelVal&&(b.yLabel="yLabel"in b?b.yLabel:z.hoverLabelText(b.ya,b.yLabelVal),b.yVal=b.ya.c2d(b.yLabelVal));void 0!==b.zLabelVal&&void 0===b.zLabel&&(b.zLabel=
String(b.zLabelVal));if(!(isNaN(b.xerr)||"log"===b.xa.type&&0>=b.xerr)){var t=z.tickText(b.xa,b.xa.c2l(b.xerr),"hover").text;b.xLabel=void 0!==b.xerrneg?b.xLabel+(" +"+t+" / -"+z.tickText(b.xa,b.xa.c2l(b.xerrneg),"hover").text):b.xLabel+("  "+t);"x"===a&&(b.distance+=1)}isNaN(b.yerr)||"log"===b.ya.type&&0>=b.yerr||(t=z.tickText(b.ya,b.ya.c2l(b.yerr),"hover").text,b.yLabel=void 0!==b.yerrneg?b.yLabel+(" +"+t+" / -"+z.tickText(b.ya,b.ya.c2l(b.yerrneg),"hover").text):b.yLabel+("  "+t),"y"===a&&(b.distance+=
1));(a=b.hoverinfo||b.trace.hoverinfo)&&"all"!==a&&(a=Array.isArray(a)?a:a.split("+"),-1===a.indexOf("x")&&(b.xLabel=void 0),-1===a.indexOf("y")&&(b.yLabel=void 0),-1===a.indexOf("z")&&(b.zLabel=void 0),-1===a.indexOf("text")&&(b.text=void 0),-1===a.indexOf("name")&&(b.name=void 0));return b}function g(b,a,c){var e=c.container,f=c.fullLayout,g=f._size;c=c.event;var h=!!a.hLinePoint,k=!!a.vLinePoint;e.selectAll(".spikeline").remove();if(k||h){f=y.combine(f.plot_bgcolor,f.paper_bgcolor);if(h){var l=
a.hLinePoint;var r=l&&l.xa;h=l&&l.ya;if("cursor"===h.spikesnap){var t=c.pointerX;r=c.pointerY}else t=r._offset+l.x,r=h._offset+l.y;var m=1.5>d.readability(l.color,f)?y.contrast(f):l.color;l=h.spikemode;var n=h.spikethickness;m=h.spikecolor||m;var u=z.getPxPosition(b,h);if(-1!==l.indexOf("toaxis")||-1!==l.indexOf("across")){if(-1!==l.indexOf("toaxis")){var v=u;var x=t}-1!==l.indexOf("across")&&(v=h._counterDomainMin,x=h._counterDomainMax,"free"===h.anchor&&(v=Math.min(v,h.position),x=Math.max(x,h.position)),
v=g.l+v*g.w,x=g.l+x*g.w);e.insert("line",":first-child").attr({x1:v,x2:x,y1:r,y2:r,"stroke-width":n,stroke:m,"stroke-dasharray":w.dashStyle(h.spikedash,n)}).classed("spikeline",!0).classed("crisp",!0);e.insert("line",":first-child").attr({x1:v,x2:x,y1:r,y2:r,"stroke-width":n+2,stroke:f}).classed("spikeline",!0).classed("crisp",!0)}-1!==l.indexOf("marker")&&e.insert("circle",":first-child").attr({cx:u+("right"!==h.side?n:-n),cy:r,r:n,fill:m}).classed("spikeline",!0)}if(k){r=(k=a.vLinePoint)&&k.xa;
h=k&&k.ya;"cursor"===r.spikesnap?(a=c.pointerX,h=c.pointerY):(a=r._offset+k.x,h=h._offset+k.y);v=1.5>d.readability(k.color,f)?y.contrast(f):k.color;c=r.spikemode;k=r.spikethickness;v=r.spikecolor||v;b=z.getPxPosition(b,r);if(-1!==c.indexOf("toaxis")||-1!==c.indexOf("across")){if(-1!==c.indexOf("toaxis")){var A=b;var p=h}-1!==c.indexOf("across")&&(p=r._counterDomainMin,A=r._counterDomainMax,"free"===r.anchor&&(p=Math.min(p,r.position),A=Math.max(A,r.position)),A=g.t+(1-A)*g.h,p=g.t+(1-p)*g.h);e.insert("line",
":first-child").attr({x1:a,x2:a,y1:A,y2:p,"stroke-width":k,stroke:v,"stroke-dasharray":w.dashStyle(r.spikedash,k)}).classed("spikeline",!0).classed("crisp",!0);e.insert("line",":first-child").attr({x1:a,x2:a,y1:A,y2:p,"stroke-width":k+2,stroke:f}).classed("spikeline",!0).classed("crisp",!0)}-1!==c.indexOf("marker")&&e.insert("circle",":first-child").attr({cx:a,cy:b-("top"!==r.side?k:-k),r:k,fill:v}).classed("spikeline",!0)}}}function e(b,a,c){if(!c||c.length!==b._hoverdata.length)return!0;for(a=c.length-
1;0<=a;a--){var d=c[a],e=b._hoverdata[a];if(d.curveNumber!==e.curveNumber||String(d.pointNumber)!==String(e.pointNumber)||String(d.pointNumbers)!==String(e.pointNumbers))return!0}return!1}function t(b,a){return u.plainText(b||"",{len:a,allowedTags:"br sub sup b i em".split(" ")})}var l=a("d3"),f=a("fast-isnumeric"),d=a("tinycolor2"),c=a("../../lib"),r=a("../../lib/events"),u=a("../../lib/svg_text_utils"),v=a("../../lib/override_cursor"),w=a("../drawing"),y=a("../color"),A=a("../dragelement"),z=a("../../plots/cartesian/axes"),
x=a("../../registry"),C=a("./helpers"),B=a("./constants"),D=B.YANGLE;a=Math.PI*D/180;var G=1/Math.sin(a),E=Math.cos(a),F=Math.sin(a),L=B.HOVERARROWSIZE,J=B.HOVERTEXTPAD;p.hover=function(b,a,d,e){b=c.getGraphDiv(b);c.throttle(b._fullLayout._uid+B.HOVERID,B.HOVERMINTIME,function(){n(b,a,d,e)})};p.loneHover=function(b,a){var c=!0;Array.isArray(b)||(c=!1,b=[b]);b=b.map(function(b){return{color:b.color||y.defaultLine,x0:b.x0||b.x||0,x1:b.x1||b.x||0,y0:b.y0||b.y||0,y1:b.y1||b.y||0,xLabel:b.xLabel,yLabel:b.yLabel,
zLabel:b.zLabel,text:b.text,name:b.name,idealAlign:b.idealAlign,borderColor:b.borderColor,fontFamily:b.fontFamily,fontSize:b.fontSize,fontColor:b.fontColor,nameLength:b.nameLength,textAlign:b.textAlign,trace:b.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:b.hovertemplate||!1,eventData:b.eventData||!1,hovertemplateLabels:b.hovertemplateLabels||!1}});var d=l.select(a.container),e=a.outerContainer?l.select(a.outerContainer):d;d={hovermode:"closest",rotateLabels:!1,
bgColor:a.bgColor||y.background,container:d,outerContainer:e};b=k(b,d,a.gd);var f=0,g=0;b.sort(function(b,a){return b.y0-a.y0}).each(function(b,c){var d=b.y0-b.by/2;b.offset=d-5<f?f-d+5:0;f=d+b.by+b.offset;c===a.anchorIndex&&(g=b.offset)}).each(function(b){b.offset-=g});h(b,d.rotateLabels);return c?b:b.node()};var H=/<extra>([\s\S]*)<\/extra>/},{"../../lib":716,"../../lib/events":706,"../../lib/override_cursor":727,"../../lib/svg_text_utils":740,"../../plots/cartesian/axes":764,"../../registry":845,
"../color":591,"../dragelement":609,"../drawing":612,"./constants":624,"./helpers":626,d3:165,"fast-isnumeric":228,tinycolor2:535}],628:[function(a,q,p){var n=a("../../lib");q.exports=function(a,m,h,b){b=b||{};h("hoverlabel.bgcolor",b.bgcolor);h("hoverlabel.bordercolor",b.bordercolor);h("hoverlabel.namelength",b.namelength);n.coerceFont(h,"hoverlabel.font",b.font);h("hoverlabel.align",b.align)}},{"../../lib":716}],629:[function(a,q,p){var n=a("d3"),k=a("../../lib");p=a("../dragelement");var m=a("./helpers"),
h=a("./layout_attributes"),b=a("./hover");q.exports={moduleType:"component",name:"fx",constants:a("./constants"),schema:{layout:h},attributes:a("./attributes"),layoutAttributes:h,supplyLayoutGlobalDefaults:a("./layout_global_defaults"),supplyDefaults:a("./defaults"),supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc"),getDistanceFunction:m.getDistanceFunction,getClosest:m.getClosest,inbox:m.inbox,quadrature:m.quadrature,appendArrayPointValue:m.appendArrayPointValue,castHoverOption:function(b,
a,h){return k.castOption(b,a,"hoverlabel."+h)},castHoverinfo:function(b,a,h){return k.castOption(b,h,"hoverinfo",function(e){return k.coerceHoverinfo({hoverinfo:e},{_module:b._module},a)})},hover:b.hover,unhover:p.unhover,loneHover:b.loneHover,loneUnhover:function(b){b=k.isD3Selection(b)?b:n.select(b);b.selectAll("g.hovertext").remove();b.selectAll(".spikeline").remove()},click:a("./click")}},{"../../lib":716,"../dragelement":609,"./attributes":621,"./calc":622,"./click":623,"./constants":624,"./defaults":625,
"./helpers":626,"./hover":627,"./layout_attributes":630,"./layout_defaults":631,"./layout_global_defaults":632,d3:165}],630:[function(a,q,p){p=a("./constants");a=a("../../plots/font_attributes")({editType:"none"});a.family.dflt=p.HOVERFONT;a.size.dflt=p.HOVERFONTSIZE;q.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},
hovermode:{valType:"enumerated",values:["x","y","closest",!1],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:a,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",
values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":790,"./constants":624}],631:[function(a,q,p){function n(a,b){b=b._scatterStackOpts||{};for(var g=0;g<a.length;g++){var e=a[g],h=(b[e.xaxis+e.yaxis]||{})[e.stackgroup]||{};if("h"!==e.orientation&&"h"!==h.orientation)return!1}return!0}var k=a("../../lib"),m=a("./layout_attributes");q.exports=function(a,b,g){function e(e,d){return k.coerce(a,b,m,e,d)}var h=e("clickmode");"select"===e("dragmode")&&e("selectdirection");
b._has("cartesian")?-1<h.indexOf("select")?g="closest":(b._isHoriz=n(g,b),g=b._isHoriz?"y":"x"):g="closest";e("hovermode",g)&&(e("hoverdistance"),e("spikedistance"));g=b._has("mapbox");h=b._has("geo");var l=b._basePlotModules.length;"zoom"===b.dragmode&&((g||h)&&1===l||g&&h&&2===l)&&(b.dragmode="pan")}},{"../../lib":716,"./layout_attributes":630}],632:[function(a,q,p){var n=a("../../lib"),k=a("./hoverlabel_defaults"),m=a("./layout_attributes");q.exports=function(a,b){k(a,b,function(g,e){return n.coerce(a,
b,m,g,e)})}},{"../../lib":716,"./hoverlabel_defaults":628,"./layout_attributes":630}],633:[function(a,q,p){function n(b,a,d){a=a[d+"axes"];b=Object.keys((b._splomAxes||{})[d]||{});if(Array.isArray(a))return a;if(b.length)return b}function k(b,a,d,c,e,g){d=a(b+"gap",d);var f=a("domain."+b);a(b+"side",c);b=Array(e);a=f[0];f=(f[1]-a)/(e-d);d=f*(1-d);for(c=0;c<e;c++){var h=a+f*c;b[g?e-1-c:c]=[h,h+d]}return b}function m(b,a,d,c,e){function f(b,d){-1!==a.indexOf(d)&&void 0===c[d]?(g[b]=d,c[d]=b):g[b]=""}
var g=Array(d),h;if(Array.isArray(b))for(h=0;h<d;h++)f(h,b[h]);else for(f(0,e),h=1;h<d;h++)f(h,e+(h+1));return g}var h=a("../../lib");p=a("../../lib/regex").counter;var b=a("../../plots/domain").attributes,g=a("../../plots/cartesian/constants").idRegex,e=a("../../plot_api/plot_template"),t={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",
freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[p("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[g.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[g.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,
max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:b({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};q.exports={moduleType:"component",name:"grid",schema:{layout:{grid:t}},layoutAttributes:t,sizeDefaults:function(b,a){function d(b,
a){return h.coerce(c,x,t,b,a)}var c=b.grid||{},f=n(a,c,"x"),g=n(a,c,"y");if(b.grid||f||g){b=Array.isArray(c.subplots)&&Array.isArray(c.subplots[0]);var l=Array.isArray(f),m=Array.isArray(g),p=l&&f!==c.xaxes&&m&&g!==c.yaxes;if(b){var A=c.subplots.length;var z=c.subplots[0].length}else m&&(A=g.length),l&&(z=f.length);var x=e.newContainer(a,"grid");f=d("rows",A);z=d("columns",z);if(1<f*z){b||l||m||"independent"===d("pattern")&&(b=!0);x._hasSubplotGrid=b;l="top to bottom"===d("roworder");m=b?.3:.1;if(p&&
a._splomGridDflt){var q=a._splomGridDflt.xside;var B=a._splomGridDflt.yside}x._domains={x:k("x",d,b?.2:.1,q,z),y:k("y",d,m,B,f,l)}}else delete a.grid}},contentDefaults:function(b,a){var d=a.grid;if(d&&d._domains){var c=b.grid||{};b=a._subplots;var e=d._hasSubplotGrid,f=d.rows,g=d.columns,h="independent"===d.pattern,k,l=d._axisMap={};if(e){var t=c.subplots||[];var x=d.subplots=Array(f);var p=1;for(a=0;a<f;a++){var q=x[a]=Array(g),D=t[a]||[];for(k=0;k<g;k++)if(h?(c=1===p?"xy":"x"+p+"y"+p,p++):c=D[k],
q[k]="",-1!==b.cartesian.indexOf(c)){var G=c.indexOf("y");var E=c.slice(0,G);G=c.slice(G);void 0!==l[E]&&l[E]!==k||void 0!==l[G]&&l[G]!==a||(q[k]=c,l[E]=k,l[G]=a)}}}else G=n(a,c,"x"),a=n(a,c,"y"),d.xaxes=m(G,b.xaxis,g,l,"x"),d.yaxes=m(a,b.yaxis,f,l,"y");h=d._anchors={};k="top to bottom"===d.roworder;for(var F in l)if(a=F.charAt(0),c=d[a+"side"],8>c.length)h[F]="free";else if("x"===a)if("t"===c.charAt(0)===k?(a=0,t=1,p=f):(a=f-1,p=t=-1),e)for(E=l[F];a!==p;a+=t){if(c=x[a][E])if(G=c.indexOf("y"),c.slice(0,
G)===F){h[F]=c.slice(G);break}}else for(;a!==p;a+=t){if(G=d.yaxes[a],-1!==b.cartesian.indexOf(F+G)){h[F]=G;break}}else if("l"===c.charAt(0)?(a=0,t=1,p=g):(a=g-1,p=t=-1),e)for(E=l[F];a!==p;a+=t){if(c=x[E][a])if(G=c.indexOf("y"),c.slice(G)===F){h[F]=c.slice(0,G);break}}else for(;a!==p;a+=t)if(E=d.xaxes[a],-1!==b.cartesian.indexOf(E+F)){h[F]=E;break}}}}},{"../../lib":716,"../../lib/regex":732,"../../plot_api/plot_template":754,"../../plots/cartesian/constants":770,"../../plots/domain":789}],634:[function(a,
q,p){p=a("../../plots/cartesian/constants");a=a("../../plot_api/plot_template").templatedArray;q.exports=a("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},
opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",p.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",p.idRegex.y.toString()],
dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../plot_api/plot_template":754,"../../plots/cartesian/constants":770}],635:[function(a,q,p){var n=a("fast-isnumeric"),k=a("../../lib/to_log_range");q.exports=function(a,h,b,g){h=h||{};var e="log"===b&&"linear"===h.type;b="linear"===b&&"log"===h.type;if(e||b){a=a._fullLayout.images;b=h._id.charAt(0);for(var t,l,f=0;f<a.length;f++)if(t=a[f],l="images["+f+"].",t[b+"ref"]===h._id){var d=t[b];t=t["size"+b];e?(d=k(d,h.range),t=t/Math.pow(10,
d)/2,t=2*Math.log(t+Math.sqrt(1+t*t))/Math.LN10):(d=Math.pow(10,d),t=d*(Math.pow(10,t/2)-Math.pow(10,-t/2)));n(d)?n(t)||(t=null):t=d=null;g(l+b,d);g(l+"size"+b,t)}}}},{"../../lib/to_log_range":742,"fast-isnumeric":228}],636:[function(a,q,p){function n(a,e,h){function g(c,d){return k.coerce(a,e,b,c,d)}var f=g("source");if(!g("visible",!!f))return e;g("layer");g("xanchor");g("yanchor");g("sizex");g("sizey");g("sizing");g("opacity");h={_fullLayout:h};f=["x","y"];for(var d=0;2>d;d++){var c=f[d],r=m.coerceRef(a,
e,h,c,"paper");"paper"!==r&&m.getFromId(h,r)._imgIndices.push(e._index);m.coercePosition(e,h,g,r,c,0)}return e}var k=a("../../lib"),m=a("../../plots/cartesian/axes"),h=a("../../plots/array_container_defaults"),b=a("./attributes");q.exports=function(b,a){h(b,a,{name:"images",handleItemDefaults:n})}},{"../../lib":716,"../../plots/array_container_defaults":760,"../../plots/cartesian/axes":764,"./attributes":634}],637:[function(a,q,p){var n=a("d3"),k=a("../drawing"),m=a("../../plots/cartesian/axes"),
h=a("../../constants/xmlns_namespaces");q.exports=function(b){function a(a){var c=n.select(this);if(this._imgSrc!==a.source)if(c.attr("xmlns",h.svg),a.source&&"data:"===a.source.slice(0,5))c.attr("xlink:href",a.source),this._imgSrc=a.source;else{var d=new Promise(function(b){function d(){c.remove();b()}var e=new Image;this.img=e;e.setAttribute("crossOrigin","anonymous");e.onerror=d;e.onload=function(){var a=document.createElement("canvas");a.width=this.width;a.height=this.height;a.getContext("2d").drawImage(this,
0,0);a=a.toDataURL("image/png");c.attr("xlink:href",a);b()};c.on("error",d);this._imgSrc=e.src=a.source}.bind(this));b._promises.push(d)}}function e(a){var c=n.select(this),d=m.getFromId(b,a.xref),e=m.getFromId(b,a.yref),f=t._size,g=d?Math.abs(d.l2p(a.sizex)-d.l2p(0)):a.sizex*f.w,h=e?Math.abs(e.l2p(a.sizey)-e.l2p(0)):a.sizey*f.h,l=g*w.x[a.xanchor].offset,r=h*w.y[a.yanchor].offset,u=w.x[a.xanchor].sizing+w.y[a.yanchor].sizing;l=(d?d.r2p(a.x)+d._offset:a.x*f.w+f.l)+l;f=(e?e.r2p(a.y)+e._offset:f.h-a.y*
f.h+f.t)+r;switch(a.sizing){case "fill":u+=" slice";break;case "stretch":u="none"}c.attr({x:l,y:f,width:g,height:h,preserveAspectRatio:u,opacity:a.opacity});a=(d?d._id:"")+(e?e._id:"");k.setClipUrl(c,a?"clip"+t._uid+a:null,b)}var t=b._fullLayout,l=[],f={},d=[],c;for(c=0;c<t.images.length;c++){var r=t.images[c];if(r.visible)if("below"===r.layer&&"paper"!==r.xref&&"paper"!==r.yref){var u=r.xref+r.yref;var v=t._plots[u];v?(v.mainplot&&(u=v.mainplot.id),f[u]||(f[u]=[]),f[u].push(r)):d.push(r)}else"above"===
r.layer?l.push(r):d.push(r)}var w={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}};c=t._imageLowerLayer.selectAll("image").data(d);u=t._imageUpperLayer.selectAll("image").data(l);c.enter().append("image");u.enter().append("image");c.exit().remove();u.exit().remove();c.each(function(b){a.bind(this)(b);e.bind(this)(b)});u.each(function(b){a.bind(this)(b);
e.bind(this)(b)});l=Object.keys(t._plots);for(c=0;c<l.length;c++)u=l[c],d=t._plots[u],d.imagelayer&&(u=d.imagelayer.selectAll("image").data(f[u]||[]),u.enter().append("image"),u.exit().remove(),u.each(function(b){a.bind(this)(b);e.bind(this)(b)}))}},{"../../constants/xmlns_namespaces":693,"../../plots/cartesian/axes":764,"../drawing":612,d3:165}],638:[function(a,q,p){q.exports={moduleType:"component",name:"images",layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),includeBasePlot:a("../../plots/cartesian/include_components")("images"),
draw:a("./draw"),convertCoords:a("./convert_coords")}},{"../../plots/cartesian/include_components":774,"./attributes":634,"./convert_coords":635,"./defaults":636,"./draw":637}],639:[function(a,q,p){p=a("../../plots/font_attributes");a=a("../color/attributes");q.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:p({editType:"legend"}),orientation:{valType:"enumerated",
values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},
x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:p({editType:"legend"}),
side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":790,"../color/attributes":590}],640:[function(a,q,p){q.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,textGap:40,itemGap:5}},{}],641:[function(a,q,p){var n=a("../../registry"),k=a("../../lib"),m=a("../../plot_api/plot_template"),h=a("./attributes"),
b=a("../../plots/layout_attributes"),g=a("./helpers");q.exports=function(a,t,l){function e(b,a){return k.coerce(d,p,h,b,a)}for(var d=a.legend||{},c=0,r=!1,u="normal",v=0;v<l.length;v++){var w=l[v];if(w.visible){if(w.showlegend||w._dfltShowLegend&&!(w._module&&w._module.attributes&&w._module.attributes.showlegend&&!1===w._module.attributes.showlegend.dflt))c++,w.showlegend&&(r=!0,(n.traceIs(w,"pie-like")||!0===w._input.showlegend)&&c++);if(n.traceIs(w,"bar")&&"stack"===t.barmode||-1!==["tonextx","tonexty"].indexOf(w.fill))u=
g.isGrouped({traceorder:u})?"grouped+reversed":"reversed";void 0!==w.legendgroup&&""!==w.legendgroup&&(u=g.isReversed({traceorder:u})?"reversed+grouped":"grouped")}}l=k.coerce(a,t,b,"showlegend",r&&1<c);if(!1!==l||d.uirevision){var p=m.newContainer(t,"legend");e("uirevision",t.uirevision);!1!==l&&(e("bgcolor",t.paper_bgcolor),e("bordercolor"),e("borderwidth"),k.coerceFont(e,"font",t.font),l=e("orientation"),"h"===l?(c=0,n.getComponentMethod("rangeslider","isVisible")(a.xaxis)?(a=1.1,r="bottom"):(a=
-.1,r="top")):(c=1.02,a=1,r="auto"),e("traceorder",u),g.isGrouped(t.legend)&&e("tracegroupgap"),e("itemsizing"),e("itemclick"),e("itemdoubleclick"),e("x",c),e("xanchor"),e("y",a),e("yanchor",r),e("valign"),k.noneOrAll(d,p,["x","y"]),e("title.text")&&(e("title.side","h"===l?"left":"top"),k.coerceFont(e,"title.font",t.font)))}}},{"../../lib":716,"../../plot_api/plot_template":754,"../../plots/layout_attributes":816,"../../registry":845,"./attributes":639,"./helpers":645}],642:[function(a,q,p){function n(b,
a,c,d,e){var f=c.data()[0][0].trace;e={event:e,node:c.node(),curveNumber:f.index,expandedIndex:f._expandedIndex,data:b.data,layout:b.layout,frames:b._transitionData._frames,config:b._context,fullData:b._fullData,fullLayout:b._fullLayout};f._group&&(e.group=f._group);u.traceIs(f,"pie-like")&&(e.label=c.datum()[0].label);!1!==v.triggerHandler(b,"plotly_legendclick",e)&&(1===d?a._clickTimeout=setTimeout(function(){x(c,b,d)},b._context.doubleClickDelay):2===d&&(a._clickTimeout&&clearTimeout(a._clickTimeout),
b._legendMouseDownTime=0,!1!==v.triggerHandler(b,"plotly_legenddoubleclick",e)&&x(c,b,d)))}function k(a,d){var e=a.data()[0][0],f=d._fullLayout.legend,g=e.trace,h=u.traceIs(g,"pie-like"),k=g.index,l=d._context.edits.legendText&&!h,r=f._maxNameLength;h=h?e.label:g.name;g._meta&&(h=c.templateString(h,g._meta));g=c.ensureSingle(a,"text","legendtext");g.attr("text-anchor","start").classed("user-select-none",!0).call(y.font,f.font).text(l?m(h,r):h);z.positionText(g,C.textGap,0);if(l)g.call(z.makeEditable,
{gd:d,text:h}).call(b,a,d).on("edit",function(f){this.text(m(f,r)).call(b,a,d);var g=e.trace._fullInput||{},h={};u.hasTransform(g,"groupby")?(h=u.getTransformIndices(g,"groupby"),g=c.keyedContainer(g,"transforms["+h[h.length-1]+"].styles","target","value.name"),g.set(e.trace._group,f),h=g.constructUpdate()):h.name=f;return u.call("_guiRestyle",d,h,k)});else b(g,a,d)}function m(b,a){a=Math.max(4,a);if(b&&b.trim().length>=a/2)return b;b=b||"";for(a-=b.length;0<a;a--)b+=" ";return b}function h(b,a){var e=
a._context.doubleClickDelay,f,g=1,h=c.ensureSingle(b,"rect","legendtoggle",function(b){b.style("cursor","pointer").attr("pointer-events","all").call(A.fill,"rgba(0,0,0,0)")});h.on("mousedown",function(){f=(new Date).getTime();f-a._legendMouseDownTime<e?g+=1:(g=1,a._legendMouseDownTime=f)});h.on("mouseup",function(){if(!a._dragged&&!a._editing){var c=a._fullLayout.legend;(new Date).getTime()-a._legendMouseDownTime>e&&(g=Math.max(g-1,1));n(a,c,b,g,d.event)}})}function b(b,a,c){z.convertToTspans(b,c,
function(){var b=a.data()[0][0];if(b&&!b.trace.showlegend)a.remove();else{var d=a.select("g[class*\x3dmath-group]"),e=d.node(),f=c._fullLayout.legend.borderwidth,g=c._fullLayout.legend,h=(b?g:g.title).font.size*B;if(e){var k=y.bBox(e);e=k.height;k=k.width;b?y.setTranslate(d,0,.25*e):y.setTranslate(d,f,.75*e+f)}else{d=a.select(b?".legendtext":".legendtitletext");var l=z.lineCount(d);k=d.node();e=h*l;k=k?y.bBox(k).width:0;b?z.positionText(d,C.textGap,-(h*((l-1)/2-.3))):z.positionText(d,C.titlePad+f,
h+f)}b?(b.lineHeight=h,b.height=Math.max(e,16)+3,b.width=k):(g._titleWidth=k,g._titleHeight=e)}})}function g(b){var a=0,c=0,d=b.title.side;d&&(-1!==d.indexOf("left")&&(a=b._titleWidth),-1!==d.indexOf("top")&&(c=b._titleHeight));return[a,c]}function e(b,a,c){var e=b._fullLayout,h=e.legend,k=e._size,r=L.isVertical(h),t=L.isGrouped(h),m=h.borderwidth,n=2*m,u=C.textGap,v=C.itemGap,w=2*(m+v),x=f(h),z=0>h.y||0===h.y&&"top"===x,p=1<h.y||1===h.y&&"bottom"===x;h._maxHeight=Math.max(z||p?e.height/2:k.h,30);
var A=0;h._width=0;h._height=0;var q=g(h);if(r)c.each(function(b){var a=b[0].height;y.setTranslate(this,m+q[0],m+q[1]+h._height+a/2+v);h._height+=a;h._width=Math.max(h._width,b[0].width)}),A=u+h._width,h._width+=v+u+n,h._height+=w,t&&(a.each(function(b,a){y.setTranslate(this,0,a*h.tracegroupgap)}),h._height+=(h._lgroupsLength-1)*h.tracegroupgap);else{x=l(h);var B=1<h.x||1===h.x&&"left"===x;z=p||z;e=e.width/2;h._maxWidth=Math.max(0>h.x||0===h.x&&"right"===x?z&&"left"===x?k.l+k.w:e:B?z&&"right"===x?
k.r+k.w:e:k.w,2*u);var D=0,E=0;c.each(function(b){b=b[0].width+u;D=Math.max(D,b);E+=b});A=null;var H=0;if(t){var G=0,F=0,K=0;a.each(function(){var b=0,a=0;d.select(this).selectAll("g.traces").each(function(c){var d=c[0].height;y.setTranslate(this,q[0],q[1]+m+v+d/2+a);a+=d;b=Math.max(b,u+c[0].width)});G=Math.max(G,a);var c=b+v;c+m+F>h._maxWidth&&(H=Math.max(H,F),F=0,K+=G+h.tracegroupgap,G=a);y.setTranslate(this,F,K);F+=c});h._width=Math.max(H,F)+m;h._height=K+G+w}else{a=c.size();var J=E+n+(a-1)*v<
h._maxWidth,oa=0,ka=0,ia=0,xa=0;c.each(function(b){var a=b[0].height;b=u+b[0].width;var c=(J?b:D)+v;c+m+ka>h._maxWidth&&(H=Math.max(H,xa),ka=0,ia+=oa,h._height+=oa,oa=0);y.setTranslate(this,q[0]+m+ka,q[1]+m+ia+a/2+v);xa=ka+b+v;ka+=c;oa=Math.max(oa,a)});J?(h._width=ka+n,h._height=oa+w):(h._width=Math.max(H,xa)+n,h._height+=oa+w)}}h._width=Math.ceil(Math.max(h._width+q[0],h._titleWidth+2*(m+C.titlePad)));h._height=Math.ceil(Math.max(h._height+q[1],h._titleHeight+2*(m+C.itemGap)));h._effHeight=Math.min(h._height,
h._maxHeight);b=b._context.edits;var ya=b.legendText||b.legendPosition;c.each(function(b){var a=d.select(this).select(".legendtoggle"),c=b[0].height;b=ya?u:A||u+b[0].width;r||(b+=v/2);y.setRect(a,0,-c/2,b,c)})}function t(b){var a=b._fullLayout.legend,c=l(a),d=f(a);return r.autoMargin(b,"legend",{x:a.x,y:a.y,l:a._width*D[c],r:a._width*G[c],b:a._effHeight*G[d],t:a._effHeight*D[d]})}function l(b){return c.isRightAnchor(b)?"right":c.isCenterAnchor(b)?"center":"left"}function f(b){return c.isBottomAnchor(b)?
"bottom":c.isMiddleAnchor(b)?"middle":"top"}var d=a("d3"),c=a("../../lib"),r=a("../../plots/plots"),u=a("../../registry"),v=a("../../lib/events"),w=a("../dragelement"),y=a("../drawing"),A=a("../color"),z=a("../../lib/svg_text_utils"),x=a("./handle_click"),C=a("./constants");p=a("../../constants/alignment");var B=p.LINE_SPACING,D=p.FROM_TL,G=p.FROM_BR,E=a("./get_legend_data"),F=a("./style"),L=a("./helpers");q.exports=function(a){var g=a._fullLayout,m="legend"+g._uid;if(g._infolayer&&a.calcdata){a._legendMouseDownTime||
(a._legendMouseDownTime=0);var v=g.legend,x=g.showlegend&&E(a.calcdata,v),z=g.hiddenlabels||[];if(!g.showlegend||!x.length)return g._infolayer.selectAll(".legend").remove(),g._topdefs.select("#"+m).remove(),r.autoMargin(a,"legend");var p=c.ensureSingle(g._infolayer,"g","legend",function(b){b.attr("pointer-events","all")}),q=c.ensureSingleById(g._topdefs,"clipPath",m,function(b){b.append("rect")}),B=c.ensureSingle(p,"rect","bg",function(b){b.attr("shape-rendering","crispEdges")});B.call(A.stroke,v.bordercolor).call(A.fill,
v.bgcolor).style("stroke-width",v.borderwidth+"px");var G=c.ensureSingle(p,"g","scrollbox"),J=v.title;v._titleWidth=0;v._titleHeight=0;if(J.text){var L=c.ensureSingle(G,"text","legendtitletext");L.attr("text-anchor","start").classed("user-select-none",!0).call(y.font,J.font).text(J.text);b(L,G,a)}var ca=c.ensureSingle(p,"rect","scrollbar",function(b){b.attr(C.scrollBarEnterAttrs).call(A.fill,C.scrollBarColor)}),Z=G.selectAll("g.groups").data(x);Z.enter().append("g").attr("class","groups");Z.exit().remove();
var R=Z.selectAll("g.traces").data(c.identity);R.enter().append("g").attr("class","traces");R.exit().remove();R.style("opacity",function(b){var a=b[0].trace;return u.traceIs(a,"pie-like")?-1!==z.indexOf(b[0].label)?.5:1:"legendonly"===a.visible?.5:1}).each(function(){d.select(this).call(k,a)}).call(F,a).each(function(){d.select(this).call(h,a)});c.syncOrAsync([r.previousPromises,function(){return e(a,Z,R)},function(){function b(b,c,d){v._scrollY=a._fullLayout.legend._scrollY=b;y.setTranslate(G,0,
-b);y.setRect(ca,v._width,C.scrollBarMargin+b*d,C.scrollBarWidth,c);q.select("rect").attr("y",h+b)}if(!t(a)){var e=g._size,h=v.borderwidth,k=e.l+e.w*v.x-D[l(v)]*v._width,r=e.t+e.h*(1-v.y)-D[f(v)]*v._effHeight;if(g.margin.autoexpand){var x=k,z=r;k=c.constrain(k,0,g.width-v._width);r=c.constrain(r,0,g.height-v._effHeight);k!==x&&c.log("Constrain legend.x to make legend fit inside graph");r!==z&&c.log("Constrain legend.y to make legend fit inside graph")}y.setTranslate(p,k,r);ca.on(".drag",null);p.on("wheel",
null);if(v._height<=v._maxHeight||a._context.staticPlot)B.attr({width:v._width-h,height:v._effHeight-h,x:h/2,y:h/2}),y.setTranslate(G,0,0),q.select("rect").attr({width:v._width-2*h,height:v._effHeight-2*h,x:h,y:h}),y.setClipUrl(G,m,a),y.setRect(ca,0,0,0,0),delete v._scrollY;else{var A=Math.max(C.scrollBarMinHeight,v._effHeight*v._effHeight/v._height),E=v._effHeight-A-2*C.scrollBarMargin,H=v._height-v._effHeight,I=E/H,M=Math.min(v._scrollY||0,H);B.attr({width:v._width-2*h+C.scrollBarWidth+C.scrollBarMargin,
height:v._effHeight-h,x:h/2,y:h/2});q.select("rect").attr({width:v._width-2*h+C.scrollBarWidth+C.scrollBarMargin,height:v._effHeight-2*h,x:h,y:h+M});y.setClipUrl(G,m,a);b(M,A,I);p.on("wheel",function(){M=c.constrain(v._scrollY+d.event.deltaY/E*H,0,H);b(M,A,I);0!==M&&M!==H&&d.event.preventDefault()});var N,F,K;k=d.behavior.drag().on("dragstart",function(){var b=d.event.sourceEvent;N="touchstart"===b.type?b.changedTouches[0].clientY:b.clientY;K=M}).on("drag",function(){var a=d.event.sourceEvent;2===
a.buttons||a.ctrlKey||(F="touchmove"===a.type?a.changedTouches[0].clientY:a.clientY,M=c.constrain((F-N)/I+K,0,H),b(M,A,I))});ca.call(k);k=d.behavior.drag().on("dragstart",function(){var b=d.event.sourceEvent;"touchstart"===b.type&&(N=b.changedTouches[0].clientY,K=M)}).on("drag",function(){var a=d.event.sourceEvent;"touchmove"===a.type&&(F=a.changedTouches[0].clientY,M=c.constrain((N-F)/I+K,0,H),b(M,A,I))});G.call(k)}if(a._context.edits.legendPosition){var J,O,L,P;p.classed("cursor-move",!0);w.init({element:p.node(),
gd:a,prepFn:function(){var b=y.getTranslate(p);L=b.x;P=b.y},moveFn:function(b,a){b=L+b;a=P+a;y.setTranslate(p,b,a);J=w.align(b,0,e.l,e.l+e.w,v.xanchor);O=w.align(a,0,e.t+e.h,e.t,v.yanchor)},doneFn:function(){void 0!==J&&void 0!==O&&u.call("_guiRelayout",a,{"legend.x":J,"legend.y":O})},clickFn:function(b,c){var d=g._infolayer.selectAll("g.traces").filter(function(){var b=this.getBoundingClientRect();return c.clientX>=b.left&&c.clientX<=b.right&&c.clientY>=b.top&&c.clientY<=b.bottom});0<d.size()&&n(a,
p,d,b,c)}})}}}],a)}}},{"../../constants/alignment":685,"../../lib":716,"../../lib/events":706,"../../lib/svg_text_utils":740,"../../plots/plots":825,"../../registry":845,"../color":591,"../dragelement":609,"../drawing":612,"./constants":640,"./get_legend_data":643,"./handle_click":644,"./helpers":645,"./style":647,d3:165}],643:[function(a,q,p){var n=a("../../registry"),k=a("./helpers");q.exports=function(a,h){function b(b,a){""!==b&&k.isGrouped(h)?-1===e.indexOf(b)?(e.push(b),t=!0,g[b]=[[a]]):g[b].push([a]):
(b="~~i"+f,e.push(b),g[b]=[[a]],f++)}var g={},e=[],t=!1,l={},f=0,d=0,c;for(c=0;c<a.length;c++){var r=a[c];var m=r[0];var v=m.trace,w=v.legendgroup;if(v.visible&&v.showlegend)if(n.traceIs(v,"pie-like"))for(l[w]||(l[w]={}),m=0;m<r.length;m++){var p=r[m].label;l[w][p]||(b(w,{label:p,color:r[m].color,i:r[m].i,trace:v,pts:r[m].pts}),l[w][p]=!0,d=Math.max(d,(p||"").length))}else b(w,m),d=Math.max(d,(v.name||"").length)}if(!e.length)return[];a=e.length;if(t&&k.isGrouped(h))for(r=Array(a),c=0;c<a;c++)l=g[e[c]],
r[c]=k.isReversed(h)?l.reverse():l;else{r=[Array(a)];for(c=0;c<a;c++)l=g[e[c]][0],r[0][k.isReversed(h)?a-c-1:c]=l;a=1}h._lgroupsLength=a;h._maxNameLength=d;return r}},{"../../registry":845,"./helpers":645}],644:[function(a,q,p){var n=a("../../lib"),k=a("../../registry"),m=!0;q.exports=function(a,b,g){function e(b,a,c){var d=v.indexOf(b),e=u[a];e||(e=u[a]=[]);-1===v.indexOf(b)&&(v.push(b),d=v.length-1);e[d]=c;return d}function h(b,a){var c=b._fullInput;if(k.hasTransform(c,"groupby")){var d=w[c.index];
d||(d=k.getTransformIndices(c,"groupby"),d=n.keyedContainer(c,"transforms["+d[d.length-1]+"].styles","target","value.visible"),w[c.index]=d);var f=d.get(b._group);void 0===f&&(f=!0);!1!==f&&d.set(b._group,a);p[c.index]=e(c.index,"visible",!1===c.visible?!1:!0)}else e(c.index,"visible",!1===c.visible?!1:a)}var l=b._fullLayout;if(!b._dragged&&!b._editing){var f=l.legend.itemclick,d=l.legend.itemdoubleclick;1===g&&"toggle"===f&&"toggleothers"===d&&m&&b.data&&b._context.showTips&&n.notifier(n._(b,"Double-click on legend to isolate one trace"),
"long");m=!1;var c;1===g?c=f:2===g&&(c=d);if(c){var r=l.hiddenlabels?l.hiddenlabels.slice():[];a=a.data()[0][0];g=b._fullData;l=a.trace;f=l.legendgroup;var u={},v=[],w=[],p=[];if(k.traceIs(l,"pie-like")){var A=a.label;a=r.indexOf(A);"toggle"===c?-1===a?r.push(A):r.splice(a,1):"toggleothers"===c&&(r=[],b.calcdata[0].forEach(function(b){A!==b.label&&r.push(b.label)}),b._fullLayout.hiddenlabels&&b._fullLayout.hiddenlabels.length===r.length&&-1===a&&(r=[]));k.call("_guiRelayout",b,"hiddenlabels",r)}else{d=
f&&f.length;var z=[];if(d)for(a=0;a<g.length;a++){var x=g[a];x.visible&&x.legendgroup===f&&z.push(a)}if("toggle"===c){switch(l.visible){case !0:var q="legendonly";break;case !1:q=!1;break;case "legendonly":q=!0}if(d)for(a=0;a<g.length;a++)!1!==g[a].visible&&g[a].legendgroup===f&&h(g[a],q);else h(l,q)}else if("toggleothers"===c){z=!0;for(a=0;a<g.length;a++)if(x=g[a]===l,c=!0!==g[a].showlegend,!(x||c||(x=d&&g[a].legendgroup===f,x||!0!==g[a].visible||k.traceIs(g[a],"notLegendIsolatable")))){z=!1;break}for(a=
0;a<g.length;a++)if(!1!==g[a].visible&&!k.traceIs(g[a],"notLegendIsolatable"))switch(l.visible){case "legendonly":h(g[a],!0);break;case !0:q=z?!0:"legendonly",x=g[a]===l,c=!0!==g[a].showlegend&&!g[a].legendgroup,x=x||d&&g[a].legendgroup===f,h(g[a],x||c?!0:q)}}for(a=0;a<w.length;a++)if(c=w[a])for(f=c.constructUpdate(),q=Object.keys(f),c=0;c<q.length;c++)g=q[c],l=u[g]=u[g]||[],l[p[a]]=f[g];l=Object.keys(u);for(a=0;a<l.length;a++)for(g=l[a],c=0;c<v.length;c++)u[g].hasOwnProperty(c)||(u[g][c]=void 0);
k.call("_guiRestyle",b,u,v)}}}}},{"../../lib":716,"../../registry":845}],645:[function(a,q,p){p.isGrouped=function(a){return-1!==(a.traceorder||"").indexOf("grouped")};p.isVertical=function(a){return"h"!==a.orientation};p.isReversed=function(a){return-1!==(a.traceorder||"").indexOf("reversed")}},{}],646:[function(a,q,p){q.exports={moduleType:"component",name:"legend",layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),draw:a("./draw"),style:a("./style")}},{"./attributes":639,"./defaults":641,
"./draw":642,"./style":647}],647:[function(a,q,p){function n(b,a){return(a?"radial":"horizontal")+(b?"":"reversed")}var k=a("d3"),m=a("../../registry"),h=a("../../lib"),b=a("../drawing"),g=a("../color"),e=a("../colorscale/helpers").extractOpts,t=a("../../traces/scatter/subtypes"),l=a("../../traces/pie/style_one"),f=a("../../traces/pie/helpers").castOption;q.exports=function(a,c){function d(b,a,c){var d=b[0].trace,e=d.marker||{},f=e.line||{};d=c?d.visible&&d.type===c:m.traceIs(d,"bar");b=k.select(a).select("g.legendpoints").selectAll("path.legend"+
c).data(d?[b]:[]);b.enter().append("path").classed("legend"+c,!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");b.exit().remove();b.each(function(b){var a=k.select(this);b=b[0];var c=p(b.mlw,e.line,5,2);a.style("stroke-width",c+"px").call(g.fill,b.mc||e.color);c&&g.stroke(a,b.mlc||f.color)})}function u(b,a,c){var d=b[0],e=d.trace,g=c?e.visible&&e.type===c:m.traceIs(e,c);b=k.select(a).select("g.legendpoints").selectAll("path.legend"+c).data(g?[b]:[]);b.enter().append("path").classed("legend"+
c,!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");b.exit().remove();b.size()&&(c=(e.marker||{}).line,a=p(f(c.width,d.pts),c,5,2),e=h.minExtend(e,{marker:{line:{width:a}}}),e.marker.line.color=c.color,d=h.minExtend(d,{trace:e}),l(b,d,e))}var v=c._fullLayout.legend,w="constant"===v.itemsizing,p=function(b,a,c,d){if(!(b+1))if(a&&0<a.width)b=a.width;else return 0;return w?d:Math.min(b,c)};a.each(function(b){var a=k.select(this);a=h.ensureSingle(a,"g","layers");a.style("opacity",b[0].trace.opacity);
var c=v.valign,d=b[0].lineHeight,e=b[0].height;"middle"!==c&&d&&e?a.attr("transform","translate(0,"+.5*{top:1,bottom:-1}[c]*(d-e+3)+")"):a.attr("transform",null);a.selectAll("g.legendfill").data([b]).enter().append("g").classed("legendfill",!0);a.selectAll("g.legendlines").data([b]).enter().append("g").classed("legendlines",!0);a=a.selectAll("g.legendsymbols").data([b]);a.enter().append("g").classed("legendsymbols",!0);a.selectAll("g.legendpoints").data([b]).enter().append("g").classed("legendpoints",
!0)}).each(function(a){var d=a[0].trace;a=[];if(d.visible)switch(d.type){case "histogram2d":case "heatmap":a=[["M-15,-2V4H15V-2Z"]];var f=!0;break;case "choropleth":case "choroplethmapbox":a=[["M-6,-6V6H6V-6Z"]];f=!0;break;case "densitymapbox":a=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]];f="radial";break;case "cone":a=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]];f=!1;break;case "streamtube":a=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],
["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]];f=!1;break;case "surface":a=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]];f=!0;break;case "mesh3d":a=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];f=!1;break;case "volume":a=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];f=!0;break;case "isosurface":a=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],f=!1}a=k.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(a);
a.enter().append("path").classed("legend3dandfriends",!0).attr("transform","translate(20,0)").style("stroke-miterlimit",1);a.exit().remove();a.each(function(a,l){var r=k.select(this),t=e(d),m=t.colorscale,u=t.reversescale;t=function(a){a.size()&&b.gradient(a,c,"legendfill-"+d.uid,n(u,"radial"===f),m,"fill")};if(m)f||(v=m.length,v=0===l?m[u?v-1:0][1]:1===l?m[u?0:v-1][1]:m[Math.floor((v-1)/2)][1]);else{var v=d.vertexcolor||d.facecolor||d.color;v=h.isArrayOrTypedArray(v)?v[l]||v[0]:v}r.attr("d",a[0]);
v?r.call(g.fill,v):r.call(t)})}).each(function(b){var a=b[0].trace,c=[];a.visible&&"waterfall"===a.type&&(c=b[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);b=k.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(c);b.enter().append("path").classed("legendwaterfall",!0).attr("transform","translate(20,0)").style("stroke-miterlimit",1);b.exit().remove();b.each(function(b){var c=
k.select(this),d=a[b[0]].marker,e=p(void 0,d.line,5,2);c.attr("d",b[1]).style("stroke-width",e+"px").call(g.fill,d.color);e&&c.call(g.stroke,d.line.color)})}).each(function(b){d(b,this,"funnel")}).each(function(b){d(b,this)}).each(function(a){var d=a[0].trace,e=k.select(this).select("g.legendpoints").selectAll("path.legendbox").data(d.visible&&m.traceIs(d,"box-violin")?[a]:[]);e.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");e.exit().remove();
e.each(function(){var a=k.select(this);if("all"!==d.boxpoints&&"all"!==d.points||0!==g.opacity(d.fillcolor)||0!==g.opacity((d.line||{}).color)){var f=p(void 0,d.line,5,2);a.style("stroke-width",f+"px").call(g.fill,d.fillcolor);f&&g.stroke(a,d.line.color)}else a=h.minExtend(d,{marker:{size:w?12:h.constrain(d.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}}),e.call(b.pointStyle,a,c)})}).each(function(b){u(b,this,"funnelarea")}).each(function(b){u(b,this,"pie")}).each(function(a){var d=a[0],
f=d.trace,g=f.visible&&f.fill&&"none"!==f.fill,l=t.hasLines(f),r=f.contours,m=!1,u=!1,v=e(f),w=v.colorscale,A=v.reversescale,q=function(a){a.size()&&b.gradient(a,c,"legendfill-"+f.uid,n(A),w,"fill")};v=function(a){if(a.size()){var d="legendline-"+f.uid;b.lineGroupStyle(a);b.gradient(a,c,d,n(A),w,"stroke")}};if(r){var y=r.coloring;"lines"===y?m=!0:l="none"===y||"heatmap"===y||r.showlines;if("constraint"===r.type)g="\x3d"!==r._operation;else if("fill"===y||"heatmap"===y)u=!0}r=t.hasMarkers(f)||t.hasText(f)||
!g&&!u?"M5,0":l||m?"M5,-2":"M5,-3";y=k.select(this);a=y.select(".legendfill").selectAll("path").data(g||u?[a]:[]);a.enter().append("path").classed("js-fill",!0);a.exit().remove();a.attr("d",r+"h30v6h-30z").call(g?b.fillGroupStyle:q);if(l||m){g=p(void 0,f.line,10,5);g=h.minExtend(f,{line:{width:g}});var M=[h.minExtend(d,{trace:g})]}d=y.select(".legendlines").selectAll("path").data(l||m?[M]:[]);d.enter().append("path").classed("js-line",!0);d.exit().remove();d.attr("d",r+(m?"l30,0.0001":"h30")).call(l?
b.lineGroupStyle:v)}).each(function(a){function d(b,a,c,d){b=h.nestedProperty(g,b).get();a=h.isArrayOrTypedArray(b)&&a?a(b):b;w&&a&&void 0!==d&&(a=d);if(c){if(a<c[0])return c[0];if(a>c[1])return c[1]}return a}function e(b){return b[0]}var f=a[0],g=f.trace;a=t.hasMarkers(g);var l=t.hasText(g),r=t.hasLines(g);if(a||l||r){var m={};var n={};if(a){m.mc=d("marker.color",e);m.mx=d("marker.symbol",e);m.mo=d("marker.opacity",h.mean,[.2,1]);m.mlc=d("marker.line.color",e);m.mlw=d("marker.line.width",h.mean,
[0,5],2);n.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var u=d("marker.size",h.mean,[2,16],12);m.ms=u;n.marker.size=u}r&&(n.line={width:d("line.width",e,[0,10],5)});l&&(m.tx="Aa",m.tp=d("textposition",e),m.ts=10,m.tc=d("textfont.color",e),m.tf=d("textfont.family",e));m=[h.minExtend(f,m)];n=h.minExtend(g,n);n.selectedpoints=null;n.texttemplate=null}f=k.select(this).select("g.legendpoints");r=f.selectAll("path.scatterpts").data(a?m:[]);r.enter().insert("path",":first-child").classed("scatterpts",
!0).attr("transform","translate(20,0)");r.exit().remove();r.call(b.pointStyle,n,c);a&&(m[0].mrc=3);a=f.selectAll("g.pointtext").data(l?m:[]);a.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)");a.exit().remove();a.selectAll("text").call(b.textPointStyle,n,c)}).each(function(b){var a=b[0].trace;b=k.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(a.visible&&"candlestick"===a.type?[b,b]:[]);b.enter().append("path").classed("legendcandle",
!0).attr("d",function(b,a){return a?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1);b.exit().remove();b.each(function(b,c){b=k.select(this);c=a[c?"increasing":"decreasing"];var d=p(void 0,c.line,5,2);b.style("stroke-width",d+"px").call(g.fill,c.fillcolor);d&&g.stroke(b,c.line.color)})}).each(function(a){var c=a[0].trace;a=k.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(c.visible&&"ohlc"===c.type?[a,a]:[]);a.enter().append("path").classed("legendohlc",
!0).attr("d",function(b,a){return a?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1);a.exit().remove();a.each(function(a,d){a=k.select(this);d=c[d?"increasing":"decreasing"];var e=p(void 0,d.line,5,2);a.style("fill","none").call(b.dashLine,d.line.dash,e);e&&g.stroke(a,d.line.color)})})}},{"../../lib":716,"../../registry":845,"../../traces/pie/helpers":1098,"../../traces/pie/style_one":1104,"../../traces/scatter/subtypes":1143,"../color":591,"../colorscale/helpers":602,
"../drawing":612,d3:165}],648:[function(a,q,p){function n(b,a){var c=a.currentTarget,e=c.getAttribute("data-attr");a=c.getAttribute("data-val")||!0;var f=b._fullLayout,g={},h=r.list(b,null,!0),k=f._cartesianSpikesEnabled,l;if("zoom"===e){e="in"===a?.5:2;c=(1+e)/2;var t=(1-e)/2;for(l=0;l<h.length;l++)if(e=h[l],!e.fixedrange){var m=e._name;if("auto"===a)g[m+".autorange"]=!0;else if("reset"===a){if(void 0===e._rangeInitial)g[m+".autorange"]=!0;else{var n=e._rangeInitial.slice();g[m+".range[0]"]=n[0];
g[m+".range[1]"]=n[1]}void 0!==e._showSpikeInitial&&(g[m+".showspikes"]=e._showSpikeInitial,"on"!==k||e._showSpikeInitial||(k="off"))}else n=[e.r2l(e.range[0]),e.r2l(e.range[1])],n=[c*n[0]+t*n[1],c*n[1]+t*n[0]],g[m+".range[0]"]=e.l2r(n[0]),g[m+".range[1]"]=e.l2r(n[1])}}else"hovermode"!==e||"x"!==a&&"y"!==a||(a=f._isHoriz?"y":"x",c.setAttribute("data-val",a)),g[e]=a;f._cartesianSpikesEnabled=k;d.call("_guiRelayout",b,g)}function k(b,a){a=a.currentTarget;var c=a.getAttribute("data-attr");a=a.getAttribute("data-val")||
!0;var e=b._fullLayout._subplots.gl3d||[],f={};c=c.split(".");for(var g=0;g<e.length;g++)f[e[g]+"."+c[1]]=a;f.dragmode="pan"===a?a:"zoom";d.call("_guiRelayout",b,f)}function m(b,a){a=a.currentTarget.getAttribute("data-attr");for(var c=b._fullLayout,e=c._subplots.gl3d||[],f={},g=0;g<e.length;g++){var h=e[g],k=h+".camera",l=h+".aspectratio",r=h+".aspectmode";h=c[h]._scene;if("resetLastSave"===a){f[k+".up"]=h.viewInitial.up;f[k+".eye"]=h.viewInitial.eye;f[k+".center"]=h.viewInitial.center;var t=!0}else"resetDefault"===
a&&(f[k+".up"]=null,f[k+".eye"]=null,f[k+".center"]=null,t=!0);t&&(f[l+".x"]=h.viewInitial.aspectratio.x,f[l+".y"]=h.viewInitial.aspectratio.y,f[l+".z"]=h.viewInitial.aspectratio.z,f[r]=h.viewInitial.aspectmode)}d.call("_guiRelayout",b,f)}function h(b,a){a=a.currentTarget;var c=a._previousVal;b=b._fullLayout;var d=b._subplots.gl3d||[],e=["xaxis","yaxis","zaxis"],f={},g={};if(c)g=c,a._previousVal=null;else{for(c=0;c<d.length;c++){var h=d[c],k=b[h],l=h+".hovermode";f[l]=k.hovermode;g[l]=!1;for(l=0;3>
l;l++){var r=e[l],t=h+"."+r+".showspikes";g[t]=!1;f[t]=k[r].showspikes}}a._previousVal=f}return g}function b(b,a){var c=a.currentTarget;a=c.getAttribute("data-attr");c=c.getAttribute("data-val")||!0;for(var e=b._fullLayout,g=e._subplots.geo||[],h=0;h<g.length;h++){var k=g[h],l=e[k];"zoom"===a&&(l=l.projection.scale,d.call("_guiRelayout",b,k+".projection.scale","in"===c?2*l:.5*l))}"reset"===a&&f(b,"geo")}function g(b){b=b._fullLayout;return b.hovermode?!1:b._has("cartesian")?b._isHoriz?"y":"x":"closest"}
function e(b){var a=g(b);d.call("_guiRelayout",b,"hovermode",a)}function t(b){var a="on"===b._fullLayout._cartesianSpikesEnabled;b=r.list(b,null,!0);for(var c={},d=0;d<b.length;d++){var e=b[d];c[e._name+".showspikes"]=a?!0:e._showSpikeInitial}return c}function l(b,a){a=a.currentTarget.getAttribute("data-val");for(var c=b._fullLayout,e=c._subplots.mapbox||[],f={},g=0;g<e.length;g++){var h=e[g],k=c[h].zoom;f[h+".zoom"]="in"===a?1.05*k:k/1.05}d.call("_guiRelayout",b,f)}function f(b,a){var c=b._fullLayout;
a=c._subplots[a]||[];for(var e={},f=0;f<a.length;f++)for(var g=a[f],h=c[g]._subplot.viewInitial,k=Object.keys(h),l=0;l<k.length;l++){var r=k[l];e[g+"."+r]=h[r]}d.call("_guiRelayout",b,e)}var d=a("../../registry"),c=a("../../plots/plots"),r=a("../../plots/cartesian/axis_ids"),u=a("../../lib");a=a("../../fonts/ploticon");var v=u._;q=q.exports={};q.toImage={name:"toImage",title:function(b){return"png"===((b._context.toImageButtonOptions||{}).format||"png")?v(b,"Download plot as a png"):v(b,"Download plot")},
icon:a.camera,click:function(b){var a=b._context.toImageButtonOptions,c={format:a.format||"png"};u.notifier(v(b,"Taking snapshot - this may take a few seconds"),"long");"svg"!==c.format&&u.isIE()&&(u.notifier(v(b,"IE only supports svg.  Changing format to svg."),"long"),c.format="svg");["filename","width","height","scale"].forEach(function(b){b in a&&(c[b]=a[b])});d.call("downloadImage",b,c).then(function(a){u.notifier(v(b,"Snapshot succeeded")+" - "+a,"long")}).catch(function(){u.notifier(v(b,"Sorry, there was a problem downloading your snapshot!"),
"long")})}};q.sendDataToCloud={name:"sendDataToCloud",title:function(b){return v(b,"Edit in Chart Studio")},icon:a.disk,click:function(b){c.sendDataToCloud(b)}};q.editInChartStudio={name:"editInChartStudio",title:function(b){return v(b,"Edit in Chart Studio")},icon:a.pencil,click:function(b){c.sendDataToCloud(b)}};q.zoom2d={name:"zoom2d",title:function(b){return v(b,"Zoom")},attr:"dragmode",val:"zoom",icon:a.zoombox,click:n};q.pan2d={name:"pan2d",title:function(b){return v(b,"Pan")},attr:"dragmode",
val:"pan",icon:a.pan,click:n};q.select2d={name:"select2d",title:function(b){return v(b,"Box Select")},attr:"dragmode",val:"select",icon:a.selectbox,click:n};q.lasso2d={name:"lasso2d",title:function(b){return v(b,"Lasso Select")},attr:"dragmode",val:"lasso",icon:a.lasso,click:n};q.zoomIn2d={name:"zoomIn2d",title:function(b){return v(b,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:n};q.zoomOut2d={name:"zoomOut2d",title:function(b){return v(b,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,
click:n};q.autoScale2d={name:"autoScale2d",title:function(b){return v(b,"Autoscale")},attr:"zoom",val:"auto",icon:a.autoscale,click:n};q.resetScale2d={name:"resetScale2d",title:function(b){return v(b,"Reset axes")},attr:"zoom",val:"reset",icon:a.home,click:n};q.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(b){return v(b,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:a.tooltip_basic,gravity:"ne",click:n};q.hoverCompareCartesian={name:"hoverCompareCartesian",
title:function(b){return v(b,"Compare data on hover")},attr:"hovermode",val:function(b){return b._fullLayout._isHoriz?"y":"x"},icon:a.tooltip_compare,gravity:"ne",click:n};q.zoom3d={name:"zoom3d",title:function(b){return v(b,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:a.zoombox,click:k};q.pan3d={name:"pan3d",title:function(b){return v(b,"Pan")},attr:"scene.dragmode",val:"pan",icon:a.pan,click:k};q.orbitRotation={name:"orbitRotation",title:function(b){return v(b,"Orbital rotation")},attr:"scene.dragmode",
val:"orbit",icon:a["3d_rotate"],click:k};q.tableRotation={name:"tableRotation",title:function(b){return v(b,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:a["z-axis"],click:k};q.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(b){return v(b,"Reset camera to default")},attr:"resetDefault",icon:a.home,click:m};q.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(b){return v(b,"Reset camera to last save")},attr:"resetLastSave",icon:a.movie,click:m};
q.hoverClosest3d={name:"hoverClosest3d",title:function(b){return v(b,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:function(b,a){a=h(b,a);d.call("_guiRelayout",b,a)}};q.zoomInGeo={name:"zoomInGeo",title:function(b){return v(b,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:b};q.zoomOutGeo={name:"zoomOutGeo",title:function(b){return v(b,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:b};q.resetGeo={name:"resetGeo",
title:function(b){return v(b,"Reset")},attr:"reset",val:null,icon:a.autoscale,click:b};q.hoverClosestGeo={name:"hoverClosestGeo",title:function(b){return v(b,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:e};q.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(b){return v(b,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:e};q.hoverClosestPie={name:"hoverClosestPie",
title:function(b){return v(b,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:a.tooltip_basic,gravity:"ne",click:e};q.resetViewSankey={name:"resetSankeyGroup",title:function(b){return v(b,"Reset view")},icon:a.home,click:function(b){for(var a={"node.groups":[],"node.x":[],"node.y":[]},c=0;c<b._fullData.length;c++){var e=b._fullData[c]._viewInitial;a["node.groups"].push(e.node.groups.slice());a["node.x"].push(e.node.x.slice());a["node.y"].push(e.node.y.slice())}d.call("restyle",
b,a)}};q.toggleHover={name:"toggleHover",title:function(b){return v(b,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:function(b,a){a=h(b,a);a.hovermode=g(b);d.call("_guiRelayout",b,a)}};q.resetViews={name:"resetViews",title:function(b){return v(b,"Reset views")},icon:a.home,click:function(b,a){var c=a.currentTarget;c.setAttribute("data-attr","zoom");c.setAttribute("data-val","reset");n(b,a);c.setAttribute("data-attr","resetLastSave");
m(b,a);f(b,"geo");f(b,"mapbox")}};q.toggleSpikelines={name:"toggleSpikelines",title:function(b){return v(b,"Toggle Spike Lines")},icon:a.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(b){var a=b._fullLayout;a._cartesianSpikesEnabled="on"===a._cartesianSpikesEnabled?"off":"on";d.call("_guiRelayout",b,t(b))}};q.resetViewMapbox={name:"resetViewMapbox",title:function(b){return v(b,"Reset view")},attr:"reset",icon:a.home,click:function(b){f(b,"mapbox")}};q.zoomInMapbox={name:"zoomInMapbox",
title:function(b){return v(b,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:l};q.zoomOutMapbox={name:"zoomOutMapbox",title:function(b){return v(b,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:l}},{"../../fonts/ploticon":696,"../../lib":716,"../../plots/cartesian/axis_ids":767,"../../plots/plots":825,"../../registry":845}],649:[function(a,q,p){p.manage=a("./manage")},{"./manage":650}],650:[function(a,q,p){function n(a){function c(b){if(b.length){for(var a=[],c=0;c<b.length;c++){var d=
b[c];-1===l.indexOf(d)&&a.push(f[d])}L.push(a)}}var d=a._fullLayout,e=a._fullData,g=a._context,l=g.modeBarButtonsToRemove;a=g.modeBarButtonsToAdd;var t=d._has("cartesian"),n=d._has("gl3d"),p=d._has("geo"),x=d._has("pie"),q=d._has("funnelarea"),B=d._has("gl2d"),D=d._has("ternary"),G=d._has("mapbox"),E=d._has("polar"),F=d._has("sankey");d=k(d);var L=[],J=["toImage"];g.showEditInChartStudio?J.push("editInChartStudio"):g.showSendToCloud&&J.push("sendDataToCloud");c(J);g=[];J=[];var H=[],K=[];1<(t||B||
x||q||D)+p+n+G+E?(J=["toggleHover"],H=["resetViews"]):p?(g=["zoomInGeo","zoomOutGeo"],J=["hoverClosestGeo"],H=["resetGeo"]):n?(J=["hoverClosest3d"],H=["resetCameraDefault3d","resetCameraLastSave3d"]):G?(g=["zoomInMapbox","zoomOutMapbox"],J=["toggleHover"],H=["resetViewMapbox"]):B?J=["hoverClosestGl2d"]:x?J=["hoverClosestPie"]:F?(J=["hoverClosestCartesian","hoverCompareCartesian"],H=["resetViewSankey"]):J=["toggleHover"];t&&(J=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]);h(e)&&
(J=[]);!t&&!B||d||(g=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==H[0]&&(H=["resetScale2d"]));n?K=["zoom3d","pan3d","orbitRotation","tableRotation"]:(t||B)&&!d||D?K=["zoom2d","pan2d"]:G||p?K=["pan2d"]:E&&(K=["zoom2d"]);m(e)&&K.push("select2d","lasso2d");c(K);c(g.concat(H));c(J);return b(L,a)}function k(b){b=g.list({_fullLayout:b},null,!0);for(var a=0;a<b.length;a++)if(!b[a].fixedrange)return!1;return!0}function m(b){for(var a=!1,d=0;d<b.length&&!a;d++){var f=b[d];if(f._module&&f._module.selectPoints)if(t.traceIs(f,
"scatter-like")){if(e.hasMarkers(f)||e.hasText(f))a=!0}else if(t.traceIs(f,"box-violin")){if("all"===f.boxpoints||"all"===f.points)a=!0}else a=!0}return a}function h(b){for(var a=0;a<b.length;a++)if(!t.traceIs(b[a],"noHover"))return!1;return!0}function b(b,a){if(a.length)if(Array.isArray(a[0]))for(var c=0;c<a.length;c++)b.push(a[c]);else b.push(a);return b}var g=a("../../plots/cartesian/axis_ids"),e=a("../../traces/scatter/subtypes"),t=a("../../registry"),l=a("./modebar"),f=a("./buttons");q.exports=
function(b){var a=b._fullLayout,d=b._context,e=a._modeBar;if(d.displayModeBar||d.watermark){if(!Array.isArray(d.modeBarButtonsToRemove))throw Error("*modeBarButtonsToRemove* configuration options must be an array.");if(!Array.isArray(d.modeBarButtonsToAdd))throw Error("*modeBarButtonsToAdd* configuration options must be an array.");var g=d.modeBarButtons;if(Array.isArray(g)&&g.length)for(d=0;d<g.length;d++)for(var h=g[d],k=0;k<h.length;k++){var t=h[k];if("string"===typeof t)if(void 0!==f[t])g[d][k]=
f[t];else throw Error("*modeBarButtons* configuration options invalid button name");}else g=!d.displayModeBar&&d.watermark?[]:n(b);e?e.update(b,g):a._modeBar=l(b,g)}else e&&(e.destroy(),delete a._modeBar)}},{"../../plots/cartesian/axis_ids":767,"../../registry":845,"../../traces/scatter/subtypes":1143,"./buttons":648,"./modebar":651}],651:[function(a,q,p){function n(b){this.container=b.container;this.element=document.createElement("div");this.update(b.graphInfo,b.buttons);this.container.appendChild(this.element)}
var k=a("d3"),m=a("fast-isnumeric"),h=a("../../lib"),b=a("../../fonts/ploticon"),g=new DOMParser;a=n.prototype;a.update=function(b,a){this.graphInfo=b;b=this.graphInfo._context;var e=this.graphInfo._fullLayout,f="modebar-"+e._uid;this.element.setAttribute("id",f);this._uid=f;this.element.className="modebar";"hover"===b.displayModeBar&&(this.element.className+=" modebar--hover ease-bg");"v"===e.modebar.orientation&&(this.element.className+=" vertical",a=a.reverse());var d=e.modebar,c="hover"===b.displayModeBar?
".js-plotly-plot .plotly:hover ":"";h.deleteRelatedStyleRule(f);h.addRelatedStyleRule(f,c+"#"+f+" .modebar-group","background-color: "+d.bgcolor);h.addRelatedStyleRule(f,"#"+f+" .modebar-btn .icon path","fill: "+d.color);h.addRelatedStyleRule(f,"#"+f+" .modebar-btn:hover .icon path","fill: "+d.activecolor);h.addRelatedStyleRule(f,"#"+f+" .modebar-btn.active .icon path","fill: "+d.activecolor);f=!this.hasButtons(a);d=this.hasLogo!==b.displaylogo;c=this.locale!==b.locale;this.locale=b.locale;if(f||
d||c)if(this.removeAllButtons(),this.updateButtons(a),b.watermark||b.displaylogo)a=this.getLogo(),b.watermark&&(a.className+=" watermark"),"v"===e.modebar.orientation?this.element.insertBefore(a,this.element.childNodes[0]):this.element.appendChild(a),this.hasLogo=!0;this.updateActiveButton()};a.updateButtons=function(b){var a=this;this.buttons=b;this.buttonElements=[];this.buttonsNames=[];this.buttons.forEach(function(b){var e=a.createGroup();b.forEach(function(b){var c=b.name;if(!c)throw Error("must provide button 'name' in button config");
if(-1!==a.buttonsNames.indexOf(c))throw Error("button name '"+c+"' is taken");a.buttonsNames.push(c);b=a.createButton(b);a.buttonElements.push(b);e.appendChild(b)});a.element.appendChild(e)})};a.createGroup=function(){var b=document.createElement("div");b.className="modebar-group";return b};a.createButton=function(a){var e=this,g=document.createElement("a");g.setAttribute("rel","tooltip");g.className="modebar-btn";var f=a.title;void 0===f?f=a.name:"function"===typeof f&&(f=f(this.graphInfo));(f||
0===f)&&g.setAttribute("data-title",f);void 0!==a.attr&&g.setAttribute("data-attr",a.attr);f=a.val;void 0!==f&&("function"===typeof f&&(f=f(this.graphInfo)),g.setAttribute("data-val",f));if("function"!==typeof a.click)throw Error("must provide button 'click' function in button config");g.addEventListener("click",function(b){a.click(e.graphInfo,b);e.updateActiveButton(b.currentTarget)});g.setAttribute("data-toggle",a.toggle||!1);a.toggle&&k.select(g).classed("active",!0);f=a.icon;"function"===typeof f?
g.appendChild(f()):g.appendChild(this.createIcon(f||b.question));g.setAttribute("data-gravity",a.gravity||"n");return g};a.createIcon=function(b){var a=m(b.height)?Number(b.height):b.ascent-b.descent;if(b.path){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("viewBox",[0,0,b.width,a].join(" "));e.setAttribute("class","icon");a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("d",b.path);b.transform?a.setAttribute("transform",b.transform):
void 0!==b.ascent&&a.setAttribute("transform","matrix(1 0 0 -1 0 "+b.ascent+")");e.appendChild(a)}b.svg&&(e=g.parseFromString(b.svg,"application/xml").childNodes[0]);e.setAttribute("height","1em");e.setAttribute("width","1em");return e};a.updateActiveButton=function(b){var a=this.graphInfo._fullLayout,e=void 0!==b?b.getAttribute("data-attr"):null;this.buttonElements.forEach(function(b){var d=b.getAttribute("data-val")||!0,c=b.getAttribute("data-attr"),f="true"===b.getAttribute("data-toggle");b=k.select(b);
f?c===e&&b.classed("active",!b.classed("active")):(c=null===c?c:h.nestedProperty(a,c).get(),b.classed("active",c===d))})};a.hasButtons=function(b){var a=this.buttons;if(!a||b.length!==a.length)return!1;for(var e=0;e<b.length;++e){if(b[e].length!==a[e].length)return!1;for(var f=0;f<b[e].length;f++)if(b[e][f].name!==a[e][f].name)return!1}return!0};a.getLogo=function(){var a=this.createGroup(),g=document.createElement("a");g.href="https://plot.ly/";g.target="_blank";g.setAttribute("data-title",h._(this.graphInfo,
"Produced with Plotly"));g.className="modebar-btn plotlyjsicon modebar-btn--logo";g.appendChild(this.createIcon(b.newplotlylogo));a.appendChild(g);return a};a.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1};a.destroy=function(){h.removeElement(this.container.querySelector(".modebar"));h.deleteRelatedStyleRule(this._uid)};q.exports=function(b,a){var e=b._fullLayout;b=new n({graphInfo:b,container:e._modebardiv.node(),buttons:a});
e._privateplot&&k.select(b.element).append("span").classed("badge-private float--left",!0).text("PRIVATE");return b}},{"../../fonts/ploticon":696,"../../lib":716,d3:165,"fast-isnumeric":228}],652:[function(a,q,p){p=a("../../plots/font_attributes");var n=a("../color/attributes");a=a("../../plot_api/plot_template").templatedArray;a=a("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:"month year day hour minute second all".split(" "),dflt:"month",editType:"plot"},
stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});q.exports={visible:{valType:"boolean",editType:"plot"},buttons:a,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto",
"top","middle","bottom"],dflt:"bottom",editType:"plot"},font:p({editType:"plot"}),bgcolor:{valType:"color",dflt:n.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:n.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":754,"../../plots/font_attributes":790,"../color/attributes":590}],653:[function(a,q,p){q.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,
darkAmount:10}},{}],654:[function(a,q,p){function n(b,a,d,c){function f(c,d){return m.coerce(b,a,e.buttons,c,d)}d=c.calendar;f("visible")&&(c=f("step"),"all"!==c&&(!d||"gregorian"===d||"month"!==c&&"year"!==c?f("stepmode"):a.stepmode="backward",f("count")),f("label"))}function k(b,a,d){d=d.filter(function(c){return a[c].anchor===b._id});for(var c=0,e=0;e<d.length;e++){var f=a[d[e]].domain;f&&(c=Math.max(f[1],c))}return[b.domain[0],c+t.yPad]}var m=a("../../lib"),h=a("../color"),b=a("../../plot_api/plot_template"),
g=a("../../plots/array_container_defaults"),e=a("./attributes"),t=a("./constants");q.exports=function(a,f,d,c,r){function l(b,a){return m.coerce(v,p,e,b,a)}var v=a.rangeselector||{},p=b.newContainer(f,"rangeselector");r=g(v,p,{name:"buttons",handleItemDefaults:n,calendar:r});l("visible",0<r.length)&&(c=k(f,d,c),l("x",c[0]),l("y",c[1]),m.noneOrAll(a,f,["x","y"]),l("xanchor"),l("yanchor"),m.coerceFont(l,"font",d.font),a=l("bgcolor"),l("activecolor",h.contrast(a,t.lightAmount,t.darkAmount)),l("bordercolor"),
l("borderwidth"))}},{"../../lib":716,"../../plot_api/plot_template":754,"../../plots/array_container_defaults":760,"../color":591,"./attributes":652,"./constants":653}],655:[function(a,q,p){function n(b){b=v.list(b,"x",!0);for(var a=[],c=0;c<b.length;c++){var d=b[c];d.rangeselector&&d.rangeselector.visible&&a.push(d)}return a}function k(b){return b._id}function m(b,a,c){if("all"===a.step)return!0===b.autorange;a=Object.keys(c);return b.range[0]===c[a[0]]&&b.range[1]===c[a[1]]}function h(b,a,c){b=
r.ensureSingle(b,"rect","selector-rect",function(b){b.attr("shape-rendering","crispEdges")});b.attr({rx:z.rx,ry:z.ry});b.call(d.stroke,a.bordercolor).call(d.fill,c._isActive||c._isHovered?a.activecolor:a.bgcolor).style("stroke-width",a.borderwidth+"px")}function b(b,a,d,e){r.ensureSingle(b,"text","selector-text",function(b){b.classed("user-select-none",!0).attr("text-anchor","middle")}).call(c.font,a.font).text(g(d,e._fullLayout._meta)).call(function(b){u.convertToTspans(b,e)})}function g(b,a){return b.label?
a?r.templateString(b.label,a):b.label:"all"===b.step?"all":b.count+b.step.charAt(0)}function e(b,a,d,e,g){var h=0,k=0,l=d.borderwidth;a.each(function(){var b=t.select(this).select(".selector-text");b=Math.max(d.font.size*w*u.lineCount(b),16)+3;k=Math.max(k,b)});a.each(function(){var b=t.select(this),a=b.select(".selector-rect"),e=b.select(".selector-text"),f=e.node()&&c.bBox(e.node()).width,g=d.font.size*w,r=u.lineCount(e);f=Math.max(f+10,z.minButtonWidth);b.attr("transform","translate("+(l+h)+","+
l+")");a.attr({x:0,y:0,width:f,height:k});u.positionText(e,f/2,k/2-(r-1)*g/2+3);h+=f+5});var m=b._fullLayout._size;a=m.l+m.w*d.x;m=m.t+m.h*(1-d.y);var n="left";r.isRightAnchor(d)&&(a-=h,n="right");r.isCenterAnchor(d)&&(a-=h/2,n="center");var v="top";r.isBottomAnchor(d)&&(m-=k,v="bottom");r.isMiddleAnchor(d)&&(m-=k/2,v="middle");h=Math.ceil(h);k=Math.ceil(k);a=Math.round(a);m=Math.round(m);f.autoMargin(b,e+"-range-selector",{x:d.x,y:d.y,l:h*y[n],r:h*A[n],b:k*A[v],t:k*y[v]});g.attr("transform","translate("+
a+","+m+")")}var t=a("d3"),l=a("../../registry"),f=a("../../plots/plots"),d=a("../color"),c=a("../drawing"),r=a("../../lib"),u=a("../../lib/svg_text_utils"),v=a("../../plots/cartesian/axis_ids");p=a("../../constants/alignment");var w=p.LINE_SPACING,y=p.FROM_TL,A=p.FROM_BR,z=a("./constants"),x=a("./get_update_object");q.exports=function(a){var c=a._fullLayout._infolayer.selectAll(".rangeselector").data(n(a),k);c.enter().append("g").classed("rangeselector",!0);c.exit().remove();c.style({cursor:"pointer",
"pointer-events":"all"});c.each(function(c){var d=t.select(this),f=c.rangeselector,g=d.selectAll("g.button").data(r.filterVisible(f.buttons));g.enter().append("g").classed("button",!0);g.exit().remove();g.each(function(d){var e=t.select(this),g=x(c,d);d._isActive=m(c,d,g);e.call(h,f,d);e.call(b,f,d,a);e.on("click",function(){a._dragged||l.call("_guiRelayout",a,g)});e.on("mouseover",function(){d._isHovered=!0;e.call(h,f,d)});e.on("mouseout",function(){d._isHovered=!1;e.call(h,f,d)})});e(a,g,f,c._name,
d)})}},{"../../constants/alignment":685,"../../lib":716,"../../lib/svg_text_utils":740,"../../plots/cartesian/axis_ids":767,"../../plots/plots":825,"../../registry":845,"../color":591,"../drawing":612,"./constants":653,"./get_update_object":656,d3:165}],656:[function(a,q,p){var n=a("d3");q.exports=function(a,m){var h=a._name,b={};if("all"===m.step)b[h+".autorange"]=!0;else{var g=a.range,e=new Date(a.r2l(g[1])),k=m.step,l=m.count;switch(m.stepmode){case "backward":var f=a.l2r(+n.time[k].utc.offset(e,
-l));break;case "todate":m=n.time[k].utc.offset(e,-l),f=a.l2r(+n.time[k].utc.ceil(m))}a=[f,g[1]];b[h+".range[0]"]=a[0];b[h+".range[1]"]=a[1]}return b}},{d3:165}],657:[function(a,q,p){q.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:a("./attributes")}}},layoutAttributes:a("./attributes"),handleDefaults:a("./defaults"),draw:a("./draw")}},{"./attributes":652,"./defaults":654,"./draw":655}],658:[function(a,q,p){a=a("../color/attributes");q.exports={bgcolor:{valType:"color",
dflt:a.background,editType:"plot"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",
dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":590}],659:[function(a,q,p){var n=a("../../plots/cartesian/axis_ids").list,k=a("../../plots/cartesian/autorange").getAutoRange,m=a("./constants");q.exports=function(a){for(var b=n(a,"x",!0),g=0;g<b.length;g++){var e=b[g],h=e[m.name];h&&h.visible&&h.autorange&&(h._input.autorange=!0,h._input.range=h.range=k(a,e))}}},{"../../plots/cartesian/autorange":763,"../../plots/cartesian/axis_ids":767,
"./constants":660}],660:[function(a,q,p){q.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",
handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],661:[function(a,q,p){var n=a("../../lib"),k=a("../../plot_api/plot_template"),m=a("../../plots/cartesian/axis_ids"),
h=a("./attributes"),b=a("./oppaxis_attributes");q.exports=function(a,e,t){function g(b,a){return n.coerce(c,r,h,b,a)}function f(a,c){return n.coerce(v,p,b,a,c)}a=a[t];var d=e[t];if(a.rangeslider||e._requestRangeslider[d._id]){n.isPlainObject(a.rangeslider)||(a.rangeslider={});var c=a.rangeslider,r=k.newContainer(d,"rangeslider");if(g("visible")){g("bgcolor",e.plot_bgcolor);g("bordercolor");g("borderwidth");g("thickness");g("autorange",!d.isValidRange(c.range));g("range");if(a=e._subplots)for(a=a.cartesian.filter(function(b){return b.substr(0,
b.indexOf("y"))===m.name2id(t)}).map(function(b){return b.substr(b.indexOf("y"),b.length)}),a=n.simpleMap(a,m.id2name),d=0;d<a.length;d++){var u=a[d];var v=c[u]||{};var p=k.newContainer(r,u,"yaxis");u=e[u];var q;v.range&&u.isValidRange(v.range)&&(q="fixed");"match"!==f("rangemode",q)&&f("range",u.range.slice())}r._input=c}}}},{"../../lib":716,"../../plot_api/plot_template":754,"../../plots/cartesian/axis_ids":767,"./attributes":658,"./oppaxis_attributes":665}],662:[function(a,q,p){function n(b,a,
c,e){var f=b.select("rect."+B.slideBoxClassName).node(),g=b.select("rect."+B.grabAreaMinClassName).node(),h=b.select("rect."+B.grabAreaMaxClassName).node();b.on("mousedown",function(){function l(l){var r=+l.clientX-n;switch(m){case f:var t="ew-resize";l=p+r;r=w+r;break;case g:t="col-resize";l=p+r;r=w;break;case h:t="col-resize";l=p;r=w+r;break;default:t="ew-resize",l=v,r=v+r}if(r<l){var u=r;r=l;l=u}e._pixelMin=l;e._pixelMax=r;C(d.select(z),t);k(b,a,c,e)}function r(){z.removeEventListener("mousemove",
l);z.removeEventListener("mouseup",r);u.removeElement(z)}var t=d.event,m=t.target,n=t.clientX,v=n-b.node().getBoundingClientRect().left,p=e.d2p(c._rl[0]),w=e.d2p(c._rl[1]),z=x.coverSlip();z.addEventListener("mousemove",l);z.addEventListener("mouseup",r)})}function k(b,a,d,e){var f=d.l2r(u.constrain(e.p2d(e._pixelMin),e._rl[0],e._rl[1])),g=d.l2r(u.constrain(e.p2d(e._pixelMax),e._rl[0],e._rl[1]));window.requestAnimationFrame(function(){c.call("_guiRelayout",a,d._name+".range",[f,g])})}function m(b,
a,c,d,e,f){a=B.handleWidth/2;var g=u.constrain(d.d2p(c._rl[0]),0,d._width);c=u.constrain(d.d2p(c._rl[1]),0,d._width);b.select("rect."+B.slideBoxClassName).attr("x",g).attr("width",c-g);b.select("rect."+B.maskMinClassName).attr("width",g);b.select("rect."+B.maskMaxClassName).attr("x",c).attr("width",d._width-c);"match"!==f.rangemode&&(f=d._height-u.constrain(d.d2pOppAxis(e._rl[1]),0,d._height),e=d._height-u.constrain(d.d2pOppAxis(e._rl[0]),0,d._height),b.select("rect."+B.maskMinOppAxisClassName).attr("x",
g).attr("height",f).attr("width",c-g),b.select("rect."+B.maskMaxOppAxisClassName).attr("x",g).attr("y",e).attr("height",d._height-e).attr("width",c-g),b.select("rect."+B.slideBoxClassName).attr("y",f).attr("height",e-f));e=Math.round(u.constrain(g-a,-a,d._width+a))-.5;d=Math.round(u.constrain(c-a,-a,d._width+a))+.5;b.select("g."+B.grabberMinClassName).attr("transform","translate("+e+",0.5)");b.select("g."+B.grabberMaxClassName).attr("transform","translate("+d+",0.5)")}function h(b,a,c,d){b=u.ensureSingle(b,
"rect",B.bgClassName,function(b){b.attr({x:0,y:0,"shape-rendering":"crispEdges"})});c=0===d.borderwidth%2?d.borderwidth:d.borderwidth-1;var e=-d._offsetShift;a=v.crispRound(a,d.borderwidth);b.attr({width:d._width+c,height:d._height+c,transform:"translate("+e+","+e+")",fill:d.bgcolor,stroke:d.bordercolor,"stroke-width":a})}function b(b,a,c,d){u.ensureSingleById(a._fullLayout._topdefs,"clipPath",d._clipId,function(b){b.append("rect").attr({x:0,y:0})}).select("rect").attr({width:d._width,height:d._height})}
function g(b,a,c,f){var g=a.calcdata;b=b.selectAll("g."+B.rangePlotClassName).data(c._subplotsWith,u.identity);b.enter().append("g").attr("class",function(b){return B.rangePlotClassName+" "+b}).call(v.setClipUrl,f._clipId,a);b.order();b.exit().remove();var h;b.each(function(b,k){var l=d.select(this);k=0===k;var t=z.getFromId(a,b,"y"),m=t._name,n=f[m],u={data:[],layout:{xaxis:{type:c.type,domain:[0,1],range:f.range.slice(),calendar:c.calendar},width:f._width,height:f._height,margin:{t:0,b:0,l:0,r:0}},
_context:a._context};u.layout[m]={type:t.type,domain:[0,1],range:"match"!==n.rangemode?n.range.slice():t.range.slice(),calendar:t.calendar};r.supplyDefaults(u);t=u._fullLayout.xaxis;m=u._fullLayout[m];t.clearCalc();t.setScale();m.clearCalc();m.setScale();l={id:b,plotgroup:l,xaxis:t,yaxis:m,isRangePlot:!0};k?h=l:(l.mainplot="xy",l.mainplotinfo=h);A.rangePlot(a,l,e(g,b))})}function e(b,a){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=e[0].trace;f.xaxis+f.yaxis===a&&c.push(e)}return c}function t(b,a,
c,d,e){u.ensureSingle(b,"rect",B.maskMinClassName,function(b){b.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",d._height).call(w.fill,B.maskColor);u.ensureSingle(b,"rect",B.maskMaxClassName,function(b){b.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",d._height).call(w.fill,B.maskColor);"match"!==e.rangemode&&(u.ensureSingle(b,"rect",B.maskMinOppAxisClassName,function(b){b.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",d._width).call(w.fill,B.maskOppAxisColor),
u.ensureSingle(b,"rect",B.maskMaxOppAxisClassName,function(b){b.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",d._width).style("border-top",B.maskOppBorder).call(w.fill,B.maskOppAxisColor))}function l(b,a,c,d){a._context.staticPlot||u.ensureSingle(b,"rect",B.slideBoxClassName,function(b){b.attr({y:0,cursor:B.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:d._height,fill:B.slideBoxFill})}function f(b,a,c,d){c=u.ensureSingle(b,"g",B.grabberMinClassName);b=u.ensureSingle(b,
"g",B.grabberMaxClassName);var e={x:0,width:B.handleWidth,rx:B.handleRadius,fill:w.background,stroke:w.defaultLine,"stroke-width":B.handleStrokeWidth,"shape-rendering":"crispEdges"},f={y:Math.round(d._height/4),height:Math.round(d._height/2)};u.ensureSingle(c,"rect",B.handleMinClassName,function(b){b.attr(e)}).attr(f);u.ensureSingle(b,"rect",B.handleMaxClassName,function(b){b.attr(e)}).attr(f);if(!a._context.staticPlot){var g={width:B.grabAreaWidth,x:0,y:0,fill:B.grabAreaFill,cursor:B.grabAreaCursor};
u.ensureSingle(c,"rect",B.grabAreaMinClassName,function(b){b.attr(g)}).attr("height",d._height);u.ensureSingle(b,"rect",B.grabAreaMaxClassName,function(b){b.attr(g)}).attr("height",d._height)}}var d=a("d3"),c=a("../../registry"),r=a("../../plots/plots"),u=a("../../lib"),v=a("../drawing"),w=a("../color"),y=a("../titles"),A=a("../../plots/cartesian"),z=a("../../plots/cartesian/axis_ids"),x=a("../dragelement"),C=a("../../lib/setcursor"),B=a("./constants");q.exports=function(a){for(var c=a._fullLayout,
e=c._rangeSliderData,k=0;k<e.length;k++){var r=e[k][B.name];r._clipId=r._id+"-"+c._uid}k=c._infolayer.selectAll("g."+B.containerClassName).data(e,function(b){return b._name});k.exit().each(function(b){c._topdefs.select("#"+b[B.name]._clipId).remove()}).remove();0!==e.length&&(k.enter().append("g").classed(B.containerClassName,!0).attr("pointer-events","all"),k.each(function(e){var k=d.select(this),r=e[B.name],v=c[z.id2name(e.anchor)],p=r[z.id2name(e.anchor)];if(r.range){var x=u.simpleMap(r.range,
e.r2l),w=u.simpleMap(e.range,e.r2l);r.range=r._input.range=u.simpleMap(w[0]<w[1]?[Math.min(x[0],w[0]),Math.max(x[1],w[1])]:[Math.max(x[0],w[0]),Math.min(x[1],w[1])],e.l2r)}e.cleanRange("rangeslider.range");w=c._size;var q=e.domain;r._width=w.w*(q[1]-q[0]);x=Math.round(w.t+w.h*(1-e._counterDomainMin)+("bottom"===e.side?e._depth:0)+r._offsetShift+B.extraPad);k.attr("transform","translate("+Math.round(w.l+w.w*q[0])+","+x+")");var A=e.r2l(r.range[0]);w=e.r2l(r.range[1]);var C=w-A;r.p2d=function(b){return b/
r._width*C+A};r.d2p=function(b){return(b-A)/C*r._width};r._rl=[A,w];if("match"!==p.rangemode){var D=v.r2l(p.range[0]),E=v.r2l(p.range[1])-D;r.d2pOppAxis=function(b){return(b-D)/E*r._height}}k.call(h,a,e,r).call(b,a,e,r).call(g,a,e,r).call(t,a,e,r,p).call(l,a,e,r).call(f,a,e,r);n(k,a,e,r);m(k,a,e,r,v,p);"bottom"===e.side&&y.draw(a,e._id+"title",{propContainer:e,propName:e._name+".title",placeholder:c._dfltTitle.x,attributes:{x:e._offset+e._length/2,y:x+r._height+r._offsetShift+10+1.5*e.title.font.size,
"text-anchor":"middle"}})}))}},{"../../lib":716,"../../lib/setcursor":736,"../../plots/cartesian":775,"../../plots/cartesian/axis_ids":767,"../../plots/plots":825,"../../registry":845,"../color":591,"../dragelement":609,"../drawing":612,"../titles":678,"./constants":660,d3:165}],663:[function(a,q,p){function n(b){return(b=b&&b[g])&&b.visible}var k=a("../../plots/cartesian/axis_ids"),m=a("../../lib/svg_text_utils"),h=a("./constants"),b=a("../../constants/alignment").LINE_SPACING,g=h.name;p.isVisible=
n;p.makeData=function(b){var a=k.list({_fullLayout:b},"x",!0),e=b.margin,f=[];if(!b._has("gl2d"))for(var d=0;d<a.length;d++){var c=a[d];if(n(c)){f.push(c);var h=c[g];h._id=g+c._id;h._height=(b.height-e.b-e.t)*h.thickness;h._offsetShift=Math.floor(h.borderwidth/2)}}b._rangeSliderData=f};p.autoMarginOpts=function(a,k){a=a._fullLayout;var e=k[g],f=k._id.charAt(0),d=0,c=0;"bottom"===k.side&&(d=k._depth,k.title.text!==a._dfltTitle[f]&&(c=1.5*k.title.font.size+10+e._offsetShift,f=(k.title.text.match(m.BR_TAG_ALL)||
[]).length,c+=f*k.title.font.size*b));return{x:0,y:k._counterDomainMin,l:0,r:0,t:0,b:e._height+d+Math.max(a.margin.b,c),pad:h.extraPad+2*e._offsetShift}}},{"../../constants/alignment":685,"../../lib/svg_text_utils":740,"../../plots/cartesian/axis_ids":767,"./constants":660}],664:[function(a,q,p){p=a("../../lib");var n=a("./attributes"),k=a("./oppaxis_attributes"),m=a("./helpers");q.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:p.extendFlat({},n,{yaxis:k})}}},
layoutAttributes:a("./attributes"),handleDefaults:a("./defaults"),calcAutorange:a("./calc_autorange"),draw:a("./draw"),isVisible:m.isVisible,makeData:m.makeData,autoMarginOpts:m.autoMarginOpts}},{"../../lib":716,"./attributes":658,"./calc_autorange":659,"./defaults":661,"./draw":662,"./helpers":663,"./oppaxis_attributes":665}],665:[function(a,q,p){q.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",
editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],666:[function(a,q,p){p=a("../annotations/attributes");var n=a("../../traces/scatter/attributes").line,k=a("../drawing/attributes").dash,m=a("../../lib/extend").extendFlat;a=a("../../plot_api/plot_template").templatedArray;q.exports=a("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",
values:["below","above"],dflt:"above",editType:"arraydraw"},xref:m({},p.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:m({},p.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",
editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:m({},n.color,{editType:"arraydraw"}),width:m({},n.width,{editType:"calc+arraydraw"}),dash:m({},k,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},editType:"arraydraw"})},{"../../lib/extend":707,"../../plot_api/plot_template":754,
"../../traces/scatter/attributes":1119,"../annotations/attributes":574,"../drawing/attributes":611}],667:[function(a,q,p){function n(a,h,k,f,d,c){a/=2;return"pixel"===h?(k=d?g.extractPathCoords(d,c?b.paramIsY:b.paramIsX):[k,f],h=m.aggNums(Math.max,null,k),k=m.aggNums(Math.min,null,k),k=0>k?Math.abs(k)+a:a,h=0<h?h+a:a,{ppad:a,ppadplus:c?k:h,ppadminus:c?h:k}):{ppad:a}}function k(a,h,k,f,d){var c="category"===a.type||"multicategory"===a.type?a.r2c:a.d2c;if(void 0!==h)return[c(h),c(k)];if(f){h=Infinity;
k=-Infinity;f=f.match(b.segmentRE);var e;"date"===a.type&&(c=g.decodeDate(c));for(a=0;a<f.length;a++){var l=f[a];l=d[l.charAt(0)].drawn;void 0!==l&&(!(e=f[a].substr(1).match(b.paramRE))||e.length<l||(l=c(e[l]),l<h&&(h=l),l>k&&(k=l)))}if(k>=h)return[h,k]}}var m=a("../../lib"),h=a("../../plots/cartesian/axes"),b=a("./constants"),g=a("./helpers");q.exports=function(a){var e=m.filterVisible(a._fullLayout.shapes);if(e.length&&a._fullData.length)for(var g=0;g<e.length;g++){var f=e[g];f._extremes={};if("paper"!==
f.xref){var d="pixel"===f.xsizemode?f.xanchor:f.x0;var c="pixel"===f.xsizemode?f.xanchor:f.x1;var r=h.getFromId(a,f.xref);(d=k(r,d,c,f.path,b.paramIsX))&&(f._extremes[r._id]=h.findExtremes(r,d,n(f.line.width,f.xsizemode,f.x0,f.x1,f.path,!1)))}"paper"!==f.yref&&(d="pixel"===f.ysizemode?f.yanchor:f.y0,c="pixel"===f.ysizemode?f.yanchor:f.y1,r=h.getFromId(a,f.yref),(d=k(r,d,c,f.path,b.paramIsY))&&(f._extremes[r._id]=h.findExtremes(r,d,n(f.line.width,f.ysizemode,f.y0,f.y1,f.path,!0))))}}},{"../../lib":716,
"../../plots/cartesian/axes":764,"./constants":668,"./helpers":671}],668:[function(a,q,p){q.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,
V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],669:[function(a,q,p){function n(a,h,l){function e(c,d){return k.coerce(a,h,b,c,d)}if(e("visible")){e("layer");e("opacity");e("fillcolor");e("line.color");e("line.width");e("line.dash");for(var d=e("type",a.path?"path":"rect"),c=e("xsizemode"),r=e("ysizemode"),t=["x","y"],n=0;2>n;n++){var p=t[n],q=p+"anchor",A="x"===p?c:r,z={_fullLayout:l},x=m.coerceRef(a,h,z,p,"","paper");if("paper"!==x){var C=m.getFromId(z,x);C._shapeIndices.push(h._index);var B=g.rangeToShapePosition(C);
C=g.shapePositionToRange(C)}else C=B=k.identity;if("path"!==d){var D=p+"0";p+="1";var G=a[D],E=a[p];a[D]=C(a[D],!0);a[p]=C(a[p],!0);"pixel"===A?(e(D,0),e(p,10)):(m.coercePosition(h,z,e,x,D,.25),m.coercePosition(h,z,e,x,p,.75));h[D]=B(h[D]);h[p]=B(h[p]);a[D]=G;a[p]=E}"pixel"===A&&(A=a[q],a[q]=C(a[q],!0),m.coercePosition(h,z,e,x,q,.25),h[q]=B(h[q]),a[q]=A)}"path"===d?e("path"):k.noneOrAll(a,h,["x0","x1","y0","y1"])}}var k=a("../../lib"),m=a("../../plots/cartesian/axes"),h=a("../../plots/array_container_defaults"),
b=a("./attributes"),g=a("./helpers");q.exports=function(b,a){h(b,a,{name:"shapes",handleItemDefaults:n})}},{"../../lib":716,"../../plots/array_container_defaults":760,"../../plots/cartesian/axes":764,"./attributes":666,"./helpers":671}],670:[function(a,q,p){function n(b,a){function c(c){var g={"data-index":a,"fill-rule":"evenodd",d:h(b,e)},l=e.line.width?e.line.color:"rgba(0,0,0,0)";g=c.append("path").attr(g).style("opacity",e.opacity).call(f.stroke,l).call(f.fill,e.fillcolor).call(d.dashLine,e.line.dash,
e.line.width);k(g,b,e);b._context.edits.shapePosition&&m(b,g,e,a,c)}b._fullLayout._paperdiv.selectAll('.shapelayer [data-index\x3d"'+a+'"]').remove();var e=b._fullLayout.shapes[a]||{};if(e._input&&!1!==e.visible)if("below"!==e.layer)c(b._fullLayout._shapeUpperLayer);else if("paper"===e.xref||"paper"===e.yref)c(b._fullLayout._shapeLowerLayer);else{var g=b._fullLayout._plots[e.xref+e.yref];g?c((g.mainplotinfo||g).shapelayer):c(b._fullLayout._shapeLowerLayer)}}function k(b,a,c){c=(c.xref+c.yref).replace(/paper/g,
"");d.setClipUrl(b,c?"clip"+a._fullLayout._uid+c:null,a)}function m(b,a,f,m,n){function p(){var b=Math.max(f.line.width,10),c=n.append("g").attr("data-index",m);c.append("path").attr("d",a.attr("d")).style({cursor:"move","stroke-width":b,"stroke-opacity":"0"});var d={"fill-opacity":"0"};b=10<b/2?b/2:10;c.append("circle").attr({"data-line-point":"start-point",cx:y?aa(f.xanchor)+f.x0:aa(f.x0),cy:C?na(f.yanchor)-f.y0:na(f.y0),r:b}).style(d).classed("cursor-grab",!0);c.append("circle").attr({"data-line-point":"end-point",
cx:y?aa(f.xanchor)+f.x1:aa(f.x1),cy:C?na(f.yanchor)-f.y1:na(f.y1),r:b}).style(d).classed("cursor-grab",!0);return c}function x(b){if(H)ia="path"===b.target.tagName?"move":"start-point"===b.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var c=ka.element.getBoundingClientRect(),d=c.right-c.left,e=c.bottom-c.top,f=b.clientX-c.left;c=b.clientY-c.top;b=!K&&10<d&&10<e&&!b.shiftKey?r.getCursor(f/d,1-c/e):"move";u(a,b);ia=b.split("-")[0]}}function z(c,d){if("path"===
f.type){var e=function(b){return b},k=e;y?I("xanchor",f.xanchor=ha(T+c)):(k=function(b){return ha(aa(b)+c)},da&&"date"===da.type&&(k=w.encodeDate(k)));C?I("yanchor",f.yanchor=ja(V+d)):(e=function(b){return ja(na(b)+d)},ma&&"date"===ma.type&&(e=w.encodeDate(e)));I("path",f.path=g(la,k,e))}else y?I("xanchor",f.xanchor=ha(T+c)):(I("x0",f.x0=ha(N+c)),I("x1",f.x1=ha(P+c))),C?I("yanchor",f.yanchor=ja(V+d)):(I("y0",f.y0=ja(O+d)),I("y1",f.y1=ja(Q+d)));a.attr("d",h(b,f));A(n,f)}function q(c,d){if(K){var e=
function(b){return b},k=e;y?I("xanchor",f.xanchor=ha(T+c)):(k=function(b){return ha(aa(b)+c)},da&&"date"===da.type&&(k=w.encodeDate(k)));C?I("yanchor",f.yanchor=ja(V+d)):(e=function(b){return ja(na(b)+d)},ma&&"date"===ma.type&&(e=w.encodeDate(e)));I("path",f.path=g(la,k,e))}else if(H)"resize-over-start-point"===ia?(k=N+c,e=C?O-d:O+d,I("x0",f.x0=y?k:ha(k)),I("y0",f.y0=C?e:ja(e))):"resize-over-end-point"===ia&&(k=P+c,e=C?Q-d:Q+d,I("x1",f.x1=y?k:ha(k)),I("y1",f.y1=C?e:ja(e)));else{k=~ia.indexOf("n")?
Y+d:Y;e=~ia.indexOf("s")?ca+d:ca;var l=~ia.indexOf("w")?Z+c:Z,r=~ia.indexOf("e")?R+c:R;~ia.indexOf("n")&&C&&(k=Y-d);~ia.indexOf("s")&&C&&(e=ca-d);if(!C&&10<e-k||C&&10<k-e)I(U,f[U]=C?k:ja(k)),I(X,f[X]=C?e:ja(e));10<r-l&&(I(ea,f[ea]=y?l:ha(l)),I(fa,f[fa]=y?r:ha(r)))}a.attr("d",h(b,f));A(n,f)}function A(b,a){if(y||C){var c="path"!==a.type;b=b.selectAll(".visual-cue").data([0]);b.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var d=
aa(y?a.xanchor:t.midRange(c?[a.x0,a.x1]:w.extractPathCoords(a.path,v.paramIsX)));a=na(C?a.yanchor:t.midRange(c?[a.y0,a.y1]:w.extractPathCoords(a.path,v.paramIsY)));d=w.roundPositionForSharpStrokeRendering(d,1);a=w.roundPositionForSharpStrokeRendering(a,1);y&&C?b.attr("d","M"+(d-1-1)+","+(a-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z"):y?b.attr("d","M"+(d-1-1)+","+(a-9-1)+"v18 h2 v-18 Z"):b.attr("d","M"+(d-9-1)+","+(a-1-1)+"h18 v2 h-18 Z")}}var y="pixel"===f.xsizemode,C="pixel"===f.ysizemode,H="line"===
f.type,K="path"===f.type,M=c(b.layout,"shapes",f),I=M.modifyItem,N,O,P,Q,T,V,Y,ca,Z,R,U,X,ea,fa,la,da=l.getFromId(b,f.xref),ma=l.getFromId(b,f.yref),aa=w.getDataToPixel(b,da),na=w.getDataToPixel(b,ma,!0),ha=w.getPixelToData(b,da),ja=w.getPixelToData(b,ma,!0),oa=H?p():a,ka={element:oa.node(),gd:b,prepFn:function(c){y&&(T=aa(f.xanchor));C&&(V=na(f.yanchor));"path"===f.type?la=f.path:(N=y?f.x0:aa(f.x0),O=C?f.y0:na(f.y0),P=y?f.x1:aa(f.x1),Q=C?f.y1:na(f.y1));N<P?(Z=N,ea="x0",R=P,fa="x1"):(Z=P,ea="x1",
R=N,fa="x0");!C&&O<Q||C&&O>Q?(Y=O,U="y0",ca=Q,X="y1"):(Y=Q,U="y1",ca=O,X="y0");x(c);A(n,f);c=f.xref;var e=f.yref,g=l.getFromId(b,c),h=l.getFromId(b,e),k="";"paper"===c||g.autorange||(k+=c);"paper"===e||h.autorange||(k+=e);d.setClipUrl(a,k?"clip"+b._fullLayout._uid+k:null,b);ka.moveFn="move"===ia?z:q},doneFn:function(){u(a);n.selectAll(".visual-cue").remove();k(a,b,f);e.call("_guiRelayout",b,M.getUpdateObj())},clickFn:function(){n.selectAll(".visual-cue").remove()}},ia;r.init(ka);oa.node().onmousemove=
x}function h(a,c){var d=c.type,e=l.getFromId(a,c.xref),f=l.getFromId(a,c.yref),g=a._fullLayout._size;if(e){var h=w.shapePositionToRange(e);var k=function(b){return e._offset+e.r2p(h(b,!0))}}else k=function(b){return g.l+g.w*b};if(f){var r=w.shapePositionToRange(f);var t=function(b){return f._offset+f.r2p(r(b,!0))}}else t=function(b){return g.t+g.h*(1-b)};if("path"===d)return e&&"date"===e.type&&(k=w.decodeDate(k)),f&&"date"===f.type&&(t=w.decodeDate(t)),b(c,k,t);if("pixel"===c.xsizemode){k=k(c.xanchor);
a=k+c.x0;var m=k+c.x1}else a=k(c.x0),m=k(c.x1);"pixel"===c.ysizemode?(t=t(c.yanchor),k=t-c.y0,c=t-c.y1):(k=t(c.y0),c=t(c.y1));if("line"===d)return"M"+a+","+k+"L"+m+","+c;if("rect"===d)return"M"+a+","+k+"H"+m+"V"+c+"H"+a+"Z";d=(a+m)/2;c=(k+c)/2;a=Math.abs(d-a);k=Math.abs(c-k);t="A"+a+","+k;a=d+a+","+c;return"M"+a+t+" 0 1,1 "+(d+","+(c-k))+t+" 0 0,1 "+a+"Z"}function b(b,a,c){var d=b.xsizemode,e=b.ysizemode,f=b.xanchor,g=b.yanchor;return b.path.replace(v.segmentRE,function(b){var h=0,k=b.charAt(0),l=
v.paramIsX[k],r=v.paramIsY[k],m=v.numParams[k],n=b.substr(1).replace(v.paramRE,function(b){l[h]?b="pixel"===d?a(f)+Number(b):a(b):r[h]&&(b="pixel"===e?c(g)-Number(b):c(b));h++;h>m&&(b="X");return b});h>m&&(n=n.replace(/[\s,]*X.*/,""),t.log("Ignoring extra params in segment "+b));return k+n})}function g(b,a,c){return b.replace(v.segmentRE,function(b){var d=0,e=b.charAt(0),f=v.paramIsX[e],g=v.paramIsY[e],h=v.numParams[e];b=b.substr(1).replace(v.paramRE,function(b){if(d>=h)return b;f[d]?b=a(b):g[d]&&
(b=c(b));d++;return b});return e+b})}var e=a("../../registry"),t=a("../../lib"),l=a("../../plots/cartesian/axes"),f=a("../color"),d=a("../drawing"),c=a("../../plot_api/plot_template").arrayEditor,r=a("../dragelement"),u=a("../../lib/setcursor"),v=a("./constants"),w=a("./helpers");q.exports={draw:function(b){var a=b._fullLayout;a._shapeUpperLayer.selectAll("path").remove();a._shapeLowerLayer.selectAll("path").remove();for(var c in a._plots){var d=a._plots[c].shapelayer;d&&d.selectAll("path").remove()}for(c=
0;c<a.shapes.length;c++)a.shapes[c].visible&&n(b,c)},drawOne:n}},{"../../lib":716,"../../lib/setcursor":736,"../../plot_api/plot_template":754,"../../plots/cartesian/axes":764,"../../registry":845,"../color":591,"../dragelement":609,"../drawing":612,"./constants":668,"./helpers":671}],671:[function(a,q,p){var n=a("./constants"),k=a("../../lib");p.rangeToShapePosition=function(a){return"log"===a.type?a.r2d:function(a){return a}};p.shapePositionToRange=function(a){return"log"===a.type?a.d2r:function(a){return a}};
p.decodeDate=function(a){return function(h){h.replace&&(h=h.replace("_"," "));return a(h)}};p.encodeDate=function(a){return function(h){return a(h).replace(" ","_")}};p.extractPathCoords=function(a,h){var b=[];a.match(n.segmentRE).forEach(function(a){var e=h[a.charAt(0)].drawn;void 0!==e&&(a=a.substr(1).match(n.paramRE),!a||a.length<e||b.push(k.cleanNumber(a[e])))});return b};p.getDataToPixel=function(a,h,b){var g=a._fullLayout._size;if(h){var e=p.shapePositionToRange(h);a=function(b){return h._offset+
h.r2p(e(b,!0))};"date"===h.type&&(a=p.decodeDate(a))}else a=b?function(b){return g.t+g.h*(1-b)}:function(b){return g.l+g.w*b};return a};p.getPixelToData=function(a,h,b){var g=a._fullLayout._size;if(h){var e=p.rangeToShapePosition(h);a=function(b){return e(h.p2r(b-h._offset))}}else a=b?function(b){return 1-(b-g.t)/g.h}:function(b){return(b-g.l)/g.w};return a};p.roundPositionForSharpStrokeRendering=function(a,h){a=Math.round(a);return 1===Math.round(h%2)?a+.5:a}},{"../../lib":716,"./constants":668}],
672:[function(a,q,p){p=a("./draw");q.exports={moduleType:"component",name:"shapes",layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),includeBasePlot:a("../../plots/cartesian/include_components")("shapes"),calcAutorange:a("./calc_autorange"),draw:p.draw,drawOne:p.drawOne}},{"../../plots/cartesian/include_components":774,"./attributes":666,"./calc_autorange":667,"./defaults":669,"./draw":670}],673:[function(a,q,p){p=a("../../plots/font_attributes");var n=a("../../plots/pad_attributes"),
k=a("../../lib/extend").extendDeepAll,m=a("../../plot_api/edit_types").overrideAll,h=a("../../plots/animation_attributes"),b=a("../../plot_api/plot_template").templatedArray;a=a("./constants");var g=b("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",
dflt:!0}});q.exports=m(b("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:g,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:k(n({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle",
"bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:h.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:p({})},font:p({}),activebgcolor:{valType:"color",dflt:a.gripBgActiveColor},bgcolor:{valType:"color",dflt:a.railBgColor},bordercolor:{valType:"color",
dflt:a.railBorderColor},borderwidth:{valType:"number",min:0,dflt:a.railBorderWidth},ticklen:{valType:"number",min:0,dflt:a.tickLength},tickcolor:{valType:"color",dflt:a.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:a.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":707,"../../plot_api/edit_types":747,"../../plot_api/plot_template":754,"../../plots/animation_attributes":759,"../../plots/font_attributes":790,"../../plots/pad_attributes":824,
"./constants":674}],674:[function(a,q,p){q.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",
autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,
currentValuePadding:8,currentValueInset:0}},{}],675:[function(a,q,p){function n(a,e,f){function d(c,d){return m.coerce(a,e,b,c,d)}for(var c=h(a,e,{name:"steps",handleItemDefaults:k}),g=0,l=0;l<c.length;l++)c[l].visible&&g++;if(2>g?e.visible=!1:d("visible"))e._stepCount=g,g=e._visibleSteps=m.filterVisible(c),l=d("active"),(c[l]||{}).visible||(e.active=g[0]._index),d("x"),d("y"),m.noneOrAll(a,e,["x","y"]),d("xanchor"),d("yanchor"),d("len"),d("lenmode"),d("pad.t"),d("pad.r"),d("pad.b"),d("pad.l"),m.coerceFont(d,
"font",f.font),d("currentvalue.visible")&&(d("currentvalue.xanchor"),d("currentvalue.prefix"),d("currentvalue.suffix"),d("currentvalue.offset"),m.coerceFont(d,"currentvalue.font",e.font)),d("transition.duration"),d("transition.easing"),d("bgcolor"),d("activebgcolor"),d("bordercolor"),d("borderwidth"),d("ticklen"),d("tickwidth"),d("tickcolor"),d("minorticklen")}function k(b,a){function f(c,d){return m.coerce(b,a,e,c,d)}if("skip"===b.method||Array.isArray(b.args)?f("visible"):a.visible=!1){f("method");
f("args");var d=f("label","step-"+a._index);f("value",d);f("execute")}}var m=a("../../lib"),h=a("../../plots/array_container_defaults"),b=a("./attributes"),g=a("./constants").name,e=b.steps;q.exports=function(b,a){h(b,a,{name:g,handleItemDefaults:n})}},{"../../lib":716,"../../plots/array_container_defaults":760,"./attributes":673,"./constants":674}],676:[function(a,q,p){function n(b,a){b=b[F.name];for(var c=[],d=0;d<b.length;d++){var e=b[d];e.visible&&(e._gd=a,c.push(e))}return c}function k(b){return b._index}
function m(a,c){var d=B.tester.selectAll("g."+F.labelGroupClass).data(c._visibleSteps);d.enter().append("g").classed(F.labelGroupClass,!0);var f=0,g=0;d.each(function(b){var a=z.select(this);if(b=e(a,{step:b},c).node())b=B.bBox(b),g=Math.max(g,b.height),f=Math.max(f,b.width)});d.remove();var h=c._dims={};h.inputAreaWidth=Math.max(F.railWidth,F.gripHeight);var k=a._fullLayout._size;h.lx=k.l+k.w*c.x;h.ly=k.t+k.h*(1-c.y);h.outerLength="fraction"===c.lenmode?Math.round(k.w*c.len):c.len;h.inputAreaStart=
0;h.inputAreaLength=Math.round(h.outerLength-c.pad.l-c.pad.r);h.labelStride=Math.max(1,Math.ceil((f+F.labelPadding)/((h.inputAreaLength-2*F.stepInset)/(c._stepCount-1))));h.labelHeight=g;h.currentValueMaxWidth=0;h.currentValueHeight=0;h.currentValueTotalHeight=0;h.currentValueMaxLines=1;if(c.currentvalue.visible){var l=B.tester.append("g");d.each(function(a){var d=b(l,c,a.label);a=d.node()&&B.bBox(d.node())||{width:0,height:0};d=G.lineCount(d);h.currentValueMaxWidth=Math.max(h.currentValueMaxWidth,
Math.ceil(a.width));h.currentValueHeight=Math.max(h.currentValueHeight,Math.ceil(a.height));h.currentValueMaxLines=Math.max(h.currentValueMaxLines,d)});h.currentValueTotalHeight=h.currentValueHeight+c.currentvalue.offset;l.remove()}h.height=h.currentValueTotalHeight+F.tickOffset+c.ticklen+F.labelOffset+h.labelHeight+c.pad.t+c.pad.b;d="left";D.isRightAnchor(c)&&(h.lx-=h.outerLength,d="right");D.isCenterAnchor(c)&&(h.lx-=h.outerLength/2,d="center");k="top";D.isBottomAnchor(c)&&(h.ly-=h.height,k="bottom");
D.isMiddleAnchor(c)&&(h.ly-=h.height/2,k="middle");h.outerLength=Math.ceil(h.outerLength);h.height=Math.ceil(h.height);h.lx=Math.round(h.lx);h.ly=Math.round(h.ly);k={y:c.y,b:h.height*H[k],t:h.height*J[k]};"fraction"===c.lenmode?(k.l=0,k.xl=c.x-c.len*J[d],k.r=0,k.xr=c.x+c.len*H[d]):(k.x=c.x,k.l=h.outerLength*J[d],k.r=h.outerLength*H[d]);x.autoMargin(a,F.autoMarginIdRoot+c._index,k)}function h(a,d,e){(e.steps[e.active]||{}).visible||(e.active=e._visibleSteps[0]._index);d.call(b,e).call(A,e).call(t,
e).call(c,e).call(y,a,e).call(g,a,e);a=e._dims;B.setTranslate(d,a.lx+e.pad.l,a.ly+e.pad.t);d.call(u,e,!1);d.call(b,e)}function b(b,a,c){if(a.currentvalue.visible){var d=a._dims;switch(a.currentvalue.xanchor){case "right":var e=d.inputAreaLength-F.currentValueInset-d.currentValueMaxWidth;var f="left";break;case "center":e=.5*d.inputAreaLength;f="middle";break;default:e=F.currentValueInset,f="left"}b=D.ensureSingle(b,"text",F.labelClass,function(b){b.classed("user-select-none",!0).attr({"text-anchor":f,
"data-notex":1})});var g=a.currentvalue.prefix?a.currentvalue.prefix:"";if("string"===typeof c)g+=c;else{c=a.steps[a.active].label;var h=a._gd._fullLayout._meta;h&&(c=D.templateString(c,h));g+=c}a.currentvalue.suffix&&(g+=a.currentvalue.suffix);b.call(B.font,a.currentvalue.font).text(g).call(G.convertToTspans,a._gd);g=G.lineCount(b);G.positionText(b,e,(d.currentValueMaxLines+1-g)*a.currentvalue.font.size*L);return b}}function g(b,a,c){D.ensureSingle(b,"rect",F.gripRectClass,function(e){e.call(d,a,
b,c).style("pointer-events","all")}).attr({width:F.gripWidth,height:F.gripHeight,rx:F.gripRadius,ry:F.gripRadius}).call(C.stroke,c.bordercolor).call(C.fill,c.bgcolor).style("stroke-width",c.borderwidth+"px")}function e(b,a,c){b=D.ensureSingle(b,"text",F.labelClass,function(b){b.classed("user-select-none",!0).attr({"text-anchor":"middle","data-notex":1})});a=a.step.label;var d=c._gd._fullLayout._meta;d&&(a=D.templateString(a,d));b.call(B.font,c.font).text(a).call(G.convertToTspans,c._gd);return b}
function t(b,a){b=D.ensureSingle(b,"g",F.labelsClass);var c=a._dims;b=b.selectAll("g."+F.labelGroupClass).data(c.labelSteps);b.enter().append("g").classed(F.labelGroupClass,!0);b.exit().remove();b.each(function(b){var d=z.select(this);d.call(e,b,a);B.setTranslate(d,v(a,b.fraction),F.tickOffset+a.ticklen+a.font.size*L+F.labelOffset+c.currentValueTotalHeight)})}function l(b,a,c,d,e){d=c._visibleSteps[Math.round(d*(c._stepCount-1))]._index;d!==c.active&&f(b,a,c,d,!0,e)}function f(a,c,d,e,f,g){var h=
d.active;d.active=e;E(a.layout,F.name,d).applyUpdate("active",e);e=d.steps[d.active];c.call(u,d,g);c.call(b,d);a.emit("plotly_sliderchange",{slider:d,step:d.steps[d.active],interaction:f,previousActive:h});e&&e.method&&f&&(c._nextMethod?(c._nextMethod.step=e,c._nextMethod.doCallback=f,c._nextMethod.doTransition=g):(c._nextMethod={step:e,doCallback:f,doTransition:g},c._nextMethodRaf=window.requestAnimationFrame(function(){var b=c._nextMethod.step;b.method&&(b.execute&&x.executeAPICommand(a,b.method,
b.args),c._nextMethod=null,c._nextMethodRaf=null)})))}function d(b,a,c){var d=c.node(),e=z.select(a);b.on("mousedown",function(){var b=c.data()[0];a.emit("plotly_sliderstart",{slider:b});var f=c.select("."+F.gripRectClass);z.event.stopPropagation();z.event.preventDefault();f.call(C.fill,b.activebgcolor);var g=w(b,z.mouse(d)[0]);l(a,c,b,g,!0);b._dragging=!0;e.on("mousemove",function(){var b=c.data()[0],e=w(b,z.mouse(d)[0]);l(a,c,b,e,!1)});e.on("mouseup",function(){var b=c.data()[0];b._dragging=!1;
f.call(C.fill,b.bgcolor);e.on("mouseup",null);e.on("mousemove",null);a.emit("plotly_sliderend",{slider:b,step:b.steps[b.active]})})})}function c(b,a){b=b.selectAll("rect."+F.tickRectClass).data(a._visibleSteps);var c=a._dims;b.enter().append("rect").classed(F.tickRectClass,!0);b.exit().remove();b.attr({width:a.tickwidth+"px","shape-rendering":"crispEdges"});b.each(function(b,d){b=0===d%c.labelStride;var e=z.select(this);e.attr({height:b?a.ticklen:a.minorticklen}).call(C.fill,a.tickcolor);B.setTranslate(e,
v(a,d/(a._stepCount-1))-.5*a.tickwidth,(b?F.tickOffset:F.minorTickOffset)+c.currentValueTotalHeight)})}function r(b){var a=b._dims;a.labelSteps=[];for(var c=b._stepCount,d=0;d<c;d+=a.labelStride)a.labelSteps.push({fraction:d/(c-1),step:b._visibleSteps[d]})}function u(b,a,c){b=b.select("rect."+F.gripRectClass);for(var d=0,e=0;e<a._stepCount;e++)if(a._visibleSteps[e]._index===a.active){d=e;break}d=v(a,d/(a._stepCount-1));a._invokingCommand||(c&&0<a.transition.duration&&(b=b.transition().duration(a.transition.duration).ease(a.transition.easing)),
b.attr("transform","translate("+(d-.5*F.gripWidth)+","+a._dims.currentValueTotalHeight+")"))}function v(b,a){b=b._dims;return b.inputAreaStart+F.stepInset+(b.inputAreaLength-2*F.stepInset)*Math.min(1,Math.max(0,a))}function w(b,a){b=b._dims;return Math.min(1,Math.max(0,(a-F.stepInset-b.inputAreaStart)/(b.inputAreaLength-2*F.stepInset-2*b.inputAreaStart)))}function y(b,a,c){var e=c._dims,f=D.ensureSingle(b,"rect",F.railTouchRectClass,function(e){e.call(d,a,b,c).style("pointer-events","all")});f.attr({width:e.inputAreaLength,
height:Math.max(e.inputAreaWidth,F.tickOffset+c.ticklen+e.labelHeight)}).call(C.fill,c.bgcolor).attr("opacity",0);B.setTranslate(f,0,e.currentValueTotalHeight)}function A(b,a){var c=a._dims,d=c.inputAreaLength-2*F.railInset;b=D.ensureSingle(b,"rect",F.railRectClass);b.attr({width:d,height:F.railWidth,rx:F.railRadius,ry:F.railRadius,"shape-rendering":"crispEdges"}).call(C.stroke,a.bordercolor).call(C.fill,a.bgcolor).style("stroke-width",a.borderwidth+"px");B.setTranslate(b,F.railInset,.5*(c.inputAreaWidth-
F.railWidth)+c.currentValueTotalHeight)}var z=a("d3"),x=a("../../plots/plots"),C=a("../color"),B=a("../drawing"),D=a("../../lib"),G=a("../../lib/svg_text_utils"),E=a("../../plot_api/plot_template").arrayEditor,F=a("./constants");a=a("../../constants/alignment");var L=a.LINE_SPACING,J=a.FROM_TL,H=a.FROM_BR;q.exports=function(b){function a(a){a._commandObserver&&(a._commandObserver.remove(),delete a._commandObserver);x.autoMargin(b,F.autoMarginIdRoot+a._index)}var c=b._fullLayout,d=n(c,b);c=c._infolayer.selectAll("g."+
F.containerClassName).data(0<d.length?[0]:[]);c.enter().append("g").classed(F.containerClassName,!0).style("cursor","ew-resize");c.exit().each(function(){z.select(this).selectAll("g."+F.groupClassName).each(a)}).remove();if(0!==d.length){c=c.selectAll("g."+F.groupClassName).data(d,k);c.enter().append("g").classed(F.groupClassName,!0);c.exit().each(a).remove();for(var e=0;e<d.length;e++)m(b,d[e]);c.each(function(a){var c=z.select(this);r(a);x.manageCommandObserver(b,a,a._visibleSteps,function(a){var d=
c.data()[0];d.active!==a.index&&(d._dragging||f(b,c,d,a.index,!1,!0))});h(b,z.select(this),a)})}}},{"../../constants/alignment":685,"../../lib":716,"../../lib/svg_text_utils":740,"../../plot_api/plot_template":754,"../../plots/plots":825,"../color":591,"../drawing":612,"./constants":674,d3:165}],677:[function(a,q,p){p=a("./constants");q.exports={moduleType:"component",name:p.name,layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),draw:a("./draw")}},{"./attributes":673,"./constants":674,
"./defaults":675,"./draw":676}],678:[function(a,q,p){var n=a("d3"),k=a("fast-isnumeric"),m=a("../../plots/plots"),h=a("../../registry"),b=a("../../lib"),g=a("../drawing"),e=a("../color"),t=a("../../lib/svg_text_utils"),l=a("../../constants/interactions"),f=a("../../constants/alignment").OPPOSITE_SIDE,d=/ [XY][0-9]* /;q.exports={draw:function(a,r,u){function c(a){b.syncOrAsync([p,q],a)}function p(b){if(G){var c="";G.rotate&&(c+="rotate("+[G.rotate,D.x,D.y]+")");G.offset&&(c+="translate(0, "+G.offset+
")")}else c=null;b.attr("transform",c);b.style({"font-family":M,"font-size":n.round(I,2)+"px",fill:e.rgb(N),opacity:L*e.opacity(N),"font-weight":m.fontWeight}).attr(D).call(t.convertToTspans,a);return m.previousPromises(a)}function q(a){a=n.select(a.node().parentNode);if(B&&B.selection&&B.side&&K){a.attr("transform",null);var c=f[B.side],d="left"===B.side||"top"===B.side?-1:1,e=k(B.pad)?B.pad:2,h=g.bBox(a.node()),l={left:0,top:0,right:F.width,bottom:F.height};l=B.maxShift||d*(l[B.side]-h[B.side]);
var r=0;if(0>l)r=l;else{var t=B.offsetLeft||0,m=B.offsetTop||0;h.left-=t;h.right-=t;h.top-=m;h.bottom-=m;B.selection.each(function(){var a=g.bBox(this);b.bBoxIntersect(h,a,e)&&(r=Math.max(r,d*(a[B.side]-h[c])+e))});r=Math.min(l,r)}(0<r||0>l)&&a.attr("transform","translate("+{left:[-r,0],right:[r,0],top:[0,-r],bottom:[0,r]}[B.side]+")")}}function A(){L=0;J=!0;P.text(x).on("mouseover.opacity",function(){n.select(this).transition().duration(l.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",
function(){n.select(this).transition().duration(l.HIDE_PLACEHOLDER).style("opacity",0)})}var z=u.propName,x=u.placeholder,C=u.traceIndex,B=u.avoid||{},D=u.attributes,G=u.transform,E=u.containerGroup,F=a._fullLayout,L=1,J=!1,H=u.propContainer.title,K=(H&&H.text?H.text:"").trim();H=H&&H.font?H.font:{};var M=H.family,I=H.size,N=H.color,O;"title.text"===z?O="titleText":-1!==z.indexOf("axis")?O="axisTitleText":z.indexOf(!0)&&(O="colorbarTitleText");O=a._context.edits[O];""===K?L=0:K.replace(d," % ")===
x.replace(d," % ")&&(L=.2,J=!0,O||(K=""));u._meta?K=b.templateString(K,u._meta):F._meta&&(K=b.templateString(K,F._meta));u=K||O;E||(E=b.ensureSingle(F._infolayer,"g","g-"+r));var P=E.selectAll("text").data(u?[0]:[]);P.enter().append("text");P.text(K).attr("class",r);P.exit().remove();if(!u)return E;P.call(c);if(O){if(K)P.on(".opacity",null);else A();P.call(t.makeEditable,{gd:a}).on("edit",function(b){void 0!==C?h.call("_guiRestyle",a,z,b,C):h.call("_guiRelayout",a,z,b)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(c)}).on("input",
function(b){this.text(b||" ").call(t.positionText,D.x,D.y)})}P.classed("js-placeholder",J);return E}}},{"../../constants/alignment":685,"../../constants/interactions":691,"../../lib":716,"../../lib/svg_text_utils":740,"../../plots/plots":825,"../../registry":845,"../color":591,"../drawing":612,d3:165,"fast-isnumeric":228}],679:[function(a,q,p){p=a("../../plots/font_attributes");var n=a("../color/attributes"),k=a("../../lib/extend").extendFlat,m=a("../../plot_api/edit_types").overrideAll,h=a("../../plots/pad_attributes");
a=a("../../plot_api/plot_template").templatedArray;var b=a("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});q.exports=m(a("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],
visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:b,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle",
"bottom"],dflt:"top"},pad:k(h({editType:"arraydraw"}),{}),font:p({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:n.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":707,"../../plot_api/edit_types":747,"../../plot_api/plot_template":754,"../../plots/font_attributes":790,"../../plots/pad_attributes":824,"../color/attributes":590}],680:[function(a,q,p){q.exports={name:"updatemenus",containerClassName:"updatemenu-container",
headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,
arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},{}],681:[function(a,q,p){function n(a,e,f){function d(c,d){return m.coerce(a,e,b,c,d)}var c=h(a,e,{name:"buttons",handleItemDefaults:k});d("visible",0<c.length)&&(d("active"),d("direction"),d("type"),d("showactive"),d("x"),d("y"),m.noneOrAll(a,e,["x","y"]),d("xanchor"),d("yanchor"),d("pad.t"),d("pad.r"),d("pad.b"),
d("pad.l"),m.coerceFont(d,"font",f.font),d("bgcolor",f.paper_bgcolor),d("bordercolor"),d("borderwidth"))}function k(b,a){function f(d,c){return m.coerce(b,a,e,d,c)}f("visible","skip"===b.method||Array.isArray(b.args))&&(f("method"),f("args"),f("args2"),f("label"),f("execute"))}var m=a("../../lib"),h=a("../../plots/array_container_defaults"),b=a("./attributes"),g=a("./constants").name,e=b.buttons;q.exports=function(b,a){h(b,a,{name:g,handleItemDefaults:n})}},{"../../lib":716,"../../plots/array_container_defaults":760,
"./attributes":679,"./constants":680}],682:[function(a,q,p){function n(b){return b._index}function k(b,a){return+b.attr(E.menuIndexAttrName)===a._index}function m(a,c,d,e,f,g,k,l){c.active=k;D(a.layout,E.name,c).applyUpdate("active",k);"buttons"===c.type?b(a,e,null,null,c):"dropdown"===c.type&&(f.attr(E.menuIndexAttrName,"-1"),h(a,e,f,g,c),l||b(a,e,f,g,c))}function h(a,d,e,f,g){var h=C.ensureSingle(d,"g",E.headerClassName,function(b){b.style("pointer-events","all")}),l=g._dims,m={y:g.pad.t,yPad:0,
x:g.pad.l,xPad:0,index:0},n={width:l.headerWidth,height:l.headerHeight};h.call(t,g,g.buttons[g.active]||E.blankHeaderOpts,a).call(v,g,m,n);C.ensureSingle(d,"text",E.headerArrowClassName,function(b){b.classed("user-select-none",!0).attr("text-anchor","end").call(x.font,g.font).text(E.arrowSymbol[g.direction])}).attr({x:l.headerWidth-E.arrowOffsetX+g.pad.l,y:l.headerHeight/2+E.textOffsetY+g.pad.t});h.on("click",function(){e.call(w,String(k(e,g)?-1:g._index));b(a,d,e,f,g)});h.on("mouseover",function(){h.call(c)});
h.on("mouseout",function(){h.call(r,g)});x.setTranslate(d,l.lx,l.ly)}function b(b,a,f,h,k){f||(f=a,f.attr("pointer-events","all"));var l=-1!==+f.attr(E.menuIndexAttrName)||"buttons"===k.type?k.buttons:[],n="dropdown"===k.type?E.dropdownButtonClassName:E.buttonClassName,u=f.selectAll("g."+n).data(C.filterVisible(l));l=u.enter().append("g").classed(n,!0);n=u.exit();"dropdown"===k.type?(l.attr("opacity","0").transition().attr("opacity","1"),n.transition().attr("opacity","0").remove()):n.remove();var p=
0,w=0;l=k._dims;n=-1!==["up","down"].indexOf(k.direction);"dropdown"===k.type&&(n?w=l.headerHeight+E.gapButtonHeader:p=l.headerWidth+E.gapButtonHeader);"dropdown"===k.type&&"up"===k.direction&&(w=-E.gapButtonHeader+E.gapButton-l.openHeight);"dropdown"===k.type&&"left"===k.direction&&(p=-E.gapButtonHeader+E.gapButton-l.openWidth);var x={x:l.lx+p+k.pad.l,y:l.ly+w+k.pad.t,yPad:E.gapButton,xPad:E.gapButton,index:0};p={l:x.x+k.borderwidth,t:x.y+k.borderwidth};u.each(function(e,g){var l=y.select(this);
l.call(t,k,e,b).call(v,k,x);l.on("click",function(){y.event.defaultPrevented||(e.execute&&(e.args2&&k.active===g?(m(b,k,e,a,f,h,-1),A.executeAPICommand(b,e.method,e.args2)):(m(b,k,e,a,f,h,g),A.executeAPICommand(b,e.method,e.args))),b.emit("plotly_buttonclicked",{menu:k,button:e,active:k.active}))});l.on("mouseover",function(){l.call(c)});l.on("mouseout",function(){l.call(r,k);u.call(d,k)})});u.call(d,k);n?(p.w=Math.max(l.openWidth,l.headerWidth),p.h=x.y-p.t):(p.w=x.x-p.l,p.h=Math.max(l.openHeight,
l.headerHeight));p.direction=k.direction;h&&(u.size()?g(b,a,f,h,k,p):e(h))}function g(b,a,c,d,e,f){a=e.direction;b=e._dims;e=e.active;var g,h;if("up"===a||"down"===a)for(a=h=0;a<e;a++)h+=b.heights[a]+E.gapButton;else for(a=g=0;a<e;a++)g+=b.widths[a]+E.gapButton;d.enable(f,g,h);d.hbar&&d.hbar.attr("opacity","0").transition().attr("opacity","1");d.vbar&&d.vbar.attr("opacity","0").transition().attr("opacity","1")}function e(b){var a=!!b.hbar,c=!!b.vbar;a&&b.hbar.transition().attr("opacity","0").each("end",
function(){a=!1;c||b.disable()});c&&b.vbar.transition().attr("opacity","0").each("end",function(){c=!1;a||b.disable()})}function t(b,a,c,d){b.call(l,a).call(f,a,c,d)}function l(b,a){C.ensureSingle(b,"rect",E.itemRectClassName,function(b){b.attr({rx:E.rx,ry:E.ry,"shape-rendering":"crispEdges"})}).call(z.stroke,a.bordercolor).call(z.fill,a.bgcolor).style("stroke-width",a.borderwidth+"px")}function f(b,a,c,d){b=C.ensureSingle(b,"text",E.itemTextClassName,function(b){b.classed("user-select-none",!0).attr({"text-anchor":"start",
"data-notex":1})});c=c.label;var e=d._fullLayout._meta;e&&(c=C.templateString(c,e));b.call(x.font,a.font).text(c).call(B.convertToTspans,d)}function d(b,a){var c=a.active;b.each(function(b,d){b=y.select(this);d===c&&a.showactive&&b.select("rect."+E.itemRectClassName).call(z.fill,E.activeColor)})}function c(b){b.select("rect."+E.itemRectClassName).call(z.fill,E.hoverColor)}function r(b,a){b.select("rect."+E.itemRectClassName).call(z.fill,a.bgcolor)}function u(b,a){var c=a._dims={width1:0,height1:0,
heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},d=x.tester.selectAll("g."+E.dropdownButtonClassName).data(C.filterVisible(a.buttons));d.enter().append("g").classed(E.dropdownButtonClassName,!0);var e=-1!==["up","down"].indexOf(a.direction);d.each(function(d,f){var g=y.select(this);g.call(t,a,d,b);g=g.select("."+E.itemTextClassName);d=g.node()&&x.bBox(g.node()).width;d=Math.max(d+E.textPadX,E.minWidth);var h=a.font.size*G;g=B.lineCount(g);g=Math.max(h*g,E.minHeight)+
E.textOffsetY;g=Math.ceil(g);d=Math.ceil(d);c.widths[f]=d;c.heights[f]=g;c.height1=Math.max(c.height1,g);c.width1=Math.max(c.width1,d);e?(c.totalWidth=Math.max(c.totalWidth,d),c.openWidth=c.totalWidth,c.totalHeight+=g+E.gapButton,c.openHeight+=g+E.gapButton):(c.totalWidth+=d+E.gapButton,c.openWidth+=d+E.gapButton,c.totalHeight=Math.max(c.totalHeight,g),c.openHeight=c.totalHeight)});e?c.totalHeight-=E.gapButton:c.totalWidth-=E.gapButton;c.headerWidth=c.width1+E.arrowPadX;c.headerHeight=c.height1;"dropdown"===
a.type&&(e?(c.width1+=E.arrowPadX,c.totalHeight=c.height1):c.totalWidth=c.width1,c.totalWidth+=E.arrowPadX);d.remove();d=c.totalWidth+a.pad.l+a.pad.r;var f=c.totalHeight+a.pad.t+a.pad.b,g=b._fullLayout._size;c.lx=g.l+g.w*a.x;c.ly=g.t+g.h*(1-a.y);g="left";C.isRightAnchor(a)&&(c.lx-=d,g="right");C.isCenterAnchor(a)&&(c.lx-=d/2,g="center");var h="top";C.isBottomAnchor(a)&&(c.ly-=f,h="bottom");C.isMiddleAnchor(a)&&(c.ly-=f/2,h="middle");c.totalWidth=Math.ceil(c.totalWidth);c.totalHeight=Math.ceil(c.totalHeight);
c.lx=Math.round(c.lx);c.ly=Math.round(c.ly);A.autoMargin(b,E.autoMarginIdRoot+a._index,{x:a.x,y:a.y,l:d*({right:1,center:.5}[g]||0),r:d*({left:1,center:.5}[g]||0),b:f*({top:1,middle:.5}[h]||0),t:f*({bottom:1,middle:.5}[h]||0)})}function v(b,a,c,d){d=d||{};var e=b.select("."+E.itemRectClassName),f=b.select("."+E.itemTextClassName),g=a.borderwidth,h=c.index,k=a._dims;x.setTranslate(b,g+c.x,g+c.y);b=-1!==["up","down"].indexOf(a.direction);g=d.height||(b?k.heights[h]:k.height1);e.attr({x:0,y:0,width:d.width||
(b?k.width1:k.widths[h]),height:g});a=a.font.size*G;d=B.lineCount(f);B.positionText(f,E.textOffsetX,g/2-(d-1)*a/2+E.textOffsetY);b?c.y+=k.heights[h]+c.yPad:c.x+=k.widths[h]+c.xPad;c.index++}function w(b,a){b.attr(E.menuIndexAttrName,a||"-1").selectAll("g."+E.dropdownButtonClassName).remove()}var y=a("d3"),A=a("../../plots/plots"),z=a("../color"),x=a("../drawing"),C=a("../../lib"),B=a("../../lib/svg_text_utils"),D=a("../../plot_api/plot_template").arrayEditor,G=a("../../constants/alignment").LINE_SPACING,
E=a("./constants"),F=a("./scrollbox");q.exports=function(a){function c(b){A.autoMargin(a,E.autoMarginIdRoot+b._index)}var d=a._fullLayout,e=C.filterVisible(d[E.name]),f=d._menulayer.selectAll("g."+E.containerClassName).data(0<e.length?[0]:[]);f.enter().append("g").classed(E.containerClassName,!0).style("cursor","pointer");f.exit().each(function(){y.select(this).selectAll("g."+E.headerGroupClassName).each(c)}).remove();if(0!==e.length){var g=f.selectAll("g."+E.headerGroupClassName).data(e,n);g.enter().append("g").classed(E.headerGroupClassName,
!0);var l=C.ensureSingle(f,"g",E.dropdownButtonGroupClassName,function(b){b.style("pointer-events","all")});for(f=0;f<e.length;f++)u(a,e[f]);var r=new F(a,l,"updatemenus"+d._uid);g.enter().size()&&(l.node().parentNode.appendChild(l.node()),l.call(w));g.exit().each(function(b){l.call(w);c(b)}).remove();g.each(function(c){var d=y.select(this),e="dropdown"===c.type?l:null;A.manageCommandObserver(a,c,c.buttons,function(b){m(a,c,c.buttons[b.index],d,e,r,b.index,!0)});"dropdown"===c.type?(h(a,d,l,r,c),
k(l,c)&&b(a,d,l,r,c)):b(a,d,null,null,c)})}}},{"../../constants/alignment":685,"../../lib":716,"../../lib/svg_text_utils":740,"../../plot_api/plot_template":754,"../../plots/plots":825,"../color":591,"../drawing":612,"./constants":680,"./scrollbox":684,d3:165}],683:[function(a,q,p){arguments[4][677][0].apply(p,arguments)},{"./attributes":679,"./constants":680,"./defaults":681,"./draw":682,dup:677}],684:[function(a,q,p){function n(b,a,h){this.gd=b;this.container=a;this.id=h;this.vbar=this.hbar=this.translateY=
this.translateX=this.position=null;this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]);this.bg.exit().on(".drag",null).on("wheel",null).remove();this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}q.exports=n;var k=a("d3"),m=a("../color"),h=a("../drawing"),b=a("../../lib");n.barWidth=2;n.barLength=20;n.barRadius=2;n.barPad=1;n.barColor="#808BA4";n.prototype.enable=function(b,a,t){var e=this.gd._fullLayout,f=
e.width,d=e.height;this.position=b;b=this.position.l;var c=this.position.w,g=this.position.t,u=this.position.h,v=this.position.direction,p="down"===v,q="left"===v,A="up"===v,z=c,x=u;p||q||"right"===v||A||(this.position.direction="down",p=!0);if(p||A){var C=b;var B=C+z;p?(A=g,v=Math.min(A+x,d)):(v=g+x,A=Math.max(v-x,0));x=v-A}else A=g,v=A+x,q?(B=b+z,C=Math.max(B-z,0)):(C=b,B=Math.min(C+z,f)),z=B-C;this._box={l:C,t:A,w:z,h:x};p=c>z;var D=n.barLength+2*n.barPad;q=n.barWidth+2*n.barPad;var G=g+u;G+q>
d&&(G=d-q);d=this.container.selectAll("rect.scrollbar-horizontal").data(p?[0]:[]);d.exit().on(".drag",null).remove();d.enter().append("rect").classed("scrollbar-horizontal",!0).call(m.fill,n.barColor);p?(this.hbar=d.attr({rx:n.barRadius,ry:n.barRadius,x:b,y:G,width:D,height:q}),this._hbarXMin=b+D/2,this._hbarTranslateMax=z-D):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);d=u>x;z=n.barWidth+2*n.barPad;D=n.barLength+2*n.barPad;G=b+c;G+z>f&&(G=f-z);f=this.container.selectAll("rect.scrollbar-vertical").data(d?
[0]:[]);f.exit().on(".drag",null).remove();f.enter().append("rect").classed("scrollbar-vertical",!0).call(m.fill,n.barColor);d?(this.vbar=f.attr({rx:n.barRadius,ry:n.barRadius,x:G,y:g,width:z,height:D}),this._vbarYMin=g+D/2,this._vbarTranslateMax=x-D):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);f=this.id;x=C-.5;B=d?B+z+.5:B+.5;A-=.5;v=p?v+q+.5:v+.5;e=e._topdefs.selectAll("#"+f).data(p||d?[0]:[]);e.exit().remove();e.enter().append("clipPath").attr("id",f).append("rect");
p||d?(this._clipRect=e.select("rect").attr({x:Math.floor(x),y:Math.floor(A),width:Math.ceil(B)-Math.floor(x),height:Math.ceil(v)-Math.floor(A)}),this.container.call(h.setClipUrl,f,this.gd),this.bg.attr({x:b,y:g,width:c,height:u})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(h.setClipUrl,null),delete this._clipRect);if(p||d)e=k.behavior.drag().on("dragstart",function(){k.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this)),this.container.on("wheel",
null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(e),e=k.behavior.drag().on("dragstart",function(){k.event.sourceEvent.preventDefault();k.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this)),p&&this.hbar.on(".drag",null).call(e),d&&this.vbar.on(".drag",null).call(e);this.setTranslate(a,t)};n.prototype.disable=function(){if(this.hbar||this.vbar)this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(h.setClipUrl,null),delete this._clipRect;
this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)};n.prototype._onBoxDrag=function(){var b=this.translateX,a=this.translateY;this.hbar&&(b-=k.event.dx);this.vbar&&(a-=k.event.dy);this.setTranslate(b,a)};n.prototype._onBoxWheel=function(){var b=this.translateX,a=this.translateY;this.hbar&&(b+=k.event.deltaY);
this.vbar&&(a+=k.event.deltaY);this.setTranslate(b,a)};n.prototype._onBarDrag=function(){var a=this.translateX,e=this.translateY;if(this.hbar){a+=this._hbarXMin;var h=a+this._hbarTranslateMax;a=(b.constrain(k.event.x,a,h)-a)/(h-a)*(this.position.w-this._box.w)}this.vbar&&(e+=this._vbarYMin,h=e+this._vbarTranslateMax,e=(b.constrain(k.event.y,e,h)-e)/(h-e)*(this.position.h-this._box.h));this.setTranslate(a,e)};n.prototype.setTranslate=function(a,e){var g=this.position.w-this._box.w,k=this.position.h-
this._box.h;a=b.constrain(a||0,0,g);e=b.constrain(e||0,0,k);this.translateX=a;this.translateY=e;this.container.call(h.setTranslate,this._box.l-this.position.l-a,this._box.t-this.position.t-e);this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+a-.5),y:Math.floor(this.position.t+e-.5)});this.hbar&&this.hbar.call(h.setTranslate,a+a/g*this._hbarTranslateMax,e);this.vbar&&this.vbar.call(h.setTranslate,a,e+e/k*this._vbarTranslateMax)}},{"../../lib":716,"../color":591,"../drawing":612,d3:165}],
685:[function(a,q,p){q.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],686:[function(a,q,p){q.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:""},DECREASING:{COLOR:"#FF4136",SYMBOL:""}}},{}],687:[function(a,q,p){q.exports={FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md#d3_format",
DATE_FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Time-Formatting.md#format"}},{}],688:[function(a,q,p){q.exports={COMPARISON_OPS:"\x3d !\x3d \x3c \x3e\x3d \x3e \x3c\x3d".split(" "),COMPARISON_OPS2:["\x3d","\x3c","\x3e\x3d","\x3e","\x3c\x3d"],INTERVAL_OPS:"[] () [) (] ][ )( ]( )[".split(" "),SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"\x3d":"\x3d","\x3c":"\x3c","\x3c\x3d":"\x3c","\x3e":"\x3e","\x3e\x3d":"\x3e","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",
")[":"]["}}},{}],689:[function(a,q,p){q.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],690:[function(a,q,p){q.exports={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",x:""}},{}],691:[function(a,q,p){q.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1E3,DESELECTDIM:.2}},{}],692:[function(a,q,p){q.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1E4,ONEAVGYEAR:315576E5,
ONEAVGMONTH:26298E5,ONEDAY:864E5,ONEHOUR:36E5,ONEMIN:6E4,ONESEC:1E3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:""}},{}],693:[function(a,q,p){p.xmlns="http://www.w3.org/2000/xmlns/";p.svg="http://www.w3.org/2000/svg";p.xlink="http://www.w3.org/1999/xlink";p.svgAttrs={xmlns:p.svg,"xmlns:xlink":p.xlink}},{}],694:[function(a,q,p){p.version="1.52.3";a("es6-promise").polyfill();a("../build/plotcss");a("./fonts/mathjax_config")();q=a("./registry");q=p.register=q.register;for(var n=a("./plot_api"),
k=Object.keys(n),m=0;m<k.length;m++){var h=k[m];"_"!==h.charAt(0)&&(p[h]=n[h]);q({moduleType:"apiMethod",name:h,fn:n[h]})}q(a("./traces/scatter"));q([a("./components/fx"),a("./components/legend"),a("./components/annotations"),a("./components/annotations3d"),a("./components/shapes"),a("./components/images"),a("./components/updatemenus"),a("./components/sliders"),a("./components/rangeslider"),a("./components/rangeselector"),a("./components/grid"),a("./components/errorbars"),a("./components/colorscale"),
a("./components/colorbar")]);q([a("./locale-en"),a("./locale-en-us")]);window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(q(window.PlotlyLocales),delete window.PlotlyLocales);p.Icons=a("./fonts/ploticon");p.Plots=a("./plots/plots");p.Fx=a("./components/fx");p.Snapshot=a("./snapshot");p.PlotSchema=a("./plot_api/plot_schema");p.Queue=a("./lib/queue");p.d3=a("d3")},{"../build/plotcss":1,"./components/annotations":582,"./components/annotations3d":587,"./components/colorbar":597,"./components/colorscale":603,
"./components/errorbars":618,"./components/fx":629,"./components/grid":633,"./components/images":638,"./components/legend":646,"./components/rangeselector":657,"./components/rangeslider":664,"./components/shapes":672,"./components/sliders":677,"./components/updatemenus":683,"./fonts/mathjax_config":695,"./fonts/ploticon":696,"./lib/queue":731,"./locale-en":745,"./locale-en-us":744,"./plot_api":749,"./plot_api/plot_schema":753,"./plots/plots":825,"./registry":845,"./snapshot":850,"./traces/scatter":1131,
d3:165,"es6-promise":221}],695:[function(a,q,p){q.exports=function(){"undefined"!==typeof MathJax&&"local"!==(window.PlotlyConfig||{}).MathJaxConfig&&(MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured())}},{}],696:[function(a,q,p){q.exports={undo:{width:857.1,height:1E3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",
transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1E3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1E3,height:1E3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",
transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1E3,height:1E3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1E3,height:1E3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",
transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1E3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1E3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1E3,height:1E3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",
transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1E3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1E3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1E3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",
transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1E3,height:1E3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",
transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1E3,height:1E3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",
transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1E3,height:1E3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",
transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1E3,height:1E3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",
transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1E3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",
transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1E3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},
lasso:{width:1031,height:1E3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",
transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1E3,height:1E3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},
spikeline:{width:1E3,height:1E3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",
transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"\x3csvg xmlns\x3d'http://www.w3.org/2000/svg' viewBox\x3d'0 0 132 132'\x3e\x3cdefs\x3e\x3cstyle\x3e.cls-1 {fill: #119dff;} .cls-2 {fill: #25fefd;} .cls-3 {fill: #fff;}\x3c/style\x3e\x3c/defs\x3e\x3ctitle\x3eplotly-logomark\x3c/title\x3e\x3cg id\x3d'symbol'\x3e\x3crect class\x3d'cls-1' width\x3d'132' height\x3d'132' rx\x3d'6' ry\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'78' cy\x3d'54' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'102' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'78' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'54' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'30' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'30' cy\x3d'54' r\x3d'6'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/\x3e\x3c/g\x3e\x3c/svg\x3e"}}},
{}],697:[function(a,q,p){p.isLeftAnchor=function(a){return"left"===a.xanchor||"auto"===a.xanchor&&a.x<=1/3};p.isCenterAnchor=function(a){return"center"===a.xanchor||"auto"===a.xanchor&&a.x>1/3&&a.x<2/3};p.isRightAnchor=function(a){return"right"===a.xanchor||"auto"===a.xanchor&&a.x>=2/3};p.isTopAnchor=function(a){return"top"===a.yanchor||"auto"===a.yanchor&&a.y>=2/3};p.isMiddleAnchor=function(a){return"middle"===a.yanchor||"auto"===a.yanchor&&a.y>1/3&&a.y<2/3};p.isBottomAnchor=function(a){return"bottom"===
a.yanchor||"auto"===a.yanchor&&a.y<=1/3}},{}],698:[function(a,q,p){function n(b){return Math.abs(b[1]-b[0])>t-1E-14}function k(b,a){return g(a-b,t)}function m(a,e){if(n(e))return!0;if(e[0]<e[1]){var d=e[0];e=e[1]}else d=e[1],e=e[0];d=b(d,t);e=b(e,t);d>e&&(e+=t);a=b(a,t);var c=a+t;return a>=d&&a<=e||c>=d&&c<=e}function h(b,a,d,c,g,h,k){function f(b,a){return[b*Math.cos(a)+g,h-b*Math.sin(a)]}function l(b,a,c){return"A"+[b,b]+" "+[0,v,c]+" "+f(b,a)}g=g||0;h=h||0;var r=n([d,c]);if(r){var m=0;var u=e;
d=t}else d<c?(m=d,d=c):m=c;b<a?(c=b,b=a):c=a;var v=Math.abs(d-m)<=e?0:1;r?r=null===c?"M"+f(b,m)+l(b,u,0)+l(b,d,0)+"Z":"M"+f(c,m)+l(c,u,0)+l(c,d,0)+"ZM"+f(b,m)+l(b,u,1)+l(b,d,1)+"Z":null===c?(r="M"+f(b,m)+l(b,d,0),k&&(r+="L0,0Z")):r="M"+f(c,m)+"L"+f(b,m)+l(b,d,0)+"L"+f(c,d)+l(c,m,1)+"Z";return r}a=a("./mod");var b=a.mod,g=a.modHalf,e=Math.PI,t=2*e;q.exports={deg2rad:function(b){return b/180*e},rad2deg:function(b){return b/e*180},angleDelta:k,angleDist:function(b,a){return Math.abs(k(b,a))},isFullCircle:n,
isAngleInsideSector:m,isPtInsideSector:function(b,a,d,c){if(!m(a,c))return!1;d[0]<d[1]?(a=d[0],d=d[1]):(a=d[1],d=d[0]);return b>=a&&b<=d},pathArc:function(b,a,d,c,e){return h(null,b,a,d,c,e,0)},pathSector:function(b,a,d,c,e){return h(null,b,a,d,c,e,1)},pathAnnulus:function(b,a,d,c,e,g){return h(b,a,d,c,e,g,1)}}},{"./mod":723}],699:[function(a,q,p){function n(a){return b.isView(a)&&!(a instanceof g)}function k(b){return h(b)||n(b)}function m(b,a,g){if(k(b)){if(k(b[0])){for(var e=0;e<b.length;e++)g=
a(g,b[e].length);return g}return b.length}return 0}var h=Array.isArray,b="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}},g="undefined"===typeof DataView?function(){}:DataView;p.isTypedArray=n;p.isArrayOrTypedArray=k;p.isArray1D=function(b){return!k(b[0])};p.ensureArray=function(b,a){h(b)||(b=[]);b.length=a;return b};p.concat=function(){var b=[],a=!0,g=0,f,d;for(f=0;f<arguments.length;f++){var c=arguments[f];if(d=c.length){if(k)b.push(c);else{var k=c;
var m=d}if(h(c))var n=!1;else a=!1,g?n!==c.constructor&&(n=!1):n=c.constructor;g+=d}}if(!g)return[];if(!b.length)return k;if(a)return k.concat.apply(k,b);if(n){a=new n(g);a.set(k);for(f=0;f<b.length;f++)c=b[f],a.set(c,m),m+=c.length;return a}a=Array(g);for(g=0;g<k.length;g++)a[g]=k[g];for(f=0;f<b.length;f++){c=b[f];for(g=0;g<c.length;g++)a[m+g]=c[g];m+=g}return a};p.maxRowLength=function(b){return m(b,Math.max,0)};p.minRowLength=function(b){return m(b,Math.min,Infinity)}},{}],700:[function(a,q,p){var n=
a("fast-isnumeric"),k=a("../constants/numerical").BADNUM,m=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;q.exports=function(a){"string"===typeof a&&(a=a.replace(m,""));return n(a)?Number(a):k}},{"../constants/numerical":692,"fast-isnumeric":228}],701:[function(a,q,p){q.exports=function(a){a=a._fullLayout;a._glcanvas&&a._glcanvas.size()&&a._glcanvas.each(function(a){a.regl&&a.regl.clear({color:!0,depth:!0})})}},{}],702:[function(a,q,p){q.exports=function(a){a._responsiveChartHandler&&(window.removeEventListener("resize",
a._responsiveChartHandler),delete a._responsiveChartHandler)}},{}],703:[function(a,q,p){function n(b,a){var c=p.valObjectMeta[a.valType];if(a.arrayOk&&f(b))return!0;if(c.validateFunction)return c.validateFunction(b,a);var d={},e=d;c.coerceFunction(b,{set:function(b){e=b}},d,a);return e!==d}var k=a("fast-isnumeric"),m=a("tinycolor2"),h=a("../plots/attributes"),b=a("../components/colorscale/scales"),g=a("../constants/interactions").DESELECTDIM,e=a("./nested_property"),t=a("./regex").counter,l=a("./mod").modHalf,
f=a("./array").isArrayOrTypedArray;p.valObjectMeta={data_array:{coerceFunction:function(b,a,e){f(b)?a.set(b):void 0!==e&&a.set(e)}},enumerated:{coerceFunction:function(b,a,e,f){f.coerceNumber&&(b=+b);-1===f.values.indexOf(b)?a.set(e):a.set(b)},validateFunction:function(b,a){a.coerceNumber&&(b=+b);a=a.values;for(var c=0;c<a.length;c++){var d=String(a[c]);if("/"===d.charAt(0)&&"/"===d.charAt(d.length-1)){if((new RegExp(d.substr(1,d.length-2))).test(b))return!0}else if(b===a[c])return!0}return!1}},"boolean":{coerceFunction:function(b,
a,e){!0===b||!1===b?a.set(b):a.set(e)}},number:{coerceFunction:function(b,a,e,f){!k(b)||void 0!==f.min&&b<f.min||void 0!==f.max&&b>f.max?a.set(e):a.set(+b)}},integer:{coerceFunction:function(b,a,e,f){b%1||!k(b)||void 0!==f.min&&b<f.min||void 0!==f.max&&b>f.max?a.set(e):a.set(+b)}},string:{coerceFunction:function(b,a,e,f){"string"!==typeof b?!0===f.strict||"number"!==typeof b?a.set(e):a.set(String(b)):f.noBlank&&!b?a.set(e):a.set(b)}},color:{coerceFunction:function(b,a,e){m(b).isValid()?a.set(b):a.set(e)}},
colorlist:{coerceFunction:function(b,a,e){function c(b){return m(b).isValid()}Array.isArray(b)&&b.length?b.every(c)?a.set(b):a.set(e):a.set(e)}},colorscale:{coerceFunction:function(a,c,e){c.set(b.get(a,e))}},angle:{coerceFunction:function(b,a,e){"auto"===b?a.set("auto"):k(b)?a.set(l(+b,360)):a.set(e)}},subplotid:{coerceFunction:function(b,a,e,f){f=f.regex||t(e);"string"===typeof b&&f.test(b)?a.set(b):a.set(e)},validateFunction:function(b,a){a=a.dflt;return b===a?!0:"string"!==typeof b?!1:t(a).test(b)?
!0:!1}},flaglist:{coerceFunction:function(b,a,e,f){if("string"!==typeof b)a.set(e);else if(-1!==(f.extras||[]).indexOf(b))a.set(b);else{b=b.split("+");for(var c=0;c<b.length;){var d=b[c];-1===f.flags.indexOf(d)||b.indexOf(d)<c?b.splice(c,1):c++}b.length?a.set(b.join("+")):a.set(e)}}},any:{coerceFunction:function(b,a,e){void 0===b?a.set(e):a.set(b)}},info_array:{coerceFunction:function(b,a,e,f){function c(b,a,c){var d;void 0===c&&(c=a.dflt);p.valObjectMeta[a.valType].coerceFunction(b,{set:function(b){d=
b}},c,a);return d}var d=2===f.dimensions||"1-2"===f.dimensions&&Array.isArray(b)&&Array.isArray(b[0]);if(Array.isArray(b)){f=f.items;var g=[],h=Array.isArray(f),k=h&&d&&Array.isArray(f[0]);k=d&&h&&!k;var l=h&&!k?f.length:b.length,r;e=Array.isArray(e)?e:[];if(d)for(d=0;d<l;d++){g[d]=[];var t=Array.isArray(b[d])?b[d]:[];var m=k?f.length:h?f[d].length:t.length;for(r=0;r<m;r++){var n=k?f[r]:h?f[d][r]:f;n=c(t[r],n,(e[d]||[])[r]);void 0!==n&&(g[d][r]=n)}}else for(d=0;d<l;d++)n=c(b[d],h?f[d]:f,e[d]),void 0!==
n&&(g[d]=n);a.set(g)}else a.set(e)},validateFunction:function(b,a){if(!Array.isArray(b))return!1;var c=a.items,d=Array.isArray(c),e=2===a.dimensions;if(!a.freeLength&&b.length!==c.length)return!1;for(var f=0;f<b.length;f++)if(e){if(!Array.isArray(b[f])||!a.freeLength&&b[f].length!==c[f].length)return!1;for(var g=0;g<b[f].length;g++)if(!n(b[f][g],d?c[f][g]:c))return!1}else if(!n(b[f],d?c[f]:c))return!1;return!0}}};p.coerce=function(b,a,g,h,k){g=e(g,h).get();var c=e(b,h);b=e(a,h);c=c.get();a=a._template;
void 0===c&&a&&(c=e(a,h).get(),a=0);void 0===k&&(k=g.dflt);if(g.arrayOk&&f(c))return b.set(c),c;var d=p.valObjectMeta[g.valType].coerceFunction;d(c,b,k,g);var l=b.get();a&&l===k&&!n(c,g)&&(c=e(a,h).get(),d(c,b,k,g),l=b.get());return l};p.coerce2=function(b,a,f,g,h){var c=e(b,g);b=p.coerce(b,a,f,g,h);c=c.get();return void 0!==c&&null!==c?b:!1};p.coerceFont=function(b,a,e){var c={};e=e||{};c.family=b(a+".family",e.family);c.size=b(a+".size",e.size);c.color=b(a+".color",e.color);return c};p.coerceHoverinfo=
function(b,a,e){var c=a._module.attributes;c=c.hoverinfo?c:h;var d=c.hoverinfo;if(1===e._dataLength){e="all"===d.dflt?d.flags.slice():d.dflt.split("+");e.splice(e.indexOf("name"),1);var f=e.join("+")}return p.coerce(b,a,c,"hoverinfo",f)};p.coerceSelectionMarkerOpacity=function(b,a){if(b.marker){var c=b.marker.opacity;if(void 0!==c){if(!f(c)&&!b.selected&&!b.unselected){var d=c;var e=g*c}a("selected.marker.opacity",d);a("unselected.marker.opacity",e)}}};p.validate=n},{"../components/colorscale/scales":606,
"../constants/interactions":691,"../plots/attributes":761,"./array":699,"./mod":723,"./nested_property":724,"./regex":732,"fast-isnumeric":228,tinycolor2:535}],704:[function(a,q,p){function n(b){return b&&v.componentsRegistry.calendars&&"string"===typeof b&&"gregorian"!==b}function k(b,a){return String(b+Math.pow(10,a)).substr(1)}function m(b,a,c,d,e){if(a||c||d||e)if(b+=" "+k(a,2)+":"+k(c,2),d||e)if(b+=":"+k(d,2),e){for(a=4;0===e%10;)--a,e/=10;b+="."+k(e,a)}return b}function h(b,a,c,d){b=b.replace(E,
function(b){b=Math.min(+b.charAt(1)||6,6);return(a/1E3%1+2).toFixed(b).substr(2).replace(/0+$/,"")||"0"});var e=new Date(Math.floor(a+.05));if(n(d))try{b=v.getComponentMethod("calendars","worldCalFmt")(b,a,d)}catch(N){return"Invalid"}return c(b)(e)}var b=a("d3"),g=a("fast-isnumeric"),e=a("./loggers"),t=a("./mod").mod;q=a("../constants/numerical");var l=q.BADNUM,f=q.ONEDAY,d=q.ONEHOUR,c=q.ONEMIN,r=q.ONESEC,u=q.EPOCHJD,v=a("../registry"),w=b.time.format.utc,y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,
A=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,z=(new Date).getFullYear()-70;p.dateTick0=function(b,a){return n(b)?a?v.getComponentMethod("calendars","CANONICAL_SUNDAY")[b]:v.getComponentMethod("calendars","CANONICAL_TICK")[b]:a?"2000-01-02":"2000-01-01"};p.dfltRange=function(b){return n(b)?v.getComponentMethod("calendars","DFLTRANGE")[b]:["2000-01-01","2001-01-01"]};p.isJSDate=function(b){return"object"===typeof b&&
null!==b&&"function"===typeof b.getTime};p.dateTime2ms=function(b,a){if(p.isJSDate(b)){a=b.getTimezoneOffset()*c;var e=(b.getUTCMinutes()-b.getMinutes())*c+(b.getUTCSeconds()-b.getSeconds())*r+(b.getUTCMilliseconds()-b.getMilliseconds());if(e){var g=3*c;a=a-g/2+t(e-a+g/2,g)}b=Number(b)-a;return b>=x&&b<=C?b:l}if("string"!==typeof b&&"number"!==typeof b)return l;b=String(b);e=n(a);var h=b.charAt(0);!e||"G"!==h&&"g"!==h||(b=b.substr(1),a="");h=e&&"chinese"===a.substr(0,7);var k=b.match(h?A:y);if(!k)return l;
b=k[1];var m=k[3]||"1",w=Number(k[5]||1),q=Number(k[7]||0),B=Number(k[9]||0);k=Number(k[11]||0);if(e){if(2===b.length)return l;b=Number(b);try{var D=v.getComponentMethod("calendars","getCal")(a);if(h){var E="i"===m.charAt(m.length-1);m=parseInt(m,10);g=D.newDate(b,D.toMonthIndex(b,m,E),w)}else g=D.newDate(b,Number(m),w)}catch(ca){return l}return g?(g.toJD()-u)*f+q*d+B*c+k*r:l}b=2===b.length?(Number(b)+2E3-z)%100+z:Number(b);--m;a=new Date(Date.UTC(2E3,m,w,q,B));a.setUTCFullYear(b);return a.getUTCMonth()!==
m||a.getUTCDate()!==w?l:a.getTime()+k*r};var x=p.MIN_MS=p.dateTime2ms("-9999");var C=p.MAX_MS=p.dateTime2ms("9999-12-31 23:59:59.9999");p.isDateTime=function(b,a){return p.dateTime2ms(b,a)!==l};var B=90*f,D=3*d,G=5*c;p.ms2DateTime=function(b,a,e){if("number"!==typeof b||!(b>=x&&b<=C))return l;a||(a=0);var g=Math.floor(10*t(b+.05,1)),h=Math.round(b-g/10);if(n(e)){var k=Math.floor(h/f)+u;b=Math.floor(t(b,f));try{var p=v.getComponentMethod("calendars","getCal")(e).fromJD(k).formatDate("yyyy-mm-dd")}catch(P){p=
w("G%Y-%m-%d")(new Date(h))}if("-"===p.charAt(0))for(;11>p.length;)p="-0"+p.substr(1);else for(;10>p.length;)p="0"+p;e=a<B?Math.floor(b/d):0;h=a<B?Math.floor(b%d/c):0;k=a<D?Math.floor(b%c/r):0;a=a<G?b%r*10+g:0}else b=new Date(h),p=w("%Y-%m-%d")(b),e=a<B?b.getUTCHours():0,h=a<B?b.getUTCMinutes():0,k=a<D?b.getUTCSeconds():0,a=a<G?10*b.getUTCMilliseconds()+g:0;return m(p,e,h,k,a)};p.ms2DateTimeLocal=function(a){if(!(a>=x+f&&a<=C-f))return l;var c=Math.floor(10*t(a+.05,1)),d=new Date(Math.round(a-c/10));
a=b.time.format("%Y-%m-%d")(d);var e=d.getHours(),g=d.getMinutes(),h=d.getSeconds();c=10*d.getUTCMilliseconds()+c;return m(a,e,g,h,c)};p.cleanDate=function(b,a,c){if(b===l)return a;if(p.isJSDate(b)||"number"===typeof b&&isFinite(b)){if(n(c))return e.error("JS Dates and milliseconds are incompatible with world calendars",b),a;b=p.ms2DateTimeLocal(+b);if(!b&&void 0!==a)return a}else if(!p.isDateTime(b,c))return e.error("unrecognized date",b),a;return b};var E=/%\d?f/g,F=[59,59.9,59.99,59.999,59.9999];
p.formatDate=function(b,a,e,l,m,u){m=n(m)&&m;if(!a)if("y"===e)a=u.year;else if("m"===e)a=u.month;else if("d"===e)a=u.dayMonth+"\n"+u.year;else{a=e;e=t(b+.05,f);e=k(Math.floor(e/d),2)+":"+k(t(Math.floor(e/c),60),2);if("M"!==a){g(a)||(a=0);var v=(100+Math.min(t(b/r,60),F[a])).toFixed(a).substr(1);0<a&&(v=v.replace(/0+$/,"").replace(/[\.]$/,""));e+=":"+v}return e+"\n"+h(u.dayMonthYear,b,l,m)}return h(a,b,l,m)};var L=3*f;p.incrementMonth=function(b,a,c){c=n(c)&&c;var d=t(b,f);b=Math.round(b-d);if(c)try{var g=
Math.round(b/f)+u,h=v.getComponentMethod("calendars","getCal")(c),k=h.fromJD(g);a%12?h.add(k,a,"m"):h.add(k,a/12,"y");return(k.toJD()-u)*f+d}catch(P){e.error("invalid ms "+b+" in calendar "+c)}b=new Date(b+L);return b.setUTCMonth(b.getUTCMonth()+a)+d-L};p.findExactDates=function(b,a){for(var c=0,d=0,e=0,h=0,k,l=n(a)&&v.getComponentMethod("calendars","getCal")(a),r=0;r<b.length;r++)if(a=b[r],!g(a))h++;else if(!(a%f))if(l)try{k=l.fromJD(a/f+u),1===k.day()?1===k.month()?c++:d++:e++}catch(T){}else k=
new Date(a),1===k.getUTCDate()?0===k.getUTCMonth()?c++:d++:e++;d+=c;b=b.length-h;return{exactYears:c/b,exactMonths:d/b,exactDays:(e+d)/b}}},{"../constants/numerical":692,"../registry":845,"./loggers":720,"./mod":723,d3:165,"fast-isnumeric":228}],705:[function(a,q,p){function n(b){var a=b&&b.parentNode;a&&a.removeChild(b)}function k(b,a,e){b="plotly.js-style-"+b;var g=document.getElementById(b);g||(g=document.createElement("style"),g.setAttribute("id",b),g.appendChild(document.createTextNode("")),
document.head.appendChild(g));b=g.sheet;b.insertRule?b.insertRule(a+"{"+e+"}",0):b.addRule?b.addRule(a,e,0):h.warn("addStyleRule failed")}var m=a("d3"),h=a("./loggers");q.exports={getGraphDiv:function(b){if("string"===typeof b){var a=document.getElementById(b);if(null===a)throw Error("No DOM element with id '"+b+"' exists on the page.");return a}if(null===b||void 0===b)throw Error("DOM element provided is null or undefined");return b},isPlotDiv:function(b){b=m.select(b);return b.node()instanceof HTMLElement&&
b.size()&&b.classed("js-plotly-plot")},removeElement:n,addStyleRule:function(b,a){k("global",b,a)},addRelatedStyleRule:k,deleteRelatedStyleRule:function(b){(b=document.getElementById("plotly.js-style-"+b))&&n(b)}}},{"./loggers":720,d3:165}],706:[function(a,q,p){var n=a("events").EventEmitter;q.exports={init:function(a){if(a._ev instanceof n)return a;var k=new n,h=new n;a._ev=k;a._internalEv=h;a.on=k.on.bind(k);a.once=k.once.bind(k);a.removeListener=k.removeListener.bind(k);a.removeAllListeners=k.removeAllListeners.bind(k);
a._internalOn=h.on.bind(h);a._internalOnce=h.once.bind(h);a._removeInternalListener=h.removeListener.bind(h);a._removeAllInternalListeners=h.removeAllListeners.bind(h);a.emit=function(b,g){"undefined"!==typeof jQuery&&jQuery(a).trigger(b,g);k.emit(b,g);h.emit(b,g)};return a},triggerHandler:function(a,m,h){function b(b){if(b.listener){if(e.removeListener(m,b.listener),!b.fired)return b.fired=!0,b.listener.apply(e,[h])}else return b.apply(e,[h])}var g;"undefined"!==typeof jQuery&&(g=jQuery(a).triggerHandler(m,
h));var e=a._ev;if(!e)return g;a=e._events[m];if(!a)return g;a=Array.isArray(a)?a:[a];var k;for(k=0;k<a.length-1;k++)b(a[k]);a=b(a[k]);return void 0!==g?g:a},purge:function(a){delete a._ev;delete a.on;delete a.once;delete a.removeListener;delete a.removeAllListeners;delete a.emit;delete a._ev;delete a._internalEv;delete a._internalOn;delete a._internalOnce;delete a._removeInternalListener;delete a._removeAllInternalListeners;return a}}},{events:106}],707:[function(a,q,p){function n(a,b,g,e){var h=
a[0],l=a.length,f,d,c;if(2===l&&m(h)&&m(a[1])&&0===h.length){a:{var r=a[1];for(d=0;d<r.length;d++){var u=r[d];if(null!==u&&"object"===typeof u){r=!1;break a}void 0!==u&&(h[d]=u)}r=!0}if(r)return h;h.splice(0,h.length)}for(u=1;u<l;u++)for(f in r=a[u],r){var v=h[f];d=r[f];if(e&&m(d))h[f]=d;else if(b&&d&&(k(d)||(c=m(d))))c?(c=!1,v=v&&m(v)?v:[]):v=v&&k(v)?v:{},h[f]=n([v,d],b,g,e);else if("undefined"!==typeof d||g)h[f]=d}return h}var k=a("./is_plain_object.js"),m=Array.isArray;p.extendFlat=function(){return n(arguments,
!1,!1,!1)};p.extendDeep=function(){return n(arguments,!0,!1,!1)};p.extendDeepAll=function(){return n(arguments,!0,!0,!1)};p.extendDeepNoArrays=function(){return n(arguments,!0,!1,!0)}},{"./is_plain_object.js":717}],708:[function(a,q,p){q.exports=function(a){for(var k={},m=[],h=0,b=0;b<a.length;b++){var g=a[b];1!==k[g]&&(k[g]=1,m[h++]=g)}return m}},{}],709:[function(a,q,p){function n(a){return!0===a.visible}function k(a){a=a[0].trace;return!0===a.visible&&0!==a._length}q.exports=function(a){for(var h=
Array.isArray(a)&&Array.isArray(a[0])&&a[0][0]&&a[0][0].trace?k:n,b=[],g=0;g<a.length;g++){var e=a[g];h(e)&&b.push(e)}return b}},{}],710:[function(a,q,p){function n(b){b=b.geojson;var a=window.PlotlyGeoAssets||{};a="string"===typeof b?a[b]:b;return t(a)?a:(e.error("Oops ... something went wrong when fetching "+b),!1)}var k=a("d3"),m=a("country-regex"),h=a("@turf/area"),b=a("@turf/centroid"),g=a("@turf/bbox");p=a("./identity");var e=a("./loggers"),t=a("./is_plain_object"),l=a("./nested_property"),
f=a("./polygon"),d=Object.keys(m),c={"ISO-3":p,"USA-states":p,"country names":function(b){for(var a=0;a<d.length;a++){var c=d[a];if((new RegExp(m[c])).test(b.trim().toLowerCase()))return c}e.log("Unrecognized country name: "+b+".");return!1}};q.exports={locationToFeature:function(b,a,d){if(!a||"string"!==typeof a)return!1;a=c[b](a);var f;if(a){if("USA-states"===b)for(b=[],f=0;f<d.length;f++){var g=d[f];g.properties&&g.properties.gu&&"USA"===g.properties.gu&&b.push(g)}else b=d;for(f=0;f<b.length;f++)if(g=
b[f],g.id===a)return g;e.log(["Location with id",a,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(b){function a(b){for(var a=0;a<b.length-1;a++)if(0<b[a][0]&&0>b[a+1][0])return a;return null}var c=b.geometry,d=c.coordinates;b=b.id;var e=[],g,h;b="RUS"===b||"FJI"===b?function(b){if(null===a(b))var c=b;else for(c=Array(b.length),h=0;h<b.length;h++)c[h]=[0>b[h][0]?b[h][0]+360:b[h][0],b[h][1]];e.push(f.tester(c))}:"ATA"===b?function(b){var c=
a(b);if(null===c)return e.push(f.tester(b));var d=Array(b.length+1),g=0;for(h=0;h<b.length;h++)h>c?d[g++]=[b[h][0]+360,b[h][1]]:h===c?(d[g++]=b[h],d[g++]=[b[h][0],-90]):d[g++]=b[h];b=f.tester(d);b.pts.pop();e.push(b)}:function(b){e.push(f.tester(b))};switch(c.type){case "MultiPolygon":for(c=0;c<d.length;c++)for(g=0;g<d[c].length;g++)b(d[c][g]);break;case "Polygon":for(c=0;c<d.length;c++)b(d[c])}return e},getTraceGeojson:n,extractTraceFeature:function(a){function c(a){var c=l(a,d.featureidkey||"id").get(),
f=g[c];if(f){var r=a.geometry;if("Polygon"===r.type||"MultiPolygon"===r.type){r={type:"Feature",id:c,geometry:r,properties:{}};var t=r.properties,m=r.geometry;if("MultiPolygon"===m.type){m=m.coordinates;for(var n=0,u=0;u<m.length;u++){var v={type:"Polygon",coordinates:m[u]},p=h.default(v);if(p>n){n=p;var x=v}}}else x=m;x=b.default(x).geometry.coordinates;t.ct=x;f.fIn=a;f.fOut=r;k.push(r)}else e.log(["Location",f.loc,"does not have a valid GeoJSON geometry. Traces with locationmode *geojson-id* only support *Polygon* and *MultiPolygon* geometries."].join(" "))}delete g[c]}
var d=a[0].trace,f=n(d);if(!f)return!1;var g={},k=[],r;for(r=0;r<d._length;r++){var t=a[r];if(t.loc||0===t.loc)g[t.loc]=t}switch(f.type){case "FeatureCollection":a=f.features;for(r=0;r<a.length;r++)c(a[r]);break;case "Feature":c(f);break;default:return e.warn(["Invalid GeoJSON type",(f.type||"none")+".","Traces with locationmode *geojson-id* only support *FeatureCollection* and *Feature* types."].join(" ")),!1}for(var m in g)e.log(["Location *"+m+"*","does not have a matching feature with id-key",
"*"+d.featureidkey+"*."].join(" "));return k},fetchTraceGeoData:function(b){function a(b){return new Promise(function(a,c){k.json(b,function(e,f){if(e)return delete d[b],c(Error(404===e.status?'GeoJSON at URL "'+b+'" does not exist.':"Unexpected error while fetching from "+b));d[b]=f;return a(f)})})}function c(b){return new Promise(function(a,c){var e=0,f=setInterval(function(){if(d[b]&&"pending"!==d[b])return clearInterval(f),a(d[b]);if(100<e)return clearInterval(f),c("Unexpected error while fetching from "+
b);e++},50)})}for(var d=window.PlotlyGeoAssets||{},e=[],f=0;f<b.length;f++){var g=b[f][0].trace.geojson;"string"===typeof g&&(d[g]?"pending"===d[g]&&e.push(c(g)):(d[g]="pending",e.push(a(g))))}return e},computeBbox:function(b){return g.default(b)}}},{"./identity":715,"./is_plain_object":717,"./loggers":720,"./nested_property":724,"./polygon":728,"@turf/area":57,"@turf/bbox":58,"@turf/centroid":59,"country-regex":136,d3:165}],711:[function(a,q,p){var n=a("../constants/numerical").BADNUM;p.calcTraceToLineCoords=
function(a){for(var k=a[0].trace.connectgaps,h=[],b=[],g=0;g<a.length;g++){var e=a[g].lonlat;e[0]!==n?b.push(e):!k&&0<b.length&&(h.push(b),b=[])}0<b.length&&h.push(b);return h};p.makeLine=function(a){return 1===a.length?{type:"LineString",coordinates:a[0]}:{type:"MultiLineString",coordinates:a}};p.makePolygon=function(a){if(1===a.length)return{type:"Polygon",coordinates:a};for(var k=Array(a.length),h=0;h<a.length;h++)k[h]=[a[h]];return{type:"MultiPolygon",coordinates:k}};p.makeBlank=function(){return{type:"Point",
coordinates:[]}}},{"../constants/numerical":692}],712:[function(a,q,p){function n(b,a,g,f,d,c,h,k){g-=b;var e=d-b;d=h-d;f-=a;h=c-a;k-=c;c=g*k-d*f;if(0===c)return null;k=(e*k-d*h)/c;e=(e*f-g*h)/c;return 0>e||1<e||0>k||1<k?null:{x:b+g*k,y:a+f*k}}function k(b,a,g,f,d){var c=f*b+d*a;if(0>c)return f*f+d*d;if(c>g)return g=f-b,a=d-a,g*g+a*a;a=f*a-d*b;return a*a/g}var m=a("./mod").mod;p.segmentsIntersect=n;p.segmentDistance=function(b,a,g,f,d,c,h,m){if(n(b,a,g,f,d,c,h,m))return 0;var e=g-b,l=f-a,r=h-d,t=
m-c,u=e*e+l*l,p=r*r+t*t;b=Math.min(k(e,l,u,d-b,c-a),k(e,l,u,h-b,m-a),k(r,t,p,b-d,a-c),k(r,t,p,g-d,f-c));return Math.sqrt(b)};var h,b,g;p.getTextLocation=function(a,k,l,f){if(a!==b||f!==g)h={},b=a,g=f;if(h[l])return h[l];var d=a.getPointAtLength(m(l-f/2,k));f=a.getPointAtLength(m(l+f/2,k));var c=Math.atan((f.y-d.y)/(f.x-d.x));a=a.getPointAtLength(m(l,k));d={x:(4*a.x+d.x+f.x)/6,y:(4*a.y+d.y+f.y)/6,theta:c};return h[l]=d};p.clearLocationCache=function(){b=null};p.getVisibleSegment=function(b,a,g){function e(a){var e=
b.getPointAtLength(a);0===a?t=e:a===l&&(n=e);a=e.x<d?d-e.x:e.x>c?e.x-c:0;e=e.y<h?h-e.y:e.y>k?e.y-k:0;return Math.sqrt(a*a+e*e)}var d=a.left,c=a.right,h=a.top,k=a.bottom;a=0;for(var l=b.getTotalLength(),m=l,t,n,p=e(a);p;){a+=p+g;if(a>m)return;p=e(a)}for(p=e(m);p;){m-=p+g;if(a>m)return;p=e(m)}return{min:a,max:m,len:m-a,total:l,isClosed:0===a&&m===l&&.1>Math.abs(t.x-n.x)&&.1>Math.abs(t.y-n.y)}};p.findPointOnPath=function(b,a,g,f){f=f||{};var d=f.pathLength||b.getTotalLength(),c=f.tolerance||.001;f=f.iterationLimit||
30;for(var e=b.getPointAtLength(0)[g]>b.getPointAtLength(d)[g]?-1:1,h=0,k=0,l,m,t;h<f&&!(l=(k+d)/2,m=b.getPointAtLength(l),t=m[g]-a,Math.abs(t)<c);)0<e*t?d=l:k=l,h++;return m}},{"./mod":723}],713:[function(a,q,p){function n(b,a){b[3]*=a;return b}function k(b){if(h(b))return l;b=g(b);return b.length?b:l}function m(b){return h(b)?b:1}var h=a("fast-isnumeric"),b=a("tinycolor2"),g=a("color-normalize"),e=a("../components/colorscale");p=a("../components/color/attributes").defaultLine;var t=a("./array").isArrayOrTypedArray,
l=g(p);q.exports={formatColor:function(b,a,c){var d=b.color,f=t(d),h=t(a),p=[];var q=void 0!==e.extractOpts(b).colorscale?e.makeColorScaleFuncFromTrace(b):k;b=f?function(b,a){return void 0===b[a]?l:g(q(b[a]))}:k;var A=h?function(b,a){return void 0===b[a]?1:m(b[a])}:m;if(f||h)for(var z=0;z<c;z++)f=b(d,z),h=A(a,z),p[z]=n(f,h);else p=n(g(d),a);return p},parseColorScale:function(a,d){void 0===d&&(d=1);a=e.extractOpts(a);return(a.reversescale?e.flipScale(a.colorscale):a.colorscale).map(function(a){var c=
a[0];a=b(a[1]).toRgb();return{index:c,rgb:[a.r,a.g,a.b,d]}})}}},{"../components/color/attributes":590,"../components/colorscale":603,"./array":699,"color-normalize":122,"fast-isnumeric":228,tinycolor2:535}],714:[function(a,q,p){function n(a){return[a]}a=a("./identity");q.exports={keyFun:function(a){return a.key},repeat:n,descend:a,wrap:n,unwrap:function(a){return a[0]}}},{"./identity":715}],715:[function(a,q,p){q.exports=function(a){return a}},{}],716:[function(a,q,p){function n(b){var a={},c;for(c in b)for(var d=
b[c],e=0;e<d.length;e++)a[d[e]]=+c;return a}function k(b,a,d){var f=this,g=arguments;a||(a={});var h={};return b.replace(e.TEMPLATE_STRING_REGEX,function(b,k,l){var r,t;for(t=3;t<g.length;t++)if(r=g[t]){if(r.hasOwnProperty(k)){var n=r[k];break}c.test(k)||(n=h[k]||e.nestedProperty(r,k).get())&&(h[k]=n);if(void 0!==n)break}if(void 0===n&&f)return f.count<f.max&&e.warn("Variable '"+k+"' in "+f.name+" could not be found!"),f.count===f.max&&e.warn("Too many "+f.name+" warnings - additional warnings will be suppressed"),
f.count++,b;l?(":"===l[0]&&(b=d?d.numberFormat:m.format,n=b(l.replace(v,""))(n)),"|"===l[0]&&(b=d?d.timeFormat.utc:m.time.format.utc,n=e.dateTime2ms(n),n=e.formatDate(n,l.replace(v,""),!1,b))):a.hasOwnProperty(k+"Label")&&(n=a[k+"Label"]);return n})}var m=a("d3"),h=a("fast-isnumeric");p=a("../constants/numerical");var b=p.FP_SAFE,g=p.BADNUM,e=q.exports={};e.nestedProperty=a("./nested_property");e.keyedContainer=a("./keyed_container");e.relativeAttr=a("./relative_attr");e.isPlainObject=a("./is_plain_object");
e.toLogRange=a("./to_log_range");e.relinkPrivateKeys=a("./relink_private");q=a("./array");e.isTypedArray=q.isTypedArray;e.isArrayOrTypedArray=q.isArrayOrTypedArray;e.isArray1D=q.isArray1D;e.ensureArray=q.ensureArray;e.concat=q.concat;e.maxRowLength=q.maxRowLength;e.minRowLength=q.minRowLength;q=a("./mod");e.mod=q.mod;e.modHalf=q.modHalf;q=a("./coerce");e.valObjectMeta=q.valObjectMeta;e.coerce=q.coerce;e.coerce2=q.coerce2;e.coerceFont=q.coerceFont;e.coerceHoverinfo=q.coerceHoverinfo;e.coerceSelectionMarkerOpacity=
q.coerceSelectionMarkerOpacity;e.validate=q.validate;q=a("./dates");e.dateTime2ms=q.dateTime2ms;e.isDateTime=q.isDateTime;e.ms2DateTime=q.ms2DateTime;e.ms2DateTimeLocal=q.ms2DateTimeLocal;e.cleanDate=q.cleanDate;e.isJSDate=q.isJSDate;e.formatDate=q.formatDate;e.incrementMonth=q.incrementMonth;e.dateTick0=q.dateTick0;e.dfltRange=q.dfltRange;e.findExactDates=q.findExactDates;e.MIN_MS=q.MIN_MS;e.MAX_MS=q.MAX_MS;q=a("./search");e.findBin=q.findBin;e.sorterAsc=q.sorterAsc;e.sorterDes=q.sorterDes;e.distinctVals=
q.distinctVals;e.roundUp=q.roundUp;e.sort=q.sort;e.findIndexOfMin=q.findIndexOfMin;q=a("./stats");e.aggNums=q.aggNums;e.len=q.len;e.mean=q.mean;e.median=q.median;e.midRange=q.midRange;e.variance=q.variance;e.stdev=q.stdev;e.interp=q.interp;q=a("./matrix");e.init2dArray=q.init2dArray;e.transposeRagged=q.transposeRagged;e.dot=q.dot;e.translationMatrix=q.translationMatrix;e.rotationMatrix=q.rotationMatrix;e.rotationXYMatrix=q.rotationXYMatrix;e.apply2DTransform=q.apply2DTransform;e.apply2DTransform2=
q.apply2DTransform2;q=a("./angles");e.deg2rad=q.deg2rad;e.rad2deg=q.rad2deg;e.angleDelta=q.angleDelta;e.angleDist=q.angleDist;e.isFullCircle=q.isFullCircle;e.isAngleInsideSector=q.isAngleInsideSector;e.isPtInsideSector=q.isPtInsideSector;e.pathArc=q.pathArc;e.pathSector=q.pathSector;e.pathAnnulus=q.pathAnnulus;q=a("./anchor_utils");e.isLeftAnchor=q.isLeftAnchor;e.isCenterAnchor=q.isCenterAnchor;e.isRightAnchor=q.isRightAnchor;e.isTopAnchor=q.isTopAnchor;e.isMiddleAnchor=q.isMiddleAnchor;e.isBottomAnchor=
q.isBottomAnchor;q=a("./geometry2d");e.segmentsIntersect=q.segmentsIntersect;e.segmentDistance=q.segmentDistance;e.getTextLocation=q.getTextLocation;e.clearLocationCache=q.clearLocationCache;e.getVisibleSegment=q.getVisibleSegment;e.findPointOnPath=q.findPointOnPath;q=a("./extend");e.extendFlat=q.extendFlat;e.extendDeep=q.extendDeep;e.extendDeepAll=q.extendDeepAll;e.extendDeepNoArrays=q.extendDeepNoArrays;q=a("./loggers");e.log=q.log;e.warn=q.warn;e.error=q.error;q=a("./regex");e.counterRegex=q.counter;
q=a("./throttle");e.throttle=q.throttle;e.throttleDone=q.done;e.clearThrottle=q.clear;q=a("./dom");e.getGraphDiv=q.getGraphDiv;e.isPlotDiv=q.isPlotDiv;e.removeElement=q.removeElement;e.addStyleRule=q.addStyleRule;e.addRelatedStyleRule=q.addRelatedStyleRule;e.deleteRelatedStyleRule=q.deleteRelatedStyleRule;e.clearResponsive=a("./clear_responsive");e.makeTraceGroups=a("./make_trace_groups");e._=a("./localize");e.notifier=a("./notifier");e.filterUnique=a("./filter_unique");e.filterVisible=a("./filter_visible");
e.pushUnique=a("./push_unique");e.cleanNumber=a("./clean_number");e.ensureNumber=function(a){if(!h(a))return g;a=Number(a);return a<-b||a>b?g:h(a)?Number(a):g};e.isIndex=function(b,a){return void 0!==a&&b>=a?!1:h(b)&&0<=b&&0===b%1};e.noop=a("./noop");e.identity=a("./identity");e.repeat=function(b,a){for(var c=Array(a),d=0;d<a;d++)c[d]=b;return c};e.swapAttrs=function(b,a,c,d){c||(c="x");d||(d="y");for(var f=0;f<a.length;f++){var g=a[f],h=e.nestedProperty(b,g.replace("?",c));g=e.nestedProperty(b,g.replace("?",
d));var k=h.get();h.set(g.get());g.set(k)}};e.raiseToTop=function(b){b.parentNode.appendChild(b)};e.cancelTransition=function(b){return b.transition().duration(0)};e.constrain=function(b,a,c){return a>c?Math.max(c,Math.min(a,b)):Math.max(a,Math.min(c,b))};e.bBoxIntersect=function(b,a,c){c=c||0;return b.left<=a.right+c&&a.left<=b.right+c&&b.top<=a.bottom+c&&a.top<=b.bottom+c};e.simpleMap=function(b,a,c,d){for(var e=b.length,f=Array(e),g=0;g<e;g++)f[g]=a(b[g],c,d);return f};e.randstr=function B(b,a,
c,d){c||(c=16);void 0===a&&(a=24);if(0>=a)return"0";var f=Math.log(Math.pow(2,a))/Math.log(c),g="",h;for(h=2;Infinity===f;h*=2)f=Math.log(Math.pow(2,a/h))/Math.log(c)*h;var k=f-Math.floor(f);for(h=0;h<Math.floor(f);h++){var l=Math.floor(Math.random()*c).toString(c);g=l+g}k&&(f=Math.pow(c,k),l=Math.floor(Math.random()*f).toString(c),g=l+g);f=parseInt(g,c);return b&&b[g]||Infinity!==f&&f>=Math.pow(2,a)?10<d?(e.warn("randstr failed uniqueness"),g):B(b,a,c,(d||0)+1):g};e.OptionControl=function(b,a){b||
(b={});a||(a="opt");var c={optionList:[],_newoption:function(d){d[a]=b;c[d.name]=d;c.optionList.push(d)}};c["_"+a]=b;return c};e.smooth=function(b,a){a=Math.round(a)||0;if(2>a)return b;var c=b.length,d=2*c,e=2*a-1,f=Array(e),g=Array(c),h,k,l;for(h=0;h<e;h++)f[h]=(1-Math.cos(Math.PI*(h+1)/a))/(2*a);for(h=0;h<c;h++){for(k=l=0;k<e;k++){var r=h+k+1-a;r<-c?r-=d*Math.round(r/d):r>=d&&(r-=d*Math.floor(r/d));0>r?r=-1-r:r>=c&&(r=d-1-r);l+=b[r]*f[k]}g[h]=l}return g};e.syncOrAsync=function(b,a,c){function d(){return e.syncOrAsync(b,
a,c)}for(var f;b.length;)if(f=b.splice(0,1)[0],(f=f(a))&&f.then)return f.then(d).then(void 0,e.promiseError);return c&&c(a)};e.stripTrailingSlash=function(b){return"/"===b.substr(-1)?b.substr(0,b.length-1):b};e.noneOrAll=function(b,a,c){if(b){var d=!1,e=!0,f;for(f=0;f<c.length;f++){var g=b[c[f]];void 0!==g&&null!==g?d=!0:e=!1}if(d&&!e)for(f=0;f<c.length;f++)b[c[f]]=a[c[f]]}};e.mergeArray=function(b,a,c,d){var f="function"===typeof d;if(e.isArrayOrTypedArray(b))for(var g=Math.min(b.length,a.length),
h=0;h<g;h++){var k=b[h];a[h][c]=f?d(k):k}};e.mergeArrayCastPositive=function(b,a,c){return e.mergeArray(b,a,c,function(b){b=+b;return isFinite(b)?0<b?b:0:0})};e.fillArray=function(b,a,c,d){d=d||e.identity;if(e.isArrayOrTypedArray(b))for(var f=0;f<a.length;f++)a[f][c]=d(b[f])};e.castOption=function(b,a,c,d){d=d||e.identity;b=e.nestedProperty(b,c).get();return e.isArrayOrTypedArray(b)?Array.isArray(a)&&e.isArrayOrTypedArray(b[a[0]])?d(b[a[0]][a[1]]):d(b[a]):b};e.extractOption=function(b,a,c,d){if(c in
b)return b[c];b=e.nestedProperty(a,d).get();if(!Array.isArray(b))return b};e.tagSelected=function(b,a,c){var d=a.selectedpoints;a=a._indexToPoints;var f;a&&(f=n(a));for(a=0;a<d.length;a++){var g=d[a];if(e.isIndex(g)||e.isArrayOrTypedArray(g)&&e.isIndex(g[0])&&e.isIndex(g[1]))g=f?f[g]:g,g=c?c[g]:g,void 0!==g&&g<b.length&&(b[g].selected=1)}};e.selIndices2selPoints=function(b){var a=b.selectedpoints;if(b=b._indexToPoints){b=n(b);for(var c=[],d=0;d<a.length;d++){var f=a[d];e.isIndex(f)&&(f=b[f],e.isIndex(f)&&
c.push(f))}return c}return a};e.getTargetArray=function(b,a){a=a.target;return"string"===typeof a&&a?(b=e.nestedProperty(b,a).get(),Array.isArray(b)?b:!1):Array.isArray(a)?a:!1};e.minExtend=function(b,a){var c={};"object"!==typeof a&&(a={});var d=Object.keys(b),f;for(f=0;f<d.length;f++){var g=d[f];var h=b[g];"_"!==g.charAt(0)&&"function"!==typeof h&&("module"===g?c[g]=h:Array.isArray(h)?c[g]="colorscale"===g?h.slice():h.slice(0,3):e.isTypedArray(h)?c[g]=h.subarray(0,3):c[g]=h&&"object"===typeof h?
e.minExtend(b[g],a[g]):h)}d=Object.keys(a);for(f=0;f<d.length;f++)g=d[f],h=a[g],"object"===typeof h&&g in c&&"object"===typeof c[g]||(c[g]=h);return c};e.titleCase=function(b){return b.charAt(0).toUpperCase()+b.substr(1)};e.containsAny=function(b,a){for(var c=0;c<a.length;c++)if(-1!==b.indexOf(a[c]))return!0;return!1};e.isIE=function(){return"undefined"!==typeof window.navigator.msSaveBlob};var t=/MSIE [1-9]\./;e.isIE9orBelow=function(){return e.isIE()&&t.test(window.navigator.userAgent)};var l=/Version\/[\d\.]+.*Safari/;
e.isSafari=function(){return l.test(window.navigator.userAgent)};e.isD3Selection=function(b){return b&&"function"===typeof b.classed};e.ensureSingle=function(b,a,c,d){var e=b.select(a+(c?"."+c:""));if(e.size())return e;b=b.append(a);c&&b.classed(c,!0);d&&b.call(d);return b};e.ensureSingleById=function(b,a,c,d){var e=b.select(a+"#"+c);if(e.size())return e;b=b.append(a).attr("id",c);d&&b.call(d);return b};e.objectFromPath=function(b,a){b=b.split(".");for(var c,d=c={},e=0;e<b.length;e++){var f=b[e],
g;(g=b[e].match(/(.*)\[([0-9]+)\]/))?(f=g[1],g=g[2],c=c[f]=[],c[g]=e===b.length-1?a:{},c=c[g]):(c[f]=e===b.length-1?a:{},c=c[f])}return d};var f=/^([^\[\.]+)\.(.+)?/,d=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;e.expandObjectPaths=function(b){var a,c;if("object"===typeof b&&!Array.isArray(b))for(c in b)if(b.hasOwnProperty(c))if(a=c.match(f)){var g=b[c];var h=a[1];delete b[c];b[h]=e.extendDeepNoArrays(b[h]||{},e.objectFromPath(c,e.expandObjectPaths(g))[h])}else if(a=c.match(d)){g=b[c];h=a[1];var k=parseInt(a[2]);
delete b[c];b[h]=b[h]||[];"."===a[3]?(a=a[4],h=b[h][k]=b[h][k]||{},e.extendDeepNoArrays(h,e.objectFromPath(a,e.expandObjectPaths(g)))):b[h][k]=e.expandObjectPaths(g)}else b[c]=e.expandObjectPaths(b[c]);return b};e.numSeparate=function(b,a,c){c||(c=!1);if("string"!==typeof a||0===a.length)throw Error("Separator string required for formatting!");"number"===typeof b&&(b=String(b));var d=/(\d+)(\d{3})/,e=a.charAt(0);a=a.charAt(1);b=b.split(".");var f=b[0];e=1<b.length?e+b[1]:"";if(a&&(1<b.length||4<f.length||
c))for(;d.test(f);)f=f.replace(d,"$1"+a+"$2");return f+e};e.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var c=/^\w*$/;e.templateString=function(b,a){var d={};return b.replace(e.TEMPLATE_STRING_REGEX,function(b,f){c.test(f)?b=a[f]:(d[f]=d[f]||e.nestedProperty(a,f).get,b=d[f]());return e.isValidTextValue(b)?b:""})};var r={max:10,count:0,name:"hovertemplate"};e.hovertemplateString=function(){return k.apply(r,arguments)};var u={max:10,count:0,name:"texttemplate"};e.texttemplateString=function(){return k.apply(u,
arguments)};var v=/^[:|\|]/;e.subplotSort=function(b,a){for(var c=Math.min(b.length,a.length)+1,d=0,e=0,f=0;f<c;f++){var g=b.charCodeAt(f)||0,h=a.charCodeAt(f)||0,k=48<=g&&57>=g,l=48<=h&&57>=h;k&&(d=10*d+g-48);l&&(e=10*e+h-48);if(!k||!l){if(d!==e)return d-e;if(g!==h)return g-h}}return e-d};var w=2E9;e.seedPseudoRandom=function(){w=2E9};e.pseudoRandom=function(){var b=w;w=(69069*w+1)%4294967296;return 429496729>Math.abs(w-b)?e.pseudoRandom():w/4294967296};e.fillText=function(b,a,c){var d=Array.isArray(c)?
function(b){c.push(b)}:function(b){c.text=b},f=e.extractOption(b,a,"htx","hovertext");if(e.isValidTextValue(f))return d(f);b=e.extractOption(b,a,"tx","text");if(e.isValidTextValue(b))return d(b)};e.isValidTextValue=function(b){return b||0===b};e.formatPercent=function(b,a){a=a||0;b=(Math.round(100*b*Math.pow(10,a))*Math.pow(.1,a)).toFixed(a)+"%";for(var c=0;c<a;c++)-1!==b.indexOf(".")&&(b=b.replace("0%","%"),b=b.replace(".%","%"));return b};e.isHidden=function(b){b=window.getComputedStyle(b).display;
return!b||"none"===b};e.getTextTransform=function(b){var a=b.noCenter,c=b.textX,d=b.textY,e=b.targetX,f=b.targetY,g=b.anchorX||0,h=b.anchorY||0,k=b.rotate;(b=b.scale)?1<b&&(b=1):b=0;return"translate("+(e-b*(c+g))+","+(f-b*(d+h))+")"+(1>b?"scale("+b+")":"")+(k?"rotate("+k+(a?"":" "+c+" "+d)+")":"")};e.ensureUniformFontSize=function(b,a){var c=e.extendFlat({},a);c.size=Math.max(a.size,b._fullLayout.uniformtext.minsize||0);return c}},{"../constants/numerical":692,"./anchor_utils":697,"./angles":698,
"./array":699,"./clean_number":700,"./clear_responsive":702,"./coerce":703,"./dates":704,"./dom":705,"./extend":707,"./filter_unique":708,"./filter_visible":709,"./geometry2d":712,"./identity":715,"./is_plain_object":717,"./keyed_container":718,"./localize":719,"./loggers":720,"./make_trace_groups":721,"./matrix":722,"./mod":723,"./nested_property":724,"./noop":725,"./notifier":726,"./push_unique":730,"./regex":732,"./relative_attr":733,"./relink_private":734,"./search":735,"./stats":738,"./throttle":741,
"./to_log_range":742,d3:165,"fast-isnumeric":228}],717:[function(a,q,p){q.exports=function(a){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(a):"[object Object]"===Object.prototype.toString.call(a)&&Object.getPrototypeOf(a)===Object.prototype}},{}],718:[function(a,q,p){var n=a("./nested_property"),k=/^\w*$/;q.exports=function(a,h,b,g){b=b||"name";g=g||"value";var e,m={};if(h&&h.length){var l=n(a,h);var f=l.get()}else f=a;h=h||"";var d={};
if(f)for(e=0;e<f.length;e++)d[f[e][b]]=e;var c=k.test(g),r={set:function(a,e){var h=null===e?4:0;if(!f){if(!l||4===h)return;f=[];l.set(f)}var k=d[a];if(void 0===k){if(4===h)return;h|=3;k=f.length;d[a]=k}else e!==(c?f[k][g]:n(f[k],g).get())&&(h|=2);var t=f[k]=f[k]||{};t[b]=a;c?t[g]=e:n(t,g).set(e);null!==e&&(h&=-5);m[k]|=h;return r},get:function(b){if(f&&(b=d[b],void 0!==b))return c?f[b][g]:n(f[b],g).get()},rename:function(a,c){var e=d[a];if(void 0===e)return r;m[e]|=1;d[c]=e;delete d[a];f[e][b]=c;
return r},remove:function(a){var h=d[a];if(void 0===h)return r;var k=f[h];if(2<Object.keys(k).length)return m[h]|=2,r.set(a,null);if(c){for(e=h;e<f.length;e++)m[e]|=3;for(e=h;e<f.length;e++)d[f[e][b]]--;f.splice(h,1);delete d[a]}else n(k,g).set(null),m[h]|=6;return r},constructUpdate:function(){for(var a,d,e={},k=Object.keys(m),l=0;l<k.length;l++)d=k[l],a=h+"["+d+"]",f[d]?(m[d]&1&&(e[a+"."+b]=f[d][b]),m[d]&2&&(e[a+"."+g]=c?m[d]&4?null:f[d][g]:m[d]&4?null:n(f[d],g).get())):e[a]=null;return e}};return r}},
{"./nested_property":724}],719:[function(a,q,p){var n=a("../registry");q.exports=function(a,m){for(var h=a._context.locale,b=0;2>b;b++){for(var g=a._context.locales,e=0;2>e;e++){if(g=(g[h]||{}).dictionary)if(g=g[m])return g;g=n.localeRegistry}e=h.split("-")[0];if(e===h)break;h=e}return m}},{"../registry":845}],720:[function(a,q,p){function n(a,b){if(a&&a.apply)try{a.apply(console,b);return}catch(e){}for(var g=0;g<b.length;g++)try{a(b[g])}catch(e){console.log(b[g])}}var k=a("../plot_api/plot_config").dfltConfig,
m=a("./notifier");a=q.exports={};a.log=function(){var a;if(1<k.logging){var b=["LOG:"];for(a=0;a<arguments.length;a++)b.push(arguments[a]);n(console.trace||console.log,b)}if(1<k.notifyOnLogging){b=[];for(a=0;a<arguments.length;a++)b.push(arguments[a]);m(b.join("\x3cbr\x3e"),"long")}};a.warn=function(){var a;if(0<k.logging){var b=["WARN:"];for(a=0;a<arguments.length;a++)b.push(arguments[a]);n(console.trace||console.log,b)}if(0<k.notifyOnLogging){b=[];for(a=0;a<arguments.length;a++)b.push(arguments[a]);
m(b.join("\x3cbr\x3e"),"stick")}};a.error=function(){var a;if(0<k.logging){var b=["ERROR:"];for(a=0;a<arguments.length;a++)b.push(arguments[a]);n(console.error,b)}if(0<k.notifyOnLogging){b=[];for(a=0;a<arguments.length;a++)b.push(arguments[a]);m(b.join("\x3cbr\x3e"),"stick")}}},{"../plot_api/plot_config":752,"./notifier":726}],721:[function(a,q,p){var n=a("d3");q.exports=function(a,m,h){m=a.selectAll("g."+h.replace(/\s/g,".")).data(m,function(b){return b[0].trace.uid});m.exit().remove();m.enter().append("g").attr("class",
h);m.order();var b=a.classed("rangeplot")?"nodeRangePlot3":"node3";m.each(function(a){a[0][b]=n.select(this)});return m}},{d3:165}],722:[function(a,q,p){p.init2dArray=function(a,k){for(var m=Array(a),h=0;h<a;h++)m[h]=Array(k);return m};p.transposeRagged=function(a){var k=0,m=a.length,h,b;for(h=0;h<m;h++)k=Math.max(k,a[h].length);var g=Array(k);for(h=0;h<k;h++)for(g[h]=Array(m),b=0;b<m;b++)g[h][b]=a[b][h];return g};p.dot=function(a,k){if(!a.length||!k.length||a.length!==k.length)return null;var m=
a.length,h;if(a[0].length){var b=Array(m);for(h=0;h<m;h++)b[h]=p.dot(a[h],k)}else if(k[0].length)for(k=p.transposeRagged(k),b=Array(k.length),h=0;h<k.length;h++)b[h]=p.dot(a,k[h]);else for(h=b=0;h<m;h++)b+=a[h]*k[h];return b};p.translationMatrix=function(a,k){return[[1,0,a],[0,1,k],[0,0,1]]};p.rotationMatrix=function(a){a=a*Math.PI/180;return[[Math.cos(a),-Math.sin(a),0],[Math.sin(a),Math.cos(a),0],[0,0,1]]};p.rotationXYMatrix=function(a,k,m){return p.dot(p.dot(p.translationMatrix(k,m),p.rotationMatrix(a)),
p.translationMatrix(-k,-m))};p.apply2DTransform=function(a){return function(){var k=arguments;3===k.length&&(k=k[0]);k=1===arguments.length?k[0]:[k[0],k[1]];return p.dot(a,[k[0],k[1],1]).slice(0,2)}};p.apply2DTransform2=function(a){var k=p.apply2DTransform(a);return function(a){return k(a.slice(0,2)).concat(k(a.slice(2,4)))}}},{}],723:[function(a,q,p){q.exports={mod:function(a,k){a%=k;return 0>a?a+k:a},modHalf:function(a,k){return Math.abs(a)>k/2?a-Math.round(a/k)*k:a}}},{}],724:[function(a,q,p){function n(b,
a){return function(){var d=b,c,f;for(c=0;c<a.length-1;c++){var g=a[c];if(-1===g){g=!0;var h=[];for(f=0;f<d.length;f++)h[f]=n(d[f],a.slice(c+1))(),h[f]!==h[0]&&(g=!1);return g?h[0]:h}if("number"===typeof g&&!e(d))return;d=d[g];if("object"!==typeof d||null===d)return}if("object"===typeof d&&null!==d&&(h=d[a[c]],null!==h))return h}}function k(b,a){return void 0===b||null===b&&!a.match(t)}function m(b,a,d){return function(c){var f=b,l="",t=[[b,l]],n=k(c,d),p;for(p=0;p<a.length-1;p++){var q=a[p];if("number"===
typeof q&&!e(f))throw"array index but container is not an array";if(-1===q){n=f;l=a.slice(p+1);q=c;var z=d,x=e(q),C=!0,B=q,D=z.replace("-1",0),G=x?!1:k(q,D),E=l[0];for(t=0;t<n.length;t++)D=z.replace("-1",t),x&&(B=q[t%q.length],G=k(B,D)),G&&(C=!1),h(n,t,E,G)&&m(n[t],l,z.replace("-1",t))(B);if(n=!C)break;else return}if(!h(f,q,a[p+1],n))break;f=f[q];if("object"!==typeof f||null===f)throw"container is not an object";z=q;g(q)?z="["+q+"]":l&&(z="."+q);l+=z;t.push([f,l])}if(n){if(p===a.length-1&&(delete f[a[p]],
Array.isArray(f)&&+a[p]===f.length-1))for(;f.length&&void 0===f[f.length-1];)f.pop()}else f[a[p]]=c}}function h(b,a,d,c){if(void 0===b[a]){if(c)return!1;b[a]="number"===typeof d?[]:{}}return!0}function b(b,a,d){return{set:function(){throw"bad container";},get:function(){},astr:a,parts:d,obj:b}}var g=a("fast-isnumeric"),e=a("./array").isArrayOrTypedArray;q.exports=function(a,e){if(g(e))e=String(e);else if("string"!==typeof e||"[-1]"===e.substr(e.length-4))throw"bad property string";for(var d=0,c=e.split("."),
f,h;d<c.length;){if(f=String(c[d]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(f[1])c[d]=f[1];else if(0===d)c.splice(0,1);else throw"bad property string";f=f[2].substr(1,f[2].length-2).split("][");for(h=0;h<f.length;h++)d++,c.splice(d,0,Number(f[h]))}d++}return"object"!==typeof a?b(a,e,c):{set:m(a,c,e),get:n(a,c),astr:e,parts:c,obj:a}};var t=/(^|\.)args\[/},{"./array":699,"fast-isnumeric":228}],725:[function(a,q,p){q.exports=function(){}},{}],726:[function(a,q,p){var n=a("d3"),k=a("fast-isnumeric"),
m=[];q.exports=function(a,b){function g(b){b.duration(700).style("opacity",0).each("end",function(b){b=m.indexOf(b);-1!==b&&m.splice(b,1);n.select(this).remove()})}if(-1===m.indexOf(a)){m.push(a);var e=1E3;k(b)?e=b:"long"===b&&(e=3E3);a=n.select("body").selectAll(".plotly-notifier").data([0]);a.enter().append("div").classed("plotly-notifier",!0);a.selectAll(".notifier-note").data(m).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(a){var h=n.select(this);h.append("button").classed("notifier-close",
!0).html("\x26times;").on("click",function(){h.transition().call(g)});var f=h.append("p");a=a.split(/<br\s*\/?>/g);for(var d=0;d<a.length;d++)d&&f.append("br"),f.append("span").text(a[d]);"stick"===b?h.transition().duration(350).style("opacity",1):h.transition().duration(700).style("opacity",1).transition().delay(e).call(g)})}}},{d3:165,"fast-isnumeric":228}],727:[function(a,q,p){var n=a("./setcursor");q.exports=function(a,m){var h=a.attr("data-savedcursor");if(m){if(!h){h=(a.attr("class")||"").split(" ");
for(var b=0;b<h.length;b++){var g=h[b];0===g.indexOf("cursor-")&&a.attr("data-savedcursor",g.substr(7)).classed(g,!1)}a.attr("data-savedcursor")||a.attr("data-savedcursor","!!")}n(a,m)}else h&&(a.attr("data-savedcursor",null),"!!"===h?n(a):n(a,h))}},{"./setcursor":736}],728:[function(a,q,p){var n=a("./matrix").dot,k=a("../constants/numerical").BADNUM,m=q.exports={};m.tester=function(a){function b(b,a){var c=b[0],e=b[1];return c===k||c<h||c>l||e===k||e<f||e>d||a&&r(b)?!1:!0}function g(b,a){var c=b[0];
b=b[1];if(c===k||c<h||c>l||b===k||b<f||b>d)return!1;var g=e.length,r=e[0][0],m=e[0][1],t=0,n;for(n=1;n<g;n++){var u=r;var v=m;r=e[n][0];m=e[n][1];var p=Math.min(u,r);if(!(c<p||c>Math.max(u,r)||b>Math.max(v,m)))if(b<Math.min(v,m))c!==p&&t++;else{u=r===u?b:v+(c-u)*(m-v)/(r-u);if(b===u)return 1===n&&a?!1:!0;b<=u&&c!==p&&t++}}return 1===t%2}var e=a.slice(),h=e[0][0],l=h,f=e[0][1],d=f;e.push(e[0]);for(a=1;a<e.length;a++)h=Math.min(h,e[a][0]),l=Math.max(l,e[a][0]),f=Math.min(f,e[a][1]),d=Math.max(d,e[a][1]);
var c=!1;if(5===e.length)if(e[0][0]===e[1][0]){if(e[2][0]===e[3][0]&&e[0][1]===e[3][1]&&e[1][1]===e[2][1]){c=!0;var r=function(b){return b[0]===e[0][0]}}}else e[0][1]===e[1][1]&&e[2][1]===e[3][1]&&e[0][0]===e[3][0]&&e[1][0]===e[2][0]&&(c=!0,r=function(b){return b[1]===e[0][1]});var m=!0,n=e[0];for(a=1;a<e.length;a++)if(n[0]!==e[a][0]||n[1]!==e[a][1]){m=!1;break}return{xmin:h,xmax:l,ymin:f,ymax:d,pts:e,contains:c?b:g,isRect:c,degenerate:m}};m.isSegmentBent=function(a,b,g,e){var h=a[b],k=[a[g][0]-h[0],
a[g][1]-h[1]],f=n(k,k),d=Math.sqrt(f);d=[-k[1]/d,k[0]/d];for(b+=1;b<g;b++){var c=[a[b][0]-h[0],a[b][1]-h[1]];var r=n(c,k);if(0>r||r>f||Math.abs(n(c,d))>e)return!0}return!1};m.filter=function(a,b){function g(d){a.push(d);d=e.length;var c=h;e.splice(k+1);for(var f=c+1;f<a.length;f++)if(f===a.length-1||m.isSegmentBent(a,c,f+1,b))e.push(a[f]),e.length<d-2&&(h=f,k=e.length-1),c=f}var e=[a[0]],h=0,k=0;if(1<a.length){var f=a.pop();g(f)}return{addPt:g,raw:a,filtered:e}}},{"../constants/numerical":692,"./matrix":722}],
729:[function(a,q,p){(function(n){var k=a("./show_no_webgl_msg"),m=a("regl");q.exports=function(a,b){var g=a._fullLayout,e=!0;g._glcanvas.each(function(h){if(!h.regl&&(!h.pick||g._has("parcoords"))){try{h.regl=m({canvas:this,attributes:{antialias:!h.pick,preserveDrawingBuffer:!0},pixelRatio:a._context.plotGlPixelRatio||n.devicePixelRatio,extensions:b||[]})}catch(l){e=!1}e&&this.addEventListener("webglcontextlost",function(b){a&&a.emit&&a.emit("plotly_webglcontextlost",{event:b,layer:h.key})},!1)}});
e||k({container:g._glcontainer.node()});return e}}).call(this,"undefined"!==typeof pa?pa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./show_no_webgl_msg":737,regl:500}],730:[function(a,q,p){q.exports=function(a,k){if(k instanceof RegExp){for(var m=k.toString(),h=0;h<a.length;h++)if(a[h]instanceof RegExp&&a[h].toString()===m)return a;a.push(k)}else!k&&0!==k||-1!==a.indexOf(k)||a.push(k);return a}},{}],731:[function(a,q,p){var n=a("../lib"),k=a("../plot_api/plot_config").dfltConfig,
m={add:function(a,b,g,e,m){a.undoQueue=a.undoQueue||{index:0,queue:[],sequence:!1};var h=a.undoQueue.index;if(a.autoplay)a.undoQueue.inSequence||(a.autoplay=!1);else{if(!a.undoQueue.sequence||a.undoQueue.beginSequence){var f={undo:{calls:[],args:[]},redo:{calls:[],args:[]}};a.undoQueue.queue.splice(h,a.undoQueue.queue.length-h,f);a.undoQueue.index+=1}else f=a.undoQueue.queue[h-1];a.undoQueue.beginSequence=!1;f&&(f.undo.calls.unshift(b),f.undo.args.unshift(g),f.redo.calls.push(e),f.redo.args.push(m));
a.undoQueue.queue.length>k.queueLength&&(a.undoQueue.queue.shift(),a.undoQueue.index--)}},startSequence:function(a){a.undoQueue=a.undoQueue||{index:0,queue:[],sequence:!1};a.undoQueue.sequence=!0;a.undoQueue.beginSequence=!0},stopSequence:function(a){a.undoQueue=a.undoQueue||{index:0,queue:[],sequence:!1};a.undoQueue.sequence=!1;a.undoQueue.beginSequence=!1},undo:function(a){var b;if(a.framework&&a.framework.isPolar)a.framework.undo();else if(!(void 0===a.undoQueue||isNaN(a.undoQueue.index)||0>=a.undoQueue.index)){a.undoQueue.index--;
var g=a.undoQueue.queue[a.undoQueue.index];a.undoQueue.inSequence=!0;for(b=0;b<g.undo.calls.length;b++)m.plotDo(a,g.undo.calls[b],g.undo.args[b]);a.undoQueue.inSequence=!1;a.autoplay=!1}},redo:function(a){var b;if(a.framework&&a.framework.isPolar)a.framework.redo();else if(!(void 0===a.undoQueue||isNaN(a.undoQueue.index)||a.undoQueue.index>=a.undoQueue.queue.length)){var g=a.undoQueue.queue[a.undoQueue.index];a.undoQueue.inSequence=!0;for(b=0;b<g.redo.calls.length;b++)m.plotDo(a,g.redo.calls[b],g.redo.args[b]);
a.undoQueue.inSequence=!1;a.autoplay=!1;a.undoQueue.index++}},plotDo:function(a,b,g){a.autoplay=!0;for(var e=[],h,k=0;k<g.length;k++)h=g[k],e[k]=h===a?h:"object"===typeof h?Array.isArray(h)?n.extendDeep([],h):n.extendDeepAll({},h):h;b.apply(null,e)}};q.exports=m},{"../lib":716,"../plot_api/plot_config":752}],732:[function(a,q,p){p.counter=function(a,k,m,h){k=(k||"")+(m?"":"$");h=!1===h?"":"^";return"xy"===a?new RegExp(h+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+k):new RegExp(h+a+"([2-9]|[1-9][0-9]+)?"+
k)}},{}],733:[function(a,q,p){var n=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,k=/^[^\.\[\]]+$/;q.exports=function(a,h){for(;h;){var b=a.match(n);if(b)a=b[1];else if(a.match(k))a="";else throw Error("bad relativeAttr call:"+[a,h]);if("^"===h.charAt(0))h=h.slice(1);else break}return a&&"["!==h.charAt(0)?a+"."+h:a+h}},{}],734:[function(a,q,p){var n=a("./array").isArrayOrTypedArray,k=a("./is_plain_object");q.exports=function g(a,b){for(var e in b){var h=b[e],l=a[e];if(l!==h)if("_"===e.charAt(0)||"function"===typeof h)e in
a||(a[e]=h);else if(n(h)&&n(l)&&k(h[0])){if("customdata"!==e&&"ids"!==e)for(var f=Math.min(h.length,l.length),d=0;d<f;d++)l[d]!==h[d]&&k(h[d])&&k(l[d])&&g(l[d],h[d])}else k(h)&&k(l)&&(g(l,h),Object.keys(l).length||delete a[e])}}},{"./array":699,"./is_plain_object":717}],735:[function(a,q,p){function n(b,a){return b<a}function k(b,a){return b<=a}function m(b,a){return b>a}function h(b,a){return b>=a}var b=a("fast-isnumeric"),g=a("./loggers"),e=a("./identity");p.findBin=function(a,e,f){if(b(e.start))return f?
Math.ceil((a-e.start)/e.size-1E-9)-1:Math.floor((a-e.start)/e.size+1E-9);var d=0,c=e.length,l=0,t=1<c?(e[c-1]-e[0])/(c-1):1;var v=0<=t?f?n:k:f?h:m;for(a+=1E-9*t*(f?-1:1)*(0<=t?1:-1);d<c&&100>l++;)f=Math.floor((d+c)/2),v(e[f],a)?d=f+1:c=f;90<l&&g.log("Long binary search...");return d-1};p.sorterAsc=function(b,a){return b-a};p.sorterDes=function(b,a){return a-b};p.distinctVals=function(b){b=b.slice();b.sort(p.sorterAsc);for(var a=b.length-1,e=b[a]-b[0]||1,d=e/(a||1)/1E4,c=[b[0]],g=0;g<a;g++)b[g+1]>
b[g]+d&&(e=Math.min(e,b[g+1]-b[g]),c.push(b[g+1]));return{vals:c,minDiff:e}};p.roundUp=function(b,a,e){for(var d=0,c=a.length-1,f=0,g=e?0:1,h=e?1:0,k=e?Math.ceil:Math.floor;d<c&&100>f++;)e=k((d+c)/2),a[e]<=b?d=e+g:c=e-h;return a[d]};p.sort=function(b,a){for(var e=0,d=0,c=1;c<b.length;c++){var g=a(b[c],b[c-1]);0>g?e=1:0<g&&(d=1);if(e&&d)return b.sort(a)}return d?b:b.reverse()};p.findIndexOfMin=function(b,a){a=a||e;for(var f=Infinity,d,c=0;c<b.length;c++){var g=a(b[c]);g<f&&(f=g,d=c)}return d}},{"./identity":715,
"./loggers":720,"fast-isnumeric":228}],736:[function(a,q,p){q.exports=function(a,k){(a.attr("class")||"").split(" ").forEach(function(k){0===k.indexOf("cursor-")&&a.classed(k,!1)});k&&a.classed("cursor-"+k,!0)}},{}],737:[function(a,q,p){var n=a("../components/color"),k=function(){};q.exports=function(a){for(var h in a)"function"===typeof a[h]&&(a[h]=k);a.destroy=function(){a.container.parentNode.removeChild(a.container)};h=document.createElement("div");h.className="no-webgl";h.style.cursor="pointer";
h.style.fontSize="24px";h.style.color=n.defaults[0];h.style.position="absolute";h.style.left=h.style.top="0px";h.style.width=h.style.height="100%";h.style["background-color"]=n.lightLine;h.style["z-index"]=30;var b=document.createElement("p");b.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info";b.style.position="relative";b.style.top="50%";b.style.left="50%";b.style.height="30%";b.style.width="50%";b.style.margin="-15% 0 0 -25%";h.appendChild(b);a.container.appendChild(h);
a.container.style.background="#FFFFFF";a.container.onclick=function(){window.open("https://get.webgl.org")};return!1}},{"../components/color":591}],738:[function(a,q,p){var n=a("fast-isnumeric"),k=a("./array").isArrayOrTypedArray;p.aggNums=function(a,h,b,g){var e;if(!g||g>b.length)g=b.length;n(h)||(h=!1);if(k(b[0])){var m=Array(g);for(e=0;e<g;e++)m[e]=p.aggNums(a,h,b[e]);b=m}for(e=0;e<g;e++)n(h)?n(b[e])&&(h=a(+h,+b[e])):h=b[e];return h};p.len=function(a){return p.aggNums(function(a){return a+1},0,
a)};p.mean=function(a,h){h||(h=p.len(a));return p.aggNums(function(b,a){return b+a},0,a)/h};p.midRange=function(a){if(void 0!==a&&0!==a.length)return(p.aggNums(Math.max,null,a)+p.aggNums(Math.min,null,a))/2};p.variance=function(a,h,b){h||(h=p.len(a));n(b)||(b=p.mean(a,h));return p.aggNums(function(a,e){return a+Math.pow(e-b,2)},0,a)/h};p.stdev=function(a,h,b){return Math.sqrt(p.variance(a,h,b))};p.median=function(a){a=a.slice().sort();return p.interp(a,.5)};p.interp=function(a,h){if(!n(h))throw"n should be a finite number";
h=h*a.length-.5;if(0>h)return a[0];if(h>a.length-1)return a[a.length-1];var b=h%1;return b*a[Math.ceil(h)]+(1-b)*a[Math.floor(h)]}},{"./array":699,"fast-isnumeric":228}],739:[function(a,q,p){var n=a("color-normalize");q.exports=function(a){return a?n(a):[0,0,0,1]}},{"color-normalize":122}],740:[function(a,q,p){function n(b,a,f){var h,k,l,r;MathJax.Hub.Queue(function(){k=e.extendDeepAll({},MathJax.Hub.config);l=MathJax.Hub.processSectionDelay;void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=
0);return MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){h=MathJax.Hub.config.menuSettings.renderer;if("SVG"!==h)return MathJax.Hub.setRenderer("SVG")},function(){var f="math-output-"+e.randstr({},64);r=g.select("body").append("div").attr({id:f}).style({visibility:"hidden",position:"absolute"}).style({"font-size":a.fontSize+"px"}).text(b.replace(d,"\\lt ").replace(c,"\\gt "));return MathJax.Hub.Typeset(r.node())},function(){var a=
g.select("body").select("#MathJax_SVG_glyphs");if(r.select(".MathJax_SVG").empty()||!r.select("svg").node())e.log("There was an error in the tex syntax.",b),f();else{var c=r.select("svg").node().getBoundingClientRect();f(r.select(".MathJax_SVG"),a,c)}r.remove();if("SVG"!==h)return MathJax.Hub.setRenderer(h)},function(){void 0!==l&&(MathJax.Hub.processSectionDelay=l);return MathJax.Hub.Config(k)})}function k(b,a){return b?(b=(b=b.match(a))&&(b[3]||b[4]))&&m(b):null}function m(b){return b.replace(J,
function(b,a){if("#"===a.charAt(0))if(a="x"===a.charAt(1)?parseInt(a.substr(2),16):parseInt(a.substr(1),10),1114111<a)a=void 0;else{var c=String.fromCodePoint;c?a=c(a):(c=String.fromCharCode,a=65535>=a?c(a):c((a>>10)+55232,a%1024+56320))}else a=L[a];return a||b})}function h(b,a){function c(){q++;var a=document.createElementNS(t.svg,"tspan");g.select(a).attr({class:"line",dy:q*l+"em"});b.appendChild(a);H=a;var c=p;p=[{node:a}];if(1<c.length)for(a=1;a<c.length;a++)d(c[a])}function d(b){var a=b.type,
c={};if("a"===a){var d="a";var e=b.target,h=b.href,k=b.popup;h&&(c={"xlink:xlink:show":"_blank"===e||"_"!==e.charAt(0)?"new":"replace",target:e,"xlink:xlink:href":h},k&&(c.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+k+'");return false;'))}else d="tspan";b.style&&(c.style=b.style);d=document.createElementNS(t.svg,d);"sup"===a||"sub"===a?(f(H,w),H.appendChild(d),e=document.createElementNS(t.svg,"tspan"),f(e,w),g.select(e).attr("dy",v[a]),c.dy=u[a],H.appendChild(d),H.appendChild(e)):
H.appendChild(d);g.select(d).attr(c);H=b.node=d;p.push(b)}function f(b,a){b.appendChild(document.createTextNode(a))}function h(b){if(1===p.length)e.log("Ignoring unexpected end tag \x3c/"+b+"\x3e.",a);else{var c=p.pop();b!==c.type&&e.log("Start tag \x3c"+c.type+"\x3e doesnt match end tag \x3c"+b+"\x3e. Pretending it did match.",a);H=p[p.length-1].node}}a=a.replace(A," ");var n=!1,p=[],q=-1;if(C.test(a))c();else{var H=b;p=[{node:b}]}for(var K=a.split(z),J=0;J<K.length;J++){var L=K[J],R=L.match(x),
U=R&&R[2].toLowerCase(),X=r[U];if("br"===U)c();else if(void 0===X)f(H,m(L));else if(R[1])h(U);else{L=R[4];R={type:U};var ea=k(L,B);ea?(ea=ea.replace(F,"$1 fill:"),X&&(ea+=";"+X)):X&&(ea=X);ea&&(R.style=ea);"a"===U&&(n=!0,U=k(L,D))&&(X=document.createElement("a"),X.href=U,-1!==y.indexOf(X.protocol)&&(R.href=encodeURI(decodeURI(U)),R.target=k(L,G)||"_blank",R.popup=k(L,E)));d(R)}}return n}function b(b,a,c){var d=c.horizontalAlign;c=c.verticalAlign||"top";var e=b.node().getBoundingClientRect(),f=a.node().getBoundingClientRect(),
g;var h="bottom"===c?function(){return e.bottom-g.height}:"middle"===c?function(){return e.top+(e.height-g.height)/2}:function(){return e.top};var k="right"===d?function(){return e.right-g.width}:"center"===d?function(){return e.left+(e.width-g.width)/2}:function(){return e.left};return function(){g=this.node().getBoundingClientRect();this.style({top:h()-f.top+"px",left:k()-f.left+"px","z-index":1E3});return this}}var g=a("d3"),e=a("../lib"),t=a("../constants/xmlns_namespaces"),l=a("../constants/alignment").LINE_SPACING,
f=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;p.convertToTspans=function(b,a,c){function d(){l.empty()||(r=b.attr("class")+"-math",l.select("svg."+r).remove());b.text("").style("white-space","pre");h(b.node(),e)&&b.style("pointer-events","all");p.positionText(b);c&&c.call(b)}var e=b.text(),k=!b.attr("data-notex")&&"undefined"!==typeof MathJax&&e.match(f),l=g.select(b.node().parentNode);if(!l.empty()){var r=b.attr("class")?b.attr("class").split(" ")[0]:"text";r+="-math";l.selectAll("svg."+r).remove();l.selectAll("g."+
r+"-group").remove();b.style("display",null).attr({"data-unformatted":e,"data-math":"N"});k?(a&&a._promises||[]).push(new Promise(function(a){b.style("display","none");var f=parseInt(b.node().style.fontSize,10);n(k[2],{fontSize:f},function(g,h,k){l.selectAll("svg."+r).remove();l.selectAll("g."+r+"-group").remove();if((g=g&&g.select("svg"))&&g.node()){var m=l.append("g").classed(r+"-group",!0).attr({"pointer-events":"none","data-unformatted":e,"data-math":"Y"});m.node().appendChild(g.node());h&&h.node()&&
g.node().insertBefore(h.node().cloneNode(!0),g.node().firstChild);g.attr({"class":r,height:k.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});h=b.node().style.fill||"black";k=g.select("g");k.attr({fill:h,stroke:h});h=k.node().getBoundingClientRect().width;k=k.node().getBoundingClientRect().height;var t=+b.attr("x")-h*{start:0,middle:.5,end:1}[b.attr("text-anchor")||"start"],n=-(f||b.node().getBoundingClientRect().height)/4;"y"===r[0]?(m.attr({transform:"rotate("+
[-90,+b.attr("x"),+b.attr("y")]+") translate("+[-h/2,n-k/2]+")"}),g.attr({x:+b.attr("x"),y:+b.attr("y")})):"l"===r[0]?g.attr({x:b.attr("x"),y:n-k/2}):"a"===r[0]&&0!==r.indexOf("atitle")?g.attr({x:0,y:n}):g.attr({x:t,y:+b.attr("y")+n-k/2});c&&c.call(b,m);a(m)}else d(),a()})})):d();return b}};var d=/(<|&lt;|&#60;)/g,c=/(>|&gt;|&#62;)/g,r={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},u={sub:"0.3em",
sup:"-0.6em"},v={sub:"-0.21em",sup:"0.42em"},w="",y=["http:","https:","mailto:","",void 0,":"],A=p.NEWLINES=/(\r\n?|\n)/g,z=/(<[^<>]*>)/,x=/<(\/?)([^ >]*)(\s+(.*))?>/i,C=/<br(\s+.*)?>/i;p.BR_TAG_ALL=/<br(\s+.*)?>/gi;var B=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,D=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,G=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,E=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i,F=/(^|;)\s*color:/;p.plainText=function(b,a){a=a||{};var c=void 0!==a.len&&
-1!==a.len?a.len:Infinity;a=void 0!==a.allowedTags?a.allowedTags:["br"];var d=b.split(z);b=[];for(var e="",f=0,g=0;g<d.length;g++){var h=d[g],k=h.match(x);if(k=k&&k[2].toLowerCase())-1!==a.indexOf(k)&&(b.push(h),e=k);else{k=h.length;if(f+k<c)b.push(h),f+=k;else if(f<c){a=c-f;e&&("br"!==e||3>=a||3>=k)&&b.pop();3<c?b.push(h.substr(0,a-3)+"..."):b.push(h.substr(0,a));break}e=""}}return b.join("")};var L={mu:"",amp:"\x26",lt:"\x3c",gt:"\x3e",nbsp:"",times:"",plusmn:"",deg:""},J=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;
p.convertEntities=m;p.lineCount=function(b){return b.selectAll("tspan.line").size()||1};p.positionText=function(b,a,c){return b.each(function(){function b(b,a){void 0===a?(a=d.attr(b),null===a&&(d.attr(b,0),a=0)):d.attr(b,a);return a}var d=g.select(this),e=b("x",a),f=b("y",c);"text"===this.nodeName&&d.selectAll("tspan.line").attr({x:e,y:f})})};p.makeEditable=function(a,c){function d(){f();a.style({opacity:0});var b=r.attr("class");(b=b?"."+b.split(" ")[0]+"-math-group":"[class*\x3d-math-group]")&&
g.select(a.node().parentNode).select(b).style({opacity:0})}function e(b){b=b.node();var a=document.createRange();a.selectNodeContents(b);var c=window.getSelection();c.removeAllRanges();c.addRange(a);b.focus()}function f(){var d=g.select(h).select(".svg-container"),f=d.append("div"),k=a.node().style,r=parseFloat(k.fontSize||12),m=c.text;void 0===m&&(m=a.attr("data-unformatted"));f.classed("plugin-editable editable",!0).style({position:"absolute","font-family":k.fontFamily||"Arial","font-size":r,color:c.fill||
k.fill||"black",opacity:1,"background-color":c.background||"transparent",outline:"#ffffff33 1px solid",margin:[-r/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(m).call(b(a,d,c)).on("blur",function(){h._editing=!1;a.text(this.textContent).style({opacity:1});var b=g.select(this).attr("class");(b=b?"."+b.split(" ")[0]+"-math-group":"[class*\x3d-math-group]")&&g.select(a.node().parentNode).select(b).style({opacity:0});b=this.textContent;g.select(this).transition().duration(0).remove();
g.select(document).on("mouseup",null);l.edit.call(a,b)}).on("focus",function(){var b=this;h._editing=!0;g.select(document).on("mouseup",function(){if(g.event.target===b)return!1;document.activeElement===f.node()&&f.node().blur()})}).on("keyup",function(){27===g.event.which?(h._editing=!1,a.style({opacity:1}),g.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),l.cancel.call(a,this.textContent)):(l.input.call(a,this.textContent),g.select(this).call(b(a,d,c)))}).on("keydown",
function(){13===g.event.which&&this.blur()}).call(e)}var h=c.gd,k=c.delegate,l=g.dispatch("edit","input","cancel"),r=k||a;a.style({"pointer-events":k?"none":"all"});if(1!==a.size())throw Error("boo");if(c.immediate)d();else r.on("click",d);return g.rebind(a,l,"on")}},{"../constants/alignment":685,"../constants/xmlns_namespaces":693,"../lib":716,d3:165}],741:[function(a,q,p){function n(a){a&&null!==a.timer&&(clearTimeout(a.timer),a.timer=null)}var k={};p.throttle=function(a,h,b){function g(){b();e.ts=
Date.now();e.onDone&&(e.onDone(),e.onDone=null)}var e=k[a],m=Date.now();if(!e){for(var l in k)k[l].ts<m-6E4&&delete k[l];e=k[a]={ts:0,timer:null}}n(e);m>e.ts+h?g():e.timer=setTimeout(function(){g();e.timer=null},h)};p.done=function(a){var h=k[a];return h&&h.timer?new Promise(function(b){var a=h.onDone;h.onDone=function(){a&&a();b();h.onDone=null}}):Promise.resolve()};p.clear=function(a){if(a)n(k[a]),delete k[a];else for(var h in k)p.clear(h)}},{}],742:[function(a,q,p){var n=a("fast-isnumeric");q.exports=
function(a,m){if(0<a)return Math.log(a)/Math.LN10;a=Math.log(Math.min(m[0],m[1]))/Math.LN10;n(a)||(a=Math.log(Math.max(m[0],m[1]))/Math.LN10-6);return a}},{"fast-isnumeric":228}],743:[function(a,q,p){q=q.exports={};var n=a("../plots/geo/constants").locationmodeToLayer,k=a("topojson-client").feature;q.getTopojsonName=function(a){return[a.scope.replace(/ /g,"-"),"_",a.resolution.toString(),"m"].join("")};q.getTopojsonPath=function(a,h){return a+h+".json"};q.getTopojsonFeatures=function(a,h){return k(h,
h.objects[n[a.locationmode]]).features}},{"../plots/geo/constants":792,"topojson-client":538}],744:[function(a,q,p){q.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],745:[function(a,q,p){q.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],746:[function(a,q,p){var n=a("../registry");q.exports=function(a){for(var k=n.layoutArrayContainers,h=n.layoutArrayRegexes,
b=a.split("[")[0],g,e,t=0;t<h.length;t++)if((e=a.match(h[t]))&&0===e.index){g=e[0];break}g||(g=k[k.indexOf(b)]);if(!g)return!1;a=a.substr(g.length);return a?(e=a.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))?{array:g,index:Number(e[1]),property:e[3]||""}:!1:{array:g,index:"",property:""}}},{"../registry":845}],747:[function(a,q,p){function n(b){for(var a={},e=0;e<b.length;e++)a[b[e]]=!1;return a}function k(a,e,f){a=h({},a);for(var d in a){var c=a[d];b(c)&&(a[d]=m(c,e,f,d))}"from-root"===f&&(a.editType=
e);return a}function m(b,a,e,d){if(b.valType){e=h({},b);e.editType=a;if(Array.isArray(b.items))for(e.items=Array(b.items.length),d=0;d<b.items.length;d++)e.items[d]=m(b.items[d],a,"from-root");return e}return k(b,a,"_"===d.charAt(0)?"nested":"from-root")}a=a("../lib");var h=a.extendFlat,b=a.isPlainObject;a={valType:"flaglist",extras:["none"],flags:"calc clearAxisTypes plot style markerSize colorbars".split(" ")};p={valType:"flaglist",extras:["none"],flags:"calc plot legend ticks axrange layoutstyle modebar camera arraydraw colorbars".split(" ")};
var g=a.flags.slice().concat(["fullReplot"]),e=p.flags.slice().concat("layoutReplot");q.exports={traces:a,layout:p,traceFlags:function(){return n(g)},layoutFlags:function(){return n(e)},update:function(b,a){if((a=a.editType)&&"none"!==a){a=a.split("+");for(var e=0;e<a.length;e++)b[a[e]]=!0}},overrideAll:k}},{"../lib":716}],748:[function(a,q,p){function n(b,a){var c=b[a],d=a.charAt(0);c&&"paper"!==c&&(b[a]=r(c,d))}function k(b){function a(a,c){var d=b.title&&b.title[c];b[a]&&!d&&(b.title||(b.title=
{}),b.title[c]=b[a],delete b[a])}if(b){if("string"===typeof b.title||"number"===typeof b.title)b.title={text:b.title};a("titlefont","font");a("titleposition","position");a("titleside","side");a("titleoffset","offset")}}function m(b){if(!f.isPlainObject(b))return!1;var a=b.name;delete b.name;delete b.showlegend;return("string"===typeof a||"number"===typeof a)&&String(a)}function h(b){var a="middle",c="center";"string"===typeof b&&(-1!==b.indexOf("top")?a="top":-1!==b.indexOf("bottom")&&(a="bottom"),
-1!==b.indexOf("left")?c="left":-1!==b.indexOf("right")&&(c="right"));return a+" "+c}function b(b,a){return a in b&&"object"===typeof b[a]&&0===Object.keys(b[a]).length}function g(b){var a=b.search(w);if(0<a)return b.substr(0,a)}var e=a("fast-isnumeric"),t=a("gl-mat4/fromQuat"),l=a("../registry"),f=a("../lib"),d=a("../plots/plots");q=a("../plots/cartesian/axis_ids");var c=a("../components/color"),r=q.cleanId,u=q.getFromTrace,v=l.traceIs;p.clearPromiseQueue=function(b){Array.isArray(b._promises)&&
0<b._promises.length&&f.log("Clearing previous rejected promises from queue.");b._promises=[]};p.cleanLayout=function(a){var e;a||(a={});a.xaxis1&&(a.xaxis||(a.xaxis=a.xaxis1),delete a.xaxis1);a.yaxis1&&(a.yaxis||(a.yaxis=a.yaxis1),delete a.yaxis1);a.scene1&&(a.scene||(a.scene=a.scene1),delete a.scene1);var g=(d.subplotsRegistry.cartesian||{}).attrRegex,h=(d.subplotsRegistry.polar||{}).attrRegex,l=(d.subplotsRegistry.ternary||{}).attrRegex,m=(d.subplotsRegistry.gl3d||{}).attrRegex,u=Object.keys(a);
for(e=0;e<u.length;e++){var v=u[e];if(g&&g.test(v)){v=a[v];v.anchor&&"free"!==v.anchor&&(v.anchor=r(v.anchor));v.overlaying&&(v.overlaying=r(v.overlaying));v.type||(v.isdate?v.type="date":v.islog?v.type="log":!1===v.isdate&&!1===v.islog&&(v.type="linear"));if("withzero"===v.autorange||"tozero"===v.autorange)v.autorange=!0,v.rangemode="tozero";delete v.islog;delete v.isdate;delete v.categories;b(v,"domain")&&delete v.domain;void 0!==v.autotick&&(void 0===v.tickmode&&(v.tickmode=v.autotick?"auto":"linear"),
delete v.autotick);k(v)}else if(h&&h.test(v))k(a[v].radialaxis);else if(l&&l.test(v))v=a[v],k(v.aaxis),k(v.baxis),k(v.caxis);else if(m&&m.test(v)){v=a[v];var q=v.cameraposition;if(Array.isArray(q)&&4===q[0].length){var w=q[1],A=q[2],y=t([],q[0]),K=[];for(q=0;3>q;++q)K[q]=w[q]+A*y[2+4*q];v.camera={eye:{x:K[0],y:K[1],z:K[2]},center:{x:w[0],y:w[1],z:w[2]},up:{x:0,y:0,z:1}};delete v.cameraposition}k(v.xaxis);k(v.yaxis);k(v.zaxis)}}g=Array.isArray(a.annotations)?a.annotations.length:0;for(e=0;e<g;e++)h=
a.annotations[e],f.isPlainObject(h)&&(h.ref&&("paper"===h.ref?(h.xref="paper",h.yref="paper"):"data"===h.ref&&(h.xref="x",h.yref="y"),delete h.ref),n(h,"xref"),n(h,"yref"));g=Array.isArray(a.shapes)?a.shapes.length:0;for(e=0;e<g;e++)h=a.shapes[e],f.isPlainObject(h)&&(n(h,"xref"),n(h,"yref"));if(e=a.legend)3<e.x?(e.x=1.02,e.xanchor="left"):-2>e.x&&(e.x=-.02,e.xanchor="right"),3<e.y?(e.y=1.02,e.yanchor="bottom"):-2>e.y&&(e.y=-.02,e.yanchor="top");k(a);"rotate"===a.dragmode&&(a.dragmode="orbit");c.clean(a);
a.template&&a.template.layout&&p.cleanLayout(a.template.layout);return a};p.cleanData=function(a){for(var e=0;e<a.length;e++){var g=a[e];"histogramy"===g.type&&"xbins"in g&&!("ybins"in g)&&(g.ybins=g.xbins,delete g.xbins);if(g.error_y&&"opacity"in g.error_y){var t=c.defaults;t=g.error_y.color||(v(g,"bar")?c.defaultLine:t[e%t.length]);g.error_y.color=c.addOpacity(c.rgb(t),c.opacity(t)*g.error_y.opacity);delete g.error_y.opacity}"bardir"in g&&("h"!==g.bardir||!v(g,"bar")&&"histogram"!==g.type.substr(0,
9)||(g.orientation="h",p.swapXYData(g)),delete g.bardir);"histogramy"===g.type&&p.swapXYData(g);if("histogramx"===g.type||"histogramy"===g.type)g.type="histogram";"scl"in g&&!("colorscale"in g)&&(g.colorscale=g.scl,delete g.scl);"reversescl"in g&&!("reversescale"in g)&&(g.reversescale=g.reversescl,delete g.reversescl);g.xaxis&&(g.xaxis=r(g.xaxis,"x"));g.yaxis&&(g.yaxis=r(g.yaxis,"y"));v(g,"gl3d")&&g.scene&&(g.scene=d.subplotsRegistry.gl3d.cleanId(g.scene));if(!v(g,"pie-like")&&!v(g,"bar-like"))if(Array.isArray(g.textposition))for(t=
0;t<g.textposition.length;t++)g.textposition[t]=h(g.textposition[t]);else g.textposition&&(g.textposition=h(g.textposition));(t=l.getModule(g))&&t.colorbar&&(t=(t=t.colorbar.container)?g[t]:g)&&t.colorscale&&("YIGnBu"===t.colorscale&&(t.colorscale="YlGnBu"),"YIOrRd"===t.colorscale&&(t.colorscale="YlOrRd"));if("surface"===g.type&&f.isPlainObject(g.contours)){var n=["x","y","z"];for(t=0;t<n.length;t++){var u=g.contours[n[t]];f.isPlainObject(u)&&(u.highlightColor&&(u.highlightcolor=u.highlightColor,
delete u.highlightColor),u.highlightWidth&&(u.highlightwidth=u.highlightWidth,delete u.highlightWidth))}}if("candlestick"===g.type||"ohlc"===g.type){n=!1!==(g.increasing||{}).showlegend;u=!1!==(g.decreasing||{}).showlegend;t=m(g.increasing);var q=m(g.decreasing);if(!1!==t&&!1!==q){if(!n||u)if(u&&!n)t=q;else if(t.trim()){if(q.trim()){u=Math.min(t.length,q.length);for(n=0;n<u&&t.charAt(n)===q.charAt(n);n++);t=t.substr(0,n).trim()}}else t=q;t&&(g.name=t)}else!t&&!q||g.name||(g.name=t||q)}if(Array.isArray(g.transforms))for(n=
g.transforms,t=0;t<n.length;t++)if(u=n[t],f.isPlainObject(u))switch(u.type){case "filter":u.filtersrc&&(u.target=u.filtersrc,delete u.filtersrc);u.calendar&&(u.valuecalendar||(u.valuecalendar=u.calendar),delete u.calendar);break;case "groupby":if(u.styles=u.styles||u.style,u.styles&&!Array.isArray(u.styles)){q=u.styles;var w=Object.keys(q);u.styles=[];for(var A=0;A<w.length;A++)u.styles.push({target:w[A],value:q[w[A]]})}}b(g,"line")&&delete g.line;"marker"in g&&(b(g.marker,"line")&&delete g.marker.line,
b(g,"marker")&&delete g.marker);c.clean(g);g.autobinx&&(delete g.autobinx,delete g.xbins);g.autobiny&&(delete g.autobiny,delete g.ybins);k(g);g.colorbar&&k(g.colorbar);g.marker&&g.marker.colorbar&&k(g.marker.colorbar);g.line&&g.line.colorbar&&k(g.line.colorbar);g.aaxis&&k(g.aaxis);g.baxis&&k(g.baxis)}};p.swapXYData=function(b){f.swapAttrs(b,"? ?0 d? ?bins nbins? autobin? ?src error_?".split(" "));Array.isArray(b.z)&&Array.isArray(b.z[0])&&(b.transpose?delete b.transpose:b.transpose=!0);if(b.error_x&&
b.error_y){var a=b.error_y;a="copy_ystyle"in a?a.copy_ystyle:!(a.color||a.thickness||a.width);f.swapAttrs(b,["error_?.copy_ystyle"]);a&&f.swapAttrs(b,["error_?.color","error_?.thickness","error_?.width"])}if("string"===typeof b.hoverinfo){var c=b.hoverinfo.split("+");for(a=0;a<c.length;a++)"x"===c[a]?c[a]="y":"y"===c[a]&&(c[a]="x");b.hoverinfo=c.join("+")}};p.coerceTraceIndices=function(b,a){if(e(a))return[a];if(!Array.isArray(a)||!a.length)return b.data.map(function(b,a){return a});if(Array.isArray(a)){for(var c=
[],d=0;d<a.length;d++)f.isIndex(a[d],b.data.length)?c.push(a[d]):f.warn("trace index (",a[d],") is not a number or is out of bounds");return c}return a};p.manageArrayContainers=function(b,a,c){var d=b.obj,g=b.parts,h=g.length,k=g[h-1],l=e(k);l&&null===a?(b=g.slice(0,h-1).join("."),f.nestedProperty(d,b).get().splice(k,1)):(l&&void 0===b.get()&&void 0===b.get()&&(c[b.astr]=null),b.set(a))};var w=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;p.hasParent=function(b,a){for(a=g(a);a;){if(a in b)return!0;a=g(a)}return!1};
var y=["x","y","z"];p.clearAxisTypes=function(b,a,c){for(var d=0;d<a.length;d++)for(var e=b._fullData[d],g=0;3>g;g++){var h=u(b,e,y[g]);if(h&&"log"!==h.type){var k=h._name;h=h._id.substr(1);if("scene"===h.substr(0,5)){if(void 0!==c[h])continue;k=h+"."+k}h=k+".type";void 0===c[k]&&void 0===c[h]&&f.nestedProperty(b.layout,h).set(null)}}}},{"../components/color":591,"../lib":716,"../plots/cartesian/axis_ids":767,"../plots/plots":825,"../registry":845,"fast-isnumeric":228,"gl-mat4/fromQuat":265}],749:[function(a,
q,p){q=a("./plot_api");p.plot=q.plot;p.newPlot=q.newPlot;p.restyle=q.restyle;p.relayout=q.relayout;p.redraw=q.redraw;p.update=q.update;p._guiRestyle=q._guiRestyle;p._guiRelayout=q._guiRelayout;p._guiUpdate=q._guiUpdate;p._storeDirectGUIEdit=q._storeDirectGUIEdit;p.react=q.react;p.extendTraces=q.extendTraces;p.prependTraces=q.prependTraces;p.addTraces=q.addTraces;p.deleteTraces=q.deleteTraces;p.moveTraces=q.moveTraces;p.purge=q.purge;p.addFrames=q.addFrames;p.deleteFrames=q.deleteFrames;p.animate=
q.animate;p.setPlotConfig=q.setPlotConfig;p.toImage=a("./to_image");p.validate=a("./validate");p.downloadImage=a("../snapshot/download");a=a("./template_api");p.makeTemplate=a.makeTemplate;p.validateTemplate=a.validateTemplate},{"../snapshot/download":847,"./plot_api":751,"./template_api":756,"./to_image":757,"./validate":758}],750:[function(a,q,p){var n=a("../lib/is_plain_object"),k=a("../lib/noop"),m=a("../lib/loggers"),h=a("../lib/search").sorterAsc,b=a("../registry");p.containerArrayMatch=a("./container_array_match");
var g=p.isAddVal=function(b){return"add"===b||n(b)},e=p.isRemoveVal=function(b){return null===b||"remove"===b};p.applyContainerArrayChanges=function(a,l,f,d,c){var r=l.astr,t=b.getComponentMethod(r,"supplyLayoutDefaults"),n=b.getComponentMethod(r,"draw"),p=b.getComponentMethod(r,"drawOne");d=d.replot||d.recalc||t===k||n===k;var q=a.layout,A=a._fullLayout;if(f[""]){1<Object.keys(f).length&&m.warn("Full array edits are incompatible with other edits",r);p=f[""][""];if(e(p))l.set(null);else if(Array.isArray(p))l.set(p);
else return m.warn("Unrecognized full array edit value",r,p),!0;if(d)return!1;t(q,A);n(a);return!0}var z=Object.keys(f).map(Number).sort(h),x=l.get(),C=x||[],B=c(A,r).get(),D=[],G=-1,E=C.length,F;for(F=0;F<z.length;F++){var L=z[F];var J=f[L];var H=Object.keys(J);var K=J[""];var M=g(K);if(0>L||L>C.length-(M?0:1))m.warn("index out of range",r,L);else if(void 0!==K)1<H.length&&m.warn("Insertion \x26 removal are incompatible with edits to the same index.",r,L),e(K)?D.push(L):M?("add"===K&&(K={}),C.splice(L,
0,K),B&&B.splice(L,0,{})):m.warn("Unrecognized full object edit value",r,L,K),-1===G&&(G=L);else for(K=0;K<H.length;K++)M=r+"["+L+"].",c(C[L],H[K],M).set(J[H[K]])}for(F=D.length-1;0<=F;F--)C.splice(D[F],1),B&&B.splice(D[F],1);C.length?x||l.set(C):l.set(null);if(d)return!1;t(q,A);if(p!==k){if(-1===G)l=z;else{E=Math.max(C.length,E);l=[];for(F=0;F<z.length;F++){L=z[F];if(L>=G)break;l.push(L)}for(F=G;F<E;F++)l.push(F)}for(F=0;F<l.length;F++)p(a,l[F])}else n(a);return!0}},{"../lib/is_plain_object":717,
"../lib/loggers":720,"../lib/noop":725,"../lib/search":735,"../registry":845,"./container_array_match":746}],751:[function(a,q,p){function n(b){var a=b._fullLayout;a._redrawFromAutoMarginCount?a._redrawFromAutoMarginCount--:b.emit("plotly_afterplot")}function k(b,a){try{b._fullLayout._paper.style("background",a)}catch(Na){R.error(Na)}}function m(b,a){a=ha.combine(a,"white");k(b,a)}function h(b,a){if(!b._context){b._context=R.extendDeep({},xa);var c=Y.select("base");b._context._baseUrl=c.size()&&c.attr("href")?
window.location.href.split("#")[0]:""}var d=b._context;if(a){var e=Object.keys(a);for(c=0;c<e.length;c++){var f=e[c];"editable"!==f&&"edits"!==f&&f in d&&(d[f]="setBackground"===f&&"opaque"===a[f]?m:a[f])}a.plot3dPixelRatio&&!d.plotGlPixelRatio&&(d.plotGlPixelRatio=d.plot3dPixelRatio);f=a.editable;if(void 0!==f)for(d.editable=f,e=Object.keys(d.edits),c=0;c<e.length;c++)d.edits[e[c]]=f;if(a.edits)for(e=Object.keys(a.edits),c=0;c<e.length;c++)f=e[c],f in d.edits&&(d.edits[f]=a.edits[f]);d._exportedPlot=
a._exportedPlot}d.staticPlot&&(d.editable=!1,d.edits={},d.autosizable=!1,d.scrollZoom=!1,d.doubleClick=!1,d.showTips=!1,d.showLink=!1,d.displayModeBar=!1);"hover"!==d.displayModeBar||Z||(d.displayModeBar=!0);if("transparent"===d.setBackground||"function"!==typeof d.setBackground)d.setBackground=k;d._hasZeroHeight=d._hasZeroHeight||0===b.clientHeight;d._hasZeroWidth=d._hasZeroWidth||0===b.clientWidth;c=d.scrollZoom;b=d._scrollZoom={};if(!0===c)b.cartesian=1,b.gl3d=1,b.geo=1,b.mapbox=1;else if("string"===
typeof c)for(a=c.split("+"),c=0;c<a.length;c++)b[a[c]]=1;else!1!==c&&(b.gl3d=1,b.geo=1,b.mapbox=1)}function b(b,a,c){var d=Y.select(b).selectAll(".plot-container").data([0]);d.enter().insert("div",":first-child").classed("plot-container plotly",!0);d=d.selectAll(".svg-container").data([0]);d.enter().append("div").classed("svg-container",!0).style("position","relative");d.html("");a&&(b.data=a);c&&(b.layout=c);ma.manager.fillLayout(b);d.style({width:b._fullLayout.width+"px",height:b._fullLayout.height+
"px"});b.framework=ma.manager.framework(b);b.framework({data:b.data,layout:b.layout},d.node());b.framework.setUndoPoint();d=b.framework.svg();a=1;c=b._fullLayout.title?b._fullLayout.title.text:"";""!==c&&c||(a=0);var e=function(){this.call(ka.convertToTspans,b)};d=d.select(".title-group text").call(e);if(b._context.edits.titleText){var f=R._(b,"Click to enter Plot title");c&&c!==f||(a=.2,d.attr({"data-unformatted":f}).text(f).style({opacity:a}).on("mouseover.opacity",function(){Y.select(this).transition().duration(100).style("opacity",
1)}).on("mouseout.opacity",function(){Y.select(this).transition().duration(1E3).style("opacity",0)}));var g=function(){this.call(ka.makeEditable,{gd:b}).on("edit",function(a){b.framework({layout:{title:{text:a}}});this.text(a).call(e);this.call(g)}).on("cancel",function(){var b=this.attr("data-unformatted");this.text(b).call(e)})};d.call(g)}b._context.setBackground(b,b._fullLayout.paper_bgcolor);da.addLinks(b);return Promise.resolve()}function g(b,a){a+=1;var c=[],d;for(d=0;d<b.length;d++){var e=
b[d];0>e?c.push(a+e):c.push(e)}return c}function e(b,a,c){var d;for(d=0;d<a.length;d++){var e=a[d];if(e!==parseInt(e,10))throw Error("all values in "+c+" must be integers");if(e>=b.data.length||e<-b.data.length)throw Error(c+" must be valid indices for gd.data.");if(-1<a.indexOf(e,d+1)||0<=e&&-1<a.indexOf(-b.data.length+e)||0>e&&-1<a.indexOf(b.data.length+e))throw Error("each index in "+c+" must be unique.");}}function t(b,a,c){if(!Array.isArray(b.data))throw Error("gd.data must be an array.");if("undefined"===
typeof a)throw Error("currentIndices is a required argument.");Array.isArray(a)||(a=[a]);e(b,a,"currentIndices");"undefined"===typeof c||Array.isArray(c)||(c=[c]);"undefined"!==typeof c&&e(b,c,"newIndices");if("undefined"!==typeof c&&a.length!==c.length)throw Error("current and new indices must be of equal length.");}function l(b,a,c){if(!Array.isArray(b.data))throw Error("gd.data must be an array.");if("undefined"===typeof a)throw Error("traces must be defined.");Array.isArray(a)||(a=[a]);for(b=
0;b<a.length;b++){var d=a[b];if("object"!==typeof d||Array.isArray(d)||null===d)throw Error("all values in traces array must be non-array objects");}"undefined"===typeof c||Array.isArray(c)||(c=[c]);if("undefined"!==typeof c&&c.length!==a.length)throw Error("if indices is specified, traces.length must equal indices.length");}function f(b,a,c,d,f){var h=R.isPlainObject(d);if(!Array.isArray(b.data))throw Error("gd.data must be an array");if(!R.isPlainObject(a))throw Error("update must be a key:value object");
if("undefined"===typeof c)throw Error("indices must be an integer or array of integers");e(b,c,"indices");for(var k in a){if(!Array.isArray(a[k])||a[k].length!==c.length)throw Error("attribute "+k+" must be an array of length equal to indices array length");if(h&&!(k in d&&Array.isArray(d[k])&&d[k].length===a[k].length))throw Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object");}h=c;k=R.isPlainObject(d);c=
[];Array.isArray(h)||(h=[h]);h=g(h,b.data.length-1);for(var l in a)for(var r=0;r<h.length;r++){var m=b.data[h[r]];var t=U(m,l);m=t.get();var n=a[l][r];if(!R.isArrayOrTypedArray(n))throw Error("attribute: "+l+" index: "+r+" must be an array");if(!R.isArrayOrTypedArray(m))throw Error("cannot extend missing or non-array attribute: "+l);if(m.constructor!==n.constructor)throw Error("cannot extend array with an array of a different type: "+l);var u=k?d[l][r]:d;ca(u)||(u=-1);c.push({prop:t,target:m,insert:n,
maxp:Math.floor(u)})}b={};a={};for(d=0;d<c.length;d++)l=c[d].prop,h=f(c[d].target,c[d].insert,c[d].maxp),l.set(h[0]),Array.isArray(b[l.astr])||(b[l.astr]=[]),b[l.astr].push(h[1]),Array.isArray(a[l.astr])||(a[l.astr]=[]),a[l.astr].push(c[d].target.length);return{update:b,maxPoints:a}}function d(b,a){var c=new b.constructor(b.length+a.length);c.set(b);c.set(a,b.length);return c}function c(b,a,e,g){b=R.getGraphDiv(b);var h=f(b,a,e,g,function(b,a,c){if(R.isTypedArray(b))if(0>c){var e=new b.constructor(0);
b=d(b,a);if(0>c)var f=b;else f=e,e=b}else if(f=new b.constructor(c),e=new b.constructor(b.length+a.length-c),c===a.length)f.set(a),e.set(b);else if(c<a.length)c=a.length-c,f.set(a.subarray(c)),e.set(b),e.set(a.subarray(0,c),b.length);else{c-=a.length;var g=b.length-c;f.set(b.subarray(g));f.set(a,c);e.set(b.subarray(0,g))}else f=b.concat(a),e=0<=c&&c<f.length?f.splice(0,f.length-c):[];return[f,e]}),k=p.redraw(b);ea.add(b,p.prependTraces,[b,h.update,e,h.maxPoints],c,arguments);return k}function r(b,
a,c,e){b=R.getGraphDiv(b);var g=f(b,a,c,e,function(b,a,c){if(R.isTypedArray(b))if(0>=c){var e=new b.constructor(0);b=d(a,b);if(0>c)var f=b;else f=e,e=b}else f=new b.constructor(c),e=new b.constructor(b.length+a.length-c),c===a.length?(f.set(a),e.set(b)):c<a.length?(c=a.length-c,f.set(a.subarray(0,c)),e.set(a.subarray(c)),e.set(b,c)):(c-=a.length,f.set(a),f.set(b.subarray(0,c),a.length),e.set(b.subarray(c)));else f=a.concat(b),e=0<=c&&c<f.length?f.splice(c,f.length):[];return[f,e]}),h=p.redraw(b);
ea.add(b,p.extendTraces,[b,g.update,c,g.maxPoints],r,arguments);return h}function u(b,a,c){b=R.getGraphDiv(b);var d=[],e=p.deleteTraces,f=[b,d],g=[b,a],h;l(b,a,c);Array.isArray(a)||(a=[a]);a=a.map(function(b){return R.extendFlat({},b)});sa.cleanData(a);for(h=0;h<a.length;h++)b.data.push(a[h]);for(h=0;h<a.length;h++)d.push(-a.length+h);if("undefined"===typeof c)return a=p.redraw(b),ea.add(b,e,f,u,g),a;Array.isArray(c)||(c=[c]);try{t(b,d,c)}catch(cb){throw b.data.splice(b.data.length-a.length,a.length),
cb;}ea.startSequence(b);ea.add(b,e,f,u,g);a=p.moveTraces(b,d,c);ea.stopSequence(b);return a}function v(b,a){b=R.getGraphDiv(b);var c=[],d=p.addTraces,f=[b,c,a],h=[b,a],k;if("undefined"===typeof a)throw Error("indices must be an integer or array of integers.");Array.isArray(a)||(a=[a]);e(b,a,"indices");a=g(a,b.data.length-1);a.sort(R.sorterDes);for(k=0;k<a.length;k+=1){var l=b.data.splice(a[k],1)[0];c.push(l)}a=p.redraw(b);ea.add(b,d,f,v,h);return a}function w(b,a,c){b=R.getGraphDiv(b);var d=[],e=
[],f=[b,c,a],h=[b,a,c],k;t(b,a,c);a=Array.isArray(a)?a:[a];if("undefined"===typeof c)for(c=[],k=0;k<a.length;k++)c.push(-a.length+k);c=Array.isArray(c)?c:[c];a=g(a,b.data.length-1);c=g(c,b.data.length-1);for(k=0;k<b.data.length;k++)-1===a.indexOf(k)&&d.push(b.data[k]);for(k=0;k<a.length;k++)e.push({newIndex:c[k],trace:b.data[a[k]]});e.sort(function(b,a){return b.newIndex-a.newIndex});for(k=0;k<e.length;k+=1)d.splice(e[k].newIndex,0,e[k].trace);b.data=d;a=p.redraw(b);ea.add(b,w,f,w,h);return a}function y(b,
a,c,d){b=R.getGraphDiv(b);sa.clearPromiseQueue(b);var e={};if("string"===typeof a)e[a]=c;else if(R.isPlainObject(a))e=R.extendFlat({},a),void 0===d&&(d=c);else return R.warn("Restyle fail.",a,c,d),Promise.reject();Object.keys(e).length&&(b.changed=!0);a=sa.coerceTraceIndices(b,d);var f=C(b,e,a);e=f.flags;e.calc&&(b.calcdata=void 0);e.clearAxisTypes&&sa.clearAxisTypes(b,a,{});a=[];e.fullReplot?a.push(p.plot):(a.push(da.previousPromises),da.supplyDefaults(b),e.markerSize&&(da.doCalcdata(b),E(a)),e.style&&
a.push(W.doTraceStyle),e.colorbars&&a.push(W.doColorBars),a.push(n));a.push(da.rehover,da.redrag);ea.add(b,y,[b,f.undoit,f.traces],y,[b,f.redoit,f.traces]);(e=R.syncOrAsync(a,b))&&e.then||(e=Promise.resolve());return e.then(function(){b.emit("plotly_restyle",f.eventData);return b})}function A(b){return void 0===b?null:b}function z(b,a){return a?function(a,c,d){var e=U(a,c),f=e.set;e.set=function(a){x((d||"")+c,e.get(),a,b);f(a)};return e}:U}function x(b,a,c,d){if(Array.isArray(a)||Array.isArray(c)){var e=
Array.isArray(a)?a:[];c=Array.isArray(c)?c:[];a=Math.max(e.length,c.length);for(var f=0;f<a;f++)x(b+"["+f+"]",e[f],c[f],d)}else if(R.isPlainObject(a)||R.isPlainObject(c))for(e in a=R.isPlainObject(a)?a:{},c=R.isPlainObject(c)?c:{},f=R.extendFlat({},a,c),f)x(b+"."+e,a[e],c[e],d);else void 0===d[b]&&(d[b]=A(a))}function C(b,a,c){function d(){return c.map(function(){})}function e(b){b=aa.id2name(b);-1===Q.indexOf(b)&&Q.push(b)}function f(b){return"LAYOUT"+b+".autorange"}function g(b){return"LAYOUT"+
b+".range"}function h(b){for(var a=b;a<t.length;a++)if(t[a]._input===n[b])return t[a]}function k(e,f,g){if(Array.isArray(e))e.forEach(function(b){k(b,f,g)});else if(!(e in a||sa.hasParent(a,e))){if("LAYOUT"===e.substr(0,6))var l=v(b.layout,e.replace("LAYOUT",""));else{l=c[g];var r=m._tracePreGUI[h(l)._fullInput.uid];l=z(r,u)(n[l],e)}e in y||(y[e]=d());void 0===y[e][g]&&(y[e][g]=A(l.get()));void 0!==f&&l.set(f)}}function l(b){return function(a){return t[a][b]}}function r(b){return function(a,d){return!1===
a?t[c[d]][b]:null}}var m=b._fullLayout,t=b._fullData,n=b.data,u=m._guiEditing,v=z(m._preGUI,u),p=R.extendDeepAll({},a),q;B(a);var w=za.traceFlags(),x={},y={};for(E in a){if(sa.hasParent(a,E))throw Error("cannot set "+E+" and a parent attribute simultaneously");var C=a[E],D;if("autobinx"===E||"autobiny"===E){var E=E.charAt(E.length-1)+"bins";C=Array.isArray(C)?C.map(r(E)):!1===C?c.map(l(E)):null}x[E]=C;if("LAYOUT"===E.substr(0,6)){var H=v(b.layout,E.replace("LAYOUT",""));y[E]=[A(H.get())];H.set(Array.isArray(C)?
C[0]:C);w.calc=!0}else{y[E]=d();for(q=0;q<c.length;q++){var I=n[c[q]];var G=h(c[q]);H=z(m._tracePreGUI[G._fullInput.uid],u)(I,E);var N=H.get();var F=Array.isArray(C)?C[q%C.length]:C;if(void 0!==F){var M=H.parts[H.parts.length-1],K=(D=E.substr(0,E.length-M.length-1))?D+".":"",O=D?U(G,D).get():G;if((D=la.getTraceValObject(G,H.parts))&&D.impliedEdits&&null!==F)for(var J in D.impliedEdits)k(R.relativeAttr(E,J),D.impliedEdits[J],q);else if("thicknessmode"!==M&&"lenmode"!==M||N===F||"fraction"!==F&&"pixels"!==
F||!O)"type"!==E||"pie"===F===("pie"===N)&&"funnelarea"===F===("funnelarea"===N)||(K="x",O="y","bar"!==F&&"bar"!==N||"h"!==I.orientation||(K="y",O="x"),R.swapAttrs(I,["?","?src"],"labels",K),R.swapAttrs(I,["d?","?0"],"label",K),R.swapAttrs(I,["?","?src"],"values",O),"pie"===N||"funnelarea"===N?(U(I,"marker.color").set(U(I,"marker.colors").get()),m._pielayer.selectAll("g.trace").remove()):fa.traceIs(I,"cartesian")&&U(I,"marker.colors").set(U(I,"marker.color").get()));else{var L=m._size,P=O.orient;
P="top"===P||"bottom"===P;"thicknessmode"===M?(M=P?L.h:L.w,k(K+"thickness",O.thickness*("fraction"===F?1/M:M),q)):(M=P?L.w:L.h,k(K+"len",O.len*("fraction"===F?1/M:M),q))}y[E][q]=A(N);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(E)){if("orientation"===E){if(H.set(F),N=I.x&&!I.y?"h":"v",(H.get()||N)===G.orientation)continue}else"orientationaxes"===E&&(I.orientation={v:"h",h:"v"}[G.orientation]);sa.swapXYData(I);w.calc=w.clearAxisTypes=!0}else-1!==da.dataArrayContainers.indexOf(H.parts[0])?
(sa.manageArrayContainers(H,F,y),w.calc=!0):(D?D.arrayOk&&!fa.traceIs(G,"regl")&&(R.isArrayOrTypedArray(F)||R.isArrayOrTypedArray(N))?w.calc=!0:za.update(w,D):w.calc=!0,H.set(F))}}-1!==["swapxyaxes","orientationaxes"].indexOf(E)&&aa.swap(b,c);"orientationaxes"===E&&(q=U(b.layout,"hovermode"),"x"===q.get()?q.set("y"):"y"===q.get()&&q.set("x"));if(-1!==["orientation","type"].indexOf(E)){var Q=[];for(q=0;q<c.length;q++)C=n[c[q]],fa.traceIs(C,"cartesian")&&(e(C.xaxis||"x"),e(C.yaxis||"y"));k(Q.map(f),
!0,0);k(Q.map(g),[0,1],0)}}}if(w.calc||w.plot)w.fullReplot=!0;return{flags:w,undoit:y,redoit:x,traces:c,eventData:R.extendDeepNoArrays([],[p,c])}}function B(b){function a(a,c){b[c]=b[a];delete b[a]}var c=R.counterRegex("axis",".title",!1,!1),d=/colorbar\.title$/,e=Object.keys(b),f;for(f=0;f<e.length;f++){var g=e[f];var h=b[g];"title"!==g&&!c.test(g)&&!d.test(g)||"string"!==typeof h&&"number"!==typeof h?-1<g.indexOf("titlefont")?a(g,g.replace("titlefont","title.font")):-1<g.indexOf("titleposition")?
a(g,g.replace("titleposition","title.position")):-1<g.indexOf("titleside")?a(g,g.replace("titleside","title.side")):-1<g.indexOf("titleoffset")&&a(g,g.replace("titleoffset","title.offset")):a(g,g.replace("title","title.text"))}}function D(b,a,c){b=R.getGraphDiv(b);sa.clearPromiseQueue(b);if(b.framework&&b.framework.isPolar)return Promise.resolve(b);var d={};if("string"===typeof a)d[a]=c;else if(R.isPlainObject(a))d=R.extendFlat({},a);else return R.warn("Relayout fail.",a,c),Promise.reject();Object.keys(d).length&&
(b.changed=!0);var e=F(b,d);a=e.flags;a.calc&&(b.calcdata=void 0);c=[da.previousPromises];a.layoutReplot?c.push(W.layoutReplot):Object.keys(d).length&&(G(b,a,e)||da.supplyDefaults(b),a.legend&&c.push(W.doLegend),a.layoutstyle&&c.push(W.layoutStyles),a.axrange&&E(c,e.rangesAltered),a.ticks&&c.push(W.doTicksRelayout),a.modebar&&c.push(W.doModeBar),a.camera&&c.push(W.doCamera),a.colorbars&&c.push(W.doColorBars),c.push(n));c.push(da.rehover,da.redrag);ea.add(b,D,[b,e.undoit],D,[b,e.redoit]);(d=R.syncOrAsync(c,
b))&&d.then||(d=Promise.resolve(b));return d.then(function(){b.emit("plotly_relayout",e.eventData);return b})}function G(b,a,c){var d=b._fullLayout;if(!a.axrange)return!1;for(var e in a)if("axrange"!==e&&a[e])return!1;for(var f in c.rangesAltered)if(c=aa.id2name(f),a=b.layout[c],c=d[c],c.autorange=a.autorange,c.range=a.range.slice(),c.cleanRange(),c._matchGroup)for(var g in c._matchGroup)g!==f&&(a=d[aa.id2name(g)],a.autorange=c.autorange,a.range=c.range.slice(),a._input.range=c.range.slice());return!0}
function E(b,a){b.push(ia,W.doAutoRangeAndConstraints,a?function(b){var c=[],d=!0,e;for(e in a){var f=aa.getFromId(b,e);c.push(e);if(f._matchGroup)for(var g in f._matchGroup)a[g]||c.push(g);f.automargin&&(d=!1)}return aa.draw(b,c,{skipTitle:d})}:function(b){return aa.draw(b,"redraw")},W.drawData,W.finalDraw)}function F(b,a){function c(b,d){if(Array.isArray(b))b.forEach(function(b){c(b,d)});else if(!(b in a||sa.hasParent(a,b))){var f=g(e,b);b in u||(u[b]=A(f.get()));void 0!==d&&f.set(d)}}function d(b){b=
aa.name2id(b.split(".")[0]);v[b]=1;return b}var e=b.layout,f=b._fullLayout,g=z(f._preGUI,f._guiEditing),h=Object.keys(a),k=aa.list(b),l=R.extendDeepAll({},a),r={},m,t;B(a);h=Object.keys(a);for(m=0;m<h.length;m++)if(0===h[m].indexOf("allaxes")){for(t=0;t<k.length;t++){var n=k[t]._id.substr(1);n=-1!==n.indexOf("scene")?n+".":"";n=h[m].replace("allaxes",n+k[t]._name);a[n]||(a[n]=a[h[m]])}delete a[h[m]]}h=za.layoutFlags();k={};var u={},v={},p,q;for(q in a){if(sa.hasParent(a,q))throw Error("cannot set "+
q+" and a parent attribute simultaneously");m=g(e,q);t=a[q];for(n=m.parts.length-1;0<n&&"string"!==typeof m.parts[n];)n--;var w=m.parts[n],x=m.parts[n-1]+"."+w,y=m.parts.slice(0,n).join("."),C=U(b.layout,y).get(),D=U(f,y).get(),E=m.get();if(void 0!==t){k[q]=t;u[q]="reverse"===w?t:A(E);if((n=la.getLayoutValObject(f,m.parts))&&n.impliedEdits&&null!==t)for(var H in n.impliedEdits)c(R.relativeAttr(q,H),n.impliedEdits[H]);-1!==["width","height"].indexOf(q)?t?(c("autosize",null),x="height"===q?"width":
"height",c(x,f[x])):f[q]=b._initialAutoSize[q]:"autosize"===q?(c("width",t?null:f.width),c("height",t?null:f.height)):x.match(ua)?(d(x),U(f,y+"._inputRange").set(null)):x.match(Aa)?(d(x),U(f,y+"._inputRange").set(null),x=U(f,y).get(),x._inputDomain&&(x._input.domain=x._inputDomain.slice())):x.match(wa)&&U(f,y+"._inputDomain").set(null);if("type"===w){var I=C;x="linear"===D.type&&"log"===t;var G="log"===D.type&&"linear"===t;x||G?(I&&I.range?D.autorange?x&&(I.range=I.range[1]>I.range[0]?[1,2]:[2,1]):
(G=I.range[0],I=I.range[1],x?(0>=G&&0>=I&&c(y+".autorange",!0),0>=G?G=I/1E6:0>=I&&(I=G/1E6),c(y+".range[0]",Math.log(G)/Math.LN10),c(y+".range[1]",Math.log(I)/Math.LN10)):(c(y+".range[0]",Math.pow(10,G)),c(y+".range[1]",Math.pow(10,I)))):c(y+".autorange",!0),Array.isArray(f._subplots.polar)&&f._subplots.polar.length&&f[m.parts[0]]&&"radialaxis"===m.parts[1]&&delete f[m.parts[0]]._subplot.viewInitial["radialaxis.range"],fa.getComponentMethod("annotations","convertCoords")(b,D,t,c),fa.getComponentMethod("images",
"convertCoords")(b,D,t,c)):(c(y+".autorange",!0),c(y+".range",null));U(f,y+"._inputRange").set(null)}else w.match(Da)&&(x=U(f,q).get(),(I=(t||{}).type)&&"-"!==I||(I="linear"),fa.getComponentMethod("annotations","convertCoords")(b,x,I,c),fa.getComponentMethod("images","convertCoords")(b,x,I,c));if(x=ya.containerArrayMatch(q)){var N=x.array;m=x.index;w=x.property;n=n||{editType:"calc"};""!==m&&""===w&&(ya.isAddVal(t)?u[q]=null:ya.isRemoveVal(t)?u[q]=(U(e,N).get()||[])[m]:R.warn("unrecognized full object value",
a));za.update(h,n);r[N]||(r[N]={});(n=r[N][m])||(n=r[N][m]={});n[w]=t;delete a[q]}else"reverse"===w?(C.range?C.range.reverse():(c(y+".autorange",!0),C.range=[1,0]),D.autorange?h.calc=!0:h.plot=!0):(f._has("scatter-like")&&f._has("regl")&&"dragmode"===q&&("lasso"===t||"select"===t)&&"lasso"!==E&&"select"!==E?h.plot=!0:f._has("gl2d")?h.plot=!0:n?za.update(h,n):h.calc=!0,m.set(t))}}for(N in r)ya.applyContainerArrayChanges(b,g(e,N),r[N],h,g)||(h.plot=!0);f=f._axisConstraintGroups||[];for(p in v)for(m=
0;m<f.length;m++)if(r=f[m],r[p]){h.calc=!0;for(var F in r)v[F]||(aa.getFromId(b,F)._constraintShrinkable=!0)}if(L(b)||a.height||a.width)h.plot=!0;if(h.plot||h.calc)h.layoutReplot=!0;return{flags:h,rangesAltered:v,undoit:u,redoit:k,eventData:l}}function L(b){var a=b._fullLayout,c=a.width,d=a.height;b.layout.autosize&&da.plotAutoSize(b,b.layout,a);return a.width!==c||a.height!==d}function J(b,a,c,d){b=R.getGraphDiv(b);sa.clearPromiseQueue(b);if(b.framework&&b.framework.isPolar)return Promise.resolve(b);
R.isPlainObject(a)||(a={});R.isPlainObject(c)||(c={});Object.keys(a).length&&(b.changed=!0);Object.keys(c).length&&(b.changed=!0);d=sa.coerceTraceIndices(b,d);var e=C(b,R.extendFlat({},a),d);a=e.flags;var f=F(b,R.extendFlat({},c)),g=f.flags;if(a.calc||g.calc)b.calcdata=void 0;a.clearAxisTypes&&sa.clearAxisTypes(b,d,c);c=[];g.layoutReplot?c.push(W.layoutReplot):a.fullReplot?c.push(p.plot):(c.push(da.previousPromises),G(b,g,f)||da.supplyDefaults(b),a.style&&c.push(W.doTraceStyle),(a.colorbars||g.colorbars)&&
c.push(W.doColorBars),g.legend&&c.push(W.doLegend),g.layoutstyle&&c.push(W.layoutStyles),g.axrange&&E(c,f.rangesAltered),g.ticks&&c.push(W.doTicksRelayout),g.modebar&&c.push(W.doModeBar),g.camera&&c.push(W.doCamera),c.push(n));c.push(da.rehover,da.redrag);ea.add(b,J,[b,e.undoit,f.undoit,e.traces],J,[b,e.redoit,f.redoit,e.traces]);(c=R.syncOrAsync(c,b))&&c.then||(c=Promise.resolve(b));return c.then(function(){b.emit("plotly_update",{data:e.eventData,layout:f.eventData});return b})}function H(b){return function(a){a._fullLayout._guiEditing=
!0;var c=b.apply(null,arguments);a._fullLayout._guiEditing=!1;return c}}function K(b,a){for(var c=0;c<a.length;c++){var d=a[c],e=b.match(d.pattern);if(e)return{head:e[1],attr:d.attr}}}function M(b,a){var c=U(a,b).get();if(void 0!==c)return c;b=b.split(".");for(b.pop();1<b.length;)if(b.pop(),c=U(a,b.join(".")+".uirevision").get(),void 0!==c)return c;return a.uirevision}function I(b,a){var c=R.isPlainObject(b),d=Array.isArray(b);return c||d?(c&&R.isPlainObject(a)||d&&Array.isArray(a))&&JSON.stringify(b)===
JSON.stringify(a):b===a}function N(b,a,c,d){var e=d._preGUI,f,g,h,k=[],l={};for(f in e){if(g=K(f,Ma)){if(g=g.attr||g.head+".uirevision",(g=(h=U(d,g).get())&&M(g,a))&&g===h){h=e[f];null===h&&(h=void 0);g=U(a,f);var r=g.get();if(I(r,h)){void 0===r&&"autorange"===f.substr(f.length-9)&&k.push(f.substr(0,f.length-10));g.set(A(U(d,f).get()));continue}}}else R.warn("unrecognized GUI edit: "+f);delete e[f];"range["===f.substr(f.length-8,6)&&(l[f.substr(0,f.length-9)]=1)}for(e=0;e<k.length;e++)h=k[e],l[h]&&
(h=U(a,h).get())&&delete h.autorange;k=d._tracePreGUI;for(var m in k)for(f in l=k[m],e=null,l){if(!e){a:{for(e=0;e<c.length;e++)if(c[e]._fullInput.uid===m)break a;e=-1}if(0>e){delete k[m];break}var t=c[e]._fullInput;a:{e=t.index;for(h=0;h<b.length;h++)if(b[h].uid===m){e=h;break a}e=!b[e]||b[e].uid?-1:e}if(0>e){delete k[m];break}e=b[e]}if(g=K(f,ba)){if(g.attr?g=(h=U(d,g.attr).get())&&M(g.attr,a):(h=t.uirevision,g=e.uirevision,void 0===g&&(g=a.uirevision)),g&&g===h&&(h=l[f],null===h&&(h=void 0),g=U(e,
f),r=g.get(),I(r,h))){g.set(A(U(t,f).get()));continue}}else R.warn("unrecognized GUI edit: "+f+" in trace uid "+m);delete l[f]}}function O(b,a,c,d,e,f){var g=a.length===c.length;if(!e&&!g)return{fullReplot:!0,calc:!0};var h=za.traceFlags();h.arrays={};h.nChanges=0;h.nChangesAnim=0;d={getValObject:function(b){b=la.getTraceValObject(k,b);!k._module.animatable&&b.anim&&(b.anim=!1);return b},flags:h,immutable:d,transition:e,newDataRevision:f,gd:b};f={};for(b=0;b<a.length;b++)if(c[b]){var k=c[b]._fullInput;
da.hasMakesDataTransform(k)&&(k=c[b]);f[k.uid]||(f[k.uid]=1,Q(a[b]._fullInput,k,[],d))}if(h.calc||h.plot)h.fullReplot=!0;e&&h.nChanges&&h.nChangesAnim&&(h.anim=h.nChanges===h.nChangesAnim&&g?"all":"some");return h}function P(b,a,c,d,e){var f=za.layoutFlags();f.arrays={};f.rangesAltered={};f.nChanges=0;f.nChangesAnim=0;Q(a,c,[],{getValObject:function(b){return la.getLayoutValObject(c,b)},flags:f,immutable:d,transition:e,gd:b});if(f.plot||f.calc)f.layoutReplot=!0;e&&f.nChanges&&f.nChangesAnim&&(f.anim=
f.nChanges===f.nChangesAnim?"all":"some");return f}function Q(b,a,c,d){function e(){var b=f.editType;if(r&&-1!==b.indexOf("arraydraw"))R.pushUnique(k.arrays[r],m);else{za.update(k,f);"none"!==b&&k.nChanges++;d.transition&&f.anim&&k.nChangesAnim++;if(ua.test(v)||Aa.test(v))k.rangesAltered[c[0]]=1;wa.test(v)&&U(a,"_inputDomain").set(null);"datarevision"===g&&(k.newDataRevision=1)}}var f,g,h=d.getValObject,k=d.flags,l=d.immutable,r=d.inArray,m=d.arrayIndex;for(g in b){if(k.calc&&!d.transition)return;
var t=b[g],n=a[g],u=c.concat(g);var v=u.join(".");if("_"!==g.charAt(0)&&"function"!==typeof t&&t!==n){if(("tick0"===g||"dtick"===g)&&"geo"!==c[0]){var p=a.tickmode;if("auto"===p||"array"===p||!p)continue}if(!("range"===g&&a.autorange||("zmin"===g||"zmax"===g)&&"contourcarpet"===a.type||!(f=h(u))||f._compareAsJSON&&JSON.stringify(t)===JSON.stringify(n))){p=f.valType;var q="data_array"===f.valType||f.arrayOk,w=Array.isArray(t),x=Array.isArray(n);if(w&&x){var z="_input_"+g,y=b[z];z=a[z];if(Array.isArray(y)&&
y===z)continue}if(void 0===n)q&&w?k.calc=!0:e();else if(f._isLinkedToArray){q=[];w=!1;r||(k.arrays[g]=q);x=Math.min(t.length,n.length);y=Math.max(t.length,n.length);if(x!==y)if("arraydraw"===f.editType)w=!0;else{e();continue}for(p=0;p<x;p++)Q(t[p],n[p],u.concat(p),R.extendFlat({inArray:g,arrayIndex:p},d));if(w)for(p=x;p<y;p++)q.push(p)}else!p&&R.isPlainObject(t)?Q(t,n,u,d):q?w&&x?(l&&(k.calc=!0),(l||d.newDataRevision)&&e()):w!==x?k.calc=!0:e():w&&x?(t.length!==n.length||String(t)!==String(n))&&e():
e()}}}for(g in a)if(!(g in b||"_"===g.charAt(0)||"function"===typeof a[g]))if(f=h(c.concat(g)),("data_array"===f.valType||f.arrayOk)&&Array.isArray(a[g])){k.calc=!0;break}else e()}function T(b,a){for(var c in b)if("_"!==c.charAt(0)){var d=b[c],e=a[c];if(d!==e)if(R.isPlainObject(d)&&R.isPlainObject(e)){if(T(d,e))return!0}else if(Array.isArray(d)&&Array.isArray(e)){if(d.length!==e.length)return!0;for(var f=0;f<d.length;f++)if(d[f]!==e[f])if(R.isPlainObject(d[f])&&R.isPlainObject(e[f])){if(T(d[f],e[f]))return!0}else return!0}else return!0}}
function V(b){var a=Y.select(b),c=b._fullLayout;c._container=a.selectAll(".plot-container").data([0]);c._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0);c._paperdiv=c._container.selectAll(".svg-container").data([0]);c._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative");c._glcontainer=c._paperdiv.selectAll(".gl-container").data([{}]);c._glcontainer.enter().append("div").classed("gl-container",!0);c._paperdiv.selectAll(".main-svg").remove();
c._paperdiv.select(".modebar-container").remove();c._paper=c._paperdiv.insert("svg",":first-child").classed("main-svg",!0);c._toppaper=c._paperdiv.append("svg").classed("main-svg",!0);c._modebardiv=c._paperdiv.append("div");c._hoverpaper=c._paperdiv.append("svg").classed("main-svg",!0);if(!c._uid){var d={};Y.selectAll("defs").each(function(){this.id&&(d[this.id.split("-")[1]]=1)});c._uid=R.randstr(d)}c._paperdiv.selectAll(".main-svg").attr(oa.svgAttrs);c._defs=c._paper.append("defs").attr("id","defs-"+
c._uid);c._clips=c._defs.append("g").classed("clips",!0);c._topdefs=c._toppaper.append("defs").attr("id","topdefs-"+c._uid);c._topclips=c._topdefs.append("g").classed("clips",!0);c._bgLayer=c._paper.append("g").classed("bglayer",!0);c._draggers=c._paper.append("g").classed("draglayer",!0);a=c._paper.append("g").classed("layer-below",!0);c._imageLowerLayer=a.append("g").classed("imagelayer",!0);c._shapeLowerLayer=a.append("g").classed("shapelayer",!0);c._cartesianlayer=c._paper.append("g").classed("cartesianlayer",
!0);c._polarlayer=c._paper.append("g").classed("polarlayer",!0);c._ternarylayer=c._paper.append("g").classed("ternarylayer",!0);c._geolayer=c._paper.append("g").classed("geolayer",!0);c._funnelarealayer=c._paper.append("g").classed("funnelarealayer",!0);c._pielayer=c._paper.append("g").classed("pielayer",!0);c._treemaplayer=c._paper.append("g").classed("treemaplayer",!0);c._sunburstlayer=c._paper.append("g").classed("sunburstlayer",!0);c._indicatorlayer=c._toppaper.append("g").classed("indicatorlayer",
!0);c._glimages=c._paper.append("g").classed("glimages",!0);a=c._toppaper.append("g").classed("layer-above",!0);c._imageUpperLayer=a.append("g").classed("imagelayer",!0);c._shapeUpperLayer=a.append("g").classed("shapelayer",!0);c._infolayer=c._toppaper.append("g").classed("infolayer",!0);c._menulayer=c._toppaper.append("g").classed("menulayer",!0);c._zoomlayer=c._toppaper.append("g").classed("zoomlayer",!0);c._hoverlayer=c._hoverpaper.append("g").classed("hoverlayer",!0);c._modebardiv.classed("modebar-container",
!0).style("position","absolute").style("top","0px").style("right","0px");b.emit("plotly_framework")}var Y=a("d3"),ca=a("fast-isnumeric"),Z=a("has-hover"),R=a("../lib"),U=R.nestedProperty,X=a("../lib/events"),ea=a("../lib/queue"),fa=a("../registry"),la=a("./plot_schema"),da=a("../plots/plots"),ma=a("../plots/polar/legacy"),aa=a("../plots/cartesian/axes"),na=a("../components/drawing"),ha=a("../components/color"),ja=a("../plots/cartesian/graph_interact").initInteractions,oa=a("../constants/xmlns_namespaces"),
ka=a("../lib/svg_text_utils"),ia=a("../plots/cartesian/select").clearSelect,xa=a("./plot_config").dfltConfig,ya=a("./manage_arrays"),sa=a("./helpers"),W=a("./subroutines"),za=a("./edit_types"),Da=a("../plots/cartesian/constants").AX_NAME_PATTERN,ra=0,ua=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Aa=/^[xyz]axis[0-9]*\.autorange$/,wa=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/,Ma=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,
attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,
attr:"editrevision"}],ba=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];p.animate=function(b,a,c){function d(b,a){var c=0;return function(){if(b&&++c===a)return b()}}b=R.getGraphDiv(b);if(!R.isPlotDiv(b))throw Error("This element is not a Plotly plot: "+
b+". It's likely that you've failed to create a plot before animating it. For more details, see https://plot.ly/javascript/animations/");var e=b._transitionData;e._frameQueue||(e._frameQueue=[]);c=da.supplyAnimationDefaults(c);var f=c.transition,g=c.frame;void 0===e._frameWaitingCnt&&(e._frameWaitingCnt=0);return new Promise(function(h,k){function l(){if(0!==e._frameQueue.length){for(;e._frameQueue.length;){var a=e._frameQueue.pop();if(a.onInterrupt)a.onInterrupt()}b.emit("plotly_animationinterrupted",
[])}}function r(a){if(0!==a.length){for(var l=0;l<a.length;l++){var r="byname"===a[l].type?da.computeFrame(b,a[l].name):a[l].data;var m=l;m=Array.isArray(g)?m>=g.length?g[0]:g[m]:g;var n=l;n=Array.isArray(f)?n>=f.length?f[0]:f[n]:f;n.duration=Math.min(n.duration,m.duration);r={frame:r,name:a[l].name,frameOpts:m,transitionOpts:n};l===a.length-1&&(r.onComplete=d(h,2),r.onInterrupt=k);e._frameQueue.push(r)}"immediate"===c.mode&&(e._lastFrameAt=-Infinity);e._animationRaf||t()}}function m(){if(e._currentFrame&&
e._currentFrame.onComplete)e._currentFrame.onComplete();var a=e._currentFrame=e._frameQueue.shift();if(a){var c=a.name?a.name.toString():null;b._fullLayout._currentFrame=c;e._lastFrameAt=Date.now();e._timeToNext=a.frameOpts.duration;da.transition(b,a.frame.data,a.frame.layout,sa.coerceTraceIndices(b,a.frame.traces),a.frameOpts,a.transitionOpts).then(function(){if(a.onComplete)a.onComplete()});b.emit("plotly_animatingframe",{name:c,frame:a.frame,animation:{frame:a.frameOpts,transition:a.transitionOpts}})}else b.emit("plotly_animated"),
window.cancelAnimationFrame(e._animationRaf),e._animationRaf=null}function t(){b.emit("plotly_animating");e._lastFrameAt=-Infinity;e._timeToNext=0;e._runningTransitions=0;e._currentFrame=null;var a=function(){e._animationRaf=window.requestAnimationFrame(a);Date.now()-e._lastFrameAt>e._timeToNext&&m()};a()}function n(b){Array.isArray(f)?b.transitionOpts=u>=f.length?f[u]:f[0]:b.transitionOpts=f;u++;return b}var u=0,v,p=[],q=void 0===a||null===a;var w=Array.isArray(a);if(!q&&!w&&R.isPlainObject(a))p.push({type:"object",
data:n(R.extendFlat({},a))});else if(q||-1!==["string","number"].indexOf(typeof a))for(w=0;w<e._frames.length;w++)(v=e._frames[w])&&(q||String(v.group)===String(a))&&p.push({type:"byname",name:String(v.name),data:n({name:v.name})});else if(w)for(w=0;w<a.length;w++)v=a[w],-1!==["number","string"].indexOf(typeof v)?(v=String(v),p.push({type:"byname",name:v,data:n({name:v})})):R.isPlainObject(v)&&p.push({type:"object",data:n(R.extendFlat({},v))});for(w=0;w<p.length;w++)if(v=p[w],"byname"===v.type&&!e._frameHash[v.data.name]){R.warn('animate failure: frame not found: "'+
v.data.name+'"');k();return}-1!==["next","immediate"].indexOf(c.mode)&&l();"reverse"===c.direction&&p.reverse();var x=b._fullLayout._currentFrame;if(x&&c.fromcurrent){q=-1;for(w=0;w<p.length;w++)if(v=p[w],"byname"===v.type&&v.name===x){q=w;break}if(0<q&&q<p.length-1){x=[];for(w=0;w<p.length;w++)v=p[w],("byname"!==p[w].type||w>q)&&x.push(v);p=x}}0<p.length?r(p):(b.emit("plotly_animated"),h())})};p.addFrames=function(b,a,c){b=R.getGraphDiv(b);if(null===a||void 0===a)return Promise.resolve();if(!R.isPlotDiv(b))throw Error("This element is not a Plotly plot: "+
b+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plot.ly/javascript/animations/");var d,e=b._transitionData._frames,f=b._transitionData._frameHash;if(!Array.isArray(a))throw Error("addFrames failure: frameList must be an Array of frame definitions"+a);var g=e.length+2*a.length;var h=[],k={};for(d=a.length-1;0<=d;d--)if(R.isPlainObject(a[d])){var l=a[d].name;var r=(f[l]||k[l]||{}).name,m=a[d].name,t=f[r]||k[r];r&&m&&"number"===typeof m&&t&&5>
ra&&(ra++,R.warn('addFrames: overwriting frame "'+(f[r]||k[r]).name+'" with a frame whose name of type "number" also equates to "'+r+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===ra&&R.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed."));k[l]={name:l};h.push({frame:da.supplyFrameDefaults(a[d]),index:c&&
void 0!==c[d]&&null!==c[d]?c[d]:g+d})}h.sort(function(b,a){return b.index>a.index?-1:b.index<a.index?1:0});a=[];c=[];k=e.length;for(d=h.length-1;0<=d;d--){g=h[d].frame;"number"===typeof g.name&&R.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings");if(!g.name)for(;f[g.name="frame "+b._transitionData._counter++];);if(f[g.name]){for(l=0;l<e.length&&(e[l]||{}).name!==g.name;l++);a.push({type:"replace",index:l,value:g});c.unshift({type:"replace",
index:l,value:e[l]})}else l=Math.max(0,Math.min(h[d].index,k)),a.push({type:"insert",index:l,value:g}),c.unshift({type:"delete",index:l}),k++}e=d=da.modifyFrames;f=[b,c];h=[b,a];ea&&ea.add(b,d,f,e,h);return da.modifyFrames(b,a)};p.deleteFrames=function(b,a){b=R.getGraphDiv(b);if(!R.isPlotDiv(b))throw Error("This element is not a Plotly plot: "+b);var c,d=b._transitionData._frames,e=[],f=[];if(!a)for(a=[],c=0;c<d.length;c++)a.push(c);a=a.slice();a.sort();for(c=a.length-1;0<=c;c--){var g=a[c];e.push({type:"delete",
index:g});f.unshift({type:"insert",index:g,value:d[g]})}c=a=da.modifyFrames;f=[b,f];g=[b,e];ea&&ea.add(b,a,f,c,g);return da.modifyFrames(b,e)};p.addTraces=u;p.deleteTraces=v;p.extendTraces=c;p.moveTraces=w;p.prependTraces=r;p.newPlot=function(b,a,c,d){b=R.getGraphDiv(b);da.cleanPlot([],{},b._fullData||[],b._fullLayout||{});da.purge(b);return p.plot(b,a,c,d)};p.plot=function(a,c,d,e){function f(){for(var b=v._basePlotModules,c=0;c<b.length;c++)b[c].drawFramework&&b[c].drawFramework(a);!v._glcanvas&&
v._has("gl")&&(v._glcanvas=v._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(b){return b.key}),v._glcanvas.enter().append("canvas").attr("class",function(b){return"gl-canvas gl-canvas-"+b.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));if(v._glcanvas&&(v._glcanvas.attr("width",v.width).attr("height",v.height),(b=v._glcanvas.data()[0].regl)&&
(Math.floor(v.width)!==b._gl.drawingBufferWidth||Math.floor(v.height)!==b._gl.drawingBufferHeight)))if(x)R.error("WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.");else return R.log("WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug. Clearing graph and plotting again."),da.cleanPlot([],{},a._fullData,v),da.supplyDefaults(a),v=a._fullLayout,da.doCalcdata(a),x++,f();"h"===v.modebar.orientation?v._modebardiv.style("height",null).style("width",
"100%"):v._modebardiv.style("width",null).style("height",v.height+"px");return da.previousPromises(a)}function g(){da.clearAutoMarginIds(a);W.drawMarginPushers(a);aa.allowAutoMargin(a);if(v._has("pie"))for(var b=a._fullData,c=0;c<b.length;c++){var d=b[c];"pie"===d.type&&d.automargin&&da.allowAutoMargin(a,"pie."+d.uid+".automargin")}da.doAutoMargin(a);return da.previousPromises(a)}function k(){if(q)return R.syncOrAsync([fa.getComponentMethod("shapes","calcAutorange"),fa.getComponentMethod("annotations",
"calcAutorange"),l],a);l()}function l(){a._transitioning||(W.doAutoRangeAndConstraints(a),u&&aa.saveRangeInitial(a),fa.getComponentMethod("rangeslider","calcAutorange")(a))}function r(){return aa.draw(a,u?"":"redraw")}a=R.getGraphDiv(a);X.init(a);if(R.isPlainObject(c)){var m=c;c=m.data;d=m.layout;e=m.config;var t=m.frames}if(!1===X.triggerHandler(a,"plotly_beforeplot",[c,d,e]))return Promise.reject();c||d||R.isPlotDiv(a)||R.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",
a);h(a,e);d||(d={});Y.select(a).classed("js-plotly-plot",!0);na.makeTester();Array.isArray(a._promises)||(a._promises=[]);var u=0===(a.data||[]).length&&Array.isArray(c);Array.isArray(c)&&(sa.cleanData(c),u?a.data=c:a.data.push.apply(a.data,c),a.empty=!1);if(!a.layout||u)a.layout=sa.cleanLayout(d);da.supplyDefaults(a);var v=a._fullLayout;e=v._has("cartesian");if(!v._has("polar")&&c&&c[0]&&c[0].r)return R.log("Legacy polar charts are deprecated!"),b(a,c,d);v._replotting=!0;u&&V(a);a.framework!==V&&
(a.framework=V,V(a));na.initGradients(a);u&&aa.saveShowSpikeInitial(a);var q=!a.calcdata||a.calcdata.length!==(a._fullData||[]).length;q&&da.doCalcdata(a);for(c=0;c<a.calcdata.length;c++)a.calcdata[c][0].trace=a._fullData[c];a._context.responsive?a._responsiveChartHandler||(a._responsiveChartHandler=function(){R.isHidden(a)||da.resize(a)},window.addEventListener("resize",a._responsiveChartHandler)):R.clearResponsive(a);var w=R.extendFlat({},v._size),x=0;c=[da.previousPromises,function(){if(t)return p.addFrames(a,
t)},f,g,function(){if(da.didMarginChange(w,v._size))return R.syncOrAsync([g,W.layoutStyles],a)}];e&&c.push(k);c.push(W.layoutStyles);e&&c.push(r);c.push(W.drawData,W.finalDraw,ja,da.addLinks,da.rehover,da.redrag,da.doAutoMargin,da.previousPromises);(c=R.syncOrAsync(c,a))&&c.then||(c=Promise.resolve());return c.then(function(){n(a);return a})};p.purge=function(b){b=R.getGraphDiv(b);var a=b._fullLayout||{};da.cleanPlot([],{},b._fullData||[],a);da.purge(b);X.purge(b);a._container&&a._container.remove();
delete b._context;return b};p.react=function(b,a,c,d){function e(){return p.addFrames(b,r)}var f;b=R.getGraphDiv(b);sa.clearPromiseQueue(b);var g=b._fullData,k=b._fullLayout;if(R.isPlotDiv(b)&&g&&k){if(R.isPlainObject(a)){var l=a;a=l.data;c=l.layout;d=l.config;var r=l.frames}l=!1;d&&(l=R.extendDeep({},b._context),b._context=void 0,h(b,d),l=T(l,b._context));b.data=a||[];sa.cleanData(b.data);b.layout=c||{};sa.cleanLayout(b.layout);N(b.data,b.layout,g,k);da.supplyDefaults(b,{skipUpdateCalc:!0});var m=
b._fullData;d=b._fullLayout;var t=void 0===d.datarevision,u=d.transition,v=P(b,k,d,t,u),q=O(b,g,m,t,u,v.newDataRevision);L(b)&&(v.layoutReplot=!0);q.calc||v.calc?b.calcdata=void 0:da.supplyDefaultsUpdateCalc(b.calcdata,m);g=[];r&&(b._transitionData={},da.createTransitionData(b),g.push(e));if(d.transition&&!l&&(q.anim||v.anim))da.doCalcdata(b),W.doAutoRangeAndConstraints(b),g.push(function(){return da.transitionFromReact(b,q,v,k)});else if(q.fullReplot||v.layoutReplot||l)b._fullLayout._skipDefaults=
!0,g.push(p.plot);else{for(f in v.arrays)if(l=v.arrays[f],l.length)if(d=fa.getComponentMethod(f,"drawOne"),d!==R.noop)for(m=0;m<l.length;m++)d(b,l[m]);else{l=fa.getComponentMethod(f,"draw");if(l===R.noop)throw Error("cannot draw components: "+f);l(b)}g.push(da.previousPromises);q.style&&g.push(W.doTraceStyle);(q.colorbars||v.colorbars)&&g.push(W.doColorBars);v.legend&&g.push(W.doLegend);v.layoutstyle&&g.push(W.layoutStyles);v.axrange&&E(g);v.ticks&&g.push(W.doTicksRelayout);v.modebar&&g.push(W.doModeBar);
v.camera&&g.push(W.doCamera);g.push(n)}g.push(da.rehover,da.redrag);(f=R.syncOrAsync(g,b))&&f.then||(f=Promise.resolve(b))}else f=p.newPlot(b,a,c,d);return f.then(function(){b.emit("plotly_react",{data:a,layout:c});return b})};p.redraw=function(b){b=R.getGraphDiv(b);if(!R.isPlotDiv(b))throw Error("This element is not a Plotly plot: "+b);sa.cleanData(b.data);sa.cleanLayout(b.layout);b.calcdata=void 0;return p.plot(b).then(function(){b.emit("plotly_redraw");return b})};p.relayout=D;p.restyle=y;p.setPlotConfig=
function(b){return R.extendFlat(xa,b)};p.update=J;p._guiRelayout=H(D);p._guiRestyle=H(y);p._guiUpdate=H(J);p._storeDirectGUIEdit=function(b,a,c){for(var d in c){var e=U(b,d);x(d,e.get(),c[d],a)}}},{"../components/color":591,"../components/drawing":612,"../constants/xmlns_namespaces":693,"../lib":716,"../lib/events":706,"../lib/queue":731,"../lib/svg_text_utils":740,"../plots/cartesian/axes":764,"../plots/cartesian/constants":770,"../plots/cartesian/graph_interact":773,"../plots/cartesian/select":781,
"../plots/plots":825,"../plots/polar/legacy":833,"../registry":845,"./edit_types":747,"./helpers":748,"./manage_arrays":750,"./plot_config":752,"./plot_schema":753,"./subroutines":755,d3:165,"fast-isnumeric":228,"has-hover":411}],752:[function(a,q,p){function n(a,m){for(var h in a){var b=a[h];b.valType?m[h]=b.dflt:(m[h]||(m[h]={}),n(b,m[h]))}}a={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:"https://plot.ly"},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",
dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},
frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",
dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",
dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}};p={};n(a,p);
q.exports={configAttributes:a,dfltConfig:p}},{}],753:[function(a,q,p){function n(b,a){var c,d,e=b._basePlotModules;if(e){for(c=0;c<e.length;c++){var f=e[c];if(f.attrRegex&&f.attrRegex.test(a)){if(f.layoutAttrOverrides)return f.layoutAttrOverrides;if(!g&&f.layoutAttributes)var g=f.layoutAttributes}if((f=f.baseLayoutAttrOverrides)&&a in f)return f[a]}if(g)return g}if(e=b._modules)for(c=0;c<e.length;c++)if((b=e[c].layoutAttributes)&&a in b)return b[a];for(d in r.componentsRegistry){f=r.componentsRegistry[d];
if("colorscale"===f.name&&0===a.indexOf("coloraxis"))return f.layoutAttributes[a];if(!f.schema&&a===f.name)return f.layoutAttributes}return a in v?v[a]:"radialaxis"===a||"angularaxis"===a?x[a]:x.layout[a]||!1}function k(b,a,c){if(!b)return!1;if(b._isLinkedToArray)if(m(a[c]))c++;else if(c<a.length)return!1;for(;c<a.length;c++){var d=b[a[c]];if(G(d))b=d;else break;if(c===a.length-1)break;if(b._isLinkedToArray){if(c++,!m(a[c]))return!1}else if("info_array"===b.valType){c++;d=a[c];if(!m(d))return!1;var e=
b.items;if(Array.isArray(e)){if(d>=e.length)return!1;if(2===b.dimensions){c++;if(a.length===c)break;b=a[c];if(!m(b))return!1;b=e[d][b]}else b=e[d]}else b=e}}return b}function m(b){return b===Math.round(b)&&0<=b}function h(b){if("area"===b){var a={attributes:z};var c={}}else a=r.modules[b]._module,c=a.basePlotModule;var d={type:null},e=D({},u),f=D({},a.attributes);p.crawl(f,function(b,a,c,d,g){F(e,g).set(void 0);void 0===b&&F(f,g).set(void 0)});D(d,e);r.traceIs(b,"noOpacity")&&delete d.opacity;r.traceIs(b,
"showLegend")||(delete d.showlegend,delete d.legendgroup);r.traceIs(b,"noHover")&&(delete d.hoverinfo,delete d.hoverlabel);a.selectPoints||delete d.selectedpoints;D(d,f);c.attributes&&D(d,c.attributes);d.type=b;b={meta:a.meta||{},categories:a.categories||{},animatable:!!a.animatable,type:b,attributes:t(d)};a.layoutAttributes&&(c={},D(c,a.layoutAttributes),b.layoutAttributes=t(c));a.animatable||p.crawl(b,function(b){p.isValObject(b)&&"anim"in b&&delete b.anim});return b}function b(){var b={},a;D(b,
v);for(a in r.subplotsRegistry){var d=r.subplotsRegistry[a];if(d.layoutAttributes)if(Array.isArray(d.attr))for(var e=0;e<d.attr.length;e++)c(b,d,d.attr[e]);else c(b,d,"subplot"===d.attr?d.name:d.attr)}B(b,{radialaxis:x.radialaxis,angularaxis:x.angularaxis});B(b,x.layout);for(a in r.componentsRegistry)if(d=r.componentsRegistry[a],(e=d.schema)&&(e.subplots||e.layout)){if((d=e.subplots)&&d.xaxis&&!d.yaxis)for(var f in d.xaxis)delete b.yaxis[f]}else"colorscale"===d.name?D(b,d.layoutAttributes):d.layoutAttributes&&
(e=d.layoutAttributes,d=F(b,d.name),d.set(D(d.get()||{},e)));return{layoutAttributes:t(b)}}function g(b){var a=D({},r.transformsRegistry[b].attributes);Object.keys(r.componentsRegistry).forEach(function(c){var d=r.componentsRegistry[c];d.schema&&d.schema.transforms&&d.schema.transforms[b]&&Object.keys(d.schema.transforms[b]).forEach(function(c){var e=d.schema.transforms[b][c];c=F(a,c);c.set(D(c.get()||{},e))})});return{attributes:t(a)}}function e(){var b={frames:D({},w)};t(b);return b.frames}function t(b){l(b);
f(b);d(b);return b}function l(b){p.crawl(b,function(b,a,c){p.isValObject(b)?"data_array"===b.valType?(b.role="data",c[a+"src"]={valType:"string",editType:"none"}):!0===b.arrayOk&&(c[a+"src"]={valType:"string",editType:"none"}):G(b)&&(b.role="object")})}function f(b){p.crawl(b,function(b,a,c){if(b){var d=b._isLinkedToArray;d&&(delete b._isLinkedToArray,c[a]={items:{}},c[a].items[d]=b,c[a].role="object")}})}function d(b){function a(b){for(var c in b)if(G(b[c]))a(b[c]);else if(Array.isArray(b[c]))for(var d=
0;d<b[c].length;d++)a(b[c][d]);else b[c]instanceof RegExp&&(b[c]=b[c].toString())}a(b)}function c(b,a,c){b=F(b,c);a=D({},a.layoutAttributes);a._isSubplotObj=!0;b.set(a)}var r=a("../registry");q=a("../lib");var u=a("../plots/attributes"),v=a("../plots/layout_attributes"),w=a("../plots/frame_attributes"),y=a("../plots/animation_attributes"),A=a("./plot_config").configAttributes,z=a("../plots/polar/legacy/area_attributes"),x=a("../plots/polar/legacy/axis_attributes"),C=a("./edit_types"),B=q.extendFlat,
D=q.extendDeepAll,G=q.isPlainObject,E=q.isArrayOrTypedArray,F=q.nestedProperty,L=q.valObjectMeta,J=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];p.IS_SUBPLOT_OBJ="_isSubplotObj";p.IS_LINKED_TO_ARRAY="_isLinkedToArray";p.DEPRECATED="_deprecated";p.UNDERSCORE_ATTRS=J;p.get=function(){var a={};r.allTypes.concat("area").forEach(function(b){a[b]=h(b)});var c={};Object.keys(r.transformsRegistry).forEach(function(b){c[b]=g(b)});return{defs:{valObjects:L,metaKeys:J.concat(["description",
"role","editType","impliedEdits"]),editType:{traces:C.traces,layout:C.layout},impliedEdits:{}},traces:a,layout:b(),transforms:c,frames:e(),animation:t(y),config:t(A)}};p.crawl=function(b,a,c,d){var e=c||0;d=d||"";Object.keys(b).forEach(function(c){var f=b[c];if(-1===J.indexOf(c)){var g=(d?d+".":"")+c;a(f,c,b,e,g);p.isValObject(f)||G(f)&&"impliedEdits"!==c&&p.crawl(f,a,e+1,g)}})};p.isValObject=function(b){return b&&void 0!==b.valType};p.findArrayAttributes=function(b){function a(b,a,d,h){e=e.slice(0,
h).concat([a]);f=f.slice(0,h).concat([b&&b._isLinkedToArray]);!b||"data_array"!==b.valType&&!0!==b.arrayOk||"colorbar"===e[h-1]&&("ticktext"===a||"tickvals"===a)||c(g,0,"")}function c(b,a,g){b=b[e[a]];g+=e[a];if(a===e.length-1)E(b)&&d.push(h+g);else if(f[a]){if(Array.isArray(b))for(var k=0;k<b.length;k++)G(b[k])&&c(b[k],a+1,g+"["+k+"].")}else G(b)&&c(b,a+1,g+".")}var d=[],e=[],f=[];var g=b;var h="";p.crawl(u,a);b._module&&b._module.attributes&&p.crawl(b._module.attributes,a);if(b=b.transforms)for(var k=
0;k<b.length;k++){var l=b[k],r=l._module;r&&(h="transforms["+k+"].",g=l,p.crawl(r.attributes,a))}return d};p.getTraceValObject=function(b,a){var c=a[0],d=1;if("transforms"===c){if(1===a.length)return u.transforms;c=b.transforms;if(!Array.isArray(c)||!c.length)return!1;d=a[1];if(!m(d)||d>=c.length)return!1;b=(b=(r.transformsRegistry[c[d].type]||{}).attributes)&&b[a[2]];d=3}else if("area"===b.type)b=z[c];else{var e=b._module;e||(e=(r.modules[b.type||u.type.dflt]||{})._module);if(!e)return!1;b=(b=e.attributes)&&
b[c];b||(e=e.basePlotModule)&&e.attributes&&(b=e.attributes[c]);b||(b=u[c])}return k(b,a,d)};p.getLayoutValObject=function(b,a){b=n(b,a[0]);return k(b,a,1)}},{"../lib":716,"../plots/animation_attributes":759,"../plots/attributes":761,"../plots/frame_attributes":791,"../plots/layout_attributes":816,"../plots/polar/legacy/area_attributes":831,"../plots/polar/legacy/axis_attributes":832,"../registry":845,"./edit_types":747,"./plot_config":752}],754:[function(a,q,p){function n(b){"s"!==b.charAt(b.length-
1)&&k.warn("bad argument to arrayDefaultKey: "+b);return b.substr(0,b.length-1)+"defaults"}var k=a("../lib"),m=a("../plots/attributes"),h={name:{valType:"string",editType:"none"},templateitemname:{valType:"string",editType:"calc"}};p.templatedArray=function(b,a){a._isLinkedToArray=b;a.name=h.name;a.templateitemname=h.templateitemname;return a};p.traceTemplater=function(b){var a={},e;for(e in b){var h=b[e];Array.isArray(h)&&h.length&&(a[e]=0)}return{newTrace:function(g){e=k.coerce(g,{},m,"type");g=
{type:e,_template:null};if(e in a){h=b[e];var f=a[e]%h.length;a[e]++;g._template=h[f]}return g}}};p.newContainer=function(b,a,e){var g=b._template;e=g&&(g[a]||e&&g[e]);k.isPlainObject(e)||(e=null);return b[a]={_template:e}};p.arrayTemplater=function(b,a,e){var g=(b=b._template)&&b[n(a)],h=b&&b[a];Array.isArray(h)&&h.length||(h=[]);var f={};return{newItem:function(b){var a={name:b.name,_input:b},d=a.templateitemname=b.templateitemname;if(!d||"string"!==typeof d)return a._template=g,a;for(var k=0;k<
h.length;k++){var l=h[k];if(l.name===d)return f[d]=1,a._template=l,a}a[e]=b[e]||!1;a._template=!1;return a},defaultItems:function(){for(var b=[],a=0;a<h.length;a++){var e=h[a],g=e.name;if(g&&"string"===typeof g&&!f[g]){var k={_template:e,name:g,_input:{_templateitemname:g}};k.templateitemname=e.templateitemname;b.push(k);f[g]=1}}return b}}};p.arrayDefaultKey=n;p.arrayEditor=function(b,a,e){function g(){n={};r&&(n[m]={},n[m].templateitemname=r)}function h(b,a){r?k.nestedProperty(n[m],b).set(a):n[m+
"."+b]=a}function f(){var b=n;g();return b}var d=(k.nestedProperty(b,a).get()||[]).length,c=e._index,r=c>=d&&(e._input||{})._templateitemname;r&&(c=d);var m=a+"["+c+"]",n;g();return{modifyBase:function(b,a){n[b]=a},modifyItem:h,getUpdateObj:f,applyUpdate:function(a,c){a&&h(a,c);a=f();for(var d in a)k.nestedProperty(b,d).set(a[d])}}}},{"../lib":716,"../plots/attributes":761}],755:[function(a,q,p){function n(b,a,c){for(var d=0;d<c.length;d++){var e=c[d][0],f=c[d][1];if(!(e[0]>=b[1]||e[1]<=b[0])&&f[0]<
a[1]&&f[1]>a[0])return!0}return!1}function k(a){function c(b,a,c){var d=b._lw/2;return"x"===b._id.charAt(0)?a?"top"===c?a._offset-x-d:a._offset+a._length+x+d:q.t+q.h*(1-(b.position||0))+d%1:a?"right"===c?a._offset+a._length+x+d:a._offset-x-d:q.l+q.w*(b.position||0)+d%1}function e(b){return"M"+X+","+b+"H"+ea}function g(b){return"M"+R._offset+","+b+"h"+R._length}function h(b){return"M"+b+","+la+"V"+fa}function k(b){return"M"+b+","+U._offset+"v"+U._length}function l(b,a,c){if(!b.showline||C!==b._mainSubplot)return"";
if(!b._anchorAxis)return c(b._mainLinePosition);c=a(b._mainLinePosition);b.mirror&&(c+=a(b._mainMirrorPosition));return c}var v=a._fullLayout,q=v._size,x=q.p,z=y.list(a,"",!0),B,C;v._paperdiv.style({width:a._context.responsive&&v.autosize&&!a._context._hasZeroWidth&&!a.layout.width?"100%":v.width+"px",height:a._context.responsive&&v.autosize&&!a._context._hasZeroHeight&&!a.layout.height?"100%":v.height+"px"}).selectAll(".main-svg").call(u.setSize,v.width,v.height);a._context.setBackground(a,v.paper_bgcolor);
p.drawMainTitle(a);w.manage(a);if(!v._has("cartesian"))return f.previousPromises(a);for(B=0;B<z.length;B++){var P=z[B];var Q=P._anchorAxis;P._linepositions={};P._lw=u.crispRound(a,P.linewidth,1);P._mainLinePosition=c(P,Q,P.side);P._mainMirrorPosition=P.mirror&&Q?c(P,Q,A.OPPOSITE_SIDE[P.side]):null}B=[];Q=[];var T=[],V=1===r.opacity(v.paper_bgcolor)&&1===r.opacity(v.plot_bgcolor)&&v.paper_bgcolor===v.plot_bgcolor;for(C in v._plots)if(P=v._plots[C],P.mainplot)P.bg&&P.bg.remove(),P.bg=void 0;else{var Y=
P.xaxis.domain,ca=P.yaxis.domain,Z=P.plotgroup;n(Y,ca,T)?(Y=Z.node(),P=P.bg=d.ensureSingle(Z,"rect","bg"),Y.insertBefore(P.node(),Y.childNodes[0]),Q.push(C)):(Z.select("rect.bg").remove(),T.push([Y,ca]),V||(B.push(C),Q.push(C)))}P=v._bgLayer.selectAll(".bg").data(B);P.enter().append("rect").classed("bg",!0);P.exit().remove();P.each(function(b){v._plots[b].bg=t.select(this)});for(B=0;B<Q.length;B++){P=v._plots[Q[B]];var R=P.xaxis;var U=P.yaxis;P.bg&&P.bg.call(u.setRect,R._offset-x,U._offset-x,R._length+
2*x,U._length+2*x).call(r.fill,v.plot_bgcolor).style("stroke-width",0)}if(!v._hasOnlyLargeSploms)for(C in v._plots)P=v._plots[C],R=P.xaxis,U=P.yaxis,Q=P.clipId="clip"+v._uid+C+"plot",B=d.ensureSingleById(v._clips,"clipPath",Q,function(b){b.classed("plotclip",!0).append("rect")}),P.clipRect=B.select("rect").attr({width:R._length,height:U._length}),u.setTranslate(P.plot,R._offset,U._offset),P._hasClipOnAxisFalse?B=null:(B=Q,Q=null),u.setClipUrl(P.plot,B,a),P.layerClipId=Q;for(C in v._plots){P=v._plots[C];
R=P.xaxis;U=P.yaxis;V="M0,0";if(m(R,C)){Q=b(R,"left",U,z);var X=R._offset-(Q?x+Q:0);Q=b(R,"right",U,z);var ea=R._offset+R._length+(Q?x+Q:0);B=c(R,U,"bottom");T=c(R,U,"top");Q=!R._anchorAxis||C!==R._mainSubplot;!Q||"allticks"!==R.mirror&&"all"!==R.mirror||(R._linepositions[C]=[B,T]);V=l(R,e,g);Q&&R.showline&&("all"===R.mirror||"allticks"===R.mirror)&&(V+=e(B)+e(T));P.xlines.style("stroke-width",R._lw+"px").call(r.stroke,R.showline?R.linecolor:"rgba(0,0,0,0)")}P.xlines.attr("d",V);V="M0,0";if(m(U,C)){Q=
b(U,"bottom",R,z);var fa=U._offset+U._length+(Q?x:0);Q=b(U,"top",R,z);var la=U._offset-(Q?x:0);B=c(U,R,"left");T=c(U,R,"right");Q=!U._anchorAxis||C!==U._mainSubplot;!Q||"allticks"!==U.mirror&&"all"!==U.mirror||(U._linepositions[C]=[B,T]);V=l(U,h,k);Q&&U.showline&&("all"===U.mirror||"allticks"===U.mirror)&&(V+=h(B)+h(T));P.ylines.style("stroke-width",U._lw+"px").call(r.stroke,U.showline?U.linecolor:"rgba(0,0,0,0)")}P.ylines.attr("d",V)}y.makeClipPaths(a);return f.previousPromises(a)}function m(b,a){return(b.ticks||
b.showline)&&(a===b._mainSubplot||"all"===b.mirror||"allticks"===b.mirror)}function h(b,a,c){if(!c.showline||!c._lw)return!1;if("all"===c.mirror||"allticks"===c.mirror)return!0;var d=c._anchorAxis;if(!d)return!1;var e=A.FROM_BL[a];return c.side===a?d.domain[e]===b.domain[e]:c.mirror&&d.domain[1-e]===b.domain[1-e]}function b(b,a,c,d){if(h(b,a,c))return c._lw;for(var e=0;e<d.length;e++){var f=d[e];if(f._mainAxis===c._mainAxis&&h(b,a,f))return f._lw}return 0}function g(b,a){var c=b.title,d=b._size,e=
0;"start"===a?e=c.pad.l:"end"===a&&(e=-c.pad.r);switch(c.xref){case "paper":return d.l+d.w*c.x+e;default:return b.width*c.x+e}}function e(b,a){var c=b.title,d=b._size,e=0;"0em"!==a&&a?a===A.CAP_SHIFT+"em"&&(e=c.pad.t):e=-c.pad.b;if("auto"===c.y)return d.t/2;switch(c.yref){case "paper":return d.t+d.h-d.h*c.y+e;default:return b.height-b.height*c.y+e}}var t=a("d3"),l=a("../registry"),f=a("../plots/plots"),d=a("../lib"),c=a("../lib/clear_gl_canvases"),r=a("../components/color"),u=a("../components/drawing"),
v=a("../components/titles"),w=a("../components/modebar"),y=a("../plots/cartesian/axes"),A=a("../constants/alignment");q=a("../plots/cartesian/constraints");var z=q.enforce,x=q.clean,C=a("../plots/cartesian/autorange").doAutoRange;p.layoutStyles=function(b){return d.syncOrAsync([f.doAutoMargin,k],b)};p.drawMainTitle=function(b){var a=b._fullLayout;var c=a.title;var f="middle";d.isRightAnchor(c)?f="end":d.isLeftAnchor(c)&&(f="start");c=f;f=a.title;var h="0em";d.isTopAnchor(f)?h=A.CAP_SHIFT+"em":d.isMiddleAnchor(f)&&
(h=A.MID_SHIFT+"em");f=h;v.draw(b,"gtitle",{propContainer:a,propName:"title.text",placeholder:a._dfltTitle.plot,attributes:{x:g(a,c),y:e(a,f),"text-anchor":c,dy:f}})};p.doTraceStyle=function(b){var a=b.calcdata,d=[],e;for(e=0;e<a.length;e++){var g=a[e],h=g[0]||{},k=h.trace||{},r=k._module||{},m=r.arraysToCalcdata;m&&m(g,k);(g=r.editStyle)&&d.push({fn:g,cd0:h})}if(d.length){for(e=0;e<d.length;e++)a=d[e],a.fn(b,a.cd0);c(b);p.redrawReglTraces(b)}f.style(b);l.getComponentMethod("legend","draw")(b);return f.previousPromises(b)};
p.doColorBars=function(b){l.getComponentMethod("colorbar","draw")(b);return f.previousPromises(b)};p.layoutReplot=function(b){var a=b.layout;b.layout=void 0;return l.call("plot",b,"",a)};p.doLegend=function(b){l.getComponentMethod("legend","draw")(b);return f.previousPromises(b)};p.doTicksRelayout=function(b){y.draw(b,"redraw");b._fullLayout._hasOnlyLargeSploms&&(l.subplotsRegistry.splom.updateGrid(b),c(b),p.redrawReglTraces(b));p.drawMainTitle(b);return f.previousPromises(b)};p.doModeBar=function(b){var a=
b._fullLayout;w.manage(b);for(var c=0;c<a._basePlotModules.length;c++){var d=a._basePlotModules[c].updateFx;d&&d(b)}return f.previousPromises(b)};p.doCamera=function(b){b=b._fullLayout;for(var a=b._subplots.gl3d,c=0;c<a.length;c++){var d=b[a[c]];d._scene.setViewport(d)}};p.drawData=function(b){var a=b._fullLayout;c(b);for(var d=a._basePlotModules,e=0;e<d.length;e++)d[e].plot(b);p.redrawReglTraces(b);f.style(b);l.getComponentMethod("shapes","draw")(b);l.getComponentMethod("annotations","draw")(b);
l.getComponentMethod("images","draw")(b);a._replotting=!1;return f.previousPromises(b)};p.redrawReglTraces=function(b){var a=b._fullLayout;if(a._has("regl")){var c=b._fullData;b=[];var e=[],f;a._hasOnlyLargeSploms&&a._splomGrid.draw();for(f=0;f<c.length;f++){var g=c[f];!0===g.visible&&0!==g._length&&("splom"===g.type?a._splomScenes[g.uid].draw():"scattergl"===g.type?d.pushUnique(b,g.xaxis+g.yaxis):"scatterpolargl"===g.type&&d.pushUnique(e,g.subplot))}for(f=0;f<b.length;f++)c=a._plots[b[f]],c._scene&&
c._scene.draw();for(f=0;f<e.length;f++)c=a[e[f]]._subplot,c._scene&&c._scene.draw()}};p.doAutoRangeAndConstraints=function(b){var a=b._fullLayout,c=y.list(b,"",!0);a=a._axisMatchGroups||[];for(var e={},f,g=0;g<c.length;g++)f=c[g],x(b,f),C(b,f),e[f._id]=1;z(b);c=0;a:for(;c<a.length;c++){g=a[c];var h=null,k;for(k in g)if(f=y.getFromId(b,k),e[f._id]){if(!1===f.autorange)continue a;f=d.simpleMap(f.range,f.r2l);h?h[0]<h[1]?(h[0]=Math.min(h[0],f[0]),h[1]=Math.max(h[1],f[1])):(h[0]=Math.max(h[0],f[0]),h[1]=
Math.min(h[1],f[1])):h=f}for(k in g)f=y.getFromId(b,k),f.range=d.simpleMap(h,f.l2r),f._input.range=f.range.slice(),f.setScale()}};p.finalDraw=function(b){l.getComponentMethod("rangeslider","draw")(b);l.getComponentMethod("rangeselector","draw")(b)};p.drawMarginPushers=function(b){l.getComponentMethod("legend","draw")(b);l.getComponentMethod("rangeselector","draw")(b);l.getComponentMethod("sliders","draw")(b);l.getComponentMethod("updatemenus","draw")(b);l.getComponentMethod("colorbar","draw")(b)}},
{"../components/color":591,"../components/drawing":612,"../components/modebar":649,"../components/titles":678,"../constants/alignment":685,"../lib":716,"../lib/clear_gl_canvases":701,"../plots/cartesian/autorange":763,"../plots/cartesian/axes":764,"../plots/cartesian/constraints":771,"../plots/plots":825,"../registry":845,d3:165}],756:[function(a,q,p){function n(b,a){function c(a,c,d){if(l(c)&&l(a))n(a,c);else if(Array.isArray(c)&&Array.isArray(a)){a=r.arrayTemplater({_template:b},d);for(f=0;f<c.length;f++){d=
c[f];var e=a.newItem(d)._template;e&&n(e,d)}a=a.defaultItems();for(f=0;f<a.length;f++)c.push(a[f]._template);for(f=0;f<c.length;f++)delete c[f].templateitemname}}b=t.extendDeep({},b);var d=Object.keys(b).sort(),e,f;for(e=0;e<d.length;e++){var g=d[e],h=b[g];g in a?c(h,a[g],g):a[g]=h;if(k(g)===g)for(var m in a){var u=k(m);m===u||u!==g||m in b||c(h,a[m],g)}}}function k(b){return b.replace(/[0-9]+$/,"")}function m(b,a,c,d,e){var f=e&&c(e),h;for(h in b){var n=b[h],u=g(b,h,d),v=g(b,h,e),p=c(v);if(!p){var q=
k(h);q!==h&&(v=g(b,q,e),p=c(v))}if(!(f&&f===p||!p||p._noTemplating||"data_array"===p.valType||p.arrayOk&&Array.isArray(n)))if(!p.valType&&l(n))m(n,a,c,u,v);else if(p._isLinkedToArray&&Array.isArray(n)){var w=!1;p=0;q={};for(var z=0;z<n.length;z++){var y=n[z];if(l(y)){var A=y.name;A?q[A]||(m(y,a,c,g(n,p,u),g(n,p,v)),p++,q[A]=1):w||(w=r.arrayDefaultKey(h),w=g(b,w,d),A=g(n,p,u),m(y,a,c,A,g(n,p,v)),y=t.nestedProperty(a,A),t.nestedProperty(a,w).set(y.get()),y.set(null),w=!0)}}}else t.nestedProperty(a,
u).set(n)}}function h(b,a){return f.getLayoutValObject(b,t.nestedProperty({},a).parts)}function b(b,a){return f.getTraceValObject(b,t.nestedProperty({},a).parts)}function g(b,a,c){return c?Array.isArray(b)?c+"["+a+"]":c+"."+a:a}function e(b){switch(b.code){case "data":var a="The template has no key data.";break;case "layout":a="The template has no key layout.";break;case "missing":a=b.path?"There are no templates for item "+b.path+" with name "+b.templateitemname:"There are no templates for trace "+
b.index+", of type "+b.traceType+".";break;case "unused":a=b.path?"The template item at "+b.path+" was not used in constructing the plot.":b.dataCount?"Some of the templates of type "+b.traceType+" were not used. The template has "+b.templateCount+" traces, the data only has "+b.dataCount+" of this type.":"The template has "+b.templateCount+" traces of type "+b.traceType+" but there are none in the data.";break;case "reused":a="Some of the templates of type "+b.traceType+" were used more than once. The template has "+
b.templateCount+" traces, the data has "+b.dataCount+" of this type."}b.msg=a;return b}var t=a("../lib"),l=t.isPlainObject,f=a("./plot_schema"),d=a("../plots/plots"),c=a("../plots/attributes"),r=a("./plot_template"),u=a("./plot_config").dfltConfig;p.makeTemplate=function(a){a=t.isPlainObject(a)?a:t.getGraphDiv(a);a=t.extendDeep({_context:u},{data:a.data,layout:a.layout});d.supplyDefaults(a);var e=a.data||[],f=a.layout||{};f._basePlotModules=a._fullLayout._basePlotModules;f._modules=a._fullLayout._modules;
var g={data:{},layout:{}};e.forEach(function(a){var d={};m(a,d,b.bind(null,a));a=t.coerce(a,{},c,"type");var e=g.data[a];e||(e=g.data[a]=[]);e.push(d)});m(f,g.layout,h.bind(null,f));delete g.layout.template;a=f.template;if(l(a)){e=a.layout;var k;l(e)&&n(e,g.layout);var r=a.data;if(l(r)){for(k in g.data)if(e=r[k],Array.isArray(e)){var v=g.data[k];var p=v.length;f=e.length;for(a=0;a<p;a++)n(e[a%f],v[a]);for(a=p;a<f;a++)v.push(t.extendDeep({},e[a]))}for(k in r)k in g.data||(g.data[k]=t.extendDeep([],
r[k]))}}return g};p.validateTemplate=function(b,a){function c(b,a){for(var d in b)if("_"!==d.charAt(0)&&l(b[d])){var e=k(d),f=[],h;for(h=0;h<a.length;h++)f.push(g(b,d,a[h])),e!==d&&f.push(g(b,e,a[h]));for(h=0;h<f.length;h++)p[f[h]]=1;c(b[d],f)}}function f(b,a){for(var c in b)if(-1===c.indexOf("defaults")&&l(b[c])){var d=g(b,c,a);p[d]?f(b[c],d):v.push({code:"unused",path:d})}}function h(b,a){for(var c in b)if("_"!==c.charAt(0)){var d=b[c],e=g(b,c,a);if(l(d))Array.isArray(b)&&!1===d._template&&d.templateitemname&&
v.push({code:"missing",path:e,templateitemname:d.templateitemname}),h(d,e);else{var f;if(f=Array.isArray(d))a:{f=d;for(var k=0;k<f.length;k++)if(l(f[k])){f=!0;break a}f=void 0}f&&h(d,e)}}}var r=t.extendDeep({},{_context:u,data:b.data,layout:b.layout}),m=r.layout||{};l(a)||(a=m.template||{});var n=a.layout;b=a.data;var v=[];r.layout=m;r.layout.template=a;d.supplyDefaults(r);a=r._fullLayout;r=r._fullData;var p={};l(n)?(c(a,["layout"]),f(n,"layout")):v.push({code:"layout"});if(l(b)){n={};for(m=0;m<r.length;m++){var q=
r[m];var w=q.type;n[w]=(n[w]||0)+1;q._fullInput._template||v.push({code:"missing",index:q._fullInput.index,traceType:w})}for(w in b)m=b[w].length,q=n[w]||0,m>q?v.push({code:"unused",traceType:w,templateCount:m,dataCount:q}):q>m&&v.push({code:"reused",traceType:w,templateCount:m,dataCount:q})}else v.push({code:"data"});h({data:r,layout:a},"");if(v.length)return v.map(e)}},{"../lib":716,"../plots/attributes":761,"../plots/plots":825,"./plot_config":752,"./plot_schema":753,"./plot_template":754}],757:[function(a,
q,p){var n=a("fast-isnumeric"),k=a("./plot_api"),m=a("../lib"),h=a("../snapshot/helpers"),b=a("../snapshot/tosvg"),g=a("../snapshot/svgtoimg"),e={format:{valType:"enumerated",values:["png","jpeg","webp","svg"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};q.exports=function(a,l){function f(b){return!(b in l)||m.validate(l[b],e[b])}function d(b,a){return m.coerce(l,
q,e,b,a)}function c(){return new Promise(function(b){setTimeout(b,h.getDelay(G._fullLayout))})}function r(){return new Promise(function(a,c){var d=b(G,A,C),e=G._fullLayout.width,f=G._fullLayout.height;k.purge(G);document.body.removeChild(G);if("svg"===A)return D?a(d):a(h.encodeSVG(d));var l=document.createElement("canvas");l.id=m.randstr();g({format:A,width:e,height:f,scale:C,canvas:l,svg:d,promise:!0}).then(a).catch(c)})}l=l||{};if(m.isPlainObject(a)){var t=a.data||[];var v=a.layout||{};var p=a.config||
{};a={}}else a=m.getGraphDiv(a),t=m.extendDeep([],a.data),v=m.extendDeep({},a.layout),p=a._context,a=a._fullLayout||{};if(!f("width")&&null!==l.width||!f("height")&&null!==l.height)throw Error("Height and width should be pixel values.");if(!f("format"))throw Error("Image format is not jpeg, png, svg or webp.");var q={},A=d("format"),z=d("width"),x=d("height"),C=d("scale"),B=d("setBackground"),D=d("imageDataOnly"),G=document.createElement("div");G.style.position="absolute";G.style.left="-5000px";document.body.appendChild(G);
var E=m.extendFlat({},v);z?E.width=z:null===l.width&&n(a.width)&&(E.width=a.width);x?E.height=x:null===l.height&&n(a.height)&&(E.height=a.height);var F=m.extendFlat({},p,{_exportedPlot:!0,staticPlot:!0,setBackground:B}),L=h.getRedrawFunc(G);return new Promise(function(b,a){k.plot(G,t,E,F).then(L).then(c).then(r).then(function(a){a=D?a.replace(h.IMAGE_URL_PREFIX,""):a;b(a)}).catch(function(b){a(b)})})}},{"../lib":716,"../snapshot/helpers":849,"../snapshot/svgtoimg":851,"../snapshot/tosvg":853,"./plot_api":751,
"fast-isnumeric":228}],758:[function(a,q,p){function n(a,c,e,g,k,r){r=r||[];for(var t=Object.keys(a),u=0;u<t.length;u++){var v=t[u];if("transforms"!==v){var p=r.slice();p.push(v);var q=a[v],w=c[v];var z=e;if(v in z)var y=z[v];else y=h(v),y=z[y.keyMinusId];var A=(y||{}).valType,H="info_array"===A,K="colorscale"===A;z=(y||{}).items;var M=e;var I=v,N=h(I),O=N.keyMinusId;N=N.id;M=O in M&&M[O]._isSubplotObj&&N?!0:I in M;if(M)if(l(q)&&l(w)&&"any"!==A)n(q,w,y,g,k,p);else if(H&&f(q))if(q.length>w.length&&
g.push(m("unused",k,p.concat(w.length))),v=w.length,(A=Array.isArray(z))&&(v=Math.min(v,z.length)),2===y.dimensions)for(H=0;H<v;H++)if(f(q[H]))for(q[H].length>w[H].length&&g.push(m("unused",k,p.concat(H,w[H].length))),O=w[H].length,y=0;y<(A?Math.min(O,z[H].length):O);y++)K=A?z[H][y]:z,M=q[H][y],I=w[H][y],b.validate(M,K)?I!==M&&I!==+M&&g.push(m("dynamic",k,p.concat(H,y),M,I)):g.push(m("value",k,p.concat(H,y),M));else g.push(m("array",k,p.concat(H),q[H]));else for(H=0;H<v;H++)K=A?z[H]:z,M=q[H],I=w[H],
b.validate(M,K)?I!==M&&I!==+M&&g.push(m("dynamic",k,p.concat(H),M,I)):g.push(m("value",k,p.concat(H),M));else if(y.items&&!H&&f(q)){z=z[Object.keys(z)[0]];v=[];for(y=0;y<w.length;y++)H=w[y]._index||y,A=p.slice(),A.push(H),l(q[H])&&l(w[y])&&(v.push(H),H=q[H],K=w[y],l(H)&&!1!==H.visible&&!1===K.visible?g.push(m("invisible",k,A)):n(H,K,z,g,k,A));for(y=0;y<q.length;y++)A=p.slice(),A.push(y),l(q[y])?-1===v.indexOf(y)&&g.push(m("unused",k,A)):g.push(m("object",k,A,q[y]))}else!l(q)&&l(w)?g.push(m("object",
k,p,q)):d(q)||!d(w)||H||K?v in c?b.validate(q,y)?"enumerated"===y.valType&&(y.coerceNumber&&q!==+w||q!==w)&&g.push(m("dynamic",k,p,q,w)):g.push(m("value",k,p,q)):g.push(m("unused",k,p,q)):g.push(m("array",k,p,q));else g.push(m("schema",k,p))}}return g}function k(b){return f(b)?"In data trace "+b[1]+", ":"In "+b+", "}function m(a,d,e,g,h){e=e||"";if(f(d)){var k=d[0];var l=d[1]}else k=d,l=null;var r=e;if(f(r)){for(var m="",t=0;t<r.length;t++){var n=r[t];m="number"===typeof n?m.substr(0,m.length-1)+
"["+n+"]":m+n;t<r.length-1&&(m+=".")}r=m}else r=String(r);d=c[a](d,r,g,h);b.log(d);return{code:a,container:k,trace:l,path:e,astr:r,msg:d}}function h(b){b=b.match(r);return{keyMinusId:b&&b[1],id:b&&b[2]}}var b=a("../lib"),g=a("../plots/plots"),e=a("./plot_schema"),t=a("./plot_config").dfltConfig,l=b.isPlainObject,f=Array.isArray,d=b.isArrayOrTypedArray;q.exports=function(a,c){var d=e.get(),h=[],k={_context:b.extendFlat({},t)};if(f(a)){k.data=b.extendDeep([],a);var r=a}else k.data=[],r=[],h.push(m("array",
"data"));if(l(c)){k.layout=b.extendDeep({},c);var u=c}else k.layout={},u={},1<arguments.length&&h.push(m("object","layout"));g.supplyDefaults(k);for(var v=k._fullData,p=r.length,q=0;q<p;q++){var G=r[q],E=["data",q];if(l(G)){var F=v[q],L=F.type,J=d.traces[L].attributes;J.type={valType:"enumerated",values:[L]};!1===F.visible&&!1!==G.visible&&h.push(m("invisible",E));n(G,F,J,h,E);G=G.transforms;F=F.transforms;if(G)for(f(G)||h.push(m("array",E,["transforms"])),E.push("transforms"),L=0;L<G.length;L++){J=
["transforms",L];var H=G[L].type;l(G[L])?(H=d.transforms[H]?d.transforms[H].attributes:{},H.type={valType:"enumerated",values:Object.keys(d.transforms)},n(G[L],F[L],H,h,E,J)):h.push(m("object",E,J))}}else h.push(m("object",E))}k=k._fullLayout;r=d.layout.layoutAttributes;for(p=0;p<v.length;p++)q=v[p],E=d.traces[q.type],(G=E.layoutAttributes)&&(q.subplot?b.extendFlat(r[E.attributes.subplot.dflt],G):b.extendFlat(r,G));n(u,k,r,h,"layout");return 0===h.length?void 0:h};var c={object:function(b,a){return("layout"===
b&&""===a?"The layout argument":"data"===b[0]&&""===a?"Trace "+b[1]+" in the data argument":k(b)+"key "+a)+" must be linked to an object container"},array:function(b,a){return("data"===b?"The data argument":k(b)+"key "+a)+" must be linked to an array container"},schema:function(b,a){return k(b)+"key "+a+" is not part of the schema"},unused:function(b,a,c){c=l(c)?"container":"key";return k(b)+c+" "+a+" did not get coerced"},dynamic:function(b,a,c,d){return[k(b)+"key",a,"(set to '"+c+"')","got reset to",
"'"+d+"'","during defaults."].join(" ")},invisible:function(b,a){return(a?k(b)+"item "+a:"Trace "+b[1])+" got defaulted to be not visible"},value:function(b,a,c){return[k(b)+"key "+a,"is set to an invalid value ("+c+")"].join(" ")}},r=b.counterRegex("([a-z]+)")},{"../lib":716,"../plots/plots":825,"./plot_config":752,"./plot_schema":753}],759:[function(a,q,p){q.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward",
"reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:"linear quad cubic sin exp circle elastic back bounce linear-in quad-in cubic-in sin-in exp-in circle-in elastic-in back-in bounce-in linear-out quad-out cubic-out sin-out exp-out circle-out elastic-out back-out bounce-out linear-in-out quad-in-out cubic-in-out sin-in-out exp-in-out circle-in-out elastic-in-out back-in-out bounce-in-out".split(" "),
editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],760:[function(a,q,p){var n=a("../lib"),k=a("../plot_api/plot_template");q.exports=function(a,h,b){var g=b.name,e=b.inclusionAttr||"visible",m=h[g],l=n.isArrayOrTypedArray(a[g])?a[g]:[];a=h[g]=[];var f=k.arrayTemplater(h,g,e);for(g=0;g<l.length;g++){var d=l[g];if(n.isPlainObject(d))var c=f.newItem(d);else c=f.newItem({}),c[e]=!1;c._index=g;!1!==c[e]&&b.handleItemDefaults(d,
c,h,b);a.push(c)}e=f.defaultItems();for(g=0;g<e.length;g++)c=e[g],c._index=a.length,b.handleItemDefaults({},c,h,b,{}),a.push(c);if(n.isArrayOrTypedArray(m))for(h=Math.min(m.length,a.length),g=0;g<h;g++)n.relinkPrivateKeys(a[g],m[g]);return a}},{"../lib":716,"../plot_api/plot_template":754}],761:[function(a,q,p){a=a("../components/fx/attributes");q.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,
!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},
hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:a.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1E4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":621}],762:[function(a,q,p){q.exports={xaxis:{valType:"subplotid",
dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],763:[function(a,q,p){function n(b,a){function c(b,a){return Math.max(b,g(a))}var d,e,f=[],g=k(a);f=m(b,a);var h=f.min,r=f.max;if(0===h.length||0===r.length)return l.simpleMap(a.range,a.r2l);f=h[0].val;var t=r[0].val;for(d=1;d<h.length&&f===t;d++)f=Math.min(f,h[d].val);for(d=1;d<r.length&&f===t;d++)t=Math.max(t,r[d].val);b=!1;a.range&&(b=l.simpleMap(a.range,a.r2l),b=b[1]<b[0]);"reversed"===
a.autorange&&(b=!0,a.autorange=!0);var n=a.rangemode,p="tozero"===n,q="nonnegative"===n;n=a._length;var E=n/10,F=0;for(d=0;d<h.length;d++){var L=h[d];for(e=0;e<r.length;e++){var J=r[e];var H=J.val-L.val;if(0<H){var K=n-g(L)-g(J);if(K>E){if(H/K>F){var M=L;var I=J;F=H/K}}else H/n>F&&(M={val:L.val,pad:0},I={val:J.val,pad:0},F=H/n)}}}f===t?(M=f-1,I=f+1,p?0===f?f=[0,1]:(h=(0<f?r:h).reduce(c,0),h=f/(1-Math.min(.5,h/n)),f=0<f?[0,h]:[h,0]):f=q?[Math.max(0,M),Math.max(1,I)]:[M,I]):(p?(0<=M.val&&(M={val:0,
pad:0}),0>=I.val&&(I={val:0,pad:0})):q&&(0>M.val-F*g(M)&&(M={val:0,pad:0}),0>=I.val&&(I={val:1,pad:0})),F=(I.val-M.val)/(n-g(M)-g(I)),f=[M.val-F*g(M),I.val+F*g(I)]);b&&f.reverse();return l.simpleMap(f,a.l2r||Number)}function k(b){var a=b._length/20;"domain"===b.constrain&&b._inputDomain&&(a*=(b._inputDomain[1]-b._inputDomain[0])/(b.domain[1]-b.domain[0]));return function(b){return b.pad+(b.extrapad?a:0)}}function m(b,a){function c(b,a){for(r=0;r<a.length;r++){var c=b[a[r]],f=(c._extremes||{})[d];
if(!0===c.visible&&f){for(m=0;m<f.min.length;m++)t=f.min[m],h(k,t.val,t.pad,{extrapad:t.extrapad},g);for(m=0;m<f.max.length;m++)t=f.max[m],h(l,t.val,t.pad,{extrapad:t.extrapad},e)}}}var d=a._id,f=b._fullLayout,k=[],l=[],r,m,t;c(b._fullData,a._traceIndices);c(f.annotations||[],a._annIndices||[]);c(f.shapes||[],a._shapeIndices||[]);return{min:k,max:l}}function h(b,a,d,e,f){var c=e.tozero;e=e.extrapad;for(var g=!0,h=0;h<b.length&&g;h++){var k=b[h];if(f(k.val,a)&&k.pad>=d&&(k.extrapad||!e)){g=!1;break}else f(a,
k.val)&&k.pad<=d&&(e||!k.extrapad)&&(b.splice(h,1),h--)}g&&(f=c&&0===a,b.push({val:a,pad:f?0:d,extrapad:f?!1:e}))}function b(b){return t(b)&&Math.abs(b)<f}function g(b,a){return b<=a}function e(b,a){return b>=a}var t=a("fast-isnumeric"),l=a("../../lib"),f=a("../../constants/numerical").FP_SAFE,d=a("../../registry");q.exports={getAutoRange:n,makePadFn:k,doAutoRange:function(b,a){a.setScale();if(a.autorange){a.range=n(b,a);a._r=a.range.slice();a._rl=l.simpleMap(a._r,a.r2l);var c=a._input,e={};e[a._attr+
".range"]=a.range;e[a._attr+".autorange"]=a.autorange;d.call("_storeDirectGUIEdit",b.layout,b._fullLayout._preGUI,e);c.range=a.range.slice();c.autorange=a.autorange}(c=a._anchorAxis)&&c.rangeslider&&((e=c.rangeslider[a._name])&&"auto"===e.rangemode&&(e.range=n(b,a)),c._input.rangeslider[a._name]=l.extendFlat({},e))},findExtremes:function(a,d,k){function c(b){if(Array.isArray(b))return D=!0,function(a){return Math.max(Number(b[a]||0),0)};var a=Math.max(Number(b||0),0);return function(){return a}}function l(c){F=
d[c];t(F)&&(H=M(c),K=I(c),G?(L=a.c2l(F)-O(c),J=a.c2l(F)+N(c)):(P=F-O(c),Q=F+N(c),q&&P<Q/10&&(P=Q/10),L=a.c2l(P),J=a.c2l(Q)),p&&(L=Math.min(0,L),J=Math.max(0,J)),b(L)&&h(r,L,K,V,g),b(J)&&h(m,J,H,V,e))}k||(k={});a._m||a.setScale();var r=[],m=[],n=d.length,u=k.padded||!1,p=k.tozero&&("linear"===a.type||"-"===a.type),q="log"===a.type,D=!1,G=k.vpadLinearized||!1,E,F,L,J,H,K,M=c((0<a._m?k.ppadplus:k.ppadminus)||k.ppad||0),I=c((0<a._m?k.ppadminus:k.ppadplus)||k.ppad||0),N=c(k.vpadplus||k.vpad),O=c(k.vpadminus||
k.vpad);if(!D){var P=Infinity;var Q=-Infinity;if(q)for(E=0;E<n;E++){var T=d[E];T<P&&0<T&&(P=T);T>Q&&T<f&&(Q=T)}else for(E=0;E<n;E++)T=d[E],T<P&&T>-f&&(P=T),T>Q&&T<f&&(Q=T);d=[P,Q];n=2}var V={tozero:p,extrapad:u};u=Math.min(6,n);for(E=0;E<u;E++)l(E);for(E=n-1;E>=u;E--)l(E);return{min:r,max:m,opts:k}},concatExtremes:m}},{"../../constants/numerical":692,"../../lib":716,"../../registry":845,"fast-isnumeric":228}],764:[function(a,q,p){function n(b){return+b}function k(b){return String(b)}function m(b,
a,c,d,e){function f(a){return 2>(1+100*(a-b)/c.dtick)%100}for(var g=0,h=0,k=0,l=0,r=0;r<a.length;r++)0===a[r]%1?k++:J(a[r])||l++,f(a[r])&&g++,f(a[r]+c.dtick/2)&&h++;a=a.length-l;k===a&&"date"!==c.type?1>c.dtick?b=d-.5*c.dtick:(b-=.5,b+c.dtick<d&&(b+=c.dtick)):h<.1*a&&(g>.3*a||f(d)||f(e))&&(e=c.dtick/2,b+=b+e<d?e:-e);return b}function h(b,a,c){return a*M.roundUp(b/a,c)}function b(b){var a=b.dtick;b._tickexponent=0;J(a)||"string"===typeof a||(a=1);if("category"===b.type||"multicategory"===b.type)b._tickround=
null;if("date"===b.type){var c=b.r2l(b.tick0),d=b.l2r(c).replace(/(^-|i)/g,""),e=d.length;"M"===String(a).charAt(0)?10<e||"01-01"!==d.substr(5)?b._tickround="d":b._tickround=0===+a.substr(1)%12?"y":"m":a>=ca&&10>=e||a>=15*ca?b._tickround="d":a>=R&&16>=e||a>=Z?b._tickround="M":a>=U&&19>=e||a>=R?b._tickround="S":(a=b.l2r(c+a).replace(/^-/,"").length,b._tickround=Math.max(e,a)-20,0>b._tickround&&(b._tickround=4))}else J(a)||"L"===a.charAt(0)?(e=b.range.map(b.r2d||Number),J(a)||(a=Number(a.substr(1))),
b._tickround=2-Math.floor(Math.log(a)/Math.LN10+.01),a=Math.floor(Math.log(Math.max(Math.abs(e[0]),Math.abs(e[1])))/Math.LN10+.01),3<Math.abs(a)&&(!u(b.exponentformat)||14<a||-15>a?b._tickexponent=a:b._tickexponent=3*Math.round((a-1)/3))):b._tickround=null}function g(b,a,c){b=b.tickfont||{};return{x:a,dx:0,dy:0,text:c||"",fontSize:b.size,font:b.family,fontColor:b.color}}function e(b,a,c,d){var e=b._tickround,f=c&&b.hoverformat||aa.getTickFormat(b);d&&(e=J(e)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[e]);f=
M.formatDate(a.x,f,e,b._dateFormat,b.calendar,b._extraFormat);var g=f.indexOf("\n");if(-1!==g){var h=f.substr(g+1);f=f.substr(0,g)}d&&("00:00:00"===f||"00:00"===f?(f=h,h=""):8===f.length&&(f=f.replace(/:00$/,"")));h&&(c?f="d"===e?f+(", "+h):h+(f?", "+f:""):b._inCalcTicks&&h===b._prevDateHead||(f+="\x3cbr\x3e"+h,b._prevDateHead=h));a.text=f}function t(b,a,c,d,e){var f=b.dtick;c=a.x;var g=b.tickformat,h="string"===typeof f&&f.charAt(0);"never"===e&&(e="");d&&"L"!==h&&(f="L3",h="L");if(g||"L"===h)a.text=
v(Math.pow(10,c),b,e,d);else if(J(f)||"D"===h&&.1>M.mod(c+.01,1))d=Math.round(c),e=Math.abs(d),g=b.exponentformat,"power"===g||u(g)&&(14<d||-15>d)?(a.text=0===d?1:1===d?"10":"10\x3csup\x3e"+(1<d?"":X)+e+"\x3c/sup\x3e",a.fontSize*=1.25):("e"===g||"E"===g)&&2<e?a.text="1"+g+(0<d?"+":X)+e:(a.text=v(Math.pow(10,c),b,"","fakehover"),"D1"===f&&"y"===b._id.charAt(0)&&(a.dy-=a.fontSize/6));else if("D"===h)a.text=String(Math.round(Math.pow(10,M.mod(c,1)))),a.fontSize*=.75;else throw"unrecognized dtick "+String(f);
"D1"===b.dtick&&(f=String(a.text).charAt(0),"0"===f||"1"===f)&&("y"===b._id.charAt(0)?a.dx-=a.fontSize/4:(a.dy+=a.fontSize/2,a.dx+=(b.range[1]>b.range[0]?1:-1)*a.fontSize*(0>c?.5:.25)))}function l(b,a){b=b._categories[Math.round(a.x)];void 0===b&&(b="");a.text=String(b)}function f(b,a,c){var d=b._categories[Math.round(a.x)]||[];b=void 0===d[1]?"":String(d[1]);d=void 0===d[0]?"":String(d[0]);c?a.text=d+" - "+b:(a.text=b,a.text2=d)}function d(b,a,c,d,e){"never"===e?e="":"all"===b.showexponent&&1E-6>
Math.abs(a.x/b.dtick)&&(e="hide");a.text=v(a.x,b,e,d)}function c(b,a,c,d,e){"radians"!==b.thetaunit||c?a.text=v(a.x,b,e,d):(c=a.x/180,0===c?a.text="0":(c=r(c),100<=c[1]?a.text=v(M.deg2rad(a.x),b,e,d):(b=0>a.x,a.text=1===c[1]?1===c[0]?"":c[0]+"":["\x3csup\x3e",c[0],"\x3c/sup\x3e\x3csub\x3e",c[1],"\x3c/sub\x3e"].join(""),b&&(a.text=X+a.text))))}function r(b){function a(b,c){return 1E-6>=Math.abs(c-0)?b:a(c,b%c)}var c=function(b){for(var a=1;!(1E-6>=Math.abs(Math.round(b*a)/a-b));)a*=10;return a}(b);
b*=c;var d=Math.abs(a(b,c));return[Math.round(b/d),Math.round(c/d)]}function u(b){return"SI"===b||"B"===b}function v(a,c,d,e){var f=0>a,g=c._tickround;d=d||c.exponentformat||"B";var h=c._tickexponent,k=aa.getTickFormat(c),l=c.separatethousands;e&&(h={exponentformat:d,dtick:"none"===c.showexponent?c.dtick:J(a)?Math.abs(a)||1:1,range:"none"===c.showexponent?c.range.map(c.r2d):[0,a||1]},b(h),g=(Number(h._tickround)||0)+4,h=h._tickexponent,c.hoverformat&&(k=c.hoverformat));if(k)return c._numFormat(k)(a).replace(/-/g,
X);e=Math.pow(10,-g)/2;"none"===d&&(h=0);a=Math.abs(a);if(a<e)a="0",f=!1;else{a+=e;h&&(a*=Math.pow(10,-h),g+=h);if(0===g)a=String(Math.floor(a));else if(0>g)for(a=String(Math.round(a)),a=a.substr(0,a.length+g);0>g;g++)a+="0";else a=String(a),(e=a.indexOf(".")+1)&&(a=a.substr(0,e+g).replace(/\.?0+$/,""));a=M.numSeparate(a,c._separators,l)}h&&"hide"!==d&&(u(d)&&(14<h||-15>h)&&(d="power"),c=0>h?X+-h:"power"!==d?"+"+h:String(h),"e"===d||"E"===d?a+=d+c:"power"===d?a+="10\x3csup\x3e"+c+"\x3c/sup\x3e":
"B"===d&&9===h?a+="B":u(d)&&(a+=za[h/3+5]));return f?X+a:a}function w(b,a){var c=[],d=function(b,a){a=b.xbnd[a];null!==a&&c.push(M.extendFlat({},b,{x:a}))};if(a.length){for(b=0;b<a.length;b++)d(a[b],0);d(a[b-1],1)}return c}function y(b,a){for(var c=[],d={},e=0;e<a.length;e++){var f=a[e];d[f.text2]?d[f.text2].push(f.x):d[f.text2]=[f.x]}for(var h in d)c.push(g(b,M.interp(d[h],.5),h));return c}function A(b,a){var c=[],d=function(b,a){a=b.xbnd[a];null!==a&&c.push(M.extendFlat({},b,{x:a}))};if(b.showdividers&&
a.length){for(b=0;b<a.length;b++){var e=a[b];e.text2!==f&&d(e,0);var f=e.text2}d(a[b-1],1)}return c}function z(b,a){if(b._selections[a].size()){var c=Infinity;var d=-Infinity;var e=Infinity;var f=-Infinity;b._selections[a].each(function(){var b=G(this);b=P.bBox(b.node().parentNode);c=Math.min(c,b.top);d=Math.max(d,b.bottom);e=Math.min(e,b.left);f=Math.max(f,b.right)})}else f=e=d=c=0;return{top:c,bottom:d,left:e,right:f,height:d-c,width:f-e}}function x(b){return[b.text,b.x,b.axInfo,b.font,b.fontSize,
b.fontColor].join("_")}function C(b){var a=b.title.font.size,c=(b.title.text.match(I.BR_TAG_ALL)||[]).length;return b.title.hasOwnProperty("standoff")?c?a*(la+c*da):a*la:c?a*(c+1)*da:a}function B(b,a){a=b.l2p(a);return 1<a&&a<b._length-1}function D(b,a,c,d){function e(b){function c(b){return"number"===typeof b&&Math.abs(b-l)<d}if(!b.showline||!b.linewidth)return!1;var d=Math.max((b.linewidth+a.zerolinewidth)/2,1);if(c(b._mainLinePosition)||c(b._mainMirrorPosition))return!0;b=b._linepositions||{};
for(var e in b)if(c(b[e][0])||c(b[e][1]))return!0}var f=c._mainAxis;if(f){var g=b._fullLayout,h=a._id.charAt(0),k=aa.counterLetter(a._id),l=a._offset+(Math.abs(d[0])<Math.abs(d[1])===("x"===h)?0:a._length);d=g._plots[c._mainSubplot];if(!(d.mainplotinfo||d).overlays.length)return e(c,l);b=aa.list(b,k);for(c=0;c<b.length;c++)if(k=b[c],k._mainAxis===f&&e(k,l))return!0}}function G(b){b=L.select(b);var a=b.select(".text-math-group");return a.empty()?b.select("text"):a}function E(b){return b._id+".automargin"}
function F(b,a){for(var c=0;c<a.length;c++)-1===b.indexOf(a[c])&&b.push(a[c])}var L=a("d3"),J=a("fast-isnumeric"),H=a("../../plots/plots"),K=a("../../registry"),M=a("../../lib"),I=a("../../lib/svg_text_utils"),N=a("../../components/titles"),O=a("../../components/color"),P=a("../../components/drawing"),Q=a("./layout_attributes"),T=a("./clean_ticks");p=a("../../constants/numerical");var V=p.ONEAVGYEAR,Y=p.ONEAVGMONTH,ca=p.ONEDAY,Z=p.ONEHOUR,R=p.ONEMIN,U=p.ONESEC,X=p.MINUS_SIGN,ea=p.BADNUM;p=a("../../constants/alignment");
var fa=p.MID_SHIFT,la=p.CAP_SHIFT,da=p.LINE_SPACING,ma=p.OPPOSITE_SIDE,aa=q.exports={};aa.setConvert=a("./set_convert");var na=a("./axis_autotype"),ha=a("./axis_ids");aa.id2name=ha.id2name;aa.name2id=ha.name2id;aa.cleanId=ha.cleanId;aa.list=ha.list;aa.listIds=ha.listIds;aa.getFromId=ha.getFromId;aa.getFromTrace=ha.getFromTrace;a=a("./autorange");aa.getAutoRange=a.getAutoRange;aa.findExtremes=a.findExtremes;aa.coerceRef=function(b,a,c,d,e,f){var g=d.charAt(d.length-1);c=c._fullLayout._subplots[g+"axis"];
d+="ref";g={};e||(e=c[0]||f);f||(f=e);g[d]={valType:"enumerated",values:c.concat(f?[f]:[]),dflt:e};return M.coerce(b,a,g,d)};aa.coercePosition=function(b,a,c,d,e,f){"paper"===d||"pixel"===d?(a=M.ensureNumber,c=c(e,f)):(a=aa.getFromId(a,d),f=a.fraction2r(f),c=c(e,f),a=a.cleanPos);b[e]=a(c)};aa.cleanPosition=function(b,a,c){return("paper"===c||"pixel"===c?M.ensureNumber:aa.getFromId(a,c).cleanPos)(b)};aa.redrawComponents=function(b,a){function c(c,e,f,g){c=K.getComponentMethod(c,e);e={};for(var h=0;h<
a.length;h++)for(var k=d[aa.id2name(a[h])][f],l=0;l<k.length;l++){var r=k[l];if(!e[r]&&(c(b,r),e[r]=1,g))return}}a=a?a:aa.listIds(b);var d=b._fullLayout;c("annotations","drawOne","_annIndices");c("shapes","drawOne","_shapeIndices");c("images","draw","_imgIndices",!0)};var ja=aa.getDataConversions=function(b,a,c,d){c="x"===c||"y"===c||"z"===c?c:d;if(Array.isArray(c)){if(b={type:na(d),_categories:[]},aa.setConvert(b),"category"===b.type)for(a=0;a<d.length;a++)b.d2c(d[a])}else b=aa.getFromTrace(b,a,
c);return b?{d2c:b.d2c,c2d:b.c2d}:"ids"===c?{d2c:k,c2d:k}:{d2c:n,c2d:n}};aa.getDataToCoordFunc=function(b,a,c,d){return ja(b,a,c,d).d2c};aa.counterLetter=function(b){b=b.charAt(0);if("x"===b)return"y";if("y"===b)return"x"};aa.minDtick=function(b,a,c,d){if(-1!==["log","category","multicategory"].indexOf(b.type)||!d)b._minDtick=0;else if(void 0===b._minDtick)b._minDtick=a,b._forceTick0=c;else if(b._minDtick)if(2E-6>(b._minDtick/a+1E-6)%1&&2E-6>((c-b._forceTick0)/a%1+1.000001)%1)b._minDtick=a,b._forceTick0=
c;else if(2E-6<(a/b._minDtick+1E-6)%1||2E-6<((c-b._forceTick0)/b._minDtick%1+1.000001)%1)b._minDtick=0};aa.saveRangeInitial=function(b,a){b=aa.list(b,"",!0);for(var c=!1,d=0;d<b.length;d++){var e=b[d],f=void 0===e._rangeInitial,g=f||!(e.range[0]===e._rangeInitial[0]&&e.range[1]===e._rangeInitial[1]);if(f&&!1===e.autorange||a&&g)e._rangeInitial=e.range.slice(),c=!0}return c};aa.saveShowSpikeInitial=function(b,a){for(var c=aa.list(b,"",!0),d=!1,e="on",f=0;f<c.length;f++){var g=c[f],h=void 0===g._showSpikeInitial,
k=h||g.showspikes!==g._showspikes;if(h||a&&k)g._showSpikeInitial=g.showspikes,d=!0;"on"!==e||g.showspikes||(e="off")}b._fullLayout._cartesianSpikesEnabled=e;return d};aa.autoBin=function(b,a,c,d,e,f){var g=M.aggNums(Math.min,null,b),h=M.aggNums(Math.max,null,b);if("category"===a.type||"multicategory"===a.type)return{start:g-.5,end:h+.5,size:Math.max(1,Math.round(f)||1),_dataSpan:h-g};e||(e=a.calendar);var k="log"===a.type?{type:"linear",range:[g,h]}:{type:a.type,range:M.simpleMap([g,h],a.c2r,0,e),
calendar:e};aa.setConvert(k);(f=f&&T.dtick(f,k.type))?(k.dtick=f,k.tick0=T.tick0(void 0,k.type,e)):(c?d=(h-g)/c:(c=M.distinctVals(b),f=Math.pow(10,Math.floor(Math.log(c.minDiff)/Math.LN10)),c=f*M.roundUp(c.minDiff/f,[.9,1.9,4.9,9.9],!0),d=Math.max(c,2*M.stdev(b)/Math.pow(b.length,d?.25:.4)),J(d)||(d=1)),aa.autoTicks(k,d));d=k.dtick;c=aa.tickIncrement(aa.tickFirst(k),d,"reverse",e);if("number"===typeof d)c=m(c,b,k,g,h),k=1+Math.floor((h-c)/d),b=c+k*d;else{if("M"===k.dtick.charAt(0))a:{k=c;b=M.findExactDates(b,
e);if(.8<b.exactDays&&(c=Number(d.substr(1)),k=.8<b.exactYears&&0===c%12?aa.tickIncrement(k,"M6","reverse")+1.5*ca:.8<b.exactMonths?aa.tickIncrement(k,"M1","reverse")+15.5*ca:k-ca/2,b=aa.tickIncrement(k,d),b<=g)){c=b;break a}c=k}b=c;for(k=0;b<=h;)b=aa.tickIncrement(b,d,!1,e),k++}return{start:a.c2r(c,0,e),end:a.c2r(b,0,e),size:d,_dataSpan:h-g}};aa.prepTicks=function(a){var c=M.simpleMap(a.range,a.r2l);if("auto"===a.tickmode||!a.dtick){var d=a.nticks;d||("category"===a.type||"multicategory"===a.type?
(d=a.tickfont?1.2*(a.tickfont.size||12):15,d=a._length/d):(d="y"===a._id.charAt(0)?40:80,d=M.constrain(a._length/d,4,9)+1),"radialaxis"===a._name&&(d*=2));"array"===a.tickmode&&(d*=100);aa.autoTicks(a,Math.abs(c[1]-c[0])/d);0<a._minDtick&&a.dtick<2*a._minDtick&&(a.dtick=a._minDtick,a.tick0=a.l2r(a._forceTick0))}a.tick0||(a.tick0="date"===a.type?"2000-01-01":0);"date"===a.type&&.1>a.dtick&&(a.dtick=.1);b(a)};aa.calcTicks=function(b){aa.prepTicks(b);var a=M.simpleMap(b.range,b.r2l);if("array"===b.tickmode){var c=
b.tickvals;a=b.ticktext;var d=Array(c.length),e=M.simpleMap(b.range,b.r2l),f=1.0001*e[0]-1E-4*e[1],h=1.0001*e[1]-1E-4*e[0];e=Math.min(f,h);f=Math.max(f,h);h=0;Array.isArray(a)||(a=[]);var k="category"===b.type?b.d2l_noadd:b.d2l;"log"===b.type&&"L"!==String(b.dtick).charAt(0)&&(b.dtick="L"+Math.pow(10,Math.floor(Math.min(b.range[0],b.range[1]))-1));for(var l=0;l<c.length;l++){var r=k(c[l]);r>e&&r<f&&(d[h]=void 0===a[l]?aa.tickText(b,r):g(b,r,String(a[l])),h++)}h<c.length&&d.splice(h,c.length-h);return d}b._tmin=
aa.tickFirst(b);d=1.0001*a[1]-1E-4*a[0];e=a[1]<a[0];if(b._tmin<1.0001*a[0]-1E-4*a[1]!==e)return[];c=[];if("category"===b.type||"multicategory"===b.type)d=e?Math.max(-.5,d):Math.min(b._categories.length-.5,d);f="log"===b.type&&!(J(b.dtick)||"L"===b.dtick.charAt(0));h=null;k=Math.max(1E3,b._length||0);for(l=b._tmin;(e?l>=d:l<=d)&&!(c.length>k||l===h);l=aa.tickIncrement(l,b.dtick,e,b.calendar))h=l,r=!1,f&&l!==(l|0)&&(r=!0),c.push({minor:r,value:l});"angularaxis"===b._id&&360===Math.abs(a[1]-a[0])&&c.pop();
b._tmax=(c[c.length-1]||{}).value;b._prevDateHead="";b._inCalcTicks=!0;a=Array(c.length);for(d=0;d<c.length;d++)a[d]=aa.tickText(b,c[d].value,!1,c[d].minor);b._inCalcTicks=!1;return a};var oa=[2,5,10],ka=[1,2,3,6,12],ia=[1,2,5,10,15,30],xa=[1,2,3,7,14],ya=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],sa=[-.301,0,.301,.699,1],W=[15,30,45,90,180];aa.autoTicks=function(b,a){function c(b){return Math.pow(b,Math.floor(Math.log(a)/Math.LN10))}if("date"===b.type){b.tick0=M.dateTick0(b.calendar);var d=
2*a;d>V?(a/=V,d=c(10),b.dtick="M"+12*h(a,d,oa)):d>Y?(a/=Y,b.dtick="M"+h(a,1,ka)):d>ca?(b.dtick=h(a,ca,xa),b.tick0=M.dateTick0(b.calendar,!0)):d>Z?b.dtick=h(a,Z,ka):d>R?b.dtick=h(a,R,ia):d>U?b.dtick=h(a,U,ia):(d=c(10),b.dtick=h(a,d,oa))}else"log"===b.type?(b.tick0=0,d=M.simpleMap(b.range,b.r2l),.7<a?b.dtick=Math.ceil(a):1>Math.abs(d[1]-d[0])?(a=Math.abs(Math.pow(10,d[1])-Math.pow(10,d[0]))/(1.5*Math.abs((d[1]-d[0])/a)),d=c(10),b.dtick="L"+h(a,d,oa)):b.dtick=.3<a?"D2":"D1"):"category"===b.type||"multicategory"===
b.type?(b.tick0=0,b.dtick=Math.ceil(Math.max(a,1))):"angularaxis"===b._id?(b.tick0=0,b.dtick=h(a,1,W)):(b.tick0=0,d=c(10),b.dtick=h(a,d,oa));0===b.dtick&&(b.dtick=1);if(!J(b.dtick)&&"string"!==typeof b.dtick)throw d=b.dtick,b.dtick=1,"ax.dtick error: "+String(d);};aa.tickIncrement=function(b,a,c,d){var e=c?-1:1;if(J(a))return b+e*a;var f=a.charAt(0),g=e*Number(a.substr(1));if("M"===f)return M.incrementMonth(b,g,d);if("L"===f)return Math.log(Math.pow(10,b)+g)/Math.LN10;if("D"===f)return a="D2"===a?
sa:ya,b+=.01*e,c=M.roundUp(M.mod(b,1),a,c),Math.floor(b)+Math.log(L.round(Math.pow(10,c),1))/Math.LN10;throw"unrecognized dtick "+String(a);};aa.tickFirst=function(b){var a=b.r2l||Number,c=M.simpleMap(b.range,a),d=c[1]<c[0],e=d?Math.floor:Math.ceil;c=1.0001*c[0]-1E-4*c[1];var f=b.dtick,g=a(b.tick0);if(J(f)){d=e((c-g)/f)*f+g;if("category"===b.type||"multicategory"===b.type)d=M.constrain(d,0,b._categories.length-1);return d}a=f.charAt(0);var h=Number(f.substr(1));if("M"===a){e=0;for(var k,l;10>e;){k=
aa.tickIncrement(g,f,d,b.calendar);if(0>=(k-c)*(g-c))return d?Math.min(g,k):Math.max(g,k);k=(c-(g+k)/2)/(k-g);l=a+(Math.abs(Math.round(k))||1)*h;g=aa.tickIncrement(g,l,0>k?!d:d,b.calendar);e++}M.error("tickFirst did not converge",b);return g}if("L"===a)return Math.log(e((Math.pow(10,c)-g)/h)*h+g)/Math.LN10;if("D"===a)return b="D2"===f?sa:ya,b=M.roundUp(M.mod(c,1),b,d),Math.floor(c)+Math.log(L.round(Math.pow(10,b),1))/Math.LN10;throw"unrecognized dtick "+String(f);};aa.tickText=function(b,a,h,k){function r(c){if(void 0===
c)return!0;if(h)return"none"===c;var d={first:b._tmin,last:b._tmax}[c];return"all"!==c&&a!==d}var m=g(b,a),n="array"===b.tickmode,u=h||n,v=b.type,p="category"===v?b.d2l_noadd:b.d2l;if(n&&Array.isArray(b.ticktext)){n=M.simpleMap(b.range,b.r2l);var q=Math.abs(n[1]-n[0])/1E4;for(n=0;n<b.ticktext.length&&!(Math.abs(a-p(b.tickvals[n]))<q);n++);if(n<b.ticktext.length)return m.text=String(b.ticktext[n]),m}p=h?"never":"none"!==b.exponentformat&&r(b.showexponent)?"hide":"";"date"===v?e(b,m,h,u):"log"===v?
t(b,m,h,u,p):"category"===v?l(b,m):"multicategory"===v?f(b,m,h):"angularaxis"===b._id?c(b,m,h,u,p):d(b,m,h,u,p);k||(b.tickprefix&&!r(b.showtickprefix)&&(m.text=b.tickprefix+m.text),b.ticksuffix&&!r(b.showticksuffix)&&(m.text+=b.ticksuffix));if("boundaries"===b.tickson||b.showdividers)k=function(a){var c=b.l2p(a);return 0<=c&&c<=b._length?a:null},m.xbnd=[k(m.x-.5),k(m.x+b.dtick-.5)];return m};aa.hoverLabelText=function(b,a,c){if(c!==ea&&c!==a)return aa.hoverLabelText(b,a)+" - "+aa.hoverLabelText(b,
c);c="log"===b.type&&0>=a;b=aa.tickText(b,b.c2l(c?-a:a),"hover").text;return c?0===a?"0":X+b:b};var za="f p n  m  k M G T".split(" ");aa.getTickFormat=function(b){function a(b){return"string"!==typeof b?b:Number(b.replace("M",""))*Y}function c(b,a){var c=["L","D"];if(typeof b===typeof a){if("number"===typeof b)return b-a;var d=c.indexOf(b.charAt(0));c=c.indexOf(a.charAt(0));return d===c?Number(b.replace(/(L|D)/g,""))-Number(a.replace(/(L|D)/g,"")):d-c}return"number"===typeof b?1:-1}function d(b,
a,c){c=c||function(b){return b};var d=a[0];a=a[1];return(!d&&"number"!==typeof d||c(d)<=c(b))&&(!a&&"number"!==typeof a||c(a)>=c(b))}function e(b,a){var d=null===a[0],e=null===a[1],f=0<=c(b,a[0]);b=0>=c(b,a[1]);return(d||f)&&(e||b)}var f;if(b.tickformatstops&&0<b.tickformatstops.length)switch(b.type){case "date":case "linear":for(f=0;f<b.tickformatstops.length;f++){var g=b.tickformatstops[f];if(g.enabled&&d(b.dtick,g.dtickrange,a)){var h=g;break}}break;case "log":for(f=0;f<b.tickformatstops.length;f++)if(g=
b.tickformatstops[f],g.enabled&&e(b.dtick,g.dtickrange)){h=g;break}}return h?h.value:b.tickformat};aa.getSubplots=function(b,a){b=b._fullLayout._subplots;b=b.cartesian.concat(b.gl2d||[]);a=a?aa.findSubplotsWithAxis(b,a):b;a.sort(function(b,a){b=b.substr(1).split("y");a=a.substr(1).split("y");return b[0]===a[0]?+b[1]-+a[1]:+b[0]-+a[0]});return a};aa.findSubplotsWithAxis=function(b,a){a=new RegExp("x"===a._id.charAt(0)?"^"+a._id+"y":a._id+"$");for(var c=[],d=0;d<b.length;d++){var e=b[d];a.test(e)&&
c.push(e)}return c};aa.makeClipPaths=function(b){var a=b._fullLayout;if(!a._hasOnlyLargeSploms){var c={_offset:0,_length:a.width,_id:""},d={_offset:0,_length:a.height,_id:""},e=aa.list(b,"x",!0);b=aa.list(b,"y",!0);var f=[],g,h;for(g=0;g<e.length;g++)for(f.push({x:e[g],y:d}),h=0;h<b.length;h++)0===g&&f.push({x:c,y:b[h]}),f.push({x:e[g],y:b[h]});c=a._clips.selectAll(".axesclip").data(f,function(b){return b.x._id+b.y._id});c.enter().append("clipPath").classed("axesclip",!0).attr("id",function(b){return"clip"+
a._uid+b.x._id+b.y._id}).append("rect");c.exit().remove();c.each(function(b){L.select(this).select("rect").attr({x:b.x._offset||0,y:b.y._offset||0,width:b.x._length||1,height:b.y._length||1})})}};aa.draw=function(b,a,c){var d=b._fullLayout;"redraw"===a&&d._paper.selectAll("g.subplot").each(function(b){b=d._plots[b[0]];var a=b.xaxis,c=b.yaxis;b.xaxislayer.selectAll("."+a._id+"tick").remove();b.yaxislayer.selectAll("."+c._id+"tick").remove();b.xaxislayer.selectAll("."+a._id+"tick2").remove();b.yaxislayer.selectAll("."+
c._id+"tick2").remove();b.xaxislayer.selectAll("."+a._id+"divider").remove();b.yaxislayer.selectAll("."+c._id+"divider").remove();b.gridlayer&&b.gridlayer.selectAll("path").remove();b.zerolinelayer&&b.zerolinelayer.selectAll("path").remove();d._infolayer.select(".g-"+a._id+"title").remove();d._infolayer.select(".g-"+c._id+"title").remove()});a=a&&"redraw"!==a?a:aa.listIds(b);return M.syncOrAsync(a.map(function(a){return function(){if(a){var d=aa.getFromId(b,a),e=aa.drawOne(b,d,c);d._r=d.range.slice();
d._rl=M.simpleMap(d._r,d.r2l);return e}}}))};aa.drawOne=function(b,a,c){function d(b){b=g+(b||"tick");u[b]||(u[b]=z(a,b));return u[b]}c=c||{};var e;a.setScale();var f=b._fullLayout,g=a._id,h=g.charAt(0),k=aa.counterLetter(g),l=f._plots[a._mainSubplot];if(l){var r=l[h+"axislayer"],m=a._mainLinePosition,t=a._mainMirrorPosition,n=a._vals=aa.calcTicks(a);l=[a.mirror,m,t].join("_");for(e=0;e<n.length;e++)n[e].axInfo=l;a._selections={};a._tickAngles&&(a._prevTickAngles=a._tickAngles);a._tickAngles={};a._depth=
null;var u={};if(a.visible){var v=aa.makeTransFn(a);"boundaries"===a.tickson?(l=w(a,n),e=aa.clipEnds(a,l),l="inside"===a.ticks?e:l):(e=aa.clipEnds(a,n),l="inside"===a.ticks?e:n);var p=a._gridVals=e,q=A(a,n);if(!f._hasOnlyLargeSploms){var B=a._subplotsWith,D={};for(e=0;e<B.length;e++){var I=B[e];var G=f._plots[I];I=G[k+"axis"];var F=I._mainAxis._id;D[F]||(D[F]=1,F="x"===h?"M0,"+I._offset+"v"+I._length:"M"+I._offset+",0h"+I._length,aa.drawGrid(b,a,{vals:p,counterAxis:I,layer:G.gridlayer.select("."+
g),path:F,transFn:v}),aa.drawZeroLine(b,a,{counterAxis:I,layer:G.zerolinelayer,path:F,transFn:v}))}}var J=aa.getTickSigns(a);p=[];if(a.ticks){e=aa.makeTickPath(a,m,J[2]);if(a._anchorAxis&&a.mirror&&!0!==a.mirror){var L=aa.makeTickPath(a,t,J[3]);var R=e+L}else L="",R=e;if(a.showdividers&&"outside"===a.ticks&&"boundaries"===a.tickson){var la={};for(e=0;e<q.length;e++)la[q[e].x]=1;t=function(b){return la[b.x]?L:R}}else t=R;aa.drawTicks(b,a,{vals:l,layer:r,path:t,transFn:v});"allticks"===a.mirror&&(p=
Object.keys(a._linepositions||{}))}for(e=0;e<p.length;e++)I=p[e],G=f._plots[I],t=a._linepositions[I]||[],t=aa.makeTickPath(a,t[0],J[0])+aa.makeTickPath(a,t[1],J[1]),aa.drawTicks(b,a,{vals:l,layer:G[h+"axislayer"],path:t,transFn:v});l=[];l.push(function(){return aa.drawLabels(b,a,{vals:n,layer:r,transFn:v,labelFns:aa.makeLabelFns(a,m)})});if("multicategory"===a.type){var Q={x:2,y:10}[h];l.push(function(){var c={x:"height",y:"width"}[h];c=d()[c]+Q+(a._tickAngles[g+"tick"]?a.tickfont.size*da:0);return aa.drawLabels(b,
a,{vals:y(a,n),layer:r,cls:g+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:v,labelFns:aa.makeLabelFns(a,m+c*J[4])})});l.push(function(){a._depth=J[4]*(d("tick2")[a.side]-m);var c=aa.makeTickPath(a,m,J[4],a._depth),e=a._id+"divider",f=r.selectAll("path."+e).data(q,x);f.exit().remove();f.enter().insert("path",":first-child").classed(e,1).classed("crisp",1).call(O.stroke,a.dividercolor).style("stroke-width",P.crispRound(b,a.dividerwidth,1)+"px");f.attr("transform",v).attr("d",c)})}else a.title.hasOwnProperty("standoff")&&
l.push(function(){a._depth=J[4]*(d()[a.side]-m)});var Y=K.getComponentMethod("rangeslider","isVisible")(a);l.push(function(){var c=a.side.charAt(0),e=ma[a.side].charAt(0),g=aa.getPxPosition(b,a),l="outside"===a.ticks?a.ticklen:0,r;if(a.automargin||Y)if("multicategory"===a.type)var m=d("tick2");else m=d(),"x"===h&&"b"===c&&(a._depth=Math.max(0<m.width?m.bottom-g:0,l));if(a.automargin){var t={x:0,y:0,r:0,l:0,t:0,b:0};var n=[0,1];"x"===h?("b"===c?t[c]=a._depth:(t[c]=a._depth=Math.max(0<m.width?g-m.top:
0,l),n.reverse()),0<m.width&&(g=m.right-(a._offset+a._length),0<g&&(t.xr=1,t.r=g),m=a._offset-m.left,0<m&&(t.xl=0,t.l=m))):("l"===c?t[c]=a._depth=Math.max(0<m.height?g-m.left:0,l):(t[c]=a._depth=Math.max(0<m.height?m.right-g:0,l),n.reverse()),0<m.height&&(g=m.bottom-(a._offset+a._length),0<g&&(t.yb=0,t.b=g),m=a._offset-m.top,0<m&&(t.yt=1,t.t=m)));t[k]="free"===a.anchor?a.position:a._anchorAxis.domain[n[0]];a.title.text!==f._dfltTitle[h]&&(t[c]+=C(a)+(a.title.standoff||0));if(a.mirror&&"free"!==a.anchor){var u=
{x:0,y:0,r:0,l:0,t:0,b:0};u[e]=a.linewidth;a.mirror&&!0!==a.mirror&&(u[e]+=l);if(!0===a.mirror||"ticks"===a.mirror)u[k]=a._anchorAxis.domain[n[1]];else if("all"===a.mirror||"allticks"===a.mirror)u[k]=[a._counterDomainMin,a._counterDomainMax][n[1]]}}Y&&(r=K.getComponentMethod("rangeslider","autoMarginOpts")(b,a));H.autoMargin(b,E(a),t);H.autoMargin(b,E(a)+".mirror",u);H.autoMargin(b,a._id+".rangeslider",r)});c.skipTitle||Y&&"bottom"===a.side||l.push(function(){var c=b._fullLayout,d=a._id,e=d.charAt(0),
f=a.title.font.size;if(a.title.hasOwnProperty("standoff"))var g=a._depth+a.title.standoff+C(a);else g="multicategory"===a.type?a._depth:10+1.5*f+(a.linewidth?a.linewidth-1:0),g="x"===e?g+("top"===a.side?f*(a.showticklabels?1:0):f*(a.showticklabels?1.5:.5)):g+("right"===a.side?f*(a.showticklabels?1:.5):f*(a.showticklabels?.5:0));var h=aa.getPxPosition(b,a);if("x"===e){f=a._offset+a._length/2;var k="top"===a.side?h-g:h+g}else{k=a._offset+a._length/2;f="right"===a.side?h+g:h-g;var l={rotate:"-90",offset:0}}if("multicategory"!==
a.type){g=a._selections[a._id+"tick"];var r={selection:g,side:a.side};g&&g.node()&&g.node().parentNode&&(g=P.getTranslate(g.node().parentNode),r.offsetLeft=g.x,r.offsetTop=g.y);a.title.hasOwnProperty("standoff")&&(r.pad=0)}return N.draw(b,d+"title",{propContainer:a,propName:a._name+".title.text",placeholder:c._dfltTitle[e],avoid:r,transform:l,attributes:{x:f,y:k,"text-anchor":"middle"}})});return M.syncOrAsync(l)}}};aa.getTickSigns=function(b){var a=b._id.charAt(0),c=b.side==={x:"top",y:"right"}[a]?
1:-1;c=[-1,1,c,-c];"inside"!==b.ticks===("x"===a)&&(c=c.map(function(b){return-b}));b.side&&c.push({l:-1,t:-1,r:1,b:1}[b.side.charAt(0)]);return c};aa.makeTransFn=function(b){var a=b._id.charAt(0),c=b._offset;return"x"===a?function(a){return"translate("+(c+b.l2p(a.x))+",0)"}:function(a){return"translate(0,"+(c+b.l2p(a.x))+")"}};aa.makeTickPath=function(b,a,c,d){d=void 0!==d?d:b.ticklen;var e=b._id.charAt(0);b=(b.linewidth||1)/2;return"x"===e?"M0,"+(a+b*c)+"v"+d*c:"M"+(a+b*c)+",0h"+d*c};aa.makeLabelFns=
function(b,a,c){var d=b._id.charAt(0),e="boundaries"!==b.tickson&&"outside"===b.ticks,f=0,g=0;e&&(f+=b.ticklen);c&&"outside"===b.ticks&&(g=M.deg2rad(c),f=b.ticklen*Math.cos(g)+1,g=b.ticklen*Math.sin(g));b.showticklabels&&(e||b.showline)&&(f+=.2*b.tickfont.size);f+=(b.linewidth||1)/2;e={labelStandoff:f,labelShift:g};if("x"===d){var h="bottom"===b.side?1:-1;var k=g*h;var l=a+f*h;var r="bottom"===b.side?1:-.2;e.xFn=function(b){return b.dx+k};e.yFn=function(b){return b.dy+l+b.fontSize*r};e.anchorFn=function(b,
a){return J(a)&&0!==a&&180!==a?0>a*h?"end":"start":"middle"};e.heightFn=function(a,c,d){return-60>c||60<c?-.5*d:"top"===b.side?-d:0}}else"y"===d&&(h="right"===b.side?1:-1,k=f,l=-g*h,r=90===Math.abs(b.tickangle)?.5:0,e.xFn=function(b){return b.dx+a+(k+b.fontSize*r)*h},e.yFn=function(b){return b.dy+l+b.fontSize*fa},e.anchorFn=function(a,c){return J(c)&&90===Math.abs(c)?"middle":"right"===b.side?"start":"end"},e.heightFn=function(a,c,d){c*="left"===b.side?1:-1;return-30>c?-d:30>c?-.5*d:0});return e};
aa.drawTicks=function(b,a,c){c=c||{};var d=a._id+"tick",e=c.layer.selectAll("path."+d).data(a.ticks?c.vals:[],x);e.exit().remove();e.enter().append("path").classed(d,1).classed("ticks",1).classed("crisp",!1!==c.crisp).call(O.stroke,a.tickcolor).style("stroke-width",P.crispRound(b,a.tickwidth,1)+"px").attr("d",c.path);e.attr("transform",c.transFn)};aa.drawGrid=function(b,a,c){c=c||{};var d=a._id+"grid",e=c.vals,f=c.counterAxis;if(!1===a.showgrid)e=[];else if(f&&aa.shouldShowZeroLine(b,a,f)){f="array"===
a.tickmode;for(var g=0;g<e.length;g++){var h=e[g].x;if(f?!h:Math.abs(h)<a.dtick/100)if(e=e.slice(0,g).concat(e.slice(g+1)),f)g--;else break}}e=c.layer.selectAll("path."+d).data(e,x);e.exit().remove();e.enter().append("path").classed(d,1).classed("crisp",!1!==c.crisp);a._gw=P.crispRound(b,a.gridwidth,1);e.attr("transform",c.transFn).attr("d",c.path).call(O.stroke,a.gridcolor||"#ddd").style("stroke-width",a._gw+"px");"function"===typeof c.path&&e.attr("d",c.path)};aa.drawZeroLine=function(b,a,c){c=
c||c;var d=a._id+"zl",e=aa.shouldShowZeroLine(b,a,c.counterAxis);e=c.layer.selectAll("path."+d).data(e?[{x:0,id:a._id}]:[]);e.exit().remove();e.enter().append("path").classed(d,1).classed("zl",1).classed("crisp",!1!==c.crisp).each(function(){c.layer.selectAll("path").sort(function(b,a){return ha.idSort(b.id,a.id)})});e.attr("transform",c.transFn).attr("d",c.path).call(O.stroke,a.zerolinecolor||O.defaultLine).style("stroke-width",P.crispRound(b,a.zerolinewidth,a._gw||1)+"px")};aa.drawLabels=function(b,
a,c){function d(b,a){b.each(function(b){var d=L.select(this),e=d.select(".text-math-group"),f=r.anchorFn(b,a),g=c.transFn.call(d.node(),b)+(J(a)&&0!==+a?" rotate("+a+","+r.xFn(b)+","+(r.yFn(b)-b.fontSize/2)+")":""),h=I.lineCount(d),k=da*b.fontSize;(b=r.heightFn(b,J(a)?+a:0,(h-1)*k))&&(g+=" translate(0, "+b+")");e.empty()?d.select("text").attr({transform:g,"text-anchor":f}):(d=P.bBox(e.node()).width*{end:-.5,start:.5}[f],e.attr("transform",g+(d?"translate("+d+",0)":"")))})}function e(){d(n,m);if(l.length&&
"x"===h&&!J(m)&&("log"!==a.type||"D"!==String(a.dtick).charAt(0))){var b=v=0,e=[];n.each(function(c){b=Math.max(b,c.fontSize);c=a.l2p(c.x);var d=G(this);d=P.bBox(d.node());e.push({top:0,bottom:10,height:10,left:c-d.width/2,right:c+d.width/2+2,width:d.width+2})});if("boundaries"!==a.tickson&&!a.showdividers||c.secondary){var f=l.length;var g=Math.abs((l[f-1].x-l[0].x)*a._m)/(f-1)<2.5*b||"multicategory"===a.type;for(f=0;f<e.length-1;f++)if(M.bBoxIntersect(e[f],e[f+1])){v=g?90:30;break}}else for(g=2,
a.ticks&&(g+=a.tickwidth/2),f=0;f<e.length;f++){var k=l[f].xbnd,r=e[f];if(null!==k[0]&&r.left-a.l2p(k[0])<g||null!==k[1]&&a.l2p(k[1])-r.right<g){v=90;break}}v&&d(n,v)}}c=c||{};var f=b._fullLayout,g=a._id,h=g.charAt(0),k=c.cls||g+"tick",l=c.vals,r=c.labelFns,m=c.secondary?0:a.tickangle,t=(a._prevTickAngles||{})[k],n=c.layer.selectAll("g."+k).data(a.showticklabels?l:[],x),u=[];n.enter().append("g").classed(k,1).append("text").attr("text-anchor","middle").each(function(a){var c=L.select(this),e=b._promises.length;
c.call(I.positionText,r.xFn(a),r.yFn(a)).call(P.font,a.font,a.fontSize,a.fontColor).text(a.text).call(I.convertToTspans,b);b._promises[e]?u.push(b._promises.pop().then(function(){d(c,m)})):d(c,m)});n.exit().remove();c.repositionOnUpdate&&n.each(function(b){L.select(this).select("text").call(I.positionText,r.xFn(b),r.yFn(b))});d(n,t+1?t:m);var v=null;a._selections&&(a._selections[k]=n);g=[function(){return u.length&&Promise.all(u)}];a.automargin&&f._redrawFromAutoMarginCount&&90===t?(v=90,g.push(function(){d(n,
t)})):g.push(e);a._tickAngles&&g.push(function(){a._tickAngles[k]=null===v?J(m)?m:0:v});(f=M.syncOrAsync(g))&&f.then&&b._promises.push(f);return f};aa.getPxPosition=function(b,a){b=b._fullLayout._size;var c=a._id.charAt(0),d=a.side,e;"free"!==a.anchor?e=a._anchorAxis:"x"===c?e={_offset:b.t+(1-(a.position||0))*b.h,_length:0}:"y"===c&&(e={_offset:b.l+(a.position||0)*b.w,_length:0});if("top"===d||"left"===d)return e._offset;if("bottom"===d||"right"===d)return e._offset+e._length};aa.shouldShowZeroLine=
function(b,a,c){var d=M.simpleMap(a.range,a.r2l),e;if(e=0>=d[0]*d[1]&&a.zeroline&&("linear"===a.type||"-"===a.type)){if(!(c=B(a,0)||!D(b,a,c,d)))a:{b=b._fullData;c=a._mainSubplot;a=a._id.charAt(0);for(d=0;d<b.length;d++)if(e=b[d],!0===e.visible&&e.xaxis+e.yaxis===c){if(K.traceIs(e,"bar-like")&&e.orientation==={x:"h",y:"v"}[a]){c=!0;break a}if(e.fill&&e.fill.charAt(e.fill.length-1)===a){c=!0;break a}}c=!1}e=c}return e};aa.clipEnds=function(b,a){return a.filter(function(a){return B(b,a.x)})};aa.allowAutoMargin=
function(b){for(var a=aa.list(b,"",!0),c=0;c<a.length;c++){var d=a[c];d.automargin&&(H.allowAutoMargin(b,E(d)),d.mirror&&H.allowAutoMargin(b,E(d)+".mirror"));K.getComponentMethod("rangeslider","isVisible")(d)&&H.allowAutoMargin(b,d._id+".rangeslider")}};aa.swap=function(b,a){var c=[],d,e;for(d=0;d<a.length;d++){var f=[],g=b._fullData[a[d]].xaxis,h=b._fullData[a[d]].yaxis;if(g&&h){for(e=0;e<c.length;e++)-1===c[e].x.indexOf(g)&&-1===c[e].y.indexOf(h)||f.push(e);if(f.length){var k=c[f[0]];if(1<f.length)for(e=
1;e<f.length;e++){var l=c[f[e]];F(k.x,l.x);F(k.y,l.y)}F(k.x,[g]);F(k.y,[h])}else c.push({x:[g],y:[h]})}}for(a=0;a<c.length;a++){var r;e=b;f=c[a].x;g=c[a].y;k=[];l=[];h=e.layout;for(d=0;d<f.length;d++)k.push(aa.getFromId(e,f[d]));for(d=0;d<g.length;d++)l.push(aa.getFromId(e,g[d]));var m=Object.keys(Q),t="anchor domain overlaying position side tickangle editType".split(" "),n=["linear","log"];for(d=0;d<m.length;d++){var u=m[d],v=k[0][u],p=l[0][u],q=!0,w=!1,x=!1;if("_"!==u.charAt(0)&&"function"!==typeof v&&
-1===t.indexOf(u)){for(r=1;r<k.length&&q;r++){var z=k[r][u];"type"===u&&-1!==n.indexOf(v)&&-1!==n.indexOf(z)&&v!==z?w=!0:z!==v&&(q=!1)}for(r=1;r<l.length&&q;r++)v=l[r][u],"type"===u&&-1!==n.indexOf(p)&&-1!==n.indexOf(v)&&p!==v?x=!0:l[r][u]!==p&&(q=!1);if(q){w&&(h[k[0]._name].type="linear");x&&(h[l[0]._name].type="linear");r=h;p=k;q=l;z=e._fullLayout._dfltTitle;w=M.nestedProperty;x=w(r[p[0]._name],u).get();v=w(r[q[0]._name],u).get();"title"===u&&(x&&x.text===z.x&&(x.text=z.y),v&&v.text===z.y&&(v.text=
z.x));for(z=0;z<p.length;z++)w(r,p[z]._name+"."+u).set(v);for(z=0;z<q.length;z++)w(r,q[z]._name+"."+u).set(x)}}}for(d=0;d<e._fullLayout.annotations.length;d++)k=e._fullLayout.annotations[d],-1!==f.indexOf(k.xref)&&-1!==g.indexOf(k.yref)&&M.swapAttrs(h.annotations[d],["?"])}}},{"../../components/color":591,"../../components/drawing":612,"../../components/titles":678,"../../constants/alignment":685,"../../constants/numerical":692,"../../lib":716,"../../lib/svg_text_utils":740,"../../plots/plots":825,
"../../registry":845,"./autorange":763,"./axis_autotype":765,"./axis_ids":767,"./clean_ticks":769,"./layout_attributes":776,"./set_convert":782,d3:165,"fast-isnumeric":228}],765:[function(a,q,p){var n=a("fast-isnumeric"),k=a("../../lib"),m=a("../../constants/numerical").BADNUM;q.exports=function(a,b,g){g=g||{};if(g=!g.noMultiCategory)g=k.isArrayOrTypedArray(a[0])&&k.isArrayOrTypedArray(a[1]);if(g)return"multicategory";g=Math.max(1,(a.length-1)/1E3);for(var e=0,h=0,l={},f=0;f<a.length;f+=g){var d=
a[Math.round(f)],c=String(d);l[c]||(l[c]=1,k.isDateTime(d,b)&&(e+=1),n(d)&&(h+=1))}if(e>2*h)return"date";b=Math.max(1,(a.length-1)/1E3);e=g=0;h={};for(l=0;l<a.length;l+=b)f=a[Math.round(l)],d=String(f),h[d]||(h[d]=1,"boolean"===typeof f?e++:k.cleanNumber(f)!==m?g++:"string"===typeof f&&e++);if(e>2*g)return"category";a:{if(a)for(b=0;b<a.length;b++)if(n(a[b])){a=!0;break a}a=!1}return a?"linear":"-"}},{"../../constants/numerical":692,"../../lib":716,"fast-isnumeric":228}],766:[function(a,q,p){var n=
a("../../registry"),k=a("../../lib"),m=a("./layout_attributes"),h=a("./tick_value_defaults"),b=a("./tick_mark_defaults"),g=a("./tick_label_defaults"),e=a("./category_order_defaults"),t=a("./line_grid_defaults"),l=a("./set_convert");q.exports=function(a,d,c,r,u){var f=r.letter,p=r.font||{},q=r.splomStash||{},A=c("visible",!r.visibleDflt),z=d.type;"date"===z&&n.getComponentMethod("calendars","handleDefaults")(a,d,"calendar",r.calendar);l(d,u);var x=!d.isValidRange(a.range);x&&r.reverseDflt&&(x="reversed");
!c("autorange",x)||"linear"!==z&&"-"!==z||c("rangemode");c("range");d.cleanRange();e(a,d,c,r);"category"===z||r.noHover||c("hoverformat");x=c("color");var C=x!==m.color.dflt?x:p.color;u=q.label||u._dfltTitle[f];g(a,d,c,z,r,{pass:1});if(!A)return d;c("title.text",u);k.coerceFont(c,"title.font",{family:p.family,size:Math.round(1.2*p.size),color:C});h(a,d,c,z);g(a,d,c,z,r,{pass:2});b(a,d,c,r);t(a,d,c,{dfltColor:x,bgColor:r.bgColor,showGrid:r.showGrid,attributes:m});(d.showline||d.ticks)&&c("mirror");
r.automargin&&c("automargin");a="multicategory"===d.type;if(!r.noTickson&&("category"===d.type||a)&&(d.ticks||d.showgrid)){var B;a&&(B="boundaries");c("tickson",B)}a&&c("showdividers")&&(c("dividercolor"),c("dividerwidth"));return d}},{"../../lib":716,"../../registry":845,"./category_order_defaults":768,"./layout_attributes":776,"./line_grid_defaults":778,"./set_convert":782,"./tick_label_defaults":783,"./tick_mark_defaults":784,"./tick_value_defaults":785}],767:[function(a,q,p){var n=a("../../registry"),
k=a("./constants");p.id2name=function(a){if("string"===typeof a&&a.match(k.AX_ID_PATTERN)){var h=a.substr(1);"1"===h&&(h="");return a.charAt(0)+"axis"+h}};p.name2id=function(a){if(a.match(k.AX_NAME_PATTERN)){var h=a.substr(5);"1"===h&&(h="");return a.charAt(0)+h}};p.cleanId=function(a,h){if(a.match(k.AX_ID_PATTERN)&&(!h||a.charAt(0)===h))return h=a.substr(1).replace(/^0+/,""),"1"===h&&(h=""),a.charAt(0)+h};p.list=function(a,h,b){var g=a._fullLayout;if(!g)return[];var e=p.listIds(a,h);a=Array(e.length);
var k;for(k=0;k<e.length;k++){var l=e[k];a[k]=g[l.charAt(0)+"axis"+l.substr(1)]}if(!b)for(b=g._subplots.gl3d||[],k=0;k<b.length;k++)e=g[b[k]],h?a.push(e[h+"axis"]):a.push(e.xaxis,e.yaxis,e.zaxis);return a};p.listIds=function(a,h){a=a._fullLayout;if(!a)return[];a=a._subplots;return h?a[h+"axis"]:a.xaxis.concat(a.yaxis)};p.getFromId=function(a,h,b){a=a._fullLayout;"x"===b?h=h.replace(/y[0-9]*/,""):"y"===b&&(h=h.replace(/x[0-9]*/,""));return a[p.id2name(h)]};p.getFromTrace=function(a,h,b){var g=a._fullLayout,
e=null;n.traceIs(h,"gl3d")?(a=h.scene,"scene"===a.substr(0,5)&&(e=g[a][b+"axis"])):e=p.getFromId(a,h[b+"axis"]||b);return e};p.idSort=function(a,h){var b=a.charAt(0),g=h.charAt(0);return b!==g?b>g?1:-1:+(a.substr(1)||1)-+(h.substr(1)||1)};p.getAxisGroup=function(a,h){a=a._axisMatchGroups;for(var b=0;b<a.length;b++)if(a[b][h])return"g"+b;return h}},{"../../registry":845,"./constants":770}],768:[function(a,q,p){q.exports=function(a,k,m,h){if("category"===k.type){a=a.categoryarray;a=Array.isArray(a)&&
0<a.length;var b;a&&(b="array");b=m("categoryorder",b);var g;"array"===b&&(g=m("categoryarray"));a||"array"!==b||(b=k.categoryorder="trace");if("trace"===b)k._initialCategories=[];else if("array"===b)k._initialCategories=g.slice();else{m=h.dataAttr||k._id.charAt(0);g={};var e;if(h.axData)a=h.axData;else for(a=[],e=0;e<h.data.length;e++){var t=h.data[e];t[m+"axis"]===k._id&&a.push(t)}for(e=0;e<a.length;e++)for(t=a[e][m],h=0;h<t.length;h++){var l=t[h];null!==l&&void 0!==l&&(g[l]=1)}g=Object.keys(g).sort();
"category ascending"===b?k._initialCategories=g:"category descending"===b&&(k._initialCategories=g.reverse())}}}},{}],769:[function(a,q,p){var n=a("fast-isnumeric"),k=a("../../lib"),m=a("../../constants/numerical").ONEDAY;p.dtick=function(a,b){var g="log"===b,e="date"===b,h="category"===b;b=e?m:1;if(!a)return b;if(n(a))return a=Number(a),0>=a?b:h?Math.max(1,Math.round(a)):e?Math.max(.1,a):a;if("string"!==typeof a||!e&&!g)return b;h=a.charAt(0);var k=a.substr(1);k=n(k)?Number(k):0;return 0>=k||!(e&&
"M"===h&&k===Math.round(k)||g&&"L"===h||g&&"D"===h&&(1===k||2===k))?b:a};p.tick0=function(a,b,g,e){if("date"===b)return k.cleanDate(a,k.dateTick0(g));if("D1"!==e&&"D2"!==e)return n(a)?Number(a):0}},{"../../constants/numerical":692,"../../lib":716,"fast-isnumeric":228}],770:[function(a,q,p){a=a("../../lib/regex").counter;q.exports={idRegex:{x:a("x"),y:a("y")},attrRegex:a("[xy]axis"),xAxisMatch:a("xaxis"),yAxisMatch:a("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,
MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:"imagelayer heatmaplayer contourcarpetlayer contourlayer funnellayer waterfalllayer barlayer carpetlayer violinlayer boxlayer ohlclayer scattercarpetlayer scatterlayer".split(" "),clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":732}],
771:[function(a,q,p){function n(a,c,e,f,g){var d="range"!==g,h=f[b(c)].type,k;g=[];for(k=0;k<e.length;k++){var l=e[k];if(l!==c){var r=f[b(l)];r.type===h&&(r.fixedrange?d&&r.anchor&&f[b(r.anchor)].fixedrange&&g.push(l):g.push(l))}}for(k=0;k<a.length;k++)if(a[k][c]){a=a[k];c=[];for(k=0;k<g.length;k++)l=g[k],a[l]||c.push(l);return{linkableAxes:c,thisGroup:a}}return{linkableAxes:g,thisGroup:null}}function k(b,a,e,f,g){var c;if(null===a){a={};a[e]=1;var d=b.length;b.push(a)}else d=b.indexOf(a);var h=Object.keys(a);
for(c=0;c<b.length;c++)if(e=b[c],c!==d&&e[f]){var k=e[f];for(c=0;c<h.length;c++)f=h[c],e[f]=k*g*a[f];b.splice(d,1);return}if(1!==g)for(c=0;c<h.length;c++)a[h[c]]*=g;a[f]=1}function m(b,a){var c=b._inputDomain,d=c[0]+(c[1]-c[0])*f[b.constraintoward];b.domain=b._input.domain=[d+(c[0]-d)/a,d+(c[1]-d)/a];b.setScale()}var h=a("../../lib"),b=a("./axis_ids").id2name,g=a("./scale_zoom"),e=a("./autorange").makePadFn,t=a("./autorange").concatExtremes,l=a("../../constants/numerical").ALMOST_EQUAL,f=a("../../constants/alignment").FROM_BL;
p.handleConstraintDefaults=function(b,a,e,f){var c=f.allAxisIds,d=f.layoutOut,g=f.scaleanchorDflt,l=f.constrainDflt;f=d._axisConstraintGroups;var r=d._axisMatchGroups,m=a._id,t=m.charAt(0);t=((d._splomAxes||{})[t]||{})[m]||{};m=a._id;var u=m.charAt(0);l=e("constrain",l);h.coerce(b,a,{constraintoward:{valType:"enumerated",values:"x"===u?["left","center","right"]:["bottom","middle","top"],dflt:"x"===u?"center":"middle"}},"constraintoward");if((b.matches||t.matches)&&!a.fixedrange){var p=n(r,m,c,d);
var q=h.coerce(b,a,{matches:{valType:"enumerated",values:p.linkableAxes||[],dflt:t.matches}},"matches")}if(!(q||a.fixedrange&&"domain"!==l)&&(b.scaleanchor||g)){var E=n(f,m,c,d,l);var F=h.coerce(b,a,{scaleanchor:{valType:"enumerated",values:E.linkableAxes||[]}},"scaleanchor",g)}q?(delete a.constrain,k(r,p.thisGroup,m,q,1)):-1!==c.indexOf(b.matches)&&h.warn("ignored "+a._name+'.matches: "'+b.matches+'" to avoid either an infinite loop or because the target axis has fixed range.');F?(b=e("scaleratio"),
b||(b=a.scaleratio=1),k(f,E.thisGroup,m,F,b)):-1!==c.indexOf(b.scaleanchor)&&h.warn("ignored "+a._name+'.scaleanchor: "'+b.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because the target axis has fixed range or this axis declares a *matches* constraint.')};p.enforce=function(a){var c=a._fullLayout,d=c._axisConstraintGroups||[],f,h,k,n;for(f=0;f<d.length;f++){var p=d[f],q=Object.keys(p),x=Infinity,C=0,B=Infinity,D={},G={},E=!1;for(h=0;h<q.length;h++){var F=
q[h];G[F]=k=c[b(F)];k._inputDomain?k.domain=k._inputDomain.slice():k._inputDomain=k.domain.slice();k._inputRange||(k._inputRange=k.range.slice());k.setScale();D[F]=n=Math.abs(k._m)/p[F];x=Math.min(x,n);"domain"!==k.constrain&&k._constraintShrinkable||(B=Math.min(B,n));delete k._constraintShrinkable;C=Math.max(C,n);"domain"===k.constrain&&(E=!0)}if(!(x>l*C)||E)for(h=0;h<q.length;h++)if(F=q[h],n=D[F],k=G[F],F=k.constrain,n!==B||"domain"===F)if(n/=B,"range"===F)g(k,n);else if(F=k._inputDomain,p=(k.domain[1]-
k.domain[0])/(F[1]-F[0]),x=(k.r2l(k.range[1])-k.r2l(k.range[0]))/(k.r2l(k._inputRange[1])-k.r2l(k._inputRange[0])),n/=p,1>n*x)k.domain=k._input.domain=F.slice(),g(k,n);else{1>x&&(k.range=k._input.range=k._inputRange.slice(),n*=x);if(k.autorange){F=k.r2l(k.range[0]);p=k.r2l(k.range[1]);var L=(F+p)/2;C=x=L;E=Math.abs(p-L);var J=L-E*n*1.0001;L+=E*n*1.0001;var H=e(k);m(k,n);var K=Math.abs(k._m),M=t(a,k),I=M.min;M=M.max;var N;for(N=0;N<I.length;N++){var O=I[N].val-H(I[N])/K;O>J&&O<x&&(x=O)}for(N=0;N<M.length;N++)O=
M[N].val+H(M[N])/K,O<L&&O>C&&(C=O);n/=(C-x)/(2*E);x=k.l2r(x);C=k.l2r(C);k.range=k._input.range=F<p?[x,C]:[C,x]}m(k,n)}}};p.clean=function(b,a){if(a._inputDomain){var c=!1,d=a._id;b=b._fullLayout._axisConstraintGroups;for(var e=0;e<b.length;e++)if(b[e][d]){c=!0;break}c&&"domain"===a.constrain||(a._input.domain=a.domain=a._inputDomain,delete a._inputDomain)}}},{"../../constants/alignment":685,"../../constants/numerical":692,"../../lib":716,"./autorange":763,"./axis_ids":767,"./scale_zoom":780}],772:[function(a,
q,p){function n(b,a,c,d){a=D.ensureSingle(b.draglayer,a,c,function(a){a.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",b.id)});a.call(H,d);return a.node()}function k(b,a,c,d,e,f,g){b=n(b,"rect",a,c);z.select(b).call(F.setRect,d,e,f,g);return b}function m(b,a){for(var c=0;c<b.length;c++)if(!b[c].fixedrange)return a;return""}function h(b,a){var c=b.range[a];a=Math.abs(c-b.range[1-a]);if("date"===b.type)return c;if("log"===b.type)return b=Math.ceil(Math.max(0,-Math.log(a)/
Math.LN10))+3,z.format("."+b+"g")(Math.pow(10,c));b=Math.floor(Math.log(Math.abs(c))/Math.LN10)-Math.floor(Math.log(a)/Math.LN10)+4;return z.format("."+String(b)+"g")(c)}function b(a,c,d,e,f){for(var g=0;g<a.length;g++){var h=a[g];if(!h.fixedrange){var k=h._rl[0],l=h._rl[1]-k;e[h._name+".range[0]"]=h.l2r(k+l*c);e[h._name+".range[1]"]=h.l2r(k+l*d)}}f&&f.length&&(a=(c+(1-d))/2,b(f,a,1-a,e,[]))}function g(b,a){for(var c=0;c<b.length;c++){var d=b[c];d.fixedrange||(d.range=[d.l2r(d._rl[0]-a/d._m),d.l2r(d._rl[1]-
a/d._m)])}}function e(b,a,c){return b?"nsew"===b?c?"":"pan"===a?"move":"crosshair":b.toLowerCase()+"-resize":"pointer"}function t(b,a,c,d,e){return b.append("path").attr("class","zoombox").style({fill:.2<a?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+c+", "+d+")").attr("d",e+"Z")}function l(b,a,c){return b.append("path").attr("class","zoombox-corners").style({fill:E.background,stroke:E.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+
a+", "+c+")").attr("d","M0,0Z")}function f(b,a,c,e,f,g){b.attr("d",e+"M"+c.l+","+c.t+"v"+c.h+"h"+c.w+"v-"+c.h+"h-"+c.w+"Z");d(b,a,f,g)}function d(b,a,c,d){c||(b.transition().style("fill",.2<d?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),a.transition().style("opacity",1).duration(200))}function c(b){z.select(b).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function r(b){U&&b.data&&b._context.showTips&&(D.notifier(D._(b,"Double-click to zoom back out"),
"long"),U=!1)}function u(b){return"lasso"===b||"select"===b}function v(b){var a=Math.floor(Math.min(b.b-b.t,b.r-b.l,R)/2);return"M"+(b.l-3.5)+","+(b.t-.5+a)+"h3v"+-a+"h"+a+"v-3h-"+(a+3)+"ZM"+(b.r+3.5)+","+(b.t-.5+a)+"h-3v"+-a+"h"+-a+"v-3h"+(a+3)+"ZM"+(b.r+3.5)+","+(b.b+.5-a)+"h-3v"+a+"h"+-a+"v3h"+(a+3)+"ZM"+(b.l-3.5)+","+(b.b+.5-a)+"h3v"+a+"h"+a+"v3h-"+(a+3)+"Z"}function w(b,a,c,d){for(var e=!1,f={},g={},h,k,l,r,m=0;m<a.length;m++){var t=a[m];for(h in c)if(t[h]){for(l in t)("x"===l.charAt(0)?c:d)[l]||
(f[l]=h);for(k in d)t[k]&&(e=!0)}for(k in d)if(t[k])for(r in t)("x"===r.charAt(0)?c:d)[r]||(g[r]=k)}e&&(D.extendFlat(f,g),g={});a={};c=[];for(l in f)d=P(b,l),c.push(d),a[d._id]=d;l={};d=[];for(r in g)h=P(b,r),d.push(h),l[h._id]=h;return{xaHash:a,yaHash:l,xaxes:c,yaxes:d,xLinks:f,yLinks:g,isSubplotConstrained:e}}function y(b,a){if(C){var c=void 0!==b.onwheel?"wheel":"mousewheel";b._onwheel&&b.removeEventListener(c,b._onwheel);b._onwheel=a;b.addEventListener(c,a,{passive:!1})}else void 0!==b.onwheel?
b.onwheel=a:void 0!==b.onmousewheel&&(b.onmousewheel=a)}function A(b){var a=[],c;for(c in b)a.push(b[c]);return a}var z=a("d3"),x=a("tinycolor2"),C=a("has-passive-events"),B=a("../../registry"),D=a("../../lib"),G=a("../../lib/svg_text_utils"),E=a("../../components/color"),F=a("../../components/drawing"),L=a("../../components/fx"),J=a("./axes"),H=a("../../lib/setcursor"),K=a("../../components/dragelement"),M=a("../../constants/alignment").FROM_TL,I=a("../../lib/clear_gl_canvases"),N=a("../../plot_api/subroutines").redrawReglTraces,
O=a("../plots"),P=a("./axis_ids").getFromId,Q=a("./select").prepSelect,T=a("./select").clearSelect,V=a("./select").selectOnClick,Y=a("./scale_zoom"),ca=a("./constants"),Z=ca.MINDRAG,R=ca.MINZOOM,U=!0;q.exports={makeDragBox:function(a,d,n,p,q,C,E,H){function la(){Na=d.xaxis;Ja=d.yaxis;db=Na._length;ab=Ja._length;Fa=Na._offset;ub=Ja._offset;pa={};pa[Na._id]=Na;qa={};qa[Ja._id]=Ja;if(E&&H)for(var b=d.overlays,c=0;c<b.length;c++){var e=b[c].xaxis;pa[e._id]=e;e=b[c].yaxis;qa[e._id]=e}Pa=A(pa);va=A(qa);
jb=m(Pa,H);Oa=m(va,E);Za=!Oa&&!jb;eb=w(a,a._fullLayout._axisConstraintGroups,pa,qa);gb=w(a,a._fullLayout._axisMatchGroups,pa,qa);Wc=H||eb.isSubplotConstrained||gb.isSubplotConstrained;vb=E||eb.isSubplotConstrained||gb.isSubplotConstrained;b=a._fullLayout;Nb=b._has("scattergl");Ya=b._has("splom");td=b._has("svg")}function X(b,e){var f=a._fullLayout.clickmode;c(a);2!==b||Ba||Da();if(Ea)-1<f.indexOf("select")&&V(e,a,Pa,va,d.id,Hb),-1<f.indexOf("event")&&L.click(a,e,d.id);else if(1===b&&Ba){var g=E?Ja:
Na;b="s"===E||"w"===H?0:1;var k=g._name+".range["+b+"]";b=h(g,b);e="left";f="middle";if(!g.fixedrange&&(E?(f="n"===E?"top":"bottom","right"===g.side&&(e="right")):"e"===H&&(e="right"),a._context.showAxisRangeEntryBoxes))z.select(Nc).call(G.makeEditable,{gd:a,immediate:!0,background:a._fullLayout.paper_bgcolor,text:String(b),fill:g.tickfont?g.tickfont.color:"#444",horizontalAlign:e,verticalAlign:f}).on("edit",function(b){b=g.d2r(b);void 0!==b&&B.call("_guiRelayout",a,k,b)})}}function fa(b,c,d){b=Nc.getBoundingClientRect();
Yb=c-b.left;uc=d-b.top;$a={l:Yb,r:Yb,w:0,t:uc,b:uc,h:0};Xd=a._hmpixcount?a._hmlumcount/a._hmpixcount:x(a._fullLayout.plot_bgcolor).getLuminance();Fc="M0,0H"+db+"V"+ab+"H0V0";Md=!1;nc="xy";Oc=!1;Yd=t(ba,Xd,Fa,ub,Fc);Ub=l(ba,Fa,ub)}function ma(b,c){function d(){nc="";$a.r=$a.l;$a.t=$a.b;Ub.attr("d","M0,0Z")}if(a._transitioningWithDuration)return!1;b=Math.max(0,Math.min(db,b+Yb));c=Math.max(0,Math.min(ab,c+uc));var e=Math.abs(b-Yb),g=Math.abs(c-uc);$a.l=Math.min(Yb,b);$a.r=Math.max(Yb,b);$a.t=Math.min(uc,
c);$a.b=Math.max(uc,c);eb.isSubplotConstrained?e>R||g>R?(nc="xy",e/db>g/ab?(g=e*ab/db,uc>c?$a.t=uc-g:$a.b=uc+g):(e=g*db/ab,Yb>b?$a.l=Yb-e:$a.r=Yb+e),Ub.attr("d",v($a))):d():gb.isSubplotConstrained?e>R||g>R?(nc="xy",b=Math.min($a.l/db,(ab-$a.b)/ab),c=Math.max($a.r/db,(ab-$a.t)/ab),$a.l=b*db,$a.r=c*db,$a.b=(1-b)*ab,$a.t=(1-c)*ab,Ub.attr("d",v($a))):d():!Oa||g<Math.min(Math.max(.6*e,Z),R)?e<Z||!jb?d():($a.t=0,$a.b=ab,nc="x",Ub.attr("d","M"+($a.l-.5)+","+(uc-R-.5)+"h-3v"+(2*R+1)+"h3ZM"+($a.r+.5)+","+
(uc-R-.5)+"h3v"+(2*R+1)+"h-3Z")):!jb||e<Math.min(.6*g,R)?($a.l=0,$a.r=db,nc="y",Ub.attr("d","M"+(Yb-R-.5)+","+($a.t-.5)+"v-3h"+(2*R+1)+"v3ZM"+(Yb-R-.5)+","+($a.b+.5)+"v3h"+(2*R+1)+"v-3Z")):(nc="xy",Ub.attr("d",v($a)));$a.w=$a.r-$a.l;$a.h=$a.b-$a.t;nc&&(Oc=!0);a._dragged=Oc;f(Yd,Ub,$a,Fc,Md,Xd);U();a.emit("plotly_relayouting",mc);Md=!0}function U(){mc={};if("xy"===nc||"x"===nc)b(Pa,$a.l/db,$a.r/db,mc,eb.xaxes),na("x",mc);if("xy"===nc||"y"===nc)b(va,(ab-$a.b)/ab,(ab-$a.t)/ab,mc,eb.yaxes),na("y",mc)}
function da(){U();c(a);ra();r(a)}function ea(b){function c(b,a,c){if(!b.fixedrange){var d=D.simpleMap(b.range,b.r2l),e=d[0]+(d[1]-d[0])*a;b.range=d.map(function(a){return b.l2r(e+(a-e)*c)})}}if(a._context._scrollZoom.cartesian||a._fullLayout._enablescrollzoom)if(Hb.plotinfo.selection=!1,T(a),a._transitioningWithDuration)b.preventDefault(),b.stopPropagation();else{la();clearTimeout(Nd);var d=-b.deltaY;isFinite(d)||(d=b.wheelDelta/10);if(isFinite(d)){d=Math.exp(-Math.min(Math.max(d,-20),20)/200);var e=
Yg.draglayer.select(".nsewdrag").node().getBoundingClientRect(),f=(b.clientX-e.left)/e.width;e=(e.bottom-b.clientY)/e.height;var g;if(Wc){H||(f=.5);for(g=0;g<Pa.length;g++)c(Pa[g],f,d);na("x");pb[2]*=d;pb[0]+=pb[2]*f*(1/d-1)}if(vb){E||(e=.5);for(g=0;g<va.length;g++)c(va[g],e,d);na("y");pb[3]*=d;pb[1]+=pb[3]*(1-e)*(1/d-1)}ua(pb);za();a.emit("plotly_relayouting",mc);Nd=setTimeout(function(){pb=[0,0,db,ab];ra()},Xc);b.preventDefault()}else D.log("Did not find wheel motion attributes: ",b)}}function aa(b,
c){function d(b,a,c){for(var d=1-a,e,f,g=0;g<b.length;g++){var h=b[g];if(!h.fixedrange){e=h;f=c/h._length;f=h._rl[d]+(h._rl[a]-h._rl[d])/(1-(0<=f?Math.min(f,.9):1/(1/Math.max(f,-.3)+3.222)));var k=h.l2r(f);!1!==k&&void 0!==k&&(h.range[a]=k)}}return e._length*(e._rl[a]-f)/(e._rl[a]-e._rl[d])}if(!a._transitioningWithDuration){a._fullLayout._replotting=!0;if("ew"===jb||"ns"===Oa)jb&&(g(Pa,b),na("x")),Oa&&(g(va,c),na("y")),ua([jb?-b:0,Oa?-c:0,db,ab]);else{if(eb.isSubplotConstrained&&jb&&Oa){var e="w"===
jb===("n"===Oa)?1:-1;c=(b/db+e*c/ab)/2;b=c*db;c=e*c*ab}"w"===jb?b=d(Pa,0,b):"e"===jb?b=d(Pa,1,-b):jb||(b=0);"n"===Oa?c=d(va,1,c):"s"===Oa?c=d(va,0,-c):Oa||(c=0);e="w"===jb?b:0;var f="n"===Oa?c:0;if(eb.isSubplotConstrained){var h;if(!jb&&1===Oa.length){for(h=0;h<Pa.length;h++)Pa[h].range=Pa[h]._r.slice(),Y(Pa[h],1-c/ab);b=c*db/ab;e=b/2}if(!Oa&&1===jb.length){for(h=0;h<va.length;h++)va[h].range=va[h]._r.slice(),Y(va[h],1-b/db);c=b*ab/db;f=c/2}}na("x");na("y");ua([e,f,db-b,ab-c])}za();a.emit("plotly_relayouting",
mc)}}function na(b,a){var c=gb.isSubplotConstrained?{x:va,y:Pa}[b]:gb[b+"axes"];b=gb.isSubplotConstrained?{x:Pa,y:va}[b]:[];for(var d=0;d<c.length;d++){var e=c[d],f=e._id;f=gb.xLinks[f]||gb.yLinks[f];if(f=b[0]||pa[f]||qa[f])a?(a[e._name+".range[0]"]=a[f._name+".range[0]"],a[e._name+".range[1]"]=a[f._name+".range[1]"]):e.range=f.range.slice()}}function za(){function b(b){for(d=0;d<b.length;d++)b[d].fixedrange||c.push(b[d]._id)}var c=[],d;Wc&&(b(Pa),b(eb.xaxes),b(gb.xaxes));vb&&(b(va),b(eb.yaxes),b(gb.yaxes));
mc={};for(d=0;d<c.length;d++){var e=P(a,c[d]);J.drawOne(a,e,{skipTitle:!0});mc[e._name+".range[0]"]=e.range[0];mc[e._name+".range[1]"]=e.range[1]}J.redrawComponents(a,c)}function Da(){if(!a._transitioningWithDuration){var b=a._context.doubleClick,c=[];jb&&(c=c.concat(Pa));Oa&&(c=c.concat(va));gb.xaxes&&(c=c.concat(gb.xaxes));gb.yaxes&&(c=c.concat(gb.yaxes));var d={},e;if("reset+autosize"===b)for(b="autosize",e=0;e<c.length;e++){var f=c[e];if(f._rangeInitial&&(f.range[0]!==f._rangeInitial[0]||f.range[1]!==
f._rangeInitial[1])||!f._rangeInitial&&!f.autorange){b="reset";break}}if("autosize"===b)for(e=0;e<c.length;e++)f=c[e],f.fixedrange||(d[f._name+".autorange"]=!0);else if("reset"===b){if(jb||eb.isSubplotConstrained)c=c.concat(eb.xaxes);Oa&&!eb.isSubplotConstrained&&(c=c.concat(eb.yaxes));eb.isSubplotConstrained&&(jb?Oa||(c=c.concat(va)):c=c.concat(Pa));for(e=0;e<c.length;e++)f=c[e],f.fixedrange||(f._rangeInitial?(b=f._rangeInitial,d[f._name+".range[0]"]=b[0],d[f._name+".range[1]"]=b[1]):d[f._name+".autorange"]=
!0)}a.emit("plotly_doubleclick",null);B.call("_guiRelayout",a,d)}}function ra(){ua([0,0,db,ab]);D.syncOrAsync([O.previousPromises,function(){a._fullLayout._replotting=!1;B.call("_guiRelayout",a,mc)}],a)}function ua(b){var c=a._fullLayout,d=c._plots;c=c._subplots.cartesian;var e;Ya&&B.subplotsRegistry.splom.drag(a);if(Nb)for(e=0;e<c.length;e++){var f=d[c[e]];var g=f.xaxis;var h=f.yaxis;if(f._scene){var k=D.simpleMap(g.range,g.r2l);h=D.simpleMap(h.range,h.r2l);f._scene.update({range:[k[0],h[0],k[1],
h[1]]})}}if(Ya||Nb)I(a),N(a);if(td){k=b[2]/Na._length;var l=b[3]/Ja._length;for(e=0;e<c.length;e++){f=d[c[e]];g=f.xaxis;h=f.yaxis;var r=vb&&!h.fixedrange&&qa[h._id];if(Wc&&!g.fixedrange&&pa[g._id]){var m=k;var t=H?b[0]:Ma(g,m)}else gb.xaHash[g._id]?(m=k,t=b[0]*g._length/Na._length):gb.yaHash[g._id]?(m=l,t="ns"===Oa?-b[1]*g._length/Ja._length:Ma(g,m,{n:"top",s:"bottom"}[Oa])):(m=Aa(g,k,l),t=wa(g,m));if(r){r=l;var n=E?b[1]:Ma(h,r)}else gb.yaHash[h._id]?(r=l,n=b[1]*h._length/Ja._length):gb.xaHash[h._id]?
(r=k,n="ew"===jb?-b[0]*h._length/Na._length:Ma(h,r,{e:"right",w:"left"}[jb])):(r=Aa(h,k,l),n=wa(h,r));if(m||r){m||(m=1);r||(r=1);g=g._offset-t/m;h=h._offset-n/r;f.clipRect.call(F.setTranslate,t,n).call(F.setScale,m,r);f.plot.call(F.setTranslate,g,h).call(F.setScale,1/m,1/r);if(m!==f.xScaleFactor||r!==f.yScaleFactor)F.setPointGroupScale(f.zoomScalePts,m,r),F.setTextPointsScale(f.zoomScaleTxt,m,r);F.hideOutsideRangePoints(f.clipOnAxisFalseTraces,f);f.xScaleFactor=m;f.yScaleFactor=r}}}}function Aa(b,
a,c){return b.fixedrange?0:Wc&&eb.xaHash[b._id]?a:vb&&(eb.isSubplotConstrained?eb.xaHash:eb.yaHash)[b._id]?c:0}function wa(b,a){return a?(b.range=b._r.slice(),Y(b,a),Ma(b,a)):0}function Ma(b,a,c){return b._length*(1-a)*M[c||b.constraintoward||"middle"]}var ba=a._fullLayout._zoomlayer,Ea="nsew"===E+H,Ba=1===(E+H).length,Na,Ja,pa,qa,Pa,va,Fa,ub,db,ab,eb,gb,jb,Oa,Za,Wc,vb,Nb,Ya,td,mc;la();var ud=e(Oa+jb,a._fullLayout.dragmode,Ea),Nc=k(d,E+H+"drag",ud,n,p,q,C);if(Za&&!Ea)return Nc.onmousedown=null,Nc.style.pointerEvents=
"none",Nc;var Hb={element:Nc,gd:a,plotinfo:d,prepFn:function(b,c,d){var e=Hb.dragmode,f=a._fullLayout.dragmode;f!==e&&(Hb.dragmode=f);la();Za||(Ea?b.shiftKey?"pan"===f?f="zoom":u(f)||(f="pan"):b.ctrlKey&&(f="pan"):f="pan");Hb.minDrag="lasso"===f?1:void 0;u(f)?(Hb.xaxes=Pa,Hb.yaxes=va,Q(b,c,d,Hb,f)):(Hb.clickFn=X,u(e)&&(Hb.plotinfo.selection=!1,T(a)),Za||("zoom"===f?(Hb.moveFn=ma,Hb.doneFn=da,Hb.minDrag=1,fa(b,c,d)):"pan"===f&&(Hb.moveFn=aa,Hb.doneFn=ra)));a._fullLayout._redrag=function(){var b=a._dragdata;
b&&b.element===Nc&&!u(a._fullLayout.dragmode)&&(la(),ua([0,0,db,ab]),Hb.moveFn(b.dx,b.dy))}}};K.init(Hb);var Yb,uc,$a,Xd,Fc,Md,nc,Yd,Ub,Oc,pb=[0,0,db,ab],Nd=null,Xc=ca.REDRAWDELAY,Yg=d.mainplot?a._fullLayout._plots[d.mainplot]:d;1!==E.length*H.length&&y(Nc,ea);return Nc},makeDragger:n,makeRectDragger:k,makeZoombox:t,makeCorners:l,updateZoombox:f,xyCorners:v,transitionZoombox:d,removeZoombox:c,showDoubleClickNotifier:r,attachWheelEventHandler:y}},{"../../components/color":591,"../../components/dragelement":609,
"../../components/drawing":612,"../../components/fx":629,"../../constants/alignment":685,"../../lib":716,"../../lib/clear_gl_canvases":701,"../../lib/setcursor":736,"../../lib/svg_text_utils":740,"../../plot_api/subroutines":755,"../../registry":845,"../plots":825,"./axes":764,"./axis_ids":767,"./constants":770,"./scale_zoom":780,"./select":781,d3:165,"has-passive-events":412,tinycolor2:535}],773:[function(a,q,p){var n=a("d3"),k=a("../../components/fx"),m=a("../../components/dragelement"),h=a("../../lib/setcursor"),
b=a("./dragbox").makeDragBox,g=a("./constants").DRAGGERSIZE;p.initInteractions=function(a){var e=a._fullLayout;if(a._context.staticPlot)n.select(a).selectAll(".drag").remove();else if(e._has("cartesian")||e._has("splom")){Object.keys(e._plots||{}).sort(function(b,a){return(e._plots[b].mainplot&&!0)===(e._plots[a].mainplot&&!0)?(b=b.split("y"),a=a.split("y"),b[0]===a[0]?Number(b[1]||1)-Number(a[1]||1):Number(b[0]||1)-Number(a[0]||1)):e._plots[b].mainplot?1:-1}).forEach(function(f){var d=e._plots[f],
c=d.xaxis,h=d.yaxis;if(!d.mainplot){var l=b(a,d,c._offset,h._offset,c._length,h._length,"ns","ew");l.onmousemove=function(b){a._fullLayout._rehover=function(){a._fullLayout._hoversubplot===f&&a._fullLayout._plots[f]&&k.hover(a,b,f)};k.hover(a,b,f);a._fullLayout._lasthover=l;a._fullLayout._hoversubplot=f};l.onmouseout=function(b){a._dragging||(a._fullLayout._hoversubplot=null,m.unhover(a,b))};a._context.showAxisDragHandles&&(b(a,d,c._offset-g,h._offset-g,g,g,"n","w"),b(a,d,c._offset+c._length,h._offset-
g,g,g,"n","e"),b(a,d,c._offset-g,h._offset+h._length,g,g,"s","w"),b(a,d,c._offset+c._length,h._offset+h._length,g,g,"s","e"))}if(a._context.showAxisDragHandles){if(f===c._mainSubplot){var t=c._mainLinePosition;"top"===c.side&&(t-=g);b(a,d,c._offset+.1*c._length,t,.8*c._length,g,"","ew");b(a,d,c._offset,t,.1*c._length,g,"","w");b(a,d,c._offset+.9*c._length,t,.1*c._length,g,"","e")}f===h._mainSubplot&&(c=h._mainLinePosition,"right"!==h.side&&(c-=g),b(a,d,c,h._offset+.1*h._length,g,.8*h._length,"ns",
""),b(a,d,c,h._offset+.9*h._length,g,.1*h._length,"s",""),b(a,d,c,h._offset,g,.1*h._length,"n",""))}});var h=e._hoverlayer.node();h.onmousemove=function(b){b.target=a._fullLayout._lasthover;k.hover(a,b,e._hoversubplot)};h.onclick=function(b){b.target=a._fullLayout._lasthover;k.click(a,b)};h.onmousedown=function(b){a._fullLayout._lasthover.onmousedown(b)};p.updateFx(a)}};p.updateFx=function(b){b=b._fullLayout;h(b._draggers,"pan"===b.dragmode?"move":"crosshair")}},{"../../components/dragelement":609,
"../../components/fx":629,"../../lib/setcursor":736,"./constants":770,"./dragbox":772,d3:165}],774:[function(a,q,p){var n=a("../../registry"),k=a("../../lib");q.exports=function(a){return function(h,b){h=h[a];if(Array.isArray(h)){var g=n.subplotsRegistry.cartesian,e=g.idRegex,m=b._subplots,l=m.xaxis,f=m.yaxis;m=m.cartesian;for(var d=b._has("cartesian")||b._has("gl2d"),c=0;c<h.length;c++){var r=h[c];if(k.isPlainObject(r)){var u=r.xref;r=r.yref;var p=e.x.test(u),q=e.y.test(r);if(p||q){d||k.pushUnique(b._basePlotModules,
g);var y=!1;p&&-1===l.indexOf(u)&&(l.push(u),y=!0);q&&-1===f.indexOf(r)&&(f.push(r),y=!0);y&&p&&q&&m.push(u+r)}}}}}}},{"../../lib":716,"../../registry":845}],775:[function(a,q,p){function n(b,a,c){return l.ensureSingle(b,a,c,function(b){b.datum(c)})}function k(b,a,f,g,h){for(var k=u.traceLayerClasses,l=b._fullLayout,r=l._modules,m,n,p=[],v=[],q=0;q<r.length;q++){m=r[q];n=m.name;var w=t.modules[n].categories;if(w.svg){var x=m.layerName||n+"layer";m=m.plot;f=c(f,m);n=f[0];f=f[1];n.length&&p.push({i:k.indexOf(x),
className:x,plotMethod:m,cdModule:n});w.zoomScale&&v.push("."+x)}}p.sort(function(b,a){return b.i-a.i});k=a.plot.selectAll("g.mlayer").data(p,function(b){return b.className});k.enter().append("g").attr("class",function(b){return b.className}).classed("mlayer",!0).classed("rangeplot",a.isRangePlot);k.exit().remove();k.order();k.each(function(c){var f=e.select(this),k=c.className;c.plotMethod(b,a,c.cdModule,f,g,h);-1===u.clipOnAxisFalseQuery.indexOf("."+k)&&d.setClipUrl(f,a.layerClipId,b)});l._has("scattergl")&&
(m=t.getModule("scattergl"),n=c(f,m)[0],m.plot(b,a,n));b._context.staticPlot||(a._hasClipOnAxisFalse&&(a.clipOnAxisFalseTraces=a.plot.selectAll(u.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),v.length&&(l=a.plot.selectAll(v.join(",")).selectAll(".trace"),a.zoomScalePts=l.selectAll("path.point"),a.zoomScaleTxt=l.selectAll(".textpoint")))}function m(b){b=b._fullLayout;var a=b._subplots.cartesian,c=a.length,d,e=[],f=[];for(d=0;d<c;d++){var g=a[d];var h=b._plots[g];var k=h.xaxis;var l=h.yaxis;
k=k._mainAxis._id+l._mainAxis._id;l=b._plots[k];h.overlays=[];k!==g&&l?(h.mainplot=k,h.mainplotinfo=l,f.push(g)):(h.mainplot=void 0,h.mainPlotinfo=void 0,e.push(g))}for(d=0;d<f.length;d++)g=f[d],h=b._plots[g],h.mainplotinfo.overlays.push(h);a=e.concat(f);e=Array(c);for(d=0;d<c;d++){g=a[d];h=b._plots[g];k=h.xaxis;l=h.yaxis;k=[g,k.layer,l.layer,k.overlaying||"",l.overlaying||""];for(g=0;g<h.overlays.length;g++)k.push(h.overlays[g].id);e[d]=k}return e}function h(b,a){var c=a.plotgroup,d=a.id,e=u.layerValue2layerClass[a.xaxis.layer],
f=u.layerValue2layerClass[a.yaxis.layer];b=b._fullLayout._hasOnlyLargeSploms;if(a.mainplot){c=a.mainplotinfo;var g=c.plotgroup,h=d+"-x",k=d+"-y";a.gridlayer=c.gridlayer;a.zerolinelayer=c.zerolinelayer;w(c.overlinesBelow,"path",h);w(c.overlinesBelow,"path",k);w(c.overaxesBelow,"g",h);w(c.overaxesBelow,"g",k);a.plot=w(c.overplot,"g",d);w(c.overlinesAbove,"path",h);w(c.overlinesAbove,"path",k);w(c.overaxesAbove,"g",h);w(c.overaxesAbove,"g",k);a.xlines=g.select(".overlines-"+e).select("."+h);a.ylines=
g.select(".overlines-"+f).select("."+k);a.xaxislayer=g.select(".overaxes-"+e).select("."+h);a.yaxislayer=g.select(".overaxes-"+f).select("."+k)}else b?(a.xlines=w(c,"path","xlines-above"),a.ylines=w(c,"path","ylines-above"),a.xaxislayer=w(c,"g","xaxislayer-above"),a.yaxislayer=w(c,"g","yaxislayer-above")):(d=w(c,"g","layer-subplot"),a.shapelayer=w(d,"g","shapelayer"),a.imagelayer=w(d,"g","imagelayer"),a.gridlayer=w(c,"g","gridlayer"),a.zerolinelayer=w(c,"g","zerolinelayer"),w(c,"path","xlines-below"),
w(c,"path","ylines-below"),a.overlinesBelow=w(c,"g","overlines-below"),w(c,"g","xaxislayer-below"),w(c,"g","yaxislayer-below"),a.overaxesBelow=w(c,"g","overaxes-below"),a.plot=w(c,"g","plot"),a.overplot=w(c,"g","overplot"),a.xlines=w(c,"path","xlines-above"),a.ylines=w(c,"path","ylines-above"),a.overlinesAbove=w(c,"g","overlines-above"),w(c,"g","xaxislayer-above"),w(c,"g","yaxislayer-above"),a.overaxesAbove=w(c,"g","overaxes-above"),a.xlines=c.select(".xlines-"+e),a.ylines=c.select(".ylines-"+f),
a.xaxislayer=c.select(".xaxislayer-"+e),a.yaxislayer=c.select(".yaxislayer-"+f));b||(n(a.gridlayer,"g",a.xaxis._id),n(a.gridlayer,"g",a.yaxis._id),a.gridlayer.selectAll("g").map(function(b){return b[0]}).sort(r.idSort));a.xlines.style("fill","none").classed("crisp",!0);a.ylines.style("fill","none").classed("crisp",!0)}function b(b,a){if(b){var c={};b.each(function(b){b=b[0];e.select(this).remove();g(b,a);c[b]=!0});for(var d in a._plots){b=a._plots[d].overlays||[];for(var f=0;f<b.length;f++){var h=
b[f];c[h.id]&&h.plot.selectAll(".trace").remove()}}}}function g(b,a){a._draggers.selectAll("g."+b).remove();a._defs.select("#clip"+a._uid+b+"plot").remove()}var e=a("d3"),t=a("../../registry"),l=a("../../lib"),f=a("../plots"),d=a("../../components/drawing"),c=a("../get_data").getModuleCalcData,r=a("./axis_ids"),u=a("./constants"),v=a("../../constants/xmlns_namespaces"),w=l.ensureSingle;p.name="cartesian";p.attr=["xaxis","yaxis"];p.idRoot=["x","y"];p.idRegex=u.idRegex;p.attrRegex=u.attrRegex;p.attributes=
a("./attributes");p.layoutAttributes=a("./layout_attributes");p.supplyLayoutDefaults=a("./layout_defaults");p.transitionAxes=a("./transition_axes");p.finalizeSubplots=function(b,a){var c=a._subplots;a=c.xaxis;var d=c.yaxis,e=c.cartesian;c=e.concat(c.gl2d||[]);var f={},g={},h;for(h=0;h<c.length;h++){var k=c[h].split("y");f[k[0]]=1;g["y"+k[1]]=1}for(h=0;h<a.length;h++)if(k=a[h],!f[k]){var m=(b[r.id2name(k)]||{}).anchor;u.idRegex.y.test(m)||(m="y");e.push(k+m);c.push(k+m);g[m]||(g[m]=1,l.pushUnique(d,
m))}for(h=0;h<d.length;h++)m=d[h],g[m]||(k=(b[r.id2name(m)]||{}).anchor,u.idRegex.x.test(k)||(k="x"),e.push(k+m),c.push(k+m),f[k]||(f[k]=1,l.pushUnique(a,k)));if(!c.length){m=k="";for(var t in b)if(u.attrRegex.test(t))if("x"===t.charAt(0)){if(!k||+t.substr(5)<+k.substr(5))k=t}else if(!m||+t.substr(5)<+m.substr(5))m=t;k=k?r.name2id(k):"x";m=m?r.name2id(m):"y";a.push(k);d.push(m);e.push(k+m)}};p.plot=function(b,a,c,d){var e=b._fullLayout,f=e._subplots.cartesian,g=b.calcdata,h;if(!Array.isArray(a))for(a=
[],h=0;h<g.length;h++)a.push(h);for(h=0;h<f.length;h++){for(var l=f[h],r=e._plots[l],m=[],t,n=0;n<g.length;n++){var u=g[n],p=u[0].trace;if(p.xaxis+p.yaxis===l){if(-1!==a.indexOf(p.index)||p.carpet)t&&t[0].trace.xaxis+t[0].trace.yaxis===l&&-1!==["tonextx","tonexty","tonext"].indexOf(p.fill)&&-1===m.indexOf(t)&&m.push(t),m.push(u);t=u}}k(b,r,m,c,d)}};p.clean=function(a,c,d,e){var f=e._plots||{};a=c._plots||{};d=e._subplots||{};var h;if(e._hasOnlyLargeSploms&&!c._hasOnlyLargeSploms)for(h in f){var k=
f[h];k.plotgroup&&k.plotgroup.remove()}k=e._has&&e._has("gl");var l=c._has&&c._has("gl");if(k&&!l)for(h in f)k=f[h],k._scene&&k._scene.destroy();if(d.xaxis&&d.yaxis)for(f=r.listIds({_fullLayout:e}),h=0;h<f.length;h++)k=f[h],c[r.id2name(k)]||e._infolayer.selectAll(".g-"+k+"title").remove();h=e._has&&e._has("cartesian");c=c._has&&c._has("cartesian");if(h&&!c)b(e._cartesianlayer.selectAll(".subplot"),e),e._defs.selectAll(".axesclip").remove(),delete e._axisConstraintGroups;else if(d.cartesian)for(h=
0;h<d.cartesian.length;h++)c=d.cartesian[h],a[c]||(e._cartesianlayer.selectAll("."+c+",."+c+"-x,."+c+"-y").remove(),g(c,e))};p.drawFramework=function(a){var c=a._fullLayout,d=m(a);d=c._cartesianlayer.selectAll(".subplot").data(d,String);d.enter().append("g").attr("class",function(b){return"subplot "+b[0]});d.order();d.exit().call(b,c);d.each(function(b){b=b[0];var d=c._plots[b];d.plotgroup=e.select(this);h(a,d);d.draglayer=w(c._draggers,"g",b)})};p.rangePlot=function(b,a,c){h(b,a);k(b,a,c);f.style(b)};
p.toSVG=function(b){var a=b._fullLayout._glimages,c=e.select(b).selectAll(".svg-container");c.filter(function(b,a){return a===c.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var b=this.toDataURL("image/png");a.append("svg:image").attr({xmlns:v.svg,"xlink:href":b,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})})};p.updateFx=a("./graph_interact").updateFx},{"../../components/drawing":612,"../../constants/xmlns_namespaces":693,"../../lib":716,"../../registry":845,
"../get_data":799,"../plots":825,"./attributes":762,"./axis_ids":767,"./constants":770,"./graph_interact":773,"./layout_attributes":776,"./layout_defaults":777,"./transition_axes":786,d3:165}],776:[function(a,q,p){p=a("../font_attributes");var n=a("../../components/color/attributes"),k=a("../../components/drawing/attributes").dash,m=a("../../lib/extend").extendFlat,h=a("../../plot_api/plot_template").templatedArray;a("../../constants/docs");a("../../constants/docs");a=a("./constants");q.exports={visible:{valType:"boolean",
editType:"plot"},color:{valType:"color",dflt:n.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:p({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:"- linear log date category multicategory".split(" "),dflt:"-",editType:"calc",_noTemplating:!0},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",
values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",
min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],dflt:"range",editType:"plot"},constraintoward:{valType:"enumerated",values:"left center right top middle bottom".split(" "),editType:"plot"},matches:{valType:"enumerated",values:[a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"calc"},tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},
tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},
ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:n.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:m({},k,{dflt:"dash",editType:"none"}),
spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor"],dflt:"data",editType:"none"},tickfont:p({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",
values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:"none e E power SI B".split(" "),dflt:"B",editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks"},tickformatstops:h("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",
items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:n.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:n.lightLine,
editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:n.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:n.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",a.idRegex.x.toString(),a.idRegex.y.toString()],
editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",
min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:"trace;category ascending;category descending;array;total ascending;total descending;min ascending;min descending;max ascending;max descending;sum ascending;sum descending;mean ascending;mean descending;median ascending;median descending".split(";"),dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",
editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:p({editType:"ticks"})}}},{"../../components/color/attributes":590,"../../components/drawing/attributes":611,"../../constants/docs":687,"../../lib/extend":707,"../../plot_api/plot_template":754,"../font_attributes":790,"./constants":770}],777:[function(a,q,p){function n(b,a,c){Array.isArray(b[a])?b[a].push(c):b[a]=[c]}var k=a("../../lib"),m=a("../../components/color"),h=a("../../plot_api/plot_template"),b=a("../layout_attributes"),
g=a("./layout_attributes"),e=a("./type_defaults"),t=a("./axis_defaults"),l=a("./constraints").handleConstraintDefaults,f=a("./position_defaults");p=a("./axis_ids");var d=p.id2name,c=p.name2id,r=a("./constants").AX_ID_PATTERN;a=a("../../registry");var u=a.traceIs,v=a.getComponentMethod;q.exports=function(a,p,q){function w(){la._traceIndices=(G[X]||[]).map(function(b){return b._expandedIndex});la._annIndices=[];la._shapeIndices=[];la._imgIndices=[];la._subplotsWith=[];la._counterAxes=[];la._name=la._attr=
X;la._id=ea}function x(b,a){return k.coerce(fa,la,g,b,a)}function y(b,a){return k.coerce2(fa,la,g,b,a)}function A(b,d){b="x"===b?Y:ca;for(var e=[],f=0;f<b.length;f++){var g=b[f];g===d||(a[g]||{}).overlaying||e.push(c(g))}return e}function D(){var b=fa.matches;r.test(b)&&-1===Z.indexOf(b)&&(R[b]=fa.type,U=Object.keys(R))}var G={},E={},F={},L={},J={},H={},K={},M={},I={},N={},O,P;for(O=0;O<q.length;O++){var Q=q[O];if(u(Q,"cartesian")||u(Q,"gl2d")){if(Q.xaxis){var T=d(Q.xaxis);n(G,T,Q)}else if(Q.xaxes)for(P=
0;P<Q.xaxes.length;P++)n(G,d(Q.xaxes[P]),Q);if(Q.yaxis){var V=d(Q.yaxis);n(G,V,Q)}else if(Q.yaxes)for(P=0;P<Q.yaxes.length;P++)n(G,d(Q.yaxes[P]),Q);"funnel"===Q.type?"h"===Q.orientation?(T&&(E[T]=!0),V&&(K[V]=!0)):V&&(F[V]=!0):"image"===Q.type?(V&&(M[V]=!0),T&&(M[T]=!0)):(V&&(J[V]=!0,H[V]=!0),(!u(Q,"carpet")||"carpet"===Q.type&&!Q._cheater)&&T&&(L[T]=!0));"carpet"===Q.type&&Q._cheater&&T&&(E[T]=!0);u(Q,"2dMap")&&(I[T]=!0,I[V]=!0);u(Q,"oriented")&&(N["h"===Q.orientation?V:T]=!0)}}P=p._subplots;O=P.xaxis;
q=P.yaxis;var Y=k.simpleMap(O,d),ca=k.simpleMap(q,d);P=Y.concat(ca);Q=m.background;O.length&&q.length&&(Q=k.coerce(a,p,b,"plot_bgcolor"));Q=m.combine(Q,p.paper_bgcolor);T={x:q,y:O};var Z=T.x.concat(T.y),R={},U=[];for(O=0;O<P.length;O++){var X=P[O];var ea=c(X);q=X.charAt(0);k.isPlainObject(a[X])||(a[X]={});var fa=a[X];var la=h.newContainer(p,X,q+"axis");w();V={letter:q,font:p.font,outerTicks:I[X],showGrid:!N[X],data:G[X]||[],bgColor:Q,calendar:p.calendar,automargin:!0,visibleDflt:"x"===q&&!L[X]&&E[X]||
"y"===q&&!J[X]&&F[X],reverseDflt:"y"===q&&(!H[X]&&K[X]||M[X]),splomStash:((p._splomAxes||{})[q]||{})[ea]};x("uirevision",p.uirevision);e(fa,la,x,V);t(fa,la,x,V,p);V=y("spikecolor");var da=y("spikethickness"),ma=y("spikedash"),aa=y("spikemode"),na=y("spikesnap");x("showspikes",!!V||!!da||!!ma||!!aa||!!na)||(delete la.spikecolor,delete la.spikethickness,delete la.spikedash,delete la.spikemode,delete la.spikesnap);f(fa,la,x,{letter:q,counterAxes:T[q],overlayableAxes:A(q,X),grid:p.grid});x("title.standoff");
D();la._input=fa}for(O=0;O<U.length;)ea=U[O++],X=d(ea),q=X.charAt(0),k.isPlainObject(a[X])||(a[X]={}),fa=a[X],la=h.newContainer(p,X,q+"axis"),w(),E={letter:q,font:p.font,outerTicks:I[X],showGrid:!N[X],data:[],bgColor:Q,calendar:p.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,splomStash:((p._splomAxes||{})[q]||{})[ea]},x("uirevision",p.uirevision),la.type=R[ea]||"linear",t(fa,la,x,E,p),f(fa,la,x,{letter:q,counterAxes:T[q],overlayableAxes:A(q,X),grid:p.grid}),x("fixedrange"),D(),la._input=fa;
I=v("rangeslider","handleDefaults");N=v("rangeselector","handleDefaults");for(O=0;O<Y.length;O++)X=Y[O],fa=a[X],la=p[X],I(a,p,X),"date"===la.type&&N(fa,la,p,ca,la.calendar),x("fixedrange");for(O=0;O<ca.length;O++)X=ca[O],fa=a[X],la=p[X],I=p[d(la.anchor)],I=v("rangeslider","isVisible")(I),x("fixedrange",I);I=p._axisConstraintGroups=[];N=p._axisMatchGroups=[];E=Z.concat(U);P=P.concat(k.simpleMap(U,d));for(O=0;O<P.length;O++)X=P[O],q=X.charAt(0),fa=a[X],la=p[X],F="y"===q&&!fa.hasOwnProperty("scaleanchor")&&
M[X]?la.anchor:void 0,L=!fa.hasOwnProperty("constrain")&&M[X]?"domain":void 0,l(fa,la,x,{allAxisIds:E,layoutOut:p,scaleanchorDflt:F,constrainDflt:L});for(O=0;O<N.length;O++){M=N[O];E=P=null;for(ea in M)la=p[d(ea)],la.matches||(P=la.range,E=la.autorange);if(null===P||null===E)for(ea in M){la=p[d(ea)];P=la.range;E=la.autorange;break}for(ea in M)la=p[d(ea)],la.matches&&(la.range=P.slice(),la.autorange=E),la._matchGroup=M;if(I.length)for(ea in M)for(P=0;P<I.length;P++){M=I[P];for(var ha in M)ea===ha&&
(k.warn("Axis "+ha+" is set with both a *scaleanchor* and *matches* constraint; ignoring the scale constraint."),delete M[ha],2>Object.keys(M).length&&I.splice(P,1))}}}},{"../../components/color":591,"../../lib":716,"../../plot_api/plot_template":754,"../../registry":845,"../layout_attributes":816,"./axis_defaults":766,"./axis_ids":767,"./constants":770,"./constraints":771,"./layout_attributes":776,"./position_defaults":779,"./type_defaults":787}],778:[function(a,q,p){var n=a("tinycolor2").mix,k=
a("../../components/color/attributes").lightFraction,m=a("../../lib");q.exports=function(a,b,g,e){function h(c,d){return m.coerce2(a,b,e.attributes,c,d)}e=e||{};var l=e.dfltColor,f=h("linecolor",l),d=h("linewidth");g("showline",e.showLine||!!f||!!d)||(delete b.linecolor,delete b.linewidth);f=n(l,e.bgColor,e.blend||k).toRgbString();f=h("gridcolor",f);d=h("gridwidth");g("showgrid",e.showGrid||!!f||!!d)||(delete b.gridcolor,delete b.gridwidth);e.noZeroLine||(l=h("zerolinecolor",l),f=h("zerolinewidth"),
g("zeroline",e.showGrid||!!l||!!f)||(delete b.zerolinecolor,delete b.zerolinewidth))}},{"../../components/color/attributes":590,"../../lib":716,tinycolor2:535}],779:[function(a,q,p){var n=a("fast-isnumeric"),k=a("../../lib");q.exports=function(a,h,b,g){var e=g.counterAxes||[],m=g.overlayableAxes||[],l=g.letter;g=g.grid;if(g){var f=g._domains[l][g._axisMap[h._id]];var d=g._anchors[h._id];if(f){var c=g[l+"side"].split(" ")[0];var r=g.domain[l]["right"===c||"top"===c?1:0]}}f=f||[0,1];d=d||(n(a.position)?
"free":e[0]||"free");c=c||("x"===l?"bottom":"left");r=r||0;"free"===k.coerce(a,h,{anchor:{valType:"enumerated",values:["free"].concat(e),dflt:d}},"anchor")&&b("position",r);k.coerce(a,h,{side:{valType:"enumerated",values:"x"===l?["bottom","top"]:["left","right"],dflt:c}},"side");e=!1;m.length&&(e=k.coerce(a,h,{overlaying:{valType:"enumerated",values:[!1].concat(m),dflt:!1}},"overlaying"));e||(m=b("domain",f),m[0]>m[1]-1/4096&&(h.domain=f),k.noneOrAll(a.domain,h.domain,f));b("layer");return h}},{"../../lib":716,
"fast-isnumeric":228}],780:[function(a,q,p){var n=a("../../constants/alignment").FROM_BL;q.exports=function(a,m,h){void 0===h&&(h=n[a.constraintoward||"center"]);var b=[a.r2l(a.range[0]),a.r2l(a.range[1])];h=b[0]+(b[1]-b[0])*h;a.range=a._input.range=[a.l2r(h+(b[0]-h)*m),a.l2r(h+(b[1]-h)*m)]}},{"../../constants/alignment":685}],781:[function(a,q,p){function n(b){return b._id}function k(a,c,h,k,m,n,u){var p=c._hoverdata,v=-1<c._fullLayout.clickmode.indexOf("event"),q=[],w;if(p&&Array.isArray(p)&&!0!==
p[0].hoverOnBox){g(a,c,n);h=t(c,h,k,m);p=p[0];k=-1;m=[];var x;for(x=0;x<h.length;x++){var z=h[x];if(p.fullData._expandedIndex===z.cd[0].trace._expandedIndex){if(!0===p.hoverOnBox)break;void 0!==p.pointNumber?k=p.pointNumber:void 0!==p.binNumber&&(k=p.binNumber,m=p.pointNumbers);break}}z={pointNumber:k,pointNumbers:m,searchInfo:z};if(0<z.pointNumbers.length)a:{k=[];for(p=0;p<h.length;p++)m=h[p],m.cd[0].trace.selectedpoints&&0<m.cd[0].trace.selectedpoints.length&&k.push(m);if(1===k.length&&(p=k[0]===
z.searchInfo)&&(k=z.searchInfo.cd[0].trace,k.selectedpoints.length===z.pointNumbers.length)){for(p=0;p<z.pointNumbers.length;p++)if(0>k.selectedpoints.indexOf(z.pointNumbers[p])){p=!1;break a}p=!0;break a}p=!1}else{a:{for(k=p=0;k<h.length;k++)if(m=h[k],m=m.cd[0].trace,m.selectedpoints){if(1<m.selectedpoints.length){p=!1;break a}p+=m.selectedpoints.length;if(1<p){p=!1;break a}}p=1===p}p=p&&(w=f(z))}if(p){u&&u.remove();for(w=0;w<h.length;w++)u=h[w],u._module.selectPoints(u,!1);d(c,h);e(n);v&&c.emit("plotly_deselect",
null)}else{a=a.shiftKey&&(void 0!==w?w:f(z));a={pointNumber:z.pointNumber,searchInfo:z.searchInfo,subtract:a};w=n.selectionDefs.concat([a]);z=b(w);for(w=0;w<h.length;w++)if(p=h[w]._module.selectPoints(h[w],z),p=r(p,h[w]),q.length)for(k=0;k<p.length;k++)q.push(p[k]);else q=p;q={points:q};d(c,h,q);a&&n&&n.selectionDefs.push(a);u&&l(n.mergedPolygons,u);v&&c.emit("plotly_selected",q)}}}function m(b){return"pointNumber"in b&&"searchInfo"in b}function h(b){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(a,
c,d,e){return e.cd[0].trace._expandedIndex===b.searchInfo.cd[0].trace._expandedIndex&&d===b.pointNumber},isRect:!1,degenerate:!1,subtract:b.subtract}}function b(b){for(var a=[],c=m(b[0])?0:b[0][0][0],d=c,e=m(b[0])?0:b[0][0][1],f=e,g=0;g<b.length;g++)if(m(b[g]))a.push(h(b[g]));else{var k=x.tester(b[g]);k.subtract=b[g].subtract;a.push(k);c=Math.min(c,k.xmin);d=Math.max(d,k.xmax);e=Math.min(e,k.ymin);f=Math.max(f,k.ymax)}return{xmin:c,xmax:d,ymin:e,ymax:f,pts:[],contains:function(b,c,d,e){for(var f=
!1,g=0;g<a.length;g++)a[g].contains(b,c,d,e)&&(f=!1===a[g].subtract);return f},isRect:!1,degenerate:!1}}function g(b,a,c){var d=a._fullLayout,f=c.plotinfo,g=d._lastSelectedSubplot&&d._lastSelectedSubplot===f.id;b=b.shiftKey||b.altKey;g&&b&&f.selection&&f.selection.selectionDefs&&!c.selectionDefs?(c.selectionDefs=f.selection.selectionDefs,c.mergedPolygons=f.selection.mergedPolygons):b&&f.selection||e(c);g||(u(a),d._lastSelectedSubplot=f.id)}function e(b){var a=b.plotinfo;a.selection={};a.selection.selectionDefs=
b.selectionDefs=[];a.selection.mergedPolygons=b.mergedPolygons=[]}function t(b,a,c,d){function e(b,a,c,d){return{_module:b,cd:a,xaxis:c,yaxis:d}}var f=[],g=a.map(n),h=c.map(n),k;for(k=0;k<b.calcdata.length;k++){var l=b.calcdata[k];var r=l[0].trace;!0===r.visible&&r._module&&r._module.selectPoints&&(!d||r.subplot!==d&&r.geo!==d?"splom"===r.type&&r._xaxes[g[0]]&&r._yaxes[h[0]]?(l=e(r._module,l,a[0],c[0]),l.scene=b._fullLayout._splomScenes[r.uid],f.push(l)):"sankey"===r.type?(r=e(r._module,l,a[0],c[0]),
f.push(r)):-1!==g.indexOf(r.xaxis)&&-1!==h.indexOf(r.yaxis)&&f.push(e(r._module,l,D(b,r.xaxis),D(b,r.yaxis))):f.push(e(r._module,l,a[0],c[0])))}return f}function l(b,a){var c=[],d;for(d=0;d<b.length;d++){var e=b[d];c.push(e.join("L")+"L"+e[0])}b=0<b.length?"M"+c.join("M")+"Z":"M0,0Z";a.attr("d",b)}function f(b){var a=b.searchInfo.cd[0].trace,c=b.pointNumber;b=b.pointNumbers;c=0<b.length?b[0]:c;return a.selectedpoints?-1<a.selectedpoints.indexOf(c):!1}function d(b,a,c){var d;for(d=0;d<a.length;d++){var e=
a[d].cd[0].trace._fullInput;var f=b._fullLayout._tracePreGUI[e.uid]||{};void 0===f.selectedpoints&&(f.selectedpoints=e._input.selectedpoints||null)}if(c){c=c.points||[];for(d=0;d<a.length;d++){var g=a[d].cd[0].trace;g._input.selectedpoints=g._fullInput.selectedpoints=[];g._fullInput!==g&&(g.selectedpoints=[])}for(d=0;d<c.length;d++){e=c[d];f=e.data;var h=e.fullData;e.pointIndices?([].push.apply(f.selectedpoints,e.pointIndices),g._fullInput!==g&&[].push.apply(h.selectedpoints,e.pointIndices)):(f.selectedpoints.push(e.pointIndex),
g._fullInput!==g&&h.selectedpoints.push(e.pointIndex))}}else for(d=0;d<a.length;d++)g=a[d].cd[0].trace,delete g.selectedpoints,delete g._input.selectedpoints,g._fullInput!==g&&delete g._fullInput.selectedpoints;e=!1;for(d=0;d<a.length;d++)if(f=a[d],c=f.cd,g=c[0].trace,w.traceIs(g,"regl")&&(e=!0),g=f._module,g=g.styleOnSelect||g.style)g(b,c,c[0].node3),c[0].nodeRangePlot3&&g(b,c,c[0].nodeRangePlot3);e&&(G(b),E(b))}function c(b,a,c){if(c)return b=v.difference({regions:b,inverted:!1},{regions:[a],inverted:!1}),
b.regions;b=v.union({regions:b,inverted:!1},{regions:[a],inverted:!1});return b.regions}function r(b,a){if(Array.isArray(b)){var c=a.cd;a=a.cd[0].trace;for(var d=0;d<b.length;d++)b[d]=B(b[d],a,c)}return b}function u(b){(b=(b._fullLayout||{})._zoomlayer)&&b.selectAll(".select-outline").remove()}var v=a("polybooljs"),w=a("../../registry"),y=a("../../components/color"),A=a("../../components/fx"),z=a("../../lib"),x=a("../../lib/polygon"),C=a("../../lib/throttle"),B=a("../../components/fx/helpers").makeEventData,
D=a("./axis_ids").getFromId,G=a("../../lib/clear_gl_canvases"),E=a("../../plot_api/subroutines").redrawReglTraces,F=a("./constants"),L=F.MINSELECT,J=x.filter,H=x.tester;q.exports={prepSelect:function(a,f,h,m,n){function u(b,a){return"log"===b.type?b.p2d(a):b.p2r(a)}function p(b){var a="y"===b._id.charAt(0)?1:0;return function(c){return u(b,c[a])}}function v(b,a){return b-a}var q=m.gd,w=q._fullLayout,x=w._zoomlayer,B=m.element.getBoundingClientRect(),D=m.plotinfo,E=D.xaxis._offset,I=D.yaxis._offset,
G=f-B.left,N=h-B.top,M=G,O=N;f="M"+G+","+N;var K=m.xaxes[0]._length,aa=m.yaxes[0]._length,na=m.xaxes.concat(m.yaxes),ha=a.altKey,ja,oa,ka,ia,xa,ya,sa;g(a,q,m);"lasso"===n&&(ja=J([[G,N]],F.BENDPX));var W=x.selectAll("path.select-outline-"+D.id).data([1,2]);W.enter().append("path").attr("class",function(b){return"select-outline select-outline-"+b+" select-outline-"+D.id}).attr("transform","translate("+E+", "+I+")").attr("d",f+"Z");var za=x.append("path").attr("class","zoombox-corners").style({fill:y.background,
stroke:y.defaultLine,"stroke-width":1}).attr("transform","translate("+E+", "+I+")").attr("d","M0,0Z"),Da=w._uid+F.SELECTID,ra=[],ua=t(q,m.xaxes,m.yaxes,m.subplot);var Aa=D.fillRangeItems?D.fillRangeItems:"select"===n?function(b,a){b=b.range={};for(xa=0;xa<na.length;xa++){var c=na[xa],d=c._id.charAt(0);b[c._id]=[u(c,a[d+"min"]),u(c,a[d+"max"])].sort(v)}}:function(b,a,c){b=b.lassoPoints={};for(xa=0;xa<na.length;xa++)a=na[xa],b[a._id]=c.filtered.map(p(a))};m.moveFn=function(a,e){M=Math.max(0,Math.min(K,
a+G));O=Math.max(0,Math.min(aa,e+N));a=Math.abs(M-G);e=Math.abs(O-N);if("select"===n){var f=w.selectdirection;f="any"===w.selectdirection?e<Math.min(.6*a,L)?"h":a<Math.min(.6*e,L)?"v":"d":w.selectdirection;"h"===f?(ia=[[G,0],[G,aa],[M,aa],[M,0]],ia.xmin=Math.min(G,M),ia.xmax=Math.max(G,M),ia.ymin=Math.min(0,aa),ia.ymax=Math.max(0,aa),za.attr("d","M"+ia.xmin+","+(N-L)+"h-4v"+2*L+"h4ZM"+(ia.xmax-1)+","+(N-L)+"h4v"+2*L+"h-4Z")):"v"===f?(ia=[[0,N],[0,O],[K,O],[K,N]],ia.xmin=Math.min(0,K),ia.xmax=Math.max(0,
K),ia.ymin=Math.min(N,O),ia.ymax=Math.max(N,O),za.attr("d","M"+(G-L)+","+ia.ymin+"v-4h"+2*L+"v4ZM"+(G-L)+","+(ia.ymax-1)+"v4h"+2*L+"v-4Z")):"d"===f&&(ia=[[G,N],[G,O],[M,O],[M,N]],ia.xmin=Math.min(G,M),ia.xmax=Math.max(G,M),ia.ymin=Math.min(N,O),ia.ymax=Math.max(N,O),za.attr("d","M0,0Z"))}else"lasso"===n&&(ja.addPt([M,O]),ia=ja.filtered);m.selectionDefs&&m.selectionDefs.length?(ka=c(m.mergedPolygons,ia,ha),ia.subtract=ha,oa=b(m.selectionDefs.concat([ia]))):(ka=[ia],oa=H(ia));l(ka,W);C.throttle(Da,
F.SELECTDELAY,function(){ra=[];var b=[];for(xa=0;xa<ua.length;xa++){ya=ua[xa];var a=ya._module.selectPoints(ya,oa);b.push(a);a=r(a,ya);if(ra.length)for(var c=0;c<a.length;c++)ra.push(a[c]);else ra=a}sa={points:ra};d(q,ua,sa);Aa(sa,ia,ja);m.gd.emit("plotly_selecting",sa)})};m.clickFn=function(b,a){var c=w.clickmode;za.remove();C.done(Da).then(function(){C.clear(Da);if(2===b){W.remove();for(xa=0;xa<ua.length;xa++)ya=ua[xa],ya._module.selectPoints(ya,!1);d(q,ua);e(m);q.emit("plotly_deselect",null)}else-1<
c.indexOf("select")&&k(a,q,m.xaxes,m.yaxes,m.subplot,m,W),"event"===c&&q.emit("plotly_selected",void 0);A.click(q,a)}).catch(z.error)};m.doneFn=function(){za.remove();C.done(Da).then(function(){C.clear(Da);m.gd.emit("plotly_selected",sa);ia&&m.selectionDefs&&(ia.subtract=ha,m.selectionDefs.push(ia),m.mergedPolygons.length=0,[].push.apply(m.mergedPolygons,ka));m.doneFnCompleted&&m.doneFnCompleted(ra)}).catch(z.error)}},clearSelect:u,selectOnClick:k}},{"../../components/color":591,"../../components/fx":629,
"../../components/fx/helpers":626,"../../lib":716,"../../lib/clear_gl_canvases":701,"../../lib/polygon":728,"../../lib/throttle":741,"../../plot_api/subroutines":755,"../../registry":845,"./axis_ids":767,"./constants":770,polybooljs:474}],782:[function(a,q,p){function n(b){return Math.pow(10,b)}var k=a("d3"),m=a("fast-isnumeric"),h=a("../../lib"),b=h.cleanNumber,g=h.ms2DateTime,e=h.dateTime2ms,t=h.ensureNumber,l=h.isArrayOrTypedArray;p=a("../../constants/numerical");var f=p.FP_SAFE,d=p.BADNUM,c=p.LOG_CLIP,
r=a("./constants"),u=a("./axis_ids");q.exports=function(a,p){function q(b,e){return 0<b?Math.log(b)/Math.LN10:0>=b&&e&&a.range&&2===a.range.length?(b=a.range[0],e=a.range[1],.5*(b+e-2*c*Math.abs(b-e))):d}function v(b,c,f){c=e(b,f||a.calendar);if(c===d)if(m(b))b=+b,c=Math.floor(10*h.mod(b+.05,1)),c=e(new Date(Math.round(b-c/10)))+c/10;else return d;return c}function w(b,c,d){return g(b,c,d||a.calendar)}function x(b){return a._categories[Math.round(b)]}function C(b){if(null!==b&&void 0!==b){void 0===
a._categoriesMap&&(a._categoriesMap={});if(void 0!==a._categoriesMap[b])return a._categoriesMap[b];a._categories.push("number"===typeof b?String(b):b);var c=a._categories.length-1;return a._categoriesMap[b]=c}return d}function B(b){if(a._categoriesMap)return a._categoriesMap[b]}function D(b){var a=B(b);if(void 0!==a)return a;if(m(b))return+b}function G(b){return m(b)?k.round(a._b+a._m*b,2):d}function E(b){return(b-a._b)/a._m}p=p||{};var F=a._id||"x",L=F.charAt(0);a.c2l="log"===a.type?q:t;a.l2c="log"===
a.type?n:t;a.l2p=G;a.p2l=E;a.c2p="log"===a.type?function(b,a){return G(q(b,a))}:G;a.p2c="log"===a.type?function(b){return n(E(b))}:E;-1!==["linear","-"].indexOf(a.type)?(a.d2r=a.r2d=a.d2c=a.r2c=a.d2l=a.r2l=b,a.c2d=a.c2r=a.l2d=a.l2r=t,a.d2p=a.r2p=function(c){return a.l2p(b(c))},a.p2d=a.p2r=E,a.cleanPos=t):"log"===a.type?(a.d2r=a.d2l=function(a,c){return q(b(a),c)},a.r2d=a.r2c=function(a){return n(b(a))},a.d2c=a.r2l=b,a.c2d=a.l2r=t,a.c2r=q,a.l2d=n,a.d2p=function(b,c){return a.l2p(a.d2r(b,c))},a.p2d=
function(b){return n(E(b))},a.r2p=function(c){return a.l2p(b(c))},a.p2r=E,a.cleanPos=t):"date"===a.type?(a.d2r=a.r2d=h.identity,a.d2c=a.r2c=a.d2l=a.r2l=v,a.c2d=a.c2r=a.l2d=a.l2r=w,a.d2p=a.r2p=function(b,c,d){return a.l2p(v(b,0,d))},a.p2d=a.p2r=function(b,a,c){return w(E(b),a,c)},a.cleanPos=function(b){return h.cleanDate(b,d,a.calendar)}):"category"===a.type?(a.d2c=a.d2l=C,a.r2d=a.c2d=a.l2d=x,a.d2r=a.d2l_noadd=D,a.r2c=function(b){b=D(b);return void 0!==b?b:a.fraction2r(.5)},a.l2r=a.c2r=t,a.r2l=D,a.d2p=
function(b){return a.l2p(a.r2c(b))},a.p2d=function(b){return x(E(b))},a.r2p=a.d2p,a.p2r=E,a.cleanPos=function(b){return"string"===typeof b&&""!==b?b:t(b)}):"multicategory"===a.type&&(a.r2d=a.c2d=a.l2d=x,a.d2r=a.d2l_noadd=D,a.r2c=function(b){b=D(b);return void 0!==b?b:a.fraction2r(.5)},a.r2c_just_indices=B,a.l2r=a.c2r=t,a.r2l=D,a.d2p=function(b){return a.l2p(a.r2c(b))},a.p2d=function(b){return x(E(b))},a.r2p=a.d2p,a.p2r=E,a.cleanPos=function(b){return Array.isArray(b)||"string"===typeof b&&""!==b?
b:t(b)},a.setupMultiCategory=function(b){var c=a._traceIndices,d,e=p._axisMatchGroups;if(e&&e.length&&0===a._categories.length)for(d=0;d<e.length;d++){var f=e[d];if(f[F])for(var g in f)g!==F&&(f=p[u.id2name(g)],c=c.concat(f._traceIndices))}var k=[[0,{}],[0,{}]];e=[];for(d=0;d<c.length;d++)if(f=b[c[d]],L in f){g=f[L];var r=f._length||h.minRowLength(g);if(l(g[0])&&l(g[1]))for(f=0;f<r;f++){var m=g[0][f],t=g[1][f];null!==m&&void 0!==m&&null!==t&&void 0!==t&&(e.push([m,t]),m in k[0][1]||(k[0][1][m]=k[0][0]++),
t in k[1][1]||(k[1][1][t]=k[1][0]++))}}e.sort(function(b,a){var c=k[0][1];if(c=c[b[0]]-c[a[0]])return c;c=k[1][1];return c[b[1]]-c[a[1]]});for(d=0;d<e.length;d++)C(e[d])});a.fraction2r=function(b){var c=a.r2l(a.range[0]),d=a.r2l(a.range[1]);return a.l2r(c+b*(d-c))};a.r2fraction=function(b){var c=a.r2l(a.range[0]),d=a.r2l(a.range[1]);return(a.r2l(b)-c)/(d-c)};a.cleanRange=function(b,c){c||(c={});b||(b="range");var e=h.nestedProperty(a,b).get();var g="date"===a.type?h.dfltRange(a.calendar):"y"===L?
r.DFLTRANGEY:c.dfltRange||r.DFLTRANGEX;g=g.slice();if("tozero"===a.rangemode||"nonnegative"===a.rangemode)g[0]=0;if(e&&2===e.length)for("date"!==a.type||a.autorange||(e[0]=h.cleanDate(e[0],d,a.calendar),e[1]=h.cleanDate(e[1],d,a.calendar)),c=0;2>c;c++)if("date"===a.type){if(!h.isDateTime(e[c],a.calendar)){a[b]=g;break}if(a.r2l(e[0])===a.r2l(e[1])){b=h.constrain(a.r2l(e[0]),h.MIN_MS+1E3,h.MAX_MS-1E3);e[0]=a.l2r(b-1E3);e[1]=a.l2r(b+1E3);break}}else{if(!m(e[c]))if(m(e[1-c]))e[c]=e[1-c]*(c?10:.1);else{a[b]=
g;break}e[c]<-f?e[c]=-f:e[c]>f&&(e[c]=f);if(e[0]===e[1]){var k=Math.max(1,Math.abs(1E-6*e[0]));e[0]-=k;e[1]+=k}}else h.nestedProperty(a,b).set(g)};a.setScale=function(b){var c=p._size;if(a.overlaying){var d=u.getFromId({_fullLayout:p},a.overlaying);a.domain=d.domain}d=b&&a._r?"_r":"range";var e=a.calendar;a.cleanRange(d);b=a.r2l(a[d][0],e);d=a.r2l(a[d][1],e);"y"===L?(a._offset=c.t+(1-a.domain[1])*c.h,a._length=c.h*(a.domain[1]-a.domain[0]),a._m=a._length/(b-d),a._b=-a._m*d):(a._offset=c.l+a.domain[0]*
c.w,a._length=c.w*(a.domain[1]-a.domain[0]),a._m=a._length/(d-b),a._b=-a._m*b);if(!isFinite(a._m)||!isFinite(a._b)||0>a._length)throw p._replotting=!1,Error("Something went wrong with axis scaling");};a.makeCalcdata=function(b,c){var d,e=a.type,f="date"===e&&b[c+"calendar"];if(c in b){c=b[c];b=b._length||h.minRowLength(c);if(h.isTypedArray(c)&&("linear"===e||"log"===e)){if(b===c.length)return c;if(c.subarray)return c.subarray(0,b)}if("multicategory"===e){f=Array(b);for(e=0;e<b;e++)f[e]=B([(c[0]||
[])[e],(c[1]||[])[e]]);return f}var g=Array(b);for(d=0;d<b;d++)g[d]=a.d2c(c[d],0,f)}else for(f=(c+"0"in b)?a.d2c(b[c+"0"],0,f):0,e=b["d"+c]?Number(b["d"+c]):1,c=b[{x:"y",y:"x"}[c]],b=b._length||c.length,g=Array(b),d=0;d<b;d++)g[d]=f+d*e;return g};a.isValidRange=function(b){return Array.isArray(b)&&2===b.length&&m(a.r2l(b[0]))&&m(a.r2l(b[1]))};a.isPtWithinRange=function(b,c){b=a.c2l(b[L],null,c);c=a.r2l(a.range[0]);var d=a.r2l(a.range[1]);return c<d?c<=b&&b<=d:d<=b&&b<=c};a.clearCalc=function(){var b=
function(){a._categories=[];a._categoriesMap={}},c=p._axisMatchGroups;if(c&&c.length){for(var d=!1,e=0;e<c.length;e++){var f=c[e];if(f[F]){d=!0;e=c=null;for(var g in f)if(f=p[u.id2name(g)],f._categories){c=f._categories;e=f._categoriesMap;break}c&&e?(a._categories=c,a._categoriesMap=e):b();break}}d||b()}else b();if(a._initialCategories)for(b=0;b<a._initialCategories.length;b++)C(a._initialCategories[b])};a.sortByInitialCategories=function(){var b=[];a._categories=[];a._categoriesMap={};if(a._initialCategories)for(var c=
0;c<a._initialCategories.length;c++)C(a._initialCategories[c]);b=b.concat(a._traceIndices);c=a._matchGroup;for(var d in c)F!==d&&(c=p[u.id2name(d)],c._categories=a._categories,c._categoriesMap=a._categoriesMap,b=b.concat(c._traceIndices));return b};var J=p._d3locale;"date"===a.type&&(a._dateFormat=J?J.timeFormat.utc:k.time.format.utc,a._extraFormat=p._extraFormat);a._separators=p.separators;a._numFormat=J?J.numberFormat:k.format;delete a._minDtick;delete a._forceTick0}},{"../../constants/numerical":692,
"../../lib":716,"./axis_ids":767,"./constants":770,d3:165,"fast-isnumeric":228}],783:[function(a,q,p){function n(b){var a=["showexponent","showtickprefix","showticksuffix"].filter(function(a){return void 0!==b[a]});if(a.every(function(e){return b[e]===b[a[0]]})||1===a.length)return b[a[0]]}function k(b,a){m.coerce(b,a,h.tickformatstops,"enabled",void 0)&&(m.coerce(b,a,h.tickformatstops,"dtickrange",void 0),m.coerce(b,a,h.tickformatstops,"value",void 0))}var m=a("../../lib"),h=a("./layout_attributes"),
b=a("../array_container_defaults");q.exports=function(a,e,t,l,f,d){if(!d||1===d.pass){var c=n(a);t("tickprefix")&&t("showtickprefix",c);t("ticksuffix",f.tickSuffixDflt)&&t("showticksuffix",c)}d&&2!==d.pass||(d=n(a),t("tickprefix")&&t("showtickprefix",d),t("ticksuffix",f.tickSuffixDflt)&&t("showticksuffix",d),t("showticklabels")&&(f=f.font||{},c=e.color,m.coerceFont(t,"tickfont",{family:f.family,size:f.size,color:c&&c!==h.color.dflt?c:f.color}),t("tickangle"),"category"!==l&&(f=t("tickformat"),c=a.tickformatstops,
Array.isArray(c)&&c.length&&b(a,e,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:k}),f||"date"===l||(t("showexponent",d),t("exponentformat"),t("separatethousands")))))}},{"../../lib":716,"../array_container_defaults":760,"./layout_attributes":776}],784:[function(a,q,p){var n=a("../../lib"),k=a("./layout_attributes");q.exports=function(a,h,b,g){var e=n.coerce2(a,h,k,"ticklen"),m=n.coerce2(a,h,k,"tickwidth");a=n.coerce2(a,h,k,"tickcolor",h.color);b("ticks",g.outerTicks||e||m||a?
"outside":"")||(delete h.ticklen,delete h.tickwidth,delete h.tickcolor)}},{"../../lib":716,"./layout_attributes":776}],785:[function(a,q,p){var n=a("./clean_ticks");q.exports=function(a,m,h,b){if("array"!==a.tickmode||"log"!==b&&"date"!==b){var g=Array.isArray(a.tickvals)?"array":a.dtick?"linear":"auto";g=h("tickmode",g)}else g=m.tickmode="auto";"auto"===g?h("nticks"):"linear"===g?(h=m.dtick=n.dtick(a.dtick,b),m.tick0=n.tick0(a.tick0,b,m.calendar,h)):"multicategory"!==b&&(void 0===h("tickvals")?m.tickmode=
"auto":h("ticktext"))}},{"./clean_ticks":769}],786:[function(a,q,p){var n=a("d3"),k=a("../../registry"),m=a("../../lib"),h=a("../../components/drawing"),b=a("./axes");q.exports=function(a,e,t,l){function f(b){var a=b.xaxis,c=b.yaxis;u._defs.select("#"+b.clipId+"\x3e rect").call(h.setTranslate,0,0).call(h.setScale,1,1);b.plot.call(h.setTranslate,a._offset,c._offset).call(h.setScale,1,1);a=b.plot.selectAll(".scatterlayer .trace");a.selectAll(".point").call(h.setPointGroupScale,1,1);a.selectAll(".textpoint").call(h.setTextPointsScale,
1,1);a.call(h.hideOutsideRangePoints,b)}function d(){for(var b={},c=0;c<e.length;c++){var d=e[c],g=d.plotinfo.xaxis,h=d.plotinfo.yaxis;d.xr1&&(b[g._name+".range"]=d.xr1.slice());d.yr1&&(b[h._name+".range"]=d.yr1.slice())}p&&p();return k.call("relayout",a,b).then(function(){for(var b=0;b<e.length;b++)f(e[b].plotinfo)})}function c(){for(var b={},c=0;c<e.length;c++){var d=e[c],g=d.plotinfo.xaxis,h=d.plotinfo.yaxis;d.xr0&&(b[g._name+".range"]=d.xr0.slice());d.yr0&&(b[h._name+".range"]=d.yr0.slice())}return k.call("relayout",
a,b).then(function(){for(var b=0;b<e.length;b++)f(e[b].plotinfo)})}function g(){q=Date.now();for(var c=y(Math.min(1,(q-A)/t.duration)),f=0;f<e.length;f++){var k=e[f],l=c,r=k.plotinfo,n=r.xaxis,u=r.yaxis,p=n._length,v=u._length,w=!!k.xr1,K=!!k.yr1,M=[];if(w){var I=m.simpleMap(k.xr0,n.r2l),N=m.simpleMap(k.xr1,n.r2l),O=I[1]-I[0],P=N[1]-N[0];M[0]=(I[0]*(1-l)+l*N[0]-I[0])/(I[1]-I[0])*p;M[2]=p*(1-l+l*P/O);n.range[0]=n.l2r(I[0]*(1-l)+l*N[0]);n.range[1]=n.l2r(I[1]*(1-l)+l*N[1])}else M[0]=0,M[2]=p;K?(I=m.simpleMap(k.yr0,
u.r2l),k=m.simpleMap(k.yr1,u.r2l),N=I[1]-I[0],O=k[1]-k[0],M[1]=(I[1]*(1-l)+l*k[1]-I[1])/(I[0]-I[1])*v,M[3]=v*(1-l+l*O/N),u.range[0]=n.l2r(I[0]*(1-l)+l*k[0]),u.range[1]=u.l2r(I[1]*(1-l)+l*k[1])):(M[1]=0,M[3]=v);b.drawOne(a,n,{skipTitle:!0});b.drawOne(a,u,{skipTitle:!0});b.redrawComponents(a,[n._id,u._id]);l=w?p/M[2]:1;k=K?v/M[3]:1;n=n._offset-(w?M[0]/M[2]*p:0);u=u._offset-(K?M[1]/M[3]*v:0);r.clipRect.call(h.setTranslate,w?M[0]:0,K?M[1]:0).call(h.setScale,1/l,1/k);r.plot.call(h.setTranslate,n,u).call(h.setScale,
l,k);h.setPointGroupScale(r.zoomScalePts,1/l,1/k);h.setTextPointsScale(r.zoomScaleTxt,1/l,1/k)}q-A>t.duration?(d(),z=window.cancelAnimationFrame(g)):z=window.requestAnimationFrame(g)}var u=a._fullLayout;if(0===e.length)b.redrawComponents(a);else{var p;l&&(p=l());var q,y=n.ease(t.easing);a._transitionData._interruptCallbacks.push(function(){window.cancelAnimationFrame(z);z=null;return c()});var A=Date.now();var z=window.requestAnimationFrame(g);return Promise.resolve()}}},{"../../components/drawing":612,
"../../lib":716,"../../registry":845,"./axes":764,d3:165}],787:[function(a,q,p){function n(a,b){var g={v:"x",h:"y"}[a.orientation||"v"],e=k(a,"box-violin"),h=k(a._fullInput||{},"candlestick");return e&&!h&&b===g&&void 0===a[g]&&void 0===a[g+"0"]}var k=a("../../registry").traceIs,m=a("./axis_autotype");q.exports=function(a,b,g,e){if("-"===g("type",(e.splomStash||{}).type)){g=e.data;if("-"===b.type){e=b._id;var h=e.charAt(0);-1!==e.indexOf("scene")&&(e=h);b:{for(var l=e,f=0;f<g.length;f++){var d=g[f];
if("splom"===d.type&&0<d._length&&(d["_"+h+"axes"]||{})[l]||(d[h+"axis"]||h)===l&&(n(d,h)||(d[h]||[]).length||d[h+"0"])){var c=d;break b}}c=void 0}if(c)if("histogram"===c.type&&h==={v:"y",h:"x"}[c.orientation||"v"])b.type="linear";else if(d=h+"calendar",l=c[d],f={noMultiCategory:!k(c,"cartesian")||k(c,"noMultiCategory")},"box"===c.type&&c._hasPreCompStats&&h==={h:"x",v:"y"}[c.orientation||"v"]&&(f.noMultiCategory=!0),n(c,h)){var r={v:"x",h:"y"}[c.orientation||"v"],u=[];for(c=0;c<g.length;c++){var p=
g[c];k(p,"box-violin")&&(p[h+"axis"]||h)===e&&(void 0!==p[r]?u.push(p[r][0]):void 0!==p.name?u.push(p.name):u.push("text"),p[d]!==l&&(l=void 0))}b.type=m(u,l,f)}else"splom"===c.type?(g=c.dimensions[c._axesDim[e]],g.visible&&(b.type=m(g.values,l,f))):b.type=m(c[h]||[c[h+"0"]],l,f)}"-"===b.type?b.type="linear":a.type=b.type}}},{"../../registry":845,"./axis_autotype":765}],788:[function(a,q,p){function n(b,a,h){var e=!1;if("data"===a.type)b=b._fullData[null!==a.traces?a.traces[0]:0];else if("layout"===
a.type)b=b._fullLayout;else return!1;b=g.nestedProperty(b,a.prop).get();h=h[a.type]=h[a.type]||{};h.hasOwnProperty(a.prop)&&h[a.prop]!==b&&(e=!0);h[a.prop]=b;return{changed:e,value:b}}function k(b,a){var e=[];b=a[0];var f={};if("string"===typeof b)f[b]=a[1];else if(g.isPlainObject(b))f=b;else return e;h(f,function(b,a,f){e.push({type:"layout",prop:b,value:f})},"",0);return e}function m(b,a){var e=[];var f=a[0];var d=a[1];var c=a[2];a={};if("string"===typeof f)a[f]=d;else if(g.isPlainObject(f))a=f,
void 0===c&&(c=d);else return e;void 0===c&&(c=null);h(a,function(a,d,f){if(Array.isArray(f)){f=f.slice();var g=Math.min(f.length,b.data.length);c&&(g=Math.min(g,c.length));d=[];for(var h=0;h<g;h++)d[h]=c?c[h]:h}else d=c?c.slice():null;if(null===d)Array.isArray(f)&&(f=f[0]);else if(Array.isArray(d)){if(!Array.isArray(f))for(g=f,f=[],h=0;h<d.length;h++)f[h]=g;f.length=Math.min(d.length,f.length)}e.push({type:"data",prop:a,traces:d,value:f})},"",0);return e}function h(b,a,k,f){Object.keys(b).forEach(function(d){var c=
b[d];if("_"!==d[0]){var e=k+(0<f?".":"")+d;g.isPlainObject(c)?h(c,a,e,f+1):a(e,d,c)}})}var b=a("../registry"),g=a("../lib");p.manageCommandObserver=function(b,a,h,f){var d={},c=!0;a&&a._commandObserver&&(d=a._commandObserver);d.cache||(d.cache={});d.lookupTable={};var e=p.hasSimpleAPICommandBindings(b,h,d.lookupTable);if(a&&a._commandObserver){if(e)return d;if(a._commandObserver.remove)return a._commandObserver.remove(),a._commandObserver=null,d}if(e){n(b,e,d.cache);d.check=function(){if(c){var a=
n(b,e,d.cache);a.changed&&f&&void 0!==d.lookupTable[a.value]&&(d.disable(),Promise.resolve(f({value:a.value,type:e.type,prop:e.prop,traces:e.traces,index:d.lookupTable[a.value]})).then(d.enable,d.enable));return a.changed}};var k="plotly_relayout plotly_redraw plotly_restyle plotly_update plotly_animatingframe plotly_afterplot".split(" ");for(h=0;h<k.length;h++)b._internalOn(k[h],d.check);d.remove=function(){for(var a=0;a<k.length;a++)b._removeInternalListener(k[a],d.check)}}else g.log("Unable to automatically bind plot updates to API command"),
d.lookupTable={},d.remove=function(){};d.disable=function(){c=!1};d.enable=function(){c=!0};a&&(a._commandObserver=d);return d};p.hasSimpleAPICommandBindings=function(b,a,g){var e,d=a.length;for(e=0;e<d;e++){var c=a[e];var h=c.method;c=c.args;Array.isArray(c)||(c=[]);if(!h)return!1;c=p.computeAPICommandBindings(b,h,c);if(1!==c.length)return!1;if(l){h=c[0];if(h.type!==l.type||h.prop!==l.prop)return!1;if(Array.isArray(l.traces))if(Array.isArray(h.traces)){h.traces.sort();for(var k=0;k<l.traces.length;k++)if(l.traces[k]!==
h.traces[k])return!1}else return!1;else if(h.prop!==l.prop)return!1}else{var l=c[0];Array.isArray(l.traces)&&l.traces.sort()}h=c[0];h=h.value;if(Array.isArray(h))if(1===h.length)h=h[0];else return!1;g&&(g[h]=e)}return l};p.executeAPICommand=function(a,h,k){if("skip"===h)return Promise.resolve();var e=b.apiMethodRegistry[h];a=[a];Array.isArray(k)||(k=[]);for(var d=0;d<k.length;d++)a.push(k[d]);return e.apply(null,a).catch(function(b){g.warn("API call to Plotly."+h+" rejected.",b);return Promise.reject(b)})};
p.computeAPICommandBindings=function(b,a,g){Array.isArray(g)||(g=[]);switch(a){case "restyle":b=m(b,g);break;case "relayout":b=k(b,g);break;case "update":b=m(b,[g[0],g[2]]).concat(k(b,[g[1]]));break;case "animate":b=g;b=Array.isArray(b[0])&&1===b[0].length&&-1!==["string","number"].indexOf(typeof b[0][0])?[{type:"layout",prop:"_currentFrame",value:b[0][0].toString()}]:[];break;default:b=[]}return b}},{"../lib":716,"../registry":845}],789:[function(a,q,p){var n=a("../lib/extend").extendFlat;p.attributes=
function(a,m){a=a||{};m={valType:"info_array",editType:a.editType,items:[{valType:"number",min:0,max:1,editType:a.editType},{valType:"number",min:0,max:1,editType:a.editType}],dflt:[0,1]};m={x:n({},m,{}),y:n({},m,{}),editType:a.editType};a.noGridCell||(m.row={valType:"integer",min:0,dflt:0,editType:a.editType},m.column={valType:"integer",min:0,dflt:0,editType:a.editType});return m};p.defaults=function(a,m,h,b){var g=b&&b.x||[0,1];b=b&&b.y||[0,1];if(m=m.grid){var e=h("domain.column");void 0!==e&&(e<
m.columns?g=m._domains.x[e]:delete a.domain.column);e=h("domain.row");void 0!==e&&(e<m.rows?b=m._domains.y[e]:delete a.domain.row)}m=h("domain.x",g);h=h("domain.y",b);m[0]<m[1]||(a.domain.x=g.slice());h[0]<h[1]||(a.domain.y=b.slice())}},{"../lib/extend":707}],790:[function(a,q,p){q.exports=function(a){var k=a.editType,m=a.colorEditType;void 0===m&&(m=k);k={family:{valType:"string",noBlank:!0,strict:!0,editType:k},size:{valType:"number",min:1,editType:k},color:{valType:"color",editType:m},editType:k};
a.arrayOk&&(k.family.arrayOk=!0,k.size.arrayOk=!0,k.color.arrayOk=!0);return k}},{}],791:[function(a,q,p){q.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],792:[function(a,q,p){p.projNames={equirectangular:"equirectangular",mercator:"mercator",orthographic:"orthographic","natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",miller:"miller",robinson:"robinson",
eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator","albers usa":"albersUsa","winkel tripel":"winkel3",aitoff:"aitoff",sinusoidal:"sinusoidal"};p.axesNames=["lonaxis","lataxis"];p.lonaxisSpan={orthographic:180,
"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360};p.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180};p.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,
60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}};p.clipPad=.001;p.precision=.1;p.landColor="#F0DC82";p.waterColor="#3399FF";
p.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"};p.sphereSVG={type:"Sphere"};p.fillLayers={ocean:1,land:1,lakes:1};p.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1};p.layers="bg ocean land lakes subunits countries coastlines rivers lataxis lonaxis frame backplot frontplot".split(" ");p.layersForChoropleth="bg ocean land subunits countries coastlines lataxis lonaxis frame backplot rivers lakes frontplot".split(" ");p.layerNameToAdjective=
{ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],793:[function(a,q,p){function n(b){this.id=b.id;this.graphDiv=b.graphDiv;this.container=b.container;this.topojsonURL=b.topojsonURL;this.isStatic=b.staticPlot;this.midPt=this.bounds=this.fitScale=this.viewInitial=this.scope=this.projection=this.topojson=this.topojsonName=null;this.hasChoropleth=!1;this.traceHash={};this.layers={};this.basePaths={};this.dataPaths=
{};this.dataPoints={};this.bgRect=this.clipRect=this.clipDef=null;this.makeFramework()}function k(a){var c=a.projection.type,d=b.geo[A.projNames[c]](),e=a._isClipped?A.lonaxisSpan[c]/2:null;a=["center","rotate","parallels","clipExtent"];c=function(b){return b?d:[]};for(var f=0;f<a.length;f++){var g=a[f];"function"!==typeof d[g]&&(d[g]=c)}d.isLonLatOverEdges=function(a){if(null===d(a))return!0;if(e){var c=d.rotate();return b.geo.distance(a,[-c[0],-c[1]])>e*Math.PI/180}return!1};d.getPath=function(){return b.geo.path().projection(d)};
d.getBounds=function(b){return d.getPath().bounds(b)};d.fitExtent=function(b,a){var c=b[1][0]-b[0][0],e=b[1][1]-b[0][1],f=d.clipExtent&&d.clipExtent();d.scale(150).translate([0,0]);f&&d.clipExtent(null);var g=d.getBounds(a);a=Math.min(c/(g[1][0]-g[0][0]),e/(g[1][1]-g[0][1]));c=+b[0][0]+(c-a*(g[1][0]+g[0][0]))/2;b=+b[0][1]+(e-a*(g[1][1]+g[0][1]))/2;f&&d.clipExtent(f);return d.scale(150*a).translate([c,b])};d.precision(A.precision);e&&d.clipAngle(e-A.clipPad);return d}function m(b,a,d){var e=a[b],f=
A.scopeDefaults[a.scope];if("lonaxis"===b){var g=f.lonaxisRange;var h=f.lataxisRange;var k=function(b,a){return[b,a]}}else"lataxis"===b&&(g=f.lataxisRange,h=f.lonaxisRange,k=function(b,a){return[a,b]});e={type:"linear",range:[g[0],g[1]-1E-6],tick0:e.tick0,dtick:e.dtick};c.setConvert(e,d);d=c.calcTicks(e);a.isScoped||"lonaxis"!==b||d.pop();b=d.length;a=Array(b);for(e=0;e<b;e++){f=d[e].x;g=a[e]=[];for(var l=h[0];l<h[1]+2.5;l+=2.5)g.push(k(f,l))}return{type:"MultiLineString",coordinates:a}}function h(b,
a){var c=A.clipPad,d=b[0]+c;b=b[1]-c;var e=a[0]+c;a=a[1]-c;0<d&&0>b&&(b+=360);c=(b-d)/4;return{type:"Polygon",coordinates:[[[d,e],[d,a],[d+c,a],[d+2*c,a],[d+3*c,a],[b,a],[b,e],[b-c,e],[b-2*c,e],[b-3*c,e],[d,e]]]}}var b=a("d3"),g=a("../../registry"),e=a("../../lib"),t=a("../../components/color"),l=a("../../components/drawing"),f=a("../../components/fx"),d=a("../plots"),c=a("../cartesian/axes"),r=a("../cartesian/autorange").getAutoRange,u=a("../../components/dragelement"),v=a("../cartesian/select").prepSelect,
w=a("../cartesian/select").selectOnClick,y=a("./zoom"),A=a("./constants"),z=a("../../lib/geo_location_utils"),x=a("../../lib/topojson_utils"),C=a("topojson-client").feature;a("./projections")(b);a=n.prototype;q.exports=function(b){return new n(b)};a.plot=function(b,a,c){var d=this,e=a[this.id],f=[],g=!1,h;for(h in A.layerNameToAdjective)if("frame"!==h&&e["show"+h]){g=!0;break}for(h=0;h<b.length;h++)if(b[0][0].trace.locationmode){g=!0;break}g&&(e=x.getTopojsonName(e),null===d.topojson||e!==d.topojsonName)&&
(d.topojsonName=e,void 0===PlotlyGeoAssets.topojson[d.topojsonName]&&f.push(d.fetchTopojson()));f=f.concat(z.fetchTraceGeoData(b));c.push(new Promise(function(c,e){Promise.all(f).then(function(){d.topojson=PlotlyGeoAssets.topojson[d.topojsonName];d.update(b,a);c()}).catch(e)}))};a.fetchTopojson=function(){var a=this,c=x.getTopojsonPath(a.topojsonURL,a.topojsonName);return new Promise(function(d,e){b.json(c,function(b,f){if(b)return 404===b.status?e(Error(["plotly.js could not find topojson file at",
c,". Make sure the *topojsonURL* plot config option is set properly."].join(" "))):e(Error(["unexpected error while fetching topojson file at",c].join(" ")));PlotlyGeoAssets.topojson[a.topojsonName]=f;d()})})};a.update=function(b,a){var c=a[this.id];this.hasChoropleth=!1;for(var e=0;e<b.length;e++){var f=b[e],g=f[0].trace;"choropleth"===g.type&&(this.hasChoropleth=!0);!0===g.visible&&0<g._length&&g._module.calcGeoJSON(f,a)}this.updateProjection(b,a)||(this.viewInitial&&this.scope===c.scope||this.saveViewInitial(c),
this.scope=c.scope,this.updateBaseLayers(a,c),this.updateDims(a,c),this.updateFx(a,c),d.generalUpdatePerTraceModule(this.graphDiv,this,b,c),b=this.layers.frontplot.select(".scatterlayer"),this.dataPoints.point=b.selectAll(".point"),this.dataPoints.text=b.selectAll("text"),this.dataPaths.line=b.selectAll(".js-line"),b=this.layers.backplot.select(".choroplethlayer"),this.dataPaths.choropleth=b.selectAll("path"),this.render())};a.updateProjection=function(b,a){b=this.graphDiv;var c=a[this.id],d=a._size,
f=c.domain,l=c.projection,m=c.lonaxis,t=c.lataxis,n=m._ax,u=t._ax;a=this.projection=k(c);f=[[d.l+d.w*f.x[0],d.t+d.h*(1-f.y[1])],[d.l+d.w*f.x[1],d.t+d.h*(1-f.y[0])]];d=c.center||{};var p=l.rotation||{},q=m.range||[],v=t.range||[];c.fitbounds&&(n._length=f[1][0]-f[0][0],u._length=f[1][1]-f[0][1],n.range=r(b,n),u.range=r(b,u),t=(n.range[0]+n.range[1])/2,m=(u.range[0]+u.range[1])/2,c._isScoped?d={lon:t,lat:m}:c._isClipped?(d={lon:t,lat:m},p={lon:t,lat:m,roll:p.roll},v=l.type,q=A.lonaxisSpan[v]/2||180,
v=A.lataxisSpan[v]/2||180,q=[t-q,t+q],v=[m-v,m+v]):(d={lon:t,lat:m},p={lon:t,lat:p.lat,roll:p.roll}));a.center([d.lon-p.lon,d.lat-p.lat]).rotate([-p.lon,-p.lat,p.roll]).parallels(l.parallels);p=h(q,v);a.fitExtent(f,p);f=this.bounds=a.getBounds(p);t=this.fitScale=a.scale();p=a.translate();if(!(isFinite(f[0][0])&&isFinite(f[0][1])&&isFinite(f[1][0])&&isFinite(f[1][1]))||isNaN(p[0])||isNaN(p[0])){a=["fitbounds","projection.rotation","center","lonaxis.range","lataxis.range"];c={};for(d=0;d<a.length;d++)c[this.id+
"."+a[d]]=null;this.viewInitial=null;e.warn("Invalid geo settings, relayout'ing to default view.");b._promises.push(g.call("relayout",b,c));return"Invalid geo settings, relayout'ing to default view."}c.fitbounds?(b=a.getBounds(h(n.range,u.range)),b=Math.min((f[1][0]-f[0][0])/(b[1][0]-b[0][0]),(f[1][1]-f[0][1])/(b[1][1]-b[0][1])),isFinite(b)?a.scale(b*t):e.warn("Something went wrong during"+this.id+"fitbounds computations.")):a.scale(l.scale*t);b=this.midPt=[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2];
a.translate([p[0]+(b[0]-p[0]),p[1]+(b[1]-p[1])]).clipExtent(f);c._isAlbersUsa&&(b=a([d.lon,d.lat]),c=a.translate(),a.translate([c[0]-(b[0]-c[0]),c[1]-(b[1]-c[1])]))};a.updateBaseLayers=function(a,c){function d(b){return"lonaxis"===b||"lataxis"===b}var e=this,f=e.topojson,g=e.layers,h=e.basePaths,k=(this.hasChoropleth?A.layersForChoropleth:A.layers).filter(function(b){return A.lineLayers[b]||A.fillLayers[b]?c["show"+b]:d(b)?c[b].showgrid:!0});k=e.framework.selectAll(".layer").data(k,String);k.exit().each(function(a){delete g[a];
delete h[a];b.select(this).remove()});k.enter().append("g").attr("class",function(b){return"layer "+b}).each(function(a){var c=g[a]=b.select(this);"bg"===a?e.bgRect=c.append("rect").style("pointer-events","all"):d(a)?h[a]=c.append("path").style("fill","none"):"backplot"===a?c.append("g").classed("choroplethlayer",!0):"frontplot"===a?c.append("g").classed("scatterlayer",!0):A.lineLayers[a]?h[a]=c.append("path").style("fill","none").style("stroke-miterlimit",2):A.fillLayers[a]&&(h[a]=c.append("path").style("stroke",
"none"))});k.order();k.each(function(b){var e=h[b],g=A.layerNameToAdjective[b];"frame"===b?e.datum(A.sphereSVG):A.lineLayers[b]||A.fillLayers[b]?e.datum(C(f,f.objects[b])):d(b)&&e.datum(m(b,c,a)).call(t.stroke,c[b].gridcolor).call(l.dashLine,"",c[b].gridwidth);A.lineLayers[b]?e.call(t.stroke,c[g+"color"]).call(l.dashLine,"",c[g+"width"]):A.fillLayers[b]&&e.call(t.fill,c[g+"color"])})};a.updateDims=function(b,a){var c=this.bounds,d=(a.framewidth||0)/2;b=c[0][0]-d;var e=c[0][1]-d,f=c[1][0]-b+d;c=c[1][1]-
e+d;l.setRect(this.clipRect,b,e,f,c);this.bgRect.call(l.setRect,b,e,f,c).call(t.fill,a.bgcolor);this.xaxis._offset=b;this.xaxis._length=f;this.yaxis._offset=e;this.yaxis._length=c};a.updateFx=function(a,c){function d(){var b=h.viewInitial,a={},c;for(c in b)a[h.id+"."+c]=b[c];g.call("_guiRelayout",k,a);k.emit("plotly_doubleclick",null)}function e(b){return h.projection.invert([b[0]+h.xaxis._offset,b[1]+h.yaxis._offset])}var h=this,k=h.graphDiv,l=h.bgRect,m=a.dragmode,r=a.clickmode;if(!h.isStatic){var t;
"select"===m?t=function(b,a){(b.range={})[h.id]=[e([a.xmin,a.ymin]),e([a.xmax,a.ymax])]}:"lasso"===m&&(t=function(b,a,c){(b.lassoPoints={})[h.id]=c.filtered.map(e)});var n={element:h.bgRect.node(),gd:k,plotinfo:{id:h.id,xaxis:h.xaxis,yaxis:h.yaxis,fillRangeItems:t},xaxes:[h.xaxis],yaxes:[h.yaxis],subplot:h.id,clickFn:function(b){2===b&&a._zoomlayer.selectAll(".select-outline").remove()}};if("pan"===m){if(l.node().onmousedown=null,l.call(y(h,c)),l.on("dblclick.zoom",d),!k._context._scrollZoom.geo)l.on("wheel.zoom",
null)}else if("select"===m||"lasso"===m)l.on(".zoom",null),n.prepFn=function(b,a,c){v(b,a,c,n,m)},u.init(n);l.on("mousemove",function(){var a=h.projection.invert(b.mouse(this));if(!a||isNaN(a[0])||isNaN(a[1]))return u.unhover(k,b.event);h.xaxis.p2c=function(){return a[0]};h.yaxis.p2c=function(){return a[1]};f.hover(k,b.event,h.id)});l.on("mouseout",function(){k._dragging||u.unhover(k,b.event)});l.on("click",function(){"select"!==m&&"lasso"!==m&&(-1<r.indexOf("select")&&w(b.event,k,[h.xaxis],[h.yaxis],
h.id,n),-1<r.indexOf("event")&&f.click(k,b.event))})}};a.makeFramework=function(){var a=this,d=a.graphDiv,e=d._fullLayout,f="clip"+e._uid+a.id;a.clipDef=e._clips.append("clipPath").attr("id",f);a.clipRect=a.clipDef.append("rect");a.framework=b.select(a.container).append("g").attr("class","geo "+a.id).call(l.setClipUrl,f,d);a.project=function(b){return(b=a.projection(b))?[b[0]-a.xaxis._offset,b[1]-a.yaxis._offset]:[null,null]};a.xaxis={_id:"x",c2p:function(b){return a.project(b)[0]}};a.yaxis={_id:"y",
c2p:function(b){return a.project(b)[1]}};a.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};c.setConvert(a.mockAxis,e)};a.saveViewInitial=function(b){var a=b.center||{},c=b.projection,d=c.rotation||{};this.viewInitial={fitbounds:b.fitbounds,"projection.scale":c.scale};e.extendFlat(this.viewInitial,b._isScoped?{"center.lon":a.lon,"center.lat":a.lat}:b._isClipped?{"projection.rotation.lon":d.lon,"projection.rotation.lat":d.lat}:{"center.lon":a.lon,"center.lat":a.lat,"projection.rotation.lon":d.lon})};
a.render=function(){function b(b){return(b=c(b.lonlat))?"translate("+b[0]+","+b[1]+")":null}function a(b){return c.isLonLatOverEdges(b.lonlat)?"none":null}var c=this.projection,d=c.getPath(),e;for(e in this.basePaths)this.basePaths[e].attr("d",d);for(e in this.dataPaths)this.dataPaths[e].attr("d",function(b){return d(b.geojson)});for(e in this.dataPoints)this.dataPoints[e].attr("display",a).attr("transform",b)}},{"../../components/color":591,"../../components/dragelement":609,"../../components/drawing":612,
"../../components/fx":629,"../../lib":716,"../../lib/geo_location_utils":710,"../../lib/topojson_utils":743,"../../registry":845,"../cartesian/autorange":763,"../cartesian/axes":764,"../cartesian/select":781,"../plots":825,"./constants":792,"./projections":797,"./zoom":798,d3:165,"topojson-client":538}],794:[function(a,q,p){var n=a("../../plots/get_data").getSubplotCalcData;p=a("../../lib").counterRegex;var k=a("./geo");p=p("geo");q.exports={attr:"geo",name:"geo",idRoot:"geo",idRegex:p,attrRegex:p,
attributes:{geo:{valType:"subplotid",dflt:"geo",editType:"calc"}},layoutAttributes:a("./layout_attributes"),supplyLayoutDefaults:a("./layout_defaults"),plot:function(a){for(var h=a._fullLayout,b=a.calcdata,g=h._subplots.geo,e=0;e<g.length;e++){var m=g[e],l=n(b,"geo",m),f=h[m]._subplot;f||(f=k({id:m,graphDiv:a,container:h._geolayer.node(),topojsonURL:a._context.topojsonURL,staticPlot:a._context.staticPlot}),h[m]._subplot=f);f.plot(l,h,a._promises)}},updateFx:function(a){a=a._fullLayout;for(var h=a._subplots.geo,
b=0;b<h.length;b++){var g=a[h[b]];g._subplot.updateFx(a,g)}},clean:function(a,h,b,g){a=g._subplots.geo||[];for(b=0;b<a.length;b++){var e=a[b],k=g[e]._subplot;!h[e]&&k&&(k.framework.remove(),k.clipDef.remove())}}}},{"../../lib":716,"../../plots/get_data":799,"./geo":793,"./layout_attributes":795,"./layout_defaults":796}],795:[function(a,q,p){p=a("../../components/color/attributes");var n=a("../domain").attributes,k=a("./constants");a=a("../../plot_api/edit_types").overrideAll;var m={range:{valType:"info_array",
items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:p.lightLine},gridwidth:{valType:"number",min:0,dflt:1}};(q.exports=a({domain:n({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:Object.keys(k.scopeDefaults),dflt:"world"},
projection:{type:{valType:"enumerated",values:Object.keys(k.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:p.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",
dflt:!1},landcolor:{valType:"color",dflt:k.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:k.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:k.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:k.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:p.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},
subunitcolor:{valType:"color",dflt:p.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:p.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:p.background},lonaxis:m,lataxis:m},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":590,"../../plot_api/edit_types":747,"../domain":789,"./constants":792}],796:[function(a,q,p){function n(a,g,f,d){var c=
h(d.fullData,"geo",d.id).map(function(b){return b._expandedIndex});d=f("resolution");var l=f("scope"),m=b.scopeDefaults[l],t=f("projection.type",m.projType),n=g._isAlbersUsa="albers usa"===t;n&&(l=g.scope="usa");var p=g._isScoped="world"!==l,q=g._isConic=-1!==t.indexOf("conic"),z=g._isClipped=!!b.lonaxisSpan[t];!1===a.visible&&(a=k.extendDeep({},g._template),a.showcoastlines=!1,a.showcountries=!1,a.showframe=!1,a.showlakes=!1,a.showland=!1,a.showocean=!1,a.showrivers=!1,a.showsubunits=!1,a.lonaxis&&
(a.lonaxis.showgrid=!1),a.lataxis&&(a.lataxis.showgrid=!1),g._template=a);a=f("visible");for(var x,C=0;C<e.length;C++){var B=e[C];x=[30,10][C];if(p)var D=m[B+"Range"];else{D=b[B+"Span"];D=(D[t]||D["*"])/2;var G=f("projection.rotation."+B.substr(0,3),m.projRotate[C]);D=[G-D,G+D]}D=f(B+".range",D);f(B+".tick0");f(B+".dtick",x);if(x=f(B+".showgrid",a?void 0:!1))f(B+".gridcolor"),f(B+".gridwidth");g[B]._ax={type:"linear",_id:B.slice(0,3),_traceIndices:c,setScale:k.identity,c2l:k.identity,r2l:k.identity,
autorange:!0,range:D.slice(),_m:1,_input:{}}}C=g.lonaxis.range;c=g.lataxis.range;t=C[0];C=C[1];0<t&&0>C&&(C+=360);t=(t+C)/2;if(!n){C=p?m.projRotate:[t,0,0];var E=f("projection.rotation.lon",C[0]);f("projection.rotation.lat",C[1]);f("projection.rotation.roll",C[2]);if(x=f("showcoastlines",!p&&a))f("coastlinecolor"),f("coastlinewidth");(x=f("showocean",a?void 0:!1))&&f("oceancolor")}n?(E=-96.6,n=38.7):(E=p?t:E,n=(c[0]+c[1])/2);f("center.lon",E);f("center.lat",n);q&&f("projection.parallels",m.projParallels||
[0,60]);f("projection.scale");(x=f("showland",a?void 0:!1))&&f("landcolor");(x=f("showlakes",a?void 0:!1))&&f("lakecolor");if(x=f("showrivers",a?void 0:!1))f("rivercolor"),f("riverwidth");if(x=f("showcountries",p&&"usa"!==l&&a))f("countrycolor"),f("countrywidth");if("usa"===l||"north america"===l&&50===d)f("showsubunits",a),f("subunitcolor"),f("subunitwidth");!p&&(x=f("showframe",a))&&(f("framecolor"),f("framewidth"));f("bgcolor");f("fitbounds")&&(delete g.projection.scale,p?(delete g.center.lon,
delete g.center.lat):z?(delete g.center.lon,delete g.center.lat,delete g.projection.rotation.lon,delete g.projection.rotation.lat,delete g.lonaxis.range,delete g.lataxis.range):(delete g.center.lon,delete g.center.lat,delete g.projection.rotation.lon))}var k=a("../../lib"),m=a("../subplot_defaults"),h=a("../get_data").getSubplotData,b=a("./constants"),g=a("./layout_attributes"),e=b.axesNames;q.exports=function(b,a,e){m(b,a,e,{type:"geo",attributes:g,handleDefaults:n,fullData:e,partition:"y"})}},{"../../lib":716,
"../get_data":799,"../subplot_defaults":839,"./constants":792,"./layout_attributes":795}],797:[function(a,q,p){q.exports=function(a){function k(b,a){return{type:"Feature",id:b.id,properties:b.properties,geometry:m(b.geometry,a)}}function m(b,c){if(!b)return null;if("GeometryCollection"===b.type)return{type:"GeometryCollection",geometries:object.geometries.map(function(b){return m(b,c)})};if(!G.hasOwnProperty(b.type))return null;var d=G[b.type];a.geo.stream(b,c(d));return d.result()}function h(){}
function b(b){return 1<b?F:-1>b?-F:Math.asin(b)}function g(b){return 1<b?0:-1>b?E:Math.acos(b)}function e(b,a){var c=(2+F)*Math.sin(a);a/=2;for(var d=0,e=Infinity;10>d&&1E-6<Math.abs(e);d++)e=Math.cos(a),a-=e=(a+Math.sin(a)*(e+2)-c)/(2*e*(1+e));return[2/Math.sqrt(E*(4+E))*b*(1+Math.cos(a)),2*Math.sqrt(E/(4+E))*Math.sin(a)]}function t(b,a){function c(c,d){c=M(c/a,d);c[0]*=b;return c}2>arguments.length&&(a=b);if(1===a)return M;if(Infinity===a)return l;c.invert=function(c,d){c=M.invert(c/b,d);c[0]*=
a;return c};return c}function l(b,a){return[b*Math.cos(a)/Math.cos(a/=2),2*Math.sin(a)]}function f(b,a){return[3*b/(2*E)*Math.sqrt(E*E/3-a*a),a]}function d(b,a){return[b,1.25*Math.log(Math.tan(E/4+.4*a))]}function c(b){return function(a){var c=b*Math.sin(a),d=30,e;do a-=e=(a+Math.sin(a)-c)/(1+Math.cos(a));while(1E-6<Math.abs(e)&&0<--d);return a/2}}function r(b,a){var c=a*a,d=c*c;return[b*(.8707-.131979*c+d*(-.013791+d*(.003971*c-.001529*d))),a*(1.007226+c*(.015085+d*(-.044475+.028874*c-.005916*d)))]}
function n(b,a){var c=Math.min(18,36*Math.abs(a)/E),d=Math.floor(c);c-=d;var e=(k=N[d])[0],f=k[1],g=(k=N[++d])[0],h=k[1];d=(k=N[Math.min(19,++d)])[0];k=k[1];var k;return[b*(g+c*(d-e)/2+c*c*(d-2*g+e)/2),(0<a?F:-F)*(h+c*(k-f)/2+c*c*(k-2*h+f)/2)]}function p(b,a){return[b*Math.cos(a),a]}function q(b,a){var c=Math.cos(a);var d=(d=g(c*Math.cos(b/=2)))?d/Math.sin(d):1;return[2*c*Math.sin(b)*d,Math.sin(a)*d]}function y(b,a){var c=q(b,a);return[(c[0]+b/F)/2,(c[1]+a)/2]}a.geo.project=function(b,a){a=a.stream;
if(!a)throw Error("not yet supported");return(b&&A.hasOwnProperty(b.type)?A[b.type]:m)(b,a)};var A={Feature:k,FeatureCollection:function(b,a){return{type:"FeatureCollection",features:b.features.map(function(b){return k(b,a)})}}},z=[],x=[],C={point:function(b,a){z.push([b,a])},result:function(){var b=z.length?2>z.length?{type:"Point",coordinates:z[0]}:{type:"MultiPoint",coordinates:z}:null;z=[];return b}},B={lineStart:h,point:function(b,a){z.push([b,a])},lineEnd:function(){z.length&&(x.push(z),z=[])},
result:function(){var b=x.length?2>x.length?{type:"LineString",coordinates:x[0]}:{type:"MultiLineString",coordinates:x}:null;x=[];return b}},D={polygonStart:h,lineStart:h,point:function(b,a){z.push([b,a])},lineEnd:function(){var b=z.length;if(b){do z.push(z[0].slice());while(4>++b);x.push(z);z=[]}},polygonEnd:h,result:function(){if(!x.length)return null;var b=[],a=[];x.forEach(function(c){if(4>(e=c.length))var d=!1;else{d=0;for(var e,f=c[e-1][1]*c[0][0]-c[e-1][0]*c[0][1];++d<e;)f+=c[d-1][1]*c[d][0]-
c[d-1][0]*c[d][1];d=0>=f}d?b.push([c]):a.push(c)});a.forEach(function(a){var c=a[0];b.some(function(b){for(var d=b[0],e=c[0],f=c[1],g=!1,h=0,k=d.length,l=k-1;h<k;l=h++){var m=d[h],r=m[0];m=m[1];var t=d[l];l=t[0];t=t[1];m>f^t>f&&e<(l-r)*(f-m)/(t-m)+r&&(g=!g)}if(g)return b.push(a),!0})||b.push([a])});x=[];return b.length?1<b.length?{type:"MultiPolygon",coordinates:b}:{type:"Polygon",coordinates:b[0]}:null}},G={Point:C,MultiPoint:C,LineString:B,MultiLineString:B,Polygon:D,MultiPolygon:D,Sphere:D},E=
Math.PI,F=E/2,L=E/180,J=180/E,H=a.geo.projection,K=a.geo.projectionMutator;a.geo.interrupt=function(b){function c(a,c){for(var d=0>c?-1:1,e=g[+(0>c)],f=0,h=e.length-1;f<h&&a>e[f][2][0];++f);a=b(a-e[f][1][0],c);a[0]+=b(e[f][1][0],d*c>d*e[f][0][1]?e[f][0][1]:c)[0];return a}function d(){h=g.map(function(a){return a.map(function(a){var c=b(a[0][0],a[0][1])[0],d=b(a[2][0],a[2][1])[0],e=b(a[1][0],a[0][1])[1];a=b(a[1][0],a[1][1])[1];if(e>a){var f=e;e=a;a=f}return[[c,e],[d,a]]})})}function e(){for(var b=
[],c=0,d=g[0].length;c<d;++c){var e=g[0][c],h=180*e[0][0]/E,k=180*e[0][1]/E,l=180*e[1][1]/E,m=180*e[2][0]/E;e=180*e[2][1]/E;b.push(f([[h+1E-6,k+1E-6],[h+1E-6,l-1E-6],[m-1E-6,l-1E-6],[m-1E-6,e+1E-6]],30))}for(c=g[1].length-1;0<=c;--c)e=g[1][c],h=180*e[0][0]/E,k=180*e[0][1]/E,l=180*e[1][1]/E,m=180*e[2][0]/E,e=180*e[2][1]/E,b.push(f([[m-1E-6,e-1E-6],[m-1E-6,l+1E-6],[h+1E-6,l+1E-6],[h+1E-6,k-1E-6]],30));return{type:"Polygon",coordinates:[a.merge(b)]}}function f(b,a){for(var c=-1,d=b.length,e=b[0],f,g,
h,k=[];++c<d;){f=b[c];g=(f[0]-e[0])/a;h=(f[1]-e[1])/a;for(var l=0;l<a;++l)k.push([e[0]+l*g,e[1]+l*h]);e=f}k.push(f);return k}var g=[[[[-E,0],[0,F],[E,0]]],[[[-E,0],[0,-F],[E,0]]]],h;b.invert&&(c.invert=function(a,d){for(var e=h[+(0>d)],f=g[+(0>d)],k=0,l=e.length;k<l;++k){var m=e[k];if(m[0][0]<=a&&a<m[1][0]&&m[0][1]<=d&&d<m[1][1])return e=b.invert(a-b(f[k][1][0],0)[0],d),e[0]+=f[k][1][0],f=c(e[0],e[1]),a=[a,d],1E-6>Math.abs(f[0]-a[0])&&1E-6>Math.abs(f[1]-a[1])?e:null}});var k=a.geo.projection(c),l=
k.stream;k.stream=function(b){var c=k.rotate(),d=l(b),f=(k.rotate([0,0]),l(b));k.rotate(c);d.sphere=function(){a.geo.stream(e(),f)};return d};k.lobes=function(b){if(!arguments.length)return g.map(function(b){return b.map(function(b){return[[180*b[0][0]/E,180*b[0][1]/E],[180*b[1][0]/E,180*b[1][1]/E],[180*b[2][0]/E,180*b[2][1]/E]]})});g=b.map(function(b){return b.map(function(b){return[[b[0][0]*E/180,b[0][1]*E/180],[b[1][0]*E/180,b[1][1]*E/180],[b[2][0]*E/180,b[2][1]*E/180]]})});d();return k};return k};
e.invert=function(a,c){c=.5*c*Math.sqrt((4+E)/E);var d=b(c),e=Math.cos(d);return[a/(2/Math.sqrt(E*(4+E))*(1+e)),b((d+c*(e+2))/(2+F))]};(a.geo.eckert4=function(){return H(e)}).raw=e;var M=a.geo.azimuthalEqualArea.raw;l.invert=function(a,c){c=2*b(c/2);return[a*Math.cos(c/2)/Math.cos(c),c]};(a.geo.hammer=function(){var b=2,a=K(t),c=a(b);c.coefficient=function(c){return arguments.length?a(b=+c):b};return c}).raw=t;f.invert=function(b,a){return[2/3*E*b/Math.sqrt(E*E/3-a*a),a]};(a.geo.kavrayskiy7=function(){return H(f)}).raw=
f;d.invert=function(b,a){return[b,2.5*Math.atan(Math.exp(.8*a))-.625*E]};(a.geo.miller=function(){return H(d)}).raw=d;c(E);var I=function(a,d,e){function f(b,c){return[a*b*Math.cos(c=g(c)),d*Math.sin(c)]}var g=c(e);f.invert=function(c,f){f=b(f/d);return[c/(a*Math.cos(f)),b((2*f+Math.sin(2*f))/e)]};return f}(Math.SQRT2/F,Math.SQRT2,E);(a.geo.mollweide=function(){return H(I)}).raw=I;r.invert=function(b,a){var c=a,d=25;do{var e=c*c;var f=e*e;c-=f=(c*(1.007226+e*(.015085+f*(-.044475+.028874*e-.005916*
f)))-a)/(1.007226+e*(.045255+f*(-.311325+.259866*e-.005916*11*f)))}while(1E-6<Math.abs(f)&&0<--d);return[b/(.8707+(e=c*c)*(-.131979+e*(-.013791+e*e*e*(.003971-.001529*e)))),c]};(a.geo.naturalEarth=function(){return H(r)}).raw=r;var N=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];N.forEach(function(b){b[1]*=
1.0144});n.invert=function(b,a){var c=a/F,d=90*c,e=Math.min(18,Math.abs(d/5)),f=Math.max(0,Math.floor(e));do{var g=N[f][1],h=N[f+1][1],k=N[Math.min(19,f+2)][1],l=k-g,m=2*(Math.abs(c)-h)/l;g=(k-2*h+g)/l;m*=1-g*m*(1-2*g*m);if(0<=m||1===f){d=(0<=a?5:-5)*(m+e);c=50;do e=Math.min(18,Math.abs(d)/5),f=Math.floor(e),m=e-f,g=N[f][1],h=N[f+1][1],k=N[Math.min(19,f+2)][1],d-=(e=(0<=a?F:-F)*(h+m*(k-g)/2+m*m*(k-2*h+g)/2)-a)*J;while(1E-12<Math.abs(e)&&0<--c);break}}while(0<=--f);a=N[f][0];e=N[f+1][0];f=N[Math.min(19,
f+2)][0];return[b/(e+m*(f-a)/2+m*m*(f-2*e+a)/2),d*L]};(a.geo.robinson=function(){return H(n)}).raw=n;p.invert=function(b,a){return[b/Math.cos(a),a]};(a.geo.sinusoidal=function(){return H(p)}).raw=p;q.invert=function(b,a){if(!(b*b+4*a*a>E*E+1E-6)){var c=b,d=a,e=25;do{var f=Math.sin(c),h=Math.sin(c/2),k=Math.cos(c/2),l=Math.sin(d),m=Math.cos(d),r=Math.sin(2*d),t=l*l,n=m*m,u=h*h,p=1-n*k*k,q=p?g(m*k)*Math.sqrt(v=1/p):v=0,v;p=2*q*m*h-b;var w=q*l-a,x=v*(n*u+q*m*k*t),z=v*(.5*f*r-2*q*l*h);f=.25*v*(r*h-q*
l*n*f);m=v*(t*k+q*u*m);k=z*f-m*x;if(!k)break;z=(w*z-p*m)/k;p=(p*f-w*x)/k;c-=z;d-=p}while((1E-6<Math.abs(z)||1E-6<Math.abs(p))&&0<--e);return[c,d]}};(a.geo.aitoff=function(){return H(q)}).raw=q;y.invert=function(b,a){var c=b,d=a,e=25;do{var f=Math.cos(d),h=Math.sin(d),k=Math.sin(2*d),l=h*h,m=f*f,r=Math.sin(c),t=Math.cos(c/2),n=Math.sin(c/2),u=n*n,p=1-m*t*t,q=p?g(f*t)*Math.sqrt(v=1/p):v=0,v;p=.5*(2*q*f*n+c/F)-b;var w=.5*(q*h+d)-a,x=.5*v*(m*u+q*f*t*l)+.5/F,z=v*(r*k/4-q*h*n);h=.125*v*(k*n-q*h*m*r);l=
.5*v*(l*t+q*u*f)+.5;f=z*h-l*x;z=(w*z-p*l)/f;p=(p*h-w*x)/f;c-=z;d-=p}while((1E-6<Math.abs(z)||1E-6<Math.abs(p))&&0<--e);return[c,d]};(a.geo.winkel3=function(){return H(y)}).raw=y}},{}],798:[function(a,q,p){function n(b,a){return c.behavior.zoom().translate(a.translate()).scale(a.scale())}function k(b,a,c){function d(b,a){m[e+"."+b]=r.nestedProperty(h,b).get();u.call("_storeDirectGUIEdit",g,k._preGUI,m);var c=r.nestedProperty(l,b);c.get()!==a&&(c.set(a),r.nestedProperty(h,b).set(a),t[e+"."+b]=a)}var e=
b.id,f=b.graphDiv,g=f.layout,h=g[e],k=f._fullLayout,l=k[e],m={},t={};c(d);d("projection.scale",a.scale()/b.fitScale);d("fitbounds",!1);f.emit("plotly_relayout",t)}function m(b,a){function d(c){var d=a.invert(b.midPt);c("center.lon",d[0]);c("center.lat",d[1])}var e=n(b,a);e.on("zoomstart",function(){c.select(this).style(y)}).on("zoom",function(){a.scale(c.event.scale).translate(c.event.translate);b.render();var d=a.invert(b.midPt);b.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":a.scale()/
b.fitScale,"geo.center.lon":d[0],"geo.center.lat":d[1]})}).on("zoomend",function(){c.select(this).style(A);k(b,a,d)});return e}function h(b,a){function d(c){var d=a.rotate(),e=a.invert(b.midPt);c("projection.rotation.lon",-d[0]);c("center.lon",e[0]);c("center.lat",e[1])}var e=n(b,a),f,g,h,l,m,r,t,u,p;e.on("zoomstart",function(){c.select(this).style(y);f=c.mouse(this);g=a.rotate();h=a.translate();l=g;m=a.invert(f)}).on("zoom",function(){r=c.mouse(this);var d=f;var k=a.invert(d);k?(k=a(k),d=2<Math.abs(k[0]-
d[0])||2<Math.abs(k[1]-d[1])):d=!0;d?(e.scale(a.scale()),e.translate(a.translate())):(a.scale(c.event.scale),a.translate([h[0],c.event.translate[1]]),m?a.invert(r)&&(u=a.invert(r),t=[l[0]+(u[0]-m[0]),g[1],g[2]],a.rotate(t),l=t):(f=r,m=a.invert(f)),p=!0,b.render(),d=a.rotate(),k=a.invert(b.midPt),b.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":a.scale()/b.fitScale,"geo.center.lon":k[0],"geo.center.lat":k[1],"geo.projection.rotation.lon":-d[0]}))}).on("zoomend",function(){c.select(this).style(A);
p&&k(b,a,d)});return e}function b(b,a){function h(b){p++||b({type:"zoomstart"})}function m(b){var c=a.rotate();b("projection.rotation.lon",-c[0]);b("projection.rotation.lat",-c[1])}a.rotate();a.scale();var r=n(b,a),u=d(r,"zoomstart","zoom","zoomend"),p=0,q=r.on,v;r.on("zoomstart",function(){c.select(this).style(y);var b=c.mouse(this),d=a.rotate(),k=d,m=a.translate(),n=e(d);v=g(a,b);q.call(r,"zoom",function(){var e=c.mouse(this);a.scale(c.event.scale);if(!v)b=e,v=g(a,b);else if(g(a,e)){a.rotate(d).translate(m);
var h=g(a,e);var r=v;if(r&&h){e=[r[1]*h[2]-r[2]*h[1],r[2]*h[0]-r[0]*h[2],r[0]*h[1]-r[1]*h[0]];var p=Math.sqrt(f(e,e));h=.5*Math.acos(Math.max(-1,Math.min(1,f(r,h))));r=Math.sin(h)/p;var q=p&&[Math.cos(h),e[2]*r,-e[1]*r,e[0]*r]}else q=void 0;e=n[0];p=n[1];h=n[2];r=n[3];var x=q[0],z=q[1],y=q[2];q=q[3];e=[e*x-p*z-h*y-r*q,e*z+p*x+h*q-r*y,e*y-p*q+h*x+r*z,e*q+p*y-h*z+r*x];h=[Math.atan2(2*(e[0]*e[1]+e[2]*e[3]),1-2*(e[1]*e[1]+e[2]*e[2]))*w,Math.asin(Math.max(-1,Math.min(1,2*(e[0]*e[2]-e[3]*e[1]))))*w,Math.atan2(2*
(e[0]*e[3]+e[1]*e[2]),1-2*(e[2]*e[2]+e[3]*e[3]))*w];p=v;e=k;x=l(p,2,h[0]);x=l(x,1,h[1]);x=l(x,0,h[2]-e[2]);r=p[0];q=p[1];p=p[2];h=x[0];z=x[1];x=x[2];y=Math.atan2(q,r)*w;q=Math.sqrt(r*r+q*q);Math.abs(z)>q?(r=(0<z?90:-90)-y,q=0):(r=Math.asin(z/q)*w-y,q=Math.sqrt(q*q-z*z));z=180-r-2*y;y=(Math.atan2(x,h)-Math.atan2(p,q))*w;p=(Math.atan2(x,h)-Math.atan2(p,-q))*w;h=t(e[0],e[1],r,y);x=t(e[0],e[1],z,p);e=h<=x?[r,y,e[2]]:[z,p,e[2]];isFinite(e[0])&&isFinite(e[1])&&isFinite(e[2])||(e=k);a.rotate(e);k=e}u.of(this,
arguments)({type:"zoom"})});h(u.of(this,arguments))}).on("zoomend",function(){c.select(this).style(A);q.call(r,"zoom",null);var d=u.of(this,arguments);--p||d({type:"zoomend"});k(b,a,m)}).on("zoom.redraw",function(){b.render();var c=a.rotate();b.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":a.scale()/b.fitScale,"geo.projection.rotation.lon":-c[0],"geo.projection.rotation.lat":-c[1]})});return c.rebind(r,u,"on")}function g(b,a){if(b=(a=b.invert(a))&&isFinite(a[0])&&isFinite(a[1])){b=a[0]*
v;a=a[1]*v;var c=Math.cos(a);b=[c*Math.cos(b),c*Math.sin(b),Math.sin(a)]}return b}function e(b){var a=.5*b[0]*v,c=.5*b[1]*v,d=.5*b[2]*v;b=Math.sin(a);a=Math.cos(a);var e=Math.sin(c);c=Math.cos(c);var f=Math.sin(d);d=Math.cos(d);return[a*c*d+b*e*f,b*c*d-a*e*f,a*e*d+b*c*f,a*c*f-b*e*d]}function t(b,a,c,d){b=((c-b)%360+540)%360-180;a=((d-a)%360+540)%360-180;return Math.sqrt(b*b+a*a)}function l(b,a,c){var d=c*v;c=b.slice();var e=0===a?1:0;a=2===a?1:2;var f=Math.cos(d);d=Math.sin(d);c[e]=b[e]*f-b[a]*d;
c[a]=b[a]*f+b[e]*d;return c}function f(b,a){for(var c=0,d=0,e=b.length;d<e;++d)c+=b[d]*a[d];return c}function d(b){for(var a=0,d=arguments.length,e=[];++a<d;)e.push(arguments[a]);var f=c.dispatch.apply(null,e);f.of=function(a,d){return function(e){try{var g=e.sourceEvent=c.event;e.target=b;c.event=e;f[e.type].apply(a,d)}finally{c.event=g}}};return f}var c=a("d3"),r=a("../../lib"),u=a("../../registry"),v=Math.PI/180,w=180/Math.PI,y={cursor:"pointer"},A={cursor:"auto"};q.exports=function(a,c){return(c._isScoped?
m:c._isClipped?b:h)(a,a.projection)}},{"../../lib":716,"../../registry":845,d3:165}],799:[function(a,q,p){var n=a("../registry"),k=a("./cartesian/constants").SUBPLOT_PATTERN;p.getSubplotCalcData=function(a,h,b){h=n.subplotsRegistry[h];if(!h)return[];h=h.attr;for(var g=[],e=0;e<a.length;e++){var k=a[e];k[0].trace[h]===b&&g.push(k)}return g};p.getModuleCalcData=function(a,h){var b=[],g=[];h="string"===typeof h?n.getModule(h).plot:"function"===typeof h?h:h.plot;if(!h)return[b,a];for(var e=0;e<a.length;e++){var k=
a[e],l=k[0].trace;!0===l.visible&&0!==l._length&&(l._module.plot===h?b.push(k):g.push(k))}return[b,g]};p.getSubplotData=function(a,h,b){if(!n.subplotsRegistry[h])return[];var g=n.subplotsRegistry[h].attr,e=[];if("gl2d"===h){var m=b.match(k);var l="x"+m[1];var f="y"+m[2]}for(var d=0;d<a.length;d++)m=a[d],"gl2d"===h&&n.traceIs(m,"gl2d")?m[g[0]]===l&&m[g[1]]===f&&e.push(m):m[g]===b&&e.push(m);return e}},{"../registry":845,"./cartesian/constants":770}],800:[function(a,q,p){function n(b,a){this.element=
b;this.plot=a;this.wheelListener=this.mouseListener=null;this.lastInputTime=Date.now();this.lastPos=[0,0];this.boxInited=this.boxEnabled=!1;this.boxStart=[0,0];this.boxEnd=[0,0];this.dragStart=[0,0]}var k=a("mouse-change"),m=a("mouse-wheel"),h=a("mouse-event-offset"),b=a("../cartesian/constants"),g=a("has-passive-events");q.exports=function(a){function e(){for(var b=a.graphDiv._fullLayout._axisConstraintGroups,c=a.xaxis._id,d=a.yaxis._id,e=0;e<b.length;e++)if(-1!==b[e][c]){if(-1!==b[e][d])return!0;
break}return!1}function l(f,g,h){function k(b,d,e){var f=Math.min(d,e);d=Math.max(d,e);f!==d?(l[b]=f,l[b+2]=d,c.dataBox=l,a.setRanges(l)):(a.selectBox.selectBox=[0,0,1,1],a.glplot.setDirty())}var l=a.calcDataBox(),m=d.viewBox,r=c.lastPos[0],t=c.lastPos[1],n=b.MINDRAG*d.pixelRatio,u=b.MINZOOM*d.pixelRatio;g*=d.pixelRatio;h*=d.pixelRatio;h=m[3]-m[1]-h;switch(a.fullLayout.dragmode){case "zoom":f?(t=g/(m[2]-m[0])*(l[2]-l[0])+l[0],m=h/(m[3]-m[1])*(l[3]-l[1])+l[1],c.boxInited||(c.boxStart[0]=t,c.boxStart[1]=
m,c.dragStart[0]=g,c.dragStart[1]=h),c.boxEnd[0]=t,c.boxEnd[1]=m,c.boxInited=!0,c.boxEnabled||c.boxStart[0]===c.boxEnd[0]&&c.boxStart[1]===c.boxEnd[1]||(c.boxEnabled=!0),m=Math.abs(c.dragStart[0]-g)<u,u=Math.abs(c.dragStart[1]-h)<u,!e()||m&&u?(m&&(c.boxEnd[0]=c.boxStart[0]),u&&(c.boxEnd[1]=c.boxStart[1])):(u=c.boxEnd[0]-c.boxStart[0],m=c.boxEnd[1]-c.boxStart[1],t=(l[3]-l[1])/(l[2]-l[0]),Math.abs(u*t)>Math.abs(m)?(c.boxEnd[1]=c.boxStart[1]+Math.abs(u)*t*(0<=m?1:-1),c.boxEnd[1]<l[1]?(c.boxEnd[1]=l[1],
c.boxEnd[0]=c.boxStart[0]+(l[1]-c.boxStart[1])/Math.abs(t)):c.boxEnd[1]>l[3]&&(c.boxEnd[1]=l[3],c.boxEnd[0]=c.boxStart[0]+(l[3]-c.boxStart[1])/Math.abs(t))):(c.boxEnd[0]=c.boxStart[0]+Math.abs(m)/t*(0<=u?1:-1),c.boxEnd[0]<l[0]?(c.boxEnd[0]=l[0],c.boxEnd[1]=c.boxStart[1]+(l[0]-c.boxStart[0])*Math.abs(t)):c.boxEnd[0]>l[2]&&(c.boxEnd[0]=l[2],c.boxEnd[1]=c.boxStart[1]+(l[2]-c.boxStart[0])*Math.abs(t))))):c.boxEnabled?(u=c.boxStart[0]!==c.boxEnd[0],m=c.boxStart[1]!==c.boxEnd[1],u||m?(u&&(k(0,c.boxStart[0],
c.boxEnd[0]),a.xaxis.autorange=!1),m&&(k(1,c.boxStart[1],c.boxEnd[1]),a.yaxis.autorange=!1),a.relayoutCallback()):a.glplot.setDirty(),c.boxEnabled=!1,c.boxInited=!1):c.boxInited&&(c.boxInited=!1);break;case "pan":c.boxEnabled=!1,c.boxInited=!1,f?(c.panning||(c.dragStart[0]=g,c.dragStart[1]=h),Math.abs(c.dragStart[0]-g)<n&&(g=c.dragStart[0]),Math.abs(c.dragStart[1]-h)<n&&(h=c.dragStart[1]),u=(r-g)*(l[2]-l[0])/(d.viewBox[2]-d.viewBox[0]),m=(t-h)*(l[3]-l[1])/(d.viewBox[3]-d.viewBox[1]),l[0]+=u,l[2]+=
u,l[1]+=m,l[3]+=m,a.setRanges(l),c.panning=!0,c.lastInputTime=Date.now(),a.xaxis.autorange=!1,a.yaxis.autorange=!1,a.cameraChanged(),a.handleAnnotations()):c.panning&&(c.panning=!1,a.relayoutCallback())}c.lastPos[0]=g;c.lastPos[1]=h}var f=a.mouseContainer,d=a.glplot,c=new n(f,d);c.mouseListener=k(f,l);f.addEventListener("touchstart",function(b){var a=h(b.changedTouches[0],f);l(0,a[0],a[1]);l(1,a[0],a[1]);b.preventDefault()},g?{passive:!1}:!1);f.addEventListener("touchmove",function(b){b.preventDefault();
var a=h(b.changedTouches[0],f);l(1,a[0],a[1]);b.preventDefault()},g?{passive:!1}:!1);f.addEventListener("touchend",function(b){l(0,c.lastPos[0],c.lastPos[1]);b.preventDefault()},g?{passive:!1}:!1);c.wheelListener=m(f,function(b,e){if(!a.scrollZoom)return!1;b=a.calcDataBox();var f=d.viewBox;e=Math.exp(5*e/(f[3]-f[1]));var g=c.lastPos[0]/(f[2]-f[0])*(b[2]-b[0])+b[0];f=c.lastPos[1]/(f[3]-f[1])*(b[3]-b[1])+b[1];b[0]=(b[0]-g)*e+g;b[2]=(b[2]-g)*e+g;b[1]=(b[1]-f)*e+f;b[3]=(b[3]-f)*e+f;a.setRanges(b);c.lastInputTime=
Date.now();a.xaxis.autorange=!1;a.yaxis.autorange=!1;a.cameraChanged();a.handleAnnotations();a.relayoutCallback();return!0},!0);return c}},{"../cartesian/constants":770,"has-passive-events":412,"mouse-change":436,"mouse-event-offset":437,"mouse-wheel":439}],801:[function(a,q,p){function n(b){this.scene=b;this.gl=b.gl;this.pixelRatio=b.pixelRatio;this.screenBox=[0,0,1,1];this.viewBox=[0,0,1,1];this.dataBox=[-1,-1,1,1];this.borderLineEnable=[!1,!1,!1,!1];this.borderLineWidth=[1,1,1,1];this.borderLineColor=
[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.ticks=[[],[]];this.tickEnable=[!0,!0,!1,!1];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labels=["x","y"];this.labelEnable=[!0,!0,!1,!1];this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2];this.labelPad=[15,15,15,15];this.labelSize=[12,12];this.labelFont=["sans-serif","sans-serif"];
this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.title="";this.titleEnable=!0;this.titleCenter=[0,0,0,0];this.titleAngle=0;this.titleColor=[0,0,0,1];this.titleFont="sans-serif";this.titleSize=18;this.gridLineEnable=[!0,!0];this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]];this.gridLineWidth=[1,1];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[1,1];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0];this.static=this.scene.staticPlot}var k=a("../cartesian/axes"),
m=a("../../lib/str2rgbarray");a=n.prototype;var h=["xaxis","yaxis"];a.merge=function(b){this.titleEnable=!1;this.backgroundColor=m(b.plot_bgcolor);var a,e;for(e=0;2>e;++e){var k=h[e];var l=k.charAt(0);var f=b[this.scene[k]._name];l=f.title.text===this.scene.fullLayout._dfltTitle[l]?"":f.title.text;for(a=0;2>=a;a+=2)this.labelEnable[e+a]=!1,this.labels[e+a]=l,this.labelColor[e+a]=m(f.title.font.color),this.labelFont[e+a]=f.title.font.family,this.labelSize[e+a]=f.title.font.size,this.labelPad[e+a]=
this.getLabelPad(k,f),this.tickEnable[e+a]=!1,this.tickColor[e+a]=m((f.tickfont||{}).color),this.tickAngle[e+a]="auto"===f.tickangle?0:Math.PI*-f.tickangle/180,this.tickPad[e+a]=this.getTickPad(f),this.tickMarkLength[e+a]=0,this.tickMarkWidth[e+a]=f.tickwidth||0,this.tickMarkColor[e+a]=m(f.tickcolor),this.borderLineEnable[e+a]=!1,this.borderLineColor[e+a]=m(f.linecolor),this.borderLineWidth[e+a]=f.linewidth||0;a=this.hasSharedAxis(f);l=this.hasAxisInDfltPos(k,f)&&!a;k=this.hasAxisInAltrPos(k,f)&&
!a;var d=f.mirror||!1;var c=a?-1!==String(d).indexOf("all"):!!d;a=a?"allticks"===d:-1!==String(d).indexOf("ticks");l?this.labelEnable[e]=!0:k&&(this.labelEnable[e+2]=!0);l?this.tickEnable[e]=f.showticklabels:k&&(this.tickEnable[e+2]=f.showticklabels);if(l||c)this.borderLineEnable[e]=f.showline;if(k||c)this.borderLineEnable[e+2]=f.showline;if(l||a)this.tickMarkLength[e]=this.getTickMarkLength(f);if(k||a)this.tickMarkLength[e+2]=this.getTickMarkLength(f);this.gridLineEnable[e]=f.showgrid;this.gridLineColor[e]=
m(f.gridcolor);this.gridLineWidth[e]=f.gridwidth;this.zeroLineEnable[e]=f.zeroline;this.zeroLineColor[e]=m(f.zerolinecolor);this.zeroLineWidth[e]=f.zerolinewidth}};a.hasSharedAxis=function(b){var a=this.scene;return 0!==k.findSubplotsWithAxis(a.fullLayout._subplots.gl2d,b).indexOf(a.id)};a.hasAxisInDfltPos=function(b,a){a=a.side;if("xaxis"===b)return"bottom"===a;if("yaxis"===b)return"left"===a};a.hasAxisInAltrPos=function(b,a){a=a.side;if("xaxis"===b)return"top"===a;if("yaxis"===b)return"right"===
a};a.getLabelPad=function(b,a){var e=a.title.font.size,g=a.showticklabels;if("xaxis"===b)return"top"===a.side?-10+e*(1.5+(g?1:0)):-10+e*(1.5+(g?.5:0));if("yaxis"===b)return"right"===a.side?10+e*(1.5+(g?1:.5)):10+e*(1.5+(g?.5:0))};a.getTickPad=function(b){return"outside"===b.ticks?10+b.ticklen:15};a.getTickMarkLength=function(b){if(!b.ticks)return 0;var a=b.ticklen;return"inside"===b.ticks?-a:a};q.exports=function(b){return new n(b)}},{"../../lib/str2rgbarray":739,"../cartesian/axes":764}],802:[function(a,
q,p){q=a("../../plot_api/edit_types").overrideAll;var n=a("./scene2d"),k=a("../layout_attributes"),m=a("../../constants/xmlns_namespaces"),h=a("../cartesian/constants"),b=a("../cartesian"),g=a("../../components/fx/layout_attributes"),e=a("../get_data").getSubplotData;p.name="gl2d";p.attr=["xaxis","yaxis"];p.idRoot=["x","y"];p.idRegex=h.idRegex;p.attrRegex=h.attrRegex;p.attributes=a("../cartesian/attributes");p.supplyLayoutDefaults=function(a,e,f){e._has("cartesian")||b.supplyLayoutDefaults(a,e,f)};
p.layoutAttrOverrides=q(b.layoutAttributes,"plot","from-root");p.baseLayoutAttrOverrides=q({plot_bgcolor:k.plot_bgcolor,hoverlabel:g.hoverlabel},"plot","nested");p.plot=function(b){for(var a=b._fullLayout,f=b._fullData,d=a._subplots.gl2d,c=0;c<d.length;c++){var g=d[c],h=a._plots[g],k=e(f,"gl2d",g),m=h._scene2d;void 0===m&&(m=new n({id:g,graphDiv:b,container:b.querySelector(".gl-container"),staticPlot:b._context.staticPlot,plotGlPixelRatio:b._context.plotGlPixelRatio},a),h._scene2d=m);m.plot(k,b.calcdata,
a,b.layout)}};p.clean=function(a,g,f,d){for(var c=d._subplots.gl2d||[],h=0;h<c.length;h++){var k=c[h],l=d._plots[k];l._scene2d&&0===e(a,"gl2d",k).length&&(l._scene2d.destroy(),delete d._plots[k])}b.clean.apply(this,arguments)};p.drawFramework=function(a){a._context.staticPlot||b.drawFramework(a)};p.toSVG=function(b){b=b._fullLayout;for(var a=b._subplots.gl2d,e=0;e<a.length;e++){var d=b._plots[a[e]]._scene2d,c=d.toImage("png");b._glimages.append("svg:image").attr({xmlns:m.svg,"xlink:href":c,x:0,y:0,
width:"100%",height:"100%",preserveAspectRatio:"none"});d.destroy()}};p.updateFx=function(b){b=b._fullLayout;for(var a=b._subplots.gl2d,e=0;e<a.length;e++)b._plots[a[e]]._scene2d.updateFx(b.dragmode)}},{"../../components/fx/layout_attributes":630,"../../constants/xmlns_namespaces":693,"../../plot_api/edit_types":747,"../cartesian":775,"../cartesian/attributes":762,"../cartesian/constants":770,"../get_data":799,"../layout_attributes":816,"./scene2d":803}],803:[function(a,q,p){function n(a,c){this.container=
a.container;this.graphDiv=a.graphDiv;this.pixelRatio=a.plotGlPixelRatio||window.devicePixelRatio;this.id=a.id;this.staticPlot=!!a.staticPlot;this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian;this.fullData=null;this.updateRefs(c);this.makeFramework();this.stopped||(this.glplotOptions=l(this),this.glplotOptions.merge(c),this.glplot=b(this.glplotOptions),this.camera=f(this),this.traces={},this.spikes=g(this.glplot),this.selectBox=e(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=
0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}var k=a("../../registry"),m=a("../../plots/cartesian/axes"),h=a("../../components/fx"),b=a("gl-plot2d"),g=a("gl-spikes2d"),e=a("gl-select-box"),t=a("webgl-context"),l=a("./convert"),f=a("./camera"),d=a("../../lib/show_no_webgl_msg");p=a("../cartesian/constraints");var c=p.enforce,r=p.clean,u=a("../cartesian/autorange").doAutoRange,v=["xaxis","yaxis"],w,y,A=a("../cartesian/constants").SUBPLOT_PATTERN;
q.exports=n;a=n.prototype;a.makeFramework=function(){if(this.staticPlot){if(!y&&(w=document.createElement("canvas"),y=t({canvas:w,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!y))throw Error("Error creating static canvas/context for image server");this.canvas=w;this.gl=y}else{var b=this.container.querySelector(".gl-canvas-focus"),a=t({canvas:b,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!a){d(this);this.stopped=!0;return}this.canvas=b;this.gl=a}b=this.canvas;b.style.width=
"100%";b.style.height="100%";b.style.position="absolute";b.style.top="0px";b.style.left="0px";b.style["pointer-events"]="none";this.updateSize(b);b.className+=" user-select-none";b=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");b.style.position="absolute";b.style.top=b.style.left="0px";b.style.width=b.style.height="100%";b.style["z-index"]=20;b.style["pointer-events"]="none";a=this.mouseContainer=document.createElement("div");a.style.position="absolute";a.style["pointer-events"]=
"auto";this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var c=this.container;c.appendChild(b);c.appendChild(a);var e=this;a.addEventListener("mouseout",function(){e.isMouseOver=!1;e.unhover()});a.addEventListener("mouseover",function(){e.isMouseOver=!0})};a.toImage=function(b){b||(b="png");this.stopped=!0;this.staticPlot&&this.container.appendChild(w);this.updateSize(this.canvas);var a=this.glplot.gl,c=a.drawingBufferWidth,d=a.drawingBufferHeight;a.clearColor(1,1,1,0);a.clear(a.COLOR_BUFFER_BIT|
a.DEPTH_BUFFER_BIT);this.glplot.setDirty();this.glplot.draw();a.bindFramebuffer(a.FRAMEBUFFER,null);var e=new Uint8Array(c*d*4);a.readPixels(0,0,c,d,a.RGBA,a.UNSIGNED_BYTE,e);a=0;for(var f=d-1;a<f;++a,--f)for(var g=0;g<c;++g)for(var h=0;4>h;++h){var k=e[4*(c*a+g)+h];e[4*(c*a+g)+h]=e[4*(c*f+g)+h];e[4*(c*f+g)+h]=k}a=document.createElement("canvas");a.width=c;a.height=d;f=a.getContext("2d");c=f.createImageData(c,d);c.data.set(e);f.putImageData(c,0,0);switch(b){case "jpeg":b=a.toDataURL("image/jpeg");
break;case "webp":b=a.toDataURL("image/webp");break;default:b=a.toDataURL("image/png")}this.staticPlot&&this.container.removeChild(w);return b};a.updateSize=function(b){b||(b=this.canvas);var a=this.pixelRatio,c=this.fullLayout,d=Math.ceil(a*c.width)|0;a=Math.ceil(a*c.height)|0;if(b.width!==d||b.height!==a)b.width=d,b.height=a;return b};a.computeTickMarks=function(){this.xaxis.setScale();this.yaxis.setScale();for(var b=[m.calcTicks(this.xaxis),m.calcTicks(this.yaxis)],a=0;2>a;++a)for(var c=0;c<b[a].length;++c)b[a][c].text+=
"";return b};a.updateRefs=function(b){this.fullLayout=b;b=this.id.match(A);var a="yaxis"+b[2];this.xaxis=this.fullLayout["xaxis"+b[1]];this.yaxis=this.fullLayout[a]};a.relayoutCallback=function(){var b=this.graphDiv,a=this.xaxis,c=this.yaxis,d=b.layout,e={},f=e[a._name+".range"]=a.range.slice(),g=e[c._name+".range"]=c.range.slice();e[a._name+".autorange"]=a.autorange;e[c._name+".autorange"]=c.autorange;k.call("_storeDirectGUIEdit",b.layout,b._fullLayout._preGUI,e);var h=d[a._name];h.range=f;h.autorange=
a.autorange;a=d[c._name];a.range=g;a.autorange=c.autorange;e.lastInputTime=this.camera.lastInputTime;b.emit("plotly_relayout",e)};a.cameraChanged=function(){var b=this.camera;this.glplot.setDataBox(this.calcDataBox());var a=this.computeTickMarks(),c=this.glplotOptions.ticks;a:{for(var d=0;2>d;++d){var e=a[d],f=c[d];if(e.length!==f.length){c=!0;break a}for(var g=0;g<e.length;++g)if(e[g].x!==f[g].x){c=!0;break a}}c=!1}c&&(this.glplotOptions.ticks=a,this.glplotOptions.dataBox=b.dataBox,this.glplot.update(this.glplotOptions),
this.handleAnnotations())};a.handleAnnotations=function(){for(var b=this.graphDiv,a=this.fullLayout.annotations,c=0;c<a.length;c++){var d=a[c];d.xref===this.xaxis._id&&d.yref===this.yaxis._id&&k.getComponentMethod("annotations","drawOne")(b,c)}};a.destroy=function(){if(this.glplot){var b=this.traces;b&&Object.keys(b).map(function(a){b[a].dispose();delete b[a]});this.glplot.dispose();this.container.removeChild(this.svgContainer);this.container.removeChild(this.mouseContainer);this.glplot=this.fullData=
null;this.stopped=!0;this.camera.mouseListener.enabled=!1;this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener);this.camera=null}};a.plot=function(b,a,d){var e=this.glplot;this.updateRefs(d);this.xaxis.clearCalc();this.yaxis.clearCalc();this.updateTraces(b,a);this.updateFx(d.dragmode);var f=d.width,g=d.height;this.updateSize(this.canvas);b=this.glplotOptions;b.merge(d);b.screenBox=[0,0,f,g];a={_fullLayout:{_axisConstraintGroups:this.graphDiv._fullLayout._axisConstraintGroups,
xaxis:this.xaxis,yaxis:this.yaxis}};r(a,this.xaxis);r(a,this.yaxis);var h=d._size,k=this.xaxis.domain,l=this.yaxis.domain;b.viewBox=[h.l+k[0]*h.w,h.b+l[0]*h.h,f-h.r-(1-k[1])*h.w,g-h.t-(1-l[1])*h.h];this.mouseContainer.style.width=h.w*(k[1]-k[0])+"px";this.mouseContainer.style.height=h.h*(l[1]-l[0])+"px";this.mouseContainer.height=h.h*(l[1]-l[0]);this.mouseContainer.style.left=h.l+k[0]*h.w+"px";this.mouseContainer.style.top=h.t+(1-l[1])*h.h+"px";for(g=0;2>g;++g)f=this[v[g]],f._length=b.viewBox[g+2]-
b.viewBox[g],u(this.graphDiv,f),f.setScale();c(a);b.ticks=this.computeTickMarks();b.dataBox=this.calcDataBox();b.merge(d);e.update(b);this.glplot.draw()};a.calcDataBox=function(){var b=this.xaxis,a=this.yaxis,c=b.range,d=a.range;b=b.r2l;a=a.r2l;return[b(c[0]),a(d[0]),b(c[1]),a(d[1])]};a.setRanges=function(b){var a=this.xaxis,c=this.yaxis,d=a.l2r,e=c.l2r;a.range=[d(b[0]),d(b[2])];c.range=[e(b[1]),e(b[3])]};a.updateTraces=function(b,a){var c=Object.keys(this.traces),d;this.fullData=b;var e=0;a:for(;e<
c.length;e++){var f=c[e],g=this.traces[f];for(d=0;d<b.length;d++){var h=b[d];if(h.uid===f&&h.type===g.type)continue a}g.dispose();delete this.traces[f]}for(e=0;e<b.length;e++)h=b[e],c=a[e],(d=this.traces[h.uid])?d.update(h,c):(d=h._module.plot(this,h,c),this.traces[h.uid]=d);this.glplot.objects.sort(function(b,a){return b._trace.index-a._trace.index})};a.updateFx=function(b){"lasso"===b||"select"===b?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):
(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto");this.mouseContainer.style.cursor="pan"===b?"move":"zoom"===b?"crosshair":null};a.emitPointAction=function(b,a){for(var c=b.trace.uid,d=b.pointIndex,e,f=0;f<this.fullData.length;f++)this.fullData[f].uid===c&&(e=this.fullData[f]);b={x:b.traceCoord[0],y:b.traceCoord[1],curveNumber:e.index,pointNumber:d,data:e._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};h.appendArrayPointValue(b,e,
d);this.graphDiv.emit(a,{points:[b]})};a.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var b=this.glplot,a=this.camera,c=a.mouseListener,d=1===this.lastButtonState&&0===c.buttons,e=this.fullLayout;this.lastButtonState=c.buttons;this.cameraChanged();var f=c.x*b.pixelRatio;c=this.canvas.height-b.pixelRatio*c.y;if(a.boxEnabled&&"zoom"===e.dragmode){this.selectBox.enabled=!0;e=this.selectBox.selectBox=[Math.min(a.boxStart[0],a.boxEnd[0]),Math.min(a.boxStart[1],a.boxEnd[1]),Math.max(a.boxStart[0],
a.boxEnd[0]),Math.max(a.boxStart[1],a.boxEnd[1])];for(d=0;2>d;d++)a.boxStart[d]===a.boxEnd[d]&&(e[d]=b.dataBox[d],e[d+2]=b.dataBox[d+2]);b.setDirty()}else if(!a.panning&&this.isMouseOver){this.selectBox.enabled=!1;var g=e._size;(a=(g=b.pick(f/b.pixelRatio+g.l+this.xaxis.domain[0]*g.w,c/b.pixelRatio-(g.t+(1-this.yaxis.domain[1])*g.h)))&&g.object._trace.handlePick(g))&&d&&this.emitPointAction(a,"plotly_click");g&&"skip"!==g.object._trace.hoverinfo&&e.hovermode&&a&&(!this.lastPickResult||this.lastPickResult.traceUid!==
a.trace.uid||this.lastPickResult.dataCoord[0]!==a.dataCoord[0]||this.lastPickResult.dataCoord[1]!==a.dataCoord[1])&&(this.lastPickResult={traceUid:a.trace?a.trace.uid:null,dataCoord:a.dataCoord.slice()},this.spikes.update({center:g.dataCoord}),a.screenCoord=[((b.viewBox[2]-b.viewBox[0])*(g.dataCoord[0]-b.dataBox[0])/(b.dataBox[2]-b.dataBox[0])+b.viewBox[0])/b.pixelRatio,(this.canvas.height-(b.viewBox[3]-b.viewBox[1])*(g.dataCoord[1]-b.dataBox[1])/(b.dataBox[3]-b.dataBox[1])-b.viewBox[1])/b.pixelRatio],
this.emitPointAction(a,"plotly_hover"),d=this.fullData[a.trace.index]||{},f=a.pointIndex,(e=h.castHoverinfo(d,e,f))&&"all"!==e&&(e=e.split("+"),-1===e.indexOf("x")&&(a.traceCoord[0]=void 0),-1===e.indexOf("y")&&(a.traceCoord[1]=void 0),-1===e.indexOf("z")&&(a.traceCoord[2]=void 0),-1===e.indexOf("text")&&(a.textLabel=void 0),-1===e.indexOf("name")&&(a.name=void 0)),h.loneHover({x:a.screenCoord[0],y:a.screenCoord[1],xLabel:this.hoverFormatter("xaxis",a.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",
a.traceCoord[1]),zLabel:a.traceCoord[2],text:a.textLabel,name:a.name,color:h.castHoverOption(d,f,"bgcolor")||a.color,borderColor:h.castHoverOption(d,f,"bordercolor"),fontFamily:h.castHoverOption(d,f,"font.family"),fontSize:h.castHoverOption(d,f,"font.size"),fontColor:h.castHoverOption(d,f,"font.color"),nameLength:h.castHoverOption(d,f,"namelength"),textAlign:h.castHoverOption(d,f,"align")},{container:this.svgContainer,gd:this.graphDiv}))}g||this.unhover();b.draw()}};a.unhover=function(){this.lastPickResult&&
(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),h.loneUnhover(this.svgContainer))};a.hoverFormatter=function(b,a){if(void 0!==a)return b=this[b],m.tickText(b,b.c2l(a),"hover").text}},{"../../components/fx":629,"../../lib/show_no_webgl_msg":737,"../../plots/cartesian/axes":764,"../../registry":845,"../cartesian/autorange":763,"../cartesian/constants":770,"../cartesian/constraints":771,"./camera":800,"./convert":801,"gl-plot2d":290,"gl-select-box":302,"gl-spikes2d":311,
"webgl-context":554}],804:[function(a,q,p){q=a("../../plot_api/edit_types").overrideAll;var n=a("../../components/fx/layout_attributes"),k=a("./scene"),m=a("../get_data").getSubplotData,h=a("../../lib"),b=a("../../constants/xmlns_namespaces");p.name="gl3d";p.attr="scene";p.idRoot="scene";p.idRegex=p.attrRegex=h.counterRegex("scene");p.attributes=a("./layout/attributes");p.layoutAttributes=a("./layout/layout_attributes");p.baseLayoutAttrOverrides=q({hoverlabel:n.hoverlabel},"plot","nested");p.supplyLayoutDefaults=
a("./layout/defaults");p.plot=function(b){for(var a=b._fullLayout,g=b._fullData,h=a._subplots.gl3d,f=0;f<h.length;f++){var d=h[f],c=m(g,"gl3d",d),r=a[d],n=r.camera,p=r._scene;p||(p=new k({id:d,graphDiv:b,container:b.querySelector(".gl-container"),staticPlot:b._context.staticPlot,plotGlPixelRatio:b._context.plotGlPixelRatio,camera:n},a),r._scene=p);p.viewInitial||(p.viewInitial={up:{x:n.up.x,y:n.up.y,z:n.up.z},eye:{x:n.eye.x,y:n.eye.y,z:n.eye.z},center:{x:n.center.x,y:n.center.y,z:n.center.z}});p.plot(c,
a,b.layout)}};p.clean=function(b,a,h,k){b=k._subplots.gl3d||[];for(h=0;h<b.length;h++){var e=b[h];!a[e]&&k[e]._scene&&(k[e]._scene.destroy(),k._infolayer&&k._infolayer.selectAll(".annotation-"+e).remove())}};p.toSVG=function(a){a=a._fullLayout;for(var e=a._subplots.gl3d,g=a._size,h=0;h<e.length;h++){var f=a[e[h]],d=f.domain;f=f._scene;var c=f.toImage("png");a._glimages.append("svg:image").attr({xmlns:b.svg,"xlink:href":c,x:g.l+g.w*d.x[0],y:g.t+g.h*(1-d.y[1]),width:g.w*(d.x[1]-d.x[0]),height:g.h*(d.y[1]-
d.y[0]),preserveAspectRatio:"none"});f.destroy()}};p.cleanId=function(b){if(b.match(/^scene[0-9]*$/))return b=b.substr(5),"1"===b&&(b=""),"scene"+b};p.updateFx=function(b){b=b._fullLayout;for(var a=b._subplots.gl3d,g=0;g<a.length;g++)b[a[g]]._scene.updateFx(b.dragmode,b.hovermode)}},{"../../components/fx/layout_attributes":630,"../../constants/xmlns_namespaces":693,"../../lib":716,"../../plot_api/edit_types":747,"../get_data":799,"./layout/attributes":805,"./layout/defaults":809,"./layout/layout_attributes":810,
"./scene":814}],805:[function(a,q,p){q.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],806:[function(a,q,p){p=a("../../../components/color");var n=a("../../cartesian/layout_attributes"),k=a("../../../lib/extend").extendFlat;a=a("../../../plot_api/edit_types").overrideAll;q.exports=a({visible:n.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:p.defaultLine},
showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:n.color,categoryorder:n.categoryorder,categoryarray:n.categoryarray,title:{text:n.title.text,font:n.title.font},type:k({},n.type,{values:["-","linear","log","date","category"]}),autorange:n.autorange,rangemode:n.rangemode,range:k({},n.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",
impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:n.ticks,mirror:n.mirror,ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,tickfont:n.tickfont,tickangle:n.tickangle,tickprefix:n.tickprefix,showtickprefix:n.showtickprefix,ticksuffix:n.ticksuffix,showticksuffix:n.showticksuffix,showexponent:n.showexponent,exponentformat:n.exponentformat,separatethousands:n.separatethousands,
tickformat:n.tickformat,tickformatstops:n.tickformatstops,hoverformat:n.hoverformat,showline:n.showline,linecolor:n.linecolor,linewidth:n.linewidth,showgrid:n.showgrid,gridcolor:k({},n.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:n.gridwidth,zeroline:n.zeroline,zerolinecolor:n.zerolinecolor,zerolinewidth:n.zerolinewidth,_deprecated:{title:n._deprecated.title,titlefont:n._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":591,"../../../lib/extend":707,"../../../plot_api/edit_types":747,
"../../cartesian/layout_attributes":776}],807:[function(a,q,p){var n=a("tinycolor2").mix,k=a("../../../lib"),m=a("../../../plot_api/plot_template"),h=a("./axis_attributes"),b=a("../../cartesian/type_defaults"),g=a("../../cartesian/axis_defaults"),e=["xaxis","yaxis","zaxis"],t=13600/187;q.exports=function(a,f,d){function c(b,a){return k.coerce(l,u,h,b,a)}for(var l,u,p=0;p<e.length;p++){var q=e[p];l=a[q]||{};u=m.newContainer(f,q);u._id=q[0]+d.scene;u._name=q;b(l,u,c,d);g(l,u,c,{font:d.font,letter:q[0],
data:d.data,showGrid:!0,noTickson:!0,bgColor:d.bgColor,calendar:d.calendar},d.fullLayout);c("gridcolor",n(u.color,d.bgColor,t).toRgbString());c("title.text",q[0]);u.setScale=k.noop;c("showspikes")&&(c("spikesides"),c("spikethickness"),c("spikecolor",u.color));c("showaxeslabels");c("showbackground")&&c("backgroundcolor")}}},{"../../../lib":716,"../../../plot_api/plot_template":754,"../../cartesian/axis_defaults":766,"../../cartesian/type_defaults":787,"./axis_attributes":806,tinycolor2:535}],808:[function(a,
q,p){function n(){this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.tickEnable=[!0,!0,!0];this.tickFont=["sans-serif","sans-serif","sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[18,18,18];this.labels=["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont=["Open Sans","Open Sans","Open Sans"];this.labelSize=[20,20,20];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[30,30,30];this.lineEnable=
[!0,!0,!0];this.lineMirror=[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[10,10,10];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=
[!0,!0,!0];this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._defaultTickPad=this.tickPad.slice();this._defaultLabelPad=this.labelPad.slice();this._defaultLineTickLength=this.lineTickLength.slice()}var k=a("../../../lib/str2rgbarray"),m=a("../../../lib"),h=["xaxis","yaxis","zaxis"];n.prototype.merge=function(b,a){for(var e=0;3>e;++e){var g=a[h[e]];g.visible?(this.labels[e]=b._meta?m.templateString(g.title.text,b._meta):g.title.text,"font"in g.title&&(g.title.font.color&&(this.labelColor[e]=
k(g.title.font.color)),g.title.font.family&&(this.labelFont[e]=g.title.font.family),g.title.font.size&&(this.labelSize[e]=g.title.font.size)),"showline"in g&&(this.lineEnable[e]=g.showline),"linecolor"in g&&(this.lineColor[e]=k(g.linecolor)),"linewidth"in g&&(this.lineWidth[e]=g.linewidth),"showgrid"in g&&(this.gridEnable[e]=g.showgrid),"gridcolor"in g&&(this.gridColor[e]=k(g.gridcolor)),"gridwidth"in g&&(this.gridWidth[e]=g.gridwidth),"log"===g.type?this.zeroEnable[e]=!1:"zeroline"in g&&(this.zeroEnable[e]=
g.zeroline),"zerolinecolor"in g&&(this.zeroLineColor[e]=k(g.zerolinecolor)),"zerolinewidth"in g&&(this.zeroLineWidth[e]=g.zerolinewidth),this.lineTickEnable[e]="ticks"in g&&g.ticks?!0:!1,"ticklen"in g&&(this.lineTickLength[e]=this._defaultLineTickLength[e]=g.ticklen),"tickcolor"in g&&(this.lineTickColor[e]=k(g.tickcolor)),"tickwidth"in g&&(this.lineTickWidth[e]=g.tickwidth),"tickangle"in g&&(this.tickAngle[e]="auto"===g.tickangle?-3600:Math.PI*-g.tickangle/180),"showticklabels"in g&&(this.tickEnable[e]=
g.showticklabels),"tickfont"in g&&(g.tickfont.color&&(this.tickColor[e]=k(g.tickfont.color)),g.tickfont.family&&(this.tickFont[e]=g.tickfont.family),g.tickfont.size&&(this.tickSize[e]=g.tickfont.size)),"mirror"in g?-1!==["ticks","all","allticks"].indexOf(g.mirror)?(this.lineTickMirror[e]=!0,this.lineMirror[e]=!0):!0===g.mirror?(this.lineTickMirror[e]=!1,this.lineMirror[e]=!0):(this.lineTickMirror[e]=!1,this.lineMirror[e]=!1):this.lineMirror[e]=!1,"showbackground"in g&&!1!==g.showbackground?(this.backgroundEnable[e]=
!0,this.backgroundColor[e]=k(g.backgroundcolor)):this.backgroundEnable[e]=!1):(this.tickEnable[e]=!1,this.labelEnable[e]=!1,this.lineEnable[e]=!1,this.lineTickEnable[e]=!1,this.gridEnable[e]=!1,this.zeroEnable[e]=!1,this.backgroundEnable[e]=!1)}};q.exports=function(b,a){var e=new n;e.merge(b,a);return e}},{"../../../lib":716,"../../../lib/str2rgbarray":739}],809:[function(a,q,p){function n(b,a,d,c){var e=d("bgcolor");e=m.combine(e,c.paper_bgcolor);for(var f=["up","center","eye"],k=0;k<f.length;k++)d("camera."+
f[k]+".x"),d("camera."+f[k]+".y"),d("camera."+f[k]+".z");d("camera.projection.type");f=!!d("aspectratio.x")&&!!d("aspectratio.y")&&!!d("aspectratio.z");k=d("aspectmode",f?"manual":"auto");f||(b.aspectratio=a.aspectratio={x:1,y:1,z:1},"manual"===k&&(a.aspectmode="auto"),b.aspectmode=a.aspectmode);f=t(c.fullData,"gl3d",c.id);g(b,a,{font:c.font,scene:c.id,data:f,bgColor:e,calendar:c.calendar,fullLayout:c.fullLayout});h.getComponentMethod("annotations3d","handleDefaults")(b,a,c);a=c.getDfltFromLayout("dragmode");
!1===a||a||(a="orbit",b.camera&&b.camera.up?(e=b.camera.up.x,f=b.camera.up.y,b=b.camera.up.z,0!==b&&(e&&f&&b?.999<b/Math.sqrt(e*e+f*f+b*b)&&(a="turntable"):a="turntable")):a="turntable");d("dragmode",a);d("hovermode",c.getDfltFromLayout("hovermode"))}var k=a("../../../lib"),m=a("../../../components/color"),h=a("../../../registry"),b=a("../../subplot_defaults"),g=a("./axis_defaults"),e=a("./layout_attributes"),t=a("../../get_data").getSubplotData;q.exports=function(a,f,d){var c=1<f._basePlotModules.length;
b(a,f,d,{type:"gl3d",attributes:e,handleDefaults:n,fullLayout:f,font:f.font,fullData:d,getDfltFromLayout:function(b){if(!c&&k.validate(a[b],e[b]))return a[b]},paper_bgcolor:f.paper_bgcolor,calendar:f.calendar})}},{"../../../components/color":591,"../../../lib":716,"../../../registry":845,"../../get_data":799,"../../subplot_defaults":839,"./axis_defaults":807,"./layout_attributes":810}],810:[function(a,q,p){function n(a,b,g){return{x:{valType:"number",dflt:a,editType:"camera"},y:{valType:"number",
dflt:b,editType:"camera"},z:{valType:"number",dflt:g,editType:"camera"},editType:"camera"}}p=a("./axis_attributes");var k=a("../../domain").attributes,m=a("../../../lib/extend").extendFlat;a=a("../../../lib").counterRegex;q.exports={_arrayAttrRegexps:[a("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:m(n(0,0,1),{}),center:m(n(0,0,0),{}),eye:m(n(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",
editType:"calc"},editType:"calc"},editType:"camera"},domain:k({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},
editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:p,yaxis:p,zaxis:p,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":716,"../../../lib/extend":707,"../../domain":789,"./axis_attributes":806}],811:[function(a,q,p){function n(){this.enabled=
[!0,!0,!0];this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.drawSides=[!0,!0,!0];this.lineWidth=[1,1,1]}var k=a("../../../lib/str2rgbarray"),m=["xaxis","yaxis","zaxis"];n.prototype.merge=function(a){for(var b=0;3>b;++b){var g=a[m[b]];g.visible?(this.enabled[b]=g.showspikes,this.colors[b]=k(g.spikecolor),this.drawSides[b]=g.spikesides,this.lineWidth[b]=g.spikethickness):(this.enabled[b]=!1,this.drawSides[b]=!1)}};q.exports=function(a){var b=new n;b.merge(a);return b}},{"../../../lib/str2rgbarray":739}],
812:[function(a,q,p){q.exports=function(a){for(var b=a.axesOptions,g=a.glplot.axesPixels,e=a.fullSceneLayout,h=[[],[],[]],l=0;3>l;++l){var f=e[m[l]];f._length=(g[l].hi-g[l].lo)*g[l].pixelsPerDataUnit/a.dataScale[l];if(Infinity===Math.abs(f._length)||isNaN(f._length))h[l]=[];else{f._input_range=f.range.slice();f.range[0]=g[l].lo/a.dataScale[l];f.range[1]=g[l].hi/a.dataScale[l];f._m=1/(a.dataScale[l]*g[l].pixelsPerDataUnit);f.range[0]===f.range[1]&&(--f.range[0],f.range[1]+=1);var d=f.tickmode;if("auto"===
f.tickmode){f.tickmode="linear";var c=f.nticks||k.constrain(f._length/40,4,9);n.autoTicks(f,Math.abs(f.range[1]-f.range[0])/c)}c=n.calcTicks(f);for(var r=0;r<c.length;++r)c[r].x*=a.dataScale[l],"date"===f.type&&(c[r].text=c[r].text.replace(/<br>/g," "));h[l]=c;f.tickmode=d}}b.ticks=h;for(l=0;3>l;++l)for(r=0;2>r;++r)b.bounds[r][l]=a.glplot.bounds[r][l];b=Array(3);for(g=0;3>g;++g){e=h[g];l=Array(e.length);for(f=0;f<e.length;++f)l[f]=e[f].x;b[g]=l}a.contourLevels=b};var n=a("../../cartesian/axes"),k=
a("../../../lib"),m=["xaxis","yaxis","zaxis"]},{"../../../lib":716,"../../cartesian/axes":764}],813:[function(a,q,p){function n(a,m){var h=[0,0,0,0],b,g;for(b=0;4>b;++b)for(g=0;4>g;++g)h[g]+=a[4*b+g]*m[b];return h}q.exports=function(a,m){return n(a.projection,n(a.view,n(a.model,[m[0],m[1],m[2],1])))}},{}],814:[function(a,q,p){function n(b,a){var c=document.createElement("div"),d=b.container;this.graphDiv=b.graphDiv;var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.style.position=
"absolute";e.style.top=e.style.left="0px";e.style.width=e.style.height="100%";e.style["z-index"]=20;e.style["pointer-events"]="none";c.appendChild(e);this.svgContainer=e;c.id=b.id;c.style.position="absolute";c.style.top=c.style.left="0px";c.style.width=c.style.height="100%";d.appendChild(c);this.fullLayout=a;this.id=b.id||"scene";this.fullSceneLayout=a[this.id];this.plotArgs=[[],{},{}];this.axesOptions=v(a,a[this.id]);this.spikeOptions=w(a[this.id]);this.container=c;this.staticMode=!!b.staticPlot;
this.pixelRatio=this.pixelRatio||b.plotGlPixelRatio||2;this.dataScale=[1,1,1];this.contourLevels=[[],[],[]];this.convertAnnotations=t.getComponentMethod("annotations3d","convert");this.drawAnnotations=t.getComponentMethod("annotations3d","draw");this.initializeGLPlot()}function k(b,a,c){b=b.fullSceneLayout;for(var d=0;3>d;d++){var e=C[d],f=e.charAt(0);e=b[e];var g=a[f],h=a[f+"calendar"];f=a["_"+f+"length"];if(l.isArrayOrTypedArray(g))for(var k,m=0;m<(f||g.length);m++)if(l.isArrayOrTypedArray(g[m]))for(var r=
0;r<g[m].length;++r)k=e.d2l(g[m][r],0,h),!isNaN(k)&&isFinite(k)&&(c[0][d]=Math.min(c[0][d],k),c[1][d]=Math.max(c[1][d],k));else k=e.d2l(g[m],0,h),!isNaN(k)&&isFinite(k)&&(c[0][d]=Math.min(c[0][d],k),c[1][d]=Math.max(c[1][d],k));else c[0][d]=Math.min(c[0][d],0),c[1][d]=Math.max(c[1][d],f-1)}}function m(b,a){b=b.fullSceneLayout;for(var c=b.annotations||[],d=0;3>d;d++){var e=C[d],f=e.charAt(0);e=b[e];for(var g=0;g<c.length;g++){var h=c[g];h.visible&&(h=e.r2l(h[f]),!isNaN(h)&&isFinite(h)&&(a[0][d]=Math.min(a[0][d],
h),a[1][d]=Math.max(a[1][d],h)))}}}p=a("gl-plot3d");var h=p.createCamera,b=p.createScene,g=a("webgl-context"),e=a("has-passive-events"),t=a("../../registry"),l=a("../../lib"),f=a("../../plots/cartesian/axes"),d=a("../../components/fx"),c=a("../../lib/str2rgbarray"),r=a("../../lib/show_no_webgl_msg"),u=a("./project"),v=a("./layout/convert"),w=a("./layout/spikes"),y=a("./layout/tick_marks"),A=a("is-mobile")({tablet:!0,featureDetect:!0}),z,x;a=n.prototype;a.prepareOptions=function(){var b={canvas:this.canvas,
gl:this.gl,glOptions:{preserveDrawingBuffer:A,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!x&&(z=document.createElement("canvas"),x=g({canvas:z,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!x))throw Error("error creating static canvas/context for image server");b.gl=x;b.canvas=z}return b};
a.tryCreatePlot=function(){var a=this.prepareOptions(),c=!0;try{this.glplot=b(a)}catch(G){if(this.staticMode)c=!1;else try{l.warn(["webgl setup failed possibly due to",A?"disabling":"enabling","preserveDrawingBuffer config. The device may not be supported by is-mobile module! Inverting preserveDrawingBuffer option in second attempt to create webgl scene."].join(" ")),A=a.glOptions.preserveDrawingBuffer=!a.glOptions.preserveDrawingBuffer,this.glplot=b(a)}catch(E){c=!1}}return c};a.initializeGLCamera=
function(){var b=this.fullSceneLayout.camera;this.camera=h(this.container,{center:[b.center.x,b.center.y,b.center.z],eye:[b.eye.x,b.eye.y,b.eye.z],up:[b.up.x,b.up.y,b.up.z],_ortho:"orthographic"===b.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})};a.initializeGLPlot=function(){var b=this;b.initializeGLCamera();if(!b.tryCreatePlot())return r(b);b.traces={};b.make4thDimension();var a=b.graphDiv,c=a.layout,d=function(){var a={};b.isCameraChanged(c)&&(a[b.id+".camera"]=b.getCamera());b.isAspectChanged(c)&&
(a[b.id+".aspectratio"]=b.glplot.getAspectratio(),"manual"!==c[b.id].aspectmode&&(b.fullSceneLayout.aspectmode=c[b.id].aspectmode=a[b.id+".aspectmode"]="manual"));return a},f=function(b){if(!1!==b.fullSceneLayout.dragmode){var a=d();b.saveLayout(c);b.graphDiv.emit("plotly_relayout",a)}};b.glplot.canvas.addEventListener("mouseup",function(){f(b)});b.glplot.canvas.addEventListener("wheel",function(c){if(a._context._scrollZoom.gl3d){if(b.camera._ortho){c=c.deltaX>c.deltaY?1.1:1/1.1;var d=b.glplot.getAspectratio();
b.glplot.setAspectratio({x:c*d.x,y:c*d.y,z:c*d.z})}f(b)}},e?{passive:!1}:!1);b.glplot.canvas.addEventListener("mousemove",function(){if(!1!==b.fullSceneLayout.dragmode&&0!==b.camera.mouseListener.buttons){var a=d();b.graphDiv.emit("plotly_relayouting",a)}});b.staticMode||b.glplot.canvas.addEventListener("webglcontextlost",function(c){a&&a.emit&&a.emit("plotly_webglcontextlost",{event:c,layer:b.id})},!1);b.glplot.oncontextloss=function(){b.recoverContext()};b.glplot.onrender=function(){b.render()};
return!0};a.render=function(){function b(b,c){b=a.fullSceneLayout[b];return f.tickText(b,b.d2l(c),"hover").text}var a=this,c=a.graphDiv,e=a.svgContainer,g=a.container.getBoundingClientRect(),h=g.width;g=g.height;e.setAttributeNS(null,"viewBox","0 0 "+h+" "+g);e.setAttributeNS(null,"width",h);e.setAttributeNS(null,"height",g);y(a);a.glplot.axes.update(a.axesOptions);for(var k=Object.keys(a.traces),m=null,r=a.glplot.selection,t=0;t<k.length;++t){var n=a.traces[k[t]];"skip"!==n.data.hoverinfo&&n.handlePick(r)&&
(m=n);n.setContourLevels&&n.setContourLevels()}if(null!==m){var p=u(a.glplot.cameraParams,r.dataCoordinate);n=m.data;k=c._fullData[n.index];t=r.index;var q={xLabel:b("xaxis",r.traceCoordinate[0]),yLabel:b("yaxis",r.traceCoordinate[1]),zLabel:b("zaxis",r.traceCoordinate[2])},v=d.castHoverinfo(k,a.fullLayout,t),w=(v||"").split("+");v=v&&"all"===v;k.hovertemplate||v||(-1===w.indexOf("x")&&(q.xLabel=void 0),-1===w.indexOf("y")&&(q.yLabel=void 0),-1===w.indexOf("z")&&(q.zLabel=void 0),-1===w.indexOf("text")&&
(r.textLabel=void 0),-1===w.indexOf("name")&&(m.name=void 0));var x=[];"cone"===n.type||"streamtube"===n.type?(q.uLabel=b("xaxis",r.traceCoordinate[3]),(v||-1!==w.indexOf("u"))&&x.push("u: "+q.uLabel),q.vLabel=b("yaxis",r.traceCoordinate[4]),(v||-1!==w.indexOf("v"))&&x.push("v: "+q.vLabel),q.wLabel=b("zaxis",r.traceCoordinate[5]),(v||-1!==w.indexOf("w"))&&x.push("w: "+q.wLabel),q.normLabel=r.traceCoordinate[6].toPrecision(3),(v||-1!==w.indexOf("norm"))&&x.push("norm: "+q.normLabel),"streamtube"===
n.type&&(q.divergenceLabel=r.traceCoordinate[7].toPrecision(3),(v||-1!==w.indexOf("divergence"))&&x.push("divergence: "+q.divergenceLabel)),r.textLabel&&x.push(r.textLabel),w=x.join("\x3cbr\x3e")):"isosurface"===n.type||"volume"===n.type?(q.valueLabel=f.tickText(a._mockAxis,a._mockAxis.d2l(r.traceCoordinate[3]),"hover").text,x.push("value: "+q.valueLabel),r.textLabel&&x.push(r.textLabel),w=x.join("\x3cbr\x3e")):w=r.textLabel;v={x:r.traceCoordinate[0],y:r.traceCoordinate[1],z:r.traceCoordinate[2],
data:k._input,fullData:k,curveNumber:k.index,pointNumber:t};d.appendArrayPointValue(v,k,t);n._module.eventData&&(v=k._module.eventData(v,r,k,{},t));n={points:[v]};a.fullSceneLayout.hovermode&&d.loneHover({trace:k,x:(.5+.5*p[0]/p[3])*h,y:(.5-.5*p[1]/p[3])*g,xLabel:q.xLabel,yLabel:q.yLabel,zLabel:q.zLabel,text:w,name:m.name,color:d.castHoverOption(k,t,"bgcolor")||m.color,borderColor:d.castHoverOption(k,t,"bordercolor"),fontFamily:d.castHoverOption(k,t,"font.family"),fontSize:d.castHoverOption(k,t,"font.size"),
fontColor:d.castHoverOption(k,t,"font.color"),nameLength:d.castHoverOption(k,t,"namelength"),textAlign:d.castHoverOption(k,t,"align"),hovertemplate:l.castOption(k,t,"hovertemplate"),hovertemplateLabels:l.extendFlat({},v,q),eventData:[v]},{container:e,gd:c});r.buttons&&5>r.distance?c.emit("plotly_click",n):c.emit("plotly_hover",n);p=n}else d.loneUnhover(e),c.emit("plotly_unhover",p);a.drawAnnotations(a)};a.recoverContext=function(){var b=this;b.glplot.dispose();var a=function(){b.glplot.gl.isContextLost()?
requestAnimationFrame(a):b.initializeGLPlot()?b.plot.apply(b,b.plotArgs):l.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(a)};var C=["xaxis","yaxis","zaxis"];a.plot=function(b,a,d){this.plotArgs=[b,a,d];if(!this.glplot.contextLost){var e,f,g=a[this.id];d=d[this.id];this.fullLayout=a;this.fullSceneLayout=g;this.axesOptions.merge(a,g);this.spikeOptions.merge(g);this.setViewport(g);this.updateFx(g.dragmode,g.hovermode);this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d;
this.glplot.setClearColor(c(g.bgcolor));this.setConvert(l);b?Array.isArray(b)||(b=[b]):b=[];var h=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(e=0;e<b.length;++e){var l=b[e];!0===l.visible&&0!==l._length&&k(this,l,h)}m(this,h);var r=[1,1,1];for(f=0;3>f;++f)r[f]=h[1][f]===h[0][f]?1:1/(h[1][f]-h[0][f]);this.dataScale=r;this.convertAnnotations(this);for(e=0;e<b.length;++e)l=b[e],!0===l.visible&&0!==l._length&&((h=this.traces[l.uid])?h.data.type===l.type?h.update(l):(h.dispose(),
h=l._module.plot(this,l),this.traces[l.uid]=h):(h=l._module.plot(this,l),this.traces[l.uid]=h),h.name=l.name);l=Object.keys(this.traces);e=0;a:for(;e<l.length;++e){for(f=0;f<b.length;++f)if(b[f].uid===l[e]&&!0===b[f].visible&&0!==b[f]._length)continue a;h=this.traces[l[e]];h.dispose();delete this.traces[l[e]]}this.glplot.objects.sort(function(b,a){return b._trace.data.index-a._trace.data.index});h=[[0,0,0],[0,0,0]];b={};for(e=0;3>e;++e){l=g[C[e]];f=l.type;f in b?(b[f].acc*=r[e],b[f].count+=1):b[f]=
{acc:r[e],count:1};if(l.autorange){h[0][e]=Infinity;h[1][e]=-Infinity;var t=this.glplot.objects,n=this.fullSceneLayout.annotations||[],u=l._name.charAt(0);for(f=0;f<t.length;f++){var p=t[f],q=p.bounds,v=p._trace.data._pad||0;h[0][e]="ErrorBars"===p.constructor.name&&l._lowerLogErrorBound?Math.min(h[0][e],l._lowerLogErrorBound):Math.min(h[0][e],q[0][e]/r[e]-v);h[1][e]=Math.max(h[1][e],q[1][e]/r[e]+v)}for(f=0;f<n.length;f++)t=n[f],t.visible&&(t=l.r2l(t[u]),h[0][e]=Math.min(h[0][e],t),h[1][e]=Math.max(h[1][e],
t));"rangemode"in l&&"tozero"===l.rangemode&&(h[0][e]=Math.min(h[0][e],0),h[1][e]=Math.max(h[1][e],0));h[0][e]>h[1][e]?(h[0][e]=-1,h[1][e]=1):(f=h[1][e]-h[0][e],h[0][e]-=f/32,h[1][e]+=f/32);"reversed"===l.autorange&&(l=h[0][e],h[0][e]=h[1][e],h[1][e]=l)}else f=l.range,h[0][e]=l.r2l(f[0]),h[1][e]=l.r2l(f[1]);h[0][e]===h[1][e]&&(--h[0][e],h[1][e]+=1);this.glplot.setBounds(e,{min:h[0][e]*r[e],max:h[1][e]*r[e]})}h=g.aspectmode;if("cube"===h)e=[1,1,1];else if("manual"===h)e=g.aspectratio,e=[e.x,e.y,e.z];
else if("auto"===h||"data"===h){n=[1,1,1];for(e=0;3>e;++e)l=g[C[e]],f=l.type,l=b[f],n[e]=Math.pow(l.acc,1/l.count)/r[e];e="data"===h?n:4>=Math.max.apply(null,n)/Math.min.apply(null,n)?n:[1,1,1]}else throw Error("scene.js aspectRatio was not one of the enumerated types");g.aspectratio.x=d.aspectratio.x=e[0];g.aspectratio.y=d.aspectratio.y=e[1];g.aspectratio.z=d.aspectratio.z=e[2];this.glplot.setAspectratio(g.aspectratio);this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:g.aspectratio.x,
y:g.aspectratio.y,z:g.aspectratio.z});this.viewInitial.aspectmode||(this.viewInitial.aspectmode=g.aspectmode);g=g.domain||null;a=a._size||null;g&&a&&(d=this.container.style,d.position="absolute",d.left=a.l+g.x[0]*a.w+"px",d.top=a.t+(1-g.y[1])*a.h+"px",d.width=a.w*(g.x[1]-g.x[0])+"px",d.height=a.h*(g.y[1]-g.y[0])+"px");this.glplot.redraw()}};a.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,
this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)};a.getCamera=function(){this.camera.view.recalcMatrix(this.camera.view.lastT());var b=this.camera;return{up:{x:b.up[0],y:b.up[1],z:b.up[2]},center:{x:b.center[0],y:b.center[1],z:b.center[2]},eye:{x:b.eye[0],y:b.eye[1],z:b.eye[2]},projection:{type:!0===b._ortho?"orthographic":"perspective"}}};a.setViewport=function(b){var a=b.camera;this.camera.lookAt.apply(this,[[a.eye.x,a.eye.y,a.eye.z],[a.center.x,a.center.y,
a.center.z],[a.up.x,a.up.y,a.up.z]]);this.glplot.setAspectratio(b.aspectratio);"orthographic"===a.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())};a.isCameraChanged=function(b){var a=this.getCamera();b=l.nestedProperty(b,this.id+".camera").get();var c=!1;if(void 0===b)c=!0;else{for(var d=0;3>d;d++)for(var e=0;3>e;e++){var f=["up","center","eye"],g=["x","y","z"];if(!b[f[d]]||a[f[d]][g[e]]!==b[f[d]][g[e]]){c=!0;break}}if(!b.projection||
a.projection&&a.projection.type!==b.projection.type)c=!0}return c};a.isAspectChanged=function(b){var a=this.glplot.getAspectratio();b=l.nestedProperty(b,this.id+".aspectratio").get();return void 0===b||b.x!==a.x||b.y!==a.y||b.z!==a.z};a.saveLayout=function(b){var a=this.fullLayout,c=this.isCameraChanged(b),d=this.isAspectChanged(b),e=c||d;if(e){var f={};if(c){var g=this.getCamera();var h=l.nestedProperty(b,this.id+".camera");var k=h.get();f[this.id+".camera"]=k}if(d){var m=this.glplot.getAspectratio();
var r=l.nestedProperty(b,this.id+".aspectratio");k=r.get();f[this.id+".aspectratio"]=k}t.call("_storeDirectGUIEdit",b,a._preGUI,f);c&&(h.set(g),l.nestedProperty(a,this.id+".camera").set(g));d&&(r.set(m),l.nestedProperty(a,this.id+".aspectratio").set(m),this.glplot.redraw())}return e};a.updateFx=function(b,a){var c=this.camera;if(c)if("orbit"===b)c.mode="orbit",c.keyBindingMode="rotate";else if("turntable"===b){c.up=[0,0,1];c.mode="turntable";c.keyBindingMode="rotate";var d=this.graphDiv;b=d._fullLayout;
c=this.fullSceneLayout.camera;var e=c.up.x,f=c.up.y,g=c.up.z;.999>g/Math.sqrt(e*e+f*f+g*g)&&(e=this.id+".camera.up",f={x:0,y:0,z:1},g={},g[e]=f,d=d.layout,t.call("_storeDirectGUIEdit",d,b._preGUI,g),c.up=f,l.nestedProperty(d,e).set(f))}else c.keyBindingMode=b;this.fullSceneLayout.hovermode=a};a.toImage=function(b){b||(b="png");this.staticMode&&this.container.appendChild(z);this.glplot.redraw();var a=this.glplot.gl,c=a.drawingBufferWidth,d=a.drawingBufferHeight;a.bindFramebuffer(a.FRAMEBUFFER,null);
var e=new Uint8Array(c*d*4);a.readPixels(0,0,c,d,a.RGBA,a.UNSIGNED_BYTE,e);a=0;for(var f=d-1;a<f;++a,--f)for(var g=0;g<c;++g)for(var h=0;4>h;++h){var k=e[4*(c*a+g)+h];e[4*(c*a+g)+h]=e[4*(c*f+g)+h];e[4*(c*f+g)+h]=k}a=document.createElement("canvas");a.width=c;a.height=d;f=a.getContext("2d");c=f.createImageData(c,d);c.data.set(e);f.putImageData(c,0,0);switch(b){case "jpeg":b=a.toDataURL("image/jpeg");break;case "webp":b=a.toDataURL("image/webp");break;default:b=a.toDataURL("image/png")}this.staticMode&&
this.container.removeChild(z);return b};a.setConvert=function(){for(var b=0;3>b;b++){var a=this.fullSceneLayout[C[b]];f.setConvert(a,this.fullLayout);a.setScale=l.noop}};a.make4thDimension=function(){var b=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};f.setConvert(this._mockAxis,b)};q.exports=n},{"../../components/fx":629,"../../lib":716,"../../lib/show_no_webgl_msg":737,"../../lib/str2rgbarray":739,"../../plots/cartesian/axes":764,"../../registry":845,
"./layout/convert":808,"./layout/spikes":811,"./layout/tick_marks":812,"./project":813,"gl-plot3d":293,"has-passive-events":412,"is-mobile":421,"webgl-context":554}],815:[function(a,q,p){q.exports=function(a,k,m,h){h=h||a.length;for(var b=Array(h),g=0;g<h;g++)b[g]=[a[g],k[g],m[g]];return b}},{}],816:[function(a,q,p){p=a("./font_attributes");var n=a("./animation_attributes"),k=a("../components/color/attributes"),m=a("./pad_attributes");a=a("../lib/extend").extendFlat;var h=p({editType:"calc"});h.family.dflt=
'"Open Sans", verdana, arial, sans-serif';h.size.dflt=12;h.color.dflt=k.defaultLine;q.exports={font:h,title:{text:{valType:"string",editType:"layoutstyle"},font:p({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},
xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:a(m({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",
min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},paper_bgcolor:{valType:"color",dflt:k.background,editType:"plot"},plot_bgcolor:{valType:"color",
dflt:k.background,editType:"layoutstyle"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:k.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},modebar:{orientation:{valType:"enumerated",
values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"modebar"},meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:a({},n.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:p({editType:"layoutstyle"})}}},{"../components/color/attributes":590,"../lib/extend":707,
"./animation_attributes":759,"./font_attributes":790,"./pad_attributes":824}],817:[function(a,q,p){a={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:'\x3ca href\x3d"http://www.openstreetmap.org/about/" target\x3d"_blank"\x3e OpenStreetMap\x3c/a\x3e',tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,
maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:'\x3ca href\x3d"https://carto.com/" target\x3d"_blank"\x3e CARTO\x3c/a\x3e',tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",
minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:'\x3ca href\x3d"https://carto.com/" target\x3d"_blank"\x3e CARTO\x3c/a\x3e',tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",
attribution:'Map tiles by \x3ca href\x3d"http://stamen.com"\x3eStamen Design\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca href\x3d"http://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e, under \x3ca href\x3d"http://www.openstreetmap.org/copyright"\x3eODbL\x3c/a\x3e.',tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",
minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:'Map tiles by \x3ca href\x3d"http://stamen.com"\x3eStamen Design\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca href\x3d"http://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e, under \x3ca href\x3d"http://www.openstreetmap.org/copyright"\x3eODbL\x3c/a\x3e.',tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],
tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:'Map tiles by \x3ca href\x3d"http://stamen.com"\x3eStamen Design\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca href\x3d"http://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by-sa/3.0"\x3eCC BY SA\x3c/a\x3e.',
tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}};p=Object.keys(a);q.exports={requiredVersion:"1.3.2",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:"basic streets outdoors light dark satellite satellite-streets".split(" "),styleValueDflt:"basic",stylesNonMapbox:a,styleValuesNonMapbox:p,traceLayerPrefix:"plotly-trace-layer-",
layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:"Your custom plotly.js bundle is not using the correct mapbox-gl version\nPlease install mapbox-gl@1.3.2.",noAccessTokenErrorMsg:"Missing Mapbox access token.\nMapbox trace type require a Mapbox access token to be registered.\nFor example:\n  Plotly.plot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });\nMore info here: https://www.mapbox.com/help/define-access-token/",missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",
p.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:"Set multiple mapbox access token across different mapbox subplot,\nusing first token found as mapbox-gl does not allow multipleaccess tokens on the same page.",mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",
path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",
polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;",
"ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset\x3dutf-8,%3Csvg viewBox\x3d"0 0 20 20" xmlns\x3d"http://www.w3.org/2000/svg"%3E %3Cpath fill\x3d"%23333333" fill-rule\x3d"evenodd" d\x3d"M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',
"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right \x3e .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left \x3e .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px",
"ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset\x3dutf-8,%3C?xml version\x3d"1.0" encoding\x3d"utf-8"?%3E %3Csvg version\x3d"1.1" id\x3d"Layer_1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink" x\x3d"0px" y\x3d"0px" viewBox\x3d"0 0 21 21" style\x3d"enable-background:new 0 0 21 21;" xml:space\x3d"preserve"%3E%3Cg transform\x3d"translate(0,0.01)"%3E%3Cpath d\x3d"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style\x3d"opacity:0.9;fill:%23ffffff;enable-background:new" class\x3d"st0"/%3E%3Cpath d\x3d"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style\x3d"opacity:0.35;enable-background:new" class\x3d"st1"/%3E%3Cpath d\x3d"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style\x3d"opacity:0.35;enable-background:new" class\x3d"st1"/%3E%3Cpolygon points\x3d"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style\x3d"opacity:0.9;fill:%23ffffff;enable-background:new" class\x3d"st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},
{}],818:[function(a,q,p){var n=a("../../lib");q.exports=function(a,m){var h=a.split(" ");a=h[0];h=h[1];var b=n.isArrayOrTypedArray(m)?n.mean(m):m;m=.5+b/100;b=1.5+b/100;var g=["",""],e=[0,0];switch(a){case "top":g[0]="top";e[1]=-b;break;case "bottom":g[0]="bottom",e[1]=b}switch(h){case "left":g[1]="right";e[0]=-m;break;case "right":g[1]="left",e[0]=m}return{anchor:g[0]&&g[1]?g.join("-"):g[0]?g[0]:g[1]?g[1]:"center",offset:e}}},{"../../lib":716}],819:[function(a,q,p){function n(b){return"string"===
typeof b&&(-1!==f.styleValuesMapbox.indexOf(b)||0===b.indexOf("mapbox://"))}var k=a("mapbox-gl"),m=a("../../lib"),h=a("../../plots/get_data").getSubplotCalcData,b=a("../../constants/xmlns_namespaces"),g=a("d3"),e=a("../../components/drawing"),t=a("../../lib/svg_text_utils"),l=a("./mapbox"),f=p.constants=a("./constants");p.name="mapbox";p.attr="subplot";p.idRoot="mapbox";p.idRegex=p.attrRegex=m.counterRegex("mapbox");p.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}};p.layoutAttributes=
a("./layout_attributes");p.supplyLayoutDefaults=a("./layout_defaults");p.plot=function(b){var a=b._fullLayout,d=b.calcdata,e=a._subplots.mapbox;if(k.version!==f.requiredVersion)throw Error(f.wrongVersionErrorMsg);var g=b._fullLayout;if(""===b._context.mapboxAccessToken)g="";else{for(var t=[],p=[],q=!1,z=!1,x=0;x<e.length;x++){var C=g[e[x]],B=C.accesstoken;n(C.style)&&(B?m.pushUnique(t,B):(n(C._input.style)&&(m.error("Uses Mapbox map style, but did not set an access token."),q=!0),z=!0));B&&m.pushUnique(p,
B)}if(z)throw b=q?f.noAccessTokenErrorMsg:f.missingStyleErrorMsg,m.error(b),Error(b);t.length?(1<t.length&&m.warn(f.multipleTokensErrorMsg),g=t[0]):(p.length&&m.log(["Listed mapbox access token(s)",p.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),g="")}k.accessToken=g;for(g=0;g<e.length;g++)t=e[g],p=h(d,"mapbox",t),q=a[t],z=q._subplot,z||(z=new l(b,t),a[t]._subplot=z),z.viewInitial||(z.viewInitial={center:m.extendFlat({},q.center),zoom:q.zoom,bearing:q.bearing,pitch:q.pitch}),
z.plot(p,a,b._promises)};p.clean=function(b,a,e,f){b=f._subplots.mapbox||[];for(e=0;e<b.length;e++){var c=b[e];!a[c]&&f[c]._subplot&&f[c]._subplot.destroy()}};p.toSVG=function(a){for(var c=a._fullLayout,d=c._subplots.mapbox,h=c._size,k=0;k<d.length;k++){var l=c[d[k]],m=l.domain,n=l._subplot.toImage("png");c._glimages.append("svg:image").attr({xmlns:b.svg,"xlink:href":n,x:h.l+h.w*m.x[0],y:h.t+h.h*(1-m.y[1]),width:h.w*(m.x[1]-m.x[0]),height:h.h*(m.y[1]-m.y[0]),preserveAspectRatio:"none"});l=g.select(l._subplot.div);
null!==l.select(".mapboxgl-ctrl-logo").node().offsetParent&&(n=c._glimages.append("g"),n.attr("transform","translate("+(h.l+h.w*m.x[0]+10)+", "+(h.t+h.h*(1-m.y[0])-31)+")"),n.append("path").attr("d",f.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),n.append("path").attr("d",f.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),n.append("path").attr("d",f.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),n.append("polygon").attr("points",
f.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"}));var p=l.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map","");l=c._glimages.append("g");var q=l.append("text");q.text(p).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":p});var C=e.bBox(q.node());n=h.w*(m.x[1]-m.x[0]);C.width>n/2&&(C=p.split("|").join("\x3cbr\x3e"),q.text(C).attr("data-unformatted",C).call(t.convertToTspans,
a),C=e.bBox(q.node()));q.attr("transform","translate(-3, "+(-C.height+8)+")");l.insert("rect",".static-attribution").attr({x:-C.width-6,y:-C.height-3,width:C.width+6,height:C.height+3,fill:"rgba(255, 255, 255, 0.75)"});q=1;C.width+6>n&&(q=n/(C.width+6));m=[h.l+h.w*m.x[1],h.t+h.h*(1-m.y[0])];l.attr("transform","translate("+m[0]+","+m[1]+") scale("+q+")")}};p.updateFx=function(b){b=b._fullLayout;for(var a=b._subplots.mapbox,d=0;d<a.length;d++)b[a[d]]._subplot.updateFx(b)}},{"../../components/drawing":612,
"../../constants/xmlns_namespaces":693,"../../lib":716,"../../lib/svg_text_utils":740,"../../plots/get_data":799,"./constants":817,"./layout_attributes":821,"./layout_defaults":822,"./mapbox":823,d3:165,"mapbox-gl":427}],820:[function(a,q,p){function n(b,a){this.subplot=b;this.uid=b.uid+"-"+a;this.index=a;this.idSource="source-"+this.uid;this.idLayer=g.layoutLayerPrefix+this.uid;this.below=this.layerType=this.source=this.sourceType=null;this.visible=!1}function k(b){if(!b.visible)return!1;b=b.source;
if(Array.isArray(b)&&0<b.length){for(var a=0;a<b.length;a++)if("string"!==typeof b[a]||0===b[a].length)return!1;return!0}return h.isPlainObject(b)||"string"===typeof b&&0<b.length}function m(a){var e={},g={};switch(a.type){case "circle":h.extendFlat(g,{"circle-radius":a.circle.radius,"circle-color":a.color,"circle-opacity":a.opacity});break;case "line":h.extendFlat(g,{"line-width":a.line.width,"line-color":a.color,"line-opacity":a.opacity,"line-dasharray":a.line.dash});break;case "fill":h.extendFlat(g,
{"fill-color":a.color,"fill-outline-color":a.fill.outlinecolor,"fill-opacity":a.opacity});break;case "symbol":var f=a.symbol,d=b(f.textposition,f.iconsize);h.extendFlat(e,{"icon-image":f.icon+"-15","icon-size":f.iconsize/10,"text-field":f.text,"text-size":f.textfont.size,"text-anchor":d.anchor,"text-offset":d.offset,"symbol-placement":f.placement});h.extendFlat(g,{"icon-color":a.color,"text-color":f.textfont.color,"text-opacity":a.opacity});break;case "raster":h.extendFlat(g,{"raster-fade-duration":0,
"raster-opacity":a.opacity})}return{layout:e,paint:g}}var h=a("../../lib"),b=a("./convert_text_opts"),g=a("./constants");a=n.prototype;a.update=function(b){this.visible?this.needsNewImage(b)?this.updateImage(b):this.needsNewSource(b)?(this.removeLayer(),this.updateSource(b),this.updateLayer(b)):this.needsNewLayer(b)?this.updateLayer(b):this.updateStyle(b):(this.updateSource(b),this.updateLayer(b));this.visible=k(b)};a.needsNewImage=function(b){return this.subplot.map.getSource(this.idSource)&&"image"===
this.sourceType&&"image"===b.sourcetype&&(this.source!==b.source||JSON.stringify(this.coordinates)!==JSON.stringify(b.coordinates))};a.needsNewSource=function(b){return this.sourceType!==b.sourcetype||this.source!==b.source||this.layerType!==b.type};a.needsNewLayer=function(b){return this.layerType!==b.type||this.below!==this.subplot.belowLookup["layout-"+this.index]};a.updateImage=function(b){this.subplot.map.getSource(this.idSource).updateImage({url:b.source,coordinates:b.coordinates})};a.updateSource=
function(b){var a=this.subplot.map;a.getSource(this.idSource)&&a.removeSource(this.idSource);this.sourceType=b.sourcetype;this.source=b.source;if(k(b)){var e=b.sourcetype,f=b.source,d={type:e};if("geojson"===e)var c="data";else"vector"===e?c="string"===typeof f?"url":"tiles":"raster"===e?(c="tiles",d.tileSize=256):"image"===e&&(c="url",d.coordinates=b.coordinates);d[c]=f;b.sourceattribution&&(d.attribution=b.sourceattribution);a.addSource(this.idSource,d)}};a.updateLayer=function(b){var a=this.subplot,
e=m(b),f=this.subplot.belowLookup["layout-"+this.index];if("traces"===f)for(var d=a.getMapLayers(),c=0;c<d.length;c++){var h=d[c].id;if("string"===typeof h&&0===h.indexOf(g.traceLayerPrefix)){var n=h;break}}else n=f;this.removeLayer();k(b)&&a.addLayer({id:this.idLayer,source:this.idSource,"source-layer":b.sourcelayer||"",type:b.type,minzoom:b.minzoom,maxzoom:b.maxzoom,layout:e.layout,paint:e.paint},n);this.layerType=b.type;this.below=f};a.updateStyle=function(b){k(b)&&(b=m(b),this.subplot.setOptions(this.idLayer,
"setLayoutProperty",b.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",b.paint))};a.removeLayer=function(){var b=this.subplot.map;b.getLayer(this.idLayer)&&b.removeLayer(this.idLayer)};a.dispose=function(){var b=this.subplot.map;b.getLayer(this.idLayer)&&b.removeLayer(this.idLayer);b.getSource(this.idSource)&&b.removeSource(this.idSource)};q.exports=function(b,a,g){b=new n(b,a);b.update(g);return b}},{"../../lib":716,"./constants":817,"./convert_text_opts":818}],821:[function(a,q,p){p=
a("../../lib");var n=a("../../components/color").defaultLine,k=a("../domain").attributes,m=a("../font_attributes"),h=a("../../traces/scatter/attributes").textposition,b=a("../../plot_api/edit_types").overrideAll,g=a("../../plot_api/plot_template").templatedArray;a=a("./constants");m=m({});m.family.dflt="Open Sans Regular, Arial Unicode MS Regular";(q.exports=b({_arrayAttrRegexps:[p.counterRegex("mapbox",".layers",!0)],domain:k({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",
values:a.styleValuesMapbox.concat(a.styleValuesNonMapbox),dflt:a.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:g("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",
values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:n},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:n}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",
dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:m,textposition:p.extendFlat({},h,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":591,"../../lib":716,"../../plot_api/edit_types":747,"../../plot_api/plot_template":754,"../../traces/scatter/attributes":1119,"../domain":789,"../font_attributes":790,"./constants":817}],822:[function(a,q,p){function n(a,g,h,
f){h("accesstoken",f.accessToken);h("style");h("center.lon");h("center.lat");h("zoom");h("bearing");h("pitch");b(a,g,{name:"layers",handleItemDefaults:k});g._input=a}function k(b,a){function e(c,d){return m.coerce(b,a,g.layers,c,d)}if(e("visible")){var f=e("sourcetype"),d="raster"===f||"image"===f;e("source");e("sourceattribution");"vector"===f&&e("sourcelayer");"image"===f&&e("coordinates");var c;d&&(c="raster");f=e("type",c);d&&"raster"!==f&&(f=a.type="raster",m.log("Source types *raster* and *image* must drawn *raster* layer type."));
e("below");e("color");e("opacity");e("minzoom");e("maxzoom");"circle"===f&&e("circle.radius");"line"===f&&(e("line.width"),e("line.dash"));"fill"===f&&e("fill.outlinecolor");"symbol"===f&&(e("symbol.icon"),e("symbol.iconsize"),e("symbol.text"),m.coerceFont(e,"symbol.textfont"),e("symbol.textposition"),e("symbol.placement"))}}var m=a("../../lib"),h=a("../subplot_defaults"),b=a("../array_container_defaults"),g=a("./layout_attributes");q.exports=function(b,a,k){h(b,a,k,{type:"mapbox",attributes:g,handleDefaults:n,
partition:"y",accessToken:a._mapboxAccessToken})}},{"../../lib":716,"../array_container_defaults":760,"../subplot_defaults":839,"./layout_attributes":821}],823:[function(a,q,p){function n(b,a){this.id=a;this.gd=b;a=b._fullLayout;b=b._context;this.container=a._glcontainer.node();this.isStatic=b.staticPlot;this.uid=a._uid+"-"+this.id;this.yaxis=this.xaxis=this.div=null;this.createFramework(a);this.styleObj=this.accessToken=this.map=null;this.traceHash={};this.layerList=[];this.belowLookup={};this.wheeling=
this.dragging=!1}function k(b){var a={};g.isPlainObject(b)?(a.id=b.id,a.style=b):"string"===typeof b?(a.id=b,-1!==r.styleValuesMapbox.indexOf(b)?a.style=r.styleUrlPrefix+b+"-"+r.styleUrlSuffix:a.style=r.stylesNonMapbox[b]?r.stylesNonMapbox[b]:b):(a.id=r.styleValueDflt,a.style=r.styleUrlPrefix+r.styleValueDflt+"-"+r.styleUrlSuffix);a.transition={duration:0,delay:0};return a}function m(b){return[b.lon,b.lat]}var h=a("mapbox-gl"),b=a("../../components/fx"),g=a("../../lib"),e=a("../../lib/geo_location_utils"),
t=a("../../registry"),l=a("../cartesian/axes"),f=a("../../components/dragelement"),d=a("../cartesian/select").prepSelect,c=a("../cartesian/select").selectOnClick,r=a("./constants"),u=a("./layers");a=n.prototype;a.plot=function(b,a,c){var d=this,e=a[d.id];d.map&&e.accesstoken!==d.accessToken&&(d.map.remove(),d.map=null,d.styleObj=null,d.traceHash=[],d.layerList={});e=d.map?new Promise(function(c,e){d.updateMap(b,a,c,e)}):new Promise(function(c,e){d.createMap(b,a,c,e)});c.push(e)};a.createMap=function(b,
a,c,d){var f=this,g=a[f.id],l=f.styleObj=k(g.style);f.accessToken=g.accesstoken;var r=f.map=(new h.Map({container:f.div,style:l.style,center:m(g.center),zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,interactive:!f.isStatic,preserveDrawingBuffer:f.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1})).addControl(new h.AttributionControl({compact:!0}));r._canvas.style.left="0px";r._canvas.style.top="0px";f.rejectOnError(d);f.isStatic||f.initFx(b,a);g=[];g.push(new Promise(function(b){r.once("load",
b)}));g=g.concat(e.fetchTraceGeoData(b));Promise.all(g).then(function(){f.fillBelowLookup(b,a);f.updateData(b);f.updateLayout(a);f.resolveOnRender(c)}).catch(d)};a.updateMap=function(b,a,c,d){var f=this,g=f.map,h=a[this.id];f.rejectOnError(d);var l=[];h=k(h.style);f.styleObj.id!==h.id&&(f.styleObj=h,g.setStyle(h.style),f.traceHash={},l.push(new Promise(function(b){g.once("styledata",b)})));l=l.concat(e.fetchTraceGeoData(b));Promise.all(l).then(function(){f.fillBelowLookup(b,a);f.updateData(b);f.updateLayout(a);
f.resolveOnRender(c)}).catch(d)};a.fillBelowLookup=function(b,a){var c=a[this.id].layers,d,e=this.belowLookup={},f=!1;for(a=0;a<b.length;a++){var g=b[a][0].trace,h=g._module;"string"===typeof g.below?d=g.below:h.getBelow&&(d=h.getBelow(g,this));""===d&&(f=!0);e["trace-"+g.uid]=d||""}for(a=0;a<c.length;a++)d=c[a],d="string"===typeof d.below?d.below:f?"traces":"",e["layout-"+a]=d;b={};for(var k in e)d=e[k],b[d]?b[d].push(k):b[d]=[k];for(d in b)if(e=b[d],1<e.length)for(a=0;a<e.length;a++)k=e[a],0===
k.indexOf("trace-")?(k=k.split("trace-")[1],this.traceHash[k]&&(this.traceHash[k].below=null)):0===k.indexOf("layout-")&&(k=k.split("layout-")[1],this.layerList[k]&&(this.layerList[k].below=null))};var v={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};a.updateData=function(b){var a=this.traceHash,c,d=b.slice().sort(function(b,a){return v[b[0].trace.type]-v[a[0].trace.type]});for(c=0;c<d.length;c++){var e=d[c];var f=e[0].trace;var g=a[f.uid];var h=!1;g&&(g.type===f.type?(g.update(e),h=!0):g.dispose());
!h&&f._module&&(a[f.uid]=f._module.plot(this,e))}d=Object.keys(a);c=0;a:for(;c<d.length;c++){e=d[c];for(g=0;g<b.length;g++)if(f=b[g][0].trace,e===f.uid)continue a;g=a[e];g.dispose();delete a[e]}};a.updateLayout=function(b){var a=this.map,c=b[this.id];this.dragging||this.wheeling||(a.setCenter(m(c.center)),a.setZoom(c.zoom),a.setBearing(c.bearing),a.setPitch(c.pitch));this.updateLayers(b);this.updateFramework(b);this.updateFx(b);this.map.resize();this.gd._context._scrollZoom.mapbox?a.scrollZoom.enable():
a.scrollZoom.disable()};a.resolveOnRender=function(b){var a=this.map;a.on("render",function z(){a.loaded()&&(a.off("render",z),setTimeout(b,10))})};a.rejectOnError=function(b){function a(){b(Error(r.mapOnErrorMsg))}var c=this.map;c.once("error",a);c.once("style.error",a);c.once("source.error",a);c.once("tile.error",a);c.once("layer.error",a)};a.createFramework=function(b){var a=this,c=a.div=document.createElement("div");c.id=a.uid;c.style.position="absolute";a.container.appendChild(c);a.xaxis={_id:"x",
c2p:function(b){return a.project(b).x}};a.yaxis={_id:"y",c2p:function(b){return a.project(b).y}};a.updateFramework(b);a.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};l.setConvert(a.mockAxis,b)};a.initFx=function(a,d){function e(){b.loneUnhover(d._hoverlayer)}function f(){var b=g.getView();h.emit("plotly_relayouting",g.getViewEditsWithDerived(b))}var g=this,h=g.gd,k=g.map;k.on("moveend",function(b){if(g.map){var a=h._fullLayout;if(b.originalEvent||g.wheeling){var c=a[g.id];t.call("_storeDirectGUIEdit",
h.layout,a._preGUI,g.getViewEdits(c));var d=g.getView();c._input.center=c.center=d.center;c._input.zoom=c.zoom=d.zoom;c._input.bearing=c.bearing=d.bearing;c._input.pitch=c.pitch=d.pitch;h.emit("plotly_relayout",g.getViewEditsWithDerived(d))}b.originalEvent&&"mouseup"===b.originalEvent.type?g.dragging=!1:g.wheeling&&(g.wheeling=!1);a._rehover&&a._rehover()}});k.on("wheel",function(){g.wheeling=!0});k.on("mousemove",function(a){var c=g.div.getBoundingClientRect();a.clientX=a.point.x+c.left;a.clientY=
a.point.y+c.top;a.target.getBoundingClientRect=function(){return c};g.xaxis.p2c=function(){return a.lngLat.lng};g.yaxis.p2c=function(){return a.lngLat.lat};h._fullLayout._rehover=function(){h._fullLayout._hoversubplot===g.id&&h._fullLayout[g.id]&&b.hover(h,a,g.id)};b.hover(h,a,g.id);h._fullLayout._hoversubplot=g.id});k.on("dragstart",function(){g.dragging=!0;e()});k.on("zoomstart",e);k.on("mouseout",function(){h._fullLayout._hoversubplot=null});k.on("drag",f);k.on("zoom",f);k.on("dblclick",function(){var b=
h._fullLayout[g.id];t.call("_storeDirectGUIEdit",h.layout,h._fullLayout._preGUI,g.getViewEdits(b));var a=g.viewInitial;k.setCenter(m(a.center));k.setZoom(a.zoom);k.setBearing(a.bearing);k.setPitch(a.pitch);a=g.getView();b._input.center=b.center=a.center;b._input.zoom=b.zoom=a.zoom;b._input.bearing=b.bearing=a.bearing;b._input.pitch=b.pitch=a.pitch;h.emit("plotly_doubleclick",null);h.emit("plotly_relayout",g.getViewEditsWithDerived(a))});g.clearSelect=function(){h._fullLayout._zoomlayer.selectAll(".select-outline").remove()};
g.onClickInPanFn=function(a){return function(d){var e=h._fullLayout.clickmode;-1<e.indexOf("select")&&c(d.originalEvent,h,[g.xaxis],[g.yaxis],g.id,a);-1<e.indexOf("event")&&b.click(h,d.originalEvent)}}};a.updateFx=function(b){function a(b){b=c.map.unproject(b);return[b.lng,b.lat]}var c=this,e=c.map,h=c.gd;if(!c.isStatic){var k=b.dragmode;c.dragOptions=g.extendDeep(c.dragOptions||{},{element:c.div,gd:h,plotinfo:{id:c.id,xaxis:c.xaxis,yaxis:c.yaxis,fillRangeItems:"select"===k?function(b,d){(b.range=
{})[c.id]=[a([d.xmin,d.ymin]),a([d.xmax,d.ymax])]}:function(b,d,e){(b.lassoPoints={})[c.id]=e.filtered.map(a)}},xaxes:[c.xaxis],yaxes:[c.yaxis],subplot:c.id});e.off("click",c.onClickInPanHandler);"select"===k||"lasso"===k?(e.dragPan.disable(),e.on("zoomstart",c.clearSelect),c.dragOptions.prepFn=function(b,a,e){d(b,a,e,c.dragOptions,k)},f.init(c.dragOptions)):(e.dragPan.enable(),e.off("zoomstart",c.clearSelect),c.div.onmousedown=null,c.onClickInPanHandler=c.onClickInPanFn(c.dragOptions),e.on("click",
c.onClickInPanHandler))}};a.updateFramework=function(b){var a=b[this.id].domain;b=b._size;var c=this.div.style;c.width=b.w*(a.x[1]-a.x[0])+"px";c.height=b.h*(a.y[1]-a.y[0])+"px";c.left=b.l+a.x[0]*b.w+"px";c.top=b.t+(1-a.y[1])*b.h+"px";this.xaxis._offset=b.l+a.x[0]*b.w;this.xaxis._length=b.w*(a.x[1]-a.x[0]);this.yaxis._offset=b.t+(1-a.y[1])*b.h;this.yaxis._length=b.h*(a.y[1]-a.y[0])};a.updateLayers=function(b){b=b[this.id].layers;var a=this.layerList,c;if(b.length!==a.length){for(c=0;c<a.length;c++)a[c].dispose();
a=this.layerList=[];for(c=0;c<b.length;c++)a.push(u(this,c,b[c]))}else for(c=0;c<b.length;c++)a[c].update(b[c])};a.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))};a.toImage=function(){this.map.stop();return this.map.getCanvas().toDataURL()};a.setOptions=function(b,a,c){for(var d in c)this.map[a](b,d,c[d])};a.getMapLayers=function(){return this.map.getStyle().layers};a.addLayer=function(b,a){var c=this.map;if("string"===typeof a){if(""===a){c.addLayer(b,
a);return}for(var d=this.getMapLayers(),e=0;e<d.length;e++)if(a===d[e].id){c.addLayer(b,a);return}g.warn(["Trying to add layer with *below* value",a,"referencing a layer that does not exist or that does not yet exist."].join(" "))}c.addLayer(b)};a.project=function(b){return this.map.project(new h.LngLat(b[0],b[1]))};a.getView=function(){var b=this.map,a=b.getCenter();a={lon:a.lng,lat:a.lat};var c=b.getCanvas(),d=c.width;c=c.height;return{center:a,zoom:b.getZoom(),bearing:b.getBearing(),pitch:b.getPitch(),
_derived:{coordinates:[b.unproject([0,0]).toArray(),b.unproject([d,0]).toArray(),b.unproject([d,c]).toArray(),b.unproject([0,c]).toArray()]}}};a.getViewEdits=function(b){for(var a=this.id,c=["center","zoom","bearing","pitch"],d={},e=0;e<c.length;e++){var f=c[e];d[a+"."+f]=b[f]}return d};a.getViewEditsWithDerived=function(b){var a=this.id,c=this.getViewEdits(b);c[a+"._derived"]=b._derived;return c};q.exports=n},{"../../components/dragelement":609,"../../components/fx":629,"../../lib":716,"../../lib/geo_location_utils":710,
"../../registry":845,"../cartesian/axes":764,"../cartesian/select":781,"./constants":817,"./layers":820,"mapbox-gl":427}],824:[function(a,q,p){q.exports=function(a){a=a.editType;return{t:{valType:"number",dflt:0,editType:a},r:{valType:"number",dflt:0,editType:a},b:{valType:"number",dflt:0,editType:a},l:{valType:"number",dflt:0,editType:a},editType:a}}},{}],825:[function(a,q,p){function n(b,a){a.text("");a=a.append("a").attr({"xlink:xlink:href":"#","class":"link--impt link--embedview","font-weight":"bold"}).text(b._context.linkText+
" "+String.fromCharCode(187));if(b._context.sendData)a.on("click",function(){E.sendDataToCloud(b)});else{var c=window.location.pathname.split("/"),d=window.location.search;a.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+c[2].split(".")[0]+"/"+c[1]+d})}}function k(b,a){function c(b,a){l[a]=b;m[b]=1}function d(b,a){if(b&&"string"===typeof b&&!m[b])return c(b,a),!0}var e=a.length,f=[],g;for(g=0;g<b.length;g++){var h=b[g]._fullInput;h!==k&&f.push(h);var k=h}b=f.length;var l=Array(e),m={};for(g=
0;g<e;g++)k=a[g].uid,"number"===typeof k&&(k=String(k)),d(k,g)||g<b&&d(f[g].uid,g)||c(w.randstr(m),g);return l}function m(b,a){function c(b){for(var c=!0,d=0;d<a.length;d++){var g=a[d];f[g]||(b[g]?f[g]=b[g]:c=!1)}c&&(e=!0)}var d=b._context.locale;d||"en-US"===d;for(var e=!1,f={},g=0;2>g;g++){for(var h=b._context.locales,k=0;2>k;k++){if(h=(h[d]||{}).format)if(c(h),e)break;h=r.localeRegistry}k=d.split("-")[0];if(e||k===d)break;d=k}e||c(r.localeRegistry.en.format);return f}function h(b){b=b.transforms;
if(Array.isArray(b)&&b.length)for(var a=0;a<b.length;a++){var c=b[a];if((c=c._module||F[c.type])&&c.makesData)return!0}return!1}function b(b,a,c,d){for(var e=b.transforms,f=[b],g=0;g<e.length;g++){var h=e[g],k=F[h.type];k&&k.transform&&(f=k.transform(f,{transform:h,fullTrace:b,fullData:a,layout:c,fullLayout:d,transformIndex:g}))}return f}function g(b){var a=b.margin;b._size||(a=b._size={l:Math.round(a.l),r:Math.round(a.r),t:Math.round(a.t),b:Math.round(a.b),p:Math.round(a.pad)},a.w=Math.round(b.width)-
a.l-a.r,a.h=Math.round(b.height)-a.t-a.b);b._pushmargin||(b._pushmargin={});b._pushmarginIds||(b._pushmarginIds={})}function e(b,a,c){function d(b){if(b)for(;b.length;)b.shift()}function e(a){if(b._transitionData)return d(b._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(c.redraw)return r.call("redraw",b)}).then(function(){b._transitioning=!1;b._transitioningWithDuration=!1;b.emit("plotly_transitioned",[])}).then(a)}var f=!1,g=w.syncOrAsync([E.previousPromises,function(){if(b._transitionData){b._transitioning=
!1;var a=b._transitionData._interruptCallbacks,c=Promise.resolve();if(a)for(;a.length;)c=c.then(a.shift());return c}},c.prepareFn,E.rehover,function(){b.emit("plotly_transitioning",[]);return new Promise(function(d){function g(){h++;return function(){k++;f||k!==h||e(d)}}b._transitioning=!0;0<a.duration&&(b._transitioningWithDuration=!0);b._transitionData._interruptCallbacks.push(function(){f=!0});c.redraw&&b._transitionData._interruptCallbacks.push(function(){return r.call("redraw",b)});b._transitionData._interruptCallbacks.push(function(){b.emit("plotly_transitioninterrupted",
[])});var h=0,k=0;c.runFn(g);setTimeout(g())})}],b);g&&g.then||(g=Promise.resolve());return g.then(function(){return b})}function t(b,a){function c(b,c,d){var e=c._id.charAt(0);if("histogram2dcontour"===b){b=c._counterAxes[0];c=z.getFromId(a,b);var f="x"===e||"x"===b&&"category"===c.type,g="y"===e||"y"===b&&"category"===c.type;return function(b,a){return 0===b||0===a||f&&b===d[a].length-1||g&&a===d.length-1?-1:("y"===e?a:b)-1}}return function(b,a){return"y"===e?a:b}}var d=[],e,f,g,h,k={min:function(b){return w.aggNums(Math.min,
null,b)},max:function(b){return w.aggNums(Math.max,null,b)},sum:function(b){return w.aggNums(function(b,a){return b+a},null,b)},total:function(b){return w.aggNums(function(b,a){return b+a},null,b)},mean:function(b){return w.mean(b)},median:function(b){return w.median(b)}};for(e=0;e<b.length;e++){var l=b[e];if("category"===l.type&&(f=l.categoryorder.match(K))){var m=f[1],t=f[2],n=[];for(f=0;f<l._categories.length;f++)n.push([l._categories[f],[]]);for(f=0;f<l._traceIndices.length;f++){var u=l._traceIndices[f];
var p=a._fullData[u],q=l._id.charAt(0);if(!0===p.visible){var v=p.type;r.traceIs(p,"histogram")&&(delete p._xautoBinFinished,delete p._yautoBinFinished);var x=a.calcdata[u];for(u=0;u<x.length;u++){var y=x[u];if("splom"===v){var A=p._axesDim[l._id];"y"===q&&(g=p._diag[A][0])&&(l=a._fullLayout[z.id2name(g)]);var B=y.trace.dimensions[A].values;for(g=0;g<B.length;g++){var C=B[g];var D=l._categoriesMap[C];for(h=0;h<y.trace.dimensions.length;h++)h!==A&&n[D][1].push(y.trace.dimensions[h].values[g])}}else if("scattergl"===
v){for(g=0;g<y.t.x.length;g++){if("x"===q){D=C=y.t.x[g];var E=y.t.y[g]}"y"===q&&(D=C=y.t.y[g],E=y.t.x[g]);n[D][1].push(E)}y.t&&y.t._scene&&delete y.t._scene.dirty}else if(y.hasOwnProperty("z"))for(E=y.z,y=c(p.type,l,E),g=0;g<E.length;g++)for(h=0;h<E[g].length;h++)D=y(h,g),D+1&&n[D][1].push(E[g][h]);else for("x"===q?(C=y.p+1?y.p:y.x,E=y.s||y.v||y.y):"y"===q&&(C=y.p+1?y.p:y.y,E=y.s||y.v||y.x),Array.isArray(E)||(E=[E]),g=0;g<E.length;g++)n[C][1].push(E[g])}}}l._categoriesValue=n;p=[];for(f=0;f<n.length;f++)p.push([n[f][0],
k[m](n[f][1])]);p.sort(function(b,a){return b[1]-a[1]});l._categoriesAggregatedValue=p;l._initialCategories=p.map(function(b){return b[0]});"descending"===t&&l._initialCategories.reverse();d=d.concat(l.sortByInitialCategories())}}return d}function l(b,a,c){var d={},e;for(e=0;e<b.length;e++){var f=b[e];var g=f._id;f.clearCalc();"multicategory"===f.type&&f.setupMultiCategory(a);d[f._id]=1}b=c._axisMatchGroups||[];for(e=0;e<b.length;e++)for(g in b[e])d[g]||(f=c[z.id2name(g)],f.clearCalc())}function f(b){var a=
b._fullLayout,c=a._visibleModules,d={},e,f;for(e=0;e<c.length;e++){var g=c[e],h=g.crossTraceCalc;h&&(g=g.basePlotModule.name,d[g]?w.pushUnique(d[g],h):d[g]=[h])}for(f in d)if(h=d[f],g=a._subplots[f],Array.isArray(g))for(c=0;c<g.length;c++){var k=g[c],l="cartesian"===f?a._plots[k]:a[k];for(e=0;e<h.length;e++)h[e](b,l,k)}else for(e=0;e<h.length;e++)h[e](b)}var d=a("d3"),c=a("fast-isnumeric"),r=a("../registry"),u=a("../plot_api/plot_schema"),v=a("../plot_api/plot_template"),w=a("../lib"),y=a("../components/color"),
A=a("../constants/numerical").BADNUM,z=a("./cartesian/axis_ids"),x=a("./animation_attributes"),C=a("./frame_attributes"),B=a("../plots/get_data").getModuleCalcData,D=w.relinkPrivateKeys,G=w._,E=q.exports={};w.extendFlat(E,r);E.attributes=a("./attributes");E.attributes.type.values=E.allTypes;E.fontAttrs=a("./font_attributes");E.layoutAttributes=a("./layout_attributes");E.fontWeight="normal";var F=E.transformsRegistry;a=a("./command");E.executeAPICommand=a.executeAPICommand;E.computeAPICommandBindings=
a.computeAPICommandBindings;E.manageCommandObserver=a.manageCommandObserver;E.hasSimpleAPICommandBindings=a.hasSimpleAPICommandBindings;E.redrawText=function(b){b=w.getGraphDiv(b);var a=b._fullLayout||{};if(a._has&&a._has("polar")||!b.data||!b.data[0]||!b.data[0].r)return new Promise(function(a){setTimeout(function(){r.getComponentMethod("annotations","draw")(b);r.getComponentMethod("legend","draw")(b);r.getComponentMethod("colorbar","draw")(b);a(E.previousPromises(b))},300)})};E.resize=function(b){b=
w.getGraphDiv(b);var a,c=new Promise(function(c,d){b&&!w.isHidden(b)||d(Error("Resize must be passed a displayed plot div element."));b._redrawTimer&&clearTimeout(b._redrawTimer);b._resolveResize&&(a=b._resolveResize);b._resolveResize=c;b._redrawTimer=setTimeout(function(){if(!b.layout||b.layout.width&&b.layout.height||w.isHidden(b))c(b);else{delete b.layout.width;delete b.layout.height;var a=b.changed;b.autoplay=!0;r.call("relayout",b,{autosize:!0}).then(function(){b.changed=a;b._resolveResize===
c&&(delete b._resolveResize,c(b))})}},100)});a&&a(c);return c};E.previousPromises=function(b){if((b._promises||[]).length)return Promise.all(b._promises).then(function(){b._promises=[]})};E.addLinks=function(b){if(b._context.showLink||b._context.showSources){var a=b._fullLayout,c=w.ensureSingle(a._paper,"text","js-plot-link-container",function(b){b.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:y.defaultLine,"pointer-events":"all"}).each(function(){var b=d.select(this);
b.append("tspan").classed("js-link-to-tool",!0);b.append("tspan").classed("js-link-spacer",!0);b.append("tspan").classed("js-sourcelinks",!0)})}),e=c.node(),f={y:a._paper.attr("height")-9};document.body.contains(e)&&e.getComputedTextLength()>=a.width-20?(f["text-anchor"]="start",f.x=5):(f["text-anchor"]="end",f.x=a._paper.attr("width")-7);c.attr(f);a=c.select(".js-link-to-tool");e=c.select(".js-link-spacer");c=c.select(".js-sourcelinks");b._context.showSources&&b._context.showSources(b);b._context.showLink&&
n(b,a);e.text(a.text()&&c.text()?" - ":"")}};E.sendDataToCloud=function(b){b.emit("plotly_beforeexport");var a=(window.PLOTLYENV||{}).BASE_URL||b._context.plotlyServerURL,c=d.select(b).append("div").attr("id","hiddenform").style("display","none");a=c.append("form").attr({action:a+"/external",method:"post",target:"_blank"});a.append("input").attr({type:"text",name:"data"}).node().value=E.graphJson(b,!1,"keepdata");a.node().submit();c.remove();b.emit("plotly_afterexport");return!1};var L="days shortDays months shortMonths periods dateTime date time decimal thousands grouping currency".split(" "),
J=["year","month","dayMonth","dayMonthYear"];E.supplyDefaults=function(b,a){a=a&&a.skipUpdateCalc;var c=b._fullLayout||{};if(c._skipDefaults)delete c._skipDefaults;else{var e=b._fullLayout={},f=b.layout||{},h=b._fullData||[],l=b._fullData=[],t=b.data||[],n=b.calcdata||[],u=b._context||{};b._transitionData||E.createTransitionData(b);e._dfltTitle={plot:G(b,"Click to enter Plot title"),x:G(b,"Click to enter X axis title"),y:G(b,"Click to enter Y axis title"),colorbar:G(b,"Click to enter Colorscale title"),
annotation:G(b,"new text")};e._traceWord=G(b,"trace");var p=m(b,L);e._mapboxAccessToken=u.mapboxAccessToken;if(c._initialAutoSizeIsDone){var q=c.width,v=c.height;E.supplyLayoutGlobalDefaults(f,e,p);f.width||(e.width=q);f.height||(e.height=v);E.sanitizeMargins(e)}else E.supplyLayoutGlobalDefaults(f,e,p),q=!f.width||!f.height,v=e.autosize,u=u.autosizable,q&&(v||u)?E.plotAutoSize(b,f,e):q&&E.sanitizeMargins(e),!v&&q&&(f.width=e.width,f.height=e.height);q=e.separators;p.decimal=q.charAt(0);p.thousands=
q.charAt(1);p=d.locale(p);e._d3locale=p;e._extraFormat=m(b,J);e._initialAutoSizeIsDone=!0;e._dataLength=t.length;e._modules=[];e._visibleModules=[];e._basePlotModules=[];p=r.collectableSubplotTypes;q={};var x;if(!p)for(x in p=[],u=r.subplotsRegistry,u){var z=u[x].attr;if(z&&(p.push(x),Array.isArray(z)))for(v=0;v<z.length;v++)w.pushUnique(p,z[v])}for(x=0;x<p.length;x++)q[p[x]]=[];q=e._subplots=q;p=e._splomAxes={x:{},y:{}};v=e._splomSubplots={};e._splomGridDflt={};e._scatterStackOpts={};e._firstScatter=
{};e._alignmentOpts={};e._colorAxes={};e._requestRangeslider={};e._traceUids=k(h,t);e._globalTransforms=(b._context||{}).globalTransforms;E.supplyDataDefaults(t,l,f,e);x=Object.keys(p.x);p=Object.keys(p.y);if(1<x.length&&1<p.length){r.getComponentMethod("grid","sizeDefaults")(f,e);for(t=0;t<x.length;t++)w.pushUnique(q.xaxis,x[t]);for(t=0;t<p.length;t++)w.pushUnique(q.yaxis,p[t]);for(var y in v)w.pushUnique(q.cartesian,y)}e._has=E._hasPlotType.bind(e);if(h.length===l.length)for(t=0;t<l.length;t++)D(l[t],
h[t]);E.supplyLayoutModuleDefaults(f,e,l,b._transitionData);y=e._visibleModules;f=[];for(t=0;t<y.length;t++)(q=y[t].crossTraceDefaults)&&w.pushUnique(f,q);for(t=0;t<f.length;t++)f[t](l,e);e._hasOnlyLargeSploms=1===e._basePlotModules.length&&"splom"===e._basePlotModules[0].name&&15<x.length&&15<p.length&&0===e.shapes.length&&0===e.images.length;e._hasCartesian=e._has("cartesian");e._hasGeo=e._has("geo");e._hasGL3D=e._has("gl3d");e._hasGL2D=e._has("gl2d");e._hasTernary=e._has("ternary");e._hasPie=e._has("pie");
E.linkSubplots(l,e,h,c);E.cleanPlot(l,e,h,c);c._zoomlayer&&!b._dragging&&c._zoomlayer.selectAll(".select-outline").remove();b=[];if(e.meta)var A=e._meta={meta:e.meta,layout:{meta:e.meta}};for(h=0;h<l.length;h++)y=l[h],y.meta?b[y.index]=y._meta={meta:y.meta}:e.meta&&(y._meta={meta:e.meta}),e.meta&&(y._meta.layout={meta:e.meta});b.length&&(A||(A=e._meta={}),A.data=b);D(e,c);r.getComponentMethod("colorscale","crossTraceDefaults")(l,e);e._preGUI||(e._preGUI={});e._tracePreGUI||(e._tracePreGUI={});A=e._tracePreGUI;
c={};for(var B in A)c[B]="old";for(t=0;t<l.length;t++)B=l[t]._fullInput.uid,c[B]||(A[B]={}),c[B]="new";for(B in c)"old"===c[B]&&delete A[B];g(e);r.getComponentMethod("rangeslider","makeData")(e);a||n.length!==l.length||E.supplyDefaultsUpdateCalc(n,l)}};E.supplyDefaultsUpdateCalc=function(b,a){for(var c=0;c<a.length;c++){var d=a[c],e=(b[c]||[])[0];if(e&&e.trace){var f=e.trace;if(f._hasCalcTransform){var g=f._arrayAttrs,h;for(h=0;h<g.length;h++){var k=g[h];var l=w.nestedProperty(f,k).get().slice();
w.nestedProperty(d,k).set(l)}}e.trace=d}}};E.createTransitionData=function(b){b._transitionData||(b._transitionData={});b._transitionData._frames||(b._transitionData._frames=[]);b._transitionData._frameHash||(b._transitionData._frameHash={});b._transitionData._counter||(b._transitionData._counter=0);b._transitionData._interruptCallbacks||(b._transitionData._interruptCallbacks=[])};E._hasPlotType=function(b){var a,c=this._basePlotModules||[];for(a=0;a<c.length;a++)if(c[a].name===b)return!0;c=this._modules||
[];for(a=0;a<c.length;a++){var d=c[a].name;if(d===b||(d=r.modules[d])&&d.categories[b])return!0}return!1};E.cleanPlot=function(b,a,c,d){var e,f=d._basePlotModules||[];for(e=0;e<f.length;e++){var g=f[e];g.clean&&g.clean(b,a,c,d)}e=d._has&&d._has("gl");a=a._has&&a._has("gl");e&&!a&&void 0!==d._glcontainer&&(d._glcontainer.selectAll(".gl-canvas").remove(),d._glcontainer.selectAll(".no-webgl").remove(),d._glcanvas=null);f=!!d._infolayer;e=0;a:for(;e<c.length;e++){g=c[e].uid;for(a=0;a<b.length;a++)if(g===
b[a].uid)continue a;f&&d._infolayer.select(".cb"+g).remove()}};E.linkSubplots=function(b,a,c,d){var e=d._plots||{},f=a._plots={};d=a._subplots;c={_fullData:b,_fullLayout:a};var g=d.cartesian.concat(d.gl2d||[]);for(d=0;d<g.length;d++){var h=g[d];var k=e[h],l=z.getFromId(c,h,"x"),m=z.getFromId(c,h,"y");k?k=f[h]=k:(k=f[h]={},k.id=h);l._counterAxes.push(m._id);m._counterAxes.push(l._id);l._subplotsWith.push(h);m._subplotsWith.push(h);k.xaxis=l;k.yaxis=m;k._hasClipOnAxisFalse=!1;for(h=0;h<b.length;h++)if(l=
b[h],l.xaxis===k.xaxis._id&&l.yaxis===k.yaxis._id&&!1===l.cliponaxis){k._hasClipOnAxisFalse=!0;break}}b=z.list(c,null,!0);for(d=0;d<b.length;d++)e=b[d],h=null,e.overlaying&&(h=z.getFromId(c,e.overlaying))&&h.overlaying&&(e.overlaying=!1,h=null),e._mainAxis=h||e,h&&(e.domain=h.domain.slice()),e._anchorAxis="free"===e.anchor?null:z.getFromId(c,e.anchor);for(d=0;d<b.length;d++){e=b[d];e._counterAxes.sort(z.idSort);e._subplotsWith.sort(w.subplotSort);f=h=e;var t=a;g={_fullLayout:t};k="x"===f._id.charAt(0);
var n=f._mainAxis._anchorAxis,u=m=l="";n&&(u=n._mainAxis._id,l=k?f._id+u:u+f._id);if(!l||!t._plots[l])for(l="",t=f._counterAxes,n=0;n<t.length;n++){var p=t[n],q=k?f._id+p:p+f._id;m||(m=q);p=z.getFromId(g,p);if(u&&p.overlaying===u){l=q;break}}h._mainSubplot=l||m;if(e._counterAxes.length&&(e.spikemode&&-1!==e.spikemode.indexOf("across")||e.automargin&&e.mirror&&"free"!==e.anchor||r.getComponentMethod("rangeslider","isVisible")(e))){f=1;for(h=g=0;h<e._counterAxes.length;h++)k=z.getFromId(c,e._counterAxes[h]),
f=Math.min(f,k.domain[0]),g=Math.max(g,k.domain[1]);f<g&&(e._counterDomainMin=f,e._counterDomainMax=g)}}};E.clearExpandedTraceDefaultColors=function(b){function a(b,a,c,f){d[f]=a;d.length=f+1;"color"===b.valType&&void 0===b.dflt&&e.push(d.join("."))}var c;var d=[];var e=b._module._colorAttrs;e||(b._module._colorAttrs=e=[],u.crawl(b._module.attributes,a));for(c=0;c<e.length;c++)w.nestedProperty(b,"_input."+e[c]).get()||w.nestedProperty(b,e[c]).set(null)};E.supplyDataDefaults=function(a,c,d,e){function f(b){c.push(b);
var a=b._module;a&&(w.pushUnique(g,a),!0===b.visible&&w.pushUnique(h,a),w.pushUnique(k,b._module.basePlotModule),l++,!1!==b._input.visible&&m++)}var g=e._modules,h=e._visibleModules,k=e._basePlotModules,l=0,m=0,t;e._transformModules=[];var n={},u=[],p=v.traceTemplater((d.template||{}).data||{});for(t=0;t<a.length;t++){var q=a[t];var x=p.newTrace(q);x.uid=e._traceUids[t];E.supplyTraceDefaults(q,x,m,e,t);x.index=t;x._input=q;x._expandedIndex=l;if(x.transforms&&x.transforms.length)for(var z=!1!==q.visible&&
!1===x.visible,y=b(x,c,d,e),A=0;A<y.length;A++){var B=y[A],C={_template:x._template,type:x.type,uid:x.uid+A};z&&!1===B.visible&&delete B.visible;E.supplyTraceDefaults(B,C,l,e,t);D(C,B);C.index=t;C._input=q;C._fullInput=x;C._expandedIndex=l;C._expandedInput=B;f(C)}else x._fullInput=x,x._expandedInput=x,f(x);r.traceIs(x,"carpetAxis")&&(n[x.carpet]=x);r.traceIs(x,"carpetDependent")&&u.push(t)}for(t=0;t<u.length;t++)x=c[u[t]],x.visible&&(a=n[x.carpet],(x._carpet=a)&&a.visible?(x.xaxis=a.xaxis,x.yaxis=
a.yaxis):x.visible=!1)};E.supplyAnimationDefaults=function(b){b=b||{};var a,c={};w.coerce(b||{},c,x,"mode",void 0);w.coerce(b||{},c,x,"direction",void 0);w.coerce(b||{},c,x,"fromcurrent",void 0);if(Array.isArray(b.frame))for(c.frame=[],a=0;a<b.frame.length;a++)c.frame[a]=E.supplyAnimationFrameDefaults(b.frame[a]||{});else c.frame=E.supplyAnimationFrameDefaults(b.frame||{});if(Array.isArray(b.transition))for(c.transition=[],a=0;a<b.transition.length;a++)c.transition[a]=E.supplyAnimationTransitionDefaults(b.transition[a]||
{});else c.transition=E.supplyAnimationTransitionDefaults(b.transition||{});return c};E.supplyAnimationFrameDefaults=function(b){var a={};w.coerce(b||{},a,x.frame,"duration",void 0);w.coerce(b||{},a,x.frame,"redraw",void 0);return a};E.supplyAnimationTransitionDefaults=function(b){var a={};w.coerce(b||{},a,x.transition,"duration",void 0);w.coerce(b||{},a,x.transition,"easing",void 0);return a};E.supplyFrameDefaults=function(b){function a(a,d){return w.coerce(b,c,C,a,d)}var c={};a("group");a("name");
a("traces");a("baseframe");a("data");a("layout");return c};E.supplyTraceDefaults=function(b,a,c,d,e){function f(c,d){return w.coerce(b,a,E.attributes,c,d)}var g=d.colorway||y.defaults;c=g[c%g.length];g=f("visible");f("type");f("name",d._traceWord+" "+e);f("uirevision",d.uirevision);var h=E.getModule(a);if(a._module=h){var k=h.basePlotModule,l=k.attr,m=k.attributes;if(l&&m){var t=d._subplots,n="";if(g||"gl2d"!==k.name){if(Array.isArray(l))for(e=0;e<l.length;e++){var u=l[e],p=w.coerce(b,a,m,u);t[u]&&
w.pushUnique(t[u],p);n+=p}else n=w.coerce(b,a,m,l);t[k.name]&&w.pushUnique(t[k.name],n)}}}g&&(f("customdata"),f("ids"),f("meta"),r.traceIs(a,"showLegend")?(w.coerce(b,a,h.attributes.showlegend?h.attributes:E.attributes,"showlegend"),f("legendgroup"),a._dfltShowLegend=!0):a._dfltShowLegend=!1,h&&h.supplyDefaults(b,a,c,d),r.traceIs(a,"noOpacity")||f("opacity"),r.traceIs(a,"notLegendIsolatable")&&(a.visible=!!a.visible),r.traceIs(a,"noHover")||(a.hovertemplate||w.coerceHoverinfo(b,a,d),"parcats"!==a.type&&
r.getComponentMethod("fx","supplyDefaults")(b,a,c,d)),h&&h.selectPoints&&f("selectedpoints"),E.supplyTransformDefaults(b,a,d));return a};E.hasMakesDataTransform=h;E.supplyTransformDefaults=function(b,a,c){if(a._length||h(b)){var d=c._globalTransforms||[],e=c._transformModules||[];if(Array.isArray(b.transforms)||0!==d.length){d=d.concat(b.transforms||[]);for(var f=a.transforms=[],g=0;g<d.length;g++){var k=d[g],l=k.type,m=F[l],r=!(k._module&&k._module===m),t=m&&"function"===typeof m.transform;m||w.warn("Unrecognized transform type "+
l+".");m&&m.supplyDefaults&&(r||t)?(k=m.supplyDefaults(k,a,c,b),k.type=l,k._module=m,w.pushUnique(e,m)):k=w.extendFlat({},k);f.push(k)}}}};E.supplyLayoutGlobalDefaults=function(b,a,c){function d(c,d){return w.coerce(b,a,E.layoutAttributes,c,d)}var e=b.template;w.isPlainObject(e)&&(a.template=e,a._template=e.layout,a._dataTemplate=e.data);e=w.coerceFont(d,"font");d("title.text",a._dfltTitle.plot);w.coerceFont(d,"title.font",{family:e.family,size:Math.round(1.4*e.size),color:e.color});d("title.xref");
d("title.yref");d("title.x");d("title.y");d("title.xanchor");d("title.yanchor");d("title.pad.t");d("title.pad.r");d("title.pad.b");d("title.pad.l");d("uniformtext.mode")&&d("uniformtext.minsize");d("autosize",!(b.width&&b.height));d("width");d("height");d("margin.l");d("margin.r");d("margin.t");d("margin.b");d("margin.pad");d("margin.autoexpand");b.width&&b.height&&E.sanitizeMargins(a);r.getComponentMethod("grid","sizeDefaults")(b,a);d("paper_bgcolor");d("separators",c.decimal+c.thousands);d("hidesources");
d("colorway");d("datarevision");c=d("uirevision");d("editrevision",c);d("selectionrevision",c);d("modebar.orientation");d("modebar.bgcolor",y.addOpacity(a.paper_bgcolor,.5));e=y.contrast(y.rgb(a.modebar.bgcolor));d("modebar.color",y.addOpacity(e,.3));d("modebar.activecolor",y.addOpacity(e,.7));d("modebar.uirevision",c);d("meta");w.isPlainObject(b.transition)&&(d("transition.duration"),d("transition.easing"),d("transition.ordering"));r.getComponentMethod("calendars","handleDefaults")(b,a,"calendar");
r.getComponentMethod("fx","supplyLayoutGlobalDefaults")(b,a,d)};E.plotAutoSize=function(b,a,d){var e=b._context||{},f=e.frameMargins,g;(g=w.isPlotDiv(b))&&b.emit("plotly_autosize");e.fillFrame?(e=window.innerWidth,g=window.innerHeight,document.body.style.overflow="hidden"):(g=g?window.getComputedStyle(b):{},e=parseFloat(g.width)||parseFloat(g.maxWidth)||d.width,g=parseFloat(g.height)||parseFloat(g.maxHeight)||d.height,c(f)&&0<f&&(f=1-2*f,e=Math.round(f*e),g=Math.round(f*g)));f=E.layoutAttributes.width.min;
var h=E.layoutAttributes.height.min;e<f&&(e=f);g<h&&(g=h);f=!a.width&&1<Math.abs(d.width-e);if((a=!a.height&&1<Math.abs(d.height-g))||f)f&&(d.width=e),a&&(d.height=g);b._initialAutoSize||(b._initialAutoSize={width:e,height:g});E.sanitizeMargins(d)};E.supplyLayoutModuleDefaults=function(b,a,c,d){var e=r.componentsRegistry,f=a._basePlotModules,g;var h=r.subplotsRegistry.cartesian;for(g in e){var k=e[g];k.includeBasePlot&&k.includeBasePlot(b,a)}f.length||f.push(h);a._has("cartesian")&&(r.getComponentMethod("grid",
"contentDefaults")(b,a),h.finalizeSubplots(b,a));for(var l in a._subplots)a._subplots[l].sort(w.subplotSort);for(h=0;h<f.length;h++)k=f[h],k.supplyLayoutDefaults&&k.supplyLayoutDefaults(b,a,c);f=a._modules;for(h=0;h<f.length;h++)k=f[h],k.supplyLayoutDefaults&&k.supplyLayoutDefaults(b,a,c);f=a._transformModules;for(h=0;h<f.length;h++)k=f[h],k.supplyLayoutDefaults&&k.supplyLayoutDefaults(b,a,c,d);for(g in e)k=e[g],k.supplyLayoutDefaults&&k.supplyLayoutDefaults(b,a,c)};E.purge=function(b){var a=b._fullLayout||
{};void 0!==a._glcontainer&&(a._glcontainer.selectAll(".gl-canvas").remove(),a._glcontainer.remove(),a._glcanvas=null);a._modeBar&&a._modeBar.destroy();b._transitionData&&(b._transitionData._interruptCallbacks&&(b._transitionData._interruptCallbacks.length=0),b._transitionData._animationRaf&&window.cancelAnimationFrame(b._transitionData._animationRaf));w.clearThrottle();w.clearResponsive(b);delete b.data;delete b.layout;delete b._fullData;delete b._fullLayout;delete b.calcdata;delete b.framework;
delete b.empty;delete b.fid;delete b.undoqueue;delete b.undonum;delete b.autoplay;delete b.changed;delete b._promises;delete b._redrawTimer;delete b._hmlumcount;delete b._hmpixcount;delete b._transitionData;delete b._transitioning;delete b._initialAutoSize;delete b._transitioningWithDuration;delete b._dragging;delete b._dragged;delete b._dragdata;delete b._hoverdata;delete b._snapshotInProgress;delete b._editing;delete b._mouseDownTime;delete b._legendMouseDownTime;b.removeAllListeners&&b.removeAllListeners()};
E.style=function(b){var a=b._fullLayout._visibleModules,c=[],d;for(d=0;d<a.length;d++){var e=a[d];e.style&&w.pushUnique(c,e.style)}for(d=0;d<c.length;d++)c[d](b)};E.sanitizeMargins=function(b){if(b&&b.margin){var a=b.width,c=b.height;b=b.margin;var d=c-(b.t+b.b);0>a-(b.l+b.r)&&(a=(a-1)/(b.l+b.r),b.l=Math.floor(a*b.l),b.r=Math.floor(a*b.r));0>d&&(a=(c-1)/(b.t+b.b),b.t=Math.floor(a*b.t),b.b=Math.floor(a*b.b))}};E.clearAutoMarginIds=function(b){b._fullLayout._pushmarginIds={}};E.allowAutoMargin=function(b,
a){b._fullLayout._pushmarginIds[a]=1};E.autoMargin=function(b,a,c){var d=b._fullLayout,e=d._pushmargin,f=d._pushmarginIds;if(!1!==d.margin.autoexpand){if(c){var g=c.pad;void 0===g&&(g=d.margin,g=Math.min(12,g.l,g.r,g.t,g.b));c.l+c.r>.5*d.width&&(w.log("Margin push",a,"is too big in x, dropping"),c.l=c.r=0);c.b+c.t>.5*d.height&&(w.log("Margin push",a,"is too big in y, dropping"),c.b=c.t=0);e[a]={l:{val:void 0!==c.xl?c.xl:c.x,size:c.l+g},r:{val:void 0!==c.xr?c.xr:c.x,size:c.r+g},b:{val:void 0!==c.yb?
c.yb:c.y,size:c.b+g},t:{val:void 0!==c.yt?c.yt:c.y,size:c.t+g}};f[a]=1}else delete e[a],delete f[a];if(!d._replotting)return E.doAutoMargin(b)}};E.doAutoMargin=function(b){var a=b._fullLayout;a._size||(a._size={});g(a);var d=a._size,e=a.margin,f=w.extendFlat({},d),h=e.l,k=e.r,l=e.t,m=e.b,t=a.width,n=a.height,u=a._pushmargin,p=a._pushmarginIds;if(!1!==a.margin.autoexpand){for(var q in u)p[q]||delete u[q];u.base={l:{val:0,size:h},r:{val:1,size:k},t:{val:1,size:l},b:{val:0,size:m}};for(var v in u){var x=
u[v].l||{},z=u[v].b||{};q=x.val;x=x.size;var y=z.val;z=z.size;for(var A in u){if(c(x)&&u[A].r){var B=u[A].r.val,C=u[A].r.size;if(B>q){var D=(x*B+(C-t)*q)/(B-q);B=(C*(1-q)+(x-t)*(1-B))/(B-q);0<=D&&0<=B&&0<t-(D+B)&&D+B>h+k&&(h=D,k=B)}}c(z)&&u[A].t&&(B=u[A].t.val,C=u[A].t.size,B>y&&(D=(z*B+(C-n)*y)/(B-y),B=(C*(1-y)+(z-n)*(1-B))/(B-y),0<=D&&0<=B&&0<n-(B+D)&&D+B>m+l&&(m=D,l=B)))}}}d.l=Math.round(h);d.r=Math.round(k);d.t=Math.round(l);d.b=Math.round(m);d.p=Math.round(e.pad);d.w=Math.round(t)-d.l-d.r;d.h=
Math.round(n)-d.t-d.b;if(!a._replotting&&E.didMarginChange(f,d)){"_redrawFromAutoMarginCount"in a?a._redrawFromAutoMarginCount++:a._redrawFromAutoMarginCount=1;d=3*(1+Object.keys(p).length);if(a._redrawFromAutoMarginCount<d)return r.call("plot",b);w.warn("Too many auto-margin redraws.")}};var H="lrtbpwh".split("");E.didMarginChange=function(b,a){for(var d=0;d<H.length;d++){var e=H[d],f=b[e];e=a[e];if(!c(f)||1<Math.abs(e-f))return!0}return!1};E.graphJson=function(b,a,c,d,e){function f(b){if("function"===
typeof b)return null;if(w.isPlainObject(b)){var a={},d;for(d in b)if("function"!==typeof b[d]&&-1===["_","["].indexOf(d.charAt(0))){if("keepdata"===c){if("src"===d.substr(d.length-3))continue}else if("keepstream"===c){var e=b[d+"src"];if("string"===typeof e&&0<e.indexOf(":")&&!w.isPlainObject(b.stream))continue}else if("keepall"!==c&&(e=b[d+"src"],"string"===typeof e&&0<e.indexOf(":")))continue;a[d]=f(b[d])}return a}return Array.isArray(b)?b.map(f):w.isTypedArray(b)?w.simpleMap(b,w.identity):w.isJSDate(b)?
w.ms2DateTimeLocal(+b):b}(e&&a&&!b._fullData||e&&!a&&!b._fullLayout)&&E.supplyDefaults(b);var g=e?b._fullLayout:b.layout,h=(b._transitionData||{})._frames;e={data:((e?b._fullData:b.data)||[]).map(function(b){b=f(b);a&&delete b.fit;return b})};a||(e.layout=f(g));b.framework&&b.framework.isPolar&&(e=b.framework.getConfig());h&&(e.frames=f(h));return"object"===d?e:JSON.stringify(e)};E.modifyFrames=function(b,a){var c=b._transitionData._frames,d=b._transitionData._frameHash;for(b=0;b<a.length;b++){var e=
a[b];switch(e.type){case "replace":var f=e.value;var g=(c[e.index]||{}).name,h=f.name;c[e.index]=d[h]=f;h!==g&&(delete d[g],d[h]=f);break;case "insert":f=e.value;d[f.name]=f;c.splice(e.index,0,f);break;case "delete":f=c[e.index],delete d[f.name],c.splice(e.index,1)}}return Promise.resolve()};E.computeFrame=function(b,a){var c=b._transitionData._frameHash,d;if(!a)throw Error("computeFrame must be given a string frame name");a=c[a.toString()];if(!a)return!1;b=[a];for(d=[a.name];a.baseframe&&(a=c[a.baseframe.toString()])&&
-1===d.indexOf(a.name);)b.push(a),d.push(a.name);for(var e={};a=b.pop();)if(a.layout&&(e.layout=E.extendLayout(e.layout,a.layout)),a.data){e.data||(e.data=[]);d=a.traces;if(!d)for(d=[],c=0;c<a.data.length;c++)d[c]=c;e.traces||(e.traces=[]);for(c=0;c<a.data.length;c++){var f=d[c];if(void 0!==f&&null!==f){var g=e.traces.indexOf(f);-1===g&&(g=e.data.length,e.traces[g]=f);e.data[g]=E.extendTrace(e.data[g],a.data[c])}}}return e};E.recomputeFrameHash=function(b){var a=b._transitionData._frameHash={};b=
b._transitionData._frames;for(var c=0;c<b.length;c++){var d=b[c];d&&d.name&&(a[d.name]=d)}};E.extendObjectWithContainers=function(b,a,c){a=w.extendDeepNoArrays({},a||{});var d=w.expandObjectPaths(a);var e={};if(c&&c.length)for(a=0;a<c.length;a++){var f=w.nestedProperty(d,c[a]);var g=f.get();void 0===g?w.nestedProperty(e,c[a]).set(null):(f.set(null),w.nestedProperty(e,c[a]).set(g))}b=w.extendDeepNoArrays(b||{},d);if(c&&c.length)for(a=0;a<c.length;a++)if(f=w.nestedProperty(e,c[a]),d=f.get()){g=w.nestedProperty(b,
c[a]);var h=g.get();Array.isArray(h)||(h=[],g.set(h));for(f=0;f<d.length;f++){var k=d[f];h[f]=null===k?null:E.extendObjectWithContainers(h[f],k)}g.set(h)}return b};E.dataArrayContainers=["transforms","dimensions"];E.layoutArrayContainers=r.layoutArrayContainers;E.extendTrace=function(b,a){return E.extendObjectWithContainers(b,a,E.dataArrayContainers)};E.extendLayout=function(b,a){return E.extendObjectWithContainers(b,a,E.layoutArrayContainers)};E.transition=function(b,a,c,d,f,g){f={redraw:f.redraw};
var h={},k=[];f.prepareFn=function(){var e=Array.isArray(a)?a.length:0;e=d.slice(0,e);for(var f=0;f<e.length;f++){var g=e[f],l=b._fullData[g]._module;l&&(l.animatable&&(l=l.basePlotModule.name,h[l]||(h[l]=[]),h[l].push(g)),b.data[e[f]]=E.extendTrace(b.data[e[f]],a[f]))}e=w.expandObjectPaths(w.extendDeepNoArrays({},c));f=/^[xy]axis[0-9]*$/;for(var m in e)f.test(m)&&delete e[m].range;E.extendLayout(b.layout,e);delete b.calcdata;E.supplyDefaults(b);E.doCalcdata(b);if(m=w.expandObjectPaths(c)){e=b._fullLayout._plots;
for(var r in e){f=e[r];g=f.xaxis;l=f.yaxis;var t=g.range.slice(),n=l.range.slice(),u=null,p=null,q=null,v=null;Array.isArray(m[g._name+".range"])?u=m[g._name+".range"].slice():Array.isArray((m[g._name]||{}).range)&&(u=m[g._name].range.slice());Array.isArray(m[l._name+".range"])?p=m[l._name+".range"].slice():Array.isArray((m[l._name]||{}).range)&&(p=m[l._name].range.slice());t&&u&&(g.r2l(t[0])!==g.r2l(u[0])||g.r2l(t[1])!==g.r2l(u[1]))&&(q={xr0:t,xr1:u});n&&p&&(l.r2l(n[0])!==l.r2l(p[0])||l.r2l(n[1])!==
l.r2l(p[1]))&&(v={yr0:n,yr1:p});(q||v)&&k.push(w.extendFlat({plotinfo:f},q,v))}}return Promise.resolve()};f.runFn=function(a){var d=b._fullLayout._basePlotModules;var e=k.length,f;if(c)for(f=0;f<d.length;f++)d[f].transitionAxes&&d[f].transitionAxes(b,k,g,a);e?(d=w.extendFlat({},g),d.duration=0,delete h.cartesian):d=g;for(var l in h)e=h[l],b._fullData[e[0]]._module.basePlotModule.plot(b,e,d,a)};return e(b,g,f)};E.transitionFromReact=function(b,a,c,d){var f=b._fullLayout,g=f.transition,h={},k=[];h.prepareFn=
function(){var b=f._plots;h.redraw=!1;"some"===a.anim&&(h.redraw=!0);"some"===c.anim&&(h.redraw=!0);for(var e in b){var g=b[e],l=g.xaxis,m=g.yaxis,r=d[l._name].range.slice(),t=d[m._name].range.slice(),n=l.range.slice(),u=m.range.slice();l.setScale();m.setScale();var p=null,q=null;if(l.r2l(r[0])!==l.r2l(n[0])||l.r2l(r[1])!==l.r2l(n[1]))p={xr0:r,xr1:n};if(m.r2l(t[0])!==m.r2l(u[0])||m.r2l(t[1])!==m.r2l(u[1]))q={yr0:t,yr1:u};(p||q)&&k.push(w.extendFlat({plotinfo:g},p,q))}return Promise.resolve()};h.runFn=
function(c){function d(){for(var a=0;a<h.length;a++)h[a].transitionAxes&&h[a].transitionAxes(b,k,l,c)}function e(){for(var a=0;a<h.length;a++)h[a].plot(b,r,m,c)}for(var f=b._fullData,h=b._fullLayout._basePlotModules,l,m,r,t=[],n=0;n<f.length;n++)t.push(n);k.length&&a.anim?"traces first"===g.ordering?(l=w.extendFlat({},g,{duration:0}),r=t,m=g,setTimeout(d,g.duration),e()):(l=g,r=null,m=w.extendFlat({},g,{duration:0}),setTimeout(e,l.duration),d()):k.length?(l=g,d()):a.anim&&(r=t,m=g,e())};return e(b,
g,h)};E.doCalcdata=function(b,a){function c(a){v=g[a];k=v._module;if(!0===v.visible&&v.transforms)for(k&&k.calc&&(a=k.calc(b,v),a[0]&&a[0].t&&a[0].t._scene&&delete a[0].t._scene.dirty),n=0;n<v.transforms.length;n++)a=v.transforms[n],(k=F[a.type])&&k.calcTransform&&(x=v._hasCalcTransform=!0,k.calcTransform(b,v,a))}function d(a,c){v=g[a];k=v._module;if(!!k.isContainer===c){c=[];if(!0===v.visible&&0!==v._length){delete v._indexToPoints;var d=v.transforms||[];for(n=d.length-1;0<=n;n--)if(d[n].enabled){v._indexToPoints=
d[n]._indexToPoints;break}k&&k.calc&&(c=k.calc(b,v))}Array.isArray(c)&&c[0]||(c=[{x:A,y:A}]);c[0].t||(c[0].t={});c[0].trace=v;p[a]=c}}var e=z.list(b),g=b._fullData,h=b._fullLayout,k,m,n,p=Array(g.length),q=(b.calcdata||[]).slice();b.calcdata=p;h._numBoxes=0;h._numViolins=0;h._violinScaleGroupStats={};b._hmpixcount=0;b._hmlumcount=0;h._piecolormap={};h._sunburstcolormap={};h._treemapcolormap={};h._funnelareacolormap={};for(m=0;m<g.length;m++)Array.isArray(a)&&-1===a.indexOf(m)&&(p[m]=q[m]);for(m=0;m<
g.length;m++){var v=g[m];v._arrayAttrs=u.findArrayAttributes(v);v._extremes={}}a=h._subplots.polar||[];for(m=0;m<a.length;m++)e.push(h[a[m]].radialaxis,h[a[m]].angularaxis);for(var w in h._colorAxes)m=h[w],!1!==m.cauto&&(delete m.cmin,delete m.cmax);var x=!1;l(e,g,h);for(m=0;m<g.length;m++)d(m,!0);for(m=0;m<g.length;m++)c(m);x&&l(e,g,h);for(m=0;m<g.length;m++)d(m,!0);for(m=0;m<g.length;m++)d(m,!1);f(b);e=t(e,b);if(e.length){h._numBoxes=0;for(m=h._numViolins=0;m<e.length;m++)d(e[m],!0);for(m=0;m<e.length;m++)d(e[m],
!1);f(b)}r.getComponentMethod("fx","calc")(b);r.getComponentMethod("errorbars","calc")(b)};var K=/(total|sum|min|max|mean|median) (ascending|descending)/;E.rehover=function(b){b._fullLayout._rehover&&b._fullLayout._rehover()};E.redrag=function(b){b._fullLayout._redrag&&b._fullLayout._redrag()};E.generalUpdatePerTraceModule=function(b,a,c,d){var e=a.traceHash,f={},g;for(g=0;g<c.length;g++){var h=c[g],k=h[0].trace;k.visible&&(f[k.type]=f[k.type]||[],f[k.type].push(h))}for(var l in e)f[l]||(c=e[l][0],
c[0].trace.visible=!1,f[l]=[c]);for(var m in f)e=f[m],e[0][0].trace._module.plot(b,a,w.filterVisible(e),d);a.traceHash=f};E.plotBasePlot=function(b,a,c,d,e){b=r.getModule(b);c=B(a.calcdata,b)[0];b.plot(a,c,d,e)};E.cleanBasePlot=function(b,a,c,d,e){a=e._has&&e._has(b);c=c._has&&c._has(b);a&&!c&&e["_"+b+"layer"].selectAll("g.trace").remove()}},{"../components/color":591,"../constants/numerical":692,"../lib":716,"../plot_api/plot_schema":753,"../plot_api/plot_template":754,"../plots/get_data":799,"../registry":845,
"./animation_attributes":759,"./attributes":761,"./cartesian/axis_ids":767,"./command":788,"./font_attributes":790,"./frame_attributes":791,"./layout_attributes":816,d3:165,"fast-isnumeric":228}],826:[function(a,q,p){q.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:"draglayer plotbg backplot angular-grid radial-grid frontplot angular-line radial-line angular-axis radial-axis".split(" "),radialDragBoxSize:50,
angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],827:[function(a,q,p){function n(b,a,d,e){var c=e[0];e=e[1];var f=h(Math.sin(a)-Math.sin(b));b=h(Math.cos(a)-Math.cos(b));d=Math.tan(d);var g=h(1/d),k=f/b;a=e-k*c;g?f&&b?(f=a/(d-k),c=d*f):b?(f=e*g,c=e):(f=c,c*=d):f&&b?(f=0,c=a):b?(f=0,c=e):f=c=NaN;return[f,c]}function k(b,a,e,f){function c(a,c,d){return n(a,c,d,[b*Math.cos(a),b*Math.sin(a)])}var h=f.length,k=[];var m=t(f,function(b){return l(b,[a,e])?d(b,a):
Infinity});var r=c(f[m],f[g.mod(m-1,h)],a);k.push(r);for(r=0;r<h;m++,r++){var u=f[g.mod(m,h)];if(!l(u,[a,e]))break;k.push([b*Math.cos(u),b*Math.sin(u)])}m=t(f,function(b){return l(b,[a,e])?d(b,e):Infinity});f=c(f[m],f[g.mod(m+1,h)],e);k.push(f);k.push([0,0]);k.push(k[0].slice());return k}function m(b,a,d,e){if(g.isFullCircle([a,d])){a=e.length;d=Array(a+1);var c;for(c=0;c<a;c++){var f=e[c];d[c]=[b*Math.cos(f),b*Math.sin(f)]}d[c]=d[0].slice();b=d}else b=k(b,a,d,e);return b}function h(b){return 1E-10<
Math.abs(b)?b:0}function b(b,a,d){a=a||0;d=d||0;for(var c=b.length,e=Array(c),f=0;f<c;f++){var g=b[f];e[f]=[a+g[0],d-g[1]]}return e}var g=a("../../lib"),e=a("../../lib/polygon").tester,t=g.findIndexOfMin,l=g.isAngleInsideSector,f=g.angleDelta,d=g.angleDist;q.exports={isPtInsidePolygon:function(b,a,d,f,g){if(!l(a,f))return!1;if(d[0]<d[1]){var c=d[0];d=d[1]}else c=d[1],d=d[0];c=e(m(c,f[0],f[1],g));f=e(m(d,f[0],f[1],g));b=[b*Math.cos(a),b*Math.sin(a)];return f.contains(b)&&!c.contains(b)},findPolygonOffset:function(b,
a,d,e){var c=Infinity,f=Infinity;b=m(b,a,d,e);for(a=0;a<b.length;a++)d=b[a],c=Math.min(c,d[0]),f=Math.min(f,-d[1]);return[c,f]},findEnclosingVertexAngles:function(b,a){var c=t(a,function(a){a=f(a,b);return 0<a?a:Infinity}),d=g.mod(c+1,a.length);return[a[c],a[d]]},findIntersectionXY:n,findXYatLength:function(b,a,d,e){var c=-a*d,f=a*a+1,g=2*(a*c-d);d=Math.sqrt(g*g-4*f*(c*c+d*d-b*b));b=(-g+d)/(2*f);f=(-g-d)/(2*f);return[[b,a*b+c+e],[f,a*f+c+e]]},clampTiny:h,pathPolygon:function(a,d,e,f,g,h){a=m(a,d,
e,f);return"M"+b(a,g,h).join("L")},pathPolygonAnnulus:function(a,d,e,f,g,h,k){if(a<d){var c=a;a=d}else c=d;c=b(m(c,e,f,g),h,k);return"M"+b(m(a,e,f,g),h,k).reverse().join("L")+"M"+c.join("L")}}},{"../../lib":716,"../../lib/polygon":728}],828:[function(a,q,p){var n=a("../get_data").getSubplotCalcData,k=a("../../lib").counterRegex,m=a("./polar"),h=a("./constants");p=h.attr;var b=h.name;k=k(b);h={};h[p]={valType:"subplotid",dflt:b,editType:"calc"};q.exports={attr:p,name:b,idRoot:b,idRegex:k,attrRegex:k,
attributes:h,layoutAttributes:a("./layout_attributes"),supplyLayoutDefaults:a("./layout_defaults"),plot:function(a){for(var e=a._fullLayout,g=a.calcdata,h=e._subplots[b],f=0;f<h.length;f++){var d=h[f],c=n(g,b,d),k=e[d]._subplot;k||(k=m(a,d),e[d]._subplot=k);k.plot(c,e,a._promises)}},clean:function(a,e,h,k){a=k._subplots[b]||[];h=k._has&&k._has("gl");var f=e._has&&e._has("gl");h=h&&!f;for(f=0;f<a.length;f++){var d=a[f],c=k[d]._subplot;if(!e[d]&&c){c.framework.remove();c.layers["radial-axis-title"].remove();
for(var g in c.clipPaths)c.clipPaths[g].remove()}h&&c._scene&&(c._scene.destroy(),c._scene=null)}},toSVG:a("../cartesian").toSVG}},{"../../lib":716,"../cartesian":775,"../get_data":799,"./constants":826,"./layout_attributes":829,"./layout_defaults":830,"./polar":837}],829:[function(a,q,p){p=a("../../components/color/attributes");var n=a("../cartesian/layout_attributes"),k=a("../domain").attributes,m=a("../../lib").extendFlat,h=a("../../plot_api/edit_types").overrideAll;a=h({color:n.color,showline:m({},
n.showline,{dflt:!0}),linecolor:n.linecolor,linewidth:n.linewidth,showgrid:m({},n.showgrid,{dflt:!0}),gridcolor:n.gridcolor,gridwidth:n.gridwidth},"plot","from-root");h=h({tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:n.ticks,ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,showtickprefix:n.showtickprefix,tickprefix:n.tickprefix,showticksuffix:n.showticksuffix,ticksuffix:n.ticksuffix,showexponent:n.showexponent,
exponentformat:n.exponentformat,separatethousands:n.separatethousands,tickfont:n.tickfont,tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,layer:n.layer},"plot","from-root");var b={visible:m({},n.visible,{dflt:!0}),type:m({},n.type,{values:["-","linear","log","date","category"]}),autorange:m({},n.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:m({},n.range,{items:[{valType:"any",
editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:n.categoryorder,categoryarray:n.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:m({},n.title.text,{editType:"plot",dflt:""}),font:m({},n.title.font,{editType:"plot"}),editType:"plot"},hoverformat:n.hoverformat,uirevision:{valType:"any",editType:"none"},
editType:"calc",_deprecated:{title:n._deprecated.title,titlefont:n._deprecated.titlefont}};m(b,a,h);n={visible:m({},n.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},categoryorder:n.categoryorder,categoryarray:n.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],
dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:n.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};m(n,a,h);q.exports={domain:k({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:p.background},radialaxis:b,angularaxis:n,
gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":590,"../../lib":716,"../../plot_api/edit_types":747,"../cartesian/layout_attributes":776,"../domain":789}],830:[function(a,q,p){function n(a,g,r,n){function p(b,a){return r(A+"."+b,a)}var q=r("bgcolor");n.bgColor=h.combine(q,n.paper_bgcolor);q=r("sector");r("hole");for(var x=e(n.fullData,w.name,n.id),z=n.layoutOut,
A,C=0;C<y.length;C++){A=y[C];m.isPlainObject(a[A])||(a[A]={});var J=a[A],H=b.newContainer(g,A);H._id=H._name=A;H._attr=n.id+"."+A;H._traceIndices=x.map(function(b){return b._expandedIndex});var K=w.axisName2dataArray[A],M=k(J,H,p,x,K);d(J,H,p,{axData:x,dataAttr:K});K=p("visible");v(H,g,z);p("uirevision",g.uirevision);if(K){var I=p("color");var N=I===J.color?I:n.font.color}H._m=1;switch(A){case "radialaxis":var O=p("autorange",!H.isValidRange(J.range));J.autorange=O;!O||"linear"!==M&&"-"!==M||p("rangemode");
"reversed"===O&&(H._m=-1);p("range");H.cleanRange("range",{dfltRange:[0,1]});K&&(p("side"),p("angle",q[0]),p("title.text"),m.coerceFont(p,"title.font",{family:n.font.family,size:Math.round(1.2*n.font.size),color:N}));break;case "angularaxis":if("date"===M){m.log("Polar plots do not support date angular axes yet.");for(M=0;M<x.length;M++)x[M].visible=!1;M=J.type=H.type="linear"}"linear"===M?p("thetaunit"):p("period");O=p("direction");p("rotation",{counterclockwise:0,clockwise:90}[O])}K&&(t(J,H,p,H.type),
f(J,H,p,H.type,{tickSuffixDflt:"degrees"===H.thetaunit?"":void 0}),l(J,H,p,{outerTicks:!0}),p("showticklabels")&&(m.coerceFont(p,"tickfont",{family:n.font.family,size:n.font.size,color:N}),p("tickangle"),p("tickformat")),c(J,H,p,{dfltColor:I,bgColor:n.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:u[A]}),p("layer"));"category"!==M&&p("hoverformat");H._input=J}"category"===g.angularaxis.type&&r("gridshape")}function k(b,a,c,d,e){if("-"===c("type")){for(c=0;c<d.length;c++)if(d[c].visible){var f=
d[c];break}f&&f[e]&&(a.type=r(f[e],"gregorian"));"-"===a.type?a.type="linear":b.type=a.type}return a.type}var m=a("../../lib"),h=a("../../components/color"),b=a("../../plot_api/plot_template"),g=a("../subplot_defaults"),e=a("../get_data").getSubplotData,t=a("../cartesian/tick_value_defaults"),l=a("../cartesian/tick_mark_defaults"),f=a("../cartesian/tick_label_defaults"),d=a("../cartesian/category_order_defaults"),c=a("../cartesian/line_grid_defaults"),r=a("../cartesian/axis_autotype"),u=a("./layout_attributes"),
v=a("./set_convert"),w=a("./constants"),y=w.axisNames;q.exports=function(b,a,c){g(b,a,c,{type:w.name,attributes:u,handleDefaults:n,font:a.font,paper_bgcolor:a.paper_bgcolor,fullData:c,layoutOut:a})}},{"../../components/color":591,"../../lib":716,"../../plot_api/plot_template":754,"../cartesian/axis_autotype":765,"../cartesian/category_order_defaults":768,"../cartesian/line_grid_defaults":778,"../cartesian/tick_label_defaults":783,"../cartesian/tick_mark_defaults":784,"../cartesian/tick_value_defaults":785,
"../get_data":799,"../subplot_defaults":839,"./constants":826,"./layout_attributes":829,"./set_convert":838}],831:[function(a,q,p){p=a("../../../traces/scatter/attributes");var n=p.marker;a=a("../../../lib/extend").extendFlat;q.exports={r:a({},p.r,{}),t:a({},p.t,{}),marker:{color:a({},n.color,{}),size:a({},n.size,{}),symbol:a({},n.symbol,{}),opacity:a({},n.opacity,{}),editType:"calc"}}},{"../../../lib/extend":707,"../../../traces/scatter/attributes":1119}],832:[function(a,q,p){function n(a,h){return k({},
h,{showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number",description:"Legacy polar charts are deprecated! Please switch to *polar* subplots."},visible:{valType:"boolean"}})}p=a("../../cartesian/layout_attributes");var k=a("../../../lib/extend").extendFlat;a=a("../../../plot_api/edit_types").overrideAll;
p=k({},p.domain,{});q.exports=a({radialaxis:n("radial",{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:p,orientation:{valType:"number"}}),angularaxis:n("angular",{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:p}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested")},{"../../../lib/extend":707,"../../../plot_api/edit_types":747,"../../cartesian/layout_attributes":776}],
833:[function(a,q,p){(q.exports=a("./micropolar")).manager=a("./micropolar_manager")},{"./micropolar":834,"./micropolar_manager":835}],834:[function(a,q,p){var n=a("d3"),k=a("../../../lib").extendDeepAll,m=a("../../../constants/alignment").MID_SHIFT,h=q.exports={version:"0.2.2"};h.Axis=function(){function b(b){f=b||f;b=a.data;var d=a.layout;if("string"==typeof f||f.nodeName)f=n.select(f);f.datum(b).each(function(b,a){b=b.slice();t={data:h.util.cloneJson(b),layout:h.util.cloneJson(d)};var e=0;b.forEach(function(b,
a){b.color||(b.color=d.defaultColorRange[e],e=(e+1)%d.defaultColorRange.length);b.strokeColor||(b.strokeColor="LinePlot"===b.geometry?b.color:n.rgb(b.color).darker().toString());t.data[a].color=b.color;t.data[a].strokeColor=b.strokeColor;t.data[a].strokeDash=b.strokeDash;t.data[a].strokeSize=b.strokeSize});b=b.filter(function(b,a){b=b.visible;return"undefined"===typeof b||!0===b});var f=!1;a=b.map(function(b,a){f=f||"undefined"!==typeof b.groupId;return b});if(f){var g=[];b=n.nest().key(function(b,
a){return"undefined"!=typeof b.groupId?b.groupId:"unstacked"}).entries(a).map(function(b,a){if("unstacked"!==b.key){var c=b.values[0].r.map(function(b,a){return 0});b.values.forEach(function(b,a,d){b.yStack=[c];g.push(c);c=h.util.sumArrays(b.r,c)})}return b.values});b=n.merge(b)}b.forEach(function(b,a){b.t=Array.isArray(b.t[0])?b.t:[b.t];b.r=Array.isArray(b.r[0])?b.r:[b.r]});var u=Math.min(d.width-d.margin.left-d.margin.right,d.height-d.margin.top-d.margin.bottom)/2;u=Math.max(10,u);var p=[d.margin.left+
u,d.margin.top+u];a=f?[0,n.max(h.util.sumArrays(h.util.arrayLast(b).r[0],h.util.arrayLast(g)))]:n.extent(h.util.flattenArray(b.map(function(b,a){return b.r})));d.radialAxis.domain!=h.DATAEXTENT&&(a[0]=0);c=n.scale.linear().domain(d.radialAxis.domain!=h.DATAEXTENT&&d.radialAxis.domain?d.radialAxis.domain:a).range([0,u]);t.layout.radialAxis.domain=c.domain();var q=h.util.flattenArray(b.map(function(b,a){return b.t})),v="string"===typeof q[0];if(v){q=h.util.deduplicate(q);var w=q.slice();q=n.range(q.length);
b=b.map(function(b,a){b.t=[q];f&&(b.yStack=b.yStack);return b})}var y=b.filter(function(b,a){return"LinePlot"===b.geometry||"DotPlot"===b.geometry}).length===b.length;a=null===d.needsEndSpacing?v||!y:d.needsEndSpacing;var A=d.angularAxis.domain&&d.angularAxis.domain!=h.DATAEXTENT&&!v&&0<=d.angularAxis.domain[0]?d.angularAxis.domain:n.extent(q),H=Math.abs(q[1]-q[0]);y&&!v&&(H=0);A=A.slice();a&&v&&(A[1]+=H);y=d.angularAxis.ticksCount||4;8<y&&(y=y/(y/8)+y%8);d.angularAxis.ticksStep&&(y=(A[1]-A[0])/y);
y=d.angularAxis.ticksStep||(A[1]-A[0])/(y*(d.minorTicks+1));w&&(y=Math.max(Math.round(y),1));A[2]||(A[2]=y);y=n.range.apply(this,A);y=y.map(function(b,a){return parseFloat(b.toPrecision(12))});r=n.scale.linear().domain(A.slice(0,2)).range("clockwise"===d.direction?[0,360]:[360,0]);t.layout.angularAxis.domain=r.domain();t.layout.angularAxis.endPadding=a?H:0;l=n.select(this).select("svg.chart-root");if("undefined"===typeof l||l.empty())a=(new DOMParser).parseFromString("\x3csvg xmlns\x3d'http://www.w3.org/2000/svg' class\x3d'chart-root'\x3e' + '\x3cg class\x3d'outer-group'\x3e' + '\x3cg class\x3d'chart-group'\x3e' + '\x3ccircle class\x3d'background-circle'\x3e\x3c/circle\x3e' + '\x3cg class\x3d'geometry-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'radial axis-group'\x3e' + '\x3ccircle class\x3d'outside-circle'\x3e\x3c/circle\x3e' + '\x3c/g\x3e' + '\x3cg class\x3d'angular axis-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'guides-group'\x3e\x3cline\x3e\x3c/line\x3e\x3ccircle r\x3d'0'\x3e\x3c/circle\x3e\x3c/g\x3e' + '\x3c/g\x3e' + '\x3cg class\x3d'legend-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'tooltips-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'title-group'\x3e\x3ctext\x3e\x3c/text\x3e\x3c/g\x3e' + '\x3c/g\x3e' + '\x3c/svg\x3e",
"application/xml"),a=this.appendChild(this.ownerDocument.importNode(a.documentElement,!0)),l=n.select(a);l.select(".guides-group").style({"pointer-events":"none"});l.select(".angular.axis-group").style({"pointer-events":"none"});l.select(".radial.axis-group").style({"pointer-events":"none"});a=l.select(".chart-group");A={fill:"none",stroke:d.tickColor};var K={"font-size":d.font.size,"font-family":d.font.family,fill:d.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(b,
a){return" "+b+" 0 "+d.font.outlineColor}).join(",")};if(d.showLegend){H=l.select(".legend-group").attr({transform:"translate("+[u,d.margin.top]+")"}).style({display:"block"});var M=b.map(function(b,a){a=h.util.cloneJson(b);a.symbol="DotPlot"===b.geometry?b.dotType||"circle":"LinePlot"!=b.geometry?"square":"line";a.visibleInLegend="undefined"===typeof b.visibleInLegend||b.visibleInLegend;a.color="LinePlot"===b.geometry?b.strokeColor:b.color;return a});h.Legend().config({data:b.map(function(b,a){return b.name||
"Element"+a}),legendConfig:k({},h.Legend.defaultConfig().legendConfig,{container:H,elements:M,reverseOrder:d.legend.reverseOrder})})();M=H.node().getBBox();u=Math.min(d.width-M.width-d.margin.left-d.margin.right,d.height-d.margin.top-d.margin.bottom)/2;u=Math.max(10,u);p=[d.margin.left+u,d.margin.top+u];c.range([0,u]);t.layout.radialAxis.domain=c.domain();H.attr("transform","translate("+[p[0]+u,p[1]-u]+")")}else H=l.select(".legend-group").style({display:"none"});l.attr({width:d.width,height:d.height}).style({opacity:d.opacity});
a.attr("transform","translate("+p+")").style({cursor:"crosshair"});var I=[(d.width-(d.margin.left+d.margin.right+2*u+(M?M.width:0)))/2,(d.height-(d.margin.top+d.margin.bottom+2*u))/2];I[0]=Math.max(0,I[0]);I[1]=Math.max(0,I[1]);l.select(".outer-group").attr("transform","translate("+I+")");if(d.title&&d.title.text){M=l.select("g.title-group text").style(K).text(d.title.text);var N=M.node().getBBox();M.attr({x:p[0]-N.width/2,y:p[1]-u-20})}M=l.select(".radial.axis-group");d.radialAxis.gridLinesVisible&&
(N=M.selectAll("circle.grid-circle").data(c.ticks(5)),N.enter().append("circle").attr({"class":"grid-circle"}).style(A),N.attr("r",c),N.exit().remove());M.select("circle.outside-circle").attr({r:u}).style(A);var O=l.select("circle.background-circle").attr({r:u}).style({fill:d.backgroundColor,stroke:d.stroke});d.radialAxis.visible&&(N=n.svg.axis().scale(c).ticks(5).tickSize(5),M.call(N).attr({transform:"rotate("+d.radialAxis.orientation+")"}),M.selectAll(".domain").style(A),M.selectAll("g\x3etext").text(function(b,
a){return this.textContent+d.radialAxis.ticksSuffix}).style(K).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(b,a){return"horizontal"===d.radialAxis.tickOrientation?"rotate("+-d.radialAxis.orientation+") translate("+[0,K["font-size"]]+")":"translate("+[0,K["font-size"]]+")"}}),M.selectAll("g\x3eline").style({stroke:"black"}));M=l.select(".angular.axis-group").selectAll("g.angular-tick").data(y);y=M.enter().append("g").classed("angular-tick",!0);M.attr({transform:function(b,
a){return"rotate("+(r(b)%360+d.orientation)+")"}}).style({display:d.angularAxis.visible?"block":"none"});M.exit().remove();y.append("line").classed("grid-line",!0).classed("major",function(b,a){return 0==a%(d.minorTicks+1)}).classed("minor",function(b,a){return 0!=a%(d.minorTicks+1)}).style(A);y.selectAll(".minor").style({stroke:d.minorTickColor});M.select("line.grid-line").attr({x1:d.tickLength?u-d.tickLength:0,x2:u}).style({display:d.angularAxis.gridLinesVisible?"block":"none"});y.append("text").classed("axis-text",
!0).style(K);M=M.select("text.axis-text").attr({x:u+d.labelOffset,dy:m+"em",transform:function(b,a){b=r(b)%360+d.orientation;a=u+d.labelOffset;var c=d.angularAxis.tickOrientation;return"horizontal"==c?"rotate("+-b+" "+a+" 0)":"radial"==c?270>b&&90<b?"rotate(180 "+a+" 0)":null:"rotate("+(180>=b&&0<b?-90:90)+" "+a+" 0)"}}).style({"text-anchor":"middle",display:d.angularAxis.labelsVisible?"block":"none"}).text(function(b,a){return 0!=a%(d.minorTicks+1)?"":w?w[b]+d.angularAxis.ticksSuffix:b+d.angularAxis.ticksSuffix}).style(K);
d.angularAxis.rewriteTicks&&M.text(function(b,a){return 0!=a%(d.minorTicks+1)?"":d.angularAxis.rewriteTicks(this.textContent,a)});M=n.max(a.selectAll(".angular-tick text")[0].map(function(b,a){return b.getCTM().e+b.getBBox().width}));H.attr({transform:"translate("+[u+M,d.margin.top]+")"});M=0<l.select("g.geometry-group").selectAll("g").size();var P=l.select("g.geometry-group").selectAll("g.geometry").data(b);P.enter().append("g").attr({"class":function(b,a){return"geometry geometry"+a}});P.exit().remove();
if(b[0]||M){var Q=[];b.forEach(function(b,a){var e={};e.radialScale=c;e.angularScale=r;e.container=P.filter(function(b,c){return c==a});e.geometry=b.geometry;e.orientation=d.orientation;e.direction=d.direction;e.index=a;Q.push({data:b,geometryConfig:e})});var T=[];n.nest().key(function(b,a){return"undefined"!=typeof b.data.groupId||"unstacked"}).entries(Q).forEach(function(b,a){"unstacked"===b.key?T=T.concat(b.values.map(function(b,a){return[b]})):T.push(b.values)});T.forEach(function(b,a){var c=
Array.isArray(b)?b[0].geometryConfig.geometry:b.geometryConfig.geometry;b=b.map(function(b,a){return k(h[c].defaultConfig(),b)});h[c]().config(b)()})}var V=l.select(".guides-group");b=l.select(".tooltips-group");var Y=h.tooltipPanel().config({container:b,fontSize:8})(),ca=h.tooltipPanel().config({container:b,fontSize:8})(),Z=h.tooltipPanel().config({container:b,hasTick:!0})(),R,U;if(!v){var X=V.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});a.on("mousemove.angular-guide",
function(b,a){b=h.util.getMousePos(O).angle;X.attr({x2:-u,transform:"rotate("+b+")"}).style({opacity:.5});R=r.invert((b+180+360-d.orientation)%360);b=h.util.convertToCartesian(u+12,b+180);Y.text(h.util.round(R)).move([b[0]+p[0],b[1]+p[1]])}).on("mouseout.angular-guide",function(b,a){V.select("line").style({opacity:0})})}var ea=V.select("circle").style({stroke:"grey",fill:"none"});a.on("mousemove.radial-guide",function(b,a){b=h.util.getMousePos(O).radius;ea.attr({r:b}).style({opacity:.5});U=c.invert(h.util.getMousePos(O).radius);
b=h.util.convertToCartesian(b,d.radialAxis.orientation);ca.text(h.util.round(U)).move([b[0]+p[0],b[1]+p[1]])}).on("mouseout.radial-guide",function(b,a){ea.style({opacity:0});Z.hide();Y.hide();ca.hide()});l.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(b,a){var c=n.select(this);a=this.style.fill;c.attr({"data-opacity":this.style.opacity||1});if(a&&"none"!==a){c.attr({"data-fill":a});a=n.hsl(a).darker().toString();c.style({fill:a,opacity:1});c=h.util.round(b[0]);var d=h.util.round(b[1]);
v&&(c=w[b[0]]);b="t: "+c+", r: "+d;c=this.getBoundingClientRect();d=l.node().getBoundingClientRect();c=[c.left+c.width/2-I[0]-d.left,c.top+c.height/2-I[1]-d.top];Z.config({color:a}).text(b);Z.move(c)}else a=this.style.stroke||"black",c.attr({"data-stroke":a}),a=n.hsl(a).darker().toString(),c.style({stroke:a,opacity:1})}).on("mousemove.tooltip",function(b,a){if(0!=n.event.which)return!1;n.select(this).attr("data-fill")&&Z.show()}).on("mouseout.tooltip",function(b,a){Z.hide();b=n.select(this);(a=b.attr("data-fill"))?
b.style({fill:a,opacity:b.attr("data-opacity")}):b.style({stroke:b.attr("data-stroke"),opacity:b.attr("data-opacity")})})});return u}var a={data:[],layout:{}},e={},t={},l,f,d=n.dispatch("hover"),c,r,u={render:function(a){b(a);return this},config:function(b){if(!arguments.length)return a;var c=h.util.cloneJson(b);c.data.forEach(function(b,c){a.data[c]||(a.data[c]={});k(a.data[c],h.Axis.defaultConfig().data[0]);k(a.data[c],b)});k(a.layout,h.Axis.defaultConfig().layout);k(a.layout,c.layout);return this},
getLiveConfig:function(){return t},getinputConfig:function(){return e},radialScale:function(b){return c},angularScale:function(b){return r},svg:function(){return l}};n.rebind(u,d,"on");return u};h.Axis.defaultConfig=function(b,a){return{data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:n.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,
bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",
backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}}};h.util={};h.DATAEXTENT="dataExtent";h.AREA="AreaChart";h.LINE="LinePlot";h.DOT="DotPlot";h.BAR="BarChart";h.util._override=function(b,a){for(var e in b)e in a&&(a[e]=b[e])};h.util._extend=function(b,a){for(var e in b)a[e]=b[e]};h.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)};h.util.dataFromEquation2=function(b,a){a=a||6;return n.range(0,360+a,a).map(function(a,
g){g=b(a*Math.PI/180);return[a,g]})};h.util.dataFromEquation=function(b,a,e){a=a||6;var g=[],h=[];n.range(0,360+a,a).forEach(function(a,d){d=b(a*Math.PI/180);g.push(a);h.push(d)});a={t:g,r:h};e&&(a.name=e);return a};h.util.ensureArray=function(b,a){if("undefined"===typeof b)return null;var e=[].concat(b);return n.range(a).map(function(b,a){return e[a]||e[0]})};h.util.fillArrays=function(b,a,e){a.forEach(function(a,g){b[a]=h.util.ensureArray(b[a],e)});return b};h.util.cloneJson=function(b){return JSON.parse(JSON.stringify(b))};
h.util.validateKeys=function(b,a){"string"===typeof a&&(a=a.split("."));var e=a.shift();return b[e]&&(!a.length||objHasKeys(b[e],a))};h.util.sumArrays=function(b,a){return n.zip(b,a).map(function(b,a){return n.sum(b)})};h.util.arrayLast=function(b){return b[b.length-1]};h.util.arrayEqual=function(b,a){for(var e=Math.max(b.length,a.length,1);0<=e--&&b[e]===a[e];);return-2===e};h.util.flattenArray=function(b){for(var a=[];!h.util.arrayEqual(a,b);)a=b,b=[].concat.apply([],b);return b};h.util.deduplicate=
function(b){return b.filter(function(b,a,h){return h.indexOf(b)==a})};h.util.convertToCartesian=function(b,a){a=a*Math.PI/180;return[b*Math.cos(a),b*Math.sin(a)]};h.util.round=function(b,a){a=Math.pow(10,a||2);return Math.round(b*a)/a};h.util.getMousePos=function(b){b=n.mouse(b.node());var a=b[0],e=b[1],h={};h.x=a;h.y=e;h.pos=b;h.angle=180*(Math.atan2(e,a)+Math.PI)/Math.PI;h.radius=Math.sqrt(a*a+e*e);return h};h.util.duplicatesCount=function(b){for(var a={},e,h={},k=0,f=b.length;k<f;k++)e=b[k],e in
a?(a[e]++,h[e]=a[e]):a[e]=1;return h};h.util.duplicates=function(b){return Object.keys(h.util.duplicatesCount(b))};h.util.translator=function(b,a,e,h){h&&(h=e.slice(),e=a,a=h);var g=a.reduce(function(b,a){if("undefined"!=typeof b)return b[a]},b);"undefined"!==typeof g&&(a.reduce(function(b,d,c){if("undefined"!=typeof b)return c===a.length-1&&delete b[d],b[d]},b),e.reduce(function(b,a,c){"undefined"===typeof b[a]&&(b[a]={});c===e.length-1&&(b[a]=g);return b[a]},b))};h.PolyChart=function(){function b(){var b=
a[0].geometryConfig,e=b.container;"string"==typeof e&&(e=n.select(e));e.datum(a).each(function(a,c){var d=!!a[0].data.yStack,e=a.map(function(b,a){return d?n.zip(b.data.t[0],b.data.r[0],b.data.yStack[0]):n.zip(b.data.t[0],b.data.r[0])}),f=b.angularScale,g=b.radialScale.domain()[0],h={bar:function(c,d,e){e=a[e].data;d=b.radialScale(c[1])-b.radialScale(0);c=b.radialScale(c[2]||0);e=e.barWidth;n.select(this).attr({"class":"mark bar",d:"M"+[[d+c,-e/2],[d+c,e/2],[c,e/2],[c,-e/2]].join("L")+"Z",transform:function(a,
c){return"rotate("+(b.orientation+f(a[0]))+")"}})},dot:function(c,d,e){var f=c[2]?[c[0],c[1]+c[2]]:c;c=n.svg.symbol().size(a[e].data.dotSize).type(a[e].data.dotType)(c,d);n.select(this).attr({"class":"mark dot",d:c,transform:function(a,c){a=b.radialScale(f[1]);c=(b.angularScale(f[0])+b.orientation)*Math.PI/180;return"translate("+[a*Math.cos(c),a*Math.sin(c)]+")"}})}},k=n.svg.line.radial().interpolate(a[0].data.lineInterpolation).radius(function(a){return b.radialScale(a[1])}).angle(function(a){return b.angularScale(a[0])*
Math.PI/180});h.line=function(c,d,f){var g=c[2]?e[f].map(function(b,a){return[b[0],b[1]+b[2]]}):e[f];n.select(this).each(h.dot).style({opacity:function(b,c){return+a[f].data.dotVisible},fill:p.stroke(c,d,f)}).attr({"class":"mark dot"});if(!(0<d)){var l=n.select(this.parentNode).selectAll("path.line").data([0]);l.enter().insert("path");l.attr({"class":"line",d:k(g),transform:function(a,c){return"rotate("+(b.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(b,a){return p.fill(c,d,
f)},"fill-opacity":0,stroke:function(b,a){return p.stroke(c,d,f)},"stroke-width":function(b,a){return p["stroke-width"](c,d,f)},"stroke-dasharray":function(b,a){return p["stroke-dasharray"](c,d,f)},opacity:function(b,a){return p.opacity(c,d,f)},display:function(b,a){return p.display(c,d,f)}})}};c=b.angularScale.range();var l=Math.abs(c[1]-c[0])/e[0].length*Math.PI/180,t=n.svg.arc().startAngle(function(b){return-l/2}).endAngle(function(b){return l/2}).innerRadius(function(a){return b.radialScale(g+
(a[2]||0))}).outerRadius(function(a){return b.radialScale(g+(a[2]||0))+b.radialScale(a[1])});h.arc=function(a,c,d){n.select(this).attr({"class":"mark arc",d:t,transform:function(a,c){return"rotate("+(b.orientation+f(a[0])+90)+")"}})};var p={fill:function(b,c,d){return a[d].data.color},stroke:function(b,c,d){return a[d].data.strokeColor},"stroke-width":function(b,c,d){return a[d].data.strokeSize+"px"},"stroke-dasharray":function(b,c,d){return m[a[d].data.strokeDash]},opacity:function(b,c,d){return a[d].data.opacity},
display:function(b,c,d){return"undefined"===typeof a[d].data.visible||a[d].data.visible?"block":"none"}};c=n.select(this).selectAll("g.layer").data(e);c.enter().append("g").attr({"class":"layer"});var q=c.selectAll("path.mark").data(function(b,a){return b});q.enter().append("path").attr({"class":"mark"});q.style(p).each(h[b.geometryType]);q.exit().remove();c.exit().remove()})}var a=[h.PolyChart.defaultConfig()],e=n.dispatch("hover"),m={solid:"none",dash:[5,2],dot:[2,5]};b.config=function(b){if(!arguments.length)return a;
b.forEach(function(b,d){a[d]||(a[d]={});k(a[d],h.PolyChart.defaultConfig());k(a[d],b)});return this};b.getColorScale=function(){};n.rebind(b,e,"on");return b};h.PolyChart.defaultConfig=function(){return{data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,
container:"body",radialScale:null,angularScale:null,colorScale:n.scale.category20()}}};h.BarChart=function(){return h.PolyChart()};h.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}};h.AreaChart=function(){return h.PolyChart()};h.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}};h.DotPlot=function(){return h.PolyChart()};h.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}};h.LinePlot=function(){return h.PolyChart()};
h.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}};h.Legend=function(){function b(){var e=a.legendConfig,g=a.data.map(function(b,a){return[].concat(b).map(function(b,c){var d=k({},e.elements[a]);d.name=b;d.color=[].concat(e.elements[a].color)[c];return d})}),f=n.merge(g);f=f.filter(function(b,a){return e.elements[a]&&(e.elements[a].visibleInLegend||"undefined"===typeof e.elements[a].visibleInLegend)});e.reverseOrder&&(f=f.reverse());var d=e.container;if("string"==typeof d||
d.nodeName)d=n.select(d);var c=f.map(function(b,a){return b.color}),h=e.fontSize,m=(g=null==e.isContinuous?"number"===typeof f[0]:e.isContinuous)?e.height:h*f.length;d=d.classed("legend-group",!0).selectAll("svg").data([0]);var p=d.enter().append("svg").attr({width:300,height:m+h,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});p.append("g").classed("legend-axis",!0);p.append("g").classed("legend-marks",!0);p=n.range(f.length);var q=n.scale[g?"linear":
"ordinal"]().domain(p).range(c),y=n.scale[g?"linear":"ordinal"]().domain(p)[g?"range":"rangePoints"]([0,m]);g?(m=d.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(c),m.enter().append("stop"),m.attr({offset:function(b,a){return a/(c.length-1)*100+"%"}}).style({"stop-color":function(b,a){return b}}),d.append("rect").classed("legend-mark",!0).attr({height:e.height,width:e.colorBandWidth,fill:"url(#grad1)"})):
(m=d.select(".legend-marks").selectAll("path.legend-mark").data(f),m.enter().append("path").classed("legend-mark",!0),m.attr({transform:function(b,a){return"translate("+[h/2,y(a)+h/2]+")"},d:function(b,a){b=b.symbol;a=3*h;b="line"===b?"M"+[[-h/2,-h/12],[h/2,-h/12],[h/2,h/12],[-h/2,h/12]]+"Z":-1!=n.svg.symbolTypes.indexOf(b)?n.svg.symbol().type(b).size(a)():n.svg.symbol().type("square").size(a)();return b},fill:function(b,a){return q(a)}}),m.exit().remove());m=n.svg.axis().scale(y).orient("right");
d=d.select("g.legend-axis").attr({transform:"translate("+[g?e.colorBandWidth:h,h/2]+")"}).call(m);d.selectAll(".domain").style({fill:"none",stroke:"none"});d.selectAll("line").style({fill:"none",stroke:g?e.textColor:"none"});d.selectAll("text").style({fill:e.textColor,"font-size":e.fontSize}).text(function(b,a){return f[a].name});return b}var a=h.Legend.defaultConfig(),e=n.dispatch("hover");b.config=function(b){if(!arguments.length)return a;k(a,b);return this};n.rebind(b,e,"on");return b};h.Legend.defaultConfig=
function(b,a){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}};h.tooltipPanel=function(){var b,a,e,m={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},l="tooltip-"+h.tooltipPanel.uid++,f=function(){b=m.container.selectAll("g."+l).data([0]);var d=b.enter().append("g").classed(l,
!0).style({"pointer-events":"none",display:"none"});e=d.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"});a=d.append("text").attr({dx:m.padding+10,dy:.3*+m.fontSize});return f};f.text=function(d){var c=n.hsl(m.color).l,g=.5<=c?"#aaa":"white";d=d||"";a.style({fill:.5<=c?"black":"white","font-size":m.fontSize+"px"}).text(d);c=m.padding;d=a.node().getBBox();g={fill:m.color,stroke:g,"stroke-width":"2px"};var h=d.width+2*c+10;d=d.height+2*c;e.attr({d:"M"+[[10,-d/2],[10,-d/4],[m.hasTick?
0:10,0],[10,d/4],[10,d/2],[h,d/2],[h,-d/2]].join("L")+"Z"}).style(g);b.attr({transform:"translate("+[10,-d/2+2*c]+")"});b.style({display:"block"});return f};f.move=function(a){if(b)return b.attr({transform:"translate("+[a[0],a[1]]+")"}).style({display:"block"}),f};f.hide=function(){if(b)return b.style({display:"none"}),f};f.show=function(){if(b)return b.style({display:"block"}),f};f.config=function(b){k(m,b);return f};return f};h.tooltipPanel.uid=1;h.adapter={};h.adapter.plotly=function(){return{convert:function(b,
a){var e={};if(b.data&&(e.data=b.data.map(function(b,d){b=k({},b);[[b,["marker","color"],["color"]],[b,["marker","opacity"],["opacity"]],[b,["marker","line","color"],["strokeColor"]],[b,["marker","line","dash"],["strokeDash"]],[b,["marker","line","width"],["strokeSize"]],[b,["marker","symbol"],["dotType"]],[b,["marker","size"],["dotSize"]],[b,["marker","barWidth"],["barWidth"]],[b,["line","interpolation"],["lineInterpolation"]],[b,["showlegend"],["visibleInLegend"]]].forEach(function(b,c){h.util.translator.apply(null,
b.concat(a))});a||delete b.marker;a&&delete b.groupId;a?("LinePlot"===b.geometry?(b.type="scatter",!0===b.dotVisible?(delete b.dotVisible,b.mode="lines+markers"):b.mode="lines"):"DotPlot"===b.geometry?(b.type="scatter",b.mode="markers"):"AreaChart"===b.geometry?b.type="area":"BarChart"===b.geometry&&(b.type="bar"),delete b.geometry):("scatter"===b.type?"lines"===b.mode?b.geometry="LinePlot":"markers"===b.mode?b.geometry="DotPlot":"lines+markers"===b.mode&&(b.geometry="LinePlot",b.dotVisible=!0):"area"===
b.type?b.geometry="AreaChart":"bar"===b.type&&(b.geometry="BarChart"),delete b.mode,delete b.type);return b}),!a&&b.layout&&"stack"===b.layout.barmode)){var g=h.util.duplicates(e.data.map(function(b,a){return b.geometry}));e.data.forEach(function(b,a){b=g.indexOf(b.geometry);-1!=b&&(e.data[a].groupId=b)})}if(b.layout){b=k({},b.layout);[[b,["plot_bgcolor"],["backgroundColor"]],[b,["showlegend"],["showLegend"]],[b,["radialaxis"],["radialAxis"]],[b,["angularaxis"],["angularAxis"]],[b.angularaxis,["showline"],
["gridLinesVisible"]],[b.angularaxis,["showticklabels"],["labelsVisible"]],[b.angularaxis,["nticks"],["ticksCount"]],[b.angularaxis,["tickorientation"],["tickOrientation"]],[b.angularaxis,["ticksuffix"],["ticksSuffix"]],[b.angularaxis,["range"],["domain"]],[b.angularaxis,["endpadding"],["endPadding"]],[b.radialaxis,["showline"],["gridLinesVisible"]],[b.radialaxis,["tickorientation"],["tickOrientation"]],[b.radialaxis,["ticksuffix"],["ticksSuffix"]],[b.radialaxis,["range"],["domain"]],[b.angularAxis,
["showline"],["gridLinesVisible"]],[b.angularAxis,["showticklabels"],["labelsVisible"]],[b.angularAxis,["nticks"],["ticksCount"]],[b.angularAxis,["tickorientation"],["tickOrientation"]],[b.angularAxis,["ticksuffix"],["ticksSuffix"]],[b.angularAxis,["range"],["domain"]],[b.angularAxis,["endpadding"],["endPadding"]],[b.radialAxis,["showline"],["gridLinesVisible"]],[b.radialAxis,["tickorientation"],["tickOrientation"]],[b.radialAxis,["ticksuffix"],["ticksSuffix"]],[b.radialAxis,["range"],["domain"]],
[b.font,["outlinecolor"],["outlineColor"]],[b.legend,["traceorder"],["reverseOrder"]],[b,["labeloffset"],["labelOffset"]],[b,["defaultcolorrange"],["defaultColorRange"]]].forEach(function(b,d){h.util.translator.apply(null,b.concat(a))});a?("undefined"!==typeof b.tickLength&&(b.angularaxis.ticklen=b.tickLength,delete b.tickLength),b.tickColor&&(b.angularaxis.tickcolor=b.tickColor,delete b.tickColor)):(b.angularAxis&&"undefined"!==typeof b.angularAxis.ticklen&&(b.tickLength=b.angularAxis.ticklen),b.angularAxis&&
"undefined"!==typeof b.angularAxis.tickcolor&&(b.tickColor=b.angularAxis.tickcolor));b.legend&&"boolean"!=typeof b.legend.reverseOrder&&(b.legend.reverseOrder="normal"!=b.legend.reverseOrder);b.legend&&"boolean"==typeof b.legend.traceorder&&(b.legend.traceorder=b.legend.traceorder?"reversed":"normal",delete b.legend.reverseOrder);if(b.margin&&"undefined"!=typeof b.margin.t){var l=["t","r","b","l","pad"],f=["top","right","bottom","left","pad"],d={};n.entries(b.margin).forEach(function(b,a){d[f[l.indexOf(b.key)]]=
b.value});b.margin=d}a&&(delete b.needsEndSpacing,delete b.minorTickColor,delete b.minorTicks,delete b.angularaxis.ticksCount,delete b.angularaxis.ticksCount,delete b.angularaxis.ticksStep,delete b.angularaxis.rewriteTicks,delete b.angularaxis.nticks,delete b.radialaxis.ticksCount,delete b.radialaxis.ticksCount,delete b.radialaxis.ticksStep,delete b.radialaxis.rewriteTicks,delete b.radialaxis.nticks);e.layout=b}return e}}}},{"../../../constants/alignment":685,"../../../lib":716,d3:165}],835:[function(a,
q,p){var n=a("d3");p=a("../../../lib");var k=a("../../../components/color"),m=a("./micropolar"),h=a("./undo_manager"),b=p.extendDeepAll,g=q.exports={};g.framework=function(a){function e(e,f){f&&(r=f);n.select(n.select(r).node().parentNode).selectAll(".svg-container\x3e*:not(.chart-root)").remove();k=k?b(k,e):e;d||(d=m.Axis());c=m.adapter.plotly().convert(k);d.config(c).render(r);a.data=k.data;a.layout=k.layout;g.fillLayout(a);return k}var k,f,d,c,r,u=new h;e.isPolar=!0;e.svg=function(){return d.svg()};
e.getConfig=function(){return k};e.getLiveConfig=function(){return m.adapter.plotly().convert(d.getLiveConfig(),!0)};e.getLiveScales=function(){return{t:d.angularScale(),r:d.radialScale()}};e.setUndoPoint=function(){var b=this,a=m.util.cloneJson(k);(function(a,c){u.add({undo:function(){c&&b(c)},redo:function(){b(a)}})})(a,f);f=m.util.cloneJson(a)};e.undo=function(){u.undo()};e.redo=function(){u.redo()};return e};g.fillLayout=function(a){var e=n.select(a).selectAll(".plot-container"),g=e.selectAll(".svg-container"),
f=a.framework&&a.framework.svg&&a.framework.svg();a._fullLayout=b({width:800,height:600,paper_bgcolor:k.background,_container:e,_paperdiv:g,_paper:f},a.layout)}},{"../../../components/color":591,"../../../lib":716,"./micropolar":834,"./undo_manager":836,d3:165}],836:[function(a,q,p){q.exports=function(){function a(b,a){if(!b)return this;h=!0;b[a]();h=!1;return this}var k=[],m=-1,h=!1,b;return{add:function(b){if(h)return this;k.splice(m+1,k.length-m);k.push(b);m=k.length-1;return this},setCallback:function(a){b=
a},undo:function(){var g=k[m];if(!g)return this;a(g,"undo");--m;b&&b(g.undo);return this},redo:function(){var g=k[m+1];if(!g)return this;a(g,"redo");m+=1;b&&b(g.redo);return this},clear:function(){k=[];m=-1},hasUndo:function(){return-1!==m},hasRedo:function(){return m<k.length-1},getCommands:function(){return k},getPreviousCommand:function(){return k[m-1]},getIndex:function(){return m}}}},{}],837:[function(a,q,p){function n(b,a){this.id=a;this.gd=b;this.radialAxisAngle=this.vangles=this._hasClipOnAxisFalse=
null;this.traceHash={};this.layers={};this.clipPaths={};this.clipIds={};this.viewInitial={};b=b._fullLayout;this.clipIds.forTraces="clip"+b._uid+a+"-for-traces";this.clipPaths.forTraces=b._clips.append("clipPath").attr("id",this.clipIds.forTraces);this.clipPaths.forTraces.append("path");this.framework=b._polarlayer.append("g").attr("class",a);this.angularTickLayout=this.radialTickLayout=null}function k(b){var a=b.ticks+String(b.ticklen)+String(b.showticklabels);"side"in b&&(a+=b.side);return a}function m(b,
a){var c=f.findIndexOfMin(a,function(a){return f.angleDist(b,a)});return a[c]}function h(b,a,c){a?(b.attr("display",null),b.attr(c)):b&&b.attr("display","none");return b}function b(b,a){return"translate("+b+","+a+")"}function g(b){return"rotate("+b+")"}var e=a("d3"),t=a("tinycolor2"),l=a("../../registry"),f=a("../../lib"),d=a("../../components/color"),c=a("../../components/drawing"),r=a("../plots"),u=a("../../plots/cartesian/axes"),v=a("../cartesian/set_convert"),w=a("./set_convert"),y=a("../cartesian/autorange").doAutoRange,
A=a("../cartesian/dragbox"),z=a("../../components/dragelement"),x=a("../../components/fx"),C=a("../../components/titles"),B=a("../cartesian/select").prepSelect,D=a("../cartesian/select").selectOnClick,G=a("../cartesian/select").clearSelect,E=a("../../lib/setcursor"),F=a("../../lib/clear_gl_canvases"),L=a("../../plot_api/subroutines").redrawReglTraces,J=a("../../constants/alignment").MID_SHIFT,H=a("./constants"),K=a("./helpers"),M=f._,I=f.mod,N=f.deg2rad,O=f.rad2deg;a=n.prototype;q.exports=function(b,
a){return new n(b,a)};a.plot=function(b,a){var c=a[this.id];this._hasClipOnAxisFalse=!1;for(var d=0;d<b.length;d++)if(!1===b[d][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(a,c);this.updateLayout(a,c);r.generalUpdatePerTraceModule(this.gd,this,b,c);this.updateFx(a,c)};a.updateLayers=function(b,a){var c=this.layers;b=a.radialaxis;a=a.angularaxis;var d=H.layerNames,f=d.indexOf("frontplot");d=d.slice(0,f);a="below traces"===a.layer;b="below traces"===b.layer;a&&d.push("angular-line");
b&&d.push("radial-line");a&&d.push("angular-axis");b&&d.push("radial-axis");d.push("frontplot");a||d.push("angular-line");b||d.push("radial-line");a||d.push("angular-axis");b||d.push("radial-axis");b=this.framework.selectAll(".polarsublayer").data(d,String);b.enter().append("g").attr("class",function(b){return"polarsublayer "+b}).each(function(b){var a=c[b]=e.select(this);switch(b){case "frontplot":a.append("g").classed("barlayer",!0);a.append("g").classed("scatterlayer",!0);break;case "backplot":a.append("g").classed("maplayer",
!0);break;case "plotbg":c.bg=a.append("path");break;case "radial-grid":a.style("fill","none");break;case "angular-grid":a.style("fill","none");break;case "radial-line":a.append("line").style("fill","none");break;case "angular-line":a.append("path").style("fill","none")}});b.order()};a.updateLayout=function(a,e){var f=this.layers,g=a._size,h=e.radialaxis,k=e.angularaxis,l=e.domain.x,m=e.domain.y;this.xOffset=g.l+g.w*l[0];this.yOffset=g.t+g.h*(1-m[1]);var r=this.xLength=g.w*(l[1]-l[0]),t=this.yLength=
g.h*(m[1]-m[0]),n=e.sector;this.sectorInRad=n.map(N);var u=n[0];n=n[1]-u;u=I(u,360);n=u+n;var p=Math.cos(N(u)),q=Math.sin(N(u)),v=Math.cos(N(n)),w=Math.sin(N(n));var x=90>=u&&90<=n||90<u&&450<=n?1:0>=q&&0>=w?0:Math.max(q,w);var z=180>=u&&180<=n||180<u&&540<=n?-1:0<=p&&0<=v?0:Math.min(p,v);u=this.sectorBBox=[z,270>=u&&270<=n||270<u&&630<=n?-1:0<=q&&0<=w?0:Math.min(q,w),360<=n?1:0>=p&&0>=v?0:Math.max(p,v),x];n=u[2]-u[0];q=Math.abs((u[3]-u[1])/n);t/r>q?(p=r,q*=r,r=(t-q)/g.h/2,l=[l[0],l[1]],m=[m[0]+r,
m[1]-r]):(p=t/q,q=t,r=(r-p)/g.w/2,l=[l[0]+r,l[1]-r],m=[m[0],m[1]]);this.xLength2=p;this.yLength2=q;this.xDomain2=l;this.yDomain2=m;r=this.xOffset2=g.l+g.w*l[0];t=this.yOffset2=g.t+g.h*(1-m[1]);p=this.radius=p/n;q=this.innerRadius=e.hole*p;n=this.cx=r-p*u[0];u=this.cy=t+p*u[3];v=this.cxx=n-r;w=this.cyy=u-t;this.radialAxis=this.mockAxis(a,e,h,{_id:"x",side:{counterclockwise:"top",clockwise:"bottom"}[h.side],domain:[q/g.w,p/g.w]});this.angularAxis=this.mockAxis(a,e,k,{side:"right",domain:[0,Math.PI],
autorange:!1});this.doAutoRange(a,e);this.updateAngularAxis(a,e);this.updateRadialAxis(a,e);this.updateRadialAxisTitle(a,e);this.xaxis=this.mockCartesianAxis(a,e,{_id:"x",domain:l});this.yaxis=this.mockCartesianAxis(a,e,{_id:"y",domain:m});a=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",a).attr("transform",b(v,w));f.frontplot.attr("transform",b(r,t)).call(c.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd);f.bg.attr("d",a).attr("transform",b(n,u)).call(d.fill,
e.bgcolor)};a.mockAxis=function(b,a,c,d){c=f.extendFlat({},c,d);w(c,a,b);return c};a.mockCartesianAxis=function(b,a,c){var d=this,e=c._id,g=f.extendFlat({type:"linear"},c);v(g,b);var h={x:[0,2],y:[1,3]};g.setRange=function(){var b=d.sectorBBox,c=h[e],f=d.radialAxis._rl;f=(f[1]-f[0])/(1-a.hole);g.range=[b[c[0]]*f,b[c[1]]*f]};g.isPtWithinRange="x"===e?function(b){return d.isPtInside(b)}:function(){return!0};g.setRange();g.setScale();return g};a.doAutoRange=function(b,a){var c=this.gd;b=this.radialAxis;
a=a.radialaxis;b.setScale();y(c,b);c=b.range;a.range=c.slice();a._input.range=c.slice();b._rl=[b.r2l(c[0],null,"gregorian"),b.r2l(c[1],null,"gregorian")]};a.updateRadialAxis=function(a,c){var e=this,l=e.gd;a=e.layers;var r=e.radius,t=e.innerRadius,n=e.cx,p=e.cy,q=c.radialaxis,v=I(c.sector[0],360),w=e.radialAxis;c=t<r;e.fillViewInitialKey("radialaxis.angle",q.angle);e.fillViewInitialKey("radialaxis.range",w.range.slice());w.setGeometry();"auto"===w.tickangle&&90<v&&270>=v&&(w.tickangle=180);v=function(b){return"translate("+
(w.l2p(b.x)+t)+",0)"};var x=function(b){return e.pathArc(w.r2p(b.x)+t)},z=k(q);e.radialTickLayout!==z&&(a["radial-axis"].selectAll(".xtick").remove(),e.radialTickLayout=z);if(c){w.setScale();z=u.calcTicks(w);var y=u.clipEnds(w,z),A=u.getTickSigns(w)[2];u.drawTicks(l,w,{vals:z,layer:a["radial-axis"],path:u.makeTickPath(w,0,A),transFn:v,crisp:!1});u.drawGrid(l,w,{vals:y,layer:a["radial-grid"],path:x,transFn:f.noop,crisp:!1});u.drawLabels(l,w,{vals:z,layer:a["radial-axis"],transFn:v,labelFns:u.makeLabelFns(w,
0)})}l=e.radialAxisAngle=e.vangles?O(m(N(q.angle),e.vangles)):q.angle;n=b(n,p);p=n+g(-l);h(a["radial-axis"],c&&(q.showticklabels||q.ticks),{transform:p});h(a["radial-grid"],c&&q.showgrid,{transform:n});h(a["radial-line"].select("line"),c&&q.showline,{x1:t,y1:0,x2:r,y2:0,transform:p}).attr("stroke-width",q.linewidth).call(d.stroke,q.linecolor)};a.updateRadialAxisTitle=function(b,a,d){b=this.gd;var e=this.radius,f=this.cx,g=this.cy;a=a.radialaxis;var h=this.id+"title";d=void 0!==d?d:this.radialAxisAngle;
var k=N(d),l=Math.cos(k);k=Math.sin(k);var m=0;if(a.title){m=c.bBox(this.layers["radial-axis"].node()).height;var r=a.title.font.size;m="counterclockwise"===a.side?-m-.4*r:m+.8*r}this.layers["radial-axis-title"]=C.draw(b,h,{propContainer:a,propName:this.id+".radialaxis.title",placeholder:M(b,"Click to enter radial axis title"),attributes:{x:f+e/2*l+m*k,y:g-e/2*k+m*l,"text-anchor":"middle"},transform:{rotate:-d}})};a.updateAngularAxis=function(a,c){var e=this;a=e.gd;var l=e.layers,m=e.radius,r=e.innerRadius,
t=e.cx,n=e.cy,p=c.angularaxis,q=e.angularAxis;e.fillViewInitialKey("angularaxis.rotation",p.rotation);q.setGeometry();q.setScale();var v=function(b){return q.t2g(b.x)};"linear"===q.type&&"radians"===q.thetaunit&&(q.tick0=O(q.tick0),q.dtick=O(q.dtick));var w=function(a){return b(t+m*Math.cos(a),n-m*Math.sin(a))},x=function(b){return w(v(b))},z=function(b){b=v(b);return w(b)+g(-O(b))},y=function(b){var a=v(b);b=Math.cos(a);a=Math.sin(a);return"M"+[t+r*b,n-r*a]+"L"+[t+m*b,n-m*a]},A=u.makeLabelFns(q,
0).labelStandoff,B={xFn:function(b){b=v(b);return Math.cos(b)*A},yFn:function(b){var a=v(b);return-Math.sin(a)*(A+b.fontSize*(0<Math.sin(a)?.2:1))+Math.abs(Math.cos(a))*b.fontSize*J},anchorFn:function(b){b=v(b);b=Math.cos(b);return.1>Math.abs(b)?"middle":0<b?"start":"end"},heightFn:function(b,a,c){b=v(b);return-.5*(1+Math.sin(b))*c}},C=k(p);e.angularTickLayout!==C&&(l["angular-axis"].selectAll("."+q._id+"tick").remove(),e.angularTickLayout=C);C=u.calcTicks(q);"linear"===c.gridshape?(c=C.map(v),0>
f.angleDelta(c[0],c[1])&&(c=c.slice().reverse())):c=null;e.vangles=c;"category"===q.type&&(C=C.filter(function(b){return f.isAngleInsideSector(v(b),e.sectorInRad)}));q.visible&&(c="inside"===q.ticks?-1:1,u.drawTicks(a,q,{vals:C,layer:l["angular-axis"],path:"M"+(q.linewidth||1)/2*c+",0h"+c*q.ticklen,transFn:z,crisp:!1}),u.drawGrid(a,q,{vals:C,layer:l["angular-grid"],path:y,transFn:f.noop,crisp:!1}),u.drawLabels(a,q,{vals:C,layer:l["angular-axis"],repositionOnUpdate:!0,transFn:x,labelFns:B}));h(l["angular-line"].select("path"),
p.showline,{d:e.pathSubplot(),transform:b(t,n)}).attr("stroke-width",p.linewidth).call(d.stroke,p.linecolor)};a.updateFx=function(b,a){this.gd._context.staticPlot||(this.updateAngularDrag(b),this.updateRadialDrag(b,a,0),this.updateRadialDrag(b,a,1),this.updateMainDrag(b))};a.updateMainDrag=function(a){function c(b,a){return Math.sqrt(b*b+a*a)}function d(b,a){return[b*Math.cos(a),b*Math.sin(-a)]}function f(b,a){if(0===b)return v.pathSector(2*Aa);var c=wa/b,e=a-c;a+=c;c=Math.max(0,Math.min(b,F));b=
c-Aa;c+=Aa;return"M"+d(b,e)+"A"+[b,b]+" 0,0,0 "+d(b,a)+"L"+d(c,a)+"A"+[c,c]+" 0,0,1 "+d(c,e)+"Z"}function g(b,a,c){if(0===b)return v.pathSector(2*Aa);a=d(b,a);c=d(b,c);b=Da((a[0]+c[0])/2);c=Da((a[1]+c[1])/2);if(b&&c){a=c/b;var e=-1/a;b=ra(Aa,a,b,c);a=ra(wa,e,b[0][0],b[0][1]);b=ra(wa,e,b[1][0],b[1][1])}else{if(c){e=wa;var f=Aa}else e=Aa,f=wa;a=[[b-e,c-f],[b+e,c-f]];b=[[b-e,c+f],[b+e,c+f]]}return"M"+a.join("L")+"L"+b.reverse().join("L")+"Z"}function h(b,a){a=Math.max(Math.min(a,F),I);b<E?b=0:F-b<E?
b=F:a<E?a=0:F-a<E&&(a=F);if(Math.abs(a-b)>C)return b<a?(Na=b,Ja=a):(Na=a,Ja=b),!0;Ja=Na=null;return!1}function k(b,a){b=b||pa;a=a||"M0,0Z";va.attr("d",b);Fa.attr("d",a);A.transitionZoombox(va,Fa,qa,Pa);qa=!0;b={};p(b);w.emit("plotly_relayouting",b)}function m(b,a){b=Ea+b;var d=Ba+a;a=c(Ea-L,Ba-O);b=Math.min(c(b-L,d-O),F);d=Math.atan2(O-Ba,Ea-L);if(h(a,b)){var e=pa+v.pathSector(Ja);Na&&(e+=v.pathSector(Na));var g=f(Na,d)+f(Ja,d)}k(e,g)}function r(b,a,d,e){b=K.findIntersectionXY(d,e,d,[b-L,O-a]);return c(b[0],
b[1])}function n(b,a){b=Ea+b;var c=Ba+a,d=Math.atan2(O-c,b-L);a=ua(Math.atan2(O-Ba,Ea-L),P);var e=ua(d,P);d=r(Ea,Ba,a[0],a[1]);b=Math.min(r(b,c,e[0],e[1]),F);if(h(d,b)){var f=pa+v.pathSector(Ja);Na&&(f+=v.pathSector(Na));var l=[g(Na,a[0],a[1]),g(Ja,a[0],a[1])].join(" ")}k(f,l)}function u(){A.removeZoombox(w);if(null!==Na&&null!==Ja){var b={};p(b);A.showDoubleClickNotifier(w);l.call("_guiRelayout",w,b)}}function p(b){var a=za._rl,c=(a[1]-a[0])/(1-I/F)/F;b[v.id+".radialaxis.range"]=[a[0]+(Na-I)*c,a[0]+
(Ja-I)*c]}function q(b,a){var c=w._fullLayout.clickmode;A.removeZoombox(w);if(2===b){var d={},e;for(e in v.viewInitial)d[v.id+"."+e]=v.viewInitial[e];w.emit("plotly_doubleclick",null);l.call("_guiRelayout",w,d)}-1<c.indexOf("select")&&1===b&&D(a,w,[v.xaxis],[v.yaxis],v.id,ba);-1<c.indexOf("event")&&x.click(w,a,v.id)}var v=this,w=v.gd,y=a._zoomlayer,C=H.MINZOOM,E=H.OFFEDGE,F=v.radius,I=v.innerRadius,N=v.cx,J=v.cy,L=v.cxx,O=v.cyy,M=v.sectorInRad,P=v.vangles,za=v.radialAxis,Da=K.clampTiny,ra=K.findXYatLength,
ua=K.findEnclosingVertexAngles,Aa=H.cornerHalfWidth,wa=H.cornerLen/2,Ma=A.makeDragger(v.layers,"path","maindrag","crosshair");e.select(Ma).attr("d",v.pathSubplot()).attr("transform",b(N,J));var ba={element:Ma,gd:w,subplot:v.id,plotinfo:{id:v.id,xaxis:v.xaxis,yaxis:v.yaxis},xaxes:[v.xaxis],yaxes:[v.yaxis]},Ea,Ba,Na,Ja,pa,qa,Pa,va,Fa;ba.prepFn=function(b,a,c){var d=w._fullLayout.dragmode,e=Ma.getBoundingClientRect();Ea=a-e.left;Ba=c-e.top;P&&(e=K.findPolygonOffset(F,M[0],M[1],P),Ea+=L+e[0],Ba+=O+e[1]);
switch(d){case "zoom":ba.moveFn=P?n:m;ba.clickFn=q;ba.doneFn=u;Ja=Na=null;pa=v.pathSubplot();qa=!1;Pa=t(w._fullLayout[v.id].bgcolor).getLuminance();va=A.makeZoombox(y,Pa,N,J,pa);va.attr("fill-rule","evenodd");Fa=A.makeCorners(y,N,J);G(w);break;case "select":case "lasso":B(b,a,c,ba,d)}};Ma.onmousemove=function(b){x.hover(w,b,v.id);w._fullLayout._lasthover=Ma;w._fullLayout._hoversubplot=v.id};Ma.onmouseout=function(b){w._dragging||z.unhover(w,b)};z.init(ba)};a.updateRadialDrag=function(a,c,d){function k(b,
a){W?W(b,a):(b=[b,-a],b=Math.abs(f.dot(b,[Math.cos(D),Math.sin(D)])/Math.sqrt(f.dot(b,b))),isNaN(b)||(W=.5>b?t:n));b={};null!==za?b[u.id+".radialaxis.angle"]=za:null!==Da&&(b[u.id+".radialaxis.range["+d+"]"]=Da);p.emit("plotly_relayouting",b)}function r(){null!==za?l.call("_guiRelayout",p,u.id+".radialaxis.angle",za):null!==Da&&l.call("_guiRelayout",p,u.id+".radialaxis.range["+d+"]",Da)}function t(a,c){0!==d&&(za=Math.atan2(x-(Q+c),P+a-w),u.vangles&&(za=m(za,u.vangles)),za=O(za),a=b(w,x)+g(-za),q["radial-axis"].attr("transform",
a),q["radial-line"].select("line").attr("transform",a),a=u.gd._fullLayout,u.updateRadialAxisTitle(a,a[u.id],za))}function n(b,a){b=f.dot([b,-a],[Math.cos(D),Math.sin(D)]);Da=K-M*b;if(0<M!==(d?Da>I:Da<J))Da=null;else{a=p._fullLayout;b=a[u.id];y.range[d]=Da;y._rl[d]=Da;u.updateRadialAxis(a,b);u.xaxis.setRange();u.xaxis.setScale();u.yaxis.setRange();u.yaxis.setScale();a=!1;for(var c in u.traceHash){var e=u.traceHash[c],g=f.filterVisible(e);e[0][0].trace._module.plot(p,u,g,b);l.traceIs(c,"gl")&&g.length&&
(a=!0)}a&&(F(p),L(p))}}var u=this,p=u.gd,q=u.layers;a=u.radius;var v=u.innerRadius,w=u.cx,x=u.cy,y=u.radialAxis,B=H.radialDragBoxSize,C=B/2;if(y.visible){var D=N(u.radialAxisAngle),E=y._rl,I=E[0],J=E[1],K=E[d],M=.75*(E[1]-E[0])/(1-c.hole)/a;if(d){var P=w+(a+C)*Math.cos(D);var Q=x-(a+C)*Math.sin(D);c="radialdrag"}else P=w+(v-C)*Math.cos(D),Q=x-(v-C)*Math.sin(D),c="radialdrag-inner";c=A.makeRectDragger(q,c,"crosshair",-C,-C,B,B);var T={element:c,gd:p};h(e.select(c),y.visible&&v<a,{transform:b(P,Q)});
var W,za,Da;T.prepFn=function(){Da=za=W=null;T.moveFn=k;T.doneFn=r;G(p)};T.clampFn=function(b,a){Math.sqrt(b*b+a*a)<H.MINDRAG&&(a=b=0);return[b,a]};z.init(T)}};a.updateAngularDrag=function(a){function d(a,d){var k=m.gd._fullLayout,n=k[m.id],z=O(Math.atan2(w+x-(J+d),N+a-v-x)-sa);M=K+z;t.frontplot.attr("transform",b(m.xOffset2,m.yOffset2)+g([-z,v,w]));m.vangles?(P=m.radialAxisAngle+z,a=b(p,q)+g(-z),d=b(p,q)+g(-P),t.bg.attr("transform",a),t["radial-grid"].attr("transform",a),t["radial-axis"].attr("transform",
d),t["radial-line"].select("line").attr("transform",d),m.updateRadialAxisTitle(k,n,P)):m.clipPaths.forTraces.select("path").attr("transform",b(v,w)+g(z));D.each(function(){var a=e.select(this),d=c.getTranslate(a);a.attr("transform",b(d.x,d.y)+g([z]))});I.each(function(){var a=e.select(this),d=a.select("text"),f=c.getTranslate(a);a.attr("transform",g([z,d.attr("x"),d.attr("y")])+b(f.x,f.y))});u.rotation=f.modHalf(M,360);m.updateAngularAxis(k,n);m._hasClipOnAxisFalse&&!f.isFullCircle(m.sectorInRad)&&
C.call(c.hideOutsideRangePoints,m);k=!1;for(var y in m.traceHash)l.traceIs(y,"gl")&&(a=m.traceHash[y],d=f.filterVisible(a),a[0][0].trace._module.plot(r,m,d,n),d.length&&(k=!0));k&&(F(r),L(r));n={};h(n);r.emit("plotly_relayouting",n)}function h(b){b[m.id+".angularaxis.rotation"]=M;m.vangles&&(b[m.id+".radialaxis.angle"]=P)}function k(){I.select("text").attr("transform",null);var b={};h(b);l.call("_guiRelayout",r,b)}var m=this,r=m.gd,t=m.layers,n=m.radius,u=m.angularAxis,p=m.cx,q=m.cy,v=m.cxx,w=m.cyy,
x=H.angularDragBoxSize,y=A.makeDragger(t,"path","angulardrag","move"),B={element:y,gd:r};e.select(y).attr("d",m.pathAnnulus(n,n+x)).attr("transform",b(p,q)).call(E,"move");var C=t.frontplot.select(".scatterlayer").selectAll(".trace"),D=C.selectAll(".point"),I=C.selectAll(".textpoint"),N,J,K,M,P,sa;B.prepFn=function(b,c,e){K=a[m.id].angularaxis.rotation;b=y.getBoundingClientRect();N=c-b.left;J=e-b.top;sa=Math.atan2(w+x-J,N-v-x);B.moveFn=d;B.doneFn=k;G(r)};m.vangles&&!f.isFullCircle(m.sectorInRad)&&
(B.prepFn=f.noop,E(e.select(y),null));z.init(B)};a.isPtInside=function(b){var a=this.sectorInRad,c=this.vangles,d=this.angularAxis.c2g(b.theta),e=this.radialAxis;b=e.c2l(b.r);return(c?K.isPtInsidePolygon:f.isPtInsideSector)(b,d,e._rl,a,c)};a.pathArc=function(b){var a=this.sectorInRad,c=this.vangles;return(c?K.pathPolygon:f.pathArc)(b,a[0],a[1],c)};a.pathSector=function(b){var a=this.sectorInRad,c=this.vangles;return(c?K.pathPolygon:f.pathSector)(b,a[0],a[1],c)};a.pathAnnulus=function(b,a){var c=this.sectorInRad,
d=this.vangles;return(d?K.pathPolygonAnnulus:f.pathAnnulus)(b,a,c[0],c[1],d)};a.pathSubplot=function(){var b=this.innerRadius,a=this.radius;return b?this.pathAnnulus(b,a):this.pathSector(a)};a.fillViewInitialKey=function(b,a){b in this.viewInitial||(this.viewInitial[b]=a)}},{"../../components/color":591,"../../components/dragelement":609,"../../components/drawing":612,"../../components/fx":629,"../../components/titles":678,"../../constants/alignment":685,"../../lib":716,"../../lib/clear_gl_canvases":701,
"../../lib/setcursor":736,"../../plot_api/subroutines":755,"../../plots/cartesian/axes":764,"../../registry":845,"../cartesian/autorange":763,"../cartesian/dragbox":772,"../cartesian/select":781,"../cartesian/set_convert":782,"../plots":825,"./constants":826,"./helpers":827,"./set_convert":838,d3:165,tinycolor2:535}],838:[function(a,q,p){function n(b,a){var e=a._subplot;b.setGeometry=function(){var a=b._rl[0],d=b._rl[1],c=e.innerRadius,g=(e.radius-c)/(d-a),h=c/g,k=a>d?function(b){return 0>=b}:function(b){return 0<=
b};b.c2g=function(c){c=b.c2l(c)-a;return(k(c)?c:0)+h};b.g2c=function(c){return b.l2c(c+a-h)};b.g2p=function(b){return b*g};b.c2p=function(a){return b.g2p(b.c2g(a))}}}function k(a,h){var e=a.type;if("linear"===e){var f=a.d2c,d=a.c2d;a.d2c=function(a,d){a=f(a);return"degrees"===d?b(a):a};a.c2d=function(b,a){b="degrees"===a?g(b):b;return d(b)}}a.makeCalcdata=function(b,d){var c=b[d],f=b._length,g;if(c){if(m.isTypedArray(c)&&"linear"===e){if(f===c.length)return c;if(c.subarray)return c.subarray(0,f)}d=
Array(f);for(g=0;g<f;g++)d[g]=a.d2c(c[g],b.thetaunit)}else for(g=d+"0",d="d"+d,c=(g in b)?a.d2c(b[g],b.thetaunit):0,b=b[d]?a.d2c(b[d],b.thetaunit):(a.period||2*Math.PI)/f,d=Array(f),g=0;g<f;g++)d[g]=c+g*b;return d};a.setGeometry=function(){var c=h.sector,d=c.map(b),f={clockwise:-1,counterclockwise:1}[a.direction],k=b(a.rotation),l=function(b){return(b-k)/f},t;switch(e){case "linear":var n=t=m.identity;var p=b;var q=g;a.range=m.isFullCircle(d)?[c[0],c[0]+360]:d.map(l).map(g);break;case "category":c=
a._categories.length;var C=a.period?Math.max(a.period,c):c;0===C&&(C=1);n=p=function(b){return 2*b*Math.PI/C};t=q=function(b){return b*C/Math.PI/2};a.range=[0,C]}a.c2g=function(b){return f*n(b)+k};a.g2c=function(b){return t(l(b))};a.t2g=function(b){return f*p(b)+k};a.g2t=function(b){return q(l(b))}}}var m=a("../../lib"),h=a("../cartesian/set_convert"),b=m.deg2rad,g=m.rad2deg;q.exports=function(b,a,g){h(b,g);switch(b._id){case "x":case "radialaxis":n(b,a);break;case "angularaxis":k(b,a)}}},{"../../lib":716,
"../cartesian/set_convert":782}],839:[function(a,q,p){var n=a("../lib"),k=a("../plot_api/plot_template"),m=a("./domain").defaults;q.exports=function(a,b,g,e){function h(b,a){return n.coerce(u,p,l,b,a)}var l=e.attributes;g=e.handleDefaults;for(var f=e.partition||"x",d=b._subplots[e.type],c=d.length,r=c&&d[0].replace(/\d+$/,""),u,p,q=0;q<c;q++){var y=d[q];u=a[y]?a[y]:a[y]={};p=k.newContainer(b,y,r);h("uirevision",b.uirevision);var A={};A[f]=[q/c,(q+1)/c];m(p,b,h,A);e.id=y;g(u,p,h,e)}}},{"../lib":716,
"../plot_api/plot_template":754,"./domain":789}],840:[function(a,q,p){function n(a){var k=a.description?" "+a.description:"";a=a.keys||[];if(0<a.length){k=[];for(var h=0;h<a.length;h++)k[h]="`"+a[h]+"`";k=1===a.length?"variable "+k[0]:"variables "+k.slice(0,-1).join(", ")+" and "+k.slice(-1)+"."}return k}q=a("../constants/docs").FORMAT_LINK;a=a("../constants/docs").DATE_FORMAT_LINK;['Variables are inserted using %{variable}, for example "y: %{y}". Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".',
q,'for details on the formatting syntax. Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".',a,"for details on the date formatting syntax."].join(" ");p.hovertemplateAttrs=function(a,m){a=a||{};m=m||{};n(m);m={valType:"string",dflt:"",editType:a.editType||"none"};!1!==a.arrayOk&&(m.arrayOk=!0);return m};p.texttemplateAttrs=function(a,m){a=a||{};m=m||{};n(m);m={valType:"string",dflt:"",editType:a.editType||"calc"};!1!==a.arrayOk&&(m.arrayOk=
!0);return m}},{"../constants/docs":687}],841:[function(a,q,p){var n=a("./ternary"),k=a("../../plots/get_data").getSubplotCalcData;q=a("../../lib").counterRegex;p.name="ternary";var m=p.attr="subplot";p.idRoot="ternary";p.idRegex=p.attrRegex=q("ternary");(p.attributes={})[m]={valType:"subplotid",dflt:"ternary",editType:"calc"};p.layoutAttributes=a("./layout_attributes");p.supplyLayoutDefaults=a("./layout_defaults");p.plot=function(a){for(var b=a._fullLayout,g=a.calcdata,e=b._subplots.ternary,h=0;h<
e.length;h++){var l=e[h],f=k(g,"ternary",l),d=b[l]._subplot;d||(d=new n({id:l,graphDiv:a,container:b._ternarylayer.node()},b),b[l]._subplot=d);d.plot(f,b,a._promises)}};p.clean=function(a,b,g,e){a=e._subplots.ternary||[];for(g=0;g<a.length;g++){var h=a[g],k=e[h]._subplot;!b[h]&&k&&(k.plotContainer.remove(),k.clipDef.remove(),k.clipDefRelative.remove(),k.layers["a-title"].remove(),k.layers["b-title"].remove(),k.layers["c-title"].remove())}}},{"../../lib":716,"../../plots/get_data":799,"./layout_attributes":842,
"./layout_defaults":843,"./ternary":844}],842:[function(a,q,p){p=a("../../components/color/attributes");var n=a("../domain").attributes,k=a("../cartesian/layout_attributes"),m=a("../../plot_api/edit_types").overrideAll;a=a("../../lib/extend").extendFlat;a={title:{text:k.title.text,font:k.title.font},color:k.color,tickmode:k.tickmode,nticks:a({},k.nticks,{dflt:6,min:1}),tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,
showticklabels:k.showticklabels,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,separatethousands:k.separatethousands,tickfont:k.tickfont,tickangle:k.tickangle,tickformat:k.tickformat,tickformatstops:k.tickformatstops,hoverformat:k.hoverformat,showline:a({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:a({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,
gridwidth:k.gridwidth,layer:k.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}};q=q.exports=m({domain:n({name:"ternary"}),bgcolor:{valType:"color",dflt:p.background},sum:{valType:"number",dflt:1,min:0},aaxis:a,baxis:a,caxis:a},"plot","from-root");q.uirevision={valType:"any",editType:"none"};q.aaxis.uirevision=q.baxis.uirevision=q.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":590,"../../lib/extend":707,
"../../plot_api/edit_types":747,"../cartesian/layout_attributes":776,"../domain":789}],843:[function(a,q,p){function n(b,a,d,e){var f=d("bgcolor");d=d("sum");e.bgColor=m.combine(f,e.paper_bgcolor);for(var g,l,r=0;r<c.length;r++)f=c[r],g=b[f]||{},l=h.newContainer(a,f),l._name=f,k(g,l,e,a);e=a.aaxis;f=a.baxis;a=a.caxis;e.min+f.min+a.min>=d&&(e.min=0,f.min=0,a.min=0,b.aaxis&&delete b.aaxis.min,b.baxis&&delete b.baxis.min,b.caxis&&delete b.caxis.min)}function k(a,c,g,h){function k(d,e){return b.coerce(a,
c,m,d,e)}var m=d[c._name];k("uirevision",h.uirevision);c.type="linear";h=k("color");var r=h!==m.color.dflt?h:g.font.color,n=c._name.charAt(0).toUpperCase(),u="Component "+n,p=k("title.text",u);c._hovertitle=p===u?p:n;b.coerceFont(k,"title.font",{family:g.font.family,size:Math.round(1.2*g.font.size),color:r});k("min");l(a,c,k,"linear");e(a,c,k,"linear",{});t(a,c,k,{outerTicks:!0});k("showticklabels")&&(b.coerceFont(k,"tickfont",{family:g.font.family,size:g.font.size,color:r}),k("tickangle"),k("tickformat"));
f(a,c,k,{dfltColor:h,bgColor:g.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:m});k("hoverformat");k("layer")}var m=a("../../components/color"),h=a("../../plot_api/plot_template"),b=a("../../lib"),g=a("../subplot_defaults"),e=a("../cartesian/tick_label_defaults"),t=a("../cartesian/tick_mark_defaults"),l=a("../cartesian/tick_value_defaults"),f=a("../cartesian/line_grid_defaults"),d=a("./layout_attributes"),c=["aaxis","baxis","caxis"];q.exports=function(b,a,c){g(b,a,c,{type:"ternary",
attributes:d,handleDefaults:n,font:a.font,paper_bgcolor:a.paper_bgcolor})}},{"../../components/color":591,"../../lib":716,"../../plot_api/plot_template":754,"../cartesian/line_grid_defaults":778,"../cartesian/tick_label_defaults":783,"../cartesian/tick_mark_defaults":784,"../cartesian/tick_value_defaults":785,"../subplot_defaults":839,"./layout_attributes":842}],844:[function(a,q,p){function n(b,a){this.id=b.id;this.graphDiv=b.graphDiv;this.init(a);this.makeFramework(a);this.cTickLayout=this.bTickLayout=
this.aTickLayout=null}function k(b){m.select(b).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}var m=a("d3"),h=a("tinycolor2"),b=a("../../registry"),g=a("../../lib"),e=g._,t=a("../../components/color"),l=a("../../components/drawing"),f=a("../cartesian/set_convert"),d=a("../../lib/extend").extendFlat,c=a("../plots"),r=a("../cartesian/axes"),u=a("../../components/dragelement"),v=a("../../components/fx"),w=a("../../components/titles"),y=a("../cartesian/select").prepSelect,
A=a("../cartesian/select").selectOnClick,z=a("../cartesian/select").clearSelect,x=a("../cartesian/constants");q.exports=n;a=n.prototype;a.init=function(b){this.container=b._ternarylayer;this.defs=b._defs;this.layoutId=b._uid;this.traceHash={};this.layers={}};a.plot=function(b,a){var d=a[this.id];a=a._size;this._hasClipOnAxisFalse=!1;for(var e=0;e<b.length;e++)if(!1===b[e][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(d);this.adjustLayout(d,a);c.generalUpdatePerTraceModule(this.graphDiv,
this,b,d);this.layers.plotbg.select("path").call(t.fill,d.bgcolor)};a.makeFramework=function(b){var a=this.graphDiv,c=b[this.id],d=this.clipId="clip"+this.layoutId+this.id,e=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=g.ensureSingleById(b._clips,"clipPath",d,function(b){b.append("path").attr("d","M0,0Z")});this.clipDefRelative=g.ensureSingleById(b._clips,"clipPath",e,function(b){b.append("path").attr("d","M0,0Z")});this.plotContainer=g.ensureSingle(this.container,"g",this.id);
this.updateLayers(c);l.setClipUrl(this.layers.backplot,d,a);l.setClipUrl(this.layers.grids,d,a)};a.updateLayers=function(b){var a=this.layers,c=["draglayer","plotbg","backplot","grids"];"below traces"===b.aaxis.layer&&c.push("aaxis","aline");"below traces"===b.baxis.layer&&c.push("baxis","bline");"below traces"===b.caxis.layer&&c.push("caxis","cline");c.push("frontplot");"above traces"===b.aaxis.layer&&c.push("aaxis","aline");"above traces"===b.baxis.layer&&c.push("baxis","bline");"above traces"===
b.caxis.layer&&c.push("caxis","cline");b=this.plotContainer.selectAll("g.toplevel").data(c,String);var d=["agrid","bgrid","cgrid"];b.enter().append("g").attr("class",function(b){return"toplevel "+b}).each(function(b){var c=m.select(this);a[b]=c;"frontplot"===b?c.append("g").classed("scatterlayer",!0):"backplot"===b?c.append("g").classed("maplayer",!0):"plotbg"===b?c.append("path").attr("d","M0,0Z"):"aline"===b||"bline"===b||"cline"===b?c.append("path"):"grids"===b&&d.forEach(function(b){a[b]=c.append("g").classed("grid "+
b,!0)})});b.order()};var C=Math.sqrt(4/3);a.adjustLayout=function(b,a){var c=this,e=b.domain,g=(e.x[0]+e.x[1])/2,h=(e.y[0]+e.y[1])/2,k=e.x[1]-e.x[0],m=e.y[1]-e.y[0],r=k*a.w,n=m*a.h,u=b.sum,p=b.aaxis.min,q=b.baxis.min,v=b.caxis.min;if(r>C*n){var w=n;e=w*C}else e=r,w=e/C;r=k*e/r;m=m*w/n;k=a.l+a.w*g-e/2;a=a.t+a.h*(1-h)-w/2;c.x0=k;c.y0=a;c.w=e;c.h=w;c.sum=u;c.xaxis={type:"linear",range:[p+2*v-u,u-p-2*q],domain:[g-r/2,g+r/2],_id:"x"};f(c.xaxis,c.graphDiv._fullLayout);c.xaxis.setScale();c.xaxis.isPtWithinRange=
function(b){return b.a>=c.aaxis.range[0]&&b.a<=c.aaxis.range[1]&&b.b>=c.baxis.range[1]&&b.b<=c.baxis.range[0]&&b.c>=c.caxis.range[1]&&b.c<=c.caxis.range[0]};c.yaxis={type:"linear",range:[p,u-q-v],domain:[h-m/2,h+m/2],_id:"y"};f(c.yaxis,c.graphDiv._fullLayout);c.yaxis.setScale();c.yaxis.isPtWithinRange=function(){return!0};r=c.yaxis.domain[0];g=c.aaxis=d({},b.aaxis,{range:[p,u-q-v],side:"left",tickangle:(+b.aaxis.tickangle||0)-30,domain:[r,r+m*C],anchor:"free",position:0,_id:"y",_length:e});f(g,c.graphDiv._fullLayout);
g.setScale();h=c.baxis=d({},b.baxis,{range:[u-p-v,q],side:"bottom",domain:c.xaxis.domain,anchor:"free",position:0,_id:"x",_length:e});f(h,c.graphDiv._fullLayout);h.setScale();b=c.caxis=d({},b.caxis,{range:[u-p-q,v],side:"right",tickangle:(+b.caxis.tickangle||0)+30,domain:[r,r+m*C],anchor:"free",position:0,_id:"y",_length:e});f(b,c.graphDiv._fullLayout);b.setScale();u="M"+k+","+(a+w)+"h"+e+"l-"+e/2+",-"+w+"Z";c.clipDef.select("path").attr("d",u);c.layers.plotbg.select("path").attr("d",u);u="M0,"+w+
"h"+e+"l-"+e/2+",-"+w+"Z";c.clipDefRelative.select("path").attr("d",u);u="translate("+k+","+a+")";c.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",u);c.clipDefRelative.select("path").attr("transform",null);u="translate("+(k-h._offset)+","+(a+w)+")";c.layers.baxis.attr("transform",u);c.layers.bgrid.attr("transform",u);u="translate("+(k+e/2)+","+a+")rotate(30)translate(0,"+-g._offset+")";c.layers.aaxis.attr("transform",u);c.layers.agrid.attr("transform",u);u="translate("+(k+e/2)+
","+a+")rotate(-30)translate(0,"+-b._offset+")";c.layers.caxis.attr("transform",u);c.layers.cgrid.attr("transform",u);c.drawAxes(!0);c.layers.aline.select("path").attr("d",g.showline?"M"+k+","+(a+w)+"l"+e/2+",-"+w:"M0,0").call(t.stroke,g.linecolor||"#000").style("stroke-width",(g.linewidth||0)+"px");c.layers.bline.select("path").attr("d",h.showline?"M"+k+","+(a+w)+"h"+e:"M0,0").call(t.stroke,h.linecolor||"#000").style("stroke-width",(h.linewidth||0)+"px");c.layers.cline.select("path").attr("d",b.showline?
"M"+(k+e/2)+","+a+"l"+e/2+","+w:"M0,0").call(t.stroke,b.linecolor||"#000").style("stroke-width",(b.linewidth||0)+"px");c.graphDiv._context.staticPlot||c.initInteractions();l.setClipUrl(c.layers.frontplot,c._hasClipOnAxisFalse?null:c.clipId,c.graphDiv)};a.drawAxes=function(b){var a=this.graphDiv,c=this.id.substr(7)+"title",d=this.layers,f=this.aaxis,g=this.baxis,h=this.caxis;this.drawAx(f);this.drawAx(g);this.drawAx(h);if(b){b=Math.max(f.showticklabels?f.tickfont.size/2:0,(h.showticklabels?.75*h.tickfont.size:
0)+("outside"===h.ticks?.87*h.ticklen:0));var k=(g.showticklabels?g.tickfont.size:0)+("outside"===g.ticks?g.ticklen:0)+3;d["a-title"]=w.draw(a,"a"+c,{propContainer:f,propName:this.id+".aaxis.title",placeholder:e(a,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-f.title.font.size/3-b,"text-anchor":"middle"}});d["b-title"]=w.draw(a,"b"+c,{propContainer:g,propName:this.id+".baxis.title",placeholder:e(a,"Click to enter Component B title"),attributes:{x:this.x0-k,y:this.y0+
this.h+.83*g.title.font.size+k,"text-anchor":"middle"}});d["c-title"]=w.draw(a,"c"+c,{propContainer:h,propName:this.id+".caxis.title",placeholder:e(a,"Click to enter Component C title"),attributes:{x:this.x0+this.w+k,y:this.y0+this.h+.83*h.title.font.size+k,"text-anchor":"middle"}})}};a.drawAx=function(b){var a=this.graphDiv,c=b._name,d=c.charAt(0),e=b._id;c=this.layers[c];var f=d+"tickLayout",h=b.ticks+String(b.ticklen)+String(b.showticklabels);this[f]!==h&&(c.selectAll("."+e+"tick").remove(),this[f]=
h);b.setScale();e=r.calcTicks(b);f=r.clipEnds(b,e);h=r.makeTransFn(b);var k=r.getTickSigns(b)[2],l=g.deg2rad(30),m=k*(b.linewidth||1)/2;k*=b.ticklen;var t=this.w,n=this.h;t={a:"M0,0l"+n+",-"+t/2,b:"M0,0l-"+t/2+",-"+n,c:"M0,0l-"+n+","+t/2}[d];r.drawTicks(a,b,{vals:"inside"===b.ticks?f:e,layer:c,path:"b"===d?"M0,"+m+"l"+Math.sin(l)*k+","+Math.cos(l)*k:"M"+m+",0l"+Math.cos(l)*k+","+-Math.sin(l)*k,transFn:h,crisp:!1});r.drawGrid(a,b,{vals:f,layer:this.layers[d+"grid"],path:t,transFn:h,crisp:!1});r.drawLabels(a,
b,{vals:e,layer:c,transFn:h,labelFns:r.makeLabelFns(b,0,30)})};q=x.MINZOOM/2+.87;var B="m-0.87,.5h"+q+"v3h-"+(q+5.2)+"l"+(q/2+2.6)+",-"+(.87*q+4.5)+"l2.6,1.5l-"+q/2+","+.87*q+"Z",D="m0.87,.5h-"+q+"v3h"+(q+5.2)+"l-"+(q/2+2.6)+",-"+(.87*q+4.5)+"l-2.6,1.5l"+q/2+","+.87*q+"Z",G="m0,1l"+q/2+","+.87*q+"l2.6,-1.5l-"+(q/2+2.6)+",-"+(.87*q+4.5)+"l-"+(q/2+2.6)+","+(.87*q+4.5)+"l2.6,1.5l"+q/2+",-"+.87*q+"Z",E=!0;a.initInteractions=function(){function a(b){var a={};a[n.id+".aaxis.min"]=b.a;a[n.id+".baxis.min"]=
b.b;a[n.id+".caxis.min"]=b.c;return a}function c(c,d){var e=q._fullLayout.clickmode;k(q);2===c&&(q.emit("plotly_doubleclick",null),b.call("_guiRelayout",q,a({a:0,b:0,c:0})));-1<e.indexOf("select")&&1===c&&A(d,q,[n.xaxis],[n.yaxis],n.id,Q);-1<e.indexOf("event")&&v.click(q,d,n.id)}function d(b,c){var d=T+b,e=V+c;c=Math.max(0,Math.min(1,1-V/n.h,1-e/n.h));b=Math.max(0,Math.min(1,1-(T+(n.h-V)/Math.sqrt(3))/n.w,1-(d+(n.h-e)/Math.sqrt(3))/n.w));d=Math.max(0,Math.min(1,(T-(n.h-V)/Math.sqrt(3))/n.w,(d-(n.h-
e)/Math.sqrt(3))/n.w));e=(c/2+d)*n.w;var f=(1-c/2-b)*n.w,g=(e+f)/2,h=f-e,k=(1-c)*n.h,l=k-h/C;h<x.MINZOOM?(Z=Y,ea.attr("d",U),fa.attr("d","M0,0Z")):(Z={a:Y.a+c*ca,b:Y.b+b*ca,c:Y.c+d*ca},ea.attr("d",U+"M"+e+","+k+"H"+f+"L"+g+","+l+"L"+e+","+k+"Z"),fa.attr("d","M"+T+","+V+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+e+","+k+B+"M"+f+","+k+D+"M"+g+","+l+G));X||(ea.transition().style("fill",.2<R?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),fa.transition().style("opacity",1).duration(200),X=!0);q.emit("plotly_relayouting",
a(Z))}function f(){k(q);Z!==Y&&(b.call("_guiRelayout",q,a(Z)),E&&q.data&&q._context.showTips&&(g.notifier(e(q,"Double-click to zoom back out"),"long"),E=!1))}function m(b,c){var d=b/n.xaxis._m,e=c/n.yaxis._m;Z={a:Y.a-e,b:Y.b+(d+e)/2,c:Y.c-(d-e)/2};d=[Z.a,Z.b,Z.c].sort();e=d.indexOf(Z.a);var f=d.indexOf(Z.b),g=d.indexOf(Z.c);0>d[0]&&(0>d[1]+d[0]/2?(d[2]+=d[0]+d[1],d[0]=d[1]=0):(d[2]+=d[0]/2,d[1]+=d[0]/2,d[0]=0),Z={a:d[e],b:d[f],c:d[g]},c=(Y.a-Z.a)*n.yaxis._m,b=(Y.c-Z.c-Y.b+Z.b)*n.xaxis._m);d="translate("+
(n.x0+b)+","+(n.y0+c)+")";n.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",d);b="translate("+-b+","+-c+")";n.clipDefRelative.select("path").attr("transform",b);n.aaxis.range=[Z.a,n.sum-Z.b-Z.c];n.baxis.range=[n.sum-Z.a-Z.c,Z.b];n.caxis.range=[n.sum-Z.a-Z.b,Z.c];n.drawAxes(!1);n._hasClipOnAxisFalse&&n.plotContainer.select(".scatterlayer").selectAll(".trace").call(l.hideOutsideRangePoints,n);q.emit("plotly_relayouting",a(Z))}function r(){b.call("_guiRelayout",q,a(Z))}var n=this,
p=n.layers.plotbg.select("path").node(),q=n.graphDiv,w=q._fullLayout._zoomlayer,Q={element:p,gd:q,plotinfo:{id:n.id,xaxis:n.xaxis,yaxis:n.yaxis},subplot:n.id,prepFn:function(b,a,e){Q.xaxes=[n.xaxis];Q.yaxes=[n.yaxis];var g=q._fullLayout.dragmode;Q.minDrag="lasso"===g?1:void 0;"zoom"===g?(Q.moveFn=d,Q.clickFn=c,Q.doneFn=f,b=p.getBoundingClientRect(),T=a-b.left,V=e-b.top,Z=Y={a:n.aaxis.range[0],b:n.baxis.range[1],c:n.caxis.range[1]},ca=n.aaxis.range[1]-Y.a,R=h(n.graphDiv._fullLayout[n.id].bgcolor).getLuminance(),
U="M0,"+n.h+"L"+n.w/2+", 0L"+n.w+","+n.h+"Z",X=!1,ea=w.append("path").attr("class","zoombox").attr("transform","translate("+n.x0+", "+n.y0+")").style({fill:.2<R?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",U),fa=w.append("path").attr("class","zoombox-corners").attr("transform","translate("+n.x0+", "+n.y0+")").style({fill:t.background,stroke:t.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),z(q)):"pan"===g?(Q.moveFn=m,Q.clickFn=c,Q.doneFn=r,Z=Y={a:n.aaxis.range[0],b:n.baxis.range[1],
c:n.caxis.range[1]},z(q)):"select"!==g&&"lasso"!==g||y(b,a,e,Q,g)}},T,V,Y,ca,Z,R,U,X,ea,fa;p.onmousemove=function(b){v.hover(q,b,n.id);q._fullLayout._lasthover=p;q._fullLayout._hoversubplot=n.id};p.onmouseout=function(b){q._dragging||u.unhover(q,b)};u.init(Q)}},{"../../components/color":591,"../../components/dragelement":609,"../../components/drawing":612,"../../components/fx":629,"../../components/titles":678,"../../lib":716,"../../lib/extend":707,"../../registry":845,"../cartesian/axes":764,"../cartesian/constants":770,
"../cartesian/select":781,"../cartesian/set_convert":782,"../plots":825,d3:165,tinycolor2:535}],845:[function(a,q,p){function n(b){if(b.layoutAttributes&&(b=b.layoutAttributes._arrayAttrRegexps))for(var a=0;a<b.length;a++)t(p.layoutArrayRegexes,b[a])}function k(b,a){(b=p.componentsRegistry[b].schema)&&b.traces&&(b=b.traces[a])&&u(p.modules[a]._module.attributes,b)}function m(b,a){(b=p.componentsRegistry[b].schema)&&b.transforms&&(b=b.transforms[a])&&u(p.transformsRegistry[a].attributes,b)}function h(b,
a){if((b=p.componentsRegistry[b].schema)&&b.subplots){var c=p.subplotsRegistry[a];a=c.layoutAttributes;c="subplot"===c.attr?c.name:c.attr;Array.isArray(c)&&(c=c[0]);b=b.subplots[c];a&&b&&u(a,b)}}function b(b){"object"===typeof b&&(b=b.type);return b}var g=a("./lib/loggers"),e=a("./lib/noop"),t=a("./lib/push_unique"),l=a("./lib/is_plain_object"),f=a("./lib/dom").addStyleRule;q=a("./lib/extend");var d=a("./plots/attributes"),c=a("./plots/layout_attributes"),r=q.extendFlat,u=q.extendDeepAll;p.modules=
{};p.allCategories={};p.allTypes=[];p.subplotsRegistry={};p.transformsRegistry={};p.componentsRegistry={};p.layoutArrayContainers=[];p.layoutArrayRegexes=[];p.traceLayoutAttributes={};p.localeRegistry={};p.apiMethodRegistry={};p.collectableSubplotTypes=null;p.register=function(b){p.collectableSubplotTypes=null;if(b)b&&!Array.isArray(b)&&(b=[b]);else throw Error("No argument passed to Plotly.register.");for(var a=0;a<b.length;a++){var d=b[a];if(!d)throw Error("Invalid module was attempted to be registered!");
switch(d.moduleType){case "trace":var e=void 0,q=void 0,v=d.name,C=d.categories,B=d.meta;if(p.modules[v])g.log("Type "+v+" already registered");else{if(!p.subplotsRegistry[d.basePlotModule.name]){var D=void 0,G=d.basePlotModule,E=G.name;if(p.subplotsRegistry[E])g.log("Plot type "+E+" already registered.");else for(D in n(G),p.subplotsRegistry[E]=G,p.componentsRegistry)h(D,G.name)}D={};for(G=0;G<C.length;G++)D[C[G]]=!0,p.allCategories[C[G]]=!0;p.modules[v]={_module:d,categories:D};B&&Object.keys(B).length&&
(p.modules[v].meta=B);p.allTypes.push(v);for(q in p.componentsRegistry)k(q,v);d.layoutAttributes&&r(p.traceLayoutAttributes,d.layoutAttributes);d=d.basePlotModule;q=d.name;if("mapbox"===q)for(e in d=d.constants.styleRules,d)f(".js-plotly-plot .plotly .mapboxgl-"+e,d[e]);"geo"!==q&&"mapbox"!==q||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}break;case "transform":e=void 0;q=d;if("string"!==typeof q.name)throw Error("Transform module *name* must be a string.");d="Transform module "+
q.name;v="function"===typeof q.transform;C="function"===typeof q.calcTransform;if(!v&&!C)throw Error(d+" is missing a *transform* or *calcTransform* method.");v&&C&&g.log([d+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed before all *calcTransform* methods."].join(" "));l(q.attributes)||g.log(d+" registered without an *attributes* object.");"function"!==typeof q.supplyDefaults&&g.log(d+" registered without a *supplyDefaults* method.");
p.transformsRegistry[q.name]=q;for(e in p.componentsRegistry)m(e,q.name);break;case "component":v=q=e=void 0;if("string"!==typeof d.name)throw Error("Component module *name* must be a string.");C=d.name;p.componentsRegistry[C]=d;d.layoutAttributes&&(d.layoutAttributes._isLinkedToArray&&t(p.layoutArrayContainers,C),n(d));for(v in p.modules)k(C,v);for(q in p.subplotsRegistry)h(C,q);for(e in p.transformsRegistry)m(C,e);d.schema&&d.schema.layout&&u(c,d.schema.layout);break;case "locale":v=d;d=v.name;
e=d.split("-")[0];q=v.dictionary;v=v.format;C=q&&Object.keys(q).length;B=v&&Object.keys(v).length;D=p.localeRegistry;(G=D[d])||(D[d]=G={});e!==d&&((d=D[e])||(D[e]=d={}),C&&d.dictionary===G.dictionary&&(d.dictionary=q),B&&d.format===G.format&&(d.format=v));C&&(G.dictionary=q);B&&(G.format=v);break;case "apiMethod":p.apiMethodRegistry[d.name]=d.fn;break;default:throw Error("Invalid module was attempted to be registered!");}}};p.getModule=function(a){return(a=p.modules[b(a)])?a._module:!1};p.traceIs=
function(a,c){a=b(a);if("various"===a)return!1;var e=p.modules[a];e||(a&&"area"!==a&&g.log("Unrecognized trace type "+a+"."),e=p.modules[d.type.dflt]);return!!e.categories[c]};p.getTransformIndices=function(b,a){var c=[];b=b.transforms||[];for(var d=0;d<b.length;d++)b[d].type===a&&c.push(d);return c};p.hasTransform=function(b,a){b=b.transforms||[];for(var c=0;c<b.length;c++)if(b[c].type===a)return!0;return!1};p.getComponentMethod=function(b,a){return(b=p.componentsRegistry[b])?b[a]||e:e};p.call=function(){var b=
arguments[0],a=[].slice.call(arguments,1);return p.apiMethodRegistry[b].apply(null,a)}},{"./lib/dom":705,"./lib/extend":707,"./lib/is_plain_object":717,"./lib/loggers":720,"./lib/noop":725,"./lib/push_unique":730,"./plots/attributes":761,"./plots/layout_attributes":816}],846:[function(a,q,p){function n(b){switch(b){case "themes__thumb":b={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case "thumbnail":b={title:{text:""},hidesources:!0,
showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:b={}}return b}var k=a("../registry");a=a("../lib");var m=a.extendFlat,h=a.extendDeep;q.exports=function(b,a){b.framework&&b.framework.isPolar&&(b=b.framework.getConfig());var e,g=b.layout,l=h([],b.data);g=h({},g,n(a.tileClass));b=b._context||{};a.width&&(g.width=a.width);a.height&&(g.height=a.height);if("thumbnail"===a.tileClass||"themes__thumb"===a.tileClass){g.annotations=[];var f=Object.keys(g);
for(e=0;e<f.length;e++)-1<["xaxis","yaxis","zaxis"].indexOf(f[e].slice(0,5))&&(g[f[e]].title={text:""});for(e=0;e<l.length;e++)f=l[e],f.showscale=!1,f.marker&&(f.marker.showscale=!1),k.traceIs(f,"pie-like")&&(f.textposition="none")}if(Array.isArray(a.annotations))for(e=0;e<a.annotations.length;e++)g.annotations.push(a.annotations[e]);f=Object.keys(g).filter(function(b){return b.match(/^scene\d*$/)});if(f.length){var d={};"thumbnail"===a.tileClass&&(d={title:{text:""},showaxeslabels:!1,showticklabels:!1,
linetickenable:!1});for(e=0;e<f.length;e++){var c=g[f[e]];c.xaxis||(c.xaxis={});c.yaxis||(c.yaxis={});c.zaxis||(c.zaxis={});m(c.xaxis,d);m(c.yaxis,d);m(c.zaxis,d);c._scene=null}}e=document.createElement("div");a.tileClass&&(e.className=a.tileClass);l={gd:e,td:e,layout:g,data:l,config:{staticPlot:void 0===a.staticPlot?!0:a.staticPlot,plotGlPixelRatio:void 0===a.plotGlPixelRatio?2:a.plotGlPixelRatio,displaylogo:a.displaylogo||!1,showLink:a.showLink||!1,showTips:a.showTips||!1,mapboxAccessToken:b.mapboxAccessToken}};
"transparent"!==a.setBackground&&(l.config.setBackground=a.setBackground||"opaque");l.gd.defaultLayout=n(a.tileClass);return l}},{"../lib":716,"../registry":845}],847:[function(a,q,p){var n=a("../lib"),k=a("../plot_api/to_image"),m=a("./filesaver"),h=a("./helpers");q.exports=function(b,a){var e;n.isPlainObject(b)||(e=n.getGraphDiv(b));a=a||{};a.format=a.format||"png";a.imageDataOnly=!0;return new Promise(function(g,l){e&&e._snapshotInProgress&&l(Error("Snapshotting already in progress."));n.isIE()&&
"svg"!==a.format&&l(Error(h.MSG_IE_BAD_FORMAT));e&&(e._snapshotInProgress=!0);var f=k(b,a),d=a.filename||b.fn||"newplot";d+="."+a.format;f.then(function(b){e&&(e._snapshotInProgress=!1);return m(b,d,a.format)}).then(function(b){g(b)}).catch(function(b){e&&(e._snapshotInProgress=!1);l(b)})})}},{"../lib":716,"../plot_api/to_image":757,"./filesaver":848,"./helpers":849}],848:[function(a,q,p){var n=a("../lib"),k=a("./helpers");q.exports=function(a,h,b){var g=document.createElement("a"),e="download"in
g;return new Promise(function(m,l){n.isIE9orBelow()&&l(Error("IE \x3c 10 unsupported"));if(n.isSafari())return k.octetStream(("svg"===b?",":";base64,")+encodeURIComponent(a)),m(h);if(n.isIE())return l=k.createBlob(a,"svg"),window.navigator.msSaveBlob(l,h),m(h);if(e)return l=k.createBlob(a,b),l=k.createObjectURL(l),g.href=l,g.download=h,document.body.appendChild(g),g.click(),document.body.removeChild(g),k.revokeObjectURL(l),m(h);l(Error("download error"))})}},{"../lib":716,"./helpers":849}],849:[function(a,
q,p){var n=a("../registry");p.getDelay=function(a){return a._has?a._has("gl3d")||a._has("gl2d")||a._has("mapbox")?500:0:0};p.getRedrawFunc=function(a){return function(){var h=a._fullLayout||{};(h._has&&h._has("polar")||!a.data||!a.data[0]||!a.data[0].r)&&n.getComponentMethod("colorbar","draw")(a)}};p.encodeSVG=function(a){return"data:image/svg+xml,"+encodeURIComponent(a)};var k=window.URL||window.webkitURL;p.createObjectURL=function(a){return k.createObjectURL(a)};p.revokeObjectURL=function(a){return k.revokeObjectURL(a)};
p.createBlob=function(a,h){if("svg"===h)return new window.Blob([a],{type:"image/svg+xml;charset\x3dutf-8"});a=window.atob(a);for(var b=a.length,g=new ArrayBuffer(b),e=new Uint8Array(g),k=0;k<b;k++)e[k]=a.charCodeAt(k);return new window.Blob([g],{type:"image/"+h})};p.octetStream=function(a){document.location.href="data:application/octet-stream"+a};p.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/;p.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":845}],
850:[function(a,q,p){p=a("./helpers");a={getDelay:p.getDelay,getRedrawFunc:p.getRedrawFunc,clone:a("./cloneplot"),toSVG:a("./tosvg"),svgToImg:a("./svgtoimg"),toImage:a("./toimage"),downloadImage:a("./download")};q.exports=a},{"./cloneplot":846,"./download":847,"./helpers":849,"./svgtoimg":851,"./toimage":852,"./tosvg":853}],851:[function(a,q,p){var n=a("../lib"),k=a("events").EventEmitter,m=a("./helpers");q.exports=function(a){var b=a.emitter||new k,g=new Promise(function(e,h){var k=window.Image,
f=a.svg,d=a.format||"png";if(n.isIE()&&"svg"!==d)return k=Error(m.MSG_IE_BAD_FORMAT),h(k),a.promise?g:b.emit("error",k);var c=a.canvas,r=a.scale||1,t=r*(a.width||300),p=r*(a.height||150),q=c.getContext("2d"),y=new k;if("svg"===d||n.isIE9orBelow()||n.isSafari())var A=m.encodeSVG(f);else{var z=m.createBlob(f,"svg");A=m.createObjectURL(z)}c.width=t;c.height=p;y.onload=function(){z=null;m.revokeObjectURL(A);"svg"!==d&&q.drawImage(y,0,0,t,p);switch(d){case "jpeg":var f=c.toDataURL("image/jpeg");break;
case "png":f=c.toDataURL("image/png");break;case "webp":f=c.toDataURL("image/webp");break;case "svg":f=A;break;default:if(h(Error("Image format is not jpeg, png, svg or webp.")),!a.promise)return b.emit("error","Image format is not jpeg, png, svg or webp.")}e(f);a.promise||b.emit("success",f)};y.onerror=function(c){z=null;m.revokeObjectURL(A);h(c);if(!a.promise)return b.emit("error",c)};y.src=A});return a.promise?g:b}},{"../lib":716,"./helpers":849,events:106}],852:[function(a,q,p){var n=a("events").EventEmitter,
k=a("../registry"),m=a("../lib"),h=a("./helpers"),b=a("./cloneplot"),g=a("./tosvg"),e=a("./svgtoimg");q.exports=function(a,l){var f=new n;a=b(a,{format:"png"});var d=a.gd;d.style.position="absolute";d.style.left="-5000px";document.body.appendChild(d);var c=h.getRedrawFunc(d);k.call("plot",d,a.data,a.layout,a.config).then(c).then(function(){var b=h.getDelay(d._fullLayout);setTimeout(function(){var b=g(d),a=document.createElement("canvas");a.id=m.randstr();f=e({format:l.format,width:d._fullLayout.width,
height:d._fullLayout.height,canvas:a,emitter:f,svg:b});f.clean=function(){d&&document.body.removeChild(d)}},b)}).catch(function(b){f.emit("error",b)});return f}},{"../lib":716,"../registry":845,"./cloneplot":846,"./helpers":849,"./svgtoimg":851,"./tosvg":853,events:106}],853:[function(a,q,p){function n(b){var a=k.select("body").append("div").style({display:"none"}).html("");b=b.replace(/(&[^;]*;)/gi,function(b){return"\x26lt;"===b?"\x26#60;":"\x26rt;"===b?"\x26#62;":-1!==b.indexOf("\x3c")||-1!==b.indexOf("\x3e")?
"":a.html(b).text()});a.remove();return b}var k=a("d3"),m=a("../lib"),h=a("../components/drawing"),b=a("../components/color"),g=a("../constants/xmlns_namespaces"),e=/"/g,t=/("TOBESTRIPPED)|(TOBESTRIPPED")/g;q.exports=function(a,f,d){var c=a._fullLayout,l=c._paper,u=c._toppaper,p=c.width,q=c.height,y;l.insert("rect",":first-child").call(h.setRect,0,0,p,q).call(b.fill,c.paper_bgcolor);var A=c._basePlotModules||[];for(y=0;y<A.length;y++){var z=A[y];z.toSVG&&z.toSVG(a)}if(u)for(y=u.node().childNodes,
a=Array.prototype.slice.call(y),y=0;y<a.length;y++)u=a[y],u.childNodes.length&&l.node().appendChild(u);c._draggers&&c._draggers.remove();l.node().style.background="";l.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var b=k.select(this);if("hidden"===this.style.visibility||"none"===this.style.display)b.remove();else{b.style({visibility:null,display:null});var a=this.style.fontFamily;a&&-1!==a.indexOf('"')&&b.style("font-family",a.replace(e,"TOBESTRIPPED"))}});if(c._gradientUrlQueryParts){y=
[];for(var x in c._gradientUrlQueryParts)y.push(x);y.length&&l.selectAll(y.join(",")).each(function(){var b=k.select(this),a=this.style.fill;a&&-1!==a.indexOf("url(")&&b.style("fill",a.replace(e,"TOBESTRIPPED"));(a=this.style.stroke)&&-1!==a.indexOf("url(")&&b.style("stroke",a.replace(e,"TOBESTRIPPED"))})}"pdf"!==f&&"eps"!==f||l.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0);l.node().setAttributeNS(g.xmlns,"xmlns",g.svg);l.node().setAttributeNS(g.xmlns,"xmlns:xlink",g.xlink);"svg"===
f&&d&&(l.attr("width",d*p),l.attr("height",d*q),l.attr("viewBox","0 0 "+p+" "+q));f=(new window.XMLSerializer).serializeToString(l.node());f=n(f);f=f.replace(/&(?!\w+;|#[0-9]+;| #x[0-9A-F]+;)/g,"\x26amp;");f=f.replace(t,"'");m.isIE()&&(f=f.replace(/"/gi,"'"),f=f.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),f=f.replace(/(\\')/gi,'"'));return f}},{"../components/color":591,"../components/drawing":612,"../constants/xmlns_namespaces":693,"../lib":716,d3:165}],854:[function(a,q,p){var n=a("../../lib");q.exports=
function(a,m){for(var h=0;h<a.length;h++)a[h].i=h;n.mergeArray(m.text,a,"tx");n.mergeArray(m.hovertext,a,"htx");if(m=m.marker)if(n.mergeArray(m.opacity,a,"mo",!0),n.mergeArray(m.color,a,"mc"),m=m.line)n.mergeArray(m.color,a,"mlc"),n.mergeArrayCastPositive(m.width,a,"mlw")}},{"../../lib":716}],855:[function(a,q,p){p=a("../scatter/attributes");var n=a("../../plots/template_attributes").hovertemplateAttrs,k=a("../../plots/template_attributes").texttemplateAttrs,m=a("../../components/colorscale/attributes"),
h=a("../../plots/font_attributes"),b=a("./constants");a=a("../../lib/extend").extendFlat;h=h({editType:"calc",arrayOk:!0,colorEditType:"style"});var g=a({},p.marker.line.width,{dflt:0});g=a({width:g,editType:"calc"},m("marker.line"));m=a({line:g,editType:"calc"},m("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"}});q.exports={x:p.x,x0:p.x0,dx:p.dx,y:p.y,y0:p.y0,dy:p.dy,text:p.text,texttemplate:k({editType:"plot"},{keys:b.eventDataKeys}),hovertext:p.hovertext,hovertemplate:n({},
{keys:b.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:a({},h,{}),insidetextfont:a({},h,{}),outsidetextfont:a({},h,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:a({},p.cliponaxis,
{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:m,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:p.selected.marker.opacity,color:p.selected.marker.color,editType:"style"},textfont:p.selected.textfont,
editType:"style"},unselected:{marker:{opacity:p.unselected.marker.opacity,color:p.unselected.marker.color,editType:"style"},textfont:p.unselected.textfont,editType:"style"},r:p.r,t:p.t,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":598,"../../lib/extend":707,"../../plots/font_attributes":790,"../../plots/template_attributes":840,"../scatter/attributes":1119,"./constants":857}],856:[function(a,q,p){var n=a("../../plots/cartesian/axes"),
k=a("../../components/colorscale/helpers").hasColorscale,m=a("../../components/colorscale/calc"),h=a("./arrays_to_calcdata"),b=a("../scatter/calc_selection");q.exports=function(a,e){var g=n.getFromId(a,e.xaxis||"x"),l=n.getFromId(a,e.yaxis||"y");if("h"===e.orientation){var f=g.makeCalcdata(e,"x");g=l.makeCalcdata(e,"y")}else f=l.makeCalcdata(e,"y"),g=g.makeCalcdata(e,"x");l=Math.min(g.length,f.length);for(var d=Array(l),c=0;c<l;c++)d[c]={p:g[c],s:f[c]},e.ids&&(d[c].id=String(e.ids[c]));k(e,"marker")&&
m(a,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"});k(e,"marker.line")&&m(a,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"});h(d,e);b(d,e);return d}},{"../../components/colorscale/calc":599,"../../components/colorscale/helpers":602,"../../plots/cartesian/axes":764,"../scatter/calc_selection":1121,"./arrays_to_calcdata":854}],857:[function(a,q,p){q.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],858:[function(a,q,p){function n(a,c,r,n,p){if(n.length){var q;k(r,
n);switch(p.mode){case "overlay":m(c,r,n,p);break;case "group":var v=[];var x=[];for(q=0;q<n.length;q++){var z=n[q];var B=z[0].trace;void 0===B.offset?x.push(z):v.push(z)}if(x.length){x=new A(x,{sepNegVal:!1,overlapNoMerge:!p.norm});var C=a._fullLayout;a=x.minDiff;q=x.traces;z=q.length;B=x.positions.length!==x.distinctPositions.length;var D=a*(1-p.gap),M=y(C,c._id)+q[0][0].trace.orientation;C=C._alignmentOpts[M]||{};for(M=0;M<z;M++){var I=q[M],N=I[0].trace,O=Object.keys((C[N.alignmentgroup]||{}).offsetGroups||
{}).length;var P=O?D/O:B?D/z:D;var Q=P*(1-(p.groupgap||0));N=O?((2*N._offsetIndex+1-O)*P-Q)/2:B?((2*M+1-z)*P-Q)/2:-Q/2;I=I[0].t;I.barwidth=Q;I.poffset=N;I.bargroupwidth=D;I.bardelta=a}x.binWidth=q[0][0].t.barwidth/100;b(x);g(c,x);e(c,x,B);a=x.traces;for(q=0;q<a.length;q++)if(z=a[q],void 0===z[0].trace.base)for(B=new A([z],{sepNegVal:!0,overlapNoMerge:!0}),D=0;D<z.length;D++)if(C=z[D],C.p!==u&&(M=B.put(C.p,C.b+C.s)))C.b=M;p.norm?(l(x),f(r,x,p)):t(r,x)}v.length&&m(c,r,v,p);break;case "stack":case "relative":v=
[];x=[];for(q=0;q<n.length;q++)z=n[q],B=z[0].trace,void 0===B.base?x.push(z):v.push(z);if(x.length){a=new A(x,{sepNegVal:"relative"===p.mode,overlapNoMerge:!(p.norm||"stack"===p.mode||"relative"===p.mode)});h(c,a,p);q=r._id.charAt(0);z=a.traces;for(M=0;M<z.length;M++)if(B=z[M],D=B[0].trace,"funnel"===D.type)for(Q=0;Q<B.length;Q++)I=B[Q],I.s!==u&&a.put(I.p,-.5*I.s);for(M=0;M<z.length;M++){B=z[M];D=B[0].trace;C="funnel"===D.type;N=[];for(Q=0;Q<B.length;Q++)I=B[Q],I.s!==u&&(P=C?I.s:I.s+I.b,O=a.put(I.p,
P),P=O+P,I.b=O,I[q]=P,p.norm||(N.push(P),I.hasB&&N.push(O)));p.norm||(D._extremes[r._id]=w.findExtremes(r,N,{tozero:!0,padded:!0}))}for(q=0;q<x.length;q++)for(z=x[q],B=0;B<z.length;B++)D=z[B],D.s!==u&&D.b+D.s===a.get(D.p,D.s)&&(D._outmost=!0);p.norm&&f(r,a,p)}v.length&&m(c,r,v,p)}d(n,c)}}function k(b,a){var d;for(d=0;d<a.length;d++){var e=a[d];var f=e[0].trace;var g="funnel"===f.type?f._base:f.base,h="h"===f.orientation?f.xcalendar:f.ycalendar,k="category"===b.type||"multicategory"===b.type?function(){return null}:
b.d2c;if(r(g)){for(f=0;f<Math.min(g.length,e.length);f++){var l=k(g[f],0,h);c(l)?(e[f].b=+l,e[f].hasB=1):e[f].b=0}for(;f<e.length;f++)e[f].b=0}else for(l=k(g,0,h),l=(g=c(l))?l:0,f=0;f<e.length;f++)e[f].b=l,g&&(e[f].hasB=1)}}function m(b,a,c,d){for(var e=0;e<c.length;e++){var g=new A([c[e]],{sepNegVal:!1,overlapNoMerge:!d.norm});h(b,g,d);d.norm?(l(g),f(a,g,d)):t(a,g)}}function h(a,c,d){var f=c.minDiff,h=c.traces,k=f*(1-d.gap);d=k*(1-(d.groupgap||0));for(var l=-d/2,m=0;m<h.length;m++){var r=h[m][0].t;
r.barwidth=d;r.poffset=l;r.bargroupwidth=k;r.bardelta=f}c.binWidth=h[0][0].t.barwidth/100;b(c);g(a,c);e(a,c)}function b(b){b=b.traces;var a,d;for(a=0;a<b.length;a++){var e=b[a],f=e[0],g=f.trace;f=f.t;var h=g._offset||g.offset,k=f.poffset;if(r(h)){var l=Array.prototype.slice.call(h,0,e.length);for(d=0;d<l.length;d++)c(l[d])||(l[d]=k);for(d=l.length;d<e.length;d++)l.push(k);f.poffset=l}else void 0!==h&&(f.poffset=h);d=g._width||g.width;g=f.barwidth;if(r(d)){var m=Array.prototype.slice.call(d,0,e.length);
for(d=0;d<m.length;d++)c(m[d])||(m[d]=g);for(d=m.length;d<e.length;d++)m.push(g);f.barwidth=m;if(void 0===h){l=[];for(d=0;d<e.length;d++)l.push(k+(g-m[d])/2);f.poffset=l}}else void 0!==d&&(f.barwidth=d,void 0===h&&(f.poffset=k+(g-d)/2))}}function g(b,a){a=a.traces;b=b._id.charAt(0);for(var c=0;c<a.length;c++){var d=a[c],e=d[0].t,f=e.poffset,g=Array.isArray(f);e=e.barwidth;for(var h=Array.isArray(e),k=0;k<d.length;k++){var l=d[k],m=l.w=h?e[k]:e;l[b]=l.p+(g?f[k]:f)+m/2}}}function e(b,a,c){var d=a.traces,
e=a.minDiff/2;w.minDtick(b,a.minDiff,a.distinctPositions[0],c);for(a=0;a<d.length;a++){c=d[a];var f=c[0],g=f.trace,h=[],k;for(k=0;k<c.length;k++){var l=c[k];var m=l.p-e;l=l.p+e;h.push(m,l)}if(g.width||g.offset){m=f.t;f=m.poffset;var r=m.barwidth,n=Array.isArray(f),t=Array.isArray(r);for(k=0;k<c.length;k++){l=c[k];var u=t?r[k]:r;m=l.p+(n?f[k]:f);l=m+u;h.push(m,l)}}g._extremes[b._id]=w.findExtremes(b,h,{padded:!1})}}function t(b,a){a=a.traces;for(var c=b._id.charAt(0),d=0;d<a.length;d++){for(var e=
a[d],f=e[0].trace,g=[],h=!0,k=0;k<e.length;k++){var l=e[k],m=l.b,r=m+l.s;l[c]=r;g.push(r);l.hasB&&g.push(m);l.hasB&&0<l.b&&0<l.s||(h=!1)}f._extremes[b._id]=w.findExtremes(b,g,{tozero:!h,padded:!0})}}function l(b){for(var a=b.traces,c=0;c<a.length;c++)for(var d=a[c],e=0;e<d.length;e++){var f=d[e];f.s!==u&&b.put(f.p,f.b+f.s)}}function f(b,a,d){function e(a){return c(b.c2l(a))&&(a<l-k||a>m+k||!c(l))}var f=a.traces,g=b._id.charAt(0),h="fraction"===d.norm?1:100,k=h/1E9,l=b.l2c(b.c2l(0)),m="stack"===d.mode?
h:l;for(d=0;d<f.length;d++){for(var r=f[d],n=r[0].trace,t=[],p=!0,q=!1,v=0;v<r.length;v++){var x=r[v];if(x.s!==u){var z=Math.abs(h/a.get(x.p,x.s));x.b*=z;x.s*=z;z=x.b;var A=z+x.s;x[g]=A;t.push(A);q=q||e(A);x.hasB&&(t.push(z),q=q||e(z));x.hasB&&0<x.b&&0<x.s||(p=!1)}}n._extremes[b._id]=w.findExtremes(b,t,{tozero:!p,padded:q})}}function d(b,a){a=a._id.charAt(0);var d={},e,f,g=Infinity,h=-Infinity;for(e=0;e<b.length;e++){var k=b[e];for(f=0;f<k.length;f++){var l=k[f].p;c(l)&&(g=Math.min(g,l),h=Math.max(h,
l))}}var m=1E4/(h-g);h=d.round=function(b){return String(Math.round(m*(b-g)))};for(e=0;e<b.length;e++){k=b[e];k[0].t.extents=d;l=k[0].t.poffset;var r=Array.isArray(l);for(f=0;f<k.length;f++){var n=k[f],t=n[a]-n.w/2;if(c(t)){var u=n[a]+n.w/2,p=h(n.p);d[p]=d[p]?[Math.min(t,d[p][0]),Math.max(u,d[p][1])]:[t,u]}n.p0=n.p+(r?l[f]:l);n.p1=n.p0+n.w;n.s0=n.b;n.s1=n.s0+n.s}}}var c=a("fast-isnumeric"),r=a("../../lib").isArrayOrTypedArray,u=a("../../constants/numerical").BADNUM,v=a("../../registry"),w=a("../../plots/cartesian/axes"),
y=a("../../plots/cartesian/axis_ids").getAxisGroup,A=a("./sieve.js");q.exports={crossTraceCalc:function(b,a){var c=a.xaxis;a=a.yaxis;for(var d=b._fullLayout,e=b._fullData,f=b.calcdata,g=[],h=[],k=0;k<e.length;k++){var l=e[k];!0===l.visible&&v.traceIs(l,"bar")&&l.xaxis===c._id&&l.yaxis===a._id&&("h"===l.orientation?g.push(f[k]):h.push(f[k]))}d={mode:d.barmode,norm:d.barnorm,gap:d.bargap,groupgap:d.bargroupgap};n(b,c,a,h,d);n(b,a,c,g,d)},setGroupPositions:n}},{"../../constants/numerical":692,"../../lib":716,
"../../plots/cartesian/axes":764,"../../plots/cartesian/axis_ids":767,"../../registry":845,"./sieve.js":868,"fast-isnumeric":228}],859:[function(a,q,p){function n(b,a,e,f){b=a.orientation;b=t(e,a[{v:"x",h:"y"}[b]+"axis"])+b;var c=e._alignmentOpts||{};e=f("alignmentgroup");var d=c[b];d||(d=c[b]={});(b=d[e])?b.traces.push(a):b=d[e]={traces:[a],alignmentIndex:Object.keys(d).length,offsetGroups:{}};f=f("offsetgroup");b=b.offsetGroups;e=b[f];f&&(e||(e=b[f]={offsetIndex:Object.keys(b).length}),a._offsetIndex=
e.offsetIndex)}function k(b,a,e,g,h,k){k=k||{};a=!1!==k.moduleHasSelected;var c=!1!==k.moduleHasUnselected,d=!1!==k.moduleHasConstrain,l=!1!==k.moduleHasCliponaxis,r=!1!==k.moduleHasTextangle,n=!1!==k.moduleHasInsideanchor,t=!!k.hasPathbar,u=Array.isArray(h)||"auto"===h;k=u||"inside"===h;h=u||"outside"===h;if(k||h)e=f(g,"textfont",e.font),u=m.extendFlat({},e),(b=!(b.textfont&&b.textfont.color))&&delete u.color,f(g,"insidetextfont",u),t&&(t=m.extendFlat({},e),b&&delete t.color,f(g,"pathbar.textfont",
t)),h&&f(g,"outsidetextfont",e),a&&g("selected.textfont.color"),c&&g("unselected.textfont.color"),d&&g("constraintext"),l&&g("cliponaxis"),r&&g("textangle"),g("texttemplate");k&&n&&g("insidetextanchor")}var m=a("../../lib"),h=a("../../components/color"),b=a("../../registry"),g=a("../scatter/xy_defaults"),e=a("./style_defaults"),t=a("../../plots/cartesian/axis_ids").getAxisGroup,l=a("./attributes"),f=m.coerceFont;q.exports={supplyDefaults:function(a,c,f,n){function d(b,d){return m.coerce(a,c,l,b,d)}
if(g(a,c,n,d)){d("orientation",c.x&&!c.y?"h":"v");d("base");d("offset");d("width");d("text");d("hovertext");d("hovertemplate");var r=d("textposition");k(a,c,n,d,r,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0});e(a,c,d,f,n);f=(c.marker.line||{}).color;n=b.getComponentMethod("errorbars","supplyDefaults");n(a,c,f||h.defaultLine,{axis:"y"});n(a,c,f||h.defaultLine,{axis:"x",inherit:"y"});m.coerceSelectionMarkerOpacity(c,
d)}else c.visible=!1},crossTraceDefaults:function(b,a){function c(b){return m.coerce(e._input,e,l,b)}if("group"===a.barmode)for(var d=0;d<b.length;d++){var e=b[d];if("bar"===e.type){var f=e._input;n(f,e,a,c)}}},handleGroupingDefaults:n,handleText:k}},{"../../components/color":591,"../../lib":716,"../../plots/cartesian/axis_ids":767,"../../registry":845,"../scatter/xy_defaults":1145,"./attributes":855,"./style_defaults":870}],860:[function(a,q,p){q.exports=function(a,k,m){a.x="xVal"in k?k.xVal:k.x;
a.y="yVal"in k?k.yVal:k.y;k.xa&&(a.xaxis=k.xa);k.ya&&(a.yaxis=k.ya);"h"===m.orientation?(a.label=a.y,a.value=a.x):(a.label=a.x,a.value=a.y);return a}},{}],861:[function(a,q,p){var n=a("fast-isnumeric"),k=a("tinycolor2"),m=a("../../lib").isArrayOrTypedArray;p.coerceString=function(a,b,g){if("string"===typeof b){if(b||!a.noBlank)return b}else if(("number"===typeof b||!0===b)&&!a.strict)return String(b);return void 0!==g?g:a.dflt};p.coerceNumber=function(a,b,g){if(n(b)){b=+b;var e=a.min,h=a.max;if(!(void 0!==
e&&b<e||void 0!==h&&b>h))return b}return void 0!==g?g:a.dflt};p.coerceColor=function(a,b,g){return k(b).isValid()?b:void 0!==g?g:a.dflt};p.coerceEnumerated=function(a,b,g){a.coerceNumber&&(b=+b);return-1!==a.values.indexOf(b)?b:void 0!==g?g:a.dflt};p.getValue=function(a,b){var g;Array.isArray(a)?b<a.length&&(g=a[b]):g=a;return g};p.getLineWidth=function(a,b){return 0<b.mlw?b.mlw:m(a.marker.line.width)?0:a.marker.line.width}},{"../../lib":716,"fast-isnumeric":228,tinycolor2:535}],862:[function(a,q,
p){function n(b,a,d,c){function e(b){return b[H]-b.w/2}function f(b){return b[H]+b.w/2}function h(b,a){return m.inbox(b-L,a-L,D+Math.min(1,Math.abs(a-b)/N)-1)}function k(b){return h(E(b),F(b))}function l(b){var a=J,c=b.b,d=b[K];B&&(b=Math.abs(b.rawS)||0,0<a?d+=b:0>a&&(d-=b));return m.inbox(c-a,d-a,D+(d-a)/(d-c)-1)}var n=b.cd,p=n[0].trace,q=n[0].t,C="closest"===c,B="waterfall"===p.type,D=b.maxHoverDistance,G=b.maxSpikeDistance,E=C?e:function(b){return Math.min(e(b),b.p-q.bardelta/2)},F=C?f:function(b){return Math.max(f(b),
b.p+q.bardelta/2)};if("h"===p.orientation){var L=d;var J=a;var H="y";var K="x";var M=l;var I=k}else L=a,J=d,H="x",K="y",I=l,M=k;a=b[H+"a"];d=b[K+"a"];var N=Math.abs(a.r2c(a.range[1])-a.r2c(a.range[0]));c=m.getDistanceFunction(c,M,I,function(b){return(M(b)+I(b))/2});m.getClosest(n,c,b);if(!1!==b.index)return C||(E=function(b){return Math.min(e(b),b.p-q.bargroupwidth/2)},F=function(b){return Math.max(f(b),b.p+q.bargroupwidth/2)}),n=n[b.index],c=p.base?n.b+n.s:n.s,b[K+"0"]=b[K+"1"]=d.c2p(n[K],!0),b[K+
"LabelVal"]=c,c=q.extents[q.extents.round(n.p)],b[H+"0"]=a.c2p(C?E(n):c[0],!0),b[H+"1"]=a.c2p(C?F(n):c[1],!0),b[H+"LabelVal"]=n.p,b.labelLabel=t(a,b[H+"LabelVal"]),b.valueLabel=t(d,b[K+"LabelVal"]),b.spikeDistance=(l(n)+function(b){return h(e(b),f(b))}(n))/2+G-D,b[H+"Spike"]=a.c2p(n.p,!0),g(n,p,b),b.hovertemplate=p.hovertemplate,b}function k(a,f){var d=f.mcc||a.marker.color,c=f.mlcc||a.marker.line.color;a=e(a,f);if(b.opacity(d))return d;if(b.opacity(c)&&a)return c}var m=a("../../components/fx"),h=
a("../../registry"),b=a("../../components/color"),g=a("../../lib").fillText,e=a("./helpers").getLineWidth,t=a("../../plots/cartesian/axes").hoverLabelText;q.exports={hoverPoints:function(b,a,d,c){if(b=n(b,a,d,c))return d=b.cd,a=d[0].trace,d=d[b.index],b.color=k(a,d),h.getComponentMethod("errorbars","hoverInfo")(d,a,b),[b]},hoverOnBars:n,getTraceColor:k}},{"../../components/color":591,"../../components/fx":629,"../../lib":716,"../../plots/cartesian/axes":764,"../../registry":845,"./helpers":861}],
863:[function(a,q,p){q.exports={attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyDefaults:a("./defaults").supplyDefaults,crossTraceDefaults:a("./defaults").crossTraceDefaults,supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc"),crossTraceCalc:a("./cross_trace_calc").crossTraceCalc,colorbar:a("../scatter/marker_colorbar"),arraysToCalcdata:a("./arrays_to_calcdata"),plot:a("./plot").plot,style:a("./style").style,styleOnSelect:a("./style").styleOnSelect,hoverPoints:a("./hover").hoverPoints,
eventData:a("./event_data"),selectPoints:a("./select"),moduleType:"trace",name:"bar",basePlotModule:a("../../plots/cartesian"),categories:"bar-like cartesian svg bar oriented errorBarsOK showLegend zoomScale".split(" "),animatable:!0,meta:{}}},{"../../plots/cartesian":775,"../scatter/marker_colorbar":1137,"./arrays_to_calcdata":854,"./attributes":855,"./calc":856,"./cross_trace_calc":858,"./defaults":859,"./event_data":860,"./hover":862,"./layout_attributes":864,"./layout_defaults":865,"./plot":866,
"./select":867,"./style":869}],864:[function(a,q,p){q.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],865:[function(a,q,p){var n=a("../../registry"),k=a("../../plots/cartesian/axes"),m=a("../../lib"),h=a("./layout_attributes");
q.exports=function(b,a,e){for(var g=!1,l=!1,f=!1,d={},c=m.coerce(b,a,h,"barmode",void 0),r=0;r<e.length;r++){var u=e[r];if(n.traceIs(u,"bar")&&u.visible){g=!0;if("group"===c){var p=u.xaxis+u.yaxis;d[p]&&(f=!0);d[p]=!0}u.visible&&"histogram"===u.type&&"category"!==k.getFromId({_fullLayout:a},u["v"===u.orientation?"xaxis":"yaxis"]).type&&(l=!0)}}g?("overlay"!==c&&m.coerce(b,a,h,"barnorm",void 0),m.coerce(b,a,h,"bargap",l&&!f?0:.2),m.coerce(b,a,h,"bargroupgap",void 0)):delete a.barmode}},{"../../lib":716,
"../../plots/cartesian/axes":764,"../../registry":845,"./layout_attributes":864}],866:[function(a,q,p){function n(b){return b.id}function k(b,a,c,d){var e=[],f=[],g=d?a:c;a=d?c:a;e[0]=g.c2p(b.s0,!0);f[0]=a.c2p(b.p0,!0);e[1]=g.c2p(b.s1,!0);f[1]=a.c2p(b.p1,!0);return d?[e,f]:[f,e]}function m(b,a,c,d){if(!a.uniformtext.mode&&c&&0<c.duration){var e;d&&(e=d());return b.transition().duration(c.duration).ease(c.easing).each("end",function(){e&&e()}).each("interrupt",function(){e&&e()})}return b}function h(b,
a,c,d,f,h,k,r,n,p,q){function w(a,c,d){return u.ensureSingle(a,"text").text(c).attr({"class":"bartext bartext-"+H,"text-anchor":"middle","data-notex":1}).call(y.font,d).call(v.convertToTspans,b)}var z=a.xaxis,A=a.yaxis;a=b._fullLayout;var C=d[0].trace,E="h"===C.orientation,D=t(a,d,f,z,A);var H=l(C,f);var G=d[f],F=!("stack"===p.mode||"relative"===p.mode)||G._outmost;if(D&&"none"!==H&&(!G.isBlank&&h!==k&&r!==n||"auto"!==H&&"inside"!==H)){var I=a.font;d=B.getBarColor(d[f],C);d=B.getInsideTextFont(C,
f,I,d);f=B.getOutsideTextFont(C,f,I);I=c.datum();E?"log"===z.type&&0>=I.s0&&(h=z.range[0]<z.range[1]?0:z._length):"log"===A.type&&0>=I.s0&&(r=A.range[0]<A.range[1]?A._length:0);z=Math.abs(k-h)-2*J;A=Math.abs(n-r)-2*J;"outside"===H&&(F||G.hasB||(H="inside"));if("auto"===H)if(F){H="inside";var N=u.ensureUniformFontSize(b,d);var K=w(c,D,N);var L=y.bBox(K.node());F=L.width;I=L.height;0<F&&0<I&&(F<=z&&I<=A||F<=A&&I<=z||(E?z>=A/I*F:A>=z/F*I))?H="inside":(H="outside",K.remove(),K=null)}else H="inside";if(!K&&
(N=u.ensureUniformFontSize(b,"outside"===H?f:d),K=w(c,D,N),c=K.attr("transform"),K.attr("transform",""),L=y.bBox(K.node()),F=L.width,I=L.height,K.attr("transform",c),0>=F||0>=I)){K.remove();return}c=C.textangle;"outside"===H?(D="both"===C.constraintext||"outside"===C.constraintext,h=e(h,k,r,n,L,{isHorizontal:E,constrained:D,angle:c})):(D="both"===C.constraintext||"inside"===C.constraintext,h=g(h,k,r,n,L,{isHorizontal:E,constrained:D,angle:c,anchor:C.insidetextanchor}));h.fontSize=N.size;x(C.type,
h,a);G.transform=h;m(K,a,p,q).attr("transform",u.getTextTransform(h))}else c.select("text").remove()}function b(b,a){var c=Math.PI/180*a;a=Math.abs(Math.sin(c));c=Math.abs(Math.cos(c));return{x:b.width*c+b.height*a,y:b.width*a+b.height*c}}function g(a,c,d,e,f,g){var h=!!g.isHorizontal,k=!!g.constrained,l=g.angle||0,m=g.anchor||"end",r="end"===m;m="start"===m;var n=((g.leftToRight||0)+1)/2,t=1-n,u=f.width,p=f.height,q=Math.abs(c-a),v=Math.abs(e-d);g=q>2*J&&v>2*J?J:0;q-=2*g;v-=2*g;var w="auto"===l?
0:l;"auto"!==l||u<=q&&p<=v||!(u>q||p>v)||(u>v||p>q)&&u<p===q<v||(w+=90);u=b(f,w);l=1;k&&(l=Math.min(1,q/u.x,v/u.y));k=f.left*t+f.right*n;f=(f.top+f.bottom)/2;n=(a+J)*t+(c-J)*n;t=(d+e)/2;v=q=0;if(m||r)r=(h?u.x:u.y)/2,u=h?a<c?1:-1:d<e?1:-1,h?m?(n=a+u*g,q=-u*r):(n=c-u*g,q=u*r):m?(t=d+u*g,v=-u*r):(t=e-u*g,v=u*r);return{textX:k,textY:f,targetX:n,targetY:t,anchorX:q,anchorY:v,scale:l,rotate:w}}function e(a,c,d,e,f,g){var h=!!g.isHorizontal,k=!!g.constrained,l=g.angle||0,m=f.width,r=f.height,n=Math.abs(c-
a),t=Math.abs(e-d);g=h?t>2*J?J:0:n>2*J?J:0;var u=1;k&&(u=h?Math.min(1,t/r):Math.min(1,n/m));k="auto"===l?0:l;l=b(f,k);l=(h?l.x:l.y)/2;m=(f.left+f.right)/2;f=(f.top+f.bottom)/2;r=(a+c)/2;n=(d+e)/2;var p=t=0;a=h?c<a?1:-1:d<e?1:-1;h?(r=c-a*g,t=a*l):(n=e+a*g,p=-a*l);return{textX:m,textY:f,targetX:r,targetY:n,anchorX:t,anchorY:p,scale:u,rotate:k}}function t(b,a,c,e,g){var h=a[0].trace;b=h.texttemplate?f(b,a,c,e,g):h.textinfo?d(a,c,e,g):D.getValue(h.text,c);return D.coerceString(E,b)}function l(b,a){b=
D.getValue(b.textposition,a);return D.coerceEnumerated(F,b)}function f(b,a,c,d,e){function f(b){return z(t,+b,!0).text}var g=a[0].trace,h=u.castOption(g,c,"texttemplate");if(!h)return"";var k="waterfall"===g.type,l="funnel"===g.type;if("h"===g.orientation){var m="y";var r=e;var n="x";var t=d}else m="x",r=d,n="y",t=e;c=a[c];a={};a.label=c.p;a.labelLabel=a[m+"Label"]=z(r,c.p,!0).text;m=u.castOption(g,c.i,"text");if(0===m||m)a.text=m;a.value=c.s;a.valueLabel=a[n+"Label"]=f(c.s);n={};L(n,g,c.i);k&&(a.delta=
+c.rawS||c.s,a.deltaLabel=f(a.delta),a.final=c.v,a.finalLabel=f(a.final),a.initial=a.final-a.delta,a.initialLabel=f(a.initial));l&&(a.value=c.s,a.valueLabel=f(a.value),a.percentInitial=c.begR,a.percentInitialLabel=u.formatPercent(c.begR),a.percentPrevious=c.difR,a.percentPreviousLabel=u.formatPercent(c.difR),a.percentTotal=c.sumR,a.percenTotalLabel=u.formatPercent(c.sumR));if(k=u.castOption(g,c.i,"customdata"))a.customdata=k;return u.texttemplateString(h,a,b._d3locale,n,a,g._meta||{})}function d(b,
a,c,d){function e(b){return z(g?c:d,+b,!0).text}var f=b[0].trace,g="h"===f.orientation,h="waterfall"===f.type,k="funnel"===f.type,l=b[a],m=f.textinfo.split("+"),r=[],n=function(b){return-1!==m.indexOf(b)};n("label")&&r.push(z(g?d:c,b[a].p,!0).text);n("text")&&(b=u.castOption(f,l.i,"text"),(0===b||b)&&r.push(b));h&&(h=+l.rawS||l.s,b=l.v,a=b-h,n("initial")&&r.push(e(a)),n("delta")&&r.push(e(h)),n("final")&&r.push(e(b)));k&&(n("value")&&r.push(e(l.s)),k=0,n("percent initial")&&k++,n("percent previous")&&
k++,n("percent total")&&k++,k=1<k,n("percent initial")&&(b=u.formatPercent(l.begR),k&&(b+=" of initial"),r.push(b)),n("percent previous")&&(b=u.formatPercent(l.difR),k&&(b+=" of previous"),r.push(b)),n("percent total")&&(b=u.formatPercent(l.sumR),k&&(b+=" of total"),r.push(b)));return r.join("\x3cbr\x3e")}var c=a("d3"),r=a("fast-isnumeric"),u=a("../../lib"),v=a("../../lib/svg_text_utils"),w=a("../../components/color"),y=a("../../components/drawing"),A=a("../../registry"),z=a("../../plots/cartesian/axes").tickText;
p=a("./uniform_text");var x=p.recordMinTextSize,C=p.clearMinTextSize,B=a("./style"),D=a("./helpers");p=a("./constants");var G=a("./attributes"),E=G.text,F=G.textposition,L=a("../../components/fx/helpers").appendArrayPointValue,J=p.TEXTPAD;q.exports={plot:function(b,a,d,e,f,g){var l=a.xaxis,t=a.yaxis,p=b._fullLayout;f||(f={mode:p.barmode,norm:p.barmode,gap:p.bargap,groupgap:p.bargroupgap},C("bar",p));d=u.makeTraceGroups(e,d,"trace bars").each(function(d){var e=c.select(this),q=d[0].trace,v="funnel"===
q.type,x="bar"===q.type||v,z=0;"waterfall"===q.type&&q.connector.visible&&"between"===q.connector.mode&&(z=q.connector.line.width/2);var A="h"===q.orientation,B=f&&0<f.duration;v=u.ensureSingle(e,"g","points");var C=q.ids?n:void 0;v=v.selectAll("g.point").data(u.identity,C);v.enter().append("g").classed("point",!0);v.exit().remove();v.each(function(e,n){function v(b){var a=c.round(L/2%1,2);return 0===f.gap&&0===f.groupgap?c.round(Math.round(b)-a,2):b}function C(b,a,c){return c&&b===a?b:2<=Math.abs(b-
a)?v(b):b>a?Math.ceil(b):Math.floor(b)}var E=c.select(this),H=k(e,l,t,A),F=H[0][0],G=H[0][1],I=H[1][0];H=H[1][1];var N=0===(A?G-F:H-I);N&&x&&D.getLineWidth(q,e)&&(N=!1);N||(N=!r(F)||!r(G)||!r(I)||!r(H));(e.isBlank=N)&&(A?G=F:H=I);z&&!N&&(A?(F-=(F<G?1:-1)*z,G+=(F<G?1:-1)*z):(I-=(I<H?1:-1)*z,H+=(I<H?1:-1)*z));if("waterfall"===q.type){if(!N){var J=q[e.dir].marker;var L=J.line.width;J=J.color}}else L=D.getLineWidth(q,e),J=e.mc||q.marker.color;b._context.staticPlot||(J=1>w.opacity(J)||.01<L?v:C,F=J(F,
G,A),G=J(G,F,A),I=J(I,H,!A),H=J(H,I,!A));J=m(u.ensureSingle(E,"path"),p,f,g);J.style("vector-effect","non-scaling-stroke").attr("d","M"+F+","+I+"V"+H+"H"+G+"V"+I+"Z").call(y.setClipUrl,a.layerClipId,b);!p.uniformtext.mode&&B&&(N=y.makePointStyleFns(q),y.singlePointStyle(e,J,q,N,b));h(b,a,E,d,n,F,G,I,H,f,g);a.layerClipId&&y.hideOutsideRangePoint(e,E.select("text"),l,t,q.xcalendar,q.ycalendar)});y.setClipUrl(e,!1===q.cliponaxis?null:a.layerClipId,b)});A.getComponentMethod("errorbars","plot")(b,d,a,
f)},toMoveInsideBar:g}},{"../../components/color":591,"../../components/drawing":612,"../../components/fx/helpers":626,"../../lib":716,"../../lib/svg_text_utils":740,"../../plots/cartesian/axes":764,"../../registry":845,"./attributes":855,"./constants":857,"./helpers":861,"./style":869,"./uniform_text":871,d3:165,"fast-isnumeric":228}],867:[function(a,q,p){q.exports=function(a,k){var m=a.cd,h=a.xaxis,b=a.yaxis,g=m[0].trace,e="funnel"===g.type;g="h"===g.orientation;var n=[],l;if(!1===k)for(l=0;l<m.length;l++)m[l].selected=
0;else for(l=0;l<m.length;l++){var f=m[l];if("ct"in f)var d=f.ct;else{var c=f,r=h,u=b;d=g;var p=e,q=r.c2p(d?c.s0:c.p0,!0);r=r.c2p(d?c.s1:c.p1,!0);var y=u.c2p(d?c.p0:c.s0,!0);c=u.c2p(d?c.p1:c.s1,!0);d=p?[(q+r)/2,(y+c)/2]:d?[r,(y+c)/2]:[(q+r)/2,c]}k.contains(d,!1,l,a)?(n.push({pointNumber:l,x:h.c2d(f.x),y:b.c2d(f.y)}),f.selected=1):f.selected=0}return n}},{}],868:[function(a,q,p){function n(a,b){this.traces=a;this.sepNegVal=b.sepNegVal;this.overlapNoMerge=b.overlapNoMerge;b=Infinity;for(var g=[],e=
0;e<a.length;e++){for(var h=a[e],l=0;l<h.length;l++){var f=h[l];f.p!==m&&g.push(f.p)}h[0]&&h[0].width1&&(b=Math.min(h[0].width1,b))}this.positions=g;a=k(g);this.distinctPositions=a.vals;this.binWidth=this.minDiff=1===a.vals.length&&Infinity!==b?b:Math.min(a.minDiff,b);this.bins={}}q.exports=n;var k=a("../../lib").distinctVals,m=a("../../constants/numerical").BADNUM;n.prototype.put=function(a,b){a=this.getLabel(a,b);var g=this.bins[a]||0;this.bins[a]=g+b;return g};n.prototype.get=function(a,b){a=this.getLabel(a,
b);return this.bins[a]||0};n.prototype.getLabel=function(a,b){return(0>b&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?a:Math.round(a/this.binWidth))}},{"../../constants/numerical":692,"../../lib":716}],869:[function(a,q,p){function n(b,a,c){b.selectAll("text").each(function(b){var e=t.select(this);b=d.ensureUniformFontSize(c,m(e,b,a,c));f.font(e,b)})}function k(b,a,c){b.each(function(b){var e=t.select(this);if(b.selected){b=d.ensureUniformFontSize(c,m(e,b,a,c));var g=a.selected.textfont&&a.selected.textfont.color;
g&&(b.color=g);f.font(e,b)}else f.selectedTextStyle(e,a)})}function m(a,c,d,f){f=f._fullLayout.font;var g=d.textfont;a.classed("bartext-inside")?(a=e(c,d),g=h(d,c.i,f,a)):a.classed("bartext-outside")&&(g=b(d,c.i,f));return g}function h(b,a,c,d){c=g(u,b.textfont,a,c);if(void 0===b._input.textfont||void 0===b._input.textfont.color||Array.isArray(b.textfont.color)&&void 0===b.textfont.color[a])c={color:l.contrast(d),family:c.family,size:c.size};return g(v,b.insidetextfont,a,c)}function b(b,a,c){c=g(u,
b.textfont,a,c);return g(w,b.outsidetextfont,a,c)}function g(b,a,c,d){a=a||{};var e=y.getValue(a.family,c),f=y.getValue(a.size,c);a=y.getValue(a.color,c);return{family:y.coerceString(b.family,e,d.family),size:y.coerceNumber(b.size,f,d.size),color:y.coerceColor(b.color,a,d.color)}}function e(b,a){return"waterfall"===a.type?a[b.dir].marker.color:b.mc||a.marker.color}var t=a("d3"),l=a("../../components/color"),f=a("../../components/drawing"),d=a("../../lib"),c=a("../../registry"),r=a("./uniform_text").resizeText;
p=a("./attributes");var u=p.textfont,v=p.insidetextfont,w=p.outsidetextfont,y=a("./helpers");q.exports={style:function(b){var a=t.select(b).selectAll("g.barlayer").selectAll("g.trace");r(b,a,"bar");var d=a.size(),e=b._fullLayout;a.style("opacity",function(b){return b[0].trace.opacity}).each(function(b){("stack"===e.barmode&&1<d||0===e.bargap&&0===e.bargroupgap&&!b[0].trace.marker.line.width)&&t.select(this).attr("shape-rendering","crispEdges")});a.selectAll("g.points").each(function(a){var c=t.select(this);
a=a[0].trace;f.pointStyle(c.selectAll("path"),a,b);n(c,a,b)});c.getComponentMethod("errorbars","style")(a)},styleTextPoints:n,styleOnSelect:function(b,a,d){a=a[0].trace;a.selectedpoints?(f.selectedPointStyle(d.selectAll("path"),a),k(d.selectAll("text"),a,b)):(f.pointStyle(d.selectAll("path"),a,b),n(d,a,b),c.getComponentMethod("errorbars","style")(d))},getInsideTextFont:h,getOutsideTextFont:b,getBarColor:e,resizeText:r}},{"../../components/color":591,"../../components/drawing":612,"../../lib":716,
"../../registry":845,"./attributes":855,"./helpers":861,"./uniform_text":871,d3:165}],870:[function(a,q,p){var n=a("../../components/color"),k=a("../../components/colorscale/helpers").hasColorscale,m=a("../../components/colorscale/defaults");q.exports=function(a,b,g,e,t){g("marker.color",e);k(a,"marker")&&m(a,b,t,g,{prefix:"marker.",cLetter:"c"});g("marker.line.color",n.defaultLine);k(a,"marker.line")&&m(a,b,t,g,{prefix:"marker.line.",cLetter:"c"});g("marker.line.width");g("marker.opacity");g("selected.marker.color");
g("unselected.marker.color")}},{"../../components/color":591,"../../components/colorscale/defaults":601,"../../components/colorscale/helpers":602}],871:[function(a,q,p){var n=a("d3"),k=a("../../lib");q.exports={recordMinTextSize:function(a,h,b){if(b.uniformtext.mode){a="_"+a+"Text_minsize";var g=b.uniformtext.minsize,e=h.scale*h.fontSize;h.hide=e<g;b[a]=b[a]||Infinity;h.hide||(b[a]=Math.min(b[a],Math.max(e,g)))}},clearMinTextSize:function(a,h){h["_"+a+"Text_minsize"]=void 0},resizeText:function(a,
h,b){a=a._fullLayout;var g=a["_"+b+"Text_minsize"];if(g){var e="hide"===a.uniformtext.mode;switch(b){case "funnelarea":case "pie":case "sunburst":b="g.slice";break;case "treemap":b="g.slice, g.pathbar";break;default:b="g.points \x3e g.point"}h.selectAll(b).each(function(b){if(b=b.transform)b.scale=e&&b.hide?0:g/b.fontSize,n.select(this).select("text").attr("transform",k.getTextTransform(b))})}}}},{"../../lib":716,d3:165}],872:[function(a,q,p){p=a("../../plots/template_attributes").hovertemplateAttrs;
var n=a("../../lib/extend").extendFlat,k=a("../scatterpolar/attributes");a=a("../bar/attributes");q.exports={r:k.r,theta:k.theta,r0:k.r0,dr:k.dr,theta0:k.theta0,dtheta:k.dtheta,thetaunit:k.thetaunit,base:n({},a.base,{}),offset:n({},a.offset,{}),width:n({},a.width,{}),text:n({},a.text,{}),hovertext:n({},a.hovertext,{}),marker:a.marker,hoverinfo:k.hoverinfo,hovertemplate:p(),selected:a.selected,unselected:a.unselected}},{"../../lib/extend":707,"../../plots/template_attributes":840,"../bar/attributes":855,
"../scatterpolar/attributes":1192}],873:[function(a,q,p){var n=a("../../components/colorscale/helpers").hasColorscale,k=a("../../components/colorscale/calc"),m=a("../bar/arrays_to_calcdata"),h=a("../bar/cross_trace_calc").setGroupPositions,b=a("../scatter/calc_selection"),g=a("../../registry").traceIs,e=a("../../lib").extendFlat;q.exports={calc:function(a,e){function f(b){var a=e[b];void 0!==a&&(e["_"+b]=Array.isArray(a)?g.makeCalcdata(e,b):g.d2c(a,e.thetaunit))}var d=a._fullLayout,c=e.subplot,g=
d[c].angularaxis;d=d[c].radialaxis.makeCalcdata(e,"r");c=g.makeCalcdata(e,"theta");for(var h=e._length,l=Array(h),t=0;t<h;t++)l[t]={p:c[t],s:d[t]};"linear"===g.type&&(f("width"),f("offset"));n(e,"marker")&&k(a,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"});n(e,"marker.line")&&k(a,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"});m(l,e);b(l,e);return l},crossTraceCalc:function(b,a,f){for(var d=b.calcdata,c=[],k=0;k<d.length;k++){var l=d[k],m=l[0].trace;!0===m.visible&&
g(m,"bar")&&m.subplot===f&&c.push(l)}f=e({},a.radialaxis,{_id:"x"});h(b,a.angularaxis,f,c,{mode:a.barmode,norm:a.barnorm,gap:a.bargap,groupgap:a.bargroupgap})}}},{"../../components/colorscale/calc":599,"../../components/colorscale/helpers":602,"../../lib":716,"../../registry":845,"../bar/arrays_to_calcdata":854,"../bar/cross_trace_calc":858,"../scatter/calc_selection":1121}],874:[function(a,q,p){var n=a("../../lib"),k=a("../scatterpolar/defaults").handleRThetaDefaults,m=a("../bar/style_defaults"),
h=a("./attributes");q.exports=function(b,a,e,t){function g(e,d){return n.coerce(b,a,h,e,d)}k(b,a,t,g)?(g("thetaunit"),g("base"),g("offset"),g("width"),g("text"),g("hovertext"),g("hovertemplate"),m(b,a,g,e,t),n.coerceSelectionMarkerOpacity(a,g)):a.visible=!1}},{"../../lib":716,"../bar/style_defaults":870,"../scatterpolar/defaults":1194,"./attributes":872}],875:[function(a,q,p){var n=a("../../components/fx"),k=a("../../lib"),m=a("../bar/hover").getTraceColor,h=k.fillText,b=a("../scatterpolar/hover").makeHoverPointText,
g=a("../../plots/polar/helpers").isPtInsidePolygon;q.exports=function(a,t,l){var e=a.cd,d=e[0].trace,c=a.subplot,r=c.radialAxis,u=c.vangles,p=u?g:k.isPtInsideSector,q=a.maxHoverDistance,y=c.angularAxis._period||2*Math.PI,A=Math.abs(r.g2p(Math.sqrt(t*t+l*l))),z=Math.atan2(l,t);r.range[0]>r.range[1]&&(z+=Math.PI);n.getClosest(e,function(b){return p(A,z,[b.rp0,b.rp1],[b.thetag0,b.thetag1],u)?q+Math.min(1,Math.abs(b.thetag1-b.thetag0)/y)-1+(b.rp1-A)/(b.rp1-b.rp0)-1:Infinity},a);if(!1!==a.index)return t=
e[a.index],a.x0=a.x1=t.ct[0],a.y0=a.y1=t.ct[1],l=k.extendFlat({},t,{r:t.s,theta:t.p}),h(t,d,a),b(l,d,c,a),a.hovertemplate=d.hovertemplate,a.color=m(d,t),a.xLabelVal=a.yLabelVal=void 0,0>t.s&&(a.idealAlign="left"),[a]}},{"../../components/fx":629,"../../lib":716,"../../plots/polar/helpers":827,"../bar/hover":862,"../scatterpolar/hover":1196}],876:[function(a,q,p){q.exports={moduleType:"trace",name:"barpolar",basePlotModule:a("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:a("./attributes"),
layoutAttributes:a("./layout_attributes"),supplyDefaults:a("./defaults"),supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc").calc,crossTraceCalc:a("./calc").crossTraceCalc,plot:a("./plot"),colorbar:a("../scatter/marker_colorbar"),formatLabels:a("../scatterpolar/format_labels"),style:a("../bar/style").style,styleOnSelect:a("../bar/style").styleOnSelect,hoverPoints:a("./hover"),selectPoints:a("../bar/select"),meta:{}}},{"../../plots/polar":828,"../bar/select":867,"../bar/style":869,"../scatter/marker_colorbar":1137,
"../scatterpolar/format_labels":1195,"./attributes":872,"./calc":873,"./defaults":874,"./hover":875,"./layout_attributes":877,"./layout_defaults":878,"./plot":879}],877:[function(a,q,p){q.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],878:[function(a,q,p){var n=a("../../lib"),k=a("./layout_attributes");q.exports=function(a,h,b){for(var g={},e,m=0;m<b.length;m++)e=b[m],"barpolar"===
e.type&&!0===e.visible&&(e=e.subplot,g[e]||(n.coerce(a[e]||{},h[e],k,"barmode",void 0),n.coerce(a[e]||{},h[e],k,"bargap",void 0),g[e]=1))}},{"../../lib":716,"./layout_attributes":877}],879:[function(a,q,p){function n(b){var a=b.cxx,e=b.cyy;return b.vangles?function(f,d,c,k){if(0<h.angleDelta(c,k)){var l=c;c=k}else l=k;k=g.findEnclosingVertexAngles(l,b.vangles)[0];var m=g.findEnclosingVertexAngles(c,b.vangles)[1];return g.pathPolygonAnnulus(f,d,l,c,[k,(l+c)/2,m],a,e)}:function(b,d,c,g){return h.pathAnnulus(b,
d,c,g,a,e)}}var k=a("d3"),m=a("fast-isnumeric"),h=a("../../lib"),b=a("../../components/drawing"),g=a("../../plots/polar/helpers");q.exports=function(a,g,l){var e=g.xaxis,d=g.yaxis,c=g.radialAxis,r=g.angularAxis,t=n(g),p=g.layers.frontplot.select("g.barlayer");h.makeTraceGroups(p,l,"trace bars").each(function(){var f=k.select(this),l=h.ensureSingle(f,"g","points").selectAll("g.point").data(h.identity);l.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",
!0);l.exit().remove();l.each(function(b){var a=k.select(this),f=b.rp0=c.c2p(b.s0),g=b.rp1=c.c2p(b.s1),l=b.thetag0=r.c2g(b.p0),n=b.thetag1=r.c2g(b.p1);if(m(f)&&m(g)&&m(l)&&m(n)&&f!==g&&l!==n){var p=c.c2g(b.s1),u=(l+n)/2;b.ct=[e.c2p(p*Math.cos(u)),d.c2p(p*Math.sin(u))];b=t(f,g,l,n)}else b="M0,0Z";h.ensureSingle(a,"path").attr("d",b)});b.setClipUrl(f,g._hasClipOnAxisFalse?g.clipIds.forTraces:null,a)})}},{"../../components/drawing":612,"../../lib":716,"../../plots/polar/helpers":827,d3:165,"fast-isnumeric":228}],
880:[function(a,q,p){p=a("../scatter/attributes");var n=a("../bar/attributes"),k=a("../../components/color/attributes"),m=a("../../plots/template_attributes").hovertemplateAttrs;a=a("../../lib/extend").extendFlat;var h=p.marker,b=h.line;q.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",
editType:"calc"},name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},
boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive",
"inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:a({},h.symbol,{arrayOk:!1,editType:"plot"}),opacity:a({},h.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:a({},h.size,{arrayOk:!1,editType:"calc"}),color:a({},h.color,{arrayOk:!1,editType:"style"}),line:{color:a({},b.color,{arrayOk:!1,dflt:k.defaultLine,editType:"style"}),width:a({},b.width,{arrayOk:!1,dflt:0,editType:"style"}),
outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:p.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:n.offsetgroup,alignmentgroup:n.alignmentgroup,selected:{marker:p.selected.marker,editType:"style"},unselected:{marker:p.unselected.marker,
editType:"style"},text:a({},p.text,{}),hovertext:a({},p.hovertext,{}),hovertemplate:m({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":590,"../../lib/extend":707,"../../plots/template_attributes":840,"../bar/attributes":855,"../scatter/attributes":1119}],881:[function(a,q,p){function n(b,a,d,e){var g=a+"0"in b;if(a in b||g&&"d"+a in b)return d.makeCalcdata(b,a);e=g?b[a+"0"]:"name"in b&&("category"===d.type||f(b.name)&&
-1!==["linear","log"].indexOf(d.type)||c.isDateTime(b.name)&&"date"===d.type)?b.name:e;a="multicategory"===d.type?d.r2c_just_indices(e):d.d2c(e,0,b[a+"calendar"]);b=b._length;d=Array(b);for(e=0;e<b;e++)d[e]=a;return d}function k(b,a){for(var c=b.length,d=Array(c+1),e=0;e<c;e++)d[e]=b[e]-a;d[c]=b[c-1]+a;return d}function m(b){for(var a=Array(b),c=0;c<b;c++)a[c]=[];return a}function h(b,a,d){for(var e in v)c.isArrayOrTypedArray(a[e])&&(Array.isArray(d)?c.isArrayOrTypedArray(a[e][d[0]])&&(b[v[e]]=a[e][d[0]][d[1]]):
b[v[e]]=a[e][d])}function b(b,a){if(c.isArrayOrTypedArray(a.selectedpoints))for(var d=0;d<b.length;d++){for(var e=b[d].pts||[],f={},g=0;g<e.length;g++)f[e[g].i]=g;c.tagSelected(e,a,f)}}function g(b,a){return b.v-a.v}function e(b){return b.v}function t(b,a,d){return 0===d?b.q1:Math.min(b.q1,a[Math.min(c.findBin(2.5*b.q1-1.5*b.q3,a,!0)+1,d-1)])}function l(b,a,d){return 0===d?b.q3:Math.max(b.q3,a[Math.max(c.findBin(2.5*b.q3-1.5*b.q1,a),0)])}var f=a("fast-isnumeric"),d=a("../../plots/cartesian/axes"),
c=a("../../lib"),r=a("../../constants/numerical").BADNUM,u=c._;q.exports=function(a,p){var q=a._fullLayout,v=d.getFromId(a,p.xaxis||"x"),w=d.getFromId(a,p.yaxis||"y"),y=[],B="violin"===p.type?"_numViolins":"_numBoxes",D,G;if("h"===p.orientation){var E=v;var F="x";v="y"}else E=w,F="y",w=v,v="x";var L=n(p,v,w,q[B]);w=c.distinctVals(L);var J=w.vals;w=w.minDiff/2;var H="all"===(p.boxpoints||p.points)?c.identity:function(b){return b.v<O.lf||b.v>O.uf};if(p._hasPreCompStats){var K=p[F],M=function(b){return E.d2c((p[b]||
[])[D])};J=Infinity;var I=-Infinity;for(D=0;D<p._length;D++){var N=L[D];if(f(N)){var O={};O.pos=O[v]=N;O.q1=M("q1");O.med=M("median");O.q3=M("q3");N=[];if(K&&c.isArrayOrTypedArray(K[D]))for(G=0;G<K[D].length;G++){var P=E.d2c(K[D][G]);P!==r&&(P={v:P,i:[D,G]},h(P,p,[D,G]),N.push(P))}O.pts=N.sort(g);P=O[F]=N.map(e);G=P.length;if(O.med!==r&&O.q1!==r&&O.q3!==r&&O.med>=O.q1&&O.q3>=O.med){var Q=M("lowerfence");O.lf=Q!==r&&Q<=O.q1?Q:t(O,P,G);Q=M("upperfence");O.uf=Q!==r&&Q>=O.q3?Q:l(O,P,G);Q=M("mean");O.mean=
Q!==r?Q:G?c.mean(P,G):(O.q1+O.q3)/2;var T=M("sd");O.sd=Q!==r&&0<=T?T:G?c.stdev(P,G,O.mean):O.q3-O.q1;O.lo=4*O.q1-3*O.q3;O.uo=4*O.q3-3*O.q1;Q=M("notchspan");Q=Q!==r&&0<Q?Q:0===G?0:1.57*(O.q3-O.q1)/Math.sqrt(G);O.ln=O.med-Q;O.un=O.med+Q;Q=O.lf;T=O.uf;p.boxpoints&&P.length&&(Q=Math.min(Q,P[0]),T=Math.max(T,P[G-1]));p.notched&&(Q=Math.min(Q,O.ln),T=Math.max(T,O.un));O.min=Q;O.max=T}else c.warn(["Invalid input - make sure that q1 \x3c\x3d median \x3c\x3d q3","q1 \x3d "+O.q1,"median \x3d "+O.med,"q3 \x3d "+
O.q3].join("\n")),P=O.med!==r?O.med:O.q1!==r?O.q3!==r?(O.q1+O.q3)/2:O.q1:O.q3!==r?O.q3:0,O.med=P,O.q1=O.q3=P,O.lf=O.uf=P,O.mean=O.sd=P,O.ln=O.un=P,O.min=O.max=P;J=Math.min(J,O.min);I=Math.max(I,O.max);O.pts2=N.filter(H);y.push(O)}}p._extremes[E._id]=d.findExtremes(E,[J,I],{padded:!0})}else{I=E.makeCalcdata(p,F);N=k(J,w);Q=J.length;T=m(Q);for(D=0;D<p._length;D++)P=I[D],f(P)&&(G=c.findBin(L[D],N),0<=G&&G<Q&&(P={v:P,i:D},h(P,p,D),T[G].push(P)));L=Infinity;var V=-Infinity;N=p.quartilemethod;var Y="exclusive"===
N,ca="inclusive"===N;for(D=0;D<Q;D++)0<T[D].length&&(O={},O.pos=O[v]=J[D],N=O.pts=T[D].sort(g),P=O[F]=N.map(e),G=P.length,O.min=P[0],O.max=P[G-1],O.mean=c.mean(P,G),O.sd=c.stdev(P,G,O.mean),O.med=c.interp(P,.5),G%2&&(Y||ca)?(Y?(K=P.slice(0,G/2),M=P.slice(G/2+1)):ca&&(K=P.slice(0,G/2+1),M=P.slice(G/2)),O.q1=c.interp(K,.5),O.q3=c.interp(M,.5)):(O.q1=c.interp(P,.25),O.q3=c.interp(P,.75)),O.lf=t(O,P,G),O.uf=l(O,P,G),O.lo=4*O.q1-3*O.q3,O.uo=4*O.q3-3*O.q1,P=0===G?0:1.57*(O.q3-O.q1)/Math.sqrt(G),O.ln=O.med-
P,O.un=O.med+P,L=Math.min(L,O.ln),V=Math.max(V,O.un),O.pts2=N.filter(H),y.push(O));p._extremes[E._id]=d.findExtremes(E,p.notched?I.concat([L,V]):I,{padded:!0})}b(y,p);return 0<y.length?(y[0].t={num:q[B],dPos:w,posLetter:v,valLetter:F,labels:{med:u(a,"median:"),min:u(a,"min:"),q1:u(a,"q1:"),q3:u(a,"q3:"),max:u(a,"max:"),mean:"sd"===p.boxmean?u(a,"mean  :"):u(a,"mean:"),lf:u(a,"lower fence:"),uf:u(a,"upper fence:")}},q[B]++,y):[{t:{empty:!0}}]};var v={text:"tx",hovertext:"htx"}},{"../../constants/numerical":692,
"../../lib":716,"../../plots/cartesian/axes":764,"fast-isnumeric":228}],882:[function(a,q,p){function n(b,a,n,l){var e=a.calcdata;a=a._fullLayout;var d=l._id,c=d.charAt(0),g,t,p=[],q=0;for(g=0;g<n.length;g++){var y=e[n[g]];for(t=0;t<y.length;t++)p.push(l.c2l(y[t].pos,!0)),q+=(y[t].pts2||[]).length}if(p.length){g=m.distinctVals(p);p=g.minDiff/2;k.minDtick(l,g.minDiff,g.vals[0],!0);var A=a["violin"===b?"_numViolins":"_numBoxes"],z="group"===a[b+"mode"]&&1<A,x=1-a[b+"gap"];b=1-a[b+"groupgap"];for(g=
0;g<n.length;g++){y=e[n[g]];var C=y[0].trace,B=y[0].t;t=C.width;var D=C.side,G,E;if(t){var F=G=E=t/2;var L=0}else F=p,z?(G=h(a,l._id)+C.orientation,E=(G=Object.keys(((a._alignmentOpts[G]||{})[C.alignmentgroup]||{}).offsetGroups||{}).length)||A,L=G?C._offsetIndex:B.num,G=F*x*b/E,L=2*F*(-.5+(L+.5)/E)*x,E=F*x/E):(G=F*x*b,L=0,E=F);B.dPos=F;B.bPos=L;B.bdPos=G;B.wHover=E;G=L+G;B=!!t;E=(C.boxpoints||C.points)&&0<q;if("positive"===D)D=F*(t?1:.5),t=L;else if("negative"===D){D=L;t=F*(t?1:.5);var J=G}else D=
t=F,L=J=G;if(E){F=C.pointpos;E=C.jitter;var H=C.marker.size/2,K=0;if(0<=F+E)if(K=G*(F+E),K>D){B=!0;var M=H;var I=K}else K>L&&(M=H,I=D);K<=D&&(I=D);D=0;if(0>=F-E)if(D=-G*(F-E),D>t){B=!0;var N=H;var O=D}else D>J&&(N=H,O=t);D<=t&&(O=t)}else I=D,O=t;F=Array(y.length);for(t=0;t<y.length;t++)F[t]=y[t].pos;C._extremes[d]=k.findExtremes(l,F,{padded:B,vpadminus:O,vpadplus:I,vpadLinearized:!0,ppadminus:{x:N,y:M}[c],ppadplus:{x:M,y:N}[c]})}}}var k=a("../../plots/cartesian/axes"),m=a("../../lib"),h=a("../../plots/cartesian/axis_ids").getAxisGroup,
b=["v","h"];q.exports={crossTraceCalc:function(a,e){var g=a.calcdata,h=e.xaxis;e=e.yaxis;for(var f=0;f<b.length;f++){for(var d=b[f],c="h"===d?e:h,k=[],m=0;m<g.length;m++){var p=g[m],q=p[0].t;p=p[0].trace;!0!==p.visible||"box"!==p.type&&"candlestick"!==p.type||q.empty||(p.orientation||"v")!==d||p.xaxis!==h._id||p.yaxis!==e._id||k.push(m)}n("box",a,k,c)}},setPositionOffset:n}},{"../../lib":716,"../../plots/cartesian/axes":764,"../../plots/cartesian/axis_ids":767}],883:[function(a,q,p){function n(b,
a,d,c){function f(b){var a=0;b&&b.length&&(a+=1,m.isArrayOrTypedArray(b[0])&&b[0].length&&(a+=1));return a}function g(a){return m.validate(b[a],t[a])}var k=d("y"),l=d("x");if("box"===a.type){var n=d("q1"),p=d("median");var q=d("q3");a._hasPreCompStats=n&&n.length&&p&&p.length&&q&&q.length;q=Math.min(m.minRowLength(n),m.minRowLength(p),m.minRowLength(q))}n=f(k);p=f(l);var x=n&&m.minRowLength(k),C=p&&m.minRowLength(l);if(a._hasPreCompStats)switch(String(p)+String(n)){case "00":k=g("x0")||g("dx");var B=
!g("y0")&&!g("dy")||k?"v":"h";var D=q;break;case "10":B="v";D=Math.min(q,C);break;case "20":B="h";D=Math.min(q,l.length);break;case "01":B="h";D=Math.min(q,x);break;case "02":B="v";D=Math.min(q,k.length);break;case "12":B="v";D=Math.min(q,C,k.length);break;case "21":B="h";D=Math.min(q,l.length,x);break;case "11":D=0;break;case "22":B=!1;for(D=0;D<l.length;D++)if("category"===e(l[D])){B=!0;break}if(B)B="v",D=Math.min(q,C,k.length);else{for(D=0;D<k.length;D++)if("category"===e(k[D])){B=!0;break}B?(B=
"h",D=Math.min(q,l.length,x)):(B="v",D=Math.min(q,C,k.length))}}else 0<n?(B="v",D=0<p?Math.min(C,x):Math.min(x)):0<p?(B="h",D=Math.min(C)):D=0;D?(a._length=D,k=d("orientation",B),a._hasPreCompStats?"v"===k&&0===p?(d("x0",0),d("dx",1)):"h"===k&&0===n&&(d("y0",0),d("dy",1)):"v"===k&&0===p?d("x0"):"h"===k&&0===n&&d("y0"),h.getComponentMethod("calendars","handleTraceDefaults")(b,a,["x","y"],c)):a.visible=!1}function k(b,a,d,c){c=c.prefix;b=m.coerce2(b,a,t,"marker.outliercolor");var e=d("marker.line.outliercolor"),
f="outliers";if(a._hasPreCompStats)f="all";else if(b||e)f="suspectedoutliers";(c=d(c+"points",f))?(d("jitter","all"===c?.3:0),d("pointpos","all"===c?-1.5:0),d("marker.symbol"),d("marker.opacity"),d("marker.size"),d("marker.color",a.line.color),d("marker.line.color"),d("marker.line.width"),"suspectedoutliers"===c&&(d("marker.line.outliercolor",a.marker.color),d("marker.line.outlierwidth")),d("selected.marker.color"),d("unselected.marker.color"),d("selected.marker.size"),d("unselected.marker.size"),
d("text"),d("hovertext")):delete a.marker;c=d("hoveron");"all"!==c&&-1===c.indexOf("points")||d("hovertemplate");m.coerceSelectionMarkerOpacity(a,d)}var m=a("../../lib"),h=a("../../registry"),b=a("../../components/color"),g=a("../bar/defaults").handleGroupingDefaults,e=a("../../plots/cartesian/axis_autotype"),t=a("./attributes");q.exports={supplyDefaults:function(a,e,d,c){function f(b,c){return m.coerce(a,e,t,b,c)}n(a,e,f,c);if(!1!==e.visible){if(c=e._hasPreCompStats)f("lowerfence"),f("upperfence");
f("line.color",(a.marker||{}).color||d);f("line.width");f("fillcolor",b.addOpacity(e.line.color,.5));d=!1;if(c){var g=f("mean"),h=f("sd");g&&g.length&&(d=!0,h&&h.length&&(d="sd"))}f("boxmean",d);f("whiskerwidth");f("width");f("quartilemethod");d=!1;c?(c=f("notchspan"))&&c.length&&(d=!0):m.validate(a.notchwidth,t.notchwidth)&&(d=!0);f("notched",d)&&f("notchwidth");k(a,e,f,{prefix:"box"})}},crossTraceDefaults:function(b,a){function d(b){return m.coerce(e._input,e,t,b)}for(var c,e,f=0;f<b.length;f++){e=
b[f];var h=e.type;if("box"===h||"violin"===h)c=e._input,"group"===a[h+"mode"]&&g(c,e,a,d)}},handleSampleDefaults:n,handlePointsDefaults:k}},{"../../components/color":591,"../../lib":716,"../../plots/cartesian/axis_autotype":765,"../../registry":845,"../bar/defaults":859,"./attributes":880}],884:[function(a,q,p){q.exports=function(a,k){k.hoverOnBox&&(a.hoverOnBox=k.hoverOnBox);"xVal"in k&&(a.x=k.xVal);"yVal"in k&&(a.y=k.yVal);k.xa&&(a.xaxis=k.xa);k.ya&&(a.yaxis=k.ya);return a}},{}],885:[function(a,
q,p){function n(a,e,f,d){function c(b){return(J(b)+H(b))/2}var k=a.cd,l=a.xa,n=a.ya,t=k[0].trace,p=k[0].t,q="violin"===t.type,z=[];var x=p.bdPos;var C=p.wHover,B=function(b){return K.c2l(b.pos)+p.bPos-K.c2l(L)};if(q&&"both"!==t.side){if("positive"===t.side){var D=function(a){a=B(a);return b.inbox(a,a+C,M)};var G=x;var E=0}"negative"===t.side&&(D=function(a){a=B(a);return b.inbox(a-C,a,M)},G=0,E=x)}else D=function(a){a=B(a);return b.inbox(a-C,a+C,M)},G=E=x;q=q?function(a){return b.inbox(a.span[0]-
F,a.span[1]-F,M)}:function(a){return b.inbox(a.min-F,a.max-F,M)};if("h"===t.orientation){var F=e;var L=f;var J=q;var H=D;f="y";var K=n;e="x"}else F=f,L=e,J=D,H=q,f="x",K=l,e="y",l=n;x=Math.min(1,x/Math.abs(K.r2c(K.range[1])-K.r2c(K.range[0])));var M=a.maxHoverDistance-x;x=a.maxSpikeDistance-x;d=b.getDistanceFunction(d,J,H,c);b.getClosest(k,d,a);if(!1===a.index)return[];k=k[a.index];d=t.line.color;n=(t.marker||{}).color;g.opacity(d)&&t.line.width?a.color=d:g.opacity(n)&&t.boxpoints?a.color=n:a.color=
t.fillcolor;a[f+"0"]=K.c2p(k.pos+p.bPos-E,!0);a[f+"1"]=K.c2p(k.pos+p.bPos+G,!0);a[f+"LabelVal"]=k.pos;G=f+"Spike";a.spikeDistance=c(k)*x/M;a[G]=K.c2p(k.pos,!0);E={};d=["med","q1","q3","min","max"];(t.boxmean||(t.meanline||{}).visible)&&d.push("mean");(t.boxpoints||t.points)&&d.push("lf","uf");for(f=0;f<d.length;f++)x=d[f],x in k&&!(k[x]in E)&&(E[k[x]]=!0,n=k[x],D=l.c2p(n,!0),q=h.extendFlat({},a),q.attr=x,q[e+"0"]=q[e+"1"]=D,q[e+"LabelVal"]=n,q[e+"Label"]=(p.labels?p.labels[x]+" ":"")+m.hoverLabelText(l,
n),q.hoverOnBox=!0,"mean"===x&&"sd"in k&&"sd"===t.boxmean&&(q[e+"err"]=k.sd),a.name="",a.spikeDistance=void 0,a[G]=void 0,q.hovertemplate=!1,z.push(q));return z}function k(a,g,f){for(var d=a.cd,c=a.xa,k=a.ya,l=d[0].trace,m=c.c2p(g),n=k.c2p(f),t=b.quadrature(function(b){var a=Math.max(3,b.mrc||0);return Math.max(Math.abs(c.c2p(b.x)-m)-a,1-3/a)},function(b){var a=Math.max(3,b.mrc||0);return Math.max(Math.abs(k.c2p(b.y)-n)-a,1-3/a)}),p=!1,q=0;q<d.length;q++){g=d[q];for(var x=0;x<(g.pts||[]).length;x++)f=
g.pts[x],f=t(f),f<=a.distance&&(a.distance=f,p=[q,x])}if(!p)return!1;g=d[p[0]];f=g.pts[p[1]];d=c.c2p(f.x,!0);t=k.c2p(f.y,!0);p=f.mrc||1;a=h.extendFlat({},a,{index:f.i,color:(l.marker||{}).color,name:l.name,x0:d-p,x1:d+p,y0:t-p,y1:t+p,spikeDistance:a.distance,hovertemplate:l.hovertemplate});"h"===l.orientation?(d=k,a.xLabelVal=f.x,a.yLabelVal=g.pos):(d=c,a.xLabelVal=g.pos,a.yLabelVal=f.y);t=d._id.charAt(0);a[t+"Spike"]=d.c2p(g.pos,!0);e(f,l,a);return a}var m=a("../../plots/cartesian/axes"),h=a("../../lib"),
b=a("../../components/fx"),g=a("../../components/color"),e=h.fillText;q.exports={hoverPoints:function(b,a,e,d){var c=b.cd[0].trace.hoveron,f=[],g;-1!==c.indexOf("boxes")&&(f=f.concat(n(b,a,e,d)));-1!==c.indexOf("points")&&(g=k(b,a,e));if("closest"===d)return g?[g]:f;g&&f.push(g);return f},hoverOnBoxes:n,hoverOnPoints:k}},{"../../components/color":591,"../../components/fx":629,"../../lib":716,"../../plots/cartesian/axes":764}],886:[function(a,q,p){q.exports={attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),
supplyDefaults:a("./defaults").supplyDefaults,crossTraceDefaults:a("./defaults").crossTraceDefaults,supplyLayoutDefaults:a("./layout_defaults").supplyLayoutDefaults,calc:a("./calc"),crossTraceCalc:a("./cross_trace_calc").crossTraceCalc,plot:a("./plot").plot,style:a("./style").style,styleOnSelect:a("./style").styleOnSelect,hoverPoints:a("./hover").hoverPoints,eventData:a("./event_data"),selectPoints:a("./select"),moduleType:"trace",name:"box",basePlotModule:a("../../plots/cartesian"),categories:"cartesian svg symbols oriented box-violin showLegend boxLayout zoomScale".split(" "),
meta:{}}},{"../../plots/cartesian":775,"./attributes":880,"./calc":881,"./cross_trace_calc":882,"./defaults":883,"./event_data":884,"./hover":885,"./layout_attributes":887,"./layout_defaults":888,"./plot":889,"./select":890,"./style":891}],887:[function(a,q,p){q.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],888:[function(a,
q,p){function n(b,a,e,h,l){b=l+"Layout";a=!1;for(var f=0;f<e.length;f++)if(k.traceIs(e[f],b)){a=!0;break}a&&(h(l+"mode"),h(l+"gap"),h(l+"groupgap"))}var k=a("../../registry"),m=a("../../lib"),h=a("./layout_attributes");q.exports={supplyLayoutDefaults:function(b,a,e){n(b,a,e,function(e,g){return m.coerce(b,a,h,e,g)},"box")},_supply:n}},{"../../lib":716,"../../registry":845,"./layout_attributes":887}],889:[function(a,q,p){function n(a,g,k,f){var d=g.pos,c=g.val,e=f.bPos,l=f.wdPos||0,m=f.bPosPxOffset||
0,n=k.whiskerwidth||0,t=k.notched||!1,p=t?1-2*k.notchwidth:1;if(Array.isArray(f.bdPos)){var q=f.bdPos[0];var x=f.bdPos[1]}else x=q=f.bdPos;a=a.selectAll("path.box").data("violin"!==k.type||k.box.visible?b.identity:[]);a.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box");a.exit().remove();a.each(function(a){if(a.empty)return"M0,0Z";var f=d.c2l(a.pos+e,!0),g=d.l2p(f)+m,r=d.l2p(f-q)+m,u=d.l2p(f+x)+m,v=d.l2p(f-l)+m,w=d.l2p(f+l)+m,z=d.l2p(f-q*p)+m;f=d.l2p(f+x*p)+m;var y=
c.c2p(a.q1,!0),A=c.c2p(a.q3,!0),C=b.constrain(c.c2p(a.med,!0),Math.min(y,A)+1,Math.max(y,A)-1),I=void 0===a.lf||!1===k.boxpoints,N=c.c2p(I?a.min:a.lf,!0);I=c.c2p(I?a.max:a.uf,!0);var O=c.c2p(a.ln,!0);a=c.c2p(a.un,!0);"h"===k.orientation?h.select(this).attr("d","M"+C+","+z+"V"+f+"M"+y+","+r+"V"+u+(t?"H"+O+"L"+C+","+f+"L"+a+","+u:"")+"H"+A+"V"+r+(t?"H"+a+"L"+C+","+z+"L"+O+","+r:"")+"ZM"+y+","+g+"H"+N+"M"+A+","+g+"H"+I+(0===n?"":"M"+N+","+v+"V"+w+"M"+I+","+v+"V"+w)):h.select(this).attr("d","M"+z+","+
C+"H"+f+"M"+r+","+y+"H"+u+(t?"V"+O+"L"+f+","+C+"L"+u+","+a:"")+"V"+A+"H"+r+(t?"V"+a+"L"+z+","+C+"L"+r+","+O:"")+"ZM"+g+","+y+"V"+N+"M"+g+","+A+"V"+I+(0===n?"":"M"+v+","+N+"H"+w+"M"+v+","+I+"H"+w))})}function k(a,h,k,f){var d=h.x;h=h.y;var c=f.bdPos,e=f.bPos,l=k.boxpoints||k.points;b.seedPseudoRandom();var m=function(b){b.forEach(function(b){b.t=f;b.trace=k});return b};a=a.selectAll("g.points").data(l?m:[]);a.enter().append("g").attr("class","points");a.exit().remove();a=a.selectAll("path").data(function(a){var d=
a.pts2;var f=Math.max((a.max-a.min)/10,a.q3-a.q1);var g=1E-9*f,h=.01*f,m=[],r=0;if(k.jitter){if(0===f)for(r=1,m=Array(d.length),f=0;f<d.length;f++)m[f]=1;else for(f=0;f<d.length;f++){var n=Math.max(0,f-5);var t=d[n].v,p=Math.min(d.length-1,f+5),u=d[p].v;"all"!==l&&(d[f].v<a.lf?u=Math.min(u,a.lf):t=Math.max(t,a.uf));n=Math.sqrt(h*(p-n)/(u-t+g))||0;n=b.constrain(Math.abs(n),0,1);m.push(n);r=Math.max(n,r)}n=2*k.jitter/(r||1)}for(f=0;f<d.length;f++)g=d[f],h=g.v,r=k.jitter?n*m[f]*(b.pseudoRandom()-.5):
0,r=a.pos+e+c*(k.pointpos+r),"h"===k.orientation?(g.y=r,g.x=h):(g.x=r,g.y=h),"suspectedoutliers"===l&&h<a.uo&&h>a.lo&&(g.so=!0);return d});a.enter().append("path").classed("point",!0);a.exit().remove();a.call(g.translatePoints,d,h)}function m(a,g,k,f){var d=g.pos,c=g.val,e=f.bPos,l=f.bPosPxOffset||0,m=k.boxmean||(k.meanline||{}).visible;if(Array.isArray(f.bdPos)){var n=f.bdPos[0];var t=f.bdPos[1]}else t=n=f.bdPos;a=a.selectAll("path.mean").data("box"===k.type&&k.boxmean||"violin"===k.type&&k.box.visible&&
k.meanline.visible?b.identity:[]);a.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"});a.exit().remove();a.each(function(b){var a=d.c2l(b.pos+e,!0),f=d.l2p(a)+l,g=d.l2p(a-n)+l;a=d.l2p(a+t)+l;var r=c.c2p(b.mean,!0),p=c.c2p(b.mean-b.sd,!0);b=c.c2p(b.mean+b.sd,!0);"h"===k.orientation?h.select(this).attr("d","M"+r+","+g+"V"+a+("sd"===m?"m0,0L"+p+","+f+"L"+r+","+g+"L"+b+","+f+"Z":"")):h.select(this).attr("d","M"+g+","+r+"H"+a+("sd"===m?"m0,0L"+f+","+p+
"L"+g+","+r+"L"+f+","+b+"Z":""))})}var h=a("d3"),b=a("../../lib"),g=a("../../components/drawing");q.exports={plot:function(a,g,l,f){var d=g.xaxis,c=g.yaxis;b.makeTraceGroups(f,l,"trace boxes").each(function(b){var a=h.select(this),e=b[0];b=e.t;e=e.trace;b.wdPos=b.bdPos*e.whiskerwidth;if(!0!==e.visible||b.empty)a.remove();else{if("h"===e.orientation){var f=c;var g=d}else f=d,g=c;n(a,{pos:f,val:g},e,b);k(a,{x:d,y:c},e,b);m(a,{pos:f,val:g},e,b)}})},plotBoxAndWhiskers:n,plotPoints:k,plotBoxMean:m}},{"../../components/drawing":612,
"../../lib":716,d3:165}],890:[function(a,q,p){q.exports=function(a,k){var m=a.cd,h=a.xaxis,b=a.yaxis,g=[],e,n;if(!1===k)for(e=0;e<m.length;e++)for(n=0;n<(m[e].pts||[]).length;n++)m[e].pts[n].selected=0;else for(e=0;e<m.length;e++)for(n=0;n<(m[e].pts||[]).length;n++){var l=m[e].pts[n],f=h.c2p(l.x),d=b.c2p(l.y);k.contains([f,d],null,l.i,a)?(g.push({pointNumber:l.i,x:h.c2d(l.x),y:b.c2d(l.y)}),l.selected=1):l.selected=0}return g}},{}],891:[function(a,q,p){var n=a("d3"),k=a("../../components/color"),m=
a("../../components/drawing");q.exports={style:function(a,b,g){b=g?g:n.select(a).selectAll("g.trace.boxes");b.style("opacity",function(b){return b[0].trace.opacity});b.each(function(b){function e(b,a,d,e){b.style("stroke-width",a+"px").call(k.stroke,d).call(k.fill,e)}var g=n.select(this),f=b[0].trace;b=f.line.width;var d=g.selectAll("path.box");"candlestick"===f.type?d.each(function(b){if(!b.empty){var a=n.select(this),c=f[b.dir];e(a,c.line.width,c.line.color,c.fillcolor);a.style("opacity",f.selectedpoints&&
!b.selected?.3:1)}}):(e(d,b,f.line.color,f.fillcolor),g.selectAll("path.mean").style({"stroke-width":b,"stroke-dasharray":2*b+"px,"+b+"px"}).call(k.stroke,f.line.color),g=g.selectAll("path.point"),m.pointStyle(g,f,a))})},styleOnSelect:function(a,b,g){b=b[0].trace;g=g.selectAll("path.point");b.selectedpoints?m.selectedPointStyle(g,b):m.pointStyle(g,b,a)}}},{"../../components/color":591,"../../components/drawing":612,d3:165}],892:[function(a,q,p){function n(a){return{line:{color:k({},m.line.color,{dflt:a}),
width:m.line.width,editType:"style"},fillcolor:m.fillcolor,editType:"style"}}var k=a("../../lib").extendFlat;p=a("../ohlc/attributes");var m=a("../box/attributes");q.exports={x:p.x,open:p.open,high:p.high,low:p.low,close:p.close,line:{width:k({},m.line.width,{}),editType:"style"},increasing:n(p.increasing.line.color.dflt),decreasing:n(p.decreasing.line.color.dflt),text:p.text,hovertext:p.hovertext,whiskerwidth:k({},m.whiskerwidth,{dflt:0}),hoverlabel:p.hoverlabel}},{"../../lib":716,"../box/attributes":880,
"../ohlc/attributes":1065}],893:[function(a,q,p){function n(b,a,e,h){return{min:e,q1:Math.min(b,h),med:h,q3:Math.max(b,h),max:a}}var k=a("../../lib"),m=a("../../plots/cartesian/axes"),h=a("../ohlc/calc").calcCommon;q.exports=function(b,a){var e=b._fullLayout,g=m.getFromId(b,a.xaxis),l=m.getFromId(b,a.yaxis);g=g.makeCalcdata(a,"x");b=h(b,a,g,l,n);return b.length?(k.extendFlat(b[0].t,{num:e._numBoxes,dPos:k.distinctVals(g).minDiff/2,posLetter:"x",valLetter:"y"}),e._numBoxes++,b):[{t:{empty:!0}}]}},
{"../../lib":716,"../../plots/cartesian/axes":764,"../ohlc/calc":1066}],894:[function(a,q,p){function n(b,a,h,k){b=h(k+".line.color");h(k+".line.width",a.line.width);h(k+".fillcolor",m.addOpacity(b,.5))}var k=a("../../lib"),m=a("../../components/color"),h=a("../ohlc/ohlc_defaults"),b=a("./attributes");q.exports=function(a,e,m,l){function f(d,c){return k.coerce(a,e,b,d,c)}h(a,e,f,l)?(f("line.width"),n(a,e,f,"increasing"),n(a,e,f,"decreasing"),f("text"),f("hovertext"),f("whiskerwidth"),l._requestRangeslider[e.xaxis]=
!0):e.visible=!1}},{"../../components/color":591,"../../lib":716,"../ohlc/ohlc_defaults":1070,"./attributes":892}],895:[function(a,q,p){q.exports={moduleType:"trace",name:"candlestick",basePlotModule:a("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:a("./attributes"),layoutAttributes:a("../box/layout_attributes"),supplyLayoutDefaults:a("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:a("../box/cross_trace_calc").crossTraceCalc,
supplyDefaults:a("./defaults"),calc:a("./calc"),plot:a("../box/plot").plot,layerName:"boxlayer",style:a("../box/style").style,hoverPoints:a("../ohlc/hover").hoverPoints,selectPoints:a("../ohlc/select")}},{"../../plots/cartesian":775,"../box/cross_trace_calc":882,"../box/layout_attributes":887,"../box/layout_defaults":888,"../box/plot":889,"../box/style":891,"../ohlc/hover":1068,"../ohlc/select":1072,"./attributes":892,"./calc":893,"./defaults":894}],896:[function(a,q,p){function n(a,b,g,e){["aaxis",
"baxis"].forEach(function(h){var l=h.charAt(0),f=a[h]||{},d=m.newContainer(b,h);k(f,d,{tickfont:"x",id:l+"axis",letter:l,font:b.font,name:h,data:a[l],calendar:b.calendar,dfltColor:e,bgColor:g.paper_bgcolor,fullLayout:g});d._categories=d._categories||[];a[h]||"-"===f.type||(a[h]={type:f.type})})}var k=a("./axis_defaults"),m=a("../../plot_api/plot_template");q.exports=function(a,b,g,e,k){e("a")||(e("da"),e("a0"));e("b")||(e("db"),e("b0"));n(a,b,g,k)}},{"../../plot_api/plot_template":754,"./axis_defaults":901}],
897:[function(a,q,p){function n(a,h){if(!k(a)||10<=h)return null;for(var b=Infinity,g=-Infinity,e=a.length,m=0;m<e;m++){var l=a[m];if(k(l)){if(l=n(l,h+1))b=Math.min(l[0],b),g=Math.max(l[1],g)}else b=Math.min(l,b),g=Math.max(l,g)}return[b,g]}var k=a("../../lib").isArrayOrTypedArray;q.exports=function(a){return n(a,0)}},{"../../lib":716}],898:[function(a,q,p){var n=a("../../plots/font_attributes");p=a("./axis_attributes");a=a("../../components/color/attributes");n=n({editType:"calc"});n.family.dflt=
'"Open Sans", verdana, arial, sans-serif';n.size.dflt=12;n.color.dflt=a.defaultLine;q.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},
cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:p,baxis:p,font:n,color:{valType:"color",dflt:a.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":590,"../../plots/font_attributes":790,"./axis_attributes":900}],899:[function(a,q,p){var n=a("../../lib").isArrayOrTypedArray;q.exports=function(a,m,h,b){var g=n(h)?"a":"b",e=("a"===g?a.aaxis:a.baxis).smoothing,k="a"===g?a.a2i:a.b2j,l="a"===g?h:b;b="a"===g?b:h;h="a"===g?m.a.length:m.b.length;var f="a"===g?
m.b.length:m.a.length,d=Math.floor("a"===g?a.b2j(b):a.a2i(b));m="a"===g?function(b){return a.evalxy([],b,d)}:function(b){return a.evalxy([],d,b)};if(e){var c=Math.max(0,Math.min(f-2,d));var r=d-c;var p="a"===g?function(b,d){return a.dxydi([],b,c,d,r)}:function(b,d){return a.dxydj([],c,b,r,d)}}g=k(l[0]);k=k(l[1]);l=g<k?1:-1;var q=1E-8*(k-g);var w=0<l?Math.ceil:Math.floor;b=0<l?Math.min:Math.max;f=0<l?Math.max:Math.min;var y=(0<l?Math.floor:Math.ceil)(g+q);w=w(k-q);q=m(g);for(var A=[[q]];y*l<w*l;y+=
l){var z=[];var x=f(g,y);var C=b(k,y+l);var B=C-x;var D=Math.max(0,Math.min(h-2,Math.floor(.5*(x+C))));var G=m(C);e&&(x=p(D,x-D),D=p(D,C-D),z.push([q[0]+x[0]/3*B,q[1]+x[1]/3*B]),z.push([G[0]-D[0]/3*B,G[1]-D[1]/3*B]));z.push(G);A.push(z);q=G}return A}},{"../../lib":716}],900:[function(a,q,p){p=a("../../plots/font_attributes");var n=a("../../components/color/attributes"),k=a("../../plots/cartesian/layout_attributes"),m=a("../../plot_api/edit_types").overrideAll;a("../../constants/docs");a("../../constants/docs");
q.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:p({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],
dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",
editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:p({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",
editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:"none e E power SI B".split(" "),dflt:"B",editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc"},tickformatstops:m(k.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",
editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:n.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},
showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:n.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",
editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:p({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":590,"../../constants/docs":687,"../../plot_api/edit_types":747,
"../../plots/cartesian/layout_attributes":776,"../../plots/font_attributes":790}],901:[function(a,q,p){function n(b,a){if("-"===b.type){var c=b._id.charAt(0);b.type=f(a,b[c+"calendar"])}}var k=a("./attributes"),m=a("../../components/color").addOpacity,h=a("../../registry"),b=a("../../lib"),g=a("../../plots/cartesian/tick_value_defaults"),e=a("../../plots/cartesian/tick_label_defaults"),t=a("../../plots/cartesian/category_order_defaults"),l=a("../../plots/cartesian/set_convert"),f=a("../../plots/cartesian/axis_autotype");
q.exports=function(a,c,f){function d(d,e){return b.coerce(a,c,A,d,e)}function r(d,e){return b.coerce2(a,c,A,d,e)}var p=f.letter,q=f.font||{},A=k[p+"axis"];f.name&&(c._name=f.name,c._id=f.name);var z=d("type");"-"===z&&(f.data&&n(c,f.data),"-"===c.type?c.type="linear":z=a.type=c.type);d("smoothing");d("cheatertype");d("showticklabels");d("labelprefix",p+" \x3d ");d("labelsuffix");d("showtickprefix");d("showticksuffix");d("separatethousands");d("tickformat");d("exponentformat");d("showexponent");d("categoryorder");
d("tickmode");d("tickvals");d("ticktext");d("tick0");d("dtick");"array"===c.tickmode&&(d("arraytick0"),d("arraydtick"));d("labelpadding");c._hovertitle=p;"date"===z&&h.getComponentMethod("calendars","handleDefaults")(a,c,"calendar",f.calendar);l(c,f.fullLayout);c.c2p=b.identity;var x=d("color",f.dfltColor),C=x===a.color?x:q.color;d("title.text")&&(b.coerceFont(d,"title.font",{family:q.family,size:Math.round(1.2*q.size),color:C}),d("title.offset"));d("tickangle");d("autorange",!c.isValidRange(a.range))&&
d("rangemode");d("range");c.cleanRange();d("fixedrange");g(a,c,d,z);e(a,c,d,z,f);t(a,c,d,{data:f.data,dataAttr:p});f=r("gridcolor",m(x,.3));p=r("gridwidth");q=d("showgrid");q||(delete c.gridcolor,delete c.gridwidth);z=r("startlinecolor",x);C=r("startlinewidth",p);d("startline",c.showgrid||!!z||!!C)||(delete c.startlinecolor,delete c.startlinewidth);x=r("endlinecolor",x);z=r("endlinewidth",p);d("endline",c.showgrid||!!x||!!z)||(delete c.endlinecolor,delete c.endlinewidth);q?(d("minorgridcount"),d("minorgridwidth",
p),d("minorgridcolor",m(f,.06)),c.minorgridcount||(delete c.minorgridwidth,delete c.minorgridcolor)):(delete c.gridcolor,delete c.gridWidth);"none"===c.showticklabels&&(delete c.tickfont,delete c.tickangle,delete c.showexponent,delete c.exponentformat,delete c.tickformat,delete c.showticksuffix,delete c.showtickprefix);c.showticksuffix||delete c.ticksuffix;c.showtickprefix||delete c.tickprefix;d("tickmode");return c}},{"../../components/color":591,"../../lib":716,"../../plots/cartesian/axis_autotype":765,
"../../plots/cartesian/category_order_defaults":768,"../../plots/cartesian/set_convert":782,"../../plots/cartesian/tick_label_defaults":783,"../../plots/cartesian/tick_value_defaults":785,"../../registry":845,"./attributes":898}],902:[function(a,q,p){var n=a("../../plots/cartesian/axes"),k=a("../../lib").isArray1D,m=a("./cheater_basis"),h=a("./array_minmax"),b=a("./calc_gridlines"),g=a("./calc_labels"),e=a("./calc_clippath"),t=a("../heatmap/clean_2d_array"),l=a("./smooth_fill_2d_array"),f=a("../heatmap/convert_column_xyz"),
d=a("./set_convert");q.exports=function(a,r){var c=n.getFromId(a,r.xaxis);a=n.getFromId(a,r.yaxis);var p=r.aaxis,q=r.baxis,y=r.x,A=r.y,z=[];y&&k(y)&&z.push("x");A&&k(A)&&z.push("y");z.length&&f(r,p,q,"a","b",z);z=r._a=r._a||r.a;var x=r._b=r._b||r.b;y=r._x||r.x;A=r._y||r.y;var C={};r._cheater&&(y=m("index"===p.cheatertype?z.length:z,"index"===q.cheatertype?x.length:x,r.cheaterslope));r._x=y=t(y);r._y=A=t(A);l(y,z,x);l(A,z,x);d(r);r.setScale();var B=h(y),D=h(A),G=.5*(B[1]-B[0]);B=.5*(B[1]+B[0]);var E=
.5*(D[1]-D[0]);D=.5*(D[1]+D[0]);B=[B-1.3*G,B+1.3*G];D=[D-1.3*E,D+1.3*E];r._extremes[c._id]=n.findExtremes(c,B,{padded:!0});r._extremes[a._id]=n.findExtremes(a,D,{padded:!0});b(r,"a","b");b(r,"b","a");g(r,p);g(r,q);C.clipsegments=e(r._xctrl,r._yctrl,p,q);C.x=y;C.y=A;C.a=z;C.b=x;return[C]}},{"../../lib":716,"../../plots/cartesian/axes":764,"../heatmap/clean_2d_array":1001,"../heatmap/convert_column_xyz":1003,"./array_minmax":897,"./calc_clippath":903,"./calc_gridlines":904,"./calc_labels":905,"./cheater_basis":907,
"./set_convert":920,"./smooth_fill_2d_array":921}],903:[function(a,q,p){q.exports=function(a,k,m,h){var b,g=[];m=!!m.smoothing;var e=!!h.smoothing,n=a[0].length-1,l=a.length-1;h=0;var f=[];for(b=[];h<=n;h++)f[h]=a[0][h],b[h]=k[0][h];g.push({x:f,y:b,bicubic:m});h=0;f=[];for(b=[];h<=l;h++)f[h]=a[h][n],b[h]=k[h][n];g.push({x:f,y:b,bicubic:e});h=n;f=[];for(b=[];0<=h;h--)f[n-h]=a[l][h],b[n-h]=k[l][h];g.push({x:f,y:b,bicubic:m});h=l;f=[];for(b=[];0<=h;h--)f[l-h]=a[h][0],b[l-h]=k[h][0];g.push({x:f,y:b,bicubic:e});
return g}},{}],904:[function(a,q,p){var n=a("../../plots/cartesian/axes"),k=a("../../lib/extend").extendFlat;q.exports=function(a,h,b){function g(c){var d,e=[],g=[],k={};if("b"===h){var l=a.b2j(c);var r=Math.floor(Math.max(0,Math.min(C-2,l)));var n=l-r;k.length=C;k.crossLength=x;k.xy=function(b){return a.evalxy([],b,l)};k.dxy=function(b,c){return a.dxydi([],b,r,c,n)};for(d=0;d<x;d++){var t=Math.min(x-2,d);var p=d-t;var u=a.evalxy([],d,l);if(q.smoothing&&0<d){var v=a.dxydi([],d-1,r,0,n);e.push(w[0]+
v[0]/3);g.push(w[1]+v[1]/3);var w=a.dxydi([],d-1,r,1,n);e.push(u[0]-w[0]/3);g.push(u[1]-w[1]/3)}e.push(u[0]);g.push(u[1]);w=u}}else for(d=a.a2i(c),t=Math.floor(Math.max(0,Math.min(x-2,d))),p=d-t,k.length=x,k.crossLength=C,k.xy=function(b){return a.evalxy([],d,b)},k.dxy=function(b,c){return a.dxydj([],t,b,p,c)},l=0;l<C;l++)r=Math.min(C-2,l),n=l-r,u=a.evalxy([],d,l),q.smoothing&&0<l&&(v=a.dxydj([],t,l-1,p,0),e.push(w[0]+v[0]/3),g.push(w[1]+v[1]/3),w=a.dxydj([],t,l-1,p,1),e.push(u[0]-w[0]/3),g.push(u[1]-
w[1]/3)),e.push(u[0]),g.push(u[1]),w=u;k.axisLetter=h;k.axis=f;k.crossAxis=q;k.value=c;k.constvar=b;k.index=m;k.x=e;k.y=g;k.smoothing=q.smoothing;return k}function e(c){var d,e=[],g=[],k={};k.length=l.length;k.crossLength=p.length;if("b"===h){var m=Math.max(0,Math.min(C-2,c));var r=Math.min(1,Math.max(0,c-m));k.xy=function(b){return a.evalxy([],b,c)};k.dxy=function(b,c){return a.dxydi([],b,m,c,r)};for(d=0;d<A;d++)e[d]=w[c*B][d],g[d]=y[c*B][d]}else{var n=Math.max(0,Math.min(x-2,c));var t=Math.min(1,
Math.max(0,c-n));k.xy=function(b){return a.evalxy([],c,b)};k.dxy=function(b,c){return a.dxydj([],n,b,t,c)};for(d=0;d<z;d++)e[d]=w[d][c*B],g[d]=y[d][c*B]}k.axisLetter=h;k.axis=f;k.crossAxis=q;k.value=l[c];k.constvar=b;k.index=c;k.x=e;k.y=g;k.smoothing=q.smoothing;return k}var m,l=a["_"+h],f=a[h+"axis"];var d=f._gridlines=[];var c=f._minorgridlines=[],r=f._boundarylines=[],p=a["_"+b],q=a[b+"axis"];"array"===f.tickmode&&(f.tickvals=l.slice());var w=a._xctrl,y=a._yctrl,A=w[0].length,z=w.length,x=a._a.length,
C=a._b.length;n.prepTicks(f);"array"===f.tickmode&&delete f.tickvals;var B=f.smoothing?3:1;if("array"===f.tickmode){var D=5E-15;D=[Math.floor((l.length-1-f.arraytick0)/f.arraydtick*(1+D)),Math.ceil(-f.arraytick0/f.arraydtick/(1+D))].sort(function(b,a){return b-a});var G=D[0]-1;D=D[1]+1;for(m=G;m<D;m++){var E=f.arraytick0+f.arraydtick*m;0>E||E>l.length-1||d.push(k(e(E),{color:f.gridcolor,width:f.gridwidth}))}for(m=G;m<D;m++){G=f.arraytick0+f.arraydtick*m;var F=Math.min(G+f.arraydtick,l.length-1);if(!(0>
G||G>l.length-1||0>F||F>l.length-1)){var L=l[G];var J=l[F];for(d=0;d<f.minorgridcount;d++)E=F-G,0>=E||(E=L+(J-L)*(d+1)/(f.minorgridcount+1)*(f.arraydtick/E),E<l[0]||E>l[l.length-1]||c.push(k(g(E),{color:f.minorgridcolor,width:f.minorgridwidth})))}}f.startline&&r.push(k(e(0),{color:f.startlinecolor,width:f.startlinewidth}));f.endline&&r.push(k(e(l.length-1),{color:f.endlinecolor,width:f.endlinewidth}))}else{D=5E-15;D=[Math.floor((l[l.length-1]-f.tick0)/f.dtick*(1+D)),Math.ceil((l[0]-f.tick0)/f.dtick/
(1+D))].sort(function(b,a){return b-a});G=D[0];D=D[1];for(m=G;m<=D;m++)F=f.tick0+f.dtick*m,d.push(k(g(F),{color:f.gridcolor,width:f.gridwidth}));for(m=G-1;m<D+1;m++)for(F=f.tick0+f.dtick*m,d=0;d<f.minorgridcount;d++)E=F+f.dtick*(d+1)/(f.minorgridcount+1),E<l[0]||E>l[l.length-1]||c.push(k(g(E),{color:f.minorgridcolor,width:f.minorgridwidth}));f.startline&&r.push(k(g(l[0]),{color:f.startlinecolor,width:f.startlinewidth}));f.endline&&r.push(k(g(l[l.length-1]),{color:f.endlinecolor,width:f.endlinewidth}))}}},
{"../../lib/extend":707,"../../plots/cartesian/axes":764}],905:[function(a,q,p){var n=a("../../plots/cartesian/axes"),k=a("../../lib/extend").extendFlat;q.exports=function(a,h){var b=h._labels=[],g=h._gridlines;for(a=0;a<g.length;a++){var e=g[a];if(-1!==["start","both"].indexOf(h.showticklabels)){var m=n.tickText(h,e.value);k(m,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:e.xy(0),dxy:e.dxy(0,0),axis:e.axis,length:e.crossAxis.length,font:e.axis.tickfont,isFirst:0===a,isLast:a===g.length-1});b.push(m)}-1!==
["end","both"].indexOf(h.showticklabels)&&(m=n.tickText(h,e.value),k(m,{endAnchor:!1,xy:e.xy(e.crossLength-1),dxy:e.dxy(e.crossLength-2,1),axis:e.axis,length:e.crossAxis.length,font:e.axis.tickfont,isFirst:0===a,isLast:a===g.length-1}),b.push(m))}}},{"../../lib/extend":707,"../../plots/cartesian/axes":764}],906:[function(a,q,p){q.exports=function(a,k,m,h){var b=a[0]-k[0],g=a[1]-k[1],e=m[0]-k[0],n=m[1]-k[1];m=Math.pow(b*b+g*g,.25);a=Math.pow(e*e+n*n,.25);b=(a*a*b-m*m*e)*h;h*=a*a*g-m*m*n;g=a*(m+a)*
3;m=m*(m+a)*3;return[[k[0]+(g&&b/g),k[1]+(g&&h/g)],[k[0]-(m&&b/m),k[1]-(m&&h/m)]]}},{}],907:[function(a,q,p){var n=a("../../lib").isArrayOrTypedArray;q.exports=function(a,m,h){var b,g,e=[],k=n(a)?a.length:a,l=n(m)?m.length:m,f=n(a)?a:null,d=n(m)?m:null;f&&(b=(f.length-1)/(f[f.length-1]-f[0])/(k-1));d&&(g=(d.length-1)/(d[d.length-1]-d[0])/(l-1));var c=Infinity,r=-Infinity;for(a=0;a<l;a++){e[a]=[];var p=d?(d[a]-d[0])*g:a/(l-1);for(m=0;m<k;m++){var q=f?(f[m]-f[0])*b:m/(k-1);q-=p*h;c=Math.min(q,c);r=
Math.max(q,r);e[a][m]=q}}h=1/(r-c);b=-c*h;for(a=0;a<l;a++)for(m=0;m<k;m++)e[a][m]=h*e[a][m]+b;return e}},{"../../lib":716}],908:[function(a,q,p){function n(a,b,g){return[(2*(-.5*g[0]+1.5*b[0])+a[0])/3,(2*(-.5*g[1]+1.5*b[1])+a[1])/3]}var k=a("./catmull_rom"),m=a("../../lib").ensureArray;q.exports=function(a,b,g,e,t,l){var f,d,c,h,p=g[0].length,q=g.length,w=t?3*p-2:p,y=l?3*q-2:q;a=m(a,y);b=m(b,y);for(c=0;c<y;c++)a[c]=m(a[c],w),b[c]=m(b[c],w);for(h=d=0;d<q;d++,h+=l?3:1){var A=a[h];var z=b[h];var x=g[d];
var C=e[d];for(c=f=0;f<p;f++,c+=t?3:1)A[c]=x[f],z[c]=C[f]}if(t)for(h=d=0;d<q;d++,h+=l?3:1){f=1;for(c=3;f<p-1;f++,c+=3)A=k([g[d][f-1],e[d][f-1]],[g[d][f],e[d][f]],[g[d][f+1],e[d][f+1]],t),a[h][c-1]=A[0][0],b[h][c-1]=A[0][1],a[h][c+1]=A[1][0],b[h][c+1]=A[1][1];f=n([a[h][0],b[h][0]],[a[h][2],b[h][2]],[a[h][3],b[h][3]]);a[h][1]=f[0];b[h][1]=f[1];f=n([a[h][w-1],b[h][w-1]],[a[h][w-3],b[h][w-3]],[a[h][w-4],b[h][w-4]]);a[h][w-2]=f[0];b[h][w-2]=f[1]}if(l)for(c=0;c<w;c++){for(h=3;h<y-3;h+=3)A=k([a[h-3][c],
b[h-3][c]],[a[h][c],b[h][c]],[a[h+3][c],b[h+3][c]],l),a[h-1][c]=A[0][0],b[h-1][c]=A[0][1],a[h+1][c]=A[1][0],b[h+1][c]=A[1][1];f=n([a[0][c],b[0][c]],[a[2][c],b[2][c]],[a[3][c],b[3][c]]);a[1][c]=f[0];b[1][c]=f[1];f=n([a[y-1][c],b[y-1][c]],[a[y-3][c],b[y-3][c]],[a[y-4][c],b[y-4][c]]);a[y-2][c]=f[0];b[y-2][c]=f[1]}if(t&&l)for(h=1;h<y;h+=0===(h+1)%3?2:1){for(c=3;c<w-3;c+=3)A=k([a[h][c-3],b[h][c-3]],[a[h][c],b[h][c]],[a[h][c+3],b[h][c+3]],t),a[h][c-1]=.5*(a[h][c-1]+A[0][0]),b[h][c-1]=.5*(b[h][c-1]+A[0][1]),
a[h][c+1]=.5*(a[h][c+1]+A[1][0]),b[h][c+1]=.5*(b[h][c+1]+A[1][1]);f=n([a[h][0],b[h][0]],[a[h][2],b[h][2]],[a[h][3],b[h][3]]);a[h][1]=.5*(a[h][1]+f[0]);b[h][1]=.5*(b[h][1]+f[1]);f=n([a[h][w-1],b[h][w-1]],[a[h][w-3],b[h][w-3]],[a[h][w-4],b[h][w-4]]);a[h][w-2]=.5*(a[h][w-2]+f[0]);b[h][w-2]=.5*(b[h][w-2]+f[1])}return[a,b]}},{"../../lib":716,"./catmull_rom":906}],909:[function(a,q,p){q.exports={RELATIVE_CULL_TOLERANCE:1E-6}},{}],910:[function(a,q,p){q.exports=function(a,k,m){return k&&m?function(h,b,g,
e,k){h||(h=[]);var l;b*=3;g*=3;var f=e*e;var d=1-e,c=d*d;d=d*e*2;e=-3*c;c=3*(c-d);d=3*(d-f);var m=3*f,n=k*k,t=n*k,p=1-k,q=p*p,A=q*p;for(l=0;l<a.length;l++){var z=a[l];f=e*z[g][b]+c*z[g][b+1]+d*z[g][b+2]+m*z[g][b+3];var x=e*z[g+1][b]+c*z[g+1][b+1]+d*z[g+1][b+2]+m*z[g+1][b+3];var C=e*z[g+2][b]+c*z[g+2][b+1]+d*z[g+2][b+2]+m*z[g+2][b+3];z=e*z[g+3][b]+c*z[g+3][b+1]+d*z[g+3][b+2]+m*z[g+3][b+3];h[l]=A*f+3*(q*k*x+p*n*C)+t*z}return h}:k?function(h,b,g,e,k){h||(h=[]);var l;b*=3;var f=e*e;var d=1-e,c=d*d;d=
d*e*2;e=-3*c;c=3*(c-d);d=3*(d-f);var m=3*f,n=1-k;for(l=0;l<a.length;l++){var t=a[l];f=e*t[g][b]+c*t[g][b+1]+d*t[g][b+2]+m*t[g][b+3];t=e*t[g+1][b]+c*t[g+1][b+1]+d*t[g+1][b+2]+m*t[g+1][b+3];h[l]=n*f+k*t}return h}:m?function(h,b,g,e,k){h||(h=[]);var l;g*=3;var f=k*k,d=f*k,c=1-k,m=c*c,n=m*c;for(l=0;l<a.length;l++){var t=a[l];e=t[g][b+1]-t[g][b];var p=t[g+1][b+1]-t[g+1][b];var q=t[g+2][b+1]-t[g+2][b];t=t[g+3][b+1]-t[g+3][b];h[l]=n*e+3*(m*k*p+c*f*q)+d*t}return h}:function(h,b,g,e,k){h||(h=[]);var l,f=1-
k;for(l=0;l<a.length;l++){var d=a[l];e=d[g][b+1]-d[g][b];d=d[g+1][b+1]-d[g+1][b];h[l]=f*e+k*d}return h}}},{}],911:[function(a,q,p){q.exports=function(a,k,m){return k&&m?function(h,b,g,e,k){h||(h=[]);var l;b*=3;g*=3;var f=e*e,d=f*e,c=1-e,m=c*c,n=m*c;var t=k*k;var p=1-k,q=p*p;p=p*k*2;k=-3*q;q=3*(q-p);p=3*(p-t);var A=3*t;for(l=0;l<a.length;l++){var z=a[l];t=k*z[g][b]+q*z[g+1][b]+p*z[g+2][b]+A*z[g+3][b];var x=k*z[g][b+1]+q*z[g+1][b+1]+p*z[g+2][b+1]+A*z[g+3][b+1];var C=k*z[g][b+2]+q*z[g+1][b+2]+p*z[g+
2][b+2]+A*z[g+3][b+2];z=k*z[g][b+3]+q*z[g+1][b+3]+p*z[g+2][b+3]+A*z[g+3][b+3];h[l]=n*t+3*(m*e*x+c*f*C)+d*z}return h}:k?function(h,b,g,e,k){h||(h=[]);var l;b*=3;var f=k*k,d=f*k,c=1-k,m=c*c,n=m*c;for(l=0;l<a.length;l++){var t=a[l];e=t[g+1][b]-t[g][b];var p=t[g+1][b+1]-t[g][b+1];var q=t[g+1][b+2]-t[g][b+2];t=t[g+1][b+3]-t[g][b+3];h[l]=n*e+3*(m*k*p+c*f*q)+d*t}return h}:m?function(h,b,g,e,k){h||(h=[]);var l;g*=3;var f=1-e;var d=k*k;var c=1-k,m=c*c;c=c*k*2;k=-3*m;m=3*(m-c);c=3*(c-d);var n=3*d;for(l=0;l<
a.length;l++){var t=a[l];d=k*t[g][b]+m*t[g+1][b]+c*t[g+2][b]+n*t[g+3][b];t=k*t[g][b+1]+m*t[g+1][b+1]+c*t[g+2][b+1]+n*t[g+3][b+1];h[l]=f*d+e*t}return h}:function(h,b,g,e,k){h||(h=[]);var l,f=1-e;for(l=0;l<a.length;l++){var d=a[l];k=d[g+1][b]-d[g][b];d=d[g+1][b+1]-d[g][b+1];h[l]=f*k+e*d}return h}}},{}],912:[function(a,q,p){q.exports=function(a,k,m,h,b){var g=k-2,e=m-2;return h&&b?function(b,h,f){b||(b=[]);var d,c=Math.max(0,Math.min(Math.floor(h),g)),k=Math.max(0,Math.min(Math.floor(f),e));h=Math.max(0,
Math.min(1,h-c));var l=Math.max(0,Math.min(1,f-k));c*=3;k*=3;var m=h*h,n=m*h,t=1-h,p=t*t,q=p*t,x=l*l,C=x*l,B=1-l,D=B*B,G=D*B;for(d=0;d<a.length;d++){var E=a[d];f=q*E[k][c]+3*(p*h*E[k][c+1]+t*m*E[k][c+2])+n*E[k][c+3];var F=q*E[k+1][c]+3*(p*h*E[k+1][c+1]+t*m*E[k+1][c+2])+n*E[k+1][c+3];var L=q*E[k+2][c]+3*(p*h*E[k+2][c+1]+t*m*E[k+2][c+2])+n*E[k+2][c+3];E=q*E[k+3][c]+3*(p*h*E[k+3][c+1]+t*m*E[k+3][c+2])+n*E[k+3][c+3];b[d]=G*f+3*(D*l*F+B*x*L)+C*E}return b}:h?function(b,h,f){b||(b=[]);var d=Math.max(0,Math.min(Math.floor(h),
g)),c=Math.max(0,Math.min(Math.floor(f),e));h=Math.max(0,Math.min(1,h-d));f=Math.max(0,Math.min(1,f-c));var k;d*=3;var l=h*h,m=l*h,n=1-h,t=n*n,p=t*n,q=1-f;for(k=0;k<a.length;k++){var x=a[k];var C=q*x[c][d]+f*x[c+1][d];var B=q*x[c][d+1]+f*x[c+1][d+1];var D=q*x[c][d+2]+f*x[c+1][d+1];x=q*x[c][d+3]+f*x[c+1][d+1];b[k]=p*C+3*(t*h*B+n*l*D)+m*x}return b}:b?function(b,h,f){b||(b=[]);var d=Math.max(0,Math.min(Math.floor(h),g)),c=Math.max(0,Math.min(Math.floor(f),e));h=Math.max(0,Math.min(1,h-d));f=Math.max(0,
Math.min(1,f-c));var k;c*=3;var l=f*f,m=l*f,n=1-f,t=n*n,p=t*n,q=1-h;for(k=0;k<a.length;k++){var x=a[k];var C=q*x[c][d]+h*x[c][d+1];var B=q*x[c+1][d]+h*x[c+1][d+1];var D=q*x[c+2][d]+h*x[c+2][d+1];x=q*x[c+3][d]+h*x[c+3][d+1];b[k]=p*C+3*(t*f*B+n*l*D)+m*x}return b}:function(b,h,f){b||(b=[]);var d=Math.max(0,Math.min(Math.floor(h),g)),c=Math.max(0,Math.min(Math.floor(f),e));h=Math.max(0,Math.min(1,h-d));f=Math.max(0,Math.min(1,f-c));var k,l=1-f,m=1-h;for(k=0;k<a.length;k++){var n=a[k];var t=m*n[c][d]+
h*n[c][d+1];n=m*n[c+1][d]+h*n[c+1][d+1];b[k]=l*t+f*n}return b}}},{}],913:[function(a,q,p){var n=a("../../lib"),k=a("./xy_defaults"),m=a("./ab_defaults"),h=a("./attributes"),b=a("../../components/color/attributes");q.exports=function(a,e,t,l){function f(b,c){return n.coerce(a,e,h,b,c)}e._clipPathId="clip"+e.uid+"carpet";t=f("color",b.defaultLine);n.coerceFont(f,"font");f("carpet");m(a,e,l,f,t);e.a&&e.b?(3>e.a.length&&(e.aaxis.smoothing=0),3>e.b.length&&(e.baxis.smoothing=0),k(a,e,f)||(e.visible=!1),
e._cheater&&f("cheaterslope")):e.visible=!1}},{"../../components/color/attributes":590,"../../lib":716,"./ab_defaults":896,"./attributes":898,"./xy_defaults":922}],914:[function(a,q,p){q.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),plot:a("./plot"),calc:a("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:a("../../plots/cartesian"),categories:"cartesian svg carpet carpetAxis notLegendIsolatable noMultiCategory noHover noSortingByValue".split(" "),
meta:{}}},{"../../plots/cartesian":775,"./attributes":898,"./calc":902,"./defaults":913,"./plot":919}],915:[function(a,q,p){q.exports=function(a,k){for(var m=a._fullData.length,h,b=0;b<m;b++){var g=a._fullData[b];if(g.index!==k.index&&"carpet"===g.type&&(h||(h=g),g.carpet===k.carpet))return g}return h}},{}],916:[function(a,q,p){q.exports=function(a,k,m){if(0===a.length)return"";var h,b=[],g=m?3:1;for(h=0;h<a.length;h+=g)b.push(a[h]+","+k[h]),m&&h<a.length-g&&(b.push("C"),b.push([a[h+1]+","+k[h+1],
a[h+2]+","+k[h+2]+" "].join(" ")));return b.join(m?"":"L")}},{}],917:[function(a,q,p){var n=a("../../lib").isArrayOrTypedArray;q.exports=function(a,m,h){var b;n(a)?a.length>m.length&&(a=a.slice(0,m.length)):a=[];for(b=0;b<m.length;b++)a[b]=h(m[b]);return a}},{"../../lib":716}],918:[function(a,q,p){q.exports=function(a,k,m,h,b,g){var e=b[0]*a.dpdx(k),n=b[1]*a.dpdy(m),l=1,f=1;g&&(f=Math.max(0,(b[0]*g[0]+b[1]*g[1])/Math.sqrt(b[0]*b[0]+b[1]*b[1])/Math.sqrt(g[0]*g[0]+g[1]*g[1])));b=180*Math.atan2(n,e)/
Math.PI;-90>b?(b+=180,l=-l):90<b&&(b-=180,l=-l);return{angle:b,flip:l,p:a.c2p(h,k,m),offsetMultplier:f}}},{}],919:[function(a,q,p){function n(b,a,c,d,f,k){d="const-"+f+"-lines";c=c.selectAll("."+d).data(k);c.enter().append("path").classed(d,!0).style("vector-effect","non-scaling-stroke");c.each(function(c){var d=c.y,f=g([],c.x,b.c2p);d=g([],d,a.c2p);f="M"+e(f,d,c.smoothing);h.select(this).attr("d",f).style("stroke-width",c.width).style("stroke",c.color).style("fill","none")});c.exit().remove()}function k(a,
c,d,e,f,g,k,m){f=g.selectAll("text."+m).data(k);f.enter().append("text").classed(m,!0);var n=0,r={};f.each(function(f,g){if("auto"===f.axis.tickangle)var k=t(e,c,d,f.xy,f.dxy);else k=(f.axis.tickangle+180)*Math.PI/180,k=t(e,c,d,f.xy,[Math.cos(k),Math.sin(k)]);g||(r={angle:k.angle,flip:k.flip});g=(f.endAnchor?-1:1)*k.flip;var m=h.select(this).attr({"text-anchor":0<g?"start":"end","data-notex":1}).call(b.font,f.font).text(f.text).call(l.convertToTspans,a),p=b.bBox(this);m.attr("transform","translate("+
k.p[0]+","+k.p[1]+") rotate("+k.angle+")translate("+f.axis.labelpadding*g+","+.3*p.height+")");n=Math.max(n,p.width+f.axis.labelpadding)});f.exit().remove();r.maxExtent=n;return r}function m(a,e,f,g,k,m,n,p,q,B,D){g=[];n.title.text&&g.push(n.title.text);e=e.selectAll("text."+D).data(g);var r=B.maxExtent;e.enter().append("text").classed(D,!0);e.each(function(){var e=t(f,p,q,k,m);-1===["start","both"].indexOf(n.showticklabels)&&(r=0);var g=n.title.font.size;r+=g+n.title.offset;var u=(B.angle+(0>B.flip?
180:0)-e.angle+450)%360;u=90<u&&270>u;var v=h.select(this);v.text(n.title.text).call(l.convertToTspans,a);u&&(r=(-l.lineCount(v)+c)*d*g-r);v.attr("transform","translate("+e.p[0]+","+e.p[1]+") rotate("+e.angle+") translate(0,"+r+")").classed("user-select-none",!0).attr("text-anchor","middle").call(b.font,n.title.font)});e.exit().remove()}var h=a("d3"),b=a("../../components/drawing"),g=a("./map_1d_array"),e=a("./makepath"),t=a("./orient_text"),l=a("../../lib/svg_text_utils"),f=a("../../lib");a=a("../../constants/alignment");
q.exports=function(b,a,c,d){var l=a.xaxis,r=a.yaxis,p=b._fullLayout._clips;f.makeTraceGroups(d,c,"trace").each(function(a){var c=h.select(this),d=a[0];a=d.trace;var q=a.aaxis,u=a.baxis,v=f.ensureSingle(c,"g","minorlayer"),w=f.ensureSingle(c,"g","majorlayer"),x=f.ensureSingle(c,"g","boundarylayer"),z=f.ensureSingle(c,"g","labellayer");c.style("opacity",a.opacity);n(l,r,w,q,"a",q._gridlines,!0);n(l,r,w,u,"b",u._gridlines,!0);n(l,r,v,q,"a",q._minorgridlines,!0);n(l,r,v,u,"b",u._minorgridlines,!0);n(l,
r,x,q,"a-boundary",q._boundarylines);n(l,r,x,u,"b-boundary",u._boundarylines);c=k(b,l,r,a,d,z,q._labels,"a-label");u=k(b,l,r,a,d,z,u._labels,"b-label");q=f.aggNums(Math.min,null,a.a);x=f.aggNums(Math.max,null,a.a);v=f.aggNums(Math.min,null,a.b);w=f.aggNums(Math.max,null,a.b);x=.5*(q+x);var A=v;var y=a.ab2xy(x,A,!0);var M=a.dxyda_rough(x,A);void 0===c.angle&&f.extendFlat(c,t(a,l,r,y,a.dxydb_rough(x,A)));m(b,z,a,d,y,M,a.aaxis,l,r,c,"a-title");x=q;A=.5*(v+w);y=a.ab2xy(x,A,!0);M=a.dxydb_rough(x,A);void 0===
u.angle&&f.extendFlat(u,t(a,l,r,y,a.dxyda_rough(x,A)));m(b,z,a,d,y,M,a.baxis,l,r,u,"b-title");z=p.select("#"+a._clipPathId);z.size()||(z=p.append("clipPath").classed("carpetclip",!0));c=f.ensureSingle(z,"path","carpetboundary");w=d.clipsegments;x=[];for(v=0;v<w.length;v++)d=w[v],u=g([],d.x,l.c2p),q=g([],d.y,r.c2p),x.push(e(u,q,d.bicubic));d="M"+x.join("L")+"Z";z.attr("id",a._clipPathId);c.attr("d",d)})};var d=a.LINE_SPACING,c=(1-a.MID_SHIFT)/d+1},{"../../components/drawing":612,"../../constants/alignment":685,
"../../lib":716,"../../lib/svg_text_utils":740,"./makepath":916,"./map_1d_array":917,"./orient_text":918,d3:165}],920:[function(a,q,p){var n=a("./constants"),k=a("../../lib/search").findBin,m=a("./compute_control_points"),h=a("./create_spline_evaluator"),b=a("./create_i_derivative_evaluator"),g=a("./create_j_derivative_evaluator");q.exports=function(a){var e=a._a,l=a._b,f=e.length,d=l.length,c=a.aaxis,r=a.baxis,p=e[0],q=e[f-1],w=l[0],y=l[d-1],A=e[e.length-1]-e[0],z=l[l.length-1]-l[0],x=A*n.RELATIVE_CULL_TOLERANCE,
C=z*n.RELATIVE_CULL_TOLERANCE;p-=x;q+=x;w-=C;y+=C;a.isVisible=function(b,a){return b>p&&b<q&&a>w&&a<y};a.isOccluded=function(b,a){return b<p||b>q||a<w||a>y};a.setScale=function(){var e=m(a._xctrl,a._yctrl,a._x,a._y,c.smoothing,r.smoothing);a._xctrl=e[0];a._yctrl=e[1];a.evalxy=h([a._xctrl,a._yctrl],f,d,c.smoothing,r.smoothing);a.dxydi=b([a._xctrl,a._yctrl],c.smoothing,r.smoothing);a.dxydj=g([a._xctrl,a._yctrl],c.smoothing,r.smoothing)};a.i2a=function(b){var a=Math.max(0,Math.floor(b[0]),f-2);b=b[0]-
a;return(1-b)*e[a]+b*e[a+1]};a.j2b=function(b){var a=Math.max(0,Math.floor(b[1]),f-2);b=b[1]-a;return(1-b)*l[a]+b*l[a+1]};a.ij2ab=function(b){return[a.i2a(b[0]),a.j2b(b[1])]};a.a2i=function(b){var a=Math.max(0,Math.min(k(b,e),f-2)),c=e[a];return Math.max(0,Math.min(f-1,a+(b-c)/(e[a+1]-c)))};a.b2j=function(b){var a=Math.max(0,Math.min(k(b,l),d-2)),c=l[a];return Math.max(0,Math.min(d-1,a+(b-c)/(l[a+1]-c)))};a.ab2ij=function(b){return[a.a2i(b[0]),a.b2j(b[1])]};a.i2c=function(b,c){return a.evalxy([],
b,c)};a.ab2xy=function(b,c,g){if(!g&&(b<e[0]||b>e[f-1]|c<l[0]||c>l[d-1]))return[!1,!1];var h=a.a2i(b),k=a.b2j(c),m=a.evalxy([],h,k);if(g){var n=g=0,r=[],t;b<e[0]?(h=t=0,g=(b-e[0])/(e[1]-e[0])):b>e[f-1]?(t=f-2,h=1,g=(b-e[f-1])/(e[f-1]-e[f-2])):(t=Math.max(0,Math.min(f-2,Math.floor(h))),h-=t);c<l[0]?(k=b=0,n=(c-l[0])/(l[1]-l[0])):c>l[d-1]?(b=d-2,k=1,n=(c-l[d-1])/(l[d-1]-l[d-2])):(b=Math.max(0,Math.min(d-2,Math.floor(k))),k-=b);g&&(a.dxydi(r,t,b,h,k),m[0]+=r[0]*g,m[1]+=r[1]*g);n&&(a.dxydj(r,t,b,h,k),
m[0]+=r[0]*n,m[1]+=r[1]*n)}return m};a.c2p=function(b,a,c){return[a.c2p(b[0]),c.c2p(b[1])]};a.p2x=function(b,a,c){return[a.p2c(b[0]),c.p2c(b[1])]};a.dadi=function(b){b=Math.max(0,Math.min(e.length-2,b));return e[b+1]-e[b]};a.dbdj=function(b){b=Math.max(0,Math.min(l.length-2,b));return l[b+1]-l[b]};a.dxyda=function(b,c,d,e){c=a.dxydi(null,b,c,d,e);b=a.dadi(b,d);return[c[0]/b,c[1]/b]};a.dxydb=function(b,c,d,e){b=a.dxydj(null,b,c,d,e);c=a.dbdj(c,e);return[b[0]/c,b[1]/c]};a.dxyda_rough=function(b,c,d){d=
A*(d||.1);var e=a.ab2xy(b+d,c,!0);b=a.ab2xy(b-d,c,!0);return[.5*(e[0]-b[0])/d,.5*(e[1]-b[1])/d]};a.dxydb_rough=function(b,c,d){d=z*(d||.1);var e=a.ab2xy(b,c+d,!0);b=a.ab2xy(b,c-d,!0);return[.5*(e[0]-b[0])/d,.5*(e[1]-b[1])/d]};a.dpdx=function(b){return b._m};a.dpdy=function(b){return b._m}}},{"../../lib/search":735,"./compute_control_points":908,"./constants":909,"./create_i_derivative_evaluator":910,"./create_j_derivative_evaluator":911,"./create_spline_evaluator":912}],921:[function(a,q,p){var n=
a("../../lib");q.exports=function(a,m,h){var b,g,e=[],k=[],l=a[0].length,f=a.length,d=0;for(b=0;b<l;b++)for(g=0;g<f;g++){if(void 0===a[g][b]){e.push(b);k.push(g);var c=a[g];var r=b,p=void 0,q=0,w=0;0<b&&void 0!==(p=a[g][b-1])&&(w++,q+=p);b<l-1&&void 0!==(p=a[g][b+1])&&(w++,q+=p);0<g&&void 0!==(p=a[g-1][b])&&(w++,q+=p);g<f-1&&void 0!==(p=a[g+1][b])&&(w++,q+=p);c[r]=q/Math.max(1,w)}d=Math.max(d,Math.abs(a[g][b]))}if(!e.length)return a;p=0;q=e.length;do{for(c=r=0;c<q;c++){b=e[c];g=k[c];var y=w=0;if(0===
b){var A=Math.min(l-1,2);var z=m[A];var x=m[1];A=a[g][A];var C=a[g][1];y+=C+(C-A)*(m[0]-x)/(x-z);w++}else b===l-1&&(A=Math.max(0,l-3),z=m[A],x=m[l-2],A=a[g][A],C=a[g][l-2],y+=C+(C-A)*(m[l-1]-x)/(x-z),w++);(0===b||b===l-1)&&0<g&&g<f-1&&(z=h[g+1]-h[g],x=h[g]-h[g-1],y+=(x*a[g+1][b]+z*a[g-1][b])/(x+z),w++);0===g?(A=Math.min(f-1,2),z=h[A],x=h[1],A=a[A][b],C=a[1][b],y+=C+(C-A)*(h[0]-x)/(x-z),w++):g===f-1&&(A=Math.max(0,f-3),z=h[A],x=h[f-2],A=a[A][b],C=a[f-2][b],y+=C+(C-A)*(h[f-1]-x)/(x-z),w++);(0===g||
g===f-1)&&0<b&&b<l-1&&(z=m[b+1]-m[b],x=m[b]-m[b-1],y+=(x*a[g][b+1]+z*a[g][b-1])/(x+z),w++);if(w)y/=w;else{y=m[b+1]-m[b];z=m[b]-m[b-1];x=h[g+1]-h[g];A=h[g]-h[g-1];C=y*z*(y+z);var B=x*A*(x+A);y=(C*(A*a[g+1][b]+x*a[g-1][b])+B*(z*a[g][b+1]+y*a[g][b-1]))/(B*(z+y)+C*(A+x))}y-=a[g][b];z=y/d;r+=z*z;w=w?0:.85;a[g][b]+=y*(1+w)}r=Math.sqrt(r)}while(100>p++&&1E-5<r);n.log("Smoother converged to",r,"after",p,"iterations");return a}},{"../../lib":716}],922:[function(a,q,p){var n=a("../../lib").isArray1D;q.exports=
function(a,m,h){var b=(a=h("x"))&&a.length,g=(h=h("y"))&&h.length;if(!b&&!g)return!1;m._cheater=!a;b&&!n(a)||g&&!n(h)?m._length=null:(a=b?a.length:Infinity,g&&(a=Math.min(a,h.length)),m.a&&m.a.length&&(a=Math.min(a,m.a.length)),m.b&&m.b.length&&(a=Math.min(a,m.b.length)),m._length=a);return!0}},{"../../lib":716}],923:[function(a,q,p){p=a("../../plots/template_attributes").hovertemplateAttrs;var n=a("../scattergeo/attributes"),k=a("../../components/colorscale/attributes"),m=a("../../plots/attributes"),
h=a("../../components/color/attributes").defaultLine;a=a("../../lib/extend").extendFlat;var b=n.marker.line;q.exports=a({locations:{valType:"data_array",editType:"calc"},locationmode:n.locationmode,z:{valType:"data_array",editType:"calc"},geojson:a({},n.geojson,{}),featureidkey:n.featureidkey,text:a({},n.text,{}),hovertext:a({},n.hovertext,{}),marker:{line:{color:a({},b.color,{dflt:h}),width:a({},b.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},
editType:"calc"},selected:{marker:{opacity:n.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:n.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:a({},m.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:p(),showlegend:a({},m.showlegend,{dflt:!1})},k("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":590,"../../components/colorscale/attributes":598,"../../lib/extend":707,"../../plots/attributes":761,
"../../plots/template_attributes":840,"../scattergeo/attributes":1160}],924:[function(a,q,p){function n(b){return b&&"string"===typeof b}var k=a("fast-isnumeric"),m=a("../../constants/numerical").BADNUM,h=a("../../components/colorscale/calc"),b=a("../scatter/arrays_to_calcdata"),g=a("../scatter/calc_selection");q.exports=function(a,t){var e=t._length,f=Array(e);var d=t.geojson?function(b){return n(b)||k(b)}:n;for(var c=0;c<e;c++){var r=f[c]={},p=t.locations[c],q=t.z[c];d(p)&&k(q)?(r.loc=p,r.z=q):
(r.loc=null,r.z=m);r.index=c}b(f,t);h(a,t,{vals:t.z,containerStr:"",cLetter:"z"});g(f,t);return f}},{"../../components/colorscale/calc":599,"../../constants/numerical":692,"../scatter/arrays_to_calcdata":1118,"../scatter/calc_selection":1121,"fast-isnumeric":228}],925:[function(a,q,p){var n=a("../../lib"),k=a("../../components/colorscale/defaults"),m=a("./attributes");q.exports=function(a,b,g,e){function h(d,c){return n.coerce(a,b,m,d,c)}g=h("locations");var l=h("z");if(g&&g.length&&n.isArrayOrTypedArray(l)&&
l.length){b._length=Math.min(g.length,l.length);g=h("geojson");if("string"===typeof g&&""!==g||n.isPlainObject(g))var f="geojson-id";"geojson-id"===h("locationmode",f)&&h("featureidkey");h("text");h("hovertext");h("hovertemplate");h("marker.line.width")&&h("marker.line.color");h("marker.opacity");k(a,b,e,h,{prefix:"",cLetter:"z"});n.coerceSelectionMarkerOpacity(b,h)}else b.visible=!1}},{"../../components/colorscale/defaults":601,"../../lib":716,"./attributes":923}],926:[function(a,q,p){q.exports=
function(a,k,m,h,b){a.location=k.location;a.z=k.z;k=h[b];k.fIn&&k.fIn.properties&&(a.properties=k.fIn.properties);a.ct=k.ct;return a}},{}],927:[function(a,q,p){var n=a("../../plots/cartesian/axes"),k=a("./attributes"),m=a("../../lib").fillText;q.exports=function(a,b,g){var e=a.cd,h=e[0].trace,l=a.subplot,f,d;for(f=0;f<e.length;f++){var c=e[f];var r=!1;if(c._polygons){for(d=0;d<c._polygons.length;d++)c._polygons[d].contains([b,g])&&(r=!r),c._polygons[d].contains([b+360,g])&&(r=!r);if(r)break}}if(r&&
c)return a.x0=a.x1=a.xa.c2p(c.ct),a.y0=a.y1=a.ya.c2p(c.ct),a.index=c.index,a.location=c.loc,a.z=c.z,a.zLabel=n.tickText(l.mockAxis,l.mockAxis.c2l(c.z),"hover").text,a.hovertemplate=c.hovertemplate,b=c,h.hovertemplate||(e=b.hi||h.hoverinfo,g=String(b.loc),f="all"===e?k.hoverinfo.flags:e.split("+"),e=-1!==f.indexOf("name"),l=-1!==f.indexOf("location"),c=-1!==f.indexOf("z"),f=-1!==f.indexOf("text"),d=[],!e&&l?a.nameOverride=g:(e&&(a.nameOverride=h.name),l&&d.push(g)),c&&d.push(a.zLabel),f&&m(b,h,d),
a.extraText=d.join("\x3cbr\x3e")),[a]}},{"../../lib":716,"../../plots/cartesian/axes":764,"./attributes":923}],928:[function(a,q,p){q.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:a("../heatmap/colorbar"),calc:a("./calc"),calcGeoJSON:a("./plot").calcGeoJSON,plot:a("./plot").plot,style:a("./style").style,styleOnSelect:a("./style").styleOnSelect,hoverPoints:a("./hover"),eventData:a("./event_data"),selectPoints:a("./select"),moduleType:"trace",name:"choropleth",basePlotModule:a("../../plots/geo"),
categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":794,"../heatmap/colorbar":1002,"./attributes":923,"./calc":924,"./defaults":925,"./event_data":926,"./hover":927,"./plot":929,"./select":930,"./style":931}],929:[function(a,q,p){var n=a("d3"),k=a("../../lib"),m=a("../../lib/geo_location_utils"),h=a("../../lib/topojson_utils").getTopojsonFeatures,b=a("../../plots/cartesian/autorange").findExtremes,g=a("./style").style;q.exports={calcGeoJSON:function(a,g){var e=a[0].trace;g=g[e.geo];
var f=g._subplot,d=e.locationmode,c=e._length,k="geojson-id"===d?m.extractTraceFeature(a):h(e,f.topojson);f=[];for(var n=[],t=0;t<c;t++){var p=a[t],q="geojson-id"===d?p.fOut:m.locationToFeature(d,p.loc,k);q?(p.geojson=q,p.ct=q.properties.ct,p._polygons=m.feature2polygons(q),p=m.computeBbox(q),f.push(p[0],p[2]),n.push(p[1],p[3])):p.geojson=null}"geojson"===g.fitbounds&&"geojson-id"===d&&(a=m.computeBbox(m.getTraceGeojson(e)),f=[a[0],a[2]],n=[a[1],a[3]]);a={padded:!0};e._extremes.lon=b(g.lonaxis._ax,
f,a);e._extremes.lat=b(g.lataxis._ax,n,a)},plot:function(b,a,h){a=a.layers.backplot.select(".choroplethlayer");k.makeTraceGroups(a,h,"trace choropleth").each(function(a){var d=n.select(this).selectAll("path.choroplethlocation").data(k.identity);d.enter().append("path").classed("choroplethlocation",!0);d.exit().remove();g(b,a)})}}},{"../../lib":716,"../../lib/geo_location_utils":710,"../../lib/topojson_utils":743,"../../plots/cartesian/autorange":763,"./style":931,d3:165}],930:[function(a,q,p){q.exports=
function(a,k){var m=a.cd,h=a.xaxis,b=a.yaxis,g=[],e,n;if(!1===k)for(e=0;e<m.length;e++)m[e].selected=0;else for(e=0;e<m.length;e++){var l=m[e];if(n=l.ct){var f=h.c2p(n);var d=b.c2p(n);k.contains([f,d],null,e,a)?(g.push({pointNumber:e,lon:n[0],lat:n[1]}),l.selected=1):l.selected=0}}return g}},{}],931:[function(a,q,p){function n(a,e){var g=e[0].trace;e=e[0].node3.selectAll(".choroplethlocation");var l=g.marker||{},f=l.line||{},d=b.makeColorScaleFuncFromTrace(g);e.each(function(b){k.select(this).attr("fill",
d(b.z)).call(m.stroke,b.mlc||f.color).call(h.dashLine,"",b.mlw||f.width||0).style("opacity",l.opacity)});h.selectedPointStyle(e,g,a)}var k=a("d3"),m=a("../../components/color"),h=a("../../components/drawing"),b=a("../../components/colorscale");q.exports={style:function(b,a){a&&n(b,a)},styleOnSelect:function(b,a){var e=a[0].node3,g=a[0].trace;g.selectedpoints?h.selectedPointStyle(e.selectAll(".choroplethlocation"),g,b):n(b,a)}}},{"../../components/color":591,"../../components/colorscale":603,"../../components/drawing":612,
d3:165}],932:[function(a,q,p){p=a("../choropleth/attributes");var n=a("../../components/colorscale/attributes"),k=a("../../plots/template_attributes").hovertemplateAttrs,m=a("../../plots/attributes");a=a("../../lib/extend").extendFlat;q.exports=a({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:a({},p.featureidkey,{}),below:{valType:"string",editType:"plot"},text:p.text,hovertext:p.hovertext,marker:{line:{color:a({},
p.marker.line.color,{editType:"plot"}),width:a({},p.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:a({},p.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:a({},p.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:a({},p.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:p.hoverinfo,hovertemplate:k({},{keys:["properties"]}),showlegend:a({},m.showlegend,{dflt:!1})},
n("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":598,"../../lib/extend":707,"../../plots/attributes":761,"../../plots/template_attributes":840,"../choropleth/attributes":923}],933:[function(a,q,p){function n(a){var e=a[0].trace,f=e._opts;if(e.selectedpoints){e=b.makeSelectedPointStyleFns(e);for(var d=0;d<a.length;d++){var c=a[d];c.fOut&&(c.fOut.properties.mo2=e.selectedOpacityFn(c))}a={type:"identity",property:"mo2"}}else a=m.isArrayOrTypedArray(e.marker.opacity)?
{type:"identity",property:"mo"}:e.marker.opacity;m.extendFlat(f.fill.paint,{"fill-opacity":a});m.extendFlat(f.line.paint,{"line-opacity":a});return f}var k=a("fast-isnumeric"),m=a("../../lib"),h=a("../../components/colorscale"),b=a("../../components/drawing"),g=a("../../lib/geojson_utils").makeBlank,e=a("../../lib/geo_location_utils");q.exports={convert:function(b){var a=b[0].trace,f=!0===a.visible&&0!==a._length,d={layout:{visibility:"none"},paint:{}},c={layout:{visibility:"none"},paint:{}},r=a._opts=
{fill:d,line:c,geojson:g()};if(!f)return r;f=e.extractTraceFeature(b);if(!f)return r;var t=h.makeColorScaleFuncFromTrace(a),p=a.marker;a=p.line||{};var q;m.isArrayOrTypedArray(p.opacity)&&(q=function(b){b=b.mo;return k(b)?+m.constrain(b,0,1):0});var y;m.isArrayOrTypedArray(a.color)&&(y=function(b){return b.mlc});var A;m.isArrayOrTypedArray(a.width)&&(A=function(b){return b.mlw});for(var z=0;z<b.length;z++){var x=b[z],C=x.fOut;if(C){var B=C.properties;B.fc=t(x.z);q&&(B.mo=q(x));y&&(B.mlc=y(x));A&&
(B.mlw=A(x));x.ct=B.ct;x._polygons=e.feature2polygons(C)}}q=q?{type:"identity",property:"mo"}:p.opacity;m.extendFlat(d.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":q});m.extendFlat(c.paint,{"line-color":y?{type:"identity",property:"mlc"}:a.color,"line-width":A?{type:"identity",property:"mlw"}:a.width,"line-opacity":q});d.layout.visibility="visible";c.layout.visibility="visible";r.geojson={type:"FeatureCollection",features:f};n(b);return r},convertOnSelect:n}},{"../../components/colorscale":603,
"../../components/drawing":612,"../../lib":716,"../../lib/geo_location_utils":710,"../../lib/geojson_utils":711,"fast-isnumeric":228}],934:[function(a,q,p){var n=a("../../lib"),k=a("../../components/colorscale/defaults"),m=a("./attributes");q.exports=function(a,b,g,e){function h(d,c){return n.coerce(a,b,m,d,c)}g=h("locations");var l=h("z"),f=h("geojson");n.isArrayOrTypedArray(g)&&g.length&&n.isArrayOrTypedArray(l)&&l.length&&("string"===typeof f&&""!==f||n.isPlainObject(f))?(h("featureidkey"),b._length=
Math.min(g.length,l.length),h("below"),h("text"),h("hovertext"),h("hovertemplate"),h("marker.line.width")&&h("marker.line.color"),h("marker.opacity"),k(a,b,e,h,{prefix:"",cLetter:"z"}),n.coerceSelectionMarkerOpacity(b,h)):b.visible=!1}},{"../../components/colorscale/defaults":601,"../../lib":716,"./attributes":932}],935:[function(a,q,p){q.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:a("../heatmap/colorbar"),calc:a("../choropleth/calc"),plot:a("./plot"),hoverPoints:a("../choropleth/hover"),
eventData:a("../choropleth/event_data"),selectPoints:a("../choropleth/select"),styleOnSelect:function(a,k){k&&k[0].trace._glTrace.updateOnSelect(k)},getBelow:function(a,k){a=k.getMapLayers();for(k=a.length-2;0<=k;k--){var m=a[k].id;if("string"===typeof m&&0===m.indexOf("water"))for(var h=k+1;h<a.length;h++)if(m=a[h].id,"string"===typeof m&&-1===m.indexOf("plotly-"))return m}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:a("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],
meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":819,"../choropleth/calc":924,"../choropleth/event_data":926,"../choropleth/hover":927,"../choropleth/select":930,"../heatmap/colorbar":1002,"./attributes":932,"./defaults":934,"./plot":936}],936:[function(a,q,p){function n(b,a){this.type="choroplethmapbox";this.subplot=b;this.uid=a;this.sourceId="source-"+a;this.layerList=[["fill",h+a+"-fill"],["line",h+a+"-line"]];this.below=null}var k=a("./convert").convert,m=a("./convert").convertOnSelect,
h=a("../../plots/mapbox/constants").traceLayerPrefix;a=n.prototype;a.update=function(b){this._update(k(b))};a.updateOnSelect=function(b){this._update(m(b))};a._update=function(b){var a=this.subplot,e=this.layerList,h=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(b.geojson);h!==this.below&&(this._removeLayers(),this._addLayers(b,h),this.below=h);for(h=0;h<e.length;h++){var k=e[h],f=k[1];k=b[k[0]];a.setOptions(f,"setLayoutProperty",k.layout);"visible"===k.layout.visibility&&
a.setOptions(f,"setPaintProperty",k.paint)}};a._addLayers=function(b,a){for(var e=this.subplot,g=this.layerList,h=this.sourceId,f=0;f<g.length;f++){var d=g[f],c=d[0],k=b[c];e.addLayer({type:c,id:d[1],source:h,layout:k.layout,paint:k.paint},a)}};a._removeLayers=function(){for(var b=this.subplot.map,a=this.layerList,e=a.length-1;0<=e;e--)b.removeLayer(a[e][1])};a.dispose=function(){var b=this.subplot.map;this._removeLayers();b.removeSource(this.sourceId)};q.exports=function(b,a){var e=a[0].trace,g=
new n(b,e.uid),h=g.sourceId,f=k(a);e=g.below=b.belowLookup["trace-"+e.uid];b.map.addSource(h,{type:"geojson",data:f.geojson});g._addLayers(f,e);return a[0].trace._glTrace=g}},{"../../plots/mapbox/constants":817,"./convert":933}],937:[function(a,q,p){p=a("../../components/colorscale/attributes");var n=a("../../plots/template_attributes").hovertemplateAttrs,k=a("../mesh3d/attributes"),m=a("../../plots/attributes");a=a("../../lib/extend").extendFlat;var h={x:{valType:"data_array",editType:"calc+clearAxisTypes"},
y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,
editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:n({editType:"calc"},{keys:["norm"]}),showlegend:a({},m.showlegend,{dflt:!1})};a(h,p("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));["opacity","lightposition","lighting"].forEach(function(b){h[b]=k[b]});h.hoverinfo=a({},m.hoverinfo,{editType:"calc",flags:"x y z u v w norm text name".split(" "),dflt:"x+y+z+norm+text+name"});h.transforms=void 0;q.exports=h},{"../../components/colorscale/attributes":598,
"../../lib/extend":707,"../../plots/attributes":761,"../../plots/template_attributes":840,"../mesh3d/attributes":1060}],938:[function(a,q,p){var n=a("../../components/colorscale/calc");q.exports=function(a,m){for(var h=m.u,b=m.v,g=m.w,e=Math.min(m.x.length,m.y.length,m.z.length,h.length,b.length,g.length),k=-Infinity,l=Infinity,f=0;f<e;f++){var d=h[f],c=b[f],r=g[f];d=Math.sqrt(d*d+c*c+r*r);k=Math.max(k,d);l=Math.min(l,d)}m._len=e;m._normMax=k;n(a,m,{vals:[l,k],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":599}],
939:[function(a,q,p){function n(b,a){this.scene=b;this.uid=a;this.data=this.mesh=null}function k(a,h){function c(a,c){var d=k[c],e=n[l[c]];return b(a,function(b){return d.d2l(b)*e})}var k=a.fullSceneLayout,n=a.dataScale;a={};a.vectors=t(c(h.u,"xaxis"),c(h.v,"yaxis"),c(h.w,"zaxis"),h._len);a.positions=t(c(h.x,"xaxis"),c(h.y,"yaxis"),c(h.z,"zaxis"),h._len);var r=e(h);a.colormap=g(h);a.vertexIntensityBounds=[r.min/h._normMax,r.max/h._normMax];a.coneOffset=f[h.anchor];a.coneSize="scaled"===h.sizemode?
h.sizeref||.5:h.sizeref&&h._normMax?h.sizeref/h._normMax:.5;a=m(a);r=h.lightposition;a.lightPosition=[r.x,r.y,r.z];a.ambient=h.lighting.ambient;a.diffuse=h.lighting.diffuse;a.specular=h.lighting.specular;a.roughness=h.lighting.roughness;a.fresnel=h.lighting.fresnel;a.opacity=h.opacity;h._pad=d[h.anchor]*a.vectorScale*a.coneScale*h._normMax;return a}var m=a("gl-cone3d"),h=a("gl-cone3d").createConeMesh,b=a("../../lib").simpleMap,g=a("../../lib/gl_format_color").parseColorScale,e=a("../../components/colorscale").extractOpts,
t=a("../../plots/gl3d/zip3");a=n.prototype;a.handlePick=function(b){if(b.object===this.mesh){var a=b.index=b.data.index,c=this.data.u[a],d=this.data.v[a],e=this.data.w[a];b.traceCoordinate=[this.data.x[a],this.data.y[a],this.data.z[a],c,d,e,Math.sqrt(c*c+d*d+e*e)];c=this.data.hovertext||this.data.text;Array.isArray(c)&&void 0!==c[a]?b.textLabel=c[a]:c&&(b.textLabel=c);return!0}};var l={xaxis:0,yaxis:1,zaxis:2},f={tip:1,tail:0,cm:.25,center:.5},d={tip:1,tail:1,cm:.75,center:.5};a.update=function(b){this.data=
b;b=k(this.scene,b);this.mesh.update(b)};a.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};q.exports=function(b,a){var c=b.glplot.gl,d=k(b,a);c=h(c,d);d=new n(b,a.uid);d.mesh=c;d.data=a;c._trace=d;b.glplot.add(c);return d}},{"../../components/colorscale":603,"../../lib":716,"../../lib/gl_format_color":713,"../../plots/gl3d/zip3":815,"gl-cone3d":245}],940:[function(a,q,p){var n=a("../../lib"),k=a("../../components/colorscale/defaults"),m=a("./attributes");q.exports=function(a,
b,g,e){function h(c,d){return n.coerce(a,b,m,c,d)}g=h("u");var l=h("v"),f=h("w"),d=h("x"),c=h("y"),r=h("z");g&&g.length&&l&&l.length&&f&&f.length&&d&&d.length&&c&&c.length&&r&&r.length?(h("sizeref"),h("sizemode"),h("anchor"),h("lighting.ambient"),h("lighting.diffuse"),h("lighting.specular"),h("lighting.roughness"),h("lighting.fresnel"),h("lightposition.x"),h("lightposition.y"),h("lightposition.z"),k(a,b,e,h,{prefix:"",cLetter:"c"}),h("text"),h("hovertext"),h("hovertemplate"),b._length=null):b.visible=
!1}},{"../../components/colorscale/defaults":601,"../../lib":716,"./attributes":937}],941:[function(a,q,p){q.exports={moduleType:"trace",name:"cone",basePlotModule:a("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:a("./calc"),plot:a("./convert"),eventData:function(a,k){a.norm=k.traceCoordinate[6];return a},meta:{}}},{"../../plots/gl3d":804,"./attributes":937,"./calc":938,"./convert":939,"./defaults":940}],
942:[function(a,q,p){p=a("../heatmap/attributes");var n=a("../scatter/attributes"),k=a("../../components/colorscale/attributes"),m=a("../../components/drawing/attributes").dash,h=a("../../plots/font_attributes"),b=a("../../lib/extend").extendFlat,g=a("../../constants/filter_ops"),e=g.COMPARISON_OPS2;g=g.INTERVAL_OPS;a("../../constants/docs");a=n.line;q.exports=b({z:p.z,x:p.x,x0:p.x0,dx:p.dx,y:p.y,y0:p.y0,dy:p.dy,text:p.text,hovertext:p.hovertext,transpose:p.transpose,xtype:p.xtype,ytype:p.ytype,zhoverformat:p.zhoverformat,
hovertemplate:p.hovertemplate,hoverongaps:p.hoverongaps,connectgaps:b({},p.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},
end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:h({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot"},operation:{valType:"enumerated",
values:[].concat(e).concat(g),dflt:"\x3d",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:b({},a.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:m,smoothing:b({},a.smoothing,{}),editType:"plot"}},k("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":598,"../../components/drawing/attributes":611,"../../constants/docs":687,"../../constants/filter_ops":688,
"../../lib/extend":707,"../../plots/font_attributes":790,"../heatmap/attributes":999,"../scatter/attributes":1119}],943:[function(a,q,p){var n=a("../../components/colorscale"),k=a("../heatmap/calc"),m=a("./set_contours"),h=a("./end_plus");q.exports=function(b,a){var e=k(b,a),g=e[0].z;m(a,g);var l=a.contours,f=n.extractOpts(a);"heatmap"===l.coloring&&f.auto&&!1===a.autocontour?(g=l.start,f=h(l),l=l.size||1,f=Math.floor((f-g)/l)+1,isFinite(l)||(f=l=1),g-=l/2,l=[g,g+f*l]):l=g;n.calc(b,a,{vals:l,cLetter:"z"});
return e}},{"../../components/colorscale":603,"../heatmap/calc":1E3,"./end_plus":953,"./set_contours":961}],944:[function(a,q,p){q.exports=function(a,k){var m=a[0],h=m.z,b;switch(k.type){case "levels":m=Math.min(h[0][0],h[0][1]);for(b=0;b<a.length;b++){var g=a[b];g.prefixBoundary=!g.edgepaths.length&&(m>g.level||g.starts.length&&m===g.level)}break;case "constraint":if(m.prefixBoundary=!1,!m.edgepaths.length){var e=m.x.length,n=m.y.length;a=-Infinity;g=Infinity;for(b=0;b<n;b++)g=Math.min(g,h[b][0]),
g=Math.min(g,h[b][e-1]),a=Math.max(a,h[b][0]),a=Math.max(a,h[b][e-1]);for(b=1;b<e-1;b++)g=Math.min(g,h[0][b]),g=Math.min(g,h[n-1][b]),a=Math.max(a,h[0][b]),a=Math.max(a,h[n-1][b]);b=k.value;switch(k._operation){case "\x3e":b>a&&(m.prefixBoundary=!0);break;case "\x3c":if(b<g||m.starts.length&&b===g)m.prefixBoundary=!0;break;case "[]":k=Math.min(b[0],b[1]);b=Math.max(b[0],b[1]);if(b<g||k>a||m.starts.length&&b===g)m.prefixBoundary=!0;break;case "][":k=Math.min(b[0],b[1]),b=Math.max(b[0],b[1]),k<g&&b>
a&&(m.prefixBoundary=!0)}}}}},{}],945:[function(a,q,p){var n=a("../../components/colorscale"),k=a("./make_color_map"),m=a("./end_plus");q.exports={min:"zmin",max:"zmax",calc:function(a,b,g){a=b.contours;var e=b.line,h=a.size||1,l=a.coloring,f=k(b,{isColorbar:!0});"heatmap"===l?(b=n.extractOpts(b),g._fillgradient=b.reversescale?n.flipScale(b.colorscale):b.colorscale,g._zrange=[b.min,b.max]):"fill"===l&&(g._fillcolor=f);g._line={color:"lines"===l?f:e.color,width:!1!==a.showlines?e.width:0,dash:e.dash};
g._levels={start:a.start,end:m(a),size:h}}}},{"../../components/colorscale":603,"./end_plus":953,"./make_color_map":958}],946:[function(a,q,p){q.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,
LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],947:[function(a,q,p){var n=a("fast-isnumeric"),k=a("./label_defaults");p=a("../../components/color");var m=p.addOpacity,h=p.opacity;a=a("../../constants/filter_ops");var b=a.CONSTRAINT_REDUCTION,g=a.COMPARISON_OPS2;q.exports=function(a,t,l,f,d,c){var e=t.contours,p=l("contours.operation");e._operation=b[p];if(-1===
g.indexOf(e.operation))if(l("contours.value",[0,1]),Array.isArray(e.value))if(2<e.value.length)e.value=e.value.slice(2);else if(0===e.length)e.value=[0,1];else if(2>e.length){var q=parseFloat(e.value[0]);e.value=[q,q+1]}else e.value=[parseFloat(e.value[0]),parseFloat(e.value[1])];else n(e.value)&&(q=parseFloat(e.value),e.value=[q,q+1]);else l("contours.value",0),n(e.value)||(Array.isArray(e.value)?e.value=parseFloat(e.value[0]):e.value=0);if("\x3d"===p)e=e.showlines=!0;else{e=l("contours.showlines");
var w=l("fillcolor",m((a.line||{}).color||d,.5))}if(e){a=w&&h(w)?m(t.fillcolor,1):d;var y=l("line.color",a);l("line.width",2);l("line.dash")}l("line.smoothing");k(l,f,y,c)}},{"../../components/color":591,"../../constants/filter_ops":688,"./label_defaults":957,"fast-isnumeric":228}],948:[function(a,q,p){function n(a,e){function g(a){return b(a)?+a:null}var k=Array.isArray(e),f;-1!==h.COMPARISON_OPS2.indexOf(a)?f=k?g(e[0]):g(e):-1!==h.INTERVAL_OPS.indexOf(a)?f=k?[g(e[0]),g(e[1])]:[g(e),g(e)]:-1!==h.SET_OPS.indexOf(a)&&
(f=k?e.map(g):[g(e)]);return f}function k(b){return function(a){a=n(b,a);var e=Math.min(a[0],a[1]);a=Math.max(a[0],a[1]);return{start:e,end:a,size:a-e}}}function m(b){return function(a){a=n(b,a);return{start:a,end:Infinity,size:Infinity}}}var h=a("../../constants/filter_ops"),b=a("fast-isnumeric");q.exports={"[]":k("[]"),"][":k("]["),"\x3e":m("\x3e"),"\x3c":m("\x3c"),"\x3d":m("\x3d")}},{"../../constants/filter_ops":688,"fast-isnumeric":228}],949:[function(a,q,p){q.exports=function(a,k,m,h){a=h("contours.start");
h=h("contours.end");h=!1===a||!1===h;a=m("contours.size");(h?!(k.autocontour=!0):!m("autocontour",!1))&&a||m("ncontours")}},{}],950:[function(a,q,p){function n(a){return k.extendFlat({},a,{edgepaths:k.extendDeep([],a.edgepaths),paths:k.extendDeep([],a.paths),starts:k.extendDeep([],a.starts)})}var k=a("../../lib");q.exports=function(a,h){var b=function(b){return b.reverse()},g=function(b){return b};switch(h){case "\x3d":case "\x3c":return a;case "\x3e":1!==a.length&&k.warn("Contour data invalid for the specified inequality operation.");
var e=a[0];for(h=0;h<e.edgepaths.length;h++)e.edgepaths[h]=b(e.edgepaths[h]);for(h=0;h<e.paths.length;h++)e.paths[h]=b(e.paths[h]);for(h=0;h<e.starts.length;h++)e.starts[h]=b(e.starts[h]);return a;case "][":h=b,b=g,g=h;case "[]":2!==a.length&&k.warn("Contour data invalid for the specified inequality range operation.");e=n(a[0]);a=n(a[1]);for(h=0;h<e.edgepaths.length;h++)e.edgepaths[h]=b(e.edgepaths[h]);for(h=0;h<e.paths.length;h++)e.paths[h]=b(e.paths[h]);for(h=0;h<e.starts.length;h++)e.starts[h]=
b(e.starts[h]);for(;a.edgepaths.length;)e.edgepaths.push(g(a.edgepaths.shift()));for(;a.paths.length;)e.paths.push(g(a.paths.shift()));for(;a.starts.length;)e.starts.push(g(a.starts.shift()));return[e]}}},{"../../lib":716}],951:[function(a,q,p){var n=a("../../lib"),k=a("../heatmap/xyz_defaults"),m=a("./constraint_defaults"),h=a("./contours_defaults"),b=a("./style_defaults"),g=a("./attributes");q.exports=function(a,t,l,f){function d(b,c){return n.coerce(a,t,g,b,c)}function c(b){return n.coerce2(a,
t,g,b)}if(k(a,t,d,f)){d("text");d("hovertext");d("hovertemplate");d("hoverongaps");var e="constraint"===d("contours.type");d("connectgaps",n.isArray1D(t.z));e?m(a,t,d,f,l):(h(a,t,d,c),b(a,t,d,f))}else t.visible=!1}},{"../../lib":716,"../heatmap/xyz_defaults":1013,"./attributes":942,"./constraint_defaults":947,"./contours_defaults":949,"./style_defaults":963}],952:[function(a,q,p){var n=a("../../lib"),k=a("./constraint_mapping"),m=a("./end_plus");q.exports=function(a,b,g){var e="constraint"===a.type?
k[a._operation](a.value):a,h=e.size,l=[],f=m(e),d=g.trace._carpetTrace;b=d?{xaxis:d.aaxis,yaxis:d.baxis,x:g.a,y:g.b}:{xaxis:b.xaxis,yaxis:b.yaxis,x:g.x,y:g.y};for(e=e.start;e<f;e+=h)if(l.push(n.extendFlat({level:e,crossings:{},starts:[],edgepaths:[],paths:[],z:g.z,smoothing:g.trace.line.smoothing},b)),1E3<l.length){n.warn("Too many contours, clipping at 1000",a);break}return l}},{"../../lib":716,"./constraint_mapping":948,"./end_plus":953}],953:[function(a,q,p){q.exports=function(a){return a.end+
a.size/1E6}},{}],954:[function(a,q,p){function n(b,a,h,k){return Math.abs(b[0]-a[0])<h&&Math.abs(b[1]-a[1])<k}function k(a,e,k,l,f){var d=e.join(","),c=a.crossings[d],g=c,t=0,p=0;20<g&&k?208===g||1114===g?t=0===e[0]?1:-1:p=0===e[1]?1:-1:-1!==b.BOTTOMSTART.indexOf(g)?p=1:-1!==b.LEFTSTART.indexOf(g)?t=1:-1!==b.TOPSTART.indexOf(g)?p=-1:t=-1;var q=[t,p];g=[m(a,e,[-q[0],-q[1]])];var y=a.z.length,A=a.z[0].length;t=e.slice();var z=q.slice();for(p=0;1E4>p;p++){20<c?(c=b.CHOOSESADDLE[c][0>(q[0]||q[1])?0:1],
a.crossings[d]=b.SADDLEREMAINDER[c]):delete a.crossings[d];q=b.NEWDELTA[c];if(!q){h.log("Found bad marching index:",c,e,a.level);break}g.push(m(a,e,q));e[0]+=q[0];e[1]+=q[1];d=e.join(",");n(g[g.length-1],g[g.length-2],l,f)&&g.pop();c=q[0]&&(0>e[0]||e[0]>A-2)||q[1]&&(0>e[1]||e[1]>y-2);if(e[0]===t[0]&&e[1]===t[1]&&q[0]===z[0]&&q[1]===z[1]||k&&c)break;c=a.crossings[d]}1E4===p&&h.log("Infinite loop in contour?");e=n(g[0],g[g.length-1],l,f);q=0;y=.2*a.smoothing;d=[];c=0;for(p=1;p<g.length;p++){z=g[p];
var x=g[p-1];A=z[2]-x[2];z=z[3]-x[3];A=Math.sqrt(A*A+z*z);q+=A;d.push(A)}A=q/d.length*y;for(p=g.length-2;p>=c;p--)if(z=d[p],z<A){y=0;for(q=p-1;q>=c;q--)if(z+d[q]<A)z+=d[q];else break;if(e&&p===g.length-2)for(y=0;y<q;y++)if(z+d[y]<A)z+=d[y];else break;z=p-q+y+1;x=Math.floor((p+q+y+2)/2);z=e||p!==g.length-2?e||-1!==q?z%2?g[x%g.length]:[(g[x%g.length][0]+g[(x+1)%g.length][0])/2,(g[x%g.length][1]+g[(x+1)%g.length][1])/2]:g[0]:g[g.length-1];g.splice(q+1,p-q+1,z);p=q+1;y&&(c=y);e&&(p===g.length-2?g[y]=
g[g.length-1]:0===p&&(g[g.length-1]=g[0]))}g.splice(0,c);for(p=0;p<g.length;p++)g[p].length=2;if(!(2>g.length))if(e)g.pop(),a.paths.push(g);else{k||h.log("Unclosed interior contour?",a.level,t.join(","),g.join("L"));d=!1;for(k=0;k<a.edgepaths.length;k++)if(p=a.edgepaths[k],!d&&n(p[0],g[g.length-1],l,f)){g.pop();d=!0;c=!1;for(t=0;t<a.edgepaths.length;t++)if(e=a.edgepaths[t],n(e[e.length-1],g[0],l,f)){c=!0;g.shift();a.edgepaths.splice(k,1);t===k?a.paths.push(g.concat(e)):(t>k&&t--,a.edgepaths[t]=e.concat(g,
p));break}c||(a.edgepaths[k]=g.concat(p))}for(k=0;k<a.edgepaths.length&&!d;k++)p=a.edgepaths[k],n(p[p.length-1],g[0],l,f)&&(g.shift(),a.edgepaths[k]=p.concat(g),d=!0);d||a.edgepaths.push(g)}}function m(b,a,h){var e=a[0]+Math.max(h[0],0);a=a[1]+Math.max(h[1],0);var f=b.z[a][e],d=b.xaxis,c=b.yaxis;if(h[1])return h=(b.level-f)/(b.z[a][e+1]-f),[d.c2p((1-h)*b.x[e]+h*b.x[e+1],!0),c.c2p(b.y[a],!0),e+h,a];h=(b.level-f)/(b.z[a+1][e]-f);return[d.c2p(b.x[e],!0),c.c2p((1-h)*b.y[a]+h*b.y[a+1],!0),e,a+h]}var h=
a("../../lib"),b=a("./constants");q.exports=function(b,a,m){var e,f;a=a||.01;m=m||.01;for(f=0;f<b.length;f++){var d=b[f];for(e=0;e<d.starts.length;e++){var c=d.starts[e];k(d,c,"edge",a,m)}for(e=0;Object.keys(d.crossings).length&&1E4>e;)e++,c=Object.keys(d.crossings)[0].split(",").map(Number),k(d,c,void 0,a,m);1E4===e&&h.log("Infinite loop in contour?")}}},{"../../lib":716,"./constants":946}],955:[function(a,q,p){var n=a("../../components/color"),k=a("../heatmap/hover");q.exports=function(a,h,b,g,
e){(a=k(a,h,b,g,e,!0))&&a.forEach(function(b){var a=b.trace;"constraint"===a.contours.type&&(a.fillcolor&&n.opacity(a.fillcolor)?b.color=n.addOpacity(a.fillcolor,1):a.contours.showlines&&n.opacity(a.line.color)&&(b.color=n.addOpacity(a.line.color,1)))});return a}},{"../../components/color":591,"../heatmap/hover":1006}],956:[function(a,q,p){q.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),calc:a("./calc"),plot:a("./plot").plot,style:a("./style"),colorbar:a("./colorbar"),hoverPoints:a("./hover"),
moduleType:"trace",name:"contour",basePlotModule:a("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":775,"./attributes":942,"./calc":943,"./colorbar":945,"./defaults":951,"./hover":955,"./plot":960,"./style":962}],957:[function(a,q,p){var n=a("../../lib");q.exports=function(a,m,h,b){b||(b={});a("contours.showlabels")&&(m=m.font,n.coerceFont(a,"contours.labelfont",{family:m.family,size:m.size,color:h}),a("contours.labelformat"));
!1!==b.hasHover&&a("zhoverformat")}},{"../../lib":716}],958:[function(a,q,p){var n=a("d3"),k=a("../../components/colorscale"),m=a("./end_plus");q.exports=function(a){var b=a.contours,g=b.start,e=m(b),h=b.size||1,l=Math.floor((e-g)/h)+1,f="lines"===b.coloring?0:1,d=k.extractOpts(a);isFinite(h)||(l=h=1);var c=d.reversescale?k.flipScale(d.colorscale):d.colorscale,r=c.length;a=Array(r);e=Array(r);var p;if("heatmap"===b.coloring){g=d.min;f=d.max;for(p=0;p<r;p++)d=c[p],a[p]=d[0]*(f-g)+g,e[p]=d[1];h=n.extent([g,
f,b.start,b.start+h*(l-1)]);b=h[g<f?0:1];h=h[g<f?1:0];b!==g&&(a.splice(0,0,b),e.splice(0,0,e[0]));h!==f&&(a.push(h),e.push(e[e.length-1]))}else for(p=0;p<r;p++)d=c[p],a[p]=(d[0]*(l+f-1)-f/2)*h+g,e[p]=d[1];return k.makeColorScaleFunc({domain:a,range:e},{noNumericCheck:!0})}},{"../../components/colorscale":603,"./end_plus":953,d3:165}],959:[function(a,q,p){var n=a("./constants");q.exports=function(a){var k=a[0].z,h=k.length,b=k[0].length,g=2===h||2===b,e,t,l;for(t=0;t<h-1;t++){var f=[];0===t&&(f=f.concat(n.BOTTOMSTART));
t===h-2&&(f=f.concat(n.TOPSTART));for(e=0;e<b-1;e++){var d=f.slice();0===e&&(d=d.concat(n.LEFTSTART));e===b-2&&(d=d.concat(n.RIGHTSTART));var c=e+","+t;var r=[[k[t][e],k[t][e+1]],[k[t+1][e],k[t+1][e+1]]];for(l=0;l<a.length;l++){var p=a[l];var q=p.level;var w=(r[0][0]>q?0:1)+(r[0][1]>q?0:2)+(r[1][1]>q?0:4)+(r[1][0]>q?0:8);q=5===w||10===w?q>(r[0][0]+r[0][1]+r[1][0]+r[1][1])/4?5===w?713:1114:5===w?104:208:15===w?0:w;q&&(p.crossings[c]=q,-1!==d.indexOf(q)&&(p.starts.push([e,t]),g&&-1!==d.indexOf(q,d.indexOf(q)+
1)&&p.starts.push([e,t])))}}}}},{"./constants":946}],960:[function(a,q,p){function n(a,c,d,e){var f="fill"===e.coloring||"constraint"===e.type&&"\x3d"!==e._operation,g="M"+d.join("L")+"Z";f&&w(c,e);a=b.ensureSingle(a,"g","contourfill").selectAll("path").data(f?c:[]);a.enter().append("path");a.exit().remove();a.each(function(b){(b=(b.prefixBoundary?g:"")+k(b,d))?h.select(this).attr("d",b).style("stroke","none"):h.select(this).remove()})}function k(a,c){for(var d="",e=0,f=a.edgepaths.map(function(b,
a){return a}),h=!0,k,l,m,n;f.length;){l=g.smoothopen(a.edgepaths[e],a.smoothing);d+=h?l:l.replace(/^M/,"L");f.splice(f.indexOf(e),1);h=a.edgepaths[e][a.edgepaths[e].length-1];m=-1;for(l=0;4>l;l++){if(!h){b.log("Missing end?",e,a);break}.01>Math.abs(h[1]-c[0][1])&&!(.01>Math.abs(h[0]-c[2][0]))?k=c[1]:.01>Math.abs(h[0]-c[0][0])?k=c[0]:.01>Math.abs(h[1]-c[2][1])?k=c[3]:.01>Math.abs(h[0]-c[2][0])&&(k=c[2]);for(n=0;n<a.edgepaths.length;n++){var r=a.edgepaths[n][0];.01>Math.abs(h[0]-k[0])?.01>Math.abs(h[0]-
r[0])&&0<=(r[1]-h[1])*(k[1]-r[1])&&(k=r,m=n):.01>Math.abs(h[1]-k[1])?.01>Math.abs(h[1]-r[1])&&0<=(r[0]-h[0])*(k[0]-r[0])&&(k=r,m=n):b.log("endpt to newendpt is not vert. or horz.",h,k,r)}h=k;if(0<=m)break;d+="L"+k}if(m===a.edgepaths.length){b.log("unclosed perimeter path");break}e=m;if(h=-1===f.indexOf(e))e=f[0],d+="Z"}for(e=0;e<a.paths.length;e++)d+=g.smoothclosed(a.paths[e],a.smoothing);return d}function m(a,c,d,e,f){var k=b.ensureSingle(a,"g","contourlines"),l=!1!==f.showlines,m=f.showlabels,n=
l&&m,r=p.createLines(k,l||m,c);k=p.createLineClip(k,n,d,e.trace.uid);a=a.selectAll("g.contourlabels").data(m?[0]:[]);a.exit().remove();a.enter().append("g").classed("contourlabels",!0);if(m){var t=[],q=[];b.clearLocationCache();var u=p.labelFormatter(d,e),v=g.tester.append("text").attr("data-notex",1).call(g.font,f.labelfont),w=c[0].xaxis,x=c[0].yaxis;f=w._length;var z=x._length,A=w.range,B=x.range,C=b.aggNums(Math.min,null,e.x),D=b.aggNums(Math.max,null,e.x),ca=b.aggNums(Math.min,null,e.y),Z=b.aggNums(Math.max,
null,e.y);e=Math.max(w.c2p(C,!0),0);w=Math.min(w.c2p(D,!0),f);D=Math.max(x.c2p(Z,!0),0);x=Math.min(x.c2p(ca,!0),z);var R={};A[0]<A[1]?(R.left=e,R.right=w):(R.left=w,R.right=e);B[0]<B[1]?(R.top=D,R.bottom=x):(R.top=x,R.bottom=D);R.middle=(R.top+R.bottom)/2;R.center=(R.left+R.right)/2;t.push([[R.left,R.top],[R.right,R.top],[R.right,R.bottom],[R.left,R.bottom]]);var U=y.LABELDISTANCE*Math.sqrt(f*f+z*z)/Math.max(1,c.length/y.LABELINCREASE);r.each(function(a){var c=p.calcTextOpts(a.level,u,v,d);h.select(this).selectAll("path").each(function(){var a=
b.getVisibleSegment(this,R,c.height/2);if(a&&!(a.len<(c.width+c.height)*y.LABELMIN))for(var d=Math.min(Math.ceil(a.len/U),y.LABELMAX),e=0;e<d;e++){var f=p.findBestTextLocation(this,a,c,q,R);if(!f)break;p.addLabelData(f,c,q,t)}})});v.remove();p.drawLabels(a,q,d,k,n?t:null)}m&&!l&&r.remove()}var h=a("d3"),b=a("../../lib"),g=a("../../components/drawing"),e=a("../../components/colorscale"),t=a("../../lib/svg_text_utils"),l=a("../../plots/cartesian/axes"),f=a("../../plots/cartesian/set_convert"),d=a("../heatmap/plot"),
c=a("./make_crossings"),r=a("./find_all_paths"),u=a("./empty_pathinfo"),v=a("./convert_to_constraints"),w=a("./close_boundaries"),y=a("./constants"),A=y.LABELOPTIMIZER;p.plot=function(a,e,f,l){var t=e.xaxis,p=e.yaxis;b.makeTraceGroups(l,f,"contour").each(function(f){var l=h.select(this),q=f[0],x=q.x,z=q.y,A=q.trace.contours,y=u(A,e,q),B=b.ensureSingle(l,"g","heatmapcoloring"),C=[];"heatmap"===A.coloring&&(C=[f]);d(a,e,C,B);c(y);r(y);f=t.c2p(x[0],!0);x=t.c2p(x[x.length-1],!0);B=p.c2p(z[0],!0);z=p.c2p(z[z.length-
1],!0);z=[[f,z],[x,z],[x,B],[f,B]];x=y;"constraint"===A.type&&(x=v(y,A._operation));f=b.ensureSingle(l,"g","contourbg").selectAll("path").data("fill"===A.coloring?[0]:[]);f.enter().append("path");f.exit().remove();f.attr("d","M"+z.join("L")+"Z").style("stroke","none");n(l,x,z,A);m(l,y,a,q,A);x=q.trace;A="clip"+x.uid;y=a._fullLayout._clips.selectAll("#"+A).data(x.connectgaps?[]:[0]);y.enter().append("clipPath").classed("contourclip",!0).attr("id",A);y.exit().remove();if(!1===x.connectgaps){x=e.xaxis;
f=e.yaxis;B=q.x;C=q.y;var E=q.trace._emptypoints,D=[],G=q.z.length,T=q.z[0].length,V,Y=[];for(V=0;V<T;V++)Y.push(1);for(V=0;V<G;V++)D.push(Y.slice());for(V=0;V<E.length;V++)G=E[V],D[G[0]][G[1]]=0;q.zmask=D;q={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:x,yaxis:f,x:B,y:C,z:D,smoothing:0};c([q]);r([q]);w([q],{type:"levels"});b.ensureSingle(y,"path","").attr("d",(q.prefixBoundary?"M"+z.join("L")+"Z":"")+k(q,z))}else A=null;g.setClipUrl(l,A,a)})};p.createLines=function(b,a,c){var d=c[0].smoothing;
b=b.selectAll("g.contourlevel").data(a?c:[]);b.exit().remove();b.enter().append("g").classed("contourlevel",!0);a&&(a=b.selectAll("path.openline").data(function(b){return b.pedgepaths||b.edgepaths}),a.exit().remove(),a.enter().append("path").classed("openline",!0),a.attr("d",function(b){return g.smoothopen(b,d)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke"),a=b.selectAll("path.closedline").data(function(b){return b.ppaths||b.paths}),a.exit().remove(),a.enter().append("path").classed("closedline",
!0),a.attr("d",function(b){return g.smoothclosed(b,d)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke"));return b};p.createLineClip=function(b,a,c,d){d=a?"clipline"+d:null;a=c._fullLayout._clips.selectAll("#"+d).data(a?[0]:[]);a.exit().remove();a.enter().append("clipPath").classed("contourlineclip",!0).attr("id",d);g.setClipUrl(b,d,c);return a};p.labelFormatter=function(b,a){b=b._fullLayout;var c=a.trace;a=c.contours;if(a.labelformat)return b._d3locale.numberFormat(a.labelformat);
if((c=e.extractOpts(c))&&c.colorbar&&c.colorbar._axis)var d=c.colorbar._axis;else d={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"},"constraint"===a.type?(a=a.value,Array.isArray(a)?d.range=[a[0],a[a.length-1]]:d.range=[a,a]):(d.range=[a.start,a.end],d.nticks=(a.end-a.start)/a.size),d.range[0]===d.range[1]&&(d.range[1]+=d.range[0]||1),d.nticks||(d.nticks=1E3),f(d,b),l.prepTicks(d),d._tmin=null,d._tmax=null;return function(b){return l.tickText(d,b).text}};p.calcTextOpts=function(b,
a,c,d){a=a(b);c.text(a).call(t.convertToTspans,d);c=g.bBox(c.node(),!0);return{text:a,width:c.width,height:c.height,level:b,dy:(c.top+c.bottom)/2}};p.findBestTextLocation=function(a,c,d,e,f){var g=d.width;if(c.isClosed){var h=c.len/A.INITIALSEARCHPOINTS;var k=c.min+h/2;var l=c.max}else h=(c.len-g)/(A.INITIALSEARCHPOINTS+1),k=c.min+h+g/2,l=c.max-(h+g)/2;for(var m=Infinity,n=0;n<A.ITERATIONS;n++){for(;k<l;k+=h){var r=b.getTextLocation(a,c.total,k,g);a:{var t=d;var p=e,q=t.width/2,u=t.height/2,v=r.x,
w=r.y,x=r.theta,z=Math.cos(x)*q,y=Math.sin(x)*q;q=(v>f.center?f.right-v:v-f.left)/(z+Math.abs(Math.sin(x)*u));u=(w>f.middle?f.bottom-w:w-f.top)/(Math.abs(y)+Math.cos(x)*u);if(1>q||1>u)t=Infinity;else{u=A.EDGECOST*(1/(q-1)+1/(u-1));u+=A.ANGLECOST*x*x;x=v-z;q=w-y;v+=z;w+=y;for(z=0;z<p.length;z++){y=p[z];var B=Math.cos(y.theta)*y.width/2,C=Math.sin(y.theta)*y.width/2;B=2*b.segmentDistance(x,q,v,w,y.x-B,y.y-C,y.x+B,y.y+C)/(t.height+y.height);C=(y=y.level===t.level)?A.SAMELEVELDISTANCE:1;if(B<=C){t=Infinity;
break a}u+=A.NEIGHBORCOST*(y?A.SAMELEVELFACTOR:1)/(B-C)}t=u}}if(t<m){m=t;var D=r;var U=k}}if(m>2*A.MAXCOST)break;n&&(h/=2);k=U-h/2;l=k+1.5*h}if(m<=A.MAXCOST)return D};p.addLabelData=function(b,a,c,d){var e=a.width/2,f=a.height/2,g=b.x,h=b.y;b=b.theta;var k=Math.sin(b),l=Math.cos(b),m=e*l,n=f*k;e*=k;f=-f*l;f=[[g-m-n,h-e-f],[g+m-n,h+e-f],[g+m+n,h+e+f],[g-m+n,h-e+f]];c.push({text:a.text,x:g,y:h,dy:a.dy,theta:b,level:a.level,width:a.width,height:a.height});d.push(f)};p.drawLabels=function(a,c,d,e,f){a=
a.selectAll("text").data(c,function(b){return b.text+","+b.x+","+b.y+","+b.theta});a.exit().remove();a.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(b){var a=b.x+Math.sin(b.theta)*b.dy,c=b.y-Math.cos(b.theta)*b.dy;h.select(this).text(b.text).attr({x:a,y:c,transform:"rotate("+180*b.theta/Math.PI+" "+a+" "+c+")"}).call(t.convertToTspans,d)});if(f){a="";for(c=0;c<f.length;c++)a+="M"+f[c].join("L")+"Z";b.ensureSingle(e,"path","").attr("d",a)}}},{"../../components/colorscale":603,
"../../components/drawing":612,"../../lib":716,"../../lib/svg_text_utils":740,"../../plots/cartesian/axes":764,"../../plots/cartesian/set_convert":782,"../heatmap/plot":1010,"./close_boundaries":944,"./constants":946,"./convert_to_constraints":950,"./empty_pathinfo":952,"./find_all_paths":954,"./make_crossings":959,d3:165}],961:[function(a,q,p){function n(a,b,g){var e={type:"linear",range:[a,b]};k.autoTicks(e,(b-a)/(g||15));return e}var k=a("../../plots/cartesian/axes"),m=a("../../lib");q.exports=
function(a,b){var g=a.contours;if(a.autocontour){var e=a.zmin,h=a.zmax;if(a.zauto||void 0===e)e=m.aggNums(Math.min,null,b);if(a.zauto||void 0===h)h=m.aggNums(Math.max,null,b);b=n(e,h,a.ncontours);g.size=b.dtick;g.start=k.tickFirst(b);b.range.reverse();g.end=k.tickFirst(b);g.start===e&&(g.start+=g.size);g.end===h&&(g.end-=g.size);g.start>g.end&&(g.start=g.end=(g.start+g.end)/2);a._input.contours||(a._input.contours={});m.extendFlat(a._input.contours,{start:g.start,end:g.end,size:g.size});a._input.autocontour=
!0}else"constraint"!==g.type&&(h=g.start,b=g.end,e=a._input.contours,h>b&&(g.start=e.start=b,b=g.end=e.end=h,h=g.start),0<g.size||(a=h===b?1:n(h,b,a.ncontours).dtick,e.size=g.size=a))}},{"../../lib":716,"../../plots/cartesian/axes":764}],962:[function(a,q,p){var n=a("d3"),k=a("../../components/drawing"),m=a("../heatmap/style"),h=a("./make_color_map");q.exports=function(b){var a=n.select(b).selectAll("g.contour");a.style("opacity",function(b){return b[0].trace.opacity});a.each(function(b){var a=n.select(this);
b=b[0].trace;var e=b.contours,f=b.line,d=e.size||1,c=e.start,g="constraint"===e.type,m=!g&&"lines"===e.coloring,p=!g&&"fill"===e.coloring,q=m||p?h(b):null;a.selectAll("g.contourlevel").each(function(b){n.select(this).selectAll("path").call(k.lineGroupStyle,f.width,m?q(b.level):f.color,f.dash)});var y=e.labelfont;a.selectAll("g.contourlabels text").each(function(b){k.font(n.select(this),{family:y.family,size:y.size,color:y.color||(m?q(b.level):f.color)})});if(g)a.selectAll("g.contourfill path").style("fill",
b.fillcolor);else if(p){var A;a.selectAll("g.contourfill path").style("fill",function(b){void 0===A&&(A=b.level);return q(b.level+.5*d)});void 0===A&&(A=c);a.selectAll("g.contourbg path").style("fill",q(A-.5*d))}});m(b)}},{"../../components/drawing":612,"../heatmap/style":1011,"./make_color_map":958,d3:165}],963:[function(a,q,p){var n=a("../../components/colorscale/defaults"),k=a("./label_defaults");q.exports=function(a,h,b,g,e){var m=b("contours.coloring"),l,f="";"fill"===m&&(l=b("contours.showlines"));
!1!==l&&("lines"!==m&&(f=b("line.color","#000")),b("line.width",.5),b("line.dash"));"none"!==m&&(!0!==a.showlegend&&(h.showlegend=!1),h._dfltShowLegend=!1,n(a,h,g,b,{prefix:"",cLetter:"z"}));b("line.smoothing");k(b,g,f,e)}},{"../../components/colorscale/defaults":601,"./label_defaults":957}],964:[function(a,q,p){p=a("../heatmap/attributes");var n=a("../contour/attributes"),k=a("../../components/colorscale/attributes");a=a("../../lib/extend").extendFlat;var m=n.contours;q.exports=a({carpet:{valType:"string",
editType:"calc"},z:p.z,a:p.x,a0:p.x0,da:p.dx,b:p.y,b0:p.y0,db:p.dy,text:p.text,hovertext:p.hovertext,transpose:p.transpose,atype:p.xtype,btype:p.ytype,fillcolor:n.fillcolor,autocontour:n.autocontour,ncontours:n.ncontours,contours:{type:m.type,start:m.start,end:m.end,size:m.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:m.showlines,showlabels:m.showlabels,labelfont:m.labelfont,labelformat:m.labelformat,operation:m.operation,value:m.value,editType:"calc",
impliedEdits:{autocontour:!1}},line:{color:n.line.color,width:n.line.width,dash:n.line.dash,smoothing:n.line.smoothing,editType:"plot"},transforms:void 0},k("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":598,"../../lib/extend":707,"../contour/attributes":942,"../heatmap/attributes":999}],965:[function(a,q,p){var n=a("../../components/colorscale/calc"),k=a("../../lib"),m=a("../heatmap/convert_column_xyz"),h=a("../heatmap/clean_2d_array"),b=a("../heatmap/interp2d"),g=
a("../heatmap/find_empties"),e=a("../heatmap/make_bound_array"),t=a("./defaults"),l=a("../carpet/lookup_carpetid"),f=a("../contour/set_contours");q.exports=function(a,c){var d=c._carpetTrace=l(a,c);if(d&&d.visible&&"legendonly"!==d.visible){if(!c.a||!c.b){d=a.data[d.index];var p=a.data[c.index];p.a||(p.a=d.a);p.b||(p.b=d.b);t(p,c,c._defaultColor,a._fullLayout)}d=c._carpetTrace;p=d.aaxis;var q=d.baxis;p._minDtick=0;q._minDtick=0;k.isArray1D(c.z)&&m(c,p,q,"a","b",["z"]);var w=c._a=c._a||c.a;var y=c._b=
c._b||c.b;w=w?p.makeCalcdata(c,"_a"):[];y=y?q.makeCalcdata(c,"_b"):[];var A=c.a0||0;var z=c.da||1;var x=c.b0||0;var C=c.db||1;d=c._z=h(c._z||c.z,c.transpose);c._emptypoints=g(d);b(d,c._emptypoints);var B=k.maxRowLength(d);p=e(c,"scaled"===c.xtype?"":w,A,z,B,p);q=e(c,"scaled"===c.ytype?"":y,x,C,d.length,q);p={a:p,b:q,z:d};"levels"===c.contours.type&&"none"!==c.contours.coloring&&n(a,c,{vals:d,containerStr:"",cLetter:"z"});a=[p];f(c,c._z);return a}}},{"../../components/colorscale/calc":599,"../../lib":716,
"../carpet/lookup_carpetid":915,"../contour/set_contours":961,"../heatmap/clean_2d_array":1001,"../heatmap/convert_column_xyz":1003,"../heatmap/find_empties":1005,"../heatmap/interp2d":1008,"../heatmap/make_bound_array":1009,"./defaults":966}],966:[function(a,q,p){var n=a("../../lib"),k=a("../heatmap/xyz_defaults"),m=a("./attributes"),h=a("../contour/constraint_defaults"),b=a("../contour/contours_defaults"),g=a("../contour/style_defaults");q.exports=function(a,t,l,f){function d(b,c){return n.coerce(a,
t,m,b,c)}function c(b){return n.coerce2(a,t,m,b)}d("carpet");a.a&&a.b?k(a,t,d,f,"a","b")?(d("text"),"constraint"===d("contours.type")?h(a,t,d,f,l,{hasHover:!1}):(b(a,t,d,c),g(a,t,d,f,{hasHover:!1}))):t.visible=!1:(t._defaultColor=l,t._length=null)}},{"../../lib":716,"../contour/constraint_defaults":947,"../contour/contours_defaults":949,"../contour/style_defaults":963,"../heatmap/xyz_defaults":1013,"./attributes":964}],967:[function(a,q,p){q.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),
colorbar:a("../contour/colorbar"),calc:a("./calc"),plot:a("./plot"),style:a("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:a("../../plots/cartesian"),categories:"cartesian svg carpet contour symbols showLegend hasLines carpetDependent noHover noSortingByValue".split(" "),meta:{}}},{"../../plots/cartesian":775,"../contour/colorbar":945,"../contour/style":962,"./attributes":964,"./calc":965,"./defaults":966,"./plot":968}],968:[function(a,q,p){function n(b,a){var c,d,e;for(c=
0;c<b.length;c++){var f=b[c];var g=f.pedgepaths=[];var h=f.ppaths=[];for(d=0;d<f.edgepaths.length;d++){var k=f.edgepaths[d];var l=[];for(e=0;e<k.length;e++)l[e]=a(k[e]);g.push(l)}for(d=0;d<f.paths.length;d++){k=f.paths[d];g=[];for(e=0;e<k.length;e++)g[e]=a(k[e]);h.push(g)}}}function k(b,a,c,d,e,g,h){var k=u.ensureSingle(b,"g","contourlines"),l=!1!==e.showlines,n=e.showlabels,t=l&&n,p=y.createLines(k,l||n,a);k=y.createLineClip(k,t,c,d.trace.uid);b=b.selectAll("g.contourlabels").data(n?[0]:[]);b.exit().remove();
b.enter().append("g").classed("contourlabels",!0);if(n){var q=g.xaxis._length;g=g.yaxis._length;var v=[[[0,0],[q,0],[q,g],[0,g]]],w=[];u.clearLocationCache();var x=y.labelFormatter(c,d),z=r.tester.append("text").attr("data-notex",1).call(r.font,e.labelfont),B={left:0,right:q,center:q/2,top:0,bottom:g,middle:g/2},C=A.LABELDISTANCE*Math.sqrt(q*q+g*g)/Math.max(1,a.length/A.LABELINCREASE);p.each(function(b){var a=y.calcTextOpts(b.level,x,z,c);f.select(this).selectAll("path").each(function(c){var d=u.getVisibleSegment(this,
B,a.height/2);if(d&&(m(this,c,b,d,h,a.height),!(d.len<(a.width+a.height)*A.LABELMIN))){c=Math.min(Math.ceil(d.len/C),A.LABELMAX);for(var e=0;e<c;e++){var f=y.findBestTextLocation(this,d,a,w,B);if(!f)break;y.addLabelData(f,a,w,v)}}})});z.remove();y.drawLabels(b,w,c,k,t?v:null)}n&&!l&&p.remove()}function m(a,c,d,e,f,k){function l(a,c){var d=0;if(.1>Math.abs(a[0]-r)||.1>Math.abs(a[0]-t)){var e=b(f.dxydb_rough(a[0],a[1],.1));d=Math.max(d,k*g(c,e)/2)}if(.1>Math.abs(a[1]-p)||.1>Math.abs(a[1]-q))e=b(f.dxyda_rough(a[0],
a[1],.1)),d=Math.max(d,k*g(c,e)/2);return d}for(var m,n=0;n<d.pedgepaths.length;n++)c===d.pedgepaths[n]&&(m=d.edgepaths[n]);if(m){var r=f.a[0],t=f.a[f.a.length-1],p=f.b[0],q=f.b[f.b.length-1];c=h(a,0,1);a=h(a,e.total,e.total-1);c=l(m[0],c);m=e.total-l(m[m.length-1],a);e.min<c&&(e.min=c);e.max>m&&(e.max=m);e.len=e.max-e.min}}function h(b,a,c){a=b.getPointAtLength(a);c=b.getPointAtLength(c);b=c.x-a.x;a=c.y-a.y;c=Math.sqrt(b*b+a*a);return[b/c,a/c]}function b(b){var a=Math.sqrt(b[0]*b[0]+b[1]*b[1]);return[b[0]/
a,b[1]/a]}function g(b,a){b=Math.abs(b[0]*a[0]+b[1]*a[1]);return Math.sqrt(1-b*b)/b}function e(b,a,e,f,g,h){var k,l=u.ensureSingle(b,"g","contourbg").selectAll("path").data("fill"!==h||g?[]:[0]);l.enter().append("path");l.exit().remove();var m=[];for(k=0;k<a.length;k++)b=a[k],g=d([],b.x,e.c2p),h=d([],b.y,f.c2p),m.push(c(g,h,b.bicubic));l.attr("d","M"+m.join("L")+"Z").style("stroke","none")}function t(b,a,c,d,e,g,h,k,m,n,r){(n="fill"===n)&&C(e,b.contours);a=u.ensureSingle(a,"g","contourfill").selectAll("path").data(n?
e:[]);a.enter().append("path");a.exit().remove();a.each(function(a){(a=(a.prefixBoundary?r:"")+l(b,a,g,h,k,m,c,d))?f.select(this).attr("d",a).style("stroke","none"):f.select(this).remove()})}function l(b,a,c,d,e,f,g,h){function k(b){return Math.abs(b[0]-c[2][0])<w}function l(b,a){var d="";if(Math.abs(b[1]-c[0][1])<x&&!k(b)||Math.abs(b[1]-c[2][1])<x&&!(Math.abs(b[0]-c[0][0])<w)){var l=e.aaxis;var m=D(e,f,[b[0],a[0]],.5*(b[1]+a[1]))}else l=e.baxis,m=D(e,f,.5*(b[0]+a[0]),[b[1],a[1]]);for(b=1;b<m.length;b++)for(d+=
l.smoothing?"C":"L",a=0;a<m[b].length;a++){var n=m[b][a];d+=[g.c2p(n[0]),h.c2p(n[1])]+" "}return d}var m="",n=a.edgepaths.map(function(b,a){return a}),t=!0,p,q,v,w=1E-4*Math.abs(c[0][0]-c[2][0]),x=1E-4*Math.abs(c[0][1]-c[2][1]);b=0;for(p=null;n.length;){var z=a.edgepaths[b][0];p&&(m+=l(p,z));p=r.smoothopen(a.edgepaths[b].map(d),a.smoothing);m+=t?p:p.replace(/^M/,"L");n.splice(n.indexOf(b),1);p=a.edgepaths[b][a.edgepaths[b].length-1];z=-1;for(t=0;4>t;t++){if(!p){u.log("Missing end?",b,a);break}Math.abs(p[1]-
c[0][1])<x&&!k(p)?q=c[1]:Math.abs(p[0]-c[0][0])<w?q=c[0]:Math.abs(p[1]-c[2][1])<x?q=c[3]:k(p)&&(q=c[2]);for(v=0;v<a.edgepaths.length;v++){var A=a.edgepaths[v][0];Math.abs(p[0]-q[0])<w?Math.abs(p[0]-A[0])<w&&0<=(A[1]-p[1])*(q[1]-A[1])&&(q=A,z=v):Math.abs(p[1]-q[1])<x?Math.abs(p[1]-A[1])<x&&0<=(A[0]-p[0])*(q[0]-A[0])&&(q=A,z=v):u.log("endpt to newendpt is not vert. or horz.",p,q,A)}if(0<=z)break;m+=l(p,q);p=q}if(z===a.edgepaths.length){u.log("unclosed perimeter path");break}b=z;if(t=-1===n.indexOf(b))b=
n[0],m+=l(p,q)+"Z",p=null}for(b=0;b<a.paths.length;b++)m+=r.smoothclosed(a.paths[b].map(d),a.smoothing);return m}var f=a("d3"),d=a("../carpet/map_1d_array"),c=a("../carpet/makepath"),r=a("../../components/drawing"),u=a("../../lib"),v=a("../contour/make_crossings"),w=a("../contour/find_all_paths"),y=a("../contour/plot"),A=a("../contour/constants"),z=a("../contour/convert_to_constraints"),x=a("../contour/empty_pathinfo"),C=a("../contour/close_boundaries"),B=a("../carpet/lookup_carpetid"),D=a("../carpet/axis_aligned_line");
q.exports=function(b,a,g,h){var l=a.xaxis,m=a.yaxis;u.makeTraceGroups(h,g,"contour").each(function(g){function h(b){b=u.ab2xy(b[0],b[1],!0);return[l.c2p(b[0]),m.c2p(b[1])]}var p=f.select(this);g=g[0];var q=g.trace,u=q._carpetTrace=B(b,q),A=b.calcdata[u.index][0];if(u.visible&&"legendonly"!==u.visible){var y=g.a,C=g.b,E=q.contours,D=x(E,a,g),H="constraint"===E.type,F=E._operation,G=H?"\x3d"===F?"lines":"fill":E.coloring,J=[[y[0],C[C.length-1]],[y[y.length-1],C[C.length-1]],[y[y.length-1],C[0]],[y[0],
C[0]]];v(D);w(D,1E-8*(y[y.length-1]-y[0]),1E-8*(C[C.length-1]-C[0]));y=D;"constraint"===E.type&&(y=z(D,F));n(D,h);var L,K=[];for(L=A.clipsegments.length-1;0<=L;L--){F=A.clipsegments[L];C=d([],F.x,l.c2p);var fa=d([],F.y,m.c2p);C.reverse();fa.reverse();K.push(c(C,fa,F.bicubic))}F="M"+K.join("L")+"Z";e(p,A.clipsegments,l,m,H,G);t(q,p,l,m,y,J,h,u,A,G,F);k(p,D,b,g,E,a,u);r.setClipUrl(p,u._clipPathId,b)}})}},{"../../components/drawing":612,"../../lib":716,"../carpet/axis_aligned_line":899,"../carpet/lookup_carpetid":915,
"../carpet/makepath":916,"../carpet/map_1d_array":917,"../contour/close_boundaries":944,"../contour/constants":946,"../contour/convert_to_constraints":950,"../contour/empty_pathinfo":952,"../contour/find_all_paths":954,"../contour/make_crossings":959,"../contour/plot":960,d3:165}],969:[function(a,q,p){p=a("../../components/colorscale/attributes");var n=a("../../plots/template_attributes").hovertemplateAttrs,k=a("../../plots/attributes"),m=a("../scattermapbox/attributes");a=a("../../lib/extend").extendFlat;
q.exports=a({lon:m.lon,lat:m.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:m.text,hovertext:m.hovertext,hoverinfo:a({},k.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:n(),showlegend:a({},k.showlegend,{dflt:!1})},p("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":598,"../../lib/extend":707,"../../plots/attributes":761,"../../plots/template_attributes":840,
"../scattermapbox/attributes":1183}],970:[function(a,q,p){var n=a("fast-isnumeric"),k=a("../../lib").isArrayOrTypedArray,m=a("../../constants/numerical").BADNUM,h=a("../../components/colorscale/calc"),b=a("../../lib")._;q.exports=function(a,e){for(var g=e._length,l=Array(g),f=e.z,d=k(f)&&f.length,c=0;c<g;c++){var r=l[c]={},p=e.lon[c],q=e.lat[c];r.lonlat=n(p)&&n(q)?[+p,+q]:[m,m];d&&(p=f[c],r.z=n(p)?p:m)}h(a,e,{vals:d?f:[0,1],containerStr:"",cLetter:"z"});g&&(l[0].t={labels:{lat:b(a,"lat:")+" ",lon:b(a,
"lon:")+" "}});return l}},{"../../components/colorscale/calc":599,"../../constants/numerical":692,"../../lib":716,"fast-isnumeric":228}],971:[function(a,q,p){var n=a("fast-isnumeric"),k=a("../../lib"),m=a("../../components/color"),h=a("../../components/colorscale"),b=a("../../constants/numerical").BADNUM,g=a("../../lib/geojson_utils").makeBlank;q.exports=function(a){var e=a[0].trace,l=!0===e.visible&&0!==e._length,f=e._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:g()};if(!l)return f;
l=[];var d,c=e.z,r=e.radius;c=k.isArrayOrTypedArray(c)&&c.length;var p=k.isArrayOrTypedArray(r);for(d=0;d<a.length;d++){var q=a[d],w=q.lonlat;if(w[0]!==b){var y={};c&&(q=q.z,y.z=q!==b?q:0);p&&(y.r=n(r[d])&&0<r[d]?+r[d]:0);l.push({type:"Feature",geometry:{type:"Point",coordinates:w},properties:y})}}a=h.extractOpts(e);r=a.reversescale?h.flipScale(a.colorscale):a.colorscale;d=r[0][1];w=["interpolate",["linear"],["heatmap-density"],0,1>m.opacity(d)?d:m.addOpacity(d,0)];for(d=1;d<r.length;d++)w.push(r[d][0],
r[d][1]);d=["interpolate",["linear"],["get","z"],a.min,0,a.max,1];k.extendFlat(f.heatmap.paint,{"heatmap-weight":c?d:1/(a.max-a.min),"heatmap-color":w,"heatmap-radius":p?{type:"identity",property:"r"}:e.radius,"heatmap-opacity":e.opacity});f.geojson={type:"FeatureCollection",features:l};f.heatmap.layout.visibility="visible";return f}},{"../../components/color":591,"../../components/colorscale":603,"../../constants/numerical":692,"../../lib":716,"../../lib/geojson_utils":711,"fast-isnumeric":228}],
972:[function(a,q,p){var n=a("../../lib"),k=a("../../components/colorscale/defaults"),m=a("./attributes");q.exports=function(a,b,g,e){function h(e,d){return n.coerce(a,b,m,e,d)}g=h("lon")||[];var l=h("lat")||[];(g=Math.min(g.length,l.length))?(b._length=g,h("z"),h("radius"),h("below"),h("text"),h("hovertext"),h("hovertemplate"),k(a,b,e,h,{prefix:"",cLetter:"z"})):b.visible=!1}},{"../../components/colorscale/defaults":601,"../../lib":716,"./attributes":969}],973:[function(a,q,p){q.exports=function(a,
k){a.lon=k.lon;a.lat=k.lat;a.z=k.z;return a}},{}],974:[function(a,q,p){var n=a("../../lib"),k=a("../../plots/cartesian/axes"),m=a("../scattermapbox/hover");q.exports=function(a,b,g){if(a=m(a,b,g)){a=a[0];var e=a.cd;b=e[0].trace;g=e[a.index];delete a.color;if("z"in g){var h=a.subplot.mockAxis;a.z=g.z;a.zLabel=k.tickText(h,h.c2l(g.z),"hover").text}e=e[0].t.labels;if(b.hovertemplate)b=void 0;else{h=(g.hi||b.hoverinfo).split("+");var l=-1!==h.indexOf("all"),f=-1!==h.indexOf("lon"),d=-1!==h.indexOf("lat"),
c=g.lonlat,r=[];l||f&&d?r.push("("+(c[0]+", ")+(c[1]+")")):f?r.push(e.lon+(c[0]+"")):d&&r.push(e.lat+(c[1]+""));(l||-1!==h.indexOf("text"))&&n.fillText(g,b,r);b=r.join("\x3cbr\x3e")}a.extraText=b;return[a]}}},{"../../lib":716,"../../plots/cartesian/axes":764,"../scattermapbox/hover":1188}],975:[function(a,q,p){q.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:a("../heatmap/colorbar"),formatLabels:a("../scattermapbox/format_labels"),calc:a("./calc"),plot:a("./plot"),
hoverPoints:a("./hover"),eventData:a("./event_data"),getBelow:function(a,k){a=k.getMapLayers();for(k=0;k<a.length;k++){var m=a[k],h=m.id;if("symbol"===m.type&&"string"===typeof h&&-1===h.indexOf("plotly-"))return h}},moduleType:"trace",name:"densitymapbox",basePlotModule:a("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":819,"../heatmap/colorbar":1002,"../scattermapbox/format_labels":1187,"./attributes":969,"./calc":970,"./defaults":972,
"./event_data":973,"./hover":974,"./plot":976}],976:[function(a,q,p){function n(a,b){this.type="densitymapbox";this.subplot=a;this.uid=b;this.sourceId="source-"+b;this.layerList=[["heatmap",m+b+"-heatmap"]];this.below=null}var k=a("./convert"),m=a("../../plots/mapbox/constants").traceLayerPrefix;a=n.prototype;a.update=function(a){var b=this.subplot,g=this.layerList;a=k(a);var e=b.belowLookup["trace-"+this.uid];b.map.getSource(this.sourceId).setData(a.geojson);e!==this.below&&(this._removeLayers(),
this._addLayers(a,e),this.below=e);for(e=0;e<g.length;e++){var h=g[e],l=h[1];h=a[h[0]];b.setOptions(l,"setLayoutProperty",h.layout);"visible"===h.layout.visibility&&b.setOptions(l,"setPaintProperty",h.paint)}};a._addLayers=function(a,b){for(var g=this.subplot,e=this.layerList,h=this.sourceId,k=0;k<e.length;k++){var f=e[k],d=f[0],c=a[d];g.addLayer({type:d,id:f[1],source:h,layout:c.layout,paint:c.paint},b)}};a._removeLayers=function(){for(var a=this.subplot.map,b=this.layerList,g=b.length-1;0<=g;g--)a.removeLayer(b[g][1])};
a.dispose=function(){var a=this.subplot.map;this._removeLayers();a.removeSource(this.sourceId)};q.exports=function(a,b){var g=b[0].trace,e=new n(a,g.uid),h=e.sourceId;b=k(b);g=e.below=a.belowLookup["trace-"+g.uid];a.map.addSource(h,{type:"geojson",data:b.geojson});e._addLayers(b,g);return e}},{"../../plots/mapbox/constants":817,"./convert":971}],977:[function(a,q,p){var n=a("../../lib");q.exports=function(a,m){for(var h=0;h<a.length;h++)a[h].i=h;n.mergeArray(m.text,a,"tx");n.mergeArray(m.hovertext,
a,"htx");if(m=m.marker)if(n.mergeArray(m.opacity,a,"mo"),n.mergeArray(m.color,a,"mc"),m=m.line)n.mergeArray(m.color,a,"mlc"),n.mergeArrayCastPositive(m.width,a,"mlw")}},{"../../lib":716}],978:[function(a,q,p){p=a("../bar/attributes");var n=a("../scatter/attributes").line,k=a("../../plots/attributes"),m=a("../../plots/template_attributes").hovertemplateAttrs,h=a("../../plots/template_attributes").texttemplateAttrs,b=a("./constants"),g=a("../../lib/extend").extendFlat;a=a("../../components/color");
q.exports={x:p.x,x0:p.x0,dx:p.dx,y:p.y,y0:p.y0,dy:p.dy,hovertext:p.hovertext,hovertemplate:m({},{keys:b.eventDataKeys}),hoverinfo:g({},k.hoverinfo,{flags:"name;x;y;text;percent initial;percent previous;percent total".split(";")}),textinfo:{valType:"flaglist",flags:"label;text;percent initial;percent previous;percent total;value".split(";"),extras:["none"],editType:"plot",arrayOk:!1},texttemplate:h({editType:"plot"},{keys:b.eventDataKeys.concat(["label","value"])}),text:p.text,textposition:g({},p.textposition,
{dflt:"auto"}),insidetextanchor:g({},p.insidetextanchor,{dflt:"middle"}),textangle:g({},p.textangle,{dflt:0}),textfont:p.textfont,insidetextfont:p.insidetextfont,outsidetextfont:p.outsidetextfont,constraintext:p.constraintext,cliponaxis:p.cliponaxis,orientation:g({},p.orientation,{}),offset:g({},p.offset,{arrayOk:!1}),width:g({},p.width,{arrayOk:!1}),marker:p.marker,connector:{fillcolor:{valType:"color",editType:"style"},line:{color:g({},n.color,{dflt:a.defaultLine}),width:g({},n.width,{dflt:0,editType:"plot"}),
dash:n.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:p.offsetgroup,alignmentgroup:p.alignmentgroup}},{"../../components/color":591,"../../lib/extend":707,"../../plots/attributes":761,"../../plots/template_attributes":840,"../bar/attributes":855,"../scatter/attributes":1119,"./constants":980}],979:[function(a,q,p){function n(a){return a===b?0:a}var k=a("../../plots/cartesian/axes"),m=a("./arrays_to_calcdata"),h=a("../scatter/calc_selection"),
b=a("../../constants/numerical").BADNUM;q.exports=function(a,e){var g=k.getFromId(a,e.xaxis||"x"),l=k.getFromId(a,e.yaxis||"y");"h"===e.orientation?(a=g.makeCalcdata(e,"x"),g=l.makeCalcdata(e,"y")):(a=l.makeCalcdata(e,"y"),g=g.makeCalcdata(e,"x"));var f=Math.min(g.length,a.length),d=Array(f);e._base=[];for(l=0;l<f;l++){0>a[l]&&(a[l]=b);var c=!1;a[l]!==b&&l+1<f&&a[l+1]!==b&&(c=!0);c=d[l]={p:g[l],s:a[l],cNext:c};e._base[l]=-.5*c.s;e.ids&&(c.id=String(e.ids[l]));0===l&&(d[0].vTotal=0);d[0].vTotal+=n(c.s);
c.begR=n(c.s)/n(d[0].s)}for(l=0;l<f;l++)if(c=d[l],c.s!==b){c.sumR=c.s/d[0].vTotal;c.difR=void 0!==r?c.s/r:1;var r=c.s}m(d,e);h(d,e);return d}},{"../../constants/numerical":692,"../../plots/cartesian/axes":764,"../scatter/calc_selection":1121,"./arrays_to_calcdata":977}],980:[function(a,q,p){q.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],981:[function(a,q,p){var n=a("../bar/cross_trace_calc").setGroupPositions;q.exports=function(a,m){var h=a._fullLayout,b=a._fullData,
g=a.calcdata,e=m.xaxis,k=m.yaxis;m=[];var l=[],f=[],d;for(d=0;d<b.length;d++){var c=b[d];var r="h"===c.orientation;!0===c.visible&&c.xaxis===e._id&&c.yaxis===k._id&&"funnel"===c.type&&(c=g[d],r?f.push(c):l.push(c),m.push(c))}h={mode:h.funnelmode,norm:h.funnelnorm,gap:h.funnelgap,groupgap:h.funnelgroupgap};n(a,e,k,l,h);n(a,k,e,f,h);for(d=0;d<m.length;d++)for(c=m[d],a=0;a<c.length;a++)a+1<c.length&&(c[a].nextP0=c[a+1].p0,c[a].nextS0=c[a+1].s0,c[a].nextP1=c[a+1].p1,c[a].nextS1=c[a+1].s1)}},{"../bar/cross_trace_calc":858}],
982:[function(a,q,p){function n(a){a=k.isArrayOrTypedArray(a)?"#000":a;return e.addOpacity(a,.5*e.opacity(a))}var k=a("../../lib"),m=a("../bar/defaults").handleGroupingDefaults,h=a("../bar/defaults").handleText,b=a("../scatter/xy_defaults"),g=a("./attributes"),e=a("../../components/color");q.exports={supplyDefaults:function(a,l,f,d){function c(b,c){return k.coerce(a,l,g,b,c)}if(b(a,l,d,c)){c("orientation",l.y&&!l.x?"v":"h");c("offset");c("width");var m=c("text");c("hovertext");c("hovertemplate");
var t=c("textposition");h(a,l,d,c,t,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0});"none"===l.textposition||l.texttemplate||c("textinfo",Array.isArray(m)?"text+value":"value");f=c("marker.color",f);c("marker.line.color",e.defaultLine);c("marker.line.width");c("connector.visible")&&(c("connector.fillcolor",n(f)),c("connector.line.width")&&(c("connector.line.color"),c("connector.line.dash")))}else l.visible=
!1},crossTraceDefaults:function(a,b){function e(a){return k.coerce(c._input,c,g,a)}if("group"===b.funnelmode)for(var d=0;d<a.length;d++){var c=a[d];var h=c._input;m(h,c,b,e)}}}},{"../../components/color":591,"../../lib":716,"../bar/defaults":859,"../scatter/xy_defaults":1145,"./attributes":978}],983:[function(a,q,p){q.exports=function(a,k){a.x="xVal"in k?k.xVal:k.x;a.y="yVal"in k?k.yVal:k.y;"percentInitial"in k&&(a.percentInitial=k.percentInitial);"percentPrevious"in k&&(a.percentPrevious=k.percentPrevious);
"percentTotal"in k&&(a.percentTotal=k.percentTotal);k.xa&&(a.xaxis=k.xa);k.ya&&(a.yaxis=k.ya);return a}},{}],984:[function(a,q,p){var n=a("../../components/color").opacity,k=a("../bar/hover").hoverOnBars,m=a("../../lib").formatPercent;q.exports=function(a,b,g,e){if(a=k(a,b,g,e)){b=a.cd;g=b[0].trace;b=b[a.index];a[("h"===g.orientation?"x":"y")+"LabelVal"]=b.s;a.percentInitial=b.begR;a.percentInitialLabel=m(b.begR,1);a.percentPrevious=b.difR;a.percentPreviousLabel=m(b.difR,1);a.percentTotal=b.sumR;
a.percentTotalLabel=m(b.sumR,1);var h=b.hi||g.hoverinfo;e=[];if(h&&"none"!==h&&"skip"!==h){var l="all"===h;h=h.split("+");(l||-1!==h.indexOf("percent initial"))&&e.push(a.percentInitialLabel+" of initial");(l||-1!==h.indexOf("percent previous"))&&e.push(a.percentPreviousLabel+" of previous");(l||-1!==h.indexOf("percent total"))&&e.push(a.percentTotalLabel+" of total")}a.extraText=e.join("\x3cbr\x3e");l=g.marker;g=b.mc||l.color;e=b.mlc||l.line.color;b=b.mlw||l.line.width;b=n(g)?g:n(e)&&b?e:void 0;
a.color=b;return[a]}}},{"../../components/color":591,"../../lib":716,"../bar/hover":862}],985:[function(a,q,p){q.exports={attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyDefaults:a("./defaults").supplyDefaults,crossTraceDefaults:a("./defaults").crossTraceDefaults,supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc"),crossTraceCalc:a("./cross_trace_calc"),plot:a("./plot"),style:a("./style").style,hoverPoints:a("./hover"),eventData:a("./event_data"),selectPoints:a("../bar/select"),
moduleType:"trace",name:"funnel",basePlotModule:a("../../plots/cartesian"),categories:"bar-like cartesian svg oriented showLegend zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":775,"../bar/select":867,"./attributes":978,"./calc":979,"./cross_trace_calc":981,"./defaults":982,"./event_data":983,"./hover":984,"./layout_attributes":986,"./layout_defaults":987,"./plot":988,"./style":989}],986:[function(a,q,p){q.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",
editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],987:[function(a,q,p){var n=a("../../lib"),k=a("./layout_attributes");q.exports=function(a,h,b){for(var g=!1,e=0;e<b.length;e++){var m=b[e];if(m.visible&&"funnel"===m.type){g=!0;break}}g&&(n.coerce(a,h,k,"funnelmode",void 0),n.coerce(a,h,k,"funnelgap",.2),n.coerce(a,h,k,"funnelgroupgap",void 0))}},{"../../lib":716,"./layout_attributes":986}],988:[function(a,
q,p){function n(a,e,d,c){var f=e.xaxis,k=e.yaxis;b.makeTraceGroups(c,d,"trace bars").each(function(c){var d=h.select(this);c=c[0].trace;d=b.ensureSingle(d,"g","regions");if(c.connector&&c.connector.visible){var l="h"===c.orientation;d=d.selectAll("g.region").data(b.identity);d.enter().append("g").classed("region",!0);d.exit().remove();var n=d.size();d.each(function(c,d){if(d===n-1||c.cNext){d=m(c,f,k,l);c=d[0];d=d[1];var r="";void 0!==c[3]&&void 0!==d[3]&&(r=l?r+("M"+c[0]+","+d[1]+"L"+c[2]+","+d[2]+
"H"+c[3]+"L"+c[1]+","+d[1]+"Z"):r+("M"+c[1]+","+d[1]+"L"+c[2]+","+d[3]+"V"+d[2]+"L"+c[1]+","+d[0]+"Z"));b.ensureSingle(h.select(this),"path").attr("d",r).call(g.setClipUrl,e.layerClipId,a)}})}else d.remove()})}function k(a,e,d,c){var f=e.xaxis,k=e.yaxis;b.makeTraceGroups(c,d,"trace bars").each(function(c){var d=h.select(this);c=c[0].trace;d=b.ensureSingle(d,"g","lines");if(c.connector&&c.connector.visible&&c.connector.line.width){var l="h"===c.orientation;d=d.selectAll("g.line").data(b.identity);
d.enter().append("g").classed("line",!0);d.exit().remove();var n=d.size();d.each(function(c,d){if(d===n-1||c.cNext){d=m(c,f,k,l);c=d[0];d=d[1];var r="";void 0!==c[3]&&void 0!==d[3]&&(l?(r+="M"+c[0]+","+d[1]+"L"+c[2]+","+d[2],r+="M"+c[1]+","+d[1]+"L"+c[3]+","+d[2]):(r+="M"+c[1]+","+d[1]+"L"+c[2]+","+d[3],r+="M"+c[1]+","+d[0]+"L"+c[2]+","+d[2]));""===r&&(r="M0,0Z");b.ensureSingle(h.select(this),"path").attr("d",r).call(g.setClipUrl,e.layerClipId,a)}})}else d.remove()})}function m(a,b,d,c){var e=[],
f=[],g=c?b:d;b=c?d:b;e[0]=g.c2p(a.s0,!0);f[0]=b.c2p(a.p0,!0);e[1]=g.c2p(a.s1,!0);f[1]=b.c2p(a.p1,!0);e[2]=g.c2p(a.nextS0,!0);f[2]=b.c2p(a.nextP0,!0);e[3]=g.c2p(a.nextS1,!0);f[3]=b.c2p(a.nextP1,!0);return c?[e,f]:[f,e]}var h=a("d3"),b=a("../../lib"),g=a("../../components/drawing"),e=a("../bar/plot"),t=a("../bar/uniform_text").clearMinTextSize;q.exports=function(a,b,d,c){var f=a._fullLayout;t("funnel",f);n(a,b,d,c);k(a,b,d,c);e.plot(a,b,d,c,{mode:f.funnelmode,norm:f.funnelmode,gap:f.funnelgap,groupgap:f.funnelgroupgap})}},
{"../../components/drawing":612,"../../lib":716,"../bar/plot":866,"../bar/uniform_text":871,d3:165}],989:[function(a,q,p){var n=a("d3"),k=a("../../components/drawing"),m=a("../../components/color"),h=a("../../constants/interactions").DESELECTDIM;p=a("../bar/style");var b=a("../bar/uniform_text").resizeText,g=p.styleTextPoints;q.exports={style:function(a,t,l){t=l?l:n.select(a).selectAll("g.funnellayer").selectAll("g.trace");b(a,t,"funnel");t.style("opacity",function(a){return a[0].trace.opacity});
t.each(function(b){var d=n.select(this),c=b[0].trace;d.selectAll(".point \x3e path").each(function(a){if(!a.isBlank){var b=c.marker;n.select(this).call(m.fill,a.mc||b.color).call(m.stroke,a.mlc||b.line.color).call(k.dashLine,b.line.dash,a.mlw||b.line.width).style("opacity",c.selectedpoints&&!a.selected?h:1)}});g(d,c,a);d.selectAll(".regions").each(function(){n.select(this).selectAll("path").style("stroke-width",0).call(m.fill,c.connector.fillcolor)});d.selectAll(".lines").each(function(){var a=c.connector.line;
k.lineGroupStyle(n.select(this).selectAll("path"),a.width,a.color,a.dash)})})}}},{"../../components/color":591,"../../components/drawing":612,"../../constants/interactions":691,"../bar/style":869,"../bar/uniform_text":871,d3:165}],990:[function(a,q,p){p=a("../pie/attributes");var n=a("../../plots/attributes"),k=a("../../plots/domain").attributes,m=a("../../plots/template_attributes").hovertemplateAttrs,h=a("../../plots/template_attributes").texttemplateAttrs;a=a("../../lib/extend").extendFlat;q.exports=
{labels:p.labels,label0:p.label0,dlabel:p.dlabel,values:p.values,marker:{colors:p.marker.colors,line:{color:a({},p.marker.line.color,{dflt:null}),width:a({},p.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:p.text,hovertext:p.hovertext,scalegroup:a({},p.scalegroup,{}),textinfo:a({},p.textinfo,{flags:["label","text","value","percent"]}),texttemplate:h({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:a({},n.hoverinfo,{flags:["label","text","value","percent",
"name"]}),hovertemplate:m({},{keys:["label","color","value","text","percent"]}),textposition:a({},p.textposition,{values:["inside","none"],dflt:"inside"}),textfont:p.textfont,insidetextfont:p.insidetextfont,title:{text:p.title.text,font:p.title.font,position:a({},p.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:k({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",
min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":707,"../../plots/attributes":761,"../../plots/domain":789,"../../plots/template_attributes":840,"../pie/attributes":1093}],991:[function(a,q,p){var n=a("../../plots/plots");p.name="funnelarea";p.plot=function(a,m,h,b){n.plotBasePlot(p.name,a,m,h,b)};p.clean=function(a,m,h,b){n.cleanBasePlot(p.name,a,m,h,b)}},{"../../plots/plots":825}],992:[function(a,q,p){var n=a("../pie/calc");q.exports={calc:function(a,m){return n.calc(a,m)},crossTraceCalc:function(a){n.crossTraceCalc(a,
{type:"funnelarea"})}}},{"../pie/calc":1095}],993:[function(a,q,p){var n=a("../../lib"),k=a("./attributes"),m=a("../../plots/domain").defaults,h=a("../bar/defaults").handleText,b=a("../pie/defaults").handleLabelsAndValues;q.exports=function(a,e,t,l){function f(b,c){return n.coerce(a,e,k,b,c)}t=f("labels");var d=f("values");t=b(t,d);d=t.len;e._hasLabels=t.hasLabels;e._hasValues=t.hasValues;!e._hasLabels&&e._hasValues&&(f("label0"),f("dlabel"));if(d){e._length=d;f("marker.line.width")&&f("marker.line.color",
l.paper_bgcolor);f("marker.colors");f("scalegroup");t=f("text");d=f("texttemplate");var c;d||(c=f("textinfo",Array.isArray(t)?"text+percent":"percent"));f("hovertext");f("hovertemplate");if(d||c&&"none"!==c)c=f("textposition"),h(a,e,l,f,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});m(e,l,f);f("title.text")&&(f("title.position"),n.coerceFont(f,"title.font",l.font));f("aspectratio");f("baseratio")}else e.visible=
!1}},{"../../lib":716,"../../plots/domain":789,"../bar/defaults":859,"../pie/defaults":1096,"./attributes":990}],994:[function(a,q,p){q.exports={moduleType:"trace",name:"funnelarea",basePlotModule:a("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyDefaults:a("./defaults"),supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc").calc,crossTraceCalc:a("./calc").crossTraceCalc,plot:a("./plot"),style:a("./style"),
styleOne:a("../pie/style_one"),meta:{}}},{"../pie/style_one":1104,"./attributes":990,"./base_plot":991,"./calc":992,"./defaults":993,"./layout_attributes":995,"./layout_defaults":996,"./plot":997,"./style":998}],995:[function(a,q,p){a=a("../pie/layout_attributes").hiddenlabels;q.exports={hiddenlabels:a,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":1100}],996:[function(a,q,p){var n=a("../../lib"),
k=a("./layout_attributes");q.exports=function(a,h){n.coerce(a,h,k,"hiddenlabels",void 0);n.coerce(a,h,k,"funnelareacolorway",h.colorway);n.coerce(a,h,k,"extendfunnelareacolors",void 0)}},{"../../lib":716,"./layout_attributes":995}],997:[function(a,q,p){function n(a,b){return"l"+(b[0]-a[0])+","+(b[1]-a[1])}function k(a,b){return[.5*(a[0]+b[0]),.5*(a[1]+b[1])]}function m(a){function b(){var a=Math.sqrt(g);return[a,-a]}if(a.length){var c=a[0],d=c.trace,e=d.aspectratio;d=d.baseratio;.999<d&&(d=.999);
d=Math.pow(d,2);var f=c.vTotal,g=f*d/(1-d)/f;d=[];d.push(b());var h;for(h=a.length-1;-1<h;h--){var l=a[h];l.hidden||(g+=l.v/f,d.push(b()))}f=Infinity;var m=-Infinity;for(h=0;h<d.length;h++)l=d[h],f=Math.min(f,l[1]),m=Math.max(m,l[1]);for(h=0;h<d.length;h++)d[h][1]-=(m+f)/2;h=c.r;f=(m-f)/2;l=h/d[d.length-1][0];e*=h/f;c.r=e*f;for(h=0;h<d.length;h++)d[h][0]*=l,d[h][1]*=e;l=d[0];c=[-l[0],l[1]];e=[l[0],l[1]];f=0;for(h=a.length-1;-1<h;h--)if(l=a[h],!l.hidden){f+=1;m=d[f][0];var n=d[f][1];l.TL=[-m,n];l.TR=
[m,n];l.BL=c;l.BR=e;l.pxmid=k(l.TR,l.BR);c=l.TL;e=l.TR}}}var h=a("d3"),b=a("../../components/drawing"),g=a("../../lib"),e=a("../../lib/svg_text_utils"),t=a("../bar/plot").toMoveInsideBar;p=a("../bar/uniform_text");var l=p.recordMinTextSize,f=p.clearMinTextSize,d=a("../pie/helpers");a=a("../pie/plot");var c=a.attachFxHandlers,r=a.determineInsideTextFont,u=a.layoutAreas,v=a.prerenderTitles,w=a.positionTitleOutside,y=a.formatSliceLabel;q.exports=function(a,k){var p=a._fullLayout;f("funnelarea",p);v(k,
a);u(k,p._size);g.makeTraceGroups(p._funnelarealayer,k,"trace").each(function(f){var k=h.select(this),q=f[0],u=q.trace;m(f);k.each(function(){var k=h.select(this).selectAll("g.slice").data(f);k.enter().append("g").classed("slice",!0);k.exit().remove();k.each(function(k,m){if(k.hidden)h.select(this).selectAll("path,g").remove();else{k.pointNumber=k.i;k.curveNumber=u.index;var v=q.cx,w=q.cy,x=h.select(this),z=x.selectAll("path.surface").data([k]);z.enter().append("path").classed("surface",!0).style({"pointer-events":"all"});
x.call(c,a,f);var A="M"+(v+k.TR[0])+","+(w+k.TR[1])+n(k.TR,k.BR)+n(k.BR,k.BL)+n(k.BL,k.TL)+"Z";z.attr("d",A);y(a,k,q);z=d.castOption(u.textposition,k.pts);x=x.selectAll("g.slicetext").data(k.text&&"none"!==z?[0]:[]);x.enter().append("g").classed("slicetext",!0);x.exit().remove();x.each(function(){var c=g.ensureSingle(h.select(this),"text","",function(a){a.attr("data-notex",1)}),d=g.ensureUniformFontSize(a,r(u,k,p.font));c.text(k.text).attr({"class":"slicetext",transform:"","text-anchor":"middle"}).call(b.font,
d).call(e.convertToTspans,a);var n=b.bBox(c.node());n=t(Math.max(k.TL[0],k.BL[0])+v,Math.min(k.TR[0],k.BR[0])+v,Math.min(k.BL[1],k.BR[1])+w,Math.max(k.TL[1],k.TR[1])+w,n,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"});n.fontSize=d.size;l(u.type,n,p);f[m].transform=n;c.attr("transform",g.getTextTransform(n))})}});k=h.select(this).selectAll("g.titletext").data(u.title.text?[0]:[]);k.enter().append("g").classed("titletext",!0);k.exit().remove();k.each(function(){var c=g.ensureSingle(h.select(this),
"text","",function(a){a.attr("data-notex",1)}),d=u.title.text;u._meta&&(d=g.templateString(d,u._meta));c.text(d).attr({"class":"titletext",transform:"","text-anchor":"middle"}).call(b.font,u.title.font).call(e.convertToTspans,a);d=w(q,p._size);c.attr("transform","translate("+d.x+","+d.y+")"+(1>d.scale?"scale("+d.scale+")":"")+"translate("+d.tx+","+d.ty+")")})})})}},{"../../components/drawing":612,"../../lib":716,"../../lib/svg_text_utils":740,"../bar/plot":866,"../bar/uniform_text":871,"../pie/helpers":1098,
"../pie/plot":1102,d3:165}],998:[function(a,q,p){var n=a("d3"),k=a("../pie/style_one"),m=a("../bar/uniform_text").resizeText;q.exports=function(a){var b=a._fullLayout._funnelarealayer.selectAll(".trace");m(a,b,"funnelarea");b.each(function(a){var b=a[0].trace;a=n.select(this);a.style({opacity:b.opacity});a.selectAll("path.surface").each(function(a){n.select(this).call(k,a,b)})})}},{"../bar/uniform_text":871,"../pie/style_one":1104,d3:165}],999:[function(a,q,p){p=a("../scatter/attributes");var n=a("../../plots/attributes"),
k=a("../../plots/template_attributes").hovertemplateAttrs,m=a("../../components/colorscale/attributes");a("../../constants/docs");a=a("../../lib/extend").extendFlat;q.exports=a({z:{valType:"data_array",editType:"calc"},x:a({},p.x,{impliedEdits:{xtype:"array"}}),x0:a({},p.x0,{impliedEdits:{xtype:"scaled"}}),dx:a({},p.dx,{impliedEdits:{xtype:"scaled"}}),y:a({},p.y,{impliedEdits:{ytype:"array"}}),y0:a({},p.y0,{impliedEdits:{ytype:"scaled"}}),dy:a({},p.dy,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",
editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,
min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},zhoverformat:{valType:"string",dflt:"",editType:"none"},hovertemplate:k(),showlegend:a({},n.showlegend,{dflt:!1})},{transforms:void 0},m("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":598,"../../constants/docs":687,"../../lib/extend":707,"../../plots/attributes":761,"../../plots/template_attributes":840,"../scatter/attributes":1119}],1E3:[function(a,q,p){var n=a("../../registry"),k=a("../../lib"),
m=a("../../plots/cartesian/axes"),h=a("../histogram2d/calc"),b=a("../../components/colorscale/calc"),g=a("./convert_column_xyz"),e=a("./clean_2d_array"),t=a("./interp2d"),l=a("./find_empties"),f=a("./make_bound_array");q.exports=function(a,c){function d(a){z=c._input.zsmooth=c.zsmooth=!1;k.warn('cannot use zsmooth: "fast": '+a)}var p=m.getFromId(a,c.xaxis||"x"),q=m.getFromId(a,c.yaxis||"y"),w=n.traceIs(c,"contour"),y=n.traceIs(c,"histogram"),A=n.traceIs(c,"gl2d"),z=w?"best":c.zsmooth,x;p._minDtick=
0;q._minDtick=0;if(y){var C=h(a,c);var B=C.x;var D=C.x0;var G=C.dx;var E=C.y;var F=C.y0;var L=C.dy;var J=C.z}else if(J=c.z,k.isArray1D(J)?(g(c,p,q,"x","y",["z"]),B=c._x,E=c._y,J=c._z):(B=c._x=c.x?p.makeCalcdata(c,"x"):[],E=c._y=c.y?q.makeCalcdata(c,"y"):[]),D=c.x0,G=c.dx,F=c.y0,L=c.dy,J=e(J,c,p,q),w||c.connectgaps)c._emptypoints=l(J),t(J,c._emptypoints);if("fast"===z)if("log"===p.type||"log"===q.type)d("log axis found");else if(!y){if(B.length){var H=(B[B.length-1]-B[0])/(B.length-1),K=Math.abs(H/
100);for(x=0;x<B.length-1;x++)if(Math.abs(B[x+1]-B[x]-H)>K){d("x scale is not linear");break}}if(E.length&&"fast"===z)for(H=(E[E.length-1]-E[0])/(E.length-1),K=Math.abs(H/100),x=0;x<E.length-1;x++)if(Math.abs(E[x+1]-E[x]-H)>K){d("y scale is not linear");break}}x=k.maxRowLength(J);B="scaled"===c.xtype?"":B;H=f(c,B,D,G,x,p);E="scaled"===c.ytype?"":E;K=f(c,E,F,L,J.length,q);A||(c._extremes[p._id]=m.findExtremes(p,H),c._extremes[q._id]=m.findExtremes(q,K));A={x:H,y:K,z:J,text:c._text||c.text,hovertext:c._hovertext||
c.hovertext};B&&B.length===H.length-1&&(A.xCenter=B);E&&E.length===K.length-1&&(A.yCenter=E);y&&(A.xRanges=C.xRanges,A.yRanges=C.yRanges,A.pts=C.pts);w||b(a,c,{vals:J,cLetter:"z"});w&&c.contours&&"heatmap"===c.contours.coloring&&(a={type:"contour"===c.type?"heatmap":"histogram2d",xcalendar:c.xcalendar,ycalendar:c.ycalendar},A.xfill=f(a,B,D,G,x,p),A.yfill=f(a,E,F,L,J.length,q));return[A]}},{"../../components/colorscale/calc":599,"../../lib":716,"../../plots/cartesian/axes":764,"../../registry":845,
"../histogram2d/calc":1031,"./clean_2d_array":1001,"./convert_column_xyz":1003,"./find_empties":1005,"./interp2d":1008,"./make_bound_array":1009}],1001:[function(a,q,p){var n=a("fast-isnumeric"),k=a("../../lib"),m=a("../../constants/numerical").BADNUM;q.exports=function(a,b,g,e){function h(a){if(n(a))return+a}function l(a){if(b&&"carpet"!==b.type&&"contourcarpet"!==b.type&&a&&"category"===a.type&&b["_"+a._id.charAt(0)].length){var c=a._id.charAt(0),e={};c=b["_"+c+"CategoryMap"]||b[c];for(d=0;d<c.length;d++)e[c[d]]=
d;return function(b){b=e[a._categories[b]];return b+1?b:m}}return k.identity}var f,d,c;if(b&&b.transpose){for(d=f=0;d<a.length;d++)f=Math.max(f,a[d].length);if(0===f)return!1;var r=function(a){return a.length};var p=function(a,b,c){return(a[c]||[])[b]}}else f=a.length,r=function(a,b){return a[b].length},p=function(a,b,c){return(a[b]||[])[c]};var q=function(a,b,c){return b===m||c===m?m:p(a,b,c)},w=l(g),y=l(e);e&&"category"===e.type&&(f=e._categories.length);var A=Array(f);for(d=0;d<f;d++)for(e=g&&
"category"===g.type?g._categories.length:r(a,d),A[d]=Array(e),c=0;c<e;c++)A[d][c]=h(q(a,y(d),w(c)));return A}},{"../../constants/numerical":692,"../../lib":716,"fast-isnumeric":228}],1002:[function(a,q,p){q.exports={min:"zmin",max:"zmax"}},{}],1003:[function(a,q,p){var n=a("../../lib"),k=a("../../constants/numerical").BADNUM;q.exports=function(a,h,b,g,e,t){var l=a._length,f=h.makeCalcdata(a,g),d=b.makeCalcdata(a,e),c=a.text,m=void 0!==c&&n.isArray1D(c),p=a.hovertext,q=void 0!==p&&n.isArray1D(p),w,
y,A=n.distinctVals(f),z=A.vals,x=n.distinctVals(d),C=x.vals,B=[],D,G;for(w=0;w<t.length;w++)B[w]=n.init2dArray(C.length,z.length);m&&(D=n.init2dArray(C.length,z.length));q&&(G=n.init2dArray(C.length,z.length));var E=n.init2dArray(C.length,z.length);for(w=0;w<l;w++)if(f[w]!==k&&d[w]!==k){var F=n.findBin(f[w]+A.minDiff/2,z),L=n.findBin(d[w]+x.minDiff/2,C);for(y=0;y<t.length;y++)B[y][L][F]=a[t[y]][w],E[L][F]=w;m&&(D[L][F]=c[w]);q&&(G[L][F]=p[w])}a["_"+g]=z;a["_"+e]=C;for(y=0;y<t.length;y++)a["_"+t[y]]=
B[y];m&&(a._text=D);q&&(a._hovertext=G);h&&"category"===h.type&&(a["_"+g+"CategoryMap"]=z.map(function(a){return h._categories[a]}));b&&"category"===b.type&&(a["_"+e+"CategoryMap"]=C.map(function(a){return b._categories[a]}));a._after2before=E}},{"../../constants/numerical":692,"../../lib":716}],1004:[function(a,q,p){var n=a("../../lib"),k=a("./xyz_defaults"),m=a("./style_defaults"),h=a("../../components/colorscale/defaults"),b=a("./attributes");q.exports=function(a,e,t,l){function f(d,c){return n.coerce(a,
e,b,d,c)}k(a,e,f,l)?(f("text"),f("hovertext"),f("hovertemplate"),m(a,e,f,l),f("hoverongaps"),f("connectgaps",n.isArray1D(e.z)&&!1!==e.zsmooth),h(a,e,l,f,{prefix:"",cLetter:"z"})):e.visible=!1}},{"../../components/colorscale/defaults":601,"../../lib":716,"./attributes":999,"./style_defaults":1012,"./xyz_defaults":1013}],1005:[function(a,q,p){var n=a("../../lib").maxRowLength;q.exports=function(a){var k=[],h={},b=[],g=a[0],e=[],t=[0,0,0],l=n(a),f,d,c;for(f=0;f<a.length;f++){var r=e;e=g;g=a[f+1]||[];
for(d=0;d<l;d++)void 0===e[d]&&((c=(void 0!==e[d-1]?1:0)+(void 0!==e[d+1]?1:0)+(void 0!==r[d]?1:0)+(void 0!==g[d]?1:0))?(0===f&&c++,0===d&&c++,f===a.length-1&&c++,d===e.length-1&&c++,4>c&&(h[[f,d]]=[f,d,c]),k.push([f,d,c])):b.push([f,d]))}for(;b.length;){g={};e=!1;for(a=b.length-1;0<=a;a--){var p=b[a];f=p[0];d=p[1];if(c=((h[[f-1,d]]||t)[2]+(h[[f+1,d]]||t)[2]+(h[[f,d-1]]||t)[2]+(h[[f,d+1]]||t)[2])/20)g[p]=[f,d,c],b.splice(a,1),e=!0}if(!e)throw"findEmpties iterated with no new neighbors";for(p in g)h[p]=
g[p],k.push(g[p])}return k.sort(function(a,b){return b[2]-a[2]})}},{"../../lib":716}],1006:[function(a,q,p){var n=a("../../components/fx"),k=a("../../lib"),m=a("../../plots/cartesian/axes"),h=a("../../components/colorscale").extractOpts;q.exports=function(a,g,e,t,l,f){var b=a.cd[0];t=b.trace;l=a.xa;var c=a.ya,r=b.x,p=b.y,q=b.z,w=b.xCenter,y=b.yCenter,A=b.zmask,z=t.zhoverformat,x=r,C=p;if(!1!==a.index){try{var B=Math.round(a.index[1]);var D=Math.round(a.index[0])}catch(E){k.error("Error hovering on heatmap, pointNumber must be [row,col], found:",
a.index);return}if(0>B||B>=q[0].length||0>D||D>q.length)return}else{if(0<n.inbox(g-r[0],g-r[r.length-1],0)||0<n.inbox(e-p[0],e-p[p.length-1],0))return;if(f){x=[2*r[0]-r[1]];for(B=1;B<r.length;B++)x.push((r[B]+r[B-1])/2);x.push([2*r[r.length-1]-r[r.length-2]]);C=[2*p[0]-p[1]];for(B=1;B<p.length;B++)C.push((p[B]+p[B-1])/2);C.push([2*p[p.length-1]-p[p.length-2]])}B=Math.max(0,Math.min(x.length-2,k.findBin(g,x)));D=Math.max(0,Math.min(C.length-2,k.findBin(e,C)))}g=l.c2p(r[B]);e=l.c2p(r[B+1]);x=c.c2p(p[D]);
C=c.c2p(p[D+1]);f?(e=g,f=r[B],C=x,y=p[D]):(f=w?w[B]:(r[B]+r[B+1])/2,y=y?y[D]:(p[D]+p[D+1])/2,l&&"category"===l.type&&(f=r[B]),c&&"category"===c.type&&(y=p[D]),t.zsmooth&&(g=e=l.c2p(f),x=C=c.c2p(y)));c=q[D][B];A&&!A[D][B]&&(c=void 0);if(void 0!==c||t.hoverongaps){var G;Array.isArray(b.hovertext)&&Array.isArray(b.hovertext[D])?G=b.hovertext[D][B]:Array.isArray(b.text)&&Array.isArray(b.text[D])&&(G=b.text[D][B]);b=h(t);l=m.tickText({type:"linear",range:[b.min,b.max],hoverformat:z,_separators:l._separators,
_numFormat:l._numFormat},c,"hover").text;return[k.extendFlat(a,{index:t._after2before?t._after2before[D][B]:[D,B],distance:a.maxHoverDistance,spikeDistance:a.maxSpikeDistance,x0:g,x1:e,y0:x,y1:C,xLabelVal:f,yLabelVal:y,zLabelVal:c,zLabel:l,text:G})]}}},{"../../components/colorscale":603,"../../components/fx":629,"../../lib":716,"../../plots/cartesian/axes":764}],1007:[function(a,q,p){q.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),calc:a("./calc"),plot:a("./plot"),colorbar:a("./colorbar"),
style:a("./style"),hoverPoints:a("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:a("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":775,"./attributes":999,"./calc":1E3,"./colorbar":1002,"./defaults":1004,"./hover":1006,"./plot":1010,"./style":1011}],1008:[function(a,q,p){function n(a,b,g){var e=0,h,k,f,d,c,n;for(h=0;h<b.length;h++){var p=b[h];var q=p[0];p=p[1];var w=a[q][p];for(k=d=c=0;4>k;k++){var y=m[k];if(f=a[q+y[0]])if(y=
f[p+y[1]],void 0!==y){if(0===c)var A=n=y;else A=Math.min(A,y),n=Math.max(n,y);d++;c+=y}}if(0===d)throw"iterateInterp2d order is wrong: no defined neighbors";a[q][p]=c/d;void 0===w?4>d&&(e=1):(a[q][p]=(1+g)*a[q][p]-g*w,n>A&&(e=Math.max(e,Math.abs(a[q][p]-w)/(n-A))))}return e}var k=a("../../lib"),m=[[-1,0],[1,0],[0,-1],[0,1]];q.exports=function(a,b){var g=1,e;n(a,b);for(e=0;e<b.length&&!(4>b[e][2]);e++);b=b.slice(e);for(e=0;100>e&&.01<g;e++)g=n(a,b,.5-.25*Math.min(1,.5*g));.01<g&&k.log("interp2d didn't converge quickly",
g);return a}},{"../../lib":716}],1009:[function(a,q,p){var n=a("../../registry"),k=a("../../lib").isArrayOrTypedArray;q.exports=function(a,h,b,g,e,t){var l=[],f=n.traceIs(a,"contour"),d=n.traceIs(a,"histogram"),c=n.traceIs(a,"gl2d");if(k(h)&&1<h.length&&!d&&"category"!==t.type)if(g=h.length,g<=e){if(f||c)l=h.slice(0,e);else if(1===e)l=[h[0]-.5,h[0]+.5];else{l=[1.5*h[0]-.5*h[1]];for(f=1;f<g;f++)l.push(.5*(h[f-1]+h[f]));l.push(1.5*h[g-1]-.5*h[g-2])}if(g<e)for(c=l[l.length-1],h=c-l[l.length-2],f=g;f<
e;f++)c+=h,l.push(c)}else return f?h.slice(0,e):h.slice(0,e+1);else for(a=a[t._id.charAt(0)+"calendar"],h=d?t.r2c(b,0,a):k(h)&&1===h.length?h[0]:void 0===b?0:("log"===t.type?t.d2c:t.r2c)(b,0,a),g=g||1,f=f||c?0:-.5;f<e;f++)l.push(h+g*f);return l}},{"../../lib":716,"../../registry":845}],1010:[function(a,q,p){function n(a,b){var c=b.length-2,d=e.constrain(e.findBin(a,b),0,c),f=b[d];a=e.constrain(d+(a-f)/(b[d+1]-f)-.5,0,c);b=Math.round(a);d=Math.abs(a-b);return a&&a!==c&&d?{bin0:b,frac:d,bin1:Math.round(b+
d/(a-b))}:{bin0:b,bin1:b,frac:0}}function k(a,b){var c=b.length-1;c=e.constrain(e.findBin(a,b),0,c);var d=b[c];a=(a-d)/(b[c+1]-d)||0;return 0>=a?{bin0:c,bin1:c,frac:0}:.5>a?{bin0:c,bin1:c+1,frac:a}:{bin0:c+1,bin1:c,frac:1-a}}function m(a,b,c){a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=Math.round(255*c[3])}var h=a("d3"),b=a("tinycolor2"),g=a("../../registry"),e=a("../../lib"),t=a("../../components/colorscale").makeColorScaleFuncFromTrace,l=a("../../constants/xmlns_namespaces");q.exports=function(a,d,
c,r){var f=d.xaxis,p=d.yaxis;e.makeTraceGroups(r,c,"hm").each(function(c){function d(a,b){return void 0!==a?(a=ca(a),a[0]=Math.round(a[0]),a[1]=Math.round(a[1]),a[2]=Math.round(a[2]),R+=b,U+=a[0]*b,X+=a[1]*b,ea+=a[2]*b,a):[0,0,0,0]}function r(a,b,c,e){var f=a[c.bin0];if(void 0===f)return d(void 0,1);a=a[c.bin1];var g=b[c.bin0];b=b[c.bin1];return d(f+c.frac*(a-f||0)+e.frac*((g-f||0)+c.frac*(void 0===a?void 0===b?0:void 0===g?2*(b-f):2*(2*b-g-f)/3:void 0===b?void 0===g?0:2*(2*f-a-g)/3:void 0===g?2*
(2*b-a-f)/3:b+f-a-g)))}var q=h.select(this),u=c[0],v=u.trace,w=u.z,D=u.x,G=u.y,E=u.xCenter,F=u.yCenter,L=g.traceIs(v,"contour"),J=L?"best":v.zsmooth,H=w.length,K=e.maxRowLength(w),M=!1,I=!1,N;for(N=0;void 0===O&&N<D.length-1;){var O=f.c2p(D[N]);N++}for(N=D.length-1;void 0===P&&0<N;){var P=f.c2p(D[N]);N--}P<O&&(N=P,P=O,O=N,M=!0);for(N=0;void 0===Q&&N<G.length-1;){var Q=p.c2p(G[N]);N++}for(N=G.length-1;void 0===T&&0<N;){var T=p.c2p(G[N]);N--}T<Q&&(N=Q,Q=T,T=N,I=!0);L&&(E=D,F=G,D=u.xfill,G=u.yfill);
"fast"!==J&&(N="best"===J?0:.5,O=Math.max(-N*f._length,O),P=Math.min((1+N)*f._length,P),Q=Math.max(-N*p._length,Q),T=Math.min((1+N)*p._length,T));var V=Math.round(P-O),Y=Math.round(T-Q);if(0>=V||0>=Y)q.selectAll("image").data([]).exit().remove();else{"fast"===J?(T=K,N=H):(T=V,N=Y);P=document.createElement("canvas");P.width=T;P.height=N;T=P.getContext("2d");var ca=t(v,{noNumericCheck:!0,returnArray:!0});"fast"===J?(u=M?function(a){return K-1-a}:e.identity,L=I?function(a){return H-1-a}:e.identity):
(u=function(a){return e.constrain(Math.round(f.c2p(D[a])-O),0,V)},L=function(a){return e.constrain(Math.round(p.c2p(G[a])-Q),0,Y)});N=L(0);var Z=[N,N];M=M?0:1;I=I?0:1;var R=0,U=0,X=0,ea=0;if(J){v=0;try{var fa=new Uint8Array(V*Y*4)}catch(aa){fa=Array(V*Y*4)}if("best"===J){J=E||D;M=F||G;I=Array(J.length);u=Array(M.length);L=Array(V);E=E?k:n;Z=F?k:n;for(N=0;N<J.length;N++)I[N]=Math.round(f.c2p(J[N])-O);for(N=0;N<M.length;N++)u[N]=Math.round(p.c2p(M[N])-Q);for(N=0;N<V;N++)L[N]=E(N,I);for(F=0;F<Y;F++)for(J=
Z(F,u),M=w[J.bin0],I=w[J.bin1],N=0;N<V;N++,v+=4)E=r(M,I,L[N],J),m(fa,v,E)}else for(F=0;F<H;F++)for(J=w[F],Z=L(F),N=0;N<V;N++)E=d(J[N],1),v=4*(Z*V+u(N)),m(fa,v,E);w=T.createImageData(V,Y);try{w.data.set(fa)}catch(aa){for(N=w.data,E=N.length,F=0;F<E;F++)N[F]=fa[F]}T.putImageData(w,0,0)}else{fa=v.xgap;v=v.ygap;var la=Math.floor(fa/2),da=Math.floor(v/2);for(F=0;F<H;F++)if(J=w[F],Z.reverse(),Z[I]=L(F+1),Z[0]!==Z[1]&&void 0!==Z[0]&&void 0!==Z[1]){N=u(0);var ma=[N,N];for(N=0;N<K;N++)ma.reverse(),ma[M]=u(N+
1),ma[0]!==ma[1]&&void 0!==ma[0]&&void 0!==ma[1]&&(E=J[N],E=d(E,(ma[1]-ma[0])*(Z[1]-Z[0])),T.fillStyle="rgba("+E.join(",")+")",T.fillRect(ma[0]+la,Z[0]+da,ma[1]-ma[0]-fa,Z[1]-Z[0]-v))}}U=Math.round(U/R);X=Math.round(X/R);ea=Math.round(ea/R);w=b("rgb("+U+","+X+","+ea+")");a._hmpixcount=(a._hmpixcount||0)+R;a._hmlumcount=(a._hmlumcount||0)+R*w.getLuminance();c=q.selectAll("image").data(c);c.enter().append("svg:image").attr({xmlns:l.svg,preserveAspectRatio:"none"});c.attr({height:Y,width:V,x:O,y:Q,"xlink:href":P.toDataURL("image/png")})}})}},
{"../../components/colorscale":603,"../../constants/xmlns_namespaces":693,"../../lib":716,"../../registry":845,d3:165,tinycolor2:535}],1011:[function(a,q,p){var n=a("d3");q.exports=function(a){n.select(a).selectAll(".hm image").style("opacity",function(a){return a.trace.opacity})}},{d3:165}],1012:[function(a,q,p){q.exports=function(a,k,m){!1===m("zsmooth")&&(m("xgap"),m("ygap"));m("zhoverformat")}},{}],1013:[function(a,q,p){function n(a,g){var b=g(a);"scaled"===(b?g(a+"type","array"):"scaled")&&(g(a+
"0"),g("d"+a));return b}var k=a("fast-isnumeric"),m=a("../../lib"),h=a("../../registry");q.exports=function(a,g,e,t,l,f){var b=e("z");l=l||"x";f=f||"y";if(void 0===b||!b.length)return 0;if(m.isArray1D(a.z)){var c=e(l);e=e(f);c=m.minRowLength(c);e=m.minRowLength(e);if(0===c||0===e)return 0;g._length=Math.min(c,e,b.length)}else{n(l,e);n(f,e);c=!0;for(var r=!1,p=!1,q,w=0;w<b.length;w++){q=b[w];if(!m.isArrayOrTypedArray(q)){c=!1;break}0<q.length&&(r=!0);for(var y=0;y<q.length;y++)if(k(q[y])){p=!0;break}}if(!(c&&
r&&p))return 0;e("transpose");g._length=null}h.getComponentMethod("calendars","handleTraceDefaults")(a,g,[l,f],t);return!0}},{"../../lib":716,"../../registry":845,"fast-isnumeric":228}],1014:[function(a,q,p){p=a("../heatmap/attributes");var n=a("../../components/colorscale/attributes"),k=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;for(var m="z x x0 dx y y0 dy text transpose xtype ytype".split(" "),h={},b=0;b<m.length;b++){var g=m[b];h[g]=p[g]}k(h,n("",{cLetter:"z",
autoColorDflt:!1}));q.exports=a(h,"calc","nested")},{"../../components/colorscale/attributes":598,"../../lib/extend":707,"../../plot_api/edit_types":747,"../heatmap/attributes":999}],1015:[function(a,q,p){function n(a,g){this.scene=a;this.uid=g;this.type="heatmapgl";this.name="";this.hoverinfo="all";this.xData=[];this.yData=[];this.zData=[];this.textLabels=[];this.idToIndex=[];this.bounds=[0,0,0,0];this.options={z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]};this.heatmap=k(a.glplot,
this.options);this.heatmap._trace=this}var k=a("gl-heatmap2d"),m=a("../../plots/cartesian/axes"),h=a("../../lib/str2rgbarray");a=n.prototype;a.handlePick=function(a){var b=this.options,e=b.shape,h=a.pointId,k=h%e[0];e=Math.floor(h/e[0]);return{trace:this,dataCoord:a.dataCoord,traceCoord:[b.x[k],b.y[e],b.z[h]],textLabel:this.textLabels[h],name:this.name,pointIndex:[e,k],hoverinfo:this.hoverinfo}};a.update=function(a,g){g=g[0];this.index=a.index;this.name=a.name;this.hoverinfo=a.hoverinfo;var b=g.z;
this.options.z=[].concat.apply([],b);this.options.shape=[b[0].length,b.length];this.options.x=g.x;this.options.y=g.y;b=a.colorscale;for(var k=a.zmin,l=a.zmax,f=b.length,d=Array(f),c=Array(4*f),n=0;n<f;n++){var p=b[n],q=h(p[1]);d[n]=k+p[0]*(l-k);for(p=0;4>p;p++)c[4*n+p]=q[p]}this.options.colorLevels=d;this.options.colorValues=c;this.textLabels=[].concat.apply([],a.text);this.heatmap.update(this.options);b=this.scene.xaxis;k=this.scene.yaxis;a._extremes[b._id]=m.findExtremes(b,g.x);a._extremes[k._id]=
m.findExtremes(k,g.y)};a.dispose=function(){this.heatmap.dispose()};q.exports=function(a,g,e){a=new n(a,g.uid);a.update(g,e);return a}},{"../../lib/str2rgbarray":739,"../../plots/cartesian/axes":764,"gl-heatmap2d":254}],1016:[function(a,q,p){q.exports={attributes:a("./attributes"),supplyDefaults:a("../heatmap/defaults"),colorbar:a("../heatmap/colorbar"),calc:a("../heatmap/calc"),plot:a("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:a("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],
meta:{}}},{"../../plots/gl2d":802,"../heatmap/calc":1E3,"../heatmap/colorbar":1002,"../heatmap/defaults":1004,"./attributes":1014,"./convert":1015}],1017:[function(a,q,p){p=a("../bar/attributes");var n=a("../../plots/template_attributes").hovertemplateAttrs,k=a("./bin_attributes"),m=a("./constants");a=a("../../lib/extend").extendFlat;q.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},text:a({},p.text,{}),hovertext:a({},p.hovertext,
{}),orientation:p.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",
editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:k("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:k("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:n({},{keys:m.eventDataKeys}),marker:p.marker,offsetgroup:p.offsetgroup,alignmentgroup:p.alignmentgroup,selected:p.selected,unselected:p.unselected,
_deprecated:{bardir:p._deprecated.bardir}}},{"../../lib/extend":707,"../../plots/template_attributes":840,"../bar/attributes":855,"./bin_attributes":1019,"./constants":1023}],1018:[function(a,q,p){q.exports=function(a,k){for(var m=a.length,h=0,b=0;b<m;b++)k[b]?(a[b]/=k[b],h+=a[b]):a[b]=null;return h}},{}],1019:[function(a,q,p){q.exports=function(a,k){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],1020:[function(a,
q,p){var n=a("fast-isnumeric");q.exports={count:function(a,m,h){h[a]++;return 1},sum:function(a,m,h,b){m=b[m];return n(m)?(m=Number(m),h[a]+=m,m):0},avg:function(a,m,h,b,g){m=b[m];n(m)&&(m=Number(m),h[a]+=m,g[a]++);return 0},min:function(a,m,h,b){m=b[m];if(n(m)){m=Number(m);if(!n(h[a]))return h[a]=m;if(h[a]>m)return b=m-h[a],h[a]=m,b}return 0},max:function(a,m,h,b){m=b[m];if(n(m)){m=Number(m);if(!n(h[a]))return h[a]=m;if(h[a]<m)return b=m-h[a],h[a]=m,b}return 0}}},{"fast-isnumeric":228}],1021:[function(a,
q,p){function n(a,b,e,f){if(0>=a*b)return Infinity;for(var c="date"===e.type,d=k(Math.abs(b-a),c),l=0;10>l;l++){var n=k(80*d,c);if(d===n)break;var r=n;var t=a,p=b,q=e,u=f;c&&r>g?(t=m(t,q,u),p=m(p,q,u),r=r===h?0:1,r=t[r]!==p[r]):r=.1<Math.floor(p/r)-Math.floor(t/r);if(r)d=n;else break}return d}function k(a,c){return c&&a>l?a>g?a>1.1*h?h:a>1.1*b?b:g:a>e?e:a>t?t:l:Math.pow(10,Math.floor(Math.log(a)/Math.LN10))}function m(a,b,e){a=b.c2d(a,h,e).split("-");""===a[0]&&(a.unshift(),a[0]="-"+a[0]);return a}
p=a("../../constants/numerical");var h=p.ONEAVGYEAR,b=p.ONEAVGMONTH,g=p.ONEDAY,e=p.ONEHOUR,t=p.ONEMIN,l=p.ONESEC,f=a("../../plots/cartesian/axes").tickIncrement;q.exports=function(a,b,e,k,l){var c=-1.1*b,d=-.1*b,m=a-d;b=e[0];e=e[1];m=Math.min(n(b+d,b+m,k,l),n(e+d,e+m,k,l));c=Math.min(n(b+c,b+d,k,l),n(e+c,e+d,k,l));if(m>c&&c<Math.abs(e-b)/4E3){var r=m;var t=!1}else r=Math.min(m,c),t=!0;if("date"===k.type&&r>g){var p=r===h?1:6,q=r===h?"M12":"M1";return function(b,c){var d=k.c2d(b,h,l),e=d.indexOf("-",
p);0<e&&(d=d.substr(0,e));d=k.d2c(d,0,l);d<b&&(e=f(d,q,!1,l),(d+e)/2<b+a&&(d=e));return c&&t?f(d,q,!0,l):d}}return function(b,c){var d=r*Math.round(b/r);d+r/10<b&&d+.9*r<b+a&&(d+=r);c&&t&&(d-=r);return d}}},{"../../constants/numerical":692,"../../plots/cartesian/axes":764}],1022:[function(a,q,p){function n(a,c,d,f,l){function m(a,c,d){c[a+"Found"]?(c[a]=q(c[a]),null===c[a]&&(c[a]=d[a])):(I[a]=c[a]=d[a],b.nestedProperty(u[0],n+"."+a).set(d[a]))}var n=f+"bins",r=a._fullLayout,t=r._histogramBinOpts[c["_"+
f+"bingroup"]];r="overlay"===r.barmode;var p,q="date"===d.type?function(a){return a||0===a?b.cleanDate(a,null,M):null}:function(a){return h(a)?Number(a):null};if(c["_"+f+"autoBinFinished"])delete c["_"+f+"autoBinFinished"];else{var u=t.traces;var v=[],w=!0,y=!1,J=!1;for(p=0;p<u.length;p++){var H=u[p];if(H.visible){var K=t.dirs[p];K=H["_"+K+"pos0"]=d.makeCalcdata(H,K);v=b.concat(v,K);delete H["_"+f+"autoBinFinished"];!0===c.visible&&(w?w=!1:(delete H._autoBin,H["_"+f+"autoBinFinished"]=1),g.traceIs(H,
"2dMap")&&(y=!0),"histogram2dcontour"===H.type&&(J=!0))}}var M=u[0][f+"calendar"];p=e.autoBin(v,d,t.nbins,y,M,t.sizeFound&&t.size);var I=(u[0]._autoBin={})[t.dirs[0]]={};J&&(t.size||(p.start=d.c2r(e.tickIncrement(d.r2c(p.start,0,M),p.size,!0,M),0,M)),void 0===t.end&&(p.end=d.c2r(e.tickIncrement(d.r2c(p.end,0,M),p.size,!1,M),0,M)));if(r&&!g.traceIs(c,"2dMap")&&0===p._dataSpan&&"category"!==d.type&&"multicategory"!==d.type){if(l)return[p,K,!0];p=k(a,c,d,f,n)}K=H.cumulative||{};K.enabled&&"include"!==
K.currentbin&&("decreasing"===K.direction?p.start=d.c2r(e.tickIncrement(d.r2c(p.start,0,M),p.size,!0,M),0,M):p.end=d.c2r(e.tickIncrement(d.r2c(p.end,0,M),p.size,!1,M),0,M));t.size=p.size;t.sizeFound||(I.size=p.size,b.nestedProperty(u[0],n+".size").set(p.size));m("start",t,p);m("end",t,p)}K=c["_"+f+"pos0"];delete c["_"+f+"pos0"];l=c._input[n]||{};a=b.extendFlat({},t);J=t.start;r=d.r2l(l.start);H=void 0!==r;(t.startFound||H)&&r!==d.r2l(J)&&(r=H?r:b.aggNums(Math.min,null,K),J={type:"category"===d.type||
"multicategory"===d.type?"linear":d.type,r2l:d.r2l,dtick:t.size,tick0:J,calendar:M,range:[r,e.tickIncrement(r,t.size,!1,M)].map(d.l2r)},J=e.tickFirst(J),J>d.r2l(r)&&(J=e.tickIncrement(J,t.size,!0,M)),a.start=d.l2r(J),H||b.nestedProperty(c,n+".start").set(a.start));H=t.end;r=d.r2l(l.end);l=void 0!==r;(t.endFound||l)&&r!==d.r2l(H)&&(t=l?r:b.aggNums(Math.max,null,K),a.end=d.l2r(t),l||b.nestedProperty(c,n+".start").set(a.end));d="autobin"+f;!1===c._input[d]&&(c._input[n]=b.extendFlat({},c[n]||{}),delete c._input[d],
delete c[d]);return[a,K]}function k(a,c,d,e,f){for(var g=a._fullLayout,h=c.xaxis,k=c.yaxis,l=c.orientation,m=[],r=a._fullData,t=0;t<r.length;t++){var p=r[t];"histogram"===p.type&&!0===p.visible&&p.orientation===l&&p.xaxis===h&&p.yaxis===k&&m.push(p)}t=!1;h=Infinity;k=[c];for(l=0;l<m.length;l++)if(r=m[l],r===c)t=!0;else if(t){p=n(a,r,d,e,!0);var q=p[0],u=p[2];r["_"+e+"autoBinFinished"]=1;r["_"+e+"pos0"]=p[1];u?k.push(r):h=Math.min(h,q.size)}else p=g._histogramBinOpts[r["_"+e+"bingroup"]],h=Math.min(h,
p.size||r[f].size);a=Array(k.length);for(l=0;l<k.length;l++)for(m=k[l]["_"+e+"pos0"],r=0;r<m.length;r++)if(void 0!==m[r]){a[l]=m[r];break}isFinite(h)||(h=b.distinctVals(a).minDiff);for(l=0;l<k.length;l++)r=k[l],m=r[e+"calendar"],m={start:d.c2r(a[l]-h/2,0,m),end:d.c2r(a[l]+h/2,0,m),size:h},r._input[f]=r[f]=m,(p=g._histogramBinOpts[r["_"+e+"bingroup"]])&&b.extendFlat(p,m);return c[f]}function m(a,b,c){function d(b){g=a[b];a[b]/=2}function e(b){f=a[b];a[b]=g+f/2;g+=f}var f,g;if("half"===c)if("increasing"===
b)for(d(0),b=1;b<a.length;b++)e(b);else for(d(a.length-1),b=a.length-2;0<=b;b--)e(b);else if("increasing"===b){for(b=1;b<a.length;b++)a[b]+=a[b-1];"exclude"===c&&(a.unshift(0),a.pop())}else{for(b=a.length-2;0<=b;b--)a[b]+=a[b+1];"exclude"===c&&(a.push(0),a.shift())}}var h=a("fast-isnumeric"),b=a("../../lib"),g=a("../../registry"),e=a("../../plots/cartesian/axes"),t=a("../bar/arrays_to_calcdata"),l=a("./bin_functions"),f=a("./norm_functions"),d=a("./average"),c=a("./bin_label_vals");q.exports={calc:function(a,
g){var k=[],r=[],p=e.getFromId(a,"h"===g.orientation?g.yaxis:g.xaxis),q="h"===g.orientation?"y":"x",u={x:"y",y:"x"}[q],x=g[q+"calendar"],C=g.cumulative;q=n(a,g,p,q);a=q[0];q=q[1];var B="string"===typeof a.size,D=[],G=B?D:a,E=[],F=[],L=[],J=0,H=g.histnorm,K=g.histfunc,M=-1!==H.indexOf("density"),I;C.enabled&&M&&(H=H.replace(/ ?density$/,""),M=!1);var N="max"===K||"min"===K?null:0;var O=l.count;H=f[H];var P=!1;if(b.isArrayOrTypedArray(g[u])&&"count"!==K){var Q=g[u];P="avg"===K;O=l[K]}u=p.r2c(a.start,
0,x);for(I=p.r2c(a.end,0,x)+(u-e.tickIncrement(u,a.size,!1,x))/1E6;u<I&&1E6>k.length;){K=e.tickIncrement(u,a.size,!1,x);k.push((u+K)/2);r.push(N);L.push([]);D.push(u);M&&E.push(1/(K-u));P&&F.push(0);if(K<=u)break;u=K}D.push(u);B||"date"!==p.type||(G={start:p.r2c(G.start,0,x),end:p.r2c(G.end,0,x),size:G.size});K=r.length;B=!0;var T=I=Infinity;M={};for(u=0;u<q.length;u++){var V=q[u];N=b.findBin(V,G);0<=N&&N<K&&(J+=O(N,u,r,Q,F),B&&L[N].length&&V!==q[L[N][0]]&&(B=!1),L[N].push(u),M[u]=N,I=Math.min(I,
V-D[N]),T=Math.min(T,D[N+1]-V))}var Y;B||(Y=c(I,T,D,p,x));P&&(J=d(r,F));H&&H(r,J,E);C.enabled&&m(r,C.direction,C.currentbin);G=Math.min(k.length,r.length);p=[];E=0;Q=G-1;for(u=0;u<G;u++)if(r[u]){E=u;break}for(u=G-1;u>=E;u--)if(r[u]){Q=u;break}for(u=E;u<=Q;u++)h(k[u])&&h(r[u])&&(G={p:k[u],s:r[u],b:0},C.enabled||(G.pts=L[u],B?G.ph0=G.ph1=L[u].length?q[L[u][0]]:k[u]:(G.ph0=Y(D[u]),G.ph1=Y(D[u+1],!0))),p.push(G));1===p.length&&(p[0].width1=e.tickIncrement(p[0].p,a.size,!1,x)-p[0].p);t(p,g);b.isArrayOrTypedArray(g.selectedpoints)&&
b.tagSelected(p,g,M);return p},calcAllAutoBins:n}},{"../../lib":716,"../../plots/cartesian/axes":764,"../../registry":845,"../bar/arrays_to_calcdata":854,"./average":1018,"./bin_functions":1020,"./bin_label_vals":1021,"./norm_functions":1029,"fast-isnumeric":228}],1023:[function(a,q,p){q.exports={eventDataKeys:["binNumber"]}},{}],1024:[function(a,q,p){var n=a("../../lib"),k=a("../../plots/cartesian/axis_ids"),m=a("../../registry").traceIs,h=a("../bar/defaults").handleGroupingDefaults,b=n.nestedProperty,
g=k.getAxisGroup,e=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],t=["x","y"];q.exports=function(a,f){function d(a,b){return n.coerce(z._input,z,z._module.attributes,a,b)}function c(a){return"v"===a.orientation?"x":"y"}function l(a,b,c){var d=a.uid+"__"+c;b||(b=d);var e=k.getFromTrace({_fullLayout:f},a,c).type;var g=a[c+"calendar"]||"",h=p[b],l=!0;
h&&(e===h.axType&&g===h.calendar?(l=!1,h.traces.push(a),h.dirs.push(c)):(b=d,e!==h.axType&&n.warn(["Attempted to group the bins of trace",a.index,"set on a","type:"+e,"axis with bins on","type:"+h.axType,"axis."].join(" ")),g!==h.calendar&&n.warn(["Attempted to group the bins of trace",a.index,"set with a",g,"calendar with bins",h.calendar?"on a "+h.calendar+" calendar":"w/o a set calendar"].join(" "))));l&&(p[b]={traces:[a],dirs:[c],axType:e,calendar:a[c+"calendar"]||""});a["_"+c+"bingroup"]=b}var p=
f._histogramBinOpts={},q=[],w={},y=[],A;for(A=0;A<a.length;A++){var z=a[A];m(z,"histogram")&&(q.push(z),delete z._xautoBinFinished,delete z._yautoBinFinished,m(z,"2dMap")||h(z._input,z,f,d))}a=f._alignmentOpts||{};for(A=0;A<q.length;A++){z=q[A];var x="";if(!m(z,"2dMap")){var C=c(z);if("group"===f.barmode&&z.alignmentgroup){var B=g(f,z[C+"axis"])+z.orientation;(a[B]||{})[z.alignmentgroup]&&(x=B)}x||"overlay"===f.barmode||(x=g(f,z.xaxis)+g(f,z.yaxis)+c(z))}x?(w[x]||(w[x]=[]),w[x].push(z)):y.push(z)}for(x in w)if(q=
w[x],1===q.length)y.push(q[0]);else{a=!1;for(A=0;A<q.length;){z=q[A];a=d("bingroup");break}x=a||x;for(A=0;A<q.length;A++)z=q[A],(a=z._input.bingroup)&&a!==x&&n.warn(["Trace",z.index,"must match within bingroup",x+".","Ignoring its bingroup:",a,"setting."].join(" ")),z.bingroup=x,l(z,x,c(z))}for(A=0;A<y.length;A++)if(z=y[A],w=d("bingroup"),m(z,"2dMap"))for(q=0;2>q;q++)C=t[q],a=d(C+"bingroup",w?w+"__"+C:null),l(z,a,C);else l(z,w,c(z));for(x in p)for(w=p[x],q=w.traces,y=0;y<e.length;y++)if(a=e[y],B=
a.name,"nbins"!==B||!w.sizeFound){for(A=0;A<q.length;A++){z=q[A];C=w.dirs[A];var D=a.aStr[C];if(void 0!==b(z._input,D).get()){w[B]=d(D);w[B+"Found"]=!0;break}var G=(z._autoBin||{})[C]||{};G[B]&&b(z,D).set(G[B])}if("start"===B||"end"===B)for(;A<q.length;A++)z=q[A],z["_"+C+"bingroup"]&&(G=(z._autoBin||{})[C]||{},d(D,G[B]));"nbins"!==B||w.sizeFound||w.nbinsFound||(z=q[0],w[B]=d(D))}}},{"../../lib":716,"../../plots/cartesian/axis_ids":767,"../../registry":845,"../bar/defaults":859}],1025:[function(a,
q,p){var n=a("../../registry"),k=a("../../lib"),m=a("../../components/color"),h=a("../bar/style_defaults"),b=a("./attributes");q.exports=function(a,e,t,l){function f(c,d){return k.coerce(a,e,b,c,d)}var d=f("x"),c=f("y");f("cumulative.enabled")&&(f("cumulative.direction"),f("cumulative.currentbin"));f("text");f("hovertext");f("hovertemplate");var g=f("orientation",c&&!d?"h":"v"),p="v"===g?"x":"y";g="v"===g?"y":"x";(d=d&&c?Math.min(k.minRowLength(d)&&k.minRowLength(c)):k.minRowLength(e[p]||[]))?(e._length=
d,n.getComponentMethod("calendars","handleTraceDefaults")(a,e,["x","y"],l),e[g]&&f("histfunc"),f("histnorm"),f("autobin"+p),h(a,e,f,t,l),k.coerceSelectionMarkerOpacity(e,f),t=(e.marker.line||{}).color,l=n.getComponentMethod("errorbars","supplyDefaults"),l(a,e,t||m.defaultLine,{axis:"y"}),l(a,e,t||m.defaultLine,{axis:"x",inherit:"y"})):e.visible=!1}},{"../../components/color":591,"../../lib":716,"../../registry":845,"../bar/style_defaults":870,"./attributes":1017}],1026:[function(a,q,p){q.exports=
function(a,k,m,h,b){a.x="xVal"in k?k.xVal:k.x;a.y="yVal"in k?k.yVal:k.y;"zLabelVal"in k&&(a.z=k.zLabelVal);k.xa&&(a.xaxis=k.xa);k.ya&&(a.yaxis=k.ya);if(!(m.cumulative||{}).enabled){k=Array.isArray(b)?h[0].pts[b[0]][b[1]]:h[b].pts;a.pointNumbers=k;a.binNumber=a.pointNumber;delete a.pointNumber;delete a.pointIndex;if(m._indexToPoints)for(h=[],b=0;b<k.length;b++)h=h.concat(m._indexToPoints[k[b]]);else h=k;a.pointIndices=h}return a}},{}],1027:[function(a,q,p){var n=a("../bar/hover").hoverPoints,k=a("../../plots/cartesian/axes").hoverLabelText;
q.exports=function(a,h,b,g){if(h=n(a,h,b,g)){a=h[0];b=a.cd[a.index];g=a.cd[0].trace;if(!g.cumulative.enabled){var e="h"===g.orientation?"y":"x";a[e+"Label"]=k(a[e+"a"],b.ph0,b.ph1)}g.hovermplate&&(a.hovertemplate=g.hovertemplate);return h}}},{"../../plots/cartesian/axes":764,"../bar/hover":862}],1028:[function(a,q,p){q.exports={attributes:a("./attributes"),layoutAttributes:a("../bar/layout_attributes"),supplyDefaults:a("./defaults"),crossTraceDefaults:a("./cross_trace_defaults"),supplyLayoutDefaults:a("../bar/layout_defaults"),
calc:a("./calc").calc,crossTraceCalc:a("../bar/cross_trace_calc").crossTraceCalc,plot:a("../bar/plot").plot,layerName:"barlayer",style:a("../bar/style").style,styleOnSelect:a("../bar/style").styleOnSelect,colorbar:a("../scatter/marker_colorbar"),hoverPoints:a("./hover"),selectPoints:a("../bar/select"),eventData:a("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:a("../../plots/cartesian"),categories:"bar-like cartesian svg bar histogram oriented errorBarsOK showLegend".split(" "),
meta:{}}},{"../../plots/cartesian":775,"../bar/cross_trace_calc":858,"../bar/layout_attributes":864,"../bar/layout_defaults":865,"../bar/plot":866,"../bar/select":867,"../bar/style":869,"../scatter/marker_colorbar":1137,"./attributes":1017,"./calc":1022,"./cross_trace_defaults":1024,"./defaults":1025,"./event_data":1026,"./hover":1027}],1029:[function(a,q,p){q.exports={percent:function(a,k){var m=a.length;k=100/k;for(var h=0;h<m;h++)a[h]*=k},probability:function(a,k){for(var m=a.length,h=0;h<m;h++)a[h]/=
k},density:function(a,k,m,h){k=a.length;h=h||1;for(var b=0;b<k;b++)a[b]=a[b]*m[b]*h},"probability density":function(a,k,m,h){var b=a.length;h&&(k/=h);for(h=0;h<b;h++)a[h]*=m[h]/k}}},{}],1030:[function(a,q,p){p=a("../histogram/attributes");var n=a("../histogram/bin_attributes"),k=a("../heatmap/attributes"),m=a("../../plots/attributes"),h=a("../../plots/template_attributes").hovertemplateAttrs,b=a("../../components/colorscale/attributes");a=a("../../lib/extend").extendFlat;q.exports=a({x:p.x,y:p.y,
z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:p.histnorm,histfunc:p.histfunc,nbinsx:p.nbinsx,xbins:n("x"),nbinsy:p.nbinsy,ybins:n("y"),autobinx:p.autobinx,autobiny:p.autobiny,bingroup:a({},p.bingroup,{}),xbingroup:a({},p.bingroup,{}),ybingroup:a({},p.bingroup,{}),xgap:k.xgap,ygap:k.ygap,zsmooth:k.zsmooth,zhoverformat:k.zhoverformat,hovertemplate:h({},{keys:"z"}),showlegend:a({},m.showlegend,{dflt:!1})},b("",{cLetter:"z",autoColorDflt:!1}))},
{"../../components/colorscale/attributes":598,"../../lib/extend":707,"../../plots/attributes":761,"../../plots/template_attributes":840,"../heatmap/attributes":999,"../histogram/attributes":1017,"../histogram/bin_attributes":1019}],1031:[function(a,q,p){function n(a,b,e,f){var c=Array(a);if(f)for(e=0;e<a;e++)c[e]=1/(b[e+1]-b[e]);else for(b=1/e,e=0;e<a;e++)c[e]=b;return c}function k(a,b){return{start:a(b.start),end:a(b.end),size:b.size}}function m(a,b,e,f,g,h){var c=a.length-1,d=Array(c);f=l(e,f,a,
g,h);for(e=0;e<c;e++)g=(b||[])[e],d[e]=void 0===g?[f(a[e]),f(a[e+1],!0)]:[g,g];return d}var h=a("../../lib"),b=a("../../plots/cartesian/axes"),g=a("../histogram/bin_functions"),e=a("../histogram/norm_functions"),t=a("../histogram/average"),l=a("../histogram/bin_label_vals"),f=a("../histogram/calc").calcAllAutoBins;q.exports=function(a,c){var d=b.getFromId(a,c.xaxis),l=b.getFromId(a,c.yaxis),p=c.xcalendar,q=c.ycalendar,y=function(a){return d.r2c(a,0,p)},A=function(a){return l.r2c(a,0,q)},z=f(a,c,d,
"x");var x=z[0];z=z[1];a=f(a,c,l,"y");var C=a[0];a=a[1];var B=c._length;z.length>B&&z.splice(B,z.length-B);a.length>B&&a.splice(B,a.length-B);var D=[],G=[],E=[],F="string"===typeof x.size,L="string"===typeof C.size,J=[],H=[],K=F?J:x,M=L?H:C,I=0,N=[],O=[],P=c.histnorm,Q=c.histfunc,T=-1!==P.indexOf("density"),V="max"===Q||"min"===Q?null:0,Y=g.count;P=e[P];var ca=!1,Z=[],R=[];(c="z"in c?c.z:"marker"in c&&Array.isArray(c.marker.color)?c.marker.color:"")&&"count"!==Q&&(ca="avg"===Q,Y=g[Q]);Q=x.size;var U=
y(x.start),X=y(x.end)+(U-b.tickIncrement(U,Q,!1,p))/1E6;for(x=U;x<X;x=b.tickIncrement(x,Q,!1,p))G.push(V),J.push(x),ca&&E.push(0);J.push(x);V=G.length;Q=(x-U)/V;U=d.c2r(U+Q/2,0,p);var ea=C.size;X=A(C.start);var fa=A(C.end)+(X-b.tickIncrement(X,ea,!1,q))/1E6;for(x=X;x<fa;x=b.tickIncrement(x,ea,!1,q)){D.push(G.slice());H.push(x);var la=Array(V);for(C=0;C<V;C++)la[C]=[];O.push(la);ca&&N.push(E.slice())}H.push(x);E=D.length;C=(x-X)/E;X=l.c2r(X+C/2,0,q);T&&(Z=n(G.length,K,Q,F),R=n(D.length,M,C,L));F||
"date"!==d.type||(K=k(y,K));L||"date"!==l.type||(M=k(A,M));F=G=!0;L=Array(V);T=Array(E);var da=la=fa=ea=Infinity;for(x=0;x<B;x++){var ma=z[x],aa=a[x];y=h.findBin(ma,K);A=h.findBin(aa,M);0<=y&&y<V&&0<=A&&A<E&&(I+=Y(y,x,D[A],c,N[A]),O[A][y].push(x),G&&(void 0===L[y]?L[y]=ma:L[y]!==ma&&(G=!1)),F&&(void 0===T[A]?T[A]=aa:T[A]!==aa&&(F=!1)),ea=Math.min(ea,ma-J[y]),fa=Math.min(fa,J[y+1]-ma),la=Math.min(la,aa-H[A]),da=Math.min(da,H[A+1]-aa))}if(ca)for(A=0;A<E;A++)I+=t(D[A],N[A]);if(P)for(A=0;A<E;A++)P(D[A],
I,Z,R[A]);return{x:z,xRanges:m(J,G&&L,ea,fa,d,p),x0:U,dx:Q,y:a,yRanges:m(H,F&&T,la,da,l,q),y0:X,dy:C,z:D,pts:O}}},{"../../lib":716,"../../plots/cartesian/axes":764,"../histogram/average":1018,"../histogram/bin_functions":1020,"../histogram/bin_label_vals":1021,"../histogram/calc":1022,"../histogram/norm_functions":1029}],1032:[function(a,q,p){var n=a("../../lib"),k=a("./sample_defaults"),m=a("../heatmap/style_defaults"),h=a("../../components/colorscale/defaults"),b=a("./attributes");q.exports=function(a,
e,t,l){function f(d,c){return n.coerce(a,e,b,d,c)}k(a,e,f,l);!1!==e.visible&&(m(a,e,f,l),h(a,e,l,f,{prefix:"",cLetter:"z"}),f("hovertemplate"))}},{"../../components/colorscale/defaults":601,"../../lib":716,"../heatmap/style_defaults":1012,"./attributes":1030,"./sample_defaults":1035}],1033:[function(a,q,p){var n=a("../heatmap/hover"),k=a("../../plots/cartesian/axes").hoverLabelText;q.exports=function(a,h,b,g,e,t){if(h=n(a,h,b,g,e,t))return a=h[0],g=a.index,e=a.cd[0],b=e.xRanges[g[1]],g=e.yRanges[g[0]],
a.xLabel=k(a.xa,b[0],b[1]),a.yLabel=k(a.ya,g[0],g[1]),h}},{"../../plots/cartesian/axes":764,"../heatmap/hover":1006}],1034:[function(a,q,p){q.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),crossTraceDefaults:a("../histogram/cross_trace_defaults"),calc:a("../heatmap/calc"),plot:a("../heatmap/plot"),layerName:"heatmaplayer",colorbar:a("../heatmap/colorbar"),style:a("../heatmap/style"),hoverPoints:a("./hover"),eventData:a("../histogram/event_data"),moduleType:"trace",name:"histogram2d",
basePlotModule:a("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":775,"../heatmap/calc":1E3,"../heatmap/colorbar":1002,"../heatmap/plot":1010,"../heatmap/style":1011,"../histogram/cross_trace_defaults":1024,"../histogram/event_data":1026,"./attributes":1030,"./defaults":1032,"./hover":1033}],1035:[function(a,q,p){var n=a("../../registry"),k=a("../../lib");q.exports=function(a,h,b,g){var e=b("x"),m=b("y");e=k.minRowLength(e);
m=k.minRowLength(m);e&&m?(h._length=Math.min(e,m),n.getComponentMethod("calendars","handleTraceDefaults")(a,h,["x","y"],g),(b("z")||b("marker.color"))&&b("histfunc"),b("histnorm"),b("autobinx"),b("autobiny")):h.visible=!1}},{"../../lib":716,"../../registry":845}],1036:[function(a,q,p){p=a("../histogram2d/attributes");var n=a("../contour/attributes"),k=a("../../components/colorscale/attributes");a=a("../../lib/extend").extendFlat;q.exports=a({x:p.x,y:p.y,z:p.z,marker:p.marker,histnorm:p.histnorm,histfunc:p.histfunc,
nbinsx:p.nbinsx,xbins:p.xbins,nbinsy:p.nbinsy,ybins:p.ybins,autobinx:p.autobinx,autobiny:p.autobiny,bingroup:p.bingroup,xbingroup:p.xbingroup,ybingroup:p.ybingroup,autocontour:n.autocontour,ncontours:n.ncontours,contours:n.contours,line:{color:n.line.color,width:a({},n.line.width,{dflt:.5}),dash:n.line.dash,smoothing:n.line.smoothing,editType:"plot"},zhoverformat:p.zhoverformat,hovertemplate:p.hovertemplate},k("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":598,
"../../lib/extend":707,"../contour/attributes":942,"../histogram2d/attributes":1030}],1037:[function(a,q,p){var n=a("../../lib"),k=a("../histogram2d/sample_defaults"),m=a("../contour/contours_defaults"),h=a("../contour/style_defaults"),b=a("./attributes");q.exports=function(a,e,t,l){function f(d,c){return n.coerce(a,e,b,d,c)}k(a,e,f,l);!1!==e.visible&&(m(a,e,f,function(d){return n.coerce2(a,e,b,d)}),h(a,e,f,l),f("hovertemplate"))}},{"../../lib":716,"../contour/contours_defaults":949,"../contour/style_defaults":963,
"../histogram2d/sample_defaults":1035,"./attributes":1036}],1038:[function(a,q,p){q.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),crossTraceDefaults:a("../histogram/cross_trace_defaults"),calc:a("../contour/calc"),plot:a("../contour/plot").plot,layerName:"contourlayer",style:a("../contour/style"),colorbar:a("../contour/colorbar"),hoverPoints:a("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:a("../../plots/cartesian"),categories:"cartesian svg 2dMap contour histogram showLegend".split(" "),
meta:{}}},{"../../plots/cartesian":775,"../contour/calc":943,"../contour/colorbar":945,"../contour/hover":955,"../contour/plot":960,"../contour/style":962,"../histogram/cross_trace_defaults":1024,"./attributes":1036,"./defaults":1037}],1039:[function(a,q,p){p=a("../../plots/attributes");var n=a("../../plots/template_attributes").hovertemplateAttrs,k=a("../../lib/extend").extendFlat;a=a("./constants").colormodel;for(var m=["rgb","rgba","hsl","hsla"],h=[],b=[],g=0;g<m.length;g++)h.push("For the `"+
m[g]+"` colormodel, it is ["+a[m[g]].min.join(", ")+"]."),b.push("For the `"+m[g]+"` colormodel, it is ["+a[m[g]].max.join(", ")+"].");q.exports=k({z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:m,dflt:"rgb",editType:"calc"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",
editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:k({},p.hoverinfo,{flags:"x y z color name text".split(" "),
dflt:"x+y+z+text+name"}),hovertemplate:n({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":707,"../../plots/attributes":761,"../../plots/template_attributes":840,"./constants":1041}],1040:[function(a,q,p){function n(a,b,d,c){return function(e){return h.constrain((e-a)*b,d,c)}}function k(a,b){return function(d){return h.constrain(d,a,b)}}function m(a){var e=a.colormodel,d=e.length;e=b.colormodel[e];a._sArray=[];for(var c=0;c<d;c++)e.min[c]!==a.zmin[c]||e.max[c]!==a.zmax[c]?
a._sArray.push(n(a.zmin[c],(e.max[c]-e.min[c])/(a.zmax[c]-a.zmin[c]),e.min[c],e.max[c])):a._sArray.push(k(e.min[c],e.max[c]));return function(b){b=b.slice(0,d);for(var c=0;c<d;c++){var e=b[c];if(!g(e))return!1;b[c]=a._sArray[c](e)}return b}}var h=a("../../lib"),b=a("./constants"),g=a("fast-isnumeric"),e=a("../../plots/cartesian/axes"),t=a("../../lib").maxRowLength;q.exports=function(a,b){var d=e.getFromId(a,b.xaxis||"x");a=e.getFromId(a,b.yaxis||"y");var c=d.d2c(b.x0)-b.dx/2,f=a.d2c(b.y0)-b.dy/2,
g=b.z.length,h=t(b.z),k,l=[c,c+h*b.dx],n=[f,f+g*b.dy];if(d&&"log"===d.type)for(k=0;k<h;k++)l.push(c+k*b.dx);if(a&&"log"===a.type)for(k=0;k<g;k++)n.push(f+k*b.dy);b._extremes[d._id]=e.findExtremes(d,l);b._extremes[a._id]=e.findExtremes(a,n);b._scaler=m(b);return[{x0:c,y0:f,z:b.z,w:h,h:g}]}},{"../../lib":716,"../../plots/cartesian/axes":764,"./constants":1041,"fast-isnumeric":228}],1041:[function(a,q,p){q.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(a){return a.slice(0,3)},suffix:["",
"",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(a){return a.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(a){a=a.slice(0,3);a[1]+="%";a[2]+="%";return a},suffix:["","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(a){a=a.slice(0,4);a[1]+="%";a[2]+="%";return a},suffix:["","%","%",""]}}}},{}],1042:[function(a,q,p){var n=a("../../lib"),k=a("./attributes"),m=a("./constants");q.exports=function(a,b){function g(e,g){return n.coerce(a,b,k,
e,g)}var e=g("z");void 0!==e&&e.length&&e[0]&&e[0].length?(g("x0"),g("y0"),g("dx"),g("dy"),e=g("colormodel"),g("zmin",m.colormodel[e].min),g("zmax",m.colormodel[e].max),g("text"),g("hovertext"),g("hovertemplate"),b._length=null):b.visible=!1}},{"../../lib":716,"./attributes":1039,"./constants":1041}],1043:[function(a,q,p){q.exports=function(a,k){"xVal"in k&&(a.x=k.xVal);"yVal"in k&&(a.y=k.yVal);k.xa&&(a.xaxis=k.xa);k.ya&&(a.yaxis=k.ya);a.color=k.color;a.colormodel=k.trace.colormodel;return a}},{}],
1044:[function(a,q,p){var n=a("../../components/fx"),k=a("../../lib"),m=a("./constants");q.exports=function(a,b,g){var e=a.cd[0],h=e.trace,l=a.xa,f=a.ya;if(!(0<n.inbox(b-e.x0,b-(e.x0+e.w*h.dx),0)||0<n.inbox(g-e.y0,g-(e.y0+e.h*h.dy),0))&&(b=Math.floor((b-e.x0)/h.dx),g=Math.floor(Math.abs(g-e.y0)/h.dy),e.z[g][b])){var d=e.hi||h.hoverinfo,c;d&&(d=d.split("+"),-1!==d.indexOf("all")&&(d=["color"]),-1!==d.indexOf("color")&&(c=!0));var r=h.colormodel,p=r.length;d=h._scaler(e.z[g][b]);var q=m.colormodel[r].suffix,
w=[];if(h.hovertemplate||c)w.push("["+[d[0]+q[0],d[1]+q[1],d[2]+q[2]].join(", ")),4===p&&w.push(", "+d[3]+q[3]),w.push("]"),w=w.join(""),a.extraText=r.toUpperCase()+": "+w;var y;Array.isArray(h.hovertext)&&Array.isArray(h.hovertext[g])?y=h.hovertext[g][b]:Array.isArray(h.text)&&Array.isArray(h.text[g])&&(y=h.text[g][b]);f=f.c2p(e.y0+(g+.5)*h.dy);c=e.x0+(b+.5)*h.dx;r=e.y0+(g+.5)*h.dy;p="["+e.z[g][b].slice(0,h.colormodel.length).join(", ")+"]";return[k.extendFlat(a,{index:[g,b],x0:l.c2p(e.x0+b*h.dx),
x1:l.c2p(e.x0+(b+1)*h.dx),y0:f,y1:f,color:d,xVal:c,xLabelVal:c,yVal:r,yLabelVal:r,zLabelVal:p,text:y,hovertemplateLabels:{zLabel:p,colorLabel:w,"color[0]Label":d[0]+q[0],"color[1]Label":d[1]+q[1],"color[2]Label":d[2]+q[2],"color[3]Label":d[3]+q[3]}})]}}},{"../../components/fx":629,"../../lib":716,"./constants":1041}],1045:[function(a,q,p){q.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),calc:a("./calc"),plot:a("./plot"),style:a("./style"),hoverPoints:a("./hover"),eventData:a("./event_data"),
moduleType:"trace",name:"image",basePlotModule:a("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":775,"./attributes":1039,"./calc":1040,"./defaults":1042,"./event_data":1043,"./hover":1044,"./plot":1046,"./style":1047}],1046:[function(a,q,p){var n=a("d3"),k=a("../../lib"),m=a("../../constants/xmlns_namespaces"),h=a("./constants");q.exports=function(a,g,e,t){var b=g.xaxis,f=g.yaxis;k.makeTraceGroups(t,e,"im").each(function(a){var c=
n.select(this),d=a[0],e=d.trace,g=d.z,l=d.x0,t=d.y0,p=d.w,q=d.h,x=e.dx,C=e.dy,B;for(B=0;void 0===D&&B<p;){var D=b.c2p(l+B*x);B++}for(B=p;void 0===G&&0<B;){var G=b.c2p(l+B*x);B--}for(B=0;void 0===E&&B<q;){var E=f.c2p(t+B*C);B++}for(B=q;void 0===F&&0<B;){var F=f.c2p(t+B*C);B--}G<D&&(B=G,G=D,D=B);F<E&&(B=E,E=F,F=B);D=Math.max(-.5*b._length,D);G=Math.min(1.5*b._length,G);E=Math.max(-.5*f._length,E);F=Math.min(1.5*f._length,F);var L=Math.round(G-D),J=Math.round(F-E);if(0>=L||0>=J)c.selectAll("image").data([]).exit().remove();
else{G=document.createElement("canvas");G.width=L;G.height=J;F=G.getContext("2d");p=function(a){return k.constrain(Math.round(b.c2p(l+a*x)-D),0,L)};q=function(a){return k.constrain(Math.round(f.c2p(t+a*C)-E),0,J)};var H=h.colormodel[e.colormodel].fmt;for(B=0;B<d.w;B++){var K=p(B),M=p(B+1);if(M!==K&&!isNaN(M)&&!isNaN(K))for(var I=0;I<d.h;I++){var N=q(I),O=q(I+1);if(O!==N&&!isNaN(O)&&!isNaN(N)&&g[I][B]){var P=e._scaler(g[I][B]);F.fillStyle=P?e.colormodel+"("+H(P).join(",")+")":"rgba(0,0,0,0)";F.fillRect(K,
N,M-K,O-N)}}}a=c.selectAll("image").data(a);a.enter().append("svg:image").attr({xmlns:m.svg,preserveAspectRatio:"none"});a.attr({height:J,width:L,x:D,y:E,"xlink:href":G.toDataURL("image/png")})}})}},{"../../constants/xmlns_namespaces":693,"../../lib":716,"./constants":1041,d3:165}],1047:[function(a,q,p){var n=a("d3");q.exports=function(a){n.select(a).selectAll(".im image").style("opacity",function(a){return a.trace.opacity})}},{d3:165}],1048:[function(a,q,p){p=a("../../lib/extend").extendFlat;var n=
a("../../lib/extend").extendDeep,k=a("../../plot_api/edit_types").overrideAll,m=a("../../plots/font_attributes"),h=a("../../components/color/attributes"),b=a("../../plots/domain").attributes,g=a("../../plots/cartesian/layout_attributes"),e=a("../../plot_api/plot_template").templatedArray,t=a("../../constants/delta.js");a("../../constants/docs");a=m({editType:"plot",colorEditType:"plot"});var l={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:h.defaultLine,editType:"plot"},
width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},f={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"};e=e("step",n({},l,{range:f}));q.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center",
"right"],editType:"plot"},domain:b({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:p({},a,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot"},font:p({},a,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",
values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot"},increasing:{symbol:{valType:"string",dflt:t.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:t.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:t.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:t.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:p({},a,
{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:n({},l,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:h.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:k({range:f,visible:p({},g.visible,{dflt:!0}),tickmode:g.tickmode,nticks:g.nticks,tick0:g.tick0,dtick:g.dtick,tickvals:g.tickvals,ticktext:g.ticktext,ticks:p({},g.ticks,{dflt:"outside"}),
ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,showticklabels:g.showticklabels,tickfont:m({}),tickangle:g.tickangle,tickformat:g.tickformat,tickformatstops:g.tickformatstops,tickprefix:g.tickprefix,showtickprefix:g.showtickprefix,ticksuffix:g.ticksuffix,showticksuffix:g.showticksuffix,separatethousands:g.separatethousands,exponentformat:g.exponentformat,showexponent:g.showexponent,editType:"plot"},"plot"),steps:e,threshold:{line:{color:p({},l.line.color,{}),width:p({},l.line.width,
{dflt:1}),editType:"plot"},thickness:p({},l.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":590,"../../constants/delta.js":686,"../../constants/docs":687,"../../lib/extend":707,"../../plot_api/edit_types":747,"../../plot_api/plot_template":754,"../../plots/cartesian/layout_attributes":776,"../../plots/domain":789,"../../plots/font_attributes":790}],1049:[function(a,q,p){var n=a("../../plots/plots");p.name=
"indicator";p.plot=function(a,m,h,b){n.plotBasePlot(p.name,a,m,h,b)};p.clean=function(a,m,h,b){n.cleanBasePlot(p.name,a,m,h,b)}},{"../../plots/plots":825}],1050:[function(a,q,p){q.exports={calc:function(a,k){a=[];var m=k.value;"number"!==typeof k._lastValue&&(k._lastValue=k.value);var h=k._lastValue,b=h;k._hasDelta&&"number"===typeof k.delta.reference&&(b=k.delta.reference);a[0]={y:m,lastY:h,delta:m-b,relativeDelta:(m-b)/b};return a}}},{}],1051:[function(a,q,p){q.exports={defaultNumberFontSize:80,
bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],1052:[function(a,q,p){function n(a,b){function c(c,d){return k.coerce(a,b,m.gauge.steps,c,d)}c("color");c("line.color");c("line.width");c("range");c("thickness")}var k=a("../../lib"),m=a("./attributes"),h=a("../../plots/domain").defaults,b=a("../../plot_api/plot_template"),g=a("../../plots/array_container_defaults"),e=a("./constants.js"),t=a("../../plots/cartesian/tick_value_defaults"),
l=a("../../plots/cartesian/tick_mark_defaults"),f=a("../../plots/cartesian/tick_label_defaults");q.exports={supplyDefaults:function(a,c,r,p){function d(b,d){return k.coerce(a,c,m,b,d)}function q(a,b){return k.coerce(x,C,m.gauge,a,b)}function u(a,b){return k.coerce(B,D,m.gauge.axis,a,b)}h(c,p,d);d("mode");c._hasNumber=-1!==c.mode.indexOf("number");c._hasDelta=-1!==c.mode.indexOf("delta");c._hasGauge=-1!==c.mode.indexOf("gauge");r=d("value");c._range=[0,"number"===typeof r?1.5*r:1];r=Array(2);if(c._hasNumber){d("number.valueformat");
d("number.font.color",p.font.color);d("number.font.family",p.font.family);d("number.font.size");void 0===c.number.font.size&&(c.number.font.size=e.defaultNumberFontSize,r[0]=!0);d("number.prefix");d("number.suffix");var A=c.number.font.size}if(c._hasDelta){d("delta.font.color",p.font.color);d("delta.font.family",p.font.family);d("delta.font.size");void 0===c.delta.font.size&&(c.delta.font.size=(c._hasNumber?.5:1)*(A||e.defaultNumberFontSize),r[1]=!0);d("delta.reference",c.value);d("delta.relative");
d("delta.valueformat",c.delta.relative?"2%":"");d("delta.increasing.symbol");d("delta.increasing.color");d("delta.decreasing.symbol");d("delta.decreasing.color");d("delta.position");var z=c.delta.font.size}c._scaleNumbers=(!c._hasNumber||r[0])&&(!c._hasDelta||r[1])||!1;d("title.font.color",p.font.color);d("title.font.family",p.font.family);d("title.font.size",.25*(A||z||e.defaultNumberFontSize));d("title.text");var x;if(c._hasGauge){(x=a.gauge)||(x={});var C=b.newContainer(c,"gauge");q("shape");(c._isBullet=
"bullet"===c.gauge.shape)||d("title.align","center");(c._isAngular="angular"===c.gauge.shape)||d("align","center");q("bgcolor",p.paper_bgcolor);q("borderwidth");q("bordercolor");q("bar.color");q("bar.line.color");q("bar.line.width");q("bar.thickness",e.valueThickness*("bullet"===c.gauge.shape?.5:1));g(x,C,{name:"steps",handleItemDefaults:n});q("threshold.value");q("threshold.thickness");q("threshold.line.width");q("threshold.line.color");var B={};x&&(B=x.axis||{});var D=b.newContainer(C,"axis");u("visible");
c._range=u("range",c._range);p={outerTicks:!0};t(B,D,u,"linear");f(B,D,u,"linear",p);l(B,D,u,p)}else d("title.align","center"),d("align","center"),c._isAngular=c._isBullet=!1;c._length=null}}},{"../../lib":716,"../../plot_api/plot_template":754,"../../plots/array_container_defaults":760,"../../plots/cartesian/tick_label_defaults":783,"../../plots/cartesian/tick_mark_defaults":784,"../../plots/cartesian/tick_value_defaults":785,"../../plots/domain":789,"./attributes":1048,"./constants.js":1051}],1053:[function(a,
q,p){q.exports={moduleType:"trace",name:"indicator",basePlotModule:a("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:a("./attributes"),supplyDefaults:a("./defaults").supplyDefaults,calc:a("./calc").calc,plot:a("./plot"),meta:{}}},{"./attributes":1048,"./base_plot":1049,"./calc":1050,"./defaults":1052,"./plot":1054}],1054:[function(a,q,p){function n(a,b,c,d){function e(a){a.attr("width",function(a){return Math.max(0,v.c2p(a.range[1])-v.c2p(a.range[0]))}).attr("x",function(a){return v.c2p(a.range[0])}).attr("y",
function(a){return.5*(1-a.thickness)*q}).attr("height",function(a){return a.thickness*q})}var f=c[0].trace;b=d.gauge;var k=d.layer,l=d.gaugeBg,m=d.gaugeOutline,n=d.size,r=f.domain,t=d.transitionOpts,p=d.onComplete;b.enter().append("g").classed("bullet",!0);b.attr("transform","translate("+n.l+", "+n.t+")");k.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0);k.selectAll("g.xbulletaxistick,path,text").remove();var q=n.h;d=f.gauge.bar.thickness*q;var u=r.x[0];r=r.x[0]+(r.x[1]-r.x[0])*(f._hasNumber||
f._hasDelta?1-w.bulletNumberDomainSize:1);var v=g(a,f.gauge.axis);v._id="xbulletaxis";v.domain=[u,r];v.setScale();r=A.calcTicks(v);u=A.makeTransFn(v);var x=A.getTickSigns(v)[2];n=n.t+n.h;v.visible&&(A.drawTicks(a,v,{vals:"inside"===v.ticks?A.clipEnds(v,r):r,layer:k,path:A.makeTickPath(v,n,x),transFn:u}),A.drawLabels(a,v,{vals:r,layer:k,transFn:u,labelFns:A.makeLabelFns(v,n)}));a=[l].concat(f.gauge.steps);a=b.selectAll("g.bg-bullet").data(a);a.enter().append("g").classed("bg-bullet",!0).append("rect");
a.select("rect").call(e).call(h);a.exit().remove();a=b.selectAll("g.value-bullet").data([f.gauge.bar]);a.enter().append("g").classed("value-bullet",!0).append("rect");a.select("rect").attr("height",d).attr("y",(q-d)/2).call(h);t&&0<t.duration?a.select("rect").transition().duration(t.duration).ease(t.easing).each("end",function(){p&&p()}).each("interrupt",function(){p&&p()}).attr("width",Math.max(0,v.c2p(Math.min(f.gauge.axis.range[1],c[0].y)))):a.select("rect").attr("width","number"===typeof c[0].y?
Math.max(0,v.c2p(Math.min(f.gauge.axis.range[1],c[0].y))):0);a.exit().remove();c=c.filter(function(){return f.gauge.threshold.value});c=b.selectAll("g.threshold-bullet").data(c);c.enter().append("g").classed("threshold-bullet",!0).append("line");c.select("line").attr("x1",v.c2p(f.gauge.threshold.value)).attr("x2",v.c2p(f.gauge.threshold.value)).attr("y1",(1-f.gauge.threshold.thickness)/2*q).attr("y2",(1-(1-f.gauge.threshold.thickness)/2)*q).call(B.stroke,f.gauge.threshold.line.color).style("stroke-width",
f.gauge.threshold.line.width);c.exit().remove();b=b.selectAll("g.gauge-outline").data([m]);b.enter().append("g").classed("gauge-outline",!0).append("rect");b.select("rect").call(e).call(h);b.exit().remove()}function k(a,c,f,k){function l(a){var b=t.gauge.axis.range[0];a=(a-b)/(t.gauge.axis.range[1]-b)*Math.PI-C;return a<-C?-C:a>C?C:a}function m(a){return d.svg.arc().innerRadius((v+q)/2-a/2*(q-v)).outerRadius((v+q)/2+a/2*(q-v)).startAngle(-C)}function n(a){a.attr("d",function(a){return m(a.thickness).startAngle(l(a.range[0])).endAngle(l(a.range[1]))()})}
var t=f[0].trace,p=k.size,q=k.radius,v=k.innerRadius,w=k.gaugeBg;c=k.gaugeOutline;var x=[p.l+p.w/2,p.t+p.h/2+q/2];p=k.gauge;var z=k.layer,y=k.transitionOpts,B=k.onComplete,C=Math.PI/2;p.enter().append("g").classed("angular",!0);p.attr("transform",e(x[0],x[1]));z.enter().append("g").classed("angularaxis",!0).classed("crisp",!0);z.selectAll("g.xangularaxistick,path,text").remove();var D=g(a,t.gauge.axis);D.type="linear";D.range=t.gauge.axis.range;D._id="xangularaxis";D.setScale();var E=function(a){return(D.range[0]-
a.x)/(D.range[1]-D.range[0])*Math.PI+Math.PI},H={},F=A.makeLabelFns(D,0).labelStandoff;H.xFn=function(a){a=E(a);return Math.cos(a)*F};H.yFn=function(a){var b=E(a);return-Math.sin(b)*(F+a.fontSize*(0<Math.sin(b)?.2:1))+Math.abs(Math.cos(b))*a.fontSize*u};H.anchorFn=function(a){a=E(a);a=Math.cos(a);return.1>Math.abs(a)?"middle":0<a?"start":"end"};H.heightFn=function(a,b,c){a=E(a);return-.5*(1+Math.sin(a))*c};var G=function(a){return e(x[0]+q*Math.cos(a),x[1]-q*Math.sin(a))};var J=function(a){return G(E(a))};
var L=function(a){a=E(a);return G(a)+"rotate("+-r(a)+")"};k=A.calcTicks(D);var aa=A.getTickSigns(D)[2];D.visible&&(aa="inside"===D.ticks?-1:1,A.drawTicks(a,D,{vals:k,layer:z,path:"M"+(D.linewidth||1)/2*aa+",0h"+aa*D.ticklen,transFn:L}),A.drawLabels(a,D,{vals:k,layer:z,transFn:J,labelFns:H}));a=[w].concat(t.gauge.steps);a=p.selectAll("g.bg-arc").data(a);a.enter().append("g").classed("bg-arc",!0).append("path");a.select("path").call(n).call(h);a.exit().remove();a=m(t.gauge.bar.thickness);w=p.selectAll("g.value-arc").data([t.gauge.bar]);
w.enter().append("g").classed("value-arc",!0).append("path");z=w.select("path");y&&0<y.duration?(z.transition().duration(y.duration).ease(y.easing).each("end",function(){B&&B()}).each("interrupt",function(){B&&B()}).attrTween("d",b(a,l(f[0].lastY),l(f[0].y))),t._lastValue=f[0].y):z.attr("d","number"===typeof f[0].y?a.endAngle(l(f[0].y)):"M0,0Z");z.call(h);w.exit().remove();a=[];(f=t.gauge.threshold.value)&&a.push({range:[f,f],color:t.gauge.threshold.color,line:{color:t.gauge.threshold.line.color,
width:t.gauge.threshold.line.width},thickness:t.gauge.threshold.thickness});f=p.selectAll("g.threshold-arc").data(a);f.enter().append("g").classed("threshold-arc",!0).append("path");f.select("path").call(n).call(h);f.exit().remove();c=p.selectAll("g.gauge-outline").data([c]);c.enter().append("g").classed("gauge-outline",!0).append("path");c.select("path").call(n).call(h);c.exit().remove()}function m(a,b,h,k){function m(b,c,d,e){if(!b.match("s")||0<=d===0<=e||c(d).slice(-1).match(E)||c(e).slice(-1).match(E))return c;
b=b.slice().replace("s","f").replace(/\d+/,function(a){return parseInt(a)-1});var f=g(a,{tickformat:b});return function(a){return 1>Math.abs(a)?A.tickText(f,a).text:c(a)}}function n(){function b(){var b="number"===typeof h[0].y?k+e(h[0].y)+f:"-";n.text(b).call(v.font,t.number.font).call(y.convertToTspans,a)}var c=g(a,{tickformat:t.number.valueformat},t._range);c.setScale();A.prepTicks(c);var e=function(a){return A.tickText(c,a).text},f=t.number.suffix,k=t.number.prefix,n=C.select("text.number");x&&
0<x.duration?n.transition().duration(x.duration).ease(x.easing).each("end",function(){b();z&&z()}).each("interrupt",function(){b();z&&z()}).attrTween("text",function(){var a=d.select(this),b=d.interpolateNumber(h[0].lastY,h[0].y);t._lastValue=h[0].y;var c=m(t.number.valueformat,e,h[0].lastY,h[0].y);return function(d){a.text(k+c(b(d))+f)}}):b();H=l(k+e(h[0].y)+f,t.number.font,w,a);return n}function r(){function b(){r.text(k(f(h[0]),e)).call(B.fill,n(h[0])).call(y.convertToTspans,a)}var c=g(a,{tickformat:t.delta.valueformat},
t._range);c.setScale();A.prepTicks(c);var e=function(a){return A.tickText(c,a).text},f=function(a){return t.delta.relative?a.relativeDelta:a.delta},k=function(a,b){return 0===a||"number"!==typeof a||isNaN(a)?"-":(0<a?t.delta.increasing.symbol:t.delta.decreasing.symbol)+b(a)},n=function(a){return 0<=a.delta?t.delta.increasing.color:t.delta.decreasing.color};void 0===t._deltaLastValue&&(t._deltaLastValue=f(h[0]));var r=C.select("text.delta");r.call(v.font,t.delta.font).call(B.fill,n({delta:t._deltaLastValue}));
x&&0<x.duration?r.transition().duration(x.duration).ease(x.easing).tween("text",function(){var a=d.select(this),b=f(h[0]),c=t._deltaLastValue,g=m(t.delta.valueformat,e,c,b),l=d.interpolateNumber(c,b);t._deltaLastValue=b;return function(b){a.text(k(l(b),g));a.call(B.fill,n({delta:l(b)}))}}).each("end",function(){b();z&&z()}).each("interrupt",function(){b();z&&z()}):b();F=l(k(f(h[0]),e),t.delta.font,w,a);return r}var t=h[0].trace,p=k.numbersX,q=k.numbersY,u=t.align||"center",w=D[u],x=k.transitionOpts,
z=k.onComplete,C=c.ensureSingle(b,"g","numbers"),H,F;b=[];t._hasNumber&&b.push("number");t._hasDelta&&(b.push("delta"),"left"===t.delta.position&&b.reverse());b=C.selectAll("text").data(b);b.enter().append("text");b.attr("text-anchor",function(){return w}).attr("class",function(a){return a}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null);b.exit().remove();var J=t.mode+t.align;if(t._hasDelta){var L=r();J+=t.delta.position+t.delta.font.size+t.delta.font.family+t.delta.valueformat;J+=
t.delta.increasing.symbol+t.delta.decreasing.symbol;var ea=F}t._hasNumber&&(n(),J+=t.number.font.size+t.number.font.family+t.number.valueformat+t.number.suffix+t.number.prefix,ea=H);if(t._hasDelta&&t._hasNumber){b=[(H.left+H.right)/2,(H.top+H.bottom)/2];var fa=[(F.left+F.right)/2,(F.top+F.bottom)/2],la=.75*t.delta.font.size;if("left"===t.delta.position){var da=f(t,"deltaPos",0,-1*(H.width*G[t.align]+F.width*(1-G[t.align])+la),J,Math.min);var ma=b[1]-fa[1];ea={width:H.width+F.width+la,height:Math.max(H.height,
F.height),left:F.left+da,right:H.right,top:Math.min(H.top,F.top+ma),bottom:Math.max(H.bottom,F.bottom+ma)}}"right"===t.delta.position&&(da=f(t,"deltaPos",0,H.width*(1-G[t.align])+F.width*G[t.align]+la,J,Math.max),ma=b[1]-fa[1],ea={width:H.width+F.width+la,height:Math.max(H.height,F.height),left:H.left,right:F.right+da,top:Math.min(H.top,F.top+ma),bottom:Math.max(H.bottom,F.bottom+ma)});"bottom"===t.delta.position&&(da=null,ma=F.height,ea={width:Math.max(H.width,F.width),height:H.height+F.height,left:Math.min(H.left,
F.left),right:Math.max(H.right,F.right),top:H.bottom-H.height,bottom:H.bottom+F.height});"top"===t.delta.position&&(da=null,ma=H.top,ea={width:Math.max(H.width,F.width),height:H.height+F.height,left:Math.min(H.left,F.left),right:Math.max(H.right,F.right),top:H.bottom-H.height-F.height,bottom:H.bottom});L.attr({dx:da,dy:ma})}(t._hasNumber||t._hasDelta)&&C.attr("transform",function(){var a=k.numbersScaler(ea);J+=a[2];a=f(t,"numbersScale",1,a[0],J,Math.min);t._scaleNumbers||(a=1);var b=t._isAngular?
q-a*ea.bottom:q-a*(ea.top+ea.bottom)/2;t._numbersTop=a*ea.top+b;var c=ea[u];"center"===u&&(c=(ea.left+ea.right)/2);c=p-a*c;c=f(t,"numbersTranslate",0,c,J,Math.max);return e(c,b)+" scale("+a+")"})}function h(a){a.each(function(a){B.stroke(d.select(this),a.line.color)}).each(function(a){B.fill(d.select(this),a.color)}).style("stroke-width",function(a){return a.line.width})}function b(a,b,c){return function(){var e=d.interpolate(b,c);return function(b){return a.endAngle(e(b))()}}}function g(a,b,d){function e(a,
b){return c.coerce(f,g,C,a,b)}a=a._fullLayout;var f=c.extendFlat({type:"linear",ticks:"outside",range:d,showline:!0},b),g={type:"linear",_id:"x"+b._id};b={letter:"x",font:a.font,noHover:!0,noTickson:!0};z(f,g,e,b,a);x(f,g,e,b);return g}function e(a,b){return"translate("+a+","+b+")"}function t(a,b,c){return[Math.min(b/a.width,c/a.height),a,b+"x"+c]}function l(a,b,c,e){var f=document.createElementNS("http://www.w3.org/2000/svg","text");f=d.select(f);f.text(a).attr("x",0).attr("y",0).attr("text-anchor",
c).attr("data-unformatted",a).call(y.convertToTspans,e).call(v.font,b);return v.bBox(f.node())}function f(a,b,d,e,f,g){b="_cache"+b;a[b]&&a[b].key===f||(a[b]={key:f,value:d});d=c.aggNums(g,null,[a[b].value,e],2);return a[b].value=d}var d=a("d3"),c=a("../../lib"),r=c.rad2deg,u=a("../../constants/alignment").MID_SHIFT,v=a("../../components/drawing"),w=a("./constants"),y=a("../../lib/svg_text_utils"),A=a("../../plots/cartesian/axes"),z=a("../../plots/cartesian/axis_defaults"),x=a("../../plots/cartesian/position_defaults"),
C=a("../../plots/cartesian/layout_attributes"),B=a("../../components/color"),D={left:"start",center:"middle",right:"end"},G={left:0,center:.5,right:1},E=/[yzafpnmkMGTPEZY]/;q.exports=function(a,b,f,g){var h=a._fullLayout,l;f&&0<f.duration&&g&&(l=g());c.makeTraceGroups(h._indicatorlayer,b,"trace").each(function(b){var c=b[0].trace,g=d.select(this),r=c._hasGauge,p=c._isAngular,q=c._isBullet,u=c.domain,x={w:h._size.w*(u.x[1]-u.x[0]),h:h._size.h*(u.y[1]-u.y[0]),l:h._size.l+h._size.w*u.x[0],r:h._size.r+
h._size.w*(1-u.x[1]),t:h._size.t+h._size.h*(1-u.y[1]),b:h._size.b+h._size.h*u.y[0]},z=x.l+x.w/2,A=x.t+x.h/2,B=Math.min(x.w/2,x.h),C=w.innerRadius*B;u=c.align||"center";var E=A;if(r){if(p){var H=z;E=A+B/2;var I=function(a){var b=.9*C;return[b/Math.sqrt(a.width/2*(a.width/2)+a.height*a.height),a,b]}}if(q){var F=w.bulletPadding;H=1-w.bulletNumberDomainSize+F;H=x.l+(H+(1-H)*G[u])*x.w;I=function(a){return t(a,(w.bulletNumberDomainSize-F)*x.w,x.h)}}}else H=x.l+G[u]*x.w,I=function(a){return t(a,x.w,x.h)};
m(a,g,b,{numbersX:H,numbersY:E,numbersScaler:I,transitionOpts:f,onComplete:l});if(r){var J={range:c.gauge.axis.range,color:c.gauge.bgcolor,line:{color:c.gauge.bordercolor,width:0},thickness:1};var L={range:c.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:c.gauge.bordercolor,width:c.gauge.borderwidth},thickness:1}}H=g.selectAll("g.angular").data(p?b:[]);H.exit().remove();var K=g.selectAll("g.angularaxis").data(p?b:[]);K.exit().remove();p&&k(a,g,b,{radius:B,innerRadius:C,gauge:H,layer:K,size:x,
gaugeBg:J,gaugeOutline:L,transitionOpts:f,onComplete:l});H=g.selectAll("g.bullet").data(q?b:[]);H.exit().remove();I=g.selectAll("g.bulletaxis").data(q?b:[]);I.exit().remove();q&&n(a,g,b,{gauge:H,layer:I,size:x,gaugeBg:J,gaugeOutline:L,transitionOpts:f,onComplete:l});var M=g.selectAll("text.title").data(b);M.exit().remove();M.enter().append("text").classed("title",!0);M.attr("text-anchor",function(){return q?D.right:D[c.title.align]}).text(c.title.text).call(v.font,c.title.font).call(y.convertToTspans,
a);M.attr("transform",function(){var a=x.l+x.w*G[c.title.align],b,d=w.titlePadding,f=v.bBox(M.node());r?(p&&(b=c.gauge.axis.visible?v.bBox(K.node()).top-d-f.bottom:x.t+x.h/2-B/2-f.bottom-d),q&&(b=E-(f.top+f.bottom)/2,a=x.l-w.bulletPadding*x.w)):b=c._numbersTop-d-f.bottom;return e(a,b)})})}},{"../../components/color":591,"../../components/drawing":612,"../../constants/alignment":685,"../../lib":716,"../../lib/svg_text_utils":740,"../../plots/cartesian/axes":764,"../../plots/cartesian/axis_defaults":766,
"../../plots/cartesian/layout_attributes":776,"../../plots/cartesian/position_defaults":779,"./constants":1051,d3:165}],1055:[function(a,q,p){function n(a){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function k(a){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}p=a("../../components/colorscale/attributes");var m=a("../../plots/template_attributes").hovertemplateAttrs,h=a("../mesh3d/attributes"),
b=a("../../plots/attributes"),g=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;q=q.exports=a(g({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},
spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:n("x"),y:n("y"),z:n("z")},caps:{x:k("x"),y:k("y"),z:k("z")},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:m(),showlegend:g({},b.showlegend,{dflt:!1})},p("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:h.opacity,lightposition:h.lightposition,lighting:h.lighting,flatshading:h.flatshading,contour:h.contour,hoverinfo:g({},
b.hoverinfo)}),"calc","nested");q.flatshading.dflt=!0;q.lighting.facenormalsepsilon.dflt=0;q.x.editType=q.y.editType=q.z.editType=q.value.editType="calc+clearAxisTypes";q.transforms=void 0},{"../../components/colorscale/attributes":598,"../../lib/extend":707,"../../plot_api/edit_types":747,"../../plots/attributes":761,"../../plots/template_attributes":840,"../mesh3d/attributes":1060}],1056:[function(a,q,p){var n=a("../../components/colorscale/calc"),k=a("../streamtube/calc").processGrid,m=a("../streamtube/calc").filter;
q.exports=function(a,b){b._len=Math.min(b.x.length,b.y.length,b.z.length,b.value.length);b._x=m(b.x,b._len);b._y=m(b.y,b._len);b._z=m(b.z,b._len);b._value=m(b.value,b._len);var g=k(b);b._gridFill=g.fill;b._Xs=g.Xs;b._Ys=g.Ys;b._Zs=g.Zs;b._len=g.len;g=Infinity;for(var e=-Infinity,h=0;h<b._len;h++){var l=b._value[h];g=Math.min(g,l);e=Math.max(e,l)}b._minValues=g;b._maxValues=e;b._vMin=void 0===b.isomin||null===b.isomin?g:b.isomin;b._vMax=void 0===b.isomax||null===b.isomin?e:b.isomax;n(a,b,{vals:[b._vMin,
b._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":599,"../streamtube/calc":1226}],1057:[function(a,q,p){function n(a,b,c){this.scene=a;this.uid=c;this.mesh=b;this.name="";this.data=null;this.showContour=!1}function k(a){function b(){xa=[];ya=[];sa=[];W=[];X=U=0}function c(a,b,c,d){xa.push(a);ya.push(b);sa.push(c);W.push(d);U++;return U-1}function e(a,b,c){for(var d=[],e=0;e<a.length;e++)d[e]=a[e]*(1-c)+c*b[e];return d}function f(a,b){return"all"===a||null===a?!0:-1<a.indexOf(b)}
function g(b,d,f){X=U;var g=[d];var h=[f];if(1<=za)g=[d],h=[f];else if(0<za){var k=f;g=d[0];h=d[1];d=d[2];for(var l=[],m=0;m<g.length;m++)l[m]=(g[m]+h[m]+d[m])/3;var n=Math.sqrt(1-za);m=e(l,g,n);f=e(l,h,n);var r=e(l,d,n);l=k[0];n=k[1];k=k[2];d=[[g,h,f],[f,m,g],[h,d,r],[r,f,h],[d,g,m],[m,r,d]];h=[[l,n,-1],[-1,-1,l],[n,k,-1],[-1,-1,n],[k,l,-1],[-1,-1,k]];g=d}for(k=0;k<g.length;k++){d=g[k];f=h[k];m=[];for(l=0;3>l;l++){var t=d[l][0],p=d[l][1];r=d[l][2];n=d[l][3];if(-1<f[l])var q=f[l];else a:{q=W.length;
for(var u=X;u<q;u++)if(t===xa[u]&&p===ya[u]&&r===sa[u]){q=u;break a}q=-1}-1<q?m[l]=q:(q=m,u=l,n=null===b?n:b,q[u]=c(t,p,r,n))}d=m[1];f=m[2];a._meshI.push(m[0]);a._meshJ.push(d);a._meshK.push(f);R++}}function h(a,b,c){var d=function(d,e,f){g(a,[b[d],b[e],b[f]],[c[d],c[e],c[f]])};d(0,1,2);d(2,3,0)}function k(a,b,c){var d=function(d,e,f){g(a,[b[d],b[e],b[f]],[c[d],c[e],c[f]])};d(0,1,2);d(3,0,1);d(2,3,0);d(1,2,3)}function m(a,b,c,d){var e=a[3];e<c&&(e=c);e>d&&(e=d);c=(a[3]-e)/(a[3]-b[3]+1E-9);d=[];for(e=
0;4>e;e++)d[e]=(1-c)*a[e]+c*b[e];return d}function n(a,b,c){return a>=b&&a<=c}function p(a){var b=.001*(ia-ka);return a>=ka-b&&a<=ia+b}function q(b){for(var c=[],d=0;4>d;d++){var e=b[d];c.push([a._x[e],a._y[e],a._z[e],a._value[e]])}return c}function B(a,b,c,d,e,f){f||(f=1);c=[-1,-1,-1];var h=!1,k=[n(b[0][3],d,e),n(b[1][3],d,e),n(b[2][3],d,e)];if(!k[0]&&!k[1]&&!k[2])return!1;var l=function(a,b,c){return p(b[0][3])&&p(b[1][3])&&p(b[2][3])?(g(a,b,c),!0):3>f?B(a,b,c,ka,ia,++f):!1};if(k[0]&&k[1]&&k[2])return l(a,
b,c)||h;var r=!1;[[0,1,2],[2,0,1],[1,2,0]].forEach(function(f){if(k[f[0]]&&k[f[1]]&&!k[f[2]]){var g=b[f[0]],n=b[f[1]],t=b[f[2]],p=m(t,g,d,e);t=m(t,n,d,e);h=l(a,[t,p,g],[-1,-1,c[f[0]]])||h;h=l(a,[g,n,t],[c[f[0]],c[f[1]],-1])||h;r=!0}});if(r)return h;[[0,1,2],[1,2,0],[2,0,1]].forEach(function(f){if(k[f[0]]&&!k[f[1]]&&!k[f[2]]){var g=b[f[0]],n=b[f[2]],t=m(b[f[1]],g,d,e);n=m(n,g,d,e);h=l(a,[n,t,g],[-1,-1,c[f[0]]])||h;r=!0}});return h}function D(a,b,c,d){var e=!1,f=q(b),l=[n(f[0][3],c,d),n(f[1][3],c,d),
n(f[2][3],c,d),n(f[3][3],c,d)];if(!(l[0]||l[1]||l[2]||l[3]))return e;if(l[0]&&l[1]&&l[2]&&l[3])return Z&&(e=k(a,f,b)||e),e;var r=!1;[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(h){if(l[h[0]]&&l[h[1]]&&l[h[2]]&&!l[h[3]]){var k=f[h[0]],n=f[h[1]],t=f[h[2]],p=f[h[3]];Z?e=g(a,[k,n,t],[b[h[0]],b[h[1]],b[h[2]]])||e:(h=m(p,k,c,d),n=m(p,n,c,d),t=m(p,t,c,d),e=g(null,[h,n,t],[-1,-1,-1])||e);r=!0}});if(r)return e;[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(k){if(l[k[0]]&&
l[k[1]]&&!l[k[2]]&&!l[k[3]]){var n=f[k[0]],t=f[k[1]],p=f[k[2]],q=f[k[3]],u=m(p,n,c,d);p=m(p,t,c,d);var v=m(q,t,c,d);q=m(q,n,c,d);Z?(e=g(a,[n,q,u],[b[k[0]],-1,-1])||e,e=g(a,[t,p,v],[b[k[1]],-1,-1])||e):e=h(null,[u,p,v,q],[-1,-1,-1,-1])||e;r=!0}});if(r)return e;[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(h){if(l[h[0]]&&!l[h[1]]&&!l[h[2]]&&!l[h[3]]){var k=f[h[0]],n=f[h[2]],t=f[h[3]],p=m(f[h[1]],k,c,d);n=m(n,k,c,d);t=m(t,k,c,d);Z?(e=g(a,[k,p,n],[b[h[0]],-1,-1])||e,e=g(a,[k,n,t],[b[h[0]],
-1,-1])||e,e=g(a,[k,t,p],[b[h[0]],-1,-1])||e):e=g(null,[p,n,t],[-1,-1,-1])||e;r=!0}});return e}function G(a,b,c,d,e,g,h,k,l,m,n){var r=!1;ca&&(f(a,"A")&&(r=D(null,[b,c,d,g],m,n)||r),f(a,"B")&&(r=D(null,[c,d,e,l],m,n)||r),f(a,"C")&&(r=D(null,[c,g,h,l],m,n)||r),f(a,"D")&&(r=D(null,[d,g,k,l],m,n)||r),f(a,"E")&&(r=D(null,[c,d,g,l],m,n)||r));Z&&(r=D(a,[c,d,g,l],m,n)||r);return r}function E(a,b,c,d,e,f,g,h){return[!0===h[0]?!0:B(a,q([b,c,d]),[b,c,d],f,g),!0===h[1]?!0:B(a,q([d,e,b]),[d,e,b],f,g)]}function F(a,
b,c,d,e,f,g,h,k){return h?E(a,b,c,e,d,f,g,k):E(a,c,e,d,b,f,g,k)}function L(a,b,c,d,f,g,h){var k=!1,l=function(){k=B(a,[r,t,p],[-1,-1,-1],f,g)||k;k=B(a,[p,u,r],[-1,-1,-1],f,g)||k},m=h[0],n=h[1];h=h[2];if(m){var r=e(q([ha(b,c-0,d-0)])[0],q([ha(b-1,c-0,d-0)])[0],m);var t=e(q([ha(b,c-0,d-1)])[0],q([ha(b-1,c-0,d-1)])[0],m);var p=e(q([ha(b,c-1,d-1)])[0],q([ha(b-1,c-1,d-1)])[0],m);var u=e(q([ha(b,c-1,d-0)])[0],q([ha(b-1,c-1,d-0)])[0],m);l()}n&&(r=e(q([ha(b-0,c,d-0)])[0],q([ha(b-0,c-1,d-0)])[0],n),t=e(q([ha(b-
0,c,d-1)])[0],q([ha(b-0,c-1,d-1)])[0],n),p=e(q([ha(b-1,c,d-1)])[0],q([ha(b-1,c-1,d-1)])[0],n),u=e(q([ha(b-1,c,d-0)])[0],q([ha(b-1,c-1,d-0)])[0],n),l());h&&(r=e(q([ha(b-0,c-0,d)])[0],q([ha(b-0,c-0,d-1)])[0],h),t=e(q([ha(b-0,c-1,d)])[0],q([ha(b-0,c-1,d-1)])[0],h),p=e(q([ha(b-1,c-1,d)])[0],q([ha(b-1,c-1,d-1)])[0],h),u=e(q([ha(b-1,c-0,d)])[0],q([ha(b-1,c-0,d-1)])[0],h),l());return k}function J(a,b,c,d,e){for(var f=[],g=0,h=0;h<b.length;h++)for(var k=b[h],l=1;l<aa;l++)for(var m=1;m<ma;m++)f.push(F(a,ha(k,
m-1,l-1),ha(k,m-1,l),ha(k,m,l-1),ha(k,m,l),c,d,(k+m+l)%2,e&&e[g]?e[g]:[])),g++;return f}function H(a,b,c,d,e){for(var f=[],g=0,h=0;h<b.length;h++)for(var k=b[h],l=1;l<da;l++)for(var m=1;m<aa;m++)f.push(F(a,ha(l-1,k,m-1),ha(l,k,m-1),ha(l-1,k,m),ha(l,k,m),c,d,(l+k+m)%2,e&&e[g]?e[g]:[])),g++;return f}function K(a,b,c,d,e){for(var f=[],g=0,h=0;h<b.length;h++)for(var k=b[h],l=1;l<ma;l++)for(var m=1;m<da;m++)f.push(F(a,ha(m-1,l-1,k),ha(m-1,l,k),ha(m,l-1,k),ha(m,l,k),c,d,(m+l+k)%2,e&&e[g]?e[g]:[])),g++;
return f}function M(a,b,c){for(var d=1;d<aa;d++)for(var e=1;e<ma;e++)for(var f=1;f<da;f++){var g=a,h=ha(f-1,e-1,d-1),k=ha(f-1,e-1,d),l=ha(f-1,e,d-1),m=ha(f-1,e,d),n=ha(f,e-1,d-1),r=ha(f,e-1,d),t=ha(f,e,d-1),p=ha(f,e,d),q=b,u=c,v=g;(f+e+d)%2?(ca&&"even"===g&&(v=null),G(v,h,k,l,m,n,r,t,p,q,u)):(ca&&"odd"===g&&(v=null),G(v,p,t,r,n,m,l,k,h,q,u))}}function I(a,b,c){Z=!0;M(a,b,c);Z=!1}function N(a,b,c){ca=!0;M(a,b,c);ca=!1}function O(a,b){for(var c=[];a<b;a++)c.push(a);return c}function P(){for(var b=0;b<
da;b++)for(var d=0;d<ma;d++)for(var e=0;e<aa;e++){var f=ha(b,d,e);c(a._x[f],a._y[f],a._z[f],a._value[f])}}a._meshI=[];a._meshJ=[];a._meshK=[];var Q=a.surface.show,T=a.spaceframe.show,V=a.surface.fill,Y=a.spaceframe.fill,ca=!1,Z=!1,R=0,U,X,ea=a._Xs,fa=a._Ys,la=a._Zs,da=ea.length,ma=fa.length,aa=la.length,na=l.indexOf(a._gridFill.replace(/-/g,"").replace(/\+/g,"")),ha=function(a,b,c){switch(na){case 5:return c+aa*b+aa*ma*a;case 4:return c+aa*a+aa*da*b;case 3:return b+ma*c+ma*aa*a;case 2:return b+ma*
a+ma*da*c;case 1:return a+da*c+da*aa*b;default:return a+da*b+da*ma*c}},ja=a._minValues,oa=a._maxValues,ka=a._vMin,ia=a._vMax,xa,ya,sa,W,za;(function(){b();P();T&&Y&&(za=Y,I(null,ka,ia));if(Q&&V){za=V;for(var c=a.surface.pattern,d=a.surface.count,e=0;e<d;e++){var f=1===d?.5:e/(d-1);f=(1-f)*ka+f*ia;f=Math.abs(f-ja)>Math.abs(f-oa)?[ja,f]:[f,oa];N(c,f[0],f[1])}}var g=[[Math.min(ka,oa),Math.max(ka,oa)],[Math.min(ja,ia),Math.max(ja,ia)]];["x","y","z"].forEach(function(b){for(var c=[],d=0;d<g.length;d++){var e=
0,f=g[d][0],h=g[d][1],k=a.slices[b];if(k.show&&k.fill){za=k.fill;var l=[],m=[],n=[];if(k.locations.length)for(var r=0;r<k.locations.length;r++){var p=t(k.locations[r],"x"===b?ea:"y"===b?fa:la);0===p.distRatio?l.push(p.id):0<p.id&&(m.push(p.id),"x"===b?n.push([p.distRatio,0,0]):"y"===b?n.push([0,p.distRatio,0]):n.push([0,0,p.distRatio]))}else l="x"===b?O(1,da-1):"y"===b?O(1,ma-1):O(1,aa-1);if(0<m.length){if("x"===b){k=e;r=f;p=h;for(var q=c[e],u=[],v=0,w=0;w<m.length;w++)for(var x=m[w],z=1;z<aa;z++)for(var y=
1;y<ma;y++)u.push(L(null,x,y,z,r,p,n[w],q&&q[v]?q[v]:[])),v++;c[k]=u}else if("y"===b){k=e;r=f;p=h;q=c[e];u=[];for(w=v=0;w<m.length;w++)for(x=m[w],z=1;z<da;z++)for(y=1;y<aa;y++)u.push(L(null,z,x,y,r,p,n[w],q&&q[v]?q[v]:[])),v++;c[k]=u}else{k=e;r=f;p=h;q=c[e];u=[];for(w=v=0;w<m.length;w++)for(x=m[w],z=1;z<ma;z++)for(y=1;y<da;y++)u.push(L(null,y,z,x,r,p,n[w],q&&q[v]?q[v]:[])),v++;c[k]=u}e++}0<l.length&&(c[e]="x"===b?J(null,l,f,h,c[e]):"y"===b?H(null,l,f,h,c[e]):K(null,l,f,h,c[e]),e++)}l=a.caps[b];l.show&&
l.fill&&(za=l.fill,c[e]="x"===b?J(null,[0,da-1],f,h,c[e]):"y"===b?H(null,[0,ma-1],f,h,c[e]):K(null,[0,aa-1],f,h,c[e]))}});0===R&&b();a._meshX=xa;a._meshY=ya;a._meshZ=sa;a._meshIntensity=W;a._Xs=ea;a._Ys=fa;a._Zs=la})();return a}var m=a("gl-mesh3d"),h=a("../../lib/gl_format_color").parseColorScale,b=a("../../lib/str2rgbarray"),g=a("../../components/colorscale").extractOpts,e=a("../../plots/gl3d/zip3"),t=function(a,b){for(var c=b.length-1;0<c;c--){var d=Math.min(b[c],b[c-1]),e=Math.max(b[c],b[c-1]);
if(e>d&&d<a&&a<=e)return{id:c,distRatio:(e-a)/(e-d)}}return{id:0,distRatio:0}};a=n.prototype;a.handlePick=function(a){if(a.object===this.mesh){var b=a.data.index,c=this.data._meshY[b],e=this.data._meshZ[b],f=this.data._Ys.length,g=this.data._Zs.length;b=t(this.data._meshX[b],this.data._Xs).id;c=t(c,this.data._Ys).id;e=t(e,this.data._Zs).id;f=a.index=e+g*c+g*f*b;a.traceCoordinate=[this.data._meshX[f],this.data._meshY[f],this.data._meshZ[f],this.data._value[f]];g=this.data.hovertext||this.data.text;
Array.isArray(g)&&void 0!==g[f]?a.textLabel=g[f]:g&&(a.textLabel=g);return!0}};a.update=function(a){function d(a,b,c,d){return b.map(function(b){return a.d2l(b,0,d)*c})}var c=this.scene,f=c.fullSceneLayout;this.data=k(a);c=e(d(f.xaxis,a._meshX,c.dataScale[0],a.xcalendar),d(f.yaxis,a._meshY,c.dataScale[1],a.ycalendar),d(f.zaxis,a._meshZ,c.dataScale[2],a.zcalendar));f=e(a._meshI,a._meshJ,a._meshK);c={positions:c,cells:f,lightPosition:[a.lightposition.x,a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,
diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,contourEnable:a.contour.show,contourColor:b(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading};f=g(a);c.vertexIntensity=a._meshIntensity;c.vertexIntensityBounds=[f.min,f.max];c.colormap=h(a);this.mesh.update(c)};a.dispose=function(){this.scene.glplot.remove(this.mesh);
this.mesh.dispose()};var l="xyz xzy yxz yzx zxy zyx".split(" ");q.exports={findNearestOnAxis:t,generateIsoMeshes:k,createIsosurfaceTrace:function(a,b){var c=m({gl:a.glplot.gl}),d=new n(a,c,b.uid);c._trace=d;d.update(b);a.glplot.add(c);return d}}},{"../../components/colorscale":603,"../../lib/gl_format_color":713,"../../lib/str2rgbarray":739,"../../plots/gl3d/zip3":815,"gl-mesh3d":283}],1058:[function(a,q,p){function n(a,e,h,k,f){h=f("isomin");var d=f("isomax");void 0!==d&&null!==d&&void 0!==h&&null!==
h&&h>d&&(e.isomin=null,e.isomax=null);h=f("x");d=f("y");var c=f("z"),g=f("value");h&&h.length&&d&&d.length&&c&&c.length&&g&&g.length?(m.getComponentMethod("calendars","handleTraceDefaults")(a,e,["x","y","z"],k),["x","y","z"].forEach(function(a){var b="caps."+a;f(b+".show")&&f(b+".fill");a="slices."+a;f(a+".show")&&(f(a+".fill"),f(a+".locations"))}),f("spaceframe.show")&&f("spaceframe.fill"),f("surface.show")&&(f("surface.count"),f("surface.fill"),f("surface.pattern")),f("contour.show")&&(f("contour.color"),
f("contour.width")),"text hovertext hovertemplate lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lighting.vertexnormalsepsilon lighting.facenormalsepsilon lightposition.x lightposition.y lightposition.z flatshading opacity".split(" ").forEach(function(a){f(a)}),b(a,e,k,f,{prefix:"",cLetter:"c"}),e._length=null):e.visible=!1}var k=a("../../lib"),m=a("../../registry"),h=a("./attributes"),b=a("../../components/colorscale/defaults");q.exports={supplyDefaults:function(a,
b,m,l){n(a,b,m,l,function(e,d){return k.coerce(a,b,h,e,d)})},supplyIsoDefaults:n}},{"../../components/colorscale/defaults":601,"../../lib":716,"../../registry":845,"./attributes":1055}],1059:[function(a,q,p){q.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults").supplyDefaults,calc:a("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:a("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:a("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},
{"../../plots/gl3d":804,"./attributes":1055,"./calc":1056,"./convert":1057,"./defaults":1058}],1060:[function(a,q,p){p=a("../../components/colorscale/attributes");var n=a("../../plots/template_attributes").hovertemplateAttrs,k=a("../surface/attributes"),m=a("../../plots/attributes");a=a("../../lib/extend").extendFlat;q.exports=a({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",
editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:n({editType:"calc"}),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],
dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},p("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:k.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:a({},k.contours.x.show,{}),color:k.contours.x.color,width:k.contours.x.width,editType:"calc"},lightposition:{x:a({},k.lightposition.x,{dflt:1E5}),y:a({},
k.lightposition.y,{dflt:1E5}),z:a({},k.lightposition.z,{dflt:0}),editType:"calc"},lighting:a({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1E-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1E-6,editType:"calc"},editType:"calc"},k.lighting),hoverinfo:a({},m.hoverinfo,{editType:"calc"}),showlegend:a({},m.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":598,"../../lib/extend":707,"../../plots/attributes":761,"../../plots/template_attributes":840,
"../surface/attributes":1242}],1061:[function(a,q,p){var n=a("../../components/colorscale/calc");q.exports=function(a,m){m.intensity&&n(a,m,{vals:m.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":599}],1062:[function(a,q,p){function n(a,b,c){this.scene=a;this.uid=c;this.mesh=b;this.name="";this.color="#fff";this.data=null;this.showContour=!1}function k(a){for(var b=[],c=a.length,e=0;e<c;e++)b[e]=d(a[e]);return b}function m(a,b,c,d){for(var e=[],f=b.length,g=0;g<f;g++)e[g]=
a.d2l(b[g],0,d)*c;return e}function h(a){for(var b=[],c=a.length,d=0;d<c;d++)b[d]=Math.round(a[d]);return b}function b(a,b){for(var c=a.length,d=0;d<c;d++)if(-.5>=a[d]||a[d]>=b-.5)return!1;return!0}var g=a("gl-mesh3d"),e=a("delaunay-triangulate"),t=a("alpha-shape"),l=a("convex-hull"),f=a("../../lib/gl_format_color").parseColorScale,d=a("../../lib/str2rgbarray"),c=a("../../components/colorscale").extractOpts,r=a("../../plots/gl3d/zip3");a=n.prototype;a.handlePick=function(a){if(a.object===this.mesh){var b=
a.index=a.data.index;a.traceCoordinate=a.data._cellCenter?a.data.dataCoordinate:[this.data.x[b],this.data.y[b],this.data.z[b]];var c=this.data.hovertext||this.data.text;Array.isArray(c)&&void 0!==c[b]?a.textLabel=c[b]:c&&(a.textLabel=c);return!0}};a.update=function(a){var g=this.scene,n=g.fullSceneLayout;this.data=a;var p=a.x.length;g=r(m(n.xaxis,a.x,g.dataScale[0],a.xcalendar),m(n.yaxis,a.y,g.dataScale[1],a.ycalendar),m(n.zaxis,a.z,g.dataScale[2],a.zcalendar));if(a.i&&a.j&&a.k){if(a.i.length!==a.j.length||
a.j.length!==a.k.length||!b(a.i,p)||!b(a.j,p)||!b(a.k,p))return;p=r(h(a.i),h(a.j),h(a.k))}else if(0===a.alphahull)p=l(g);else if(0<a.alphahull)p=t(a.alphahull,g);else{p=["x","y","z"].indexOf(a.delaunayaxis);n=[];for(var q=g.length,u=0;u<q;u++)n[u]=[g[u][(p+1)%3],g[u][(p+2)%3]];p=e(n)}g={positions:g,cells:p,lightPosition:[a.lightposition.x,a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,
vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,contourEnable:a.contour.show,contourColor:d(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading};a.intensity?(p=c(a),this.color="#fff",n=a.intensitymode,g[n+"Intensity"]=a.intensity,g[n+"IntensityBounds"]=[p.min,p.max],g.colormap=f(a)):a.vertexcolor?(this.color=a.vertexcolor[0],g.vertexColors=k(a.vertexcolor)):a.facecolor?(this.color=a.facecolor[0],
g.cellColors=k(a.facecolor)):(this.color=a.color,g.meshColor=d(a.color));this.mesh.update(g)};a.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};q.exports=function(a,b){var c=g({gl:a.glplot.gl}),d=new n(a,c,b.uid);c._trace=d;d.update(b);a.glplot.add(c);return d}},{"../../components/colorscale":603,"../../lib/gl_format_color":713,"../../lib/str2rgbarray":739,"../../plots/gl3d/zip3":815,"alpha-shape":67,"convex-hull":132,"delaunay-triangulate":167,"gl-mesh3d":283}],1063:[function(a,
q,p){var n=a("../../registry"),k=a("../../lib"),m=a("../../components/colorscale/defaults"),h=a("./attributes");q.exports=function(a,g,e,t){function b(b,c){return k.coerce(a,g,h,b,c)}function f(a){var c=a.map(function(a){return(a=b(a))&&k.isArrayOrTypedArray(a)?a:null});return c.every(function(a){return a&&a.length===c[0].length})&&c}f(["x","y","z"])?(f(["i","j","k"]),(!g.i||g.j&&g.k)&&(!g.j||g.k&&g.i)&&(!g.k||g.i&&g.j)?(n.getComponentMethod("calendars","handleTraceDefaults")(a,g,["x","y","z"],t),
"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lighting.vertexnormalsepsilon lighting.facenormalsepsilon lightposition.x lightposition.y lightposition.z flatshading alphahull delaunayaxis opacity".split(" ").forEach(function(a){b(a)}),b("contour.show")&&(b("contour.color"),b("contour.width")),"intensity"in a?(b("intensity"),b("intensitymode"),m(a,g,t,b,{prefix:"",cLetter:"c"})):(g.showscale=!1,"facecolor"in a?b("facecolor"):"vertexcolor"in a?b("vertexcolor"):
b("color",e)),b("text"),b("hovertext"),b("hovertemplate"),g._length=null):g.visible=!1):g.visible=!1}},{"../../components/colorscale/defaults":601,"../../lib":716,"../../registry":845,"./attributes":1060}],1064:[function(a,q,p){q.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),calc:a("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:a("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:a("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":804,
"./attributes":1060,"./calc":1061,"./convert":1062,"./defaults":1063}],1065:[function(a,q,p){function n(a){return{line:{color:k({},g.color,{dflt:a}),width:g.width,dash:m,editType:"style"},editType:"style"}}var k=a("../../lib").extendFlat;p=a("../scatter/attributes");var m=a("../../components/drawing/attributes").dash,h=a("../../components/fx/attributes"),b=a("../../constants/delta.js");a=b.INCREASING.COLOR;b=b.DECREASING.COLOR;var g=p.line;q.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},
open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:k({},g.width,{}),dash:k({},m,{}),editType:"style"},increasing:n(a),decreasing:n(b),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:k({},h.hoverlabel,{split:{valType:"boolean",
dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":611,"../../components/fx/attributes":621,"../../constants/delta.js":686,"../../lib":716,"../scatter/attributes":1119}],1066:[function(a,q,p){function n(a,b,g,f){return{o:a,h:b,l:g,c:f}}function k(a,k,l,f,d){for(var c=f.makeCalcdata(k,"open"),e=f.makeCalcdata(k,"high"),n=f.makeCalcdata(k,"low"),t=f.makeCalcdata(k,"close"),p=Array.isArray(k.text),q=Array.isArray(k.hovertext),A=!0,z=null,x=[],C=0;C<l.length;C++){var B=l[C],D=c[C],G=
e[C],E=n[C],F=t[C];if(B!==g&&D!==g&&G!==g&&E!==g&&F!==g){F===D?null!==z&&F!==z&&(A=F>z):A=F>D;z=F;var L=d(D,G,E,F);L.pos=B;L.yc=(D+F)/2;L.i=C;L.dir=A?"increasing":"decreasing";L.x=L.pos;L.y=[E,G];p&&(L.tx=k.text[C]);q&&(L.htx=k.hovertext[C]);x.push(L)}else x.push({pos:B,empty:!0})}k._extremes[f._id]=b.findExtremes(f,m.concat(n,e),{padded:!0});x.length&&(x[0].t={labels:{open:h(a,"open:")+" ",high:h(a,"high:")+" ",low:h(a,"low:")+" ",close:h(a,"close:")+" "}});return x}var m=a("../../lib"),h=m._,b=
a("../../plots/cartesian/axes"),g=a("../../constants/numerical").BADNUM;q.exports={calc:function(a,g){var e=b.getFromId(a,g.xaxis),f=b.getFromId(a,g.yaxis);var d=g._minDiff;if(!d){var c=a._fullData,h=[];d=Infinity;var t;for(t=0;t<c.length;t++){var p=c[t];if("ohlc"===p.type&&!0===p.visible&&p.xaxis===e._id){h.push(p);var q=e.makeCalcdata(p,"x");p._xcalc=q;(p=m.distinctVals(q).minDiff)&&isFinite(p)&&(d=Math.min(d,p))}}Infinity===d&&(d=1);for(t=0;t<h.length;t++)h[t]._minDiff=d}d*=g.tickwidth;c=g._minDiff;
g._minDiff=null;h=g._xcalc;g._xcalc=null;a=k(a,g,h,f,n);g._extremes[e._id]=b.findExtremes(e,h,{vpad:c/2});return a.length?(m.extendFlat(a[0].t,{wHover:c/2,tickLen:d}),a):[{t:{empty:!0}}]},calcCommon:k}},{"../../constants/numerical":692,"../../lib":716,"../../plots/cartesian/axes":764}],1067:[function(a,q,p){function n(a,g,e,h){e(h+".line.color");e(h+".line.width",g.line.width);e(h+".line.dash",g.line.dash)}var k=a("../../lib"),m=a("./ohlc_defaults"),h=a("./attributes");q.exports=function(a,g,e,t){function b(b,
d){return k.coerce(a,g,h,b,d)}m(a,g,b,t)?(b("line.width"),b("line.dash"),n(a,g,b,"increasing"),n(a,g,b,"decreasing"),b("text"),b("hovertext"),b("tickwidth"),t._requestRangeslider[g.xaxis]=!0):g.visible=!1}},{"../../lib":716,"./attributes":1065,"./ohlc_defaults":1070}],1068:[function(a,q,p){function n(a,b,c,h){function d(a){a=a.pos+G-b;return g.inbox(a-E,a+E,F)}function f(a){var b=a[p];a=a[q];return b===a||g.inbox(b-c,a-c,F)}function k(a){return(d(a)+f(a))/2}var l=a.cd,m=a.xa,n=l[0].trace,r=l[0].t,
t=n.type,p="ohlc"===t?"l":"min",q="ohlc"===t?"h":"max",G=r.bPos||0;t=r.bdPos||r.tickLen;var E=r.wHover;r=Math.min(1,t/Math.abs(m.r2c(m.range[1])-m.r2c(m.range[0])));var F=a.maxHoverDistance-r;r=a.maxSpikeDistance-r;h=g.getDistanceFunction(h,d,f,k);g.getClosest(l,h,a);if(!1===a.index)return null;l=l[a.index];if(l.empty)return null;n=n[l.dir];h=n.line.color;e.opacity(h)&&n.line.width?a.color=h:a.color=n.fillcolor;a.x0=m.c2p(l.pos+G-t,!0);a.x1=m.c2p(l.pos+G+t,!0);a.xLabelVal=l.pos;a.spikeDistance=k(l)*
r/F;a.xSpike=m.c2p(l.pos,!0);return a}function k(a,d,c,e){var f=a.cd,g=a.ya,k=f[0].trace,l=f[0].t,m=[];a=n(a,d,c,e);if(!a)return[];f=f[a.index].hi||k.hoverinfo;d=f.split("+");if("all"!==f&&-1===d.indexOf("y"))return[];f=["high","open","close","low"];d={};for(c=0;c<f.length;c++){e=f[c];var r=k[e][a.index],t=g.c2p(r,!0);if(r in d){var p=d[r];p.yLabel+="\x3cbr\x3e"+l.labels[e]+h.hoverLabelText(g,r)}else p=b.extendFlat({},a),p.y0=p.y1=t,p.yLabelVal=r,p.yLabel=l.labels[e]+h.hoverLabelText(g,r),p.name=
"",m.push(p),d[r]=p}return m}function m(a,b,c,e){function d(a){return m.labels[a]+h.hoverLabelText(g,k[a][r])}var f=a.cd,g=a.ya,k=f[0].trace,m=f[0].t;a=n(a,b,c,e);if(!a)return[];f=f[a.index];var r=a.index=f.i;b=f.dir;e=f.hi||k.hoverinfo;c=e.split("+");var p="all"===e;e=p||-1!==c.indexOf("y");c=p||-1!==c.indexOf("text");b=e?[d("open"),d("high"),d("low"),d("close")+"  "+l[b]]:[];c&&t(f,k,b);a.extraText=b.join("\x3cbr\x3e");a.y0=a.y1=g.c2p(f.yc,!0);return[a]}var h=a("../../plots/cartesian/axes"),b=a("../../lib"),
g=a("../../components/fx"),e=a("../../components/color"),t=a("../../lib").fillText;a=a("../../constants/delta.js");var l={increasing:a.INCREASING.SYMBOL,decreasing:a.DECREASING.SYMBOL};q.exports={hoverPoints:function(a,b,c,e){return a.cd[0].trace.hoverlabel.split?k(a,b,c,e):m(a,b,c,e)},hoverSplit:k,hoverOnPoints:m}},{"../../components/color":591,"../../components/fx":629,"../../constants/delta.js":686,"../../lib":716,"../../plots/cartesian/axes":764}],1069:[function(a,q,p){q.exports={moduleType:"trace",
name:"ohlc",basePlotModule:a("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:a("./attributes"),supplyDefaults:a("./defaults"),calc:a("./calc").calc,plot:a("./plot"),style:a("./style"),hoverPoints:a("./hover").hoverPoints,selectPoints:a("./select")}},{"../../plots/cartesian":775,"./attributes":1065,"./calc":1066,"./defaults":1067,"./hover":1068,"./plot":1071,"./select":1072,"./style":1073}],1070:[function(a,q,p){var n=a("../../registry"),k=a("../../lib");q.exports=
function(a,h,b,g){var e=b("x"),m=b("open"),l=b("high"),f=b("low"),d=b("close");b("hoverlabel.split");n.getComponentMethod("calendars","handleTraceDefaults")(a,h,["x"],g);if(m&&l&&f&&d)return a=Math.min(m.length,l.length,f.length,d.length),e&&(a=Math.min(a,k.minRowLength(e))),h._length=a}},{"../../lib":716,"../../registry":845}],1071:[function(a,q,p){var n=a("d3"),k=a("../../lib");q.exports=function(a,h,b,g){var e=h.xaxis,m=h.yaxis;k.makeTraceGroups(g,b,"trace ohlc").each(function(a){var b=n.select(this);
a=a[0];var d=a.t;if(!0!==a.trace.visible||d.empty)b.remove();else{var c=d.tickLen;b=b.selectAll("path").data(k.identity);b.enter().append("path");b.exit().remove();b.attr("d",function(a){if(a.empty)return"M0,0Z";var b=e.c2p(a.pos,!0),d=e.c2p(a.pos-c,!0),f=e.c2p(a.pos+c,!0),g=m.c2p(a.o,!0),h=m.c2p(a.h,!0),k=m.c2p(a.l,!0);a=m.c2p(a.c,!0);return"M"+d+","+g+"H"+b+"M"+b+","+h+"V"+k+"M"+f+","+a+"H"+b})}})}},{"../../lib":716,d3:165}],1072:[function(a,q,p){q.exports=function(a,k){var m=a.cd,h=a.xaxis,b=a.yaxis,
g=[],e,n=m[0].t.bPos||0;if(!1===k)for(e=0;e<m.length;e++)m[e].selected=0;else for(e=0;e<m.length;e++){var l=m[e];k.contains([h.c2p(l.pos+n),b.c2p(l.yc)],null,l.i,a)?(g.push({pointNumber:l.i,x:h.c2d(l.pos),y:b.c2d(l.yc)}),l.selected=1):l.selected=0}return g}},{}],1073:[function(a,q,p){var n=a("d3"),k=a("../../components/drawing"),m=a("../../components/color");q.exports=function(a,b,g){a=g?g:n.select(a).selectAll("g.ohlclayer").selectAll("g.trace");a.style("opacity",function(a){return a[0].trace.opacity});
a.each(function(a){var b=a[0].trace;n.select(this).selectAll("path").each(function(a){if(!a.empty){var e=b[a.dir].line;n.select(this).style("fill","none").call(m.stroke,e.color).call(k.dashLine,e.dash,e.width).style("opacity",b.selectedpoints&&!a.selected?.3:1)}})})}},{"../../components/color":591,"../../components/drawing":612,d3:165}],1074:[function(a,q,p){p=a("../../lib/extend").extendFlat;var n=a("../../plots/attributes"),k=a("../../plots/font_attributes"),m=a("../../components/colorscale/attributes"),
h=a("../../plots/template_attributes").hovertemplateAttrs;a=a("../../plots/domain").attributes;m=p({editType:"calc"},m("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:h({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});q.exports={domain:a({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:p({},n.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category",
"color","dimension"],dflt:"category",editType:"plot"},hovertemplate:h({editType:"plot",arrayOk:!1},{keys:"count probability category categorycount colorcount bandcolorcount".split(" ")}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:k({editType:"calc"}),tickfont:k({editType:"calc"}),
dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:m,counts:{valType:"number",
min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":598,"../../lib/extend":707,"../../plots/attributes":761,"../../plots/domain":789,"../../plots/font_attributes":790,"../../plots/template_attributes":840}],1075:[function(a,q,p){var n=a("../../plots/get_data").getModuleCalcData,k=a("./plot");p.name="parcats";p.plot=function(a,h,b,g){h=n(a.calcdata,
"parcats");h.length&&k(a,h[0],b,g)};p.clean=function(a,h,b,g){a=g._has&&g._has("parcats");h=h._has&&h._has("parcats");a&&!h&&g._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":799,"./plot":1080}],1076:[function(a,q,p){function n(a,b,c){var d=a.map(function(a){return a.categories.length}).reduce(function(a,b){return Math.max(a,b)});return{dimensions:a,paths:b,trace:void 0,maxCats:d,count:c}}function k(a,b,c){a.valueInds.push(b);a.count+=c}function m(a,b,c){a.valueInds.push(b);a.count+=
c}function h(a,b){b=void 0===b||null===b?[]:b.map(function(a){return a});var c={},d={},e=[];b.forEach(function(a,b){c[a]=0;d[a]=b});for(var f=0;f<a.length;f++){var g=a[f];if(void 0===c[g]){c[g]=1;var h=b.push(g)-1;d[g]=h}else c[g]++,h=d[g];e.push(h)}a=b.map(function(a){return c[a]});return{uniqueValues:b,uniqueCounts:a,inds:e}}function b(a){var b=a.map(function(a){return a.displayindex});if(g(b))for(b=0;b<a.length;b++)a[b]._displayindex=a[b].displayindex;else for(b=0;b<a.length;b++)a[b]._displayindex=
b}function g(a){for(var b=Array(a.length),c=0;c<a.length;c++){if(0>a[c]||a[c]>=a.length||void 0!==b[a[c]])return!1;b[a[c]]=!0}return!0}var e=a("../../lib/gup").wrap,t=a("../../components/colorscale/helpers").hasColorscale,l=a("../../components/colorscale/calc"),f=a("../../lib/filter_unique.js"),d=a("../../components/drawing"),c=a("../../lib");q.exports=function(a,g){function r(a){if(c.isArrayOrTypedArray(z.color))var b=a=z.color[a%z.color.length];else a=z.color;return{color:x(a),rawColor:b}}var p=
c.filterVisible(g.dimensions);if(0===p.length)return[];var q=p.map(function(a){if("trace"===a.categoryorder)var b=null;else"array"===a.categoryorder?b=a.categoryarray:(b=f(a.values).sort(),"category descending"===a.categoryorder&&(b=b.reverse()));return h(a.values,b)});var u=c.isArrayOrTypedArray(g.counts)?g.counts:[g.counts];b(p);p.forEach(function(a,b){b=q[b];a._categoryarray=b.uniqueValues;a._ticktext=null===a.ticktext||void 0===a.ticktext?[]:a.ticktext.slice();for(var c=a._ticktext.length;c<b.uniqueValues.length;c++)a._ticktext.push(b.uniqueValues[c])});
var z=g.line;if(z){t(g,"line")&&l(a,g,{vals:g.line.color,containerStr:"line",cLetter:"c"});var x=d.tryColorscale(z)}else x=c.identity;var C=p[0].values.length,B={},D=q.map(function(a){return a.inds});var G=0;var E,F;for(E=0;E<C;E++){var L=[];for(F=0;F<D.length;F++)L.push(D[F][E]);a=u[E%u.length];G+=a;F=r(E);var J=L+"-"+F.rawColor;void 0===B[J]&&(B[J]={categoryInds:L,color:F.color,rawColor:F.rawColor,valueInds:[],count:0});m(B[J],E,a)}p=p.map(function(a,b){return{dimensionInd:b,containerInd:a._index,
displayInd:a._displayindex,dimensionLabel:a.label,count:G,categories:[],dragX:null}});for(E=0;E<C;E++)for(a=u[E%u.length],F=0;F<p.length;F++)D=p[F].containerInd,L=q[F].inds[E],J=p[F].categories,void 0===J[L]&&(J[L]={dimensionInd:F,categoryInd:L,categoryValue:g.dimensions[D]._categoryarray[L],displayInd:L,categoryLabel:g.dimensions[D]._ticktext[L],valueInds:[],count:0,dragY:null}),k(J[L],E,a);return e(n(p,B,G))}},{"../../components/colorscale/calc":599,"../../components/colorscale/helpers":602,"../../components/drawing":612,
"../../lib":716,"../../lib/filter_unique.js":708,"../../lib/gup":714}],1077:[function(a,q,p){function n(a,d,c,e,g){g("line.shape");g("line.hovertemplate");var f=g("line.color",e.colorway[0]);if(h(a,"line")&&m.isArrayOrTypedArray(f)){if(f.length)return g("line.colorscale"),b(a,d,e,g,{prefix:"line.",cLetter:"c"}),f.length;d.line.color=c}return Infinity}function k(a,b){function c(c,d){return m.coerce(a,b,t.dimensions,c,d)}var d=c("values"),e=c("visible");d&&d.length||(e=b.visible=!1);if(e){c("label");
c("displayindex",b._index);d=a.categoryarray;d=Array.isArray(d)&&0<d.length;var f;d&&(f="array");f=c("categoryorder",f);"array"===f?(c("categoryarray"),c("ticktext")):(delete a.categoryarray,delete a.ticktext);d||"array"!==f||(b.categoryorder="trace")}}var m=a("../../lib"),h=a("../../components/colorscale/helpers").hasColorscale,b=a("../../components/colorscale/defaults"),g=a("../../plots/domain").defaults,e=a("../../plots/array_container_defaults"),t=a("./attributes"),l=a("../parcoords/merge_length");
q.exports=function(a,b,c,h){function d(c,d){return m.coerce(a,b,t,c,d)}var f=e(a,b,{name:"dimensions",handleItemDefaults:k});c=n(a,b,c,h,d);g(b,h,d);Array.isArray(f)&&f.length||(b.visible=!1);l(b,f,"values",c);d("hoveron");d("hovertemplate");d("arrangement");d("bundlecolors");d("sortpaths");d("counts");m.coerceFont(d,"labelfont",{family:h.font.family,size:Math.round(h.font.size),color:h.font.color});m.coerceFont(d,"tickfont",{family:h.font.family,size:Math.round(h.font.size/1.2),color:h.font.color})}},
{"../../components/colorscale/defaults":601,"../../components/colorscale/helpers":602,"../../lib":716,"../../plots/array_container_defaults":760,"../../plots/domain":789,"../parcoords/merge_length":1090,"./attributes":1074}],1078:[function(a,q,p){q.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),calc:a("./calc"),plot:a("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:a("./base_plot"),categories:["noOpacity"],meta:{}}},
{"./attributes":1074,"./base_plot":1075,"./calc":1076,"./defaults":1077,"./plot":1080}],1079:[function(a,q,p){function n(a,d,e,n){a=a.map(K.bind(0,d,e));n=n.selectAll("g.parcatslayer").data([null]);n.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");n=n.selectAll("g.trace.parcats").data(a,k);a=n.enter().append("g").attr("class","trace parcats");n.attr("transform",function(a){return"translate("+a.x+", "+a.y+")"});a.append("g").attr("class","paths");e=n.select("g.paths").selectAll("path.path").data(function(a){return a.paths},
k);e.attr("fill",function(a){return a.model.color});var t=e.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(a){return a.model.color}).attr("fill-opacity",0);f(t);e.attr("d",function(a){return a.svgD});t.empty()||e.sort(h);e.exit().remove();e.on("mouseover",b).on("mouseout",g).on("click",l);a.append("g").attr("class","dimensions");a=n.select("g.dimensions").selectAll("g.dimension").data(function(a){return a.dimensions},k);a.enter().append("g").attr("class",
"dimension");a.attr("transform",function(a){return"translate("+a.x+", 0)"});a.exit().remove();e=a.selectAll("g.category").data(function(a){return a.categories},k);t=e.enter().append("g").attr("class","category");e.attr("transform",function(a){return"translate(0, "+a.y+")"});t.append("rect").attr("class","catrect").attr("pointer-events","none");e.select("rect.catrect").attr("fill","none").attr("width",function(a){return a.width}).attr("height",function(a){return a.height});c(t);var p=e.selectAll("rect.bandrect").data(function(a){return a.bands},
k);p.each(function(){V.raiseToTop(this)});p.attr("fill",function(a){return a.color});var q=p.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(a){return a.color}).attr("fill-opacity",0);p.attr("fill",function(a){return a.color}).attr("width",function(a){return a.width}).attr("height",function(a){return a.height}).attr("y",function(a){return a.y}).attr("cursor",function(a){return"fixed"===a.parcatsViewModel.arrangement?"default":"perpendicular"===a.parcatsViewModel.arrangement?
"ns-resize":"move"});r(q);p.exit().remove();t.append("text").attr("class","catlabel").attr("pointer-events","none");p=d._fullLayout.paper_bgcolor;e.select("text.catlabel").attr("text-anchor",function(a){return m(a)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",p+" -1px  1px 2px, "+p+" 1px  1px 2px, "+p+"  1px -1px 2px, "+p+" -1px -1px 2px").style("fill","rgb(0, 0, 0)").attr("x",function(a){return m(a)?a.width+5:-5}).attr("y",function(a){return a.height/2}).text(function(a){return a.model.categoryLabel}).each(function(a){Y.font(P.select(this),
a.parcatsViewModel.categorylabelfont);Z.convertToTspans(P.select(this),d)});t.append("text").attr("class","dimlabel");e.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(a){return"fixed"===a.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(a){return a.width/2}).attr("y",-5).text(function(a,b){return 0===b?a.parcatsViewModel.model.dimensions[a.model.dimensionInd].dimensionLabel:null}).each(function(a){Y.font(P.select(this),
a.parcatsViewModel.labelfont)});e.selectAll("rect.bandrect").on("mouseover",B).on("mouseout",D);e.exit().remove();a.call(P.behavior.drag().origin(function(a){return{x:a.x,y:0}}).on("dragstart",G).on("drag",E).on("dragend",F));n.each(function(a){a.traceSelection=P.select(this);a.pathSelection=P.select(this).selectAll("g.paths").selectAll("path.path");a.dimensionSelection=P.select(this).selectAll("g.dimensions").selectAll("g.dimension")});n.exit().remove()}function k(a){return a.key}function m(a){return a.model.dimensionInd===
a.parcatsViewModel.dimensions[a.parcatsViewModel.dimensions.length-1].model.dimensionInd}function h(a,b){return a.model.rawColor>b.model.rawColor?1:a.model.rawColor<b.model.rawColor?-1:0}function b(a){if(!a.parcatsViewModel.dragDimension&&-1===a.parcatsViewModel.hoverinfoItems.indexOf("skip")){V.raiseToTop(this);d(P.select(this));var b=e(a),c=t(a);a.parcatsViewModel.graphDiv.emit("plotly_hover",{points:b,event:P.event,constraints:c});if(-1===a.parcatsViewModel.hoverinfoItems.indexOf("none")){var f=
P.mouse(this)[0];b=a.parcatsViewModel.graphDiv;c=a.parcatsViewModel.trace;var g=b._fullLayout,h=g._paperdiv.node().getBoundingClientRect(),k=a.parcatsViewModel.graphDiv.getBoundingClientRect(),l;for(l=0;l<a.leftXs.length-1;l++)if(a.leftXs[l]+a.dimWidths[l]-2<=f&&f<=a.leftXs[l+1]+2){var m=a.parcatsViewModel.dimensions[l];m=(m.x+m.width+a.parcatsViewModel.dimensions[l+1].x)/2;var n=(a.topYs[l]+a.topYs[l+1]+a.height)/2;break}m=a.parcatsViewModel.x+m;n=a.parcatsViewModel.y+n;l=ca.mostReadable(a.model.color,
["black","white"]);f=a.model.count;var r=f/a.parcatsViewModel.model.count,p={countLabel:f,probabilityLabel:r.toFixed(3)},q=[];-1!==a.parcatsViewModel.hoverinfoItems.indexOf("count")&&q.push(["Count:",p.countLabel].join(" "));-1!==a.parcatsViewModel.hoverinfoItems.indexOf("probability")&&q.push(["P:",p.probabilityLabel].join(" "));q=q.join("\x3cbr\x3e");var u=P.mouse(b)[0];T.loneHover({trace:c,x:m-h.left+k.left,y:n-h.top+k.top,text:q,color:a.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',
fontSize:10,fontColor:l,idealAlign:u<m?"right":"left",hovertemplate:(c.line||{}).hovertemplate,hovertemplateLabels:p,eventData:[{data:c._input,fullData:c,count:f,probability:r}]},{container:g._hoverlayer.node(),outerContainer:g._paper.node(),gd:b})}}}function g(a){if(!a.parcatsViewModel.dragDimension&&(f(P.select(this)),T.loneUnhover(a.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),a.parcatsViewModel.pathSelection.sort(h),-1===a.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var b=e(a),
c=t(a);a.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:b,event:P.event,constraints:c})}}function e(a){for(var b=[],c=L(a.parcatsViewModel),d=0;d<a.model.valueInds.length;d++)b.push({curveNumber:c,pointNumber:a.model.valueInds[d]});return b}function t(a){for(var b={},c=a.parcatsViewModel.model.dimensions,d=0;d<c.length;d++){var e=c[d];b[e.containerInd]=e.categories[a.model.categoryInds[d]].categoryValue}void 0!==a.model.rawColor&&(b.color=a.model.rawColor);return b}function l(a){if(-1===
a.parcatsViewModel.hoverinfoItems.indexOf("skip")){var b=e(a),c=t(a);a.parcatsViewModel.graphDiv.emit("plotly_click",{points:b,event:P.event,constraints:c})}}function f(a){a.attr("fill",function(a){return a.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function d(a){a.attr("fill-opacity",.8).attr("stroke",function(a){return ca.mostReadable(a.model.color,["black","white"])}).attr("stroke-width",.3)}function c(a){a.select("rect.catrect").attr("stroke",
"black").attr("stroke-width",1).attr("stroke-opacity",1)}function r(a){a.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function u(a){var b=a.categoryViewModel.model.dimensionInd,c=a.categoryViewModel.model.categoryInd;return a.parcatsViewModel.pathSelection.filter(function(d){return d.model.categoryInds[b]===c&&d.model.color===a.color})}function v(a){P.select(a.parentNode).selectAll("rect.bandrect").each(function(a){a=u(a);d(a);a.each(function(){V.raiseToTop(this)})});
P.select(a.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function w(a){var b=P.select(a).datum(),c=u(b);d(c);c.each(function(){V.raiseToTop(this)});P.select(a.parentNode).selectAll("rect.bandrect").filter(function(a){return a.color===b.color}).each(function(){V.raiseToTop(this);P.select(this).attr("stroke","black").attr("stroke-width",1.5)})}function y(a,b,c){var d=P.select(a).datum(),f=d.categoryViewModel.model;d=d.parcatsViewModel.graphDiv;var g=[];P.select(a.parentNode).selectAll("rect.bandrect").each(function(a){u(a).each(function(a){Array.prototype.push.apply(g,
e(a))})});a={};a[f.dimensionInd]=f.categoryValue;d.emit(b,{points:g,event:c,constraints:a})}function A(a,b,c){a=P.select(a).datum();var d=a.categoryViewModel.model,f=a.parcatsViewModel.graphDiv,g=[];u(a).each(function(a){Array.prototype.push.apply(g,e(a))});var h={};h[d.dimensionInd]=d.categoryValue;void 0!==a.rawColor&&(h.color=a.rawColor);f.emit(b,{points:g,event:c,constraints:h})}function z(a,b){b=P.select(b.parentNode).select("rect.catrect");var c=b.node().getBoundingClientRect(),d=b.datum(),
e=d.parcatsViewModel,f=e.model.dimensions[d.model.dimensionInd];b=e.trace;var g=c.top+c.height/2;1<e.dimensions.length&&f.displayInd===e.dimensions.length-1?(c=c.left,e="left"):(c=c.left+c.width,e="right");f=d.model.count;var h=d.model.categoryLabel,k=f/d.parcatsViewModel.model.count,l={countLabel:f,categoryLabel:h,probabilityLabel:k.toFixed(3)},m=[];-1!==d.parcatsViewModel.hoverinfoItems.indexOf("count")&&m.push(["Count:",l.countLabel].join(" "));-1!==d.parcatsViewModel.hoverinfoItems.indexOf("probability")&&
m.push(["P("+l.categoryLabel+"):",l.probabilityLabel].join(" "));d=m.join("\x3cbr\x3e");return{trace:b,x:c-a.left,y:g-a.top,text:d,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:e,hovertemplate:b.hovertemplate,hovertemplateLabels:l,eventData:[{data:b._input,fullData:b,count:f,category:h,probability:k}]}}function x(a,b){var c=[];P.select(b.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){c.push(z(a,
this))});return c}function C(a,b){var c=b.getBoundingClientRect(),d=P.select(b).datum(),e=d.categoryViewModel,f=e.parcatsViewModel,g=f.model.dimensions[e.model.dimensionInd];b=f.trace;var h=c.y+c.height/2;1<f.dimensions.length&&g.displayInd===f.dimensions.length-1?(c=c.left,g="left"):(c=c.left+c.width,g="right");var k=e.model.categoryLabel,l=d.parcatsViewModel.model.count,m=0;d.categoryViewModel.bands.forEach(function(a){a.color===d.color&&(m+=a.count)});var n=e.model.count,r=0;f.pathSelection.each(function(a){a.model.color===
d.color&&(r+=a.model.count)});f=m/l;var t=m/r,p=m/n,q={countLabel:l,categoryLabel:k,probabilityLabel:f.toFixed(3)},u=[];-1!==e.parcatsViewModel.hoverinfoItems.indexOf("count")&&u.push(["Count:",q.countLabel].join(" "));-1!==e.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(u.push("P(color  "+k+"): "+q.probabilityLabel),u.push("P("+k+" | color): "+t.toFixed(3)),u.push("P(color | "+k+"): "+p.toFixed(3)));e=u.join("\x3cbr\x3e");t=ca.mostReadable(d.color,["black","white"]);return{trace:b,x:c-
a.left,y:h-a.top,text:e,color:d.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:t,fontSize:10,idealAlign:g,hovertemplate:b.hovertemplate,hovertemplateLabels:q,eventData:[{data:b._input,fullData:b,category:k,count:l,probability:f,categorycount:n,colorcount:r,bandcolorcount:m}]}}function B(a){if(!(a.parcatsViewModel.dragDimension||-1!==a.parcatsViewModel.hoverinfoItems.indexOf("skip")||-1>P.mouse(this)[1])){var b=a.parcatsViewModel.graphDiv,c=b._fullLayout,d=c._paperdiv.node().getBoundingClientRect(),
e=a.parcatsViewModel.hoveron;"color"===e?(w(this),A(this,"plotly_hover",P.event)):(v(this),y(this,"plotly_hover",P.event));if(-1===a.parcatsViewModel.hoverinfoItems.indexOf("none")){var f;"category"===e?f=z(d,this):"color"===e?f=C(d,this):"dimension"===e&&(f=x(d,this));f&&T.loneHover(f,{container:c._hoverlayer.node(),outerContainer:c._paper.node(),gd:b})}}}function D(a){var b=a.parcatsViewModel;b.dragDimension||(f(b.pathSelection),c(b.dimensionSelection.selectAll("g.category")),r(b.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),
T.loneUnhover(b.graphDiv._fullLayout._hoverlayer.node()),b.pathSelection.sort(h),-1===b.hoverinfoItems.indexOf("skip")&&("color"===a.parcatsViewModel.hoveron?A(this,"plotly_unhover",P.event):y(this,"plotly_unhover",P.event)))}function G(a){"fixed"!==a.parcatsViewModel.arrangement&&(a.dragDimensionDisplayInd=a.model.displayInd,a.initialDragDimensionDisplayInds=a.parcatsViewModel.model.dimensions.map(function(a){return a.displayInd}),a.dragHasMoved=!1,a.dragCategoryDisplayInd=null,P.select(this).selectAll("g.category").select("rect.catrect").each(function(b){var c=
P.mouse(this)[0],d=P.mouse(this)[1];-2<=c&&c<=b.width+2&&-2<=d&&d<=b.height+2&&(a.dragCategoryDisplayInd=b.model.displayInd,a.initialDragCategoryDisplayInds=a.model.categories.map(function(a){return a.displayInd}),b.model.dragY=b.y,V.raiseToTop(this.parentNode),P.select(this.parentNode).selectAll("rect.bandrect").each(function(b){b.y<d&&d<=b.y+b.height&&(a.potentialClickBand=this)}))}),a.parcatsViewModel.dragDimension=a,T.loneUnhover(a.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function E(a){if("fixed"!==
a.parcatsViewModel.arrangement&&(a.dragHasMoved=!0,null!==a.dragDimensionDisplayInd)){var b=a.dragDimensionDisplayInd,c=b-1,d=b+1,e=a.parcatsViewModel.dimensions[b];if(null!==a.dragCategoryDisplayInd){var f=e.categories[a.dragCategoryDisplayInd];f.model.dragY+=P.event.dy;var g=f.model.dragY,h=f.model.displayInd,k=e.categories,l=k[h-1];k=k[h+1];void 0!==l&&g<l.y+l.height/2&&(f.model.displayInd=l.model.displayInd,l.model.displayInd=h);void 0!==k&&g+f.height>k.y+k.height/2&&(f.model.displayInd=k.model.displayInd,
k.model.displayInd=h);a.dragCategoryDisplayInd=f.model.displayInd}if(null===a.dragCategoryDisplayInd||"freeform"===a.parcatsViewModel.arrangement)e.model.dragX=P.event.x,c=a.parcatsViewModel.dimensions[c],d=a.parcatsViewModel.dimensions[d],void 0!==c&&e.model.dragX<c.x+c.width&&(e.model.displayInd=c.model.displayInd,c.model.displayInd=b),void 0!==d&&e.model.dragX+e.width>d.x&&(e.model.displayInd=d.model.displayInd,d.model.displayInd=a.dragDimensionDisplayInd),a.dragDimensionDisplayInd=e.model.displayInd;
N(a.parcatsViewModel);I(a.parcatsViewModel);H(a.parcatsViewModel);J(a.parcatsViewModel)}}function F(a){if("fixed"!==a.parcatsViewModel.arrangement&&null!==a.dragDimensionDisplayInd){P.select(this).selectAll("text").attr("font-weight","normal");var b={},c=L(a.parcatsViewModel),d=a.parcatsViewModel.model.dimensions.map(function(a){return a.displayInd}),e=a.initialDragDimensionDisplayInds.some(function(a,b){return a!==d[b]});e&&d.forEach(function(c,d){b["dimensions["+a.parcatsViewModel.model.dimensions[d].containerInd+
"].displayindex"]=c});var f=!1;if(null!==a.dragCategoryDisplayInd){var g=a.model.categories.map(function(a){return a.displayInd});if(f=a.initialDragCategoryDisplayInds.some(function(a,b){return a!==g[b]})){var h=a.model.categories.slice().sort(function(a,b){return a.displayInd-b.displayInd}),k=h.map(function(a){return a.categoryValue});h=h.map(function(a){return a.categoryLabel});b["dimensions["+a.model.containerInd+"].categoryarray"]=[k];b["dimensions["+a.model.containerInd+"].ticktext"]=[h];b["dimensions["+
a.model.containerInd+"].categoryorder"]="array"}}-1===a.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!a.dragHasMoved&&a.potentialClickBand&&("color"===a.parcatsViewModel.hoveron?A(a.potentialClickBand,"plotly_click",P.event.sourceEvent):y(a.potentialClickBand,"plotly_click",P.event.sourceEvent));a.model.dragX=null;null!==a.dragCategoryDisplayInd&&(a.parcatsViewModel.dimensions[a.dragDimensionDisplayInd].categories[a.dragCategoryDisplayInd].model.dragY=null,a.dragCategoryDisplayInd=null);a.dragDimensionDisplayInd=
null;a.parcatsViewModel.dragDimension=null;a.dragHasMoved=null;a.potentialClickBand=null;N(a.parcatsViewModel);I(a.parcatsViewModel);P.transition().duration(300).ease("cubic-in-out").each(function(){H(a.parcatsViewModel,!0);J(a.parcatsViewModel,!0)}).each("end",function(){(e||f)&&Q.restyle(a.parcatsViewModel.graphDiv,b,[c])})}}function L(a){for(var b,c=a.graphDiv._fullData,d=0;d<c.length;d++)if(a.key===c[d].uid){b=d;break}return b}function J(a,b){void 0===b&&(b=!1);a.pathSelection.data(function(a){return a.paths},
k);(function(a){return b?a.transition():a})(a.pathSelection).attr("d",function(a){return a.svgD})}function H(a,b){function c(a){return b?a.transition():a}void 0===b&&(b=!1);a.dimensionSelection.data(function(a){return a.dimensions},k);var d=a.dimensionSelection.selectAll("g.category").data(function(a){return a.categories},k);c(a.dimensionSelection).attr("transform",function(a){return"translate("+a.x+", 0)"});c(d).attr("transform",function(a){return"translate(0, "+a.y+")"});d.select(".dimlabel").text(function(a,
b){return 0===b?a.parcatsViewModel.model.dimensions[a.model.dimensionInd].dimensionLabel:null});d.select(".catlabel").attr("text-anchor",function(a){return m(a)?"start":"end"}).attr("x",function(a){return m(a)?a.width+5:-5}).each(function(a){if(m(a)){a=a.width+5;var b="start"}else a=-5,b="end";P.select(this).selectAll("tspan").attr("x",a).attr("text-anchor",b)});a=d.selectAll("rect.bandrect").data(function(a){return a.bands},k);d=a.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",
0).attr("fill",function(a){return a.color}).attr("fill-opacity",0);a.attr("fill",function(a){return a.color}).attr("width",function(a){return a.width}).attr("height",function(a){return a.height}).attr("y",function(a){return a.y});r(d);a.each(function(){V.raiseToTop(this)});a.exit().remove()}function K(a,b,c){c=c[0];var d=b.margin||{l:80,r:80,t:100,b:80},e=c.trace,f=e.domain,g=b.width,h=Math.floor(g*(f.x[1]-f.x[0])),k=Math.floor(b.height*(f.y[1]-f.y[0]));g=f.x[0]*g+d.l;b=b.height-f.y[1]*b.height+d.t;
f=e.line.shape;var l="all"===e.hoverinfo?["count","probability"]:(e.hoverinfo||"").split("+");a={trace:e,key:e.uid,model:c,x:g,y:b,width:h,height:k,hoveron:e.hoveron,hoverinfoItems:l,arrangement:e.arrangement,bundlecolors:e.bundlecolors,sortpaths:e.sortpaths,labelfont:e.labelfont,categorylabelfont:e.tickfont,pathShape:f,dragDimension:null,margin:d,paths:[],dimensions:[],graphDiv:a,traceSelection:null,pathSelection:null,dimensionSelection:null};c.dimensions&&(N(a),I(a));return a}function M(a,b,c,d,
e){var f=[],g=[],h;for(h=0;h<c.length-1;h++){var k=P.interpolateNumber(c[h]+a[h],a[h+1]);f.push(k(e));g.push(k(1-e))}e="M "+a[0]+","+b[0];e+="l"+c[0]+",0 ";for(h=1;h<c.length;h++)e+="C"+f[h-1]+","+b[h-1]+" "+g[h-1]+","+b[h]+" "+a[h]+","+b[h],e+="l"+c[h]+",0 ";e=e+("l0,"+d+" l -")+(c[c.length-1]+",0 ");for(h=c.length-2;0<=h;h--)e+="C"+g[h]+","+(b[h+1]+d)+" "+f[h]+","+(b[h]+d)+" "+(a[h]+c[h])+","+(b[h]+d),e+="l-"+c[h]+",0 ";return e+"Z"}function I(a){function b(a){var b=a.categoryInds.map(function(a,
b){return f[b][a]});return h.map(function(a){return b[a]})}var c=a.dimensions,d=a.model,e=c.map(function(a){return a.categories.map(function(a){return a.y})}),f=a.model.dimensions.map(function(a){return a.categories.map(function(a){return a.displayInd})}),g=a.model.dimensions.map(function(a){return a.displayInd}),h=a.dimensions.map(function(a){return a.model.dimensionInd}),k=c.map(function(a){return a.x}),l=c.map(function(a){return a.width}),m=[];for(n in d.paths)d.paths.hasOwnProperty(n)&&m.push(d.paths[n]);
m.sort(function(c,d){var e=b(c),f=b(d);"backward"===a.sortpaths&&(e.reverse(),f.reverse());e.push(c.valueInds[0]);f.push(d.valueInds[0]);a.bundlecolors&&(e.unshift(c.rawColor),f.unshift(d.rawColor));return e<f?-1:e>f?1:0});d=Array(m.length);var n=c[0].model.count;c=c[0].categories.map(function(a){return a.height}).reduce(function(a,b){return a+b});for(var r=0;r<m.length;r++){var t=m[r];var p=0<n?t.count/n*c:0;for(var q=Array(e.length),u=0;u<t.categoryInds.length;u++){var v=f[u][t.categoryInds[u]],
w=g[u];q[w]=e[w][v];e[w][v]+=p;v=a.dimensions[w].categories[v];w=v.bands.length;var x=v.bands[w-1];void 0===x||t.rawColor!==x.rawColor?(w=void 0===x?0:x.y+x.height,v.bands.push({key:w,color:t.color,rawColor:t.rawColor,height:p,width:v.width,count:t.count,y:w,categoryViewModel:v,parcatsViewModel:a})):(v=v.bands[w-1],v.height+=p,v.count+=t.count)}u="hspline"===a.pathShape?M(k,q,l,p,.5):M(k,q,l,p,0);d[r]={key:t.valueInds[0],model:t,height:p,leftXs:k,topYs:q,dimWidths:l,svgD:u,parcatsViewModel:a}}a.paths=
d}function N(a){var b=a.model.dimensions.map(function(a){return{displayInd:a.displayInd,dimensionInd:a.dimensionInd}});b.sort(function(a,b){return a.displayInd-b.displayInd});var c=[],d;for(d in b)c.push(O(a,a.model.dimensions[b[d].dimensionInd]));a.dimensions=c}function O(a,b){var c=a.model.dimensions.length;c=40+(1<c?(a.width-80-16)/(c-1):0)*b.displayInd;var d=[],e=a.model.maxCats,f=b.categories.length,g=b.count,h=a.height-8*(e-1),k=8*(e-f)/2,l=b.categories.map(function(a){return{displayInd:a.displayInd,
categoryInd:a.categoryInd}});l.sort(function(a,b){return a.displayInd-b.displayInd});for(e=0;e<f;e++){var m=l[e].categoryInd;var n=b.categories[m];m=0<g?n.count/g*h:0;n={key:n.valueInds[0],model:n,width:16,height:m,y:null!==n.dragY?n.dragY:k,bands:[],parcatsViewModel:a};k=k+m+8;d.push(n)}return{key:b.dimensionInd,x:null!==b.dragX?b.dragX:c,y:0,width:16,model:b,categories:d,parcatsViewModel:a,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,
dragHasMoved:null,potentialClickBand:null}}var P=a("d3"),Q=a("../../plot_api/plot_api"),T=a("../../components/fx"),V=a("../../lib"),Y=a("../../components/drawing"),ca=a("tinycolor2"),Z=a("../../lib/svg_text_utils");q.exports=function(a,b,c,d){n(c,a,d,b)}},{"../../components/drawing":612,"../../components/fx":629,"../../lib":716,"../../lib/svg_text_utils":740,"../../plot_api/plot_api":751,d3:165,tinycolor2:535}],1080:[function(a,q,p){var n=a("./parcats");q.exports=function(a,m,h,b){var g=a._fullLayout,
e=g._size;n(a,g._paper,m,{width:e.w,height:e.h,margin:{t:e.t,r:e.r,b:e.b,l:e.l}},h,b)}},{"./parcats":1079}],1081:[function(a,q,p){p=a("../../components/colorscale/attributes");var n=a("../../plots/cartesian/layout_attributes"),k=a("../../plots/font_attributes"),m=a("../../plots/domain").attributes,h=a("../../lib/extend").extendFlat;a=a("../../plot_api/plot_template").templatedArray;q.exports={domain:m({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},
labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:k({editType:"plot"}),tickfont:k({editType:"plot"}),rangefont:k({editType:"plot"}),dimensions:a("dimension",{label:{valType:"string",editType:"plot"},tickvals:h({},n.tickvals,{editType:"plot"}),ticktext:h({},n.ticktext,{editType:"plot"}),tickformat:h({},n.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},
{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:h({editType:"calc"},p("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":598,"../../lib/extend":707,
"../../plot_api/plot_template":754,"../../plots/cartesian/layout_attributes":776,"../../plots/domain":789,"../../plots/font_attributes":790}],1082:[function(a,q,p){function n(a,b,c,d){a:{for(var e=0;e<d.length;e++)if(c>=d[e][0]&&c<=d[e][1]){d=!0;break a}d=!1}if(d)return c;a=a?-1:1;var f=0;d=b.length-1;0>a&&(e=f,f=d,d=e);for(var g=e=b[f];a*f<a*d;f+=a){var h=f+a,k=b[h];if(a*c<a*(e*(1-J)+k*J))return e*(1-L)+g*L;if(a*c<a*k||h===d)return k*(1-L)+e*L;g=e;e=k}}function k(a){a.attr("x",-B.bar.captureWidth/
2).attr("width",B.bar.captureWidth)}function m(a){a.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function h(a){if(!a.brush.filterSpecified)return"0,"+a.height;for(var c=b(a.brush.filter.getConsolidated(),a.height),d=[0],e,f,g=c.length?c[0][0]:null,h=0;h<c.length;h++)e=c[h],f=e[1]-e[0],d.push(g),d.push(f),f=h+1,f<c.length&&(g=c[f][0]-e[1]);d.push(a.height);return d}function b(a,b){return a.map(function(a){return a.map(function(a){return Math.max(0,
a*b)}).sort(F)})}function g(){D.select(document.body).style("cursor",null)}function e(a){a.attr("stroke-dasharray",h)}function t(a,b){a=D.select(a).selectAll(".highlight, .highlight-shadow");b=b?a.transition().duration(B.bar.snapDuration).each("end",b):a;e(b)}function l(a,c){var d=a.brush,e={};if(d.filterSpecified){var f=a.height;d=d.filter.getConsolidated();var g=b(d,f),h=NaN,k=NaN,l=NaN;for(f=0;f<=g.length;f++){var m=g[f];if(m&&m[0]<=c&&c<=m[1]){h=f;break}else if(k=f?f-1:NaN,m&&m[0]>c){l=f;break}}f=
h;isNaN(f)&&(f=isNaN(k)||isNaN(l)?isNaN(k)?l:k:c-g[k][1]<g[l][0]-c?k:l);isNaN(f)||(g=g[f],k=B.bar.handleHeight,k=c>g[1]+k||c<g[0]-k?void 0:c>=.9*g[1]+.1*g[0]?"n":c<=.9*g[0]+.1*g[1]?"s":"ns",k&&(e.interval=d[f],e.intervalPix=g,e.region=k))}if(a.ordinal&&!e.region)for(d=a.unitTickvals,a=a.unitToPaddedPx.invert(c),f=0;f<d.length;f++)if(c=[.25*d[Math.max(f-1,0)]+.75*d[f],.25*d[Math.min(f+1,d.length-1)]+.75*d[f]],a>=c[0]&&a<=c[1]){e.clickableOrdinalRange=c;break}return e}function f(a,b){D.event.sourceEvent.stopPropagation();
a=b.height-D.mouse(a)[1]-2*B.verticalPadding;var c=b.unitToPaddedPx.invert(a),d=b.brush,e=l(b,a),f=e.interval,g=d.svgBrush;g.wasDragged=!1;g.grabbingBar="ns"===e.region;if(g.grabbingBar){var h=f.map(b.unitToPaddedPx);g.grabPoint=a-h[0]-B.verticalPadding;g.barLength=h[1]-h[0]}g.clickableOrdinalRange=e.clickableOrdinalRange;g.stayingIntervals=b.multiselect&&d.filterSpecified?d.filter.getConsolidated():[];f&&(g.stayingIntervals=g.stayingIntervals.filter(function(a){return a[0]!==f[0]&&a[1]!==f[1]}));
g.startExtent=e.region?f["s"===e.region?1:0]:c;b.parent.inBrushDrag=!0;g.brushStartCallback()}function d(a,b){D.event.sourceEvent.stopPropagation();var c=b.height-D.mouse(a)[1]-2*B.verticalPadding,d=b.brush.svgBrush;d.wasDragged=!0;d._dragging=!0;d.newExtent=d.grabbingBar?[c-d.grabPoint,c+d.barLength-d.grabPoint].map(b.unitToPaddedPx.invert):[d.startExtent,b.unitToPaddedPx.invert(c)].sort(F);b.brush.filterSpecified=!0;d.extent=d.stayingIntervals.concat([d.newExtent]);d.brushCallback(b);t(a.parentNode)}
function c(a,b){var c=b.brush,e=c.filter,f=c.svgBrush;f._dragging||(r(a,b),d(a,b),b.brush.svgBrush.wasDragged=!1);f._dragging=!1;D.event.sourceEvent.stopPropagation();var h=f.grabbingBar;f.grabbingBar=!1;f.grabLocation=void 0;b.parent.inBrushDrag=!1;g();if(f.wasDragged)if(h=function(){e.set(e.getConsolidated())},b.ordinal){var k=b.unitTickvals;k[k.length-1]<k[0]&&k.reverse();f.newExtent=[n(0,k,f.newExtent[0],f.stayingIntervals),n(1,k,f.newExtent[1],f.stayingIntervals)];k=f.newExtent[1]>f.newExtent[0];
f.extent=f.stayingIntervals.concat(k?[f.newExtent]:[]);f.extent.length||A(c);f.brushCallback(b);k?t(a.parentNode,h):(h(),t(a.parentNode))}else h();else f.wasDragged=void 0,f.clickableOrdinalRange?c.filterSpecified&&b.multiselect?f.extent.push(f.clickableOrdinalRange):(f.extent=[f.clickableOrdinalRange],c.filterSpecified=!0):h?(f.extent=f.stayingIntervals,0===f.extent.length&&A(c)):A(c),f.brushCallback(b),t(a.parentNode);f.brushEndCallback(c.filterSpecified?e.getConsolidated():[])}function r(a,b){a=
b.height-D.mouse(a)[1]-2*B.verticalPadding;b=l(b,a);a="crosshair";b.clickableOrdinalRange?a="pointer":b.region&&(a=b.region+"-resize");D.select(document.body).style("cursor",a)}function u(a){a.on("mousemove",function(a){D.event.preventDefault();a.parent.inBrushDrag||r(this,a)}).on("mouseleave",function(a){a.parent.inBrushDrag||g()}).call(D.behavior.drag().on("dragstart",function(a){f(this,a)}).on("drag",function(a){d(this,a)}).on("dragend",function(a){c(this,a)}))}function v(a,b){return a[0]-b[0]}
function w(a){var b=a.selectAll(".background").data(E);b.enter().append("rect").classed("background",!0).call(k).call(m).style("pointer-events","auto").attr("transform","translate(0 "+B.verticalPadding+")");b.call(u).attr("height",function(a){return a.height-B.verticalPadding});b=a.selectAll(".highlight-shadow").data(E);b.enter().append("line").classed("highlight-shadow",!0).attr("x",-B.bar.width/2).attr("stroke-width",B.bar.width+B.bar.strokeWidth).attr("stroke",B.bar.strokeColor).attr("opacity",
B.bar.strokeOpacity).attr("stroke-linecap","butt");b.attr("y1",function(a){return a.height}).call(e);a=a.selectAll(".highlight").data(E);a.enter().append("line").classed("highlight",!0).attr("x",-B.bar.width/2).attr("stroke-width",B.bar.width-B.bar.strokeWidth).attr("stroke",B.bar.fillColor).attr("opacity",B.bar.fillOpacity).attr("stroke-linecap","butt");a.attr("y1",function(a){return a.height}).call(e)}function y(a){return a.svgBrush.extent.map(function(a){return a.slice()})}function A(a){a.filterSpecified=
!1;a.svgBrush.extent=[[-Infinity,Infinity]]}function z(a){return function(b){b=b.brush;var c=y(b).slice();b.filter.set(c);a()}}function x(a){a=a.slice();for(var b=[],c,d=a.shift();d;){for(c=d.slice();(d=a.shift())&&d[0]<=c[1];)c[1]=Math.max(c[1],d[1]);b.push(c)}return b}function C(){var a=[],b,c;return{set:function(d){a=d.map(function(a){return a.slice().sort(F)}).sort(v);1===a.length&&-Infinity===a[0][0]&&Infinity===a[0][1]&&(a=[[0,-1]]);b=x(a);c=a.reduce(function(a,b){return[Math.min(a[0],b[0]),
Math.max(a[1],b[1])]},[Infinity,-Infinity])},get:function(){return a.slice()},getConsolidated:function(){return b},getBounds:function(){return c}}}var B=a("./constants"),D=a("d3"),G=a("../../lib/gup").keyFun,E=a("../../lib/gup").repeat,F=a("../../lib").sorterAsc,L=B.bar.snapRatio,J=B.bar.snapClose;q.exports={makeBrush:function(a,b,c,d,e,f){a=C();a.set(c);return{filter:a,filterSpecified:b,svgBrush:{extent:[],brushStartCallback:d,brushCallback:z(e),brushEndCallback:f}}},ensureAxisBrush:function(a){a=
a.selectAll("."+B.cn.axisBrush).data(E,G);a.enter().append("g").classed(B.cn.axisBrush,!0);w(a)},cleanRanges:function(a,b){Array.isArray(a[0])?(a=a.map(function(a){return a.sort(F)}),a=b.multiselect?x(a.sort(v)):[a[0]]):a=[a.sort(F)];if(b.tickvals){var c=b.tickvals.slice().sort(F);a=a.map(function(a){a=[n(0,c,a[0],[]),n(1,c,a[1],[])];if(a[1]>a[0])return a}).filter(function(a){return a});if(!a.length)return}return 1<a.length?a:a[0]}}},{"../../lib":716,"../../lib/gup":714,"./constants":1085,d3:165}],
1083:[function(a,q,p){var n=a("d3"),k=a("../../plots/get_data").getModuleCalcData,m=a("./plot"),h=a("../../constants/xmlns_namespaces");p.name="parcoords";p.plot=function(a){var b=k(a.calcdata,"parcoords")[0];b.length&&m(a,b)};p.clean=function(a,g,e,h){a=h._has&&h._has("parcoords");g=g._has&&g._has("parcoords");a&&!g&&(h._paperdiv.selectAll(".parcoords").remove(),h._glimages.selectAll("*").remove())};p.toSVG=function(a){var b=a._fullLayout._glimages,e=n.select(a).selectAll(".svg-container");e.filter(function(a,
b){return b===e.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var a=this.toDataURL("image/png");b.append("svg:image").attr({xmlns:h.svg,"xlink:href":a,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})});window.setTimeout(function(){n.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":693,"../../plots/get_data":799,"./plot":1092,d3:165}],1084:[function(a,q,p){var n=a("../../lib").isArrayOrTypedArray,
k=a("../../components/colorscale"),m=a("../../lib/gup").wrap;q.exports=function(a,b){if(k.hasColorscale(b,"line")&&n(b.line.color)){var g=b.line.color;var e=k.extractOpts(b.line).colorscale;k.calc(a,b,{vals:g,containerStr:"line",cLetter:"c"})}else{a=b._length;g=Array(a);for(e=0;e<a;e++)g[e]=.5;e=[[0,b.line.color],[1,b.line.color]]}return m({lineColor:g,cscale:e})}},{"../../components/colorscale":603,"../../lib":716,"../../lib/gup":714}],1085:[function(a,q,p){q.exports={maxDimensionCount:60,overdrag:45,
verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5E3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeColor:"white",strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",
parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],1086:[function(a,q,p){function n(a,c,d,e,f){var g=f("line.color",d);if(h(a,
"line")&&m.isArrayOrTypedArray(g)){if(g.length)return f("line.colorscale"),b(a,c,e,f,{prefix:"line.",cLetter:"c"}),g.length;c.line.color=d}return Infinity}function k(a,b,c,d){function e(c,d){return m.coerce(a,b,l.dimensions,c,d)}c=e("values");var g=e("visible");c&&c.length||(g=b.visible=!1);g&&(e("label"),e("tickvals"),e("ticktext"),e("tickformat"),c=e("range"),b._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:c},t.setConvert(b._ax,d.layout),e("multiselect"),d=e("constraintrange"))&&
(b.constraintrange=f.cleanRanges(d,b))}var m=a("../../lib"),h=a("../../components/colorscale/helpers").hasColorscale,b=a("../../components/colorscale/defaults"),g=a("../../plots/domain").defaults,e=a("../../plots/array_container_defaults"),t=a("../../plots/cartesian/axes"),l=a("./attributes"),f=a("./axisbrush"),d=a("./constants").maxDimensionCount,c=a("./merge_length");q.exports=function(a,b,f,h){function r(c,d){return m.coerce(a,b,l,c,d)}var t=a.dimensions;Array.isArray(t)&&t.length>d&&(m.log("parcoords traces support up to "+
d+" dimensions at the moment"),t.splice(d));t=e(a,b,{name:"dimensions",layout:h,handleItemDefaults:k});f=n(a,b,f,h,r);g(b,h,r);Array.isArray(t)&&t.length||(b.visible=!1);c(b,t,"values",f);h={family:h.font.family,size:Math.round(h.font.size/1.2),color:h.font.color};m.coerceFont(r,"labelfont",h);m.coerceFont(r,"tickfont",h);m.coerceFont(r,"rangefont",h);r("labelangle");r("labelside")}},{"../../components/colorscale/defaults":601,"../../components/colorscale/helpers":602,"../../lib":716,"../../plots/array_container_defaults":760,
"../../plots/cartesian/axes":764,"../../plots/domain":789,"./attributes":1081,"./axisbrush":1082,"./constants":1085,"./merge_length":1090}],1087:[function(a,q,p){var n=a("../../lib").isTypedArray;p.convertTypedArray=function(a){return n(a)?Array.prototype.slice.call(a):a};p.isOrdinal=function(a){return!!a.tickvals};p.isVisible=function(a){return a.visible||!("visible"in a)}},{"../../lib":716}],1088:[function(a,q,p){q.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),calc:a("./calc"),
plot:a("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:a("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":1081,"./base_plot":1083,"./calc":1084,"./defaults":1086,"./plot":1092}],1089:[function(a,q,p){function n(a,b,c,d,e){var f=a._gl;f.enable(f.SCISSOR_TEST);f.scissor(b,c,d,e);a.clear({color:[0,0,0,0],depth:1})}function k(a,b,c,d,e,f){function g(k){var l=Math.min(d,e-k*d);0===k&&(window.cancelAnimationFrame(c.currentRafs[h]),
delete c.currentRafs[h],n(a,f.scissorX,f.scissorY,f.scissorWidth,f.viewBoxSize[1]));c.clearOnly||(f.count=2*l,f.offset=2*k*d,b(f),k*d+l<e&&(c.currentRafs[h]=window.requestAnimationFrame(function(){g(k+1)})),c.drawCompleted=!1)}var h=f.key;c.drawCompleted||(a.read({x:0,y:0,width:1,height:1,data:v}),c.drawCompleted=!0);g(0)}function m(a,b){for(var c=Array(256),d=0;256>d;d++)c[d]=a(d/255).concat(b);return c}function h(a,b,c){for(var d=Array(a*(r+4)),e=0,f=0;f<a;f++){for(var g=0;g<r;g++)d[e++]=g<b.length?
b[g].paddedUnitValues[f]:.5;d[e++]=(f>>>16)%256/255;d[e++]=(f>>>8)%256/255;d[e++]=(f>>>0)%256/255;d[e++]=Math.max(1E-6,Math.min(.999999,c[f]))}return d}function b(a,b,c){for(var d=Array(8*b),e=0,f=0;f<b;f++)for(var g=0;2>g;g++)for(var h=0;4>h;h++){var k=4*a+h,l=c[64*f+k];63===k&&0===g&&(l*=-1);d[e++]=l}return d}function g(a){a="0"+a;return a.substr(a.length-2)}function e(a){return a<r?"p"+g(a+1)+"_"+g(a+4):"colors"}function t(a,c,d){for(var f=0;f<=r;f+=4)a[e(f)](b(f/4,c,d))}function l(a){for(var b=
{},c=0;c<=r;c+=4)b[e(c)]=a.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return b}function f(a){var b=Math.max(0,Math.floor(2047*a[0]),0);a=Math.min(2047,Math.ceil(2047*a[1]),2047);return[Math.min(b,a),Math.max(b,a)]}p=a("glslify");var d=p(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform sampler2D mask, palette;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\n\nbool isPick    \x3d (drwLayer \x3e 1.5);\nbool isContext \x3d (drwLayer \x3c 0.5);\n\nconst vec4 ZEROS \x3d vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS \x3d vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 \x3d val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 \x3d val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo \x3c hi) \x26\x26 (lo \x3e p || p \x3e hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] \x3d A;\n    pnts[1] \x3d B;\n    pnts[2] \x3d C;\n    pnts[3] \x3d D;\n\n    for(int i \x3d 0; i \x3c 4; ++i) {\n        for(int j \x3d 0; j \x3c 4; ++j) {\n            for(int k \x3d 0; k \x3c 4; ++k) {\n                if(0 \x3d\x3d iMod(\n                    int(255.0 * texture2D(mask,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x \x3d 0.5 * sign(v) + 0.5;\n    float y \x3d axisY(x, A, B, C, D);\n    float z \x3d 1.0 - abs(v);\n\n    z +\x3d isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A \x3d mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B \x3d mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C \x3d mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D \x3d mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v \x3d colors[3];\n\n    gl_Position \x3d position(isContext, v, A, B, C, D);\n\n    fragColor \x3d\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),
c=p(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor \x3d fragColor;\n}\n"]),r=a("./constants").maxDimensionCount,u=a("../../lib"),v=new Uint8Array(4),w=new Uint8Array(4),y={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};q.exports=function(a,b){function e(a){v=a.model;z=a.viewModel;A=z.dimensions.slice();J=A[0]?A[0].values.length:0;var b=v.lines;a=r?b.color.map(function(a,c){return c/b.color.length}):b.color;a=h(J,A,a);
t(H,J,a);g||r||(M=p.texture(u.extendFlat({data:m(v.unitToColor,255)},y)))}var g=b.context,r=b.pick,p=b.regl,q={currentRafs:{},drawCompleted:!0,clearOnly:!1},v,z,A,J,H=l(p),K,M=p.texture(y),I=[];e(b);var N=p({profile:!1,blend:{enable:g,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!g,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:p.prop("scissorX"),y:p.prop("scissorY"),
width:p.prop("scissorWidth"),height:p.prop("scissorHeight")}},viewport:{x:p.prop("viewportX"),y:p.prop("viewportY"),width:p.prop("viewportWidth"),height:p.prop("viewportHeight")},dither:!1,vert:d,frag:c,primitive:"lines",lineWidth:1,attributes:H,uniforms:{resolution:p.prop("resolution"),viewBoxPos:p.prop("viewBoxPos"),viewBoxSize:p.prop("viewBoxSize"),dim0A:p.prop("dim0A"),dim1A:p.prop("dim1A"),dim0B:p.prop("dim0B"),dim1B:p.prop("dim1B"),dim0C:p.prop("dim0C"),dim1C:p.prop("dim1C"),dim0D:p.prop("dim0D"),
dim1D:p.prop("dim1D"),loA:p.prop("loA"),hiA:p.prop("hiA"),loB:p.prop("loB"),hiB:p.prop("hiB"),loC:p.prop("loC"),hiC:p.prop("hiC"),loD:p.prop("loD"),hiD:p.prop("hiD"),palette:M,contextColor:p.prop("contextColor"),mask:p.prop("maskTexture"),drwLayer:p.prop("drwLayer"),maskHeight:p.prop("maskHeight")},offset:p.prop("offset"),count:p.prop("count")});return{render:function(a,b,c){var d=a.length,e,h=Infinity,l=-Infinity;for(e=0;e<d;e++){if(a[e].dim0.canvasX<h){h=a[e].dim0.canvasX;var m=e}if(a[e].dim1.canvasX>
l){l=a[e].dim1.canvasX;var t=e}}0===d&&n(p,0,0,v.canvasWidth,v.canvasHeight);var w=g,x;e=[[],[]];for(l=0;64>l;l++)h=!w&&l<A.length?A[l].brush.filter.getBounds():[-Infinity,Infinity],e[0][l]=h[0],e[1][l]=h[1];var z=Array(16384);for(h=0;16384>h;h++)z[h]=255;if(!w)for(h=0;h<A.length;h++){l=h%8;w=(h-l)/8;var y=Math.pow(2,l),B=A[h].brush.filter.get();if(!(2>B.length)){var C=f(B[0])[1];for(x=1;x<B.length;x++){var E=f(B[x]);for(l=C+1;l<E[0];l++)z[8*l+w]&=~y;C=Math.max(C,E[1])}}}h={shape:[8,2048],format:"alpha",
type:"uint8",mag:"nearest",min:"nearest",data:z};K?K(h):K=p.texture(h);h={maskTexture:K,maskHeight:2048,loA:e[0].slice(0,16),loB:e[0].slice(16,32),loC:e[0].slice(32,48),loD:e[0].slice(48,64),hiA:e[1].slice(0,16),hiB:e[1].slice(16,32),hiC:e[1].slice(32,48),hiD:e[1].slice(48,64)};for(e=0;e<d;e++){var D=a[e];y=D.dim0.crossfilterDimensionIndex;B=D.dim1.crossfilterDimensionIndex;C=D.canvasX;E=D.canvasY;l=C+D.panelSizeX;if(b||!I[y]||I[y][0]!==C||I[y][1]!==l){I[y]=[C,l];l=v;z=m;w=t;x=e;var F=D.panelSizeX,
H=D.panelSizeY;D=D.dim0.crossfilterDimensionIndex;for(var G=g?0:r?2:1,L=h,O=[[],[]],M=0;64>M;M++)O[0][M]=M===y?1:0,O[1][M]=M===B?1:0;M=l.lines.canvasOverdrag;var P=l.domain,Q=l.canvasWidth,sa=l.canvasHeight,W=l.deselectedLines.color;l=u.extendFlat({key:D,resolution:[Q,sa],viewBoxPos:[C+M,E],viewBoxSize:[F,H],i0:y,i1:B,dim0A:O[0].slice(0,16),dim0B:O[0].slice(16,32),dim0C:O[0].slice(32,48),dim0D:O[0].slice(48,64),dim1A:O[1].slice(0,16),dim1B:O[1].slice(16,32),dim1C:O[1].slice(32,48),dim1D:O[1].slice(48,
64),drwLayer:G,contextColor:[W[0]/255,W[1]/255,W[2]/255,1>W[3]?W[3]:Math.max(1/255,Math.pow(1/l.lines.color.length,1/3))],scissorX:(x===z?0:C+M)+(l.pad.l-M)+l.layoutWidth*P.x[0],scissorWidth:(x===w?Q-C+M:F+.5)+(x===z?C+M:0),scissorY:E+l.pad.b+l.layoutHeight*P.y[0],scissorHeight:H,viewportX:l.pad.l-M+l.layoutWidth*P.x[0],viewportY:l.pad.b+l.layoutHeight*P.y[0],viewportWidth:Q,viewportHeight:sa},L);q.clearOnly=c;k(p,N,q,b?v.lines.blockLineCount:J,J,l)}}},readPixel:function(a,b){p.read({x:a,y:b,width:1,
height:1,data:w});return w},readPixels:function(a,b,c,d){var e=new Uint8Array(4*c*d);p.read({x:a,y:b,width:c,height:d,data:e});return e},destroy:function(){a.style["pointer-events"]="none";M.destroy();K&&K.destroy();for(var b in H)H[b].destroy()},update:e}}},{"../../lib":716,"./constants":1085,glslify:410}],1090:[function(a,q,p){q.exports=function(a,k,m,h){h||(h=Infinity);var b;for(b=0;b<k.length;b++){var g=k[b];g.visible&&(h=Math.min(h,g[m].length))}Infinity===h&&(h=0);a._length=h;for(b=0;b<k.length;b++)g=
k[b],g.visible&&(g._length=h);return h}},{}],1091:[function(a,q,p){function n(a,b){return m(B.aggNums(Math.min,null,a,b),B.aggNums(Math.max,null,a,b))}function k(a){var b=a.range;return b?m(b[0],b[1]):n(a.values,a._length)}function m(a,b){if(isNaN(a)||!isFinite(a))a=0;if(isNaN(b)||!isFinite(b))b=0;a===b&&(0===a?(--a,b+=1):(a*=.9,b*=1.1));return[a,b]}function h(a,b){return b?function(c,d){d=b[d];return null===d||void 0===d?a(c):d}:a}function b(a,b,c,d,e){var f=k(c);return d?z.scale.ordinal().domain(d.map(h(z.format(c.tickformat),
e))).range(d.map(function(c){return a-b+(c-f[0])/(f[1]-f[0])*(2*b-a)})):z.scale.linear().domain(f).range([a-b,b])}function g(a,b){return z.scale.linear().range([b,a-b])}function e(a,b){return z.scale.linear().domain(k(a)).range([b,1-b])}function t(a){if(a.tickvals){var b=k(a);return z.scale.ordinal().domain(a.tickvals).range(a.tickvals.map(function(a){return(a-b[0])/(b[1]-b[0])}))}}function l(a){var b=a.map(function(a){return a[0]}),c=a.map(function(a){a=x(a[1]);return z.rgb("rgb("+a[0]+","+a[1]+
","+a[2]+")")}),d=function(a){return function(b){return b[a]}},e=["r","g","b"].map(function(a){return z.scale.linear().clamp(!0).domain(b).range(c.map(d(a)))});return function(a){return e.map(function(b){return b(a)})}}function f(a){return a.dimensions.some(function(a){return a.brush.filterSpecified})}function d(a,b,c){var d=J(b),e=d.trace,f=H.convertTypedArray(d.lineColor),g=e.line;b={color:x(K.deselectedLineColor)};var h=E.extractOpts(g);d=h.reversescale?E.flipScale(d.cscale):d.cscale;var m=e.domain,
n=e.dimensions,r=a.width,t=e.labelangle,p=e.labelside,q=e.labelfont,u=e.tickfont,v=e.rangefont;e=B.extendDeepNoArrays({},g,{color:f.map(z.scale.linear().domain(k({values:f,range:[h.min,h.max],_length:e._length}))),blockLineCount:K.blockLineCount,canvasOverdrag:K.overdrag*K.canvasPixelRatio});f=a.margin||{l:80,r:80,t:100,b:80};g=Math.floor(r*(m.x[1]-m.x[0]));h=Math.floor(a.height*(m.y[1]-m.y[0]));return{key:c,colCount:n.filter(H.isVisible).length,dimensions:n,tickDistance:K.tickDistance,unitToColor:l(d),
lines:e,deselectedLines:b,labelAngle:t,labelSide:p,labelFont:q,tickFont:u,rangeFont:v,layoutWidth:r,layoutHeight:a.height,domain:m,translateX:m.x[0]*r,translateY:a.height-m.y[1]*a.height,pad:f,canvasWidth:g*K.canvasPixelRatio+2*e.canvasOverdrag,canvasHeight:h*K.canvasPixelRatio,width:g,height:h,canvasPixelRatio:K.canvasPixelRatio}}function c(a,c,d){var h=d.width,k=d.height,l=d.dimensions,m=d.canvasPixelRatio,n=function(a){return h*a/Math.max(1,d.colCount-1)},r=K.verticalPadding/k,p=g(k,K.verticalPadding),
q={key:d.key,xScale:n,model:d,inBrushDrag:!1},u={};q.dimensions=l.filter(H.isVisible).map(function(g,h){function l(a,b){return{val:a,text:D[b]}}function v(a,b){return a.val-b.val}var w=e(g,r),x=u[g.label];u[g.label]=(x||0)+1;x=g.label+(x?"__"+x:"");var A=g.constraintrange,y=A&&A.length;y&&!Array.isArray(A[0])&&(A=[A]);A=y?A.map(function(a){return a.map(w)}):[[-Infinity,Infinity]];var C=g.values;C.length>g._length&&(C=C.slice(0,g._length));var E=g.tickvals;if(Array.isArray(E)&&E.length){var D=g.ticktext;
Array.isArray(D)&&D.length?D.length>E.length?D=D.slice(0,E.length):E.length>D.length&&(E=E.slice(0,D.length)):D=E.map(z.format(g.tickformat));for(var F=1;F<E.length;F++)if(E[F]<E[F-1]){F=E.map(l).sort(v);for(var I=0;I<E.length;I++)E[I]=F[I].val,D[I]=F[I].text;break}}else E=void 0;C=H.convertTypedArray(C);return{key:x,label:g.label,tickFormat:g.tickformat,tickvals:E,ticktext:D,ordinal:H.isOrdinal(g),multiselect:g.multiselect,xIndex:h,crossfilterDimensionIndex:h,visibleIndex:g._index,height:k,values:C,
paddedUnitValues:C.map(w),unitTickvals:E&&E.map(w),xScale:n,x:n(h),canvasX:n(h)*m,unitToPaddedPx:p,domainScale:b(k,K.verticalPadding,g,E,D),ordinalScale:t(g),parent:q,model:d,brush:M.makeBrush(a,y,A,function(){a.linePickActive(!1)},function(){q.focusLayer&&q.focusLayer.render(q.panels,!0);var b=f(q);!a.contextShown()&&b?(q.contextLayer&&q.contextLayer.render(q.panels,!0),a.contextShown(!0)):a.contextShown()&&!b&&(q.contextLayer&&q.contextLayer.render(q.panels,!0,!0),a.contextShown(!1))},function(b){q.focusLayer.render(q.panels,
!0);q.pickLayer&&q.pickLayer.render(q.panels,!0);a.linePickActive(!0);if(c&&c.filterChanged){var d=w.invert;b=b.map(function(a){return a.map(d).sort(B.sorterAsc)}).sort(function(a,b){return a[0]-b[0]});c.filterChanged(q.key,g._index,b)}})}});return q}function r(a){a.classed(K.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default").style("user-select","none")}function u(){var a=!0,b=!1;return{linePickActive:function(b){return arguments.length?a=!!b:a},contextShown:function(a){return arguments.length?
b=!!a:b}}}function v(a,b){var c=a*Math.PI/180;return{dir:"top"===b?1:-1,dx:Math.sin(c),dy:Math.cos(c),degrees:a}}function w(a,b){var c=b.panels||(b.panels=[]);a=a.data();for(var d=0;d<a.length-1;d++){var e=c[d]||(c[d]={}),f=a[d],g=a[d+1];e.dim0=f;e.dim1=g;e.canvasX=f.canvasX;e.panelSizeX=g.canvasX-f.canvasX;e.panelSizeY=b.model.canvasHeight;e.y=0;e.canvasY=0}}function y(a){for(var b=0;b<a.length;b++)for(var c=0;c<a[b].length;c++)for(var d=a[b][c].trace,e=d.dimensions,f=0;f<e.length;f++){var g=e[f].values,
h=e[f]._ax;h&&(h.range=h.range?m(h.range[0],h.range[1]):n(g,d._length),h.dtick||(h.dtick=.01*(Math.abs(h.range[1]-h.range[0])||1)),h.tickformat=e[f].tickformat,C.calcTicks(h),h.cleanRange())}}function A(a,b){if(a.ordinal)return"";var c=a.domainScale.domain();return C.tickText(a.model.dimensions[a.visibleIndex]._ax,c[b?c.length-1:0],!1).text}var z=a("d3"),x=a("color-rgba"),C=a("../../plots/cartesian/axes"),B=a("../../lib"),D=a("../../lib/svg_text_utils"),G=a("../../components/drawing"),E=a("../../components/colorscale");
p=a("../../lib/gup");var F=p.keyFun,L=p.repeat,J=p.unwrap,H=a("./helpers"),K=a("./constants"),M=a("./axisbrush"),I=a("./lines");q.exports=function(a,b,e,g){var h=a._fullLayout,k=h._toppaper;h=h._glcontainer;y(b);var l=u(),m=b.filter(function(a){return J(a).trace.visible}).map(d.bind(0,e)).map(c.bind(0,l,g));h.each(function(a,b){return B.extendFlat(a,m[b])});b=h.selectAll(".gl-canvas").each(function(a){a.viewModel=m[0];a.model=a.viewModel?a.viewModel.model:null});var n=null;b.filter(function(a){return a.pick}).style("pointer-events",
"auto").on("mousemove",function(a){if(l.linePickActive()&&a.lineLayer&&g&&g.hover){var b=z.event,c=this.width,d=this.height,e=z.mouse(this),f=e[0];e=e[1];0>f||0>e||f>=c||e>=d||(d=a.lineLayer.readPixel(f,d-1-e),d=(c=0!==d[3])?d[2]+256*(d[1]+256*d[0]):null,a={x:f,y:e,clientX:b.clientX,clientY:b.clientY,dataIndex:a.model.key,curveNumber:d},d!==n&&(c?g.hover(a):g.unhover&&g.unhover(a),n=d))}});b.style("opacity",function(a){return a.pick?0:1});k.style("background","rgba(255, 255, 255, 0)");k=k.selectAll("."+
K.cn.parcoords).data(m,F);k.exit().remove();k.enter().append("g").classed(K.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none");k.attr("transform",function(a){return"translate("+a.model.translateX+","+a.model.translateY+")"});k=k.selectAll("."+K.cn.parcoordsControlView).data(L,F);k.enter().append("g").classed(K.cn.parcoordsControlView,!0);k.attr("transform",function(a){return"translate("+a.model.pad.l+","+a.model.pad.t+")"});var t=k.selectAll("."+K.cn.yAxis).data(function(a){return a.dimensions},
F);t.enter().append("g").classed(K.cn.yAxis,!0);k.each(function(a){w(t,a)});b.each(function(a){if(a.viewModel){!a.lineLayer||g?a.lineLayer=I(this,a):a.lineLayer.update(a);if(a.key||0===a.key)a.viewModel[a.key]=a.lineLayer;a.lineLayer.render(a.viewModel.panels,!a.context||g)}});t.attr("transform",function(a){return"translate("+a.xScale(a.xIndex)+", 0)"});t.call(z.behavior.drag().origin(function(a){return a}).on("drag",function(a){var b=a.parent;l.linePickActive(!1);a.x=Math.max(-K.overdrag,Math.min(a.model.width+
K.overdrag,z.event.x));a.canvasX=a.x*a.model.canvasPixelRatio;t.sort(function(a,b){return a.x-b.x}).each(function(b,c){b.xIndex=c;b.x=a===b?b.x:b.xScale(b.xIndex);b.canvasX=b.x*b.model.canvasPixelRatio});w(t,b);t.filter(function(b){return 0!==Math.abs(a.xIndex-b.xIndex)}).attr("transform",function(a){return"translate("+a.xScale(a.xIndex)+", 0)"});z.select(this).attr("transform","translate("+a.x+", 0)");t.each(function(c,d,e){e===a.parent.key&&(b.dimensions[d]=c)});b.contextLayer&&b.contextLayer.render(b.panels,
!1,!f(b));b.focusLayer.render&&b.focusLayer.render(b.panels)}).on("dragend",function(a){var b=a.parent;a.x=a.xScale(a.xIndex);a.canvasX=a.x*a.model.canvasPixelRatio;w(t,b);z.select(this).attr("transform",function(a){return"translate("+a.x+", 0)"});b.contextLayer&&b.contextLayer.render(b.panels,!1,!f(b));b.focusLayer&&b.focusLayer.render(b.panels);b.pickLayer&&b.pickLayer.render(b.panels,!0);l.linePickActive(!0);g&&g.axesMoved&&g.axesMoved(b.key,b.dimensions.map(function(a){return a.crossfilterDimensionIndex}))}));
t.exit().remove();k=t.selectAll("."+K.cn.axisOverlays).data(L,F);k.enter().append("g").classed(K.cn.axisOverlays,!0);k.selectAll("."+K.cn.axis).remove();var p=k.selectAll("."+K.cn.axis).data(L,F);p.enter().append("g").classed(K.cn.axis,!0);p.each(function(a){var b=a.model.height/a.model.tickDistance,c=a.domainScale,d=c.domain();z.select(this).call(z.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(b,a.tickFormat).tickValues(a.ordinal?d:null).tickFormat(function(b){return H.isOrdinal(a)?
b:C.tickText(a.model.dimensions[a.visibleIndex]._ax,b,!1).text}).scale(c));G.font(p.selectAll("text"),a.model.tickFont)});p.selectAll(".domain, .tick\x3eline").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px");p.selectAll("text").style("text-shadow","1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff").style("cursor","default").style("user-select","none");b=k.selectAll("."+K.cn.axisHeading).data(L,F);b.enter().append("g").classed(K.cn.axisHeading,
!0);b=b.selectAll("."+K.cn.axisTitle).data(L,F);b.enter().append("text").classed(K.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("user-select","none").style("pointer-events","auto");b.text(function(a){return a.label}).each(function(b){var c=z.select(this);G.font(c,b.model.labelFont);D.convertToTspans(c,a)}).attr("transform",function(a){var b=v(a.model.labelAngle,a.model.labelSide),c=K.axisTitleOffset;return(0<b.dir?"":"translate(0,"+(2*c+a.model.height)+")")+"rotate("+
b.degrees+")translate("+-c*b.dx+","+-c*b.dy+")"}).attr("text-anchor",function(a){a=v(a.model.labelAngle,a.model.labelSide);return 2*Math.abs(a.dx)>Math.abs(a.dy)?0>a.dir*a.dx?"start":"end":"middle"});b=k.selectAll("."+K.cn.axisExtent).data(L,F);b.enter().append("g").classed(K.cn.axisExtent,!0);e=b.selectAll("."+K.cn.axisExtentTop).data(L,F);e.enter().append("g").classed(K.cn.axisExtentTop,!0);e.attr("transform","translate(0,"+-K.axisExtentOffset+")");e=e.selectAll("."+K.cn.axisExtentTopText).data(L,
F);e.enter().append("text").classed(K.cn.axisExtentTopText,!0).call(r);e.text(function(a){return A(a,!0)}).each(function(a){G.font(z.select(this),a.model.rangeFont)});b=b.selectAll("."+K.cn.axisExtentBottom).data(L,F);b.enter().append("g").classed(K.cn.axisExtentBottom,!0);b.attr("transform",function(a){return"translate(0,"+(a.model.height+K.axisExtentOffset)+")"});b=b.selectAll("."+K.cn.axisExtentBottomText).data(L,F);b.enter().append("text").classed(K.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(r);
b.text(function(a){return A(a,!1)}).each(function(a){G.font(z.select(this),a.model.rangeFont)});M.ensureAxisBrush(k)}},{"../../components/colorscale":603,"../../components/drawing":612,"../../lib":716,"../../lib/gup":714,"../../lib/svg_text_utils":740,"../../plots/cartesian/axes":764,"./axisbrush":1082,"./constants":1085,"./helpers":1087,"./lines":1089,"color-rgba":124,d3:165}],1092:[function(a,q,p){function n(a,b,h){h=b.indexOf(h);a=a.indexOf(h);-1===a&&(a+=b.length);return a}function k(a,b){return function(e,
g){return n(a,b,e)-n(a,b,g)}}var m=a("./parcoords"),h=a("../../lib/prepare_regl"),b=a("./helpers").isVisible;q.exports=function(a,e){var g=a._fullLayout;if(h(a)){var l={},f={},d={},c={},n=g._size;e.forEach(function(b,e){b=b[0].trace;d[e]=b.index;b=c[e]=b._fullInput.index;l[e]=a.data[b].dimensions;f[e]=a.data[b].dimensions.slice()});m(a,e,{width:n.w,height:n.h,margin:{t:n.t,r:n.r,b:n.b,l:n.l}},{filterChanged:function(b,e,h){var k=f[b][e];h=h.map(function(a){return a.slice()});var l="dimensions["+e+
"].constraintrange",m=g._tracePreGUI[a._fullData[d[b]]._fullInput.uid];void 0===m[l]&&(m[l]=k.constraintrange||null);e=a._fullData[d[b]].dimensions[e];h.length?(1===h.length&&(h=h[0]),k.constraintrange=h,e.constraintrange=h.slice(),h=[h]):(delete k.constraintrange,delete e.constraintrange,h=null);k={};k[l]=h;a.emit("plotly_restyle",[k,[c[b]]])},hover:function(b){a.emit("plotly_hover",b)},unhover:function(b){a.emit("plotly_unhover",b)},axesMoved:function(d,e){e=k(e,f[d].filter(b));l[d].sort(e);f[d].filter(function(a){return!b(a)}).sort(function(a){return f[d].indexOf(a)}).forEach(function(a){l[d].splice(l[d].indexOf(a),
1);l[d].splice(f[d].indexOf(a),0,a)});a.emit("plotly_restyle",[{dimensions:[l[d]]},[c[d]]])}})}}},{"../../lib/prepare_regl":729,"./helpers":1087,"./parcoords":1091}],1093:[function(a,q,p){p=a("../../plots/attributes");var n=a("../../plots/domain").attributes,k=a("../../plots/font_attributes"),m=a("../../components/color/attributes"),h=a("../../plots/template_attributes").hovertemplateAttrs,b=a("../../plots/template_attributes").texttemplateAttrs;a=a("../../lib/extend").extendFlat;k=k({editType:"plot",
arrayOk:!0,colorEditType:"plot"});q.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:m.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},
hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:a({},p.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:h({},{keys:["label","color","value","percent","text"]}),texttemplate:b({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside",
"outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:a({},k,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:a({},k,{}),outsidetextfont:a({},k,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:a({},k,{}),position:{valType:"enumerated",values:"top left;top center;top right;middle center;bottom left;bottom center;bottom right".split(";"),
editType:"plot"},editType:"plot"},domain:n({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},
titlefont:a({},k,{}),titleposition:{valType:"enumerated",values:"top left;top center;top right;middle center;bottom left;bottom center;bottom right".split(";"),editType:"calc"}}}},{"../../components/color/attributes":590,"../../lib/extend":707,"../../plots/attributes":761,"../../plots/domain":789,"../../plots/font_attributes":790,"../../plots/template_attributes":840}],1094:[function(a,q,p){var n=a("../../plots/plots");p.name="pie";p.plot=function(a,m,h,b){n.plotBasePlot(p.name,a,m,h,b)};p.clean=
function(a,m,h,b){n.cleanBasePlot(p.name,a,m,h,b)}},{"../../plots/plots":825}],1095:[function(a,q,p){function n(a){return function(e,g){if(!e)return!1;e=h(e);if(!e.isValid())return!1;e=b.addOpacity(e,e.getAlpha());a[g]||(a[g]=e);return e}}function k(a,b){var e,f=JSON.stringify(a),d=b[f];if(!d){d=a.slice();for(e=0;e<a.length;e++)d.push(h(a[e]).lighten(20).toHexString());for(e=0;e<a.length;e++)d.push(h(a[e]).darken(20).toHexString());b[f]=d}return d}var m=a("fast-isnumeric"),h=a("tinycolor2"),b=a("../../components/color"),
g={};q.exports={calc:function(a,b){var e=[],f=a._fullLayout;a=f.hiddenlabels||[];var d=b.labels,c=b.marker.colors||[],g=b.values,h=b._length,k=b._hasValues&&h,t;if(b.dlabel)for(d=Array(h),t=0;t<h;t++)d[t]=String(b.label0+t*b.dlabel);var p={};f=n(f["_"+b.type+"colormap"]);var q=0,z=!1;for(t=0;t<h;t++){if(k){var x=g[t];if(!m(x))continue;x=+x;if(0>x)continue}else x=1;var C=d[t];if(void 0===C||""===C)C=t;C=String(C);var B=p[C];void 0===B?(p[C]=e.length,(B=-1!==a.indexOf(C))||(q+=x),e.push({v:x,label:C,
color:f(c[t],C),i:t,pts:[t],hidden:B})):(z=!0,B=e[B],B.v+=x,B.pts.push(t),B.hidden||(q+=x),!1===B.color&&c[t]&&(B.color=f(c[t],C)))}("funnelarea"===b.type?z:b.sort)&&e.sort(function(a,b){return b.v-a.v});e[0]&&(e[0].vTotal=q);return e},crossTraceCalc:function(a,b){(b=(b||{}).type)||(b="pie");var e=a._fullLayout;a=a.calcdata;var f=e[b+"colorway"],d=e["_"+b+"colormap"];e["extend"+b+"colors"]&&(f=k(f,g));for(var c=e=0;c<a.length;c++){var h=a[c];if(h[0].trace.type===b)for(var m=0;m<h.length;m++){var n=
h[m];!1===n.color&&(d[n.label]?n.color=d[n.label]:(d[n.label]=n.color=f[e%f.length],e++))}}},makePullColorFn:n,generateExtendedColors:k}},{"../../components/color":591,"fast-isnumeric":228,tinycolor2:535}],1096:[function(a,q,p){function n(a,b){var e=Array.isArray(a),f=m.isArrayOrTypedArray(b);a=Math.min(e?a.length:Infinity,f?b.length:Infinity);isFinite(a)||(a=0);if(a&&f){for(var d,c=0;c<a;c++){var g=b[c];if(k(g)&&0<g){d=!0;break}}d||(a=0)}return{hasLabels:e,hasValues:f,len:a}}var k=a("fast-isnumeric"),
m=a("../../lib"),h=a("./attributes"),b=a("../../plots/domain").defaults,g=a("../bar/defaults").handleText;q.exports={handleLabelsAndValues:n,supplyDefaults:function(a,k,l,f){function d(b,c){return m.coerce(a,k,h,b,c)}l=d("labels");var c=d("values");l=n(l,c);c=l.len;k._hasLabels=l.hasLabels;k._hasValues=l.hasValues;!k._hasLabels&&k._hasValues&&(d("label0"),d("dlabel"));if(c){k._length=c;d("marker.line.width")&&d("marker.line.color");d("marker.colors");d("scalegroup");l=d("text");c=d("texttemplate");
var e;c||(e=d("textinfo",Array.isArray(l)?"text+percent":"percent"));d("hovertext");d("hovertemplate");if(c||e&&"none"!==e)e=d("textposition"),g(a,k,f,d,e,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(e)||"auto"===e||"outside"===e)&&d("automargin"),("inside"===e||"auto"===e||Array.isArray(e))&&d("insidetextorientation");b(k,f,d);e=d("hole");d("title.text")&&(l=d("title.position",e?"middle center":
"top center"),e||"middle center"!==l||(k.title.position="top center"),m.coerceFont(d,"title.font",f.font));d("sort");d("direction");d("rotation");d("pull")}else k.visible=!1}}},{"../../lib":716,"../../plots/domain":789,"../bar/defaults":859,"./attributes":1093,"fast-isnumeric":228}],1097:[function(a,q,p){var n=a("../../components/fx/helpers").appendArrayMultiPointValues;q.exports=function(a,m){var h={curveNumber:m.index,pointNumbers:a.pts,data:m._input,fullData:m,label:a.label,color:a.color,value:a.v,
percent:a.percent,text:a.text,v:a.v};1===a.pts.length&&(h.pointNumber=h.i=a.pts[0]);n(h,m,a.pts);"funnelarea"===m.type&&(delete h.v,delete h.i);return h}},{"../../components/fx/helpers":626}],1098:[function(a,q,p){var n=a("../../lib");p.formatPiePercent=function(a,m){a=(100*a).toPrecision(3);-1!==a.lastIndexOf(".")&&(a=a.replace(/[.]?0+$/,""));return n.numSeparate(a,m)+"%"};p.formatPieValue=function(a,m){a=a.toPrecision(10);-1!==a.lastIndexOf(".")&&(a=a.replace(/[.]?0+$/,""));return n.numSeparate(a,
m)};p.getFirstFilled=function(a,m){if(Array.isArray(a))for(var h=0;h<m.length;h++){var b=a[m[h]];if(b||0===b||""===b)return b}};p.castOption=function(a,m){if(Array.isArray(a))return p.getFirstFilled(a,m);if(a)return a}},{"../../lib":716}],1099:[function(a,q,p){q.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults").supplyDefaults,supplyLayoutDefaults:a("./layout_defaults"),layoutAttributes:a("./layout_attributes"),calc:a("./calc").calc,crossTraceCalc:a("./calc").crossTraceCalc,plot:a("./plot").plot,
style:a("./style"),styleOne:a("./style_one"),moduleType:"trace",name:"pie",basePlotModule:a("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":1093,"./base_plot":1094,"./calc":1095,"./defaults":1096,"./layout_attributes":1100,"./layout_defaults":1101,"./plot":1102,"./style":1103,"./style_one":1104}],1100:[function(a,q,p){q.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",
dflt:!0,editType:"calc"}}},{}],1101:[function(a,q,p){var n=a("../../lib"),k=a("./layout_attributes");q.exports=function(a,h){n.coerce(a,h,k,"hiddenlabels",void 0);n.coerce(a,h,k,"piecolorway",h.colorway);n.coerce(a,h,k,"extendpiecolors",void 0)}},{"../../lib":716,"./layout_attributes":1100}],1102:[function(a,q,p){function n(a,b){a.each(function(a){var c=x.select(this);if(a.labelExtraX||a.labelExtraY){var d=c.select("g.slicetext text");a.transform.targetX+=a.labelExtraX;a.transform.targetY+=a.labelExtraY;
d.attr("transform",E.getTextTransform(a.transform));d=a.cxFinal+a.pxmid[0];var e="M"+d+","+(a.cyFinal+a.pxmid[1]),f=(a.yLabelMax-a.yLabelMin)*(0>a.pxmid[0]?-1:1)/4;if(a.labelExtraX){var g=a.labelExtraX*a.pxmid[1]/a.pxmid[0],h=a.yLabelMid+a.labelExtraY-(a.cyFinal+a.pxmid[1]);e=Math.abs(g)>Math.abs(h)?e+("l"+h*a.pxmid[0]/a.pxmid[1]+","+h+"H"+(d+a.labelExtraX+f)):e+("l"+a.labelExtraX+","+g+"v"+(h-g)+"h"+f)}else e+="V"+(a.yLabelMid+a.labelExtraY)+"h"+f;E.ensureSingle(c,"path","textline").call(D.stroke,
b.outsidetextfont.color).attr({"stroke-width":Math.min(2,b.outsidetextfont.size/8),d:e,fill:"none"})}else c.select("path.textline").remove()})}function k(a,b,c){var d=c[0],e=d.trace,f=d.cx,g=d.cy;"_hasHoverLabel"in e||(e._hasHoverLabel=!1);"_hasHoverEvent"in e||(e._hasHoverEvent=!1);a.on("mouseover",function(a){var c=b._fullLayout,h=b._fullData[e.index];if(!b._dragging&&!1!==c.hovermode){var k=h.hoverinfo;Array.isArray(k)&&(k=B.castHoverinfo({hoverinfo:[H.castOption(k,a.pts)],_module:e._module},c,
0));"all"===k&&(k="label+text+value+percent+name");if(h.hovertemplate||"none"!==k&&"skip"!==k&&k){var l=a.rInscribed||0,m=f+a.pxmid[0]*(1-l),n=g+a.pxmid[1]*(1-l),r=c.separators,t=[];k&&-1!==k.indexOf("label")&&t.push(a.label);a.text=H.castOption(h.hovertext||h.text,a.pts);if(k&&-1!==k.indexOf("text")){var p=a.text;E.isValidTextValue(p)&&t.push(p)}a.value=a.v;a.valueLabel=H.formatPieValue(a.v,r);k&&-1!==k.indexOf("value")&&t.push(a.valueLabel);a.percent=a.v/d.vTotal;a.percentLabel=H.formatPiePercent(a.percent,
r);k&&-1!==k.indexOf("percent")&&t.push(a.percentLabel);r=h.hoverlabel;p=r.font;B.loneHover({trace:e,x0:m-l*d.r,x1:m+l*d.r,y:n,text:t.join("\x3cbr\x3e"),name:h.hovertemplate||-1!==k.indexOf("name")?h.name:void 0,idealAlign:0>a.pxmid[0]?"left":"right",color:H.castOption(r.bgcolor,a.pts)||a.color,borderColor:H.castOption(r.bordercolor,a.pts),fontFamily:H.castOption(p.family,a.pts),fontSize:H.castOption(p.size,a.pts),fontColor:H.castOption(p.color,a.pts),nameLength:H.castOption(r.namelength,a.pts),textAlign:H.castOption(r.align,
a.pts),hovertemplate:H.castOption(h.hovertemplate,a.pts),hovertemplateLabels:a,eventData:[K(a,h)]},{container:c._hoverlayer.node(),outerContainer:c._paper.node(),gd:b});e._hasHoverLabel=!0}e._hasHoverEvent=!0;b.emit("plotly_hover",{points:[K(a,h)],event:x.event})}});a.on("mouseout",function(a){var c=b._fullLayout,d=b._fullData[e.index],f=x.select(this).datum();e._hasHoverEvent&&(a.originalEvent=x.event,b.emit("plotly_unhover",{points:[K(f,d)],event:x.event}),e._hasHoverEvent=!1);e._hasHoverLabel&&
(B.loneUnhover(c._hoverlayer.node()),e._hasHoverLabel=!1)});a.on("click",function(a){var c=b._fullLayout;b._dragging||!1===c.hovermode||(b._hoverdata=[K(a,b._fullData[e.index])],B.click(b,x.event))})}function m(a,b,c){var d=H.castOption(a.outsidetextfont.color,b.pts)||H.castOption(a.textfont.color,b.pts)||c.color,e=H.castOption(a.outsidetextfont.family,b.pts)||H.castOption(a.textfont.family,b.pts)||c.family;a=H.castOption(a.outsidetextfont.size,b.pts)||H.castOption(a.textfont.size,b.pts)||c.size;
return{color:d,family:e,size:a}}function h(a,b,c){var d=H.castOption(a.insidetextfont.color,b.pts);!d&&a._input.textfont&&(d=H.castOption(a._input.textfont.color,b.pts));var e=H.castOption(a.insidetextfont.family,b.pts)||H.castOption(a.textfont.family,b.pts)||c.family;a=H.castOption(a.insidetextfont.size,b.pts)||H.castOption(a.textfont.size,b.pts)||c.size;return{color:d||D.contrast(b.color),family:e,size:a}}function b(a,b){for(var c,d,e=0;e<a.length;e++)if(c=a[e][0],d=c.trace,d.title.text){var f=
d.title.text;d._meta&&(f=E.templateString(f,d._meta));d=G.tester.append("text").attr("data-notex",1).text(f).call(G.font,d.title.font).call(F.convertToTspans,b);f=G.bBox(d.node(),!0);c.titleBox={width:f.width,height:f.height};d.remove()}}function g(a,b,c){var d=c.r||b.rpx1,f=b.rInscribed;if(b.startangle===b.stopangle)return{rCenter:1-f,scale:0,rotate:0,textPosAngle:0};var g=b.ring,h=1===g&&Math.abs(b.startangle-b.stopangle)===2*Math.PI,k=b.halfangle,l=b.midangle;c=c.trace.insidetextorientation;var m=
"horizontal"===c,n="tangential"===c,r="radial"===c;c="auto"===c;var p=[];if(!c){var q=function(c,f){var h=b.startangle,k=b.stopangle;if(h>c&&c>k||h<c&&c<k)h=Math.abs(c-b.startangle),k=Math.abs(c-b.stopangle),h=h<k?h:k,v="tan"===f?t(a,d,g,h,0):e(a,d,g,h,Math.PI/2),v.textPosAngle=c,p.push(v)},u;if(m||n){for(u=4;-4<=u;u-=2)q(Math.PI*u,"tan");for(u=4;-4<=u;u-=2)q(Math.PI*(u+1),"tan")}if(m||r){for(u=4;-4<=u;u-=2)q(Math.PI*(u+1.5),"rad");for(u=4;-4<=u;u-=2)q(Math.PI*(u+.5),"rad")}}if(h||c||m){var v={scale:f*
d*2/Math.sqrt(a.width*a.width+a.height*a.height),rCenter:1-f,rotate:0};v.textPosAngle=(b.startangle+b.stopangle)/2;if(1<=v.scale)return v;p.push(v)}if(c||r)v=e(a,d,g,k,l),v.textPosAngle=(b.startangle+b.stopangle)/2,p.push(v);if(c||n)v=t(a,d,g,k,l),v.textPosAngle=(b.startangle+b.stopangle)/2,p.push(v);for(k=h=f=0;k<p.length&&(l=p[k].scale,h<l&&(h=l,f=k),c||!(1<=h));k++);return p[f]}function e(a,b,c,d,e){var f=a.width/a.height;c=l(f,d,b,c);b=c/b;return{scale:2*c/a.height,rCenter:Math.cos(b)-f*b,rotate:(180/
Math.PI*e+720)%180-90}}function t(a,b,c,d,e){var f=a.height/a.width;c=l(f,d,b,c);b=c/b;return{scale:2*c/a.width,rCenter:Math.cos(b)-f*b,rotate:(180/Math.PI*(e+Math.PI/2)+720)%180-90}}function l(a,b,c,d){b=a+1/(2*Math.tan(b));return c*Math.min(1/(Math.sqrt(b*b+.5)+b),d/(Math.sqrt(a*a+d/2)+a))}function f(a,b){var c=b.pxmid[0];b=b.pxmid[1];var d=a.width/2;a=a.height/2;0>c&&(d*=-1);0>b&&(a*=-1);return{scale:1,rCenter:1,rotate:0,x:d+Math.abs(a)*(0<d?1:-1)/2,y:a/(1+c*c/(b*b)),outside:!0}}function d(a,b){var d=
a.trace,e=a.cx,f=a.cy,g=0;var h=0+d.title.font.size;var k=r(d);-1!==d.title.position.indexOf("top")?(f-=(1+k)*a.r,h-=a.titleBox.height):-1!==d.title.position.indexOf("bottom")&&(f+=(1+k)*a.r);var l=a.trace.aspectratio;l=a.r/(void 0===l?1:l);var m=b.w*(d.domain.x[1]-d.domain.x[0])/2;-1!==d.title.position.indexOf("left")?(m+=l,e-=(1+k)*l,g+=a.titleBox.width/2):-1!==d.title.position.indexOf("center")?m*=2:-1!==d.title.position.indexOf("right")&&(m+=l,e+=(1+k)*l,g-=a.titleBox.width/2);k=m/a.titleBox.width;
a=c(a,b)/a.titleBox.height;return{x:e,y:f,scale:Math.min(k,a),tx:g,ty:h}}function c(a,b){var c=a.trace;return Math.min(a.titleBox.height,b.h*(c.domain.y[1]-c.domain.y[0])/2)}function r(a){var b=a.pull;if(!b)return 0;var c;if(Array.isArray(b))for(c=b=0;c<a.pull.length;c++)a.pull[c]>b&&(b=a.pull[c]);return b}function u(a,b){function c(a,b){return a.pxmid[1]-b.pxmid[1]}function d(a,b){return b.pxmid[1]-a.pxmid[1]}function e(a,c){c||(c={});var d=c.labelExtraY+(g?c.yLabelMax:c.yLabelMin);c=g?a.yLabelMin:
a.yLabelMax;var e=g?a.yLabelMax:a.yLabelMin,f=a.cyFinal+l(a.px0[1],a.px1[1]),h=d-c;0<h*m&&(a.labelExtraY=h);if(Array.isArray(b.pull))for(d=0;d<q.length;d++){var k=q[d];k===a||(H.castOption(b.pull,a.pts)||0)>=(H.castOption(b.pull,k.pts)||0)||(0<(a.pxmid[1]-k.pxmid[1])*m?(h=k.cyFinal+l(k.px0[1],k.px1[1]),h=h-c-a.labelExtraY,0<h*m&&(a.labelExtraY+=h)):0<(e+a.labelExtraY-f)*m&&(h=3*r*Math.abs(d-q.indexOf(a)),k=k.cxFinal+n(k.px0[0],k.px1[0]),h=k+h-(a.cxFinal+a.pxmid[0])-a.labelExtraX,0<h*r&&(a.labelExtraX+=
h)))}}var f,g,h;for(g=0;2>g;g++){var k=g?c:d;var l=g?Math.max:Math.min;var m=g?1:-1;for(f=0;2>f;f++){var n=f?Math.max:Math.min;var r=f?1:-1;var t=a[g][f];t.sort(k);var p=a[1-g][f];var q=p.concat(t);var u=[];for(h=0;h<t.length;h++)void 0!==t[h].yLabelMid&&u.push(t[h]);t=!1;for(h=0;g&&h<p.length;h++)if(void 0!==p[h].yLabelMid){t=p[h];break}for(h=0;h<u.length;h++)p=h&&u[h-1],t&&!h&&(p=t),e(u[h],p)}}}function v(a,b){for(var d=[],e=0;e<a.length;e++){var f=a[e][0],g=f.trace,h=g.domain,k=b.w*(h.x[1]-h.x[0]);
h=b.h*(h.y[1]-h.y[0]);g.title.text&&"middle center"!==g.title.position&&(h-=c(f,b));k/=2;var l=h/2;"funnelarea"!==g.type||g.scalegroup||(l/=g.aspectratio);f.r=Math.min(k,l)/(1+r(g));f.cx=b.l+b.w*(g.domain.x[1]+g.domain.x[0])/2;f.cy=b.t+b.h*(1-g.domain.y[0])-h/2;g.title.text&&-1!==g.title.position.indexOf("bottom")&&(f.cy-=c(f,b));g.scalegroup&&-1===d.indexOf(g.scalegroup)&&d.push(g.scalegroup)}for(g=0;g<d.length;g++){h=Infinity;k=d[g];for(e=0;e<a.length;e++)if(b=a[e][0],f=b.trace,f.scalegroup===k){if("pie"===
f.type)var m=b.r*b.r;else"funnelarea"===f.type&&(1<f.aspectratio?(m=b.r,l=m/f.aspectratio):(l=b.r,m=l*f.aspectratio),m*=(1+f.baseratio)/2,m*=l);h=Math.min(h,m/b.vTotal)}for(e=0;e<a.length;e++)b=a[e][0],f=b.trace,f.scalegroup===k&&(l=h*b.vTotal,"funnelarea"===f.type&&(l/=(1+f.baseratio)/2,l/=f.aspectratio),b.r=Math.sqrt(l))}}function w(a){var b=a[0],c=b.r,d=b.trace,e=d.rotation*Math.PI/180,f=2*Math.PI/b.vTotal,g="px0",h="px1",k;if("counterclockwise"===d.direction){for(k=0;k<a.length&&a[k].hidden;k++);
if(k===a.length)return;e+=f*a[k].v;f*=-1;g="px1";h="px0"}var l=y(c,e);for(k=0;k<a.length;k++){var m=a[k];if(!m.hidden){m[g]=l;m.startangle=e;e+=f*m.v/2;m.pxmid=y(c,e);m.midangle=e;e+=f*m.v/2;l=y(c,e);m.stopangle=e;m[h]=l;m.largeArc=m.v>b.vTotal/2?1:0;m.halfangle=Math.PI*Math.min(m.v/b.vTotal,.5);m.ring=1-d.hole;var n=m;m=m.v!==b.vTotal||b.trace.hole?Math.min(1/(1+1/Math.sin(m.halfangle)),m.ring/2):1;n.rInscribed=m}}}function y(a,b){return[a*Math.sin(b),-a*Math.cos(b)]}function A(a,b,c){var d=a._fullLayout,
e=c.trace,f=e.texttemplate,g=e.textinfo;if(!f&&g&&"none"!==g){var h=g.split("+"),k=-1!==h.indexOf("label"),l=-1!==h.indexOf("text");g=-1!==h.indexOf("value");h=-1!==h.indexOf("percent");var m=d.separators;k=k?[b.label]:[];l&&(l=H.getFirstFilled(e.text,b.pts),M(l)&&k.push(l));g&&k.push(H.formatPieValue(b.v,m));h&&k.push(H.formatPiePercent(b.v/c.vTotal,m));b.text=k.join("\x3cbr\x3e")}if(f)if(f=E.castOption(e,b.i,"texttemplate")){c={label:b.label,value:b.v,valueLabel:H.formatPieValue(b.v,d.separators),
percent:b.v/c.vTotal,percentLabel:H.formatPiePercent(b.v/c.vTotal,d.separators),color:b.color,text:b.text,customdata:E.castOption(e,b.i,"customdata")};d=H.getFirstFilled(e.text,b.pts);if(M(d)||""===d)c.text=d;b.text=E.texttemplateString(f,c,a._fullLayout._d3locale,c,e._meta||{})}else b.text=""}function z(a,b){var c=a.rotate*Math.PI/180,d=Math.cos(c);c=Math.sin(c);var e=(b.left+b.right)/2;b=(b.top+b.bottom)/2;a.textX=e*d-b*c;a.textY=e*c+b*d;a.noCenter=!0}var x=a("d3"),C=a("../../plots/plots"),B=a("../../components/fx"),
D=a("../../components/color"),G=a("../../components/drawing"),E=a("../../lib"),F=a("../../lib/svg_text_utils");p=a("../bar/uniform_text");var L=p.recordMinTextSize,J=p.clearMinTextSize,H=a("./helpers"),K=a("./event_data"),M=a("../../lib").isValidTextValue;q.exports={plot:function(a,c){var e=a._fullLayout,l=e._size;J("pie",e);b(c,a);v(c,l);var r=E.makeTraceGroups(e._pielayer,c,"trace").each(function(b){var c=x.select(this),r=b[0],t=r.trace;w(b);c.attr("stroke-linejoin","round");c.each(function(){var p=
x.select(this).selectAll("g.slice").data(b);p.enter().append("g").classed("slice",!0);p.exit().remove();var q=[[[],[]],[[],[]]],v=!1;p.each(function(c,d){function l(a,b,d,e){return"a"+e*r.r+","+e*r.r+" 0 "+c.largeArc+(d?" 1 ":" 0 ")+e*(b[0]-a[0])+","+e*(b[1]-a[1])}if(c.hidden)x.select(this).selectAll("path,g").remove();else{c.pointNumber=c.i;c.curveNumber=t.index;q[0>c.pxmid[1]?0:1][0>c.pxmid[0]?0:1].push(c);var n=r.cx,p=r.cy,u=x.select(this),w=u.selectAll("path.surface").data([c]);w.enter().append("path").classed("surface",
!0).style({"pointer-events":"all"});u.call(k,a,b);if(t.pull){var B=+H.castOption(t.pull,c.pts)||0;0<B&&(n+=B*c.pxmid[0],p+=B*c.pxmid[1])}c.cxFinal=n;c.cyFinal=p;B=t.hole;if(c.v===r.vTotal){var C="M"+(n+c.px0[0])+","+(p+c.px0[1])+l(c.px0,c.pxmid,!0,1)+l(c.pxmid,c.px0,!0,1)+"Z";B?w.attr("d","M"+(n+B*c.px0[0])+","+(p+B*c.px0[1])+l(c.px0,c.pxmid,!1,B)+l(c.pxmid,c.px0,!1,B)+"Z"+C):w.attr("d",C)}else if(C=l(c.px0,c.px1,!0,1),B){var D=1-B;w.attr("d","M"+(n+B*c.px1[0])+","+(p+B*c.px1[1])+l(c.px1,c.px0,!1,
B)+"l"+D*c.px0[0]+","+D*c.px0[1]+C+"Z")}else w.attr("d","M"+n+","+p+"l"+c.px0[0]+","+c.px0[1]+C+"Z");A(a,c,r);var J=H.castOption(t.textposition,c.pts);u=u.selectAll("g.slicetext").data(c.text&&"none"!==J?[0]:[]);u.enter().append("g").classed("slicetext",!0);u.exit().remove();u.each(function(){var k=E.ensureSingle(x.select(this),"text","",function(a){a.attr("data-notex",1)}),l=E.ensureUniformFontSize(a,"outside"===J?m(t,c,e.font):h(t,c,e.font));k.text(c.text).attr({"class":"slicetext",transform:"",
"text-anchor":"middle"}).call(G.font,l).call(F.convertToTspans,a);var q=G.bBox(k.node());if("outside"===J)var u=f(q,c);else u=g(q,c,r),"auto"===J&&1>u.scale&&(q=E.ensureUniformFontSize(a,t.outsidetextfont),k.call(G.font,q),q=G.bBox(k.node()),u=f(q,c));var w=u.textPosAngle;w=void 0===w?c.pxmid:y(r.r,w);u.targetX=n+w[0]*u.rCenter+(u.x||0);u.targetY=p+w[1]*u.rCenter+(u.y||0);z(u,q);u.outside&&(w=u.targetY,c.yLabelMin=w-q.height/2,c.yLabelMid=w,c.yLabelMax=w+q.height/2,c.labelExtraX=0,c.labelExtraY=0,
v=!0);u.fontSize=l.size;L(t.type,u,e);b[d].transform=u;k.attr("transform",E.getTextTransform(u))})}});var w=x.select(this).selectAll("g.titletext").data(t.title.text?[0]:[]);w.enter().append("g").classed("titletext",!0);w.exit().remove();w.each(function(){var b=E.ensureSingle(x.select(this),"text","",function(a){a.attr("data-notex",1)}),c=t.title.text;t._meta&&(c=E.templateString(c,t._meta));b.text(c).attr({"class":"titletext",transform:"","text-anchor":"middle"}).call(G.font,t.title.font).call(F.convertToTspans,
a);c="middle center"===t.title.position?{x:r.cx,y:r.cy,scale:r.trace.hole*r.r*2/Math.sqrt(r.titleBox.width*r.titleBox.width+r.titleBox.height*r.titleBox.height),tx:0,ty:-r.titleBox.height/2+r.trace.title.font.size}:d(r,l);b.attr("transform","translate("+c.x+","+c.y+")"+(1>c.scale?"scale("+c.scale+")":"")+"translate("+c.tx+","+c.ty+")")});v&&u(q,t);n(p,t);if(v&&t.automargin){p=G.bBox(c.node());w=t.domain;var B=(.5*l.w*(w.x[1]-w.x[0])-r.r)/l.w,D=(.5*l.h*(w.y[1]-w.y[0])-r.r)/l.h;C.autoMargin(a,"pie."+
t.uid+".automargin",{xl:w.x[0]-B,xr:w.x[1]+B,yb:w.y[0]-D,yt:w.y[1]+D,l:Math.max(r.cx-r.r-p.left,0),r:Math.max(p.right-(r.cx+r.r),0),b:Math.max(p.bottom-(r.cy+r.r),0),t:Math.max(r.cy-r.r-p.top,0),pad:5})}})});setTimeout(function(){r.selectAll("tspan").each(function(){var a=x.select(this);a.attr("dy")&&a.attr("dy",a.attr("dy"))})},0)},formatSliceLabel:A,transformInsideText:g,determineInsideTextFont:h,positionTitleOutside:d,prerenderTitles:b,layoutAreas:v,attachFxHandlers:k,computeTransform:z}},{"../../components/color":591,
"../../components/drawing":612,"../../components/fx":629,"../../lib":716,"../../lib/svg_text_utils":740,"../../plots/plots":825,"../bar/uniform_text":871,"./event_data":1097,"./helpers":1098,d3:165}],1103:[function(a,q,p){var n=a("d3"),k=a("./style_one"),m=a("../bar/uniform_text").resizeText;q.exports=function(a){var b=a._fullLayout._pielayer.selectAll(".trace");m(a,b,"pie");b.each(function(a){var b=a[0].trace;a=n.select(this);a.style({opacity:b.opacity});a.selectAll("path.surface").each(function(a){n.select(this).call(k,
a,b)})})}},{"../bar/uniform_text":871,"./style_one":1104,d3:165}],1104:[function(a,q,p){var n=a("../../components/color"),k=a("./helpers").castOption;q.exports=function(a,h,b){var g=b.marker.line;b=k(g.color,h.pts)||n.defaultLine;g=k(g.width,h.pts)||0;a.style("stroke-width",g).call(n.fill,h.color).call(n.stroke,b)}},{"../../components/color":591,"./helpers":1098}],1105:[function(a,q,p){a=a("../scatter/attributes");q.exports={x:a.x,y:a.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",
editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:a.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",
min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":1119}],1106:[function(a,q,p){function n(a,b){this.scene=a;this.uid=b;this.type="pointcloud";this.pickXData=[];this.pickYData=[];this.xData=[];this.yData=[];this.textLabels=[];this.color="rgb(0, 0, 0)";this.name="";this.hoverinfo="all";this.idToIndex=new Int32Array(0);this.bounds=[0,0,0,0];this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,
color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]};this.pointcloud=k(a.glplot,this.pointcloudOptions);this.pointcloud._trace=this}var k=a("gl-pointcloud2d"),m=a("../../lib/str2rgbarray"),h=a("../../plots/cartesian/autorange").findExtremes,b=a("../scatter/get_trace_color");a=n.prototype;a.handlePick=function(a){var b=this.idToIndex[a.pointId];return{trace:this,dataCoord:a.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*b],this.pickXYData[2*b+1]]:[this.pickXData[b],this.pickYData[b]],textLabel:Array.isArray(this.textLabels)?
this.textLabels[b]:this.textLabels,color:this.color,name:this.name,pointIndex:b,hoverinfo:this.hoverinfo}};a.update=function(a){this.index=a.index;this.textLabels=a.text;this.name=a.name;this.hoverinfo=a.hoverinfo;this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.updateFast(a);this.color=b(a,{})};a.updateFast=function(a){var b=this.xData=this.pickXData=a.x,g=this.yData=this.pickYData=a.y,k=this.pickXYData=a.xy,f=a.xbounds&&a.ybounds,d=a.indices,c=this.bounds,n;if(k){var p=k;k=k.length>>>1;
if(f)c[0]=a.xbounds[0],c[2]=a.xbounds[1],c[1]=a.ybounds[0],c[3]=a.ybounds[1];else for(n=0;n<k;n++){f=p[2*n];var q=p[2*n+1];f<c[0]&&(c[0]=f);f>c[2]&&(c[2]=f);q<c[1]&&(c[1]=q);q>c[3]&&(c[3]=q)}if(!d)for(d=new Int32Array(k),n=0;n<k;n++)d[n]=n}else for(k=b.length,p=new Float32Array(2*k),d=new Int32Array(k),n=0;n<k;n++)f=b[n],q=g[n],d[n]=n,p[2*n]=f,p[2*n+1]=q,f<c[0]&&(c[0]=f),f>c[2]&&(c[2]=f),q<c[1]&&(c[1]=q),q>c[3]&&(c[3]=q);this.idToIndex=d;this.pointcloudOptions.idToIndex=d;this.pointcloudOptions.positions=
p;k=m(a.marker.color);p=m(a.marker.border.color);d=a.opacity*a.marker.opacity;k[3]*=d;this.pointcloudOptions.color=k;k=a.marker.blend;null===k&&(k=100>b.length||100>g.length);this.pointcloudOptions.blend=k;p[3]*=d;this.pointcloudOptions.borderColor=p;p=Math.max(a.marker.sizemax,a.marker.sizemin);this.pointcloudOptions.sizeMin=a.marker.sizemin;this.pointcloudOptions.sizeMax=p;this.pointcloudOptions.areaRatio=a.marker.border.arearatio;this.pointcloud.update(this.pointcloudOptions);b=this.scene.xaxis;
g=this.scene.yaxis;p=p/2||.5;a._extremes[b._id]=h(b,[c[0],c[2]],{ppad:p});a._extremes[g._id]=h(g,[c[1],c[3]],{ppad:p})};a.dispose=function(){this.pointcloud.dispose()};q.exports=function(a,b){a=new n(a,b.uid);a.update(b);return a}},{"../../lib/str2rgbarray":739,"../../plots/cartesian/autorange":763,"../scatter/get_trace_color":1129,"gl-pointcloud2d":295}],1107:[function(a,q,p){var n=a("../../lib"),k=a("./attributes");q.exports=function(a,h,b){function g(b,g){return n.coerce(a,h,k,b,g)}g("x");g("y");
g("xbounds");g("ybounds");a.xy&&a.xy instanceof Float32Array&&(h.xy=a.xy);a.indices&&a.indices instanceof Int32Array&&(h.indices=a.indices);g("text");g("marker.color",b);g("marker.opacity");g("marker.blend");g("marker.sizemin");g("marker.sizemax");g("marker.border.color",b);g("marker.border.arearatio");h._length=null}},{"../../lib":716,"./attributes":1105}],1108:[function(a,q,p){q.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),calc:a("../scatter3d/calc"),plot:a("./convert"),
moduleType:"trace",name:"pointcloud",basePlotModule:a("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":802,"../scatter3d/calc":1147,"./attributes":1105,"./convert":1106,"./defaults":1107}],1109:[function(a,q,p){p=a("../../plots/font_attributes");var n=a("../../plots/attributes"),k=a("../../components/color/attributes"),m=a("../../components/fx/attributes"),h=a("../../plots/domain").attributes,b=a("../../plots/template_attributes").hovertemplateAttrs,g=a("../../components/colorscale/attributes"),
e=a("../../plot_api/plot_template").templatedArray,t=a("../../lib/extend").extendFlat,l=a("../../plot_api/edit_types").overrideAll;a("../../constants/docs");(q.exports=l({hoverinfo:t({},n.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:m.hoverlabel,domain:h({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s"},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],
dflt:"snap"},textfont:p({}),node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},line:{color:{valType:"color",dflt:k.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,
min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:m.hoverlabel,hovertemplate:b({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},line:{color:{valType:"color",dflt:k.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all",
"none","skip"],dflt:"all"},hoverlabel:m.hoverlabel,hovertemplate:b({},{keys:["value","label"]}),colorscales:e("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:t(g().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":590,"../../components/colorscale/attributes":598,"../../components/fx/attributes":621,
"../../constants/docs":687,"../../lib/extend":707,"../../plot_api/edit_types":747,"../../plot_api/plot_template":754,"../../plots/attributes":761,"../../plots/domain":789,"../../plots/font_attributes":790,"../../plots/template_attributes":840}],1110:[function(a,q,p){function n(a,d){var c=a._fullData[d],f=a._fullLayout,h=f.dragmode,k=c._bgRect;if("pan"!==h&&"zoom"!==h){b(k,"pan"===f.dragmode?"move":"crosshair");f={_id:"x",c2p:t.identity,_offset:c._sankey.translateX,_length:c._sankey.width};c={_id:"y",
c2p:t.identity,_offset:c._sankey.translateY,_length:c._sankey.height};var m={gd:a,element:k.node(),plotinfo:{id:d,xaxis:f,yaxis:c,fillRangeItems:t.noop},subplot:d,xaxes:[f],yaxes:[c],doneFnCompleted:function(b){for(var c=a._fullData[d],e=c.node.groups.slice(),f=[],g=0;g<b.length;g++){a:{var h=c._sankey.graph.nodes;for(var k=0;k<h.length;k++)if(h[k].pointNumber===b[g].pointNumber){h=h[k];break a}h=void 0}if(h)if(h.group){for(k=0;k<h.childrenNodes.length;k++)f.push(h.childrenNodes[k].pointNumber);e[h.pointNumber-
c.node._count]=!1}else f.push(h.pointNumber)}b=e.filter(Boolean).concat([f]);l.call("_guiRestyle",a,{"node.groups":[b]},d)},prepFn:function(a,b,c){e(a,b,c,m,h)}};g.init(m)}}q=a("../../plot_api/edit_types").overrideAll;var k=a("../../plots/get_data").getModuleCalcData,m=a("./plot"),h=a("../../components/fx/layout_attributes"),b=a("../../lib/setcursor"),g=a("../../components/dragelement"),e=a("../../plots/cartesian/select").prepSelect,t=a("../../lib"),l=a("../../registry");p.name="sankey";p.baseLayoutAttrOverrides=
q({hoverlabel:h.hoverlabel},"plot","nested");p.plot=function(a){var b=k(a.calcdata,"sankey")[0];m(a,b);p.updateFx(a)};p.clean=function(a,b,c,e){a=e._has&&e._has("sankey");b=b._has&&b._has("sankey");a&&!b&&(e._paperdiv.selectAll(".sankey").remove(),e._paperdiv.selectAll(".bgsankey").remove())};p.updateFx=function(a){for(var b=0;b<a._fullData.length;b++)n(a,b)}},{"../../components/dragelement":609,"../../components/fx/layout_attributes":630,"../../lib":716,"../../lib/setcursor":736,"../../plot_api/edit_types":747,
"../../plots/cartesian/select":781,"../../plots/get_data":799,"../../registry":845,"./plot":1115}],1111:[function(a,q,p){function n(a,b,e){for(var d=m.init2dArray(a,0),c=0;c<Math.min(b.length,e.length);c++)if(m.isIndex(b[c],a)&&m.isIndex(e[c],a)){if(b[c]===e[c])return!0;d[b[c]].push(e[c])}return k(d).components.some(function(a){return 1<a.length})}var k=a("strongly-connected-components"),m=a("../../lib"),h=a("../../lib/gup").wrap,b=m.isArrayOrTypedArray,g=m.isIndex,e=a("../../components/colorscale");
q.exports=function(a,k){var f=k.node,d=k.link;a=[];var c=b(d.color),l={},t={},p=d.colorscales.length,q;for(q=0;q<p;q++){var y=d.colorscales[q],A=e.extractScale(y,{cLetter:"c"});A=e.makeColorScaleFunc(A);t[y.label]=A}for(q=p=0;q<d.value.length;q++)d.source[q]>p&&(p=d.source[q]),d.target[q]>p&&(p=d.target[q]);p+=1;k.node._count=p;k=k.node.groups;y={};for(q=0;q<k.length;q++){var z=k[q];for(A=0;A<z.length;A++){var x=z[A],C=p+q;y.hasOwnProperty(x)?m.warn("Node "+x+" is already part of a group."):y[x]=
C}}A=[];z=[];for(q=0;q<d.value.length;q++){x=d.value[q];C=d.source[q];var B=d.target[q];if(0<x&&g(C,p)&&g(B,p)&&(!y.hasOwnProperty(C)||!y.hasOwnProperty(B)||y[C]!==y[B])){y.hasOwnProperty(B)&&(B=y[B]);y.hasOwnProperty(C)&&(C=y[C]);C=+C;B=+B;l[C]=l[B]=!0;var D="";d.label&&d.label[q]&&(D=d.label[q]);var G=null;D&&t.hasOwnProperty(D)&&(G=t[D]);a.push({pointNumber:q,label:D,color:c?d.color[q]:d.color,concentrationscale:G,source:C,target:B,value:+x});A.push(C);z.push(B)}}d=p+k.length;t=b(f.color);c=[];
for(q=0;q<d;q++)l[q]&&c.push({group:q>p-1,childrenNodes:[],pointNumber:q,label:f.label[q],color:t?f.color[q]:f.color});f=!1;n(d,A,z)&&(f=!0);return h({circular:f,_nodes:c,_links:a,_groups:k,_groupLookup:y})}},{"../../components/colorscale":603,"../../lib":716,"../../lib/gup":714,"strongly-connected-components":528}],1112:[function(a,q,p){q.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",
cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeCapture:"node-capture",nodeCentered:"node-entered",nodeLabelGuide:"node-label-guide",nodeLabel:"node-label",nodeLabelTextPath:"node-label-text-path"}}},{}],1113:[function(a,q,p){function n(a,b){function c(c,d){return k.coerce(a,b,m.link.colorscales,c,d)}c("label");c("cmin");c("cmax");c("colorscale")}var k=a("../../lib"),m=a("./attributes"),h=a("../../components/color"),
b=a("tinycolor2"),g=a("../../plots/domain").defaults,e=a("../../components/fx/hoverlabel_defaults"),t=a("../../plot_api/plot_template"),l=a("../../plots/array_container_defaults");q.exports=function(a,d,c,r){function f(b,c){return k.coerce(a,d,m,b,c)}function p(a,b){return k.coerce(y,A,m.node,a,b)}function q(a,b){return k.coerce(x,C,m.link,a,b)}c=k.extendDeep(r.hoverlabel,a.hoverlabel);var y=a.node,A=t.newContainer(d,"node");p("label");p("groups");p("x");p("y");p("pad");p("thickness");p("line.color");
p("line.width");p("hoverinfo",a.hoverinfo);e(y,A,p,c);p("hovertemplate");var z=r.colorway;p("color",A.label.map(function(a,b){return h.addOpacity(z[b%z.length],.8)}));var x=a.link||{},C=t.newContainer(d,"link");q("label");q("source");q("target");q("value");q("line.color");q("line.width");q("hoverinfo",a.hoverinfo);e(x,C,q,c);q("hovertemplate");c=.333>b(r.paper_bgcolor).getLuminance()?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";q("color",k.repeat(c,C.value.length));l(x,C,{name:"colorscales",handleItemDefaults:n});
g(d,r,f);f("orientation");f("valueformat");f("valuesuffix");var B;A.x.length&&A.y.length&&(B="freeform");f("arrangement",B);k.coerceFont(f,"textfont",k.extendFlat({},r.font));d._length=null}},{"../../components/color":591,"../../components/fx/hoverlabel_defaults":628,"../../lib":716,"../../plot_api/plot_template":754,"../../plots/array_container_defaults":760,"../../plots/domain":789,"./attributes":1109,tinycolor2:535}],1114:[function(a,q,p){q.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),
calc:a("./calc"),plot:a("./plot"),moduleType:"trace",name:"sankey",basePlotModule:a("./base_plot"),selectPoints:a("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":1109,"./base_plot":1110,"./calc":1111,"./defaults":1113,"./plot":1115,"./select.js":1117}],1115:[function(a,q,p){function n(a){return""!==a}function k(a,b){return a.filter(function(a){return a.key===b.traceId})}function m(a,b){c.select(a).select("path").style("fill-opacity",b);c.select(a).select("rect").style("fill-opacity",
b)}function h(a){c.select(a).select("text.name").style("fill","black")}function b(a){return function(b){return-1!==a.node.sourceLinks.indexOf(b.link)||-1!==a.node.targetLinks.indexOf(b.link)}}function g(a){return function(b){return-1!==b.node.sourceLinks.indexOf(a.link)||-1!==b.node.targetLinks.indexOf(a.link)}}function e(a,c,d){c&&d&&k(d,c).selectAll("."+y.sankeyLink).filter(b(c)).call(l.bind(0,c,d,!1))}function t(a,c,d){c&&d&&k(d,c).selectAll("."+y.sankeyLink).filter(b(c)).call(f.bind(0,c,d,!1))}
function l(a,b,c,d){var f=d.datum().link.label;d.style("fill-opacity",function(a){if(!a.link.concentrationscale)return.4});f&&k(b,a).selectAll("."+y.sankeyLink).filter(function(a){return a.link.label===f}).style("fill-opacity",function(a){if(!a.link.concentrationscale)return.4});c&&k(b,a).selectAll("."+y.sankeyNode).filter(g(a)).call(e)}function f(a,b,c,d){var e=d.datum().link.label;d.style("fill-opacity",function(a){return a.tinyColorAlpha});e&&k(b,a).selectAll("."+y.sankeyLink).filter(function(a){return a.link.label===
e}).style("fill-opacity",function(a){return a.tinyColorAlpha});c&&k(b,a).selectAll(y.sankeyNode).filter(g(a)).call(t)}function d(a,b){a=w.nestedProperty(a.hoverlabel||{},b).get();return Array.isArray(a)?!1:a}var c=a("d3"),r=a("./render"),u=a("../../components/fx"),v=a("../../components/color"),w=a("../../lib"),y=a("./constants").cn,A=w._;q.exports=function(a,b){for(var g=a._fullLayout,k=g._paper,p=g._size,q=0;q<a._fullData.length;q++)if(a._fullData[q].visible&&a._fullData[q].type===y.sankey&&!a._fullData[q]._viewInitial){var w=
a._fullData[q].node;a._fullData[q]._viewInitial={node:{groups:w.groups.slice(),x:w.x.slice(),y:w.y.slice()}}}var x=A(a,"source:")+" ",z=A(a,"target:")+" ",J=A(a,"concentration:")+" ",H=A(a,"incoming flow count:")+" ",K=A(a,"outgoing flow count:")+" ";r(a,k,b,{width:p.w,height:p.h,margin:{t:p.t,r:p.r,b:p.b,l:p.l}},{linkEvents:{hover:function(b,d,e){!1!==a._fullLayout.hovermode&&(c.select(b).call(l.bind(0,d,e,!0)),"skip"!==d.link.trace.link.hoverinfo&&(d.link.fullData=d.link.trace,a.emit("plotly_hover",
{event:c.event,points:[d.link]})))},follow:function(b,e){function f(a){if(a.circular){var b=(a.circularPathData.leftInnerExtent+a.circularPathData.rightInnerExtent)/2;var c=a.circularPathData.verticalFullExtent}else b=(a.source.x1+a.target.x0)/2,c=(a.y0+a.y1)/2;b=[b,c];"v"===a.trace.orientation&&b.reverse();b[0]+=e.parent.translateX;b[1]+=e.parent.translateY;return b}if(!1!==a._fullLayout.hovermode&&(b=e.link.trace.link,"none"!==b.hoverinfo&&"skip"!==b.hoverinfo)){for(var k=[],l=0,r=0;r<e.flow.links.length;r++){var t=
e.flow.links[r];if("closest"!==a._fullLayout.hovermode||e.link.pointNumber===t.pointNumber){e.link.pointNumber===t.pointNumber&&(l=r);t.fullData=t.trace;b=e.link.trace.link;var p=f(t),q={valueLabel:c.format(e.valueFormat)(t.value)+e.valueSuffix};k.push({x:p[0],y:p[1],name:q.valueLabel,text:[t.label||"",x+t.source.label,z+t.target.label,t.concentrationscale?J+c.format("%0.2f")(t.flow.labelConcentration):""].filter(n).join("\x3cbr\x3e"),color:d(b,"bgcolor")||v.addOpacity(t.color,1),borderColor:d(b,
"bordercolor"),fontFamily:d(b,"font.family"),fontSize:d(b,"font.size"),fontColor:d(b,"font.color"),nameLength:d(b,"namelength"),textAlign:d(b,"align"),idealAlign:c.event.x<p[0]?"right":"left",hovertemplate:b.hovertemplate,hovertemplateLabels:q,eventData:[t]})}}u.loneHover(k,{container:g._hoverlayer.node(),outerContainer:g._paper.node(),gd:a,anchorIndex:l}).each(function(){e.link.concentrationscale||m(this,.65);h(this)})}},unhover:function(b,d,e){!1!==a._fullLayout.hovermode&&(c.select(b).call(f.bind(0,
d,e,!0)),"skip"!==d.link.trace.link.hoverinfo&&(d.link.fullData=d.link.trace,a.emit("plotly_unhover",{event:c.event,points:[d.link]})),u.loneUnhover(g._hoverlayer.node()))},select:function(b,d){b=d.link;b.originalEvent=c.event;a._hoverdata=[b];u.click(a,{target:!0})}},nodeEvents:{hover:function(b,d,f){!1!==a._fullLayout.hovermode&&(c.select(b).call(e,d,f),"skip"!==d.node.trace.node.hoverinfo&&(d.node.fullData=d.node.trace,a.emit("plotly_hover",{event:c.event,points:[d.node]})))},follow:function(b,
e){if(!1!==a._fullLayout.hovermode){var f=e.node.trace.node;if("none"!==f.hoverinfo&&"skip"!==f.hoverinfo){b=c.select(b).select("."+y.nodeRect);var k=a._fullLayout._paperdiv.node().getBoundingClientRect(),l=b.node().getBoundingClientRect();b=l.left-2-k.left;var r=l.right+2-k.left;k=l.top+l.height/4-k.top;l={valueLabel:c.format(e.valueFormat)(e.node.value)+e.valueSuffix};e.node.fullData=e.node.trace;e=u.loneHover({x0:b,x1:r,y:k,name:c.format(e.valueFormat)(e.node.value)+e.valueSuffix,text:[e.node.label,
H+e.node.targetLinks.length,K+e.node.sourceLinks.length].filter(n).join("\x3cbr\x3e"),color:d(f,"bgcolor")||e.tinyColorHue,borderColor:d(f,"bordercolor"),fontFamily:d(f,"font.family"),fontSize:d(f,"font.size"),fontColor:d(f,"font.color"),nameLength:d(f,"namelength"),textAlign:d(f,"align"),idealAlign:"left",hovertemplate:f.hovertemplate,hovertemplateLabels:l,eventData:[e.node]},{container:g._hoverlayer.node(),outerContainer:g._paper.node(),gd:a});m(e,.85);h(e)}}},unhover:function(b,d,e){!1!==a._fullLayout.hovermode&&
(c.select(b).call(t,d,e),"skip"!==d.node.trace.node.hoverinfo&&(d.node.fullData=d.node.trace,a.emit("plotly_unhover",{event:c.event,points:[d.node]})),u.loneUnhover(g._hoverlayer.node()))},select:function(b,d,e){var f=d.node;f.originalEvent=c.event;a._hoverdata=[f];c.select(b).call(t,d,e);u.click(a,{target:!0})}}})}},{"../../components/color":591,"../../components/fx":629,"../../lib":716,"./constants":1112,"./render":1116,d3:165}],1116:[function(a,q,p){function n(a,b,c){function d(a){a.forEach(function(a){var b=
0;var c=a.length,d;a.sort(function(a,b){return a.y0-b.y0});for(d=0;d<c;++d){var e=a[d];e.y0>=b||(b-=e.y0,1E-6<b&&(e.y0+=b,e.y1+=b));b=e.y1+k}})}function e(a){var b=a.map(function(a,b){return{x0:a.x0,index:b}}).sort(function(a,b){return a.x0-b.x0}),c=[],d=-1,e=-Infinity;for(v=0;v<b.length;v++){var f=a[b[v].index];if(f.x0>e+l){d+=1;var g=f.x0}e=f.x0;c[d]||(c[d]=[]);c[d].push(f);var h=g-f.x0;f.x0+=h;f.x1+=h}return c}var f=Q(b);b=f.trace;var g=b.domain,h="h"===b.orientation,k=b.node.pad,l=b.node.thickness,
m=a.width*(g.x[1]-g.x[0]),n=a.height*(g.y[1]-g.y[0]),r=f._nodes,t=f._links,p=f.circular;var q=p?M.sankeyCircular().circularLinkGap(0):K.sankey();q.iterations(E.sankeyIterations).size(h?[m,n]:[n,m]).nodeWidth(l).nodePadding(k).nodeId(function(a){return a.pointNumber}).nodes(r).links(t);var u=q();q.nodePadding()<k&&N.warn("node.pad was reduced to ",q.nodePadding()," to fit within the figure.");var v,w,x;for(A in f._groupLookup){r=parseInt(f._groupLookup[A]);for(v=0;v<u.nodes.length;v++)if(u.nodes[v].pointNumber===
r){var z=u.nodes[v];break}z&&(r={pointNumber:parseInt(A),x0:z.x0,x1:z.x1,y0:z.y0,y1:z.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]},u.nodes.unshift(r),z.childrenNodes.unshift(r))}(function(){for(v=0;v<u.nodes.length;v++){var a=u.nodes[v],b={};for(w=0;w<a.targetLinks.length;w++){var c=a.targetLinks[w];var d=c.source.pointNumber+":"+c.target.pointNumber;b.hasOwnProperty(d)||(b[d]=[]);b[d].push(c)}var e=Object.keys(b);for(w=0;w<e.length;w++){d=e[w];d=b[d];var f=0,g={};for(x=0;x<d.length;x++)c=d[x],
g[c.label]||(g[c.label]=0),g[c.label]+=c.value,f+=c.value;for(x=0;x<d.length;x++)c=d[x],c.flow={value:f,labelConcentration:g[c.label]/f,concentration:c.value/f,links:d},c.concentrationscale&&(c.color=L(c.concentrationscale(c.flow.labelConcentration)))}for(w=b=0;w<a.sourceLinks.length;w++)b+=a.sourceLinks[w].value;for(w=0;w<a.sourceLinks.length;w++)c=a.sourceLinks[w],c.concentrationOut=c.value/b;for(w=b=0;w<a.targetLinks.length;w++)b+=a.targetLinks[w].value;for(w=0;w<a.targetLinks.length;w++)c=a.targetLinks[w],
c.concenrationIn=c.value/b}})();if(b.node.x.length&&b.node.y.length){for(v=0;v<Math.min(b.node.x.length,b.node.y.length,u.nodes.length);v++)if(b.node.x[v]&&b.node.y[v]){var A=[b.node.x[v]*m,b.node.y[v]*n];u.nodes[v].x0=A[0]-l/2;u.nodes[v].x1=A[0]+l/2;z=u.nodes[v].y1-u.nodes[v].y0;u.nodes[v].y0=A[1]-z/2;u.nodes[v].y1=A[1]+z/2}"snap"===b.arrangement&&(r=u.nodes,A=e(r),d(A));q.update(u)}return{circular:p,key:c,trace:b,guid:N.randstr(),horizontal:h,width:m,height:n,nodePad:b.node.pad,nodeLineColor:b.node.line.color,
nodeLineWidth:b.node.line.width,linkLineColor:b.link.line.color,linkLineWidth:b.link.line.width,valueFormat:b.valueformat,valueSuffix:b.valuesuffix,textFont:b.textfont,translateX:g.x[0]*a.width+a.margin.l,translateY:a.height-g.y[1]*a.height+a.margin.t,dragParallel:h?n:m,dragPerpendicular:h?m:n,arrangement:b.arrangement,sankey:q,graph:u,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function k(a,b,c){var d=L(b.color),e=b.source.label+"|"+b.target.label;b.trace=a.trace;b.curveNumber=
a.trace.index;return{circular:a.circular,key:e+"__"+c,traceId:a.key,pointNumber:b.pointNumber,link:b,tinyColorHue:J.tinyRGB(d),tinyColorAlpha:d.getAlpha(),linkPath:m,linkLineColor:a.linkLineColor,linkLineWidth:a.linkLineWidth,valueFormat:a.valueFormat,valueSuffix:a.valueSuffix,sankey:a.sankey,parent:a,interactionState:a.interactionState,flow:b.flow}}function m(){return function(a){if(a.link.circular){var b=a.link,c=b.width/2,d=b.circularPathData;return"top"===b.circularLinkType?"M "+d.targetX+" "+
(d.targetY+c)+" L"+d.rightInnerExtent+" "+(d.targetY+c)+"A"+(d.rightLargeArcRadius+c)+" "+(d.rightSmallArcRadius+c)+" 0 0 1 "+(d.rightFullExtent-c)+" "+(d.targetY-d.rightSmallArcRadius)+"L"+(d.rightFullExtent-c)+" "+d.verticalRightInnerExtent+"A"+(d.rightLargeArcRadius+c)+" "+(d.rightLargeArcRadius+c)+" 0 0 1 "+d.rightInnerExtent+" "+(d.verticalFullExtent-c)+"L"+d.leftInnerExtent+" "+(d.verticalFullExtent-c)+"A"+(d.leftLargeArcRadius+c)+" "+(d.leftLargeArcRadius+c)+" 0 0 1 "+(d.leftFullExtent+c)+
" "+d.verticalLeftInnerExtent+"L"+(d.leftFullExtent+c)+" "+(d.sourceY-d.leftSmallArcRadius)+"A"+(d.leftLargeArcRadius+c)+" "+(d.leftSmallArcRadius+c)+" 0 0 1 "+d.leftInnerExtent+" "+(d.sourceY+c)+"L"+d.sourceX+" "+(d.sourceY+c)+"L"+d.sourceX+" "+(d.sourceY-c)+"L"+d.leftInnerExtent+" "+(d.sourceY-c)+"A"+(d.leftLargeArcRadius-c)+" "+(d.leftSmallArcRadius-c)+" 0 0 0 "+(d.leftFullExtent-c)+" "+(d.sourceY-d.leftSmallArcRadius)+"L"+(d.leftFullExtent-c)+" "+d.verticalLeftInnerExtent+"A"+(d.leftLargeArcRadius-
c)+" "+(d.leftLargeArcRadius-c)+" 0 0 0 "+d.leftInnerExtent+" "+(d.verticalFullExtent+c)+"L"+d.rightInnerExtent+" "+(d.verticalFullExtent+c)+"A"+(d.rightLargeArcRadius-c)+" "+(d.rightLargeArcRadius-c)+" 0 0 0 "+(d.rightFullExtent+c)+" "+d.verticalRightInnerExtent+"L"+(d.rightFullExtent+c)+" "+(d.targetY-d.rightSmallArcRadius)+"A"+(d.rightLargeArcRadius-c)+" "+(d.rightSmallArcRadius-c)+" 0 0 0 "+d.rightInnerExtent+" "+(d.targetY-c)+"L"+d.targetX+" "+(d.targetY-c)+"Z":"M "+d.targetX+" "+(d.targetY-
c)+" L"+d.rightInnerExtent+" "+(d.targetY-c)+"A"+(d.rightLargeArcRadius+c)+" "+(d.rightSmallArcRadius+c)+" 0 0 0 "+(d.rightFullExtent-c)+" "+(d.targetY+d.rightSmallArcRadius)+"L"+(d.rightFullExtent-c)+" "+d.verticalRightInnerExtent+"A"+(d.rightLargeArcRadius+c)+" "+(d.rightLargeArcRadius+c)+" 0 0 0 "+d.rightInnerExtent+" "+(d.verticalFullExtent+c)+"L"+d.leftInnerExtent+" "+(d.verticalFullExtent+c)+"A"+(d.leftLargeArcRadius+c)+" "+(d.leftLargeArcRadius+c)+" 0 0 0 "+(d.leftFullExtent+c)+" "+d.verticalLeftInnerExtent+
"L"+(d.leftFullExtent+c)+" "+(d.sourceY+d.leftSmallArcRadius)+"A"+(d.leftLargeArcRadius+c)+" "+(d.leftSmallArcRadius+c)+" 0 0 0 "+d.leftInnerExtent+" "+(d.sourceY-c)+"L"+d.sourceX+" "+(d.sourceY-c)+"L"+d.sourceX+" "+(d.sourceY+c)+"L"+d.leftInnerExtent+" "+(d.sourceY+c)+"A"+(d.leftLargeArcRadius-c)+" "+(d.leftSmallArcRadius-c)+" 0 0 1 "+(d.leftFullExtent-c)+" "+(d.sourceY+d.leftSmallArcRadius)+"L"+(d.leftFullExtent-c)+" "+d.verticalLeftInnerExtent+"A"+(d.leftLargeArcRadius-c)+" "+(d.leftLargeArcRadius-
c)+" 0 0 1 "+d.leftInnerExtent+" "+(d.verticalFullExtent-c)+"L"+d.rightInnerExtent+" "+(d.verticalFullExtent-c)+"A"+(d.rightLargeArcRadius-c)+" "+(d.rightLargeArcRadius-c)+" 0 0 1 "+(d.rightFullExtent+c)+" "+d.verticalRightInnerExtent+"L"+(d.rightFullExtent+c)+" "+(d.targetY+d.rightSmallArcRadius)+"A"+(d.rightLargeArcRadius-c)+" "+(d.rightSmallArcRadius-c)+" 0 0 1 "+d.rightInnerExtent+" "+(d.targetY+c)+"L"+d.targetX+" "+(d.targetY+c)+"Z"}b=a.link.source.x1;c=a.link.target.x0;var e=T(b,c);d=e(.5);
e=e(.5);var f=a.link.y0-a.link.width/2,g=a.link.y0+a.link.width/2,h=a.link.y1-a.link.width/2;a=a.link.y1+a.link.width/2;return"M"+b+","+f+"C"+d+","+f+" "+e+","+h+" "+c+","+h+"L"+c+","+a+"C"+e+","+a+" "+d+","+g+" "+b+","+g+"Z"}}function h(a,b){var c=L(b.color),d=E.nodePadAcross,e=a.nodePad/2;b.dx=b.x1-b.x0;b.dy=b.y1-b.y0;var f=b.dx,g=Math.max(.5,b.dy),h="node_"+b.pointNumber;b.group&&(h=N.randstr());b.trace=a.trace;b.curveNumber=a.trace.index;return{index:b.pointNumber,key:h,partOfGroup:b.partOfGroup||
!1,group:b.group,traceId:a.key,trace:a.trace,node:b,nodePad:a.nodePad,nodeLineColor:a.nodeLineColor,nodeLineWidth:a.nodeLineWidth,textFont:a.textFont,size:a.horizontal?a.height:a.width,visibleWidth:Math.ceil(f),visibleHeight:g,zoneX:-d,zoneY:-e,zoneWidth:f+2*d,zoneHeight:g+2*e,labelY:a.horizontal?b.dy/2+1:b.dx/2+1,left:1===b.originalLayer,sizeAcross:a.width,forceLayouts:a.forceLayouts,horizontal:a.horizontal,darkBackground:128>=c.getBrightness(),tinyColorHue:J.tinyRGB(c),tinyColorAlpha:c.getAlpha(),
valueFormat:a.valueFormat,valueSuffix:a.valueSuffix,sankey:a.sankey,graph:a.graph,arrangement:a.arrangement,uniqueNodeLabelPathId:[a.guid,a.key,h].join("_"),interactionState:a.interactionState,figure:a}}function b(a){a.attr("transform",function(a){return"translate("+a.node.x0.toFixed(3)+", "+a.node.y0.toFixed(3)+")"})}function g(a){a.call(b)}function e(a){a.attr("width",function(a){return a.node.x1-a.node.x0}).attr("height",function(a){return a.visibleHeight})}function t(a){return"translate("+a.translateX+
","+a.translateY+")"+(a.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function l(a){return"translate("+(a.horizontal?0:a.labelY)+" "+(a.horizontal?a.labelY:0)+")"}function f(a){return F.svg.line()([[a.horizontal?a.left?-a.sizeAcross:a.visibleWidth+E.nodeTextOffsetHorizontal:E.nodeTextOffsetHorizontal,0],[a.horizontal?a.left?-E.nodeTextOffsetHorizontal:a.sizeAcross:a.visibleHeight-E.nodeTextOffsetHorizontal,0]])}function d(a){return a.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)"}
function c(a){return a.horizontal?"scale(1 1)":"scale(-1 1)"}function r(a){return a.darkBackground&&!a.horizontal?"rgb(255,255,255)":"rgb(0,0,0)"}function u(a){return a.horizontal&&a.left?"100%":"0%"}function v(a,b,c){a.on(".basic",null).on("mouseover.basic",function(a){a.interactionState.dragInProgress||a.partOfGroup||(c.hover(this,a,b),a.interactionState.hovered=[this,a])}).on("mousemove.basic",function(a){a.interactionState.dragInProgress||a.partOfGroup||(c.follow(this,a),a.interactionState.hovered=
[this,a])}).on("mouseout.basic",function(a){a.interactionState.dragInProgress||a.partOfGroup||(c.unhover(this,a,b),a.interactionState.hovered=!1)}).on("click.basic",function(a){a.interactionState.hovered&&(c.unhover(this,a,b),a.interactionState.hovered=!1);a.interactionState.dragInProgress||a.partOfGroup||c.select(this,a,b)})}function w(a,b,c,d){var e=F.behavior.drag().origin(function(a){return{x:a.node.x0+a.visibleWidth/2,y:a.node.y0+a.visibleHeight/2}}).on("dragstart",function(e){if("fixed"!==e.arrangement&&
(N.ensureSingle(d._fullLayout._infolayer,"g","dragcover",function(a){d._fullLayout._dragCover=a}),N.raiseToTop(this),e.interactionState.dragInProgress=e.node,B(e.node),e.interactionState.hovered&&(c.nodeEvents.unhover.apply(0,e.interactionState.hovered),e.interactionState.hovered=!1),"snap"===e.arrangement)){var f=e.traceId+"|"+e.key;e.forceLayouts[f]?e.forceLayouts[f].alpha(1):y(a,f,e,d);A(a,b,e,f,d)}}).on("drag",function(c){if("fixed"!==c.arrangement){var d=F.event.x,e=F.event.y;"snap"===c.arrangement?
(c.node.x0=d-c.visibleWidth/2,c.node.x1=d+c.visibleWidth/2):("freeform"===c.arrangement&&(c.node.x0=d-c.visibleWidth/2,c.node.x1=d+c.visibleWidth/2),e=Math.max(0,Math.min(c.size-c.visibleHeight/2,e)));c.node.y0=e-c.visibleHeight/2;c.node.y1=e+c.visibleHeight/2;B(c.node);"snap"!==c.arrangement&&(c.sankey.update(c.graph),a.filter(D(c)).call(g),b.attr("d",m()))}}).on("dragend",function(a){if("fixed"!==a.arrangement){a.interactionState.dragInProgress=!1;for(var b=0;b<a.node.childrenNodes.length;b++)a.node.childrenNodes[b].x=
a.node.x,a.node.childrenNodes[b].y=a.node.y;"snap"!==a.arrangement&&x(a,d)}});a.on(".drag",null).call(e)}function y(a,b,c,d){G(c.graph.nodes);var e=c.graph.nodes.filter(function(a){return a.originalX===c.node.originalX}).filter(function(a){return!a.partOfGroup});c.forceLayouts[b]=I.forceSimulation(e).alphaDecay(0).force("collide",I.forceCollide().radius(function(a){return a.dy/2+c.nodePad/2}).strength(1).iterations(E.forceIterations)).force("constrain",z(a,b,e,c,d)).stop()}function A(a,b,c,d,e){window.requestAnimationFrame(function ea(){var f;
for(f=0;f<E.forceTicksPerFrame;f++)c.forceLayouts[d].tick();f=c.graph.nodes;for(var h=0;h<f.length;h++)f[h].y0=f[h].y-f[h].dy/2,f[h].y1=f[h].y0+f[h].dy,f[h].x0=f[h].x-f[h].dx/2,f[h].x1=f[h].x0+f[h].dx;c.sankey.update(c.graph);a.filter(D(c)).call(g);b.attr("d",m());0<c.forceLayouts[d].alpha()?window.requestAnimationFrame(ea):(f=c.node.originalX,c.node.x0=f-c.visibleWidth/2,c.node.x1=f+c.visibleWidth/2,x(c,e))})}function z(a,b,c,d){return function(){for(var a=0,e=0;e<c.length;e++){var f=c[e];f===d.interactionState.dragInProgress?
(f.x=f.lastDraggedX,f.y=f.lastDraggedY):(f.vx=(f.originalX-f.x)/E.forceTicksPerFrame,f.y=Math.min(d.size-f.dy/2,Math.max(f.dy/2,f.y)));a=Math.max(a,Math.abs(f.vx),Math.abs(f.vy))}!d.interactionState.dragInProgress&&.1>a&&0<d.forceLayouts[b].alpha()&&d.forceLayouts[b].alpha(0)}}function x(a,b){for(var c=[],d=[],e=0;e<a.graph.nodes.length;e++){var f=(a.graph.nodes[e].y0+a.graph.nodes[e].y1)/2;c.push((a.graph.nodes[e].x0+a.graph.nodes[e].x1)/2/a.figure.width);d.push(f/a.figure.height)}V.call("_guiRestyle",
b,{"node.x":[c],"node.y":[d]},a.trace.index).then(function(){b._fullLayout._dragCover&&b._fullLayout._dragCover.remove()})}function C(a){var b=[],c;for(c=0;c<a.length;c++)a[c].originalX=(a[c].x0+a[c].x1)/2,a[c].originalY=(a[c].y0+a[c].y1)/2,-1===b.indexOf(a[c].originalX)&&b.push(a[c].originalX);b.sort(function(a,b){return a-b});for(c=0;c<a.length;c++)a[c].originalLayerIndex=b.indexOf(a[c].originalX),a[c].originalLayer=a[c].originalLayerIndex/(b.length-1)}function B(a){a.lastDraggedX=a.x0+a.dx/2;a.lastDraggedY=
a.y0+a.dy/2}function D(a){return function(b){return b.node.originalX===a.node.originalX}}function G(a){for(var b=0;b<a.length;b++)a[b].y=(a[b].y0+a[b].y1)/2,a[b].x=(a[b].x0+a[b].x1)/2}var E=a("./constants"),F=a("d3"),L=a("tinycolor2"),J=a("../../components/color"),H=a("../../components/drawing"),K=a("@plotly/d3-sankey"),M=a("@plotly/d3-sankey-circular"),I=a("d3-force"),N=a("../../lib");p=a("../../lib/gup");var O=p.keyFun,P=p.repeat,Q=p.unwrap,T=a("d3-interpolate").interpolateNumber,V=a("../../registry");
q.exports=function(a,g,p,q,x){var z=!1;N.ensureSingle(a._fullLayout._infolayer,"g","first-render",function(){z=!0});var A=a._fullLayout._dragCover;p=p.filter(function(a){return Q(a).trace.visible}).map(n.bind(null,q));g=g.selectAll("."+E.cn.sankey).data(p,O);g.exit().remove();g.enter().append("g").classed(E.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",t);g.each(function(b,
c){a._fullData[c]._sankey=b;var d="bgsankey-"+b.trace.uid+"-"+c;N.ensureSingle(a._fullLayout._draggers,"rect",d);a._fullData[c]._bgRect=F.select("."+d);a._fullData[c]._bgRect.style("pointer-events","all").attr("width",b.width).attr("height",b.height).attr("x",b.translateX).attr("y",b.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})});g.transition().ease(E.ease).duration(E.duration).attr("transform",t);p=g.selectAll("."+E.cn.sankeyLinks).data(P,O);p.enter().append("g").classed(E.cn.sankeyLinks,
!0).style("fill","none");q=p.selectAll("."+E.cn.sankeyLink).data(function(a){return a.graph.links.filter(function(a){return a.value}).map(k.bind(null,a))},O);q.enter().append("path").classed(E.cn.sankeyLink,!0).call(v,g,x.linkEvents);q.style("stroke",function(a){return 1<a.link.width||0<a.linkLineWidth?J.tinyRGB(L(a.linkLineColor)):a.tinyColorHue}).style("stroke-opacity",function(a){return 1<a.link.width||0<a.linkLineWidth?J.opacity(a.linkLineColor):a.tinyColorAlpha}).style("fill",function(a){return a.tinyColorHue}).style("fill-opacity",
function(a){return a.tinyColorAlpha}).style("stroke-width",function(a){return 1<a.link.width||0<a.linkLineWidth?a.linkLineWidth:1}).attr("d",m());q.style("opacity",function(){return a._context.staticPlot||z||A?1:0}).transition().ease(E.ease).duration(E.duration).style("opacity",1);q.exit().transition().ease(E.ease).duration(E.duration).style("opacity",0).remove();p=g.selectAll("."+E.cn.sankeyNodeSet).data(P,O);p.enter().append("g").classed(E.cn.sankeyNodeSet,!0);p.style("cursor",function(a){switch(a.arrangement){case "fixed":return"default";
case "perpendicular":return"ns-resize";default:return"move"}});p=p.selectAll("."+E.cn.sankeyNode).data(function(a){var b=a.graph.nodes;C(b);return b.map(h.bind(null,a))},O);p.enter().append("g").classed(E.cn.sankeyNode,!0).call(b).style("opacity",function(b){return!a._context.staticPlot&&!z||b.partOfGroup?0:1});p.call(v,g,x.nodeEvents).call(w,q,x,a);p.transition().ease(E.ease).duration(E.duration).call(b).style("opacity",function(a){return a.partOfGroup?0:1});p.exit().transition().ease(E.ease).duration(E.duration).style("opacity",
0).remove();x=p.selectAll("."+E.cn.nodeRect).data(P);x.enter().append("rect").classed(E.cn.nodeRect,!0).call(e);x.style("stroke-width",function(a){return a.nodeLineWidth}).style("stroke",function(a){return J.tinyRGB(L(a.nodeLineColor))}).style("stroke-opacity",function(a){return J.opacity(a.nodeLineColor)}).style("fill",function(a){return a.tinyColorHue}).style("fill-opacity",function(a){return a.tinyColorAlpha});x.transition().ease(E.ease).duration(E.duration).call(e);x=p.selectAll("."+E.cn.nodeCapture).data(P);
x.enter().append("rect").classed(E.cn.nodeCapture,!0).style("fill-opacity",0);x.attr("x",function(a){return a.zoneX}).attr("y",function(a){return a.zoneY}).attr("width",function(a){return a.zoneWidth}).attr("height",function(a){return a.zoneHeight});x=p.selectAll("."+E.cn.nodeCentered).data(P);x.enter().append("g").classed(E.cn.nodeCentered,!0).attr("transform",l);x.transition().ease(E.ease).duration(E.duration).attr("transform",l);g=x.selectAll("."+E.cn.nodeLabelGuide).data(P);g.enter().append("path").classed(E.cn.nodeLabelGuide,
!0).attr("id",function(a){return a.uniqueNodeLabelPathId}).attr("d",f).attr("transform",d);g.transition().ease(E.ease).duration(E.duration).attr("d",f).attr("transform",d);var y=x.selectAll("."+E.cn.nodeLabel).data(P);y.enter().append("text").classed(E.cn.nodeLabel,!0).attr("transform",c).style("user-select","none").style("cursor","default").style("fill","black");y.style("text-shadow",function(a){return a.horizontal?"-1px 1px 1px #fff, 1px 1px 1px #fff, 1px -1px 1px #fff, -1px -1px 1px #fff":"none"}).each(function(a){H.font(y,
a.textFont)});y.transition().ease(E.ease).duration(E.duration).attr("transform",c);x=y.selectAll("."+E.cn.nodeLabelTextPath).data(P);x.enter().append("textPath").classed(E.cn.nodeLabelTextPath,!0).attr("alignment-baseline","middle").attr("xlink:href",function(a){return"#"+a.uniqueNodeLabelPathId}).attr("startOffset",u).style("fill",r);x.text(function(a){return a.horizontal||5<a.node.dy?a.node.label:""}).attr("text-anchor",function(a){return a.horizontal&&a.left?"end":"start"});x.transition().ease(E.ease).duration(E.duration).attr("startOffset",
u).style("fill",r)}},{"../../components/color":591,"../../components/drawing":612,"../../lib":716,"../../lib/gup":714,"../../registry":845,"./constants":1112,"@plotly/d3-sankey":56,"@plotly/d3-sankey-circular":55,d3:165,"d3-force":158,"d3-interpolate":160,tinycolor2:535}],1117:[function(a,q,p){q.exports=function(a,k){for(var m=[],h=a.cd[0].trace,b=h._sankey.graph.nodes,g=0;g<b.length;g++){var e=b[g];if(!e.partOfGroup){var n=[(e.x0+e.x1)/2,(e.y0+e.y1)/2];"v"===h.orientation&&n.reverse();k&&k.contains(n,
!1,g,a)&&m.push({pointNumber:e.pointNumber})}}return m}},{}],1118:[function(a,q,p){var n=a("../../lib");q.exports=function(a,m){for(var h=0;h<a.length;h++)a[h].i=h;n.mergeArray(m.text,a,"tx");n.mergeArray(m.texttemplate,a,"txt");n.mergeArray(m.hovertext,a,"htx");n.mergeArray(m.customdata,a,"data");n.mergeArray(m.textposition,a,"tp");m.textfont&&(n.mergeArrayCastPositive(m.textfont.size,a,"ts"),n.mergeArray(m.textfont.color,a,"tc"),n.mergeArray(m.textfont.family,a,"tf"));if(m=m.marker){n.mergeArrayCastPositive(m.size,
a,"ms");n.mergeArrayCastPositive(m.opacity,a,"mo");n.mergeArray(m.symbol,a,"mx");n.mergeArray(m.color,a,"mc");if(h=m.line)n.mergeArray(h.color,a,"mlc"),n.mergeArrayCastPositive(h.width,a,"mlw");(m=m.gradient)&&"none"!==m.type&&(n.mergeArray(m.type,a,"mgt"),n.mergeArray(m.color,a,"mgc"))}}},{"../../lib":716}],1119:[function(a,q,p){p=a("../../plots/template_attributes").texttemplateAttrs;var n=a("../../plots/template_attributes").hovertemplateAttrs,k=a("../../components/colorscale/attributes"),m=a("../../plots/font_attributes"),
h=a("../../components/drawing/attributes").dash,b=a("../../components/drawing"),g=a("./constants");a=a("../../lib/extend").extendFlat;q.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},
stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:p({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines",
"markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:n({},{keys:g.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:"linear spline hv vh hvh vhv".split(" "),dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:a({},h,{editType:"style"}),simplify:{valType:"boolean",
dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:"none tozeroy tozerox tonexty tonextx toself tonext".split(" "),editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:a({symbol:{valType:"enumerated",values:b.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",
min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:a({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},k("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical",
"none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},k("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",
editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:"top left;top center;top right;middle left;middle center;middle right;bottom left;bottom center;bottom right".split(";"),dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:m({editType:"calc",colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",
editType:"calc"}}},{"../../components/colorscale/attributes":598,"../../components/drawing":612,"../../components/drawing/attributes":611,"../../lib/extend":707,"../../plots/font_attributes":790,"../../plots/template_attributes":840,"./constants":1123}],1120:[function(a,q,p){function n(a,c,d,e,g,k,l){var m=c._length,n=a._fullLayout;a=d._id;var r=e._id,p=n._firstScatter[h(c)]===c.uid;n=(b(c,n,d,e)||{}).orientation;var q=c.fill;d._minDtick=0;e._minDtick=0;var u={padded:!0},v={padded:!0};l&&(u.ppad=
v.ppad=l);(l=2>m||g[0]!==g[m-1]||k[0]!==k[m-1])&&("tozerox"===q||"tonextx"===q&&(p||"h"===n))?u.tozero=!0:(c.error_y||{}).visible||"tonexty"!==q&&"tozeroy"!==q&&(f.hasMarkers(c)||f.hasText(c))||(u.padded=!1,u.ppad=0);if(l&&("tozeroy"===q||"tonexty"===q&&(p||"v"===n)))v.tozero=!0;else if("tonextx"===q||"tozerox"===q)v.padded=!1;a&&(c._extremes[a]=t.findExtremes(d,g,u));r&&(c._extremes[r]=t.findExtremes(e,k,v))}function k(a,b){if(f.hasMarkers(a)){var c=a.marker,d=1.6*(a.marker.sizeref||1);var g="area"===
a.marker.sizemode?function(a){return Math.max(Math.sqrt((a||0)/d),3)}:function(a){return Math.max((a||0)/d,3)};if(e.isArrayOrTypedArray(c.size)){c={type:"linear"};t.setConvert(c);a=c.makeCalcdata(a.marker,"size");c=Array(b);for(var h=0;h<b;h++)c[h]=g(a[h]);return c}return g(c.size)}}function m(a,b){var c=h(b);a=a._firstScatter;a[c]||(a[c]=b.uid)}function h(a){var b=a.stackgroup;return a.xaxis+a.yaxis+a.type+(b?"-"+b:"")}function b(a,b,c,d){if(a=a.stackgroup)if(b=b._scatterStackOpts[c._id+d._id][a],
c="v"===b.orientation?d:c,"linear"===c.type||"log"===c.type)return b}var g=a("fast-isnumeric"),e=a("../../lib"),t=a("../../plots/cartesian/axes"),l=a("../../constants/numerical").BADNUM,f=a("./subtypes"),d=a("./colorscale_calc"),c=a("./arrays_to_calcdata"),r=a("./calc_selection");q.exports={calc:function(a,f){var h=a._fullLayout,p=t.getFromId(a,f.xaxis||"x"),q=t.getFromId(a,f.yaxis||"y"),u=p.makeCalcdata(f,"x"),v=q.makeCalcdata(f,"y"),C=f._length,B=Array(C),D=f.ids,G=b(f,h,p,q),E=!1,F;m(h,f);h="x";
var L="y";if(G){e.pushUnique(G.traceIndices,f._expandedIndex);if(F="v"===G.orientation){L="s";var J="x"}else h="s",J="y";var H="interpolate"===G.stackgaps}else{var K=k(f,C);n(a,f,p,q,u,v,K)}for(p=0;p<C;p++){q=B[p]={};K=g(u[p]);var M=g(v[p]);K&&M?(q[h]=u[p],q[L]=v[p]):G&&(F?K:M)?(q[J]=F?u[p]:v[p],q.gap=!0,H?(q.s=l,E=!0):q.s=0):q[h]=q[L]=l;D&&(q.id=String(D[p]))}c(B,f);d(a,f);r(B,f);if(G){for(p=0;p<B.length;)B[p][J]===l?B.splice(p,1):p++;e.sort(B,function(a,b){return a[J]-b[J]||a.i-b.i});if(E){for(p=
0;p<B.length-1&&B[p].gap;)p++;u=B[p].s;u||(u=B[p].s=0);for(a=0;a<p;a++)B[a].s=u;for(f=B.length-1;f>p&&B[f].gap;)f--;u=B[f].s;for(a=B.length-1;a>f;a--)B[a].s=u;for(;p<f;)if(p++,B[p].gap){for(a=p+1;B[a].gap;)a++;u=B[p-1][J];v=B[p-1].s;for(C=(B[a].s-v)/(B[a][J]-u);p<a;)B[p].s=v+(B[p][J]-u)*C,p++}}}return B},calcMarkerSize:k,calcAxisExpansion:n,setFirstScatter:m,getStackOpts:b}},{"../../constants/numerical":692,"../../lib":716,"../../plots/cartesian/axes":764,"./arrays_to_calcdata":1118,"./calc_selection":1121,
"./colorscale_calc":1122,"./subtypes":1143,"fast-isnumeric":228}],1121:[function(a,q,p){var n=a("../../lib");q.exports=function(a,m){n.isArrayOrTypedArray(m.selectedpoints)&&n.tagSelected(a,m)}},{"../../lib":716}],1122:[function(a,q,p){var n=a("../../components/colorscale/helpers").hasColorscale,k=a("../../components/colorscale/calc"),m=a("./subtypes");q.exports=function(a,b){m.hasLines(b)&&n(b,"line")&&k(a,b,{vals:b.line.color,containerStr:"line",cLetter:"c"});m.hasMarkers(b)&&(n(b,"marker")&&k(a,
b,{vals:b.marker.color,containerStr:"marker",cLetter:"c"}),n(b,"marker.line")&&k(a,b,{vals:b.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":599,"../../components/colorscale/helpers":602,"./subtypes":1143}],1123:[function(a,q,p){q.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],1124:[function(a,q,p){function n(a,h,b,g,e,k,l){e[g]=!0;g={i:null,gap:!0,s:0};g[l]=b;a.splice(h,0,g);h&&b===a[h-1][l]?
(b=a[h-1],g.s=b.s,g.i=b.i,g.gap=b.gap):k&&(k=a[h-1],b=(e=a[h+1])?k?k.s+(e.s-k.s)*(b-k[l])/(e[l]-k[l]):e.s:k.s,g.s=b);h||(a[0].t=a[1].t,a[0].trace=a[1].trace,delete a[1].t,delete a[1].trace)}var k=a("./calc");q.exports=function(a,h){var b=h.xaxis;h=h.yaxis;var g=a._fullLayout._scatterStackOpts[b._id+h._id];if(g){var e=a.calcdata,m,l,f,d,c,r;for(r in g){var p=g[r];var q=p.traceIndices;if(q.length){var w="interpolate"===p.stackgaps;var y=p.groupnorm;if("v"===p.orientation){var A="x";var z="y"}else A=
"y",z="x";var x=Array(q.length);for(m=0;m<x.length;m++)x[m]=!1;var C=e[q[0]];var B=Array(C.length);for(m=0;m<C.length;m++)B[m]=C[m][A];for(m=1;m<q.length;m++){var D=e[q[m]];for(l=f=0;l<D.length;l++){for(c=D[l][A];c>B[f]&&f<B.length;f++)n(D,l,B[f],m,x,w,A),l++;if(c!==B[f]){for(d=0;d<m;d++)n(e[q[d]],f,c,d,x,w,A);B.splice(f,0,c)}f++}for(;f<B.length;f++)n(D,l,B[f],m,x,w,A),l++}f=B.length;for(l=0;l<C.length;l++){d=C[l][z]=C[l].s;for(m=1;m<q.length;m++)D=e[q[m]],D[0].trace._rawLength=D[0].trace._length,
D[0].trace._length=f,d+=D[l].s,D[l][z]=d;if(y)for(D=("fraction"===y?d:d/100)||1,m=0;m<q.length;m++)d=e[q[m]][l],d[z]/=D,d.sNorm=d.s/D}for(m=0;m<q.length;m++){D=e[q[m]];C=D[0].trace;y=k.calcMarkerSize(C,C._rawLength);z=Array.isArray(y);if(y&&x[m]||z)for(d=y,y=Array(f),l=0;l<f;l++)y[l]=D[l].gap?0:z?d[D[l].i]:d;z=Array(f);d=Array(f);for(l=0;l<f;l++)z[l]=D[l].x,d[l]=D[l].y;k.calcAxisExpansion(a,C,b,h,z,d,y);D[0].t.orientation=p.orientation}}}}}},{"./calc":1120}],1125:[function(a,q,p){q.exports=function(a){for(var k=
0;k<a.length;k++){var m=a[k];if("scatter"===m.type){var h=m.fill;if("none"!==h&&"toself"!==h&&(m.opacity=void 0,"tonexty"===h||"tonextx"===h))for(h=k-1;0<=h;h--){var b=a[h];if("scatter"===b.type&&b.xaxis===m.xaxis&&b.yaxis===m.yaxis){b.opacity=void 0;break}}}}}},{}],1126:[function(a,q,p){var n=a("../../lib"),k=a("../../registry"),m=a("./attributes"),h=a("./constants"),b=a("./subtypes"),g=a("./xy_defaults"),e=a("./stack_defaults"),t=a("./marker_defaults"),l=a("./line_defaults"),f=a("./line_shape_defaults"),
d=a("./text_defaults"),c=a("./fillcolor_defaults");q.exports=function(a,p,q,w){function r(b,c){return n.coerce(a,p,m,b,c)}var u=g(a,p,w,r);u||(p.visible=!1);if(p.visible){var v=e(a,p,w,r);u=!v&&u<h.PTS_LINESONLY?"lines+markers":"lines";r("text");r("hovertext");r("mode",u);b.hasLines(p)&&(l(a,p,q,w,r),f(a,p,r),r("connectgaps"),r("line.simplify"));b.hasMarkers(p)&&t(a,p,q,w,r,{gradient:!0});b.hasText(p)&&(r("texttemplate"),d(a,p,w,r));w=[];if(b.hasMarkers(p)||b.hasText(p))r("cliponaxis"),r("marker.maxdisplayed"),
w.push("points");r("fill",v?v.fillDflt:"none");"none"!==p.fill&&(c(a,p,q,r),b.hasLines(p)||f(a,p,r));v=(p.line||{}).color;u=(p.marker||{}).color;"tonext"!==p.fill&&"toself"!==p.fill||w.push("fills");r("hoveron",w.join("+")||"points");"fills"!==p.hoveron&&r("hovertemplate");w=k.getComponentMethod("errorbars","supplyDefaults");w(a,p,v||u||q,{axis:"y"});w(a,p,v||u||q,{axis:"x",inherit:"y"});n.coerceSelectionMarkerOpacity(p,r)}}},{"../../lib":716,"../../registry":845,"./attributes":1119,"./constants":1123,
"./fillcolor_defaults":1127,"./line_defaults":1132,"./line_shape_defaults":1134,"./marker_defaults":1138,"./stack_defaults":1141,"./subtypes":1143,"./text_defaults":1144,"./xy_defaults":1145}],1127:[function(a,q,p){var n=a("../../components/color"),k=a("../../lib").isArrayOrTypedArray;q.exports=function(a,h,b,g){a=!1;if(h.marker){var e=h.marker.color,m=(h.marker.line||{}).color;e&&!k(e)?a=e:m&&!k(m)&&(a=m)}g("fillcolor",n.addOpacity((h.line||{}).color||a||b,.5))}},{"../../components/color":591,"../../lib":716}],
1128:[function(a,q,p){var n=a("../../plots/cartesian/axes");q.exports=function(a,m,h){var b={},g={_fullLayout:h};h=n.getFromTrace(g,m,"x");m=n.getFromTrace(g,m,"y");b.xLabel=n.tickText(h,a.x,!0).text;b.yLabel=n.tickText(m,a.y,!0).text;return b}},{"../../plots/cartesian/axes":764}],1129:[function(a,q,p){var n=a("../../components/color"),k=a("./subtypes");q.exports=function(a,h){if("lines"===a.mode)return(h=a.line.color)&&n.opacity(h)?h:a.fillcolor;if("none"===a.mode)return a.fill?a.fillcolor:"";var b=
h.mcc||(a.marker||{}).color,g=h.mlcc||((a.marker||{}).line||{}).color;return(h=b&&n.opacity(b)?b:g&&n.opacity(g)&&(h.mlw||((a.marker||{}).line||{}).width)?g:"")?.3>n.opacity(h)?n.addOpacity(h,.3):h:(h=(a.line||{}).color)&&n.opacity(h)&&k.hasLines(a)&&a.line.width?h:a.fillcolor}},{"../../components/color":591,"./subtypes":1143}],1130:[function(a,q,p){var n=a("../../lib"),k=a("../../components/fx"),m=a("../../registry"),h=a("./get_trace_color"),b=a("../../components/color"),g=n.fillText;q.exports=function(a,
t,l,f){var d=a.cd,c=d[0].trace,e=a.xa,p=a.ya,q=e.c2p(t),w=p.c2p(l),y=[q,w];l=c.hoveron||"";var A=-1!==c.mode.indexOf("markers")?3:.5;if(-1!==l.indexOf("points")&&(t=function(a){var b=Math.max(A,a.mrc||0),c=e.c2p(a.x)-q;a=p.c2p(a.y)-w;return Math.max(Math.sqrt(c*c+a*a)-b,1-A/b)},f=k.getDistanceFunction(f,function(a){var b=Math.max(3,a.mrc||0),c=1-1/b;a=Math.abs(e.c2p(a.x)-q);return a<b?c*a/b:a-b+c},function(a){var b=Math.max(3,a.mrc||0),c=1-1/b;a=Math.abs(p.c2p(a.y)-w);return a<b?c*a/b:a-b+c},t),k.getClosest(d,
f,a),!1!==a.index)){f=d[a.index];l=e.c2p(f.x,!0);y=p.c2p(f.y,!0);var z=f.mrc||1;a.index=f.i;var x=d[0].t.orientation,C=x&&(f.sNorm||f.s);d="h"===x?C:f.x;x="v"===x?C:f.y;n.extendFlat(a,{color:h(c,f),x0:l-z,x1:l+z,xLabelVal:d,y0:y-z,y1:y+z,yLabelVal:x,spikeDistance:t(f),hovertemplate:c.hovertemplate});g(f,c,a);m.getComponentMethod("errorbars","hoverInfo")(f,c,a);return[a]}if(-1!==l.indexOf("fills")&&c._polygons){z=c._polygons;f=[];x=!1;t=Infinity;d=-Infinity;C=Infinity;var B=-Infinity;for(l=0;l<z.length;l++){var D=
z[l];D.contains(y)&&(x=!x,f.push(D),C=Math.min(C,D.ymin),B=Math.max(B,D.ymax))}if(x){C=Math.max(C,0);B=Math.min(B,p._length);y=(C+B)/2;for(l=0;l<f.length;l++)for(x=f[l].pts,z=1;z<x.length;z++){D=x[z-1][1];var G=x[z][1];D>y!==G>=y&&(C=x[z-1][0],B=x[z][0],G-D&&(C+=(B-C)*(y-D)/(G-D),t=Math.min(t,C),d=Math.max(d,C)))}t=Math.max(t,0);d=Math.min(d,e._length);f=b.defaultLine;b.opacity(c.fillcolor)?f=c.fillcolor:b.opacity((c.line||{}).color)&&(f=c.line.color);n.extendFlat(a,{distance:a.maxHoverDistance,x0:t,
x1:d,y0:y,y1:y,color:f,hovertemplate:!1});delete a.index;c.text&&!Array.isArray(c.text)?a.text=String(c.text):a.text=c.name;return[a]}}}},{"../../components/color":591,"../../components/fx":629,"../../lib":716,"../../registry":845,"./get_trace_color":1129}],1131:[function(a,q,p){p=a("./subtypes");q.exports={hasLines:p.hasLines,hasMarkers:p.hasMarkers,hasText:p.hasText,isBubble:p.isBubble,attributes:a("./attributes"),supplyDefaults:a("./defaults"),crossTraceDefaults:a("./cross_trace_defaults"),calc:a("./calc").calc,
crossTraceCalc:a("./cross_trace_calc"),arraysToCalcdata:a("./arrays_to_calcdata"),plot:a("./plot"),colorbar:a("./marker_colorbar"),formatLabels:a("./format_labels"),style:a("./style").style,styleOnSelect:a("./style").styleOnSelect,hoverPoints:a("./hover"),selectPoints:a("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:a("../../plots/cartesian"),categories:"cartesian svg symbols errorBarsOK showLegend scatter-like zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":775,
"./arrays_to_calcdata":1118,"./attributes":1119,"./calc":1120,"./cross_trace_calc":1124,"./cross_trace_defaults":1125,"./defaults":1126,"./format_labels":1128,"./hover":1130,"./marker_colorbar":1137,"./plot":1139,"./select":1140,"./style":1142,"./subtypes":1143}],1132:[function(a,q,p){var n=a("../../lib").isArrayOrTypedArray,k=a("../../components/colorscale/helpers").hasColorscale,m=a("../../components/colorscale/defaults");q.exports=function(a,b,g,e,t,l){var f=(a.marker||{}).color;t("line.color",
g);k(a,"line")?m(a,b,e,t,{prefix:"line.",cLetter:"c"}):(a=(n(f)?!1:f)||g,t("line.color",a));t("line.width");(l||{}).noDash||t("line.dash")}},{"../../components/colorscale/defaults":601,"../../components/colorscale/helpers":602,"../../lib":716}],1133:[function(a,q,p){p=a("../../constants/numerical");var n=p.BADNUM;p=p.LOG_CLIP;var k=p+.5,m=p-.5,h=a("../../lib"),b=h.segmentsIntersect,g=h.constrain,e=a("./constants");q.exports=function(a,l){function f(b){b=a[b];if(!b)return!1;var c=l.linearized?B.l2p(b.x):
B.c2p(b.x),d=l.linearized?D.l2p(b.y):D.c2p(b.y);if(c===n){G&&(c=B.c2p(b.x,!0));if(c===n)return!1;E&&d===n&&(c*=Math.abs(B._m*L*(0<B._m?k:m)/(D._m*F*(0<D._m?k:m))));c*=1E3}if(d===n){E&&(d=D.c2p(b.y,!0));if(d===n)return!1;d*=1E3}return[c,d]}function d(a,b,c,d){c-=a;d-=b;a=.5-a;var e=.5-b;b=c*c+d*d;var f=c*a+d*e;if(0<f&&f<b&&(c=a*d-e*c,c*c<b))return!0}function c(a,b){var c=a[0]/F;a=a[1]/L;var f=Math.max(0,-c,c-1,-a,a-1);f&&void 0!==ca&&d(c,a,ca,Z)&&(f=0);f&&b&&d(c,a,b[0]/F,b[1]/L)&&(f=0);return(1+e.toleranceGrowth*
f)*H}function r(a,b){var c=a[0]-b[0];a=a[1]-b[1];return Math.sqrt(c*c+a*a)}function t(a,c){for(var d=[],e=0,f=0;4>f;f++){var g=la[f];(g=b(a[0],a[1],c[0],c[1],g[0],g[1],g[2],g[3]))&&(!e||1<Math.abs(g.x-d[0][0])||1<Math.abs(g.y-d[0][1]))&&(g=[g.x,g.y],e&&r(g,a)<r(d[0],a)?d.unshift(g):d.push(g),e++)}return d}function p(a){if(a[0]<U||a[0]>X||a[1]<ea||a[1]>fa)return[g(a[0],U,X),g(a[1],ea,fa)]}function q(a,b){if(a[0]===b[0]&&(a[0]===U||a[0]===X)||a[1]===b[1]&&(a[1]===ea||a[1]===fa))return!0}function y(a,
b){var c=[];a=p(a);b=p(b);if(a&&b&&q(a,b))return c;a&&c.push(a);b&&c.push(b);return c}function A(a,b,c){return function(d,e){var f=p(d),g=p(e),k=[];if(f&&g&&q(f,g))return k;f&&k.push(f);g&&k.push(g);if(d=2*h.constrain((d[a]+e[a])/2,b,c)-((f||d)[a]+(g||e)[a]))f=f&&g?0<d===f[a]>g[a]?f:g:f||g,f[a]+=d;return k}}function z(a){var b=a[0],c=a[1],d=b===Q[T-1][0],e=c===Q[T-1][1];if(!d||!e)if(1<T){var f=b===Q[T-2][0],g=c===Q[T-2][1];d&&(b===U||b===X)&&f?g?T--:Q[T-1]=a:e&&(c===ea||c===fa)&&g?f?T--:Q[T-1]=a:
Q[T++]=a}else Q[T++]=a}function x(a){Q[T-1][0]!==a[0]&&Q[T-1][1]!==a[1]&&z([aa,na]);z(a);oa=null;aa=na=0}function C(a){ca=a[0]/F;Z=a[1]/L;da=a[0]<U?U:a[0]>X?X:0;ma=a[1]<ea?ea:a[1]>fa?fa:0;if(da||ma){if(T)if(oa){var b=ja(oa,a);1<b.length&&(x(b[0]),Q[T++]=b[1])}else ha=ja(Q[T-1],a)[0],Q[T++]=ha;else Q[T++]=[da||a[0],ma||a[1]];b=Q[T-1];if(da&&ma&&(b[0]!==da||b[1]!==ma)){if(oa)if(aa!==da&&na!==ma)if(aa&&na){b=a[0]-oa[0];var c=(a[1]-oa[1])/b;b=0<(oa[1]*a[0]-a[1]*oa[0])/b?[0<c?U:X,fa]:[0<c?X:U,ea];z(b)}else z([aa||
da,na||ma]);else aa&&na&&z([aa,na]);z([da,ma])}else aa-da&&na-ma&&z([da||aa,ma||na]);oa=a;aa=da;na=ma}else oa&&x(ja(oa,a)[0]),Q[T++]=a}var B=l.xaxis,D=l.yaxis,G="log"===B.type,E="log"===D.type,F=B._length,L=D._length,J=l.connectGaps,H=l.baseTolerance,K=l.shape,M="linear"===K,I=l.fill&&"none"!==l.fill,N=[],O=e.minTolerance,P=a.length,Q=Array(P),T=0,V,Y,ca,Z;var R=e.maxScreensAway;var U=-F*R,X=F*(1+R),ea=-L*R,fa=L*(1+R),la=[[U,ea,X,ea],[X,ea,X,fa],[X,fa,U,fa],[U,fa,U,ea]],da,ma,aa,na,ha,ja;"linear"===
K||"spline"===K?ja=t:"hv"===K||"vh"===K?ja=y:"hvh"===K?ja=A(0,U,X):"vhv"===K&&(ja=A(1,ea,fa));for(K=0;K<P;K++)if(R=f(K)){T=0;var oa=null;C(R);for(K++;K<P;K++){var ka=f(K);if(!ka)if(J)continue;else break;if(M&&l.simplify){var ia=f(K+1);var xa=r(ka,R);if(I&&(0===T||T===P-1)||!(xa<c(ka,ia)*O)){var ya=[(ka[0]-R[0])/xa,(ka[1]-R[1])/xa];var sa=R;var W=xa;var pa=V=Y=0;var qa=!1;xa=ka;for(K++;K<a.length;K++){var ra=ia;ia=f(K+1);if(!ra)if(J)continue;else break;var ua=[ra[0]-R[0],ra[1]-R[1]];var va=ua[0]*ya[1]-
ua[1]*ya[0];V=Math.min(V,va);Y=Math.max(Y,va);if(Y-V>c(ra,ia))break;xa=ra;ua=ua[0]*ya[0]+ua[1]*ya[1];ua>W?(W=ua,ka=ra,qa=!1):ua<pa&&(pa=ua,sa=ra,qa=!0)}qa?(C(ka),xa!==sa&&C(sa)):(sa!==R&&C(sa),xa!==ka&&C(ka));C(xa);if(K>=a.length||!ra)break;C(ra);R=ra}}else C(ka)}oa&&z([aa||oa[0],na||oa[1]]);N.push(Q.slice(0,T))}return N}},{"../../constants/numerical":692,"../../lib":716,"./constants":1123}],1134:[function(a,q,p){q.exports=function(a,k,m){"spline"===m("line.shape")&&m("line.smoothing")}},{}],1135:[function(a,
q,p){var n={tonextx:1,tonexty:1,tonext:1};q.exports=function(a,m,h){var b,g={};var e=!1;var k=-1,l=0,f=-1;for(m=0;m<h.length;m++)a=h[m][0].trace,(b=a.stackgroup||"")?b in g?b=g[b]:(b=g[b]=l,l++):a.fill in n&&0<=f?b=f:(b=f=l,l++),b<k&&(e=!0),a._groupIndex=k=b;h=h.slice();e&&h.sort(function(a,b){a=a[0].trace;b=b[0].trace;return a._groupIndex-b._groupIndex||a.index-b.index});g={};for(m=0;m<h.length;m++)a=h[m][0].trace,b=a.stackgroup||"",!0===a.visible?(a._nexttrace=null,a.fill in n&&(e=g[b],a._prevtrace=
e||null,e&&(e._nexttrace=a)),a._ownfill=a.fill&&("tozero"===a.fill.substr(0,6)||"toself"===a.fill||"to"===a.fill.substr(0,2)&&!a._prevtrace),g[b]=a):a._prevtrace=a._nexttrace=a._ownfill=null;return h}},{}],1136:[function(a,q,p){var n=a("fast-isnumeric");q.exports=function(a){a=a.marker;var k=a.sizeref||1,h=a.sizemin||0,b="area"===a.sizemode?function(a){return Math.sqrt(a/k)}:function(a){return a/k};return function(a){a=b(a/2);return n(a)&&0<a?Math.max(a,h):0}}},{"fast-isnumeric":228}],1137:[function(a,
q,p){q.exports={container:"marker",min:"cmin",max:"cmax"}},{}],1138:[function(a,q,p){var n=a("../../components/color"),k=a("../../components/colorscale/helpers").hasColorscale,m=a("../../components/colorscale/defaults"),h=a("./subtypes");q.exports=function(a,g,e,t,l,f){var b=h.isBubble(a),c=(a.line||{}).color;f=f||{};c&&(e=c);l("marker.symbol");l("marker.opacity",b?.7:1);l("marker.size");l("marker.color",e);k(a,"marker")&&m(a,g,t,l,{prefix:"marker.",cLetter:"c"});f.noSelect||(l("selected.marker.color"),
l("unselected.marker.color"),l("selected.marker.size"),l("unselected.marker.size"));f.noLine||(e=c&&!Array.isArray(c)&&g.marker.color!==c?c:b?n.background:n.defaultLine,l("marker.line.color",e),k(a,"marker.line")&&m(a,g,t,l,{prefix:"marker.line.",cLetter:"c"}),l("marker.line.width",b?1:0));b&&(l("marker.sizeref"),l("marker.sizemin"),l("marker.sizemode"));f.gradient&&"none"!==l("marker.gradient.type")&&l("marker.gradient.color")}},{"../../components/color":591,"../../components/colorscale/defaults":601,
"../../components/colorscale/helpers":602,"./subtypes":1143}],1139:[function(a,q,p){function n(a,b,c){b.each(function(b){var d=e(h.select(this),"g","fills");l.setClipUrl(d,c.layerClipId,a);var f=b[0].trace;b=[];f._ownfill&&b.push("_ownFill");f._nexttrace&&b.push("_nextFill");d=d.selectAll("g").data(b,t);d.enter().append("g");d.exit().each(function(a){f[a]=null}).remove();d.order().each(function(a){f[a]=e(h.select(this),"path","js-fill")})})}function k(a,c,k,n,p,q,x){function u(a){return J?a.transition():
a}function v(a){u(a).attr("d","M0,0Z")}function w(a){return a.filter(function(a){return!a.gap&&a.vis})}function z(a){return a.filter(function(a){return a.vis})}function A(a){return a.filter(function(a){return!a.gap})}function y(a){return a.id}function L(){return!1}m(a,c,k,n,p);var J=!!x&&0<x.duration,H=k.xaxis,K=k.yaxis,M=n[0].trace,I=M.line,N=h.select(q),O=e(N,"g","errorbars");q=e(N,"g","lines");c=e(N,"g","points");p=e(N,"g","text");b.getComponentMethod("errorbars","plot")(a,O,k,x);if(!0===M.visible){u(N).style("opacity",
M.opacity);var P=M.fill.charAt(M.fill.length-1);"x"!==P&&"y"!==P&&(P="");n[0][k.isRangePlot?"nodeRangePlot3":"node3"]=N;x="";N=[];if(O=M._prevtrace){x=O._prevRevpath||"";var Q=O._nextFill;N=O._polygons}var T,V,Y="",ca="",Z=[];var R=g.noop;O=M._ownFill;if(f.hasLines(M)||"none"!==M.fill){Q&&Q.datum(n);if(-1!==["hv","vh","hvh","vhv"].indexOf(I.shape)){var U=l.steps(I.shape);var X=l.steps(I.shape.split("").reverse().join(""))}else U="spline"===I.shape?X=function(a){var b=a[a.length-1];return 1<a.length&&
a[0][0]===b[0]&&a[0][1]===b[1]?l.smoothclosed(a.slice(1),I.smoothing):l.smoothopen(a,I.smoothing)}:X=function(a){return"M"+a.join("L")};var ea=function(a){return X(a.reverse())};Z=d(n,{xaxis:H,yaxis:K,connectGaps:M.connectgaps,baseTolerance:Math.max(I.width||1,3)/4,shape:I.shape,simplify:I.simplify,fill:M.fill});var fa=M._polygons=Array(Z.length);for(R=0;R<Z.length;R++)M._polygons[R]=r(Z[R]);if(Z.length){var la=Z[0][0];var da=Z[Z.length-1];da=da[da.length-1]}R=function(a){return function(b){T=U(b);
V=ea(b);Y?P?(Y+="L"+T.substr(1),ca=V+("L"+ca.substr(1))):(Y+="Z"+T,ca=V+"Z"+ca):(Y=T,ca=V);f.hasLines(M)&&1<b.length&&(b=h.select(this),b.datum(n),a?u(b.style("opacity",0).attr("d",T).call(l.lineGroupStyle)).style("opacity",1):(b=u(b),b.attr("d",T),l.singleLineStyle(n,b)))}}}q=q.selectAll(".js-line").data(Z);u(q.exit()).style("opacity",0).remove();q.each(R(!1));q.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(l.lineGroupStyle).each(R(!0));l.setClipUrl(q,
k.layerClipId,a);Z.length?(O?(O.datum(n),la&&da&&(P?("y"===P?la[1]=da[1]=K.c2p(0,!0):"x"===P&&(la[0]=da[0]=H.c2p(0,!0)),u(O).attr("d","M"+da+"L"+la+"L"+Y.substr(1)).call(l.singleFillStyle)):u(O).attr("d",Y+"Z").call(l.singleFillStyle))):Q&&("tonext"===M.fill.substr(0,6)&&Y&&x?("tonext"===M.fill?u(Q).attr("d",Y+"Z"+x+"Z").call(l.singleFillStyle):u(Q).attr("d",Y+"L"+x.substr(1)+"Z").call(l.singleFillStyle),M._polygons=M._polygons.concat(N)):(v(Q),M._polygons=null)),M._prevRevpath=ca,M._prevPolygons=
fa):(O?v(O):Q&&v(Q),M._polygons=M._prevRevpath=M._prevPolygons=null);c.datum(n);p.datum(n);(function(b,c,d){var e,g=d[0].trace;d=f.hasMarkers(g);var m=f.hasText(g);var n=g.ids?y:void 0;var r=L,p=L;if(d||m){var q=t,v=g.stackgroup,x=v&&"infer zero"===a._fullLayout._scatterStackOpts[H._id+K._id][v].stackgaps;g.marker.maxdisplayed||g._needsCull?q=x?z:w:v&&!x&&(q=A);d&&(r=q);m&&(p=q)}b=b.selectAll("path.point");b=b.data(r,n);r=b.enter().append("path").classed("point",!0);J&&r.call(l.pointStyle,g,a).call(l.translatePoints,
H,K).style("opacity",0).transition().style("opacity",1);b.order();var B;d&&(B=l.makePointStyleFns(g));b.each(function(b){var c=h.select(this),d=u(c);(e=l.translatePoint(b,d,H,K))?(l.singlePointStyle(b,d,g,B,a),k.layerClipId&&l.hideOutsideRangePoint(b,d,H,K,g.xcalendar,g.ycalendar),g.customdata&&c.classed("plotly-customdata",null!==b.data&&void 0!==b.data)):d.remove()});J?b.exit().transition().style("opacity",0).remove():b.exit().remove();b=c.selectAll("g");b=b.data(p,n);b.enter().append("g").classed("textpoint",
!0).append("text");b.order();b.each(function(a){var b=h.select(this),c=u(b.select("text"));(e=l.translatePoint(a,c,H,K))?k.layerClipId&&l.hideOutsideRangePoint(a,b,H,K,g.xcalendar,g.ycalendar):b.remove()});b.selectAll("text").call(l.textPointStyle,g,a).each(function(a){var b=H.c2p(a.x),c=K.c2p(a.y);h.select(this).selectAll("tspan.line").each(function(){u(h.select(this)).attr({x:b,y:c})})});b.exit().remove()})(c,p,n);Q=!1===M.cliponaxis?null:k.layerClipId;l.setClipUrl(c,Q,a);l.setClipUrl(p,Q,a)}}function m(a,
b,c,d,e){a=c.xaxis;c=c.yaxis;var k=h.extent(g.simpleMap(a.range,a.r2c)),l=h.extent(g.simpleMap(c.range,c.r2c));c=d[0].trace;if(f.hasMarkers(c)&&(c=c.marker.maxdisplayed,0!==c)){a=d.filter(function(a){return a.x>=k[0]&&a.x<=k[1]&&a.y>=l[0]&&a.y<=l[1]});var m=Math.ceil(a.length/c),n=0;e.forEach(function(a,c){a=a[0].trace;f.hasMarkers(a)&&0<a.marker.maxdisplayed&&c<b&&n++});var r=Math.round(n*m/3+Math.floor(n/3)*m/7.1);d.forEach(function(a){delete a.vis});a.forEach(function(a,b){0===Math.round((b+r)%
m)&&(a.vis=!0)})}}var h=a("d3"),b=a("../../registry"),g=a("../../lib"),e=g.ensureSingle,t=g.identity,l=a("../../components/drawing"),f=a("./subtypes"),d=a("./line_points"),c=a("./link_traces"),r=a("../../lib/polygon").tester;q.exports=function(a,b,d,e,f,g){var l,m=!f,r=!!f&&0<f.duration,t=c(a,b,d);d=e.selectAll("g.trace").data(t,function(a){return a[0].trace.uid});d.enter().append("g").attr("class",function(a){return"trace scatter trace"+a[0].trace.uid}).style("stroke-miterlimit",2);d.order();n(a,
d,b);r?(g&&(l=g()),h.transition().duration(f.duration).ease(f.easing).each("end",function(){l&&l()}).each("interrupt",function(){l&&l()}).each(function(){e.selectAll("g.trace").each(function(c,d){k(a,d,b,c,t,this,f)})})):d.each(function(c,d){k(a,d,b,c,t,this,f)});m&&d.exit().remove();e.selectAll("path:not([d])").remove()}},{"../../components/drawing":612,"../../lib":716,"../../lib/polygon":728,"../../registry":845,"./line_points":1133,"./link_traces":1135,"./subtypes":1143,d3:165}],1140:[function(a,
q,p){var n=a("./subtypes");q.exports=function(a,m){var h=a.cd,b=a.xaxis,g=a.yaxis,e=[],k=h[0].trace;if(!n.hasMarkers(k)&&!n.hasText(k))return[];if(!1===m)for(k=0;k<h.length;k++)h[k].selected=0;else for(k=0;k<h.length;k++){var l=h[k];var f=b.c2p(l.x);var d=g.c2p(l.y);null!==l.i&&m.contains([f,d],!1,k,a)?(e.push({pointNumber:l.i,x:b.c2d(l.x),y:g.c2d(l.y)}),l.selected=1):l.selected=0}return e}},{"./subtypes":1143}],1141:[function(a,q,p){var n=["orientation","groupnorm","stackgaps"];q.exports=function(a,
m,h,b){h=h._scatterStackOpts;var g=b("stackgroup");if(g){var e=m.xaxis+m.yaxis,k=h[e];k||(k=h[e]={});h=k[g];e=!1;h?h.traces.push(m):(h=k[g]={traceIndices:[],traces:[m]},e=!0);m={orientation:m.x&&!m.y?"h":"v"};for(g=0;g<n.length;g++){k=n[g];var l=k+"Found";if(!h[l]){var f=void 0!==a[k],d="orientation"===k;if(f||e)if(h[k]=b(k,m[k]),d&&(h.fillDflt="h"===h[k]?"tonextx":"tonexty"),f&&(h[l]=!0,!e&&(delete h.traces[0][k],d)))for(k=0;k<h.traces.length-1;k++)l=h.traces[k],l._input.fill!==l.fill&&(l.fill=h.fillDflt)}}return h}}},
{}],1142:[function(a,q,p){function n(a,b,k){h.pointStyle(a.selectAll("path.point"),b,k)}function k(a,b,k){h.textPointStyle(a.selectAll("text"),b,k)}var m=a("d3"),h=a("../../components/drawing"),b=a("../../registry");q.exports={style:function(a){var e=m.select(a).selectAll("g.trace.scatter");e.style("opacity",function(a){return a[0].trace.opacity});e.selectAll("g.points").each(function(b){var e=m.select(this);n(e,b.trace||b[0].trace,a)});e.selectAll("g.text").each(function(b){var e=m.select(this);
k(e,b.trace||b[0].trace,a)});e.selectAll("g.trace path.js-line").call(h.lineGroupStyle);e.selectAll("g.trace path.js-fill").call(h.fillGroupStyle);b.getComponentMethod("errorbars","style")(e)},stylePoints:n,styleText:k,styleOnSelect:function(a,b,m){b=b[0].trace;b.selectedpoints?(h.selectedPointStyle(m.selectAll("path.point"),b),h.selectedTextStyle(m.selectAll("text"),b)):(n(m,b,a),k(m,b,a))}}},{"../../components/drawing":612,"../../registry":845,d3:165}],1143:[function(a,q,p){var n=a("../../lib");
q.exports={hasLines:function(a){return a.visible&&a.mode&&-1!==a.mode.indexOf("lines")},hasMarkers:function(a){return a.visible&&(a.mode&&-1!==a.mode.indexOf("markers")||"splom"===a.type)},hasText:function(a){return a.visible&&a.mode&&-1!==a.mode.indexOf("text")},isBubble:function(a){return n.isPlainObject(a.marker)&&n.isArrayOrTypedArray(a.marker.size)}}},{"../../lib":716}],1144:[function(a,q,p){var n=a("../../lib");q.exports=function(a,m,h,b,g){g=g||{};b("textposition");n.coerceFont(b,"textfont",
h.font);g.noSelect||(b("selected.textfont.color"),b("unselected.textfont.color"))}},{"../../lib":716}],1145:[function(a,q,p){var n=a("../../lib"),k=a("../../registry");q.exports=function(a,h,b,g){var e=g("x"),m=g("y");k.getComponentMethod("calendars","handleTraceDefaults")(a,h,["x","y"],b);if(e)a=n.minRowLength(e),m?m=Math.min(a,n.minRowLength(m)):(m=a,g("y0"),g("dy"));else{if(!m)return 0;m=n.minRowLength(m);g("x0");g("dx")}return h._length=m}},{"../../lib":716,"../../registry":845}],1146:[function(a,
q,p){function n(a){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}p=a("../scatter/attributes");var k=a("../../components/colorscale/attributes"),m=a("../../plots/template_attributes").hovertemplateAttrs,h=a("../../plots/template_attributes").texttemplateAttrs,b=a("../../plots/attributes"),g=a("../../constants/gl3d_dashes"),e=a("../../constants/gl3d_markers"),t=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;
var l=p.marker,f=l.line;g=t({width:p.line.width,dash:{valType:"enumerated",values:Object.keys(g),dflt:"solid"}},k("line"));q=q.exports=a({x:p.x,y:p.y,z:{valType:"data_array"},text:t({},p.text,{}),texttemplate:h({},{}),hovertext:t({},p.hovertext,{}),hovertemplate:m(),mode:t({},p.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:n("x"),y:n("y"),z:n("z")},connectgaps:p.connectgaps,line:g,marker:t({symbol:{valType:"enumerated",
values:Object.keys(e),dflt:"circle",arrayOk:!0},size:t({},l.size,{dflt:8}),sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,opacity:t({},l.opacity,{arrayOk:!1}),colorbar:l.colorbar,line:t({width:t({},f.width,{arrayOk:!1})},k("marker.line"))},k("marker")),textposition:t({},p.textposition,{dflt:"top center"}),textfont:{color:p.textfont.color,size:p.textfont.size,family:t({},p.textfont.family,{arrayOk:!1})},hoverinfo:t({},b.hoverinfo)},"calc","nested");q.x.editType=q.y.editType=q.z.editType="calc+clearAxisTypes"},
{"../../components/colorscale/attributes":598,"../../constants/gl3d_dashes":689,"../../constants/gl3d_markers":690,"../../lib/extend":707,"../../plot_api/edit_types":747,"../../plots/attributes":761,"../../plots/template_attributes":840,"../scatter/attributes":1119}],1147:[function(a,q,p){var n=a("../scatter/arrays_to_calcdata"),k=a("../scatter/colorscale_calc");q.exports=function(a,h){var b=[{x:!1,y:!1,trace:h,t:{}}];n(b,h);k(a,h);return b}},{"../scatter/arrays_to_calcdata":1118,"../scatter/colorscale_calc":1122}],
1148:[function(a,q,p){function n(a,h,b,g){if(!h||!h.visible)return null;h=k.getComponentMethod("errorbars","makeComputeError")(h);for(var e=Array(a.length),m=0;m<a.length;m++){var l=h(+a[m],m);if("log"===g.type){var f=g.c2l(a[m]),d=a[m]-l[0];l=a[m]+l[1];e[m]=[(g.c2l(d,!0)-f)*b,(g.c2l(l,!0)-f)*b];0<d&&(f=g.c2l(d),g._lowerLogErrorBound||(g._lowerLogErrorBound=f),g._lowerErrorBound=Math.min(g._lowerLogErrorBound,f))}else e[m]=[-l[0]*b,l[1]*b]}return e}var k=a("../../registry");q.exports=function(a,h,
b){a=[n(a.x,a.error_x,h[0],b.xaxis),n(a.y,a.error_y,h[1],b.yaxis),n(a.z,a.error_z,h[2],b.zaxis)];a:{for(h=0;h<a.length;h++)if(a[h]){h=a[h].length;break a}h=0}if(0===h)return null;b=Array(h);for(var g=0;g<h;g++){for(var e=[[0,0,0],[0,0,0]],k=0;3>k;k++)if(a[k])for(var l=0;2>l;l++)e[l][k]=a[k][g][l];b[g]=e}return b}},{"../../registry":845}],1149:[function(a,q,p){function n(a,b){this.scene=a;this.uid=b;this.color=this.delaunayMesh=this.textMarkers=this.errorBars=this.scatterPlot=this.linePlot=null;this.mode=
"";this.dataPoints=[];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.data=this.textLabels=null}function k(a){for(var b=[0,0,0],c=[[0,0,0],[0,0,0],[0,0,0]],d=[1,1,1],e=0;3>e;e++){var f=a[e];f&&!1!==f.copy_zstyle&&!1!==a[2].visible&&(f=a[2]);f&&f.visible&&(b[e]=f.width/2,c[e]=y(f.color),d[e]=f.thickness)}return{capSize:b,color:c,lineWidth:d}}function m(a){return null===a||void 0===a?0:-1<a.indexOf("left")?-1:-1<a.indexOf("right")?1:0}function h(a){return null===
a||void 0===a?0:-1<a.indexOf("top")?-1:-1<a.indexOf("bottom")?1:0}function b(a){var b=[0,0];if(Array.isArray(a))for(var c=0;c<a.length;c++)b[c]=[0,0],a[c]&&(b[c][0]=m(a[c]),b[c][1]=h(a[c]));else b[0]=m(a),b[1]=h(a);return b}function g(a,b){return b(4*a)}function e(a){return C[a]}function t(a,b,c,d,e){if(w.isArrayOrTypedArray(a)){var f=[];for(var g=0;g<b;g++)f[g]=void 0===a[g]?d:c(a[g],e)}else f=c(a,w.identity);return f}function l(a,c){function d(a,b){a=h[a];return B.tickText(a,a.d2l(b),!0).text}var f=
[],h=a.fullSceneLayout,l=a.dataScale,m=h.xaxis,n=h.yaxis,r=h.zaxis,p=c.marker,q=c.line,u=c.x||[],v=c.y||[],x=c.z||[],C=u.length,E=c.xcalendar,F=c.ycalendar,R=c.zcalendar,U;for(U=0;U<C;U++){var X=m.d2l(u[U],0,E)*l[0];var ea=n.d2l(v[U],0,F)*l[1];var fa=r.d2l(x[U],0,R)*l[2];f[U]=[X,ea,fa]}if(Array.isArray(c.text))var la=c.text;else if(void 0!==c.text)for(la=Array(C),U=0;U<C;U++)la[U]=c.text;var da=c.texttemplate;if(da)for(a=a.fullLayout._d3locale,m=(U=Array.isArray(da))?Math.min(da.length,C):C,n=U?function(a){return da[a]}:
function(){return da},la=Array(m),U=0;U<m;U++)r={x:u[U],y:v[U],z:x[U]},E={xLabel:d("xaxis",u[U]),yLabel:d("yaxis",v[U]),zLabel:d("zaxis",x[U])},F={},D(F,c,U),R=c._meta||{},la[U]=w.texttemplateString(n(U),E,a,F,r,R);f={position:f,mode:c.mode,text:la};"line"in c&&(f.lineColor=A(q,1,C),f.lineWidth=q.width,f.lineDashes=q.dash);"marker"in c&&(U=z(c),f.scatterColor=A(p,1,C),f.scatterSize=t(p.size,C,g,20,U),f.scatterMarker=t(p.symbol,C,e,""),f.scatterLineWidth=p.line.width,f.scatterLineColor=A(p.line,1,
C),f.scatterAngle=0);"textposition"in c&&(f.textOffset=b(c.textposition),f.textColor=A(c.textfont,1,C),f.textSize=t(c.textfont.size,C,w.identity,12),f.textFont=c.textfont.family,f.textAngle=0);p=["x","y","z"];f.project=[!1,!1,!1];f.projectScale=[1,1,1];f.projectOpacity=[1,1,1];for(U=0;3>U;++U)if(C=c.projection[p[U]],f.project[U]=C.show)f.projectOpacity[U]=C.opacity,f.projectScale[U]=C.scale;f.errorBounds=G(c,l,h);l=k([c.error_x,c.error_y,c.error_z]);f.errorColor=l.color;f.errorLineWidth=l.lineWidth;
f.errorCapSize=l.capSize;f.delaunayAxis=c.surfaceaxis;f.delaunayColor=y(c.surfacecolor);return f}function f(a){if(Array.isArray(a)){var b=a[0];Array.isArray(b)&&(a=b);return"rgb("+a.slice(0,3).map(function(a){return Math.round(255*a)})+")"}return null}var d=a("gl-line3d"),c=a("gl-scatter3d"),r=a("gl-error3d"),u=a("gl-mesh3d"),v=a("delaunay-triangulate"),w=a("../../lib"),y=a("../../lib/str2rgbarray"),A=a("../../lib/gl_format_color").formatColor,z=a("../scatter/make_bubble_size_func"),x=a("../../constants/gl3d_dashes"),
C=a("../../constants/gl3d_markers"),B=a("../../plots/cartesian/axes"),D=a("../../components/fx/helpers").appendArrayPointValue,G=a("./calc_errors");a=n.prototype;a.handlePick=function(a){if(a.object&&(a.object===this.linePlot||a.object===this.delaunayMesh||a.object===this.textMarkers||a.object===this.scatterPlot)){var b=a.index=a.data.index;a.object.highlight&&a.object.highlight(null);this.scatterPlot&&(a.object=this.scatterPlot,this.scatterPlot.highlight(a.data));a.textLabel="";if(this.textLabels)if(Array.isArray(this.textLabels)){if(this.textLabels[b]||
0===this.textLabels[b])a.textLabel=this.textLabels[b]}else a.textLabel=this.textLabels;a.traceCoordinate=[this.data.x[b],this.data.y[b],this.data.z[b]];return!0}};a.update=function(a){var b=this.scene.glplot.gl;var e=x.solid;this.data=a;var g=l(this.scene,a);"mode"in g&&(this.mode=g.mode);"lineDashes"in g&&g.lineDashes in x&&(e=x[g.lineDashes]);this.color=f(g.scatterColor)||f(g.lineColor);this.dataPoints=g.position;e={gl:this.scene.glplot.gl,position:g.position,color:g.lineColor,lineWidth:g.lineWidth||
1,dashes:e[0],dashScale:e[1],opacity:a.opacity,connectGaps:a.connectgaps};-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(e):(this.linePlot=d(e),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);e=a.opacity;a.marker&&a.marker.opacity&&(e*=a.marker.opacity);e={gl:this.scene.glplot.gl,position:g.position,color:g.scatterColor,size:g.scatterSize,glyph:g.scatterMarker,opacity:e,
orthographic:!0,lineWidth:g.scatterLineWidth,lineColor:g.scatterLineColor,project:g.project,projectScale:g.projectScale,projectOpacity:g.projectOpacity};-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(e):(this.scatterPlot=c(e),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null);e={gl:this.scene.glplot.gl,position:g.position,
glyph:g.text,color:g.textColor,size:g.textSize,angle:g.textAngle,alignment:g.textOffset,font:g.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:a.opacity};this.textLabels=a.hovertext||a.text;-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(e):(this.textMarkers=c(e),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=
null);e={gl:this.scene.glplot.gl,position:g.position,color:g.errorColor,error:g.errorBounds,lineWidth:g.errorLineWidth,capSize:g.errorCapSize,opacity:a.opacity};this.errorBars?g.errorBounds?this.errorBars.update(e):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):g.errorBounds&&(this.errorBars=r(e),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars));if(0<=g.delaunayAxis){e=g.position;var h=g.delaunayColor;g=g.delaunayAxis;var k=(g+1)%3,m=(g+2)%
3,n=[];g=[];var p;for(p=0;p<e.length;++p){var t=e[p];!isNaN(t[k])&&isFinite(t[k])&&!isNaN(t[m])&&isFinite(t[m])&&(n.push([t[k],t[m]]),g.push(p))}k=v(n);for(p=0;p<k.length;++p)for(m=k[p],n=0;n<m.length;++n)m[n]=g[m[n]];e={positions:e,cells:k,meshColor:h};e.opacity=a.opacity;this.delaunayMesh?this.delaunayMesh.update(e):(e.gl=b,this.delaunayMesh=u(e),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),
this.delaunayMesh=null)};a.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose());this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose());this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose());this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose());this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};q.exports=function(a,
b){a=new n(a,b.uid);a.update(b);return a}},{"../../components/fx/helpers":626,"../../constants/gl3d_dashes":689,"../../constants/gl3d_markers":690,"../../lib":716,"../../lib/gl_format_color":713,"../../lib/str2rgbarray":739,"../../plots/cartesian/axes":764,"../scatter/make_bubble_size_func":1136,"./calc_errors":1148,"delaunay-triangulate":167,"gl-error3d":250,"gl-line3d":258,"gl-mesh3d":283,"gl-scatter3d":300}],1150:[function(a,q,p){function n(a,b,d,c){var e=0,f=d("x"),g=d("y");d=d("z");k.getComponentMethod("calendars",
"handleTraceDefaults")(a,b,["x","y","z"],c);f&&g&&d&&(e=Math.min(f.length,g.length,d.length),b._length=b._xlength=b._ylength=b._zlength=e);return e}var k=a("../../registry"),m=a("../../lib"),h=a("../scatter/subtypes"),b=a("../scatter/marker_defaults"),g=a("../scatter/line_defaults"),e=a("../scatter/text_defaults"),t=a("./attributes");q.exports=function(a,f,d,c){function l(b,c){return m.coerce(a,f,t,b,c)}if(n(a,f,l,c)){l("text");l("hovertext");l("hovertemplate");l("mode");h.hasLines(f)&&(l("connectgaps"),
g(a,f,d,c,l));h.hasMarkers(f)&&b(a,f,d,c,l,{noSelect:!0});h.hasText(f)&&(l("texttemplate"),e(a,f,c,l,{noSelect:!0}));c=(f.line||{}).color;var p=(f.marker||{}).color;0<=l("surfaceaxis")&&l("surfacecolor",c||p);for(var q=["x","y","z"],w=0;3>w;++w){var y="projection."+q[w];l(y+".show")&&(l(y+".opacity"),l(y+".scale"))}q=k.getComponentMethod("errorbars","supplyDefaults");q(a,f,c||p||d,{axis:"z"});q(a,f,c||p||d,{axis:"y",inherit:"z"});q(a,f,c||p||d,{axis:"x",inherit:"z"})}else f.visible=!1}},{"../../lib":716,
"../../registry":845,"../scatter/line_defaults":1132,"../scatter/marker_defaults":1138,"../scatter/subtypes":1143,"../scatter/text_defaults":1144,"./attributes":1146}],1151:[function(a,q,p){q.exports={plot:a("./convert"),attributes:a("./attributes"),markerSymbols:a("../../constants/gl3d_markers"),supplyDefaults:a("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:a("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:a("../../plots/gl3d"),
categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":690,"../../plots/gl3d":804,"./attributes":1146,"./calc":1147,"./convert":1149,"./defaults":1150}],1152:[function(a,q,p){p=a("../scatter/attributes");var n=a("../../plots/attributes"),k=a("../../plots/template_attributes").hovertemplateAttrs,m=a("../../plots/template_attributes").texttemplateAttrs,h=a("../../components/colorscale/attributes");a=a("../../lib/extend").extendFlat;var b=p.marker,g=p.line,
e=b.line;q.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:a({},p.mode,{dflt:"markers"}),text:a({},p.text,{}),texttemplate:m({editType:"plot"},{keys:["a","b","text"]}),hovertext:a({},p.hovertext,{}),line:{color:g.color,width:g.width,dash:g.dash,shape:a({},g.shape,{values:["linear","spline"]}),smoothing:g.smoothing,editType:"calc"},connectgaps:p.connectgaps,fill:a({},p.fill,{values:["none","toself","tonext"],
dflt:"none"}),fillcolor:p.fillcolor,marker:a({symbol:b.symbol,opacity:b.opacity,maxdisplayed:b.maxdisplayed,size:b.size,sizeref:b.sizeref,sizemin:b.sizemin,sizemode:b.sizemode,line:a({width:e.width,editType:"calc"},h("marker.line")),gradient:b.gradient,editType:"calc"},h("marker")),textfont:p.textfont,textposition:p.textposition,selected:p.selected,unselected:p.unselected,hoverinfo:a({},n.hoverinfo,{flags:["a","b","text","name"]}),hoveron:p.hoveron,hovertemplate:k()}},{"../../components/colorscale/attributes":598,
"../../lib/extend":707,"../../plots/attributes":761,"../../plots/template_attributes":840,"../scatter/attributes":1119}],1153:[function(a,q,p){var n=a("fast-isnumeric"),k=a("../scatter/colorscale_calc"),m=a("../scatter/arrays_to_calcdata"),h=a("../scatter/calc_selection"),b=a("../scatter/calc").calcMarkerSize,g=a("../carpet/lookup_carpetid");q.exports=function(a,p){var e=p._carpetTrace=g(a,p);if(e&&e.visible&&"legendonly"!==e.visible){var f;p.xaxis=e.xaxis;p.yaxis=e.yaxis;var d=p._length,c=Array(d),
r=!1;for(f=0;f<d;f++){var t=p.a[f];var q=p.b[f];if(n(t)&&n(q)){var w=e.ab2xy(+t,+q,!0),y=e.isVisible(+t,+q);y||(r=!0);c[f]={x:w[0],y:w[1],a:t,b:q,vis:y}}else c[f]={x:!1,y:!1}}p._needsCull=r;c[0].carpet=e;c[0].trace=p;b(p,d);k(a,p);m(c,p);h(c,p);return c}}},{"../carpet/lookup_carpetid":915,"../scatter/arrays_to_calcdata":1118,"../scatter/calc":1120,"../scatter/calc_selection":1121,"../scatter/colorscale_calc":1122,"fast-isnumeric":228}],1154:[function(a,q,p){var n=a("../../lib"),k=a("../scatter/constants"),
m=a("../scatter/subtypes"),h=a("../scatter/marker_defaults"),b=a("../scatter/line_defaults"),g=a("../scatter/line_shape_defaults"),e=a("../scatter/text_defaults"),t=a("../scatter/fillcolor_defaults"),l=a("./attributes");q.exports=function(a,d,c,r){function f(b,c){return n.coerce(a,d,l,b,c)}f("carpet");d.xaxis="x";d.yaxis="y";var p=f("a"),q=f("b");if(p=Math.min(p.length,q.length)){d._length=p;f("text");f("texttemplate");f("hovertext");f("mode",p<k.PTS_LINESONLY?"lines+markers":"lines");m.hasLines(d)&&
(b(a,d,c,r,f),g(a,d,f),f("connectgaps"));m.hasMarkers(d)&&h(a,d,c,r,f,{gradient:!0});m.hasText(d)&&e(a,d,r,f);r=[];if(m.hasMarkers(d)||m.hasText(d))f("marker.maxdisplayed"),r.push("points");f("fill");"none"!==d.fill&&(t(a,d,c,f),m.hasLines(d)||g(a,d,f));"tonext"!==d.fill&&"toself"!==d.fill||r.push("fills");"fills"!==f("hoveron",r.join("+")||"points")&&f("hovertemplate");n.coerceSelectionMarkerOpacity(d,f)}else d.visible=!1}},{"../../lib":716,"../scatter/constants":1123,"../scatter/fillcolor_defaults":1127,
"../scatter/line_defaults":1132,"../scatter/line_shape_defaults":1134,"../scatter/marker_defaults":1138,"../scatter/subtypes":1143,"../scatter/text_defaults":1144,"./attributes":1152}],1155:[function(a,q,p){q.exports=function(a,k,m,h,b){k=h[b];a.a=k.a;a.b=k.b;a.y=k.y;return a}},{}],1156:[function(a,q,p){q.exports=function(a,k){var m={};k=k._carpet;a=k.ab2ij([a.a,a.b]);var h=Math.floor(a[0]),b=Math.floor(a[1]);k=k.evalxy([],h,b,a[0]-h,a[1]-b);m.yLabel=k[1].toFixed(3);return m}},{}],1157:[function(a,
q,p){var n=a("../scatter/hover"),k=a("../../lib").fillText;q.exports=function(a,h,b,g){function e(a,b){var c=a.labelprefix&&0<a.labelprefix.length?a.labelprefix.replace(/ = $/,""):a._hovertitle;f.push(c+": "+b.toFixed(3)+a.labelsuffix)}if((h=n(a,h,b,g))&&!1!==h[0].index){b=h[0];if(void 0===b.index)return g=a.xa._length,a=g*(1-b.y0/a.ya._length)/2,g-=a,b.x0=Math.max(Math.min(b.x0,g),a),b.x1=Math.max(Math.min(b.x1,g),a),h;a=b.cd[b.index];b.a=a.a;b.b=a.b;b.xLabelVal=void 0;b.yLabelVal=void 0;g=b.trace;
var m=g._carpet,l=g._module.formatLabels(a,g);b.yLabel=l.yLabel;delete b.text;var f=[];g.hovertemplate||(l=(a.hi||g.hoverinfo).split("+"),-1!==l.indexOf("all")&&(l=["a","b","text"]),-1!==l.indexOf("a")&&e(m.aaxis,a.a),-1!==l.indexOf("b")&&e(m.baxis,a.b),f.push("y: "+b.yLabel),-1!==l.indexOf("text")&&k(a,g,f),b.extraText=f.join("\x3cbr\x3e"));return h}}},{"../../lib":716,"../scatter/hover":1130}],1158:[function(a,q,p){q.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:a("../scatter/marker_colorbar"),
formatLabels:a("./format_labels"),calc:a("./calc"),plot:a("./plot"),style:a("../scatter/style").style,styleOnSelect:a("../scatter/style").styleOnSelect,hoverPoints:a("./hover"),selectPoints:a("../scatter/select"),eventData:a("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:a("../../plots/cartesian"),categories:"svg carpet symbols showLegend carpetDependent zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":775,"../scatter/marker_colorbar":1137,"../scatter/select":1140,
"../scatter/style":1142,"./attributes":1152,"./calc":1153,"./defaults":1154,"./event_data":1155,"./format_labels":1156,"./hover":1157,"./plot":1159}],1159:[function(a,q,p){var n=a("../scatter/plot"),k=a("../../plots/cartesian/axes"),m=a("../../components/drawing");q.exports=function(a,b,g,e){var h=g[0][0].carpet;b={xaxis:k.getFromId(a,h.xaxis||"x"),yaxis:k.getFromId(a,h.yaxis||"y"),plot:b.plot};n(a,b,g,e);for(b=0;b<g.length;b++)h=g[b][0].trace,h=e.selectAll("g.trace"+h.uid+" .js-line"),m.setClipUrl(h,
g[b][0].carpet._clipPathId,a)}},{"../../components/drawing":612,"../../plots/cartesian/axes":764,"../scatter/plot":1139}],1160:[function(a,q,p){p=a("../../plots/template_attributes").hovertemplateAttrs;var n=a("../../plots/template_attributes").texttemplateAttrs,k=a("../scatter/attributes"),m=a("../../plots/attributes"),h=a("../../components/colorscale/attributes"),b=a("../../components/drawing/attributes").dash,g=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;var e=
k.marker,t=k.line,l=e.line;q.exports=a({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:g({},k.mode,{dflt:"markers"}),text:g({},k.text,{}),texttemplate:n({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:g({},k.hovertext,{}),textfont:k.textfont,
textposition:k.textposition,line:{color:t.color,width:t.width,dash:b},connectgaps:k.connectgaps,marker:g({symbol:e.symbol,opacity:e.opacity,size:e.size,sizeref:e.sizeref,sizemin:e.sizemin,sizemode:e.sizemode,colorbar:e.colorbar,line:g({width:l.width},h("marker.line")),gradient:e.gradient},h("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:k.fillcolor,selected:k.selected,unselected:k.unselected,hoverinfo:g({},m.hoverinfo,{flags:["lon","lat","location","text","name"]}),
hovertemplate:p()},"calc","nested")},{"../../components/colorscale/attributes":598,"../../components/drawing/attributes":611,"../../lib/extend":707,"../../plot_api/edit_types":747,"../../plots/attributes":761,"../../plots/template_attributes":840,"../scatter/attributes":1119}],1161:[function(a,q,p){function n(a){return a&&"string"===typeof a}var k=a("fast-isnumeric"),m=a("../../constants/numerical").BADNUM,h=a("../scatter/colorscale_calc"),b=a("../scatter/arrays_to_calcdata"),g=a("../scatter/calc_selection"),
e=a("../../lib")._;q.exports=function(a,l){var f=Array.isArray(l.locations),d=f?l.locations.length:l._length,c=Array(d);var r=l.geojson?function(a){return n(a)||k(a)}:n;for(var p=0;p<d;p++){var t=c[p]={};if(f){var q=l.locations[p];t.loc=r(q)?q:null}else{q=l.lon[p];var y=l.lat[p];k(q)&&k(y)?t.lonlat=[+q,+y]:t.lonlat=[m,m]}}b(c,l);h(a,l);g(c,l);d&&(c[0].t={labels:{lat:e(a,"lat:")+" ",lon:e(a,"lon:")+" "}});return c}},{"../../constants/numerical":692,"../../lib":716,"../scatter/arrays_to_calcdata":1118,
"../scatter/calc_selection":1121,"../scatter/colorscale_calc":1122,"fast-isnumeric":228}],1162:[function(a,q,p){var n=a("../../lib"),k=a("../scatter/subtypes"),m=a("../scatter/marker_defaults"),h=a("../scatter/line_defaults"),b=a("../scatter/text_defaults"),g=a("../scatter/fillcolor_defaults"),e=a("./attributes");q.exports=function(a,l,f,d){function c(b,c){return n.coerce(a,l,e,b,c)}var r=c("locations");if(r&&r.length){var p=c("geojson");if("string"===typeof p&&""!==p||n.isPlainObject(p))var t="geojson-id";
"geojson-id"===c("locationmode",t)&&c("featureidkey");r=r.length}else r=c("lon")||[],p=c("lat")||[],r=Math.min(r.length,p.length);r?(l._length=r,c("text"),c("hovertext"),c("hovertemplate"),c("mode"),k.hasLines(l)&&(h(a,l,f,d,c),c("connectgaps")),k.hasMarkers(l)&&m(a,l,f,d,c,{gradient:!0}),k.hasText(l)&&(c("texttemplate"),b(a,l,d,c)),c("fill"),"none"!==l.fill&&g(a,l,f,c),n.coerceSelectionMarkerOpacity(l,c)):l.visible=!1}},{"../../lib":716,"../scatter/fillcolor_defaults":1127,"../scatter/line_defaults":1132,
"../scatter/marker_defaults":1138,"../scatter/subtypes":1143,"../scatter/text_defaults":1144,"./attributes":1160}],1163:[function(a,q,p){q.exports=function(a,k,m,h,b){a.lon=k.lon;a.lat=k.lat;a.location=k.loc?k.loc:null;k=h[b];k.fIn&&k.fIn.properties&&(a.properties=k.fIn.properties);return a}},{}],1164:[function(a,q,p){var n=a("../../plots/cartesian/axes");q.exports=function(a,m,h){var b={};m=h[m.geo]._subplot.mockAxis;a=a.lonlat;b.lonLabel=n.tickText(m,m.c2l(a[0]),!0).text;b.latLabel=n.tickText(m,
m.c2l(a[1]),!0).text;return b}},{"../../plots/cartesian/axes":764}],1165:[function(a,q,p){function n(a,h,k,f){if(!a.hovertemplate){var d=h.hi||a.hoverinfo,c="all"===d?g.hoverinfo.flags:d.split("+");d=-1!==c.indexOf("location")&&Array.isArray(a.locations);var e=-1!==c.indexOf("lon"),l=-1!==c.indexOf("lat");c=-1!==c.indexOf("text");var m=[];d?m.push(h.loc):e&&l?m.push("("+(k.lonLabel+", ")+(k.latLabel+")")):e?m.push(f.lon+(k.lonLabel+"")):l&&m.push(f.lat+(k.latLabel+""));c&&b(h,a,m);return m.join("\x3cbr\x3e")}}
var k=a("../../components/fx"),m=a("../../constants/numerical").BADNUM,h=a("../scatter/get_trace_color"),b=a("../../lib").fillText,g=a("./attributes");q.exports=function(a,b,g){var e=a.cd,d=e[0].trace,c=a.xa,l=a.ya,p=a.subplot,t=p.projection.isLonLatOverEdges,q=p.project;k.getClosest(e,function(a){var c=a.lonlat;if(c[0]===m||t(c))return Infinity;var d=q(c),e=q([b,g]);c=Math.abs(d[0]-e[0]);d=Math.abs(d[1]-e[1]);a=Math.max(3,a.mrc||0);return Math.max(Math.sqrt(c*c+d*d)-a,1-3/a)},a);if(!1!==a.index){var y=
e[a.index],A=y.lonlat;c=[c.c2p(A),l.c2p(A)];l=y.mrc||1;a.x0=c[0]-l;a.x1=c[0]+l;a.y0=c[1]-l;a.y1=c[1]+l;a.loc=y.loc;a.lon=A[0];a.lat=A[1];A={};A[d.geo]={_subplot:p};p=d._module.formatLabels(y,d,A);a.lonLabel=p.lonLabel;a.latLabel=p.latLabel;a.color=h(d,y);a.extraText=n(d,y,a,e[0].t.labels);a.hovertemplate=d.hovertemplate;return[a]}}},{"../../components/fx":629,"../../constants/numerical":692,"../../lib":716,"../scatter/get_trace_color":1129,"./attributes":1160}],1166:[function(a,q,p){q.exports={attributes:a("./attributes"),
supplyDefaults:a("./defaults"),colorbar:a("../scatter/marker_colorbar"),formatLabels:a("./format_labels"),calc:a("./calc"),calcGeoJSON:a("./plot").calcGeoJSON,plot:a("./plot").plot,style:a("./style"),styleOnSelect:a("../scatter/style").styleOnSelect,hoverPoints:a("./hover"),eventData:a("./event_data"),selectPoints:a("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:a("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":794,"../scatter/marker_colorbar":1137,
"../scatter/style":1142,"./attributes":1160,"./calc":1161,"./defaults":1162,"./event_data":1163,"./format_labels":1164,"./hover":1165,"./plot":1167,"./select":1168,"./style":1169}],1167:[function(a,q,p){var n=a("d3"),k=a("../../lib"),m=a("../../lib/topojson_utils").getTopojsonFeatures,h=a("../../lib/geojson_utils"),b=a("../../lib/geo_location_utils"),g=a("../../plots/cartesian/autorange").findExtremes,e=a("../../constants/numerical").BADNUM,t=a("../scatter/calc").calcMarkerSize,l=a("../scatter/subtypes"),
f=a("./style");q.exports={calcGeoJSON:function(a,c){var d=a[0].trace;c=c[d.geo];var f=c._subplot,h=d._length;if(Array.isArray(d.locations)){var k=d.locationmode,l="geojson-id"===k?b.extractTraceFeature(a):m(d,f.topojson);for(f=0;f<h;f++){var n=a[f];var p="geojson-id"===k?n.fOut:b.locationToFeature(k,n.loc,l);n.lonlat=p?p.properties.ct:[e,e]}}k={padded:!0};if("geojson"===c.fitbounds&&"geojson-id"===d.locationmode)a=b.computeBbox(b.getTraceGeojson(d)),l=[a[0],a[2]],p=[a[1],a[3]];else{l=Array(h);p=Array(h);
for(f=0;f<h;f++)n=a[f],l[f]=n.lonlat[0],p[f]=n.lonlat[1];k.ppad=t(d,h)}d._extremes.lon=g(c.lonaxis._ax,l,k);d._extremes.lat=g(c.lataxis._ax,p,k)},plot:function(a,b,g){b=b.layers.frontplot.select(".scatterlayer");g=k.makeTraceGroups(b,g,"trace scattergeo");g.selectAll("*").remove();g.each(function(b){var c=n.select(this),d=b[0].trace;if(l.hasLines(d)||"none"!==d.fill){var g=h.calcTraceToLineCoords(b);g="none"!==d.fill?h.makePolygon(g):h.makeLine(g);c.selectAll("path.js-line").data([{geojson:g,trace:d}]).enter().append("path").classed("js-line",
!0).style("stroke-miterlimit",2)}l.hasMarkers(d)&&c.selectAll("path.point").data(k.identity).enter().append("path").classed("point",!0).each(function(a){a.lonlat[0]===e&&n.select(this).remove()});l.hasText(d)&&c.selectAll("g").data(k.identity).enter().append("g").append("text").each(function(a){a.lonlat[0]===e&&n.select(this).remove()});f(a,b)})}}},{"../../constants/numerical":692,"../../lib":716,"../../lib/geo_location_utils":710,"../../lib/geojson_utils":711,"../../lib/topojson_utils":743,"../../plots/cartesian/autorange":763,
"../scatter/calc":1120,"../scatter/subtypes":1143,"./style":1169,d3:165}],1168:[function(a,q,p){var n=a("../scatter/subtypes"),k=a("../../constants/numerical").BADNUM;q.exports=function(a,h){var b=a.cd,g=a.xaxis,e=a.yaxis,m=[],l=b[0].trace,f;if(!n.hasMarkers(l)&&!n.hasText(l))return[];if(!1===h)for(f=0;f<b.length;f++)b[f].selected=0;else for(f=0;f<b.length;f++){l=b[f];var d=l.lonlat;if(d[0]!==k){var c=g.c2p(d);var r=e.c2p(d);h.contains([c,r],null,f,a)?(m.push({pointNumber:f,lon:d[0],lat:d[1]}),l.selected=
1):l.selected=0}}return m}},{"../../constants/numerical":692,"../scatter/subtypes":1143}],1169:[function(a,q,p){function n(a,n){var e=n[0].trace,f=n[0].node3;f.style("opacity",n[0].trace.opacity);b(f,e,a);g(f,e,a);f.selectAll("path.js-line").style("fill","none").each(function(a){var b=k.select(this);a=a.trace;var d=a.line||{};b.call(h.stroke,d.color).call(m.dashLine,d.dash||"",d.width||0);"none"!==a.fill&&b.call(h.fill,a.fillcolor)})}var k=a("d3"),m=a("../../components/drawing"),h=a("../../components/color");
a=a("../scatter/style");var b=a.stylePoints,g=a.styleText;q.exports=function(a,b){b&&n(a,b)}},{"../../components/color":591,"../../components/drawing":612,"../scatter/style":1142,d3:165}],1170:[function(a,q,p){var n=a("../../plots/attributes");p=a("../scatter/attributes");var k=a("../../components/colorscale/attributes"),m=a("../../lib/extend").extendFlat,h=a("../../plot_api/edit_types").overrideAll;a=a("./constants").DASHES;var b=p.line,g=p.marker,e=g.line;q=q.exports=h({x:p.x,x0:p.x0,dx:p.dx,y:p.y,
y0:p.y0,dy:p.dy,text:p.text,hovertext:p.hovertext,textposition:p.textposition,textfont:p.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:b.color,width:b.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:Object.keys(a),dflt:"solid"}},marker:m({},k("marker"),{symbol:g.symbol,size:g.size,sizeref:g.sizeref,sizemin:g.sizemin,sizemode:g.sizemode,opacity:g.opacity,colorbar:g.colorbar,
line:m({},k("marker.line"),{width:e.width})}),connectgaps:p.connectgaps,fill:m({},p.fill,{dflt:"none"}),fillcolor:p.fillcolor,selected:{marker:p.selected.marker,textfont:p.selected.textfont},unselected:{marker:p.unselected.marker,textfont:p.unselected.textfont},opacity:n.opacity},"calc","nested");q.x.editType=q.y.editType=q.x0.editType=q.y0.editType="calc+clearAxisTypes";q.hovertemplate=p.hovertemplate;q.texttemplate=p.texttemplate},{"../../components/colorscale/attributes":598,"../../lib/extend":707,
"../../plot_api/edit_types":747,"../../plots/attributes":761,"../scatter/attributes":1119,"./constants":1172}],1171:[function(a,q,p){function n(a,c,d){a=a._extremes[c._id];c=b(c,d._bnds,{padded:!0});a.min=a.min.concat(c.min);a.max=a.max.concat(c.max)}var k=a("point-cluster"),m=a("../../lib"),h=a("../../plots/cartesian/axis_ids"),b=a("../../plots/cartesian/autorange").findExtremes;p=a("../scatter/calc");var g=p.calcMarkerSize,e=p.calcAxisExpansion,t=p.setFirstScatter,l=a("../scatter/colorscale_calc"),
f=a("./convert"),d=a("./scene_update"),c=a("../../constants/numerical").BADNUM,r=a("./constants").TOO_MANY_POINTS;q.exports=function(a,b){var p=a._fullLayout,q=h.getFromId(a,b.xaxis),u=h.getFromId(a,b.yaxis),v=p._plots[b.xaxis+b.yaxis],x=b._length,C=x>=r,B=2*x,D={},G,E=b._x=q.makeCalcdata(b,"x"),F=b._y=u.makeCalcdata(b,"y"),L=Array(B);for(G=0;G<x;G++){var J=E[G];var H=F[G];L[2*G]=J===c?NaN:J;L[2*G+1]=H===c?NaN:H}if("log"===q.type)for(G=0;G<B;G+=2)L[G]=q.c2l(L[G]);if("log"===u.type)for(G=1;G<B;G+=
2)L[G]=u.c2l(L[G]);if(C&&"log"!==q.type&&"log"!==u.type)D.tree=k(L);else for(B=D.ids=Array(x),G=0;G<x;G++)B[G]=G;l(a,b);G=f.style(a,b);G.marker&&(G.marker.positions=L);G.line&&1<L.length&&m.extendFlat(G.line,f.linePositions(a,b,L));if(G.errorX||G.errorY)B=f.errorBarPositions(a,b,L,E,F),G.errorX&&m.extendFlat(G.errorX,B.x),G.errorY&&m.extendFlat(G.errorY,B.y);G.text&&(m.extendFlat(G.text,{positions:L},f.textPosition(a,b,G.text,G.marker)),m.extendFlat(G.textSel,{positions:L},f.textPosition(a,b,G.text,
G.markerSel)),m.extendFlat(G.textUnsel,{positions:L},f.textPosition(a,b,G.text,G.markerUnsel)));v=d(a,v);t(p,b);var K;C?G.marker&&(K=2*(G.marker.sizeAvg||Math.max(G.marker.size,3))):K=g(b,x);e(a,b,q,u,E,F,K);G.errorX&&n(b,q,G.errorX);G.errorY&&n(b,u,G.errorY);G.fill&&!v.fill2d&&(v.fill2d=!0);G.marker&&!v.scatter2d&&(v.scatter2d=!0);G.line&&!v.line2d&&(v.line2d=!0);!G.errorX&&!G.errorY||v.error2d||(v.error2d=!0);G.text&&!v.glText&&(v.glText=!0);G.marker&&(G.marker.snap=x);v.lineOptions.push(G.line);
v.errorXOptions.push(G.errorX);v.errorYOptions.push(G.errorY);v.fillOptions.push(G.fill);v.markerOptions.push(G.marker);v.markerSelectedOptions.push(G.markerSel);v.markerUnselectedOptions.push(G.markerUnsel);v.textOptions.push(G.text);v.textSelectedOptions.push(G.textSel);v.textUnselectedOptions.push(G.textUnsel);v.selectBatch.push([]);v.unselectBatch.push([]);D._scene=v;D.index=v.count;D.x=E;D.y=F;D.positions=L;v.count++;return[{x:!1,y:!1,t:D,trace:b}]}},{"../../constants/numerical":692,"../../lib":716,
"../../plots/cartesian/autorange":763,"../../plots/cartesian/axis_ids":767,"../scatter/calc":1120,"../scatter/colorscale_calc":1122,"./constants":1172,"./convert":1173,"./scene_update":1181,"point-cluster":470}],1172:[function(a,q,p){q.exports={TOO_MANY_POINTS:1E5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],1173:[function(a,q,p){function n(a,b){var c=a._fullLayout;
a=b._length;var f=b.textfont,g=b.textposition,h=Array.isArray(g)?g:[g],k=f.color;g=f.size;f=f.family;var l={},m,n=b.texttemplate;if(n){l.text=[];var r=c._d3locale,p=(m=Array.isArray(n))?Math.min(n.length,a):a,t=m?function(a){return n[a]}:function(){return n};for(m=0;m<p;m++){var q={i:m},u=b._module.formatLabels(q,b,c),v={};C(v,b,m);var w=b._meta||{};l.text.push(d.texttemplateString(t(m),u,r,v,q,w))}}else Array.isArray(b.text)&&b.text.length<a?l.text=b.text.slice():l.text=b.text;if(Array.isArray(l.text))for(m=
l.text.length;m<a;m++)l.text[m]="";l.opacity=b.opacity;l.font={};l.align=[];l.baseline=[];for(m=0;m<h.length;m++){b=h[m].split(/\s+/);switch(b[1]){case "left":l.align.push("right");break;case "right":l.align.push("left");break;default:l.align.push(b[1])}switch(b[0]){case "top":l.baseline.push("bottom");break;case "bottom":l.baseline.push("top");break;default:l.baseline.push(b[0])}}if(Array.isArray(k))for(l.color=Array(a),m=0;m<a;m++)l.color[m]=k[m];else l.color=k;if(d.isArrayOrTypedArray(g)||Array.isArray(f))for(l.font=
Array(a),m=0;m<a;m++)b=l.font[m]={},b.size=d.isTypedArray(g)?g[m]:Array.isArray(g)?e(g[m])?g[m]:0:g,b.family=Array.isArray(f)?f[m]:f;else l.font={size:g,family:f};return l}function k(a){var b=a._length,c=a.marker,e={},f=d.isArrayOrTypedArray(c.symbol);var h=d.isArrayOrTypedArray(c.color);var k=d.isArrayOrTypedArray(c.line.color),m=d.isArrayOrTypedArray(c.opacity),n=d.isArrayOrTypedArray(c.size),r=d.isArrayOrTypedArray(c.line.width),p;f||(p=y.isOpenSymbol(c.symbol));if(f||h||k||m){e.colors=Array(b);
e.borderColors=Array(b);k=u(c,c.opacity,b);m=u(c.line,c.opacity,b);if(!Array.isArray(m[0])){var t=m;m=Array(b);for(h=0;h<b;h++)m[h]=t}if(!Array.isArray(k[0]))for(t=k,k=Array(b),h=0;h<b;h++)k[h]=t;e.colors=k;e.borderColors=m;for(h=0;h<b;h++)f&&(p=y.isOpenSymbol(c.symbol[h])),p&&(m[h]=k[h].slice(),k[h]=k[h].slice(),k[h][3]=0);e.opacity=a.opacity}else p?(e.color=l(c.color,"uint8"),e.color[3]=0,e.borderColor=l(c.color,"uint8")):(e.color=l(c.color,"uint8"),e.borderColor=l(c.line.color,"uint8")),e.opacity=
a.opacity*c.opacity;if(f)for(e.markers=Array(b),h=0;h<b;h++)e.markers[h]=g(c.symbol[h]);else e.marker=g(c.symbol);p=w(a);if(n||r){a=e.sizes=Array(b);f=e.borderSizes=Array(b);k=0;if(n){for(h=0;h<b;h++)a[h]=p(c.size[h]),k+=a[h];var q=k/b}else for(n=p(c.size),h=0;h<b;h++)a[h]=n;if(r)for(h=0;h<b;h++)f[h]=c.line.width[h]/2;else for(n=c.line.width/2,h=0;h<b;h++)f[h]=n;e.sizeAvg=q}else e.size=p(c&&c.size||10),e.borderSizes=p(c.line.width);return e}function m(a,b){a=a.marker;var c={};if(!b)return c;b.marker&&
b.marker.symbol?c=k(d.extendFlat({},a,b.marker)):b.marker&&(b.marker.size&&(c.size=b.marker.size/2),b.marker.color&&(c.colors=b.marker.color),void 0!==b.marker.opacity&&(c.opacity=b.marker.opacity));return c}function h(a,b,c){var e={};if(!c)return e;c.textfont&&(b={opacity:1,text:b.text,texttemplate:b.texttemplate,textposition:b.textposition,textfont:d.extendFlat({},b.textfont)},c.textfont&&d.extendFlat(b.textfont,c.textfont),e=n(a,b));return e}function b(a,b){var c={capSize:2*b.width,lineWidth:b.thickness,
color:b.color};b.copy_ystyle&&(c=a.error_y);return c}function g(a){if("circle"===a)return null;var b=c.symbolNumber(a);var d=c.symbolFuncs[b%100];var e=!!c.symbolNoDot[b%100];b=!!c.symbolNoFill[b%100];var f=y.isDotSymbol(a);if(E[a])return E[a];d=f&&!e?d(1.1*D)+F:d(D);d=t(d,{w:B,h:B,viewBox:[-D,-D,D,D],stroke:b?G:-G});return(E[a]=d)||null}var e=a("fast-isnumeric"),t=a("svg-path-sdf"),l=a("color-normalize"),f=a("../../registry"),d=a("../../lib"),c=a("../../components/drawing"),r=a("../../plots/cartesian/axis_ids"),
u=a("../../lib/gl_format_color").formatColor,v=a("../scatter/subtypes"),w=a("../scatter/make_bubble_size_func"),y=a("./helpers"),A=a("./constants"),z=a("../../constants/interactions").DESELECTDIM,x={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},C=a("../../components/fx/helpers").appendArrayPointValue,B=A.SYMBOL_SDF_SIZE,D=A.SYMBOL_SIZE,G=A.SYMBOL_STROKE,E={},F=c.symbolFuncs[0](.05*D);q.exports={style:function(a,c){var e={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,
fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0};if(!0!==c.visible)return e;v.hasText(c)&&(e.text=n(a,c),e.textSel=h(a,c,c.selected),e.textUnsel=h(a,c,c.unselected));if(v.hasMarkers(c)&&(e.marker=k(c),e.markerSel=m(c,c.selected),e.markerUnsel=m(c,c.unselected),!c.unselected&&d.isArrayOrTypedArray(c.marker.opacity))){var f=c.marker.opacity;e.markerUnsel.opacity=Array(f.length);for(a=0;a<f.length;a++)e.markerUnsel.opacity[a]=z*f[a]}if(v.hasLines(c)){e.line={overlay:!0,
thickness:c.line.width,color:c.line.color,opacity:c.opacity};f=(A.DASHES[c.line.dash]||[1]).slice();for(a=0;a<f.length;++a)f[a]*=c.line.width;e.line.dashes=f}c.error_x&&c.error_x.visible&&(e.errorX=b(c,c.error_x));c.error_y&&c.error_y.visible&&(e.errorY=b(c,c.error_y));c.fill&&"none"!==c.fill&&(e.fill={closed:!0,fill:c.fillcolor,thickness:0});return e},markerStyle:k,markerSelection:m,linePositions:function(a,b,c){var d=c.length,e=d/2;if(v.hasLines(b)&&e)if("hv"===b.line.shape){var f=[];for(a=0;a<
e-1;a++)isNaN(c[2*a])||isNaN(c[2*a+1])?f.push(NaN,NaN,NaN,NaN):(f.push(c[2*a],c[2*a+1]),isNaN(c[2*a+2])||isNaN(c[2*a+3])?f.push(NaN,NaN):f.push(c[2*a+2],c[2*a+1]));f.push(c[d-2],c[d-1])}else if("hvh"===b.line.shape){f=[];for(a=0;a<e-1;a++)if(isNaN(c[2*a])||isNaN(c[2*a+1])||isNaN(c[2*a+2])||isNaN(c[2*a+3]))isNaN(c[2*a])||isNaN(c[2*a+1])?f.push(NaN,NaN):f.push(c[2*a],c[2*a+1]),f.push(NaN,NaN);else{var g=(c[2*a]+c[2*a+2])/2;f.push(c[2*a],c[2*a+1],g,c[2*a+1],g,c[2*a+3])}f.push(c[d-2],c[d-1])}else if("vhv"===
b.line.shape){f=[];for(a=0;a<e-1;a++)isNaN(c[2*a])||isNaN(c[2*a+1])||isNaN(c[2*a+2])||isNaN(c[2*a+3])?(isNaN(c[2*a])||isNaN(c[2*a+1])?f.push(NaN,NaN):f.push(c[2*a],c[2*a+1]),f.push(NaN,NaN)):(g=(c[2*a+1]+c[2*a+3])/2,f.push(c[2*a],c[2*a+1],c[2*a],g,c[2*a+2],g));f.push(c[d-2],c[d-1])}else if("vh"===b.line.shape){f=[];for(a=0;a<e-1;a++)isNaN(c[2*a])||isNaN(c[2*a+1])?f.push(NaN,NaN,NaN,NaN):(f.push(c[2*a],c[2*a+1]),isNaN(c[2*a+2])||isNaN(c[2*a+3])?f.push(NaN,NaN):f.push(c[2*a],c[2*a+3]));f.push(c[d-2],
c[d-1])}else f=c;d=!1;for(a=0;a<f.length;a++)if(isNaN(f[a])){d=!0;break}c=d||f.length>A.TOO_MANY_POINTS?"rect":v.hasMarkers(b)?"rect":"round";if(d&&b.connectgaps)for(b=f[0],d=f[1],a=0;a<f.length;a+=2)isNaN(f[a])||isNaN(f[a+1])?(f[a]=b,f[a+1]=d):(b=f[a],d=f[a+1]);return{join:c,positions:f}},errorBarPositions:function(a,b,c,d,g){function h(a,d){var f=d._id.charAt(0),g=b["error_"+f];if(g&&g.visible&&("linear"===d.type||"log"===d.type)){g=k(g);for(var h={x:0,y:1}[f],l={x:[0,1,2,3],y:[2,3,0,1]}[f],r=new Float64Array(4*
m),p=Infinity,t=-Infinity,q=0,u=0;q<m;q++,u+=4){var v=a[q];if(e(v)){var w=c[2*q+h],x=g(v,q),z=x[0];x=x[1];if(e(z)&&e(x)){var A=v+x;r[u+l[0]]=w-d.c2l(v-z);r[u+l[1]]=d.c2l(A)-w;r[u+l[2]]=0;r[u+l[3]]=0;p=Math.min(p,v-z);t=Math.max(t,v+x)}}}n[f]={positions:c,errors:r,_bnds:[p,t]}}}var k=f.getComponentMethod("errorbars","makeComputeError"),l=r.getFromId(a,b.xaxis);a=r.getFromId(a,b.yaxis);var m=c.length/2,n={};h(d,l);h(g,a);return n},textPosition:function(a,b,c,d){a=b._length;var e={};if(v.hasMarkers(b)){b=
c.font;var f=c.align,g=c.baseline;e.offset=Array(a);for(c=0;c<a;c++){var h=d.sizes?d.sizes[c]:d.size,k=Array.isArray(b)?b[c].size:b.size,l=Array.isArray(f)?1<f.length?f[c]:f[0]:f,m=Array.isArray(g)?1<g.length?g[c]:g[0]:g;m=x[m];h=h?h/.8+1:0;e.offset[c]=[x[l]*h/k,(-m*h-.5*m)/k]}}return e}}},{"../../components/drawing":612,"../../components/fx/helpers":626,"../../constants/interactions":691,"../../lib":716,"../../lib/gl_format_color":713,"../../plots/cartesian/axis_ids":767,"../../registry":845,"../scatter/make_bubble_size_func":1136,
"../scatter/subtypes":1143,"./constants":1172,"./helpers":1177,"color-normalize":122,"fast-isnumeric":228,"svg-path-sdf":533}],1174:[function(a,q,p){var n=a("../../lib"),k=a("../../registry"),m=a("./helpers"),h=a("./attributes"),b=a("../scatter/constants"),g=a("../scatter/subtypes"),e=a("../scatter/xy_defaults"),t=a("../scatter/marker_defaults"),l=a("../scatter/line_defaults"),f=a("../scatter/fillcolor_defaults"),d=a("../scatter/text_defaults");q.exports=function(a,r,p,q){function c(b,c){return n.coerce(a,
r,h,b,c)}var u=a.marker?m.isOpenSymbol(a.marker.symbol):!1,v=g.isBubble(a),z=e(a,r,q,c);z?(z=z<b.PTS_LINESONLY?"lines+markers":"lines",c("text"),c("hovertext"),c("hovertemplate"),c("mode",z),g.hasLines(r)&&(c("connectgaps"),l(a,r,p,q,c),c("line.shape")),g.hasMarkers(r)&&(t(a,r,p,q,c),c("marker.line.width",u||v?1:0)),g.hasText(r)&&(c("texttemplate"),d(a,r,q,c)),q=(r.line||{}).color,u=(r.marker||{}).color,c("fill"),"none"!==r.fill&&f(a,r,p,c),v=k.getComponentMethod("errorbars","supplyDefaults"),v(a,
r,q||u||p,{axis:"y"}),v(a,r,q||u||p,{axis:"x",inherit:"y"}),n.coerceSelectionMarkerOpacity(r,c)):r.visible=!1}},{"../../lib":716,"../../registry":845,"../scatter/constants":1123,"../scatter/fillcolor_defaults":1127,"../scatter/line_defaults":1132,"../scatter/marker_defaults":1138,"../scatter/subtypes":1143,"../scatter/text_defaults":1144,"../scatter/xy_defaults":1145,"./attributes":1170,"./helpers":1177}],1175:[function(a,q,p){var n=a("../../lib"),k=a("../../components/color"),m=a("../../constants/interactions").DESELECTDIM;
q.exports={styleTextSelection:function(a){a=a[0];var b=a.trace,g=a.t;a=g._scene;g=g.index;var e=a.selectBatch[g],h=a.unselectBatch[g],l=a.textOptions[g],f=a.textSelectedOptions[g]||{},d=a.textUnselectedOptions[g]||{},c=n.extendFlat({},l);if(e.length||h.length){f=f.color;d=d.color;l=l.color;var r=Array.isArray(l);c.color=Array(b._length);for(b=0;b<e.length;b++){var p=e[b];c.color[p]=f||(r?l[p]:l)}for(b=0;b<h.length;b++)p=h[b],e=r?l[p]:l,c.color[p]=d?d:f?e:k.addOpacity(e,m)}a.glText[g].update(c)}}},
{"../../components/color":591,"../../constants/interactions":691,"../../lib":716}],1176:[function(a,q,p){var n=a("../scatter/format_labels");q.exports=function(a,m,h){var b=a.i;"x"in a||(a.x=m._x[b]);"y"in a||(a.y=m._y[b]);return n(a,m,h)}},{"../scatter/format_labels":1128}],1177:[function(a,q,p){var n=a("./constants");p.isOpenSymbol=function(a){return"string"===typeof a?n.OPEN_RE.test(a):100<a%200};p.isDotSymbol=function(a){return"string"===typeof a?n.DOT_RE.test(a):200<a}},{"./constants":1172}],
1178:[function(a,q,p){function n(a,g,e,n){var b=a.xa,f=a.ya,d=a.distance,c=a.dxy,r=a.index;g={pointNumber:r,x:g[r],y:e[r]};g.tx=Array.isArray(n.text)?n.text[r]:n.text;g.htx=Array.isArray(n.hovertext)?n.hovertext[r]:n.hovertext;g.data=Array.isArray(n.customdata)?n.customdata[r]:n.customdata;g.tp=Array.isArray(n.textposition)?n.textposition[r]:n.textposition;if(e=n.textfont)g.ts=m.isArrayOrTypedArray(e.size)?e.size[r]:e.size,g.tc=Array.isArray(e.color)?e.color[r]:e.color,g.tf=Array.isArray(e.family)?
e.family[r]:e.family;if(e=n.marker)g.ms=m.isArrayOrTypedArray(e.size)?e.size[r]:e.size,g.mo=m.isArrayOrTypedArray(e.opacity)?e.opacity[r]:e.opacity,g.mx=m.isArrayOrTypedArray(e.symbol)?e.symbol[r]:e.symbol,g.mc=m.isArrayOrTypedArray(e.color)?e.color[r]:e.color;var p=e&&e.line;p&&(g.mlc=Array.isArray(p.color)?p.color[r]:p.color,g.mlw=m.isArrayOrTypedArray(p.width)?p.width[r]:p.width);(e=e&&e.gradient)&&"none"!==e.type&&(g.mgt=Array.isArray(e.type)?e.type[r]:e.type,g.mgc=Array.isArray(e.color)?e.color[r]:
e.color);b=b.c2p(g.x,!0);f=f.c2p(g.y,!0);e=g.mrc||1;if(p=n.hoverlabel)g.hbg=Array.isArray(p.bgcolor)?p.bgcolor[r]:p.bgcolor,g.hbc=Array.isArray(p.bordercolor)?p.bordercolor[r]:p.bordercolor,g.hts=m.isArrayOrTypedArray(p.font.size)?p.font.size[r]:p.font.size,g.htc=Array.isArray(p.font.color)?p.font.color[r]:p.font.color,g.htf=Array.isArray(p.font.family)?p.font.family[r]:p.font.family,g.hnl=m.isArrayOrTypedArray(p.namelength)?p.namelength[r]:p.namelength;if(p=n.hoverinfo)g.hi=Array.isArray(p)?p[r]:
p;if(p=n.hovertemplate)g.ht=Array.isArray(p)?p[r]:p;r={};r[a.index]=g;a=m.extendFlat({},a,{color:h(n,g),x0:b-e,x1:b+e,xLabelVal:g.x,y0:f-e,y1:f+e,yLabelVal:g.y,cd:r,distance:d,spikeDistance:c,hovertemplate:g.ht});g.htx?a.text=g.htx:g.tx?a.text=g.tx:n.text&&(a.text=n.text);m.fillText(g,n,a);k.getComponentMethod("errorbars","hoverInfo")(g,n,a);return a}var k=a("../../registry"),m=a("../../lib"),h=a("../scatter/get_trace_color");q.exports={hoverPoints:function(a,g,e,h){var b=a.cd,f=b[0].t;b=b[0].trace;
var d=a.xa,c=a.ya,k=f.x,m=f.y;g=d.c2p(g);e=c.c2p(e);var p=a.distance;if(f.tree){var t=d.p2c(g-p),q=d.p2c(g+p),A=c.p2c(e-p),z=c.p2c(e+p);f="x"===h?f.tree.range(Math.min(t,q),Math.min(c._rl[0],c._rl[1]),Math.max(t,q),Math.max(c._rl[0],c._rl[1])):f.tree.range(Math.min(t,q),Math.min(A,z),Math.max(t,q),Math.max(A,z))}else f=f.ids;if("x"===h)for(h=0;h<f.length;h++){if(q=k[f[h]],q=Math.abs(d.c2p(q)-g),q<p){p=q;t=c.c2p(m[f[h]])-e;var x=Math.sqrt(q*q+t*t);var C=f[h]}}else for(h=f.length-1;-1<h;h--)q=k[f[h]],
t=m[f[h]],q=d.c2p(q)-g,t=c.c2p(t)-e,t=Math.sqrt(q*q+t*t),t<p&&(p=x=t,C=f[h]);a.index=C;a.distance=p;a.dxy=x;return void 0===C?[a]:[n(a,k,m,b)]},calcHover:n}},{"../../lib":716,"../../registry":845,"../scatter/get_trace_color":1129}],1179:[function(a,q,p){p=a("./hover");q.exports={moduleType:"trace",name:"scattergl",basePlotModule:a("../../plots/cartesian"),categories:"gl regl cartesian symbols errorBarsOK showLegend scatter-like".split(" "),attributes:a("./attributes"),supplyDefaults:a("./defaults"),
crossTraceDefaults:a("../scatter/cross_trace_defaults"),colorbar:a("../scatter/marker_colorbar"),formatLabels:a("./format_labels"),calc:a("./calc"),plot:a("./plot"),hoverPoints:p.hoverPoints,selectPoints:a("./select"),meta:{}}},{"../../plots/cartesian":775,"../scatter/cross_trace_defaults":1125,"../scatter/marker_colorbar":1137,"./attributes":1170,"./calc":1171,"./defaults":1174,"./format_labels":1176,"./hover":1178,"./plot":1180,"./select":1182}],1180:[function(a,q,p){function n(a,b,e){var c=a._size;
return[c.l+b.domain[0]*c.w,c.b+e.domain[0]*c.h,a.width-c.r-(1-b.domain[1])*c.w,a.height-c.t-(1-e.domain[1])*c.h]}var k=a("regl-scatter2d"),m=a("regl-line2d"),h=a("regl-error2d"),b=a("gl-text"),g=a("../../lib"),e=a("../../lib/prepare_regl"),t=a("../scatter/subtypes"),l=a("../scatter/link_traces"),f=a("./edit_style").styleTextSelection;q.exports=function(a,c,r){if(r.length){var d=a._fullLayout,p=c._scene,q=c.xaxis,y=c.yaxis;if(p)if(e(a,["ANGLE_instanced_arrays","OES_element_index_uint"])){var A=p.count,
z=d._glcanvas.data()[0].regl;l(a,c,r);if(p.dirty){!0===p.error2d&&(p.error2d=h(z));!0===p.line2d&&(p.line2d=m(z));!0===p.scatter2d&&(p.scatter2d=k(z));!0===p.fill2d&&(p.fill2d=m(z));if(!0===p.glText)for(p.glText=Array(A),a=0;a<A;a++)p.glText[a]=new b(z);if(p.glText){if(A>p.glText.length)for(c=A-p.glText.length,a=0;a<c;a++)p.glText.push(new b(z));else A<p.glText.length&&p.glText.splice(A,p.glText.length-A).forEach(function(a){a.destroy()});for(a=0;a<A;a++)p.glText[a].update(p.textOptions[a])}p.line2d&&
(p.line2d.update(p.lineOptions),p.lineOptions=p.lineOptions.map(function(a){if(a&&a.positions){for(var b=a.positions,c=0;c<b.length&&(isNaN(b[c])||isNaN(b[c+1]));)c+=2;for(var d=b.length-2;d>c&&(isNaN(b[d])||isNaN(b[d+1]));)d-=2;a.positions=b.slice(c,d+2)}return a}),p.line2d.update(p.lineOptions));p.error2d&&(a=(p.errorXOptions||[]).concat(p.errorYOptions||[]),p.error2d.update(a));p.scatter2d&&p.scatter2d.update(p.markerOptions);p.fillOrder=g.repeat(null,A);p.fill2d&&(p.fillOptions=p.fillOptions.map(function(a,
b){var c=r[b];if(a&&c&&c[0]&&c[0].trace){var d=c[0];c=d.trace;var e=d.t,f=p.lineOptions[b],g;d=[];c._ownfill&&d.push(b);c._nexttrace&&d.push(b+1);d.length&&(p.fillOrder[b]=d);d=[];e=f&&f.positions||e.positions;if("tozeroy"===c.fill){for(f=0;f<e.length&&isNaN(e[f+1]);)f+=2;for(g=e.length-2;g>f&&isNaN(e[g+1]);)g-=2;0!==e[f+1]&&(d=[e[f],0]);d=d.concat(e.slice(f,g+2));0!==e[g+1]&&(d=d.concat([e[g],0]))}else if("tozerox"===c.fill){for(f=0;f<e.length&&isNaN(e[f]);)f+=2;for(g=e.length-2;g>f&&isNaN(e[g]);)g-=
2;0!==e[f]&&(d=[0,e[f+1]]);d=d.concat(e.slice(f,g+2));0!==e[g]&&(d=d.concat([0,e[g+1]]))}else if("toself"===c.fill||"tonext"===c.fill){d=[];for(f=g=0;f<e.length;f+=2)if(isNaN(e[f])||isNaN(e[f+1]))d=d.concat(e.slice(g,f)),d.push(e[g],e[g+1]),g=f+2;d=d.concat(e.slice(g));g&&d.push(e[g],e[g+1])}else if(f=c._nexttrace)if(g=p.lineOptions[b+1])if(g=g.positions,"tonexty"===c.fill){d=e.slice();for(b=Math.floor(g.length/2);b--;){e=g[2*b];var h=g[2*b+1];isNaN(e)||isNaN(h)||d.push(e,h)}a.fill=f.fillcolor}if(c._prevtrace&&
"tonext"===c._prevtrace.fill){b=p.lineOptions[b-1].positions;e=d.length/2;g=[e];for(f=0;f<b.length;f+=2)(isNaN(b[f])||isNaN(b[f+1]))&&g.push(f/2+e+1);d=d.concat(b);a.hole=g}a.fillmode=c.fill;a.opacity=c.opacity;a.positions=d;return a}}),p.fill2d.update(p.fillOptions))}a=d.dragmode;z="lasso"===a||"select"===a;c=-1<d.clickmode.indexOf("select");for(a=0;a<A;a++){var x=r[a][0];var C=x.trace;var B=x.t,D=B.index;x=C._length;var G=B.x,E=B.y;if(C.selectedpoints||z||c){z||(z=!0);if(C.selectedpoints){var F=
p.selectBatch[D]=g.selIndices2selPoints(C),L={};for(C=0;C<F.length;C++)L[F[C]]=1;F=[];for(C=0;C<x;C++)L[C]||F.push(C);p.unselectBatch[D]=F}D=B.xpx=Array(x);B=B.ypx=Array(x);for(C=0;C<x;C++)D[C]=q.c2p(G[C]),B[C]=y.c2p(E[C])}else B.xpx=B.ypx=null}if(z){p.select2d||(p.select2d=k(d._glcanvas.data()[1].regl));if(p.scatter2d){z=Array(A);for(a=0;a<A;a++)z[a]=p.selectBatch[a].length||p.unselectBatch[a].length?p.markerUnselectedOptions[a]:{};p.scatter2d.update(z)}p.select2d&&(p.select2d.update(p.markerOptions),
p.select2d.update(p.markerSelectedOptions));p.glText&&r.forEach(function(a){t.hasText(((a||[])[0]||{}).trace||{})&&f(a)})}else p.scatter2d&&p.scatter2d.update(p.markerOptions);var J={viewport:n(d,q,y),range:[(q._rl||q.range)[0],(y._rl||y.range)[0],(q._rl||q.range)[1],(y._rl||y.range)[1]]};d=g.repeat(J,p.count);p.fill2d&&p.fill2d.update(d);p.line2d&&p.line2d.update(d);p.error2d&&p.error2d.update(d.concat(d));p.scatter2d&&p.scatter2d.update(d);p.select2d&&p.select2d.update(d);p.glText&&p.glText.forEach(function(a){a.update(J)})}else p.init()}}},
{"../../lib":716,"../../lib/prepare_regl":729,"../scatter/link_traces":1135,"../scatter/subtypes":1143,"./edit_style":1175,"gl-text":319,"regl-error2d":491,"regl-line2d":492,"regl-scatter2d":498}],1181:[function(a,q,p){var n=a("../../lib");q.exports=function(a,m){var h=m._scene,b={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],
unselectBatch:[]},g={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};m._scene||(h=m._scene={},h.init=function(){n.extendFlat(h,g,b)},h.init(),h.update=function(a){var b=n.repeat(a,h.count);h.fill2d&&h.fill2d.update(b);h.scatter2d&&h.scatter2d.update(b);h.line2d&&h.line2d.update(b);h.error2d&&h.error2d.update(b.concat(b));h.select2d&&h.select2d.update(b);if(h.glText)for(b=0;b<h.count;b++)h.glText[b].update(a)},h.draw=function(){for(var a=h.count,b=h.fill2d,g=h.error2d,f=h.line2d,
d=h.scatter2d,c=h.glText,k=h.select2d,m=h.selectBatch,p=h.unselectBatch,q=0;q<a;q++){b&&h.fillOrder[q]&&b.draw(h.fillOrder[q]);f&&h.lineOptions[q]&&f.draw(q);g&&(h.errorXOptions[q]&&g.draw(q),h.errorYOptions[q]&&g.draw(q+a));if(d&&h.markerOptions[q])if(p[q].length){var y=n.repeat([],h.count);y[q]=p[q];d.draw(y)}else m[q].length||d.draw(q);c[q]&&h.textOptions[q]&&c[q].render()}k&&k.draw(m);h.dirty=!1},h.destroy=function(){h.fill2d&&h.fill2d.destroy&&h.fill2d.destroy();h.scatter2d&&h.scatter2d.destroy&&
h.scatter2d.destroy();h.error2d&&h.error2d.destroy&&h.error2d.destroy();h.line2d&&h.line2d.destroy&&h.line2d.destroy();h.select2d&&h.select2d.destroy&&h.select2d.destroy();h.glText&&h.glText.forEach(function(a){a.destroy&&a.destroy()});h.lineOptions=null;h.fillOptions=null;h.markerOptions=null;h.markerSelectedOptions=null;h.markerUnselectedOptions=null;h.errorXOptions=null;h.errorYOptions=null;h.textOptions=null;h.textSelectedOptions=null;h.textUnselectedOptions=null;h.selectBatch=null;h.unselectBatch=
null;m._scene=null});h.dirty||n.extendFlat(h,b);return h}},{"../../lib":716}],1182:[function(a,q,p){var n=a("../scatter/subtypes"),k=a("./edit_style").styleTextSelection;q.exports=function(a,h){var b=a.cd,g=[],e=b[0].trace,m=b[0].t,l=e._length,f=m.x,d=m.y,c=m._scene,p=m.index;if(!c)return g;var q=n.hasText(e),v=n.hasMarkers(e);if(!0!==e.visible||!v&&!q)return g;e=[];var w=[];if(!1!==h&&!h.degenerate)for(var y=0;y<l;y++)h.contains([m.xpx[y],m.ypx[y]],!1,y,a)?(e.push(y),g.push({pointNumber:y,x:f[y],
y:d[y]})):w.push(y);v&&((a=c.scatter2d,e.length||w.length)?c.selectBatch[p].length||c.unselectBatch[p].length||(h=Array(c.count),h[p]=c.markerUnselectedOptions[p],a.update.apply(a,h)):(h=Array(c.count),h[p]=c.markerOptions[p],a.update.apply(a,h)));c.selectBatch[p]=e;c.unselectBatch[p]=w;q&&k(b);return g}},{"../scatter/subtypes":1143,"./edit_style":1175}],1183:[function(a,q,p){p=a("../../plots/template_attributes").hovertemplateAttrs;var n=a("../../plots/template_attributes").texttemplateAttrs,k=a("../scattergeo/attributes"),
m=a("../scatter/attributes"),h=a("../../plots/mapbox/layout_attributes"),b=a("../../plots/attributes"),g=a("../../components/colorscale/attributes"),e=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;var t=k.line,l=k.marker;q.exports=a({lon:k.lon,lat:k.lat,mode:e({},m.mode,{dflt:"markers"}),text:e({},m.text,{}),texttemplate:n({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:e({},m.hovertext,{}),line:{color:t.color,width:t.width},connectgaps:m.connectgaps,marker:e({symbol:{valType:"string",
dflt:"circle",arrayOk:!0},opacity:l.opacity,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode},g("marker")),fill:k.fill,fillcolor:m.fillcolor,textfont:h.layers.symbol.textfont,textposition:h.layers.symbol.textposition,below:{valType:"string"},selected:{marker:m.selected.marker},unselected:{marker:m.unselected.marker},hoverinfo:e({},b.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:p()},"calc","nested")},{"../../components/colorscale/attributes":598,"../../lib/extend":707,
"../../plot_api/edit_types":747,"../../plots/attributes":761,"../../plots/mapbox/layout_attributes":821,"../../plots/template_attributes":840,"../scatter/attributes":1119,"../scattergeo/attributes":1160}],1184:[function(a,q,p){function n(){return{geojson:t.makeBlank(),layout:{visibility:"none"},paint:{}}}function k(a){var c=a[0].trace,h=c.marker,k=c.selectedpoints,m=g.isArrayOrTypedArray(h.color),n=g.isArrayOrTypedArray(h.size),p=g.isArrayOrTypedArray(h.opacity),r,t;m&&(t=l.hasColorscale(c,"marker")?
l.makeColorScaleFuncFromTrace(h):g.identity);var q;n&&(q=d(c));var u;p&&(u=function(a){a=b(a)?+g.constrain(a,0,1):0;return c.opacity*a});var v=[];for(r=0;r<a.length;r++){var w=a[r],y=w.lonlat;if(y[0]!==e){var M={};t&&(M.mcc=w.mcc=t(w.mc));q&&(M.mrc=w.mrc=q(w.ms));u&&(M.mo=u(w.mo));k&&(M.selected=w.selected||0);v.push({type:"Feature",geometry:{type:"Point",coordinates:y},properties:M})}}if(k){var I=f.makeSelectedPointStyleFns(c);for(r=0;r<v.length;r++)a=v[r].properties,I.selectedOpacityFn&&(a.mo=c.opacity*
I.selectedOpacityFn(a)),I.selectedColorFn&&(a.mcc=I.selectedColorFn(a)),I.selectedSizeFn&&(a.mrc=I.selectedSizeFn(a))}return{geojson:{type:"FeatureCollection",features:v},mcc:m||I&&I.selectedColorFn?{type:"identity",property:"mcc"}:h.color,mrc:n||I&&I.selectedSizeFn?{type:"identity",property:"mrc"}:h.size/2,mo:p||I&&I.selectedOpacityFn?{type:"identity",property:"mo"}:c.opacity*h.opacity}}function m(a){return g.isArrayOrTypedArray(a)?function(a){return a}:a?function(){return a}:h}function h(){return""}
var b=a("fast-isnumeric"),g=a("../../lib"),e=a("../../constants/numerical").BADNUM,t=a("../../lib/geojson_utils"),l=a("../../components/colorscale"),f=a("../../components/drawing"),d=a("../scatter/make_bubble_size_func"),c=a("../scatter/subtypes"),r=a("../../plots/mapbox/convert_text_opts"),u=a("../../components/fx/helpers").appendArrayPointValue,v=a("../../lib/svg_text_utils").NEWLINES,w=a("../../lib/svg_text_utils").BR_TAG_ALL;q.exports=function(a,b){var d=b[0].trace,f=!0===d.visible&&0!==d._length,
l="none"!==d.fill,p=c.hasLines(d),q=c.hasMarkers(d),A=c.hasText(d),y=q&&"circle"===d.marker.symbol,F=q&&"circle"!==d.marker.symbol,L=n(),J=n(),H=n();q=n();var K={fill:L,line:J,circle:H,symbol:q};if(!f)return K;if(l||p)var M=t.calcTraceToLineCoords(b);l&&(L.geojson=t.makePolygon(M),L.layout.visibility="visible",g.extendFlat(L.paint,{"fill-color":d.fillcolor}));p&&(J.geojson=t.makeLine(M),J.layout.visibility="visible",g.extendFlat(J.paint,{"line-width":d.line.width,"line-color":d.line.color,"line-opacity":d.opacity}));
y&&(f=k(b),H.geojson=f.geojson,H.layout.visibility="visible",g.extendFlat(H.paint,{"circle-color":f.mcc,"circle-radius":f.mrc,"circle-opacity":f.mo}));if(F||A){a=a._fullLayout;f=b[0].trace;l=(f.marker||{}).symbol;l="circle"!==l?m(l):h;p=c.hasText(f)?m(f.text):h;y=[];for(H=0;H<b.length;H++)if(M=b[H],M.lonlat[0]!==e){if(L=f.texttemplate){L=Array.isArray(L)?L[H]||"":L;J=f._module.formatLabels(M,f,a);var I={};u(I,f,M.i);L=g.texttemplateString(L,J,a._d3locale,I,M,f._meta||{})}else L=p(M.tx);L&&(L=L.replace(v,
"").replace(w,"\n"));y.push({type:"Feature",geometry:{type:"Point",coordinates:M.lonlat},properties:{symbol:l(M.mx),text:L}})}q.geojson={type:"FeatureCollection",features:y};g.extendFlat(q.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"});F&&(g.extendFlat(q.layout,{"icon-size":d.marker.size/10}),g.extendFlat(q.paint,{"icon-opacity":d.opacity*d.marker.opacity,"icon-color":d.marker.color}));A&&(b=r(d.textposition,(d.marker||{}).size),g.extendFlat(q.layout,{"text-size":d.textfont.size,
"text-anchor":b.anchor,"text-offset":b.offset}),g.extendFlat(q.paint,{"text-color":d.textfont.color,"text-opacity":d.opacity}))}return K}},{"../../components/colorscale":603,"../../components/drawing":612,"../../components/fx/helpers":626,"../../constants/numerical":692,"../../lib":716,"../../lib/geojson_utils":711,"../../lib/svg_text_utils":740,"../../plots/mapbox/convert_text_opts":818,"../scatter/make_bubble_size_func":1136,"../scatter/subtypes":1143,"fast-isnumeric":228}],1185:[function(a,q,p){function n(a,
b,d){a=d("lon")||[];d=d("lat")||[];d=Math.min(a.length,d.length);return b._length=d}var k=a("../../lib"),m=a("../scatter/subtypes"),h=a("../scatter/marker_defaults"),b=a("../scatter/line_defaults"),g=a("../scatter/text_defaults"),e=a("../scatter/fillcolor_defaults"),t=a("./attributes");q.exports=function(a,f,d,c){function l(b,c){return k.coerce(a,f,t,b,c)}if(n(a,f,l)){l("text");l("texttemplate");l("hovertext");l("hovertemplate");l("mode");l("below");m.hasLines(f)&&(b(a,f,d,c,l,{noDash:!0}),l("connectgaps"));
if(m.hasMarkers(f)){h(a,f,d,c,l,{noLine:!0});var p=f.marker;"circle"!==p.symbol&&(k.isArrayOrTypedArray(p.size)&&(p.size=p.size[0]),k.isArrayOrTypedArray(p.color)&&(p.color=p.color[0]))}m.hasText(f)&&g(a,f,c,l,{noSelect:!0});l("fill");"none"!==f.fill&&e(a,f,d,l);k.coerceSelectionMarkerOpacity(f,l)}else f.visible=!1}},{"../../lib":716,"../scatter/fillcolor_defaults":1127,"../scatter/line_defaults":1132,"../scatter/marker_defaults":1138,"../scatter/subtypes":1143,"../scatter/text_defaults":1144,"./attributes":1183}],
1186:[function(a,q,p){q.exports=function(a,k){a.lon=k.lon;a.lat=k.lat;return a}},{}],1187:[function(a,q,p){var n=a("../../plots/cartesian/axes");q.exports=function(a,m,h){var b={};m=h[m.subplot]._subplot.mockAxis;a=a.lonlat;b.lonLabel=n.tickText(m,m.c2l(a[0]),!0).text;b.latLabel=n.tickText(m,m.c2l(a[1]),!0).text;return b}},{"../../plots/cartesian/axes":764}],1188:[function(a,q,p){function n(a,g,h){if(!a.hovertemplate){var e=(g.hi||a.hoverinfo).split("+"),d=-1!==e.indexOf("all"),c=-1!==e.indexOf("lon"),
k=-1!==e.indexOf("lat"),l=g.lonlat,m=[];d||c&&k?m.push("("+(l[0]+", ")+(l[1]+")")):c?m.push(h.lon+(l[0]+"")):k&&m.push(h.lat+(l[1]+""));(d||-1!==e.indexOf("text"))&&b(g,a,m);return m.join("\x3cbr\x3e")}}var k=a("../../components/fx"),m=a("../../lib"),h=a("../scatter/get_trace_color"),b=m.fillText,g=a("../../constants/numerical").BADNUM;q.exports=function(a,b,l){var e=a.cd,d=e[0].trace,c=a.xa,p=a.ya,t=a.subplot,q=360*(0<=b?Math.floor((b+180)/360):Math.ceil((b-180)/360)),w=b-q;k.getClosest(e,function(a){var b=
a.lonlat;if(b[0]===g)return Infinity;var d=m.modHalf(b[0],360);b=b[1];var e=t.project([d,b]);b=e.x-c.c2p([w,b]);d=e.y-p.c2p([d,l]);a=Math.max(3,a.mrc||0);return Math.max(Math.sqrt(b*b+d*d)-a,1-3/a)},a);if(!1!==a.index){b=e[a.index];var y=b.lonlat;y=[m.modHalf(y[0],360)+q,y[1]];q=c.c2p(y);y=p.c2p(y);var A=b.mrc||1;a.x0=q-A;a.x1=q+A;a.y0=y-A;a.y1=y+A;q={};q[d.subplot]={_subplot:t};q=d._module.formatLabels(b,d,q);a.lonLabel=q.lonLabel;a.latLabel=q.latLabel;a.color=h(d,b);a.extraText=n(d,b,e[0].t.labels);
a.hovertemplate=d.hovertemplate;return[a]}}},{"../../components/fx":629,"../../constants/numerical":692,"../../lib":716,"../scatter/get_trace_color":1129}],1189:[function(a,q,p){q.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:a("../scatter/marker_colorbar"),formatLabels:a("./format_labels"),calc:a("../scattergeo/calc"),plot:a("./plot"),hoverPoints:a("./hover"),eventData:a("./event_data"),selectPoints:a("./select"),styleOnSelect:function(a,k){k&&k[0].trace._glTrace.update(k)},
moduleType:"trace",name:"scattermapbox",basePlotModule:a("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":819,"../scatter/marker_colorbar":1137,"../scattergeo/calc":1161,"./attributes":1183,"./defaults":1185,"./event_data":1186,"./format_labels":1187,"./hover":1188,"./plot":1190,"./select":1191}],1190:[function(a,q,p){function n(a,g){this.type="scattermapbox";this.subplot=a;this.uid=g;this.sourceIds={fill:"source-"+g+"-fill",line:"source-"+
g+"-line",circle:"source-"+g+"-circle",symbol:"source-"+g+"-symbol"};this.layerIds={fill:m+g+"-fill",line:m+g+"-line",circle:m+g+"-circle",symbol:m+g+"-symbol"};this.below=null}var k=a("./convert"),m=a("../../plots/mapbox/constants").traceLayerPrefix,h=["fill","line","circle","symbol"];a=n.prototype;a.addSource=function(a,g){this.subplot.map.addSource(this.sourceIds[a],{type:"geojson",data:g.geojson})};a.setSourceData=function(a,g){this.subplot.map.getSource(this.sourceIds[a]).setData(g.geojson)};
a.addLayer=function(a,g,e){this.subplot.addLayer({type:a,id:this.layerIds[a],source:this.sourceIds[a],layout:g.layout,paint:g.paint},e)};a.update=function(a){var b=this.subplot,e=b.map,m=k(b.gd,a),l=b.belowLookup["trace-"+this.uid],f;if(l!==this.below){for(f=h.length-1;0<=f;f--){var d=h[f];e.removeLayer(this.layerIds[d])}for(f=0;f<h.length;f++)d=h[f],e=m[d],this.addLayer(d,e,l);this.below=l}for(f=0;f<h.length;f++)d=h[f],e=m[d],b.setOptions(this.layerIds[d],"setLayoutProperty",e.layout),"visible"===
e.layout.visibility&&(this.setSourceData(d,e),b.setOptions(this.layerIds[d],"setPaintProperty",e.paint));a[0].trace._glTrace=this};a.dispose=function(){for(var a=this.subplot.map,g=h.length-1;0<=g;g--){var e=h[g];a.removeLayer(this.layerIds[e]);a.removeSource(this.sourceIds[e])}};q.exports=function(a,g){var b=g[0].trace,m=new n(a,b.uid),l=k(a.gd,g);a=m.below=a.belowLookup["trace-"+b.uid];for(b=0;b<h.length;b++){var f=h[b],d=l[f];m.addSource(f,d);m.addLayer(f,d,a)}return g[0].trace._glTrace=m}},{"../../plots/mapbox/constants":817,
"./convert":1184}],1191:[function(a,q,p){var n=a("../../lib"),k=a("../scatter/subtypes"),m=a("../../constants/numerical").BADNUM;q.exports=function(a,b){var g=a.cd,e=a.xaxis,h=a.yaxis,l=[],f;if(!k.hasMarkers(g[0].trace))return[];if(!1===b)for(f=0;f<g.length;f++)g[f].selected=0;else for(f=0;f<g.length;f++){var d=g[f],c=d.lonlat;if(c[0]!==m){var p=[n.modHalf(c[0],360),c[1]];p=[e.c2p(p),h.c2p(p)];b.contains(p,null,f,a)?(l.push({pointNumber:f,lon:c[0],lat:c[1]}),d.selected=1):d.selected=0}}return l}},
{"../../constants/numerical":692,"../../lib":716,"../scatter/subtypes":1143}],1192:[function(a,q,p){p=a("../../plots/template_attributes").hovertemplateAttrs;var n=a("../../plots/template_attributes").texttemplateAttrs,k=a("../../lib/extend").extendFlat,m=a("../scatter/attributes");a=a("../../plots/attributes");var h=m.line;q.exports={mode:m.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},
dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:m.text,texttemplate:n({editType:"plot"},{keys:["r","theta","text"]}),hovertext:m.hovertext,line:{color:h.color,width:h.width,dash:h.dash,shape:k({},h.shape,{values:["linear","spline"]}),smoothing:h.smoothing,editType:"calc"},connectgaps:m.connectgaps,
marker:m.marker,cliponaxis:k({},m.cliponaxis,{dflt:!1}),textposition:m.textposition,textfont:m.textfont,fill:k({},m.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:m.fillcolor,hoverinfo:k({},a.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:m.hoveron,hovertemplate:p(),selected:m.selected,unselected:m.unselected}},{"../../lib/extend":707,"../../plots/attributes":761,"../../plots/template_attributes":840,"../scatter/attributes":1119}],1193:[function(a,q,p){var n=a("fast-isnumeric"),
k=a("../../constants/numerical").BADNUM,m=a("../../plots/cartesian/axes"),h=a("../scatter/colorscale_calc"),b=a("../scatter/arrays_to_calcdata"),g=a("../scatter/calc_selection"),e=a("../scatter/calc").calcMarkerSize;q.exports=function(a,l){var f=a._fullLayout,d=l.subplot,c=f[d].radialaxis;d=f[d].angularaxis;f=c.makeCalcdata(l,"r");var p=d.makeCalcdata(l,"theta"),t=l._length;d=Array(t);for(var q=0;q<t;q++){var w=f[q],y=p[q],A=d[q]={};n(w)&&n(y)?(A.r=w,A.theta=y):A.r=k}p=e(l,t);l._extremes.x=m.findExtremes(c,
f,{ppad:p});h(a,l);b(d,l);g(d,l);return d}},{"../../constants/numerical":692,"../../plots/cartesian/axes":764,"../scatter/arrays_to_calcdata":1118,"../scatter/calc":1120,"../scatter/calc_selection":1121,"../scatter/colorscale_calc":1122,"fast-isnumeric":228}],1194:[function(a,q,p){function n(a,b,e,f){a=f("r");e=f("theta");if(a)e?a=Math.min(a.length,e.length):(a=a.length,f("theta0"),f("dtheta"));else{if(!e)return 0;a=b.theta.length;f("r0");f("dr")}return b._length=a}var k=a("../../lib"),m=a("../scatter/subtypes"),
h=a("../scatter/marker_defaults"),b=a("../scatter/line_defaults"),g=a("../scatter/line_shape_defaults"),e=a("../scatter/text_defaults"),t=a("../scatter/fillcolor_defaults"),l=a("../scatter/constants").PTS_LINESONLY,f=a("./attributes");q.exports={handleRThetaDefaults:n,supplyDefaults:function(a,c,p,q){function d(b,d){return k.coerce(a,c,f,b,d)}var r=n(a,c,q,d);if(r){d("thetaunit");d("mode",r<l?"lines+markers":"lines");d("text");d("hovertext");"fills"!==c.hoveron&&d("hovertemplate");m.hasLines(c)&&
(b(a,c,p,q,d),g(a,c,d),d("connectgaps"));m.hasMarkers(c)&&h(a,c,p,q,d,{gradient:!0});m.hasText(c)&&(d("texttemplate"),e(a,c,q,d));q=[];if(m.hasMarkers(c)||m.hasText(c))d("cliponaxis"),d("marker.maxdisplayed"),q.push("points");d("fill");"none"!==c.fill&&(t(a,c,p,d),m.hasLines(c)||g(a,c,d));"tonext"!==c.fill&&"toself"!==c.fill||q.push("fills");d("hoveron",q.join("+")||"points");k.coerceSelectionMarkerOpacity(c,d)}else c.visible=!1}}},{"../../lib":716,"../scatter/constants":1123,"../scatter/fillcolor_defaults":1127,
"../scatter/line_defaults":1132,"../scatter/line_shape_defaults":1134,"../scatter/marker_defaults":1138,"../scatter/subtypes":1143,"../scatter/text_defaults":1144,"./attributes":1192}],1195:[function(a,q,p){var n=a("../../lib"),k=a("../../plots/cartesian/axes");q.exports=function(a,h,b){var g={},e=b[h.subplot]._subplot;e?(h=e.radialAxis,e=e.angularAxis):(e=b[h.subplot],h=e.radialaxis,e=e.angularaxis);b=h.c2l(a.r);g.rLabel=k.tickText(h,b,!0).text;a="degrees"===e.thetaunit?n.rad2deg(a.theta):a.theta;
g.thetaLabel=k.tickText(e,a,!0).text;return g}},{"../../lib":716,"../../plots/cartesian/axes":764}],1196:[function(a,q,p){function n(a,h,b,g){var e=b.radialAxis,k=b.angularAxis;e._hovertitle="r";k._hovertitle="";var l={};l[h.subplot]={_subplot:b};b=h._module.formatLabels(a,h,l);g.rLabel=b.rLabel;g.thetaLabel=b.thetaLabel;b=a.hi||h.hoverinfo;a=[];h.hovertemplate||(h=b.split("+"),-1!==h.indexOf("all")&&(h=["r","theta","text"]),-1!==h.indexOf("r")&&a.push(e._hovertitle+": "+g.rLabel),-1!==h.indexOf("theta")&&
a.push(k._hovertitle+": "+g.thetaLabel),-1!==h.indexOf("text")&&g.text&&(a.push(g.text),delete g.text),g.extraText=a.join("\x3cbr\x3e"))}var k=a("../scatter/hover");q.exports={hoverPoints:function(a,h,b,g){if((h=k(a,h,b,g))&&!1!==h[0].index){b=h[0];if(void 0===b.index)return h;a=a.subplot;g=b.cd[b.index];var e=b.trace;if(a.isPtInside(g))return b.xLabelVal=void 0,b.yLabelVal=void 0,n(g,e,a,b),b.hovertemplate=e.hovertemplate,h}},makeHoverPointText:n}},{"../scatter/hover":1130}],1197:[function(a,q,p){q.exports=
{moduleType:"trace",name:"scatterpolar",basePlotModule:a("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:a("./attributes"),supplyDefaults:a("./defaults").supplyDefaults,colorbar:a("../scatter/marker_colorbar"),formatLabels:a("./format_labels"),calc:a("./calc"),plot:a("./plot"),style:a("../scatter/style").style,styleOnSelect:a("../scatter/style").styleOnSelect,hoverPoints:a("./hover").hoverPoints,selectPoints:a("../scatter/select"),meta:{}}},{"../../plots/polar":828,
"../scatter/marker_colorbar":1137,"../scatter/select":1140,"../scatter/style":1142,"./attributes":1192,"./calc":1193,"./defaults":1194,"./format_labels":1195,"./hover":1196,"./plot":1198}],1198:[function(a,q,p){var n=a("../scatter/plot"),k=a("../../constants/numerical").BADNUM;q.exports=function(a,h,b){var g=h.layers.frontplot.select("g.scatterlayer"),e={xaxis:h.xaxis,yaxis:h.yaxis,plot:h.framework,layerClipId:h._hasClipOnAxisFalse?h.clipIds.forTraces:null},m=h.radialAxis;h=h.angularAxis;for(var l=
0;l<b.length;l++)for(var f=b[l],d=0;d<f.length;d++){var c=f[d],p=c.r;if(p===k)c.x=c.y=k;else{p=m.c2g(p);var q=h.c2g(c.theta);c.x=p*Math.cos(q);c.y=p*Math.sin(q)}}n(a,e,b,g)}},{"../../constants/numerical":692,"../scatter/plot":1139}],1199:[function(a,q,p){p=a("../scatterpolar/attributes");var n=a("../scattergl/attributes");a=a("../../plots/template_attributes").texttemplateAttrs;q.exports={mode:p.mode,r:p.r,theta:p.theta,r0:p.r0,dr:p.dr,theta0:p.theta0,dtheta:p.dtheta,thetaunit:p.thetaunit,text:p.text,
texttemplate:a({editType:"plot"},{keys:["r","theta","text"]}),hovertext:p.hovertext,hovertemplate:p.hovertemplate,line:n.line,connectgaps:n.connectgaps,marker:n.marker,fill:n.fill,fillcolor:n.fillcolor,textposition:n.textposition,textfont:n.textfont,hoverinfo:p.hoverinfo,selected:p.selected,unselected:p.unselected}},{"../../plots/template_attributes":840,"../scattergl/attributes":1170,"../scatterpolar/attributes":1192}],1200:[function(a,q,p){var n=a("../scatter/colorscale_calc"),k=a("../scatter/calc").calcMarkerSize,
m=a("../scattergl/convert"),h=a("../../plots/cartesian/axes"),b=a("../scattergl/constants").TOO_MANY_POINTS;q.exports=function(a,e){var g=a._fullLayout,l=e.subplot,f=g[l].radialaxis;l=g[l].angularaxis;g=e._r=f.makeCalcdata(e,"r");var d=e._theta=l.makeCalcdata(e,"theta");l=e._length;var c={};l<g.length&&(g=g.slice(0,l));l<d.length&&(d=d.slice(0,l));c.r=g;c.theta=d;n(a,e);a=c.opts=m.style(a,e);var p;l<b?p=k(e,l):a.marker&&(p=2*(a.marker.sizeAvg||Math.max(a.marker.size,3)));e._extremes.x=h.findExtremes(f,
g,{ppad:p});return[{x:!1,y:!1,t:c,trace:e}]}},{"../../plots/cartesian/axes":764,"../scatter/calc":1120,"../scatter/colorscale_calc":1122,"../scattergl/constants":1172,"../scattergl/convert":1173}],1201:[function(a,q,p){var n=a("../../lib"),k=a("../scatter/subtypes"),m=a("../scatterpolar/defaults").handleRThetaDefaults,h=a("../scatter/marker_defaults"),b=a("../scatter/line_defaults"),g=a("../scatter/text_defaults"),e=a("../scatter/fillcolor_defaults"),t=a("../scatter/constants").PTS_LINESONLY,l=a("./attributes");
q.exports=function(a,d,c,p){function f(b,c){return n.coerce(a,d,l,b,c)}var r=m(a,d,p,f);r?(f("thetaunit"),f("mode",r<t?"lines+markers":"lines"),f("text"),f("hovertext"),"fills"!==d.hoveron&&f("hovertemplate"),k.hasLines(d)&&(b(a,d,c,p,f),f("connectgaps")),k.hasMarkers(d)&&h(a,d,c,p,f),k.hasText(d)&&(f("texttemplate"),g(a,d,p,f)),f("fill"),"none"!==d.fill&&e(a,d,c,f),n.coerceSelectionMarkerOpacity(d,f)):d.visible=!1}},{"../../lib":716,"../scatter/constants":1123,"../scatter/fillcolor_defaults":1127,
"../scatter/line_defaults":1132,"../scatter/marker_defaults":1138,"../scatter/subtypes":1143,"../scatter/text_defaults":1144,"../scatterpolar/defaults":1194,"./attributes":1199}],1202:[function(a,q,p){var n=a("../scatterpolar/format_labels");q.exports=function(a,m,h){var b=a.i;"r"in a||(a.r=m._r[b]);"theta"in a||(a.theta=m._theta[b]);return n(a,m,h)}},{"../scatterpolar/format_labels":1195}],1203:[function(a,q,p){var n=a("../scattergl/hover"),k=a("../scatterpolar/hover").makeHoverPointText;q.exports=
{hoverPoints:function(a,h,b,g){var e=a.cd[0].t,m=e.r;e=e.theta;if((h=n.hoverPoints(a,h,b,g))&&!1!==h[0].index){b=h[0];if(void 0===b.index)return h;a=a.subplot;g=b.cd[b.index];var l=b.trace;g.r=m[b.index];g.theta=e[b.index];if(a.isPtInside(g))return b.xLabelVal=void 0,b.yLabelVal=void 0,k(g,l,a,b),h}}}},{"../scattergl/hover":1178,"../scatterpolar/hover":1196}],1204:[function(a,q,p){q.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:a("../../plots/polar"),categories:"gl regl polar symbols showLegend scatter-like".split(" "),
attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:a("../scatter/marker_colorbar"),formatLabels:a("./format_labels"),calc:a("./calc"),plot:a("./plot"),hoverPoints:a("./hover").hoverPoints,selectPoints:a("../scattergl/select"),meta:{}}},{"../../plots/polar":828,"../scatter/marker_colorbar":1137,"../scattergl/select":1182,"./attributes":1199,"./calc":1200,"./defaults":1201,"./format_labels":1202,"./hover":1203,"./plot":1205}],1205:[function(a,q,p){var n=a("point-cluster"),k=a("fast-isnumeric"),
m=a("../scattergl/plot"),h=a("../scattergl/scene_update"),b=a("../scattergl/convert"),g=a("../../lib"),e=a("../scattergl/constants").TOO_MANY_POINTS;q.exports=function(a,l,f){if(f.length){var d=l.radialAxis,c=l.angularAxis,p=h(a,l);f.forEach(function(f){if(f&&f[0]&&f[0].trace){var h=f[0];f=h.trace;h=h.t;var m=f._length,r=h.r,t=h.theta,q=h.opts,u,C=r.slice(),B=t.slice();for(u=0;u<r.length;u++)l.isPtInside({r:r[u],theta:t[u]})||(C[u]=NaN,B[u]=NaN);var D=Array(2*m),G=Array(m),E=Array(m);for(u=0;u<m;u++){var F=
C[u];if(k(F)){var L=d.c2g(F);var J=c.c2g(B[u],f.thetaunit);F=L*Math.cos(J);L*=Math.sin(J)}else F=L=NaN;G[u]=D[2*u]=F;E[u]=D[2*u+1]=L}h.tree=n(D);q.marker&&m>=e&&(q.marker.cluster=h.tree);q.marker&&(q.markerSel.positions=q.markerUnsel.positions=q.marker.positions=D);q.line&&1<D.length&&g.extendFlat(q.line,b.linePositions(a,f,D));q.text&&(g.extendFlat(q.text,{positions:D},b.textPosition(a,f,q.text,q.marker)),g.extendFlat(q.textSel,{positions:D},b.textPosition(a,f,q.text,q.markerSel)),g.extendFlat(q.textUnsel,
{positions:D},b.textPosition(a,f,q.text,q.markerUnsel)));q.fill&&!p.fill2d&&(p.fill2d=!0);q.marker&&!p.scatter2d&&(p.scatter2d=!0);q.line&&!p.line2d&&(p.line2d=!0);q.text&&!p.glText&&(p.glText=!0);p.lineOptions.push(q.line);p.fillOptions.push(q.fill);p.markerOptions.push(q.marker);p.markerSelectedOptions.push(q.markerSel);p.markerUnselectedOptions.push(q.markerUnsel);p.textOptions.push(q.text);p.textSelectedOptions.push(q.textSel);p.textUnselectedOptions.push(q.textUnsel);p.selectBatch.push([]);p.unselectBatch.push([]);
h.x=G;h.y=E;h.rawx=G;h.rawy=E;h.r=r;h.theta=t;h.positions=D;h._scene=p;h.index=p.count;p.count++}});return m(a,l,f)}}},{"../../lib":716,"../scattergl/constants":1172,"../scattergl/convert":1173,"../scattergl/plot":1180,"../scattergl/scene_update":1181,"fast-isnumeric":228,"point-cluster":470}],1206:[function(a,q,p){p=a("../../plots/template_attributes").hovertemplateAttrs;var n=a("../../plots/template_attributes").texttemplateAttrs,k=a("../scatter/attributes"),m=a("../../plots/attributes"),h=a("../../components/colorscale/attributes"),
b=a("../../components/drawing/attributes").dash;a=a("../../lib/extend").extendFlat;var g=k.marker,e=k.line,t=g.line;q.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:a({},k.mode,{dflt:"markers"}),text:a({},k.text,{}),texttemplate:n({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:a({},k.hovertext,{}),line:{color:e.color,width:e.width,dash:b,shape:a({},
e.shape,{values:["linear","spline"]}),smoothing:e.smoothing,editType:"calc"},connectgaps:k.connectgaps,cliponaxis:k.cliponaxis,fill:a({},k.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:k.fillcolor,marker:a({symbol:g.symbol,opacity:g.opacity,maxdisplayed:g.maxdisplayed,size:g.size,sizeref:g.sizeref,sizemin:g.sizemin,sizemode:g.sizemode,line:a({width:t.width,editType:"calc"},h("marker.line")),gradient:g.gradient,editType:"calc"},h("marker")),textfont:k.textfont,textposition:k.textposition,
selected:k.selected,unselected:k.unselected,hoverinfo:a({},m.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:k.hoveron,hovertemplate:p()}},{"../../components/colorscale/attributes":598,"../../components/drawing/attributes":611,"../../lib/extend":707,"../../plots/attributes":761,"../../plots/template_attributes":840,"../scatter/attributes":1119}],1207:[function(a,q,p){var n=a("fast-isnumeric"),k=a("../scatter/colorscale_calc"),m=a("../scatter/arrays_to_calcdata"),h=a("../scatter/calc_selection"),
b=a("../scatter/calc").calcMarkerSize,g=["a","b","c"],e={a:["b","c"],b:["a","c"],c:["a","b"]};q.exports=function(a,l){var f=a._fullLayout[l.subplot].sum,d=l.sum||f,c={a:l.a,b:l.b,c:l.c},p,t;for(p=0;p<g.length;p++){var q=g[p];if(!c[q]){var w=c[e[q][0]];var y=c[e[q][1]];var A=Array(w.length);for(t=0;t<w.length;t++)A[t]=d-w[t]-y[t];c[q]=A}}d=l._length;t=Array(d);for(p=0;p<d;p++)if(q=c.a[p],A=c.b[p],w=c.c[p],n(q)&&n(A)&&n(w)){q=+q;A=+A;w=+w;y=f/(q+A+w);1!==y&&(q*=y,A*=y,w*=y);var z=q;y=w-A;t[p]={x:y,
y:z,a:q,b:A,c:w}}else t[p]={x:!1,y:!1};b(l,d);k(a,l);m(t,l);h(t,l);return t}},{"../scatter/arrays_to_calcdata":1118,"../scatter/calc":1120,"../scatter/calc_selection":1121,"../scatter/colorscale_calc":1122,"fast-isnumeric":228}],1208:[function(a,q,p){var n=a("../../lib"),k=a("../scatter/constants"),m=a("../scatter/subtypes"),h=a("../scatter/marker_defaults"),b=a("../scatter/line_defaults"),g=a("../scatter/line_shape_defaults"),e=a("../scatter/text_defaults"),t=a("../scatter/fillcolor_defaults"),l=
a("./attributes");q.exports=function(a,d,c,p){function f(b,c){return n.coerce(a,d,l,b,c)}var r=f("a"),q=f("b"),y=f("c");if(r){var A=r.length;q?(A=Math.min(A,q.length),y&&(A=Math.min(A,y.length))):A=y?Math.min(A,y.length):0}else q&&y&&(A=Math.min(q.length,y.length));if(A){d._length=A;f("sum");f("text");f("hovertext");"fills"!==d.hoveron&&f("hovertemplate");f("mode",A<k.PTS_LINESONLY?"lines+markers":"lines");m.hasLines(d)&&(b(a,d,c,p,f),g(a,d,f),f("connectgaps"));m.hasMarkers(d)&&h(a,d,c,p,f,{gradient:!0});
m.hasText(d)&&(f("texttemplate"),e(a,d,p,f));p=[];if(m.hasMarkers(d)||m.hasText(d))f("cliponaxis"),f("marker.maxdisplayed"),p.push("points");f("fill");"none"!==d.fill&&(t(a,d,c,f),m.hasLines(d)||g(a,d,f));"tonext"!==d.fill&&"toself"!==d.fill||p.push("fills");f("hoveron",p.join("+")||"points");n.coerceSelectionMarkerOpacity(d,f)}else d.visible=!1}},{"../../lib":716,"../scatter/constants":1123,"../scatter/fillcolor_defaults":1127,"../scatter/line_defaults":1132,"../scatter/line_shape_defaults":1134,
"../scatter/marker_defaults":1138,"../scatter/subtypes":1143,"../scatter/text_defaults":1144,"./attributes":1206}],1209:[function(a,q,p){q.exports=function(a,k,m,h,b){k.xa&&(a.xaxis=k.xa);k.ya&&(a.yaxis=k.ya);h[b]?(k=h[b],a.a=k.a,a.b=k.b,a.c=k.c):(a.a=k.a,a.b=k.b,a.c=k.c);return a}},{}],1210:[function(a,q,p){var n=a("../../plots/cartesian/axes");q.exports=function(a,m,h){var b={};m=h[m.subplot]._subplot;b.aLabel=n.tickText(m.aaxis,a.a,!0).text;b.bLabel=n.tickText(m.baxis,a.b,!0).text;b.cLabel=n.tickText(m.caxis,
a.c,!0).text;return b}},{"../../plots/cartesian/axes":764}],1211:[function(a,q,p){var n=a("../scatter/hover");q.exports=function(a,m,h,b){if((m=n(a,m,h,b))&&!1!==m[0].index){h=m[0];if(void 0===h.index)return b=a.xa._length,a=b*(1-h.y0/a.ya._length)/2,b-=a,h.x0=Math.max(Math.min(h.x0,b),a),h.x1=Math.max(Math.min(h.x1,b),a),m;var g=h.cd[h.index];a=h.trace;b=h.subplot;h.a=g.a;h.b=g.b;h.c=g.c;h.xLabelVal=void 0;h.yLabelVal=void 0;var e={};e[a.subplot]={_subplot:b};e=a._module.formatLabels(g,a,e);h.aLabel=
e.aLabel;h.bLabel=e.bLabel;h.cLabel=e.cLabel;e=g.hi||a.hoverinfo;g=[];a.hovertemplate||(e=e.split("+"),-1!==e.indexOf("all")&&(e=["a","b","c"]),-1!==e.indexOf("a")&&g.push(b.aaxis._hovertitle+": "+h.aLabel),-1!==e.indexOf("b")&&g.push(b.baxis._hovertitle+": "+h.bLabel),-1!==e.indexOf("c")&&g.push(b.caxis._hovertitle+": "+h.cLabel));h.extraText=g.join("\x3cbr\x3e");h.hovertemplate=a.hovertemplate;return m}}},{"../scatter/hover":1130}],1212:[function(a,q,p){q.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),
colorbar:a("../scatter/marker_colorbar"),formatLabels:a("./format_labels"),calc:a("./calc"),plot:a("./plot"),style:a("../scatter/style").style,styleOnSelect:a("../scatter/style").styleOnSelect,hoverPoints:a("./hover"),selectPoints:a("../scatter/select"),eventData:a("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:a("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":841,"../scatter/marker_colorbar":1137,"../scatter/select":1140,
"../scatter/style":1142,"./attributes":1206,"./calc":1207,"./defaults":1208,"./event_data":1209,"./format_labels":1210,"./hover":1211,"./plot":1213}],1213:[function(a,q,p){var n=a("../scatter/plot");q.exports=function(a,m,h){var b=m.plotContainer;b.select(".scatterlayer").selectAll("*").remove();b={xaxis:m.xaxis,yaxis:m.yaxis,plot:b,layerClipId:m._hasClipOnAxisFalse?m.clipIdRelative:null};m=m.layers.frontplot.select("g.scatterlayer");n(a,b,h,m)}},{"../scatter/plot":1139}],1214:[function(a,q,p){function n(a){return{valType:"info_array",
freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:b[a],editType:"plot"}}}var k=a("../scatter/attributes"),m=a("../../components/colorscale/attributes");p=a("../../plots/template_attributes").hovertemplateAttrs;var h=a("../scattergl/attributes"),b=a("../../plots/cartesian/constants").idRegex,g=a("../../plot_api/plot_template").templatedArray;a=a("../../lib/extend").extendFlat;k=k.marker;var e=k.line;e=a(m("marker.line",{editTypeOverride:"calc"}),{width:a({},e.width,{editType:"calc"}),
editType:"calc"});m=a(m("marker"),{symbol:k.symbol,size:a({},k.size,{editType:"markerSize"}),sizeref:k.sizeref,sizemin:k.sizemin,sizemode:k.sizemode,opacity:k.opacity,colorbar:k.colorbar,line:e,editType:"calc"});m.color.editType=m.cmin.editType=m.cmax.editType="style";q.exports={dimensions:g("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear",
"log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:a({},h.text,{}),hovertext:a({},h.hovertext,{}),hovertemplate:p(),marker:m,xaxes:n("x"),yaxes:n("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:h.selected.marker,
editType:"calc"},unselected:{marker:h.unselected.marker,editType:"calc"},opacity:h.opacity}},{"../../components/colorscale/attributes":598,"../../lib/extend":707,"../../plot_api/plot_template":754,"../../plots/cartesian/constants":770,"../../plots/template_attributes":840,"../scatter/attributes":1119,"../scattergl/attributes":1170}],1215:[function(a,q,p){function n(a){var b=a._fullLayout,c=b._glcanvas.data()[0].regl,e=b._splomGrid;e||(e=b._splomGrid=m(c));e.update(k(a))}function k(a){function b(a,
b,c,d,e,h){var k=b[a+"color"];a=b[a+"width"];b=String(k+a);b in g?g[b].data.push(NaN,NaN,c,d,e,h):g[b]={data:[c,d,e,h],join:"rect",thickness:a,color:k,viewport:f,range:f,overlay:!1}}var c=a._fullLayout,e=c._size,f=[0,0,c.width,c.height],g={},h;for(h in c._splomSubplots){var k=c._plots[h],m=k.xaxis;k=k.yaxis;var n=m._gridVals,p=k._gridVals,t=e.b+k.domain[0]*e.h,q=-k._m,D=-q*k.r2l(k.range[0],k.calendar);if(m.showgrid)for(h=0;h<n.length;h++){var G=m._offset+m.l2p(n[h].x);b("grid",m,G,t,G,t+k._length)}if(k.showgrid)for(h=
0;h<p.length;h++)n=t+D+q*p[h].x,b("grid",k,m._offset,n,m._offset+m._length,n);l(a,m,k)&&(G=m._offset+m.l2p(0),b("zeroline",m,G,t,G,t+k._length));l(a,k,m)&&(n=t+D+0,b("zeroline",k,m._offset,n,m._offset+m._length,n))}a=[];for(h in g)a.push(g[h]);return a}var m=a("regl-line2d"),h=a("../../registry"),b=a("../../lib/prepare_regl"),g=a("../../plots/get_data").getModuleCalcData,e=a("../../plots/cartesian"),t=a("../../plots/cartesian/axis_ids").getFromId,l=a("../../plots/cartesian/axes").shouldShowZeroLine;
q.exports={name:"splom",attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:function(a){var d=a._fullLayout,c=h.getModule("splom"),e=g(a.calcdata,c)[0];b(a,["ANGLE_instanced_arrays","OES_element_index_uint"])&&(d._hasOnlyLargeSploms&&n(a),c.plot(a,{},e))},drag:function(a){var b=a.calcdata,c=a._fullLayout;c._hasOnlyLargeSploms&&n(a);for(var e=0;e<b.length;e++){var f=b[e][0].trace,g=c._splomScenes[f.uid];
if("splom"===f.type&&g&&g.matrix){for(var h=a,k=f._visibleDims,l=g.viewOpts.ranges=Array(g.matrixOptions.data.length),m=0;m<k.length;m++){var p=k[m],q=l[m]=Array(4),B=t(h,f._diag[p][0]);B&&(q[0]=B.r2l(B.range[0]),q[2]=B.r2l(B.range[1]));if(p=t(h,f._diag[p][1]))q[1]=p.r2l(p.range[0]),q[3]=p.r2l(p.range[1])}g.selectBatch.length||g.unselectBatch.length?g.matrix.update({ranges:l},{ranges:l}):g.matrix.update({ranges:l})}}},updateGrid:n,clean:function(a,b,c,g){var d={},f;if(g._splomScenes){for(f=0;f<a.length;f++){var h=
a[f];"splom"===h.type&&(d[h.uid]=1)}for(f=0;f<c.length;f++)if(h=c[f],!d[h.uid]){var k=g._splomScenes[h.uid];k&&k.destroy&&k.destroy();g._splomScenes[h.uid]=null;delete g._splomScenes[h.uid]}}0===Object.keys(g._splomScenes||{}).length&&delete g._splomScenes;g._splomGrid&&!b._hasOnlyLargeSploms&&g._hasOnlyLargeSploms&&(g._splomGrid.destroy(),g._splomGrid=null,delete g._splomGrid);e.clean(a,b,c,g)},updateFx:e.updateFx,toSVG:e.toSVG}},{"../../lib/prepare_regl":729,"../../plots/cartesian":775,"../../plots/cartesian/axes":764,
"../../plots/cartesian/axis_ids":767,"../../plots/get_data":799,"../../registry":845,"regl-line2d":492}],1216:[function(a,q,p){var n=a("../../lib"),k=a("../../plots/cartesian/axis_ids"),m=a("../scatter/calc").calcMarkerSize,h=a("../scatter/calc").calcAxisExpansion,b=a("../scatter/colorscale_calc"),g=a("../scattergl/convert").markerSelection,e=a("../scattergl/convert").markerStyle,t=a("./scene_update"),l=a("../../constants/numerical").BADNUM,f=a("../scattergl/constants").TOO_MANY_POINTS;q.exports=
function(a,c){function d(a,b){b=a.makeCalcdata({v:b.values,vcalendar:c.calendar},"v");for(var d=0;d<b.length;d++)b[d]=b[d]===l?NaN:b[d];y.push(b);A.push("log"===a.type?n.simpleMap(b,a.c2l):b)}var p=c.dimensions,q=c._length,w={},y=w.cdata=[],A=w.data=[],z=c._visibleDims=[],x;for(x=0;x<p.length;x++){var C=p[x];if(C.visible){var B=k.getFromId(a,c._diag[x][0]);var D=k.getFromId(a,c._diag[x][1]);B&&D&&B.type!==D.type?n.log("Skipping splom dimension "+x+" with conflicting axis types"):(B?(d(B,C),D&&"category"===
D.type&&(D._categories=B._categories.slice())):d(D,C),z.push(x))}}b(a,c);n.extendFlat(w,e(c));var G=y.length*q>f?2*(w.sizeAvg||Math.max(w.size,3)):m(c,q);for(q=0;q<z.length;q++)x=z[q],C=p[x],B=k.getFromId(a,c._diag[x][0])||{},D=k.getFromId(a,c._diag[x][1])||{},h(a,c,B,D,y[q],y[q],G);a=t(a,c);a.matrix||(a.matrix=!0);a.matrixOptions=w;a.selectedOptions=g(c,c.selected);a.unselectedOptions=g(c,c.unselected);return[{x:!1,y:!1,t:{},trace:c}]}},{"../../constants/numerical":692,"../../lib":716,"../../plots/cartesian/axis_ids":767,
"../scatter/calc":1120,"../scatter/colorscale_calc":1122,"../scattergl/constants":1172,"../scattergl/convert":1173,"./scene_update":1223}],1217:[function(a,q,p){function n(a,d){function c(c,e){return m.coerce(a,d,b.dimensions,c,e)}c("label");var e=c("values");e&&e.length?c("visible"):d.visible=!1;c("axis.type");c("axis.matches")}function k(a,b,c,e){function d(a,d,e,f){if(a){var g=a.charAt(0),h=c._splomAxes[g];b["_"+g+"axes"][a]=1;f.push(a);a in h||(a=h[a]={},e&&(a.label=e.label||"",e.visible&&e.axis&&
(e.axis.type&&(a.type=e.axis.type),e.axis.matches&&(a.matches=d))))}}var f=b.dimensions,g=f.length;a=b.showupperhalf;var h=b.showlowerhalf,k=b.diagonal.visible,l,m=Array(g),n=Array(g);for(l=0;l<g;l++){var p=l?l+1:"";m[l]="x"+p;n[l]="y"+p}m=e("xaxes",m);p=e("yaxes",n);var r=b._diag=Array(g);b._xaxes={};b._yaxes={};e=[];n=[];var t=!k&&!h,q=!k&&!a;b._axesDim={};for(l=0;l<g;l++){var F=f[l],L=0===l,J=l===g-1,H=L&&t||J&&q?void 0:m[l];L=L&&q||J&&t?void 0:p[l];d(H,L,F,e);d(L,H,F,n);r[l]=[H,L];b._axesDim[H]=
l;b._axesDim[L]=l}for(l=0;l<e.length;l++)for(f=0;f<n.length;f++)g=e[l]+n[f],l>f&&a?c._splomSubplots[g]=1:l<f&&h?c._splomSubplots[g]=1:l!==f||!k&&h&&a||(c._splomSubplots[g]=1);if(!h||!k&&a&&h)c._splomGridDflt.xside="bottom",c._splomGridDflt.yside="left"}var m=a("../../lib"),h=a("../../plots/array_container_defaults"),b=a("./attributes"),g=a("../scatter/subtypes"),e=a("../scatter/marker_defaults"),t=a("../parcoords/merge_length"),l=a("../scattergl/helpers").isOpenSymbol;q.exports=function(a,d,c,p){function f(c,
e){return m.coerce(a,d,b,c,e)}var r=h(a,d,{name:"dimensions",handleItemDefaults:n}),q=f("diagonal.visible"),y=f("showupperhalf"),A=f("showlowerhalf");t(d,r,"values")&&(q||y||A)?(f("text"),f("hovertext"),f("hovertemplate"),e(a,d,c,p,f),c=l(d.marker.symbol),r=g.isBubble(d),f("marker.line.width",c||r?1:0),k(a,d,p,f),m.coerceSelectionMarkerOpacity(d,f)):d.visible=!1}},{"../../lib":716,"../../plots/array_container_defaults":760,"../parcoords/merge_length":1090,"../scatter/marker_defaults":1138,"../scatter/subtypes":1143,
"../scattergl/helpers":1177,"./attributes":1214}],1218:[function(a,q,p){var n=a("../../lib"),k=a("../scatter/colorscale_calc"),m=a("../scattergl/convert").markerStyle;q.exports=function(a,b){var g=b.trace;if(b=a._fullLayout._splomScenes[g.uid])k(a,g),n.extendFlat(b.matrixOptions,m(g)),a=n.extendFlat({},b.matrixOptions,b.viewOpts),b.matrix.update(a,null)}},{"../../lib":716,"../scatter/colorscale_calc":1122,"../scattergl/convert":1173}],1219:[function(a,q,p){p.getDimIndex=function(a,k){k=k._id;for(var m=
{x:0,y:1}[k.charAt(0)],h=a._visibleDims,b=0;b<h.length;b++)if(a._diag[h[b]][m]===k)return b;return!1}},{}],1220:[function(a,q,p){var n=a("./helpers"),k=a("../scattergl/hover").calcHover;q.exports={hoverPoints:function(a,h,b){var g=a.cd[0].trace,e=a.scene.matrixOptions.cdata,m=a.xa,l=a.ya;h=m.c2p(h);b=l.c2p(b);var f=a.distance,d=n.getDimIndex(g,m),c=n.getDimIndex(g,l);if(!1===d||!1===c)return[a];d=e[d];e=e[c];var p;for(c=0;c<d.length;c++){var q=e[c],v=m.c2p(d[c])-h;q=l.c2p(q)-b;v=Math.sqrt(v*v+q*q);
if(v<f){f=p=v;var w=c}}a.index=w;a.distance=f;a.dxy=p;return void 0===w?[a]:[k(a,d,e,g)]}}},{"../scattergl/hover":1178,"./helpers":1219}],1221:[function(a,q,p){p=a("../../registry");var n=a("../../components/grid");q.exports={moduleType:"trace",name:"splom",basePlotModule:a("./base_plot"),categories:"gl regl cartesian symbols showLegend scatter-like".split(" "),attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:a("../scatter/marker_colorbar"),calc:a("./calc"),plot:a("./plot"),hoverPoints:a("./hover").hoverPoints,
selectPoints:a("./select"),editStyle:a("./edit_style"),meta:{}};p.register(n)},{"../../components/grid":633,"../../registry":845,"../scatter/marker_colorbar":1137,"./attributes":1214,"./base_plot":1215,"./calc":1216,"./defaults":1217,"./edit_style":1218,"./hover":1220,"./plot":1222,"./select":1224}],1222:[function(a,q,p){var n=a("regl-splom"),k=a("../../lib"),m=a("../../plots/cartesian/axis_ids");q.exports=function(a,b,g){if(g.length)for(b=0;b<g.length;b++){var e,h,l=a,f=g[b][0],d=l._fullLayout,c=
d._size,p=f.trace;var q=f.t;f=d._splomScenes[p.uid];var v=f.matrixOptions,w=v.cdata,y=d._glcanvas.data()[0].regl,A=d.dragmode;if(0!==w.length){v.lower=p.showupperhalf;v.upper=p.showlowerhalf;v.diagonal=p.diagonal.visible;var z=p._visibleDims,x=w.length,C=f.viewOpts={};C.ranges=Array(x);C.domains=Array(x);for(e=0;e<z.length;e++){var B=z[e];var D=C.ranges[e]=Array(4),G=C.domains[e]=Array(4);if(h=m.getFromId(l,p._diag[B][0]))D[0]=h._rl[0],D[2]=h._rl[1],G[0]=h.domain[0],G[2]=h.domain[1];if(B=m.getFromId(l,
p._diag[B][1]))D[1]=B._rl[0],D[3]=B._rl[1],G[1]=B.domain[0],G[3]=B.domain[1]}C.viewport=[c.l,c.b,c.w+c.l,c.h+c.b];!0===f.matrix&&(f.matrix=n(y));B=-1<d.clickmode.indexOf("select");d=!0;if("lasso"===A||"select"===A||p.selectedpoints||B){A=p._length;if(p.selectedpoints){h=f.selectBatch=p.selectedpoints;e={};for(B=0;B<h.length;B++)e[h[B]]=!0;h=[];for(B=0;B<A;B++)e[B]||h.push(B);f.unselectBatch=h}c=q.xpx=Array(x);x=q.ypx=Array(x);for(e=0;e<z.length;e++){B=z[e];if(h=m.getFromId(l,p._diag[B][0]))for(c[e]=
Array(A),q=0;q<A;q++)c[e][q]=h.c2p(w[e][q]);if(B=m.getFromId(l,p._diag[B][1]))for(x[e]=Array(A),q=0;q<A;q++)x[e][q]=B.c2p(w[e][q])}if(f.selectBatch.length||f.unselectBatch.length)l=k.extendFlat({},v,f.unselectedOptions,C),p=k.extendFlat({},v,f.selectedOptions,C),f.matrix.update(l,p),d=!1}else q.xpx=q.ypx=null;d&&(v=k.extendFlat({},v,C),f.matrix.update(v,null))}}}},{"../../lib":716,"../../plots/cartesian/axis_ids":767,"regl-splom":499}],1223:[function(a,q,p){var n=a("../../lib");q.exports=function(a,
m){var h=a._fullLayout;a=m.uid;var b=h._splomScenes;b||(b=h._splomScenes={});h={dirty:!0,selectBatch:[],unselectBatch:[]};var g={matrix:!1,selectBatch:[],unselectBatch:[]},e=b[m.uid];e||(e=b[a]=n.extendFlat({},h,g),e.draw=function(){e.matrix&&e.matrix.draw&&(e.selectBatch.length||e.unselectBatch.length?e.matrix.draw(e.unselectBatch,e.selectBatch):e.matrix.draw());e.dirty=!1},e.destroy=function(){e.matrix&&e.matrix.destroy&&e.matrix.destroy();e.matrixOptions=null;e.selectBatch=null;e=e.unselectBatch=
null});e.dirty||n.extendFlat(e,h);return e}},{"../../lib":716}],1224:[function(a,q,p){var n=a("../../lib"),k=a("../scatter/subtypes"),m=a("./helpers");q.exports=function(a,b){var g=a.cd,e=g[0].trace,h=g[0].t;g=a.scene;var l=g.matrixOptions.cdata,f=a.xaxis,d=a.yaxis,c=[];if(!g)return c;var p=!k.hasMarkers(e)&&!k.hasText(e);if(!0!==e.visible||p)return c;f=m.getDimIndex(e,f);d=m.getDimIndex(e,d);if(!1===f||!1===d)return c;e=h.xpx[f];h=h.ypx[d];f=l[f];p=l[d];l=[];d=[];if(!1!==b&&!b.degenerate)for(var q=
0;q<f.length;q++)b.contains([e[q],h[q]],null,q,a)?(l.push(q),c.push({pointNumber:q,x:f[q],y:p[q]})):d.push(q);a=g.matrixOptions;l.length||d.length?g.selectBatch.length||g.unselectBatch.length||g.matrix.update(g.unselectedOptions,n.extendFlat({},a,g.selectedOptions,g.viewOpts)):g.matrix.update(a,null);g.selectBatch=l;g.unselectBatch=d;return c}},{"../../lib":716,"../scatter/subtypes":1143,"./helpers":1219}],1225:[function(a,q,p){p=a("../../components/colorscale/attributes");var n=a("../../plots/template_attributes").hovertemplateAttrs,
k=a("../mesh3d/attributes"),m=a("../../plots/attributes");a=a("../../lib/extend").extendFlat;var h={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",
editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1E3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:n({editType:"calc"},{keys:"tubex tubey tubez tubeu tubev tubew norm divergence".split(" ")}),showlegend:a({},m.showlegend,{dflt:!1})};a(h,p("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));["opacity","lightposition",
"lighting"].forEach(function(a){h[a]=k[a]});h.hoverinfo=a({},m.hoverinfo,{editType:"calc",flags:"x y z u v w norm divergence text name".split(" "),dflt:"x+y+z+norm+text+name"});h.transforms=void 0;q.exports=h},{"../../components/colorscale/attributes":598,"../../lib/extend":707,"../../plots/attributes":761,"../../plots/template_attributes":840,"../mesh3d/attributes":1060}],1226:[function(a,q,p){function n(a){var b=a._x,e=a._y,h=a._z,k=a._len,f,d,c=-Infinity,n=Infinity,p=-Infinity,q=Infinity,w=-Infinity,
y=Infinity,A="";if(k){var z=b[0];var x=e[0];var C=h[0]}if(1<k){var B=b[k-1];var D=e[k-1];var G=h[k-1]}for(f=0;f<k;f++){c=Math.max(c,b[f]);n=Math.min(n,b[f]);p=Math.max(p,e[f]);q=Math.min(q,e[f]);w=Math.max(w,h[f]);y=Math.min(y,h[f]);if(!E&&b[f]!==z){var E=!0;A+="x"}if(!F&&e[f]!==x){var F=!0;A+="y"}if(!L&&h[f]!==C){var L=!0;A+="z"}}E||(A+="x");F||(A+="y");L||(A+="z");var J=m.distinctVals(a._x).vals,H=m.distinctVals(a._y).vals,K=m.distinctVals(a._z).vals;A=A.replace("x",(z>B?"-":"+")+"x");A=A.replace("y",
(x>D?"-":"+")+"y");A=A.replace("z",(C>G?"-":"+")+"z");if(!k||k<J.length*H.length*K.length)k=0,J=[],H=[],K=[];f=function(a){return"x"===a?b:"y"===a?e:h};B=function(a){return"x"===a?J:"y"===a?H:K};G=function(a){return a[k-1]<a[0]?-1:1};a=f(A[1]);E=f(A[3]);F=f(A[5]);L=B(A[1]).length;z=B(A[3]).length;B=B(A[5]).length;x=!1;D=G(f(A[1]));C=G(f(A[3]));var M=G(f(A[5]));for(f=0;f<B-1;f++){for(G=0;G<z-1;G++){for(d=0;d<L-1;d++){var I=L*(z*f+G)+d,N=L*(z*f+(G+1))+d,O=L*(z*(f+1)+G)+d;a[I]*D<a[L*(z*f+G)+(d+1)]*D&&
E[I]*C<E[N]*C&&F[I]*M<F[O]*M||(x=!0);if(x)break}if(x)break}if(x)break}x&&(m.warn("Encountered arbitrary coordinates! Unable to input data grid."),k=0,J=[],H=[],K=[]);return{xMin:n,yMin:q,zMin:y,xMax:c,yMax:p,zMax:w,Xs:J,Ys:H,Zs:K,len:k,fill:A}}function k(a,g){void 0===g&&(g=a.length);if(m.isTypedArray(a))return a.subarray(0,g);for(var b=[],h=0;h<g;h++)b[h]=+a[h];return b}var m=a("../../lib"),h=a("../../components/colorscale/calc");q.exports={calc:function(a,g){g._len=Math.min(g.u.length,g.v.length,
g.w.length,g.x.length,g.y.length,g.z.length);g._u=k(g.u,g._len);g._v=k(g.v,g._len);g._w=k(g.w,g._len);g._x=k(g.x,g._len);g._y=k(g.y,g._len);g._z=k(g.z,g._len);var b=n(g);g._gridFill=b.fill;g._Xs=b.Xs;g._Ys=b.Ys;g._Zs=b.Zs;g._len=b.len;var m=0;if(g.starts){var l=k(g.starts.x||[]);var f=k(g.starts.y||[]);var d=k(g.starts.z||[]);m=Math.min(l.length,f.length,d.length)}g._startsX=l||[];g._startsY=f||[];g._startsZ=d||[];var c=0,p=Infinity,q;for(q=0;q<g._len;q++){var v=g._u[q],w=g._v[q],y=g._w[q];v=Math.sqrt(v*
v+w*w+y*y);c=Math.max(c,v);p=Math.min(p,v)}h(a,g,{vals:[p,c],containerStr:"",cLetter:"c"});for(q=0;q<m;q++)a=l[q],b.xMax=Math.max(b.xMax,a),b.xMin=Math.min(b.xMin,a),a=f[q],b.yMax=Math.max(b.yMax,a),b.yMin=Math.min(b.yMin,a),a=d[q],b.zMax=Math.max(b.zMax,a),b.zMin=Math.min(b.zMin,a);g._slen=m;g._normMax=c;g._xbnds=[b.xMin,b.xMax];g._ybnds=[b.yMin,b.yMax];g._zbnds=[b.zMin,b.zMax]},filter:k,processGrid:n}},{"../../components/colorscale/calc":599,"../../lib":716}],1227:[function(a,q,p){function n(a,
b){this.scene=a;this.uid=b;this.data=this.mesh=null}function k(a){var b=a.length;return 2<b?a.slice(1,b-1):2===b?[(a[0]+a[1])/2]:a}function m(a){var b=a.length;return 1===b?[.5,.5]:[a[1]-a[0],a[b-1]-a[b-2]]}function h(a,g){function c(a,b){var c=h[b],f=n[d[b]];return e.simpleMap(a,function(a){return c.d2l(a)*f})}var h=a.fullSceneLayout,n=a.dataScale,p=g._len;a={};a.vectors=f(c(g._u,"xaxis"),c(g._v,"yaxis"),c(g._w,"zaxis"),p);if(!p)return{positions:[],cells:[]};var r=c(g._Xs,"xaxis"),q=c(g._Ys,"yaxis");
p=c(g._Zs,"zaxis");a.meshgrid=[r,q,p];a.gridFill=g._gridFill;if(g._slen)a.startingPositions=f(c(g._startsX,"xaxis"),c(g._startsY,"yaxis"),c(g._startsZ,"zaxis"));else{for(var x=q[0],C=k(r),B=k(p),D=Array(C.length*B.length),G=0,E=0;E<C.length;E++)for(var F=0;F<B.length;F++)D[G++]=[C[E],x,B[F]];a.startingPositions=D}a.colormap=t(g);a.tubeSize=g.sizeref;a.maxLength=g.maxdisplayed;x=c(g._xbnds,"xaxis");C=c(g._ybnds,"yaxis");B=c(g._zbnds,"zaxis");r=m(r);q=m(q);p=m(p);a=b(a,[[x[0]-r[0],C[0]-q[0],B[0]-p[0]],
[x[1]+r[1],C[1]+q[1],B[1]+p[1]]]);p=l(g);a.vertexIntensityBounds=[p.min/g._normMax,p.max/g._normMax];p=g.lightposition;a.lightPosition=[p.x,p.y,p.z];a.ambient=g.lighting.ambient;a.diffuse=g.lighting.diffuse;a.specular=g.lighting.specular;a.roughness=g.lighting.roughness;a.fresnel=g.lighting.fresnel;a.opacity=g.opacity;g._pad=a.tubeScale*g.sizeref*2;return a}var b=a("gl-streamtube3d"),g=b.createTubeMesh,e=a("../../lib"),t=a("../../lib/gl_format_color").parseColorScale,l=a("../../components/colorscale").extractOpts,
f=a("../../plots/gl3d/zip3"),d={xaxis:0,yaxis:1,zaxis:2};a=n.prototype;a.handlePick=function(a){function b(a,b){var f=e[d[b]];return c[b].l2c(a)/f}var c=this.scene.fullSceneLayout,e=this.scene.dataScale;if(a.object===this.mesh){var f=a.data.position,g=a.data.velocity;a.traceCoordinate=[b(f[0],"xaxis"),b(f[1],"yaxis"),b(f[2],"zaxis"),b(g[0],"xaxis"),b(g[1],"yaxis"),b(g[2],"zaxis"),a.data.intensity*this.data._normMax,a.data.divergence];a.textLabel=this.data.hovertext||this.data.text;return!0}};a.update=
function(a){this.data=a;a=h(this.scene,a);this.mesh.update(a)};a.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};q.exports=function(a,b){var c=a.glplot.gl,d=h(a,b);c=g(c,d);d=new n(a,b.uid);d.mesh=c;d.data=b;c._trace=d;a.glplot.add(c);return d}},{"../../components/colorscale":603,"../../lib":716,"../../lib/gl_format_color":713,"../../plots/gl3d/zip3":815,"gl-streamtube3d":315}],1228:[function(a,q,p){var n=a("../../lib"),k=a("../../components/colorscale/defaults"),m=a("./attributes");
q.exports=function(a,b,g,e){function h(c,d){return n.coerce(a,b,m,c,d)}g=h("u");var l=h("v"),f=h("w"),d=h("x"),c=h("y"),p=h("z");g&&g.length&&l&&l.length&&f&&f.length&&d&&d.length&&c&&c.length&&p&&p.length?(h("starts.x"),h("starts.y"),h("starts.z"),h("maxdisplayed"),h("sizeref"),h("lighting.ambient"),h("lighting.diffuse"),h("lighting.specular"),h("lighting.roughness"),h("lighting.fresnel"),h("lightposition.x"),h("lightposition.y"),h("lightposition.z"),k(a,b,e,h,{prefix:"",cLetter:"c"}),h("text"),
h("hovertext"),h("hovertemplate"),b._length=null):b.visible=!1}},{"../../components/colorscale/defaults":601,"../../lib":716,"./attributes":1225}],1229:[function(a,q,p){q.exports={moduleType:"trace",name:"streamtube",basePlotModule:a("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:a("./calc").calc,plot:a("./convert"),eventData:function(a,k){a.tubex=a.x;a.tubey=a.y;a.tubez=a.z;a.tubeu=k.traceCoordinate[3];
a.tubev=k.traceCoordinate[4];a.tubew=k.traceCoordinate[5];a.norm=k.traceCoordinate[6];a.divergence=k.traceCoordinate[7];delete a.x;delete a.y;delete a.z;return a},meta:{}}},{"../../plots/gl3d":804,"./attributes":1225,"./calc":1226,"./convert":1227,"./defaults":1228}],1230:[function(a,q,p){p=a("../../plots/attributes");var n=a("../../plots/template_attributes").hovertemplateAttrs,k=a("../../plots/template_attributes").texttemplateAttrs,m=a("../../components/colorscale/attributes"),h=a("../../plots/domain").attributes,
b=a("../pie/attributes"),g=a("./constants");a=a("../../lib/extend").extendFlat;q.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",
dflt:-1},marker:a({colors:{valType:"data_array",editType:"calc"},line:{color:a({},b.marker.line.color,{dflt:null}),width:a({},b.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},m("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:b.text,textinfo:{valType:"flaglist",flags:"label;text;value;current path;percent root;percent entry;percent parent".split(";"),extras:["none"],editType:"plot"},texttemplate:k({editType:"plot"},
{keys:g.eventDataKeys.concat(["label","value"])}),hovertext:b.hovertext,hoverinfo:a({},p.hoverinfo,{flags:"label;text;value;name;current path;percent root;percent entry;percent parent".split(";"),dflt:"label+text+value+name"}),hovertemplate:n({},{keys:g.eventDataKeys}),textfont:b.textfont,insidetextorientation:b.insidetextorientation,insidetextfont:b.insidetextfont,outsidetextfont:a({},b.outsidetextfont,{}),domain:h({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":598,
"../../lib/extend":707,"../../plots/attributes":761,"../../plots/domain":789,"../../plots/template_attributes":840,"../pie/attributes":1093,"./constants":1233}],1231:[function(a,q,p){var n=a("../../plots/plots");p.name="sunburst";p.plot=function(a,m,h,b){n.plotBasePlot(p.name,a,m,h,b)};p.clean=function(a,m,h,b){n.cleanBasePlot(p.name,a,m,h,b)}},{"../../plots/plots":825}],1232:[function(a,q,p){function n(a,b,d){var c=0,e=a.children;if(e){for(var f=e.length,g=0;g<f;g++)c+=n(e[g],b,d);d.branches&&c++}else d.leaves&&
c++;a.value=a.data.data.value=c;b._values||(b._values=[]);return b._values[a.data.data.i]=c}var k=a("d3-hierarchy"),m=a("fast-isnumeric"),h=a("../../lib"),b=a("../../components/colorscale").makeColorScaleFuncFromTrace,g=a("../pie/calc").makePullColorFn,e=a("../pie/calc").generateExtendedColors,t=a("../../components/colorscale").calc,l=a("../../constants/numerical").ALMOST_EQUAL,f={},d={};p.calc=function(a,d){var c=a._fullLayout,e=d.ids,f=h.isArrayOrTypedArray(e),p=d.labels,r=d.parents,q=d.values,
x=h.isArrayOrTypedArray(q),C=[],B={},D={},G=function(a,b){B[a]?B[a].push(b):B[a]=[b];D[b]=1},E=function(a){return a||"number"===typeof a},F=function(a){return!x||m(q[a])&&0<=q[a]};if(f){f=Math.min(e.length,r.length);var L=function(a){return E(e[a])&&F(a)};var J=function(a){return String(e[a])}}else f=Math.min(p.length,r.length),L=function(a){return E(p[a])&&F(a)},J=function(a){return String(p[a])};x&&(f=Math.min(f,q.length));for(var H=0;H<f;H++)if(L(H)){var K=J(H),M=E(r[H])?String(r[H]):"",I={i:H,
id:K,pid:M,label:E(p[H])?String(p[H]):""};x&&(I.v=+q[H]);C.push(I);G(M,K)}if(!B[""]){r=[];for(var N in B)D[N]||r.push(N);if(1===r.length)N=r[0],C.unshift({hasImpliedRoot:!0,id:N,pid:"",label:N});else return h.warn("Multiple implied roots, cannot build "+d.type+" hierarchy.")}else if(1<B[""].length){N=h.randstr();for(r=0;r<C.length;r++)""===C[r].pid&&(C[r].pid=N);C.unshift({hasMultipleRoots:!0,id:N,pid:"",label:""})}try{var O=k.stratify().id(function(a){return a.id}).parentId(function(a){return a.pid})(C)}catch(Y){return h.warn("Failed to build "+
d.type+" hierarchy. Error: "+Y.message)}O=k.hierarchy(O);var P=!1;if(x)switch(d.branchvalues){case "remainder":O.sum(function(a){return a.data.v});break;case "total":O.each(function(a){var b=a.data.data,c=b.v;if(a.children){var d=a.children.reduce(function(a,b){return a+b.data.data.v},0);if(b.hasImpliedRoot||b.hasMultipleRoots)c=d;if(c<d*l)return P=!0,h.warn(["Total value for node",a.data.data.id,"is smaller than the sum of its children. \nparent value \x3d",c,"\nchildren sum \x3d",d].join(" "))}a.value=
c})}else n(O,d,{branches:-1!==d.count.indexOf("branches"),leaves:-1!==d.count.indexOf("leaves")});if(!P){O.sort(function(a,b){return b.value-a.value});var Q=d.marker.colors||[];N=!!Q.length;if(d._hasColorscale){N||(Q=x?d.values:d._values);t(a,d,{vals:Q,containerStr:"marker",cLetter:"c"});var T=b(d.marker)}else var V=g(c["_"+d.type+"colormap"]);O.each(function(a){a=a.data.data;a.color=d._hasColorscale?T(Q[a.i]):V(Q[a.i],a.id)});C[0].hierarchy=O;return C}};p._runCrossTraceCalc=function(a,b){function c(a){var b=
a.data.data,c=b.id;!1===b.color&&(k[c]?b.color=k[c]:a.parent?a.parent.parent?b.color=a.parent.data.data.color:(k[c]=b.color=h[l%h.length],l++):b.color="rgba(0,0,0,0)")}var g=b._fullLayout;b=b.calcdata;var h=g[a+"colorway"],k=g["_"+a+"colormap"];g["extend"+a+"colors"]&&(h=e(h,"treemap"===a?d:f));var l=0;for(g=0;g<b.length;g++){var m=b[g][0];m.trace.type===a&&m.hierarchy&&m.hierarchy.each(c)}};p.crossTraceCalc=function(a){return p._runCrossTraceCalc("sunburst",a)}},{"../../components/colorscale":603,
"../../constants/numerical":692,"../../lib":716,"../pie/calc":1095,"d3-hierarchy":159,"fast-isnumeric":228}],1233:[function(a,q,p){q.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:"currentPath root entry percentRoot percentEntry percentParent".split(" ")}},{}],1234:[function(a,q,p){var n=a("../../lib"),k=a("./attributes"),m=a("../../plots/domain").defaults,h=a("../bar/defaults").handleText;a=a("../../components/colorscale");var b=a.hasColorscale,g=a.handleDefaults;
q.exports=function(a,p,l,f){function d(b,c){return n.coerce(a,p,k,b,c)}l=d("labels");var c=d("parents");l&&l.length&&c&&c.length?((l=d("values"))&&l.length?d("branchvalues"):d("count"),d("level"),d("maxdepth"),d("marker.line.width")&&d("marker.line.color",f.paper_bgcolor),d("marker.colors"),(l=p._hasColorscale=b(a,"marker","colors")||(a.marker||{}).coloraxis)&&g(a,p,f,d,{prefix:"marker.",cLetter:"c"}),d("leaf.opacity",l?1:.7),l=d("text"),d("texttemplate"),p.texttemplate||d("textinfo",Array.isArray(l)?
"text+label":"label"),d("hovertext"),d("hovertemplate"),h(a,p,f,d,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),d("insidetextorientation"),m(p,f,d),p._length=null):p.visible=!1}},{"../../components/colorscale":603,"../../lib":716,"../../plots/domain":789,"../bar/defaults":859,"./attributes":1230}],1235:[function(a,q,p){function n(a,b,c){for(var d=a.data.data,e={curveNumber:b.index,pointNumber:d.i,data:b._input,
fullData:b},f=0;f<c.length;f++){var g=c[f];g in a&&(e[g]=a[g])}"parentString"in a&&!t.isHierarchyRoot(a)&&(e.parent=a.parentString);h(e,b,d.i);return e}var k=a("d3"),m=a("../../registry"),h=a("../../components/fx/helpers").appendArrayPointValue,b=a("../../components/fx"),g=a("../../lib"),e=a("../../lib/events"),t=a("./helpers"),l=a("../pie/helpers").formatPieValue;q.exports=function(a,d,c,h,p){var f=h[0],r=f.trace,q=f.hierarchy,u="sunburst"===r.type,z="treemap"===r.type;"_hasHoverLabel"in r||(r._hasHoverLabel=
!1);"_hasHoverEvent"in r||(r._hasHoverEvent=!1);a.on("mouseover",function(e){var h=c._fullLayout;if(!c._dragging&&!1!==h.hovermode){var m=c._fullData[r.index],v=e.data.data,x=v.i,w=t.isHierarchyRoot(e),A=t.getParent(q,e),y=t.getValue(e),J=function(a){return g.castOption(m,x,a)},H=J("hovertemplate"),K=b.castHoverinfo(m,h,x),M=h.separators;if(H||K&&"none"!==K&&"skip"!==K){if(u){var I=f.cx+e.pxmid[0]*(1-e.rInscribed);var N=f.cy+e.pxmid[1]*(1-e.rInscribed)}z&&(I=e._hoverX,N=e._hoverY);var O={},P=[],Q=
[],T=function(a){return-1!==P.indexOf(a)};K&&(P="all"===K?m._module.attributes.hoverinfo.flags:K.split("+"));O.label=v.label;T("label")&&O.label&&Q.push(O.label);v.hasOwnProperty("v")&&(O.value=v.v,O.valueLabel=l(O.value,M),T("value")&&Q.push(O.valueLabel));O.currentPath=e.currentPath=t.getPath(e.data);T("current path")&&!w&&Q.push(O.currentPath);var V=[];K=function(){-1===V.indexOf(Y)&&(Q.push(Y),V.push(Y))};O.percentParent=e.percentParent=y/t.getValue(A);O.parent=e.parentString=t.getPtLabel(A);
if(T("percent parent")){var Y=t.formatPercent(O.percentParent,M)+" of "+O.parent;K()}O.percentEntry=e.percentEntry=y/t.getValue(d);O.entry=e.entry=t.getPtLabel(d);!T("percent entry")||w||e.onPathbar||(Y=t.formatPercent(O.percentEntry,M)+" of "+O.entry,K());O.percentRoot=e.percentRoot=y/t.getValue(q);O.root=e.root=t.getPtLabel(q);T("percent root")&&!w&&(Y=t.formatPercent(O.percentRoot,M)+" of "+O.root,K());O.text=J("hovertext")||J("text");T("text")&&(Y=O.text,g.isValidTextValue(Y)&&Q.push(Y));v={trace:m,
y:N,text:Q.join("\x3cbr\x3e"),name:H||T("name")?m.name:void 0,color:J("hoverlabel.bgcolor")||v.color,borderColor:J("hoverlabel.bordercolor"),fontFamily:J("hoverlabel.font.family"),fontSize:J("hoverlabel.font.size"),fontColor:J("hoverlabel.font.color"),nameLength:J("hoverlabel.namelength"),textAlign:J("hoverlabel.align"),hovertemplate:H,hovertemplateLabels:O,eventData:[n(e,m,p.eventDataKeys)]};u&&(v.x0=I-e.rInscribed*e.rpx1,v.x1=I+e.rInscribed*e.rpx1,v.idealAlign=0>e.pxmid[0]?"left":"right");z&&(v.x=
I,v.idealAlign=0>I?"left":"right");b.loneHover(v,{container:h._hoverlayer.node(),outerContainer:h._paper.node(),gd:c});r._hasHoverLabel=!0}z&&(h=a.select("path.surface"),p.styleOne(h,e,m,{hovered:!0}));r._hasHoverEvent=!0;c.emit("plotly_hover",{points:[n(e,m,p.eventDataKeys)],event:k.event})}});a.on("mouseout",function(d){var e=c._fullLayout,f=c._fullData[r.index],g=k.select(this).datum();r._hasHoverEvent&&(d.originalEvent=k.event,c.emit("plotly_unhover",{points:[n(g,f,p.eventDataKeys)],event:k.event}),
r._hasHoverEvent=!1);r._hasHoverLabel&&(b.loneUnhover(e._hoverlayer.node()),r._hasHoverLabel=!1);z&&(d=a.select("path.surface"),p.styleOne(d,g,f,{hovered:!1}))});a.on("click",function(a){var d=c._fullLayout,f=c._fullData[r.index],g=u&&(t.isHierarchyRoot(a)||t.isLeaf(a)),h=t.getPtId(a);h=t.isEntry(a)?t.findEntryWithChild(q,h):t.findEntryWithLevel(q,h);h=t.getPtId(h);var l={points:[n(a,f,p.eventDataKeys)],event:k.event};g||(l.nextLevel=h);l=e.triggerHandler(c,"plotly_"+r.type+"click",l);!1!==l&&d.hovermode&&
(c._hoverdata=[n(a,f,p.eventDataKeys)],b.click(c,k.event));g||!1===l||c._dragging||c._transitioning||(m.call("_storeDirectGUIEdit",f,d._tracePreGUI[f.uid],{level:f.level}),a={data:[{level:h}],traces:[r.index]},f={frame:{redraw:!1,duration:p.transitionTime},transition:{duration:p.transitionTime,easing:p.transitionEasing},mode:"immediate",fromcurrent:!0},b.loneUnhover(d._hoverlayer.node()),m.call("animate",c,a,f))})}},{"../../components/fx":629,"../../components/fx/helpers":626,"../../lib":716,"../../lib/events":706,
"../../registry":845,"../pie/helpers":1098,"./helpers":1236,d3:165}],1236:[function(a,q,p){var n=a("../../lib"),k=a("../../components/color"),m=a("../../lib/setcursor"),h=a("../pie/helpers");p.findEntryWithLevel=function(a,g){var b;g&&a.eachAfter(function(a){if(p.getPtId(a)===g)return b=a.copy()});return b||a};p.findEntryWithChild=function(a,g){var b;a.eachAfter(function(a){for(var e=a.children||[],f=0;f<e.length;f++)if(p.getPtId(e[f])===g)return b=a.copy()});return b||a};p.isEntry=function(a){return!a.parent};
p.isLeaf=function(a){return!a.children};p.getPtId=function(a){return a.data.data.id};p.getPtLabel=function(a){return a.data.data.label};p.getValue=function(a){return a.value};p.isHierarchyRoot=function(a){return""===a.data.data.pid};p.setSliceCursor=function(a,g,e){g=e.isTransitioning;g||(g=a.datum(),g=e.hideOnRoot&&p.isHierarchyRoot(g)||e.hideOnLeaves&&p.isLeaf(g));m(a,g?null:"pointer")};p.getInsideTextFontKey=function(a,g,e,h,k){e=e.data.data.i;return n.castOption(g,e,((k||{}).onPathbar?"pathbar.textfont":
"insidetextfont")+"."+a)||n.castOption(g,e,"textfont."+a)||h.size};p.getOutsideTextFontKey=function(a,g,e,h){e=e.data.data.i;return n.castOption(g,e,"outsidetextfont."+a)||n.castOption(g,e,"textfont."+a)||h.size};p.isOutsideText=function(a,g){return!a._hasColorscale&&p.isHierarchyRoot(g)};p.determineTextFont=function(a,g,e,h){if(p.isOutsideText(a,g))a={color:p.getOutsideTextFontKey("color",a,g,e),family:p.getOutsideTextFontKey("family",a,g,e),size:p.getOutsideTextFontKey("size",a,g,e)};else{var b=
g.data.data,f=b.i,d=n.castOption(a,f,((h||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");!d&&a._input.textfont&&(d=n.castOption(a._input,f,"textfont.color"));a={color:d||k.contrast(b.color),family:p.getInsideTextFontKey("family",a,g,e,h),size:p.getInsideTextFontKey("size",a,g,e,h)}}return a};p.hasTransition=function(a){return!!(a&&0<a.duration)};p.getMaxDepth=function(a){return 0<=a.maxdepth?a.maxdepth:Infinity};p.isHeader=function(a,g){return!(p.isLeaf(a)||a.depth===g._maxDepth-1)};
p.getParent=function(a,g){return p.findEntryWithLevel(a,g.data.data.pid)};p.listPath=function(a,g){a=a.parent;if(!a)return[];var b=g?[a.data[g]]:[a];return p.listPath(a,g).concat(b)};p.getPath=function(a){return p.listPath(a,"label").join("/")+"/"};p.formatValue=h.formatPieValue;p.formatPercent=function(a,g){var b=n.formatPercent(a,0);"0%"===b&&(b=h.formatPiePercent(a,g));return b}},{"../../components/color":591,"../../lib":716,"../../lib/setcursor":736,"../pie/helpers":1098}],1237:[function(a,q,
p){q.exports={moduleType:"trace",name:"sunburst",basePlotModule:a("./base_plot"),categories:[],animatable:!0,attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyDefaults:a("./defaults"),supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc").calc,crossTraceCalc:a("./calc").crossTraceCalc,plot:a("./plot").plot,style:a("./style").style,colorbar:a("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1137,"./attributes":1230,"./base_plot":1231,"./calc":1232,
"./defaults":1234,"./layout_attributes":1238,"./layout_defaults":1239,"./plot":1240,"./style":1241}],1238:[function(a,q,p){q.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1239:[function(a,q,p){var n=a("../../lib"),k=a("./layout_attributes");q.exports=function(a,h){n.coerce(a,h,k,"sunburstcolorway",h.colorway);n.coerce(a,h,k,"extendsunburstcolors",void 0)}},{"../../lib":716,"./layout_attributes":1238}],1240:[function(a,
q,p){function n(a,d,g,n){function q(a){var c=A.getPtId(a),d=Y[c],e=Y[A.getPtId(I)];if(e){var f=a.x1>e.x1?2*Math.PI:0;a=a.rpx1<e.rpx1?{rpx0:0,rpx1:0}:{x0:f,x1:f}}else{var g,h=A.getPtId(a.parent);H.each(function(a){if(A.getPtId(a)===h)return g=a});a=g.children;var k;a.forEach(function(a,b){if(A.getPtId(a)===c)return k=b});a=a.length;e=b.interpolate(g.x0,g.x1);a={rpx0:P,rpx1:P,x0:e(k/a),x1:e((k+1)/a)}}return b.interpolate(d,a)}function v(a){var c=Y[A.getPtId(a)],d={x0:a.x0,x1:a.x1,rpx0:a.rpx0,rpx1:a.rpx1};
c||(V?a.parent?la?(a=a.x1>la?2*Math.PI:0,c={x0:a,x1:a}):(c={rpx0:P,rpx1:P},t.extendFlat(c,z(a))):c={rpx0:0,rpx1:0}:c={x0:0,x1:0});return b.interpolate(c,d)}function x(a){var c=Y[A.getPtId(a)],d=a.transform;c||(c={rpx1:a.rpx1,transform:{textPosAngle:d.textPosAngle,scale:0,rotate:d.rotate,rCenter:d.rCenter,x:d.x,y:d.y}},V?a.parent?la?c.x0=c.x1=a.x1>la?2*Math.PI:0:t.extendFlat(c,z(a)):c.x0=c.x1=0:c.x0=c.x1=0);var e=b.interpolate(c.transform.textPosAngle,a.transform.textPosAngle),g=b.interpolate(c.rpx1,
a.rpx1),h=b.interpolate(c.x0,a.x0),k=b.interpolate(c.x1,a.x1),l=b.interpolate(c.transform.scale,d.scale),m=b.interpolate(c.transform.rotate,d.rotate),n=0===d.rCenter?3:0===c.transform.rCenter?1/3:1,p=b.interpolate(c.transform.rCenter,d.rCenter);return function(a){var b=g(a),c=h(a),r=k(a),q=p(Math.pow(a,n));c=U(b,(c+r)/2);r=e(a);b={pxmid:c,rpx1:b,transform:{textPosAngle:r,rCenter:q,x:d.x,y:d.y}};f(M.type,d,B);return{transform:{targetX:ea(b),targetY:fa(b),scale:l(a),rotate:m(a),rCenter:q}}}}function z(a){var c=
a.parent,d=Y[A.getPtId(c)],e={};d?(c=c.children,a=c.indexOf(a),c=c.length,d=b.interpolate(d.x0,d.x1),e.x0=d(a/c),e.x1=d(a/c)):e.x0=e.x1=0;return e}var B=a._fullLayout,C=!B.uniformtext.mode&&A.hasTransition(n),H=b.select(g).selectAll("g.slice"),K=d[0],M=K.trace,I=A.findEntryWithLevel(K.hierarchy,M.level);g=A.getMaxDepth(M);n=B._size;var N=M.domain,O=n.h*(N.y[1]-N.y[0]),P=.5*Math.min(n.w*(N.x[1]-N.x[0]),O),Q=K.cx=n.l+n.w*(N.x[1]+N.x[0])/2,T=K.cy=n.t+n.h*(1-N.y[0])-O/2;if(!I)return H.remove();var V=
null,Y={};C&&H.each(function(a){Y[A.getPtId(a)]={rpx0:a.rpx0,rpx1:a.rpx1,x0:a.x0,x1:a.x1,transform:a.transform};!V&&A.isEntry(a)&&(V=a)});n=k(I).descendants();N=I.height+1;var ca=0,Z=g;K.hasMultipleRoots&&A.isHierarchyRoot(I)&&(n=n.slice(1),--N,ca=1,Z+=1);n=n.filter(function(a){return a.y1<=Z});var R=Math.min(N,g),U=function(a,b){return[a*Math.cos(b),-a*Math.sin(b)]},X=function(a){return t.pathAnnulus(a.rpx0,a.rpx1,a.x0,a.x1,Q,T)},ea=function(a){return Q+h(a.rpx1,a.transform.textPosAngle)[0]*(a.transform.rCenter||
0)+(a.transform.x||0)},fa=function(a){return T+h(a.rpx1,a.transform.textPosAngle)[1]*(a.transform.rCenter||0)+(a.transform.y||0)};H=H.data(n,A.getPtId);H.enter().append("g").classed("slice",!0);C?H.exit().transition().each(function(){var a=b.select(this);a.select("path.surface").transition().attrTween("d",function(a){var b=q(a);return function(a){return X(b(a))}});a.select("g.slicetext").attr("opacity",0)}).remove():H.exit().remove();H.order();var la=null;if(C&&V){var da=A.getPtId(V);H.each(function(a){null===
la&&A.getPtId(a)===da&&(la=a.x1)})}g=H;C&&(g=g.transition().each("end",function(){var c=b.select(this);A.setSliceCursor(c,a,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})}));g.each(function(g){var h=b.select(this),k=t.ensureSingle(h,"path","surface",function(a){a.style("pointer-events","all")});g.rpx0=(g.y0-ca)/R*P;g.rpx1=(g.y1-ca)/R*P;g.xmid=(g.x0+g.x1)/2;g.pxmid=U(g.rpx1,g.xmid);g.midangle=-(g.xmid-Math.PI/2);g.startangle=-(g.x0-Math.PI/2);g.stopangle=-(g.x1-Math.PI/2);g.halfangle=.5*Math.min(t.angleDelta(g.x0,
g.x1)||Math.PI,Math.PI);g.ring=1-g.rpx0/g.rpx1;g.rInscribed=m(g,M);C?k.transition().attrTween("d",function(a){var b=v(a);return function(a){return X(b(a))}}):k.attr("d",X);h.call(w,I,a,d,{eventDataKeys:y.eventDataKeys,transitionTime:y.CLICK_TRANSITION_TIME,transitionEasing:y.CLICK_TRANSITION_EASING}).call(A.setSliceCursor,a,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:a._transitioning});k.call(u,g,M);h=t.ensureSingle(h,"g","slicetext");h=t.ensureSingle(h,"text","",function(a){a.attr("data-notex",
1)});var n=t.ensureUniformFontSize(a,A.determineTextFont(M,g,B.font));h.text(p.formatSliceLabel(g,I,M,d,B)).classed("slicetext",!0).attr("text-anchor","middle").call(e.font,n).call(l.convertToTspans,a);var q=e.bBox(h.node());g.transform=r(q,g,K);g.transform.targetX=ea(g);g.transform.targetY=fa(g);var z=function(a,b){a=a.transform;c(a,b);a.fontSize=n.size;f(M.type,a,B);return t.getTextTransform(a)};C?h.transition().attrTween("transform",function(a){var b=x(a);return function(a){return z(b(a),q)}}):
h.attr("transform",z(g,q))})}function k(a){return g.partition().size([2*Math.PI,a.height+1])(a)}function m(a){return 0===a.rpx0&&t.isFullCircle([a.x0,a.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(a.halfangle)),a.ring/2))}function h(a,b){return[a*Math.sin(b),-a*Math.cos(b)]}var b=a("d3"),g=a("d3-hierarchy"),e=a("../../components/drawing"),t=a("../../lib"),l=a("../../lib/svg_text_utils");q=a("../bar/uniform_text");var f=q.recordMinTextSize,d=q.clearMinTextSize;q=a("../pie/plot");var c=q.computeTransform,
r=q.transformInsideText,u=a("./style").styleOne,v=a("../bar/style").resizeText,w=a("./fx"),y=a("./constants"),A=a("./helpers");p.plot=function(a,c,e,f){var g=a._fullLayout,h=g._sunburstlayer,k,l=!e,m=!g.uniformtext.mode&&A.hasTransition(e);d("sunburst",g);c=h.selectAll("g.trace.sunburst").data(c,function(a){return a[0].trace.uid});c.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round");c.order();m?(f&&(k=f()),b.transition().duration(e.duration).ease(e.easing).each("end",
function(){k&&k()}).each("interrupt",function(){k&&k()}).each(function(){h.selectAll("g.trace").each(function(b){n(a,b,this,e)})})):(c.each(function(b){n(a,b,this,e)}),g.uniformtext.mode&&v(a,g._sunburstlayer.selectAll(".trace"),"sunburst"));l&&c.exit().remove()};p.formatSliceLabel=function(a,b,c,d,e){var f=c.texttemplate,g=c.textinfo;if(!(f||g&&"none"!==g))return"";var h=e.separators,k=a.data.data;d=d[0].hierarchy;var l=A.isHierarchyRoot(a),m=A.getParent(d,a),n=A.getValue(a);if(!f){var p=g.split("+");
e=function(a){return-1!==p.indexOf(a)};var r=[];e("label")&&k.label&&r.push(k.label);k.hasOwnProperty("v")&&e("value")&&r.push(A.formatValue(k.v,h));if(!l){e("current path")&&r.push(A.getPath(a.data));a=0;e("percent parent")&&a++;e("percent entry")&&a++;e("percent root")&&a++;var q=1<a;if(a){a=function(a){v=A.formatPercent(u,h);q&&(v+=" of "+a);r.push(v)};if(e("percent parent")&&!l){var u=n/A.getValue(m);a("parent")}e("percent entry")&&(u=n/A.getValue(b),a("entry"));e("percent root")&&(u=n/A.getValue(d),
a("root"))}}if(e("text")){var v=t.castOption(c,k.i,"text");t.isValidTextValue(v)&&r.push(v)}return r.join("\x3cbr\x3e")}f=t.castOption(c,k.i,"texttemplate");if(!f)return"";g={};k.label&&(g.label=k.label);k.hasOwnProperty("v")&&(g.value=k.v,g.valueLabel=A.formatValue(k.v,h));g.currentPath=A.getPath(a.data);l||(g.percentParent=n/A.getValue(m),g.percentParentLabel=A.formatPercent(g.percentParent,h),g.parent=A.getPtLabel(m));g.percentEntry=n/A.getValue(b);g.percentEntryLabel=A.formatPercent(g.percentEntry,
h);g.entry=A.getPtLabel(b);g.percentRoot=n/A.getValue(d);g.percentRootLabel=A.formatPercent(g.percentRoot,h);g.root=A.getPtLabel(d);k.hasOwnProperty("color")&&(g.color=k.color);b=t.castOption(c,k.i,"text");if(t.isValidTextValue(b)||""===b)g.text=b;g.customdata=t.castOption(c,k.i,"customdata");return t.texttemplateString(f,g,e._d3locale,g,c._meta||{})}},{"../../components/drawing":612,"../../lib":716,"../../lib/svg_text_utils":740,"../bar/style":869,"../bar/uniform_text":871,"../pie/plot":1102,"./constants":1233,
"./fx":1235,"./helpers":1236,"./style":1241,d3:165,"d3-hierarchy":159}],1241:[function(a,q,p){function n(a,b,k){var e=b.data.data;b=!b.children;var f=e.i,d=h.castOption(k,f,"marker.line.color")||m.defaultLine;f=h.castOption(k,f,"marker.line.width")||0;a.style("stroke-width",f).call(m.fill,e.color).call(m.stroke,d).style("opacity",b?k.leaf.opacity:null)}var k=a("d3"),m=a("../../components/color"),h=a("../../lib"),b=a("../bar/uniform_text").resizeText;q.exports={style:function(a){var e=a._fullLayout._sunburstlayer.selectAll(".trace");
b(a,e,"sunburst");e.each(function(a){var b=k.select(this),e=a[0].trace;b.style("opacity",e.opacity);b.selectAll("path.surface").each(function(a){k.select(this).call(n,a,e)})})},styleOne:n}},{"../../components/color":591,"../../lib":716,"../bar/uniform_text":871,d3:165}],1242:[function(a,q,p){function n(a){return{valType:"boolean",dflt:!1}}function k(a){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",
dflt:null,min:0,editType:"plot"},project:{x:n("x"),y:n("y"),z:n("z")},color:{valType:"color",dflt:m.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:m.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var m=a("../../components/color");p=a("../../components/colorscale/attributes");var h=a("../../plots/template_attributes").hovertemplateAttrs,b=a("../../plots/attributes"),
g=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;q=q.exports=a(g({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:h(),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},p("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:k("x"),y:k("y"),z:k("z")},
hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1E5,max:1E5,dflt:10},y:{valType:"number",min:-1E5,max:1E5,dflt:1E4},z:{valType:"number",min:-1E5,max:1E5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},_deprecated:{zauto:g({},
p.zauto,{}),zmin:g({},p.zmin,{}),zmax:g({},p.zmax,{})},hoverinfo:g({},b.hoverinfo),showlegend:g({},b.showlegend,{dflt:!1})}),"calc","nested");q.x.editType=q.y.editType=q.z.editType="calc+clearAxisTypes";q.transforms=void 0},{"../../components/color":591,"../../components/colorscale/attributes":598,"../../lib/extend":707,"../../plot_api/edit_types":747,"../../plots/attributes":761,"../../plots/template_attributes":840}],1243:[function(a,q,p){var n=a("../../components/colorscale/calc");q.exports=function(a,
m){m.surfacecolor?n(a,m,{vals:m.surfacecolor,containerStr:"",cLetter:"c"}):n(a,m,{vals:m.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":599}],1244:[function(a,q,p){function n(a,b,c){this.scene=a;this.uid=c;this.surface=b;this.data=null;this.showContour=[!1,!1,!1];this.contourStart=[null,null,null];this.contourEnd=[null,null,null];this.contourSize=[0,0,0];this.minValues=[Infinity,Infinity,Infinity];this.maxValues=[-Infinity,-Infinity,-Infinity];this.dataScaleY=this.dataScaleX=
1;this.refineData=!0;this.objectOffset=[0,0,0]}function k(a){var b=a[0].rgb;a=a[a.length-1].rgb;return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]}function m(a,b){if(a<b)return 0;for(var c=0;0===Math.floor(a%b);)a/=b,c++;return c}function h(a){for(var b=[],c=0;c<v.length;c++)b.push(m(a,v[c]));return b}var b=a("gl-surface3d"),g=a("ndarray"),e=a("ndarray-homography"),t=a("ndarray-fill"),l=a("../../lib").isArrayOrTypedArray,f=a("../../lib/gl_format_color").parseColorScale,d=a("../../lib/str2rgbarray"),
c=a("../../components/colorscale").extractOpts,r=a("../heatmap/interp2d"),u=a("../heatmap/find_empties");a=n.prototype;a.getXat=function(a,b,c,d){a=l(this.data.x)?l(this.data.x[0])?this.data.x[b][a]:this.data.x[a]:a;return void 0===c?a:d.d2l(a,0,c)};a.getYat=function(a,b,c,d){a=l(this.data.y)?l(this.data.y[0])?this.data.y[b][a]:this.data.y[b]:b;return void 0===c?a:d.d2l(a,0,c)};a.getZat=function(a,b,c,d){var e=this.data.z[b][a];null===e&&this.data.connectgaps&&this.data._interpolatedZ&&(e=this.data._interpolatedZ[b][a]);
return void 0===c?e:d.d2l(e,0,c)};a.handlePick=function(a){if(a.object===this.surface){var b=Math.max(Math.min(Math.round((a.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),c=Math.max(Math.min(Math.round((a.data.index[1]-1)/this.dataScaleY-1),this.data._ylength-1),0);a.index=[b,c];a.traceCoordinate=[this.getXat(b,c),this.getYat(b,c),this.getZat(b,c)];a.dataCoordinate=[this.getXat(b,c,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(b,c,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),
this.getZat(b,c,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var d=0;3>d;d++){var e=a.dataCoordinate[d];null!==e&&void 0!==e&&(a.dataCoordinate[d]*=this.scene.dataScale[d])}d=this.data.hovertext||this.data.text;Array.isArray(d)&&d[c]&&void 0!==d[c][b]?a.textLabel=d[c][b]:a.textLabel=d?d:"";a.data.dataCoordinate=a.dataCoordinate.slice();this.surface.highlight(a.data);this.scene.glplot.spikes.position=a.dataCoordinate;return!0}};var v=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,
67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,
839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,
1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,
2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];a.calcXnums=function(a){var b,c=[];for(b=1;b<a;b++){var d=this.getXat(b-1,0),e=this.getXat(b,0);c[b-1]=e!==
d&&void 0!==d&&null!==d&&void 0!==e&&null!==e?Math.abs(e-d):0}d=0;for(b=1;b<a;b++)d+=c[b-1];for(b=1;b<a;b++)c[b-1]=0===c[b-1]?1:Math.round(d/c[b-1]);return c};a.calcYnums=function(a){var b,c=[];for(b=1;b<a;b++){var d=this.getYat(0,b-1),e=this.getYat(0,b);c[b-1]=e!==d&&void 0!==d&&null!==d&&void 0!==e&&null!==e?Math.abs(e-d):0}d=0;for(b=1;b<a;b++)d+=c[b-1];for(b=1;b<a;b++)c[b-1]=0===c[b-1]?1:Math.round(d/c[b-1]);return c};p=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260];var w=p[9],y=p[13];a.estimateScale=
function(a,b){b=0===b?this.calcXnums(a):this.calcYnums(a);if(0===b.length)b=void 0;else{for(var c=1,d=0;d<b.length;d++){var e=b[d];if(1>c||1>e)c=void 0;else{c=h(c);e=h(e);for(var f=1,g=0;g<v.length;g++)f*=Math.pow(v[g],Math.max(c[g],e[g]));c=f}}b=c}for(d=1+b;d<w;)d*=2;for(;d>y;){d--;c=b=d;d=h(c);for(e=0;e<v.length;e++)if(0<d[e]){c=v[e];break}d=b/c;d++;d<w&&(d=y)}a=Math.round(d/a);return 1<a?a:1};a.refineCoords=function(a){var b=this.dataScaleX,c=this.dataScaleY,d=Math.floor(a[0].shape[0]*b+1)|0,f=
Math.floor(a[0].shape[1]*c+1)|0,h=1+a[0].shape[0]+1,k=1+a[0].shape[1]+1;h=g(new Float32Array(h*k),[h,k]);for(k=0;k<a.length;++k){this.surface.padField(h,a[k]);var l=g(new Float32Array(d*f),[d,f]);e(l,h,[b,0,0,0,c,0,0,0,1]);a[k]=l}};a.setContourLevels=function(){var a=[[],[],[]],b=[!1,!1,!1],c=!1,d,e;for(d=0;3>d;++d)if(this.showContour[d]&&(c=!0,0<this.contourSize[d]&&null!==this.contourStart[d]&&null!==this.contourEnd[d]&&this.contourEnd[d]>this.contourStart[d]))for(b[d]=!0,e=this.contourStart[d];e<
this.contourEnd[d];e+=this.contourSize[d]){var f=e*this.scene.dataScale[d];for(var g=a[d],h=!1,k=0;k<g.length;k++)if(f===g[k]){h=!0;break}!1===h&&g.push(f)}if(c){c=[[],[],[]];for(d=0;3>d;++d)this.showContour[d]&&(c[d]=b[d]?a[d]:this.scene.contourLevels[d]);this.surface.update({levels:c})}};a.update=function(a){var b=this.scene,e=b.fullSceneLayout,h=this.surface,l=a.opacity,m=f(a,l),n=b.dataScale,p=a.z[0].length,q=a._ylength;b=b.contourLevels;this.data=a;var v,w,A,K=[];for(v=0;3>v;v++)for(K[v]=[],
w=0;w<p;w++)K[v][w]=[];for(w=0;w<p;w++)for(A=0;A<q;A++)K[0][w][A]=this.getXat(w,A,a.xcalendar,e.xaxis),K[1][w][A]=this.getYat(w,A,a.ycalendar,e.yaxis),K[2][w][A]=this.getZat(w,A,a.zcalendar,e.zaxis);if(a.connectgaps)for(a._emptypoints=u(K[2]),r(K[2],a._emptypoints),a._interpolatedZ=[],w=0;w<p;w++)for(a._interpolatedZ[w]=[],A=0;A<q;A++)a._interpolatedZ[w][A]=K[2][w][A];for(v=0;3>v;v++)for(w=0;w<p;w++)for(A=0;A<q;A++)e=K[v][w][A],null===e||void 0===e?K[v][w][A]=NaN:e=K[v][w][A]*=n[v];for(v=0;3>v;v++)for(w=
0;w<p;w++)for(A=0;A<q;A++)e=K[v][w][A],null!==e&&void 0!==e&&(this.minValues[v]>e&&(this.minValues[v]=e),this.maxValues[v]<e&&(this.maxValues[v]=e));for(v=0;3>v;v++)this.objectOffset[v]=.5*(this.minValues[v]+this.maxValues[v]);for(v=0;3>v;v++)for(w=0;w<p;w++)for(A=0;A<q;A++)e=K[v][w][A],null!==e&&void 0!==e&&(K[v][w][A]-=this.objectOffset[v]);e=[g(new Float32Array(p*q),[p,q]),g(new Float32Array(p*q),[p,q]),g(new Float32Array(p*q),[p,q])];t(e[0],function(a,b){return K[0][a][b]});t(e[1],function(a,
b){return K[1][a][b]});t(e[2],function(a,b){return K[2][a][b]});K=[];w={colormap:m,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!a.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacity:a.opacity};v=c(a);w.intensityBounds=[v.min,v.max];a.surfacecolor?(v=g(new Float32Array(p*q),[p,q]),t(v,function(b,c){return a.surfacecolor[c][b]}),
e.push(v)):(w.intensityBounds[0]*=n[2],w.intensityBounds[1]*=n[2]);if(y<e[0].shape[0]||y<e[0].shape[1])this.refineData=!1;!0===this.refineData&&(this.dataScaleX=this.estimateScale(e[0].shape[0],0),this.dataScaleY=this.estimateScale(e[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(e));a.surfacecolor&&(w.intensity=e.pop());n=[!0,!0,!0];p=["x","y","z"];for(v=0;3>v;++v)q=a.contours[p[v]],n[v]=q.highlight,w.showContour[v]=q.show||q.highlight,w.showContour[v]&&(w.contourProject[v]=
[q.project.x,q.project.y,q.project.z],q.show?(this.showContour[v]=!0,w.levels[v]=b[v],h.highlightColor[v]=w.contourColor[v]=d(q.color),h.highlightTint[v]=q.usecolormap?w.contourTint[v]=0:w.contourTint[v]=1,w.contourWidth[v]=q.width,this.contourStart[v]=q.start,this.contourEnd[v]=q.end,this.contourSize[v]=q.size):(this.showContour[v]=!1,this.contourStart[v]=null,this.contourEnd[v]=null,this.contourSize[v]=0),q.highlight&&(w.dynamicColor[v]=d(q.highlightcolor),w.dynamicWidth[v]=q.highlightwidth));k(m)&&
(w.vertexColor=!0);w.objectOffset=this.objectOffset;w.coords=e;h.update(w);h.visible=a.visible;h.enableDynamic=n;h.enableHighlight=n;h.snapToData=!0;"lighting"in a&&(h.ambientLight=a.lighting.ambient,h.diffuseLight=a.lighting.diffuse,h.specularLight=a.lighting.specular,h.roughness=a.lighting.roughness,h.fresnel=a.lighting.fresnel);"lightposition"in a&&(h.lightPosition=[a.lightposition.x,a.lightposition.y,a.lightposition.z]);l&&1>l&&(h.supportsTransparency=!0)};a.dispose=function(){this.scene.glplot.remove(this.surface);
this.surface.dispose()};q.exports=function(a,c){var d=b({gl:a.glplot.gl}),e=new n(a,d,c.uid);d._trace=e;e.update(c);a.glplot.add(d);return e}},{"../../components/colorscale":603,"../../lib":716,"../../lib/gl_format_color":713,"../../lib/str2rgbarray":739,"../heatmap/find_empties":1005,"../heatmap/interp2d":1008,"gl-surface3d":318,ndarray:451,"ndarray-fill":441,"ndarray-homography":443}],1245:[function(a,q,p){function n(a,b,h){b in a&&!(h in a)&&(a[h]=a[b])}var k=a("../../registry"),m=a("../../lib"),
h=a("../../components/colorscale/defaults"),b=a("./attributes");q.exports=function(a,e,p,l){function f(c,d){return m.coerce(a,e,b,c,d)}p=f("x");var d=f("y");var c=f("z");if(!c||!c.length||p&&1>p.length||d&&1>d.length)e.visible=!1;else{e._xlength=Array.isArray(p)&&m.isArrayOrTypedArray(p[0])?c.length:c[0].length;e._ylength=c.length;k.getComponentMethod("calendars","handleTraceDefaults")(a,e,["x","y","z"],l);f("text");f("hovertext");f("hovertemplate");"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lightposition.x lightposition.y lightposition.z hidesurface connectgaps opacity".split(" ").forEach(function(a){f(a)});
c=f("surfacecolor");var g=["x","y","z"];for(p=0;3>p;++p){var q="contours."+g[p],t=f(q+".show"),w=f(q+".highlight");if(t||w)for(d=0;3>d;++d)f(q+".project."+g[d]);t&&(f(q+".color"),f(q+".width"),f(q+".usecolormap"));w&&(f(q+".highlightcolor"),f(q+".highlightwidth"));f(q+".start");f(q+".end");f(q+".size")}c||(n(a,"zmin","cmin"),n(a,"zmax","cmax"),n(a,"zauto","cauto"));h(a,e,l,f,{prefix:"",cLetter:"c"});e._length=null}}},{"../../components/colorscale/defaults":601,"../../lib":716,"../../registry":845,
"./attributes":1242}],1246:[function(a,q,p){q.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:a("./calc"),plot:a("./convert"),moduleType:"trace",name:"surface",basePlotModule:a("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":804,"./attributes":1242,"./calc":1243,"./convert":1244,"./defaults":1245}],1247:[function(a,q,p){p=a("../../components/annotations/attributes");var n=a("../../lib/extend").extendFlat,
k=a("../../plot_api/edit_types").overrideAll,m=a("../../plots/font_attributes"),h=a("../../plots/domain").attributes;a("../../constants/docs");(q.exports=k({domain:h({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:n({},
p.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:n({},m({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:n({},p.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",
arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:n({},m({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":574,"../../constants/docs":687,"../../lib/extend":707,"../../plot_api/edit_types":747,"../../plots/domain":789,"../../plots/font_attributes":790}],1248:[function(a,q,p){var n=a("../../plots/get_data").getModuleCalcData,k=a("./plot");p.name="table";p.plot=function(a){var h=n(a.calcdata,"table")[0];h.length&&k(a,
h)};p.clean=function(a,h,b,g){a=g._has&&g._has("table");h=h._has&&h._has("table");a&&!h&&g._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":799,"./plot":1255}],1249:[function(a,q,p){var n=a("../../lib/gup").wrap;q.exports=function(){return n({})}},{"../../lib/gup":714}],1250:[function(a,q,p){q.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"\x3cbr\x3e",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,
releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1E3,scrollbarHideDuration:1E3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",
columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1251:[function(a,q,p){function n(a){if(Array.isArray(a)){for(var b=0,c=0;c<a.length;c++)b=Math.max(b,n(a[c]));return b}return a}function k(a,b){return a+b}function m(a){a=
a.slice();var b=Infinity,c=0,d;for(d=0;d<a.length;d++)Array.isArray(a[d])||(a[d]=[a[d]]),b=Math.min(b,a[d].length),c=Math.max(c,a[d].length);if(b!==c)for(d=0;d<a.length;d++)(b=c-a[d].length)&&(a[d]=a[d].concat(h(b)));return a}function h(a){for(var b=Array(a),c=0;c<a;c++)b[c]="";return b}function b(a){return a.calcdata.columns.reduce(function(b,c){return c.xIndex<a.xIndex?b+c.columnWidth:b},0)}function g(a,b){return Object.keys(a).map(function(c){return f({},a[c],{auxiliaryBlocks:b})})}function e(a,
b){for(var c={},d,e=0,f=0,g=t(),h=0,k=0,l=0;l<a.length;l++)if(d=a[l],g.rows.push({rowIndex:l,rowHeight:d}),f+=d,f>=b||l===a.length-1)c[e]=g,g.key=k++,g.firstRowIndex=h,g.lastRowIndex=l,g=t(),e+=f,h=l+1,f=0;return c}function t(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}var l=a("./constants"),f=a("../../lib/extend").extendFlat,d=a("fast-isnumeric");q.exports=function(a,p){var c=m(p.cells.values),r=function(a){return a.slice(p.header.values.length,a.length)},q=m(p.header.values);q.length&&
!q[0].length&&(q[0]=[""],q=m(q));var t=q.concat(r(c).map(function(){return h((q[0]||[""]).length)})),A=p.domain,z=Math.floor(a._fullLayout._size.w*(A.x[1]-A.x[0])),x=Math.floor(a._fullLayout._size.h*(A.y[1]-A.y[0])),C=p.header.values.length?t[0].map(function(){return p.header.height}):[l.emptyHeaderHeight],B=c.length?c[0].map(function(){return p.cells.height}):[],D=C.reduce(k,0);B=e(B,x-D+l.uplift);C=e(C,D);C=g(C,[]);B=g(B,C);var G={},E=p._fullInput.columnorder.concat(r(c.map(function(a,b){return b}))),
F=t.map(function(a,b){a=Array.isArray(p.columnwidth)?p.columnwidth[Math.min(b,p.columnwidth.length-1)]:p.columnwidth;return d(a)?Number(a):1}),L=F.reduce(k,0);F=F.map(function(a){return a/L*z});r=Math.max(n(p.header.line.width),n(p.cells.line.width));var J={key:p.uid+a._context.staticPlot,translateX:A.x[0]*a._fullLayout._size.w,translateY:a._fullLayout._size.h*(1-A.y[1]),size:a._fullLayout._size,width:z,maxLineWidth:r,height:x,columnOrder:E,groupHeight:x,rowBlocks:B,headerRowBlocks:C,scrollY:0,cells:f({},
p.cells,{values:c}),headerCells:f({},p.header,{values:t}),gdColumns:t.map(function(a){return a[0]}),gdColumnsOriginalOrder:t.map(function(a){return a[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:t.map(function(a,c){G[a]=(G[a]||0)+1;return{key:a+"__"+G[a],label:a,specIndex:c,xIndex:E[c],xScale:b,x:void 0,calcdata:void 0,columnWidth:F[c]}})};J.columns.forEach(function(a){a.calcdata=J;a.x=b(a)});return J}},{"../../lib/extend":707,"./constants":1250,"fast-isnumeric":228}],
1252:[function(a,q,p){function n(a){var h=(a=a.rowBlocks[a.page])?a.rows[0].rowIndex:0;return[h,a?h+a.rows.length:0]}var k=a("../../lib/extend").extendFlat;p.splitToPanels=function(a){var h=[0,0],b=k({},a,{key:"header",type:"header",page:0,prevPages:h,currentRepaint:[null,null],dragHandle:!0,values:a.calcdata.headerCells.values[a.specIndex],rowBlocks:a.calcdata.headerRowBlocks,calcdata:k({},a.calcdata,{cells:a.calcdata.headerCells})}),g=k({},a,{key:"cells1",type:"cells",page:0,prevPages:h,currentRepaint:[null,
null],dragHandle:!1,values:a.calcdata.cells.values[a.specIndex],rowBlocks:a.calcdata.rowBlocks});a=k({},a,{key:"cells2",type:"cells",page:1,prevPages:h,currentRepaint:[null,null],dragHandle:!1,values:a.calcdata.cells.values[a.specIndex],rowBlocks:a.calcdata.rowBlocks});return[g,a,b]};p.splitToCells=function(a){var h=n(a);return(a.values||[]).slice(h[0],h[1]).map(function(b,g){var e="string"===typeof b&&b.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:g+e,key:h[0]+g,column:a,
calcdata:a.calcdata,page:a.page,rowBlocks:a.rowBlocks,value:b}})}},{"../../lib/extend":707}],1253:[function(a,q,p){function n(a,g){var b=a.header.values.length;a=(a.columnorder||[]).slice(0,b);var h=a.slice().sort(function(a,b){return a-b});a=a.map(function(a){return h.indexOf(a)});for(var k=a.length;k<b;k++)a.push(k);g("columnorder",a)}var k=a("../../lib"),m=a("./attributes"),h=a("../../plots/domain").defaults;q.exports=function(a,g,e,p){function b(b,d){return k.coerce(a,g,m,b,d)}h(g,p,b);b("columnwidth");
b("header.values");b("header.format");b("header.align");b("header.prefix");b("header.suffix");b("header.height");b("header.line.width");b("header.line.color");b("header.fill.color");k.coerceFont(b,"header.font",k.extendFlat({},p.font));n(g,b);b("cells.values");b("cells.format");b("cells.align");b("cells.prefix");b("cells.suffix");b("cells.height");b("cells.line.width");b("cells.line.color");b("cells.fill.color");k.coerceFont(b,"cells.font",k.extendFlat({},p.font));g._length=null}},{"../../lib":716,
"../../plots/domain":789,"./attributes":1247}],1254:[function(a,q,p){q.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),calc:a("./calc"),plot:a("./plot"),moduleType:"trace",name:"table",basePlotModule:a("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1247,"./base_plot":1248,"./calc":1249,"./defaults":1253,"./plot":1255}],1255:[function(a,q,p){function n(a){return Math.ceil(a.calcdata.maxLineWidth/2)}function k(a,b){return"clip"+a._fullLayout._uid+"_columnBoundaryClippath_"+
b.calcdata.key+"_"+b.specIndex}function m(a){return[].concat.apply([],a.map(function(a){return a})).map(function(a){return a.__data__})}function h(a,b,c){var d=a.selectAll("."+K.cn.scrollbarKit).data(I.repeat,I.keyFun);d.enter().append("g").classed(K.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision");d.each(function(a){var b=a.scrollbarState;var c=a.rowBlocks;c=J(c,c.length-1)+(c.length?H(c[c.length-1],Infinity):1);b.totalHeight=c;b.scrollableAreaHeight=a.groupHeight-z(a);b.currentlyVisibleHeight=
Math.min(b.totalHeight,b.scrollableAreaHeight);b.ratio=b.currentlyVisibleHeight/b.totalHeight;b.barLength=Math.max(b.ratio*b.currentlyVisibleHeight,K.goldenRatio*K.scrollbarWidth);b.barWiggleRoom=b.currentlyVisibleHeight-b.barLength;b.wiggleRoom=Math.max(0,b.totalHeight-b.scrollableAreaHeight);b.topY=0===b.barWiggleRoom?0:a.scrollY/b.wiggleRoom*b.barWiggleRoom;b.bottomY=b.topY+b.barLength;b.dragMultiplier=b.wiggleRoom/b.barWiggleRoom}).attr("transform",function(a){return"translate("+(a.width+K.scrollbarWidth/
2+K.scrollbarOffset)+" "+z(a)+")"});d=d.selectAll("."+K.cn.scrollbar).data(I.repeat,I.keyFun);d.enter().append("g").classed(K.cn.scrollbar,!0);var e=d.selectAll("."+K.cn.scrollbarSlider).data(I.repeat,I.keyFun);e.enter().append("g").classed(K.cn.scrollbarSlider,!0);e.attr("transform",function(a){return"translate(0 "+(a.scrollbarState.topY||0)+")"});e=e.selectAll("."+K.cn.scrollbarGlyph).data(I.repeat,I.keyFun);e.enter().append("line").classed(K.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",
K.scrollbarWidth).attr("stroke-linecap","round").attr("y1",K.scrollbarWidth/2);e.attr("y2",function(a){return a.scrollbarState.barLength-K.scrollbarWidth/2}).attr("stroke-opacity",function(a){return a.columnDragInProgress||!a.scrollbarState.barWiggleRoom||c?0:.4});e.transition().delay(0).duration(0);e.transition().delay(K.scrollbarHideDelay).duration(K.scrollbarHideDuration).attr("stroke-opacity",0);d=d.selectAll("."+K.cn.scrollbarCaptureZone).data(I.repeat,I.keyFun);d.enter().append("line").classed(K.cn.scrollbarCaptureZone,
!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",K.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(c){var d=M.event.y,e=this.getBoundingClientRect(),f=c.scrollbarState;d-=e.top;e=M.scale.linear().domain([0,f.scrollableAreaHeight]).range([0,f.totalHeight]).clamp(!0);f.topY<=d&&d<=f.bottomY||B(b,a,null,e(d-f.barLength/2))(c)}).call(M.behavior.drag().origin(function(a){M.event.stopPropagation();a.scrollbarState.scrollbarScrollInProgress=
!0;return a}).on("drag",B(b,a)).on("dragend",function(){}));d.attr("y2",function(a){return a.scrollbarState.scrollableAreaHeight});b._context.staticPlot&&(e.remove(),d.remove())}function b(a,b,h,k){h=h.selectAll("."+K.cn.columnCells).data(I.repeat,I.keyFun);h.enter().append("g").classed(K.cn.columnCells,!0);h.exit().remove();h=g(h);f(h);var m=e(h);c(m);m=l(h);m=t(m);d(m);r(m,b,k,a);L(h)}function g(a){a=a.selectAll("."+K.cn.columnCell).data(V.splitToCells,function(a){return a.keyWithinBlock});a.enter().append("g").classed(K.cn.columnCell,
!0);a.exit().remove();return a}function e(a){a=a.selectAll("."+K.cn.cellRect).data(I.repeat,function(a){return a.keyWithinBlock});a.enter().append("rect").classed(K.cn.cellRect,!0);return a}function t(a){a=a.selectAll("."+K.cn.cellText).data(I.repeat,function(a){return a.keyWithinBlock});a.enter().append("text").classed(K.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){M.event.stopPropagation()});return a}function l(a){a=a.selectAll("."+K.cn.cellTextHolder).data(I.repeat,
function(a){return a.keyWithinBlock});a.enter().append("g").classed(K.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision");return a}function f(a){a.each(function(a,b){var c=a.calcdata.cells.font,d=a.column.specIndex;c={size:v(c.size,d,b),color:v(c.color,d,b),family:v(c.family,d,b)};a.rowNumber=a.key;a.align=v(a.calcdata.cells.align,d,b);a.cellBorderWidth=v(a.calcdata.cells.line.width,d,b);a.font=c})}function d(a){a.each(function(a){N.font(M.select(this),a.font)})}function c(a){a.attr("width",
function(a){return a.column.columnWidth}).attr("stroke-width",function(a){return a.cellBorderWidth}).each(function(a){var b=M.select(this);Y.stroke(b,v(a.calcdata.cells.line.color,a.column.specIndex,a.rowNumber));Y.fill(b,v(a.calcdata.cells.fill.color,a.column.specIndex,a.rowNumber))})}function r(a,b,c,d){a.text(function(a){var b=a.column.specIndex,c=a.rowNumber,d=a.value,e="string"===typeof d,f=e&&d.match(/<br>/i),g=!e||f;a.mayHaveMarkup=e&&d.match(/[<&>]/);d="string"===typeof d&&d.match(K.latexCheck);
e=(a.latex=d)?"":v(a.calcdata.cells.prefix,b,c)||"";var h=d?"":v(a.calcdata.cells.suffix,b,c)||"";b=d?null:v(a.calcdata.cells.format,b,c)||null;b=e+(b?M.format(b)(a.value):a.value)+h;var k;a.wrappingNeeded=!a.wrapped&&!g&&!d&&(k=-1!==b.indexOf(K.wrapSplitCharacter));a.cellHeightMayIncrease=f||d||a.mayHaveMarkup||(void 0===k?-1!==b.indexOf(K.wrapSplitCharacter):k);a.needsConvertToTspans=a.mayHaveMarkup||a.wrappingNeeded||a.latex;a.wrappingNeeded?(f=(" "===K.wrapSplitCharacter?b.replace(/<a href=/ig,
"\x3ca_href\x3d"):b).split(K.wrapSplitCharacter),f=" "===K.wrapSplitCharacter?f.map(function(a){return a.replace(/<a_href=/ig,"\x3ca href\x3d")}):f,a.fragments=f.map(function(a){return{text:a,width:null}}),a.fragments.push({fragment:K.wrapSpacer,width:null}),a=f.join(K.lineBreaker)+K.lineBreaker+K.wrapSpacer):(delete a.fragments,a=b);return a}).attr("dy",function(a){return a.needsConvertToTspans?0:"0.75em"}).each(function(a){var e=M.select(this),f=a.wrappingNeeded?G:E;a.needsConvertToTspans?O.convertToTspans(e,
d,f(c,this,b,d,a)):M.select(this.parentNode).attr("transform",function(a){return"translate("+F(a)+" "+K.cellPad+")"}).attr("text-anchor",function(a){return{left:"start",center:"middle",right:"end"}[a.align]})})}function u(a,b,c){var d=b.gdColumnsOriginalOrder;b.gdColumns.sort(function(a,b){return c[d.indexOf(a)]-c[d.indexOf(b)]});b.columnorder=c;a.emit("plotly_restyle")}function v(a,b,c){return Array.isArray(a)?(a=a[Math.min(b,a.length-1)],Array.isArray(a)?a[Math.min(c,a.length-1)]:a):a}function w(a,
b,c){a.transition().ease(K.releaseTransitionEase).duration(K.releaseTransitionDuration).attr("transform","translate("+b.x+" "+c+")")}function y(a){return"cells"===a.type}function A(a){return"header"===a.type}function z(a){return(a.rowBlocks.length?a.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(a,b){return a+H(b,Infinity)},0)}function x(a,b,c){for(var d=[],e=0,f=0;f<a.length;f++){for(var g=a[f],h=g.rows,k=0,l=0;l<h.length;l++)k+=h[l].rowHeight;g.allRowsHeight=k;g=b;h=g+c;g<e+k&&h>e&&d.push(f);
e+=k}return d}function C(a,b,c){var d=m(b)[0];if(void 0!==d){var e=d.rowBlocks,f=d.calcdata,g=J(e,e.length),k=d.calcdata.groupHeight-z(d),l=f.scrollY=Math.max(0,Math.min(g-k,f.scrollY)),n=x(e,l,k);1===n.length&&(n[0]===e.length-1?n.unshift(n[0]-1):n.push(n[0]+1));n[0]%2&&n.reverse();b.each(function(a,b){a.page=n[b];a.scrollY=l});b.attr("transform",function(a){return"translate(0 "+(J(a.rowBlocks,a.page)-a.scrollY)+")"});a&&(D(a,c,b,n,d.prevPages,d,0),D(a,c,b,n,d.prevPages,d,1),h(c,a))}}function B(a,
b,c,d){return function(e){var f=e.calcdata?e.calcdata:e;e=b.filter(function(a){return f.key===a.key});var g=c||f.scrollbarState.dragMultiplier,h=f.scrollY;f.scrollY=void 0===d?f.scrollY+g*M.event.dy:d;g=e.selectAll("."+K.cn.yColumn).selectAll("."+K.cn.columnBlock).filter(y);C(a,g,e);return f.scrollY===h}}function D(a,c,d,e,f,g,h){e[h]!==f[h]&&(clearTimeout(g.currentRepaint[h]),g.currentRepaint[h]=setTimeout(function(){var g=d.filter(function(a,b){return b===h&&e[b]!==f[b]});b(a,c,g,d);f[h]=e[h]}))}
function G(a,b,c,d){return function(){var e=M.select(b.parentNode);e.each(function(a){var b=a.fragments;e.selectAll("tspan.line").each(function(a,c){b[c].width=this.getComputedTextLength()});var c=b[b.length-1].width,d=b.slice(0,-1),f=[],g=0,h=a.column.columnWidth-2*K.cellPad;for(a.value="";d.length;){var k=d.shift();var l=k.width+c;g+l>h&&(a.value+=f.join(K.wrapSpacer)+K.lineBreaker,f=[],g=0);f.push(k.text);g+=l}g&&(a.value+=f.join(K.wrapSpacer));a.wrapped=!0});e.selectAll("tspan.line").remove();
r(e.select("."+K.cn.cellText),c,a,d);M.select(b.parentNode.parentNode).call(L)}}function E(a,b,c,d,e){return function(){if(!e.settledY){var f=M.select(b.parentNode),g=e.rowBlocks[e.page],k=e.key-g.firstRowIndex,l=g.rows[k].rowHeight,m=e.cellHeightMayIncrease?b.parentNode.getBoundingClientRect().height+2*K.cellPad:l;l=Math.max(m,l);l-g.rows[k].rowHeight&&(g.rows[k].rowHeight=l,a.selectAll("."+K.cn.columnCell).call(L),C(null,a.filter(y),0),h(c,d,!0));f.attr("transform",function(){var a=this.parentNode.getBoundingClientRect(),
b=M.select(this.parentNode).select("."+K.cn.cellRect).node().getBoundingClientRect(),c=this.transform.baseVal.consolidate();a=b.top-a.top+(c?c.matrix.f:K.cellPad);return"translate("+F(e,M.select(this.parentNode).select("."+K.cn.cellTextHolder).node().getBoundingClientRect().width)+" "+a+")"});e.settledY=!0}}}function F(a,b){switch(a.align){case "left":return K.cellPad;case "right":return a.column.columnWidth-(b||0)-K.cellPad;case "center":return(a.column.columnWidth-(b||0))/2;default:return K.cellPad}}
function L(a){a.attr("transform",function(a){var b=a.rowBlocks[0].auxiliaryBlocks.reduce(function(a,b){return a+H(b,Infinity)},0);return"translate(0 "+(H(a.rowBlocks[a.page],a.key)+b)+")"}).selectAll("."+K.cn.cellRect).attr("height",function(a){var b=a.rowBlocks[a.page];return b.rows[a.key-b.firstRowIndex].rowHeight})}function J(a,b){var c=0;for(--b;0<=b;b--){var d=a[b];var e=d.allRowsHeight;if(void 0!==e)d=e;else{for(var f=e=0;f<d.rows.length;f++)e+=d.rows[f].rowHeight;d=d.allRowsHeight=e}c+=d}return c}
function H(a,b){for(var c=0,d=0;d<a.rows.length&&a.rows[d].rowIndex<b;d++)c+=a.rows[d].rowHeight;return c}var K=a("./constants"),M=a("d3"),I=a("../../lib/gup"),N=a("../../components/drawing"),O=a("../../lib/svg_text_utils"),P=a("../../lib").raiseToTop,Q=a("../../lib").cancelTransition,T=a("./data_preparation_helper"),V=a("./data_split_helpers"),Y=a("../../components/color");q.exports=function(a,c){var d=!a._context.staticPlot;c=a._fullLayout._paper.selectAll("."+K.cn.table).data(c.map(function(b){b=
I.unwrap(b).trace;return T(a,b)}),I.keyFun);c.exit().remove();c.enter().append("g").classed(K.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all");c.attr("width",function(a){return a.width+a.size.l+a.size.r}).attr("height",function(a){return a.height+a.size.t+a.size.b}).attr("transform",function(a){return"translate("+a.translateX+","+a.translateY+
")"});var e=c.selectAll("."+K.cn.tableControlView).data(I.repeat,I.keyFun);c=e.enter().append("g").classed(K.cn.tableControlView,!0).style("box-sizing","content-box");d&&c.on("mousemove",function(b){e.filter(function(a){return b===a}).call(h,a)}).on("mousewheel",function(b){b.scrollbarState.wheeling||(b.scrollbarState.wheeling=!0,B(a,e,null,b.scrollY+M.event.deltaY)(b)||(M.event.stopPropagation(),M.event.preventDefault()),b.scrollbarState.wheeling=!1)}).call(h,a,!0);e.attr("transform",function(a){return"translate("+
a.size.l+" "+a.size.t+")"});c=e.selectAll("."+K.cn.scrollBackground).data(I.repeat,I.keyFun);c.enter().append("rect").classed(K.cn.scrollBackground,!0).attr("fill","none");c.attr("width",function(a){return a.width}).attr("height",function(a){return a.height});e.each(function(b){N.setClipUrl(M.select(this),"clip"+a._fullLayout._uid+"_scrollAreaBottomClip_"+b.key,a)});var f=e.selectAll("."+K.cn.yColumn).data(function(a){return a.columns},I.keyFun);f.enter().append("g").classed(K.cn.yColumn,!0);f.exit().remove();
f.attr("transform",function(a){return"translate("+a.x+" 0)"});d&&f.call(M.behavior.drag().origin(function(b){var c=M.select(this);w(c,b,-K.uplift);P(this);b.calcdata.columnDragInProgress=!0;h(e.filter(function(a){return b.calcdata.key===a.key}),a);return b}).on("drag",function(a){var b=M.select(this);a.x=Math.max(-K.overdrag,Math.min(a.calcdata.width+K.overdrag-a.columnWidth,M.event.x));m(f).filter(function(b){return b.calcdata.key===a.calcdata.key}).sort(function(b,c){return(a===b?M.event.x:b.x)+
b.columnWidth/2-((a===c?M.event.x:c.x)+c.columnWidth/2)}).forEach(function(b,c){b.xIndex=c;b.x=a===b?b.x:b.xScale(b)});f.filter(function(b){return a!==b}).transition().ease(K.transitionEase).duration(K.transitionDuration).attr("transform",function(a){return"translate("+a.x+" 0)"});b.call(Q).attr("transform","translate("+a.x+" -"+K.uplift+" )")}).on("dragend",function(b){var c=M.select(this),d=b.calcdata;b.x=b.xScale(b);b.calcdata.columnDragInProgress=!1;w(c,b,0);u(a,d,d.columns.map(function(a){return a.xIndex}))}));
f.each(function(b){N.setClipUrl(M.select(this),k(a,b),a)});var g=f.selectAll("."+K.cn.columnBlock).data(V.splitToPanels,I.keyFun);g.enter().append("g").classed(K.cn.columnBlock,!0).attr("id",function(a){return a.key});g.style("cursor",function(a){return a.dragHandle?"ew-resize":a.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var l=g.filter(A);c=g.filter(y);d&&c.call(M.behavior.drag().origin(function(a){M.event.stopPropagation();return a}).on("drag",B(a,e,-1)).on("dragend",function(){}));
b(a,e,l,g);b(a,e,c,g);d=e.selectAll("."+K.cn.scrollAreaClip).data(I.repeat,I.keyFun);d.enter().append("clipPath").classed(K.cn.scrollAreaClip,!0).attr("id",function(b){return"clip"+a._fullLayout._uid+"_scrollAreaBottomClip_"+b.key});d=d.selectAll("."+K.cn.scrollAreaClipRect).data(I.repeat,I.keyFun);d.enter().append("rect").classed(K.cn.scrollAreaClipRect,!0).attr("x",-K.overdrag).attr("y",-K.uplift).attr("fill","none");d.attr("width",function(a){return a.width+2*K.overdrag}).attr("height",function(a){return a.height+
K.uplift});f.selectAll("."+K.cn.columnBoundary).data(I.repeat,I.keyFun).enter().append("g").classed(K.cn.columnBoundary,!0);d=f.selectAll("."+K.cn.columnBoundaryClippath).data(I.repeat,I.keyFun);d.enter().append("clipPath").classed(K.cn.columnBoundaryClippath,!0);d.attr("id",function(b){return k(a,b)});d=d.selectAll("."+K.cn.columnBoundaryRect).data(I.repeat,I.keyFun);d.enter().append("rect").classed(K.cn.columnBoundaryRect,!0).attr("fill","none");d.attr("width",function(a){return a.columnWidth+2*
n(a)}).attr("height",function(a){return a.calcdata.height+2*n(a)+K.uplift}).attr("x",function(a){return-n(a)}).attr("y",function(a){return-n(a)});C(null,c,e)}},{"../../components/color":591,"../../components/drawing":612,"../../lib":716,"../../lib/gup":714,"../../lib/svg_text_utils":740,"./constants":1250,"./data_preparation_helper":1251,"./data_split_helpers":1252,d3:165}],1256:[function(a,q,p){p=a("../../plots/template_attributes").hovertemplateAttrs;var n=a("../../plots/template_attributes").texttemplateAttrs,
k=a("../../components/colorscale/attributes"),m=a("../../plots/domain").attributes,h=a("../pie/attributes"),b=a("../sunburst/attributes"),g=a("./constants");a=a("../../lib/extend").extendFlat;q.exports={labels:b.labels,parents:b.parents,values:b.values,branchvalues:b.branchvalues,count:b.count,level:b.level,maxdepth:b.maxdepth,tiling:{packing:{valType:"enumerated",values:"squarify binary dice slice slice-dice dice-slice".split(" "),dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",
min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:a({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:b.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:b.marker.line,editType:"calc"},
k("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:["\x3e","\x3c","|","/","\\"],dflt:"\x3e",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:a({},h.textfont,{}),editType:"calc"},text:h.text,textinfo:b.textinfo,texttemplate:n({editType:"plot"},{keys:g.eventDataKeys.concat(["label","value"])}),hovertext:h.hovertext,
hoverinfo:b.hoverinfo,hovertemplate:p({},{keys:g.eventDataKeys}),textfont:h.textfont,insidetextfont:h.insidetextfont,outsidetextfont:a({},h.outsidetextfont,{}),textposition:{valType:"enumerated",values:"top left;top center;top right;middle left;middle center;middle right;bottom left;bottom center;bottom right".split(";"),dflt:"top left",editType:"plot"},domain:m({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":598,"../../lib/extend":707,"../../plots/domain":789,
"../../plots/template_attributes":840,"../pie/attributes":1093,"../sunburst/attributes":1230,"./constants":1259}],1257:[function(a,q,p){var n=a("../../plots/plots");p.name="treemap";p.plot=function(a,m,h,b){n.plotBasePlot(p.name,a,m,h,b)};p.clean=function(a,m,h,b){n.cleanBasePlot(p.name,a,m,h,b)}},{"../../plots/plots":825}],1258:[function(a,q,p){var n=a("../sunburst/calc");p.calc=function(a,m){return n.calc(a,m)};p.crossTraceCalc=function(a){return n._runCrossTraceCalc("treemap",a)}},{"../sunburst/calc":1232}],
1259:[function(a,q,p){q.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:"currentPath root entry percentRoot percentEntry percentParent".split(" "),gapWithPathbar:1}},{}],1260:[function(a,q,p){var n=a("../../lib"),k=a("./attributes"),m=a("../../components/color"),h=a("../../plots/domain").defaults,b=a("../bar/defaults").handleText,g=a("../bar/constants").TEXTPAD;a=a("../../components/colorscale");var e=a.hasColorscale,t=a.handleDefaults;q.exports=function(a,f,d,c){function l(b,
c){return n.coerce(a,f,k,b,c)}d=l("labels");var p=l("parents");if(d&&d.length&&p&&p.length){(d=l("values"))&&d.length?l("branchvalues"):l("count");l("level");l("maxdepth");"squarify"===l("tiling.packing")&&l("tiling.squarifyratio");l("tiling.flip");l("tiling.pad");d=l("text");l("texttemplate");f.texttemplate||l("textinfo",Array.isArray(d)?"text+label":"label");l("hovertext");l("hovertemplate");d=l("pathbar.visible");b(a,f,c,l,"auto",{hasPathbar:d,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,
moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});l("textposition");p=-1!==f.textposition.indexOf("bottom");l("marker.line.width")&&l("marker.line.color",c.paper_bgcolor);var q=l("marker.colors"),w=f._hasColorscale=e(a,"marker","colors")||(a.marker||{}).coloraxis;w?t(a,f,c,l,{prefix:"marker.",cLetter:"c"}):l("marker.depthfade",!(q||[]).length);q=2*f.textfont.size;l("marker.pad.t",p?q/4:q);l("marker.pad.l",q/4);l("marker.pad.r",q/4);l("marker.pad.b",p?q:q/4);w&&t(a,f,c,l,{prefix:"marker.",
cLetter:"c"});f._hovered={marker:{line:{width:2,color:m.contrast(c.paper_bgcolor)}}};d&&(l("pathbar.thickness",f.pathbar.textfont.size+2*g),l("pathbar.side"),l("pathbar.edgeshape"));h(f,c,l);f._length=null}else f.visible=!1}},{"../../components/color":591,"../../components/colorscale":603,"../../lib":716,"../../plots/domain":789,"../bar/constants":857,"../bar/defaults":859,"./attributes":1256}],1261:[function(a,q,p){var n=a("d3"),k=a("../../lib"),m=a("../../components/drawing"),h=a("../../lib/svg_text_utils"),
b=a("./partition"),g=a("./style").styleOne,e=a("./constants"),t=a("../sunburst/helpers"),l=a("../sunburst/fx");q.exports=function(a,d,c,p,q){var f=q.barDifY,r=q.width,u=q.height,A=q.viewX,z=q.viewY,x=q.pathSlice,C=q.toMoveInsideSlice,B=q.strTransform,D=q.hasTransition,G=q.handleSlicesExit,E=q.makeUpdateSliceInterpolator,F=q.makeUpdateTextInterpolator,L={},J=a._fullLayout;q=d[0];var H=q.trace;q=q.hierarchy;var K=r/H._entryDepth,M=t.listPath(c.data,"id");q=b(q.copy(),[r,u],{packing:"dice",pad:{inner:0,
top:0,left:0,right:0,bottom:0}}).descendants();q=q.filter(function(a){var b=M.indexOf(a.data.id);if(-1===b)return!1;a.x0=K*b;a.x1=K*(b+1);a.y0=f;a.y1=f+u;return a.onPathbar=!0});q.reverse();p=p.data(q,t.getPtId);p.enter().append("g").classed("pathbar",!0);G(p,!0,L,[r,u],x);p.order();D&&(p=p.transition().each("end",function(){var b=n.select(this);t.setSliceCursor(b,a,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})}));p.each(function(b){b._hoverX=A(b.x1-Math.min(r,u)/2);b._hoverY=z(b.y1-u/2);var f=
n.select(this),p=k.ensureSingle(f,"path","surface",function(a){a.style("pointer-events","all")});D?p.transition().attrTween("d",function(a){var b=E(a,!0,L,[r,u]);return function(a){return x(b(a))}}):p.attr("d",x);f.call(l,c,a,d,{styleOne:g,eventDataKeys:e.eventDataKeys,transitionTime:e.CLICK_TRANSITION_TIME,transitionEasing:e.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:a._transitioning});p.call(g,b,H,{hovered:!1});b._text=(t.getPtLabel(b)||"").split("\x3cbr\x3e").join(" ")||
"";f=k.ensureSingle(f,"g","slicetext");f=k.ensureSingle(f,"text","",function(a){a.attr("data-notex",1)});p=k.ensureUniformFontSize(a,t.determineTextFont(H,b,J.font,{onPathbar:!0}));f.text(b._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(m.font,p).call(h.convertToTspans,a);b.textBB=m.bBox(f.node());b.transform=C(b,{fontSize:p.size,onPathbar:!0});b.transform.fontSize=p.size;D?f.transition().attrTween("transform",function(a){var b=F(a,!0,L,[r,u]);return function(a){return B(b(a))}}):
f.attr("transform",B(b))})}},{"../../components/drawing":612,"../../lib":716,"../../lib/svg_text_utils":740,"../sunburst/fx":1235,"../sunburst/helpers":1236,"./constants":1259,"./partition":1266,"./style":1268,d3:165}],1262:[function(a,q,p){var n=a("d3"),k=a("../../lib"),m=a("../../components/drawing"),h=a("../../lib/svg_text_utils"),b=a("./partition"),g=a("./style").styleOne,e=a("./constants"),t=a("../sunburst/helpers"),l=a("../sunburst/fx"),f=a("../sunburst/plot").formatSliceLabel;q.exports=function(a,
c,p,q,v){var d=v.width,r=v.height,u=v.viewX,z=v.viewY,x=v.pathSlice,C=v.toMoveInsideSlice,B=v.strTransform,D=v.hasTransition,G=v.handleSlicesExit,E=v.makeUpdateSliceInterpolator,F=v.makeUpdateTextInterpolator;v=v.prevEntry;var L=a._fullLayout,J=c[0].trace,H=-1!==J.textposition.indexOf("left"),K=-1!==J.textposition.indexOf("right"),M=-1!==J.textposition.indexOf("bottom"),I=!M&&!J.marker.pad.t||M&&!J.marker.pad.b,N=b(p,[d,r],{packing:J.tiling.packing,squarifyratio:J.tiling.squarifyratio,flipX:-1<J.tiling.flip.indexOf("x"),
flipY:-1<J.tiling.flip.indexOf("y"),pad:{inner:J.tiling.pad,top:J.marker.pad.t,left:J.marker.pad.l,right:J.marker.pad.r,bottom:J.marker.pad.b}}).descendants(),O=Infinity,P=-Infinity;N.forEach(function(a){var b=a.depth;b>=J._maxDepth?(a.x0=a.x1=(a.x0+a.x1)/2,a.y0=a.y1=(a.y0+a.y1)/2):(O=Math.min(O,b),P=Math.max(P,b))});q=q.data(N,t.getPtId);J._maxVisibleLayers=isFinite(P)?P-O+1:0;q.enter().append("g").classed("slice",!0);G(q,!1,{},[d,r],x);q.order();var Q=null;if(D&&v){var T=t.getPtId(v);q.each(function(a){null===
Q&&t.getPtId(a)===T&&(Q={x0:a.x0,x1:a.x1,y0:a.y0,y1:a.y1})})}D&&(q=q.transition().each("end",function(){var b=n.select(this);t.setSliceCursor(b,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})}));q.each(function(b){var q=t.isHeader(b,J);b._hoverX=u(b.x1-J.marker.pad.r);b._hoverY=M?z(b.y1-J.marker.pad.b/2):z(b.y0+J.marker.pad.t/2);var v=n.select(this),w=k.ensureSingle(v,"path","surface",function(a){a.style("pointer-events","all")});D?w.transition().attrTween("d",function(a){var b=E(a,!1,Q||{x0:0,
x1:d,y0:0,y1:r},[d,r]);return function(a){return x(b(a))}}):w.attr("d",x);v.call(l,p,a,c,{styleOne:g,eventDataKeys:e.eventDataKeys,transitionTime:e.CLICK_TRANSITION_TIME,transitionEasing:e.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{isTransitioning:a._transitioning});w.call(g,b,J,{hovered:!1});b._text=b.x0===b.x1||b.y0===b.y1?"":q?I?"":t.getPtLabel(b)||"":f(b,p,J,c,L)||"";v=k.ensureSingle(v,"g","slicetext");v=k.ensureSingle(v,"text","",function(a){a.attr("data-notex",1)});w=k.ensureUniformFontSize(a,
t.determineTextFont(J,b,L.font));v.text(b._text||" ").classed("slicetext",!0).attr("text-anchor",K?"end":H||q?"start":"middle").call(m.font,w).call(h.convertToTspans,a);b.textBB=m.bBox(v.node());b.transform=C(b,{fontSize:w.size,isHeader:q});b.transform.fontSize=w.size;D?v.transition().attrTween("transform",function(a){var b=F(a,!1,Q||{x0:0,x1:d,y0:0,y1:r},[d,r]);return function(a){return B(b(a))}}):v.attr("transform",B(b))});return Q}},{"../../components/drawing":612,"../../lib":716,"../../lib/svg_text_utils":740,
"../sunburst/fx":1235,"../sunburst/helpers":1236,"../sunburst/plot":1240,"./constants":1259,"./partition":1266,"./style":1268,d3:165}],1263:[function(a,q,p){q.exports={moduleType:"trace",name:"treemap",basePlotModule:a("./base_plot"),categories:[],animatable:!0,attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyDefaults:a("./defaults"),supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc").calc,crossTraceCalc:a("./calc").crossTraceCalc,plot:a("./plot"),style:a("./style").style,
colorbar:a("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1137,"./attributes":1256,"./base_plot":1257,"./calc":1258,"./defaults":1260,"./layout_attributes":1264,"./layout_defaults":1265,"./plot":1267,"./style":1268}],1264:[function(a,q,p){q.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1265:[function(a,q,p){var n=a("../../lib"),k=a("./layout_attributes");q.exports=function(a,h){n.coerce(a,
h,k,"treemapcolorway",h.colorway);n.coerce(a,h,k,"extendtreemapcolors",void 0)}},{"../../lib":716,"./layout_attributes":1264}],1266:[function(a,q,p){function n(a,b){switch(a){case "squarify":return m.treemapSquarify.ratio(b);case "binary":return m.treemapBinary;case "dice":return m.treemapDice;case "slice":return m.treemapSlice;default:return m.treemapSliceDice}}function k(a,b,g){if(g.swapXY){var e=a.x0;a.x0=a.y0;a.y0=e;e=a.x1;a.x1=a.y1;a.y1=e}g.flipX&&(e=a.x0,a.x0=b[0]-a.x1,a.x1=b[0]-e);g.flipY&&
(e=a.y0,a.y0=b[1]-a.y1,a.y1=b[1]-e);if(a=a.children)for(e=0;e<a.length;e++)k(a[e],b,g)}var m=a("d3-hierarchy");q.exports=function(a,b,g){var e=g.flipX,h=g.flipY,l="dice-slice"===g.packing,f=g.pad[h?"bottom":"top"],d=g.pad[e?"right":"left"],c=g.pad[e?"left":"right"],p=g.pad[h?"top":"bottom"];if(l){var q=d;d=f;f=q;q=c;c=p;p=q}a=m.treemap().tile(n(g.packing,g.squarifyratio)).paddingInner(g.pad.inner).paddingLeft(d).paddingRight(c).paddingTop(f).paddingBottom(p).size(l?[b[1],b[0]]:b)(a);(l||e||h)&&k(a,
b,{swapXY:l,flipX:e,flipY:h});return a}},{"d3-hierarchy":159}],1267:[function(a,q,p){function n(a){return h.isHierarchyRoot(a)?"":h.getPtId(a)}function k(a,f,k,l){var p=a._fullLayout,q=f[0],u=q.trace,v=q.hierarchy,w=h.findEntryWithLevel(v,u.level),y=m.select(k);k=y.selectAll("g.pathbar");y=y.selectAll("g.slice");if(w){var G=h.isHierarchyRoot(w),E=!p.uniformtext.mode&&h.hasTransition(l),F=h.getMaxDepth(u),L=p._size,J=u.domain,H=L.w*(J.x[1]-J.x[0]);l=L.h*(J.y[1]-J.y[0]);var K=u.pathbar.thickness,M=
u.marker.line.width+d.gapWithPathbar;M=u.pathbar.visible?-1<u.pathbar.side.indexOf("bottom")?l+M:-(K+M):0;var I={x0:H,x1:H,y0:M,y1:M+K},N=function(a,b,c){var d=u.tiling.pad;return{x0:a.x0-d-d<=b.x0?0:a.x0-d+d>=b.x1?c[0]:a.x0,x1:a.x1+d-d<=b.x0?0:a.x1+d+d>=b.x1?c[0]:a.x1,y0:a.y0-d-d<=b.y0?0:a.y0-d+d>=b.y1?c[1]:a.y0,y1:a.y1+d-d<=b.y0?0:a.y1+d+d>=b.y1?c[1]:a.y1}},O=null,P={},Q={},T=null,V=function(a,b){return b?P[n(a)]:Q[n(a)]};q.hasMultipleRoots&&G&&F++;u._maxDepth=F;u._backgroundColor=p.paper_bgcolor;
u._entryDepth=w.data.depth;u._atRootLevel=G;var Y=-H/2+L.l+L.w*(J.x[1]+J.x[0])/2,ca=-l/2+L.t+L.h*(1-(J.y[1]+J.y[0])/2),Z=ca+0,R=Y+0;q=function(a){return R+a};G=function(a){return Z+a};var U=R+0,X=function(a){a.x=Math.max(U,a.x)},ea=u.pathbar.edgeshape;L=function(a){var b=R+Math.max(Math.min(a.x0,a.x0),0),c=R+Math.min(Math.max(a.x1,a.x1),H),d=Z+a.y0,e=Z+a.y1;a=K/2;var f={},g={};f.x=b;g.x=c;f.y=g.y=(d+e)/2;var h={x:b,y:d};d={x:c,y:d};c={x:c,y:e};b={x:b,y:e};"\x3e"===ea?(h.x-=a,d.x-=a,c.x-=a,b.x-=a):
"/"===ea?(c.x-=a,b.x-=a,f.x-=a/2,g.x-=a/2):"\\"===ea?(h.x-=a,d.x-=a,f.x-=a/2,g.x-=a/2):"\x3c"===ea&&(f.x-=a,g.x-=a);X(h);X(b);X(f);X(d);X(c);X(g);return"M"+(h.x+","+h.y)+"L"+(d.x+","+d.y)+"L"+(g.x+","+g.y)+"L"+(c.x+","+c.y)+"L"+(b.x+","+b.y)+"L"+(f.x+","+f.y)+"Z"};var fa=function(a,b){var c=a.x0,d=a.x1,f=a.y0,h=a.y1;a=a.textBB;var k=-1!==u.textposition.indexOf("bottom"),l=-1!==u.textposition.indexOf("top")||b.isHeader&&!k?"start":k?"end":"middle",m=-1!==u.textposition.indexOf("right"),n=-1!==u.textposition.indexOf("left")||
b.onPathbar,q=u.marker.pad;b.isHeader&&(c+=q.l-g,d-=q.r-g,c>=d&&(c=d=(c+d)/2),k?(k=h-q.b,f<k&&k<h&&(f=k)):(k=f+q.t,f<k&&k<h&&(h=k)));a=e(c,d,f,h,a,{isHorizontal:!1,constrained:!0,angle:0,anchor:l,leftToRight:n?-1:m?1:0});a.fontSize=b.fontSize;a.targetX=Y+a.targetX;a.targetY=ca+a.targetY;if(isNaN(a.targetX)||isNaN(a.targetY))return{};c!==d&&f!==h&&t(u.type,a,p);return{scale:a.scale,rotate:a.rotate,textX:a.textX,textY:a.textY,anchorX:a.anchorX,anchorY:a.anchorY,targetX:a.targetX,targetY:a.targetY}},
la=function(a,b){for(var c,d=0;!c&&d<F;)d++,(a=a.parent)?c=V(a,b):d=F;return c||{}},da=function(a,b,c,d){c=V(a,b);a=b?I:(b=V(w,b))?N(a,b,d):{};return m.interpolate(c,a)};J=function(a,c,d,e){var f=V(a,c);f?e=f:c?e=I:O?a.parent?(d=T||d)&&!c?e=N(a,d,e):(e={},b.extendFlat(e,la(a,c))):e=a:e={};return m.interpolate(e,{x0:a.x0,x1:a.x1,y0:a.y0,y1:a.y1})};var ma=function(a,c,d,e){var f=V(a,c),g={};c?e=P[n(v)]||I:(d=Q[u.level]||d,e=a.data.depth-w.data.depth<F?N(a,d,e):{});b.extendFlat(g,{transform:fa({x0:e.x0,
x1:e.x1,y0:e.y0,y1:e.y1,textBB:a.textBB,_text:a._text},{isHeader:h.isHeader(a,u)})});f?g=f:a.parent&&b.extendFlat(g,la(a,c));c=a.transform;a.x0!==a.x1&&a.y0!==a.y1&&t(u.type,c,p);return m.interpolate(g,{transform:{scale:c.scale,rotate:c.rotate,textX:c.textX,textY:c.textY,anchorX:c.anchorX,anchorY:c.anchorY,targetX:c.targetX,targetY:c.targetY}})},aa=function(a,b,c,d,e){var f=d[0],g=d[1];E?a.exit().transition().each(function(){var a=m.select(this);a.select("path.surface").transition().attrTween("d",
function(a){var d=da(a,b,c,[f,g]);return function(a){return e(d(a))}});a.select("g.slicetext").attr("opacity",0)}).remove():a.exit().remove()},na=function(a){var c=a.transform;a.x0!==a.x1&&a.y0!==a.y1&&t(u.type,c,p);return b.getTextTransform({textX:c.textX,textY:c.textY,anchorX:c.anchorX,anchorY:c.anchorY,targetX:c.targetX,targetY:c.targetY,scale:c.scale,rotate:c.rotate})};E&&(k.each(function(a){P[n(a)]={x0:a.x0,x1:a.x1,y0:a.y0,y1:a.y1};a.transform&&(P[n(a)].transform={textX:a.transform.textX,textY:a.transform.textY,
anchorX:a.transform.anchorX,anchorY:a.transform.anchorY,targetX:a.transform.targetX,targetY:a.transform.targetY,scale:a.transform.scale,rotate:a.transform.rotate})}),y.each(function(a){Q[n(a)]={x0:a.x0,x1:a.x1,y0:a.y0,y1:a.y1};a.transform&&(Q[n(a)].transform={textX:a.transform.textX,textY:a.transform.textY,anchorX:a.transform.anchorX,anchorY:a.transform.anchorY,targetX:a.transform.targetX,targetY:a.transform.targetY,scale:a.transform.scale,rotate:a.transform.rotate});!O&&h.isEntry(a)&&(O=a)}));T=
c(a,f,w,y,{width:H,height:l,viewX:function(a){return Y+a},viewY:function(a){return ca+a},pathSlice:function(a){var b=Y+a.x0,c=Y+a.x1,d=ca+a.y0;a=ca+a.y1;return c-b&&a-d?"M"+(b+","+(d+0))+"L"+(c-0+","+d)+"L"+(c+","+(a-0))+"L"+(b+0+","+a)+"Z":""},toMoveInsideSlice:fa,prevEntry:O,makeUpdateSliceInterpolator:J,makeUpdateTextInterpolator:ma,handleSlicesExit:aa,hasTransition:E,strTransform:na});u.pathbar.visible?r(a,f,w,k,{barDifY:M,width:H,height:K,viewX:q,viewY:G,pathSlice:L,toMoveInsideSlice:fa,makeUpdateSliceInterpolator:J,
makeUpdateTextInterpolator:ma,handleSlicesExit:aa,hasTransition:E,strTransform:na}):k.remove()}else k.remove(),y.remove()}var m=a("d3"),h=a("../sunburst/helpers"),b=a("../../lib"),g=a("../bar/constants").TEXTPAD,e=a("../bar/plot").toMoveInsideBar;p=a("../bar/uniform_text");var t=p.recordMinTextSize,l=p.clearMinTextSize,f=a("../bar/style").resizeText,d=a("./constants"),c=a("./draw_descendants"),r=a("./draw_ancestors");q.exports=function(a,b,c,d){var e=a._fullLayout,g=e._treemaplayer,n,p=!c;l("treemap",
e);b=g.selectAll("g.trace.treemap").data(b,function(a){return a[0].trace.uid});b.enter().append("g").classed("trace",!0).classed("treemap",!0);b.order();!e.uniformtext.mode&&h.hasTransition(c)?(d&&(n=d()),m.transition().duration(c.duration).ease(c.easing).each("end",function(){n&&n()}).each("interrupt",function(){n&&n()}).each(function(){g.selectAll("g.trace").each(function(b){k(a,b,this,c)})})):(b.each(function(b){k(a,b,this,c)}),e.uniformtext.mode&&f(a,e._treemaplayer.selectAll(".trace"),"treemap"));
p&&b.exit().remove()}},{"../../lib":716,"../bar/constants":857,"../bar/plot":866,"../bar/style":869,"../bar/uniform_text":871,"../sunburst/helpers":1236,"./constants":1259,"./draw_ancestors":1261,"./draw_descendants":1262,d3:165}],1268:[function(a,q,p){function n(a,g,k,f){var d=(f||{}).hovered;f=g.data.data;var c=f.i;f=f.color;var e=b.isHierarchyRoot(g),l=1;if(d)d=k._hovered.marker.line.color,c=k._hovered.marker.line.width;else if(e&&"rgba(0,0,0,0)"===f)l=0,d="rgba(0,0,0,0)",c=0;else if(d=h.castOption(k,
c,"marker.line.color")||m.defaultLine,c=h.castOption(k,c,"marker.line.width")||0,!k._hasColorscale&&!g.onPathbar){var n=k.marker.depthfade;if(n&&(e=m.combine(m.addOpacity(k._backgroundColor,.75),f),!0===n?(n=b.getMaxDepth(k),g=isFinite(n)?b.isLeaf(g)?0:k._maxVisibleLayers-(g.data.depth-k._entryDepth):g.data.height+1):(g=g.data.depth-k._entryDepth,k._atRootLevel||g++),0<g))for(k=0;k<g;k++)f=m.combine(m.addOpacity(e,.5*k/g),f)}a.style("stroke-width",c).call(m.fill,f).call(m.stroke,d).style("opacity",
l)}var k=a("d3"),m=a("../../components/color"),h=a("../../lib"),b=a("../sunburst/helpers"),g=a("../bar/uniform_text").resizeText;q.exports={style:function(a){var b=a._fullLayout._treemaplayer.selectAll(".trace");g(a,b,"treemap");b.each(function(a){var b=k.select(this),d=a[0].trace;b.style("opacity",d.opacity);b.selectAll("path.surface").each(function(a){k.select(this).call(n,a,d,{hovered:!1})})})},styleOne:n}},{"../../components/color":591,"../../lib":716,"../bar/uniform_text":871,"../sunburst/helpers":1236,
d3:165}],1269:[function(a,q,p){p=a("../box/attributes");a=a("../../lib/extend").extendFlat;q.exports={y:p.y,x:p.x,x0:p.x0,y0:p.y0,name:a({},p.name,{}),orientation:a({},p.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",
editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:p.fillcolor,points:a({},p.boxpoints,{}),jitter:a({},p.jitter,{}),pointpos:a({},p.pointpos,{}),width:a({},p.width,{}),marker:p.marker,text:p.text,hovertext:p.hovertext,hovertemplate:p.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},
fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:p.offsetgroup,alignmentgroup:p.alignmentgroup,selected:p.selected,
unselected:p.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":707,"../box/attributes":880}],1270:[function(a,q,p){function n(a,b,h,f){function d(c){var d=e[c];d="multicategory"===h.type?h.r2c(d):h.d2c(d,0,a[b.valLetter+"calendar"]);return d===g?l[c]:d}var c=a.spanmode,e=a.span||[],k=[b.min,b.max],l=[b.min-2*f,b.max+2*f];f="soft"===c?l:"hard"===c?k:[d(0),d(1)];c={type:"linear",range:f};m.setConvert(c);
c.cleanRange();return f}var k=a("../../lib"),m=a("../../plots/cartesian/axes"),h=a("../box/calc"),b=a("./helpers"),g=a("../../constants/numerical").BADNUM;q.exports=function(a,g){var e=h(a,g);if(e[0].t.empty)return e;for(var f=a._fullLayout,d=m.getFromId(a,g["h"===g.orientation?"xaxis":"yaxis"]),c=Infinity,p=-Infinity,q=0,t=0,w=0;w<e.length;w++){var y=e[w],A=y.pts.map(b.extractVal),z=y;var x=y;var C=x.max-x.min;if(C)if(g.bandwidth)x=Math.max(g.bandwidth,C/1E4);else{var B=A.length,D=k.stdev(A,B-1,
x.mean);x=Math.max(1.059*Math.min(D,(x.q3-x.q1)/1.349)*Math.pow(B,-.2),C/100)}else x=g.bandwidth?g.bandwidth:0;C=z.bandwidth=x;z=y.span=n(g,y,d,C);if(y.min===y.max&&0===C)z=y.span=[y.min,y.max],y.density=[{v:1,t:z[0]}],y.bandwidth=C,q=Math.max(q,1);else{x=z[1]-z[0];B=Math.ceil(x/(C/3));x/=B;if(!isFinite(x)||!isFinite(B))return k.error("Something went wrong with computing the violin span"),e[0].t.empty=!0,e;C=b.makeKDE(y,g,A);y.density=Array(B);B=0;for(D=z[0];D<z[1]+x/2;B++,D+=x){var G=C(D);y.density[B]=
{v:G,t:D};q=Math.max(q,G)}}t=Math.max(t,A.length);c=Math.min(c,z[0]);p=Math.max(p,z[1])}c=m.findExtremes(d,[c,p],{padded:!0});g._extremes[d._id]=c;g.width?e[0].t.maxKDE=q:(f=f._violinScaleGroupStats,g=g.scalegroup,(d=f[g])?(d.maxKDE=Math.max(d.maxKDE,q),d.maxCount=Math.max(d.maxCount,t)):f[g]={maxKDE:q,maxCount:t});e[0].t.labels.kde=k._(a,"kde:");return e}},{"../../constants/numerical":692,"../../lib":716,"../../plots/cartesian/axes":764,"../box/calc":881,"./helpers":1273}],1271:[function(a,q,p){var n=
a("../box/cross_trace_calc").setPositionOffset,k=["v","h"];q.exports=function(a,h){var b=a.calcdata,g=h.xaxis;h=h.yaxis;for(var e=0;e<k.length;e++){for(var m=k[e],l="h"===m?h:g,f=[],d=0;d<b.length;d++){var c=b[d],p=c[0].t;c=c[0].trace;!0!==c.visible||"violin"!==c.type||p.empty||c.orientation!==m||c.xaxis!==g._id||c.yaxis!==h._id||f.push(d)}n("violin",a,f,l)}}},{"../box/cross_trace_calc":882}],1272:[function(a,q,p){var n=a("../../lib"),k=a("../../components/color"),m=a("../box/defaults"),h=a("./attributes");
q.exports=function(a,g,e,p){function b(b,c){return n.coerce(a,g,h,b,c)}function f(b,c){return n.coerce2(a,g,h,b,c)}m.handleSampleDefaults(a,g,b,p);if(!1!==g.visible){b("bandwidth");b("side");b("width")||(b("scalegroup",g.name),b("scalemode"));p=b("span");var d;Array.isArray(p)&&(d="manual");b("spanmode",d);d=b("line.color",(a.marker||{}).color||e);e=b("line.width");var c=b("fillcolor",k.addOpacity(g.line.color,.5));m.handlePointsDefaults(a,g,b,{prefix:""});p=f("box.width");c=f("box.fillcolor",c);
var q=f("box.line.color",d),t=f("box.line.width",e);b("box.visible",!!(p||c||q||t))||(g.box={visible:!1});d=f("meanline.color",d);e=f("meanline.width",e);b("meanline.visible",!(!d&&!e))||(g.meanline={visible:!1})}}},{"../../components/color":591,"../../lib":716,"../box/defaults":883,"./attributes":1269}],1273:[function(a,q,p){var n=a("../../lib");p.makeKDE=function(a,m,h){var b=h.length,g=a.bandwidth,e=1/(b*g);return function(a){for(var k=0,f=0;f<b;f++){var d=(a-h[f])/g;k+=1/Math.sqrt(2*Math.PI)*
Math.exp(-.5*d*d)}return e*k}};p.getPositionOnKdePath=function(a,m,h){if("h"===m.orientation){var b="y";var g="x"}else b="x",g="y";h=n.findPointOnPath(a.path,h,g,{pathLength:a.pathLength});a=a.posCenterPx;b=h[b];return[b,"both"===m.side?2*a-b:a]};p.getKdeValue=function(a,m,h){var b=a.pts.map(p.extractVal);return p.makeKDE(a,m,b)(h)/a.posDensityScale};p.extractVal=function(a){return a.v}},{"../../lib":716}],1274:[function(a,q,p){var n=a("../../lib"),k=a("../../plots/cartesian/axes"),m=a("../box/hover"),
h=a("./helpers");q.exports=function(a,g,e,p,l){var b=a.cd,d=b[0].trace,c=d.hoveron,q=-1!==c.indexOf("violins"),t=-1!==c.indexOf("kde"),v=[],w;if(q||t){var y=m.hoverOnBoxes(a,g,e,p);if(t&&0<y.length){var A=a.xa,z=a.ya;if("h"===d.orientation){var x=g;t="y";var C=z;var B="x"}else x=e,t="x",C=A,B="y",A=z;var D=b[a.index];if(x>=D.span[0]&&x<=D.span[1]){var G=n.extendFlat({},a);z=A.c2p(x,!0);var E=h.getKdeValue(D,d,x);D=h.getPositionOnKdePath(D,d,z);var F=C._offset;C=C._length;G[t+"0"]=D[0];G[t+"1"]=D[1];
G[B+"0"]=G[B+"1"]=z;G[B+"Label"]=B+": "+k.hoverLabelText(A,x)+", "+b[0].t.labels.kde+" "+E.toFixed(3);G.spikeDistance=y[0].spikeDistance;b=t+"Spike";G[b]=y[0][b];y[0].spikeDistance=void 0;y[0][b]=void 0;G.hovertemplate=!1;v.push(G);G={stroke:a.color};G[t+"1"]=n.constrain(F+D[0],F,F+C);G[t+"2"]=n.constrain(F+D[1],F,F+C);G[B+"1"]=G[B+"2"]=A._offset+z}}q&&(v=v.concat(y))}-1!==c.indexOf("points")&&(w=m.hoverOnPoints(a,g,e));a=l.selectAll(".violinline-"+d.uid).data(G?[0]:[]);a.enter().append("line").classed("violinline-"+
d.uid,!0).attr("stroke-width",1.5);a.exit().remove();a.attr(G);if("closest"===p)return w?[w]:v;w&&v.push(w);return v}},{"../../lib":716,"../../plots/cartesian/axes":764,"../box/hover":885,"./helpers":1273}],1275:[function(a,q,p){q.exports={attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyDefaults:a("./defaults"),crossTraceDefaults:a("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc"),crossTraceCalc:a("./cross_trace_calc"),
plot:a("./plot"),style:a("./style"),styleOnSelect:a("../scatter/style").styleOnSelect,hoverPoints:a("./hover"),selectPoints:a("../box/select"),moduleType:"trace",name:"violin",basePlotModule:a("../../plots/cartesian"),categories:"cartesian svg symbols oriented box-violin showLegend violinLayout zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":775,"../box/defaults":883,"../box/select":890,"../scatter/style":1142,"./attributes":1269,"./calc":1270,"./cross_trace_calc":1271,"./defaults":1272,
"./hover":1274,"./layout_attributes":1276,"./layout_defaults":1277,"./plot":1278,"./style":1279}],1276:[function(a,q,p){p=a("../box/layout_attributes");a=a("../../lib").extendFlat;q.exports={violinmode:a({},p.boxmode,{}),violingap:a({},p.boxgap,{}),violingroupgap:a({},p.boxgroupgap,{})}},{"../../lib":716,"../box/layout_attributes":887}],1277:[function(a,q,p){var n=a("../../lib"),k=a("./layout_attributes"),m=a("../box/layout_defaults");q.exports=function(a,b,g){m._supply(a,b,g,function(e,g){return n.coerce(a,
b,k,e,g)},"violin")}},{"../../lib":716,"../box/layout_defaults":888,"./layout_attributes":1276}],1278:[function(a,q,p){var n=a("d3"),k=a("../../lib"),m=a("../../components/drawing"),h=a("../box/plot"),b=a("../scatter/line_points"),g=a("./helpers");q.exports=function(a,p,l,f){function d(a){a=b(a,{xaxis:e,yaxis:q,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return m.smoothopen(a[0],1)}var c=a._fullLayout,e=p.xaxis,q=p.yaxis;k.makeTraceGroups(f,l,"trace violins").each(function(a){var b=
n.select(this);a=a[0];var f=a.t,l=a.trace;if(!0!==l.visible||f.empty)b.remove();else{var m=f.bPos,r=f.bdPos,t=p[f.valLetter+"axis"],u=p[f.posLetter+"axis"],v="both"===l.side,G=v||"positive"===l.side,E=v||"negative"===l.side;a=b.selectAll("path.violin").data(k.identity);a.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin");a.exit().remove();a.each(function(a){var b=n.select(this),e=a.density,g=e.length,h=u.c2l(a.pos+m,!0),k=u.l2p(h);if(l.width)var p=f.maxKDE/r;
else p=c._violinScaleGroupStats[l.scalegroup],p="count"===l.scalemode?p.maxKDE/r*(p.maxCount/a.pts.length):p.maxKDE/r;var q;if(G){var w=Array(g);for(q=0;q<g;q++){var x=w[q]={};x[f.posLetter]=h+e[q].v/p;x[f.valLetter]=t.c2l(e[q].t,!0)}var A=d(w)}if(E){w=Array(g);var y=0;for(q=g-1;y<g;y++,q--)x=w[y]={},x[f.posLetter]=h-e[q].v/p,x[f.valLetter]=t.c2l(e[q].t,!0);y=d(w)}v?A=A+"L"+y.substr(1)+"Z":(h=[k,t.c2p(e[0].t)],e=[k,t.c2p(e[g-1].t)],"h"===l.orientation&&(h.reverse(),e.reverse()),A=G?"M"+h+"L"+A.substr(1)+
"L"+e:"M"+e+"L"+y.substr(1)+"L"+h);b.attr("d",A);a.posCenterPx=k;a.posDensityScale=p*r;a.path=b.node();a.pathLength=a.path.getTotalLength()/(v?2:1)});var F=l.box;a=F.width;F=(F.line||{}).width;v?(a*=r,F=0):G?(a=[0,r*a/2],F*={x:1,y:-1}[f.posLetter]):(a=[r*a/2,0],F*={x:-1,y:1}[f.posLetter]);h.plotBoxAndWhiskers(b,{pos:u,val:t},l,{bPos:m,bdPos:a,bPosPxOffset:F});h.plotBoxMean(b,{pos:u,val:t},l,{bPos:m,bdPos:a,bPosPxOffset:F});if(!l.box.visible&&l.meanline.visible)var L=k.identity;L=b.selectAll("path.meanline").data(L||
[]);L.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke");L.exit().remove();L.each(function(a){var b=t.c2p(a.mean,!0);a=g.getPositionOnKdePath(a,l,b);n.select(this).attr("d","h"===l.orientation?"M"+b+","+a[0]+"V"+a[1]:"M"+a[0]+","+b+"H"+a[1])});h.plotPoints(b,{x:e,y:q},l,f)}})}},{"../../components/drawing":612,"../../lib":716,"../box/plot":889,"../scatter/line_points":1133,"./helpers":1273,d3:165}],1279:[function(a,q,p){var n=a("d3"),k=
a("../../components/color"),m=a("../scatter/style").stylePoints;q.exports=function(a){var b=n.select(a).selectAll("g.trace.violins");b.style("opacity",function(a){return a[0].trace.opacity});b.each(function(b){b=b[0].trace;var e=n.select(this),g=b.box||{},h=g.line||{},f=b.meanline||{},d=f.width;e.selectAll("path.violin").style("stroke-width",b.line.width+"px").call(k.stroke,b.line.color).call(k.fill,b.fillcolor);e.selectAll("path.box").style("stroke-width",h.width+"px").call(k.stroke,h.color).call(k.fill,
g.fillcolor);g={"stroke-width":d+"px","stroke-dasharray":2*d+"px,"+d+"px"};e.selectAll("path.mean").style(g).call(k.stroke,f.color);e.selectAll("path.meanline").style(g).call(k.stroke,f.color);m(e,b,a)})}},{"../../components/color":591,"../scatter/style":1142,d3:165}],1280:[function(a,q,p){p=a("../../components/colorscale/attributes");var n=a("../isosurface/attributes"),k=a("../../plots/attributes"),m=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;q=q.exports=a(m({x:n.x,
y:n.y,z:n.z,value:n.value,isomin:n.isomin,isomax:n.isomax,surface:n.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:n.slices,caps:n.caps,text:n.text,hovertext:n.hovertext,hovertemplate:n.hovertemplate},p("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:n.colorbar,opacity:n.opacity,opacityscale:{valType:"any",editType:"calc"},lightposition:n.lightposition,lighting:n.lighting,flatshading:n.flatshading,contour:n.contour,
hoverinfo:m({},k.hoverinfo),showlegend:m({},k.showlegend,{dflt:!1})}),"calc","nested");q.x.editType=q.y.editType=q.z.editType=q.value.editType="calc+clearAxisTypes";q.transforms=void 0},{"../../components/colorscale/attributes":598,"../../lib/extend":707,"../../plot_api/edit_types":747,"../../plots/attributes":761,"../isosurface/attributes":1055}],1281:[function(a,q,p){function n(a,b,d){this.scene=a;this.uid=d;this.mesh=b;this.name="";this.data=null;this.showContour=!1}var k=a("gl-mesh3d"),m=a("../../lib/gl_format_color").parseColorScale,
h=a("../../lib/str2rgbarray"),b=a("../../components/colorscale").extractOpts,g=a("../../plots/gl3d/zip3"),e=a("../isosurface/convert").findNearestOnAxis,t=a("../isosurface/convert").generateIsoMeshes;a=n.prototype;a.handlePick=function(a){if(a.object===this.mesh){var b=a.data.index,d=this.data._meshY[b],c=this.data._meshZ[b],g=this.data._Ys.length,h=this.data._Zs.length;b=e(this.data._meshX[b],this.data._Xs).id;d=e(d,this.data._Ys).id;c=e(c,this.data._Zs).id;g=a.index=c+h*d+h*g*b;a.traceCoordinate=
[this.data._meshX[g],this.data._meshY[g],this.data._meshZ[g],this.data._value[g]];h=this.data.hovertext||this.data.text;Array.isArray(h)&&void 0!==h[g]?a.textLabel=h[g]:h&&(a.textLabel=h);return!0}};a.update=function(a){function e(a,b,c,d){return b.map(function(b){return a.d2l(b,0,d)*c})}var d=this.scene,c=d.fullSceneLayout;this.data=t(a);d=g(e(c.xaxis,a._meshX,d.dataScale[0],a.xcalendar),e(c.yaxis,a._meshY,d.dataScale[1],a.ycalendar),e(c.zaxis,a._meshZ,d.dataScale[2],a.zcalendar));c=g(a._meshI,a._meshJ,
a._meshK);d={positions:d,cells:c,lightPosition:[a.lightposition.x,a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,opacityscale:a.opacityscale,contourEnable:a.contour.show,contourColor:h(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading};
c=b(a);d.vertexIntensity=a._meshIntensity;d.vertexIntensityBounds=[c.min,c.max];d.colormap=m(a);this.mesh.update(d)};a.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};q.exports=function(a,b){var d=k({gl:a.glplot.gl}),c=new n(a,d,b.uid);d._trace=c;c.update(b);a.glplot.add(d);return c}},{"../../components/colorscale":603,"../../lib/gl_format_color":713,"../../lib/str2rgbarray":739,"../../plots/gl3d/zip3":815,"../isosurface/convert":1057,"gl-mesh3d":283}],1282:[function(a,
q,p){function n(a,b){for(var e=[],g=0;32>g;g++){var f=g/31;e.push([f,Math.max(1,Math.min(0,b+(1-b)*(1-Math.pow(Math.sin(a*f*Math.PI),2))))])}return e}function k(a){var b=0;if(!Array.isArray(a)||2>a.length||!a[0]||!a[a.length-1]||0!==+a[0][0]||1!==+a[a.length-1][0])return!1;for(var g=0;g<a.length;g++){var h=a[g];if(2!==h.length||+h[0]<b)return!1;b=+h[0]}return!0}var m=a("../../lib"),h=a("./attributes"),b=a("../isosurface/defaults").supplyIsoDefaults;q.exports=function(a,e,p,l){function f(b,c){return m.coerce(a,
e,h,b,c)}b(a,e,p,l,f);p=f("opacityscale");"max"===p?e.opacityscale=[[0,.1],[1,1]]:"min"===p?e.opacityscale=[[0,1],[1,.1]]:"extremes"===p?e.opacityscale=n(1,.1):k(p)||(e.opacityscale=void 0)}},{"../../lib":716,"../isosurface/defaults":1058,"./attributes":1280}],1283:[function(a,q,p){q.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),calc:a("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:a("./convert"),moduleType:"trace",name:"volume",basePlotModule:a("../../plots/gl3d"),
categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":804,"../isosurface/calc":1056,"./attributes":1280,"./convert":1281,"./defaults":1282}],1284:[function(a,q,p){function n(a){return{marker:{color:e({},k.marker.color,{arrayOk:!1,editType:"style"}),line:{color:e({},k.marker.line.color,{arrayOk:!1,editType:"style"}),width:e({},k.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}var k=a("../bar/attributes");p=a("../scatter/attributes").line;
var m=a("../../plots/attributes"),h=a("../../plots/template_attributes").hovertemplateAttrs,b=a("../../plots/template_attributes").texttemplateAttrs,g=a("./constants"),e=a("../../lib/extend").extendFlat;a=a("../../components/color");q.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,hovertext:k.hovertext,hovertemplate:h({},{keys:g.eventDataKeys}),hoverinfo:e({},m.hoverinfo,{flags:"name x y text initial delta final".split(" ")}),
textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:b({editType:"plot"},{keys:g.eventDataKeys.concat(["label"])}),text:k.text,textposition:k.textposition,insidetextanchor:k.insidetextanchor,textangle:k.textangle,textfont:k.textfont,insidetextfont:k.insidetextfont,outsidetextfont:k.outsidetextfont,constraintext:k.constraintext,cliponaxis:k.cliponaxis,orientation:k.orientation,offset:k.offset,width:k.width,increasing:n("increasing"),
decreasing:n("decreasing"),totals:n("intermediate sums and total"),connector:{line:{color:e({},p.color,{dflt:a.defaultLine}),width:e({},p.width,{editType:"plot"}),dash:p.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup}},{"../../components/color":591,"../../lib/extend":707,"../../plots/attributes":761,"../../plots/template_attributes":840,
"../bar/attributes":855,"../scatter/attributes":1119,"./constants":1286}],1285:[function(a,q,p){function n(a){return"a"===a||"absolute"===a}function k(a){return"t"===a||"total"===a}var m=a("../../plots/cartesian/axes"),h=a("../../lib").mergeArray,b=a("../scatter/calc_selection"),g=a("../../constants/numerical").BADNUM;q.exports=function(a,p){var e=m.getFromId(a,p.xaxis||"x"),f=m.getFromId(a,p.yaxis||"y");"h"===p.orientation?(a=e.makeCalcdata(p,"x"),e=f.makeCalcdata(p,"y")):(a=f.makeCalcdata(p,"y"),
e=e.makeCalcdata(p,"x"));f=Math.min(e.length,a.length);for(var d=Array(f),c=0,q,t=!1,v=0;v<f;v++){q=a[v]||0;var w=!1;(a[v]!==g||k(p.measure[v])||n(p.measure[v]))&&v+1<f&&(a[v+1]!==g||k(p.measure[v+1])||n(p.measure[v+1]))&&(w=!0);w=d[v]={i:v,p:e[v],s:q,rawS:q,cNext:w};n(p.measure[v])?(c=w.s,w.isSum=!0,w.dir="totals",w.s=c):k(p.measure[v])?(w.isSum=!0,w.dir="totals",w.s=c):(w.isSum=!1,w.dir=0>w.rawS?"decreasing":"increasing",q=w.s,w.s=c+q,c+=q);"totals"===w.dir&&(t=!0);p.ids&&(w.id=String(p.ids[v]));
w.v=(p.base||0)+c}d.length&&(d[0].hasTotals=t);h(p.text,d,"tx");h(p.hovertext,d,"htx");b(d,p);return d}},{"../../constants/numerical":692,"../../lib":716,"../../plots/cartesian/axes":764,"../scatter/calc_selection":1121}],1286:[function(a,q,p){q.exports={eventDataKeys:["initial","delta","final"]}},{}],1287:[function(a,q,p){var n=a("../bar/cross_trace_calc").setGroupPositions;q.exports=function(a,m){var h=a._fullLayout,b=a._fullData,g=a.calcdata,e=m.xaxis,k=m.yaxis;m=[];var l=[],f=[],d;for(d=0;d<b.length;d++){var c=
b[d];if(!0===c.visible&&c.xaxis===e._id&&c.yaxis===k._id&&"waterfall"===c.type){var p=g[d];"h"===c.orientation?f.push(p):l.push(p);m.push(p)}}p={mode:h.waterfallmode,norm:h.waterfallnorm,gap:h.waterfallgap,groupgap:h.waterfallgroupgap};n(a,e,k,l,p);n(a,k,e,f,p);for(d=0;d<m.length;d++)for(p=m[d],a=0;a<p.length;a++)e=p[a],!1===e.isSum&&(e.s0+=0===a?0:p[a-1].s),a+1<p.length&&(p[a].nextP0=p[a+1].p0,p[a].nextS0=p[a+1].s0)}},{"../bar/cross_trace_calc":858}],1288:[function(a,q,p){function n(a,b,c){a(b+".marker.color",
c);a(b+".marker.line.color",e.defaultLine);a(b+".marker.line.width")}var k=a("../../lib"),m=a("../bar/defaults").handleGroupingDefaults,h=a("../bar/defaults").handleText,b=a("../scatter/xy_defaults"),g=a("./attributes"),e=a("../../components/color");a=a("../../constants/delta.js");var t=a.INCREASING.COLOR,l=a.DECREASING.COLOR;q.exports={supplyDefaults:function(a,d,c,e){function f(b,c){return k.coerce(a,d,g,b,c)}b(a,d,e,f)?(f("measure"),f("orientation",d.x&&!d.y?"h":"v"),f("base"),f("offset"),f("width"),
f("text"),f("hovertext"),f("hovertemplate"),c=f("textposition"),h(a,d,e,f,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==d.textposition&&(f("texttemplate"),d.texttemplate||f("textinfo")),n(f,"increasing",t),n(f,"decreasing",l),n(f,"totals","#4499FF"),f("connector.visible")&&(f("connector.mode"),f("connector.line.width")&&(f("connector.line.color"),f("connector.line.dash")))):d.visible=!1},crossTraceDefaults:function(a,
b){function c(a){return k.coerce(e._input,e,g,a)}if("group"===b.waterfallmode)for(var d=0;d<a.length;d++){var e=a[d];var f=e._input;m(f,e,b,c)}}}},{"../../components/color":591,"../../constants/delta.js":686,"../../lib":716,"../bar/defaults":859,"../scatter/xy_defaults":1145,"./attributes":1284}],1289:[function(a,q,p){q.exports=function(a,k){a.x="xVal"in k?k.xVal:k.x;a.y="yVal"in k?k.yVal:k.y;"initial"in k&&(a.initial=k.initial);"delta"in k&&(a.delta=k.delta);"final"in k&&(a.final=k.final);k.xa&&
(a.xaxis=k.xa);k.ya&&(a.yaxis=k.ya);return a}},{}],1290:[function(a,q,p){function n(a,b){var e=a[b.dir].marker;a=e.color;b=e.line.color;e=e.line.width;if(m(a))return a;if(m(b)&&e)return b}var k=a("../../plots/cartesian/axes").hoverLabelText,m=a("../../components/color").opacity,h=a("../bar/hover").hoverOnBars;a=a("../../constants/delta.js");var b=a.INCREASING.SYMBOL,g=a.DECREASING.SYMBOL;q.exports=function(a,m,l,f){if(m=h(a,m,l,f)){var d=m.cd;l=d[0].trace;var c=(f="h"===l.orientation)?a.xa:a.ya;a=
d[m.index];d=a.isSum?a.b+a.s:a.rawS;if(!a.isSum){m.initial=a.b+a.s-d;m.delta=d;m.final=m.initial+m.delta;var e=k(c,Math.abs(m.delta));m.deltaLabel=0>d?"("+e+")":e;m.finalLabel=k(c,m.final);m.initialLabel=k(c,m.initial)}e=a.hi||l.hoverinfo;c=[];if(e&&"none"!==e&&"skip"!==e){var p="all"===e,q=e.split("+");e=function(a){return p||-1!==q.indexOf(a)};a.isSum||(!e("final")||(f?e("x"):e("y"))||c.push(m.finalLabel),e("delta")&&(0>d?c.push(m.deltaLabel+" "+g):c.push(m.deltaLabel+" "+b)),e("initial")&&c.push("Initial: "+
m.initialLabel))}c.length&&(m.extraText=c.join("\x3cbr\x3e"));m.color=n(l,a);return[m]}}},{"../../components/color":591,"../../constants/delta.js":686,"../../plots/cartesian/axes":764,"../bar/hover":862}],1291:[function(a,q,p){q.exports={attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyDefaults:a("./defaults").supplyDefaults,crossTraceDefaults:a("./defaults").crossTraceDefaults,supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc"),crossTraceCalc:a("./cross_trace_calc"),
plot:a("./plot"),style:a("./style").style,hoverPoints:a("./hover"),eventData:a("./event_data"),selectPoints:a("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:a("../../plots/cartesian"),categories:"bar-like cartesian svg oriented showLegend zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":775,"../bar/select":867,"./attributes":1284,"./calc":1285,"./cross_trace_calc":1287,"./defaults":1288,"./event_data":1289,"./hover":1290,"./layout_attributes":1292,"./layout_defaults":1293,
"./plot":1294,"./style":1295}],1292:[function(a,q,p){q.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1293:[function(a,q,p){var n=a("../../lib"),k=a("./layout_attributes");q.exports=function(a,h,b){for(var g=!1,e=0;e<b.length;e++){var m=b[e];if(m.visible&&"waterfall"===m.type){g=!0;break}}g&&(n.coerce(a,h,k,
"waterfallmode",void 0),n.coerce(a,h,k,"waterfallgap",.2),n.coerce(a,h,k,"waterfallgroupgap",void 0))}},{"../../lib":716,"./layout_attributes":1292}],1294:[function(a,q,p){function n(a,b,g,f){var d=b.xaxis,c=b.yaxis;m.makeTraceGroups(f,g,"trace bars").each(function(e){var f=k.select(this);e=e[0].trace;f=m.ensureSingle(f,"g","lines");if(e.connector&&e.connector.visible){var g="h"===e.orientation,l=e.connector.mode;f=f.selectAll("g.line").data(m.identity);f.enter().append("g").classed("line",!0);f.exit().remove();
var n=f.size();f.each(function(e,f){if(f===n-1||e.cNext){var p=[];var q=[];var r=g?d:c,t=g?c:d;p[0]=r.c2p(e.s0,!0);q[0]=t.c2p(e.p0,!0);p[1]=r.c2p(e.s1,!0);q[1]=t.c2p(e.p1,!0);p[2]=r.c2p(e.nextS0,!0);q[2]=t.c2p(e.nextP0,!0);q=g?[p,q]:[q,p];p=q[0];q=q[1];r="";"spanning"===l&&!e.isSum&&0<f&&(r=g?r+("M"+p[0]+","+q[1]+"V"+q[0]):r+("M"+p[1]+","+q[0]+"H"+p[0]));"between"!==l&&(e.isSum||f<n-1)&&(r=g?r+("M"+p[1]+","+q[0]+"V"+q[1]):r+("M"+p[0]+","+q[1]+"H"+p[1]));void 0!==p[2]&&void 0!==q[2]&&(r=g?r+("M"+p[1]+
","+q[1]+"V"+q[2]):r+("M"+p[1]+","+q[1]+"H"+p[2]));""===r&&(r="M0,0Z");m.ensureSingle(k.select(this),"path").attr("d",r).call(h.setClipUrl,b.layerClipId,a)}})}else f.remove()})}var k=a("d3"),m=a("../../lib"),h=a("../../components/drawing"),b=a("../bar/plot"),g=a("../bar/uniform_text").clearMinTextSize;q.exports=function(a,h,k,f){var d=a._fullLayout;g("waterfall",d);b.plot(a,h,k,f,{mode:d.waterfallmode,norm:d.waterfallmode,gap:d.waterfallgap,groupgap:d.waterfallgroupgap});n(a,h,k,f)}},{"../../components/drawing":612,
"../../lib":716,"../bar/plot":866,"../bar/uniform_text":871,d3:165}],1295:[function(a,q,p){var n=a("d3"),k=a("../../components/drawing"),m=a("../../components/color"),h=a("../../constants/interactions").DESELECTDIM;p=a("../bar/style");var b=a("../bar/uniform_text").resizeText,g=p.styleTextPoints;q.exports={style:function(a,p,l){p=l?l:n.select(a).selectAll("g.waterfalllayer").selectAll("g.trace");b(a,p,"waterfall");p.style("opacity",function(a){return a[0].trace.opacity});p.each(function(b){var d=
n.select(this),c=b[0].trace;d.selectAll(".point \x3e path").each(function(a){if(!a.isBlank){var b=c[a.dir].marker;n.select(this).call(m.fill,b.color).call(m.stroke,b.line.color).call(k.dashLine,b.line.dash,b.line.width).style("opacity",c.selectedpoints&&!a.selected?h:1)}});g(d,c,a);d.selectAll(".lines").each(function(){var a=c.connector.line;k.lineGroupStyle(n.select(this).selectAll("path"),a.width,a.color,a.dash)})})}}},{"../../components/color":591,"../../components/drawing":612,"../../constants/interactions":691,
"../bar/style":869,"../bar/uniform_text":871,d3:165}],1296:[function(a,q,p){function n(a,b,c,d){if(d.enabled){var f=d.target,h=e.nestedProperty(b,f),l=h.get();a=g.getDataConversions(a,b,f,l);a=k(d,a);for(var m=Array(c.length),n=0;n<c.length;n++)m[n]=a(l,c[n]);h.set(m);"count"===d.func&&e.pushUnique(b._arrayAttrs,f)}}function k(a,c){var d=c.d2c,e=c.c2d;switch(a.func){case "count":return m;case "first":return h;case "last":return b;case "sum":return function(a,b){for(var c=0,g=0;g<b.length;g++){var h=
d(a[b[g]]);h!==f&&(c+=h)}return e(c)};case "avg":return function(a,b){for(var c=0,g=0,h=0;h<b.length;h++){var k=d(a[b[h]]);k!==f&&(c+=k,g++)}return g?e(c/g):f};case "min":return function(a,b){for(var c=Infinity,g=0;g<b.length;g++){var h=d(a[b[g]]);h!==f&&(c=Math.min(c,h))}return Infinity===c?f:e(c)};case "max":return function(a,b){for(var c=-Infinity,g=0;g<b.length;g++){var h=d(a[b[g]]);h!==f&&(c=Math.max(c,h))}return-Infinity===c?f:e(c)};case "range":return function(a,b){for(var c=Infinity,g=-Infinity,
h=0;h<b.length;h++){var k=d(a[b[h]]);k!==f&&(c=Math.min(c,k),g=Math.max(g,k))}return-Infinity===g||Infinity===c?f:e(g-c)};case "change":return function(a,b){var c=d(a[b[0]]);a=d(a[b[b.length-1]]);return c===f||a===f?f:e(a-c)};case "median":return function(a,b){for(var c=[],g=0;g<b.length;g++){var h=d(a[b[g]]);h!==f&&c.push(h)}if(!c.length)return f;c.sort();a=(c.length-1)/2;return e((c[Math.floor(a)]+c[Math.ceil(a)])/2)};case "mode":return function(a,b){for(var c={},g=0,h=f,k=0;k<b.length;k++){var l=
d(a[b[k]]);if(l!==f){var m=c[l]=(c[l]||0)+1;m>g&&(g=m,h=l)}}return g?e(h):f};case "rms":return function(a,b){for(var c=0,g=0,h=0;h<b.length;h++){var k=d(a[b[h]]);k!==f&&(c+=k*k,g++)}return g?e(Math.sqrt(c/g)):f};case "stddev":return function(b,c){var e=0,g=0,h=1,k=f,l;for(l=0;l<c.length&&k===f;l++)k=d(b[c[l]]);if(k===f)return f;for(;l<c.length;l++){var m=d(b[c[l]]);m!==f&&(m-=k,e+=m,g+=m*m,h++)}return(b="sample"===a.funcmode?h-1:h)?Math.sqrt((g-e*e/h)/b):0}}}function m(a,b){return b.length}function h(a,
b){return a[b[0]]}function b(a,b){return a[b[b.length-1]]}var g=a("../plots/cartesian/axes"),e=a("../lib"),t=a("../plot_api/plot_schema"),l=a("./helpers").pointsAccessorFunction,f=a("../constants/numerical").BADNUM;p.moduleType="transform";p.name="aggregate";var d=p.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},
func:{valType:"enumerated",values:"count sum avg median mode rms stddev min max first last change range".split(" "),dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},c=d.aggregations;p.supplyDefaults=function(a,b){function f(a,b){return e.coerce(m[h],n,c,a,b)}var g={},h;if(!e.coerce(a,g,d,"enabled",void 0))return g;b=t.findArrayAttributes(b);
var k={};for(h=0;h<b.length;h++)k[b[h]]=1;var l=e.coerce(a,g,d,"groups",void 0);if(!Array.isArray(l)){if(!k[l])return g.enabled=!1,g;k[l]=0}var m=a.aggregations||[];a=g.aggregations=Array(m.length);for(h=0;h<m.length;h++){var n={_index:h};l=f("target");var p=f("func");f("enabled")&&l&&(k[l]||"count"===p&&void 0===k[l])?("stddev"===p&&f("funcmode"),k[l]=0,a[h]=n):a[h]={enabled:!1,_index:h}}for(h=0;h<b.length;h++)k[b[h]]&&a.push({target:b[h],func:c.func.dflt,enabled:!0,_index:-1});return g};p.calcTransform=
function(a,b,c){if(c.enabled){var d=c.groups,f=e.getTargetArray(b,{target:d});if(f){var g,h={},k={},m=[],p=l(b.transforms,c),q=f.length;b._length&&(q=Math.min(q,b._length));for(g=0;g<q;g++){var r=f[g];var t=h[r];void 0===t?(h[r]=m.length,t=[g],m.push(t),k[h[r]]=p(g)):(m[t].push(g),k[h[r]]=(k[h[r]]||[]).concat(p(g)))}c._indexToPoints=k;c=c.aggregations;for(g=0;g<c.length;g++)n(a,b,m,c[g]);"string"===typeof d&&n(a,b,m,{target:d,func:"first",enabled:!0});b._length=m.length}}}},{"../constants/numerical":692,
"../lib":716,"../plot_api/plot_schema":753,"../plots/cartesian/axes":764,"./helpers":1299}],1297:[function(a,q,p){function n(a,b,d){var c=a.operation,f=a.value,h=Array.isArray(f),k=function(c){return b(c,0,a.valuecalendar)},l=function(a){return b(a,0,d)},m;-1!==g.indexOf(c)?m=h?k(f[0]):k(f):-1!==e.indexOf(c)?m=h?[k(f[0]),k(f[1])]:[k(f),k(f)]:-1!==t.indexOf(c)&&(m=h?f.map(k):[k(f)]);switch(c){case "\x3d":return function(a){return l(a)===m};case "!\x3d":return function(a){return l(a)!==m};case "\x3c":return function(a){return l(a)<
m};case "\x3c\x3d":return function(a){return l(a)<=m};case "\x3e":return function(a){return l(a)>m};case "\x3e\x3d":return function(a){return l(a)>=m};case "[]":return function(a){a=l(a);return a>=m[0]&&a<=m[1]};case "()":return function(a){a=l(a);return a>m[0]&&a<m[1]};case "[)":return function(a){a=l(a);return a>=m[0]&&a<m[1]};case "(]":return function(a){a=l(a);return a>m[0]&&a<=m[1]};case "][":return function(a){a=l(a);return a<=m[0]||a>=m[1]};case ")(":return function(a){a=l(a);return a<m[0]||
a>m[1]};case "](":return function(a){a=l(a);return a<=m[0]||a>m[1]};case ")[":return function(a){a=l(a);return a<m[0]||a>=m[1]};case "{}":return function(a){return-1!==m.indexOf(l(a))};case "}{":return function(a){return-1===m.indexOf(l(a))}}}var k=a("../lib"),m=a("../registry"),h=a("../plots/cartesian/axes"),b=a("./helpers").pointsAccessorFunction;a=a("../constants/filter_ops");var g=a.COMPARISON_OPS,e=a.INTERVAL_OPS,t=a.SET_OPS;p.moduleType="transform";p.name="filter";p.attributes={enabled:{valType:"boolean",
dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(g).concat(e).concat(t),dflt:"\x3d",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"};p.supplyDefaults=function(a){function b(b,c){return k.coerce(a,d,p.attributes,b,c)}var d={};if(b("enabled")){var c=b("target");if(k.isArrayOrTypedArray(c)&&0===c.length)return d.enabled=
!1,d;b("preservegaps");b("operation");b("value");c=m.getComponentMethod("calendars","handleDefaults");c(a,d,"valuecalendar",null);c(a,d,"targetcalendar",null)}return d};p.calcTransform=function(a,e,d){function c(a,b){for(var c=0;c<p.length;c++){var d=k.nestedProperty(e,p[c]);a(d,b)}}if(d.enabled){var f=k.getTargetArray(e,d);if(f){var g=d.target,l=f.length;e._length&&(l=Math.min(l,e._length));var m=d.targetcalendar,p=e._arrayAttrs,q=d.preservegaps;if("string"===typeof g){var t=k.nestedProperty(e,g+
"calendar").get();t&&(m=t)}a=h.getDataToCoordFunc(a,e,g,f);m=n(d,a,m);var x={};a={};g=0;if(q){var C=function(a){x[a.astr]=k.extendDeep([],a.get());a.set(Array(l))};t=function(a,b){var c=x[a.astr][b];a.get()[b]=c}}else C=function(a){x[a.astr]=k.extendDeep([],a.get());a.set([])},t=function(a,b){b=x[a.astr][b];a.get().push(b)};c(C);C=b(e.transforms,d);for(var B=0;B<l;B++)m(f[B])?(c(t,B),a[g++]=C(B)):q&&g++;d._indexToPoints=a;e._length=g}}}},{"../constants/filter_ops":688,"../lib":716,"../plots/cartesian/axes":764,
"../registry":845,"./helpers":1299}],1298:[function(a,q,p){var n=a("../lib"),k=a("../plot_api/plot_schema"),m=a("../plots/plots"),h=a("./helpers").pointsAccessorFunction;p.moduleType="transform";p.name="groupby";p.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},
editType:"calc"},editType:"calc"};p.supplyDefaults=function(a,g,e){g={};if(!n.coerce(a,g,p.attributes,"enabled",void 0))return g;n.coerce(a,g,p.attributes,"groups",void 0);n.coerce(a,g,p.attributes,"nameformat",1<e._dataLength?"%{group} (%{trace})":"%{group}");e=a.styles;var b=g.styles=[];if(e)for(a=0;a<e.length;a++){var h=b[a]={};n.coerce(e[a],b[a],p.attributes.styles,"target");var f=n.coerce(e[a],b[a],p.attributes.styles,"value");n.isPlainObject(f)?h.value=n.extendDeep({},f):f&&delete h.value}return g};
p.transform=function(a,g){var b,p=[];for(b=0;b<a.length;b++){var l=void 0,f;var d=a[b];var c=g.transform;var q=g.transformIndex;var u=d.transforms[q].groups,v=h(d.transforms,c);if(n.isArrayOrTypedArray(u)&&0!==u.length){var w=n.filterUnique(u),y=Array(w.length),A=u.length,z=k.findArrayAttributes(d),x=c.styles||[],C={};for(f=0;f<x.length;f++)C[x[f].target]=x[f].value;c.styles&&(l=n.keyedContainer(c,"styles","target","value.name"));x={};var B={};for(f=0;f<w.length;f++){var D=w[f];x[D]=f;B[D]=0;var G=
y[f]=n.extendDeepNoArrays({},d);G._group=D;G.transforms[q]._indexToPoints={};var E=null;l&&(E=l.get(D));G.name=E||""===E?E:n.templateString(c.nameformat,{trace:d.name,group:D});E=G.transforms;G.transforms=[];for(D=0;D<E.length;D++)G.transforms[D]=n.extendDeepNoArrays({},E[D]);for(D=0;D<z.length;D++)n.nestedProperty(G,z[D]).set([])}for(f=0;f<z.length;f++){c=z[f];D=0;for(l=[];D<w.length;D++)l[D]=n.nestedProperty(y[D],c).get();c=n.nestedProperty(d,c).get();for(D=0;D<A;D++)l[x[u[D]]].push(c[D])}for(D=
0;D<A;D++)G=y[x[u[D]]],G.transforms[q]._indexToPoints[B[u[D]]]=v(D),B[u[D]]++;for(f=0;f<w.length;f++)D=w[f],G=y[f],m.clearExpandedTraceDefaultColors(G),n.extendDeepNoArrays(G,C[D]||{});d=y}else d=[d];for(q=0;q<d.length;q++)p.push(d[q])}return p}},{"../lib":716,"../plot_api/plot_schema":753,"../plots/plots":825,"./helpers":1299}],1299:[function(a,q,p){p.pointsAccessorFunction=function(a,k){for(var m,h,b=0;b<a.length;b++){m=a[b];if(m===k)break;m._indexToPoints&&!1!==m.enabled&&(h=m._indexToPoints)}return h?
function(a){return h[a]}:function(a){return[a]}}},{}],1300:[function(a,q,p){function n(a,g){switch(a.order){case "ascending":return function(a,b){return g(a.v)-g(b.v)};case "descending":return function(a,b){return g(b.v)-g(a.v)}}}var k=a("../lib"),m=a("../plots/cartesian/axes"),h=a("./helpers").pointsAccessorFunction;p.moduleType="transform";p.name="sort";p.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},
order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"};p.supplyDefaults=function(a){var b={};k.coerce(a,b,p.attributes,"enabled",void 0)&&(k.coerce(a,b,p.attributes,"target",void 0),k.coerce(a,b,p.attributes,"order",void 0));return b};p.calcTransform=function(a,g,e){if(e.enabled){var b=k.getTargetArray(g,e);if(b){var l=e.target,f=b.length;g._length&&(f=Math.min(f,g._length));var d=g._arrayAttrs;l=m.getDataToCoordFunc(a,g,l,b);var c=f,p=Array(c);
a=Array(c);var q;for(q=0;q<c;q++)p[q]={v:b[q],i:q};p.sort(n(e,l));for(q=0;q<c;q++)a[q]=p[q].i;b=h(g.transforms,e);l={};for(c=0;c<d.length;c++){q=k.nestedProperty(g,d[c]);var v=q.get(),w=Array(f);for(p=0;p<f;p++)w[p]=v[a[p]];q.set(w)}for(p=0;p<f;p++)l[p]=b(a[p]);e._indexToPoints=l;g._length=f}}}},{"../lib":716,"../plots/cartesian/axes":764,"./helpers":1299}]},{},[26])(26)})};
shadow$provide[24]=function(pa,va,Fa,qa){function a(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(qa,"__esModule",{value:!0});qa["default"]=void 0;pa=a(va(22));va=a(va(23));va=(0,pa["default"])(va["default"]);qa["default"]=va};
shadow$provide[25]=function(pa,va,Fa,qa){(function(a,q){"object"===typeof qa&&"undefined"!==typeof Fa?q(qa):"function"===typeof define&&define.amd?define(["exports"],q):(a=a||self,q(a.d3=a.d3||{}))})(this,function(a){function q(a,b,c){a.prototype=b.prototype=c;c.constructor=a}function p(a,b){a=Object.create(a.prototype);for(var c in b)a[c]=b[c];return a}function n(){}function k(){return this.rgb().formatHex()}function m(){return this.rgb().formatRgb()}function h(a){var c,d;a=(a+"").trim().toLowerCase();
return(c=I.exec(a))?(d=c[1].length,c=parseInt(c[1],16),6===d?b(c):3===d?new l(c>>8&15|c>>4&240,c>>4&15|c&240,(c&15)<<4|c&15,1):8===d?new l(c>>24&255,c>>16&255,c>>8&255,(c&255)/255):4===d?new l(c>>12&15|c>>8&240,c>>8&15|c>>4&240,c>>4&15|c&240,((c&15)<<4|c&15)/255):null):(c=N.exec(a))?new l(c[1],c[2],c[3],1):(c=O.exec(a))?new l(255*c[1]/100,255*c[2]/100,255*c[3]/100,1):(c=P.exec(a))?g(c[1],c[2],c[3],c[4]):(c=Q.exec(a))?g(255*c[1]/100,255*c[2]/100,255*c[3]/100,c[4]):(c=T.exec(a))?r(c[1],c[2]/100,c[3]/
100,1):(c=V.exec(a))?r(c[1],c[2]/100,c[3]/100,c[4]):Y.hasOwnProperty(a)?b(Y[a]):"transparent"===a?new l(NaN,NaN,NaN,0):null}function b(a){return new l(a>>16&255,a>>8&255,a&255,1)}function g(a,b,c,d){0>=d&&(a=b=c=NaN);return new l(a,b,c,d)}function e(a){a instanceof n||(a=h(a));if(!a)return new l;a=a.rgb();return new l(a.r,a.g,a.b,a.opacity)}function t(a,b,c,d){return 1===arguments.length?e(a):new l(a,b,c,null==d?1:d)}function l(a,b,c,d){this.r=+a;this.g=+b;this.b=+c;this.opacity=+d}function f(){return"#"+
c(this.r)+c(this.g)+c(this.b)}function d(){var a=this.opacity;a=isNaN(a)?1:Math.max(0,Math.min(1,a));return(1===a?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}function c(a){a=Math.max(0,Math.min(255,Math.round(a)||0));return(16>a?"0":"")+a.toString(16)}function r(a,b,c,d){0>=d?a=b=c=NaN:0>=c||1<=c?a=b=NaN:0>=b&&(a=NaN);return new w(a,b,c,d)}function u(a){if(a instanceof
w)return new w(a.h,a.s,a.l,a.opacity);a instanceof n||(a=h(a));if(!a)return new w;if(a instanceof w)return a;a=a.rgb();var b=a.r/255,c=a.g/255,d=a.b/255,e=Math.min(b,c,d),f=Math.max(b,c,d),g=NaN,k=f-e,l=(f+e)/2;k?(g=b===f?(c-d)/k+6*(c<d):c===f?(d-b)/k+2:(b-c)/k+4,k/=.5>l?f+e:2-f-e,g*=60):k=0<l&&1>l?0:g;return new w(g,k,l,a.opacity)}function v(a,b,c,d){return 1===arguments.length?u(a):new w(a,b,c,null==d?1:d)}function w(a,b,c,d){this.h=+a;this.s=+b;this.l=+c;this.opacity=+d}function y(a,b,c){return 255*
(60>a?b+(c-b)*a/60:180>a?c:240>a?b+(c-b)*(240-a)/60:b)}function A(a){if(a instanceof x)return new x(a.l,a.a,a.b,a.opacity);if(a instanceof L)return J(a);a instanceof l||(a=e(a));var b=G(a.r),c=G(a.g),d=G(a.b),f=C(.2225045*b+.7168786*c+.0606169*d);if(b===c&&c===d)var g=b=f;else g=C((.4360747*b+.3850649*c+.1430804*d)/.96422),b=C((.0139322*b+.0971045*c+.7141733*d)/.82521);return new x(116*f-16,500*(g-f),200*(f-b),a.opacity)}function z(a,b,c,d){return 1===arguments.length?A(a):new x(a,b,c,null==d?1:d)}
function x(a,b,c,d){this.l=+a;this.a=+b;this.b=+c;this.opacity=+d}function C(a){return a>ea?Math.pow(a,1/3):a/X+R}function B(a){return a>U?a*a*a:X*(a-R)}function D(a){return 255*(.0031308>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function G(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function E(a){if(a instanceof L)return new L(a.h,a.c,a.l,a.opacity);a instanceof x||(a=A(a));if(0===a.a&&0===a.b)return new L(NaN,0<a.l&&100>a.l?0:NaN,a.l,a.opacity);var b=Math.atan2(a.b,a.a)*Z;return new L(0>
b?b+360:b,Math.sqrt(a.a*a.a+a.b*a.b),a.l,a.opacity)}function F(a,b,c,d){return 1===arguments.length?E(a):new L(a,b,c,null==d?1:d)}function L(a,b,c,d){this.h=+a;this.c=+b;this.l=+c;this.opacity=+d}function J(a){if(isNaN(a.h))return new x(a.l,0,0,a.opacity);var b=a.h*ca;return new x(a.l,Math.cos(b)*a.c,Math.sin(b)*a.c,a.opacity)}function H(a,b,c,d){if(1===arguments.length){var f=a;if(f instanceof K)f=new K(f.h,f.s,f.l,f.opacity);else{f instanceof l||(f=e(f));var g=f.g/255,h=f.b/255,k=(fa*h+f.r/255*
-1.7884503806-3.5172982438*g)/(fa+-1.7884503806-3.5172982438);h-=k;var m=(1.97294*(g-k)- -.29227*h)/-.90649;h=(g=Math.sqrt(m*m+h*h)/(1.97294*k*(1-k)))?Math.atan2(m,h)*Z-120:NaN;f=new K(0>h?h+360:h,g,k,f.opacity)}}else f=new K(a,b,c,null==d?1:d);return f}function K(a,b,c,d){this.h=+a;this.s=+b;this.l=+c;this.opacity=+d}var M=1/.7,I=/^#([0-9a-f]{3,8})$/,N=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,O=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,
P=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,Q=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,T=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,V=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,
Y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,
darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,
hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,
linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,
palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,
turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};q(n,h,{copy:function(a){return Object.assign(new this.constructor,this,a)},displayable:function(){return this.rgb().displayable()},hex:k,formatHex:k,formatHsl:function(){return u(this).formatHsl()},formatRgb:m,toString:m});q(l,t,p(n,{brighter:function(a){a=null==a?M:Math.pow(M,a);return new l(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,
a);return new l(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&255.5>this.g&&-.5<=this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:f,formatHex:f,formatRgb:d,toString:d}));q(w,v,p(n,{brighter:function(a){a=null==a?M:Math.pow(M,a);return new w(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new w(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=
this.h%360+360*(0>this.h),b=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l;b=c+(.5>c?c:1-c)*b;c=2*c-b;return new l(y(240<=a?a-240:a+120,c,b),y(a,c,b),y(120>a?a+240:a-120,c,b),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity},formatHsl:function(){var a=this.opacity;a=isNaN(a)?1:Math.max(0,Math.min(1,a));return(1===a?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===a?")":", "+a+")")}}));
var ca=Math.PI/180,Z=180/Math.PI,R=4/29,U=6/29,X=3*U*U,ea=U*U*U;q(x,z,p(n,{brighter:function(a){return new x(this.l+18*(null==a?1:a),this.a,this.b,this.opacity)},darker:function(a){return new x(this.l-18*(null==a?1:a),this.a,this.b,this.opacity)},rgb:function(){var a=(this.l+16)/116,b=isNaN(this.a)?a:a+this.a/500,c=isNaN(this.b)?a:a-this.b/200;b=.96422*B(b);a=1*B(a);c=.82521*B(c);return new l(D(3.1338561*b-1.6168667*a-.4906146*c),D(-.9787684*b+1.9161415*a+.033454*c),D(.0719453*b-.2289914*a+1.4052427*
c),this.opacity)}}));q(L,F,p(n,{brighter:function(a){return new L(this.h,this.c,this.l+18*(null==a?1:a),this.opacity)},darker:function(a){return new L(this.h,this.c,this.l-18*(null==a?1:a),this.opacity)},rgb:function(){return J(this).rgb()}}));var fa=1.78277*-.29227-.1347134789;q(K,H,p(n,{brighter:function(a){a=null==a?M:Math.pow(M,a);return new K(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new K(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=
isNaN(this.h)?0:(this.h+120)*ca,b=+this.l,c=isNaN(this.s)?0:this.s*b*(1-b),d=Math.cos(a);a=Math.sin(a);return new l(255*(b+c*(-.14861*d+1.78277*a)),255*(b+c*(-.29227*d+-.90649*a)),255*(b+1.97294*c*d),this.opacity)}}));a.color=h;a.cubehelix=H;a.gray=function(a,b){return new x(a,0,0,null==b?1:b)};a.hcl=F;a.hsl=v;a.lab=z;a.lch=function(a,b,c,d){return 1===arguments.length?E(a):new L(c,b,a,null==d?1:d)};a.rgb=t;Object.defineProperty(a,"__esModule",{value:!0})})};
shadow$provide[26]=function(pa,va,Fa,qa){(function(a,q){"object"===typeof qa&&"undefined"!==typeof Fa?q(qa,va(25)):"function"===typeof define&&define.amd?define(["exports","d3-color"],q):(a=a||self,q(a.d3=a.d3||{},a.d3))})(this,function(a,q){function p(a,b,c,d,e){var f=a*a,g=f*a;return((1-3*a+3*f-g)*b+(4-6*f+3*g)*c+(1+3*a+3*f-3*g)*d+g*e)/6}function n(a){var b=a.length-1;return function(c){var d=0>=c?c=0:1<=c?(c=1,b-1):Math.floor(c*b),e=a[d],f=a[d+1];return p((c-d/b)*b,0<d?a[d-1]:2*e-f,e,f,d<b-1?a[d+
2]:2*f-e)}}function k(a){var b=a.length;return function(c){var d=Math.floor((0>(c%=1)?++c:c)*b);return p((c-d/b)*b,a[(d+b-1)%b],a[d%b],a[(d+1)%b],a[(d+2)%b])}}function m(a){return function(){return a}}function h(a,b){return function(c){return a+c*b}}function b(a,b,c){return a=Math.pow(a,c),b=Math.pow(b,c)-a,c=1/c,function(d){return Math.pow(a+d*b,c)}}function g(a,b){var c=b-a;return c?h(a,180<c||-180>c?c-360*Math.round(c/360):c):m(isNaN(a)?b:a)}function e(a){return 1===(a=+a)?t:function(c,d){return d-
c?b(c,d,a):m(isNaN(c)?d:c)}}function t(a,b){var c=b-a;return c?h(a,c):m(isNaN(a)?b:a)}function l(a){return function(b){var c=b.length,d=Array(c),e=Array(c),f=Array(c),g;for(g=0;g<c;++g){var h=q.rgb(b[g]);d[g]=h.r||0;e[g]=h.g||0;f[g]=h.b||0}d=a(d);e=a(e);f=a(f);h.opacity=1;return function(a){h.r=d(a);h.g=e(a);h.b=f(a);return h+""}}}function f(a,b){b||(b=[]);var c=a?Math.min(b.length,a.length):0,d=b.slice(),e;return function(f){for(e=0;e<c;++e)d[e]=a[e]*(1-f)+b[e]*f;return d}}function d(a){return ArrayBuffer.isView(a)&&
!(a instanceof DataView)}function c(a,b){var c=b?b.length:0,d=a?Math.min(c,a.length):0,e=Array(d),f=Array(c),g;for(g=0;g<d;++g)e[g]=z(a[g],b[g]);for(;g<c;++g)f[g]=b[g];return function(a){for(g=0;g<d;++g)f[g]=e[g](a);return f}}function r(a,b){var c=new Date;return a=+a,b=+b,function(d){return c.setTime(a*(1-d)+b*d),c}}function u(a,b){return a=+a,b=+b,function(c){return a*(1-c)+b*c}}function v(a,b){var c={},d={},e;if(null===a||"object"!==typeof a)a={};if(null===b||"object"!==typeof b)b={};for(e in b)e in
a?c[e]=z(a[e],b[e]):d[e]=b[e];return function(a){for(e in c)d[e]=c[e](a);return d}}function w(a){return function(){return a}}function y(a){return function(b){return a(b)+""}}function A(a,b){var c=H.lastIndex=K.lastIndex=0,d,e,f,g=-1,h=[],k=[];a+="";for(b+="";(d=H.exec(a))&&(e=K.exec(b));)(f=e.index)>c&&(f=b.slice(c,f),h[g]?h[g]+=f:h[++g]=f),(d=d[0])===(e=e[0])?h[g]?h[g]+=e:h[++g]=e:(h[++g]=null,k.push({i:g,x:u(d,e)})),c=K.lastIndex;c<b.length&&(f=b.slice(c),h[g]?h[g]+=f:h[++g]=f);return 2>h.length?
k[0]?y(k[0].x):w(b):(b=k.length,function(a){for(var c=0,d;c<b;++c)h[(d=k[c]).i]=d.x(a);return h.join("")})}function z(a,b){var e=typeof b,g;return null==b||"boolean"===e?m(b):("number"===e?u:"string"===e?(g=q.color(b))?(b=g,F):A:b instanceof q.color?F:b instanceof Date?r:d(b)?f:Array.isArray(b)?c:"function"!==typeof b.valueOf&&"function"!==typeof b.toString||isNaN(b)?v:u)(a,b)}function x(a,b,c,d,e,f){var g,h,k;if(g=Math.sqrt(a*a+b*b))a/=g,b/=g;if(k=a*c+b*d)c-=a*k,d-=b*k;if(h=Math.sqrt(c*c+d*d))c/=
h,d/=h,k/=h;a*d<b*c&&(a=-a,b=-b,k=-k,g=-g);return{translateX:e,translateY:f,rotate:Math.atan2(b,a)*M,skewX:Math.atan(k)*M,scaleX:g,scaleY:h}}function C(a,b,c,d){function e(a){return a.length?a.pop()+" ":""}function f(a,d,e,f,g,h){a!==e||d!==f?(g=g.push("translate(",null,b,null,c),h.push({i:g-4,x:u(a,e)},{i:g-2,x:u(d,f)})):(e||f)&&g.push("translate("+e+b+f+c)}function g(a,b,c,f){a!==b?(180<a-b?b+=360:180<b-a&&(a+=360),f.push({i:c.push(e(c)+"rotate(",null,d)-2,x:u(a,b)})):b&&c.push(e(c)+"rotate("+b+
d)}function h(a,b,c,f){a!==b?f.push({i:c.push(e(c)+"skewX(",null,d)-2,x:u(a,b)}):b&&c.push(e(c)+"skewX("+b+d)}function k(a,b,c,d,f,g){a!==c||b!==d?(f=f.push(e(f)+"scale(",null,",",null,")"),g.push({i:f-4,x:u(a,c)},{i:f-2,x:u(b,d)})):1===c&&1===d||f.push(e(f)+"scale("+c+","+d+")")}return function(b,c){var d=[],e=[];b=a(b);c=a(c);f(b.translateX,b.translateY,c.translateX,c.translateY,d,e);g(b.rotate,c.rotate,d,e);h(b.skewX,c.skewX,d,e);k(b.scaleX,b.scaleY,c.scaleX,c.scaleY,d,e);b=c=null;return function(a){for(var b=
-1,c=e.length,f;++b<c;)d[(f=e[b]).i]=f.x(a);return d.join("")}}}function B(a){return((a=Math.exp(a))+1/a)/2}function D(a){return function(b,c){var d=a((b=q.hsl(b)).h,(c=q.hsl(c)).h),e=t(b.s,c.s),f=t(b.l,c.l),g=t(b.opacity,c.opacity);return function(a){b.h=d(a);b.s=e(a);b.l=f(a);b.opacity=g(a);return b+""}}}function G(a){return function(b,c){var d=a((b=q.hcl(b)).h,(c=q.hcl(c)).h),e=t(b.c,c.c),f=t(b.l,c.l),g=t(b.opacity,c.opacity);return function(a){b.h=d(a);b.c=e(a);b.l=f(a);b.opacity=g(a);return b+
""}}}function E(a){return function ma(b){function c(c,d){var e=a((c=q.cubehelix(c)).h,(d=q.cubehelix(d)).h),f=t(c.s,d.s),g=t(c.l,d.l),h=t(c.opacity,d.opacity);return function(a){c.h=e(a);c.s=f(a);c.l=g(Math.pow(a,b));c.opacity=h(a);return c+""}}b=+b;c.gamma=ma;return c}(1)}var F=function da(a){function b(a,b){var d=c((a=q.rgb(a)).r,(b=q.rgb(b)).r),e=c(a.g,b.g),f=c(a.b,b.b),g=t(a.opacity,b.opacity);return function(b){a.r=d(b);a.g=e(b);a.b=f(b);a.opacity=g(b);return a+""}}var c=e(a);b.gamma=da;return b}(1),
L=l(n),J=l(k),H=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,K=new RegExp(H.source,"g"),M=180/Math.PI,I={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},N,O,P,Q,T=C(function(a){if("none"===a)return I;N||(N=document.createElement("DIV"),O=document.documentElement,P=document.defaultView);N.style.transform=a;a=P.getComputedStyle(O.appendChild(N),null).getPropertyValue("transform");O.removeChild(N);a=a.slice(7,-1).split(",");return x(+a[0],+a[1],+a[2],+a[3],+a[4],+a[5])},"px, ","px)","deg)"),
V=C(function(a){if(null==a)return I;Q||(Q=document.createElementNS("http://www.w3.org/2000/svg","g"));Q.setAttribute("transform",a);if(!(a=Q.transform.baseVal.consolidate()))return I;a=a.matrix;return x(a.a,a.b,a.c,a.d,a.e,a.f)},", ",")",")"),Y=Math.SQRT2,ca=D(g),Z=D(t),R=G(g),U=G(t),X=E(g),ea=E(t);a.interpolate=z;a.interpolateArray=function(a,b){return(d(b)?f:c)(a,b)};a.interpolateBasis=n;a.interpolateBasisClosed=k;a.interpolateCubehelix=X;a.interpolateCubehelixLong=ea;a.interpolateDate=r;a.interpolateDiscrete=
function(a){var b=a.length;return function(c){return a[Math.max(0,Math.min(b-1,Math.floor(c*b)))]}};a.interpolateHcl=R;a.interpolateHclLong=U;a.interpolateHsl=ca;a.interpolateHslLong=Z;a.interpolateHue=function(a,b){var c=g(+a,+b);return function(a){a=c(a);return a-360*Math.floor(a/360)}};a.interpolateLab=function(a,b){var c=t((a=q.lab(a)).l,(b=q.lab(b)).l),d=t(a.a,b.a),e=t(a.b,b.b),f=t(a.opacity,b.opacity);return function(b){a.l=c(b);a.a=d(b);a.b=e(b);a.opacity=f(b);return a+""}};a.interpolateNumber=
u;a.interpolateNumberArray=f;a.interpolateObject=v;a.interpolateRgb=F;a.interpolateRgbBasis=L;a.interpolateRgbBasisClosed=J;a.interpolateRound=function(a,b){return a=+a,b=+b,function(c){return Math.round(a*(1-c)+b*c)}};a.interpolateString=A;a.interpolateTransformCss=T;a.interpolateTransformSvg=V;a.interpolateZoom=function(a,b){var c=a[0],d=a[1],e=a[2];a=b[2];var f=b[0]-c,g=b[1]-d,h=f*f+g*g;if(1E-12>h){var k=Math.log(a/e)/Y;a=function(a){return[c+a*f,d+a*g,e*Math.exp(Y*a*k)]}}else{var l=Math.sqrt(h);
b=(a*a-e*e+4*h)/(4*e*l);a=(a*a-e*e-4*h)/(4*a*l);var m=Math.log(Math.sqrt(b*b+1)-b);k=(Math.log(Math.sqrt(a*a+1)-a)-m)/Y;a=function(a){a*=k;var b=B(m),h=Y*a+m;var n=((h=Math.exp(2*h))-1)/(h+1);var p=m;h=((p=Math.exp(p))-1/p)/2;n=e/(2*l)*(b*n-h);return[c+n*f,d+n*g,e*b/B(Y*a+m)]}}a.duration=1E3*k;return a};a.piecewise=function(a,b){for(var c=0,d=b.length-1,e=b[0],f=Array(0>d?0:d);c<d;)f[c]=a(e,e=b[++c]);return function(a){var b=Math.max(0,Math.min(d-1,Math.floor(a*=d)));return f[b](a-b)}};a.quantize=
function(a,b){for(var c=Array(b),d=0;d<b;++d)c[d]=a(d/(b-1));return c};Object.defineProperty(a,"__esModule",{value:!0})})};
shadow$provide[27]=function(pa,va,Fa,qa){(function(a,q){"object"===typeof qa&&"undefined"!==typeof Fa?q(qa,va(26),va(25)):"function"===typeof define&&define.amd?define(["exports","d3-interpolate","d3-color"],q):(a=a||self,q(a.d3=a.d3||{},a.d3,a.d3))})(this,function(a,q,p){function n(a){for(var b=a.length/6|0,c=Array(b),d=0;d<b;)c[d]="#"+a.slice(6*d,6*++d);return c}function k(a){return q.interpolateRgbBasis(a[a.length-1])}function m(a){var b=a.length;return function(c){return a[Math.max(0,Math.min(b-
1,Math.floor(c*b)))]}}var h=n("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),b=n("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),g=n("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),e=n("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),t=n("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),l=n("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),f=n("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),d=n("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),
c=n("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),r=n("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),u=Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30",
"5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(n),v=k(u),w=Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(n),
y=k(w),A=Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(n),z=k(A),x=Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101",
"5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(n),C=k(x),B=Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac",
"b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(n),D=k(B),G=Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d",
"b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(n),E=k(G),F=Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695",
"a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(n),L=k(F),J=Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(n),
H=k(J),K=Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(n),M=k(K),I=Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45",
"edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(n),N=k(I),O=Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(n),
P=k(O),Q=Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(n),T=k(Q),V=Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000",
"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(n),Y=k(V),ca=Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(n),Z=k(ca),R=Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d",
"f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(n),U=k(R),X=Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(n),ea=k(X),fa=Array(3).concat("fde0ddfa9fb5c51b8a",
"feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(n),la=k(fa),da=Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84",
"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(n),ma=k(da),aa=Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(n),na=k(aa),ha=Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404",
"ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(n),ja=k(ha),oa=Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(n),ka=k(oa),ia=Array(3).concat("deebf79ecae13182bd",
"eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(n),pa=k(ia),qa=Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32",
"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(n),sa=k(qa),W=Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(n),va=k(W),Da=Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f",
"f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(n),ra=k(Da),ua=Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(n),Aa=k(ua),wa=Array(3).concat("fee6cefdae6be6550d",
"feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(n),Fa=k(wa),ba=q.interpolateCubehelixLong(p.cubehelix(300,.5,0),p.cubehelix(-240,.5,1)),Ea=q.interpolateCubehelixLong(p.cubehelix(-100,.75,.35),p.cubehelix(80,1.5,.8)),Ba=q.interpolateCubehelixLong(p.cubehelix(260,.75,.35),p.cubehelix(80,1.5,.8)),
Na=p.cubehelix(),Ja=p.rgb(),Lb=Math.PI/3,Mb=2*Math.PI/3;p=m(n("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));
var Pa=m(n("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),
zb=m(n("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),
cb=m(n("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));
a.interpolateBlues=pa;a.interpolateBrBG=v;a.interpolateBuGn=N;a.interpolateBuPu=P;a.interpolateCividis=function(a){a=Math.max(0,Math.min(1,a));return"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-a*(35.34-a*(2381.73-a*(6402.7-a*(7024.72-2710.57*a)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+a*(170.73+a*(52.82-a*(131.46-a*(176.58-67.37*a)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+a*(442.36-a*(2482.43-a*(6167.24-a*(6614.94-2475.67*a)))))))+")"};a.interpolateCool=Ba;a.interpolateCubehelixDefault=
ba;a.interpolateGnBu=T;a.interpolateGreens=sa;a.interpolateGreys=va;a.interpolateInferno=zb;a.interpolateMagma=Pa;a.interpolateOrRd=Y;a.interpolateOranges=Fa;a.interpolatePRGn=y;a.interpolatePiYG=z;a.interpolatePlasma=cb;a.interpolatePuBu=U;a.interpolatePuBuGn=Z;a.interpolatePuOr=C;a.interpolatePuRd=ea;a.interpolatePurples=ra;a.interpolateRainbow=function(a){if(0>a||1<a)a-=Math.floor(a);var b=Math.abs(a-.5);Na.h=360*a-100;Na.s=1.5-1.5*b;Na.l=.8-.9*b;return Na+""};a.interpolateRdBu=D;a.interpolateRdGy=
E;a.interpolateRdPu=la;a.interpolateRdYlBu=L;a.interpolateRdYlGn=H;a.interpolateReds=Aa;a.interpolateSinebow=function(a){var b;a=(.5-a)*Math.PI;Ja.r=255*(b=Math.sin(a))*b;Ja.g=255*(b=Math.sin(a+Lb))*b;Ja.b=255*(b=Math.sin(a+Mb))*b;return Ja+""};a.interpolateSpectral=M;a.interpolateTurbo=function(a){a=Math.max(0,Math.min(1,a));return"rgb("+Math.max(0,Math.min(255,Math.round(34.61+a*(1172.33-a*(10793.56-a*(33300.12-a*(38394.49-14825.05*a)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+a*(557.33+
a*(1225.33-a*(3574.96-a*(1073.77+707.56*a)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+a*(3211.1-a*(15327.97-a*(27814-a*(22569.18-6838.66*a)))))))+")"};a.interpolateViridis=p;a.interpolateWarm=Ea;a.interpolateYlGn=na;a.interpolateYlGnBu=ma;a.interpolateYlOrBr=ja;a.interpolateYlOrRd=ka;a.schemeAccent=b;a.schemeBlues=ia;a.schemeBrBG=u;a.schemeBuGn=I;a.schemeBuPu=O;a.schemeCategory10=h;a.schemeDark2=g;a.schemeGnBu=Q;a.schemeGreens=qa;a.schemeGreys=W;a.schemeOrRd=V;a.schemeOranges=wa;a.schemePRGn=
w;a.schemePaired=e;a.schemePastel1=t;a.schemePastel2=l;a.schemePiYG=A;a.schemePuBu=R;a.schemePuBuGn=ca;a.schemePuOr=x;a.schemePuRd=X;a.schemePurples=Da;a.schemeRdBu=B;a.schemeRdGy=G;a.schemeRdPu=fa;a.schemeRdYlBu=F;a.schemeRdYlGn=J;a.schemeReds=ua;a.schemeSet1=f;a.schemeSet2=d;a.schemeSet3=c;a.schemeSpectral=K;a.schemeTableau10=r;a.schemeYlGn=aa;a.schemeYlGnBu=da;a.schemeYlOrBr=ha;a.schemeYlOrRd=oa;Object.defineProperty(a,"__esModule",{value:!0})})};
var aa="coronavirus-charts.events",ba="coronavirus-charts.subs",da="re-frame.std-interceptors",ea="secretary.core",g,fa=fa||{},ha=this||self;function ia(){}
function q(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ja(a){return"array"==q(a)}function ka(a){var b=q(a);return"array"==b||"object"==b&&"number"==typeof a.length}function la(a){return"function"==q(a)}function ma(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function na(a){return a[oa]||(a[oa]=++pa)}var oa="closure_uid_"+(1E9*Math.random()>>>0),pa=0;function qa(a,b,c){return a.call.apply(a.bind,arguments)}
function ra(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function sa(a,b,c){sa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qa:ra;return sa.apply(null,arguments)}
function ua(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}}var va=Date.now||function(){return+new Date};function wa(a,b){function c(){}c.prototype=b.prototype;a.Db=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.base=function(d,e,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[e].apply(d,h)}};function xa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,xa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}wa(xa,Error);xa.prototype.name="CustomError";function ya(a,b){xa.call(this,za(a,b))}wa(ya,xa);ya.prototype.name="AssertionError";function za(a,b){a=a.split("%s");for(var c="",d=a.length-1,e=0;e<d;e++)c+=a[e]+(e<b.length?b[e]:"%s");return c+a[d]};function Aa(a){Aa[" "](a);return a}Aa[" "]=ia;function Ba(a,b){var c=Ca;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)};function Da(a,b){this.ea=a|0;this.ba=b|0}g=Da.prototype;g.toNumber=function(){return 4294967296*this.ba+(this.ea>>>0)};g.isSafeInteger=function(){var a=this.ba>>21;return 0==a||-1==a&&!(0==this.ea&&-2097152==this.ba)};
g.toString=function(a){a=a||10;if(2>a||36<a)throw Error("radix out of range: "+a);if(this.isSafeInteger()){var b=this.toNumber();return 10==a?""+b:b.toString(a)}b=14-(a>>2);var c=Math.pow(a,b),d=Ea(c,c/4294967296);c=this.div(d);d=Math.abs(this.subtract(c.multiply(d)).toNumber());var e=10==a?""+d:d.toString(a);e.length<b&&(e="0000000000000".substr(e.length-b)+e);d=c.toNumber();return(10==a?d:d.toString(a))+e};g.isZero=function(){return 0==this.ea&&0==this.ba};
g.isOdd=function(){return 1==(this.ea&1)};g.equals=function(a){return this.ea==a.ea&&this.ba==a.ba};g.compare=function(a){return this.ba==a.ba?this.ea==a.ea?0:this.ea>>>0>a.ea>>>0?1:-1:this.ba>a.ba?1:-1};g.negate=function(){var a=~this.ea+1|0;return Ea(a,~this.ba+!a|0)};
g.add=function(a){var b=this.ba>>>16,c=this.ba&65535,d=this.ea>>>16,e=a.ba>>>16,f=a.ba&65535,h=a.ea>>>16;a=(this.ea&65535)+(a.ea&65535);h=(a>>>16)+(d+h);d=h>>>16;d+=c+f;b=(d>>>16)+(b+e)&65535;return Ea((h&65535)<<16|a&65535,b<<16|d&65535)};g.subtract=function(a){return this.add(a.negate())};
g.multiply=function(a){if(this.isZero())return this;if(a.isZero())return a;var b=this.ba>>>16,c=this.ba&65535,d=this.ea>>>16,e=this.ea&65535,f=a.ba>>>16,h=a.ba&65535,k=a.ea>>>16;a=a.ea&65535;var l=e*a;var m=(l>>>16)+d*a;var n=m>>>16;m=(m&65535)+e*k;n+=m>>>16;n+=c*a;var p=n>>>16;n=(n&65535)+d*k;p+=n>>>16;n=(n&65535)+e*h;p=p+(n>>>16)+(b*a+c*k+d*h+e*f)&65535;return Ea((m&65535)<<16|l&65535,p<<16|n&65535)};
g.div=function(a){if(a.isZero())throw Error("division by zero");if(0>this.ba){if(this.equals(Fa)){if(a.equals(Ga)||a.equals(Ha))return Fa;if(a.equals(Fa))return Ga;var b=1;if(0==b)b=this;else{var c=this.ba;b=32>b?Ea(this.ea>>>b|c<<32-b,c>>b):Ea(c>>b-32,0<=c?0:-1)}b=b.div(a).shiftLeft(1);if(b.equals(Ia))return 0>a.ba?Ga:Ha;c=this.subtract(a.multiply(b));return b.add(c.div(a))}return 0>a.ba?this.negate().div(a.negate()):this.negate().div(a).negate()}if(this.isZero())return Ia;if(0>a.ba)return a.equals(Fa)?
Ia:this.div(a.negate()).negate();var d=Ia;for(c=this;0<=c.compare(a);){b=Math.max(1,Math.floor(c.toNumber()/a.toNumber()));var e=Math.ceil(Math.log(b)/Math.LN2);e=48>=e?1:Math.pow(2,e-48);for(var f=Ja(b),h=f.multiply(a);0>h.ba||0<h.compare(c);)b-=e,f=Ja(b),h=f.multiply(a);f.isZero()&&(f=Ga);d=d.add(f);c=c.subtract(h)}return d};g.modulo=function(a){return this.subtract(this.div(a).multiply(a))};g.not=function(){return Ea(~this.ea,~this.ba)};g.and=function(a){return Ea(this.ea&a.ea,this.ba&a.ba)};
g.or=function(a){return Ea(this.ea|a.ea,this.ba|a.ba)};g.xor=function(a){return Ea(this.ea^a.ea,this.ba^a.ba)};g.shiftLeft=function(a){a&=63;if(0==a)return this;var b=this.ea;return 32>a?Ea(b<<a,this.ba<<a|b>>>32-a):Ea(0,b<<a-32)};function Ja(a){return 0<a?0x7fffffffffffffff<=a?Ka:new Da(a,a/4294967296):0>a?-9223372036854775808>=a?Fa:(new Da(-a,-a/4294967296)).negate():Ia}function Ea(a,b){return new Da(a,b)}
function La(a,b){if("-"==a.charAt(0))return La(a.substring(1),b).negate();var c=parseInt(a,b||10);if(9007199254740991>=c)return new Da(c%4294967296|0,c/4294967296|0);if(0==a.length)throw Error("number format error: empty string");if(0<=a.indexOf("-"))throw Error('number format error: interior "-" character: '+a);b=b||10;if(2>b||36<b)throw Error("radix out of range: "+b);c=Ja(Math.pow(b,8));for(var d=Ia,e=0;e<a.length;e+=8){var f=Math.min(8,a.length-e),h=parseInt(a.substring(e,e+f),b);8>f?(f=Ja(Math.pow(b,
f)),d=d.multiply(f).add(Ja(h))):(d=d.multiply(c),d=d.add(Ja(h)))}return d}var Ia=Ea(0,0),Ga=Ea(1,0),Ha=Ea(-1,-1),Ka=Ea(4294967295,2147483647),Fa=Ea(0,2147483648);var Ma=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"===typeof a)return"string"!==typeof b||1!=b.length?-1:a.indexOf(b,0);for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Na=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e="string"===typeof a?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Oa=Array.prototype.map?function(a,b){return Array.prototype.map.call(a,
b,void 0)}:function(a,b){for(var c=a.length,d=Array(c),e="string"===typeof a?a.split(""):a,f=0;f<c;f++)f in e&&(d[f]=b.call(void 0,e[f],f,a));return d};function Pa(a){a:{var b=Qa;for(var c=a.length,d="string"===typeof a?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:"string"===typeof a?a.charAt(b):a[b]}function Ra(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Sa(a,b){a.sort(b||Ua)}
function Va(a,b){for(var c=Array(a.length),d=0;d<a.length;d++)c[d]={index:d,value:a[d]};var e=b||Ua;Sa(c,function(f,h){return e(f.value,h.value)||f.index-h.index});for(d=0;d<a.length;d++)a[d]=c[d].value}function Ua(a,b){return a>b?1:a<b?-1:0};function Wa(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function Xa(a,b){var c={},d;for(d in a)c[d]=b.call(void 0,a[d],d,a);return c}function Ya(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Za(a,b){return null!==a&&b in a?a[b]:void 0}var $a="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function ab(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<$a.length;f++)c=$a[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var bb={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};function cb(a,b){this.te=a===db&&b||"";this.ze=eb}cb.prototype.cb=!0;cb.prototype.Ua=function(){return this.te};function fb(a){return a instanceof cb&&a.constructor===cb&&a.ze===eb?a.te:"type_error:Const"}var eb={},db={},gb=new cb(db,"");function hb(){this.ie=""}hb.prototype.cb=!0;hb.prototype.Ua=function(){return this.ie.toString()};hb.prototype.pb=function(a){this.ie=a;return this};(new hb).pb("");function ib(a,b){this.le=a===jb&&b||"";this.Ae=kb}ib.prototype.cb=!0;ib.prototype.Ua=function(){return this.le.toString()};ib.prototype.xd=!0;ib.prototype.Rb=function(){return 1};function lb(a){if(a instanceof ib&&a.constructor===ib&&a.Ae===kb)return a.le;q(a);return"type_error:TrustedResourceUrl"}var kb={},jb={};var mb=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function nb(a){if(!ob.test(a))return a;-1!=a.indexOf("\x26")&&(a=a.replace(pb,"\x26amp;"));-1!=a.indexOf("\x3c")&&(a=a.replace(qb,"\x26lt;"));-1!=a.indexOf("\x3e")&&(a=a.replace(rb,"\x26gt;"));-1!=a.indexOf('"')&&(a=a.replace(sb,"\x26quot;"));-1!=a.indexOf("'")&&(a=a.replace(tb,"\x26#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(ub,"\x26#0;"));return a}
var pb=/&/g,qb=/</g,rb=/>/g,sb=/"/g,tb=/'/g,ub=/\x00/g,ob=/[\x00&<>"']/;function vb(a){return-1!=wb.toLowerCase().indexOf(a.toLowerCase())}function xb(a,b){return a<b?-1:a>b?1:0};function yb(a,b){this.ke=a===zb&&b||"";this.ye=Ab}yb.prototype.cb=!0;yb.prototype.Ua=function(){return this.ke.toString()};yb.prototype.xd=!0;yb.prototype.Rb=function(){return 1};function Bb(a){if(a instanceof yb&&a.constructor===yb&&a.ye===Ab)return a.ke;q(a);return"type_error:SafeUrl"}var Cb=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Db(a){if(a instanceof yb)return a;a="object"==typeof a&&a.cb?a.Ua():String(a);Cb.test(a)||(a="about:invalid#zClosurez");return new yb(zb,a)}
function Eb(a){if(a instanceof yb)return a;a="object"==typeof a&&a.cb?a.Ua():String(a);Cb.test(a)||(a="about:invalid#zClosurez");return new yb(zb,a)}var Ab={},zb={};function Fb(){this.Cd="";this.xe=Gb}Fb.prototype.cb=!0;var Gb={};Fb.prototype.Ua=function(){return this.Cd};Fb.prototype.pb=function(a){this.Cd=a;return this};var Hb=(new Fb).pb("");
function Ib(a){if(a instanceof yb)return'url("'+Bb(a).replace(/</g,"%3c").replace(/[\\"]/g,"\\$\x26")+'")';if(a instanceof cb)a=fb(a);else{a=String(a);var b=a.replace(Jb,"$1").replace(Jb,"$1").replace(Kb,"url");if(Lb.test(b)){if(b=!Mb.test(a)){for(var c=b=!0,d=0;d<a.length;d++){var e=a.charAt(d);"'"==e&&c?b=!b:'"'==e&&b&&(c=!c)}b=b&&c&&Nb(a)}a=b?Ob(a):"zClosurez"}else a="zClosurez"}if(/[{;}]/.test(a))throw new ya("Value does not allow [{;}], got: %s.",[a]);return a}
function Nb(a){for(var b=!0,c=/^[-_a-zA-Z0-9]$/,d=0;d<a.length;d++){var e=a.charAt(d);if("]"==e){if(b)return!1;b=!0}else if("["==e){if(!b)return!1;b=!1}else if(!b&&!c.test(e))return!1}return b}var Lb=/^[-,."'%_!# a-zA-Z0-9\[\]]+$/,Kb=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,Jb=/\b(calc|cubic-bezier|fit-content|hsl|hsla|matrix|minmax|repeat|rgb|rgba|(rotate|scale|translate)(X|Y|Z|3d)?)\([-+*/0-9a-z.%\[\], ]+\)/g,Mb=/\/\*/;
function Ob(a){return a.replace(Kb,function(b,c,d,e){var f="";d=d.replace(/^(['"])(.*)\1$/,function(h,k,l){f=k;return l});b=Db(d).Ua();return c+f+b+f+e})};function Pb(){this.je=""}Pb.prototype.cb=!0;Pb.prototype.Ua=function(){return this.je};Pb.prototype.pb=function(a){this.je=a;return this};(new Pb).pb("");var wb;a:{var Qb=ha.navigator;if(Qb){var Rb=Qb.userAgent;if(Rb){wb=Rb;break a}}wb=""}function Sb(a){return-1!=wb.indexOf(a)};function Tb(){this.Bd="";this.we=Ub;this.Yd=null}Tb.prototype.xd=!0;Tb.prototype.Rb=function(){return this.Yd};Tb.prototype.cb=!0;Tb.prototype.Ua=function(){return this.Bd.toString()};function Vb(a){if(a instanceof Tb&&a.constructor===Tb&&a.we===Ub)return a.Bd;q(a);return"type_error:SafeHtml"}function Wb(a){if(a instanceof Tb)return a;var b="object"==typeof a,c=null;b&&a.xd&&(c=a.Rb());return Xb(nb(b&&a.cb?a.Ua():String(a)),c)}
var Yb=/^[a-zA-Z0-9-]+$/,Zb={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},$b={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0};function ac(a,b,c){var d=String(a);if(!Yb.test(d))throw Error("");if(d.toUpperCase()in $b)throw Error("");return bc(String(a),b,c)}
function cc(a){function b(f){ja(f)?Na(f,b):(f=Wb(f),e.push(Vb(f).toString()),f=f.Rb(),0==d?d=f:0!=f&&d!=f&&(d=null))}var c=Wb(dc),d=c.Rb(),e=[];Na(a,b);return Xb(e.join(Vb(c).toString()),d)}function ec(a){return cc(Array.prototype.slice.call(arguments))}var Ub={};function Xb(a,b){return(new Tb).pb(a,b)}Tb.prototype.pb=function(a,b){this.Bd=a;this.Yd=b;return this};
function bc(a,b,c){var d=null,e="";if(b)for(n in b){if(!Yb.test(n))throw Error("");var f=b[n];if(null!=f){var h=n;var k=f;if(k instanceof cb)k=fb(k);else if("style"==h.toLowerCase()){f=void 0;if(!ma(k))throw Error("");if(!(k instanceof Fb)){var l="";for(f in k){if(!/^[-_a-zA-Z0-9]+$/.test(f))throw Error("Name allows only [-_a-zA-Z0-9], got: "+f);var m=k[f];null!=m&&(m=ja(m)?Oa(m,Ib).join(" "):Ib(m),l+=f+":"+m+";")}k=l?(new Fb).pb(l):Hb}k instanceof Fb&&k.constructor===Fb&&k.xe===Gb?f=k.Cd:(q(k),f=
"type_error:SafeStyle");k=f}else{if(/^on/i.test(h))throw Error("");if(h.toLowerCase()in Zb)if(k instanceof ib)k=lb(k).toString();else if(k instanceof yb)k=Bb(k);else if("string"===typeof k)k=Db(k).Ua();else throw Error("");}k.cb&&(k=k.Ua());h=h+'\x3d"'+nb(String(k))+'"';e+=" "+h}}var n="\x3c"+a+e;null==c?c=[]:ja(c)||(c=[c]);!0===bb[a.toLowerCase()]?n+="\x3e":(d=ec(c),n+="\x3e"+Vb(d).toString()+"\x3c/"+a+"\x3e",d=d.Rb());(a=b&&b.dir)&&(d=/^(ltr|rtl|auto)$/i.test(a)?0:null);return Xb(n,d)}
Xb("\x3c!DOCTYPE html\x3e",0);var dc=Xb("",0);Xb("\x3cbr\x3e",0);function fc(a,b){b=b instanceof yb?b:Eb(b);a.href=Bb(b)}function gc(a,b){b=b instanceof yb?b:Eb(b);a.replace(Bb(b))};function hc(a){var b=1;a=a.split(":");for(var c=[];0<b&&a.length;)c.push(a.shift()),b--;a.length&&c.push(a.join(":"));return c};function ic(a){if(a.jc&&"function"==typeof a.jc)return a.jc();if("string"===typeof a)return a.split("");if(ka(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}b=[];c=0;for(d in a)b[c++]=a[d];return b}
function jc(a,b){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,void 0);else if(ka(a)||"string"===typeof a)Na(a,b,void 0);else{if(a.Sb&&"function"==typeof a.Sb)var c=a.Sb();else if(a.jc&&"function"==typeof a.jc)c=void 0;else if(ka(a)||"string"===typeof a){c=[];for(var d=a.length,e=0;e<d;e++)c.push(e)}else c=Ya(a);d=ic(a);e=d.length;for(var f=0;f<e;f++)b.call(void 0,d[f],c&&c[f],a)}};function kc(a,b){this.Ya={};this.fa=[];this.hb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}g=kc.prototype;g.jc=function(){lc(this);for(var a=[],b=0;b<this.fa.length;b++)a.push(this.Ya[this.fa[b]]);return a};g.Sb=function(){lc(this);return this.fa.concat()};
g.equals=function(a,b){if(this===a)return!0;if(this.hb!=a.hb)return!1;b=b||mc;lc(this);for(var c,d=0;c=this.fa[d];d++)if(!b(this.get(c),a.get(c)))return!1;return!0};function mc(a,b){return a===b}g.isEmpty=function(){return 0==this.hb};g.clear=function(){this.Ya={};this.hb=this.fa.length=0};g.remove=function(a){return Object.prototype.hasOwnProperty.call(this.Ya,a)?(delete this.Ya[a],this.hb--,this.fa.length>2*this.hb&&lc(this),!0):!1};
function lc(a){if(a.hb!=a.fa.length){for(var b=0,c=0;b<a.fa.length;){var d=a.fa[b];Object.prototype.hasOwnProperty.call(a.Ya,d)&&(a.fa[c++]=d);b++}a.fa.length=c}if(a.hb!=a.fa.length){var e={};for(c=b=0;b<a.fa.length;)d=a.fa[b],Object.prototype.hasOwnProperty.call(e,d)||(a.fa[c++]=d,e[d]=1),b++;a.fa.length=c}}g.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.Ya,a)?this.Ya[a]:b};
g.set=function(a,b){Object.prototype.hasOwnProperty.call(this.Ya,a)||(this.hb++,this.fa.push(a));this.Ya[a]=b};g.addAll=function(a){if(a instanceof kc)for(var b=a.Sb(),c=0;c<b.length;c++)this.set(b[c],a.get(b[c]));else for(b in a)this.set(b,a[b])};g.forEach=function(a,b){for(var c=this.Sb(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};g.clone=function(){return new kc(this)};g.transpose=function(){for(var a=new kc,b=0;b<this.fa.length;b++){var c=this.fa[b];a.set(this.Ya[c],c)}return a};
g.toObject=function(){lc(this);for(var a={},b=0;b<this.fa.length;b++){var c=this.fa[b];a[c]=this.Ya[c]}return a};var nc=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function oc(a,b){null!=a&&this.append.apply(this,arguments)}g=oc.prototype;g.qb="";g.set=function(a){this.qb=""+a};g.append=function(a,b,c){this.qb+=String(a);if(null!=b)for(var d=1;d<arguments.length;d++)this.qb+=arguments[d];return this};g.clear=function(){this.qb=""};g.toString=function(){return this.qb};var pc={},qc={},rc;if("undefined"===typeof pc||"undefined"===typeof qc||"undefined"===typeof t)var t={};if("undefined"===typeof pc||"undefined"===typeof qc||"undefined"===typeof sc)var sc=null;if("undefined"===typeof pc||"undefined"===typeof qc||"undefined"===typeof tc)var tc=null;var uc=null;if("undefined"===typeof pc||"undefined"===typeof qc||"undefined"===typeof vc)var vc=null;function wc(){return new u(null,5,[xc,!0,yc,!0,zc,!1,Ac,!1,Bc,null],null)}
function Cc(){sc=function(){return console.log.apply(console,Ra(arguments))};tc=function(){return console.error.apply(console,Ra(arguments))}}function w(a){return null!=a&&!1!==a}function Dc(a){return null==a}function Ec(a){return a instanceof Array}function Fc(a){return null==a?!0:!1===a?!0:!1}function x(a,b){return a[q(null==b?null:b)]?!0:a._?!0:!1}function Gc(a){return null==a?null:a.constructor}
function y(a,b){var c=Gc(b);c=w(w(c)?c.Ic:c)?c.Mb:q(b);return Error(["No protocol method ",a," defined for type ",c,": ",b].join(""))}function Hc(a){var b=a.Mb;return w(b)?b:z.f(a)}var Ic="undefined"!==typeof Symbol&&"function"===q(Symbol)?Symbol.iterator:"@@iterator";function Jc(a){for(var b=a.length,c=Array(b),d=0;;)if(d<b)c[d]=a[d],d+=1;else break;return c}function Kc(a){function b(d,e){d.push(e);return d}var c=[];return Lc?Lc(b,c,a):Mc.call(null,b,c,a)}function Nc(){}function Oc(){}
function Pc(){}var Qc=function Qc(a){if(null!=a&&null!=a.Y)return a.Y(a);var c=Qc[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=Qc._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("ICounted.-count",a);};function Rc(){}var Sc=function Sc(a){if(null!=a&&null!=a.ga)return a.ga(a);var c=Sc[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=Sc._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("IEmptyableCollection.-empty",a);};function Tc(){}
var Uc=function Uc(a,b){if(null!=a&&null!=a.da)return a.da(a,b);var d=Uc[q(null==a?null:a)];if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);d=Uc._;if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);throw y("ICollection.-conj",a);};function Vc(){}var Wc=function Wc(a){switch(arguments.length){case 2:return Wc.j(arguments[0],arguments[1]);case 3:return Wc.o(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length)].join(""));}};
Wc.j=function(a,b){if(null!=a&&null!=a.V)return a.V(a,b);var c=Wc[q(null==a?null:a)];if(null!=c)return c.j?c.j(a,b):c.call(null,a,b);c=Wc._;if(null!=c)return c.j?c.j(a,b):c.call(null,a,b);throw y("IIndexed.-nth",a);};Wc.o=function(a,b,c){if(null!=a&&null!=a.wa)return a.wa(a,b,c);var d=Wc[q(null==a?null:a)];if(null!=d)return d.o?d.o(a,b,c):d.call(null,a,b,c);d=Wc._;if(null!=d)return d.o?d.o(a,b,c):d.call(null,a,b,c);throw y("IIndexed.-nth",a);};Wc.J=3;function Xc(){}
var A=function A(a){if(null!=a&&null!=a.ma)return a.ma(a);var c=A[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=A._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("ISeq.-first",a);},Yc=function Yc(a){if(null!=a&&null!=a.qa)return a.qa(a);var c=Yc[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=Yc._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("ISeq.-rest",a);};function Zc(){}
var $c=function $c(a){if(null!=a&&null!=a.ja)return a.ja(a);var c=$c[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=$c._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("INext.-next",a);};function ad(){}var bd=function bd(a){switch(arguments.length){case 2:return bd.j(arguments[0],arguments[1]);case 3:return bd.o(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length)].join(""));}};
bd.j=function(a,b){if(null!=a&&null!=a.na)return a.na(a,b);var c=bd[q(null==a?null:a)];if(null!=c)return c.j?c.j(a,b):c.call(null,a,b);c=bd._;if(null!=c)return c.j?c.j(a,b):c.call(null,a,b);throw y("ILookup.-lookup",a);};bd.o=function(a,b,c){if(null!=a&&null!=a.T)return a.T(a,b,c);var d=bd[q(null==a?null:a)];if(null!=d)return d.o?d.o(a,b,c):d.call(null,a,b,c);d=bd._;if(null!=d)return d.o?d.o(a,b,c):d.call(null,a,b,c);throw y("ILookup.-lookup",a);};bd.J=3;
var cd=function cd(a,b,c){if(null!=a&&null!=a.Aa)return a.Aa(a,b,c);var e=cd[q(null==a?null:a)];if(null!=e)return e.o?e.o(a,b,c):e.call(null,a,b,c);e=cd._;if(null!=e)return e.o?e.o(a,b,c):e.call(null,a,b,c);throw y("IAssociative.-assoc",a);},dd=function dd(a,b){if(null!=a&&null!=a.Jb)return a.Jb(a,b);var d=dd[q(null==a?null:a)];if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);d=dd._;if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);throw y("IFind.-find",a);};function ed(){}
var fd=function fd(a,b){if(null!=a&&null!=a.sb)return a.sb(a,b);var d=fd[q(null==a?null:a)];if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);d=fd._;if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);throw y("IMap.-dissoc",a);},gd=function gd(a){if(null!=a&&null!=a.Pe)return a.key;var c=gd[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=gd._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("IMapEntry.-key",a);},hd=function hd(a){if(null!=a&&null!=a.Qe)return a.val;var c=hd[q(null==
a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=hd._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("IMapEntry.-val",a);};function id(){}
var jd=function jd(a,b){if(null!=a&&null!=a.Td)return a.Td(a,b);var d=jd[q(null==a?null:a)];if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);d=jd._;if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);throw y("ISet.-disjoin",a);},kd=function kd(a){if(null!=a&&null!=a.tb)return a.tb(a);var c=kd[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=kd._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("IStack.-peek",a);},ld=function ld(a){if(null!=a&&null!=a.ub)return a.ub(a);var c=ld[q(null==
a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=ld._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("IStack.-pop",a);};function md(){}var nd=function nd(a,b,c){if(null!=a&&null!=a.vb)return a.vb(a,b,c);var e=nd[q(null==a?null:a)];if(null!=e)return e.o?e.o(a,b,c):e.call(null,a,b,c);e=nd._;if(null!=e)return e.o?e.o(a,b,c):e.call(null,a,b,c);throw y("IVector.-assoc-n",a);};function od(){}
var C=function C(a){if(null!=a&&null!=a.eb)return a.eb(a);var c=C[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=C._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("IDeref.-deref",a);};function pd(){}
var qd=function qd(a){if(null!=a&&null!=a.Z)return a.Z(a);var c=qd[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=qd._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("IMeta.-meta",a);},rd=function rd(a,b){if(null!=a&&null!=a.aa)return a.aa(a,b);var d=rd[q(null==a?null:a)];if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);d=rd._;if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);throw y("IWithMeta.-with-meta",a);};function sd(){}
var td=function td(a){switch(arguments.length){case 2:return td.j(arguments[0],arguments[1]);case 3:return td.o(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length)].join(""));}};td.j=function(a,b){if(null!=a&&null!=a.oa)return a.oa(a,b);var c=td[q(null==a?null:a)];if(null!=c)return c.j?c.j(a,b):c.call(null,a,b);c=td._;if(null!=c)return c.j?c.j(a,b):c.call(null,a,b);throw y("IReduce.-reduce",a);};
td.o=function(a,b,c){if(null!=a&&null!=a.pa)return a.pa(a,b,c);var d=td[q(null==a?null:a)];if(null!=d)return d.o?d.o(a,b,c):d.call(null,a,b,c);d=td._;if(null!=d)return d.o?d.o(a,b,c):d.call(null,a,b,c);throw y("IReduce.-reduce",a);};td.J=3;function ud(){}
var vd=function vd(a,b,c){if(null!=a&&null!=a.fb)return a.fb(a,b,c);var e=vd[q(null==a?null:a)];if(null!=e)return e.o?e.o(a,b,c):e.call(null,a,b,c);e=vd._;if(null!=e)return e.o?e.o(a,b,c):e.call(null,a,b,c);throw y("IKVReduce.-kv-reduce",a);},wd=function wd(a,b){if(null!=a&&null!=a.H)return a.H(a,b);var d=wd[q(null==a?null:a)];if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);d=wd._;if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);throw y("IEquiv.-equiv",a);},xd=function xd(a){if(null!=a&&null!=a.S)return a.S(a);
var c=xd[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=xd._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("IHash.-hash",a);};function yd(){}var zd=function zd(a){if(null!=a&&null!=a.$)return a.$(a);var c=zd[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=zd._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("ISeqable.-seq",a);};function Ad(){}function Bd(){}function Cd(){}function Dd(){}
var Ed=function Ed(a){if(null!=a&&null!=a.dc)return a.dc(a);var c=Ed[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=Ed._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("IReversible.-rseq",a);},Fd=function Fd(a,b){if(null!=a&&null!=a.Ud)return a.Ud(a,b);var d=Fd[q(null==a?null:a)];if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);d=Fd._;if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);throw y("IWriter.-write",a);};function Gd(){}
var Hd=function Hd(a,b,c){if(null!=a&&null!=a.W)return a.W(a,b,c);var e=Hd[q(null==a?null:a)];if(null!=e)return e.o?e.o(a,b,c):e.call(null,a,b,c);e=Hd._;if(null!=e)return e.o?e.o(a,b,c):e.call(null,a,b,c);throw y("IPrintWithWriter.-pr-writer",a);},Id=function Id(a,b,c){if(null!=a&&null!=a.fc)return a.fc(a,b,c);var e=Id[q(null==a?null:a)];if(null!=e)return e.o?e.o(a,b,c):e.call(null,a,b,c);e=Id._;if(null!=e)return e.o?e.o(a,b,c):e.call(null,a,b,c);throw y("IWatchable.-add-watch",a);},Jd=function Jd(a,
b){if(null!=a&&null!=a.gc)return a.gc(a,b);var d=Jd[q(null==a?null:a)];if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);d=Jd._;if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);throw y("IWatchable.-remove-watch",a);},Kd=function Kd(a){if(null!=a&&null!=a.Ib)return a.Ib(a);var c=Kd[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=Kd._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("IEditableCollection.-as-transient",a);},Ld=function Ld(a,b){if(null!=a&&null!=a.Lb)return a.Lb(a,b);
var d=Ld[q(null==a?null:a)];if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);d=Ld._;if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);throw y("ITransientCollection.-conj!",a);},Md=function Md(a){if(null!=a&&null!=a.ec)return a.ec(a);var c=Md[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=Md._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("ITransientCollection.-persistent!",a);},Nd=function Nd(a,b,c){if(null!=a&&null!=a.Kb)return a.Kb(a,b,c);var e=Nd[q(null==a?null:a)];if(null!=
e)return e.o?e.o(a,b,c):e.call(null,a,b,c);e=Nd._;if(null!=e)return e.o?e.o(a,b,c):e.call(null,a,b,c);throw y("ITransientAssociative.-assoc!",a);};function Od(){}
var Pd=function Pd(a,b){if(null!=a&&null!=a.rb)return a.rb(a,b);var d=Pd[q(null==a?null:a)];if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);d=Pd._;if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);throw y("IComparable.-compare",a);},Qd=function Qd(a){if(null!=a&&null!=a.ld)return a.ld(a);var c=Qd[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=Qd._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("IChunk.-drop-first",a);},Rd=function Rd(a){if(null!=a&&null!=a.Cc)return a.Cc(a);var c=
Rd[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=Rd._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("IChunkedSeq.-chunked-first",a);},Sd=function Sd(a){if(null!=a&&null!=a.Gb)return a.Gb(a);var c=Sd[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=Sd._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("IChunkedSeq.-chunked-rest",a);},Td=function Td(a){if(null!=a&&null!=a.ac)return a.ac(a);var c=Td[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,
a);c=Td._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("INamed.-name",a);},Ud=function Ud(a){if(null!=a&&null!=a.bc)return a.bc(a);var c=Ud[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=Ud._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("INamed.-namespace",a);},Vd=function Vd(a,b){if(null!=a&&null!=a.Ba)return a.Ba(a,b);var d=Vd[q(null==a?null:a)];if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);d=Vd._;if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);throw y("IReset.-reset!",
a);},Wd=function Wd(a){switch(arguments.length){case 2:return Wd.j(arguments[0],arguments[1]);case 3:return Wd.o(arguments[0],arguments[1],arguments[2]);case 4:return Wd.F(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Wd.U(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",z.f(arguments.length)].join(""));}};
Wd.j=function(a,b){if(null!=a&&null!=a.Dc)return a.Dc(a,b);var c=Wd[q(null==a?null:a)];if(null!=c)return c.j?c.j(a,b):c.call(null,a,b);c=Wd._;if(null!=c)return c.j?c.j(a,b):c.call(null,a,b);throw y("ISwap.-swap!",a);};Wd.o=function(a,b,c){if(null!=a&&null!=a.Ec)return a.Ec(a,b,c);var d=Wd[q(null==a?null:a)];if(null!=d)return d.o?d.o(a,b,c):d.call(null,a,b,c);d=Wd._;if(null!=d)return d.o?d.o(a,b,c):d.call(null,a,b,c);throw y("ISwap.-swap!",a);};
Wd.F=function(a,b,c,d){if(null!=a&&null!=a.Fc)return a.Fc(a,b,c,d);var e=Wd[q(null==a?null:a)];if(null!=e)return e.F?e.F(a,b,c,d):e.call(null,a,b,c,d);e=Wd._;if(null!=e)return e.F?e.F(a,b,c,d):e.call(null,a,b,c,d);throw y("ISwap.-swap!",a);};Wd.U=function(a,b,c,d,e){if(null!=a&&null!=a.Gc)return a.Gc(a,b,c,d,e);var f=Wd[q(null==a?null:a)];if(null!=f)return f.U?f.U(a,b,c,d,e):f.call(null,a,b,c,d,e);f=Wd._;if(null!=f)return f.U?f.U(a,b,c,d,e):f.call(null,a,b,c,d,e);throw y("ISwap.-swap!",a);};
Wd.J=5;function Xd(){}var Yd=function Yd(a){if(null!=a&&null!=a.xa)return a.xa(a);var c=Yd[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=Yd._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("IIterable.-iterator",a);};function Zd(a){this.sf=a;this.v=1073741824;this.N=0}Zd.prototype.Ud=function(a,b){return this.sf.append(b)};function $d(a){var b=new oc;a.W(null,new Zd(b),wc());return z.f(b)}
var ae="undefined"!==typeof Math&&"undefined"!==typeof Math.imul&&0!==Math.imul(4294967295,5)?function(a,b){return Math.imul(a,b)}:function(a,b){var c=a&65535,d=b&65535;return c*d+((a>>>16&65535)*d+c*(b>>>16&65535)<<16>>>0)|0};function be(a){a=ae(a|0,-862048943);return ae(a<<15|a>>>-15,461845907)}function ce(a,b){a=(a|0)^(b|0);return ae(a<<13|a>>>-13,5)+-430675100|0}function de(a,b){a=(a|0)^b;a=ae(a^a>>>16,-2048144789);a=ae(a^a>>>13,-1028477387);return a^a>>>16}
function ee(a){a:{var b=1;for(var c=0;;)if(b<a.length){var d=b+2;c=ce(c,be(a.charCodeAt(b-1)|a.charCodeAt(b)<<16));b=d}else{b=c;break a}}b=1===(a.length&1)?b^be(a.charCodeAt(a.length-1)):b;return de(b,ae(2,a.length))}var fe={},ge=0;function he(a){255<ge&&(fe={},ge=0);if(null==a)return 0;var b=fe[a];if("number"===typeof b)a=b;else{a:if(null!=a)if(b=a.length,0<b)for(var c=0,d=0;;)if(c<b){var e=c+1;d=ae(31,d)+a.charCodeAt(c);c=e}else{b=d;break a}else b=0;else b=0;fe[a]=b;ge+=1;a=b}return a}
function ie(a){if(null!=a&&(a.v&4194304||t===a.Me))return a.S(null)^0;if("number"===typeof a){if(w(isFinite(a)))return Math.floor(a)%2147483647;switch(a){case Infinity:return 2146435072;case -Infinity:return-1048576;default:return 2146959360}}else return!0===a?a=1231:!1===a?a=1237:"string"===typeof a?(a=he(a),0!==a&&(a=be(a),a=ce(0,a),a=de(a,4))):a=a instanceof Date?a.valueOf()^0:null==a?0:xd(a)^0,a}function je(a,b){return a^b+2654435769+(a<<6)+(a>>2)}function ke(a,b){return b instanceof a}
function le(a,b){if(a.str===b.str)return 0;if(w(Fc(a.za)?b.za:!1))return-1;if(w(a.za)){if(Fc(b.za))return 1;var c=Ua(a.za,b.za);return 0===c?Ua(a.name,b.name):c}return Ua(a.name,b.name)}function me(a,b,c,d,e){this.za=a;this.name=b;this.str=c;this._hash=d;this._meta=e;this.v=2154168321;this.N=4096}g=me.prototype;g.toString=function(){return this.str};g.equiv=function(a){return this.H(null,a)};g.H=function(a,b){return b instanceof me?this.str===b.str:!1};
g.call=function(a){switch(arguments.length-1){case 1:return this.f(arguments[1]);case 2:return this.j(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Jc(b)))};g.f=function(a){return D.j?D.j(a,this):D.call(null,a,this)};g.j=function(a,b){return D.o?D.o(a,this,b):D.call(null,a,this,b)};g.Z=function(){return this._meta};
g.aa=function(a,b){return new me(this.za,this.name,this.str,this._hash,b)};g.S=function(){var a=this._hash;return null!=a?a:this._hash=a=je(ee(this.name),he(this.za))};g.ac=function(){return this.name};g.bc=function(){return this.za};g.W=function(a,b){return Fd(b,this.str)};var ne=function ne(a){switch(arguments.length){case 1:return ne.f(arguments[0]);case 2:return ne.j(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",z.f(arguments.length)].join(""));}};
ne.f=function(a){for(;;){if(a instanceof me)return a;if("string"===typeof a){var b=a.indexOf("/");return 1>b?ne.j(null,a):ne.j(a.substring(0,b),a.substring(b+1,a.length))}if(a instanceof E)a=a.Ca;else throw Error("no conversion to symbol");}};ne.j=function(a,b){var c=null!=a?[z.f(a),"/",z.f(b)].join(""):b;return new me(a,b,c,null,null)};ne.J=2;function oe(a){return null!=a?a.N&131072||t===a.Cf?!0:a.N?!1:x(Xd,a):x(Xd,a)}
function G(a){if(null==a)return null;if(null!=a&&(a.v&8388608||t===a.Ue))return a.$(null);if(Ec(a)||"string"===typeof a)return 0===a.length?null:new I(a,0,null);if(x(yd,a))return zd(a);throw Error([z.f(a)," is not ISeqable"].join(""));}function J(a){if(null==a)return null;if(null!=a&&(a.v&64||t===a.R))return a.ma(null);a=G(a);return null==a?null:A(a)}function pe(a){return null!=a?null!=a&&(a.v&64||t===a.R)?a.qa(null):(a=G(a))?a.qa(null):qe:qe}
function K(a){return null==a?null:null!=a&&(a.v&128||t===a.cc)?a.ja(null):G(pe(a))}var M=function M(a){switch(arguments.length){case 1:return M.f(arguments[0]);case 2:return M.j(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new I(c.slice(2),0,null);return M.A(arguments[0],arguments[1],c)}};M.f=function(){return!0};M.j=function(a,b){return null==a?null==b:a===b||wd(a,b)};
M.A=function(a,b,c){for(;;)if(M.j(a,b))if(K(c))a=b,b=J(c),c=K(c);else return M.j(b,J(c));else return!1};M.K=function(a){var b=J(a),c=K(a);a=J(c);c=K(c);return this.A(b,a,c)};M.J=2;function re(a){this.s=a}re.prototype.next=function(){if(null!=this.s){var a=J(this.s);this.s=K(this.s);return{value:a,done:!1}}return{value:null,done:!0}};function se(a){return new re(G(a))}function te(a,b){a=be(a);a=ce(0,a);return de(a,b)}
function ue(a){var b=0,c=1;for(a=G(a);;)if(null!=a)b+=1,c=ae(31,c)+ie(J(a))|0,a=K(a);else return te(c,b)}var ve=te(1,0);function we(a){var b=0,c=0;for(a=G(a);;)if(null!=a)b+=1,c=c+ie(J(a))|0,a=K(a);else return te(c,b)}var xe=te(0,0);Pc["null"]=!0;Qc["null"]=function(){return 0};Date.prototype.H=function(a,b){return b instanceof Date&&this.valueOf()===b.valueOf()};Date.prototype.Hb=t;
Date.prototype.rb=function(a,b){if(b instanceof Date)return Ua(this.valueOf(),b.valueOf());throw Error(["Cannot compare ",z.f(this)," to ",z.f(b)].join(""));};wd.number=function(a,b){return a===b};Nc["function"]=!0;pd["function"]=!0;qd["function"]=function(){return null};xd._=function(a){return na(a)};function ye(a){return a+1}function ze(a){this.val=a;this.v=32768;this.N=0}ze.prototype.eb=function(){return this.val};function Ae(a){return new ze(a)}function Be(a){return a instanceof ze}
function Ce(a){return C(a)}function De(a,b){var c=a.Y(null);if(0===c)return b.D?b.D():b.call(null);for(var d=a.V(null,0),e=1;;)if(e<c){var f=a.V(null,e);d=b.j?b.j(d,f):b.call(null,d,f);if(Be(d))return C(d);e+=1}else return d}function Ee(a,b,c){var d=a.Y(null),e=c;for(c=0;;)if(c<d){var f=a.V(null,c);e=b.j?b.j(e,f):b.call(null,e,f);if(Be(e))return C(e);c+=1}else return e}
function Fe(a,b){var c=a.length;if(0===a.length)return b.D?b.D():b.call(null);for(var d=a[0],e=1;;)if(e<c){var f=a[e];d=b.j?b.j(d,f):b.call(null,d,f);if(Be(d))return C(d);e+=1}else return d}function Ge(a,b,c){var d=a.length,e=c;for(c=0;;)if(c<d){var f=a[c];e=b.j?b.j(e,f):b.call(null,e,f);if(Be(e))return C(e);c+=1}else return e}function He(a,b,c,d){for(var e=a.length;;)if(d<e){var f=a[d];c=b.j?b.j(c,f):b.call(null,c,f);if(Be(c))return C(c);d+=1}else return c}
function Ie(a){return null!=a?a.v&2||t===a.Fe?!0:a.v?!1:x(Pc,a):x(Pc,a)}function Je(a){return null!=a?a.v&16||t===a.Rd?!0:a.v?!1:x(Vc,a):x(Vc,a)}function N(a,b,c){var d=P.f?P.f(a):P.call(null,a);if(c>=d)return-1;!(0<c)&&0>c&&(c+=d,c=0>c?0:c);for(;;)if(c<d){if(M.j(Ke?Ke(a,c):Le.call(null,a,c),b))return c;c+=1}else return-1}
function Q(a,b,c){var d=P.f?P.f(a):P.call(null,a);if(0===d)return-1;0<c?(--d,c=d<c?d:c):c=0>c?d+c:c;for(;;)if(0<=c){if(M.j(Ke?Ke(a,c):Le.call(null,a,c),b))return c;--c}else return-1}function Me(a,b){this.u=a;this.i=b}Me.prototype.hasNext=function(){return this.i<this.u.length};Me.prototype.next=function(){var a=this.u[this.i];this.i+=1;return a};function I(a,b,c){this.u=a;this.i=b;this.meta=c;this.v=166592766;this.N=139264}g=I.prototype;g.toString=function(){return $d(this)};
g.equiv=function(a){return this.H(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.f=function(b){return N(this,b,0)};a.j=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P.f?P.f(this):P.call(null,this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.f=a;b.j=function(c,d){return Q(this,c,d)};return b}();g.V=function(a,b){a=b+this.i;if(0<=a&&a<this.u.length)return this.u[a];throw Error("Index out of bounds");};g.wa=function(a,b,c){a=b+this.i;return 0<=a&&a<this.u.length?this.u[a]:c};
g.xa=function(){return new Me(this.u,this.i)};g.Z=function(){return this.meta};g.ja=function(){return this.i+1<this.u.length?new I(this.u,this.i+1,null):null};g.Y=function(){var a=this.u.length-this.i;return 0>a?0:a};g.dc=function(){var a=this.Y(null);return 0<a?new Ne(this,a-1,null):null};g.S=function(){return ue(this)};g.H=function(a,b){return Oe.j?Oe.j(this,b):Oe.call(null,this,b)};g.ga=function(){return qe};g.oa=function(a,b){return He(this.u,b,this.u[this.i],this.i+1)};
g.pa=function(a,b,c){return He(this.u,b,c,this.i)};g.ma=function(){return this.u[this.i]};g.qa=function(){return this.i+1<this.u.length?new I(this.u,this.i+1,null):qe};g.$=function(){return this.i<this.u.length?this:null};g.aa=function(a,b){return b===this.meta?this:new I(this.u,this.i,b)};g.da=function(a,b){return R.j?R.j(b,this):R.call(null,b,this)};I.prototype[Ic]=function(){return se(this)};function S(a){return 0<a.length?new I(a,0,null):null}
function Ne(a,b,c){this.Bc=a;this.i=b;this.meta=c;this.v=32374990;this.N=8192}g=Ne.prototype;g.toString=function(){return $d(this)};g.equiv=function(a){return this.H(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.f=function(b){return N(this,b,0)};a.j=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P.f?P.f(this):P.call(null,this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.f=a;b.j=function(c,d){return Q(this,c,d)};return b}();g.Z=function(){return this.meta};g.ja=function(){return 0<this.i?new Ne(this.Bc,this.i-1,null):null};g.Y=function(){return this.i+1};g.S=function(){return ue(this)};
g.H=function(a,b){return Oe.j?Oe.j(this,b):Oe.call(null,this,b)};g.ga=function(){return qe};g.oa=function(a,b){return Pe?Pe(b,this):Qe.call(null,b,this)};g.pa=function(a,b,c){return Re?Re(b,c,this):Qe.call(null,b,c,this)};g.ma=function(){return Wc.j(this.Bc,this.i)};g.qa=function(){return 0<this.i?new Ne(this.Bc,this.i-1,null):qe};g.$=function(){return this};g.aa=function(a,b){return b===this.meta?this:new Ne(this.Bc,this.i,b)};g.da=function(a,b){return R.j?R.j(b,this):R.call(null,b,this)};
Ne.prototype[Ic]=function(){return se(this)};function Cm(a){return J(K(a))}function Se(a){for(;;){var b=K(a);if(null!=b)a=b;else return J(a)}}wd._=function(a,b){return a===b};var Te=function Te(a){switch(arguments.length){case 0:return Te.D();case 1:return Te.f(arguments[0]);case 2:return Te.j(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new I(c.slice(2),0,null);return Te.A(arguments[0],arguments[1],c)}};Te.D=function(){return Ue};
Te.f=function(a){return a};Te.j=function(a,b){return null!=a?Uc(a,b):new Ve(null,b,null,1,null)};Te.A=function(a,b,c){for(;;)if(w(c))a=Te.j(a,b),b=J(c),c=K(c);else return Te.j(a,b)};Te.K=function(a){var b=J(a),c=K(a);a=J(c);c=K(c);return this.A(b,a,c)};Te.J=2;function We(a){return null==a?null:null!=a&&(a.v&4||t===a.He)?a.ga(null):(null!=a?a.v&4||t===a.He||(a.v?0:x(Rc,a)):x(Rc,a))?Sc(a):null}
function P(a){if(null!=a)if(null!=a&&(a.v&2||t===a.Fe))a=a.Y(null);else if(Ec(a))a=a.length;else if("string"===typeof a)a=a.length;else if(null!=a&&(a.v&8388608||t===a.Ue))a:{a=G(a);for(var b=0;;){if(Ie(a)){a=b+Qc(a);break a}a=K(a);b+=1}}else a=Qc(a);else a=0;return a}function Xe(a,b,c){for(;;){if(null==a)return c;if(0===b)return G(a)?J(a):c;if(Je(a))return Wc.o(a,b,c);if(G(a))a=K(a),--b;else return c}}
function Le(a){switch(arguments.length){case 2:return Ke(arguments[0],arguments[1]);case 3:return T(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length)].join(""));}}
function Ke(a,b){if("number"!==typeof b)throw Error("Index argument to nth must be a number");if(null==a)return a;if(null!=a&&(a.v&16||t===a.Rd))return a.V(null,b);if(Ec(a)){if(-1<b&&b<a.length)return a[b|0];throw Error("Index out of bounds");}if("string"===typeof a){if(-1<b&&b<a.length)return a.charAt(b|0);throw Error("Index out of bounds");}if(null!=a&&(a.v&64||t===a.R)||null!=a&&(a.v&16777216||t===a.od)){if(0>b)throw Error("Index out of bounds");a:for(;;){if(null==a)throw Error("Index out of bounds");
if(0===b){if(G(a)){a=J(a);break a}throw Error("Index out of bounds");}if(Je(a)){a=Wc.j(a,b);break a}if(G(a))a=K(a),--b;else throw Error("Index out of bounds");}return a}if(x(Vc,a))return Wc.j(a,b);throw Error(["nth not supported on this type ",z.f(Hc(Gc(a)))].join(""));}
function T(a,b,c){if("number"!==typeof b)throw Error("Index argument to nth must be a number.");if(null==a)return c;if(null!=a&&(a.v&16||t===a.Rd))return a.wa(null,b,c);if(Ec(a))return-1<b&&b<a.length?a[b|0]:c;if("string"===typeof a)return-1<b&&b<a.length?a.charAt(b|0):c;if(null!=a&&(a.v&64||t===a.R)||null!=a&&(a.v&16777216||t===a.od))return 0>b?c:Xe(a,b,c);if(x(Vc,a))return Wc.o(a,b,c);throw Error(["nth not supported on this type ",z.f(Hc(Gc(a)))].join(""));}
var D=function D(a){switch(arguments.length){case 2:return D.j(arguments[0],arguments[1]);case 3:return D.o(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length)].join(""));}};D.j=function(a,b){return null==a?null:null!=a&&(a.v&256||t===a.Ne)?a.na(null,b):Ec(a)?null!=b&&b<a.length?a[b|0]:null:"string"===typeof a?null!=b&&b<a.length?a.charAt(b|0):null:x(ad,a)?bd.j(a,b):null};
D.o=function(a,b,c){return null!=a?null!=a&&(a.v&256||t===a.Ne)?a.T(null,b,c):Ec(a)?null!=b&&-1<b&&b<a.length?a[b|0]:c:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):c:x(ad,a)?bd.o(a,b,c):c:c};D.J=3;var U=function U(a){switch(arguments.length){case 3:return U.o(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new I(c.slice(3),0,null);return U.A(arguments[0],arguments[1],arguments[2],c)}};
U.o=function(a,b,c){return null!=a&&(a.v&512||t===a.xf)?a.Aa(null,b,c):null!=a?cd(a,b,c):Ye([b,c])};U.A=function(a,b,c,d){for(;;)if(a=U.o(a,b,c),w(d))b=J(d),c=Cm(d),d=K(K(d));else return a};U.K=function(a){var b=J(a),c=K(a);a=J(c);var d=K(c);c=J(d);d=K(d);return this.A(b,a,c,d)};U.J=3;
var Ze=function Ze(a){switch(arguments.length){case 1:return Ze.f(arguments[0]);case 2:return Ze.j(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new I(c.slice(2),0,null);return Ze.A(arguments[0],arguments[1],c)}};Ze.f=function(a){return a};Ze.j=function(a,b){return null==a?null:fd(a,b)};Ze.A=function(a,b,c){for(;;){if(null==a)return null;a=Ze.j(a,b);if(w(c))b=J(c),c=K(c);else return a}};
Ze.K=function(a){var b=J(a),c=K(a);a=J(c);c=K(c);return this.A(b,a,c)};Ze.J=2;function $e(a){var b=la(a);return b?b:null!=a?t===a.Ee?!0:a.qd?!1:x(Nc,a):x(Nc,a)}function af(a,b){this.G=a;this.meta=b;this.v=393217;this.N=0}g=af.prototype;g.Z=function(){return this.meta};g.aa=function(a,b){return new af(this.G,b)};g.Ee=t;
g.call=function(a){switch(arguments.length-1){case 0:return this.D();case 1:return this.f(arguments[1]);case 2:return this.j(arguments[1],arguments[2]);case 3:return this.o(arguments[1],arguments[2],arguments[3]);case 4:return this.F(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.U(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.va(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.Ra(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.Ea(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.Sa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.Ga(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);
case 11:return this.Ha(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.Ia(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.Ja(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],
arguments[11],arguments[12],arguments[13]);case 14:return this.Ka(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.La(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.Ma(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.Na(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.Oa(arguments[1],arguments[2],
arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.Pa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.Qa(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:return this.nd(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],
arguments[18],arguments[19],arguments[20],arguments[21]);default:throw Error(["Invalid arity: ",z.f(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Jc(b)))};g.D=function(){return this.G.D?this.G.D():this.G.call(null)};g.f=function(a){return this.G.f?this.G.f(a):this.G.call(null,a)};g.j=function(a,b){return this.G.j?this.G.j(a,b):this.G.call(null,a,b)};g.o=function(a,b,c){return this.G.o?this.G.o(a,b,c):this.G.call(null,a,b,c)};
g.F=function(a,b,c,d){return this.G.F?this.G.F(a,b,c,d):this.G.call(null,a,b,c,d)};g.U=function(a,b,c,d,e){return this.G.U?this.G.U(a,b,c,d,e):this.G.call(null,a,b,c,d,e)};g.va=function(a,b,c,d,e,f){return this.G.va?this.G.va(a,b,c,d,e,f):this.G.call(null,a,b,c,d,e,f)};g.Ra=function(a,b,c,d,e,f,h){return this.G.Ra?this.G.Ra(a,b,c,d,e,f,h):this.G.call(null,a,b,c,d,e,f,h)};g.Ea=function(a,b,c,d,e,f,h,k){return this.G.Ea?this.G.Ea(a,b,c,d,e,f,h,k):this.G.call(null,a,b,c,d,e,f,h,k)};
g.Sa=function(a,b,c,d,e,f,h,k,l){return this.G.Sa?this.G.Sa(a,b,c,d,e,f,h,k,l):this.G.call(null,a,b,c,d,e,f,h,k,l)};g.Ga=function(a,b,c,d,e,f,h,k,l,m){return this.G.Ga?this.G.Ga(a,b,c,d,e,f,h,k,l,m):this.G.call(null,a,b,c,d,e,f,h,k,l,m)};g.Ha=function(a,b,c,d,e,f,h,k,l,m,n){return this.G.Ha?this.G.Ha(a,b,c,d,e,f,h,k,l,m,n):this.G.call(null,a,b,c,d,e,f,h,k,l,m,n)};g.Ia=function(a,b,c,d,e,f,h,k,l,m,n,p){return this.G.Ia?this.G.Ia(a,b,c,d,e,f,h,k,l,m,n,p):this.G.call(null,a,b,c,d,e,f,h,k,l,m,n,p)};
g.Ja=function(a,b,c,d,e,f,h,k,l,m,n,p,r){return this.G.Ja?this.G.Ja(a,b,c,d,e,f,h,k,l,m,n,p,r):this.G.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r)};g.Ka=function(a,b,c,d,e,f,h,k,l,m,n,p,r,v){return this.G.Ka?this.G.Ka(a,b,c,d,e,f,h,k,l,m,n,p,r,v):this.G.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,v)};g.La=function(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B){return this.G.La?this.G.La(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B):this.G.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,v,B)};
g.Ma=function(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F){return this.G.Ma?this.G.Ma(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F):this.G.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F)};g.Na=function(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H){return this.G.Na?this.G.Na(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H):this.G.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H)};g.Oa=function(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O){return this.G.Oa?this.G.Oa(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O):this.G.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O)};
g.Pa=function(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V){return this.G.Pa?this.G.Pa(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V):this.G.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V)};g.Qa=function(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V,ca){return this.G.Qa?this.G.Qa(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V,ca):this.G.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V,ca)};
g.nd=function(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V,ca,ta){return bf.Le?bf.Le(this.G,a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V,ca,ta):bf.call(null,this.G,a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V,ca,ta)};function cf(a,b){return la(a)?new af(a,b):null==a?null:rd(a,b)}function df(a){return null!=a&&(null!=a?a.v&131072||t===a.Re||(a.v?0:x(pd,a)):x(pd,a))?qd(a):null}function ef(a){return null==a?null:kd(a)}
var ff=function ff(a){switch(arguments.length){case 1:return ff.f(arguments[0]);case 2:return ff.j(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new I(c.slice(2),0,null);return ff.A(arguments[0],arguments[1],c)}};ff.f=function(a){return a};ff.j=function(a,b){return null==a?null:jd(a,b)};ff.A=function(a,b,c){for(;;){if(null==a)return null;a=ff.j(a,b);if(w(c))b=J(c),c=K(c);else return a}};
ff.K=function(a){var b=J(a),c=K(a);a=J(c);c=K(c);return this.A(b,a,c)};ff.J=2;function gf(a){return null==a||Fc(G(a))}function hf(a){return null==a?!1:null!=a?a.v&8||t===a.zf?!0:a.v?!1:x(Tc,a):x(Tc,a)}function jf(a){return null==a?!1:null!=a?a.v&4096||t===a.Ve?!0:a.v?!1:x(id,a):x(id,a)}function kf(a){return null!=a?a.v&16777216||t===a.od?!0:a.v?!1:x(Ad,a):x(Ad,a)}function lf(a){return null==a?!1:null!=a?a.v&1024||t===a.Oe?!0:a.v?!1:x(ed,a):x(ed,a)}
function mf(a){return null!=a?a.v&67108864||t===a.Se?!0:a.v?!1:x(Cd,a):x(Cd,a)}function nf(a){return null!=a?a.v&16384||t===a.Hf?!0:a.v?!1:x(md,a):x(md,a)}function of(a){return null!=a?a.N&512||t===a.yf?!0:!1:!1}function pf(a,b,c,d,e){for(;0!==e;)c[d]=a[b],d+=1,--e,b+=1}var qf={};function rf(a){return null==a?!1:null!=a?a.v&64||t===a.R?!0:a.v?!1:x(Xc,a):x(Xc,a)}function sf(a){return null==a?!1:!1===a?!1:!0}function uf(a){var b=$e(a);return b?b:null!=a?a.v&1||t===a.Bf?!0:a.v?!1:x(Oc,a):x(Oc,a)}
function vf(a,b){return D.o(a,b,qf)===qf?!1:!0}function wf(a,b){if(a===b)return 0;if(null==a)return-1;if(null==b)return 1;if("number"===typeof a){if("number"===typeof b)return Ua(a,b);throw Error(["Cannot compare ",z.f(a)," to ",z.f(b)].join(""));}if(null!=a?a.N&2048||t===a.Hb||(a.N?0:x(Od,a)):x(Od,a))return Pd(a,b);if("string"!==typeof a&&!Ec(a)&&!0!==a&&!1!==a||Gc(a)!==Gc(b))throw Error(["Cannot compare ",z.f(a)," to ",z.f(b)].join(""));return Ua(a,b)}
function xf(a,b){var c=P(a),d=P(b);if(c<d)a=-1;else if(c>d)a=1;else if(0===c)a=0;else a:for(d=0;;){var e=wf(Ke(a,d),Ke(b,d));if(0===e&&d+1<c)d+=1;else{a=e;break a}}return a}function yf(a){return M.j(a,wf)?wf:function(b,c){var d=a.j?a.j(b,c):a.call(null,b,c);return"number"===typeof d?d:w(d)?-1:w(a.j?a.j(c,b):a.call(null,c,b))?1:0}}function zf(a,b){return G(b)?(b=Af.f?Af.f(b):Af.call(null,b),a=yf(a),Va(b,a),G(b)):qe}function Bf(a,b){return Cf(a,b)}
function Cf(a,b){return zf(function(c,d){c=a.f?a.f(c):a.call(null,c);d=a.f?a.f(d):a.call(null,d);var e=yf(wf);return e.j?e.j(c,d):e.call(null,c,d)},b)}function Qe(a){switch(arguments.length){case 2:return Pe(arguments[0],arguments[1]);case 3:return Re(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length)].join(""));}}function Pe(a,b){var c=G(b);return c?(b=J(c),c=K(c),Lc?Lc(a,b,c):Mc.call(null,a,b,c)):a.D?a.D():a.call(null)}
function Re(a,b,c){for(c=G(c);;)if(c){var d=J(c);b=a.j?a.j(b,d):a.call(null,b,d);if(Be(b))return C(b);c=K(c)}else return b}function Df(a,b){a=Yd(a);if(w(a.hasNext()))for(var c=a.next();;)if(a.hasNext()){var d=a.next();c=b.j?b.j(c,d):b.call(null,c,d);if(Be(c))return C(c)}else return c;else return b.D?b.D():b.call(null)}function Ef(a,b,c){for(a=Yd(a);;)if(a.hasNext()){var d=a.next();c=b.j?b.j(c,d):b.call(null,c,d);if(Be(c))return C(c)}else return c}
function Mc(a){switch(arguments.length){case 2:return Ff(arguments[0],arguments[1]);case 3:return Lc(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length)].join(""));}}function Ff(a,b){return null!=b&&(b.v&524288||t===b.Te)?b.oa(null,a):Ec(b)?Fe(b,a):"string"===typeof b?Fe(b,a):x(sd,b)?td.j(b,a):oe(b)?Df(b,a):Pe(a,b)}
function Lc(a,b,c){return null!=c&&(c.v&524288||t===c.Te)?c.pa(null,a,b):Ec(c)?Ge(c,a,b):"string"===typeof c?Ge(c,a,b):x(sd,c)?td.o(c,a,b):oe(c)?Ef(c,a,b):Re(a,b,c)}function Gf(a,b,c){return null!=c?vd(c,a,b):b}function Hf(a){return a}function If(a,b,c,d){a=a.f?a.f(b):a.call(null,b);c=Lc(a,c,d);return a.f?a.f(c):a.call(null,c)}
var Jf=function Jf(a){switch(arguments.length){case 0:return Jf.D();case 1:return Jf.f(arguments[0]);case 2:return Jf.j(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new I(c.slice(2),0,null);return Jf.A(arguments[0],arguments[1],c)}};Jf.D=function(){return 0};Jf.f=function(a){return a};Jf.j=function(a,b){return a+b};Jf.A=function(a,b,c){return Lc(Jf,a+b,c)};Jf.K=function(a){var b=J(a),c=K(a);a=J(c);c=K(c);return this.A(b,a,c)};
Jf.J=2;function Kf(a){return a-1}var Lf=function Lf(a){switch(arguments.length){case 1:return Lf.f(arguments[0]);case 2:return Lf.j(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new I(c.slice(2),0,null);return Lf.A(arguments[0],arguments[1],c)}};Lf.f=function(a){return a};Lf.j=function(a,b){return a>b?a:b};Lf.A=function(a,b,c){return Lc(Lf,a>b?a:b,c)};Lf.K=function(a){var b=J(a),c=K(a);a=J(c);c=K(c);return this.A(b,a,c)};
Lf.J=2;function Mf(a){a=(a-a%2)/2;return 0<=a?Math.floor(a):Math.ceil(a)}function Nf(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24}
function Of(a){switch(arguments.length){case 1:return!0;case 2:return wd(arguments[0],arguments[1]);default:for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;d=new I(b.slice(2),0,null);a:for(b=arguments[0],c=arguments[1];;)if(b===c)if(K(d))b=c,c=J(d),d=K(d);else{b=c===J(d);break a}else{b=!1;break a}return b}}function Pf(a,b){return wd(a,b)}
var z=function z(a){switch(arguments.length){case 0:return z.D();case 1:return z.f(arguments[0]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new I(c.slice(1),0,null);return z.A(arguments[0],c)}};z.D=function(){return""};z.f=function(a){return null==a?"":[a].join("")};z.A=function(a,b){for(a=new oc(z.f(a));;)if(w(b))a=a.append(z.f(J(b))),b=K(b);else return a.toString()};z.K=function(a){var b=J(a);a=K(a);return this.A(b,a)};z.J=1;
function Oe(a,b){if(kf(b))if(Ie(a)&&Ie(b)&&P(a)!==P(b))a=!1;else a:for(a=G(a),b=G(b);;){if(null==a){a=null==b;break a}if(null!=b&&M.j(J(a),J(b)))a=K(a),b=K(b);else{a=!1;break a}}else a=null;return sf(a)}function Ve(a,b,c,d,e){this.meta=a;this.first=b;this.lb=c;this.count=d;this.C=e;this.v=65937646;this.N=8192}g=Ve.prototype;g.toString=function(){return $d(this)};g.equiv=function(a){return this.H(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.f=function(b){return N(this,b,0)};a.j=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,this.count)}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.f=a;b.j=function(c,d){return Q(this,c,d)};return b}();g.Z=function(){return this.meta};g.ja=function(){return 1===this.count?null:this.lb};g.Y=function(){return this.count};g.tb=function(){return this.first};g.ub=function(){return this.qa(null)};
g.S=function(){var a=this.C;return null!=a?a:this.C=a=ue(this)};g.H=function(a,b){return Oe(this,b)};g.ga=function(){return rd(qe,this.meta)};g.oa=function(a,b){return Pe(b,this)};g.pa=function(a,b,c){return Re(b,c,this)};g.ma=function(){return this.first};g.qa=function(){return 1===this.count?qe:this.lb};g.$=function(){return this};g.aa=function(a,b){return b===this.meta?this:new Ve(b,this.first,this.lb,this.count,this.C)};g.da=function(a,b){return new Ve(this.meta,b,this,this.count+1,null)};
function Qf(a){return null!=a?a.v&33554432||t===a.Ef?!0:a.v?!1:x(Bd,a):x(Bd,a)}Ve.prototype[Ic]=function(){return se(this)};function Rf(a){this.meta=a;this.v=65937614;this.N=8192}g=Rf.prototype;g.toString=function(){return $d(this)};g.equiv=function(a){return this.H(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.f=function(b){return N(this,b,0)};a.j=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.f=a;b.j=function(c,d){return Q(this,c,d)};return b}();g.Z=function(){return this.meta};g.ja=function(){return null};g.Y=function(){return 0};g.tb=function(){return null};g.ub=function(){throw Error("Can't pop empty list");};g.S=function(){return ve};
g.H=function(a,b){return Qf(b)||kf(b)?null==G(b):!1};g.ga=function(){return this};g.oa=function(a,b){return Pe(b,this)};g.pa=function(a,b,c){return Re(b,c,this)};g.ma=function(){return null};g.qa=function(){return qe};g.$=function(){return null};g.aa=function(a,b){return b===this.meta?this:new Rf(b)};g.da=function(a,b){return new Ve(this.meta,b,null,1,null)};var qe=new Rf(null);Rf.prototype[Ic]=function(){return se(this)};
function nn(a){return(null!=a?a.v&134217728||t===a.Gf||(a.v?0:x(Dd,a)):x(Dd,a))?(a=Ed(a))?a:qe:Lc(Te,qe,a)}var Sf=function Sf(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=0<c.length?new I(c.slice(0),0,null):null;return Sf.A(c)};Sf.A=function(a){if(a instanceof I&&0===a.i)var b=a.u;else a:for(b=[];;)if(null!=a)b.push(A(a)),a=$c(a);else break a;a=b.length;for(var c=qe;;)if(0<a){var d=a-1;c=Uc(c,b[a-1]);a=d}else return c};Sf.J=0;Sf.K=function(a){return this.A(G(a))};
function Tf(a,b,c,d){this.meta=a;this.first=b;this.lb=c;this.C=d;this.v=65929452;this.N=8192}g=Tf.prototype;g.toString=function(){return $d(this)};g.equiv=function(a){return this.H(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.f=function(b){return N(this,b,0)};a.j=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.f=a;b.j=function(c,d){return Q(this,c,d)};return b}();g.Z=function(){return this.meta};g.ja=function(){return null==this.lb?null:G(this.lb)};g.S=function(){var a=this.C;return null!=a?a:this.C=a=ue(this)};g.H=function(a,b){return Oe(this,b)};g.ga=function(){return qe};
g.oa=function(a,b){return Pe(b,this)};g.pa=function(a,b,c){return Re(b,c,this)};g.ma=function(){return this.first};g.qa=function(){return null==this.lb?qe:this.lb};g.$=function(){return this};g.aa=function(a,b){return b===this.meta?this:new Tf(b,this.first,this.lb,this.C)};g.da=function(a,b){return new Tf(null,b,this,null)};Tf.prototype[Ic]=function(){return se(this)};
function R(a,b){return null==b?new Ve(null,a,null,1,null):null!=b&&(b.v&64||t===b.R)?new Tf(null,a,b,null):new Tf(null,a,G(b),null)}function Uf(a,b){if(a.Ca===b.Ca)return 0;if(w(Fc(a.za)?b.za:!1))return-1;if(w(a.za)){if(Fc(b.za))return 1;var c=Ua(a.za,b.za);return 0===c?Ua(a.name,b.name):c}return Ua(a.name,b.name)}function E(a,b,c,d){this.za=a;this.name=b;this.Ca=c;this._hash=d;this.v=2153775105;this.N=4096}g=E.prototype;g.toString=function(){return[":",z.f(this.Ca)].join("")};
g.equiv=function(a){return this.H(null,a)};g.H=function(a,b){return b instanceof E?this.Ca===b.Ca:!1};g.call=function(a){switch(arguments.length-1){case 1:return this.f(arguments[1]);case 2:return this.j(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Jc(b)))};g.f=function(a){return D.j(a,this)};g.j=function(a,b){return D.o(a,this,b)};
g.S=function(){var a=this._hash;return null!=a?a:this._hash=a=je(ee(this.name),he(this.za))+2654435769|0};g.ac=function(){return this.name};g.bc=function(){return this.za};g.W=function(a,b){return Fd(b,[":",z.f(this.Ca)].join(""))};function Vf(a,b){return a===b?!0:a instanceof E&&b instanceof E?a.Ca===b.Ca:!1}function Wf(a){if(null!=a&&(a.N&4096||t===a.Sd))return a.bc(null);throw Error(["Doesn't support namespace: ",z.f(a)].join(""));}
var Xf=function Xf(a){switch(arguments.length){case 1:return Xf.f(arguments[0]);case 2:return Xf.j(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",z.f(arguments.length)].join(""));}};Xf.f=function(a){if(a instanceof E)return a;if(a instanceof me)return new E(Wf(a),Yf.f?Yf.f(a):Yf.call(null,a),a.str,null);if("string"===typeof a){var b=a.split("/");return 2===b.length?new E(b[0],b[1],a,null):new E(null,b[0],a,null)}return null};
Xf.j=function(a,b){a=a instanceof E?Yf.f?Yf.f(a):Yf.call(null,a):a instanceof me?Yf.f?Yf.f(a):Yf.call(null,a):a;b=b instanceof E?Yf.f?Yf.f(b):Yf.call(null,b):b instanceof me?Yf.f?Yf.f(b):Yf.call(null,b):b;return new E(a,b,[w(a)?[z.f(a),"/"].join(""):null,z.f(b)].join(""),null)};Xf.J=2;function Zf(a,b,c){this.meta=a;this.fn=b;this.s=null;this.C=c;this.v=32374988;this.N=1}g=Zf.prototype;g.toString=function(){return $d(this)};g.equiv=function(a){return this.H(null,a)};
function $f(a){null!=a.fn&&(a.s=a.fn.D?a.fn.D():a.fn.call(null),a.fn=null);return a.s}g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.f=function(b){return N(this,b,0)};a.j=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.f=a;b.j=function(c,d){return Q(this,c,d)};return b}();g.Z=function(){return this.meta};g.ja=function(){this.$(null);return null==this.s?null:K(this.s)};g.S=function(){var a=this.C;return null!=a?a:this.C=a=ue(this)};g.H=function(a,b){return Oe(this,b)};
g.ga=function(){return rd(qe,this.meta)};g.oa=function(a,b){return Pe(b,this)};g.pa=function(a,b,c){return Re(b,c,this)};g.ma=function(){this.$(null);return null==this.s?null:J(this.s)};g.qa=function(){this.$(null);return null!=this.s?pe(this.s):qe};g.$=function(){$f(this);if(null==this.s)return null;for(var a=this.s;;)if(a instanceof Zf)a=$f(a);else return this.s=a,G(this.s)};g.aa=function(a,b){var c=this;return b===this.meta?c:new Zf(b,function(){return c.$(null)},this.C)};
g.da=function(a,b){return R(b,this)};Zf.prototype[Ic]=function(){return se(this)};function ag(a){this.buf=a;this.end=0;this.v=2;this.N=0}ag.prototype.add=function(a){this.buf[this.end]=a;return this.end+=1};ag.prototype.ua=function(){var a=new bg(this.buf,0,this.end);this.buf=null;return a};ag.prototype.Y=function(){return this.end};function bg(a,b,c){this.u=a;this.off=b;this.end=c;this.v=524306;this.N=0}g=bg.prototype;g.Y=function(){return this.end-this.off};
g.V=function(a,b){return this.u[this.off+b]};g.wa=function(a,b,c){return 0<=b&&b<this.end-this.off?this.u[this.off+b]:c};g.ld=function(){if(this.off===this.end)throw Error("-drop-first of empty chunk");return new bg(this.u,this.off+1,this.end)};g.oa=function(a,b){return He(this.u,b,this.u[this.off],this.off+1)};g.pa=function(a,b,c){return He(this.u,b,c,this.off)};function cg(a,b,c,d){this.ua=a;this.Za=b;this.meta=c;this.C=d;this.v=31850732;this.N=1536}g=cg.prototype;g.toString=function(){return $d(this)};
g.equiv=function(a){return this.H(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.f=function(b){return N(this,b,0)};a.j=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.f=a;b.j=function(c,d){return Q(this,c,d)};return b}();g.Z=function(){return this.meta};g.ja=function(){return 1<Qc(this.ua)?new cg(Qd(this.ua),this.Za,null,null):null==this.Za?null:zd(this.Za)};g.S=function(){var a=this.C;return null!=a?a:this.C=a=ue(this)};
g.H=function(a,b){return Oe(this,b)};g.ga=function(){return qe};g.ma=function(){return Wc.j(this.ua,0)};g.qa=function(){return 1<Qc(this.ua)?new cg(Qd(this.ua),this.Za,null,null):null==this.Za?qe:this.Za};g.$=function(){return this};g.Cc=function(){return this.ua};g.Gb=function(){return null==this.Za?qe:this.Za};g.aa=function(a,b){return b===this.meta?this:new cg(this.ua,this.Za,b,this.C)};g.da=function(a,b){return R(b,this)};g.md=function(){return null==this.Za?null:this.Za};cg.prototype[Ic]=function(){return se(this)};
function dg(a,b){return 0===Qc(a)?b:new cg(a,b,null,null)}function eg(a,b){a.add(b)}function Af(a){var b=[];for(a=G(a);;)if(null!=a)b.push(J(a)),a=K(a);else return b}function fg(a,b){if(Ie(b))return P(b);var c=0;for(b=G(b);;)if(null!=b&&c<a)c+=1,b=K(b);else return c}
var gg=function gg(a){if(null==a)return null;var c=K(a);return null==c?G(J(a)):R(J(a),gg.f?gg.f(c):gg.call(null,c))},hg=function hg(a){switch(arguments.length){case 0:return hg.D();case 1:return hg.f(arguments[0]);case 2:return hg.j(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new I(c.slice(2),0,null);return hg.A(arguments[0],arguments[1],c)}};hg.D=function(){return new Zf(null,function(){return null},null)};
hg.f=function(a){return new Zf(null,function(){return a},null)};hg.j=function(a,b){return new Zf(null,function(){var c=G(a);return c?of(c)?dg(Rd(c),hg.j(Sd(c),b)):R(J(c),hg.j(pe(c),b)):b},null)};hg.A=function(a,b,c){return function h(e,f){return new Zf(null,function(){var k=G(e);return k?of(k)?dg(Rd(k),h(Sd(k),f)):R(J(k),h(pe(k),f)):w(f)?h(J(f),K(f)):null},null)}(hg.j(a,b),c)};hg.K=function(a){var b=J(a),c=K(a);a=J(c);c=K(c);return this.A(b,a,c)};hg.J=2;
var ig=function ig(a){switch(arguments.length){case 0:return ig.D();case 1:return ig.f(arguments[0]);case 2:return ig.j(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new I(c.slice(2),0,null);return ig.A(arguments[0],arguments[1],c)}};ig.D=function(){return Kd(Ue)};ig.f=function(a){return a};ig.j=function(a,b){return Ld(a,b)};ig.A=function(a,b,c){for(;;)if(a=Ld(a,b),w(c))b=J(c),c=K(c);else return a};
ig.K=function(a){var b=J(a),c=K(a);a=J(c);c=K(c);return this.A(b,a,c)};ig.J=2;
function jg(a,b,c){var d=G(c);if(0===b)return a.D?a.D():a.call(null);c=A(d);var e=Yc(d);if(1===b)return a.f?a.f(c):a.call(null,c);d=A(e);var f=Yc(e);if(2===b)return a.j?a.j(c,d):a.call(null,c,d);e=A(f);var h=Yc(f);if(3===b)return a.o?a.o(c,d,e):a.call(null,c,d,e);f=A(h);var k=Yc(h);if(4===b)return a.F?a.F(c,d,e,f):a.call(null,c,d,e,f);h=A(k);var l=Yc(k);if(5===b)return a.U?a.U(c,d,e,f,h):a.call(null,c,d,e,f,h);k=A(l);var m=Yc(l);if(6===b)return a.va?a.va(c,d,e,f,h,k):a.call(null,c,d,e,f,h,k);l=A(m);
var n=Yc(m);if(7===b)return a.Ra?a.Ra(c,d,e,f,h,k,l):a.call(null,c,d,e,f,h,k,l);m=A(n);var p=Yc(n);if(8===b)return a.Ea?a.Ea(c,d,e,f,h,k,l,m):a.call(null,c,d,e,f,h,k,l,m);n=A(p);var r=Yc(p);if(9===b)return a.Sa?a.Sa(c,d,e,f,h,k,l,m,n):a.call(null,c,d,e,f,h,k,l,m,n);p=A(r);var v=Yc(r);if(10===b)return a.Ga?a.Ga(c,d,e,f,h,k,l,m,n,p):a.call(null,c,d,e,f,h,k,l,m,n,p);r=A(v);var B=Yc(v);if(11===b)return a.Ha?a.Ha(c,d,e,f,h,k,l,m,n,p,r):a.call(null,c,d,e,f,h,k,l,m,n,p,r);v=A(B);var F=Yc(B);if(12===b)return a.Ia?
a.Ia(c,d,e,f,h,k,l,m,n,p,r,v):a.call(null,c,d,e,f,h,k,l,m,n,p,r,v);B=A(F);var H=Yc(F);if(13===b)return a.Ja?a.Ja(c,d,e,f,h,k,l,m,n,p,r,v,B):a.call(null,c,d,e,f,h,k,l,m,n,p,r,v,B);F=A(H);var O=Yc(H);if(14===b)return a.Ka?a.Ka(c,d,e,f,h,k,l,m,n,p,r,v,B,F):a.call(null,c,d,e,f,h,k,l,m,n,p,r,v,B,F);H=A(O);var V=Yc(O);if(15===b)return a.La?a.La(c,d,e,f,h,k,l,m,n,p,r,v,B,F,H):a.call(null,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H);O=A(V);var ca=Yc(V);if(16===b)return a.Ma?a.Ma(c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O):a.call(null,
c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O);V=A(ca);var ta=Yc(ca);if(17===b)return a.Na?a.Na(c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V):a.call(null,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V);ca=A(ta);var Ta=Yc(ta);if(18===b)return a.Oa?a.Oa(c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V,ca):a.call(null,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V,ca);ta=A(Ta);Ta=Yc(Ta);if(19===b)return a.Pa?a.Pa(c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V,ca,ta):a.call(null,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V,ca,ta);var tf=A(Ta);Yc(Ta);if(20===b)return a.Qa?a.Qa(c,d,e,f,h,k,
l,m,n,p,r,v,B,F,H,O,V,ca,ta,tf):a.call(null,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V,ca,ta,tf);throw Error("Only up to 20 arguments supported on functions");}function kg(a){return null!=a&&(a.v&128||t===a.cc)?a.ja(null):G(pe(a))}function lg(a,b,c){return null==c?a.f?a.f(b):a.call(a,b):mg(a,b,A(c),kg(c))}function mg(a,b,c,d){return null==d?a.j?a.j(b,c):a.call(a,b,c):ng(a,b,c,A(d),kg(d))}function ng(a,b,c,d,e){return null==e?a.o?a.o(b,c,d):a.call(a,b,c,d):og(a,b,c,d,A(e),kg(e))}
function og(a,b,c,d,e,f){if(null==f)return a.F?a.F(b,c,d,e):a.call(a,b,c,d,e);var h=A(f),k=K(f);if(null==k)return a.U?a.U(b,c,d,e,h):a.call(a,b,c,d,e,h);f=A(k);var l=K(k);if(null==l)return a.va?a.va(b,c,d,e,h,f):a.call(a,b,c,d,e,h,f);k=A(l);var m=K(l);if(null==m)return a.Ra?a.Ra(b,c,d,e,h,f,k):a.call(a,b,c,d,e,h,f,k);l=A(m);var n=K(m);if(null==n)return a.Ea?a.Ea(b,c,d,e,h,f,k,l):a.call(a,b,c,d,e,h,f,k,l);m=A(n);var p=K(n);if(null==p)return a.Sa?a.Sa(b,c,d,e,h,f,k,l,m):a.call(a,b,c,d,e,h,f,k,l,m);
n=A(p);var r=K(p);if(null==r)return a.Ga?a.Ga(b,c,d,e,h,f,k,l,m,n):a.call(a,b,c,d,e,h,f,k,l,m,n);p=A(r);var v=K(r);if(null==v)return a.Ha?a.Ha(b,c,d,e,h,f,k,l,m,n,p):a.call(a,b,c,d,e,h,f,k,l,m,n,p);r=A(v);var B=K(v);if(null==B)return a.Ia?a.Ia(b,c,d,e,h,f,k,l,m,n,p,r):a.call(a,b,c,d,e,h,f,k,l,m,n,p,r);v=A(B);var F=K(B);if(null==F)return a.Ja?a.Ja(b,c,d,e,h,f,k,l,m,n,p,r,v):a.call(a,b,c,d,e,h,f,k,l,m,n,p,r,v);B=A(F);var H=K(F);if(null==H)return a.Ka?a.Ka(b,c,d,e,h,f,k,l,m,n,p,r,v,B):a.call(a,b,c,d,
e,h,f,k,l,m,n,p,r,v,B);F=A(H);var O=K(H);if(null==O)return a.La?a.La(b,c,d,e,h,f,k,l,m,n,p,r,v,B,F):a.call(a,b,c,d,e,h,f,k,l,m,n,p,r,v,B,F);H=A(O);var V=K(O);if(null==V)return a.Ma?a.Ma(b,c,d,e,h,f,k,l,m,n,p,r,v,B,F,H):a.call(a,b,c,d,e,h,f,k,l,m,n,p,r,v,B,F,H);O=A(V);var ca=K(V);if(null==ca)return a.Na?a.Na(b,c,d,e,h,f,k,l,m,n,p,r,v,B,F,H,O):a.call(a,b,c,d,e,h,f,k,l,m,n,p,r,v,B,F,H,O);V=A(ca);var ta=K(ca);if(null==ta)return a.Oa?a.Oa(b,c,d,e,h,f,k,l,m,n,p,r,v,B,F,H,O,V):a.call(a,b,c,d,e,h,f,k,l,m,
n,p,r,v,B,F,H,O,V);ca=A(ta);var Ta=K(ta);if(null==Ta)return a.Pa?a.Pa(b,c,d,e,h,f,k,l,m,n,p,r,v,B,F,H,O,V,ca):a.call(a,b,c,d,e,h,f,k,l,m,n,p,r,v,B,F,H,O,V,ca);ta=A(Ta);Ta=K(Ta);if(null==Ta)return a.Qa?a.Qa(b,c,d,e,h,f,k,l,m,n,p,r,v,B,F,H,O,V,ca,ta):a.call(a,b,c,d,e,h,f,k,l,m,n,p,r,v,B,F,H,O,V,ca,ta);b=[b,c,d,e,h,f,k,l,m,n,p,r,v,B,F,H,O,V,ca,ta];for(c=Ta;;)if(c)b.push(A(c)),c=K(c);else break;return a.apply(a,b)}
function bf(a){switch(arguments.length){case 2:return W(arguments[0],arguments[1]);case 3:return pg(arguments[0],arguments[1],arguments[2]);case 4:return qg(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return rg(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;b=new I(b.slice(5),0,null);return sg(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],b)}}
function W(a,b){if(a.K){var c=a.J,d=fg(c+1,b);return d<=c?jg(a,d,b):a.K(b)}b=G(b);return null==b?a.D?a.D():a.call(a):lg(a,A(b),kg(b))}function pg(a,b,c){if(a.K){b=R(b,c);var d=a.J;c=fg(d,c)+1;return c<=d?jg(a,c,b):a.K(b)}return lg(a,b,G(c))}function qg(a,b,c,d){return a.K?(b=R(b,R(c,d)),c=a.J,d=2+fg(c-1,d),d<=c?jg(a,d,b):a.K(b)):mg(a,b,c,G(d))}function rg(a,b,c,d,e){return a.K?(b=R(b,R(c,R(d,e))),c=a.J,e=3+fg(c-2,e),e<=c?jg(a,e,b):a.K(b)):ng(a,b,c,d,G(e))}
function sg(a,b,c,d,e,f){return a.K?(f=gg(f),b=R(b,R(c,R(d,R(e,f)))),c=a.J,f=4+fg(c-3,f),f<=c?jg(a,f,b):a.K(b)):og(a,b,c,d,e,gg(f))}function tg(a){return G(a)?a:null}
function ug(){if("undefined"===typeof pc||"undefined"===typeof qc||"undefined"===typeof rc)rc=function(a){this.ef=a;this.v=393216;this.N=0},rc.prototype.aa=function(a,b){return new rc(b)},rc.prototype.Z=function(){return this.ef},rc.prototype.hasNext=function(){return!1},rc.prototype.next=function(){return Error("No such element")},rc.prototype.remove=function(){return Error("Unsupported operation")},rc.cf=function(){return new X(null,1,5,Y,[vg],null)},rc.Ic=!0,rc.Mb="cljs.core/t_cljs$core18588",
rc.pd=function(a){return Fd(a,"cljs.core/t_cljs$core18588")};return new rc(wg)}var xg={},yg={};function zg(a){this.Yb=xg;this._next=a}zg.prototype.hasNext=function(){this.Yb===xg?(this.Yb=yg,this._next=G(this._next)):this.Yb===this._next&&(this._next=K(this.Yb));return null!=this._next};zg.prototype.next=function(){if(this.hasNext())return this.Yb=this._next,J(this._next);throw Error("No such element");};zg.prototype.remove=function(){return Error("Unsupported operation")};
function Ag(a,b){for(;;){if(null==G(b))return!0;var c=J(b);c=a.f?a.f(c):a.call(null,c);if(w(c))b=K(b);else return!1}}function Bg(a,b){for(;;)if(b=G(b)){var c=J(b);c=a.f?a.f(c):a.call(null,c);if(w(c))return c;b=K(b)}else return null}
function Cg(a){return function(){function b(h,k){return Fc(a.j?a.j(h,k):a.call(null,h,k))}function c(h){return Fc(a.f?a.f(h):a.call(null,h))}function d(){return Fc(a.D?a.D():a.call(null))}var e=null,f=function(){function h(l,m,n){var p=null;if(2<arguments.length){p=0;for(var r=Array(arguments.length-2);p<r.length;)r[p]=arguments[p+2],++p;p=new I(r,0,null)}return k.call(this,l,m,p)}function k(l,m,n){return Fc(qg(a,l,m,n))}h.J=2;h.K=function(l){var m=J(l);l=K(l);var n=J(l);l=pe(l);return k(m,n,l)};
h.A=k;return h}();e=function(h,k,l){switch(arguments.length){case 0:return d.call(this);case 1:return c.call(this,h);case 2:return b.call(this,h,k);default:var m=null;if(2<arguments.length){m=0;for(var n=Array(arguments.length-2);m<n.length;)n[m]=arguments[m+2],++m;m=new I(n,0,null)}return f.A(h,k,m)}throw Error("Invalid arity: "+arguments.length);};e.J=2;e.K=f.K;e.D=d;e.f=c;e.j=b;e.A=f.A;return e}()}
var rn=function rn(a){switch(arguments.length){case 0:return rn.D();case 1:return rn.f(arguments[0]);case 2:return rn.j(arguments[0],arguments[1]);case 3:return rn.o(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new I(c.slice(3),0,null);return rn.A(arguments[0],arguments[1],arguments[2],c)}};rn.D=function(){return Hf};rn.f=function(a){return a};
rn.j=function(a,b){return function(){function c(l,m,n){l=b.o?b.o(l,m,n):b.call(null,l,m,n);return a.f?a.f(l):a.call(null,l)}function d(l,m){l=b.j?b.j(l,m):b.call(null,l,m);return a.f?a.f(l):a.call(null,l)}function e(l){l=b.f?b.f(l):b.call(null,l);return a.f?a.f(l):a.call(null,l)}function f(){var l=b.D?b.D():b.call(null);return a.f?a.f(l):a.call(null,l)}var h=null,k=function(){function l(n,p,r,v){var B=null;if(3<arguments.length){B=0;for(var F=Array(arguments.length-3);B<F.length;)F[B]=arguments[B+
3],++B;B=new I(F,0,null)}return m.call(this,n,p,r,B)}function m(n,p,r,v){n=rg(b,n,p,r,v);return a.f?a.f(n):a.call(null,n)}l.J=3;l.K=function(n){var p=J(n);n=K(n);var r=J(n);n=K(n);var v=J(n);n=pe(n);return m(p,r,v,n)};l.A=m;return l}();h=function(l,m,n,p){switch(arguments.length){case 0:return f.call(this);case 1:return e.call(this,l);case 2:return d.call(this,l,m);case 3:return c.call(this,l,m,n);default:var r=null;if(3<arguments.length){r=0;for(var v=Array(arguments.length-3);r<v.length;)v[r]=arguments[r+
3],++r;r=new I(v,0,null)}return k.A(l,m,n,r)}throw Error("Invalid arity: "+arguments.length);};h.J=3;h.K=k.K;h.D=f;h.f=e;h.j=d;h.o=c;h.A=k.A;return h}()};
rn.o=function(a,b,c){return function(){function d(m,n,p){m=c.o?c.o(m,n,p):c.call(null,m,n,p);m=b.f?b.f(m):b.call(null,m);return a.f?a.f(m):a.call(null,m)}function e(m,n){m=c.j?c.j(m,n):c.call(null,m,n);m=b.f?b.f(m):b.call(null,m);return a.f?a.f(m):a.call(null,m)}function f(m){m=c.f?c.f(m):c.call(null,m);m=b.f?b.f(m):b.call(null,m);return a.f?a.f(m):a.call(null,m)}function h(){var m=c.D?c.D():c.call(null);m=b.f?b.f(m):b.call(null,m);return a.f?a.f(m):a.call(null,m)}var k=null,l=function(){function m(p,
r,v,B){var F=null;if(3<arguments.length){F=0;for(var H=Array(arguments.length-3);F<H.length;)H[F]=arguments[F+3],++F;F=new I(H,0,null)}return n.call(this,p,r,v,F)}function n(p,r,v,B){p=rg(c,p,r,v,B);p=b.f?b.f(p):b.call(null,p);return a.f?a.f(p):a.call(null,p)}m.J=3;m.K=function(p){var r=J(p);p=K(p);var v=J(p);p=K(p);var B=J(p);p=pe(p);return n(r,v,B,p)};m.A=n;return m}();k=function(m,n,p,r){switch(arguments.length){case 0:return h.call(this);case 1:return f.call(this,m);case 2:return e.call(this,
m,n);case 3:return d.call(this,m,n,p);default:var v=null;if(3<arguments.length){v=0;for(var B=Array(arguments.length-3);v<B.length;)B[v]=arguments[v+3],++v;v=new I(B,0,null)}return l.A(m,n,p,v)}throw Error("Invalid arity: "+arguments.length);};k.J=3;k.K=l.K;k.D=h;k.f=f;k.j=e;k.o=d;k.A=l.A;return k}()};
rn.A=function(a,b,c,d){var e=nn(R(a,R(b,R(c,d))));return function(){function f(k){var l=null;if(0<arguments.length){l=0;for(var m=Array(arguments.length-0);l<m.length;)m[l]=arguments[l+0],++l;l=new I(m,0,null)}return h.call(this,l)}function h(k){k=W(J(e),k);for(var l=K(e);;)if(l){var m=J(l);k=m.f?m.f(k):m.call(null,k);l=K(l)}else return k}f.J=0;f.K=function(k){k=G(k);return h(k)};f.A=h;return f}()};rn.K=function(a){var b=J(a),c=K(a);a=J(c);var d=K(c);c=J(d);d=K(d);return this.A(b,a,c,d)};rn.J=3;
var Dg=function Dg(a){switch(arguments.length){case 1:return Dg.f(arguments[0]);case 2:return Dg.j(arguments[0],arguments[1]);case 3:return Dg.o(arguments[0],arguments[1],arguments[2]);case 4:return Dg.F(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new I(c.slice(4),0,null);return Dg.A(arguments[0],arguments[1],arguments[2],arguments[3],c)}};Dg.f=function(a){return a};
Dg.j=function(a,b){return function(){function c(l,m,n){return a.F?a.F(b,l,m,n):a.call(null,b,l,m,n)}function d(l,m){return a.o?a.o(b,l,m):a.call(null,b,l,m)}function e(l){return a.j?a.j(b,l):a.call(null,b,l)}function f(){return a.f?a.f(b):a.call(null,b)}var h=null,k=function(){function l(n,p,r,v){var B=null;if(3<arguments.length){B=0;for(var F=Array(arguments.length-3);B<F.length;)F[B]=arguments[B+3],++B;B=new I(F,0,null)}return m.call(this,n,p,r,B)}function m(n,p,r,v){return sg(a,b,n,p,r,S([v]))}
l.J=3;l.K=function(n){var p=J(n);n=K(n);var r=J(n);n=K(n);var v=J(n);n=pe(n);return m(p,r,v,n)};l.A=m;return l}();h=function(l,m,n,p){switch(arguments.length){case 0:return f.call(this);case 1:return e.call(this,l);case 2:return d.call(this,l,m);case 3:return c.call(this,l,m,n);default:var r=null;if(3<arguments.length){r=0;for(var v=Array(arguments.length-3);r<v.length;)v[r]=arguments[r+3],++r;r=new I(v,0,null)}return k.A(l,m,n,r)}throw Error("Invalid arity: "+arguments.length);};h.J=3;h.K=k.K;h.D=
f;h.f=e;h.j=d;h.o=c;h.A=k.A;return h}()};
Dg.o=function(a,b,c){return function(){function d(m,n,p){return a.U?a.U(b,c,m,n,p):a.call(null,b,c,m,n,p)}function e(m,n){return a.F?a.F(b,c,m,n):a.call(null,b,c,m,n)}function f(m){return a.o?a.o(b,c,m):a.call(null,b,c,m)}function h(){return a.j?a.j(b,c):a.call(null,b,c)}var k=null,l=function(){function m(p,r,v,B){var F=null;if(3<arguments.length){F=0;for(var H=Array(arguments.length-3);F<H.length;)H[F]=arguments[F+3],++F;F=new I(H,0,null)}return n.call(this,p,r,v,F)}function n(p,r,v,B){return sg(a,
b,c,p,r,S([v,B]))}m.J=3;m.K=function(p){var r=J(p);p=K(p);var v=J(p);p=K(p);var B=J(p);p=pe(p);return n(r,v,B,p)};m.A=n;return m}();k=function(m,n,p,r){switch(arguments.length){case 0:return h.call(this);case 1:return f.call(this,m);case 2:return e.call(this,m,n);case 3:return d.call(this,m,n,p);default:var v=null;if(3<arguments.length){v=0;for(var B=Array(arguments.length-3);v<B.length;)B[v]=arguments[v+3],++v;v=new I(B,0,null)}return l.A(m,n,p,v)}throw Error("Invalid arity: "+arguments.length);
};k.J=3;k.K=l.K;k.D=h;k.f=f;k.j=e;k.o=d;k.A=l.A;return k}()};
Dg.F=function(a,b,c,d){return function(){function e(n,p,r){return a.va?a.va(b,c,d,n,p,r):a.call(null,b,c,d,n,p,r)}function f(n,p){return a.U?a.U(b,c,d,n,p):a.call(null,b,c,d,n,p)}function h(n){return a.F?a.F(b,c,d,n):a.call(null,b,c,d,n)}function k(){return a.o?a.o(b,c,d):a.call(null,b,c,d)}var l=null,m=function(){function n(r,v,B,F){var H=null;if(3<arguments.length){H=0;for(var O=Array(arguments.length-3);H<O.length;)O[H]=arguments[H+3],++H;H=new I(O,0,null)}return p.call(this,r,v,B,H)}function p(r,
v,B,F){return sg(a,b,c,d,r,S([v,B,F]))}n.J=3;n.K=function(r){var v=J(r);r=K(r);var B=J(r);r=K(r);var F=J(r);r=pe(r);return p(v,B,F,r)};n.A=p;return n}();l=function(n,p,r,v){switch(arguments.length){case 0:return k.call(this);case 1:return h.call(this,n);case 2:return f.call(this,n,p);case 3:return e.call(this,n,p,r);default:var B=null;if(3<arguments.length){B=0;for(var F=Array(arguments.length-3);B<F.length;)F[B]=arguments[B+3],++B;B=new I(F,0,null)}return m.A(n,p,r,B)}throw Error("Invalid arity: "+
arguments.length);};l.J=3;l.K=m.K;l.D=k;l.f=h;l.j=f;l.o=e;l.A=m.A;return l}()};Dg.A=function(a,b,c,d,e){return function(){function f(k){var l=null;if(0<arguments.length){l=0;for(var m=Array(arguments.length-0);l<m.length;)m[l]=arguments[l+0],++l;l=new I(m,0,null)}return h.call(this,l)}function h(k){return rg(a,b,c,d,hg.j(e,k))}f.J=0;f.K=function(k){k=G(k);return h(k)};f.A=h;return f}()};Dg.K=function(a){var b=J(a),c=K(a);a=J(c);var d=K(c);c=J(d);var e=K(d);d=J(e);e=K(e);return this.A(b,a,c,d,e)};
Dg.J=4;
function Eg(){var a=Fg,b=Gg;return function(){function c(k,l,m){k=null==k?b:k;return a.o?a.o(k,l,m):a.call(null,k,l,m)}function d(k,l){k=null==k?b:k;return a.j?a.j(k,l):a.call(null,k,l)}function e(k){k=null==k?b:k;return a.f?a.f(k):a.call(null,k)}var f=null,h=function(){function k(m,n,p,r){var v=null;if(3<arguments.length){v=0;for(var B=Array(arguments.length-3);v<B.length;)B[v]=arguments[v+3],++v;v=new I(B,0,null)}return l.call(this,m,n,p,v)}function l(m,n,p,r){return rg(a,null==m?b:m,n,p,r)}k.J=
3;k.K=function(m){var n=J(m);m=K(m);var p=J(m);m=K(m);var r=J(m);m=pe(m);return l(n,p,r,m)};k.A=l;return k}();f=function(k,l,m,n){switch(arguments.length){case 1:return e.call(this,k);case 2:return d.call(this,k,l);case 3:return c.call(this,k,l,m);default:var p=null;if(3<arguments.length){p=0;for(var r=Array(arguments.length-3);p<r.length;)r[p]=arguments[p+3],++p;p=new I(r,0,null)}return h.A(k,l,m,p)}throw Error("Invalid arity: "+arguments.length);};f.J=3;f.K=h.K;f.f=e;f.j=d;f.o=c;f.A=h.A;return f}()}
function Hg(a,b){return function f(d,e){return new Zf(null,function(){var h=G(e);if(h){if(of(h)){for(var k=Rd(h),l=P(k),m=new ag(Array(l)),n=0;;)if(n<l)eg(m,function(){var p=d+n,r=Wc.j(k,n);return a.j?a.j(p,r):a.call(null,p,r)}()),n+=1;else break;return dg(m.ua(),f(d+l,Sd(h)))}return R(function(){var p=J(h);return a.j?a.j(d,p):a.call(null,d,p)}(),f(d+1,pe(h)))}return null},null)}(0,b)}
function Ig(a,b){return new Zf(null,function(){var c=G(b);if(c){if(of(c)){for(var d=Rd(c),e=P(d),f=new ag(Array(e)),h=0;;)if(h<e){var k=function(){var l=Wc.j(d,h);return a.f?a.f(l):a.call(null,l)}();null!=k&&f.add(k);h+=1}else break;return dg(f.ua(),Ig(a,Sd(c)))}e=function(){var l=J(c);return a.f?a.f(l):a.call(null,l)}();return null==e?Ig(a,pe(c)):R(e,Ig(a,pe(c)))}return null},null)}function Jg(a){this.state=a;this.ra=this.Id=this.meta=null;this.N=16386;this.v=6455296}g=Jg.prototype;
g.equiv=function(a){return this.H(null,a)};g.H=function(a,b){return this===b};g.eb=function(){return this.state};g.Z=function(){return this.meta};g.Hc=function(a,b){for(var c=G(this.ra),d=null,e=0,f=0;;)if(f<e){var h=d.V(null,f),k=T(h,0,null);h=T(h,1,null);h.F?h.F(k,this,a,b):h.call(null,k,this,a,b);f+=1}else if(c=G(c))of(c)?(d=Rd(c),c=Sd(c),k=d,e=P(d),d=k):(d=J(c),k=T(d,0,null),h=T(d,1,null),h.F?h.F(k,this,a,b):h.call(null,k,this,a,b),c=K(c),d=null,e=0),f=0;else break};
g.fc=function(a,b,c){this.ra=U.o(this.ra,b,c);return this};g.gc=function(a,b){return this.ra=Ze.j(this.ra,b)};g.S=function(){return na(this)};function Kg(a){return new Jg(a)}function Lg(a,b){if(a instanceof Jg){var c=a.Id;if(null!=c&&!w(c.f?c.f(b):c.call(null,b)))throw Error("Validator rejected reference state");c=a.state;a.state=b;null!=a.ra&&a.Hc(c,b);return b}return Vd(a,b)}
var Mg=function Mg(a){switch(arguments.length){case 2:return Mg.j(arguments[0],arguments[1]);case 3:return Mg.o(arguments[0],arguments[1],arguments[2]);case 4:return Mg.F(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new I(c.slice(4),0,null);return Mg.A(arguments[0],arguments[1],arguments[2],arguments[3],c)}};
Mg.j=function(a,b){if(a instanceof Jg){var c=a.state;b=b.f?b.f(c):b.call(null,c);a=Lg(a,b)}else a=Wd.j(a,b);return a};Mg.o=function(a,b,c){if(a instanceof Jg){var d=a.state;b=b.j?b.j(d,c):b.call(null,d,c);a=Lg(a,b)}else a=Wd.o(a,b,c);return a};Mg.F=function(a,b,c,d){if(a instanceof Jg){var e=a.state;b=b.o?b.o(e,c,d):b.call(null,e,c,d);a=Lg(a,b)}else a=Wd.F(a,b,c,d);return a};Mg.A=function(a,b,c,d,e){return a instanceof Jg?Lg(a,rg(b,a.state,c,d,e)):Wd.U(a,b,c,d,e)};
Mg.K=function(a){var b=J(a),c=K(a);a=J(c);var d=K(c);c=J(d);var e=K(d);d=J(e);e=K(e);return this.A(b,a,c,d,e)};Mg.J=4;
var Z=function Z(a){switch(arguments.length){case 1:return Z.f(arguments[0]);case 2:return Z.j(arguments[0],arguments[1]);case 3:return Z.o(arguments[0],arguments[1],arguments[2]);case 4:return Z.F(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new I(c.slice(4),0,null);return Z.A(arguments[0],arguments[1],arguments[2],arguments[3],c)}};
Z.f=function(a){return function(b){return function(){function c(k,l){l=a.f?a.f(l):a.call(null,l);return b.j?b.j(k,l):b.call(null,k,l)}function d(k){return b.f?b.f(k):b.call(null,k)}function e(){return b.D?b.D():b.call(null)}var f=null,h=function(){function k(m,n,p){var r=null;if(2<arguments.length){r=0;for(var v=Array(arguments.length-2);r<v.length;)v[r]=arguments[r+2],++r;r=new I(v,0,null)}return l.call(this,m,n,r)}function l(m,n,p){n=pg(a,n,p);return b.j?b.j(m,n):b.call(null,m,n)}k.J=2;k.K=function(m){var n=
J(m);m=K(m);var p=J(m);m=pe(m);return l(n,p,m)};k.A=l;return k}();f=function(k,l,m){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,k);case 2:return c.call(this,k,l);default:var n=null;if(2<arguments.length){n=0;for(var p=Array(arguments.length-2);n<p.length;)p[n]=arguments[n+2],++n;n=new I(p,0,null)}return h.A(k,l,n)}throw Error("Invalid arity: "+arguments.length);};f.J=2;f.K=h.K;f.D=e;f.f=d;f.j=c;f.A=h.A;return f}()}};
Z.j=function(a,b){return new Zf(null,function(){var c=G(b);if(c){if(of(c)){for(var d=Rd(c),e=P(d),f=new ag(Array(e)),h=0;;)if(h<e)eg(f,function(){var k=Wc.j(d,h);return a.f?a.f(k):a.call(null,k)}()),h+=1;else break;return dg(f.ua(),Z.j(a,Sd(c)))}return R(function(){var k=J(c);return a.f?a.f(k):a.call(null,k)}(),Z.j(a,pe(c)))}return null},null)};
Z.o=function(a,b,c){return new Zf(null,function(){var d=G(b),e=G(c);if(d&&e){var f=J(d);var h=J(e);f=a.j?a.j(f,h):a.call(null,f,h);d=R(f,Z.o(a,pe(d),pe(e)))}else d=null;return d},null)};Z.F=function(a,b,c,d){return new Zf(null,function(){var e=G(b),f=G(c),h=G(d);if(e&&f&&h){var k=J(e);var l=J(f),m=J(h);k=a.o?a.o(k,l,m):a.call(null,k,l,m);e=R(k,Z.F(a,pe(e),pe(f),pe(h)))}else e=null;return e},null)};
Z.A=function(a,b,c,d,e){return Z.j(function(f){return W(a,f)},function k(h){return new Zf(null,function(){var l=Z.j(G,h);return Ag(Hf,l)?R(Z.j(J,l),k(Z.j(pe,l))):null},null)}(Te.A(e,d,S([c,b]))))};Z.K=function(a){var b=J(a),c=K(a);a=J(c);var d=K(c);c=J(d);var e=K(d);d=J(e);e=K(e);return this.A(b,a,c,d,e)};Z.J=4;function Ng(a,b){return new Zf(null,function(){if(0<a){var c=G(b);return c?R(J(c),Ng(a-1,pe(c))):null}return null},null)}
function Og(a,b){return new Zf(null,function(){a:for(var c=a,d=b;;)if(d=G(d),0<c&&d)--c,d=pe(d);else break a;return d},null)}function Pg(a){return Z.o(function(b){return b},a,Og(2,a))}function Qg(a,b,c,d){this.meta=a;this.count=b;this.val=c;this.next=d;this.C=null;this.v=32374988;this.N=1}g=Qg.prototype;g.toString=function(){return $d(this)};g.equiv=function(a){return this.H(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.f=function(b){return N(this,b,0)};a.j=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,this.count)}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.f=a;b.j=function(c,d){return Q(this,c,d)};return b}();g.Z=function(){return this.meta};g.ja=function(){return null==this.next?1<this.count?this.next=new Qg(null,this.count-1,this.val,null):-1===this.count?this:null:this.next};
g.S=function(){var a=this.C;return null!=a?a:this.C=a=ue(this)};g.H=function(a,b){return Oe(this,b)};g.ga=function(){return qe};g.oa=function(a,b){if(-1===this.count)for(var c=b.j?b.j(this.val,this.val):b.call(null,this.val,this.val);;){if(Be(c))return C(c);c=b.j?b.j(c,this.val):b.call(null,c,this.val)}else for(a=1,c=this.val;;)if(a<this.count){c=b.j?b.j(c,this.val):b.call(null,c,this.val);if(Be(c))return C(c);a+=1}else return c};
g.pa=function(a,b,c){if(-1===this.count)for(c=b.j?b.j(c,this.val):b.call(null,c,this.val);;){if(Be(c))return C(c);c=b.j?b.j(c,this.val):b.call(null,c,this.val)}else for(a=0;;)if(a<this.count){c=b.j?b.j(c,this.val):b.call(null,c,this.val);if(Be(c))return C(c);a+=1}else return c};g.ma=function(){return this.val};g.qa=function(){return null==this.next?1<this.count?this.next=new Qg(null,this.count-1,this.val,null):-1===this.count?this:qe:this.next};g.$=function(){return this};
g.aa=function(a,b){return b===this.meta?this:new Qg(b,this.count,this.val,this.next)};g.da=function(a,b){return R(b,this)};function Rg(a){return 0<a?new Qg(null,a,null,null):qe}var Sg=function Sg(a){switch(arguments.length){case 0:return Sg.D();case 1:return Sg.f(arguments[0]);case 2:return Sg.j(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new I(c.slice(2),0,null);return Sg.A(arguments[0],arguments[1],c)}};Sg.D=function(){return qe};
Sg.f=function(a){return new Zf(null,function(){return a},null)};Sg.j=function(a,b){return new Zf(null,function(){var c=G(a),d=G(b);return c&&d?R(J(c),R(J(d),Sg.j(pe(c),pe(d)))):null},null)};Sg.A=function(a,b,c){return new Zf(null,function(){var d=Z.j(G,Te.A(c,b,S([a])));return Ag(Hf,d)?hg.j(Z.j(J,d),W(Sg,Z.j(pe,d))):null},null)};Sg.K=function(a){var b=J(a),c=K(a);a=J(c);c=K(c);return this.A(b,a,c)};Sg.J=2;function Tg(a,b){return W(hg,pg(Z,a,b))}
function Ug(a,b){return new Zf(null,function(){var c=G(b);if(c){if(of(c)){for(var d=Rd(c),e=P(d),f=new ag(Array(e)),h=0;;)if(h<e){var k=Wc.j(d,h);k=a.f?a.f(k):a.call(null,k);w(k)&&(k=Wc.j(d,h),f.add(k));h+=1}else break;return dg(f.ua(),Ug(a,Sd(c)))}d=J(c);c=pe(c);return w(a.f?a.f(d):a.call(null,d))?R(d,Ug(a,c)):Ug(a,c)}return null},null)}function Vg(a,b){return Ug(Cg(a),b)}
function Wg(a){return function d(c){return new Zf(null,function(){return R(c,w(kf.f?kf.f(c):kf.call(null,c))?Tg(d,S([G.f?G.f(c):G.call(null,c)])):null)},null)}(a)}function Xg(a){return Ug(function(b){return!kf(b)},pe(Wg(a)))}
var Fg=function Fg(a){switch(arguments.length){case 0:return Fg.D();case 1:return Fg.f(arguments[0]);case 2:return Fg.j(arguments[0],arguments[1]);case 3:return Fg.o(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length)].join(""));}};Fg.D=function(){return Ue};Fg.f=function(a){return a};Fg.j=function(a,b){return null!=a?null!=a&&(a.N&4||t===a.Ge)?rd(Md(Lc(Ld,Kd(a),b)),df(a)):Lc(Uc,a,b):Lc(Te,a,b)};
Fg.o=function(a,b,c){return null!=a&&(a.N&4||t===a.Ge)?rd(Md(If(b,ig,Kd(a),c)),df(a)):If(b,Te,a,c)};Fg.J=3;function Yg(a){return Md(Lc(function(b,c){return ig.j(b,Ce.f?Ce.f(c):Ce.call(null,c))},Kd(Ue),a))}function Zg(a,b,c){return new Zf(null,function(){var d=G(c);if(d){var e=Ng(a,d);return a===P(e)?R(e,Zg(a,b,Og(b,d))):null}return null},null)}function $g(a,b){return Lc(D,a,b)}
var ah=function ah(a,b,c){b=G(b);var e=J(b),f=K(b);return f?U.o(a,e,function(){var h=D.j(a,e);return ah.o?ah.o(h,f,c):ah.call(null,h,f,c)}()):U.o(a,e,c)},bh=function bh(a){switch(arguments.length){case 3:return bh.o(arguments[0],arguments[1],arguments[2]);case 4:return bh.F(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return bh.U(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 6:return bh.va(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);
default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new I(c.slice(6),0,null);return bh.A(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],c)}};bh.o=function(a,b,c){b=G(b);var d=J(b);return(b=K(b))?U.o(a,d,bh.o(D.j(a,d),b,c)):U.o(a,d,function(){var e=D.j(a,d);return c.f?c.f(e):c.call(null,e)}())};
bh.F=function(a,b,c,d){b=G(b);var e=J(b);return(b=K(b))?U.o(a,e,bh.F(D.j(a,e),b,c,d)):U.o(a,e,function(){var f=D.j(a,e);return c.j?c.j(f,d):c.call(null,f,d)}())};bh.U=function(a,b,c,d,e){b=G(b);var f=J(b);return(b=K(b))?U.o(a,f,bh.U(D.j(a,f),b,c,d,e)):U.o(a,f,function(){var h=D.j(a,f);return c.o?c.o(h,d,e):c.call(null,h,d,e)}())};
bh.va=function(a,b,c,d,e,f){b=G(b);var h=J(b);return(b=K(b))?U.o(a,h,bh.va(D.j(a,h),b,c,d,e,f)):U.o(a,h,function(){var k=D.j(a,h);return c.F?c.F(k,d,e,f):c.call(null,k,d,e,f)}())};bh.A=function(a,b,c,d,e,f,h){var k=G(b);b=J(k);return(k=K(k))?U.o(a,b,sg(bh,D.j(a,b),k,c,d,S([e,f,h]))):U.o(a,b,sg(c,D.j(a,b),d,e,f,S([h])))};bh.K=function(a){var b=J(a),c=K(a);a=J(c);var d=K(c);c=J(d);var e=K(d);d=J(e);var f=K(e);e=J(f);var h=K(f);f=J(h);h=K(h);return this.A(b,a,c,d,e,f,h)};bh.J=6;
function ch(a,b,c){return U.o(a,b,function(){var d=D.j(a,b);return c.f?c.f(d):c.call(null,d)}())}function dh(a,b){var c=eh,d=Eg();return U.o(a,c,function(){var e=D.j(a,c);return d.j?d.j(e,b):d.call(null,e,b)}())}function fh(a,b){this.ca=a;this.u=b}function gh(a){return new fh(a,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null])}function hh(a){return new fh(a.ca,Jc(a.u))}
function ih(a){a=a.B;return 32>a?0:a-1>>>5<<5}function jh(a,b,c){for(;;){if(0===b)return c;var d=gh(a);d.u[0]=c;c=d;b-=5}}var kh=function kh(a,b,c,d){var f=hh(c),h=a.B-1>>>b&31;5===b?f.u[h]=d:(c=c.u[h],null!=c?(b-=5,a=kh.F?kh.F(a,b,c,d):kh.call(null,a,b,c,d)):a=jh(null,b-5,d),f.u[h]=a);return f};function lh(a,b){throw Error(["No item ",z.f(a)," in vector of length ",z.f(b)].join(""));}
function mh(a,b){if(b>=ih(a))return a.tail;var c=a.root;for(a=a.shift;;)if(0<a){var d=a-5;c=c.u[b>>>a&31];a=d}else return c.u}function nh(a,b){return 0<=b&&b<a.B?mh(a,b):lh(b,a.B)}
var oh=function oh(a,b,c,d,e){var h=hh(c);if(0===b)h.u[d&31]=e;else{var k=d>>>b&31;b-=5;c=c.u[k];a=oh.U?oh.U(a,b,c,d,e):oh.call(null,a,b,c,d,e);h.u[k]=a}return h},ph=function ph(a,b,c){var e=a.B-2>>>b&31;if(5<b){b-=5;var f=c.u[e];a=ph.o?ph.o(a,b,f):ph.call(null,a,b,f);if(null==a&&0===e)return null;c=hh(c);c.u[e]=a;return c}if(0===e)return null;c=hh(c);c.u[e]=null;return c};function qh(a,b,c,d,e,f){this.i=a;this.base=b;this.u=c;this.ka=d;this.start=e;this.end=f}
qh.prototype.hasNext=function(){return this.i<this.end};qh.prototype.next=function(){32===this.i-this.base&&(this.u=mh(this.ka,this.i),this.base+=32);var a=this.u[this.i&31];this.i+=1;return a};function rh(a,b,c){return new qh(b,b-b%32,b<P(a)?mh(a,b):null,a,b,c)}function sh(a,b,c,d){return c<d?th(a,b,Ke(a,c),c+1,d):b.D?b.D():b.call(null)}
function th(a,b,c,d,e){var f=c;c=d;for(d=mh(a,d);;)if(c<e){var h=c&31;d=0===h?mh(a,c):d;h=d[h];f=b.j?b.j(f,h):b.call(null,f,h);if(Be(f))return C(f);c+=1}else return f}function X(a,b,c,d,e,f){this.meta=a;this.B=b;this.shift=c;this.root=d;this.tail=e;this.C=f;this.v=167666463;this.N=139268}g=X.prototype;g.Jb=function(a,b){return 0<=b&&b<this.B?new uh(b,mh(this,b)[b&31]):null};g.toString=function(){return $d(this)};g.equiv=function(a){return this.H(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.f=function(b){return N(this,b,0)};a.j=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.f=a;b.j=function(c,d){return Q(this,c,d)};return b}();g.na=function(a,b){return this.T(null,b,null)};g.T=function(a,b,c){return"number"===typeof b?this.wa(null,b,c):c};
g.fb=function(a,b,c){a=0;for(var d=c;;)if(a<this.B){var e=mh(this,a);c=e.length;a:for(var f=0;;)if(f<c){var h=f+a,k=e[f];d=b.o?b.o(d,h,k):b.call(null,d,h,k);if(Be(d)){e=d;break a}f+=1}else{e=d;break a}if(Be(e))return C(e);a+=c;d=e}else return d};g.kd=t;g.V=function(a,b){return nh(this,b)[b&31]};g.wa=function(a,b,c){return 0<=b&&b<this.B?mh(this,b)[b&31]:c};
g.vb=function(a,b,c){if(0<=b&&b<this.B)return ih(this)<=b?(a=Jc(this.tail),a[b&31]=c,new X(this.meta,this.B,this.shift,this.root,a,null)):new X(this.meta,this.B,this.shift,oh(this,this.shift,this.root,b,c),this.tail,null);if(b===this.B)return this.da(null,c);throw Error(["Index ",z.f(b)," out of bounds  [0,",z.f(this.B),"]"].join(""));};g.xa=function(){return rh(this,0,this.B)};g.Z=function(){return this.meta};g.Y=function(){return this.B};g.tb=function(){return 0<this.B?this.V(null,this.B-1):null};
g.ub=function(){if(0===this.B)throw Error("Can't pop empty vector");if(1===this.B)return rd(Ue,this.meta);if(1<this.B-ih(this))return new X(this.meta,this.B-1,this.shift,this.root,this.tail.slice(0,-1),null);var a=mh(this,this.B-2),b=ph(this,this.shift,this.root);b=null==b?Y:b;var c=this.B-1;return 5<this.shift&&null==b.u[1]?new X(this.meta,c,this.shift-5,b.u[0],a,null):new X(this.meta,c,this.shift,b,a,null)};g.dc=function(){return 0<this.B?new Ne(this,this.B-1,null):null};
g.S=function(){var a=this.C;return null!=a?a:this.C=a=ue(this)};g.H=function(a,b){if(b instanceof X)if(this.B===P(b))for(a=this.xa(null),b=b.xa(null);;)if(a.hasNext()){var c=a.next(),d=b.next();if(!M.j(c,d))return!1}else return!0;else return!1;else return Oe(this,b)};g.Ib=function(){return new vh(this.B,this.shift,wh.f?wh.f(this.root):wh.call(null,this.root),xh.f?xh.f(this.tail):xh.call(null,this.tail))};g.ga=function(){return rd(Ue,this.meta)};g.oa=function(a,b){return sh(this,b,0,this.B)};
g.pa=function(a,b,c){a=0;for(var d=c;;)if(a<this.B){var e=mh(this,a);c=e.length;a:for(var f=0;;)if(f<c){var h=e[f];d=b.j?b.j(d,h):b.call(null,d,h);if(Be(d)){e=d;break a}f+=1}else{e=d;break a}if(Be(e))return C(e);a+=c;d=e}else return d};g.Aa=function(a,b,c){if("number"===typeof b)return this.vb(null,b,c);throw Error("Vector's key for assoc must be a number.");};
g.$=function(){if(0===this.B)return null;if(32>=this.B)return new I(this.tail,0,null);a:{var a=this.root;for(var b=this.shift;;)if(0<b)b-=5,a=a.u[0];else{a=a.u;break a}}return yh?yh(this,a,0,0):zh.call(null,this,a,0,0)};g.aa=function(a,b){return b===this.meta?this:new X(b,this.B,this.shift,this.root,this.tail,this.C)};
g.da=function(a,b){if(32>this.B-ih(this)){a=this.tail.length;for(var c=Array(a+1),d=0;;)if(d<a)c[d]=this.tail[d],d+=1;else break;c[a]=b;return new X(this.meta,this.B+1,this.shift,this.root,c,null)}a=(c=this.B>>>5>1<<this.shift)?this.shift+5:this.shift;c?(c=gh(null),c.u[0]=this.root,d=jh(null,this.shift,new fh(null,this.tail)),c.u[1]=d):c=kh(this,this.shift,this.root,new fh(null,this.tail));return new X(this.meta,this.B+1,a,c,[b],null)};
g.call=function(a){switch(arguments.length-1){case 1:return this.f(arguments[1]);case 2:return this.j(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Jc(b)))};g.f=function(a){return this.V(null,a)};g.j=function(a,b){return this.wa(null,a,b)};
var Y=new fh(null,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]),Ue=new X(null,0,5,Y,[],ve);function Ah(a,b){var c=a.length;a=b?a:Jc(a);if(32>c)return new X(null,c,5,Y,a,null);var d=a.slice(0,32);b=32;for(var e=(new X(null,32,5,Y,d,null)).Ib(null);;)if(b<c)d=b+1,e=ig.j(e,a[b]),b=d;else return Md(e)}X.prototype[Ic]=function(){return se(this)};
function Bh(a){return w(Ch.f?Ch.f(a):Ch.call(null,a))?new X(null,2,5,Y,[Dh.f?Dh.f(a):Dh.call(null,a),Eh.f?Eh.f(a):Eh.call(null,a)],null):nf(a)?cf(a,null):Ec(a)?Ah(a,!0):Md(Lc(Ld,Kd(Ue),a))}var Fh=function Fh(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=0<c.length?new I(c.slice(0),0,null):null;return Fh.A(c)};Fh.A=function(a){return a instanceof I&&0===a.i?Ah(a.u,!Ec(a.u)):Bh(a)};Fh.J=0;Fh.K=function(a){return this.A(G(a))};
function Gh(a,b,c,d,e){this.vec=a;this.node=b;this.i=c;this.off=d;this.meta=e;this.C=null;this.v=32375020;this.N=1536}g=Gh.prototype;g.toString=function(){return $d(this)};g.equiv=function(a){return this.H(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.f=function(b){return N(this,b,0)};a.j=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.f=a;b.j=function(c,d){return Q(this,c,d)};return b}();g.Z=function(){return this.meta};g.ja=function(){if(this.off+1<this.node.length){var a=this.vec;var b=this.node,c=this.i,d=this.off+1;a=yh?yh(a,b,c,d):zh.call(null,a,b,c,d);return null==a?null:a}return this.md()};
g.S=function(){var a=this.C;return null!=a?a:this.C=a=ue(this)};g.H=function(a,b){return Oe(this,b)};g.ga=function(){return qe};g.oa=function(a,b){return sh(this.vec,b,this.i+this.off,P(this.vec))};g.pa=function(a,b,c){return th(this.vec,b,c,this.i+this.off,P(this.vec))};g.ma=function(){return this.node[this.off]};g.qa=function(){if(this.off+1<this.node.length){var a=this.vec;var b=this.node,c=this.i,d=this.off+1;a=yh?yh(a,b,c,d):zh.call(null,a,b,c,d);return null==a?qe:a}return this.Gb(null)};
g.$=function(){return this};g.Cc=function(){var a=this.node;return new bg(a,this.off,a.length)};g.Gb=function(){var a=this.i+this.node.length;if(a<Qc(this.vec)){var b=this.vec,c=mh(this.vec,a);return yh?yh(b,c,a,0):zh.call(null,b,c,a,0)}return qe};g.aa=function(a,b){return b===this.meta?this:Hh?Hh(this.vec,this.node,this.i,this.off,b):zh.call(null,this.vec,this.node,this.i,this.off,b)};g.da=function(a,b){return R(b,this)};
g.md=function(){var a=this.i+this.node.length;if(a<Qc(this.vec)){var b=this.vec,c=mh(this.vec,a);return yh?yh(b,c,a,0):zh.call(null,b,c,a,0)}return null};Gh.prototype[Ic]=function(){return se(this)};
function zh(a){switch(arguments.length){case 3:var b=arguments[0],c=arguments[1],d=arguments[2];return new Gh(b,nh(b,c),c,d,null);case 4:return yh(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Hh(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",z.f(arguments.length)].join(""));}}function yh(a,b,c,d){return new Gh(a,b,c,d,null)}function Hh(a,b,c,d,e){return new Gh(a,b,c,d,e)}
function Ih(a,b,c,d,e){this.meta=a;this.ka=b;this.start=c;this.end=d;this.C=e;this.v=167666463;this.N=139264}g=Ih.prototype;g.Jb=function(a,b){if(0>b)return null;a=this.start+b;return a<this.end?new uh(b,bd.j(this.ka,a)):null};g.toString=function(){return $d(this)};g.equiv=function(a){return this.H(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.f=function(b){return N(this,b,0)};a.j=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.f=a;b.j=function(c,d){return Q(this,c,d)};return b}();g.na=function(a,b){return this.T(null,b,null)};g.T=function(a,b,c){return"number"===typeof b?this.wa(null,b,c):c};
g.fb=function(a,b,c){a=this.start;for(var d=0;;)if(a<this.end){var e=d,f=Wc.j(this.ka,a);c=b.o?b.o(c,e,f):b.call(null,c,e,f);if(Be(c))return C(c);d+=1;a+=1}else return c};g.V=function(a,b){return 0>b||this.end<=this.start+b?lh(b,this.end-this.start):Wc.j(this.ka,this.start+b)};g.wa=function(a,b,c){return 0>b||this.end<=this.start+b?c:Wc.o(this.ka,this.start+b,c)};
g.vb=function(a,b,c){a=this.start+b;if(0>b||this.end+1<=a)throw Error(["Index ",z.f(b)," out of bounds [0,",z.f(this.Y(null)),"]"].join(""));b=this.meta;c=U.o(this.ka,a,c);var d=this.start,e=this.end;a+=1;a=e>a?e:a;return Jh.U?Jh.U(b,c,d,a,null):Jh.call(null,b,c,d,a,null)};g.xa=function(){return null!=this.ka&&t===this.ka.kd?rh(this.ka,this.start,this.end):new zg(this)};g.Z=function(){return this.meta};g.Y=function(){return this.end-this.start};
g.tb=function(){return this.start===this.end?null:Wc.j(this.ka,this.end-1)};g.ub=function(){if(this.start===this.end)throw Error("Can't pop empty vector");var a=this.meta,b=this.ka,c=this.start,d=this.end-1;return Jh.U?Jh.U(a,b,c,d,null):Jh.call(null,a,b,c,d,null)};g.dc=function(){return this.start!==this.end?new Ne(this,this.end-this.start-1,null):null};g.S=function(){var a=this.C;return null!=a?a:this.C=a=ue(this)};g.H=function(a,b){return Oe(this,b)};g.ga=function(){return rd(Ue,this.meta)};
g.oa=function(a,b){return null!=this.ka&&t===this.ka.kd?sh(this.ka,b,this.start,this.end):De(this,b)};g.pa=function(a,b,c){return null!=this.ka&&t===this.ka.kd?th(this.ka,b,c,this.start,this.end):Ee(this,b,c)};g.Aa=function(a,b,c){if("number"===typeof b)return this.vb(null,b,c);throw Error("Subvec's key for assoc must be a number.");};g.$=function(){var a=this;return function d(c){return c===a.end?null:R(Wc.j(a.ka,c),new Zf(null,function(){return d(c+1)},null))}(a.start)};
g.aa=function(a,b){return b===this.meta?this:Jh.U?Jh.U(b,this.ka,this.start,this.end,this.C):Jh.call(null,b,this.ka,this.start,this.end,this.C)};g.da=function(a,b){a=this.meta;b=nd(this.ka,this.end,b);var c=this.start,d=this.end+1;return Jh.U?Jh.U(a,b,c,d,null):Jh.call(null,a,b,c,d,null)};g.call=function(a){switch(arguments.length-1){case 1:return this.f(arguments[1]);case 2:return this.j(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length-1)].join(""));}};
g.apply=function(a,b){return this.call.apply(this,[this].concat(Jc(b)))};g.f=function(a){return this.V(null,a)};g.j=function(a,b){return this.wa(null,a,b)};Ih.prototype[Ic]=function(){return se(this)};function Jh(a,b,c,d,e){for(;;)if(b instanceof Ih)c=b.start+c,d=b.start+d,b=b.ka;else{if(!nf(b))throw Error("v must satisfy IVector");if(0>c||d<c||d>P(b))throw Error("Index out of bounds");return new Ih(a,b,c,d,e)}}
var Kh=function Kh(a){switch(arguments.length){case 2:return Kh.j(arguments[0],arguments[1]);case 3:return Kh.o(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length)].join(""));}};Kh.j=function(a,b){return Kh.o(a,b,P(a))};Kh.o=function(a,b,c){return Jh(null,a,b|0,c|0,null)};Kh.J=3;function Lh(a,b){return a===b.ca?b:new fh(a,Jc(b.u))}function wh(a){return new fh({},Jc(a.u))}
function xh(a){var b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];pf(a,0,b,0,a.length);return b}var Mh=function Mh(a,b,c,d){c=Lh(a.root.ca,c);var f=a.B-1>>>b&31;if(5===b)a=d;else{var h=c.u[f];null!=h?(b-=5,a=Mh.F?Mh.F(a,b,h,d):Mh.call(null,a,b,h,d)):a=jh(a.root.ca,b-5,d)}c.u[f]=a;return c};function vh(a,b,c,d){this.B=a;this.shift=b;this.root=c;this.tail=d;this.N=88;this.v=275}g=vh.prototype;
g.Lb=function(a,b){if(this.root.ca){if(32>this.B-ih(this))this.tail[this.B&31]=b;else{a=new fh(this.root.ca,this.tail);var c=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];c[0]=b;this.tail=c;this.B>>>5>1<<this.shift?(b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],c=this.shift+
5,b[0]=this.root,b[1]=jh(this.root.ca,this.shift,a),this.root=new fh(this.root.ca,b),this.shift=c):this.root=Mh(this,this.shift,this.root,a)}this.B+=1;return this}throw Error("conj! after persistent!");};g.ec=function(){if(this.root.ca){this.root.ca=null;var a=this.B-ih(this),b=Array(a);pf(this.tail,0,b,0,a);return new X(null,this.B,this.shift,this.root,b,null)}throw Error("persistent! called twice");};
g.Kb=function(a,b,c){if("number"===typeof b)return Nh(this,b,c);throw Error("TransientVector's key for assoc! must be a number.");};
function Nh(a,b,c){if(a.root.ca){if(0<=b&&b<a.B){if(ih(a)<=b)a.tail[b&31]=c;else{var d=function(){return function k(f,h){h=Lh(a.root.ca,h);if(0===f)h.u[b&31]=c;else{var l=b>>>f&31;f=k(f-5,h.u[l]);h.u[l]=f}return h}(a.shift,a.root)}();a.root=d}return a}if(b===a.B)return a.Lb(null,c);throw Error(["Index ",z.f(b)," out of bounds for TransientVector of length",z.f(a.B)].join(""));}throw Error("assoc! after persistent!");}
g.Y=function(){if(this.root.ca)return this.B;throw Error("count after persistent!");};g.V=function(a,b){if(this.root.ca)return nh(this,b)[b&31];throw Error("nth after persistent!");};g.wa=function(a,b,c){return 0<=b&&b<this.B?this.V(null,b):c};g.na=function(a,b){return this.T(null,b,null)};g.T=function(a,b,c){if(this.root.ca)return"number"===typeof b?this.wa(null,b,c):c;throw Error("lookup after persistent!");};
g.call=function(a){switch(arguments.length-1){case 1:return this.f(arguments[1]);case 2:return this.j(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Jc(b)))};g.f=function(a){return this.na(null,a)};g.j=function(a,b){return this.T(null,a,b)};function Oh(a,b){this.Qb=a;this.sc=b}
Oh.prototype.hasNext=function(){var a=null!=this.Qb&&G(this.Qb);return a?a:null!=this.sc?this.sc.hasNext():!1};Oh.prototype.next=function(){if(null!=this.Qb){var a=J(this.Qb);this.Qb=K(this.Qb);return a}if(null!=this.sc&&this.sc.hasNext())return this.sc.next();throw Error("No such element");};Oh.prototype.remove=function(){return Error("Unsupported operation")};function Ph(a,b,c,d){this.meta=a;this.Da=b;this.Fa=c;this.C=d;this.v=31850700;this.N=0}g=Ph.prototype;g.toString=function(){return $d(this)};
g.equiv=function(a){return this.H(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.f=function(b){return N(this,b,0)};a.j=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.f=a;b.j=function(c,d){return Q(this,c,d)};return b}();g.Z=function(){return this.meta};g.ja=function(){var a=K(this.Da);return a?new Ph(this.meta,a,this.Fa,null):null!=this.Fa?new Ph(this.meta,this.Fa,null,null):null};g.S=function(){var a=this.C;return null!=a?a:this.C=a=ue(this)};
g.H=function(a,b){return Oe(this,b)};g.ga=function(){return rd(qe,this.meta)};g.ma=function(){return J(this.Da)};g.qa=function(){var a=K(this.Da);return a?new Ph(this.meta,a,this.Fa,null):null==this.Fa?this.ga(null):new Ph(this.meta,this.Fa,null,null)};g.$=function(){return this};g.aa=function(a,b){return b===this.meta?this:new Ph(b,this.Da,this.Fa,this.C)};g.da=function(a,b){return R(b,this)};Ph.prototype[Ic]=function(){return se(this)};
function Qh(a,b,c,d,e){this.meta=a;this.count=b;this.Da=c;this.Fa=d;this.C=e;this.N=139264;this.v=31858766}g=Qh.prototype;g.toString=function(){return $d(this)};g.equiv=function(a){return this.H(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.f=function(b){return N(this,b,0)};a.j=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,this.count.f?this.count.f(this):this.count.call(null,this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.f=a;b.j=function(c,d){return Q(this,c,d)};return b}();g.xa=function(){return new Oh(this.Da,Yd(this.Fa))};g.Z=function(){return this.meta};g.Y=function(){return this.count};g.tb=function(){return J(this.Da)};
g.ub=function(){if(w(this.Da)){var a=K(this.Da);return a?new Qh(this.meta,this.count-1,a,this.Fa,null):new Qh(this.meta,this.count-1,G(this.Fa),Ue,null)}return this};g.S=function(){var a=this.C;return null!=a?a:this.C=a=ue(this)};g.H=function(a,b){return Oe(this,b)};g.ga=function(){return rd(Rh,this.meta)};g.ma=function(){return J(this.Da)};g.qa=function(){return pe(G(this))};g.$=function(){var a=G(this.Fa),b=this.Da;return w(w(b)?b:a)?new Ph(null,this.Da,G(a),null):null};
g.aa=function(a,b){return b===this.meta?this:new Qh(b,this.count,this.Da,this.Fa,this.C)};g.da=function(a,b){w(this.Da)?(a=this.Fa,b=new Qh(this.meta,this.count+1,this.Da,Te.j(w(a)?a:Ue,b),null)):b=new Qh(this.meta,this.count+1,Te.j(this.Da,b),Ue,null);return b};var Rh=new Qh(null,0,null,Ue,ve);Qh.prototype[Ic]=function(){return se(this)};function Sh(){this.v=2097152;this.N=0}Sh.prototype.equiv=function(a){return this.H(null,a)};Sh.prototype.H=function(){return!1};var Th=new Sh;
function Uh(a,b){return sf(lf(b)&&!mf(b)?P(a)===P(b)?(null!=a?a.v&1048576||t===a.Df||(a.v?0:x(ud,a)):x(ud,a))?Gf(function(c,d,e){return M.j(D.o(b,d,Th),e)?!0:Ae(!1)},!0,a):Ag(function(c){return M.j(D.o(b,J(c),Th),Cm(c))},a):null:null)}function Vh(a,b,c,d){this.i=0;this.rf=a;this.Ld=b;this.bf=c;this.Zd=d}Vh.prototype.hasNext=function(){var a=this.i<this.Ld;return a?a:this.Zd.hasNext()};Vh.prototype.next=function(){if(this.i<this.Ld){var a=Ke(this.bf,this.i);this.i+=1;return new uh(a,bd.j(this.rf,a))}return this.Zd.next()};
Vh.prototype.remove=function(){return Error("Unsupported operation")};function Wh(a){this.s=a}Wh.prototype.next=function(){if(null!=this.s){var a=J(this.s),b=T(a,0,null);a=T(a,1,null);this.s=K(this.s);return{value:[b,a],done:!1}}return{value:null,done:!0}};function Xh(a){this.s=a}Xh.prototype.next=function(){if(null!=this.s){var a=J(this.s);this.s=K(this.s);return{value:[a,a],done:!1}}return{value:null,done:!0}};
function Yh(a,b){if(b instanceof E)a:{var c=a.length;b=b.Ca;for(var d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof E&&b===a[d].Ca){a=d;break a}d+=2}}else if("string"==typeof b||"number"===typeof b)a:for(c=a.length,d=0;;){if(c<=d){a=-1;break a}if(b===a[d]){a=d;break a}d+=2}else if(b instanceof me)a:for(c=a.length,b=b.str,d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof me&&b===a[d].str){a=d;break a}d+=2}else if(null==b)a:for(b=a.length,c=0;;){if(b<=c){a=-1;break a}if(null==a[c]){a=c;break a}c+=2}else a:for(c=
a.length,d=0;;){if(c<=d){a=-1;break a}if(M.j(b,a[d])){a=d;break a}d+=2}return a}function uh(a,b){this.key=a;this.val=b;this.C=null;this.v=166619935;this.N=0}g=uh.prototype;g.Jb=function(a,b){switch(b){case 0:return new uh(0,this.key);case 1:return new uh(1,this.val);default:return null}};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.f=function(b){return N(this,b,0)};a.j=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.f=a;b.j=function(c,d){return Q(this,c,d)};return b}();g.na=function(a,b){return this.wa(null,b,null)};g.T=function(a,b,c){return this.wa(null,b,c)};g.V=function(a,b){if(0===b)return this.key;if(1===b)return this.val;throw Error("Index out of bounds");};
g.wa=function(a,b,c){return 0===b?this.key:1===b?this.val:c};g.vb=function(a,b,c){return(new X(null,2,5,Y,[this.key,this.val],null)).vb(null,b,c)};g.Z=function(){return null};g.Y=function(){return 2};g.Pe=function(){return this.key};g.Qe=function(){return this.val};g.tb=function(){return this.val};g.ub=function(){return new X(null,1,5,Y,[this.key],null)};g.dc=function(){return new I([this.val,this.key],0,null)};g.S=function(){var a=this.C;return null!=a?a:this.C=a=ue(this)};
g.H=function(a,b){return Oe(this,b)};g.ga=function(){return null};g.oa=function(a,b){return De(this,b)};g.pa=function(a,b,c){return Ee(this,b,c)};g.Aa=function(a,b,c){return U.o(new X(null,2,5,Y,[this.key,this.val],null),b,c)};g.$=function(){return new I([this.key,this.val],0,null)};g.aa=function(a,b){return cf(new X(null,2,5,Y,[this.key,this.val],null),b)};g.da=function(a,b){return new X(null,3,5,Y,[this.key,this.val,b],null)};
g.call=function(a){switch(arguments.length-1){case 1:return this.f(arguments[1]);case 2:return this.j(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Jc(b)))};g.f=function(a){return this.V(null,a)};g.j=function(a,b){return this.wa(null,a,b)};function Ch(a){return null!=a?a.v&2048||t===a.Ff?!0:!1:!1}function Zh(a,b,c){this.u=a;this.i=b;this._meta=c;this.v=32374990;this.N=0}g=Zh.prototype;
g.toString=function(){return $d(this)};g.equiv=function(a){return this.H(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.f=function(b){return N(this,b,0)};a.j=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.f=a;b.j=function(c,d){return Q(this,c,d)};return b}();g.Z=function(){return this._meta};g.ja=function(){return this.i<this.u.length-2?new Zh(this.u,this.i+2,null):null};g.Y=function(){return(this.u.length-this.i)/2};g.S=function(){return ue(this)};
g.H=function(a,b){return Oe(this,b)};g.ga=function(){return qe};g.oa=function(a,b){return Pe(b,this)};g.pa=function(a,b,c){return Re(b,c,this)};g.ma=function(){return new uh(this.u[this.i],this.u[this.i+1])};g.qa=function(){return this.i<this.u.length-2?new Zh(this.u,this.i+2,null):qe};g.$=function(){return this};g.aa=function(a,b){return b===this._meta?this:new Zh(this.u,this.i,b)};g.da=function(a,b){return R(b,this)};Zh.prototype[Ic]=function(){return se(this)};
function $h(a,b){this.u=a;this.i=0;this.B=b}$h.prototype.hasNext=function(){return this.i<this.B};$h.prototype.next=function(){var a=new uh(this.u[this.i],this.u[this.i+1]);this.i+=2;return a};function u(a,b,c,d){this.meta=a;this.B=b;this.u=c;this.C=d;this.v=16647951;this.N=139268}g=u.prototype;g.Jb=function(a,b){a=Yh(this.u,b);return-1===a?null:new uh(this.u[a],this.u[a+1])};g.toString=function(){return $d(this)};g.equiv=function(a){return this.H(null,a)};
g.keys=function(){return se(ai.f?ai.f(this):ai.call(null,this))};g.entries=function(){return new Wh(G(G(this)))};g.values=function(){return se(bi.f?bi.f(this):bi.call(null,this))};g.has=function(a){return vf(this,a)};g.get=function(a,b){return this.T(null,a,b)};
g.forEach=function(a){for(var b=G(this),c=null,d=0,e=0;;)if(e<d){var f=c.V(null,e),h=T(f,0,null);f=T(f,1,null);a.j?a.j(f,h):a.call(null,f,h);e+=1}else if(b=G(b))of(b)?(c=Rd(b),b=Sd(b),h=c,d=P(c),c=h):(c=J(b),h=T(c,0,null),f=T(c,1,null),a.j?a.j(f,h):a.call(null,f,h),b=K(b),c=null,d=0),e=0;else return null};g.na=function(a,b){return this.T(null,b,null)};g.T=function(a,b,c){a=Yh(this.u,b);return-1===a?c:this.u[a+1]};
g.fb=function(a,b,c){a=this.u.length;for(var d=0;;)if(d<a){var e=this.u[d],f=this.u[d+1];c=b.o?b.o(c,e,f):b.call(null,c,e,f);if(Be(c))return C(c);d+=2}else return c};g.xa=function(){return new $h(this.u,2*this.B)};g.Z=function(){return this.meta};g.Y=function(){return this.B};g.S=function(){var a=this.C;return null!=a?a:this.C=a=we(this)};
g.H=function(a,b){if(lf(b)&&!mf(b))if(a=this.u.length,this.B===b.Y(null))for(var c=0;;)if(c<a){var d=b.T(null,this.u[c],qf);if(d!==qf)if(M.j(this.u[c+1],d))c+=2;else return!1;else return!1}else return!0;else return!1;else return!1};g.Ib=function(){return new ci(this.u.length,Jc(this.u))};g.ga=function(){return rd(wg,this.meta)};g.oa=function(a,b){return Df(this,b)};g.pa=function(a,b,c){return Ef(this,b,c)};
g.sb=function(a,b){if(0<=Yh(this.u,b)){a=this.u.length;var c=a-2;if(0===c)return this.ga(null);c=Array(c);for(var d=0,e=0;;){if(d>=a)return new u(this.meta,this.B-1,c,null);M.j(b,this.u[d])?d+=2:(c[e]=this.u[d],c[e+1]=this.u[d+1],e+=2,d+=2)}}else return this};
g.Aa=function(a,b,c){a=Yh(this.u,b);if(-1===a){if(this.B<di){a=this.u;for(var d=a.length,e=Array(d+2),f=0;;)if(f<d)e[f]=a[f],f+=1;else break;e[d]=b;e[d+1]=c;return new u(this.meta,this.B+1,e,null)}return rd(cd(Fg.j(ei,this),b,c),this.meta)}if(c===this.u[a+1])return this;b=Jc(this.u);b[a+1]=c;return new u(this.meta,this.B,b,null)};g.$=function(){var a=this.u;return 0<=a.length-2?new Zh(a,0,null):null};g.aa=function(a,b){return b===this.meta?this:new u(b,this.B,this.u,this.C)};
g.da=function(a,b){if(nf(b))return this.Aa(null,Wc.j(b,0),Wc.j(b,1));a=this;for(b=G(b);;){if(null==b)return a;var c=J(b);if(nf(c))a=cd(a,Wc.j(c,0),Wc.j(c,1)),b=K(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};g.call=function(a){switch(arguments.length-1){case 1:return this.f(arguments[1]);case 2:return this.j(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length-1)].join(""));}};
g.apply=function(a,b){return this.call.apply(this,[this].concat(Jc(b)))};g.f=function(a){return this.na(null,a)};g.j=function(a,b){return this.T(null,a,b)};var wg=new u(null,0,[],xe),di=8;function Ye(a){for(var b=[],c=0;;)if(c<a.length){var d=a[c],e=a[c+1],f=Yh(b,d);-1===f?(f=b,f.push(d),f.push(e)):b[f+1]=e;c+=2}else break;return new u(null,b.length/2,b,null)}u.prototype[Ic]=function(){return se(this)};function ci(a,b){this.Ob={};this.len=a;this.u=b;this.v=259;this.N=56}g=ci.prototype;
g.Y=function(){if(this.Ob)return Mf(this.len);throw Error("count after persistent!");};g.na=function(a,b){return this.T(null,b,null)};g.T=function(a,b,c){if(this.Ob)return a=Yh(this.u,b),-1===a?c:this.u[a+1];throw Error("lookup after persistent!");};
g.Lb=function(a,b){if(this.Ob){if(Ch(b))return this.Kb(null,Dh.f?Dh.f(b):Dh.call(null,b),Eh.f?Eh.f(b):Eh.call(null,b));if(nf(b))return this.Kb(null,b.f?b.f(0):b.call(null,0),b.f?b.f(1):b.call(null,1));a=G(b);for(b=this;;){var c=J(a);if(w(c))a=K(a),b=Nd(b,Dh.f?Dh.f(c):Dh.call(null,c),Eh.f?Eh.f(c):Eh.call(null,c));else return b}}else throw Error("conj! after persistent!");};g.ec=function(){if(this.Ob)return this.Ob=!1,new u(null,Mf(this.len),this.u,null);throw Error("persistent! called twice");};
g.Kb=function(a,b,c){if(this.Ob){a=Yh(this.u,b);if(-1===a){if(this.len+2<=2*di)return this.len+=2,this.u.push(b),this.u.push(c),this;a=fi.j?fi.j(this.len,this.u):fi.call(null,this.len,this.u);return Nd(a,b,c)}c!==this.u[a+1]&&(this.u[a+1]=c);return this}throw Error("assoc! after persistent!");};g.call=function(a){switch(arguments.length-1){case 1:return this.f(arguments[1]);case 2:return this.j(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length-1)].join(""));}};
g.apply=function(a,b){return this.call.apply(this,[this].concat(Jc(b)))};g.f=function(a){return this.T(null,a,null)};g.j=function(a,b){return this.T(null,a,b)};function fi(a,b){for(var c=Kd(ei),d=0;;)if(d<a)c=Nd(c,b[d],b[d+1]),d+=2;else return c}function gi(){this.val=!1}function hi(a,b){return a===b?!0:Vf(a,b)?!0:M.j(a,b)}function ii(a,b,c){a=Jc(a);a[b]=c;return a}function ji(a,b){var c=Array(a.length-2);pf(a,0,c,0,2*b);pf(a,2*(b+1),c,2*b,c.length-2*b);return c}
function ki(a,b,c,d){a=a.wb(b);a.u[c]=d;return a}function li(a,b,c){for(var d=a.length,e=0,f=c;;)if(e<d){c=a[e];if(null!=c){var h=a[e+1];c=b.o?b.o(f,c,h):b.call(null,f,c,h)}else c=a[e+1],c=null!=c?c.nc(b,f):f;if(Be(c))return c;e+=2;f=c}else return f}function mi(a){this.u=a;this.i=0;this.$a=this.qc=null}
mi.prototype.advance=function(){for(var a=this.u.length;;)if(this.i<a){var b=this.u[this.i],c=this.u[this.i+1];null!=b?b=this.qc=new uh(b,c):null!=c?(b=Yd(c),b=b.hasNext()?this.$a=b:!1):b=!1;this.i+=2;if(b)return!0}else return!1};mi.prototype.hasNext=function(){var a=null!=this.qc;return a?a:(a=null!=this.$a)?a:this.advance()};
mi.prototype.next=function(){if(null!=this.qc){var a=this.qc;this.qc=null;return a}if(null!=this.$a)return a=this.$a.next(),this.$a.hasNext()||(this.$a=null),a;if(this.advance())return this.next();throw Error("No such element");};mi.prototype.remove=function(){return Error("Unsupported operation")};function ni(a,b,c){this.ca=a;this.bitmap=b;this.u=c;this.N=131072;this.v=0}g=ni.prototype;
g.wb=function(a){if(a===this.ca)return this;var b=Nf(this.bitmap),c=Array(0>b?4:2*(b+1));pf(this.u,0,c,0,2*b);return new ni(a,this.bitmap,c)};g.lc=function(){return oi?oi(this.u):pi.call(null,this.u)};g.nc=function(a,b){return li(this.u,a,b)};g.zb=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.bitmap&e))return d;var f=Nf(this.bitmap&e-1);e=this.u[2*f];f=this.u[2*f+1];return null==e?f.zb(a+5,b,c,d):hi(c,e)?f:d};
g.Xa=function(a,b,c,d,e,f){var h=1<<(c>>>b&31),k=Nf(this.bitmap&h-1);if(0===(this.bitmap&h)){var l=Nf(this.bitmap);if(2*l<this.u.length){a=this.wb(a);b=a.u;f.val=!0;c=2*(l-k);f=2*k+(c-1);for(l=2*(k+1)+(c-1);0!==c;)b[l]=b[f],--l,--c,--f;b[2*k]=d;b[2*k+1]=e;a.bitmap|=h;return a}if(16<=l){k=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];k[c>>>b&31]=qi.Xa(a,b+5,c,d,e,f);for(e=d=0;;)if(32>
d)0===(this.bitmap>>>d&1)?d+=1:(k[d]=null!=this.u[e]?qi.Xa(a,b+5,ie(this.u[e]),this.u[e],this.u[e+1],f):this.u[e+1],e+=2,d+=1);else break;return new ri(a,l+1,k)}b=Array(2*(l+4));pf(this.u,0,b,0,2*k);b[2*k]=d;b[2*k+1]=e;pf(this.u,2*k,b,2*(k+1),2*(l-k));f.val=!0;a=this.wb(a);a.u=b;a.bitmap|=h;return a}l=this.u[2*k];h=this.u[2*k+1];if(null==l)return l=h.Xa(a,b+5,c,d,e,f),l===h?this:ki(this,a,2*k+1,l);if(hi(d,l))return e===h?this:ki(this,a,2*k+1,e);f.val=!0;f=b+5;d=si?si(a,f,l,h,c,d,e):ti.call(null,a,
f,l,h,c,d,e);e=2*k;k=2*k+1;a=this.wb(a);a.u[e]=null;a.u[k]=d;return a};
g.Wa=function(a,b,c,d,e){var f=1<<(b>>>a&31),h=Nf(this.bitmap&f-1);if(0===(this.bitmap&f)){var k=Nf(this.bitmap);if(16<=k){h=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];h[b>>>a&31]=qi.Wa(a+5,b,c,d,e);for(d=c=0;;)if(32>c)0===(this.bitmap>>>c&1)?c+=1:(h[c]=null!=this.u[d]?qi.Wa(a+5,ie(this.u[d]),this.u[d],this.u[d+1],e):this.u[d+1],d+=2,c+=1);else break;return new ri(null,k+1,h)}a=Array(2*
(k+1));pf(this.u,0,a,0,2*h);a[2*h]=c;a[2*h+1]=d;pf(this.u,2*h,a,2*(h+1),2*(k-h));e.val=!0;return new ni(null,this.bitmap|f,a)}var l=this.u[2*h];f=this.u[2*h+1];if(null==l)return k=f.Wa(a+5,b,c,d,e),k===f?this:new ni(null,this.bitmap,ii(this.u,2*h+1,k));if(hi(c,l))return d===f?this:new ni(null,this.bitmap,ii(this.u,2*h+1,d));e.val=!0;e=this.bitmap;k=this.u;a+=5;a=ui?ui(a,l,f,b,c,d):ti.call(null,a,l,f,b,c,d);c=2*h;h=2*h+1;d=Jc(k);d[c]=null;d[h]=a;return new ni(null,e,d)};
g.kc=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.bitmap&e))return d;var f=Nf(this.bitmap&e-1);e=this.u[2*f];f=this.u[2*f+1];return null==e?f.kc(a+5,b,c,d):hi(c,e)?new uh(e,f):d};
g.mc=function(a,b,c){var d=1<<(b>>>a&31);if(0===(this.bitmap&d))return this;var e=Nf(this.bitmap&d-1),f=this.u[2*e],h=this.u[2*e+1];return null==f?(a=h.mc(a+5,b,c),a===h?this:null!=a?new ni(null,this.bitmap,ii(this.u,2*e+1,a)):this.bitmap===d?null:new ni(null,this.bitmap^d,ji(this.u,e))):hi(c,f)?new ni(null,this.bitmap^d,ji(this.u,e)):this};g.xa=function(){return new mi(this.u)};var qi=new ni(null,0,[]);function vi(a){this.u=a;this.i=0;this.$a=null}
vi.prototype.hasNext=function(){for(var a=this.u.length;;){if(null!=this.$a&&this.$a.hasNext())return!0;if(this.i<a){var b=this.u[this.i];this.i+=1;null!=b&&(this.$a=Yd(b))}else return!1}};vi.prototype.next=function(){if(this.hasNext())return this.$a.next();throw Error("No such element");};vi.prototype.remove=function(){return Error("Unsupported operation")};function ri(a,b,c){this.ca=a;this.B=b;this.u=c;this.N=131072;this.v=0}g=ri.prototype;
g.wb=function(a){return a===this.ca?this:new ri(a,this.B,Jc(this.u))};g.lc=function(){return wi?wi(this.u):xi.call(null,this.u)};g.nc=function(a,b){for(var c=this.u.length,d=0;;)if(d<c){var e=this.u[d];if(null!=e){b=e.nc(a,b);if(Be(b))return b;d+=1}else d+=1}else return b};g.zb=function(a,b,c,d){var e=this.u[b>>>a&31];return null!=e?e.zb(a+5,b,c,d):d};
g.Xa=function(a,b,c,d,e,f){var h=c>>>b&31,k=this.u[h];if(null==k)return a=ki(this,a,h,qi.Xa(a,b+5,c,d,e,f)),a.B+=1,a;b=k.Xa(a,b+5,c,d,e,f);return b===k?this:ki(this,a,h,b)};g.Wa=function(a,b,c,d,e){var f=b>>>a&31,h=this.u[f];if(null==h)return new ri(null,this.B+1,ii(this.u,f,qi.Wa(a+5,b,c,d,e)));a=h.Wa(a+5,b,c,d,e);return a===h?this:new ri(null,this.B,ii(this.u,f,a))};g.kc=function(a,b,c,d){var e=this.u[b>>>a&31];return null!=e?e.kc(a+5,b,c,d):d};
g.mc=function(a,b,c){var d=b>>>a&31,e=this.u[d];if(null!=e){a=e.mc(a+5,b,c);if(a===e)d=this;else if(null==a)if(8>=this.B)a:{e=this.u;a=e.length;b=Array(2*(this.B-1));c=0;for(var f=1,h=0;;)if(c<a)c!==d&&null!=e[c]?(b[f]=e[c],f+=2,h|=1<<c,c+=1):c+=1;else{d=new ni(null,h,b);break a}}else d=new ri(null,this.B-1,ii(this.u,d,a));else d=new ri(null,this.B,ii(this.u,d,a));return d}return this};g.xa=function(){return new vi(this.u)};
function yi(a,b,c){b*=2;for(var d=0;;)if(d<b){if(hi(c,a[d]))return d;d+=2}else return-1}function zi(a,b,c,d){this.ca=a;this.gb=b;this.B=c;this.u=d;this.N=131072;this.v=0}g=zi.prototype;g.wb=function(a){if(a===this.ca)return this;var b=Array(2*(this.B+1));pf(this.u,0,b,0,2*this.B);return new zi(a,this.gb,this.B,b)};g.lc=function(){return oi?oi(this.u):pi.call(null,this.u)};g.nc=function(a,b){return li(this.u,a,b)};
g.zb=function(a,b,c,d){a=yi(this.u,this.B,c);return 0>a?d:hi(c,this.u[a])?this.u[a+1]:d};
g.Xa=function(a,b,c,d,e,f){if(c===this.gb){b=yi(this.u,this.B,d);if(-1===b){if(this.u.length>2*this.B)return b=2*this.B,c=2*this.B+1,a=this.wb(a),a.u[b]=d,a.u[c]=e,f.val=!0,a.B+=1,a;c=this.u.length;b=Array(c+2);pf(this.u,0,b,0,c);b[c]=d;b[c+1]=e;f.val=!0;d=this.B+1;a===this.ca?(this.u=b,this.B=d,a=this):a=new zi(this.ca,this.gb,d,b);return a}return this.u[b+1]===e?this:ki(this,a,b+1,e)}return(new ni(a,1<<(this.gb>>>b&31),[null,this,null,null])).Xa(a,b,c,d,e,f)};
g.Wa=function(a,b,c,d,e){return b===this.gb?(a=yi(this.u,this.B,c),-1===a?(a=2*this.B,b=Array(a+2),pf(this.u,0,b,0,a),b[a]=c,b[a+1]=d,e.val=!0,new zi(null,this.gb,this.B+1,b)):M.j(this.u[a+1],d)?this:new zi(null,this.gb,this.B,ii(this.u,a+1,d))):(new ni(null,1<<(this.gb>>>a&31),[null,this])).Wa(a,b,c,d,e)};g.kc=function(a,b,c,d){a=yi(this.u,this.B,c);return 0>a?d:hi(c,this.u[a])?new uh(this.u[a],this.u[a+1]):d};
g.mc=function(a,b,c){a=yi(this.u,this.B,c);return-1===a?this:1===this.B?null:new zi(null,this.gb,this.B-1,ji(this.u,Mf(a)))};g.xa=function(){return new mi(this.u)};function ti(a){switch(arguments.length){case 6:return ui(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 7:return si(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);default:throw Error(["Invalid arity: ",z.f(arguments.length)].join(""));}}
function ui(a,b,c,d,e,f){var h=ie(b);if(h===d)return new zi(null,h,2,[b,c,e,f]);var k=new gi;return qi.Wa(a,h,b,c,k).Wa(a,d,e,f,k)}function si(a,b,c,d,e,f,h){var k=ie(c);if(k===e)return new zi(null,k,2,[c,d,f,h]);var l=new gi;return qi.Xa(a,b,k,c,d,l).Xa(a,b,e,f,h,l)}function Ai(a,b,c,d,e){this.meta=a;this.nodes=b;this.i=c;this.s=d;this.C=e;this.v=32374988;this.N=0}g=Ai.prototype;g.toString=function(){return $d(this)};g.equiv=function(a){return this.H(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.f=function(b){return N(this,b,0)};a.j=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.f=a;b.j=function(c,d){return Q(this,c,d)};return b}();g.Z=function(){return this.meta};g.ja=function(){if(null==this.s){var a=this.nodes,b=this.i+2;return Bi?Bi(a,b,null):pi.call(null,a,b,null)}a=this.nodes;b=this.i;var c=K(this.s);return Bi?Bi(a,b,c):pi.call(null,a,b,c)};
g.S=function(){var a=this.C;return null!=a?a:this.C=a=ue(this)};g.H=function(a,b){return Oe(this,b)};g.ga=function(){return qe};g.oa=function(a,b){return Pe(b,this)};g.pa=function(a,b,c){return Re(b,c,this)};g.ma=function(){return null==this.s?new uh(this.nodes[this.i],this.nodes[this.i+1]):J(this.s)};
g.qa=function(){var a=this,b=null==a.s?function(){var c=a.nodes,d=a.i+2;return Bi?Bi(c,d,null):pi.call(null,c,d,null)}():function(){var c=a.nodes,d=a.i,e=K(a.s);return Bi?Bi(c,d,e):pi.call(null,c,d,e)}();return null!=b?b:qe};g.$=function(){return this};g.aa=function(a,b){return b===this.meta?this:new Ai(b,this.nodes,this.i,this.s,this.C)};g.da=function(a,b){return R(b,this)};Ai.prototype[Ic]=function(){return se(this)};
function pi(a){switch(arguments.length){case 1:return oi(arguments[0]);case 3:return Bi(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length)].join(""));}}function oi(a){return Bi(a,0,null)}function Bi(a,b,c){if(null==c)for(c=a.length;;)if(b<c){if(null!=a[b])return new Ai(null,a,b,null,null);var d=a[b+1];if(w(d)&&(d=d.lc(),w(d)))return new Ai(null,a,b+2,d,null);b+=2}else return null;else return new Ai(null,a,b,c,null)}
function Ci(a,b,c,d,e){this.meta=a;this.nodes=b;this.i=c;this.s=d;this.C=e;this.v=32374988;this.N=0}g=Ci.prototype;g.toString=function(){return $d(this)};g.equiv=function(a){return this.H(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.f=function(b){return N(this,b,0)};a.j=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.f=a;b.j=function(c,d){return Q(this,c,d)};return b}();g.Z=function(){return this.meta};g.ja=function(){var a=this.nodes,b=this.i,c=K(this.s);return Di?Di(a,b,c):xi.call(null,a,b,c)};g.S=function(){var a=this.C;return null!=a?a:this.C=a=ue(this)};
g.H=function(a,b){return Oe(this,b)};g.ga=function(){return qe};g.oa=function(a,b){return Pe(b,this)};g.pa=function(a,b,c){return Re(b,c,this)};g.ma=function(){return J(this.s)};g.qa=function(){var a=this.nodes;var b=this.i,c=K(this.s);a=Di?Di(a,b,c):xi.call(null,a,b,c);return null!=a?a:qe};g.$=function(){return this};g.aa=function(a,b){return b===this.meta?this:new Ci(b,this.nodes,this.i,this.s,this.C)};g.da=function(a,b){return R(b,this)};Ci.prototype[Ic]=function(){return se(this)};
function xi(a){switch(arguments.length){case 1:return wi(arguments[0]);case 3:return Di(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length)].join(""));}}function wi(a){return Di(a,0,null)}function Di(a,b,c){if(null==c)for(c=a.length;;)if(b<c){var d=a[b];if(w(d)&&(d=d.lc(),w(d)))return new Ci(null,a,b+1,d,null);b+=1}else return null;else return new Ci(null,a,b,c,null)}function Ei(a,b){this.ta=a;this.qe=b;this.seen=!1}
Ei.prototype.hasNext=function(){return!this.seen||this.qe.hasNext()};Ei.prototype.next=function(){if(this.seen)return this.qe.next();this.seen=!0;return new uh(null,this.ta)};Ei.prototype.remove=function(){return Error("Unsupported operation")};function Fi(a,b,c,d,e,f){this.meta=a;this.B=b;this.root=c;this.ya=d;this.ta=e;this.C=f;this.v=16123663;this.N=139268}g=Fi.prototype;g.Jb=function(a,b){return null==b?this.ya?new uh(null,this.ta):null:null==this.root?null:this.root.kc(0,ie(b),b,null)};
g.toString=function(){return $d(this)};g.equiv=function(a){return this.H(null,a)};g.keys=function(){return se(ai.f?ai.f(this):ai.call(null,this))};g.entries=function(){return new Wh(G(G(this)))};g.values=function(){return se(bi.f?bi.f(this):bi.call(null,this))};g.has=function(a){return vf(this,a)};g.get=function(a,b){return this.T(null,a,b)};
g.forEach=function(a){for(var b=G(this),c=null,d=0,e=0;;)if(e<d){var f=c.V(null,e),h=T(f,0,null);f=T(f,1,null);a.j?a.j(f,h):a.call(null,f,h);e+=1}else if(b=G(b))of(b)?(c=Rd(b),b=Sd(b),h=c,d=P(c),c=h):(c=J(b),h=T(c,0,null),f=T(c,1,null),a.j?a.j(f,h):a.call(null,f,h),b=K(b),c=null,d=0),e=0;else return null};g.na=function(a,b){return this.T(null,b,null)};g.T=function(a,b,c){return null==b?this.ya?this.ta:c:null==this.root?c:this.root.zb(0,ie(b),b,c)};
g.fb=function(a,b,c){a=this.ya?b.o?b.o(c,null,this.ta):b.call(null,c,null,this.ta):c;Be(a)?b=C(a):null!=this.root?(b=this.root.nc(b,a),b=Be(b)?Ce.f?Ce.f(b):Ce.call(null,b):b):b=a;return b};g.xa=function(){var a=this.root?Yd(this.root):ug();return this.ya?new Ei(this.ta,a):a};g.Z=function(){return this.meta};g.Y=function(){return this.B};g.S=function(){var a=this.C;return null!=a?a:this.C=a=we(this)};g.H=function(a,b){return Uh(this,b)};g.Ib=function(){return new Gi(this.root,this.B,this.ya,this.ta)};
g.ga=function(){return rd(ei,this.meta)};g.sb=function(a,b){if(null==b)return this.ya?new Fi(this.meta,this.B-1,this.root,!1,null,null):this;if(null==this.root)return this;a=this.root.mc(0,ie(b),b);return a===this.root?this:new Fi(this.meta,this.B-1,a,this.ya,this.ta,null)};
g.Aa=function(a,b,c){if(null==b)return this.ya&&c===this.ta?this:new Fi(this.meta,this.ya?this.B:this.B+1,this.root,!0,c,null);a=new gi;b=(null==this.root?qi:this.root).Wa(0,ie(b),b,c,a);return b===this.root?this:new Fi(this.meta,a.val?this.B+1:this.B,b,this.ya,this.ta,null)};g.$=function(){if(0<this.B){var a=null!=this.root?this.root.lc():null;return this.ya?R(new uh(null,this.ta),a):a}return null};g.aa=function(a,b){return b===this.meta?this:new Fi(b,this.B,this.root,this.ya,this.ta,this.C)};
g.da=function(a,b){if(nf(b))return this.Aa(null,Wc.j(b,0),Wc.j(b,1));a=this;for(b=G(b);;){if(null==b)return a;var c=J(b);if(nf(c))a=cd(a,Wc.j(c,0),Wc.j(c,1)),b=K(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};g.call=function(a){switch(arguments.length-1){case 1:return this.f(arguments[1]);case 2:return this.j(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length-1)].join(""));}};
g.apply=function(a,b){return this.call.apply(this,[this].concat(Jc(b)))};g.f=function(a){return this.na(null,a)};g.j=function(a,b){return this.T(null,a,b)};var ei=new Fi(null,0,null,!1,null,xe);Fi.prototype[Ic]=function(){return se(this)};function Gi(a,b,c,d){this.ca={};this.root=a;this.count=b;this.ya=c;this.ta=d;this.v=259;this.N=56}
function Hi(a,b,c){if(a.ca){if(null==b)a.ta!==c&&(a.ta=c),a.ya||(a.count+=1,a.ya=!0);else{var d=new gi;b=(null==a.root?qi:a.root).Xa(a.ca,0,ie(b),b,c,d);b!==a.root&&(a.root=b);d.val&&(a.count+=1)}return a}throw Error("assoc! after persistent!");}g=Gi.prototype;g.Y=function(){if(this.ca)return this.count;throw Error("count after persistent!");};g.na=function(a,b){return null==b?this.ya?this.ta:null:null==this.root?null:this.root.zb(0,ie(b),b)};
g.T=function(a,b,c){return null==b?this.ya?this.ta:c:null==this.root?c:this.root.zb(0,ie(b),b,c)};g.Lb=function(a,b){a:if(this.ca)if(Ch(b))a=Hi(this,Dh.f?Dh.f(b):Dh.call(null,b),Eh.f?Eh.f(b):Eh.call(null,b));else if(nf(b))a=Hi(this,b.f?b.f(0):b.call(null,0),b.f?b.f(1):b.call(null,1));else for(a=G(b),b=this;;){var c=J(a);if(w(c))a=K(a),b=Hi(b,Dh.f?Dh.f(c):Dh.call(null,c),Eh.f?Eh.f(c):Eh.call(null,c));else{a=b;break a}}else throw Error("conj! after persistent");return a};
g.ec=function(){if(this.ca){this.ca=null;var a=new Fi(null,this.count,this.root,this.ya,this.ta,null)}else throw Error("persistent! called twice");return a};g.Kb=function(a,b,c){return Hi(this,b,c)};g.call=function(a){switch(arguments.length-1){case 1:return this.f(arguments[1]);case 2:return this.j(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Jc(b)))};
g.f=function(a){return this.na(null,a)};g.j=function(a,b){return this.T(null,a,b)};var Ii=function Ii(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=0<c.length?new I(c.slice(0),0,null):null;return Ii.A(c)};Ii.A=function(a){for(var b=G(a),c=Kd(ei);;)if(b){a=K(K(b));var d=J(b);b=Cm(b);c=Nd(c,d,b);b=a}else return Md(c)};Ii.J=0;Ii.K=function(a){return this.A(G(a))};
var Ji=function Ji(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=0<c.length?new I(c.slice(0),0,null):null;return Ji.A(c)};Ji.A=function(a){a=a instanceof I&&0===a.i?a.u:Kc(a);return Ye(a)};Ji.J=0;Ji.K=function(a){return this.A(G(a))};function Ki(a,b){this.X=a;this._meta=b;this.v=32374988;this.N=0}g=Ki.prototype;g.toString=function(){return $d(this)};g.equiv=function(a){return this.H(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.f=function(b){return N(this,b,0)};a.j=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.f=a;b.j=function(c,d){return Q(this,c,d)};return b}();g.Z=function(){return this._meta};g.ja=function(){var a=(null!=this.X?this.X.v&128||t===this.X.cc||(this.X.v?0:x(Zc,this.X)):x(Zc,this.X))?this.X.ja(null):K(this.X);return null==a?null:new Ki(a,null)};g.S=function(){return ue(this)};
g.H=function(a,b){return Oe(this,b)};g.ga=function(){return qe};g.oa=function(a,b){return Pe(b,this)};g.pa=function(a,b,c){return Re(b,c,this)};g.ma=function(){return this.X.ma(null).key};g.qa=function(){var a=(null!=this.X?this.X.v&128||t===this.X.cc||(this.X.v?0:x(Zc,this.X)):x(Zc,this.X))?this.X.ja(null):K(this.X);return null!=a?new Ki(a,null):qe};g.$=function(){return this};g.aa=function(a,b){return b===this._meta?this:new Ki(this.X,b)};g.da=function(a,b){return R(b,this)};Ki.prototype[Ic]=function(){return se(this)};
function ai(a){return(a=G(a))?new Ki(a,null):null}function Dh(a){return gd(a)}function Li(a,b){this.X=a;this._meta=b;this.v=32374988;this.N=0}g=Li.prototype;g.toString=function(){return $d(this)};g.equiv=function(a){return this.H(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.f=function(b){return N(this,b,0)};a.j=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.f=a;b.j=function(c,d){return Q(this,c,d)};return b}();g.Z=function(){return this._meta};g.ja=function(){var a=(null!=this.X?this.X.v&128||t===this.X.cc||(this.X.v?0:x(Zc,this.X)):x(Zc,this.X))?this.X.ja(null):K(this.X);return null==a?null:new Li(a,null)};g.S=function(){return ue(this)};
g.H=function(a,b){return Oe(this,b)};g.ga=function(){return qe};g.oa=function(a,b){return Pe(b,this)};g.pa=function(a,b,c){return Re(b,c,this)};g.ma=function(){return this.X.ma(null).val};g.qa=function(){var a=(null!=this.X?this.X.v&128||t===this.X.cc||(this.X.v?0:x(Zc,this.X)):x(Zc,this.X))?this.X.ja(null):K(this.X);return null!=a?new Li(a,null):qe};g.$=function(){return this};g.aa=function(a,b){return b===this._meta?this:new Li(this.X,b)};g.da=function(a,b){return R(b,this)};Li.prototype[Ic]=function(){return se(this)};
function bi(a){return(a=G(a))?new Li(a,null):null}function Eh(a){return hd(a)}var Mi=function Mi(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=0<c.length?new I(c.slice(0),0,null):null;return Mi.A(c)};Mi.A=function(a){return w(Bg(Hf,a))?Ff(function(b,c){return Te.j(w(b)?b:wg,c)},a):null};Mi.J=0;Mi.K=function(a){return this.A(G(a))};
function Ni(a,b){if(w(Bg(Hf,b))){var c=function(d,e){var f=gd(e),h=hd(e);return vf(d,f)?U.o(d,f,function(){var k=D.j(d,f);return a.j?a.j(k,h):a.call(null,k,h)}()):U.o(d,f,h)};return Ff(function(d,e){return Lc(c,w(d)?d:wg,G(e))},b)}return null}function Oi(a){for(var b=wg,c=G(Pi);;)if(c){var d=J(c),e=D.o(a,d,Qi);b=M.j(e,Qi)?b:U.o(b,d,e);c=K(c)}else return rd(b,df(a))}function Ri(a){this.zd=a}Ri.prototype.hasNext=function(){return this.zd.hasNext()};
Ri.prototype.next=function(){if(this.zd.hasNext())return this.zd.next().key;throw Error("No such element");};Ri.prototype.remove=function(){return Error("Unsupported operation")};function Si(a,b,c){this.meta=a;this.jb=b;this.C=c;this.v=15077647;this.N=139268}g=Si.prototype;g.toString=function(){return $d(this)};g.equiv=function(a){return this.H(null,a)};g.keys=function(){return se(G(this))};g.entries=function(){return new Xh(G(G(this)))};g.values=function(){return se(G(this))};
g.has=function(a){return vf(this,a)};g.forEach=function(a){for(var b=G(this),c=null,d=0,e=0;;)if(e<d){var f=c.V(null,e),h=T(f,0,null);f=T(f,1,null);a.j?a.j(f,h):a.call(null,f,h);e+=1}else if(b=G(b))of(b)?(c=Rd(b),b=Sd(b),h=c,d=P(c),c=h):(c=J(b),h=T(c,0,null),f=T(c,1,null),a.j?a.j(f,h):a.call(null,f,h),b=K(b),c=null,d=0),e=0;else return null};g.na=function(a,b){return this.T(null,b,null)};g.T=function(a,b,c){a=dd(this.jb,b);return w(a)?gd(a):c};g.xa=function(){return new Ri(Yd(this.jb))};g.Z=function(){return this.meta};
g.Y=function(){return Qc(this.jb)};g.S=function(){var a=this.C;return null!=a?a:this.C=a=we(this)};g.H=function(a,b){if(jf(b))if(P(this)===P(b))try{return Gf(function(c,d){return(c=vf(b,d))?c:Ae(!1)},!0,this.jb)}catch(c){if(c instanceof Error)return!1;throw c;}else return!1;else return!1};g.Ib=function(){return new Ti(Kd(this.jb))};g.ga=function(){return rd(Ui,this.meta)};g.Td=function(a,b){return new Si(this.meta,fd(this.jb,b),null)};g.$=function(){return ai(this.jb)};
g.aa=function(a,b){return b===this.meta?this:new Si(b,this.jb,this.C)};g.da=function(a,b){return new Si(this.meta,U.o(this.jb,b,null),null)};g.call=function(a){switch(arguments.length-1){case 1:return this.f(arguments[1]);case 2:return this.j(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Jc(b)))};g.f=function(a){return this.na(null,a)};g.j=function(a,b){return this.T(null,a,b)};
var Ui=new Si(null,wg,xe);Si.prototype[Ic]=function(){return se(this)};function Ti(a){this.Eb=a;this.N=136;this.v=259}g=Ti.prototype;g.Lb=function(a,b){this.Eb=Nd(this.Eb,b,null);return this};g.ec=function(){return new Si(null,Md(this.Eb),null)};g.Y=function(){return P(this.Eb)};g.na=function(a,b){return this.T(null,b,null)};g.T=function(a,b,c){return bd.o(this.Eb,b,qf)===qf?c:b};
g.call=function(a){switch(arguments.length-1){case 1:return this.f(arguments[1]);case 2:return this.j(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Jc(b)))};g.f=function(a){return bd.o(this.Eb,a,qf)===qf?null:a};g.j=function(a,b){return bd.o(this.Eb,a,qf)===qf?b:a};
function Vi(a){if(jf(a))return cf(a,null);a=G(a);if(null==a)return Ui;if(a instanceof I&&0===a.i){a=a.u;for(var b=a.length,c=Kd(Ui),d=0;;)if(d<b)Ld(c,a[d]),d+=1;else break;return Md(c)}for(c=Kd(Ui);;)if(null!=a)b=K(a),c=Ld(c,A(a)),a=b;else return Md(c)}function Wi(a){for(var b=Ue;;)if(K(a))b=Te.j(b,J(a)),a=K(a);else return G(b)}function Yf(a){if(null!=a&&(a.N&4096||t===a.Sd))return a.ac(null);if("string"===typeof a)return a;throw Error(["Doesn't support name: ",z.f(a)].join(""));}
var Xi=function Xi(a){switch(arguments.length){case 2:return Xi.j(arguments[0],arguments[1]);case 3:return Xi.o(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new I(c.slice(3),0,null);return Xi.A(arguments[0],arguments[1],arguments[2],c)}};Xi.j=function(a,b){return b};Xi.o=function(a,b,c){return(a.f?a.f(b):a.call(null,b))>(a.f?a.f(c):a.call(null,c))?b:c};
Xi.A=function(a,b,c,d){return Lc(function(e,f){return Xi.o(a,e,f)},Xi.o(a,b,c),d)};Xi.K=function(a){var b=J(a),c=K(a);a=J(c);var d=K(c);c=J(d);d=K(d);return this.A(b,a,c,d)};Xi.J=3;function Yi(a,b,c){this.start=a;this.step=b;this.count=c;this.v=82;this.N=0}g=Yi.prototype;g.Y=function(){return this.count};g.ma=function(){return this.start};g.V=function(a,b){return this.start+b*this.step};g.wa=function(a,b,c){return 0<=b&&b<this.count?this.start+b*this.step:c};
g.ld=function(){if(1>=this.count)throw Error("-drop-first of empty chunk");return new Yi(this.start+this.step,this.step,this.count-1)};function Zi(a,b,c){this.i=a;this.end=b;this.step=c}Zi.prototype.hasNext=function(){return 0<this.step?this.i<this.end:this.i>this.end};Zi.prototype.next=function(){var a=this.i;this.i+=this.step;return a};function $i(a,b,c,d,e,f,h){this.meta=a;this.start=b;this.end=c;this.step=d;this.ua=e;this.Ac=f;this.C=h;this.v=32375006;this.N=140800}g=$i.prototype;g.toString=function(){return $d(this)};
g.equiv=function(a){return this.H(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.f=function(b){return N(this,b,0)};a.j=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.f=a;b.j=function(c,d){return Q(this,c,d)};return b}();function aj(a){if(null==a.ua){var b=a.Y(null);32<b?(a.Ac=new $i(null,a.start+32*a.step,a.end,a.step,null,null,null),a.ua=new Yi(a.start,a.step,32)):a.ua=new Yi(a.start,a.step,b)}}
g.V=function(a,b){if(0<=b&&b<this.Y(null))return this.start+b*this.step;if(0<=b&&this.start>this.end&&0===this.step)return this.start;throw Error("Index out of bounds");};g.wa=function(a,b,c){return 0<=b&&b<this.Y(null)?this.start+b*this.step:0<=b&&this.start>this.end&&0===this.step?this.start:c};g.xa=function(){return new Zi(this.start,this.end,this.step)};g.Z=function(){return this.meta};
g.ja=function(){return 0<this.step?this.start+this.step<this.end?new $i(null,this.start+this.step,this.end,this.step,null,null,null):null:this.start+this.step>this.end?new $i(null,this.start+this.step,this.end,this.step,null,null,null):null};g.Y=function(){return Math.ceil((this.end-this.start)/this.step)};g.S=function(){var a=this.C;return null!=a?a:this.C=a=ue(this)};g.H=function(a,b){return Oe(this,b)};g.ga=function(){return qe};g.oa=function(a,b){return De(this,b)};
g.pa=function(a,b,c){for(a=this.start;;)if(0<this.step?a<this.end:a>this.end){c=b.j?b.j(c,a):b.call(null,c,a);if(Be(c))return C(c);a+=this.step}else return c};g.ma=function(){return this.start};g.qa=function(){var a=this.ja(null);return null==a?qe:a};g.$=function(){return this};g.Cc=function(){aj(this);return this.ua};g.Gb=function(){aj(this);return null==this.Ac?qe:this.Ac};g.aa=function(a,b){return b===this.meta?this:new $i(b,this.start,this.end,this.step,this.ua,this.Ac,this.C)};
g.da=function(a,b){return R(b,this)};g.md=function(){return G(this.Gb(null))};$i.prototype[Ic]=function(){return se(this)};function bj(a){return 0>=a?qe:new $i(null,0,a,1,null,null,null)}function cj(a){a:for(var b=a;;)if(b=G(b))b=K(b);else break a;return a}function dj(a,b){if("string"===typeof b)return a=a.exec(b),M.j(J(a),b)?1===P(a)?J(a):Bh(a):null;throw new TypeError("re-matches must match against a string.");}
function ej(a,b){if("string"===typeof b)return a=a.exec(b),null==a?null:1===P(a)?J(a):Bh(a);throw new TypeError("re-find must match against a string.");}var fj=function fj(a,b){var d=a.exec(b);if(null==d)return null;var e=d[0],f=1===d.length?e:Bh(d);return R(f,new Zf(null,function(){var h=e.length;h=d.index+(1>h?1:h);return h<=b.length?(h=b.substring(h),fj.j?fj.j(a,h):fj.call(null,a,h)):null},null))};
function gj(a){var b=/\[([^\]]*)\]*/;if("string"===typeof a)return fj(b,a);throw new TypeError("re-seq must match against a string.");}function hj(a){if(a instanceof RegExp)return a;var b=ej(/^\(\?([idmsux]*)\)/,a),c=T(b,0,null);b=T(b,1,null);c=P(c);a=a.substring(c);return new RegExp(a,w(b)?b:"")}
function ij(a,b,c,d,e,f,h){var k=uc;uc=null==uc?null:uc-1;try{if(null!=uc&&0>uc)return Fd(a,"#");Fd(a,c);if(0===Bc.f(f))G(h)&&Fd(a,function(){var v=jj.f(f);return w(v)?v:"..."}());else{if(G(h)){var l=J(h);b.o?b.o(l,a,f):b.call(null,l,a,f)}for(var m=K(h),n=Bc.f(f)-1;;)if(!m||null!=n&&0===n){G(m)&&0===n&&(Fd(a,d),Fd(a,function(){var v=jj.f(f);return w(v)?v:"..."}()));break}else{Fd(a,d);var p=J(m);c=a;h=f;b.o?b.o(p,c,h):b.call(null,p,c,h);var r=K(m);c=n-1;m=r;n=c}}return Fd(a,e)}finally{uc=k}}
function kj(a,b){b=G(b);for(var c=null,d=0,e=0;;)if(e<d){var f=c.V(null,e);Fd(a,f);e+=1}else if(b=G(b))c=b,of(c)?(b=Rd(c),d=Sd(c),c=b,f=P(b),b=d,d=f):(f=J(c),Fd(a,f),b=K(c),c=null,d=0),e=0;else return null}var lj={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};function mj(a){return['"',z.f(a.replace(/[\\"\b\f\n\r\t]/g,function(b){return lj[b]})),'"'].join("")}function nj(a,b){return sf(D.j(a,zc))?null!=b&&(b.v&131072||t===b.Re)?null!=df(b):!1:!1}
function oj(a,b,c){if(null==a)return Fd(b,"nil");if(nj(c,a)){Fd(b,"^");var d=df(a);pj.o?pj.o(d,b,c):pj.call(null,d,b,c);Fd(b," ")}if(a.Ic)return a.pd(b);if(null!=a?a.v&2147483648||t===a.ha||(a.v?0:x(Gd,a)):x(Gd,a))return Hd(a,b,c);if(!0===a||!1===a)return Fd(b,z.f(a));if("number"===typeof a)return Fd(b,isNaN(a)?"##NaN":a===Number.POSITIVE_INFINITY?"##Inf":a===Number.NEGATIVE_INFINITY?"##-Inf":z.f(a));if(null!=a&&a.constructor===Object)return Fd(b,"#js "),d=Z.j(function(f){return new uh(null!=dj(/[A-Za-z_\*\+\?!\-'][\w\*\+\?!\-']*/,
f)?Xf.f(f):f,a[f])},Ya(a)),qj.F?qj.F(d,pj,b,c):qj.call(null,d,pj,b,c);if(Ec(a))return ij(b,pj,"#js ["," ","]",c,a);if("string"==typeof a)return w(yc.f(c))?Fd(b,mj(a)):Fd(b,a);if(la(a)){var e=a.name;c=w(function(){var f=null==e;return f?f:/^[\s\xa0]*$/.test(e)}())?"Function":e;return kj(b,S(["#object[",c,w(!1)?[' "',z.f(a),'"'].join(""):"","]"]))}if(a instanceof Date)return c=function(f,h){for(f=z.f(f);;)if(f.length<h)f=["0",f].join("");else return f},kj(b,S(['#inst "',z.f(a.getUTCFullYear()),"-",
c(a.getUTCMonth()+1,2),"-",c(a.getUTCDate(),2),"T",c(a.getUTCHours(),2),":",c(a.getUTCMinutes(),2),":",c(a.getUTCSeconds(),2),".",c(a.getUTCMilliseconds(),3),"-",'00:00"']));if(a instanceof RegExp)return kj(b,S(['#"',a.source,'"']));if(w(function(){var f=null==a?null:a.constructor;return null==f?null:f.Mb}()))return kj(b,S(["#object[",a.constructor.Mb.replace(/\//g,"."),"]"]));e=function(){var f=null==a?null:a.constructor;return null==f?null:f.name}();c=w(function(){var f=null==e;return f?f:/^[\s\xa0]*$/.test(e)}())?
"Object":e;return null==a.constructor?kj(b,S(["#object[",c,"]"])):kj(b,S(["#object[",c," ",z.f(a),"]"]))}function pj(a,b,c){var d=rj.f(c);return w(d)?(c=U.o(c,sj,oj),d.o?d.o(a,b,c):d.call(null,a,b,c)):oj(a,b,c)}function tj(a,b){var c=new oc;a:{var d=new Zd(c);pj(J(a),d,b);a=G(K(a));for(var e=null,f=0,h=0;;)if(h<f){var k=e.V(null,h);Fd(d," ");pj(k,d,b);h+=1}else if(a=G(a))e=a,of(e)?(a=Rd(e),f=Sd(e),e=a,k=P(a),a=f,f=k):(k=J(e),Fd(d," "),pj(k,d,b),a=K(e),e=null,f=0),h=0;else break a}return c}
function uj(a){var b=wc();return gf(a)?"":z.f(tj(a,b))}function vj(a){return a instanceof me?ne.j(null,Yf(a)):Xf.j(null,Yf(a))}
function wj(a){if(w(!1)){var b=G(a),c=G(b),d=J(c);K(c);T(d,0,null);T(d,1,null);c=We(a);for(a=null;;){d=a;b=G(b);a=J(b);var e=K(b),f=a;a=T(f,0,null);b=T(f,1,null);if(w(f))if(a instanceof E||a instanceof me)if(w(d))if(M.j(d,Wf(a)))c=U.o(c,vj(a),b),a=d,b=e;else return null;else if(d=Wf(a),w(d))c=U.o(c,vj(a),b),a=d,b=e;else return null;else return null;else return new X(null,2,5,Y,[d,c],null)}}else return null}
function xj(a,b,c,d,e){return ij(d,function(f,h,k){var l=gd(f);c.o?c.o(l,h,k):c.call(null,l,h,k);Fd(h," ");f=hd(f);return c.o?c.o(f,h,k):c.call(null,f,h,k)},[z.f(a),"{"].join(""),", ","}",e,G(b))}function qj(a,b,c,d){var e=lf(a)?wj(a):null,f=T(e,0,null);e=T(e,1,null);return w(f)?xj(["#:",z.f(f)].join(""),e,b,c,d):xj(null,a,b,c,d)}I.prototype.ha=t;I.prototype.W=function(a,b,c){return ij(b,pj,"("," ",")",c,this)};Zf.prototype.ha=t;Zf.prototype.W=function(a,b,c){return ij(b,pj,"("," ",")",c,this)};
uh.prototype.ha=t;uh.prototype.W=function(a,b,c){return ij(b,pj,"["," ","]",c,this)};Ai.prototype.ha=t;Ai.prototype.W=function(a,b,c){return ij(b,pj,"("," ",")",c,this)};Zh.prototype.ha=t;Zh.prototype.W=function(a,b,c){return ij(b,pj,"("," ",")",c,this)};Gh.prototype.ha=t;Gh.prototype.W=function(a,b,c){return ij(b,pj,"("," ",")",c,this)};Tf.prototype.ha=t;Tf.prototype.W=function(a,b,c){return ij(b,pj,"("," ",")",c,this)};Ne.prototype.ha=t;
Ne.prototype.W=function(a,b,c){return ij(b,pj,"("," ",")",c,this)};Fi.prototype.ha=t;Fi.prototype.W=function(a,b,c){return qj(this,pj,b,c)};Ci.prototype.ha=t;Ci.prototype.W=function(a,b,c){return ij(b,pj,"("," ",")",c,this)};Ih.prototype.ha=t;Ih.prototype.W=function(a,b,c){return ij(b,pj,"["," ","]",c,this)};Si.prototype.ha=t;Si.prototype.W=function(a,b,c){return ij(b,pj,"#{"," ","}",c,this)};cg.prototype.ha=t;cg.prototype.W=function(a,b,c){return ij(b,pj,"("," ",")",c,this)};Jg.prototype.ha=t;
Jg.prototype.W=function(a,b,c){Fd(b,"#object[cljs.core.Atom ");pj(new u(null,1,[yj,this.state],null),b,c);return Fd(b,"]")};Li.prototype.ha=t;Li.prototype.W=function(a,b,c){return ij(b,pj,"("," ",")",c,this)};Qg.prototype.ha=t;Qg.prototype.W=function(a,b,c){return ij(b,pj,"("," ",")",c,this)};X.prototype.ha=t;X.prototype.W=function(a,b,c){return ij(b,pj,"["," ","]",c,this)};Ph.prototype.ha=t;Ph.prototype.W=function(a,b,c){return ij(b,pj,"("," ",")",c,this)};Rf.prototype.ha=t;
Rf.prototype.W=function(a,b){return Fd(b,"()")};Qh.prototype.ha=t;Qh.prototype.W=function(a,b,c){return ij(b,pj,"#queue ["," ","]",c,G(this))};u.prototype.ha=t;u.prototype.W=function(a,b,c){return qj(this,pj,b,c)};$i.prototype.ha=t;$i.prototype.W=function(a,b,c){return ij(b,pj,"("," ",")",c,this)};Ki.prototype.ha=t;Ki.prototype.W=function(a,b,c){return ij(b,pj,"("," ",")",c,this)};Ve.prototype.ha=t;Ve.prototype.W=function(a,b,c){return ij(b,pj,"("," ",")",c,this)};me.prototype.Hb=t;
me.prototype.rb=function(a,b){if(b instanceof me)return le(this,b);throw Error(["Cannot compare ",z.f(this)," to ",z.f(b)].join(""));};E.prototype.Hb=t;E.prototype.rb=function(a,b){if(b instanceof E)return Uf(this,b);throw Error(["Cannot compare ",z.f(this)," to ",z.f(b)].join(""));};Ih.prototype.Hb=t;Ih.prototype.rb=function(a,b){if(nf(b))return xf(this,b);throw Error(["Cannot compare ",z.f(this)," to ",z.f(b)].join(""));};X.prototype.Hb=t;
X.prototype.rb=function(a,b){if(nf(b))return xf(this,b);throw Error(["Cannot compare ",z.f(this)," to ",z.f(b)].join(""));};uh.prototype.Hb=t;uh.prototype.rb=function(a,b){if(nf(b))return xf(this,b);throw Error(["Cannot compare ",z.f(this)," to ",z.f(b)].join(""));};var zj=null;function Aj(){null==zj&&(zj=Kg(0));return ne.f([z.f("reagent"),z.f(Mg.j(zj,ye))].join(""))}function Bj(){}
var Cj=function Cj(a){if(null!=a&&null!=a.Ke)return a.Ke(a);var c=Cj[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=Cj._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("IEncodeJS.-clj-\x3ejs",a);};function Dj(a,b){return(null!=a?t===a.Je||(a.qd?0:x(Bj,a)):x(Bj,a))?Cj(a):"string"===typeof a||"number"===typeof a||a instanceof E||a instanceof me?b.f?b.f(a):b.call(null,a):uj(S([a]))}
var Ej=function Ej(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=1<c.length?new I(c.slice(1),0,null):null;return Ej.A(arguments[0],c)};
Ej.A=function(a,b){b=null!=b&&(b.v&64||t===b.R)?W(Ii,b):b;var c=D.o(b,Fj,Yf),d=function h(f){if(null==f)return null;if(null!=f?t===f.Je||(f.qd?0:x(Bj,f)):x(Bj,f))return Cj(f);if(f instanceof E)return c.f?c.f(f):c.call(null,f);if(f instanceof me)return z.f(f);if(lf(f)){var k={};f=G(f);for(var l=null,m=0,n=0;;)if(n<m){var p=l.V(null,n),r=T(p,0,null),v=T(p,1,null);p=k;r=Dj(r,d);v=h(v);p[r]=v;n+=1}else if(f=G(f))of(f)?(m=Rd(f),f=Sd(f),l=m,m=P(m)):(l=J(f),m=T(l,0,null),n=T(l,1,null),l=k,m=Dj(m,d),n=h(n),
l[m]=n,f=K(f),l=null,m=0),n=0;else break;return k}if(hf(f)){k=[];f=G(Z.j(h,f));l=null;for(n=m=0;;)if(n<m)p=l.V(null,n),k.push(p),n+=1;else if(f=G(f))l=f,of(l)?(f=Rd(l),n=Sd(l),l=f,m=P(f),f=n):(f=J(l),k.push(f),f=K(l),l=null,m=0),n=0;else break;return k}return f};return d(a)};Ej.J=1;Ej.K=function(a){var b=J(a);a=K(a);return this.A(b,a)};function Gj(){}
var Hj=function Hj(a,b){if(null!=a&&null!=a.Ie)return a.Ie(a,b);var d=Hj[q(null==a?null:a)];if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);d=Hj._;if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);throw y("IEncodeClojure.-js-\x3eclj",a);};
function Ij(a,b){var c=null!=b&&(b.v&64||t===b.R)?W(Ii,b):b;c=D.j(c,Jj);var d=w(c)?Xf:z;return function h(f){return(null!=f?t===f.Af||(f.qd?0:x(Gj,f)):x(Gj,f))?Hj(f,W(Ji,b)):rf(f)?cj(Z.j(h,f)):Ch(f)?new uh(h(gd(f)),h(hd(f))):hf(f)?Fg.o(We(f),Z.f(h),f):Ec(f)?Md(Lc(function(k,l){return ig.j(k,h(l))},Kd(Ue),f)):Gc(f)===Object?Md(Lc(function(k,l){var m=d.f?d.f(l):d.call(null,l);l=h(Za(f,l));return Nd(k,m,l)},Kd(wg),Ya(f))):f}(a)}var Kj=null;
function Lj(){null==Kj&&(Kj=Kg(new u(null,3,[Mj,wg,Nj,wg,Oj,wg],null)));return Kj}function Pj(a,b,c){var d=M.j(b,c);if(d)return d;d=Oj.f(a);d=d.f?d.f(b):d.call(null,b);if(d=vf(d,c))return d;if(nf(c))if(nf(b))if(P(c)===P(b)){d=!0;for(var e=0;;)if(d&&e!==P(c))d=Pj(a,b.f?b.f(e):b.call(null,e),c.f?c.f(e):c.call(null,e)),e+=1;else return d}else return!1;else return!1;else return!1}function Qj(a){var b=C(Lj());return tg(D.j(Mj.f(b),a))}
function Rj(a,b,c,d){Mg.j(a,function(){return C(b)});Mg.j(c,function(){return C(d)})}
var Sj=function Sj(a,b,c){var e=function(){var f=C(c);return f.f?f.f(a):f.call(null,a)}();e=w(w(e)?e.f?e.f(b):e.call(null,b):e)?!0:null;if(w(e))return e;e=function(){for(var f=Qj(b);;)if(0<P(f)){var h=J(f);Sj.o?Sj.o(a,h,c):Sj.call(null,a,h,c);f=pe(f)}else return null}();if(w(e))return e;e=function(){for(var f=Qj(a);;)if(0<P(f)){var h=J(f);Sj.o?Sj.o(h,b,c):Sj.call(null,h,b,c);f=pe(f)}else return null}();return w(e)?e:!1};function Tj(a,b,c,d){c=Sj(a,b,c);return w(c)?c:Pj(d,a,b)}
var Uj=function Uj(a,b,c,d,e,f,h,k){var m=Lc(function(p,r){var v=T(r,0,null);T(r,1,null);if(Pj(C(c),b,v)&&(p=null==p||Tj(v,J(p),e,C(c))?r:p,!Tj(J(p),v,e,C(c))))throw Error(["Multiple methods in multimethod '",z.f(a),"' match dispatch value: ",z.f(b)," -\x3e ",z.f(v)," and ",z.f(J(p)),", and neither is preferred"].join(""));return p},null,C(d)),n=function(){if(null==m){var p=C(d);p=p.f?p.f(k):p.call(null,k)}else p=!1;return w(p)?new X(null,2,5,Y,[k,p],null):m}();if(w(n)){if(M.j(C(h),C(c)))return Mg.F(f,
U,b,Cm(n)),Cm(n);Rj(f,d,h,c);return Uj.Ea?Uj.Ea(a,b,c,d,e,f,h,k):Uj.call(null,a,b,c,d,e,f,h,k)}return null};function Vj(a,b){throw Error(["No method in multimethod '",z.f(a),"' for dispatch value: ",z.f(b)].join(""));}function Wj(a,b,c,d,e,f,h){var k=Xj;this.name=a;this.I=b;this.af=k;this.hierarchy=c;this.Uc=d;this.qf=e;this.Tc=f;this.yc=h;this.v=4194305;this.N=4352}g=Wj.prototype;
g.call=function(a){switch(arguments.length-1){case 0:return this.D();case 1:return this.f(arguments[1]);case 2:return this.j(arguments[1],arguments[2]);case 3:return this.o(arguments[1],arguments[2],arguments[3]);case 4:return this.F(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.U(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.va(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.Ra(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.Ea(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.Sa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.Ga(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);
case 11:return this.Ha(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.Ia(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.Ja(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],
arguments[11],arguments[12],arguments[13]);case 14:return this.Ka(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.La(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.Ma(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.Na(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.Oa(arguments[1],arguments[2],
arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.Pa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.Qa(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:return this.nd(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],
arguments[18],arguments[19],arguments[20],arguments[21]);default:throw Error(["Invalid arity: ",z.f(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Jc(b)))};g.D=function(){var a=this.I.D?this.I.D():this.I.call(null),b=Yj(this,a);w(b)||Vj(this.name,a);return b.D?b.D():b.call(null)};g.f=function(a){var b=this.I.f?this.I.f(a):this.I.call(null,a),c=Yj(this,b);w(c)||Vj(this.name,b);return c.f?c.f(a):c.call(null,a)};
g.j=function(a,b){var c=this.I.j?this.I.j(a,b):this.I.call(null,a,b),d=Yj(this,c);w(d)||Vj(this.name,c);return d.j?d.j(a,b):d.call(null,a,b)};g.o=function(a,b,c){var d=this.I.o?this.I.o(a,b,c):this.I.call(null,a,b,c),e=Yj(this,d);w(e)||Vj(this.name,d);return e.o?e.o(a,b,c):e.call(null,a,b,c)};g.F=function(a,b,c,d){var e=this.I.F?this.I.F(a,b,c,d):this.I.call(null,a,b,c,d),f=Yj(this,e);w(f)||Vj(this.name,e);return f.F?f.F(a,b,c,d):f.call(null,a,b,c,d)};
g.U=function(a,b,c,d,e){var f=this.I.U?this.I.U(a,b,c,d,e):this.I.call(null,a,b,c,d,e),h=Yj(this,f);w(h)||Vj(this.name,f);return h.U?h.U(a,b,c,d,e):h.call(null,a,b,c,d,e)};g.va=function(a,b,c,d,e,f){var h=this.I.va?this.I.va(a,b,c,d,e,f):this.I.call(null,a,b,c,d,e,f),k=Yj(this,h);w(k)||Vj(this.name,h);return k.va?k.va(a,b,c,d,e,f):k.call(null,a,b,c,d,e,f)};
g.Ra=function(a,b,c,d,e,f,h){var k=this.I.Ra?this.I.Ra(a,b,c,d,e,f,h):this.I.call(null,a,b,c,d,e,f,h),l=Yj(this,k);w(l)||Vj(this.name,k);return l.Ra?l.Ra(a,b,c,d,e,f,h):l.call(null,a,b,c,d,e,f,h)};g.Ea=function(a,b,c,d,e,f,h,k){var l=this.I.Ea?this.I.Ea(a,b,c,d,e,f,h,k):this.I.call(null,a,b,c,d,e,f,h,k),m=Yj(this,l);w(m)||Vj(this.name,l);return m.Ea?m.Ea(a,b,c,d,e,f,h,k):m.call(null,a,b,c,d,e,f,h,k)};
g.Sa=function(a,b,c,d,e,f,h,k,l){var m=this.I.Sa?this.I.Sa(a,b,c,d,e,f,h,k,l):this.I.call(null,a,b,c,d,e,f,h,k,l),n=Yj(this,m);w(n)||Vj(this.name,m);return n.Sa?n.Sa(a,b,c,d,e,f,h,k,l):n.call(null,a,b,c,d,e,f,h,k,l)};g.Ga=function(a,b,c,d,e,f,h,k,l,m){var n=this.I.Ga?this.I.Ga(a,b,c,d,e,f,h,k,l,m):this.I.call(null,a,b,c,d,e,f,h,k,l,m),p=Yj(this,n);w(p)||Vj(this.name,n);return p.Ga?p.Ga(a,b,c,d,e,f,h,k,l,m):p.call(null,a,b,c,d,e,f,h,k,l,m)};
g.Ha=function(a,b,c,d,e,f,h,k,l,m,n){var p=this.I.Ha?this.I.Ha(a,b,c,d,e,f,h,k,l,m,n):this.I.call(null,a,b,c,d,e,f,h,k,l,m,n),r=Yj(this,p);w(r)||Vj(this.name,p);return r.Ha?r.Ha(a,b,c,d,e,f,h,k,l,m,n):r.call(null,a,b,c,d,e,f,h,k,l,m,n)};g.Ia=function(a,b,c,d,e,f,h,k,l,m,n,p){var r=this.I.Ia?this.I.Ia(a,b,c,d,e,f,h,k,l,m,n,p):this.I.call(null,a,b,c,d,e,f,h,k,l,m,n,p),v=Yj(this,r);w(v)||Vj(this.name,r);return v.Ia?v.Ia(a,b,c,d,e,f,h,k,l,m,n,p):v.call(null,a,b,c,d,e,f,h,k,l,m,n,p)};
g.Ja=function(a,b,c,d,e,f,h,k,l,m,n,p,r){var v=this.I.Ja?this.I.Ja(a,b,c,d,e,f,h,k,l,m,n,p,r):this.I.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r),B=Yj(this,v);w(B)||Vj(this.name,v);return B.Ja?B.Ja(a,b,c,d,e,f,h,k,l,m,n,p,r):B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r)};
g.Ka=function(a,b,c,d,e,f,h,k,l,m,n,p,r,v){var B=this.I.Ka?this.I.Ka(a,b,c,d,e,f,h,k,l,m,n,p,r,v):this.I.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,v),F=Yj(this,B);w(F)||Vj(this.name,B);return F.Ka?F.Ka(a,b,c,d,e,f,h,k,l,m,n,p,r,v):F.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,v)};
g.La=function(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B){var F=this.I.La?this.I.La(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B):this.I.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,v,B),H=Yj(this,F);w(H)||Vj(this.name,F);return H.La?H.La(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B):H.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,v,B)};
g.Ma=function(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F){var H=this.I.Ma?this.I.Ma(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F):this.I.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F),O=Yj(this,H);w(O)||Vj(this.name,H);return O.Ma?O.Ma(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F):O.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F)};
g.Na=function(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H){var O=this.I.Na?this.I.Na(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H):this.I.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H),V=Yj(this,O);w(V)||Vj(this.name,O);return V.Na?V.Na(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H):V.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H)};
g.Oa=function(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O){var V=this.I.Oa?this.I.Oa(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O):this.I.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O),ca=Yj(this,V);w(ca)||Vj(this.name,V);return ca.Oa?ca.Oa(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O):ca.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O)};
g.Pa=function(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V){var ca=this.I.Pa?this.I.Pa(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V):this.I.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V),ta=Yj(this,ca);w(ta)||Vj(this.name,ca);return ta.Pa?ta.Pa(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V):ta.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V)};
g.Qa=function(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V,ca){var ta=this.I.Qa?this.I.Qa(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V,ca):this.I.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V,ca),Ta=Yj(this,ta);w(Ta)||Vj(this.name,ta);return Ta.Qa?Ta.Qa(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V,ca):Ta.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V,ca)};
g.nd=function(a,b,c,d,e,f,h,k,l,m,n,p,r,v,B,F,H,O,V,ca,ta){var Ta=sg(this.I,a,b,c,d,S([e,f,h,k,l,m,n,p,r,v,B,F,H,O,V,ca,ta])),tf=Yj(this,Ta);w(tf)||Vj(this.name,Ta);return sg(tf,a,b,c,d,S([e,f,h,k,l,m,n,p,r,v,B,F,H,O,V,ca,ta]))};function Zj(a,b){var c=ak;Mg.F(c.Uc,U,a,b);Rj(c.Tc,c.Uc,c.yc,c.hierarchy)}function Yj(a,b){M.j(C(a.yc),C(a.hierarchy))||Rj(a.Tc,a.Uc,a.yc,a.hierarchy);var c=C(a.Tc);c=c.f?c.f(b):c.call(null,b);return w(c)?c:Uj(a.name,b,a.hierarchy,a.Uc,a.qf,a.Tc,a.yc,a.af)}g.ac=function(){return Td(this.name)};
g.bc=function(){return Ud(this.name)};g.S=function(){return na(this)};function bk(a,b){var c=Error(a);this.message=a;this.data=b;this.Od=null;this.name=c.name;this.description=c.description;this.number=c.number;this.fileName=c.fileName;this.lineNumber=c.lineNumber;this.columnNumber=c.columnNumber;this.stack=c.stack;return this}bk.prototype.__proto__=Error.prototype;bk.prototype.ha=t;
bk.prototype.W=function(a,b,c){Fd(b,"#error {:message ");pj(this.message,b,c);w(this.data)&&(Fd(b,", :data "),pj(this.data,b,c));w(this.Od)&&(Fd(b,", :cause "),pj(this.Od,b,c));return Fd(b,"}")};bk.prototype.toString=function(){return $d(this)};function ck(a,b){return new bk(a,b)}if("undefined"===typeof pc||"undefined"===typeof qc||"undefined"===typeof dk)var dk=null;"undefined"!==typeof console&&Cc();
if("undefined"===typeof pc||"undefined"===typeof qc||"undefined"===typeof ek)var ek=function(){throw Error("cljs.core/*eval* not bound");};M.j("nodejs","default")&&(ha=global);Cc();var fk=new E(null,"idle","idle",-2007156861),gk=new E(null,"hovertext","hovertext",-193629126),hk=new E(null,"new-confirmed","new-confirmed",1714556951),ik=new E(null,"xaxis","xaxis",488378734),yj=new E(null,"val","val",128701612),jk=new E(null,"ms","ms",-1152709733),kk=new E(null,"render","render",-1408033454),Tp=new E(null,"size","size",1098693007),lk=new E(null,"timeout","timeout",-318625318),mk=new E(null,"layout","layout",-2120940921),nk=new E(null,"original-text","original-text",744448452),
ok=new E(null,"auto-run","auto-run",1958400437),pk=new E(null,"on-failure","on-failure",842888245),qk=new E(null,"content-type","content-type",-508222634),rk=new E(null,"log","log",-1595516004),sk=new E(null,"about-panel","about-panel",334628515),tk=new E(null,"on-dispose","on-dispose",2105306360),uk=new E(null,"get","get",1683182755),vk=new E(ba,"get-covid-data","coronavirus-charts.subs/get-covid-data",781752609),wk=new E(null,"headers","headers",-835030129),xk=new E(null,"method","method",55703592),
yk=new E(null,"data","data",-232669377),zk=new E(null,"date","date",-1463434462),Ak=new E(null,"write","write",-1857649168),Bk=new E(null,"status-text","status-text",-1834235478),Ck=new E(null,"fsm-state","fsm-state",1656310533),Dk=new E(null,"constructor","constructor",-1953928811),Ek=new E(ea,"map","secretary.core/map",-31086646),Fk=new E(null,"childContextTypes","childContextTypes",578717991),Gk=new E(null,"status","status",-1997798413),Hk=new E(null,"home-panel","home-panel",1226198754),Nj=new E(null,
"descendants","descendants",1824886031),Wp=new E(null,"start","start",-355208981),Ik=new E(null,"description","description",-1428560544),Xp=new E(ba,"get-domain-trend","coronavirus-charts.subs/get-domain-trend",-584472231),Jk=new E(null,"\x3c-","\x3c-",760412998),Kk=new E(null,"getInitialState","getInitialState",1541760916),rj=new E(null,"alt-impl","alt-impl",670969595),Lk=new me(null,"meta22577","meta22577",861373060,null),Qi=new E("cljs.core","not-found","cljs.core/not-found",-1572889185),Mk=new E(null,
"no-cache","no-cache",1588056370),Nk=new E(null,"parse-error","parse-error",255902478),Ok=new me(null,"orig-route","orig-route",899103121,null),Pk=new E(null,"\x3c\x3e","\x3c\x3e",1280186386),Qk=new E(null,"margin","margin",-995903681),Yp=new E(null,"font","font",-1506159249),Rk=new E(null,"exception","exception",-335277064),Sk=new E(null,"finish-run","finish-run",753148477),Tk=new E(null,"parse","parse",-1162164619),Uk=new E(null,"debug-message","debug-message",-502855302),Vk=new E(null,"interceptors",
"interceptors",-1546782951),Wk=new E(null,"dispatch-later","dispatch-later",291951390),Xk=new E(null,"raw","raw",1604651272),xc=new E(null,"flush-on-newline","flush-on-newline",-151457939),Yk=new E(null,"last-error","last-error",1848699973),Zk=new E(null,"showlegend","showlegend",-287404369),$k=new E(null,"after","after",594996914),al=new E(null,"reagent-render","reagent-render",-985383853),bl=new E("cljs.analyzer","analyzed","cljs.analyzer/analyzed",-735094162),cl=new E(null,"before","before",-1633692388),
dl=new E(null,"trigger","trigger",103466139),el=new E(null,"on-success","on-success",1786904109),fl=new E(ba,"active-panel","coronavirus-charts.subs/active-panel",-108478858),gl=new E(null,"failed","failed",-1397425762),hl=new E(null,"l","l",1395893423),il=new E(null,"hierarchy","hierarchy",-1053470341),jl=new E(null,"a","a",-2123407586),kl=new E(null,"b","b",1482224470),ll=new E(null,"set","set",304602554),ml=new E(null,"add-event","add-event",938429088),nl=new E(null,"y","y",-1757859776),ol=new E(null,
"x","x",2099068185),pl=new E(null,"t","t",-1397832519),ql=new E(null,"r","r",-471384190),rl=new E(null,"http-no-on-failure","http-no-on-failure",962976084),sl=new E(null,"componentWillUnmount","componentWillUnmount",1573788814),tl=new E(null,"contextType","contextType",1033066077),ul=new E(null,"scheduled","scheduled",553898551),vl=new E(null,"error","error",-978969032),wl=new E(null,"event","event",301435442),xl=new E(null,"getDerivedStateFromProps","getDerivedStateFromProps",-991834739),yl=new E(null,
"effects","effects",-282369292),zl=new E(null,"do-fx","do-fx",1194163050),Al=new E(null,"div","div",1057191632),sj=new E(null,"fallback-impl","fallback-impl",-1501286995),Bl=new E(null,"prefix","prefix",-265908465),Cl=new E(null,"hoverinfo","hoverinfo",30772936),Dl=new E(null,"display-name","display-name",694513143),El=new E(null,"height","height",1025178622),tt=new E(null,"orientation","orientation",623557579),Fj=new E(null,"keyword-fn","keyword-fn",-64566675),Fl=new E(null,"confirmed","confirmed",
-487126323),Gl=new E(null,"last-error-code","last-error-code",276598110),Hl=new E(null,"resume","resume",-118572261),Il=new E(null,"width","width",-384071477),Jl=new E(null,"debug","debug",-1608172596),Kl=new E(null,"url-params","url-params",-697567619),Ll=new E(null,"component-will-unmount","component-will-unmount",-2058314698),vt=new E(null,"end","end",-268185958),Ml=new E(null,"keywords?","keywords?",764949733),Nl=new E(null,"pause","pause",-2095325672),vg=new me(null,"meta18589","meta18589",712589844,
null),Ol=new E(null,"format","format",-1306924766),Pl=new E(null,"group","group",582596132),Ql=new E(null,"href","href",-793805698),Rl=new E(null,"unnamed","unnamed",-26044928),Sl=new E(null,"not-initialized","not-initialized",-1937378906),Tl=new me(null,"params","params",-1943919534,null),Ul=new E(null,"db-handler","db-handler",579530098),Vl=new E(null,"type","type",1174270348),Wl=new E(null,"style","style",-496642736),jj=new E(null,"more-marker","more-marker",-14717935),Xl=new me(null,"re","re",
1869207729,null),Yl=new E(null,"vec-strategy","vec-strategy",1843221372),Zl=new E(null,"active-panel","active-panel",-1802545994),$l=new E(null,"http-no-on-success","http-no-on-success",-1593227158),am=new E(aa,"set-active-panel","coronavirus-charts.events/set-active-panel",-1211851890),bm=new E(null,"handler","handler",-195596612),zc=new E(null,"meta","meta",1499536964),cm=new E(null,"displayName","displayName",-809144601),dm=new E(null,"map","map",1371690461),em=new E(null,"read","read",1140058661),
fm=new E(null,"body","body",-2049205669),gm=new E(null,"getDerivedStateFromError","getDerivedStateFromError",166658477),hm=new E(null,"uri","uri",-774711847),im=new E(null,"mode","mode",654403691),jm=new E(null,"route","route",329891309),km=new E(null,"running","running",1554969103),lm=new E(null,"failure","failure",720415879),mm=new E(null,"class","class",-2030961996),nm=new E(null,"covid-data","covid-data",815820337),om=new E(null,"title","title",636505583),pm=new E(null,"dispatch","dispatch",1319337009),
qm=new E(null,"cljsLegacyRender","cljsLegacyRender",-1527295613),rm=new E(null,"action","action",-811238024),sm=new E(null,"with-credentials","with-credentials",-1163127235),tm=new E(null,"stack","stack",-793405930),um=new me(null,"clauses","clauses",-1199594528,null),vm=new E(null,"reagentRender","reagentRender",-358306383),wm=new E(null,"name","name",1843675177),xm=new E(da,"untrimmed-event","re-frame.std-interceptors/untrimmed-event",-840935075),ym=new E(null,"coeffects","coeffects",497912985),
eh=new E(null,"queue","queue",1455835879),zm=new E(null,"warn","warn",-436710552),Am=new E(null,"java","java",1958249105),Bm=new E(null,"on-set","on-set",-140953470),Dm=new E(null,"processing-request","processing-request",-264947221),Em=new E(null,"request-received","request-received",2110590540),Xj=new E(null,"default","default",-1987822328),Fm=new E(null,"cofx","cofx",2013202907),Ac=new E(null,"dup","dup",556298533),Gm=new E(null,"fx-handler","fx-handler",-549783097),Hm=new E(null,"h1","h1",-1896887462),
Im=new E(null,"api","api",-899839580),Jm=new E(null,"sequential","sequential",-1082983960),Km=new E(null,"fx","fx",-1237829572),Bc=new E(null,"print-length","print-length",1931866356),Lm=new E(null,"dispatch-n","dispatch-n",-504469236),Mm=new E(null,"*","*",-1294732318),Nm=new E(null,"trim-v","trim-v",-1274938640),Om=new E(null,"paused","paused",-1710376127),Pm=new E(null,"component-did-update","component-did-update",-1468549173),Qm=new E(ba,"name","coronavirus-charts.subs/name",149338601),Rm=new E(null,
"flush-dom","flush-dom",-933676816),Sm=new E(null,"sub","sub",-2093760025),Tm=new E(ea,"sequential","secretary.core/sequential",-347187207),Jj=new E(null,"keywordize-keys","keywordize-keys",1310784252),Um=new E(null,"aborted","aborted",1775972619),Vm=new E(null,"on-write","on-write",31519475),Wm=new E(null,"key","key",-1516042587),Xm=new E(null,"db","db",993250759),Ym=new E(null,"last-method","last-method",-563909920),Zm=new E(null,"http-xhrio","http-xhrio",1846166714),$m=new me(null,"vec__22573",
"vec__22573",1329878784,null),an=new E(null,"query-params","query-params",900640534),bn=new E(aa,"register-covid-data","coronavirus-charts.events/register-covid-data",-167896300),Mj=new E(null,"parents","parents",-2027538891),cn=new E(null,"validator","validator",-1966190681),dn=new E(da,"not-found","re-frame.std-interceptors/not-found",-1614827865),en=new E(aa,"load-covid-data","coronavirus-charts.events/load-covid-data",-1942673036),fn=new E(null,"response","response",-1068424192),gu=new E(null,
"legend","legend",-1027192245),gn=new E(null,"yield","yield",177875009),hn=new E(null,"deregister-event-handler","deregister-event-handler",-1096518994),yc=new E(null,"readably","readably",1129599760),jn=new E(null,"contextTypes","contextTypes",-2023853910),kn=new E(null,"yaxis","yaxis",-1783465932),ln=new E(null,"shouldComponentUpdate","shouldComponentUpdate",1795750960),mn=new E(null,"connection-established","connection-established",-1403749733),on=new E(null,"id","id",-1388402092),pn=new E(null,
"progress-handler","progress-handler",333585589),qn=new E(null,"response-ready","response-ready",245208276),hu=new E(ba,"get-earliest-record-date","coronavirus-charts.subs/get-earliest-record-date",790261859),sn=new E(null,"run-queue","run-queue",-1701798027),tn=new E(aa,"initialize-db","coronavirus-charts.events/initialize-db",-1137991994),un=new E(null,"params","params",710516235),Oj=new E(null,"ancestors","ancestors",-776045424),vn=new E(null,"groupEnd","groupEnd",-337721382),wn=new E(null,"atom",
"atom",-397043653),xn=new E(null,"loading","loading",-737050189),yn=new E(null,"response-format","response-format",1664465322);var zn={},An={},Bn=[];function Cn(a,b){var c=An[a];if(void 0!==c)return c;try{Bn.push(a);var d=zn[a],e=shadow$provide[a];if(void 0===d){if(void 0===e)throw"Module not provided: "+a;d={exports:{}};zn[a]=d}if(e){delete shadow$provide[a];try{e.call(d,ha,Cn,d,d.exports)}catch(h){throw console.warn("shadow-cljs - failed to load",a),h;}if(b){var f=b.globals;if(f)for(a=0;a<f.length;a++)window[f[a]]=d.exports}}}finally{Bn.pop()}return d.exports};var Dn=Cn(5,{});function En(a,b,c){var d=RegExp,e=b.source,f=w(b.ignoreCase)?"gi":"g";f=w(b.multiline)?[f,"m"].join(""):f;b=w(b.If)?[f,"u"].join(""):f;d=new d(e,b);return a.replace(d,c)}
function Fn(a){return function(){function b(d){var e=null;if(0<arguments.length){e=0;for(var f=Array(arguments.length-0);e<f.length;)f[e]=arguments[e+0],++e;e=new I(f,0,null)}return c.call(this,e)}function c(d){d=Pg(d);if(M.j(P(d),1))return d=J(d),a.f?a.f(d):a.call(null,d);d=Bh(d);return a.f?a.f(d):a.call(null,d)}b.J=0;b.K=function(d){d=G(d);return c(d)};b.A=c;return b}()}
function Gn(a,b,c){if("string"===typeof b)return a.replace(new RegExp(String(b).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"),"g"),c);if(b instanceof RegExp)return"string"===typeof c?En(a,b,c):En(a,b,Fn(c));throw["Invalid match arg: ",z.f(b)].join("");}function Hn(a,b){var c=new oc;for(b=G(b);;)if(null!=b)c.append(z.f(J(b))),b=K(b),null!=b&&c.append(a);else return c.toString()}
function In(a,b){if(0>=b||b>=2+P(a))return Te.j(Bh(R("",Z.j(z,G(a)))),"");if(w(Pf?wd(1,b):Of.call(null,1,b)))return new X(null,1,5,Y,[a],null);if(w(Pf?wd(2,b):Of.call(null,2,b)))return new X(null,2,5,Y,["",a],null);b-=2;return Te.j(Bh(R("",Kh.o(Bh(Z.j(z,G(a))),0,b))),a.substring(b))}function Jn(a,b){return Kn(a,b,0)}
function Kn(a,b,c){if("/(?:)/"===z.f(b))b=In(a,c);else if(1>c)b=Bh(z.f(a).split(b));else a:for(var d=c,e=Ue;;){if(1===d){b=Te.j(e,a);break a}var f=ej(b,a);if(null!=f){var h=a.indexOf(f);f=a.substring(h+P(f));--d;e=Te.j(e,a.substring(0,h));a=f}else{b=Te.j(e,a);break a}}if(0===c&&1<P(b))a:for(c=b;;)if(""===ef(c))c=null==c?null:ld(c);else break a;else c=b;return c};function Ln(a,b,c){if(Qf(c)){var d=W(Sf,Z.j(a,c));return b.f?b.f(d):b.call(null,d)}return Ch(c)?(d=new uh(function(){var e=gd(c);return a.f?a.f(e):a.call(null,e)}(),function(){var e=hd(c);return a.f?a.f(e):a.call(null,e)}()),b.f?b.f(d):b.call(null,d)):rf(c)?(d=cj(Z.j(a,c)),b.f?b.f(d):b.call(null,d)):mf(c)?(d=Lc(function(e,f){return Te.j(e,a.f?a.f(f):a.call(null,f))},c,c),b.f?b.f(d):b.call(null,d)):hf(c)?(d=Fg.j(We(c),Z.j(a,c)),b.f?b.f(d):b.call(null,d)):b.f?b.f(c):b.call(null,c)}
var Mn=function Mn(a,b){return Ln(Dg.j(Mn,a),a,b)};function Nn(a){function b(c){var d=T(c,0,null);c=T(c,1,null);return"string"===typeof d?new X(null,2,5,Y,[Xf.f(d),c],null):new X(null,2,5,Y,[d,c],null)}return Mn(function(c){return lf(c)?Fg.j(wg,Z.j(b,c)):c},a)};var On={},Pn={};if("undefined"===typeof On||"undefined"===typeof Pn||"undefined"===typeof Qn)var Qn=Kg(null);
if("undefined"===typeof On||"undefined"===typeof Pn||"undefined"===typeof Rn)var Rn=function(){var a={};a.warn=function(){function b(d){var e=null;if(0<arguments.length){e=0;for(var f=Array(arguments.length-0);e<f.length;)f[e]=arguments[e+0],++e;e=new I(f,0,null)}return c.call(this,e)}function c(d){return Mg.A(Qn,bh,new X(null,1,5,Y,[zm],null),Te,S([W(z,d)]))}b.J=0;b.K=function(d){d=G(d);return c(d)};b.A=c;return b}();a.error=function(){function b(d){var e=null;if(0<arguments.length){e=0;for(var f=
Array(arguments.length-0);e<f.length;)f[e]=arguments[e+0],++e;e=new I(f,0,null)}return c.call(this,e)}function c(d){return Mg.A(Qn,bh,new X(null,1,5,Y,[vl],null),Te,S([W(z,d)]))}b.J=0;b.K=function(d){d=G(d);return c(d)};b.A=c;return b}();return a}();var Sn={},Tn="undefined"!==typeof window&&null!=window.document,Un=new Si(null,new u(null,2,["aria",null,"data",null],null),null);function Vn(a){return 2>P(a)?a.toUpperCase():[a.substring(0,1).toUpperCase(),a.substring(1)].join("")}function Wn(a){if("string"===typeof a)return a;a=Yf(a);var b=Jn(a,/-/),c=G(b);b=J(c);c=K(c);return w(Un.f?Un.f(b):Un.call(null,b))?a:pg(z,b,Z.j(Vn,c))}
function Xn(a){var b=function(){if($e(a)){var c=a.displayName;w(c)||(c=a.name,c="string"===typeof c&&G(c)?c:null)}else c=!1;if(w(c))return c;c=null!=a&&(a.N&4096||t===a.Sd)?Yf(a):!1;if(w(c))return c;c=df(a);return lf(c)?wm.f(c):null}();return w(b)?Gn(z.f(b),"$","."):null}function Yn(a){return a instanceof E||a instanceof me}
var Zn=function Zn(a){switch(arguments.length){case 0:return Zn.D();case 1:return Zn.f(arguments[0]);case 2:return Zn.j(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new I(c.slice(2),0,null);return Zn.A(arguments[0],arguments[1],c)}};Zn.D=function(){return null};Zn.f=function(a){return hf(a)?(a=Ig(function(b){return w(b)?Yn(b)?Yf(b):b:null},a),G(a)?Hn(" ",a):null):Yn(a)?Yf(a):a};
Zn.j=function(a,b){return w(a)?w(b)?[z.f(Zn.f(a))," ",z.f(Zn.f(b))].join(""):Zn.f(a):Zn.f(b)};Zn.A=function(a,b,c){return Lc(Zn,Zn.j(a,b),c)};Zn.K=function(a){var b=J(a),c=K(a);a=J(c);c=K(c);return this.A(b,a,c)};Zn.J=2;var $n=!1;var ao={};if("undefined"===typeof On||"undefined"===typeof Sn||"undefined"===typeof ao||"undefined"===typeof bo)var bo=0;function co(a){return setTimeout(a,16)}var eo=Tn?function(){var a=window,b=a.requestAnimationFrame;if(w(b))return b;b=a.webkitRequestAnimationFrame;if(w(b))return b;b=a.mozRequestAnimationFrame;if(w(b))return b;a=a.msRequestAnimationFrame;return w(a)?a:co}():co;function fo(a,b){return a.Wd-b.Wd}
if("undefined"===typeof On||"undefined"===typeof Sn||"undefined"===typeof ao||"undefined"===typeof go)var go=function(){return null};function ho(a){for(var b=a.length,c=0;;)if(c<b){var d=a[c];d.D?d.D():d.call(null);c+=1}else return null}function io(a,b,c){b.push(c);return a.schedule()}function jo(){this.Xc=!1}g=jo.prototype;g.flush_after_render=function(){var a=this.wc;if(null==a)return null;this.wc=null;return ho(a)};g.queue_render=function(a){null==this.Kc&&(this.Kc=[]);return io(this,this.Kc,a)};
g.schedule=function(){function a(){return b.run_queues()}var b=this;if(this.Xc)return null;this.Xc=!0;return eo.f?eo.f(a):eo.call(null,a)};g.flush_before_flush=function(){var a=this.xc;if(null==a)return null;this.xc=null;return ho(a)};g.flush_queues=function(){this.flush_before_flush();go();this.flush_render();return this.flush_after_render()};g.run_queues=function(){this.Xc=!1;return this.flush_queues()};g.add_before_flush=function(a){null==this.xc&&(this.xc=[]);return io(this,this.xc,a)};
g.add_after_render=function(a){null==this.wc&&(this.wc=[]);return io(this,this.wc,a)};g.flush_render=function(){var a=this.Kc;if(null==a)return null;this.Kc=null;a:{a.sort(fo);for(var b=a.length,c=0;;)if(c<b){var d=a[c];!0===d.cljsIsDirty&&d.forceUpdate();c+=1}else break a}return null};if("undefined"===typeof On||"undefined"===typeof Sn||"undefined"===typeof ao||"undefined"===typeof ko){var ko;ko=new jo}function lo(a){if(w(a.cljsIsDirty))return null;a.cljsIsDirty=!0;return ko.queue_render(a)};function mo(a,b){var c=pg(Xi,a,b);return R(c,Vg(function(d){return c===d},b))}function no(a,b){return P(a)<P(b)?Lc(Te,b,a):Lc(Te,a,b)}var oo=function oo(a){switch(arguments.length){case 1:return oo.f(arguments[0]);case 2:return oo.j(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new I(c.slice(2),0,null);return oo.A(arguments[0],arguments[1],c)}};oo.f=function(a){return a};
oo.j=function(a,b){for(;;)if(P(b)<P(a)){var c=a;a=b;b=c}else return Lc(function(d,e){return function(f,h){return vf(e,h)?f:ff.j(f,h)}}(a,b),a,a)};oo.A=function(a,b,c){a=mo(function(d){return-P(d)},Te.A(c,b,S([a])));return Lc(oo,J(a),pe(a))};oo.K=function(a){var b=J(a),c=K(a);a=J(c);c=K(c);return this.A(b,a,c)};oo.J=2;
var po=function po(a){switch(arguments.length){case 1:return po.f(arguments[0]);case 2:return po.j(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new I(c.slice(2),0,null);return po.A(arguments[0],arguments[1],c)}};po.f=function(a){return a};po.j=function(a,b){return P(a)<P(b)?Lc(function(c,d){return vf(b,d)?ff.j(c,d):c},a,a):Lc(ff,a,b)};po.A=function(a,b,c){return Lc(po,a,Te.j(c,b))};
po.K=function(a){var b=J(a),c=K(a);a=J(c);c=K(c);return this.A(b,a,c)};po.J=2;var qo={},ro;if("undefined"===typeof On||"undefined"===typeof qo||"undefined"===typeof so)var so=!1;if("undefined"===typeof On||"undefined"===typeof qo||"undefined"===typeof to)var to=0;if("undefined"===typeof On||"undefined"===typeof qo||"undefined"===typeof uo)var uo=Kg(0);
function vo(a,b){b.captured=null;a:{var c=ro;ro=b;try{var d=a.D?a.D():a.call(null);break a}finally{ro=c}d=void 0}a=b.captured;b.ob=!1;a:{c=b.Fb;var e=null==a?0:a.length;if(e===(null==c?0:c.length))for(var f=0;;){var h=f===e;if(h){c=h;break a}if(a[f]===c[f])f+=1;else{c=!1;break a}}else c=!1}c||b._update_watching(a);return d}function wo(a){var b=ro;if(null!=b){var c=b.captured;null==c?b.captured=[a]:c.push(a)}}function xo(a,b){so&&Mg.o(uo,Jf,P(b)-P(a));return b}
function yo(a,b,c){var d=a.ra;a.ra=xo(d,U.o(d,b,c));return a.Jd=null}function zo(a,b){var c=a.ra;a.ra=xo(c,Ze.j(c,b));return a.Jd=null}function Ao(a,b,c){var d=a.Jd;d=null==d?a.Jd=Gf(function(l,m,n){l.push(m);l.push(n);return l},[],a.ra):d;for(var e=d.length,f=0;;)if(f<e){var h=d[f],k=d[f+1];k.F?k.F(h,a,b,c):k.call(null,h,a,b,c);f=2+f}else return null}
function Bo(a,b,c,d){Fd(b,["#\x3c",z.f(d)," "].join(""));a:{d=ro;ro=null;try{var e=C(a);break a}finally{ro=d}e=void 0}pj(e,b,c);return Fd(b,"\x3e")}if("undefined"===typeof On||"undefined"===typeof qo||"undefined"===typeof Co)var Co=null;function Do(){for(;;){var a=Co;if(null==a)return null;Co=null;for(var b=a.length,c=0;;)if(c<b)a[c]._queued_run(),c+=1;else break}}go=Do;function Eo(a,b,c,d){this.state=a;this.meta=b;this.Id=c;this.ra=d;this.v=2154201088;this.N=114690}g=Eo.prototype;g.Vc=t;
g.W=function(a,b,c){return Bo(this,b,c,"Atom:")};g.Z=function(){return this.meta};g.S=function(){return na(this)};g.H=function(a,b){return this===b};g.Ba=function(a,b){a=this.state;this.state=b;null!=this.ra&&Ao(this,a,b);return b};g.Dc=function(a,b){return this.Ba(null,b.f?b.f(this.state):b.call(null,this.state))};g.Ec=function(a,b,c){return this.Ba(null,b.j?b.j(this.state,c):b.call(null,this.state,c))};g.Fc=function(a,b,c,d){return this.Ba(null,b.o?b.o(this.state,c,d):b.call(null,this.state,c,d))};
g.Gc=function(a,b,c,d,e){return this.Ba(null,rg(b,this.state,c,d,e))};g.Hc=function(a,b){Ao(this,a,b)};g.fc=function(a,b,c){return yo(this,b,c)};g.gc=function(a,b){return zo(this,b)};g.aa=function(a,b){return new Eo(this.state,b,this.Id,this.ra)};g.eb=function(){wo(this);return this.state};
var Fo=function Fo(a){switch(arguments.length){case 1:return Fo.f(arguments[0]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new I(c.slice(1),0,null);return Fo.A(arguments[0],c)}};Fo.f=function(a){return new Eo(a,null,null,null)};Fo.A=function(a,b){var c=null!=b&&(b.v&64||t===b.R)?W(Ii,b):b;b=D.j(c,zc);c=D.j(c,cn);return new Eo(a,b,c,null)};Fo.K=function(a){var b=J(a);a=K(a);return this.A(b,a)};Fo.J=1;
function Go(a,b,c,d){var e=b.Dd;e=null==e?wg:e;var f=e.j?e.j(c,null):e.call(null,c,null);if(null!=f)return C(f);if(null==ro)return a.D?a.D():a.call(null);f=function(){function k(){so&&Mg.j(uo,Kf);var l=Ze.j(b.Dd,c);b.Dd=l;null!=d&&(d.rc=null);return null}return Ho.o?Ho.o(a,tk,k):Ho.call(null,a,tk,k)}();var h=C(f);b.Dd=U.o(e,c,f);so&&Mg.j(uo,ye);null!=d&&(d.rc=f);return h}function Io(a,b,c){this.Ta=a;this.args=b;this.rc=c;this.v=2153807872;this.N=0}g=Io.prototype;g.Vc=t;
g.eb=function(){var a=this,b=a.rc;return null==b?Go(function(){return W(a.Ta,a.args)},a.Ta,a.args,this):C(b)};g.H=function(a,b){return b instanceof Io&&M.j(this.Ta,b.Ta)&&M.j(this.args,b.args)};g.S=function(){return ie(new X(null,2,5,Y,[this.Ta,this.args],null))};g.W=function(a,b,c){return Bo(this,b,c,"Track:")};function Jo(a,b,c,d,e){this.ia=a;this.path=b;this.rc=c;this.state=d;this.ra=e;this.v=2153807872;this.N=114690}g=Jo.prototype;
g._peek=function(){var a=ro;ro=null;try{return this.eb(null)}finally{ro=a}};g._set_state=function(a,b){if(a===b)return null;this.state=b;return null!=this.ra?Ao(this,a,b):null};g.Vc=t;g.W=function(a,b,c){return Bo(this,b,c,["Cursor: ",z.f(this.path)].join(""))};g.S=function(){return ie(new X(null,2,5,Y,[this.ia,this.path],null))};g.H=function(a,b){return b instanceof Jo&&M.j(this.path,b.path)&&M.j(this.ia,b.ia)};
g.Ba=function(a,b){this._set_state(this.state,b);(null!=this.ia?this.ia.v&32768||t===this.ia.Qd||(this.ia.v?0:x(od,this.ia)):x(od,this.ia))?M.j(this.path,Ue)?Lg(this.ia,b):Mg.F(this.ia,ah,this.path,b):this.ia.j?this.ia.j(this.path,b):this.ia.call(null,this.path,b);return b};g.Dc=function(a,b){var c=this;return c.Ba(null,function(){var d=c._peek();return b.f?b.f(d):b.call(null,d)}())};g.Ec=function(a,b,c){var d=this;return d.Ba(null,function(){var e=d._peek();return b.j?b.j(e,c):b.call(null,e,c)}())};
g.Fc=function(a,b,c,d){var e=this;return e.Ba(null,function(){var f=e._peek();return b.o?b.o(f,c,d):b.call(null,f,c,d)}())};g.Gc=function(a,b,c,d,e){return this.Ba(null,rg(b,this._peek(),c,d,e))};g.Hc=function(a,b){Ao(this,a,b)};g.fc=function(a,b,c){return yo(this,b,c)};g.gc=function(a,b){return zo(this,b)};
g.eb=function(){var a=this,b=this,c=a.state,d=function(){var e=a.rc;return null==e?(e=(null!=a.ia?a.ia.v&32768||t===a.ia.Qd||(a.ia.v?0:x(od,a.ia)):x(od,a.ia))?function(){return $g(C(a.ia),a.path)}:function(){return a.ia.f?a.ia.f(a.path):a.ia.call(null,a.path)},Go(e,a.ia,a.path,b)):C(e)}();b._set_state(c,d);return d};
var Ko=function Ko(a){if(null!=a&&null!=a.Ed)return a.Ed(a);var c=Ko[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=Ko._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("IDisposable.dispose!",a);},Lo=function Lo(a,b){if(null!=a&&null!=a.oe)return a.oe(a,b);var d=Lo[q(null==a?null:a)];if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);d=Lo._;if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);throw y("IDisposable.add-on-dispose!",a);};
function Mo(a,b,c,d){return a._handle_change(b,c,d)}function No(a,b,c,d,e,f,h,k){this.Ta=a;this.state=b;this.ob=c;this.de=d;this.Fb=e;this.ra=f;this.ab=h;this.jd=k;this.v=2153807872;this.N=114690}g=No.prototype;g._peek_at=function(){var a=ro;ro=null;try{return this.eb(null)}finally{ro=a}};
g._handle_change=function(a,b,c){return b===c||this.ob?null:null==this.ab?(this.ob=!0,null==Co&&(Co=[],!1===ko.Xc&&ko.schedule()),Co.push(this)):!0===this.ab?this._run(!1):this.ab.f?this.ab.f(this):this.ab.call(null,this)};
g._update_watching=function(a){var b=Vi(a),c=Vi(this.Fb);this.Fb=a;a=G(po.j(b,c));for(var d=null,e=0,f=0;;)if(f<e){var h=d.V(null,f);Id(h,this,Mo);f+=1}else if(a=G(a))d=a,of(d)?(a=Rd(d),f=Sd(d),d=a,e=P(a),a=f):(a=J(d),Id(a,this,Mo),a=K(d),d=null,e=0),f=0;else break;b=G(po.j(c,b));c=null;for(e=d=0;;)if(e<d)a=c.V(null,e),Jd(a,this),e+=1;else if(b=G(b))c=b,of(c)?(b=Rd(c),d=Sd(c),c=b,a=P(b),b=d,d=a):(a=J(c),Jd(a,this),b=K(c),c=null,d=0),e=0;else return null};
g._queued_run=function(){return this.ob&&null!=this.Fb?this._run(!0):null};g._try_capture=function(a){try{return this.jd=null,vo(a,this)}catch(b){return this.jd=this.state=a=b,this.ob=!1}};g._run=function(a){var b=this.state;a=w(a)?this._try_capture(this.Ta):vo(this.Ta,this);this.de||(this.state=a,null==this.ra||M.j(b,a)||Ao(this,b,a));return a};
g._set_opts=function(a){var b=null!=a&&(a.v&64||t===a.R)?W(Ii,a):a;a=D.j(b,ok);var c=D.j(b,Bm),d=D.j(b,tk);b=D.j(b,Mk);null!=a&&(this.ab=a);null!=c&&(this.lf=c);null!=d&&(this.ge=d);return null!=b?this.de=b:null};g.Vc=t;g.W=function(a,b,c){return Bo(this,b,c,["Reaction ",z.f(ie(this)),":"].join(""))};g.S=function(){return na(this)};g.H=function(a,b){return this===b};
g.Ed=function(){var a=this.state,b=this.Fb;this.ab=this.state=this.Fb=null;this.ob=!0;b=G(Vi(b));for(var c=null,d=0,e=0;;)if(e<d){var f=c.V(null,e);Jd(f,this);e+=1}else if(b=G(b))c=b,of(c)?(b=Rd(c),e=Sd(c),c=b,d=P(b),b=e):(b=J(c),Jd(b,this),b=K(c),c=null,d=0),e=0;else break;null!=this.ge&&this.ge(a);a=this.he;if(null==a)return null;b=a.length;for(c=0;;)if(c<b)d=a[c],d.f?d.f(this):d.call(null,this),c+=1;else return null};g.oe=function(a,b){a=this.he;return null==a?this.he=[b]:a.push(b)};
g.Ba=function(a,b){a=this.state;this.state=b;this.lf(a,b);Ao(this,a,b);return b};g.Dc=function(a,b){var c=this;return c.Ba(null,function(){var d=c._peek_at();return b.f?b.f(d):b.call(null,d)}())};g.Ec=function(a,b,c){var d=this;return d.Ba(null,function(){var e=d._peek_at();return b.j?b.j(e,c):b.call(null,e,c)}())};g.Fc=function(a,b,c,d){var e=this;return e.Ba(null,function(){var f=e._peek_at();return b.o?b.o(f,c,d):b.call(null,f,c,d)}())};
g.Gc=function(a,b,c,d,e){return this.Ba(null,rg(b,this._peek_at(),c,d,e))};g.Hc=function(a,b){Ao(this,a,b)};g.fc=function(a,b,c){return yo(this,b,c)};g.gc=function(a,b){a=gf(this.ra);zo(this,b);return!a&&gf(this.ra)&&null==this.ab?this.Ed(null):null};
g.eb=function(){var a=this.jd;if(null!=a)throw a;(a=null==ro)&&Do();a&&null==this.ab?this.ob&&(a=this.state,this.state=this.Ta.D?this.Ta.D():this.Ta.call(null),null==this.ra||M.j(a,this.state)||Ao(this,a,this.state)):(wo(this),this.ob&&this._run(!1));return this.state};
function Ho(a){for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;c=1<b.length?new I(b.slice(1),0,null):null;b=arguments[0];var e=null!=c&&(c.v&64||t===c.R)?W(Ii,c):c;c=D.j(e,ok);d=D.j(e,Bm);e=D.j(e,tk);b=new No(b,null,!0,!1,null,null,null,null);b._set_opts(new u(null,3,[ok,c,Bm,d,tk,e],null));return b}var Oo=Ho(null);
function Po(a,b){var c=Qo,d=Oo,e=vo(a,d);null!=d.Fb&&(Oo=Ho(null),d._set_opts(c),d.Ta=a,d.ab=function(){return lo.f?lo.f(b):lo.call(null,b)},b.cljsRatom=d);return e};var Ro={},So;function To(a,b){var c=b.argv;if(null==c){c=Y;a=a.constructor;a:for(var d=Ya(b),e=d.length,f=wg,h=0;;)if(h<e){var k=d[h];f=U.o(f,Xf.f(k),Za(b,k));h+=1}else break a;b=new X(null,2,5,c,[a,f],null)}else b=c;return b}function Uo(a){var b;if(b=$e(a))a=null==a?null:a.prototype,b=null!=(null==a?null:a.Fd);return b}if("undefined"===typeof On||"undefined"===typeof Sn||"undefined"===typeof Ro||"undefined"===typeof Vo)var Vo=null;
function Wo(a){for(;;){var b=a.Fd,c=!0===a.We?b.call(a,a):function(){var d=To(a,a.props);switch(P(d)){case 1:return b.call(a);case 2:return b.call(a,Ke(d,1));case 3:return b.call(a,Ke(d,1),Ke(d,2));case 4:return b.call(a,Ke(d,1),Ke(d,2),Ke(d,3));case 5:return b.call(a,Ke(d,1),Ke(d,2),Ke(d,3),Ke(d,4));default:return b.apply(a,Kc(d).slice(1))}}();if(nf(c))return Vo.f?Vo.f(c):Vo.call(null,c);if(uf(c))c=Uo(c)?function(d,e,f,h){return function(){function k(m){var n=null;if(0<arguments.length){n=0;for(var p=
Array(arguments.length-0);n<p.length;)p[n]=arguments[n+0],++n;n=new I(p,0,null)}return l.call(this,n)}function l(m){m=pg(Fh,h,m);return Vo.f?Vo.f(m):Vo.call(null,m)}k.J=0;k.K=function(m){m=G(m);return l(m)};k.A=l;return k}()}(a,b,null,c):c,a.Fd=c;else return c}}var Qo=new u(null,1,[Mk,!0],null),Xo=new u(null,1,[kk,function(){var a=this,b=Za(a,"cljsRatom");a.cljsIsDirty=!1;return null==b?Po(function(){a:{var c=So;So=a;try{var d=Wo(a);break a}finally{So=c}d=void 0}return d},a):b._run(!1)}],null);
function Yo(a,b){switch(a instanceof E?a.Ca:null){case "getDefaultProps":throw Error("getDefaultProps not supported");case "getDerivedStateFromProps":return function(c,d){return b.call(null,function(){var e=c.argv;null==e?e=c:(e=T(e,1,null),e=lf(e)?e:null);return e}(),d)};case "getInitialState":return function(c){var d=c.Ye;d=null!=d?d:c.Ye=Fo.f(null);return Lg(d,b.call(c,c))};case "getSnapshotBeforeUpdate":return function(c,d){return b.call(this,this,To(this,c),d)};case "componentWillReceiveProps":return function(c){return b.call(this,
this,To(this,c))};case "UNSAFE_componentWillReceiveProps":return function(c){return b.call(this,this,To(this,c))};case "shouldComponentUpdate":return function(c){var d=$n;if(w(d))return d;d=this.props.argv;var e=c.argv,f=null==d||null==e;if(null==b){if(f)return f;try{return!M.j(d,e)}catch(h){return!1}}else return f?b.call(this,this,To(this,this.props),To(this,c)):b.call(this,this,d,e)};case "componentWillUpdate":return function(c,d){return b.call(this,this,To(this,c),d)};case "UNSAFE_componentWillUpdate":return function(c,
d){return b.call(this,this,To(this,c),d)};case "componentDidUpdate":return function(c,d,e){return b.call(this,this,To(this,c),d,e)};case "componentWillMount":return function(){return b.call(this,this)};case "UNSAFE_componentWillMount":return function(){return b.call(this,this)};case "componentDidMount":return function(){return b.call(this,this)};case "componentWillUnmount":return function(){var c=Za(this,"cljsRatom");null!=c&&Ko(c);this.cljsIsDirty=!1;return null==b?null:b.call(this,this)};case "componentDidCatch":return function(c,
d){return b.call(this,this,c,d)};default:return null}}function Zo(a,b){a=Yo(a,b);return w(a)?a:b}var $o=new u(null,2,[ln,null,sl,null],null),ap=function(a){var b=Kg(wg);return function(c){var d=D.j(C(b),c);if(null!=d)return d;d=a.f?a.f(c):a.call(null,c);Mg.F(b,U,c,d);return d}}(function(a){if("string"===typeof a)return a;a=Yf(a);a=Gn(a,/(unsafe|UNSAFE)[-_]/,"UNSAFE_");a=Jn(a,/-/);var b=G(a);a=J(b);b=K(b);return pg(z,a,Z.j(Vn,b))});
function bp(a){return Gf(function(b,c,d){return U.o(b,Xf.f(ap.f?ap.f(c):ap.call(null,c)),d)},wg,a)}function cp(a){var b=function(){var f=vm.f(a);return w(f)?f:kk.f(a)}(),c=null==vm.f(a),d=function(){var f=cm.f(a);if(w(f))return f;f=Xn(b);return w(f)?f:z.f(Aj())}(),e=Gf(function(f,h,k){return U.o(f,h,Zo(h,k))},wg,a);return U.A(e,cm,d,S([qm,c,vm,b,kk,kk.f(Xo)]))}function dp(a){return Gf(function(b,c,d){c=Yf(c);b[c]=d;return b},{},a)}var Pi=new X(null,5,5,Y,[Fk,jn,tl,xl,gm],null);
function ep(a){function b(k,l,m){Dn.Component.call(this,k,l,m);w(h)&&(h.j?h.j(this,k):h.call(null,this,k));w(f)&&(this.state=f.f?f.f(this):f.call(null,this));this.Wd=bo+=1;return this}a=cp(Mi.A(S([$o,bp(a)])));var c=dp(sg(Ze,a,cm,Kk,Dk,S([kk,vm,Pi]))),d=dp(Oi(a)),e=cm.f(a),f=Kk.f(a),h=Dk.f(a);ab(b.prototype,Dn.Component.prototype,c);w(kk.f(a))&&(b.prototype.render=kk.f(a));w(vm.f(a))&&(b.prototype.Fd=vm.f(a));w(qm.f(a))&&(b.prototype.We=qm.f(a));ab(b,Dn.Component,d);w(e)&&(b.displayName=e,b.Mb=e,
b.pd=function(k){return Fd(k,e)});b.Ic=!0;return b.prototype.constructor=b};var fp={},gp=/([^\s\.#]+)(?:#([^\s\.#]+))?(?:\.([^\s#]+))?/;function hp(){this.tag=ip.default;this.className=this.id=null}var jp={"class":"className","for":"htmlFor",charset:"charSet"};function kp(a,b){return a.hasOwnProperty(b)?Za(a,b):null}function lp(a,b,c){if(Yn(b)){var d=kp(jp,Yf(b));null==d?(d=Wn(b),b=Yf(b),b=jp[b]=d):b=d}c=mp.f?mp.f(c):mp.call(null,c);a[b]=c;return a}
function mp(a){return"object"!==q(a)?a:Yn(a)?Yf(a):lf(a)?Gf(lp,{},a):hf(a)?Ej(a):uf(a)?function(){function b(d){var e=null;if(0<arguments.length){e=0;for(var f=Array(arguments.length-0);e<f.length;)f[e]=arguments[e+0],++e;e=new I(f,0,null)}return c.call(this,e)}function c(d){return W(a,d)}b.J=0;b.K=function(d){d=G(d);return c(d)};b.A=c;return b}():Ej(a)}var np={};function op(a,b,c){if(Yn(b)){var d=kp(np,Yf(b));null==d?(d=Wn(b),b=Yf(b),b=np[b]=d):b=d}c=mp(c);a[b]=c;return a}
function pp(a){return"object"!==q(a)?a:Yn(a)?Yf(a):lf(a)?Gf(op,{},a):hf(a)?Ej(a):uf(a)?function(){function b(d){var e=null;if(0<arguments.length){e=0;for(var f=Array(arguments.length-0);e<f.length;)f[e]=arguments[e+0],++e;e=new I(f,0,null)}return c.call(this,e)}function c(d){return W(a,d)}b.J=0;b.K=function(d){d=G(d);return c(d)};b.A=c;return b}():Ej(a)}if("undefined"===typeof On||"undefined"===typeof Sn||"undefined"===typeof fp||"undefined"===typeof qp)var qp=null;
var rp=new Si(null,new u(null,6,["url",null,"tel",null,"text",null,"textarea",null,"password",null,"search",null],null),null);
function sp(a,b,c,d){var e=wg;e=null!=e&&(e.v&64||t===e.R)?W(Ii,e):e;e=D.j(e,Vm);if(a===document.activeElement&&vf(rp,a.type)&&"string"===typeof b&&"string"===typeof c){var f=a.value;if(!M.j(f,c))return ko.add_after_render(function(){return tp.f?tp.f(d):tp.call(null,d)});c=P(f)-a.selectionStart;c=P(b)-c;d.Jc=b;a.value=b;$e(e)&&(e.f?e.f(b):e.call(null,b));a.selectionStart=c;return a.selectionEnd=c}d.Jc=b;a.value=b;return $e(e)?e.f?e.f(b):e.call(null,b):null}
function tp(a){if(w(a.rd)){a.Vd=!1;var b=a.Xe,c=a.Jc,d=qp.f?qp.f(a):qp.call(null,a);return M.j(b,c)?null:sp(d,b,c,a)}return null}function up(a,b,c){a.Jc=c.target.value;w(a.Vd)||(a.Vd=!0,ko.add_after_render(function(){return tp(a)}));return b.f?b.f(c):b.call(null,c)}
function vp(a){var b=So;if(w(null!=a?function(){var e=a.hasOwnProperty("onChange");return w(e)?a.hasOwnProperty("value"):e}():!1)){var c=a.value;c=null==c?"":c;var d=a.onChange;w(b.rd)||(b.rd=!0,b.Jc=c);b.Xe=c;delete a.value;a.defaultValue=c;a.onChange=function(e){return up(b,d,e)}}}var wp=null,yp=new u(null,4,[Dl,"ReagentInput",Pm,tp,Ll,function(a){return a.rd=null},al,function(a,b,c,d){vp(c);return xp.F?xp.F(a,b,c,d):xp.call(null,a,b,c,d)}],null);
function zp(a,b,c,d){this.tag=a;this.id=b;this.className=c;this.custom=d}function Ap(a){if(lf(a))try{var b=D.j(a,Wm)}catch(c){b=null}else b=null;return b}function Bp(a){var b=Ap(df(a));return null==b?Ap(T(a,1,null)):b}var Cp={};
function Dp(a,b,c){var d=a.tag,e=T(b,c,null),f=null==e||lf(e);e=f?e:null;var h=mm.f(e);e=w(h)?U.o(e,mm,Zn.f(h)):e;var k=a.id;h=a.className;k=null!=k&&null==on.f(e)?U.o(e,on,k):e;e=w(h)?U.o(k,mm,Zn.j(h,mm.f(e))):k;a=w(a.custom)?pp(e):mp(e);a=w(a)?a:{};c+=f?1:0;a:switch(d){case "input":case "textarea":f=!0;break a;default:f=!1}if(f)return f=Y,null==wp&&(wp=ep(yp)),b=cf(new X(null,5,5,f,[wp,b,d,a,c],null),df(b)),Ep.f?Ep.f(b):Ep.call(null,b);f=Ap(df(b));null!=f&&(a.key=f);return xp.F?xp.F(b,d,a,c):xp.call(null,
b,d,a,c)}
function Fp(a){for(;;){var b=T(a,0,null);if(Vf(Pk,b)){b=T(a,1,null);var c=null==b||lf(b);b=mp(c?b:null);b=w(b)?b:{};c=1+(c?1:0);var d=Bp(a);null!=d&&(b.key=d);return xp.F?xp.F(a,Dn.Fragment,b,c):xp.call(null,a,Dn.Fragment,b,c)}if(Yn(b)||"string"===typeof b)switch(b=Yf(b),c=b.indexOf("\x3e"),c){case -1:c=kp(Cp,b);if(null==c){var e=K(dj(gp,Yf(b)));c=T(e,0,null);d=T(e,1,null);e=T(e,2,null);e=null==e?null:Gn(e,/\./," ");var f=c.indexOf("-");f=!M.j(-1,f);c=new zp(c,d,e,f);b=Cp[b]=c}else b=c;return Dp(b,a,
1);case 0:return b=T(a,1,null),Dp(new zp(b,null,null,null),a,2);default:a=cf(new X(null,2,5,Y,[b.substring(0,c),U.o(cf(a,null),0,b.substring(c+1))],null),df(a))}else return b instanceof hp?a=Dp(b,a,1):(c=b.Xd,null==c?Uo(b)?b=b.Xd=b:(c=df(b),c=U.o(c,al,b),c=ep(c),b=b.Xd=c):b=c,c={},c.argv=a,a=Bp(a),null!=a&&(c.key=a),a=Dn.createElement(b,c)),a}}
function Ep(a){return"object"!==q(a)?a:nf(a)?Fp(a):rf(a)?Gp.f?Gp.f(a):Gp.call(null,a):Yn(a)?Yf(a):(null!=a?a.v&2147483648||t===a.ha||(a.v?0:x(Gd,a)):x(Gd,a))?uj(S([a])):a}Vo=Ep;function Gp(a){return Kc(Z.j(Ep,a))}function xp(a,b,c,d){switch(P(a)-d){case 0:return Dn.createElement(b,c);case 1:return a=Ep(T(a,d,null)),Dn.createElement(b,c,a);default:return Dn.createElement.apply(null,Gf(function(e,f,h){f>=d&&e.push(Ep(h));return e},[b,c],a))}};var Hp=Cn(14,{});var Ip={};if("undefined"===typeof On||"undefined"===typeof Ip||"undefined"===typeof Jp)var Jp=null;if("undefined"===typeof On||"undefined"===typeof Ip||"undefined"===typeof Kp)var Kp=Kg(wg);function Lp(a,b){var c=$n;$n=!0;try{var d=a.D?a.D():a.call(null);return Hp.render(d,b,function(){var e=$n;$n=!1;try{return Mg.F(Kp,U,b,new X(null,2,5,Y,[a,b],null)),ko.flush_after_render(),null}finally{$n=e}})}finally{$n=c}}qp=function(a){return Hp.findDOMNode(a)};function Mp(a){return ko.add_after_render(a)};function Np(){return Sb("iPhone")&&!Sb("iPod")&&!Sb("iPad")};var Op=Sb("Opera"),Pp=Sb("Trident")||Sb("MSIE"),Qp=Sb("Edge"),Rp=Sb("Gecko")&&!(vb("WebKit")&&!Sb("Edge"))&&!(Sb("Trident")||Sb("MSIE"))&&!Sb("Edge"),Sp=vb("WebKit")&&!Sb("Edge");Sp&&Sb("Mobile");Sb("Macintosh");Sb("Windows");Sb("Linux")||Sb("CrOS");var iu=ha.navigator||null;iu&&(iu.appVersion||"").indexOf("X11");Sb("Android");Np();Sb("iPad");Sb("iPod");Np()||Sb("iPad")||Sb("iPod");vb("KaiOS");vb("GAFP");function Up(){var a=ha.document;return a?a.documentMode:void 0}var Vp;
a:{var ru="",su=function(){var a=wb;if(Rp)return/rv:([^\);]+)(\)|;)/.exec(a);if(Qp)return/Edge\/([\d\.]+)/.exec(a);if(Pp)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Sp)return/WebKit\/(\S+)/.exec(a);if(Op)return/(?:Version)[ \/]?(\S+)/.exec(a)}();su&&(ru=su?su[1]:"");if(Pp){var tu=Up();if(null!=tu&&tu>parseFloat(ru)){Vp=String(tu);break a}}Vp=ru}var Ca={};
function Zp(a){return Ba(a,function(){for(var b=0,c=mb(String(Vp)).split("."),d=mb(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",k=d[f]||"";do{h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];k=/(\d*)(\D*)(.*)/.exec(k)||["","","",""];if(0==h[0].length&&0==k[0].length)break;b=xb(0==h[1].length?0:parseInt(h[1],10),0==k[1].length?0:parseInt(k[1],10))||xb(0==h[2].length,0==k[2].length)||xb(h[2],k[2]);h=h[3];k=k[3]}while(0==b)}return 0<=b})}var $p;
$p=ha.document&&Pp?Up():void 0;!Rp&&!Pp||Pp&&9<=Number($p)||Rp&&Zp("1.9.1");Pp&&Zp("9");function aq(a){var b=document;return"string"===typeof a?b.getElementById(a):a}function bq(a){var b=document;a=String(a);"application/xhtml+xml"===b.contentType&&(a=a.toLowerCase());return b.createElement(a)}function cq(a){return a.contentDocument||a.contentWindow.document};function dq(a,b,c){var d=a;b&&(d=sa(a,b));d=dq.wf(d);la(ha.setImmediate)&&(c||dq.uf())?ha.setImmediate(d):(dq.re||(dq.re=dq.df()),dq.re(d))}dq.uf=function(){return ha.Window&&ha.Window.prototype&&!Sb("Edge")&&ha.Window.prototype.setImmediate==ha.setImmediate?!1:!0};
dq.df=function(){var a=ha.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!Sb("Presto")&&(a=function(){var e=bq("IFRAME");e.style.display="none";e.src=lb(new ib(jb,fb(gb))).toString();document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.write(Vb(dc));e.close();var h="callImmediate"+Math.random(),k="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=sa(function(l){if(("*"==k||l.origin==
k)&&l.data==h)this.port1.onmessage()},this);f.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(h,k)}}});if("undefined"!==typeof a&&!Sb("Trident")&&!Sb("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var e=c.Pd;c.Pd=null;e()}};return function(e){d.next={Pd:e};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in bq("SCRIPT")?function(e){var f=bq("SCRIPT");f.onreadystatechange=
function(){f.onreadystatechange=null;f.parentNode.removeChild(f);f=null;e();e=null};document.documentElement.appendChild(f)}:function(e){ha.setTimeout(e,0)}};dq.wf=function(a){return a};var eq={},Gg=Fg.j(Rh,Ue);function fq(a){return null!=a?a.v&32768||t===a.Qd?!0:a.v?!1:x(od,a):x(od,a)}function gq(a,b){Lo(a,b)}function hq(a,b){setTimeout(a,b)}function iq(a){return null!=a&&t===a.Vc?[w(ke.j?ke.j(Eo,a):ke.call(null,Eo,a))?"ra":w(ke.j?ke.j(Jo,a):ke.call(null,Jo,a))?"rc":w(ke.j?ke.j(No,a):ke.call(null,No,a))?"rx":w(ke.j?ke.j(Io,a):ke.call(null,Io,a))?"tr":"other",z.f(ie(a))].join(""):null};var jq=Fo.f(wg);var kq=Kg(new u(null,6,[rk,console.log.bind(console),zm,console.warn.bind(console),vl,console.error.bind(console),Jl,console.debug.bind(console),Pl,w(console.group)?console.group.bind(console):console.log.bind(console),vn,w(console.groupEnd)?console.groupEnd.bind(console):function(){return qe}],null));function lq(a){for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;b=1<b.length?new I(b.slice(1),0,null):null;mq(arguments[0],b)}
function mq(a,b){var c=C(kq);a=a.f?a.f(c):a.call(null,c);return W(a,b)};var nq=function nq(a,b){var d=G(b);b=J(d);if(d=K(d)){var e=D.j(a,b);return w(e)?(d=nq.j?nq.j(e,d):nq.call(null,e,d),G(d)?U.o(a,b,d):Ze.j(a,b)):a}return Ze.j(a,b)};function oq(a){return nf(a)?J(a):mq(vl,S(["re-frame: expected a vector, but got:",a]))};var pq=Kg(wg);function qq(a,b){return D.j(D.j(C(pq),a),b)}function rq(a,b,c){Mg.F(pq,ah,new X(null,2,5,Y,[a,b],null),c);return c}var sq=function sq(a){switch(arguments.length){case 0:return sq.D();case 1:return sq.f(arguments[0]);case 2:return sq.j(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",z.f(arguments.length)].join(""));}};sq.D=function(){return Lg(pq,wg)};sq.f=function(a){return Mg.o(pq,Ze,a)};
sq.j=function(a,b){return w(qq(a,b))?Mg.A(pq,bh,new X(null,1,5,Y,[a],null),Ze,S([b])):mq(zm,S(["re-frame: can't clear",z.f(a),"handler for",[z.f(b),". Handler not found."].join("")]))};sq.J=2;var tq={};if("undefined"===typeof eq||"undefined"===typeof tq||"undefined"===typeof uq)var uq=Kg(Ue);if("undefined"===typeof eq||"undefined"===typeof tq||"undefined"===typeof vq)var vq=Kg(0);function wq(a){var b=null!=a&&(a.v&64||t===a.R)?W(Ii,a):a;a=D.j(b,on);var c=D.j(b,cl);b=D.j(b,$k);return new u(null,3,[on,w(a)?a:Rl,cl,c,$k,b],null)}function xq(a,b){return $g(a,new X(null,2,5,Y,[ym,b],null))}function yq(a,b){for(var c=a;;){var d=eh.f(c);if(gf(d))return c;a=ef(d);var e=tm.f(c);c=U.A(c,eh,null==d?null:ld(d),S([tm,Te.j(e,a)]));a=D.j(a,b);c=w(a)?a.f?a.f(c):a.call(null,c):c}};var zq=null;function Aq(a){var b=oq(a);b=qq(wl,b);if(w(b))if(w(zq))mq(vl,S(["re-frame: while handling",zq,", dispatch-sync was called for",a,". You can't call dispatch-sync within an event handler."]));else{var c=zq;zq=a;try{var d=ah(wg,new X(null,2,5,Y,[ym,wl],null),a);var e=dh(d,b);var f=yq(e,cl),h=Ze.j(f,eh),k=tm.f(f);var l=dh(h,k);yq(l,$k)}finally{zq=c}}};var Bq=Kg(wg);function Cq(){for(var a=G(C(Bq)),b=null,c=0,d=0;;)if(d<c){var e=b.V(null,d);T(e,0,null);e=T(e,1,null);Ko(e);d+=1}else if(a=G(a))of(a)?(c=Rd(a),a=Sd(a),b=c,c=P(c)):(b=J(a),T(b,0,null),b=T(b,1,null),Ko(b),a=K(a),b=null,c=0),d=0;else break;return w(tg(C(Bq)))?mq(zm,S(["Subscription cache should be empty after clearing it."])):null}
function Dq(a,b,c){var d=new X(null,2,5,Y,[a,b],null);gq(c,function(){return Mg.j(Bq,function(e){return vf(e,d)&&c===D.j(e,d)?Ze.j(e,d):e})});Mg.j(Bq,function(e){return U.o(e,d,c)});return c}function Eq(a,b){return D.j(C(Bq),new X(null,2,5,Y,[a,b],null))}var Fq=function Fq(a){switch(arguments.length){case 1:return Fq.f(arguments[0]);case 2:return Fq.j(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",z.f(arguments.length)].join(""));}};
Fq.f=function(a){var b=Eq(a,Ue);if(w(b))return b;var c=oq(a);b=qq(Sm,c);return null==b?mq(vl,S([["re-frame: no subscription handler registered for: ",z.f(c),". Returning a nil subscription."].join("")])):Dq(a,Ue,b.j?b.j(jq,a):b.call(null,jq,a))};
Fq.j=function(a,b){var c=Eq(a,b);if(w(c))return c;c=oq(a);var d=qq(Sm,c);if(null==d)return mq(vl,S([["re-frame: no subscription handler registered for: ",z.f(c),". Returning a nil subscription."].join("")]));var e=Ho(function(){return Yg(b)});var f=Ho(function(){var h=C(e);return d.o?d.o(jq,a,h):d.call(null,jq,a,h)});return Dq(a,b,Ho(function(){return C(C(f))}))};Fq.J=2;
function Gq(a){return Fg.o(We(a),Z.f(function(b){var c=T(b,0,null);b=T(b,1,null);return new X(null,2,5,Y,[c,Ce.f?Ce.f(b):Ce.call(null,b)],null)}),a)}function Hq(a,b){var c=kf(a)?Z.j(Ce,a):lf(a)?Gq(a):fq(a)?Ce.f?Ce.f(a):Ce.call(null,a):qe;kf(a)?Z.j(Ce,a):lf(a)?Gq(a):fq(a)?C(a):mq(vl,S(["re-frame: in the reg-sub for",b,", the input-signals function returns:",a]));return c}
function Iq(a){for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;b=1<b.length?new I(b.slice(1),0,null):null;return Jq(arguments[0],b)}
function Jq(a,b){var c=Se(b),d=Wi(b),e=["re-frame: reg-sub for ",z.f(a),", "].join(""),f=function(){switch(P(d)){case 0:return function(){var n=null;n=function(p,r){switch(arguments.length){case 1:return jq;case 2:return jq}throw Error("Invalid arity: "+arguments.length);};n.f=function(){return jq};n.j=function(){return jq};return n}();case 1:var h=J(d);$e(h)||mq(vl,S([e,"2nd argument expected to be an inputs function, got:",h]));return h;case 2:h=T(d,0,null);var k=T(d,1,null);M.j(Jk,h)||mq(vl,S([e,
"expected :\x3c-, got:",h]));return function(){function n(){return Fq.f(k)}function p(){return Fq.f(k)}var r=null;r=function(v,B){switch(arguments.length){case 1:return p.call(this,v);case 2:return n.call(this,v,B)}throw Error("Invalid arity: "+arguments.length);};r.f=p;r.j=n;return r}();default:h=Zg(2,2,d);var l=Z.j(J,h),m=Z.j(Se,h);Ag(new Si(null,new u(null,1,[Jk,null],null),null),l)&&Ag(nf,m)||mq(vl,S([e,"expected pairs of :\x3c- and vectors, got:",h]));return function(){function n(){return Z.j(Fq,
m)}function p(){return Z.j(Fq,m)}var r=null;r=function(v,B){switch(arguments.length){case 1:return p.call(this,v);case 2:return n.call(this,v,B)}throw Error("Invalid arity: "+arguments.length);};r.f=p;r.j=n;return r}()}}();return rq(Sm,a,function(){function h(m,n,p){var r=f.j?f.j(n,p):f.call(null,n,p);m=Kg(null);var v=Ho(function(){var B=Hq(r,a);return c.o?c.o(B,n,p):c.call(null,B,n,p)});Lg(m,iq(v));return v}function k(m,n){var p=f.f?f.f(n):f.call(null,n);m=Kg(null);var r=Ho(function(){var v=Hq(p,
a);return c.j?c.j(v,n):c.call(null,v,n)});Lg(m,iq(r));return r}var l=null;l=function(m,n,p){switch(arguments.length){case 2:return k.call(this,m,n);case 3:return h.call(this,m,n,p)}throw Error("Invalid arity: "+arguments.length);};l.j=k;l.o=h;return l}())};var Kq=new u(null,2,[Rm,function(a){function b(){return dq.f?dq.f(a):dq.call(null,a)}return Mp.f?Mp.f(b):Mp.call(null,b)},gn,dq],null);function Lq(a){for(var b=P(a.queue);;){if(0===b)return Mq(a,Sk,null);var c=Bg(Kq,ai(df(ef(a.queue))));if(w(c))return Mq(a,Nl,c);Nq(a);--b}}function Oq(a){function b(){return Mq(a,sn,null)}return dq.f?dq.f(b):dq.call(null,b)}
function Mq(a,b,c){var d=function(){var f=new X(null,2,5,Y,[a.Mc,b],null);if(M.j(new X(null,2,5,Y,[fk,ml],null),f))return new X(null,2,5,Y,[ul,function(){a.queue=Te.j(a.queue,c);return Oq(a)}],null);if(M.j(new X(null,2,5,Y,[km,Rk],null),f))return new X(null,2,5,Y,[fk,function(){a.queue=Gg;throw c;}],null);if(M.j(new X(null,2,5,Y,[km,Sk],null),f))return gf(a.queue)?new X(null,1,5,Y,[fk],null):new X(null,2,5,Y,[ul,function(){return Oq(a)}],null);if(M.j(new X(null,2,5,Y,[km,Nl],null),f))return new X(null,
2,5,Y,[Om,function(){return Pq(a,c)}],null);if(M.j(new X(null,2,5,Y,[Om,Hl],null),f))return new X(null,2,5,Y,[km,function(){Nq(a);return Lq(a)}],null);if(M.j(new X(null,2,5,Y,[ul,sn],null),f))return new X(null,2,5,Y,[km,function(){return Lq(a)}],null);if(M.j(new X(null,2,5,Y,[Om,ml],null),f))return new X(null,2,5,Y,[Om,function(){return a.queue=Te.j(a.queue,c)}],null);if(M.j(new X(null,2,5,Y,[km,ml],null),f))return new X(null,2,5,Y,[km,function(){return a.queue=Te.j(a.queue,c)}],null);if(M.j(new X(null,
2,5,Y,[ul,ml],null),f))return new X(null,2,5,Y,[ul,function(){return a.queue=Te.j(a.queue,c)}],null);throw ck(["re-frame: router state transition not found. ",z.f(a.Mc)," ",z.f(b)].join(""),new u(null,2,[Ck,a.Mc,dl,b],null));}();var e=T(d,0,null);d=T(d,1,null);a.Mc=e;return w(d)?d.D?d.D():d.call(null):null}function Pq(a,b){function c(){return Mq(a,Hl,null)}return b.f?b.f(c):b.call(null,c)}
function Nq(a){var b=ef(a.queue);try{Aq(b);var c=a.queue;var d=null==c?null:ld(c);a.queue=d;Qq(a,b)}catch(e){Mq(a,Rk,e)}}function Qq(a,b){for(var c=G(bi(a.pf)),d=null,e=0,f=0;;)if(f<e){var h=d.V(null,f);h.j?h.j(b,a.queue):h.call(null,b,a.queue);f+=1}else if(c=G(c))d=c,of(d)?(c=Rd(d),e=Sd(d),d=c,h=P(c),c=e,e=h):(h=J(d),h.j?h.j(b,a.queue):h.call(null,b,a.queue),c=K(d),d=null,e=0),f=0;else break}var Rq=new function(a,b,c){this.Mc=a;this.queue=b;this.pf=c}(fk,Gg,wg);
function Sq(a){if(null==a)throw new bk('re-frame: you called "dispatch" without an event vector.',wg);Mq(Rq,ml,a);return null}function Tq(a){Aq(a);Qq(Rq,a);return null};function Uq(a,b){return rq(Km,a,b)}
var Vq=wq(S([on,zl,$k,function(a){for(var b,c=G(yl.f(a)),d=null,e=0,f=0;;)if(f<e){a=d.V(null,f);b=T(a,0,null);a=T(a,1,null);var h=qq(Km,b);w(h)?(b=h,b.f?b.f(a):b.call(null,a)):mq(vl,S(["re-frame: no handler registered for effect:",b,". Ignoring."]));f+=1}else if(a=G(c))c=a,of(c)?(b=Rd(c),c=Sd(c),a=b,b=P(b),d=a,e=b):(a=J(c),b=T(a,0,null),a=T(a,1,null),d=qq(Km,b),w(d)?(b=d,b.f?b.f(a):b.call(null,a)):mq(vl,S(["re-frame: no handler registered for effect:",b,". Ignoring."])),c=K(c),d=null,e=0),f=0;else return null}]));
Uq(Wk,function(a){a=G(Vg(Dc,a));for(var b=null,c=0,d=0;;)if(d<c){var e=b.V(null,d),f=null!=e&&(e.v&64||t===e.R)?W(Ii,e):e,h=f,k=D.j(f,jk),l=D.j(f,pm);gf(l)||"number"!==typeof k?mq(vl,S(["re-frame: ignoring bad :dispatch-later value:",h])):hq(function(p,r,v,B,F,H,O,V,ca){return function(){return Sq(ca)}}(a,b,c,d,e,f,h,k,l),k);d+=1}else if(f=G(a)){e=f;if(of(e))a=Rd(e),d=Sd(e),b=a,c=P(a),a=d;else{var m=J(e),n=null!=m&&(m.v&64||t===m.R)?W(Ii,m):m;h=n;k=D.j(n,jk);l=D.j(n,pm);gf(l)||"number"!==typeof k?
mq(vl,S(["re-frame: ignoring bad :dispatch-later value:",h])):hq(function(p,r,v,B,F,H,O,V,ca){return function(){return Sq(ca)}}(a,b,c,d,m,n,h,k,l,e,f),k);a=K(e);b=null;c=0}d=0}else return null});Uq(pm,function(a){return nf(a)?Sq(a):mq(vl,S(["re-frame: ignoring bad :dispatch value. Expected a vector, but got:",a]))});
Uq(Lm,function(a){if(kf(a)){a=G(Vg(Dc,a));for(var b=null,c=0,d=0;;)if(d<c){var e=b.V(null,d);Sq(e);d+=1}else if(a=G(a))b=a,of(b)?(a=Rd(b),c=Sd(b),b=a,e=P(a),a=c,c=e):(e=J(b),Sq(e),a=K(b),b=null,c=0),d=0;else return null}else return mq(vl,S(["re-frame: ignoring bad :dispatch-n value. Expected a collection, but got:",a]))});
Uq(hn,function(a){var b=Dg.j(sq,wl);if(kf(a)){a=G(a);for(var c=null,d=0,e=0;;)if(e<d){var f=c.V(null,e);b.f?b.f(f):b.call(null,f);e+=1}else if(a=G(a))c=a,of(c)?(a=Rd(c),d=Sd(c),c=a,f=P(a),a=d,d=f):(f=J(c),b.f?b.f(f):b.call(null,f),a=K(c),c=null,d=0),e=0;else return null}else return b.f?b.f(a):b.call(null,a)});Uq(Xm,function(a){return C(jq)!==a?Lg(jq,a):null});rq(Fm,Xm,function(a){return U.o(a,Xm,C(jq))});var Wq=function(a){return wq(S([on,ym,cl,function(b){var c=qq(Fm,a);return w(c)?ch(b,ym,c):mq(vl,S(["No cofx handler registered for",a]))}]))}(Xm);function Xq(a,b){return M.j(a,b)?new X(null,3,5,Y,[null,null,a],null):new X(null,3,5,Y,[a,b,null],null)}function Yq(a){return G(a)?Lc(function(b,c){var d=T(c,0,null);c=T(c,1,null);return U.o(b,d,c)},Bh(Rg(W(Lf,ai(a)))),a):null}function Zq(a,b,c){var d=D.j(a,c),e=D.j(b,c),f=$q(d,e),h=T(f,0,null),k=T(f,1,null);f=T(f,2,null);a=vf(a,c);b=vf(b,c);d=a&&b&&(null!=f||null==d&&null==e);return new X(null,3,5,Y,[!a||null==h&&d?null:Ye([c,h]),!b||null==k&&d?null:Ye([c,k]),d?Ye([c,f]):null],null)}
var ar=function ar(a){switch(arguments.length){case 2:return ar.j(arguments[0],arguments[1]);case 3:return ar.o(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length)].join(""));}};ar.j=function(a,b){return ar.o(a,b,no(ai(a),ai(b)))};ar.o=function(a,b,c){return Lc(function(d,e){return cj(Z.o(Mi,d,e))},new X(null,3,5,Y,[null,null,null],null),Z.j(Dg.o(Zq,a,b),c))};ar.J=3;
function br(a,b){return Bh(Z.j(Yq,ar.o(nf(a)?a:Bh(a),nf(b)?b:Bh(b),bj(function(){var c=P(a),d=P(b);return c>d?c:d}()))))}function cr(a,b){return new X(null,3,5,Y,[tg(po.j(a,b)),tg(po.j(b,a)),tg(oo.j(a,b))],null)}
var dr=function dr(a){if(null!=a&&null!=a.$e)return a.$e(a);var c=dr[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=dr._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("EqualityPartition.equality-partition",a);},er=function er(a,b){if(null!=a&&null!=a.Ze)return a.Ze(a,b);var d=er[q(null==a?null:a)];if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);d=er._;if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);throw y("Diff.diff-similar",a);};dr["null"]=function(){return wn};
dr.string=function(){return wn};dr.number=function(){return wn};dr.array=function(){return Jm};dr["function"]=function(){return wn};dr["boolean"]=function(){return wn};dr._=function(a){return(null!=a?a.v&1024||t===a.Oe||(a.v?0:x(ed,a)):x(ed,a))?dm:(null!=a?a.v&4096||t===a.Ve||(a.v?0:x(id,a)):x(id,a))?ll:(null!=a?a.v&16777216||t===a.od||(a.v?0:x(Ad,a)):x(Ad,a))?Jm:wn};er["null"]=function(a,b){return Xq(a,b)};er.string=function(a,b){return Xq(a,b)};er.number=function(a,b){return Xq(a,b)};
er.array=function(a,b){return br(a,b)};er["function"]=function(a,b){return Xq(a,b)};er["boolean"]=function(a,b){return Xq(a,b)};er._=function(a,b){var c=function(){var d=dr(a);d=d instanceof E?d.Ca:null;switch(d){case "atom":return Xq;case "set":return cr;case "sequential":return br;case "map":return ar;default:throw Error(["No matching clause: ",z.f(d)].join(""));}}();return c.j?c.j(a,b):c.call(null,a,b)};
function $q(a,b){return M.j(a,b)?new X(null,3,5,Y,[null,null,a],null):M.j(dr(a),dr(b))?er(a,b):Xq(a,b)};wq(S([on,Jl,cl,function(a){mq(rk,S(["Handling re-frame event:",xq(a,wl)]));return a},$k,function(a){var b=xq(a,wl),c=xq(a,Xm);a:{var d=qf;for(var e=a,f=G(new X(null,2,5,Y,[yl,Xm],null));;)if(null!=f){e=D.o(e,J(f),d);if(d===e){d=dn;break a}f=K(f)}else{d=e;break a}}M.j(d,dn)?mq(rk,S(["No app-db changes in:",b])):(d=$q(c,d),c=T(d,0,null),d=T(d,1,null),null!=c||null!=d?(mq(Pl,S(["db clojure.data/diff for:",b])),mq(rk,S(["only before:",c])),mq(rk,S(["only after :",d])),lq(vn)):mq(rk,S(["No app-db changes resulted from:",
b])));return a}]));wq(S([on,Nm,cl,function(a){return ah(bh.F(a,new X(null,2,5,Y,[ym,wl],null),Kh,1),new X(null,2,5,Y,[ym,xm],null),xq(a,wl))},$k,function(a){return ah(nq(a,new X(null,2,5,Y,[ym,xm],null)),new X(null,2,5,Y,[ym,wl],null),xq(a,xm))}]));function fr(a){return wq(S([on,Ul,cl,function(b){var c=ym.f(b),d=null!=c&&(c.v&64||t===c.R)?W(Ii,c):c;c=D.j(d,Xm);d=D.j(d,wl);c=a.j?a.j(c,d):a.call(null,c,d);return ah(b,new X(null,2,5,Y,[yl,Xm],null),c)}]))};Dg.j(sq,Sm);Dg.j(sq,Km);Dg.j(sq,Fm);var gr=function gr(a){switch(arguments.length){case 2:return gr.j(arguments[0],arguments[1]);case 3:return gr.o(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.f(arguments.length)].join(""));}};gr.j=function(a,b){return gr.o(a,null,b)};gr.o=function(a,b,c){b=new X(null,4,5,Y,[Wq,Vq,b,fr(c)],null);return rq(wl,a,Vg(Dc,Xg(b)))};gr.J=3;Dg.j(sq,wl);var hr=new u(null,1,[wm,"coronavirus-charts"],null);var ir=function ir(a,b,c){if(null!=a&&null!=a.ad)return a.ad(a,b,c);var e=ir[q(null==a?null:a)];if(null!=e)return e.o?e.o(a,b,c):e.call(null,a,b,c);e=ir._;if(null!=e)return e.o?e.o(a,b,c):e.call(null,a,b,c);throw y("AjaxImpl.-js-ajax-request",a);},jr=function jr(a){if(null!=a&&null!=a.ed)return a.ed(a);var c=jr[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=jr._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("AjaxResponse.-status",a);},kr=function kr(a){if(null!=a&&null!=a.fd)return a.fd(a);
var c=kr[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=kr._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("AjaxResponse.-status-text",a);},lr=function lr(a){if(null!=a&&null!=a.bd)return a.bd(a);var c=lr[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=lr._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("AjaxResponse.-body",a);},mr=function mr(a,b){if(null!=a&&null!=a.cd)return a.cd(a,b);var d=mr[q(null==a?null:a)];if(null!=d)return d.j?d.j(a,b):d.call(null,
a,b);d=mr._;if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);throw y("AjaxResponse.-get-response-header",a);},nr=function nr(a){if(null!=a&&null!=a.hd)return a.hd(a);var c=nr[q(null==a?null:a)];if(null!=c)return c.f?c.f(a):c.call(null,a);c=nr._;if(null!=c)return c.f?c.f(a):c.call(null,a);throw y("AjaxResponse.-was-aborted",a);},or=function or(a,b){if(null!=a&&null!=a.Zb)return a.Zb(a,b);var d=or[q(null==a?null:a)];if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);d=or._;if(null!=d)return d.j?d.j(a,b):
d.call(null,a,b);throw y("Interceptor.-process-request",a);},pr=function pr(a,b){if(null!=a&&null!=a.$b)return a.$b(a,b);var d=pr[q(null==a?null:a)];if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);d=pr._;if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);throw y("Interceptor.-process-response",a);};function qr(a){throw Error(z.f(a));}var rr=new Si(null,new u(null,7,[206,null,204,null,304,null,1223,null,201,null,202,null,200,null],null),null);function sr(a){return a instanceof E?Yf(a):a}var tr=encodeURIComponent;function ur(a){var b=T(a,0,null);a=T(a,1,null);return[z.f(sr(b)),"\x3d",z.f(tr.f?tr.f(a):tr.call(null,a))].join("")}function vr(a){return function(b,c){return new X(null,2,5,Y,[a.f?a.f(b):a.call(null,b),c],null)}}
function wr(a){var b=function(){var c=w(a)?a:Am;c=c instanceof E?c.Ca:null;switch(c){case "java":return function(){return null};case "rails":return function(){return""};case "indexed":return Hf;default:throw Error(["No matching clause: ",z.f(c)].join(""));}}();return vr(b)}
function xr(a,b){var c=T(b,0,null);b=T(b,1,null);var d=sr(c);c=w(null)?w(c)?[z.f(null),"[",z.f(d),"]"].join(""):null:d;d=yr(a,c);return"string"===typeof b?new X(null,1,5,Y,[new X(null,2,5,Y,[c,b],null)],null):b instanceof E?new X(null,1,5,Y,[new X(null,2,5,Y,[c,Yf(b)],null)],null):lf(b)?Tg(d,S([G(b)])):kf(b)?Tg(d,S([Hg(a,G(b))])):new X(null,1,5,Y,[new X(null,2,5,Y,[c,b],null)],null)}
function yr(a,b){return function(c){var d=T(c,0,null);c=T(c,1,null);var e=sr(d);d=w(b)?w(d)?[z.f(b),"[",z.f(e),"]"].join(""):b:e;e=yr(a,d);return"string"===typeof c?new X(null,1,5,Y,[new X(null,2,5,Y,[d,c],null)],null):c instanceof E?new X(null,1,5,Y,[new X(null,2,5,Y,[d,Yf(c)],null)],null):lf(c)?Tg(e,S([G(c)])):kf(c)?Tg(e,S([Hg(a,G(c))])):new X(null,1,5,Y,[new X(null,2,5,Y,[d,c],null)],null)}}function zr(a,b){return Hn("\x26",Z.j(ur,xr(wr(a),new X(null,2,5,Y,[null,b],null))))};var Ar="undefined"!=typeof Object.keys?function(a){return Object.keys(a)}:function(a){return Ya(a)},Br="undefined"!=typeof Array.isArray?function(a){return Array.isArray(a)}:function(a){return"array"===q(a)};function Cr(){Math.round(15*Math.random()).toString(16)};var Dr=1;function Er(a,b){if(null==a)return null==b;if(a===b)return!0;if("object"===typeof a){if(Br(a)){if(Br(b)&&a.length===b.length){for(var c=0;c<a.length;c++)if(!Er(a[c],b[c]))return!1;return!0}return!1}if(a.hc)return a.hc(b);if(null!=b&&"object"===typeof b){if(b.hc)return b.hc(a);c=0;var d=Ar(b).length,e;for(e in a)if(a.hasOwnProperty(e)&&(c++,!b.hasOwnProperty(e)||!Er(a[e],b[e])))return!1;return c===d}}return!1}function Fr(a,b){return a^b+2654435769+(a<<6)+(a>>2)}var Gr={},Hr=0;
function Ir(a){var b=0;if(null!=a.forEach)a.forEach(function(h,k){b=(b+(Jr(k)^Jr(h)))%4503599627370496});else for(var c=Ar(a),d=0;d<c.length;d++){var e=c[d],f=a[e];b=(b+(Jr(e)^Jr(f)))%4503599627370496}return b}function Kr(a){var b=0;if(Br(a))for(var c=0;c<a.length;c++)b=Fr(b,Jr(a[c]));else a.forEach&&a.forEach(function(d){b=Fr(b,Jr(d))});return b}
function Jr(a){if(null==a)return 0;switch(typeof a){case "number":return a;case "boolean":return!0===a?1:0;case "string":var b=Gr[a];if(null!=b)a=b;else{for(var c=b=0;c<a.length;++c)b=31*b+a.charCodeAt(c),b%=4294967296;Hr++;256<=Hr&&(Gr={},Hr=1);a=Gr[a]=b}return a;case "function":return b=a.transit$hashCode$,b||(b=Dr,"undefined"!=typeof Object.defineProperty?Object.defineProperty(a,"transit$hashCode$",{value:b,enumerable:!1}):a.transit$hashCode$=b,Dr++),b;default:return a instanceof Date?a.valueOf():
Br(a)?Kr(a):a.sd?a.sd():Ir(a)}};La("9007199254740991");La("-9007199254740991");Da.prototype.equiv=function(a){return Er(this,a)};Da.prototype.equiv=Da.prototype.equiv;Da.prototype.hc=function(a){return a instanceof Da&&this.equals(a)};Da.prototype.sd=function(){return this.ea};Date.prototype.hc=function(a){return a instanceof Date?this.valueOf()===a.valueOf():!1};Date.prototype.sd=function(){return this.valueOf()};(8|3&Math.round(14*Math.random())).toString(16);Cr();Cr();Cr();Cr();Cr();Cr();Cr();Cr();Cr();Cr();Cr();Cr();Cr();Cr();Cr();Cr();Cr();Cr();Cr();Cr();Cr();Cr();Cr();Cr();Cr();Cr();Cr();Cr();Cr();Cr();Da.prototype.H=function(a,b){return this.equiv(b)};Da.prototype.Me=t;Da.prototype.S=function(){return Jr(this)};var Lr=function Lr(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=3<c.length?new I(c.slice(3),0,null):null;return Lr.A(arguments[0],arguments[1],arguments[2],c)};Lr.A=function(a,b,c,d){return new X(null,2,5,Y,[!1,Lc(Te,new u(null,3,[Gk,a,Bk,b,lm,c],null),Z.j(Bh,Zg(2,2,d)))],null)};Lr.J=3;Lr.K=function(a){var b=J(a),c=K(a);a=J(c);var d=K(c);c=J(d);d=K(d);return this.A(b,a,c,d)};function Mr(a){return Hn(", ","string"===typeof a?new X(null,1,5,Y,[a],null):a)}
function Nr(a,b,c,d,e,f){this.read=a;this.description=b;this.bb=c;this.la=d;this.O=e;this.C=f;this.v=2230716170;this.N=139264}g=Nr.prototype;g.na=function(a,b){return this.T(null,b,null)};g.T=function(a,b,c){switch(b instanceof E?b.Ca:null){case "read":return this.read;case "description":return this.description;case "content-type":return this.bb;default:return D.o(this.O,b,c)}};
g.fb=function(a,b,c){return Lc(function(d,e){var f=T(e,0,null);e=T(e,1,null);return b.o?b.o(d,f,e):b.call(null,d,f,e)},c,this)};g.Zb=function(a,b){a=null!=a&&(a.v&64||t===a.R)?W(Ii,a):a;D.j(a,qk);a=null!=this&&(this.v&64||t===this.R)?W(Ii,this):this;var c=D.j(a,qk);return ch(b,wk,function(d){return Mi.A(S([new u(null,1,["Accept",Mr(c)],null),w(d)?d:wg]))})};
g.$b=function(a,b){a=null!=a&&(a.v&64||t===a.R)?W(Ii,a):a;D.j(a,em);a=null!=this&&(this.v&64||t===this.R)?W(Ii,this):this;var c=D.j(a,em);try{var d=jr(b),e=Dg.j(Lr,d);switch(d){case 0:return e.j?e.j("Request failed.",gl):e.call(null,"Request failed.",gl);case -1:return w(nr(b))?e.j?e.j("Request aborted by client.",Um):e.call(null,"Request aborted by client.",Um):e.j?e.j("Request timed out.",lk):e.call(null,"Request timed out.",lk);case 204:return new X(null,2,5,Y,[!0,null],null);case 205:return new X(null,
2,5,Y,[!0,null],null);default:try{var f=c.f?c.f(b):c.call(null,b);if(vf(rr,d))return new X(null,2,5,Y,[!0,f],null);var h=kr(b);return e.F?e.F(h,vl,fn,f):e.call(null,h,vl,fn,f)}catch(v){if(v instanceof Object){f=v;e=Y;var k=null!=a&&(a.v&64||t===a.R)?W(Ii,a):a,l=D.j(k,Ik),m=new u(null,3,[Gk,d,lm,vl,fn,null],null),n=[z.f(f.message),"  Format should have been ",z.f(l)].join(""),p=U.A(m,Bk,n,S([lm,Tk,nk,lr(b)]));var r=vf(rr,d)?p:U.A(m,Bk,kr(b),S([Nk,p]));return new X(null,2,5,e,[!1,r],null)}throw v;}}}catch(v){if(v instanceof
Object)return f=v,Lr.A(0,f.message,Rk,S([Rk,f]));throw v;}};g.W=function(a,b,c){return ij(b,function(d){return ij(b,pj,""," ","",c,d)},"#ajax.interceptors.ResponseFormat{",", ","}",c,hg.j(new X(null,3,5,Y,[new X(null,2,5,Y,[em,this.read],null),new X(null,2,5,Y,[Ik,this.description],null),new X(null,2,5,Y,[qk,this.bb],null)],null),this.O))};g.xa=function(){return new Vh(this,3,new X(null,3,5,Y,[em,Ik,qk],null),w(this.O)?Yd(this.O):ug())};g.Z=function(){return this.la};g.Y=function(){return 3+P(this.O)};
g.S=function(){var a=this.C;return null!=a?a:this.C=a=-2103965186^we(this)};g.H=function(a,b){return null!=b&&this.constructor===b.constructor&&M.j(this.read,b.read)&&M.j(this.description,b.description)&&M.j(this.bb,b.bb)&&M.j(this.O,b.O)};g.sb=function(a,b){return vf(new Si(null,new u(null,3,[Ik,null,em,null,qk,null],null),null),b)?Ze.j(rd(Fg.j(wg,this),this.la),b):new Nr(this.read,this.description,this.bb,this.la,tg(Ze.j(this.O,b)),null)};
g.Aa=function(a,b,c){return w(Vf.j?Vf.j(em,b):Vf.call(null,em,b))?new Nr(c,this.description,this.bb,this.la,this.O,null):w(Vf.j?Vf.j(Ik,b):Vf.call(null,Ik,b))?new Nr(this.read,c,this.bb,this.la,this.O,null):w(Vf.j?Vf.j(qk,b):Vf.call(null,qk,b))?new Nr(this.read,this.description,c,this.la,this.O,null):new Nr(this.read,this.description,this.bb,this.la,U.o(this.O,b,c),null)};g.$=function(){return G(hg.j(new X(null,3,5,Y,[new uh(em,this.read),new uh(Ik,this.description),new uh(qk,this.bb)],null),this.O))};
g.aa=function(a,b){return new Nr(this.read,this.description,this.bb,b,this.O,this.C)};g.da=function(a,b){return nf(b)?this.Aa(null,Wc.j(b,0),Wc.j(b,1)):Lc(Uc,this,b)};function Or(a){var b=Ze.A(a,em,S([Ik,qk]));b=mf(a)?Fg.j(wg,b):b;return new Nr(em.f(a),Ik.f(a),qk.f(a),null,tg(b),null)}function Pr(a,b,c){this.la=a;this.O=b;this.C=c;this.v=2230716170;this.N=139264}g=Pr.prototype;g.na=function(a,b){return this.T(null,b,null)};g.T=function(a,b,c){return D.o(this.O,b,c)};
g.fb=function(a,b,c){return Lc(function(d,e){var f=T(e,0,null);e=T(e,1,null);return b.o?b.o(d,f,e):b.call(null,d,f,e)},c,this)};
g.Zb=function(a,b){a=null!=b&&(b.v&64||t===b.R)?W(Ii,b):b;D.j(a,hm);D.j(a,xk);var c=D.j(a,Ol),d=D.j(a,un);b=D.j(a,wk);var e=lf(c)?c:c instanceof E?qr(new X(null,2,5,Y,["keywords are not allowed as request formats in ajax calls: ",c],null)):uf(c)?new u(null,2,[Ak,c,qk,"text/plain"],null):wg;e=null!=e&&(e.v&64||t===e.R)?W(Ii,e):e;var f=D.j(e,Ak);e=D.j(e,qk);c=null!=f?f.f?f.f(d):f.call(null,d):qr(new X(null,2,5,Y,["unrecognized request format: ",c],null));b=w(b)?b:wg;return U.A(a,fm,c,S([wk,w(e)?U.o(b,
"Content-Type",Mr(e)):b]))};g.$b=function(a,b){return b};g.W=function(a,b,c){return ij(b,function(d){return ij(b,pj,""," ","",c,d)},"#ajax.interceptors.ApplyRequestFormat{",", ","}",c,hg.j(Ue,this.O))};g.xa=function(){return new Vh(this,0,Ue,w(this.O)?Yd(this.O):ug())};g.Z=function(){return this.la};g.Y=function(){return 0+P(this.O)};g.S=function(){var a=this.C;return null!=a?a:this.C=a=1698259290^we(this)};g.H=function(a,b){return null!=b&&this.constructor===b.constructor&&M.j(this.O,b.O)};
g.sb=function(a,b){return vf(Ui,b)?Ze.j(rd(Fg.j(wg,this),this.la),b):new Pr(this.la,tg(Ze.j(this.O,b)),null)};g.Aa=function(a,b,c){return new Pr(this.la,U.o(this.O,b,c),null)};g.$=function(){return G(hg.j(Ue,this.O))};g.aa=function(a,b){return new Pr(b,this.O,this.C)};g.da=function(a,b){return nf(b)?this.Aa(null,Wc.j(b,0),Wc.j(b,1)):Lc(Uc,this,b)};
function Qr(a){a=null!=a&&(a.v&64||t===a.R)?W(Ii,a):a;var b=D.j(a,Yl),c=D.j(a,un),d=D.j(a,xk),e=D.j(a,Kl);return function(f){var h=M.j(d,"GET")&&null==e?c:e;return w(h)?[z.f(f),w(ej(/\?/,f))?"\x26":"?",zr(b,h)].join(""):f}}function Rr(a,b,c){this.la=a;this.O=b;this.C=c;this.v=2230716170;this.N=139264}g=Rr.prototype;g.na=function(a,b){return this.T(null,b,null)};g.T=function(a,b,c){return D.o(this.O,b,c)};
g.fb=function(a,b,c){return Lc(function(d,e){var f=T(e,0,null);e=T(e,1,null);return b.o?b.o(d,f,e):b.call(null,d,f,e)},c,this)};g.Zb=function(a,b){a=null!=b&&(b.v&64||t===b.R)?W(Ii,b):b;b=D.j(a,xk);b=M.j(b,"GET")?Ae:Hf;a=ch(a,hm,Qr(a));return b.f?b.f(a):b.call(null,a)};g.$b=function(a,b){return b};g.W=function(a,b,c){return ij(b,function(d){return ij(b,pj,""," ","",c,d)},"#ajax.interceptors.ProcessUrlParameters{",", ","}",c,hg.j(Ue,this.O))};
g.xa=function(){return new Vh(this,0,Ue,w(this.O)?Yd(this.O):ug())};g.Z=function(){return this.la};g.Y=function(){return 0+P(this.O)};g.S=function(){var a=this.C;return null!=a?a:this.C=a=-516728758^we(this)};g.H=function(a,b){return null!=b&&this.constructor===b.constructor&&M.j(this.O,b.O)};g.sb=function(a,b){return vf(Ui,b)?Ze.j(rd(Fg.j(wg,this),this.la),b):new Rr(this.la,tg(Ze.j(this.O,b)),null)};g.Aa=function(a,b,c){return new Rr(this.la,U.o(this.O,b,c),null)};
g.$=function(){return G(hg.j(Ue,this.O))};g.aa=function(a,b){return new Rr(b,this.O,this.C)};g.da=function(a,b){return nf(b)?this.Aa(null,Wc.j(b,0),Wc.j(b,1)):Lc(Uc,this,b)};function Sr(a,b,c){this.la=a;this.O=b;this.C=c;this.v=2230716170;this.N=139264}g=Sr.prototype;g.na=function(a,b){return this.T(null,b,null)};g.T=function(a,b,c){return D.o(this.O,b,c)};g.fb=function(a,b,c){return Lc(function(d,e){var f=T(e,0,null);e=T(e,1,null);return b.o?b.o(d,f,e):b.call(null,d,f,e)},c,this)};
g.Zb=function(a,b){a=null!=b&&(b.v&64||t===b.R)?W(Ii,b):b;return null==D.j(a,fm)?a:Ae(a)};g.$b=function(a,b){return b};g.W=function(a,b,c){return ij(b,function(d){return ij(b,pj,""," ","",c,d)},"#ajax.interceptors.DirectSubmission{",", ","}",c,hg.j(Ue,this.O))};g.xa=function(){return new Vh(this,0,Ue,w(this.O)?Yd(this.O):ug())};g.Z=function(){return this.la};g.Y=function(){return 0+P(this.O)};g.S=function(){var a=this.C;return null!=a?a:this.C=a=-1077152635^we(this)};
g.H=function(a,b){return null!=b&&this.constructor===b.constructor&&M.j(this.O,b.O)};g.sb=function(a,b){return vf(Ui,b)?Ze.j(rd(Fg.j(wg,this),this.la),b):new Sr(this.la,tg(Ze.j(this.O,b)),null)};g.Aa=function(a,b,c){return new Sr(this.la,U.o(this.O,b,c),null)};g.$=function(){return G(hg.j(Ue,this.O))};g.aa=function(a,b){return new Sr(b,this.O,this.C)};g.da=function(a,b){return nf(b)?this.Aa(null,Wc.j(b,0),Wc.j(b,1)):Lc(Uc,this,b)};
var Tr=new X(null,3,5,Y,[new Rr(null,null,null),new Sr(null,null,null),new Pr(null,null,null)],null);function Ur(a){var b=Vr;a=null!=a&&(a.v&64||t===a.R)?W(Ii,a):a;var c=D.j(a,yn);return c instanceof Nr?c:nf(c)?b.f?b.f(a):b.call(null,a):lf(c)?Or(c):c instanceof E?qr(new X(null,2,5,Y,["keywords are not allowed as response formats in ajax calls: ",c],null)):uf(c)?Or(new u(null,3,[em,c,Ik,"custom",qk,"*/*"],null)):qr(new X(null,2,5,Y,["unrecognized response format: ",c],null))};var Wr=function(a){return function(){function b(e){e=null!=e&&(e.v&64||t===e.R)?W(Ii,e):e;var f=D.j(e,Bl),h=D.j(e,Ml),k=D.j(e,Xk);return Or(new u(null,3,[em,function(l){l=lr(l);l=w(w(f)?M.j(0,l.indexOf(f)):f)?l.substring(f.length):l;return a.o?a.o(k,h,l):a.call(null,k,h,l)},Ik,["JSON",w(f)?[" prefix '",z.f(f),"'"].join(""):null,w(h)?" keywordize":null].join(""),qk,new X(null,1,5,Y,["application/json"],null)],null))}function c(){return d.f(wg)}var d=null;d=function(e){switch(arguments.length){case 0:return c.call(this);
case 1:return b.call(this,e)}throw Error("Invalid arity: "+arguments.length);};d.D=c;d.f=b;return d}()}(function(a,b,c){c=JSON.parse(c);return w(a)?c:Ij(c,S([Jj,b]))});function Xr(a,b){return null==b||lf(b)?b:nf(b)?Xr(a,Cm(b)):b.f?b.f(a):b.call(null,a)}function Yr(a,b){a=nf(b)?J(b):qk.f(Xr(a,b));return null==a?new X(null,1,5,Y,["*/*"],null):"string"===typeof a?new X(null,1,5,Y,[a],null):a}function Zr(a){return function(b){b=nf(b)?J(b):qk.f(Xr(a,b));return null==b?new X(null,1,5,Y,["*/*"],null):"string"===typeof b?new X(null,1,5,Y,[b],null):b}}function $r(a){return function(b){return M.j(b,"*/*")||0<=a.indexOf(b)}}
function as(a,b){return function(c){c=Yr(b,c);return Bg($r(a),c)}}function bs(a){return function(b){var c=null!=a&&(a.v&64||t===a.R)?W(Ii,a):a;var d=D.j(c,yn),e=mr(b,"Content-Type");c=Xr(c,J(Ug(as(w(e)?e:"",c),d)));c=em.f(c);return c.f?c.f(b):c.call(null,b)}}function Vr(a){var b=null!=a&&(a.v&64||t===a.R)?W(Ii,a):a;var c=D.j(b,yn);b=nf(c)?Tg(Zr(b),S([c])):Yr(b,c);return Or(new u(null,3,[em,bs(a),Ol,["(from ",z.f(b),")"].join(""),qk,b],null))};function cs(){0!=ds&&(es[na(this)]=this);this.Nb=this.Nb;this.kb=this.kb}var ds=0,es={};cs.prototype.Nb=!1;cs.prototype.dispose=function(){if(!this.Nb&&(this.Nb=!0,this.Va(),0!=ds)){var a=na(this);if(0!=ds&&this.kb&&0<this.kb.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete es[a]}};cs.prototype.Va=function(){if(this.kb)for(;this.kb.length;)this.kb.shift()()};
function fs(a){a&&"function"==typeof a.dispose&&a.dispose()};var gs=!Pp||9<=Number($p),hs=Pp&&!Zp("9");!Sp||Zp("528");Rp&&Zp("1.9b")||Pp&&Zp("8")||Op&&Zp("9.5")||Sp&&Zp("528");Rp&&!Zp("8")||Pp&&Zp("9");var is=function(){if(!ha.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{ha.addEventListener("test",ia,b),ha.removeEventListener("test",ia,b)}catch(c){}return a}();function js(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.Cb=!1;this.pe=!0}js.prototype.stopPropagation=function(){this.Cb=!0};js.prototype.preventDefault=function(){this.defaultPrevented=!0;this.pe=!1};function ks(a,b){js.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.key="";this.charCode=this.keyCode=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.pointerId=0;this.pointerType="";this.Pb=null;a&&this.init(a,b)}wa(ks,js);var ls={2:"touch",3:"pen",4:"mouse"};
ks.prototype.init=function(a,b){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;if(b=a.relatedTarget){if(Rp){a:{try{Aa(b.nodeName);var e=!0;break a}catch(f){}e=!1}e||(b=null)}}else"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=
d.screenY||0):(this.offsetX=Sp||void 0!==a.offsetX?a.offsetX:a.layerX,this.offsetY=Sp||void 0!==a.offsetY?a.offsetY:a.layerY,this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.keyCode=a.keyCode||0;this.key=a.key||"";this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.pointerId=
a.pointerId||0;this.pointerType="string"===typeof a.pointerType?a.pointerType:ls[a.pointerType]||"";this.state=a.state;this.Pb=a;a.defaultPrevented&&this.preventDefault()};ks.prototype.stopPropagation=function(){ks.Db.stopPropagation.call(this);this.Pb.stopPropagation?this.Pb.stopPropagation():this.Pb.cancelBubble=!0};
ks.prototype.preventDefault=function(){ks.Db.preventDefault.call(this);var a=this.Pb;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,hs)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var ms="closure_listenable_"+(1E6*Math.random()|0);function ns(a){return!(!a||!a[ms])}var os=0;function ps(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.Nc=e;this.key=++os;this.Vb=this.zc=!1}function qs(a){a.Vb=!0;a.listener=null;a.proxy=null;a.src=null;a.Nc=null};function rs(a){this.src=a;this.listeners={};this.vc=0}rs.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.listeners[f];a||(a=this.listeners[f]=[],this.vc++);var h=ss(a,b,d,e);-1<h?(b=a[h],c||(b.zc=!1)):(b=new ps(b,this.src,f,!!d,e),b.zc=c,a.push(b));return b};
rs.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.listeners))return!1;var e=this.listeners[a];b=ss(e,b,c,d);return-1<b?(qs(e[b]),Array.prototype.splice.call(e,b,1),0==e.length&&(delete this.listeners[a],this.vc--),!0):!1};function ts(a,b){var c=b.type;if(c in a.listeners){var d=a.listeners[c],e=Ma(d,b),f;(f=0<=e)&&Array.prototype.splice.call(d,e,1);f&&(qs(b),0==a.listeners[c].length&&(delete a.listeners[c],a.vc--))}}
rs.prototype.removeAll=function(a){a=a&&a.toString();var b=0,c;for(c in this.listeners)if(!a||c==a){for(var d=this.listeners[c],e=0;e<d.length;e++)++b,qs(d[e]);delete this.listeners[c];this.vc--}return b};rs.prototype.ic=function(a,b,c,d){a=this.listeners[a.toString()];var e=-1;a&&(e=ss(a,b,c,d));return-1<e?a[e]:null};function ss(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.Vb&&f.listener==b&&f.capture==!!c&&f.Nc==d)return e}return-1};var us="closure_lm_"+(1E6*Math.random()|0),vs={},ws=0;function xs(a,b,c,d,e){if(d&&d.once)return ys(a,b,c,d,e);if(ja(b)){for(var f=0;f<b.length;f++)xs(a,b[f],c,d,e);return null}c=zs(c);return ns(a)?a.Bb(b,c,ma(d)?!!d.capture:!!d,e):As(a,b,c,!1,d,e)}
function As(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var h=ma(e)?!!e.capture:!!e,k=Bs(a);k||(a[us]=k=new rs(a));c=k.add(b,c,d,h,f);if(c.proxy)return c;d=Cs();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)is||(e=h),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(Ds(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");ws++;return c}
function Cs(){var a=Es,b=gs?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function ys(a,b,c,d,e){if(ja(b)){for(var f=0;f<b.length;f++)ys(a,b[f],c,d,e);return null}c=zs(c);return ns(a)?a.ce(b,c,ma(d)?!!d.capture:!!d,e):As(a,b,c,!0,d,e)}function Fs(a,b,c,d,e){if(ja(b))for(var f=0;f<b.length;f++)Fs(a,b[f],c,d,e);else d=ma(d)?!!d.capture:!!d,c=zs(c),ns(a)?a.Gd(b,c,d,e):a&&(a=Bs(a))&&(b=a.ic(b,c,d,e))&&Gs(b)}
function Gs(a){if("number"!==typeof a&&a&&!a.Vb){var b=a.src;if(ns(b))ts(b.ib,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(Ds(c),d):b.addListener&&b.removeListener&&b.removeListener(d);ws--;(c=Bs(b))?(ts(c,a),0==c.vc&&(c.src=null,b[us]=null)):qs(a)}}}function Ds(a){return a in vs?vs[a]:vs[a]="on"+a}
function Hs(a,b,c,d){var e=!0;if(a=Bs(a))if(b=a.listeners[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.Vb&&(f=Is(f,d),e=e&&!1!==f)}return e}function Is(a,b){var c=a.listener,d=a.Nc||a.src;a.zc&&Gs(a);return c.call(d,b)}
function Es(a,b){if(a.Vb)return!0;if(!gs){if(!b)a:{b=["window","event"];for(var c=ha,d=0;d<b.length;d++)if(c=c[b[d]],null==c){b=null;break a}b=c}d=b;b=new ks(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(h){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.currentTarget;e;e=e.parentNode)d.push(e);a=a.type;for(e=d.length-1;!b.Cb&&0<=e;e--){b.currentTarget=d[e];var f=Hs(d[e],a,!0,b);c=c&&f}for(e=0;!b.Cb&&e<d.length;e++)b.currentTarget=
d[e],f=Hs(d[e],a,!1,b),c=c&&f}return c}return Is(a,new ks(b,this))}function Bs(a){a=a[us];return a instanceof rs?a:null}var Js="__closure_events_fn_"+(1E9*Math.random()>>>0);function zs(a){if(la(a))return a;a[Js]||(a[Js]=function(b){return a.handleEvent(b)});return a[Js]};function Ks(){cs.call(this);this.ib=new rs(this);this.Be=this;this.Ad=null}wa(Ks,cs);Ks.prototype[ms]=!0;g=Ks.prototype;g.addEventListener=function(a,b,c,d){xs(this,a,b,c,d)};g.removeEventListener=function(a,b,c,d){Fs(this,a,b,c,d)};
g.dispatchEvent=function(a){var b,c=this.Ad;if(c)for(b=[];c;c=c.Ad)b.push(c);c=this.Be;var d=a.type||a;if("string"===typeof a)a=new js(a,c);else if(a instanceof js)a.target=a.target||c;else{var e=a;a=new js(d,c);ab(a,e)}e=!0;if(b)for(var f=b.length-1;!a.Cb&&0<=f;f--){var h=a.currentTarget=b[f];e=Ls(h,d,!0,a)&&e}a.Cb||(h=a.currentTarget=c,e=Ls(h,d,!0,a)&&e,a.Cb||(e=Ls(h,d,!1,a)&&e));if(b)for(f=0;!a.Cb&&f<b.length;f++)h=a.currentTarget=b[f],e=Ls(h,d,!1,a)&&e;return e};
g.Va=function(){Ks.Db.Va.call(this);this.removeAllListeners();this.Ad=null};g.Bb=function(a,b,c,d){return this.ib.add(String(a),b,!1,c,d)};g.ce=function(a,b,c,d){return this.ib.add(String(a),b,!0,c,d)};g.Gd=function(a,b,c,d){this.ib.remove(String(a),b,c,d)};g.removeAllListeners=function(a){return this.ib?this.ib.removeAll(a):0};
function Ls(a,b,c,d){b=a.ib.listeners[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var h=b[f];if(h&&!h.Vb&&h.capture==c){var k=h.listener,l=h.Nc||h.src;h.zc&&ts(a.ib,h);e=!1!==k.call(l,d)&&e}}return e&&0!=d.pe}g.ic=function(a,b,c,d){return this.ib.ic(String(a),b,c,d)};function Ms(a,b){Ks.call(this);this.Rc=a||1;this.uc=b||Ns;this.Md=sa(this.tf,this);this.be=va()}wa(Ms,Ks);Ms.prototype.enabled=!1;var Ns=ha;g=Ms.prototype;g.sa=null;g.setInterval=function(a){this.Rc=a;this.sa&&this.enabled?(this.stop(),this.start()):this.sa&&this.stop()};g.tf=function(){if(this.enabled){var a=va()-this.be;0<a&&a<.8*this.Rc?this.sa=this.uc.setTimeout(this.Md,this.Rc-a):(this.sa&&(this.uc.clearTimeout(this.sa),this.sa=null),this.dispatchEvent("tick"),this.enabled&&(this.stop(),this.start()))}};
g.start=function(){this.enabled=!0;this.sa||(this.sa=this.uc.setTimeout(this.Md,this.Rc),this.be=va())};g.stop=function(){this.enabled=!1;this.sa&&(this.uc.clearTimeout(this.sa),this.sa=null)};g.Va=function(){Ms.Db.Va.call(this);this.stop();delete this.uc};function Os(a,b,c){if(la(a))c&&(a=sa(a,c));else if(a&&"function"==typeof a.handleEvent)a=sa(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:Ns.setTimeout(a,b||0)};function Ps(a){switch(a){case 0:return"No Error";case 1:return"Access denied to content document";case 2:return"File not found";case 3:return"Firefox silently errored";case 4:return"Application custom error";case 5:return"An exception occurred";case 6:return"Http response at 400 or 500 level";case 7:return"Request was aborted";case 8:return"Request timed out";case 9:return"The resource is not available offline";default:return"Unrecognized error code"}};function Qs(){}Qs.prototype.Nd=null;function Rs(a){var b;(b=a.Nd)||(b={},Ss(a)&&(b[0]=!0,b[1]=!0),b=a.Nd=b);return b};var Ts;function Us(){}wa(Us,Qs);function Vs(a){return(a=Ss(a))?new ActiveXObject(a):new XMLHttpRequest}function Ss(a){if(!a.$d&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.$d=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.$d}Ts=new Us;function Ws(a){Ks.call(this);this.headers=new kc;this.$c=a||null;this.nb=!1;this.Zc=this.P=null;this.ae=this.Sc="";this.Tb=0;this.Ab="";this.yb=this.yd=this.Qc=this.ud=!1;this.tc=0;this.Yc=null;this.Wc=Xs;this.Hd=this.me=this.Kd=!1}wa(Ws,Ks);var Xs="",Ys=/^https?$/i,Zs=["POST","PUT"];g=Ws.prototype;g.setTimeoutInterval=function(a){this.tc=Math.max(0,a)};g.setResponseType=function(a){this.Wc=a};g.setWithCredentials=function(a){this.Kd=a};g.setProgressEventsEnabled=function(a){this.me=a};
g.send=function(a,b,c,d){if(this.P)throw Error("[goog.net.XhrIo] Object is active with another request\x3d"+this.Sc+"; newUri\x3d"+a);b=b?b.toUpperCase():"GET";this.Sc=a;this.Ab="";this.Tb=0;this.ae=b;this.ud=!1;this.nb=!0;this.P=this.$c?Vs(this.$c):Vs(Ts);this.Zc=this.$c?Rs(this.$c):Rs(Ts);this.P.onreadystatechange=sa(this.fe,this);this.me&&"onprogress"in this.P&&(this.P.onprogress=sa(function(f){this.ee(f,!0)},this),this.P.upload&&(this.P.upload.onprogress=sa(this.ee,this)));try{this.getStatus(),
this.yd=!0,this.P.open(b,String(a),!0),this.yd=!1}catch(f){this.getStatus();$s(this,f);return}a=c||"";var e=this.headers.clone();d&&jc(d,function(f,h){e.set(h,f)});d=Pa(e.Sb());c=ha.FormData&&a instanceof ha.FormData;!(0<=Ma(Zs,b))||d||c||e.set("Content-Type","application/x-www-form-urlencoded;charset\x3dutf-8");e.forEach(function(f,h){this.P.setRequestHeader(h,f)},this);this.Wc&&(this.P.responseType=this.Wc);"withCredentials"in this.P&&this.P.withCredentials!==this.Kd&&(this.P.withCredentials=this.Kd);
try{at(this),0<this.tc&&(this.Hd=bt(this.P),this.getStatus(),this.Hd?(this.P.timeout=this.tc,this.P.ontimeout=sa(this.ue,this)):this.Yc=Os(this.ue,this.tc,this)),this.getStatus(),this.Qc=!0,this.P.send(a),this.Qc=!1}catch(f){this.getStatus(),$s(this,f)}};function bt(a){return Pp&&Zp(9)&&"number"===typeof a.timeout&&void 0!==a.ontimeout}function Qa(a){return"content-type"==a.toLowerCase()}
g.ue=function(){"undefined"!=typeof fa&&this.P&&(this.Ab="Timed out after "+this.tc+"ms, aborting",this.Tb=8,this.getStatus(),this.dispatchEvent("timeout"),this.abort(8))};function $s(a,b){a.nb=!1;a.P&&(a.yb=!0,a.P.abort(),a.yb=!1);a.Ab=b;a.Tb=5;ct(a);dt(a)}function ct(a){a.ud||(a.ud=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}
g.abort=function(a){this.P&&this.nb&&(this.getStatus(),this.nb=!1,this.yb=!0,this.P.abort(),this.yb=!1,this.Tb=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),dt(this))};g.Va=function(){this.P&&(this.nb&&(this.nb=!1,this.yb=!0,this.P.abort(),this.yb=!1),dt(this,!0));Ws.Db.Va.call(this)};g.fe=function(){this.Nb||(this.yd||this.Qc||this.yb?et(this):this.jf())};g.jf=function(){et(this)};
function et(a){if(a.nb&&"undefined"!=typeof fa)if(a.Zc[1]&&4==ft(a)&&2==a.getStatus())a.getStatus();else if(a.Qc&&4==ft(a))Os(a.fe,0,a);else if(a.dispatchEvent("readystatechange"),4==ft(a)){a.getStatus();a.nb=!1;try{var b=a.getStatus();a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break a;default:c=!1}var d;if(!(d=c)){var e;if(e=0===b){var f=String(a.Sc).match(nc)[1]||null;if(!f&&ha.self&&ha.self.location){var h=ha.self.location.protocol;f=h.substr(0,h.length-
1)}e=!Ys.test(f?f.toLowerCase():"")}d=e}d?(a.dispatchEvent("complete"),a.dispatchEvent("success")):(a.Tb=6,a.Ab=a.getStatusText()+" ["+a.getStatus()+"]",ct(a))}finally{dt(a)}}}g.ee=function(a,b){this.dispatchEvent(gt(a,"progress"));this.dispatchEvent(gt(a,b?"downloadprogress":"uploadprogress"))};function gt(a,b){return{type:b,lengthComputable:a.lengthComputable,loaded:a.loaded,total:a.total}}
function dt(a,b){if(a.P){at(a);var c=a.P,d=a.Zc[0]?ia:null;a.P=null;a.Zc=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){}}}function at(a){a.P&&a.Hd&&(a.P.ontimeout=null);a.Yc&&(Ns.clearTimeout(a.Yc),a.Yc=null)}g.isActive=function(){return!!this.P};function ft(a){return a.P?a.P.readyState:0}g.getStatus=function(){try{return 2<ft(this)?this.P.status:-1}catch(a){return-1}};g.getStatusText=function(){try{return 2<ft(this)?this.P.statusText:""}catch(a){return""}};
g.getResponse=function(){try{if(!this.P)return null;if("response"in this.P)return this.P.response;switch(this.Wc){case Xs:case "text":return this.P.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in this.P)return this.P.mozResponseArrayBuffer}return null}catch(a){return null}};g.getResponseHeader=function(a){if(this.P&&4==ft(this))return a=this.P.getResponseHeader(a),null===a?void 0:a};g.getAllResponseHeaders=function(){return this.P&&4==ft(this)?this.P.getAllResponseHeaders()||"":""};
g.getResponseHeaders=function(){for(var a={},b=this.getAllResponseHeaders().split("\r\n"),c=0;c<b.length;c++)if(!/^[\s\xa0]*$/.test(b[c])){var d=hc(b[c]),e=d[0];d=d[1];if("string"===typeof d){d=d.trim();var f=a[e]||[];a[e]=f;f.push(d)}}return Xa(a,function(h){return h.join(", ")})};g.getLastErrorCode=function(){return this.Tb};function ht(a){return a instanceof E?Yf(a).toUpperCase():a}function it(a,b){return pr(b,a)}function jt(a,b){return function(c){c=Lc(it,c,b);return a.f?a.f(c):a.call(null,c)}}var kt=Kg(Ue);function lt(a){var b=Ur(a);return ch(ch(a,xk,ht),Vk,function(c){return hg.A(new X(null,1,5,Y,[b],null),w(c)?c:C(kt),S([Tr]))})}function mt(a,b){return or(b,a)}
function nt(a){a=lt(a);a=null!=a&&(a.v&64||t===a.R)?W(Ii,a):a;var b=D.j(a,Vk);a=Lc(mt,a,b);b=nn(b);var c=null!=a&&(a.v&64||t===a.R)?W(Ii,a):a;c=D.j(c,bm);b=w(c)?jt(c,b):qr("No ajax handler provided.");c=Im.f(a);c=w(c)?c:new Ws;return ir(c,a,b)};function ot(a){cs.call(this);this.vd=a;this.fa={}}wa(ot,cs);var pt=[];g=ot.prototype;g.Bb=function(a,b,c,d){ja(b)||(b&&(pt[0]=b.toString()),b=pt);for(var e=0;e<b.length;e++){var f=xs(a,b[e],c||this.handleEvent,d||!1,this.vd||this);if(!f)break;this.fa[f.key]=f}return this};g.ce=function(a,b,c,d){return qt(this,a,b,c,d)};function qt(a,b,c,d,e,f){if(ja(c))for(var h=0;h<c.length;h++)qt(a,b,c[h],d,e,f);else{b=ys(b,c,d||a.handleEvent,e,f||a.vd||a);if(!b)return a;a.fa[b.key]=b}return a}
g.Gd=function(a,b,c,d,e){if(ja(b))for(var f=0;f<b.length;f++)this.Gd(a,b[f],c,d,e);else c=c||this.handleEvent,d=ma(d)?!!d.capture:!!d,e=e||this.vd||this,c=zs(c),d=!!d,b=ns(a)?a.ic(b,c,d,e):a?(a=Bs(a))?a.ic(b,c,d,e):null:null,b&&(Gs(b),delete this.fa[b.key])};g.removeAll=function(){Wa(this.fa,function(a,b){this.fa.hasOwnProperty(b)&&Gs(a)},this);this.fa={}};g.Va=function(){ot.Db.Va.call(this);this.removeAll()};g.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};g=Ws.prototype;g.ad=function(a,b,c){var d=null!=b&&(b.v&64||t===b.R)?W(Ii,b):b;a=D.j(d,hm);b=D.j(d,xk);var e=D.j(d,fm),f=D.j(d,wk),h=D.o(d,lk,0),k=D.o(d,sm,!1),l=D.j(d,yn);d=D.j(d,pn);l=Vl.f(l);w(l)&&this.setResponseType(Yf(l));$e(d)&&(this.setProgressEventsEnabled(!0),xs(this,"uploadprogress",d));xs(this,"complete",function(m){m=m.target;return c.f?c.f(m):c.call(null,m)});this.setTimeoutInterval(h);this.setWithCredentials(k);this.send(a,b,e,Ej(f));return this};g.bd=function(){return this.getResponse()};
g.ed=function(){return this.getStatus()};g.fd=function(){return this.getStatusText()};g.cd=function(a,b){return this.getResponseHeader(b)};g.hd=function(){return M.j(this.getLastErrorCode(),7)};function rt(a){a=a.target.readyState;var b=new u(null,6,[0,Sl,1,mn,2,Em,3,Dm,4,qn,bl,!0],null);return b.f?b.f(a):b.call(null,a)}var st;if(M.j("default","nodejs")){var uu=require("xmlhttprequest").XMLHttpRequest;st=global.XMLHttpRequest=uu}else st=XMLHttpRequest;var ut=st;g=ut.prototype;
g.ad=function(a,b,c){var d=null!=b&&(b.v&64||t===b.R)?W(Ii,b):b,e=D.j(d,hm),f=D.j(d,xk);a=D.j(d,fm);b=D.j(d,wk);var h=D.o(d,lk,0),k=D.o(d,sm,!1);d=D.j(d,yn);var l=this;l.withCredentials=k;l.onreadystatechange=function(m){return M.j(qn,rt(m))?c.f?c.f(l):c.call(null,l):null};l.open(f,e,!0);l.timeout=h;e=Vl.f(d);w(e)&&(l.responseType=Yf(e));b=G(b);e=null;for(h=f=0;;)if(h<f)d=e.V(null,h),k=T(d,0,null),d=T(d,1,null),l.setRequestHeader(k,d),h+=1;else if(b=G(b))of(b)?(f=Rd(b),b=Sd(b),e=f,f=P(f)):(f=J(b),
e=T(f,0,null),f=T(f,1,null),l.setRequestHeader(e,f),b=K(b),e=null,f=0),h=0;else break;l.send(w(a)?a:"");return l};g.bd=function(){return this.response};g.ed=function(){return this.status};g.fd=function(){return this.statusText};g.cd=function(a,b){return this.getResponseHeader(b)};g.hd=function(){return M.j(0,this.readyState)};gr.j(tn,function(){return hr});gr.j(am,function(a,b){T(b,0,null);b=T(b,1,null);return U.o(a,Zl,b)});gr.j(bn,function(a,b){T(b,0,null);b=T(b,1,null);return U.o(a,nm,Z.j(function(c){var d=T(c,0,null);c=T(c,1,null);return new X(null,2,5,Y,[d,Nn(c)],null)},b))});
var vu=new X(null,4,5,Y,[Wq,Vq,null,function(a){return wq(S([on,Gm,cl,function(b){var c=ym.f(b);c=null!=c&&(c.v&64||t===c.R)?W(Ii,c):c;var d=D.j(c,wl);return U.o(b,yl,a.j?a.j(c,d):a.call(null,c,d))}]))}(function(a){a=null!=a&&(a.v&64||t===a.R)?W(Ii,a):a;a=D.j(a,Xm);return new u(null,2,[Xm,U.o(a,nm,xn),Zm,new u(null,4,[xk,uk,hm,"https://pomber.github.io/covid19/timeseries.json",yn,Wr.D?Wr.D():Wr.call(null),el,new X(null,1,5,Y,[bn],null)],null)],null)})],null);rq(wl,en,Vg(Dc,Xg(vu)));function wt(a){js.call(this,"navigate");this.token=a}wa(wt,js);function xt(a,b){a=[a];for(var c=b.length-1;0<=c;--c)a.push(typeof b[c],b[c]);return a.join("\x0B")};function yt(a,b,c,d){Ks.call(this);if(a&&!b)throw Error("Can't use invisible history without providing a blank page.");if(c)var e=c;else{e="history_state"+zt;var f=ac("input",{type:"text",name:e,id:e,style:new cb(db,"display:none")});document.write(Vb(f));e=aq(e)}this.Oc=e;c=c?(c=9==c.nodeType?c:c.ownerDocument||c.document)?c.parentWindow||c.defaultView:window:window;this.mb=c;this.wd=b;Pp&&!b&&(this.wd="https"==window.location.protocol?new ib(jb,fb(new cb(db,"https:///"))):new ib(jb,fb(new cb(db,
'javascript:""'))));this.sa=new Ms(At);b=ua(fs,this.sa);this.Nb?b():(this.kb||(this.kb=[]),this.kb.push(b));this.Xb=!a;this.xb=new ot(this);if(a||Bt){if(d)var h=d;else{a="history_iframe"+zt;c=this.wd;d={id:a,style:new cb(db,"display:none"),sandbox:void 0};c&&lb(c);b={};b.src=c||null;b.srcdoc=null;c={sandbox:""};e={};for(h in b)e[h]=b[h];for(h in c)e[h]=c[h];if(d)for(h in d){f=h.toLowerCase();if(f in b)throw Error("");f in c&&delete e[f];e[h]=d[h]}h=bc("iframe",e,void 0);document.write(Vb(h));h=aq(a)}this.Pc=
h;this.ve=!0}Bt&&(this.xb.Bb(this.mb,"load",this.gf),this.se=this.td=!1);this.Xb?Ct(this,Dt(this),!0):Et(this,this.Oc.value);zt++}wa(yt,Ks);yt.prototype.Lc=!1;yt.prototype.Ub=!1;yt.prototype.oc=null;var Ft=function(a,b){var c=b||xt;return function(){var d=this||ha;d=d.closure_memoize_cache_||(d.closure_memoize_cache_={});var e=c(na(a),arguments);return d.hasOwnProperty(e)?d[e]:d[e]=a.apply(this,arguments)}}(function(){return Pp?8<=Number($p):"onhashchange"in ha}),Bt=Pp&&!(8<=Number($p));g=yt.prototype;
g.pc=null;g.Va=function(){yt.Db.Va.call(this);this.xb.dispose();this.setEnabled(!1)};
g.setEnabled=function(a){if(a!=this.Lc)if(Bt&&!this.td)this.se=a;else if(a)if(Op?this.xb.Bb(this.mb.document,Gt,this.mf):Rp&&this.xb.Bb(this.mb,"pageshow",this.kf),Ft()&&this.Xb)this.xb.Bb(this.mb,"hashchange",this.hf),this.Lc=!0,this.dispatchEvent(new wt(Dt(this),!1));else{if(!Pp||!(Sb("iPad")||Sb("Android")&&!Sb("Mobile")||Sb("Silk"))&&(Sb("iPod")||Sb("iPhone")||Sb("Android")||Sb("IEMobile"))||this.td)this.xb.Bb(this.sa,"tick",sa(this.Ce,this,!0)),this.Lc=!0,Bt||(this.oc=Dt(this),this.dispatchEvent(new wt(Dt(this),
!1))),this.sa.start()}else this.Lc=!1,this.xb.removeAll(),this.sa.stop()};g.gf=function(){this.td=!0;this.Oc.value&&Et(this,this.Oc.value,!0);this.setEnabled(this.se)};g.kf=function(a){a.Pb.persisted&&(this.setEnabled(!1),this.setEnabled(!0))};g.hf=function(){var a=Ht(this.mb);a!=this.oc&&It(this,a,!0)};function Dt(a){return null!=a.pc?a.pc:a.Xb?Ht(a.mb):Jt(a)||""}function Ht(a){a=a.location.href;var b=a.indexOf("#");return 0>b?"":a.substring(b+1)}
function Ct(a,b,c){a=a.mb.location;var d=a.href.split("#")[0],e=-1!=a.href.indexOf("#");if(Bt||e||b)d+="#"+b;d!=a.href&&(b=new yb(zb,d),c?gc(a,b):fc(a,b))}function Et(a,b,c){if(a.ve||b!=Jt(a))if(a.ve=!1,b=encodeURIComponent(String(b)),Pp){var d=cq(a.Pc);d.open("text/html",c?"replace":void 0);c=ec(ac("title",{},a.mb.document.title),ac("body",{},b));d.write(Vb(c));d.close()}else d=lb(a.wd).toString()+"#"+b,(a=a.Pc.contentWindow)&&(c?gc(a.location,d):fc(a.location,d))}
function Jt(a){if(Pp)return a=cq(a.Pc),a.body?decodeURIComponent(a.body.innerHTML.replace(/\+/g," ")):null;var b=a.Pc.contentWindow;if(b){try{var c=decodeURIComponent(Ht(b).replace(/\+/g," "))}catch(d){return a.Ub||(1!=a.Ub&&a.sa.setInterval(Kt),a.Ub=!0),null}a.Ub&&(0!=a.Ub&&a.sa.setInterval(At),a.Ub=!1);return c||null}return null}g.Ce=function(a){if(this.Xb){var b=Ht(this.mb);b!=this.oc&&It(this,b,a)}if(!this.Xb||Bt)if(b=Jt(this)||"",null==this.pc||b==this.pc)this.pc=null,b!=this.oc&&It(this,b,a)};
function It(a,b,c){a.oc=a.Oc.value=b;a.Xb?(Bt&&Et(a,b),Ct(a,b)):Et(a,b);a.dispatchEvent(new wt(Dt(a),c))}g.mf=function(){this.sa.stop();this.sa.start()};var Gt=["mousedown","keydown","mousemove"],zt=0,At=150,Kt=1E4;var Lt={},Mt={},Nt,Ot=function Ot(a,b){if(null!=a&&null!=a.Wb)return a.Wb(a,b);var d=Ot[q(null==a?null:a)];if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);d=Ot._;if(null!=d)return d.j?d.j(a,b):d.call(null,a,b);throw y("IRouteMatches.route-matches",a);},Pt=Kg(new u(null,1,[Bl,""],null));function Qt(){var a=new X(null,1,5,Y,[Bl],null);a=kf(a)?a:new X(null,1,5,Y,[a],null);return $g(C(Pt),a)}var Rt=encodeURIComponent;
if("undefined"===typeof Lt||"undefined"===typeof Mt||"undefined"===typeof ak)var ak=function(){var a=Kg(wg),b=Kg(wg),c=Kg(wg),d=Kg(wg),e=D.o(wg,il,Lj.D?Lj.D():Lj.call(null));return new Wj(ne.j(ea,"encode-pair"),function(f){T(f,0,null);f=T(f,1,null);return kf(f)||jf(f)?Tm:lf(f)||(null!=f?f.v&67108864||t===f.Se||(f.v?0:x(Cd,f)):x(Cd,f))?Ek:null},e,a,b,c,d)}();function St(a,b){return[Yf(a),"[",z.f(b),"]"].join("")}
Zj(Tm,function(a){var b=T(a,0,null);a=T(a,1,null);return Hn("\x26",Hg(function(c,d){c=hf(d)?new X(null,2,5,Y,[St(b,c),d],null):new X(null,2,5,Y,[[Yf(b),"[]"].join(""),d],null);return ak.f?ak.f(c):ak.call(null,c)},a))});Zj(Ek,function(a){var b=T(a,0,null);a=T(a,1,null);a=Z.j(function(c){var d=T(c,0,null);c=T(c,1,null);d=new X(null,2,5,Y,[St(b,Yf(d)),c],null);return ak.f?ak.f(d):ak.call(null,d)},a);return Hn("\x26",a)});
Zj(Xj,function(a){var b=T(a,0,null),c=T(a,1,null);return[Yf(b),"\x3d",z.f(function(){var d=z.f(c);return Rt.f?Rt.f(d):Rt.call(null,d)}())].join("")});var Tt=decodeURIComponent;function Ut(a){a=gj(a);return Z.j(function(b){T(b,0,null);b=T(b,1,null);return gf(b)?0:w(dj(/\d+/,b))?parseInt(b):b},a)}
function Vt(a,b,c){a=Lc(function(d,e){return"number"!==typeof Se(e)||nf($g(d,Wi(e)))?d:ah(d,Wi(e),Ue)},a,function(d){return Hg(function(e){return Ng(e+1,d)},d)}(b));return 0===Se(b)?bh.F(a,Wi(b),Te,c):ah(a,b,c)}function Wt(a){a=Jn(a,/&/);a=Lc(function(b,c){c=Kn(c,/=/,2);var d=T(c,0,null);c=T(c,1,null);var e=dj(/([^\[\]]+)((?:\[[^\]]*\])*)?/,d);T(e,0,null);d=T(e,1,null);e=T(e,2,null);e=w(e)?Ut(e):null;d=R(d,e);return Vt(b,d,Tt.f?Tt.f(c):Tt.call(null,c))},wg,a);return Nn(a)}
function Xt(a,b){a=dj(a,b);return w(a)?kf(a)?a:new X(null,2,5,Y,[a,a],null):null}var Yt=Vi("\\.*+|?()[]{}$^");function Zt(a){return Lc(function(b,c){return w(Yt.f?Yt.f(c):Yt.call(null,c))?[z.f(b),"\\",z.f(c)].join(""):[z.f(b),z.f(c)].join("")},"",a)}function $t(a,b){return Bg(function(c){var d=T(c,0,null);c=T(c,1,null);d=ej(d,a);if(w(d)){var e=T(d,0,null);d=T(d,1,null);var f=Y;e=P(e);e=a.substring(e);return new X(null,2,5,f,[e,c.f?c.f(d):c.call(null,d)],null)}return null},b)}
function au(a,b){var c=a;a="";for(var d=Ue;;)if(G(c)){var e=$t(c,b);c=T(e,0,null);var f=T(e,1,null);e=T(f,0,null);f=T(f,1,null);a=[a,z.f(e)].join("");d=Te.j(d,f)}else return new X(null,2,5,Y,[hj(["^",a,"$"].join("")),Vg(Dc,d)],null)}
function bu(a){var b=new X(null,3,5,Y,[new X(null,2,5,Y,[/^\*([^\s.:*\/]*)/,function(f){f=G(f)?Xf.f(f):Mm;return new X(null,2,5,Y,["(.*?)",f],null)}],null),new X(null,2,5,Y,[/^:([^\s.:*\/]+)/,function(f){f=Xf.f(f);return new X(null,2,5,Y,["([^,;?/]+)",f],null)}],null),new X(null,2,5,Y,[/^([^:*]+)/,function(f){f=Zt(f);return new X(null,1,5,Y,[f],null)}],null)],null),c=au(a,b),d=T(c,0,null),e=T(c,1,null);if("undefined"===typeof Lt||"undefined"===typeof Mt||"undefined"===typeof Nt)Nt=function(f,h,k,
l,m,n){this.nf=f;this.De=h;this.vf=k;this.ne=l;this.params=m;this.ff=n;this.v=393216;this.N=0},Nt.prototype.aa=function(f,h){return new Nt(this.nf,this.De,this.vf,this.ne,this.params,h)},Nt.prototype.Z=function(){return this.ff},Nt.prototype.Wb=function(f,h){f=Xt(this.ne,h);return w(f)?(f=G(f),J(f),f=K(f),Ni(Fh,S([wg,Zg(2,2,Sg.j(this.params,Z.j(Tt,f)))]))):null},Nt.cf=function(){return new X(null,6,5,Y,[Ok,um,$m,Xl,Tl,Lk],null)},Nt.Ic=!0,Nt.Mb="secretary.core/t_secretary$core22576",Nt.pd=function(f){return Fd(f,
"secretary.core/t_secretary$core22576")};return new Nt(a,b,c,d,e,wg)}var cu=Kg(Ue);function du(a,b){a="string"===typeof a?bu(a):a;Mg.o(cu,Te,new X(null,2,5,Y,[a,b],null))}function eu(a){return Bg(function(b){var c=T(b,0,null);b=T(b,1,null);var d=Ot(c,a);return w(d)?new u(null,3,[rm,b,un,d,jm,c],null):null},C(cu))}function fu(a,b){return Lc(function(c,d){var e=T(d,0,null);d=T(d,1,null);var f=D.j(a,e);return w(dj(d,f))?c:U.o(c,e,new X(null,2,5,Y,[f,d],null))},wg,Zg(2,2,b))}
Ot.string=function(a,b){return bu(a).Wb(null,b)};RegExp.prototype.Wb=function(a,b){a=Xt(this,b);return w(a)?(a=G(a),J(a),a=K(a),Bh(a)):null};X.prototype.Wb=function(a,b){a=G(a);J(a);K(a);var c=G(this);a=J(c);c=K(c);b=bu(a).Wb(null,b);return gf(fu(b,c))?b:null};var wu=Cn(15,{});function xu(a){return wm.f(a)}Iq.j?Iq.j(Qm,xu):Iq.call(null,Qm,xu);function yu(a){return Zl.f(a)}Iq.j?Iq.j(fl,yu):Iq.call(null,fl,yu);
function zu(a){a=null!=a&&(a.v&64||t===a.R)?W(Ii,a):a;a=D.j(a,nm);return w(w(a)?!M.j(xn,a):a)?Bf(J,Ug(function(b){T(b,0,null);b=T(b,1,null);return tg(b)},Z.j(function(b){var c=T(b,0,null);b=T(b,1,null);return new X(null,2,5,Y,[c,Z.j(function(d){return ch(d,zk,wu)},Ug(function(d){var e=null!=d&&(d.v&64||t===d.R)?W(Ii,d):d;d=D.j(e,hk);e=D.j(e,Fl);return d>Math.sqrt(e)},Z.j(function(d){return U.o(Cm(d),hk,Fl.f(Cm(d))-Fl.f(J(d)))},Zg(2,1,b))))],null)},a))):null}Iq.j?Iq.j(vk,zu):Iq.call(null,vk,zu);
var Au=new X(null,1,5,Y,[vk],null);function Bu(a){return Z.j(rn.o(zk,J,Cm),a)}Iq.F?Iq.F(hu,Jk,Au,Bu):Iq.call(null,hu,Jk,Au,Bu);var Cu=new X(null,1,5,Y,[vk],null);
function Du(a,b){T(b,0,null);b=T(b,1,null);if(w(w(a)?!M.j(xn,a):a)){var c=Z.j(function(d){var e=T(d,0,null);d=T(d,1,null);return new u(null,3,[Wp,Fl.f(e),vt,Fl.f(d),jl,(hk.f(d)-hk.f(e))/(Fl.f(d)-Fl.f(e))],null)},Tg(function(d){T(d,0,null);d=T(d,1,null);return Zg(2,1,d)},S([a])));return Ug(function(d){T(d,0,null);return 0<=T(d,1,null)},Z.j(function(d){var e=Z.j(jl,Ug(function(f){var h=null!=f&&(f.v&64||t===f.R)?W(Ii,f):f;f=D.j(h,Wp);h=D.j(h,vt);return f<d&&h>=d},c));return new X(null,2,5,Y,[d,d*(Ff(Jf,
e)/P(e))],null)},b))}return null}Iq.F?Iq.F(Xp,Jk,Cu,Du):Iq.call(null,Xp,Jk,Cu,Du);var ip=Cn(24,{});Cn(27,{});var Eu=new hp;
function ju(){var a=function(){var b=new X(null,1,5,Y,[vk],null);return Fq.f?Fq.f(b):Fq.call(null,b)}();(function(){var b=new X(null,1,5,Y,[hu],null);return Fq.f?Fq.f(b):Fq.call(null,b)})();return w(C(a))?new X(null,2,5,Y,[Eu,new u(null,3,[yk,hg.f(Hg(function(b,c){var d=T(c,0,null);b=T(c,1,null);return new u(null,8,[ol,Z.j(Fl,b),nl,Z.j(hk,b),Vl,"scatter",im,"lines",wm,d,gk,Z.j(function(e){var f=null!=e&&(e.v&64||t===e.R)?W(Ii,e):e;e=D.j(f,zk);f=D.j(f,Fl);return[z.f(e.format("MMM Do"))," ",z.f(d),
": ",z.f(f)," cases"].join("")},b),Cl,"text",Zk,!0],null)},C(a))),mk,new u(null,5,[om,"New Covid-19 cases per cases",kn,new u(null,2,[Vl,"log",om,"new cases (logarithmic)"],null),ik,new u(null,2,[Vl,"log",om,"cases (logarithmic)"],null),Qk,new u(null,4,[hl,200,ql,200,kl,200,pl,200],null),gu,new u(null,2,[tt,"h",Yp,new u(null,1,[Tp,20],null)],null)],null),Wl,new u(null,2,[Il,"100vw",El,"100vh"],null)],null)],null):null}
function ku(){return new X(null,3,5,Y,[Al,new X(null,2,5,Y,[Hm,"This is the About Page."],null),new X(null,2,5,Y,[Al,new X(null,3,5,Y,[jl,new u(null,1,[Ql,"#/"],null),"go to Home Page"],null)],null)],null)}function lu(a){switch(a instanceof E?a.Ca:null){case "home-panel":return new X(null,1,5,Y,[ju],null);case "about-panel":return new X(null,1,5,Y,[ku],null);default:return new X(null,1,5,Y,[Al],null)}}function mu(a){return new X(null,2,5,Y,[lu,a],null)}
function nu(){var a=new X(null,1,5,Y,[fl],null);a=Fq.f?Fq.f(a):Fq.call(null,a);return new X(null,2,5,Y,[mu,C(a)],null)};function ou(a,b,c,d){var e=T(d,0,null);d=T(d,1,null);if(w(e))return a.f?a.f(d):a.call(null,d);a=Mi.A(S([new u(null,5,[hm,String(c.Sc),Ym,c.ae,Yk,"string"===typeof c.Ab?c.Ab:String(c.Ab),Gl,c.getLastErrorCode(),Uk,function(){var f=c.getLastErrorCode();return Ps(f)}()],null),d]));return b.f?b.f(a):b.call(null,a)}
function pu(a){a=null!=a&&(a.v&64||t===a.R)?W(Ii,a):a;var b=D.o(a,el,new X(null,1,5,Y,[$l],null)),c=D.o(a,pk,new X(null,1,5,Y,[rl],null)),d=new Ws;return Ze.A(U.A(a,Im,d,S([bm,Dg.F(ou,function(e){e=Te.j(b,e);return Sq.f?Sq.f(e):Sq.call(null,e)},function(e){e=Te.j(c,e);return Sq.f?Sq.f(e):Sq.call(null,e)},d)])),el,S([pk]))}
function qu(a){a=kf(a)?a:new X(null,1,5,Y,[a],null);a=G(a);for(var b=null,c=0,d=0;;)if(d<c){var e=b.V(null,d);e=pu(e);nt.f?nt.f(e):nt.call(null,e);d+=1}else if(a=G(a))of(a)?(c=Rd(a),a=Sd(a),b=c,c=P(c)):(e=J(a),b=pu(e),nt.f?nt.f(b):nt.call(null,b),a=K(a),b=null,c=0),d=0;else return null}Uq.j?Uq.j(Zm,qu):Uq.call(null,Zm,qu);var Fu=kf(Bl)?Bl:new X(null,1,5,Y,[Bl],null);Mg.F(Pt,ah,Fu,"#");du("/",function(a){return lf(a)?(null!=a&&(a.v&64||t===a.R)&&W(Ii,a),a=new X(null,2,5,Y,[am,Hk],null),Sq.f?Sq.f(a):Sq.call(null,a)):nf(a)?(a=new X(null,2,5,Y,[am,Hk],null),Sq.f?Sq.f(a):Sq.call(null,a)):null});du("/about",function(a){return lf(a)?(null!=a&&(a.v&64||t===a.R)&&W(Ii,a),a=new X(null,2,5,Y,[am,sk],null),Sq.f?Sq.f(a):Sq.call(null,a)):nf(a)?(a=new X(null,2,5,Y,[am,sk],null),Sq.f?Sq.f(a):Sq.call(null,a)):null});
(function(){var a=new yt;xs(a,"navigate",function(b){var c=Jn(Gn(b.token,hj(["^",z.f(Qt())].join("")),""),/\?/);b=T(c,0,null);c=T(c,1,null);var d=M.j("/",J(b))?b:["/",z.f(b)].join("");b=w(c)?new u(null,1,[an,Wt(c)],null):null;c=eu(d);d=null!=c&&(c.v&64||t===c.R)?W(Ii,c):c;c=D.j(d,rm);d=D.j(d,un);c=w(c)?c:Hf;b=Mi.A(S([d,b]));return c.f?c.f(b):c.call(null,b)});a.setEnabled(!0)})();var Gu=new X(null,1,5,Y,[tn],null);Tq.f?Tq.f(Gu):Tq.call(null,Gu);var Hu=new X(null,1,5,Y,[en],null);
Tq.f?Tq.f(Hu):Tq.call(null,Hu);Cq.D?Cq.D():Cq.call(null);(function(){var a=new X(null,1,5,Y,[nu],null),b=document.getElementById("app");Do();return Lp(function(){return Ep($e(a)?a.D?a.D():a.call(null):a)},b)})();
}).call(this);